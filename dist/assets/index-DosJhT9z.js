const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-9xnc2Wqf.js","assets/index-DkFdzkCr.js","assets/index-Chjiymov.js","assets/index-CTvT0PJr.js","assets/tooltip-CeT8TWZO.js","assets/extends-CF3RwP-h.js","assets/eye-off-CPIOUVAy.js","assets/eye-3aWynsIM.js","assets/settings-BxYDetoK.js","assets/useCardHoverEffect-B8hNuXWS.js","assets/skeleton-Dtyu7jfQ.js","assets/receipt-BUqmdCXQ.js","assets/landmark-6XeQXr0E.js","assets/shield-check-sf02tfQl.js","assets/trending-down-C0IVpLP_.js","assets/trending-up-B1oXkSIa.js","assets/target-B9JN3CdB.js","assets/PieChart-C-IAs_Ju.js","assets/alert-dialog-DPQNfubJ.js","assets/list-Cu720GNL.js","assets/more-vertical-DzrPyr0B.js","assets/pen-square-B4TDd2Gh.js","assets/pt-BR-Dqdi3X7i.js","assets/cake-CkTIRtdz.js","assets/progress-CNZ4UlLz.js","assets/badge-Bl6V8i8p.js","assets/isSameMonth-BV_HUrDZ.js","assets/subMonths-BGQdG8An.js","assets/grip-vertical-B6fgvkWV.js","assets/Clients-BhU1gPtp.js","assets/link-BFb3aRUb.js","assets/search-ByMMlkpH.js","assets/filter-C-rjcpcd.js","assets/message-square-DRlT7qoo.js","assets/ClientDetail-CtyiJXpm.js","assets/tabs-BzZ0SrJr.js","assets/plus-circle-BCyIaDZs.js","assets/map-pin-DajW4bQw.js","assets/heart-CHfcW8AU.js","assets/image-OotcT3j-.js","assets/pen-line-D3o8HRKr.js","assets/upload-cloud-B8GyXM-2.js","assets/calendar-days-DsEZKHpq.js","assets/arrow-left-BFZx-_3J.js","assets/Workflow-D4iwbxDU.js","assets/dnd.esm-w_5tM4QA.js","assets/defineProperty-DbXIQDXj.js","assets/typeof-QjJsDpFa.js","assets/tiny-invariant-CopsF_GD.js","assets/align-justify-BZxqjvAQ.js","assets/chevron-up-CRPJekDO.js","assets/archive-UE9zxhL0.js","assets/palette-GfHRn2TV.js","assets/list-checks-BETotv0N.js","assets/Financial-BagyQJOX.js","assets/hourglass-D6NCXFLM.js","assets/subDays-BJ9LAypw.js","assets/endOfDay-1sfWewCa.js","assets/startOfMonth-w8o4pQ9n.js","assets/endOfMonth-BI7KFyvk.js","assets/Calendar-_P-4E8Ld.js","assets/googleCalendar-Ceb7ryOX.js","assets/FeatureRestrictionModal-BPaw5OyO.js","assets/popover--oaE_XGx.js","assets/getDay-BCMTxkZi.js","assets/constructNow-DzsdSGD9.js","assets/external-link-BxMLZkRm.js","assets/switch-47IHOkE5.js","assets/copy-xMhh881n.js","assets/AvailabilityModal-D0jdYnU8.js","assets/Reports-CHMCMYJU.js","assets/jspdf.es.min-BNwq_X87.js","assets/jspdf.plugin.autotable-DtM0_LT_.js","assets/bar-chart-3-Dl3XZne4.js","assets/alert-circle-BzOwAVmc.js","assets/Settings-gUIjEZ4A.js","assets/globe-DK2PE4-i.js","assets/shield-DKcMqylj.js","assets/refresh-cw-9D214xwP.js","assets/formatDistanceToNow-BmK3_R6S.js","assets/lightbulb-CwiXJFzg.js","assets/AccountSettings-C4k7zQdl.js","assets/upload-D8dpMeuO.js","assets/ServicePackages-Dj3wvFjZ.js","assets/MySetup-fzJqBEQV.js","assets/type-DpRNtDAW.js","assets/Precifique-DaqOd3fr.js","assets/percent-C5AvgnAv.js","assets/ReservaInteligente-TmRvzAW-.js","assets/more-horizontal-BHUkrYmU.js","assets/Boards-UIHJ29KA.js","assets/file-plus-6k6Xejjp.js","assets/useDebounce-BJ-pNGYe.js","assets/BoardDetail-K3_Z5sYs.js","assets/square-DCDT2xjw.js","assets/PlansPage-D5jd4lJj.js","assets/star-0Oe_L10f.js","assets/FormsPage-DgxoDUrW.js","assets/user-plus-BH7PIoL5.js","assets/megaphone-BpkDAk2U.js","assets/FormSuccessModal-C8g9QYYi.js","assets/share-2-ByH41qYs.js","assets/FormEditorPage-D0u6FUD_.js","assets/CampaignSubmissionsPage-jqkPve1G.js","assets/StudioPage-BW_Bn4Vo.js","assets/heart-handshake-QJCtXt9O.js","assets/ContractListPage-B6wWAvVH.js","assets/table-RG_aE8wA.js","assets/ContractEditorPage-le87_IxM.js","assets/underline-CODysd7t.js","assets/ProposalEditorPage-DnuKKZwK.js","assets/EditorRulers-Cl6rA3Rx.js","assets/EditorCanvas-DIzWd3oM.js","assets/instagram-BLBFn40t.js","assets/EditorCanvas-BxwK8EBg.css","assets/html2canvas.esm-BfxBtG_O.js","assets/ban-BUY7JUsb.js","assets/BlogPage-BeGCPkb-.js","assets/AvailabilityManagerPage-DboCz8UJ.js","assets/ReferralsPage-Do6quUsG.js","assets/LandingPage-CFJl3E3g.js","assets/PrivacyPolicyPage-DsplyK4d.js","assets/LoginPage-B2qBTs37.js","assets/AuthLayout-puwzllPu.js","assets/log-in-B2sjpgf5.js","assets/SignupPage-C4-6oIH4.js","assets/ForgotPasswordPage-DiRt4tEe.js","assets/UpdatePasswordPage-B0tS0azr.js","assets/AdminLoginPage-CIIker9G.js","assets/AdminLayout-xZglzsqE.js","assets/PublicBookingPage-BGzDvrDs.js","assets/BlogPostPage-CFrAXMGK.js","assets/ProposalEditorPage-2xRxiYtK.js","assets/CustomPageViewer-BAcUlaCw.js","assets/TutorialsPage-CpoLNkiH.js","assets/ProposalPublicView-DFRuIHV7.js"])))=>i.map(i=>d[i]);
var Bx=n=>{throw TypeError(n)};var $0=(n,e,t)=>e.has(n)||Bx("Cannot "+t);var Mi=(n,e,t)=>($0(n,e,"read from private field"),t?t.call(n):e.get(n)),Gd=(n,e,t)=>e.has(n)?Bx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),sp=(n,e,t,r)=>($0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),qg=(n,e,t)=>($0(n,e,"access private method"),t);var $x=(n,e,t,r)=>({set _(s){sp(n,e,s,t)},get _(){return Mi(n,e,r)}});function KC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function im(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function rN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var U0={exports:{}},ip={},z0={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function sN(){if(Ux)return gt;Ux=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(B,X,ae){this.props=B,this.context=X,this.refs=x,this.updater=ae||_}E.prototype.isReactComponent={},E.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function P(){}P.prototype=E.prototype;function M(B,X,ae){this.props=B,this.context=X,this.refs=x,this.updater=ae||_}var R=M.prototype=new P;R.constructor=M,S(R,E.prototype),R.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,F={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function W(B,X,ae){var ye,Me={},Pe=null,ve=null;if(X!=null)for(ye in X.ref!==void 0&&(ve=X.ref),X.key!==void 0&&(Pe=""+X.key),X)O.call(X,ye)&&!$.hasOwnProperty(ye)&&(Me[ye]=X[ye]);var Ne=arguments.length-2;if(Ne===1)Me.children=ae;else if(1<Ne){for(var He=Array(Ne),Ye=0;Ye<Ne;Ye++)He[Ye]=arguments[Ye+2];Me.children=He}if(B&&B.defaultProps)for(ye in Ne=B.defaultProps,Ne)Me[ye]===void 0&&(Me[ye]=Ne[ye]);return{$$typeof:n,type:B,key:Pe,ref:ve,props:Me,_owner:F.current}}function K(B,X){return{$$typeof:n,type:B.type,key:X,ref:B.ref,props:B.props,_owner:B._owner}}function ce(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function pe(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return X[ae]})}var ue=/\/+/g;function fe(B,X){return typeof B=="object"&&B!==null&&B.key!=null?pe(""+B.key):X.toString(36)}function ne(B,X,ae,ye,Me){var Pe=typeof B;(Pe==="undefined"||Pe==="boolean")&&(B=null);var ve=!1;if(B===null)ve=!0;else switch(Pe){case"string":case"number":ve=!0;break;case"object":switch(B.$$typeof){case n:case e:ve=!0}}if(ve)return ve=B,Me=Me(ve),B=ye===""?"."+fe(ve,0):ye,I(Me)?(ae="",B!=null&&(ae=B.replace(ue,"$&/")+"/"),ne(Me,X,ae,"",function(Ye){return Ye})):Me!=null&&(ce(Me)&&(Me=K(Me,ae+(!Me.key||ve&&ve.key===Me.key?"":(""+Me.key).replace(ue,"$&/")+"/")+B)),X.push(Me)),1;if(ve=0,ye=ye===""?".":ye+":",I(B))for(var Ne=0;Ne<B.length;Ne++){Pe=B[Ne];var He=ye+fe(Pe,Ne);ve+=ne(Pe,X,ae,He,Me)}else if(He=v(B),typeof He=="function")for(B=He.call(B),Ne=0;!(Pe=B.next()).done;)Pe=Pe.value,He=ye+fe(Pe,Ne++),ve+=ne(Pe,X,ae,He,Me);else if(Pe==="object")throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ve}function H(B,X,ae){if(B==null)return B;var ye=[],Me=0;return ne(B,ye,"","",function(Pe){return X.call(ae,Pe,Me++)}),ye}function q(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var te={current:null},z={transition:null},re={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:z,ReactCurrentOwner:F};function Z(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:H,forEach:function(B,X,ae){H(B,function(){X.apply(this,arguments)},ae)},count:function(B){var X=0;return H(B,function(){X++}),X},toArray:function(B){return H(B,function(X){return X})||[]},only:function(B){if(!ce(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},gt.Component=E,gt.Fragment=t,gt.Profiler=s,gt.PureComponent=M,gt.StrictMode=r,gt.Suspense=d,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,gt.act=Z,gt.cloneElement=function(B,X,ae){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var ye=S({},B.props),Me=B.key,Pe=B.ref,ve=B._owner;if(X!=null){if(X.ref!==void 0&&(Pe=X.ref,ve=F.current),X.key!==void 0&&(Me=""+X.key),B.type&&B.type.defaultProps)var Ne=B.type.defaultProps;for(He in X)O.call(X,He)&&!$.hasOwnProperty(He)&&(ye[He]=X[He]===void 0&&Ne!==void 0?Ne[He]:X[He])}var He=arguments.length-2;if(He===1)ye.children=ae;else if(1<He){Ne=Array(He);for(var Ye=0;Ye<He;Ye++)Ne[Ye]=arguments[Ye+2];ye.children=Ne}return{$$typeof:n,type:B.type,key:Me,ref:Pe,props:ye,_owner:ve}},gt.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:i,_context:B},B.Consumer=B},gt.createElement=W,gt.createFactory=function(B){var X=W.bind(null,B);return X.type=B,X},gt.createRef=function(){return{current:null}},gt.forwardRef=function(B){return{$$typeof:l,render:B}},gt.isValidElement=ce,gt.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:q}},gt.memo=function(B,X){return{$$typeof:h,type:B,compare:X===void 0?null:X}},gt.startTransition=function(B){var X=z.transition;z.transition={};try{B()}finally{z.transition=X}},gt.unstable_act=Z,gt.useCallback=function(B,X){return te.current.useCallback(B,X)},gt.useContext=function(B){return te.current.useContext(B)},gt.useDebugValue=function(){},gt.useDeferredValue=function(B){return te.current.useDeferredValue(B)},gt.useEffect=function(B,X){return te.current.useEffect(B,X)},gt.useId=function(){return te.current.useId()},gt.useImperativeHandle=function(B,X,ae){return te.current.useImperativeHandle(B,X,ae)},gt.useInsertionEffect=function(B,X){return te.current.useInsertionEffect(B,X)},gt.useLayoutEffect=function(B,X){return te.current.useLayoutEffect(B,X)},gt.useMemo=function(B,X){return te.current.useMemo(B,X)},gt.useReducer=function(B,X,ae){return te.current.useReducer(B,X,ae)},gt.useRef=function(B){return te.current.useRef(B)},gt.useState=function(B){return te.current.useState(B)},gt.useSyncExternalStore=function(B,X,ae){return te.current.useSyncExternalStore(B,X,ae)},gt.useTransition=function(){return te.current.useTransition()},gt.version="18.3.1",gt}var zx;function ty(){return zx||(zx=1,z0.exports=sN()),z0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function iN(){if(Vx)return ip;Vx=1;var n=ty(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,d,h){var f,g={},v=null,_=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(_=d.ref);for(f in d)r.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:l,key:v,ref:_,props:g,_owner:s.current}}return ip.Fragment=t,ip.jsx=a,ip.jsxs=a,ip}var Hx;function oN(){return Hx||(Hx=1,U0.exports=iN()),U0.exports}var y=oN(),A=ty();const ot=im(A),Ob=KC({__proto__:null,default:ot},[A]);var Gg={},V0={exports:{}},ns={},H0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function aN(){return Wx||(Wx=1,function(n){function e(z,re){var Z=z.length;z.push(re);e:for(;0<Z;){var B=Z-1>>>1,X=z[B];if(0<s(X,re))z[B]=re,z[Z]=X,Z=B;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var re=z[0],Z=z.pop();if(Z!==re){z[0]=Z;e:for(var B=0,X=z.length,ae=X>>>1;B<ae;){var ye=2*(B+1)-1,Me=z[ye],Pe=ye+1,ve=z[Pe];if(0>s(Me,Z))Pe<X&&0>s(ve,Me)?(z[B]=ve,z[Pe]=Z,B=Pe):(z[B]=Me,z[ye]=Z,B=ye);else if(Pe<X&&0>s(ve,Z))z[B]=ve,z[Pe]=Z,B=Pe;else break e}}return re}function s(z,re){var Z=z.sortIndex-re.sortIndex;return Z!==0?Z:z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var d=[],h=[],f=1,g=null,v=3,_=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(z){for(var re=t(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=z)r(h),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(h)}}function I(z){if(x=!1,R(z),!S)if(t(d)!==null)S=!0,q(O);else{var re=t(h);re!==null&&te(I,re.startTime-z)}}function O(z,re){S=!1,x&&(x=!1,P(W),W=-1),_=!0;var Z=v;try{for(R(re),g=t(d);g!==null&&(!(g.expirationTime>re)||z&&!pe());){var B=g.callback;if(typeof B=="function"){g.callback=null,v=g.priorityLevel;var X=B(g.expirationTime<=re);re=n.unstable_now(),typeof X=="function"?g.callback=X:g===t(d)&&r(d),R(re)}else r(d);g=t(d)}if(g!==null)var ae=!0;else{var ye=t(h);ye!==null&&te(I,ye.startTime-re),ae=!1}return ae}finally{g=null,v=Z,_=!1}}var F=!1,$=null,W=-1,K=5,ce=-1;function pe(){return!(n.unstable_now()-ce<K)}function ue(){if($!==null){var z=n.unstable_now();ce=z;var re=!0;try{re=$(!0,z)}finally{re?fe():(F=!1,$=null)}}else F=!1}var fe;if(typeof M=="function")fe=function(){M(ue)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,H=ne.port2;ne.port1.onmessage=ue,fe=function(){H.postMessage(null)}}else fe=function(){E(ue,0)};function q(z){$=z,F||(F=!0,fe())}function te(z,re){W=E(function(){z(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){S||_||(S=!0,q(O))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(z){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var Z=v;v=re;try{return z()}finally{v=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=v;v=z;try{return re()}finally{v=Z}},n.unstable_scheduleCallback=function(z,re,Z){var B=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?B+Z:B):Z=B,z){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Z+X,z={id:f++,callback:re,priorityLevel:z,startTime:Z,expirationTime:X,sortIndex:-1},Z>B?(z.sortIndex=Z,e(h,z),t(d)===null&&z===t(h)&&(x?(P(W),W=-1):x=!0,te(I,Z-B))):(z.sortIndex=X,e(d,z),S||_||(S=!0,q(O))),z},n.unstable_shouldYield=pe,n.unstable_wrapCallback=function(z){var re=v;return function(){var Z=v;v=re;try{return z.apply(this,arguments)}finally{v=Z}}}}(W0)),W0}var qx;function lN(){return qx||(qx=1,H0.exports=aN()),H0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function cN(){if(Gx)return ns;Gx=1;var n=ty(),e=lN();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(s[o]=c,o=0;o<c.length;o++)r.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function v(o){return d.call(g,o)?!0:d.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function _(o,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,m,w){if(c===null||typeof c>"u"||_(o,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,m,w,C,k,N){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=N}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];E[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,c,m,w){var C=E.hasOwnProperty(c)?E[c]:null;(C!==null?C.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,m,C,w)&&(m=null),w||C===null?v(c)&&(m===null?o.removeAttribute(c):o.setAttribute(c,""+m)):C.mustUseProperty?o[C.propertyName]=m===null?C.type===3?!1:"":m:(c=C.attributeName,w=C.attributeNamespace,m===null?o.removeAttribute(c):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,w?o.setAttributeNS(w,c,m):o.setAttribute(c,m))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),pe=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),z=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var Z=Object.assign,B;function X(o){if(B===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||""}return`
`+B+o}var ae=!1;function ye(o,c){if(!o||ae)return"";ae=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(he){var w=he}Reflect.construct(o,[],c)}else{try{c.call()}catch(he){w=he}o.call(c.prototype)}else{try{throw Error()}catch(he){w=he}o()}}catch(he){if(he&&w&&typeof he.stack=="string"){for(var C=he.stack.split(`
`),k=w.stack.split(`
`),N=C.length-1,U=k.length-1;1<=N&&0<=U&&C[N]!==k[U];)U--;for(;1<=N&&0<=U;N--,U--)if(C[N]!==k[U]){if(N!==1||U!==1)do if(N--,U--,0>U||C[N]!==k[U]){var G=`
`+C[N].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=N&&0<=U);break}}}finally{ae=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?X(o):""}function Me(o){switch(o.tag){case 5:return X(o.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return o=ye(o.type,!1),o;case 11:return o=ye(o.type.render,!1),o;case 1:return o=ye(o.type,!0),o;default:return""}}function Pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case $:return"Fragment";case F:return"Portal";case K:return"Profiler";case W:return"StrictMode";case fe:return"Suspense";case ne:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case pe:return(o.displayName||"Context")+".Consumer";case ce:return(o._context.displayName||"Context")+".Provider";case ue:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case H:return c=o.displayName||null,c!==null?c:Pe(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return Pe(o(c))}catch{}}return null}function ve(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(c);case 8:return c===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ne(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function He(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ye(o){var c=He(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),w=""+o[c];if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,k=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return C.call(this)},set:function(N){w=""+N,k.call(this,N)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(N){w=""+N},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function it(o){o._valueTracker||(o._valueTracker=Ye(o))}function Mt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return o&&(w=He(o)?o.checked?"true":"false":o.value),o=w,o!==m?(c.setValue(o),!0):!1}function un(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Xt(o,c){var m=c.checked;return Z({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??o._wrapperState.initialChecked})}function ur(o,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Ne(c.value!=null?c.value:m),o._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function zi(o,c){c=c.checked,c!=null&&R(o,"checked",c,!1)}function In(o,c){zi(o,c);var m=Ne(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(w==="submit"||w==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Fl(o,c.type,m):c.hasOwnProperty("defaultValue")&&Fl(o,c.type,Ne(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function jl(o,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,m||c===o.value||(o.value=c),o.defaultValue=c}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function Fl(o,c,m){(c!=="number"||un(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var hs=Array.isArray;function An(o,c,m,w){if(o=o.options,c){c={};for(var C=0;C<m.length;C++)c["$"+m[C]]=!0;for(m=0;m<o.length;m++)C=c.hasOwnProperty("$"+o[m].value),o[m].selected!==C&&(o[m].selected=C),C&&w&&(o[m].defaultSelected=!0)}else{for(m=""+Ne(m),c=null,C=0;C<o.length;C++){if(o[C].value===m){o[C].selected=!0,w&&(o[C].defaultSelected=!0);return}c!==null||o[C].disabled||(c=o[C])}c!==null&&(c.selected=!0)}}function ii(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Eo(o,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(t(92));if(hs(m)){if(1<m.length)throw Error(t(93));m=m[0]}c=m}c==null&&(c=""),m=c}o._wrapperState={initialValue:Ne(m)}}function Aa(o,c){var m=Ne(c.value),w=Ne(c.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),c.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),w!=null&&(o.defaultValue=""+w)}function oi(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function wu(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?wu(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var fs,Ca=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,C){MSApp.execUnsafeLocalFunction(function(){return o(c,m,w,C)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(fs=fs||document.createElement("div"),fs.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=fs.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function li(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bl=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(o){Bl.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),ci[c]=ci[o]})});function Ea(o,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||ci.hasOwnProperty(o)&&ci[o]?(""+c).trim():c+"px"}function ka(o,c){o=o.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,C=Ea(m,c[m],w);m==="float"&&(m="cssFloat"),w?o.setProperty(m,C):o[m]=C}}var $l=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(o,c){if(c){if($l[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function To(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=null;function zl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Vl=null,ui=null,di=null;function bu(o){if(o=Vn(o)){if(typeof Vl!="function")throw Error(t(280));var c=o.stateNode;c&&(c=Ju(c),Vl(o.stateNode,o.type,c))}}function _u(o){ui?di?di.push(o):di=[o]:ui=o}function xu(){if(ui){var o=ui,c=di;if(di=ui=null,bu(o),c)for(o=0;o<c.length;o++)bu(c[o])}}function Su(o,c){return o(c)}function Hl(){}var Wl=!1;function Au(o,c,m){if(Wl)return o(c,m);Wl=!0;try{return Su(o,c,m)}finally{Wl=!1,(ui!==null||di!==null)&&(Hl(),xu())}}function Po(o,c){var m=o.stateNode;if(m===null)return null;var w=Ju(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(t(231,c,typeof m));return m}var Ro=!1;if(l)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Ro=!1}function ql(o,c,m,w,C,k,N,U,G){var he=Array.prototype.slice.call(arguments,3);try{c.apply(m,he)}catch(Ce){this.onError(Ce)}}var Io=!1,Ta=null,Pa=!1,Gl=null,bm={onError:function(o){Io=!0,Ta=o}};function _m(o,c,m,w,C,k,N,U,G){Io=!1,Ta=null,ql.apply(bm,arguments)}function xm(o,c,m,w,C,k,N,U,G){if(_m.apply(this,arguments),Io){if(Io){var he=Ta;Io=!1,Ta=null}else throw Error(t(198));Pa||(Pa=!0,Gl=he)}}function hi(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function de(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function J(o){if(hi(o)!==o)throw Error(t(188))}function me(o){var c=o.alternate;if(!c){if(c=hi(o),c===null)throw Error(t(188));return c!==o?null:o}for(var m=o,w=c;;){var C=m.return;if(C===null)break;var k=C.alternate;if(k===null){if(w=C.return,w!==null){m=w;continue}break}if(C.child===k.child){for(k=C.child;k;){if(k===m)return J(C),o;if(k===w)return J(C),c;k=k.sibling}throw Error(t(188))}if(m.return!==w.return)m=C,w=k;else{for(var N=!1,U=C.child;U;){if(U===m){N=!0,m=C,w=k;break}if(U===w){N=!0,w=C,m=k;break}U=U.sibling}if(!N){for(U=k.child;U;){if(U===m){N=!0,m=k,w=C;break}if(U===w){N=!0,w=k,m=C;break}U=U.sibling}if(!N)throw Error(t(189))}}if(m.alternate!==w)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?o:c}function xe(o){return o=me(o),o!==null?be(o):null}function be(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=be(o);if(c!==null)return c;o=o.sibling}return null}var Be=e.unstable_scheduleCallback,Et=e.unstable_cancelCallback,dn=e.unstable_shouldYield,fi=e.unstable_requestPaint,It=e.unstable_now,Lh=e.unstable_getCurrentPriorityLevel,jh=e.unstable_ImmediatePriority,Sm=e.unstable_UserBlockingPriority,Kl=e.unstable_NormalPriority,Am=e.unstable_LowPriority,Fh=e.unstable_IdlePriority,Cu=null,Ds=null;function zy(o){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(Cu,o,void 0,(o.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:km,Cm=Math.log,Em=Math.LN2;function km(o){return o>>>=0,o===0?32:31-(Cm(o)/Em|0)|0}var Ra=64,Eu=4194304;function Ma(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Do(o,c){var m=o.pendingLanes;if(m===0)return 0;var w=0,C=o.suspendedLanes,k=o.pingedLanes,N=m&268435455;if(N!==0){var U=N&~C;U!==0?w=Ma(U):(k&=N,k!==0&&(w=Ma(k)))}else N=m&~C,N!==0?w=Ma(N):k!==0&&(w=Ma(k));if(w===0)return 0;if(c!==0&&c!==w&&(c&C)===0&&(C=w&-w,k=c&-c,C>=k||C===16&&(k&4194240)!==0))return c;if((w&4)!==0&&(w|=m&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=w;0<c;)m=31-ps(c),C=1<<m,w|=o[m],c&=~C;return w}function Tm(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vy(o,c){for(var m=o.suspendedLanes,w=o.pingedLanes,C=o.expirationTimes,k=o.pendingLanes;0<k;){var N=31-ps(k),U=1<<N,G=C[N];G===-1?((U&m)===0||(U&w)!==0)&&(C[N]=Tm(U,c)):G<=c&&(o.expiredLanes|=U),k&=~U}}function ku(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Bh(){var o=Ra;return Ra<<=1,(Ra&4194240)===0&&(Ra=64),o}function Yl(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function Xl(o,c,m){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ps(c),o[c]=m}function Pm(o,c){var m=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var w=o.eventTimes;for(o=o.expirationTimes;0<m;){var C=31-ps(m),k=1<<C;c[C]=0,w[C]=-1,o[C]=-1,m&=~k}}function Ql(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var w=31-ps(m),C=1<<w;C&c|o[w]&c&&(o[w]|=c),m&=~C}}var kt=0;function No(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var $h,Tu,Rm,Uh,zh,Pu=!1,Jl=[],Vi=null,Hi=null,Wi=null,Ia=new Map,Zl=new Map,qi=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mm(o,c){switch(o){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":Ia.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(c.pointerId)}}function Oo(o,c,m,w,C,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:k,targetContainers:[C]},c!==null&&(c=Vn(c),c!==null&&Tu(c)),o):(o.eventSystemFlags|=w,c=o.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),o)}function Wy(o,c,m,w,C){switch(c){case"focusin":return Vi=Oo(Vi,o,c,m,w,C),!0;case"dragenter":return Hi=Oo(Hi,o,c,m,w,C),!0;case"mouseover":return Wi=Oo(Wi,o,c,m,w,C),!0;case"pointerover":var k=C.pointerId;return Ia.set(k,Oo(Ia.get(k)||null,o,c,m,w,C)),!0;case"gotpointercapture":return k=C.pointerId,Zl.set(k,Oo(Zl.get(k)||null,o,c,m,w,C)),!0}return!1}function Im(o){var c=js(o.target);if(c!==null){var m=hi(c);if(m!==null){if(c=m.tag,c===13){if(c=de(m),c!==null){o.blockedOn=c,zh(o.priority,function(){Rm(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ru(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=Du(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var w=new m.constructor(m.type,m);Ul=w,m.target.dispatchEvent(w),Ul=null}else return c=Vn(m),c!==null&&Tu(c),o.blockedOn=m,!1;c.shift()}return!0}function Dm(o,c,m){Ru(o)&&m.delete(c)}function qy(){Pu=!1,Vi!==null&&Ru(Vi)&&(Vi=null),Hi!==null&&Ru(Hi)&&(Hi=null),Wi!==null&&Ru(Wi)&&(Wi=null),Ia.forEach(Dm),Zl.forEach(Dm)}function Dt(o,c){o.blockedOn===c&&(o.blockedOn=null,Pu||(Pu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qy)))}function Pt(o){function c(C){return Dt(C,o)}if(0<Jl.length){Dt(Jl[0],o);for(var m=1;m<Jl.length;m++){var w=Jl[m];w.blockedOn===o&&(w.blockedOn=null)}}for(Vi!==null&&Dt(Vi,o),Hi!==null&&Dt(Hi,o),Wi!==null&&Dt(Wi,o),Ia.forEach(c),Zl.forEach(c),m=0;m<qi.length;m++)w=qi[m],w.blockedOn===o&&(w.blockedOn=null);for(;0<qi.length&&(m=qi[0],m.blockedOn===null);)Im(m),m.blockedOn===null&&qi.shift()}var Da=I.ReactCurrentBatchConfig,Mu=!0;function Gy(o,c,m,w){var C=kt,k=Da.transition;Da.transition=null;try{kt=1,Vh(o,c,m,w)}finally{kt=C,Da.transition=k}}function Ky(o,c,m,w){var C=kt,k=Da.transition;Da.transition=null;try{kt=4,Vh(o,c,m,w)}finally{kt=C,Da.transition=k}}function Vh(o,c,m,w){if(Mu){var C=Du(o,c,m,w);if(C===null)af(o,c,w,Iu,m),Mm(o,w);else if(Wy(C,o,c,m,w))w.stopPropagation();else if(Mm(o,w),c&4&&-1<Hy.indexOf(o)){for(;C!==null;){var k=Vn(C);if(k!==null&&$h(k),k=Du(o,c,m,w),k===null&&af(o,c,w,Iu,m),k===C)break;C=k}C!==null&&w.stopPropagation()}else af(o,c,w,null,m)}}var Iu=null;function Du(o,c,m,w){if(Iu=null,o=zl(w),o=js(o),o!==null)if(c=hi(o),c===null)o=null;else if(m=c.tag,m===13){if(o=de(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Iu=o,null}function Nm(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lh()){case jh:return 1;case Sm:return 4;case Kl:case Am:return 16;case Fh:return 536870912;default:return 16}default:return 16}}var Wt=null,ec=null,Ns=null;function Hh(){if(Ns)return Ns;var o,c=ec,m=c.length,w,C="value"in Wt?Wt.value:Wt.textContent,k=C.length;for(o=0;o<m&&c[o]===C[o];o++);var N=m-o;for(w=1;w<=N&&c[m-w]===C[k-w];w++);return Ns=C.slice(o,1<w?1-w:void 0)}function Na(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function er(){return!0}function Wh(){return!1}function dr(o){function c(m,w,C,k,N){this._reactName=m,this._targetInst=C,this.type=w,this.nativeEvent=k,this.target=N,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(m=o[U],this[U]=m?m(k):k[U]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?er:Wh,this.isPropagationStopped=Wh,this}return Z(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),c}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=dr(Lo),Oa=Z({},Lo,{view:0,detail:0}),Om=dr(Oa),tr,qh,Un,Ou=Z({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Un&&(Un&&o.type==="mousemove"?(tr=o.screenX-Un.screenX,qh=o.screenY-Un.screenY):qh=tr=0,Un=o),tr)},movementY:function(o){return"movementY"in o?o.movementY:qh}}),Gh=dr(Ou),Gi=Z({},Ou,{dataTransfer:0}),Lu=dr(Gi),Kh=Z({},Oa,{relatedTarget:0}),Bt=dr(Kh),Ki=Z({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Yh=dr(Ki),Yy=Z({},Lo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Xh=dr(Yy),Xy=Z({},Lo,{data:0}),Lm=dr(Xy),Qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=ju[o])?!!c[o]:!1}function Qh(){return La}var Fm=Z({},Oa,{key:function(o){if(o.key){var c=Qy[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Na(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?jm[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(o){return o.type==="keypress"?Na(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Na(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Bm=dr(Fm),Jh=Z({},Ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fu=dr(Jh),$m=Z({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),Jy=dr($m),Zh=Z({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ef=dr(Zh),Zy=Z({},Ou,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Um=dr(Zy),Ar=[9,13,27,32],tc=l&&"CompositionEvent"in window,pi=null;l&&"documentMode"in document&&(pi=document.documentMode);var zm=l&&"TextEvent"in window&&!pi,tf=l&&(!tc||pi&&8<pi&&11>=pi),Vm=" ",Hm=!1;function Wm(o,c){switch(o){case"keyup":return Ar.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qm(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ja=!1;function Fa(o,c){switch(o){case"compositionend":return qm(c);case"keypress":return c.which!==32?null:(Hm=!0,Vm);case"textInput":return o=c.data,o===Vm&&Hm?null:o;default:return null}}function e0(o,c){if(ja)return o==="compositionend"||!tc&&Wm(o,c)?(o=Hh(),Ns=ec=Wt=null,ja=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tf&&c.locale!=="ko"?null:c.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!t0[o.type]:c==="textarea"}function nf(o,c,m,w){_u(w),c=Ku(c,"onChange"),0<c.length&&(m=new Nu("onChange","change",null,m,w),o.push({event:m,listeners:c}))}var Ur=null,Yi=null;function n0(o){Zm(o,0)}function $u(o){var c=lt(o);if(Mt(c))return o}function r0(o,c){if(o==="change")return c}var jo=!1;if(l){var Cr;if(l){var Uu="oninput"in document;if(!Uu){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),Uu=typeof Gm.oninput=="function"}Cr=Uu}else Cr=!1;jo=Cr&&(!document.documentMode||9<document.documentMode)}function Km(){Ur&&(Ur.detachEvent("onpropertychange",Ym),Yi=Ur=null)}function Ym(o){if(o.propertyName==="value"&&$u(Yi)){var c=[];nf(c,Yi,o,zl(o)),Au(n0,c)}}function s0(o,c,m){o==="focusin"?(Km(),Ur=c,Yi=m,Ur.attachEvent("onpropertychange",Ym)):o==="focusout"&&Km()}function i0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $u(Yi)}function Ba(o,c){if(o==="click")return $u(c)}function ee(o,c){if(o==="input"||o==="change")return $u(c)}function ge(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var le=typeof Object.is=="function"?Object.is:ge;function Ie(o,c){if(le(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var C=m[w];if(!d.call(c,C)||!le(o[C],c[C]))return!1}return!0}function et(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function St(o,c){var m=et(o);o=0;for(var w;m;){if(m.nodeType===3){if(w=o+m.textContent.length,o<=c&&w>=c)return{node:m,offset:c-o};o=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=et(m)}}function hn(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?hn(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Ot(){for(var o=window,c=un();c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=un(o.document)}return c}function nc(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function o0(o){var c=Ot(),m=o.focusedElem,w=o.selectionRange;if(c!==m&&m&&m.ownerDocument&&hn(m.ownerDocument.documentElement,m)){if(w!==null&&nc(m)){if(c=w.start,o=w.end,o===void 0&&(o=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(o,m.value.length);else if(o=(c=m.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var C=m.textContent.length,k=Math.min(w.start,C);w=w.end===void 0?k:Math.min(w.end,C),!o.extend&&k>w&&(C=w,w=k,k=C),C=St(m,k);var N=St(m,w);C&&N&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==N.node||o.focusOffset!==N.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),o.removeAllRanges(),k>w?(o.addRange(c),o.extend(N.node,N.offset)):(c.setEnd(N.node,N.offset),o.addRange(c)))}}for(c=[],o=m;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)o=c[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var zr=l&&"documentMode"in document&&11>=document.documentMode,mi=null,rf=null,Os=null,$a=!1;function rc(o,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;$a||mi==null||mi!==un(w)||(w=mi,"selectionStart"in w&&nc(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Os&&Ie(Os,w)||(Os=w,w=Ku(rf,"onSelect"),0<w.length&&(c=new Nu("onSelect","select",null,c,m),o.push({event:c,listeners:w}),c.target=mi)))}function At(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var Ua={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionend:At("Transition","TransitionEnd")},zu={},sc={};l&&(sc=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Vu(o){if(zu[o])return zu[o];if(!Ua[o])return o;var c=Ua[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in sc)return zu[o]=c[m];return o}var Xm=Vu("animationend"),Qm=Vu("animationiteration"),ic=Vu("animationstart"),gi=Vu("transitionend"),oc=new Map,sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(o,c){oc.set(o,c),i(c,[o])}for(var Hu=0;Hu<sf.length;Hu++){var Wu=sf[Hu],qu=Wu.toLowerCase(),Jm=Wu[0].toUpperCase()+Wu.slice(1);ms(qu,"on"+Jm)}ms(Xm,"onAnimationEnd"),ms(Qm,"onAnimationIteration"),ms(ic,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(gi,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function ac(o,c,m){var w=o.type||"unknown-event";o.currentTarget=m,xm(w,c,void 0,o),o.currentTarget=null}function Zm(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var w=o[m],C=w.event;w=w.listeners;e:{var k=void 0;if(c)for(var N=w.length-1;0<=N;N--){var U=w[N],G=U.instance,he=U.currentTarget;if(U=U.listener,G!==k&&C.isPropagationStopped())break e;ac(C,U,he),k=G}else for(N=0;N<w.length;N++){if(U=w[N],G=U.instance,he=U.currentTarget,U=U.listener,G!==k&&C.isPropagationStopped())break e;ac(C,U,he),k=G}}}if(Pa)throw o=Gl,Pa=!1,Gl=null,o}function Ut(o,c){var m=c[Qu];m===void 0&&(m=c[Qu]=new Set);var w=o+"__bubble";m.has(w)||(Gu(c,o,2,!1),m.add(w))}function of(o,c,m){var w=0;c&&(w|=4),Gu(m,o,w,c)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Xi(o){if(!o[Bo]){o[Bo]=!0,r.forEach(function(m){m!=="selectionchange"&&(Fo.has(m)||of(m,!1,o),of(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Bo]||(c[Bo]=!0,of("selectionchange",!1,c))}}function Gu(o,c,m,w){switch(Nm(c)){case 1:var C=Gy;break;case 4:C=Ky;break;default:C=Vh}m=C.bind(null,c,m,o),C=void 0,!Ro||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),w?C!==void 0?o.addEventListener(c,m,{capture:!0,passive:C}):o.addEventListener(c,m,!0):C!==void 0?o.addEventListener(c,m,{passive:C}):o.addEventListener(c,m,!1)}function af(o,c,m,w,C){var k=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var N=w.tag;if(N===3||N===4){var U=w.stateNode.containerInfo;if(U===C||U.nodeType===8&&U.parentNode===C)break;if(N===4)for(N=w.return;N!==null;){var G=N.tag;if((G===3||G===4)&&(G=N.stateNode.containerInfo,G===C||G.nodeType===8&&G.parentNode===C))return;N=N.return}for(;U!==null;){if(N=js(U),N===null)return;if(G=N.tag,G===5||G===6){w=k=N;continue e}U=U.parentNode}}w=w.return}Au(function(){var he=k,Ce=zl(m),ke=[];e:{var Ae=oc.get(o);if(Ae!==void 0){var De=Nu,Le=o;switch(o){case"keypress":if(Na(m)===0)break e;case"keydown":case"keyup":De=Bm;break;case"focusin":Le="focus",De=Bt;break;case"focusout":Le="blur",De=Bt;break;case"beforeblur":case"afterblur":De=Bt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=Jy;break;case Xm:case Qm:case ic:De=Yh;break;case gi:De=ef;break;case"scroll":De=Om;break;case"wheel":De=Um;break;case"copy":case"cut":case"paste":De=Xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Fu}var je=(c&4)!==0,sn=!je&&o==="scroll",ie=je?Ae!==null?Ae+"Capture":null:Ae;je=[];for(var Q=he,oe;Q!==null;){oe=Q;var Te=oe.stateNode;if(oe.tag===5&&Te!==null&&(oe=Te,ie!==null&&(Te=Po(Q,ie),Te!=null&&je.push(za(Q,Te,oe)))),sn)break;Q=Q.return}0<je.length&&(Ae=new De(Ae,Le,null,m,Ce),ke.push({event:Ae,listeners:je}))}}if((c&7)===0){e:{if(Ae=o==="mouseover"||o==="pointerover",De=o==="mouseout"||o==="pointerout",Ae&&m!==Ul&&(Le=m.relatedTarget||m.fromElement)&&(js(Le)||Le[Er]))break e;if((De||Ae)&&(Ae=Ce.window===Ce?Ce:(Ae=Ce.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,De?(Le=m.relatedTarget||m.toElement,De=he,Le=Le?js(Le):null,Le!==null&&(sn=hi(Le),Le!==sn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(De=null,Le=he),De!==Le)){if(je=Gh,Te="onMouseLeave",ie="onMouseEnter",Q="mouse",(o==="pointerout"||o==="pointerover")&&(je=Fu,Te="onPointerLeave",ie="onPointerEnter",Q="pointer"),sn=De==null?Ae:lt(De),oe=Le==null?Ae:lt(Le),Ae=new je(Te,Q+"leave",De,m,Ce),Ae.target=sn,Ae.relatedTarget=oe,Te=null,js(Ce)===he&&(je=new je(ie,Q+"enter",Le,m,Ce),je.target=oe,je.relatedTarget=sn,Te=je),sn=Te,De&&Le)t:{for(je=De,ie=Le,Q=0,oe=je;oe;oe=Va(oe))Q++;for(oe=0,Te=ie;Te;Te=Va(Te))oe++;for(;0<Q-oe;)je=Va(je),Q--;for(;0<oe-Q;)ie=Va(ie),oe--;for(;Q--;){if(je===ie||ie!==null&&je===ie.alternate)break t;je=Va(je),ie=Va(ie)}je=null}else je=null;De!==null&&fn(ke,Ae,De,je,!1),Le!==null&&sn!==null&&fn(ke,sn,Le,je,!0)}}e:{if(Ae=he?lt(he):window,De=Ae.nodeName&&Ae.nodeName.toLowerCase(),De==="select"||De==="input"&&Ae.type==="file")var $e=r0;else if(Bu(Ae))if(jo)$e=ee;else{$e=i0;var Ge=s0}else(De=Ae.nodeName)&&De.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&($e=Ba);if($e&&($e=$e(o,he))){nf(ke,$e,m,Ce);break e}Ge&&Ge(o,Ae,he),o==="focusout"&&(Ge=Ae._wrapperState)&&Ge.controlled&&Ae.type==="number"&&Fl(Ae,"number",Ae.value)}switch(Ge=he?lt(he):window,o){case"focusin":(Bu(Ge)||Ge.contentEditable==="true")&&(mi=Ge,rf=he,Os=null);break;case"focusout":Os=rf=mi=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,rc(ke,m,Ce);break;case"selectionchange":if(zr)break;case"keydown":case"keyup":rc(ke,m,Ce)}var We;if(tc)e:{switch(o){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else ja?Wm(o,m)&&(Xe="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Xe="onCompositionStart");Xe&&(tf&&m.locale!=="ko"&&(ja||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&ja&&(We=Hh()):(Wt=Ce,ec="value"in Wt?Wt.value:Wt.textContent,ja=!0)),Ge=Ku(he,Xe),0<Ge.length&&(Xe=new Lm(Xe,o,null,m,Ce),ke.push({event:Xe,listeners:Ge}),We?Xe.data=We:(We=qm(m),We!==null&&(Xe.data=We)))),(We=zm?Fa(o,m):e0(o,m))&&(he=Ku(he,"onBeforeInput"),0<he.length&&(Ce=new Lm("onBeforeInput","beforeinput",null,m,Ce),ke.push({event:Ce,listeners:he}),Ce.data=We))}Zm(ke,c)})}function za(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Ku(o,c){for(var m=c+"Capture",w=[];o!==null;){var C=o,k=C.stateNode;C.tag===5&&k!==null&&(C=k,k=Po(o,m),k!=null&&w.unshift(za(o,k,C)),k=Po(o,c),k!=null&&w.push(za(o,k,C))),o=o.return}return w}function Va(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function fn(o,c,m,w,C){for(var k=c._reactName,N=[];m!==null&&m!==w;){var U=m,G=U.alternate,he=U.stateNode;if(G!==null&&G===w)break;U.tag===5&&he!==null&&(U=he,C?(G=Po(m,k),G!=null&&N.unshift(za(m,G,U))):C||(G=Po(m,k),G!=null&&N.push(za(m,G,U)))),m=m.return}N.length!==0&&o.push({event:c,listeners:N})}var zn=/\r\n?/g,a0=/\u0000|\uFFFD/g;function eg(o){return(typeof o=="string"?o:""+o).replace(zn,`
`).replace(a0,"")}function lc(o,c,m){if(c=eg(c),eg(o)!==c&&m)throw Error(t(425))}function Yu(){}var cc=null,$o=null;function uc(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Qi=typeof setTimeout=="function"?setTimeout:void 0,dc=typeof clearTimeout=="function"?clearTimeout:void 0,Ha=typeof Promise=="function"?Promise:void 0,Xu=typeof queueMicrotask=="function"?queueMicrotask:typeof Ha<"u"?function(o){return Ha.resolve(null).then(o).catch(Wa)}:Qi;function Wa(o){setTimeout(function(){throw o})}function lf(o,c){var m=c,w=0;do{var C=m.nextSibling;if(o.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(w===0){o.removeChild(C),Pt(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=C}while(m);Pt(c)}function Ji(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function tg(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Ls="__reactFiber$"+qa,Zi="__reactProps$"+qa,Er="__reactContainer$"+qa,Qu="__reactEvents$"+qa,L="__reactListeners$"+qa,Ga="__reactHandles$"+qa;function js(o){var c=o[Ls];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Er]||m[Ls]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=tg(o);o!==null;){if(m=o[Ls])return m;o=tg(o)}return c}o=m,m=o.parentNode}return null}function Vn(o){return o=o[Ls]||o[Er],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function lt(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ju(o){return o[Zi]||null}var cf=[],Ka=-1;function hr(o){return{current:o}}function zt(o){0>Ka||(o.current=cf[Ka],cf[Ka]=null,Ka--)}function $t(o,c){Ka++,cf[Ka]=o.current,o.current=c}var eo={},Hn=hr(eo),fr=hr(!1),nr=eo;function Ya(o,c){var m=o.type.contextTypes;if(!m)return eo;var w=o.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var C={},k;for(k in m)C[k]=c[k];return w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=C),C}function pr(o){return o=o.childContextTypes,o!=null}function Zu(){zt(fr),zt(Hn)}function ng(o,c,m){if(Hn.current!==eo)throw Error(t(168));$t(Hn,c),$t(fr,m)}function rg(o,c,m){var w=o.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var C in w)if(!(C in c))throw Error(t(108,ve(o)||"Unknown",C));return Z({},m,w)}function Vr(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||eo,nr=Hn.current,$t(Hn,o),$t(fr,fr.current),!0}function sg(o,c,m){var w=o.stateNode;if(!w)throw Error(t(169));m?(o=rg(o,c,nr),w.__reactInternalMemoizedMergedChildContext=o,zt(fr),zt(Hn),$t(Hn,o)):zt(fr),$t(fr,m)}var yi=null,ed=!1,uf=!1;function ig(o){yi===null?yi=[o]:yi.push(o)}function Uo(o){ed=!0,ig(o)}function to(){if(!uf&&yi!==null){uf=!0;var o=0,c=kt;try{var m=yi;for(kt=1;o<m.length;o++){var w=m[o];do w=w(!0);while(w!==null)}yi=null,ed=!1}catch(C){throw yi!==null&&(yi=yi.slice(o+1)),Be(jh,to),C}finally{kt=c,uf=!1}}return null}var Xa=[],Wn=0,td=null,nd=0,Hr=[],Wr=0,zo=null,Fs=1,Bs="";function Vo(o,c){Xa[Wn++]=nd,Xa[Wn++]=td,td=o,nd=c}function og(o,c,m){Hr[Wr++]=Fs,Hr[Wr++]=Bs,Hr[Wr++]=zo,zo=o;var w=Fs;o=Bs;var C=32-ps(w)-1;w&=~(1<<C),m+=1;var k=32-ps(c)+C;if(30<k){var N=C-C%5;k=(w&(1<<N)-1).toString(32),w>>=N,C-=N,Fs=1<<32-ps(c)+C|m<<C|w,Bs=k+o}else Fs=1<<k|m<<C|w,Bs=o}function hc(o){o.return!==null&&(Vo(o,1),og(o,1,0))}function Ho(o){for(;o===td;)td=Xa[--Wn],Xa[Wn]=null,nd=Xa[--Wn],Xa[Wn]=null;for(;o===zo;)zo=Hr[--Wr],Hr[Wr]=null,Bs=Hr[--Wr],Hr[Wr]=null,Fs=Hr[--Wr],Hr[Wr]=null}var qn=null,kr=null,Vt=!1,gs=null;function $s(o,c){var m=Jr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=o,c=o.deletions,c===null?(o.deletions=[m],o.flags|=16):c.push(m)}function rd(o,c){switch(o.tag){case 5:var m=o.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,qn=o,kr=Ji(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,qn=o,kr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=zo!==null?{id:Fs,overflow:Bs}:null,o.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Jr(18,null,null,0),m.stateNode=c,m.return=o,o.child=m,qn=o,kr=null,!0):!1;default:return!1}}function wi(o){return(o.mode&1)!==0&&(o.flags&128)===0}function mr(o){if(Vt){var c=kr;if(c){var m=c;if(!rd(o,c)){if(wi(o))throw Error(t(418));c=Ji(m.nextSibling);var w=qn;c&&rd(o,c)?$s(w,m):(o.flags=o.flags&-4097|2,Vt=!1,qn=o)}}else{if(wi(o))throw Error(t(418));o.flags=o.flags&-4097|2,Vt=!1,qn=o}}}function ag(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;qn=o}function fc(o){if(o!==qn)return!1;if(!Vt)return ag(o),Vt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!uc(o.type,o.memoizedProps)),c&&(c=kr)){if(wi(o))throw df(),Error(t(418));for(;c;)$s(o,c),c=Ji(c.nextSibling)}if(ag(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(c===0){kr=Ji(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}o=o.nextSibling}kr=null}}else kr=qn?Ji(o.stateNode.nextSibling):null;return!0}function df(){for(var o=kr;o;)o=Ji(o.nextSibling)}function Us(){kr=qn=null,Vt=!1}function zs(o){gs===null?gs=[o]:gs.push(o)}var lg=I.ReactCurrentBatchConfig;function pc(o,c,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var w=m.stateNode}if(!w)throw Error(t(147,o));var C=w,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(N){var U=C.refs;N===null?delete U[k]:U[k]=N},c._stringRef=k,c)}if(typeof o!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,o))}return o}function Wo(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function cg(o){var c=o._init;return c(o._payload)}function hf(o){function c(ie,Q){if(o){var oe=ie.deletions;oe===null?(ie.deletions=[Q],ie.flags|=16):oe.push(Q)}}function m(ie,Q){if(!o)return null;for(;Q!==null;)c(ie,Q),Q=Q.sibling;return null}function w(ie,Q){for(ie=new Map;Q!==null;)Q.key!==null?ie.set(Q.key,Q):ie.set(Q.index,Q),Q=Q.sibling;return ie}function C(ie,Q){return ie=Ss(ie,Q),ie.index=0,ie.sibling=null,ie}function k(ie,Q,oe){return ie.index=oe,o?(oe=ie.alternate,oe!==null?(oe=oe.index,oe<Q?(ie.flags|=2,Q):oe):(ie.flags|=2,Q)):(ie.flags|=1048576,Q)}function N(ie){return o&&ie.alternate===null&&(ie.flags|=2),ie}function U(ie,Q,oe,Te){return Q===null||Q.tag!==6?(Q=Jf(oe,ie.mode,Te),Q.return=ie,Q):(Q=C(Q,oe),Q.return=ie,Q)}function G(ie,Q,oe,Te){var $e=oe.type;return $e===$?Ce(ie,Q,oe.props.children,Te,oe.key):Q!==null&&(Q.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&cg($e)===Q.type)?(Te=C(Q,oe.props),Te.ref=pc(ie,Q,oe),Te.return=ie,Te):(Te=Fd(oe.type,oe.key,oe.props,null,ie.mode,Te),Te.ref=pc(ie,Q,oe),Te.return=ie,Te)}function he(ie,Q,oe,Te){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=Zf(oe,ie.mode,Te),Q.return=ie,Q):(Q=C(Q,oe.children||[]),Q.return=ie,Q)}function Ce(ie,Q,oe,Te,$e){return Q===null||Q.tag!==7?(Q=na(oe,ie.mode,Te,$e),Q.return=ie,Q):(Q=C(Q,oe),Q.return=ie,Q)}function ke(ie,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Jf(""+Q,ie.mode,oe),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return oe=Fd(Q.type,Q.key,Q.props,null,ie.mode,oe),oe.ref=pc(ie,null,Q),oe.return=ie,oe;case F:return Q=Zf(Q,ie.mode,oe),Q.return=ie,Q;case q:var Te=Q._init;return ke(ie,Te(Q._payload),oe)}if(hs(Q)||re(Q))return Q=na(Q,ie.mode,oe,null),Q.return=ie,Q;Wo(ie,Q)}return null}function Ae(ie,Q,oe,Te){var $e=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $e!==null?null:U(ie,Q,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:return oe.key===$e?G(ie,Q,oe,Te):null;case F:return oe.key===$e?he(ie,Q,oe,Te):null;case q:return $e=oe._init,Ae(ie,Q,$e(oe._payload),Te)}if(hs(oe)||re(oe))return $e!==null?null:Ce(ie,Q,oe,Te,null);Wo(ie,oe)}return null}function De(ie,Q,oe,Te,$e){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ie=ie.get(oe)||null,U(Q,ie,""+Te,$e);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case O:return ie=ie.get(Te.key===null?oe:Te.key)||null,G(Q,ie,Te,$e);case F:return ie=ie.get(Te.key===null?oe:Te.key)||null,he(Q,ie,Te,$e);case q:var Ge=Te._init;return De(ie,Q,oe,Ge(Te._payload),$e)}if(hs(Te)||re(Te))return ie=ie.get(oe)||null,Ce(Q,ie,Te,$e,null);Wo(Q,Te)}return null}function Le(ie,Q,oe,Te){for(var $e=null,Ge=null,We=Q,Xe=Q=0,kn=null;We!==null&&Xe<oe.length;Xe++){We.index>Xe?(kn=We,We=null):kn=We.sibling;var Ct=Ae(ie,We,oe[Xe],Te);if(Ct===null){We===null&&(We=kn);break}o&&We&&Ct.alternate===null&&c(ie,We),Q=k(Ct,Q,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct,We=kn}if(Xe===oe.length)return m(ie,We),Vt&&Vo(ie,Xe),$e;if(We===null){for(;Xe<oe.length;Xe++)We=ke(ie,oe[Xe],Te),We!==null&&(Q=k(We,Q,Xe),Ge===null?$e=We:Ge.sibling=We,Ge=We);return Vt&&Vo(ie,Xe),$e}for(We=w(ie,We);Xe<oe.length;Xe++)kn=De(We,ie,Xe,oe[Xe],Te),kn!==null&&(o&&kn.alternate!==null&&We.delete(kn.key===null?Xe:kn.key),Q=k(kn,Q,Xe),Ge===null?$e=kn:Ge.sibling=kn,Ge=kn);return o&&We.forEach(function(po){return c(ie,po)}),Vt&&Vo(ie,Xe),$e}function je(ie,Q,oe,Te){var $e=re(oe);if(typeof $e!="function")throw Error(t(150));if(oe=$e.call(oe),oe==null)throw Error(t(151));for(var Ge=$e=null,We=Q,Xe=Q=0,kn=null,Ct=oe.next();We!==null&&!Ct.done;Xe++,Ct=oe.next()){We.index>Xe?(kn=We,We=null):kn=We.sibling;var po=Ae(ie,We,Ct.value,Te);if(po===null){We===null&&(We=kn);break}o&&We&&po.alternate===null&&c(ie,We),Q=k(po,Q,Xe),Ge===null?$e=po:Ge.sibling=po,Ge=po,We=kn}if(Ct.done)return m(ie,We),Vt&&Vo(ie,Xe),$e;if(We===null){for(;!Ct.done;Xe++,Ct=oe.next())Ct=ke(ie,Ct.value,Te),Ct!==null&&(Q=k(Ct,Q,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return Vt&&Vo(ie,Xe),$e}for(We=w(ie,We);!Ct.done;Xe++,Ct=oe.next())Ct=De(We,ie,Xe,Ct.value,Te),Ct!==null&&(o&&Ct.alternate!==null&&We.delete(Ct.key===null?Xe:Ct.key),Q=k(Ct,Q,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return o&&We.forEach(function(T0){return c(ie,T0)}),Vt&&Vo(ie,Xe),$e}function sn(ie,Q,oe,Te){if(typeof oe=="object"&&oe!==null&&oe.type===$&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case O:e:{for(var $e=oe.key,Ge=Q;Ge!==null;){if(Ge.key===$e){if($e=oe.type,$e===$){if(Ge.tag===7){m(ie,Ge.sibling),Q=C(Ge,oe.props.children),Q.return=ie,ie=Q;break e}}else if(Ge.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&cg($e)===Ge.type){m(ie,Ge.sibling),Q=C(Ge,oe.props),Q.ref=pc(ie,Ge,oe),Q.return=ie,ie=Q;break e}m(ie,Ge);break}else c(ie,Ge);Ge=Ge.sibling}oe.type===$?(Q=na(oe.props.children,ie.mode,Te,oe.key),Q.return=ie,ie=Q):(Te=Fd(oe.type,oe.key,oe.props,null,ie.mode,Te),Te.ref=pc(ie,Q,oe),Te.return=ie,ie=Te)}return N(ie);case F:e:{for(Ge=oe.key;Q!==null;){if(Q.key===Ge)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){m(ie,Q.sibling),Q=C(Q,oe.children||[]),Q.return=ie,ie=Q;break e}else{m(ie,Q);break}else c(ie,Q);Q=Q.sibling}Q=Zf(oe,ie.mode,Te),Q.return=ie,ie=Q}return N(ie);case q:return Ge=oe._init,sn(ie,Q,Ge(oe._payload),Te)}if(hs(oe))return Le(ie,Q,oe,Te);if(re(oe))return je(ie,Q,oe,Te);Wo(ie,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(m(ie,Q.sibling),Q=C(Q,oe),Q.return=ie,ie=Q):(m(ie,Q),Q=Jf(oe,ie.mode,Te),Q.return=ie,ie=Q),N(ie)):m(ie,Q)}return sn}var tn=hf(!0),sd=hf(!1),mc=hr(null),Tr=null,no=null,Qa=null;function bi(){Qa=no=Tr=null}function id(o){var c=mc.current;zt(mc),o._currentValue=c}function Dn(o,c,m){for(;o!==null;){var w=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),o===m)break;o=o.return}}function ro(o,c){Tr=o,Qa=no=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(sr=!0),o.firstContext=null)}function qr(o){var c=o._currentValue;if(Qa!==o)if(o={context:o,memoizedValue:c,next:null},no===null){if(Tr===null)throw Error(t(308));no=o,Tr.dependencies={lanes:0,firstContext:o}}else no=no.next=o;return c}var qo=null;function ff(o){qo===null?qo=[o]:qo.push(o)}function od(o,c,m,w){var C=c.interleaved;return C===null?(m.next=m,ff(c)):(m.next=C.next,C.next=m),c.interleaved=m,_i(o,w)}function _i(o,c){o.lanes|=c;var m=o.alternate;for(m!==null&&(m.lanes|=c),m=o,o=o.return;o!==null;)o.childLanes|=c,m=o.alternate,m!==null&&(m.childLanes|=c),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Gr=!1;function ad(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ug(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function xi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Kr(o,c,m){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(wt&2)!==0){var C=w.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),w.pending=c,_i(o,m)}return C=w.interleaved,C===null?(c.next=c,ff(w)):(c.next=C.next,C.next=c),w.interleaved=c,_i(o,m)}function ld(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Ql(o,m)}}function dg(o,c){var m=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var C=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var N={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};k===null?C=k=N:k=k.next=N,m=m.next}while(m!==null);k===null?C=k=c:k=k.next=c}else C=k=c;m={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:k,shared:w.shared,effects:w.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function Ja(o,c,m,w){var C=o.updateQueue;Gr=!1;var k=C.firstBaseUpdate,N=C.lastBaseUpdate,U=C.shared.pending;if(U!==null){C.shared.pending=null;var G=U,he=G.next;G.next=null,N===null?k=he:N.next=he,N=G;var Ce=o.alternate;Ce!==null&&(Ce=Ce.updateQueue,U=Ce.lastBaseUpdate,U!==N&&(U===null?Ce.firstBaseUpdate=he:U.next=he,Ce.lastBaseUpdate=G))}if(k!==null){var ke=C.baseState;N=0,Ce=he=G=null,U=k;do{var Ae=U.lane,De=U.eventTime;if((w&Ae)===Ae){Ce!==null&&(Ce=Ce.next={eventTime:De,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Le=o,je=U;switch(Ae=c,De=m,je.tag){case 1:if(Le=je.payload,typeof Le=="function"){ke=Le.call(De,ke,Ae);break e}ke=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=je.payload,Ae=typeof Le=="function"?Le.call(De,ke,Ae):Le,Ae==null)break e;ke=Z({},ke,Ae);break e;case 2:Gr=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,Ae=C.effects,Ae===null?C.effects=[U]:Ae.push(U))}else De={eventTime:De,lane:Ae,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ce===null?(he=Ce=De,G=ke):Ce=Ce.next=De,N|=Ae;if(U=U.next,U===null){if(U=C.shared.pending,U===null)break;Ae=U,U=Ae.next,Ae.next=null,C.lastBaseUpdate=Ae,C.shared.pending=null}}while(!0);if(Ce===null&&(G=ke),C.baseState=G,C.firstBaseUpdate=he,C.lastBaseUpdate=Ce,c=C.shared.interleaved,c!==null){C=c;do N|=C.lane,C=C.next;while(C!==c)}else k===null&&(C.shared.lanes=0);lo|=N,o.lanes=N,o.memoizedState=ke}}function pf(o,c,m){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var w=o[c],C=w.callback;if(C!==null){if(w.callback=null,w=m,typeof C!="function")throw Error(t(191,C));C.call(w)}}}var gc={},Vs=hr(gc),vc=hr(gc),Za=hr(gc);function Si(o){if(o===gc)throw Error(t(174));return o}function mf(o,c){switch($t(Za,c),$t(vc,o),$t(Vs,gc),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ai(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ai(c,o)}zt(Vs),$t(Vs,c)}function so(){zt(Vs),zt(vc),zt(Za)}function gf(o){Si(Za.current);var c=Si(Vs.current),m=ai(c,o.type);c!==m&&($t(vc,o),$t(Vs,m))}function cd(o){vc.current===o&&(zt(Vs),zt(vc))}var qt=hr(0);function Go(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var vf=[];function ud(){for(var o=0;o<vf.length;o++)vf[o]._workInProgressVersionPrimary=null;vf.length=0}var yc=I.ReactCurrentDispatcher,yf=I.ReactCurrentBatchConfig,io=0,Qt=null,rn=null,gn=null,el=!1,wc=!1,Ko=0,dt=0;function Gn(){throw Error(t(321))}function wf(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!le(o[m],c[m]))return!1;return!0}function Yo(o,c,m,w,C,k){if(io=k,Qt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,yc.current=o===null||o.memoizedState===null?c0:vd,o=m(w,C),wc){k=0;do{if(wc=!1,Ko=0,25<=k)throw Error(t(301));k+=1,gn=rn=null,c.updateQueue=null,yc.current=sl,o=m(w,C)}while(wc)}if(yc.current=gd,c=rn!==null&&rn.next!==null,io=0,gn=rn=Qt=null,el=!1,c)throw Error(t(300));return o}function dd(){var o=Ko!==0;return Ko=0,o}function Hs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Qt.memoizedState=gn=o:gn=gn.next=o,gn}function Yr(){if(rn===null){var o=Qt.alternate;o=o!==null?o.memoizedState:null}else o=rn.next;var c=gn===null?Qt.memoizedState:gn.next;if(c!==null)gn=c,rn=o;else{if(o===null)throw Error(t(310));rn=o,o={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},gn===null?Qt.memoizedState=gn=o:gn=gn.next=o}return gn}function Kn(o,c){return typeof c=="function"?c(o):c}function bf(o){var c=Yr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=rn,C=w.baseQueue,k=m.pending;if(k!==null){if(C!==null){var N=C.next;C.next=k.next,k.next=N}w.baseQueue=C=k,m.pending=null}if(C!==null){k=C.next,w=w.baseState;var U=N=null,G=null,he=k;do{var Ce=he.lane;if((io&Ce)===Ce)G!==null&&(G=G.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),w=he.hasEagerState?he.eagerState:o(w,he.action);else{var ke={lane:Ce,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};G===null?(U=G=ke,N=w):G=G.next=ke,Qt.lanes|=Ce,lo|=Ce}he=he.next}while(he!==null&&he!==k);G===null?N=w:G.next=U,le(w,c.memoizedState)||(sr=!0),c.memoizedState=w,c.baseState=N,c.baseQueue=G,m.lastRenderedState=w}if(o=m.interleaved,o!==null){C=o;do k=C.lane,Qt.lanes|=k,lo|=k,C=C.next;while(C!==o)}else C===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function tl(o){var c=Yr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=m.dispatch,C=m.pending,k=c.memoizedState;if(C!==null){m.pending=null;var N=C=C.next;do k=o(k,N.action),N=N.next;while(N!==C);le(k,c.memoizedState)||(sr=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),m.lastRenderedState=k}return[k,w]}function hd(){}function _f(o,c){var m=Qt,w=Yr(),C=c(),k=!le(w.memoizedState,C);if(k&&(w.memoizedState=C,sr=!0),w=w.queue,Ws(Ai.bind(null,m,w,o),[o]),w.getSnapshot!==c||k||gn!==null&&gn.memoizedState.tag&1){if(m.flags|=2048,nl(9,gr.bind(null,m,w,C,c),void 0,null),En===null)throw Error(t(349));(io&30)!==0||xf(m,c,C)}return C}function xf(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Qt.updateQueue,c===null?(c={lastEffect:null,stores:null},Qt.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function gr(o,c,m,w){c.value=m,c.getSnapshot=w,fd(c)&&Sf(o)}function Ai(o,c,m){return m(function(){fd(c)&&Sf(o)})}function fd(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!le(o,m)}catch{return!0}}function Sf(o){var c=_i(o,1);c!==null&&xs(c,o,1,-1)}function bc(o){var c=Hs();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:o},c.queue=o,o=o.dispatch=vg.bind(null,Qt,o),[c.memoizedState,o]}function nl(o,c,m,w){return o={tag:o,create:c,destroy:m,deps:w,next:null},c=Qt.updateQueue,c===null?(c={lastEffect:null,stores:null},Qt.updateQueue=c,c.lastEffect=o.next=o):(m=c.lastEffect,m===null?c.lastEffect=o.next=o:(w=m.next,m.next=o,o.next=w,c.lastEffect=o)),o}function pd(){return Yr().memoizedState}function _c(o,c,m,w){var C=Hs();Qt.flags|=o,C.memoizedState=nl(1|c,m,void 0,w===void 0?null:w)}function rl(o,c,m,w){var C=Yr();w=w===void 0?null:w;var k=void 0;if(rn!==null){var N=rn.memoizedState;if(k=N.destroy,w!==null&&wf(w,N.deps)){C.memoizedState=nl(c,m,k,w);return}}Qt.flags|=o,C.memoizedState=nl(1|c,m,k,w)}function md(o,c){return _c(8390656,8,o,c)}function Ws(o,c){return rl(2048,8,o,c)}function hg(o,c){return rl(4,2,o,c)}function Ci(o,c){return rl(4,4,o,c)}function Af(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Cf(o,c,m){return m=m!=null?m.concat([o]):null,rl(4,4,Af.bind(null,c,o),m)}function xc(){}function fg(o,c){var m=Yr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&wf(c,w[1])?w[0]:(m.memoizedState=[o,c],o)}function pg(o,c){var m=Yr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&wf(c,w[1])?w[0]:(o=o(),m.memoizedState=[o,c],o)}function mg(o,c,m){return(io&21)===0?(o.baseState&&(o.baseState=!1,sr=!0),o.memoizedState=m):(le(m,c)||(m=Bh(),Qt.lanes|=m,lo|=m,o.baseState=!0),c)}function gg(o,c){var m=kt;kt=m!==0&&4>m?m:4,o(!0);var w=yf.transition;yf.transition={};try{o(!1),c()}finally{kt=m,yf.transition=w}}function Ef(){return Yr().memoizedState}function l0(o,c,m){var w=ho(o);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},kf(o))rr(c,m);else if(m=od(o,c,m,w),m!==null){var C=ar();xs(m,o,w,C),vs(m,c,w)}}function vg(o,c,m){var w=ho(o),C={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(kf(o))rr(c,C);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var N=c.lastRenderedState,U=k(N,m);if(C.hasEagerState=!0,C.eagerState=U,le(U,N)){var G=c.interleaved;G===null?(C.next=C,ff(c)):(C.next=G.next,G.next=C),c.interleaved=C;return}}catch{}finally{}m=od(o,c,C,w),m!==null&&(C=ar(),xs(m,o,w,C),vs(m,c,w))}}function kf(o){var c=o.alternate;return o===Qt||c!==null&&c===Qt}function rr(o,c){wc=el=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function vs(o,c,m){if((m&4194240)!==0){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Ql(o,m)}}var gd={readContext:qr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},c0={readContext:qr,useCallback:function(o,c){return Hs().memoizedState=[o,c===void 0?null:c],o},useContext:qr,useEffect:md,useImperativeHandle:function(o,c,m){return m=m!=null?m.concat([o]):null,_c(4194308,4,Af.bind(null,c,o),m)},useLayoutEffect:function(o,c){return _c(4194308,4,o,c)},useInsertionEffect:function(o,c){return _c(4,2,o,c)},useMemo:function(o,c){var m=Hs();return c=c===void 0?null:c,o=o(),m.memoizedState=[o,c],o},useReducer:function(o,c,m){var w=Hs();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},w.queue=o,o=o.dispatch=l0.bind(null,Qt,o),[w.memoizedState,o]},useRef:function(o){var c=Hs();return o={current:o},c.memoizedState=o},useState:bc,useDebugValue:xc,useDeferredValue:function(o){return Hs().memoizedState=o},useTransition:function(){var o=bc(!1),c=o[0];return o=gg.bind(null,o[1]),Hs().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,m){var w=Qt,C=Hs();if(Vt){if(m===void 0)throw Error(t(407));m=m()}else{if(m=c(),En===null)throw Error(t(349));(io&30)!==0||xf(w,c,m)}C.memoizedState=m;var k={value:m,getSnapshot:c};return C.queue=k,md(Ai.bind(null,w,k,o),[o]),w.flags|=2048,nl(9,gr.bind(null,w,k,m,c),void 0,null),m},useId:function(){var o=Hs(),c=En.identifierPrefix;if(Vt){var m=Bs,w=Fs;m=(w&~(1<<32-ps(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=Ko++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=dt++,c=":"+c+"r"+m.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},vd={readContext:qr,useCallback:fg,useContext:qr,useEffect:Ws,useImperativeHandle:Cf,useInsertionEffect:hg,useLayoutEffect:Ci,useMemo:pg,useReducer:bf,useRef:pd,useState:function(){return bf(Kn)},useDebugValue:xc,useDeferredValue:function(o){var c=Yr();return mg(c,rn.memoizedState,o)},useTransition:function(){var o=bf(Kn)[0],c=Yr().memoizedState;return[o,c]},useMutableSource:hd,useSyncExternalStore:_f,useId:Ef,unstable_isNewReconciler:!1},sl={readContext:qr,useCallback:fg,useContext:qr,useEffect:Ws,useImperativeHandle:Cf,useInsertionEffect:hg,useLayoutEffect:Ci,useMemo:pg,useReducer:tl,useRef:pd,useState:function(){return tl(Kn)},useDebugValue:xc,useDeferredValue:function(o){var c=Yr();return rn===null?c.memoizedState=o:mg(c,rn.memoizedState,o)},useTransition:function(){var o=tl(Kn)[0],c=Yr().memoizedState;return[o,c]},useMutableSource:hd,useSyncExternalStore:_f,useId:Ef,unstable_isNewReconciler:!1};function Xr(o,c){if(o&&o.defaultProps){c=Z({},c),o=o.defaultProps;for(var m in o)c[m]===void 0&&(c[m]=o[m]);return c}return c}function yd(o,c,m,w){c=o.memoizedState,m=m(w,c),m=m==null?c:Z({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var wd={isMounted:function(o){return(o=o._reactInternals)?hi(o)===o:!1},enqueueSetState:function(o,c,m){o=o._reactInternals;var w=ar(),C=ho(o),k=xi(w,C);k.payload=c,m!=null&&(k.callback=m),c=Kr(o,k,C),c!==null&&(xs(c,o,C,w),ld(c,o,C))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var w=ar(),C=ho(o),k=xi(w,C);k.tag=1,k.payload=c,m!=null&&(k.callback=m),c=Kr(o,k,C),c!==null&&(xs(c,o,C,w),ld(c,o,C))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=ar(),w=ho(o),C=xi(m,w);C.tag=2,c!=null&&(C.callback=c),c=Kr(o,C,w),c!==null&&(xs(c,o,w,m),ld(c,o,w))}};function Tf(o,c,m,w,C,k,N){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,k,N):c.prototype&&c.prototype.isPureReactComponent?!Ie(m,w)||!Ie(C,k):!0}function Xo(o,c,m){var w=!1,C=eo,k=c.contextType;return typeof k=="object"&&k!==null?k=qr(k):(C=pr(c)?nr:Hn.current,w=c.contextTypes,k=(w=w!=null)?Ya(o,C):eo),c=new c(m,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=wd,o.stateNode=c,c._reactInternals=o,w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=k),c}function il(o,c,m,w){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==o&&wd.enqueueReplaceState(c,c.state,null)}function Pf(o,c,m,w){var C=o.stateNode;C.props=m,C.state=o.memoizedState,C.refs={},ad(o);var k=c.contextType;typeof k=="object"&&k!==null?C.context=qr(k):(k=pr(c)?nr:Hn.current,C.context=Ya(o,k)),C.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(yd(o,c,k,m),C.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&wd.enqueueReplaceState(C,C.state,null),Ja(o,m,C,w),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function Qo(o,c){try{var m="",w=c;do m+=Me(w),w=w.return;while(w);var C=m}catch(k){C=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:C,digest:null}}function bd(o,c,m){return{value:o,source:null,stack:m??null,digest:c??null}}function ol(o,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var yg=typeof WeakMap=="function"?WeakMap:Map;function Sc(o,c,m){m=xi(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){Md||(Md=!0,Wf=w),ol(o,c)},m}function _d(o,c,m){m=xi(-1,m),m.tag=3;var w=o.type.getDerivedStateFromError;if(typeof w=="function"){var C=c.value;m.payload=function(){return w(C)},m.callback=function(){ol(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(m.callback=function(){ol(o,c),typeof w!="function"&&(co===null?co=new Set([this]):co.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})}),m}function Ac(o,c,m){var w=o.pingCache;if(w===null){w=o.pingCache=new yg;var C=new Set;w.set(c,C)}else C=w.get(c),C===void 0&&(C=new Set,w.set(c,C));C.has(m)||(C.add(m),o=v0.bind(null,o,c,m),c.then(o,o))}function wg(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Rf(o,c,m,w,C){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=xi(-1,1),c.tag=2,Kr(m,c,1))),m.lanes|=1),o):(o.flags|=65536,o.lanes=C,o)}var xd=I.ReactCurrentOwner,sr=!1;function Nn(o,c,m,w){c.child=o===null?sd(c,null,m,w):tn(c,o.child,m,w)}function bg(o,c,m,w,C){m=m.render;var k=c.ref;return ro(c,C),w=Yo(o,c,m,w,k,C),m=dd(),o!==null&&!sr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,ys(o,c,C)):(Vt&&m&&hc(c),c.flags|=1,Nn(o,c,w,C),c.child)}function Mf(o,c,m,w,C){if(o===null){var k=m.type;return typeof k=="function"&&!jd(k)&&k.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=k,qs(o,c,k,w,C)):(o=Fd(m.type,null,w,c,c.mode,C),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&C)===0){var N=k.memoizedProps;if(m=m.compare,m=m!==null?m:Ie,m(N,w)&&o.ref===c.ref)return ys(o,c,C)}return c.flags|=1,o=Ss(k,w),o.ref=c.ref,o.return=c,c.child=o}function qs(o,c,m,w,C){if(o!==null){var k=o.memoizedProps;if(Ie(k,w)&&o.ref===c.ref)if(sr=!1,c.pendingProps=w=k,(o.lanes&C)!==0)(o.flags&131072)!==0&&(sr=!0);else return c.lanes=o.lanes,ys(o,c,C)}return Nf(o,c,m,w,C)}function If(o,c,m){var w=c.pendingProps,C=w.children,k=o!==null?o.memoizedState:null;if(w.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(ul,Rr),Rr|=m;else{if((m&1073741824)===0)return o=k!==null?k.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,$t(ul,Rr),Rr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=k!==null?k.baseLanes:m,$t(ul,Rr),Rr|=w}else k!==null?(w=k.baseLanes|m,c.memoizedState=null):w=m,$t(ul,Rr),Rr|=w;return Nn(o,c,C,m),c.child}function Df(o,c){var m=c.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Nf(o,c,m,w,C){var k=pr(m)?nr:Hn.current;return k=Ya(c,k),ro(c,C),m=Yo(o,c,m,w,k,C),w=dd(),o!==null&&!sr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,ys(o,c,C)):(Vt&&w&&hc(c),c.flags|=1,Nn(o,c,m,C),c.child)}function Of(o,c,m,w,C){if(pr(m)){var k=!0;Vr(c)}else k=!1;if(ro(c,C),c.stateNode===null)Ad(o,c),Xo(c,m,w),Pf(c,m,w,C),w=!0;else if(o===null){var N=c.stateNode,U=c.memoizedProps;N.props=U;var G=N.context,he=m.contextType;typeof he=="object"&&he!==null?he=qr(he):(he=pr(m)?nr:Hn.current,he=Ya(c,he));var Ce=m.getDerivedStateFromProps,ke=typeof Ce=="function"||typeof N.getSnapshotBeforeUpdate=="function";ke||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==w||G!==he)&&il(c,N,w,he),Gr=!1;var Ae=c.memoizedState;N.state=Ae,Ja(c,w,N,C),G=c.memoizedState,U!==w||Ae!==G||fr.current||Gr?(typeof Ce=="function"&&(yd(c,m,Ce,w),G=c.memoizedState),(U=Gr||Tf(c,m,U,w,Ae,G,he))?(ke||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=G),N.props=w,N.state=G,N.context=he,w=U):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{N=c.stateNode,ug(o,c),U=c.memoizedProps,he=c.type===c.elementType?U:Xr(c.type,U),N.props=he,ke=c.pendingProps,Ae=N.context,G=m.contextType,typeof G=="object"&&G!==null?G=qr(G):(G=pr(m)?nr:Hn.current,G=Ya(c,G));var De=m.getDerivedStateFromProps;(Ce=typeof De=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(U!==ke||Ae!==G)&&il(c,N,w,G),Gr=!1,Ae=c.memoizedState,N.state=Ae,Ja(c,w,N,C);var Le=c.memoizedState;U!==ke||Ae!==Le||fr.current||Gr?(typeof De=="function"&&(yd(c,m,De,w),Le=c.memoizedState),(he=Gr||Tf(c,m,he,w,Ae,Le,G)||!1)?(Ce||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(w,Le,G),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(w,Le,G)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Le),N.props=w,N.state=Le,N.context=G,w=he):(typeof N.componentDidUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(c.flags|=1024),w=!1)}return Lf(o,c,m,w,k,C)}function Lf(o,c,m,w,C,k){Df(o,c);var N=(c.flags&128)!==0;if(!w&&!N)return C&&sg(c,m,!1),ys(o,c,k);w=c.stateNode,xd.current=c;var U=N&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,o!==null&&N?(c.child=tn(c,o.child,null,k),c.child=tn(c,null,U,k)):Nn(o,c,U,k),c.memoizedState=w.state,C&&sg(c,m,!0),c.child}function _g(o){var c=o.stateNode;c.pendingContext?ng(o,c.pendingContext,c.pendingContext!==c.context):c.context&&ng(o,c.context,!1),mf(o,c.containerInfo)}function Gs(o,c,m,w,C){return Us(),zs(C),c.flags|=256,Nn(o,c,m,w),c.child}var Cc={dehydrated:null,treeContext:null,retryLane:0};function Ec(o){return{baseLanes:o,cachePool:null,transitions:null}}function Sd(o,c,m){var w=c.pendingProps,C=qt.current,k=!1,N=(c.flags&128)!==0,U;if((U=N)||(U=o!==null&&o.memoizedState===null?!1:(C&2)!==0),U?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),$t(qt,C&1),o===null)return mr(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(N=w.children,o=w.fallback,k?(w=c.mode,k=c.child,N={mode:"hidden",children:N},(w&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=N):k=Bd(N,w,0,null),o=na(o,w,m,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=Ec(m),c.memoizedState=Cc,o):al(c,N));if(C=o.memoizedState,C!==null&&(U=C.dehydrated,U!==null))return Ke(o,c,N,w,U,C,m);if(k){k=w.fallback,N=c.mode,C=o.child,U=C.sibling;var G={mode:"hidden",children:w.children};return(N&1)===0&&c.child!==C?(w=c.child,w.childLanes=0,w.pendingProps=G,c.deletions=null):(w=Ss(C,G),w.subtreeFlags=C.subtreeFlags&14680064),U!==null?k=Ss(U,k):(k=na(k,N,m,null),k.flags|=2),k.return=c,w.return=c,w.sibling=k,c.child=w,w=k,k=c.child,N=o.child.memoizedState,N=N===null?Ec(m):{baseLanes:N.baseLanes|m,cachePool:null,transitions:N.transitions},k.memoizedState=N,k.childLanes=o.childLanes&~m,c.memoizedState=Cc,w}return k=o.child,o=k.sibling,w=Ss(k,{mode:"visible",children:w.children}),(c.mode&1)===0&&(w.lanes=m),w.return=c,w.sibling=null,o!==null&&(m=c.deletions,m===null?(c.deletions=[o],c.flags|=16):m.push(o)),c.child=w,c.memoizedState=null,w}function al(o,c){return c=Bd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ei(o,c,m,w){return w!==null&&zs(w),tn(c,o.child,null,m),o=al(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Ke(o,c,m,w,C,k,N){if(m)return c.flags&256?(c.flags&=-257,w=bd(Error(t(422))),Ei(o,c,N,w)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=w.fallback,C=c.mode,w=Bd({mode:"visible",children:w.children},C,0,null),k=na(k,C,N,null),k.flags|=2,w.return=c,k.return=c,w.sibling=k,c.child=w,(c.mode&1)!==0&&tn(c,o.child,null,N),c.child.memoizedState=Ec(N),c.memoizedState=Cc,k);if((c.mode&1)===0)return Ei(o,c,N,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var U=w.dgst;return w=U,k=Error(t(419)),w=bd(k,w,void 0),Ei(o,c,N,w)}if(U=(N&o.childLanes)!==0,sr||U){if(w=En,w!==null){switch(N&-N){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(w.suspendedLanes|N))!==0?0:C,C!==0&&C!==k.retryLane&&(k.retryLane=C,_i(o,C),xs(w,o,C,-1))}return Qf(),w=bd(Error(t(421))),Ei(o,c,N,w)}return C.data==="$?"?(c.flags|=128,c.child=o.child,c=y0.bind(null,o),C._reactRetry=c,null):(o=k.treeContext,kr=Ji(C.nextSibling),qn=c,Vt=!0,gs=null,o!==null&&(Hr[Wr++]=Fs,Hr[Wr++]=Bs,Hr[Wr++]=zo,Fs=o.id,Bs=o.overflow,zo=c),c=al(c,w.children),c.flags|=4096,c)}function kc(o,c,m){o.lanes|=c;var w=o.alternate;w!==null&&(w.lanes|=c),Dn(o.return,c,m)}function Tc(o,c,m,w,C){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:C}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=m,k.tailMode=C)}function oo(o,c,m){var w=c.pendingProps,C=w.revealOrder,k=w.tail;if(Nn(o,c,w.children,m),w=qt.current,(w&2)!==0)w=w&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&kc(o,m,c);else if(o.tag===19)kc(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}w&=1}if($t(qt,w),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(m=c.child,C=null;m!==null;)o=m.alternate,o!==null&&Go(o)===null&&(C=m),m=m.sibling;m=C,m===null?(C=c.child,c.child=null):(C=m.sibling,m.sibling=null),Tc(c,!1,C,m,k);break;case"backwards":for(m=null,C=c.child,c.child=null;C!==null;){if(o=C.alternate,o!==null&&Go(o)===null){c.child=C;break}o=C.sibling,C.sibling=m,m=C,C=o}Tc(c,!0,m,null,k);break;case"together":Tc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ad(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function ys(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),lo|=c.lanes,(m&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,m=Ss(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=Ss(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function xg(o,c,m){switch(c.tag){case 3:_g(c),Us();break;case 5:gf(c);break;case 1:pr(c.type)&&Vr(c);break;case 4:mf(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,C=c.memoizedProps.value;$t(mc,w._currentValue),w._currentValue=C;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?($t(qt,qt.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?Sd(o,c,m):($t(qt,qt.current&1),o=ys(o,c,m),o!==null?o.sibling:null);$t(qt,qt.current&1);break;case 19:if(w=(m&c.childLanes)!==0,(o.flags&128)!==0){if(w)return oo(o,c,m);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),$t(qt,qt.current),w)break;return null;case 22:case 23:return c.lanes=0,If(o,c,m)}return ys(o,c,m)}var On,jf,Sg,Ff;On=function(o,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},jf=function(){},Sg=function(o,c,m,w){var C=o.memoizedProps;if(C!==w){o=c.stateNode,Si(Vs.current);var k=null;switch(m){case"input":C=Xt(o,C),w=Xt(o,w),k=[];break;case"select":C=Z({},C,{value:void 0}),w=Z({},w,{value:void 0}),k=[];break;case"textarea":C=ii(o,C),w=ii(o,w),k=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(o.onclick=Yu)}ko(m,w);var N;m=null;for(he in C)if(!w.hasOwnProperty(he)&&C.hasOwnProperty(he)&&C[he]!=null)if(he==="style"){var U=C[he];for(N in U)U.hasOwnProperty(N)&&(m||(m={}),m[N]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(s.hasOwnProperty(he)?k||(k=[]):(k=k||[]).push(he,null));for(he in w){var G=w[he];if(U=C?.[he],w.hasOwnProperty(he)&&G!==U&&(G!=null||U!=null))if(he==="style")if(U){for(N in U)!U.hasOwnProperty(N)||G&&G.hasOwnProperty(N)||(m||(m={}),m[N]="");for(N in G)G.hasOwnProperty(N)&&U[N]!==G[N]&&(m||(m={}),m[N]=G[N])}else m||(k||(k=[]),k.push(he,m)),m=G;else he==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,U=U?U.__html:void 0,G!=null&&U!==G&&(k=k||[]).push(he,G)):he==="children"?typeof G!="string"&&typeof G!="number"||(k=k||[]).push(he,""+G):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(s.hasOwnProperty(he)?(G!=null&&he==="onScroll"&&Ut("scroll",o),k||U===G||(k=[])):(k=k||[]).push(he,G))}m&&(k=k||[]).push("style",m);var he=k;(c.updateQueue=he)&&(c.flags|=4)}},Ff=function(o,c,m,w){m!==w&&(c.flags|=4)};function Pc(o,c){if(!Vt)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function Ln(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,w=0;if(c)for(var C=o.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=w,o.childLanes=m,c}function u0(o,c,m){var w=c.pendingProps;switch(Ho(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(c),null;case 1:return pr(c.type)&&Zu(),Ln(c),null;case 3:return w=c.stateNode,so(),zt(fr),zt(Hn),ud(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(o===null||o.child===null)&&(fc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,gs!==null&&(Kf(gs),gs=null))),jf(o,c),Ln(c),null;case 5:cd(c);var C=Si(Za.current);if(m=c.type,o!==null&&c.stateNode!=null)Sg(o,c,m,w,C),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(t(166));return Ln(c),null}if(o=Si(Vs.current),fc(c)){w=c.stateNode,m=c.type;var k=c.memoizedProps;switch(w[Ls]=c,w[Zi]=k,o=(c.mode&1)!==0,m){case"dialog":Ut("cancel",w),Ut("close",w);break;case"iframe":case"object":case"embed":Ut("load",w);break;case"video":case"audio":for(C=0;C<vi.length;C++)Ut(vi[C],w);break;case"source":Ut("error",w);break;case"img":case"image":case"link":Ut("error",w),Ut("load",w);break;case"details":Ut("toggle",w);break;case"input":ur(w,k),Ut("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!k.multiple},Ut("invalid",w);break;case"textarea":Eo(w,k),Ut("invalid",w)}ko(m,k),C=null;for(var N in k)if(k.hasOwnProperty(N)){var U=k[N];N==="children"?typeof U=="string"?w.textContent!==U&&(k.suppressHydrationWarning!==!0&&lc(w.textContent,U,o),C=["children",U]):typeof U=="number"&&w.textContent!==""+U&&(k.suppressHydrationWarning!==!0&&lc(w.textContent,U,o),C=["children",""+U]):s.hasOwnProperty(N)&&U!=null&&N==="onScroll"&&Ut("scroll",w)}switch(m){case"input":it(w),jl(w,k,!0);break;case"textarea":it(w),oi(w);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(w.onclick=Yu)}w=C,c.updateQueue=w,w!==null&&(c.flags|=4)}else{N=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=wu(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=N.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof w.is=="string"?o=N.createElement(m,{is:w.is}):(o=N.createElement(m),m==="select"&&(N=o,w.multiple?N.multiple=!0:w.size&&(N.size=w.size))):o=N.createElementNS(o,m),o[Ls]=c,o[Zi]=w,On(o,c,!1,!1),c.stateNode=o;e:{switch(N=To(m,w),m){case"dialog":Ut("cancel",o),Ut("close",o),C=w;break;case"iframe":case"object":case"embed":Ut("load",o),C=w;break;case"video":case"audio":for(C=0;C<vi.length;C++)Ut(vi[C],o);C=w;break;case"source":Ut("error",o),C=w;break;case"img":case"image":case"link":Ut("error",o),Ut("load",o),C=w;break;case"details":Ut("toggle",o),C=w;break;case"input":ur(o,w),C=Xt(o,w),Ut("invalid",o);break;case"option":C=w;break;case"select":o._wrapperState={wasMultiple:!!w.multiple},C=Z({},w,{value:void 0}),Ut("invalid",o);break;case"textarea":Eo(o,w),C=ii(o,w),Ut("invalid",o);break;default:C=w}ko(m,C),U=C;for(k in U)if(U.hasOwnProperty(k)){var G=U[k];k==="style"?ka(o,G):k==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Ca(o,G)):k==="children"?typeof G=="string"?(m!=="textarea"||G!=="")&&li(o,G):typeof G=="number"&&li(o,""+G):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?G!=null&&k==="onScroll"&&Ut("scroll",o):G!=null&&R(o,k,G,N))}switch(m){case"input":it(o),jl(o,w,!1);break;case"textarea":it(o),oi(o);break;case"option":w.value!=null&&o.setAttribute("value",""+Ne(w.value));break;case"select":o.multiple=!!w.multiple,k=w.value,k!=null?An(o,!!w.multiple,k,!1):w.defaultValue!=null&&An(o,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=Yu)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ln(c),null;case 6:if(o&&c.stateNode!=null)Ff(o,c,o.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(t(166));if(m=Si(Za.current),Si(Vs.current),fc(c)){if(w=c.stateNode,m=c.memoizedProps,w[Ls]=c,(k=w.nodeValue!==m)&&(o=qn,o!==null))switch(o.tag){case 3:lc(w.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&lc(w.nodeValue,m,(o.mode&1)!==0)}k&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Ls]=c,c.stateNode=w}return Ln(c),null;case 13:if(zt(qt),w=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Vt&&kr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)df(),Us(),c.flags|=98560,k=!1;else if(k=fc(c),w!==null&&w.dehydrated!==null){if(o===null){if(!k)throw Error(t(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Ls]=c}else Us(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ln(c),k=!1}else gs!==null&&(Kf(gs),gs=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(w=w!==null,w!==(o!==null&&o.memoizedState!==null)&&w&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(qt.current&1)!==0?vn===0&&(vn=3):Qf())),c.updateQueue!==null&&(c.flags|=4),Ln(c),null);case 4:return so(),jf(o,c),o===null&&Xi(c.stateNode.containerInfo),Ln(c),null;case 10:return id(c.type._context),Ln(c),null;case 17:return pr(c.type)&&Zu(),Ln(c),null;case 19:if(zt(qt),k=c.memoizedState,k===null)return Ln(c),null;if(w=(c.flags&128)!==0,N=k.rendering,N===null)if(w)Pc(k,!1);else{if(vn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(N=Go(o),N!==null){for(c.flags|=128,Pc(k,!1),w=N.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)k=m,o=w,k.flags&=14680066,N=k.alternate,N===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=N.childLanes,k.lanes=N.lanes,k.child=N.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=N.memoizedProps,k.memoizedState=N.memoizedState,k.updateQueue=N.updateQueue,k.type=N.type,o=N.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return $t(qt,qt.current&1|2),c.child}o=o.sibling}k.tail!==null&&It()>Jo&&(c.flags|=128,w=!0,Pc(k,!1),c.lanes=4194304)}else{if(!w)if(o=Go(N),o!==null){if(c.flags|=128,w=!0,m=o.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),Pc(k,!0),k.tail===null&&k.tailMode==="hidden"&&!N.alternate&&!Vt)return Ln(c),null}else 2*It()-k.renderingStartTime>Jo&&m!==1073741824&&(c.flags|=128,w=!0,Pc(k,!1),c.lanes=4194304);k.isBackwards?(N.sibling=c.child,c.child=N):(m=k.last,m!==null?m.sibling=N:c.child=N,k.last=N)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=It(),c.sibling=null,m=qt.current,$t(qt,w?m&1|2:m&1),c):(Ln(c),null);case 22:case 23:return Xf(),w=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==w&&(c.flags|=8192),w&&(c.mode&1)!==0?(Rr&1073741824)!==0&&(Ln(c),c.subtreeFlags&6&&(c.flags|=8192)):Ln(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function d0(o,c){switch(Ho(c),c.tag){case 1:return pr(c.type)&&Zu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return so(),zt(fr),zt(Hn),ud(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return cd(c),null;case 13:if(zt(qt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Us()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return zt(qt),null;case 4:return so(),null;case 10:return id(c.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var Cd=!1,Gt=!1,ir=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function ll(o,c){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Jt(o,c,w)}else m.current=null}function Rc(o,c,m){try{m()}catch(w){Jt(o,c,w)}}var Ag=!1;function h0(o,c){if(cc=Mu,o=Ot(),nc(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var C=w.anchorOffset,k=w.focusNode;w=w.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break e}var N=0,U=-1,G=-1,he=0,Ce=0,ke=o,Ae=null;t:for(;;){for(var De;ke!==m||C!==0&&ke.nodeType!==3||(U=N+C),ke!==k||w!==0&&ke.nodeType!==3||(G=N+w),ke.nodeType===3&&(N+=ke.nodeValue.length),(De=ke.firstChild)!==null;)Ae=ke,ke=De;for(;;){if(ke===o)break t;if(Ae===m&&++he===C&&(U=N),Ae===k&&++Ce===w&&(G=N),(De=ke.nextSibling)!==null)break;ke=Ae,Ae=ke.parentNode}ke=De}m=U===-1||G===-1?null:{start:U,end:G}}else m=null}m=m||{start:0,end:0}}else m=null;for($o={focusedElem:o,selectionRange:m},Mu=!1,Oe=c;Oe!==null;)if(c=Oe,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Oe=o;else for(;Oe!==null;){c=Oe;try{var Le=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var je=Le.memoizedProps,sn=Le.memoizedState,ie=c.stateNode,Q=ie.getSnapshotBeforeUpdate(c.elementType===c.type?je:Xr(c.type,je),sn);ie.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=c.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Te){Jt(c,c.return,Te)}if(o=c.sibling,o!==null){o.return=c.return,Oe=o;break}Oe=c.return}return Le=Ag,Ag=!1,Le}function ki(o,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&o)===o){var k=C.destroy;C.destroy=void 0,k!==void 0&&Rc(c,m,k)}C=C.next}while(C!==w)}}function Mc(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&o)===o){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function Ed(o){var c=o.ref;if(c!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof c=="function"?c(o):c.current=o}}function Cg(o){var c=o.alternate;c!==null&&(o.alternate=null,Cg(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Ls],delete c[Zi],delete c[Qu],delete c[L],delete c[Ga])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Eg(o){return o.tag===5||o.tag===3||o.tag===4}function kg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Eg(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Bf(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(o,c):m.insertBefore(o,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(o,m)):(c=m,c.appendChild(o)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Yu));else if(w!==4&&(o=o.child,o!==null))for(Bf(o,c,m),o=o.sibling;o!==null;)Bf(o,c,m),o=o.sibling}function kd(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(w!==4&&(o=o.child,o!==null))for(kd(o,c,m),o=o.sibling;o!==null;)kd(o,c,m),o=o.sibling}var Cn=null,ws=!1;function Ks(o,c,m){for(m=m.child;m!==null;)$f(o,c,m),m=m.sibling}function $f(o,c,m){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(Cu,m)}catch{}switch(m.tag){case 5:Gt||ll(m,c);case 6:var w=Cn,C=ws;Cn=null,Ks(o,c,m),Cn=w,ws=C,Cn!==null&&(ws?(o=Cn,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):Cn.removeChild(m.stateNode));break;case 18:Cn!==null&&(ws?(o=Cn,m=m.stateNode,o.nodeType===8?lf(o.parentNode,m):o.nodeType===1&&lf(o,m),Pt(o)):lf(Cn,m.stateNode));break;case 4:w=Cn,C=ws,Cn=m.stateNode.containerInfo,ws=!0,Ks(o,c,m),Cn=w,ws=C;break;case 0:case 11:case 14:case 15:if(!Gt&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var k=C,N=k.destroy;k=k.tag,N!==void 0&&((k&2)!==0||(k&4)!==0)&&Rc(m,c,N),C=C.next}while(C!==w)}Ks(o,c,m);break;case 1:if(!Gt&&(ll(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(U){Jt(m,c,U)}Ks(o,c,m);break;case 21:Ks(o,c,m);break;case 22:m.mode&1?(Gt=(w=Gt)||m.memoizedState!==null,Ks(o,c,m),Gt=w):Ks(o,c,m);break;default:Ks(o,c,m)}}function cl(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new ir),c.forEach(function(w){var C=w0.bind(null,o,w);m.has(w)||(m.add(w),w.then(C,C))})}}function Pr(o,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var C=m[w];try{var k=o,N=c,U=N;e:for(;U!==null;){switch(U.tag){case 5:Cn=U.stateNode,ws=!1;break e;case 3:Cn=U.stateNode.containerInfo,ws=!0;break e;case 4:Cn=U.stateNode.containerInfo,ws=!0;break e}U=U.return}if(Cn===null)throw Error(t(160));$f(k,N,C),Cn=null,ws=!1;var G=C.alternate;G!==null&&(G.return=null),C.return=null}catch(he){Jt(C,c,he)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Uf(c,o),c=c.sibling}function Uf(o,c){var m=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Pr(c,o),bs(o),w&4){try{ki(3,o,o.return),Mc(3,o)}catch(je){Jt(o,o.return,je)}try{ki(5,o,o.return)}catch(je){Jt(o,o.return,je)}}break;case 1:Pr(c,o),bs(o),w&512&&m!==null&&ll(m,m.return);break;case 5:if(Pr(c,o),bs(o),w&512&&m!==null&&ll(m,m.return),o.flags&32){var C=o.stateNode;try{li(C,"")}catch(je){Jt(o,o.return,je)}}if(w&4&&(C=o.stateNode,C!=null)){var k=o.memoizedProps,N=m!==null?m.memoizedProps:k,U=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{U==="input"&&k.type==="radio"&&k.name!=null&&zi(C,k),To(U,N);var he=To(U,k);for(N=0;N<G.length;N+=2){var Ce=G[N],ke=G[N+1];Ce==="style"?ka(C,ke):Ce==="dangerouslySetInnerHTML"?Ca(C,ke):Ce==="children"?li(C,ke):R(C,Ce,ke,he)}switch(U){case"input":In(C,k);break;case"textarea":Aa(C,k);break;case"select":var Ae=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!k.multiple;var De=k.value;De!=null?An(C,!!k.multiple,De,!1):Ae!==!!k.multiple&&(k.defaultValue!=null?An(C,!!k.multiple,k.defaultValue,!0):An(C,!!k.multiple,k.multiple?[]:"",!1))}C[Zi]=k}catch(je){Jt(o,o.return,je)}}break;case 6:if(Pr(c,o),bs(o),w&4){if(o.stateNode===null)throw Error(t(162));C=o.stateNode,k=o.memoizedProps;try{C.nodeValue=k}catch(je){Jt(o,o.return,je)}}break;case 3:if(Pr(c,o),bs(o),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Pt(c.containerInfo)}catch(je){Jt(o,o.return,je)}break;case 4:Pr(c,o),bs(o);break;case 13:Pr(c,o),bs(o),C=o.child,C.flags&8192&&(k=C.memoizedState!==null,C.stateNode.isHidden=k,!k||C.alternate!==null&&C.alternate.memoizedState!==null||(Hf=It())),w&4&&cl(o);break;case 22:if(Ce=m!==null&&m.memoizedState!==null,o.mode&1?(Gt=(he=Gt)||Ce,Pr(c,o),Gt=he):Pr(c,o),bs(o),w&8192){if(he=o.memoizedState!==null,(o.stateNode.isHidden=he)&&!Ce&&(o.mode&1)!==0)for(Oe=o,Ce=o.child;Ce!==null;){for(ke=Oe=Ce;Oe!==null;){switch(Ae=Oe,De=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:ki(4,Ae,Ae.return);break;case 1:ll(Ae,Ae.return);var Le=Ae.stateNode;if(typeof Le.componentWillUnmount=="function"){w=Ae,m=Ae.return;try{c=w,Le.props=c.memoizedProps,Le.state=c.memoizedState,Le.componentWillUnmount()}catch(je){Jt(w,m,je)}}break;case 5:ll(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){ao(ke);continue}}De!==null?(De.return=Ae,Oe=De):ao(ke)}Ce=Ce.sibling}e:for(Ce=null,ke=o;;){if(ke.tag===5){if(Ce===null){Ce=ke;try{C=ke.stateNode,he?(k=C.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(U=ke.stateNode,G=ke.memoizedProps.style,N=G!=null&&G.hasOwnProperty("display")?G.display:null,U.style.display=Ea("display",N))}catch(je){Jt(o,o.return,je)}}}else if(ke.tag===6){if(Ce===null)try{ke.stateNode.nodeValue=he?"":ke.memoizedProps}catch(je){Jt(o,o.return,je)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===o)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===o)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===o)break e;Ce===ke&&(Ce=null),ke=ke.return}Ce===ke&&(Ce=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:Pr(c,o),bs(o),w&4&&cl(o);break;case 21:break;default:Pr(c,o),bs(o)}}function bs(o){var c=o.flags;if(c&2){try{e:{for(var m=o.return;m!==null;){if(Eg(m)){var w=m;break e}m=m.return}throw Error(t(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(li(C,""),w.flags&=-33);var k=kg(o);kd(o,k,C);break;case 3:case 4:var N=w.stateNode.containerInfo,U=kg(o);Bf(o,U,N);break;default:throw Error(t(161))}}catch(G){Jt(o,o.return,G)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Td(o,c,m){Oe=o,zf(o)}function zf(o,c,m){for(var w=(o.mode&1)!==0;Oe!==null;){var C=Oe,k=C.child;if(C.tag===22&&w){var N=C.memoizedState!==null||Cd;if(!N){var U=C.alternate,G=U!==null&&U.memoizedState!==null||Gt;U=Cd;var he=Gt;if(Cd=N,(Gt=G)&&!he)for(Oe=C;Oe!==null;)N=Oe,G=N.child,N.tag===22&&N.memoizedState!==null?Tg(C):G!==null?(G.return=N,Oe=G):Tg(C);for(;k!==null;)Oe=k,zf(k),k=k.sibling;Oe=C,Cd=U,Gt=he}_s(o)}else(C.subtreeFlags&8772)!==0&&k!==null?(k.return=C,Oe=k):_s(o)}}function _s(o){for(;Oe!==null;){var c=Oe;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Gt||Mc(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Gt)if(m===null)w.componentDidMount();else{var C=c.elementType===c.type?m.memoizedProps:Xr(c.type,m.memoizedProps);w.componentDidUpdate(C,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&pf(c,k,w);break;case 3:var N=c.updateQueue;if(N!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}pf(c,N,m)}break;case 5:var U=c.stateNode;if(m===null&&c.flags&4){m=U;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&m.focus();break;case"img":G.src&&(m.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var he=c.alternate;if(he!==null){var Ce=he.memoizedState;if(Ce!==null){var ke=Ce.dehydrated;ke!==null&&Pt(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||c.flags&512&&Ed(c)}catch(Ae){Jt(c,c.return,Ae)}}if(c===o){Oe=null;break}if(m=c.sibling,m!==null){m.return=c.return,Oe=m;break}Oe=c.return}}function ao(o){for(;Oe!==null;){var c=Oe;if(c===o){Oe=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Oe=m;break}Oe=c.return}}function Tg(o){for(;Oe!==null;){var c=Oe;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Mc(4,c)}catch(G){Jt(c,m,G)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var C=c.return;try{w.componentDidMount()}catch(G){Jt(c,C,G)}}var k=c.return;try{Ed(c)}catch(G){Jt(c,k,G)}break;case 5:var N=c.return;try{Ed(c)}catch(G){Jt(c,N,G)}}}catch(G){Jt(c,c.return,G)}if(c===o){Oe=null;break}var U=c.sibling;if(U!==null){U.return=c.return,Oe=U;break}Oe=c.return}}var Pg=Math.ceil,Pd=I.ReactCurrentDispatcher,Vf=I.ReactCurrentOwner,Qr=I.ReactCurrentBatchConfig,wt=0,En=null,pn=null,jn=0,Rr=0,ul=hr(0),vn=0,Ic=null,lo=0,Dc=0,Rd=0,Nc=null,vr=null,Hf=0,Jo=1/0,Ti=null,Md=!1,Wf=null,co=null,Id=!1,uo=null,or=0,Oc=0,qf=null,Dd=-1,Lc=0;function ar(){return(wt&6)!==0?It():Dd!==-1?Dd:Dd=It()}function ho(o){return(o.mode&1)===0?1:(wt&2)!==0&&jn!==0?jn&-jn:lg.transition!==null?(Lc===0&&(Lc=Bh()),Lc):(o=kt,o!==0||(o=window.event,o=o===void 0?16:Nm(o.type)),o)}function xs(o,c,m,w){if(50<Oc)throw Oc=0,qf=null,Error(t(185));Xl(o,m,w),((wt&2)===0||o!==En)&&(o===En&&((wt&2)===0&&(Dc|=m),vn===4&&fo(o,jn)),yr(o,w),m===1&&wt===0&&(c.mode&1)===0&&(Jo=It()+500,ed&&to()))}function yr(o,c){var m=o.callbackNode;Vy(o,c);var w=Do(o,o===En?jn:0);if(w===0)m!==null&&Et(m),o.callbackNode=null,o.callbackPriority=0;else if(c=w&-w,o.callbackPriority!==c){if(m!=null&&Et(m),c===1)o.tag===0?Uo(Rg.bind(null,o)):ig(Rg.bind(null,o)),Xu(function(){(wt&6)===0&&to()}),m=null;else{switch(No(w)){case 1:m=jh;break;case 4:m=Sm;break;case 16:m=Kl;break;case 536870912:m=Fh;break;default:m=Kl}m=jg(m,Nd.bind(null,o))}o.callbackPriority=c,o.callbackNode=m}}function Nd(o,c){if(Dd=-1,Lc=0,(wt&6)!==0)throw Error(t(327));var m=o.callbackNode;if(dl()&&o.callbackNode!==m)return null;var w=Do(o,o===En?jn:0);if(w===0)return null;if((w&30)!==0||(w&o.expiredLanes)!==0||c)c=Od(o,w);else{c=w;var C=wt;wt|=2;var k=Ig();(En!==o||jn!==c)&&(Ti=null,Jo=It()+500,ea(o,c));do try{m0();break}catch(U){Mg(o,U)}while(!0);bi(),Pd.current=k,wt=C,pn!==null?c=0:(En=null,jn=0,c=vn)}if(c!==0){if(c===2&&(C=ku(o),C!==0&&(w=C,c=Gf(o,C))),c===1)throw m=Ic,ea(o,0),fo(o,w),yr(o,It()),m;if(c===6)fo(o,w);else{if(C=o.current.alternate,(w&30)===0&&!f0(C)&&(c=Od(o,w),c===2&&(k=ku(o),k!==0&&(w=k,c=Gf(o,k))),c===1))throw m=Ic,ea(o,0),fo(o,w),yr(o,It()),m;switch(o.finishedWork=C,o.finishedLanes=w,c){case 0:case 1:throw Error(t(345));case 2:ta(o,vr,Ti);break;case 3:if(fo(o,w),(w&130023424)===w&&(c=Hf+500-It(),10<c)){if(Do(o,0)!==0)break;if(C=o.suspendedLanes,(C&w)!==w){ar(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=Qi(ta.bind(null,o,vr,Ti),c);break}ta(o,vr,Ti);break;case 4:if(fo(o,w),(w&4194240)===w)break;for(c=o.eventTimes,C=-1;0<w;){var N=31-ps(w);k=1<<N,N=c[N],N>C&&(C=N),w&=~k}if(w=C,w=It()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Pg(w/1960))-w,10<w){o.timeoutHandle=Qi(ta.bind(null,o,vr,Ti),w);break}ta(o,vr,Ti);break;case 5:ta(o,vr,Ti);break;default:throw Error(t(329))}}}return yr(o,It()),o.callbackNode===m?Nd.bind(null,o):null}function Gf(o,c){var m=Nc;return o.current.memoizedState.isDehydrated&&(ea(o,c).flags|=256),o=Od(o,c),o!==2&&(c=vr,vr=m,c!==null&&Kf(c)),o}function Kf(o){vr===null?vr=o:vr.push.apply(vr,o)}function f0(o){for(var c=o;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var C=m[w],k=C.getSnapshot;C=C.value;try{if(!le(k(),C))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fo(o,c){for(c&=~Rd,c&=~Dc,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var m=31-ps(c),w=1<<m;o[m]=-1,c&=~w}}function Rg(o){if((wt&6)!==0)throw Error(t(327));dl();var c=Do(o,0);if((c&1)===0)return yr(o,It()),null;var m=Od(o,c);if(o.tag!==0&&m===2){var w=ku(o);w!==0&&(c=w,m=Gf(o,w))}if(m===1)throw m=Ic,ea(o,0),fo(o,c),yr(o,It()),m;if(m===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ta(o,vr,Ti),yr(o,It()),null}function Yf(o,c){var m=wt;wt|=1;try{return o(c)}finally{wt=m,wt===0&&(Jo=It()+500,ed&&to())}}function Zo(o){uo!==null&&uo.tag===0&&(wt&6)===0&&dl();var c=wt;wt|=1;var m=Qr.transition,w=kt;try{if(Qr.transition=null,kt=1,o)return o()}finally{kt=w,Qr.transition=m,wt=c,(wt&6)===0&&to()}}function Xf(){Rr=ul.current,zt(ul)}function ea(o,c){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,dc(m)),pn!==null)for(m=pn.return;m!==null;){var w=m;switch(Ho(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Zu();break;case 3:so(),zt(fr),zt(Hn),ud();break;case 5:cd(w);break;case 4:so();break;case 13:zt(qt);break;case 19:zt(qt);break;case 10:id(w.type._context);break;case 22:case 23:Xf()}m=m.return}if(En=o,pn=o=Ss(o.current,null),jn=Rr=c,vn=0,Ic=null,Rd=Dc=lo=0,vr=Nc=null,qo!==null){for(c=0;c<qo.length;c++)if(m=qo[c],w=m.interleaved,w!==null){m.interleaved=null;var C=w.next,k=m.pending;if(k!==null){var N=k.next;k.next=C,w.next=N}m.pending=w}qo=null}return o}function Mg(o,c){do{var m=pn;try{if(bi(),yc.current=gd,el){for(var w=Qt.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}el=!1}if(io=0,gn=rn=Qt=null,wc=!1,Ko=0,Vf.current=null,m===null||m.return===null){vn=1,Ic=c,pn=null;break}e:{var k=o,N=m.return,U=m,G=c;if(c=jn,U.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var he=G,Ce=U,ke=Ce.tag;if((Ce.mode&1)===0&&(ke===0||ke===11||ke===15)){var Ae=Ce.alternate;Ae?(Ce.updateQueue=Ae.updateQueue,Ce.memoizedState=Ae.memoizedState,Ce.lanes=Ae.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var De=wg(N);if(De!==null){De.flags&=-257,Rf(De,N,U,k,c),De.mode&1&&Ac(k,he,c),c=De,G=he;var Le=c.updateQueue;if(Le===null){var je=new Set;je.add(G),c.updateQueue=je}else Le.add(G);break e}else{if((c&1)===0){Ac(k,he,c),Qf();break e}G=Error(t(426))}}else if(Vt&&U.mode&1){var sn=wg(N);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),Rf(sn,N,U,k,c),zs(Qo(G,U));break e}}k=G=Qo(G,U),vn!==4&&(vn=2),Nc===null?Nc=[k]:Nc.push(k),k=N;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var ie=Sc(k,G,c);dg(k,ie);break e;case 1:U=G;var Q=k.type,oe=k.stateNode;if((k.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(co===null||!co.has(oe)))){k.flags|=65536,c&=-c,k.lanes|=c;var Te=_d(k,U,c);dg(k,Te);break e}}k=k.return}while(k!==null)}Ng(m)}catch($e){c=$e,pn===m&&m!==null&&(pn=m=m.return);continue}break}while(!0)}function Ig(){var o=Pd.current;return Pd.current=gd,o===null?gd:o}function Qf(){(vn===0||vn===3||vn===2)&&(vn=4),En===null||(lo&268435455)===0&&(Dc&268435455)===0||fo(En,jn)}function Od(o,c){var m=wt;wt|=2;var w=Ig();(En!==o||jn!==c)&&(Ti=null,ea(o,c));do try{p0();break}catch(C){Mg(o,C)}while(!0);if(bi(),wt=m,Pd.current=w,pn!==null)throw Error(t(261));return En=null,jn=0,vn}function p0(){for(;pn!==null;)Dg(pn)}function m0(){for(;pn!==null&&!dn();)Dg(pn)}function Dg(o){var c=Lg(o.alternate,o,Rr);o.memoizedProps=o.pendingProps,c===null?Ng(o):pn=c,Vf.current=null}function Ng(o){var c=o;do{var m=c.alternate;if(o=c.return,(c.flags&32768)===0){if(m=u0(m,c,Rr),m!==null){pn=m;return}}else{if(m=d0(m,c),m!==null){m.flags&=32767,pn=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{vn=6,pn=null;return}}if(c=c.sibling,c!==null){pn=c;return}pn=c=o}while(c!==null);vn===0&&(vn=5)}function ta(o,c,m){var w=kt,C=Qr.transition;try{Qr.transition=null,kt=1,g0(o,c,m,w)}finally{Qr.transition=C,kt=w}return null}function g0(o,c,m,w){do dl();while(uo!==null);if((wt&6)!==0)throw Error(t(327));m=o.finishedWork;var C=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var k=m.lanes|m.childLanes;if(Pm(o,k),o===En&&(pn=En=null,jn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Id||(Id=!0,jg(Kl,function(){return dl(),null})),k=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||k){k=Qr.transition,Qr.transition=null;var N=kt;kt=1;var U=wt;wt|=4,Vf.current=null,h0(o,m),Uf(m,o),o0($o),Mu=!!cc,$o=cc=null,o.current=m,Td(m),fi(),wt=U,kt=N,Qr.transition=k}else o.current=m;if(Id&&(Id=!1,uo=o,or=C),k=o.pendingLanes,k===0&&(co=null),zy(m.stateNode),yr(o,It()),c!==null)for(w=o.onRecoverableError,m=0;m<c.length;m++)C=c[m],w(C.value,{componentStack:C.stack,digest:C.digest});if(Md)throw Md=!1,o=Wf,Wf=null,o;return(or&1)!==0&&o.tag!==0&&dl(),k=o.pendingLanes,(k&1)!==0?o===qf?Oc++:(Oc=0,qf=o):Oc=0,to(),null}function dl(){if(uo!==null){var o=No(or),c=Qr.transition,m=kt;try{if(Qr.transition=null,kt=16>o?16:o,uo===null)var w=!1;else{if(o=uo,uo=null,or=0,(wt&6)!==0)throw Error(t(331));var C=wt;for(wt|=4,Oe=o.current;Oe!==null;){var k=Oe,N=k.child;if((Oe.flags&16)!==0){var U=k.deletions;if(U!==null){for(var G=0;G<U.length;G++){var he=U[G];for(Oe=he;Oe!==null;){var Ce=Oe;switch(Ce.tag){case 0:case 11:case 15:ki(8,Ce,k)}var ke=Ce.child;if(ke!==null)ke.return=Ce,Oe=ke;else for(;Oe!==null;){Ce=Oe;var Ae=Ce.sibling,De=Ce.return;if(Cg(Ce),Ce===he){Oe=null;break}if(Ae!==null){Ae.return=De,Oe=Ae;break}Oe=De}}}var Le=k.alternate;if(Le!==null){var je=Le.child;if(je!==null){Le.child=null;do{var sn=je.sibling;je.sibling=null,je=sn}while(je!==null)}}Oe=k}}if((k.subtreeFlags&2064)!==0&&N!==null)N.return=k,Oe=N;else e:for(;Oe!==null;){if(k=Oe,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:ki(9,k,k.return)}var ie=k.sibling;if(ie!==null){ie.return=k.return,Oe=ie;break e}Oe=k.return}}var Q=o.current;for(Oe=Q;Oe!==null;){N=Oe;var oe=N.child;if((N.subtreeFlags&2064)!==0&&oe!==null)oe.return=N,Oe=oe;else e:for(N=Q;Oe!==null;){if(U=Oe,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Mc(9,U)}}catch($e){Jt(U,U.return,$e)}if(U===N){Oe=null;break e}var Te=U.sibling;if(Te!==null){Te.return=U.return,Oe=Te;break e}Oe=U.return}}if(wt=C,to(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(Cu,o)}catch{}w=!0}return w}finally{kt=m,Qr.transition=c}}return!1}function Ld(o,c,m){c=Qo(m,c),c=Sc(o,c,1),o=Kr(o,c,1),c=ar(),o!==null&&(Xl(o,1,c),yr(o,c))}function Jt(o,c,m){if(o.tag===3)Ld(o,o,m);else for(;c!==null;){if(c.tag===3){Ld(c,o,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(co===null||!co.has(w))){o=Qo(m,o),o=_d(c,o,1),c=Kr(c,o,1),o=ar(),c!==null&&(Xl(c,1,o),yr(c,o));break}}c=c.return}}function v0(o,c,m){var w=o.pingCache;w!==null&&w.delete(c),c=ar(),o.pingedLanes|=o.suspendedLanes&m,En===o&&(jn&m)===m&&(vn===4||vn===3&&(jn&130023424)===jn&&500>It()-Hf?ea(o,0):Rd|=m),yr(o,c)}function Og(o,c){c===0&&((o.mode&1)===0?c=1:(c=Eu,Eu<<=1,(Eu&130023424)===0&&(Eu=4194304)));var m=ar();o=_i(o,c),o!==null&&(Xl(o,c,m),yr(o,m))}function y0(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),Og(o,m)}function w0(o,c){var m=0;switch(o.tag){case 13:var w=o.stateNode,C=o.memoizedState;C!==null&&(m=C.retryLane);break;case 19:w=o.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(c),Og(o,m)}var Lg;Lg=function(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps||fr.current)sr=!0;else{if((o.lanes&m)===0&&(c.flags&128)===0)return sr=!1,xg(o,c,m);sr=(o.flags&131072)!==0}else sr=!1,Vt&&(c.flags&1048576)!==0&&og(c,nd,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Ad(o,c),o=c.pendingProps;var C=Ya(c,Hn.current);ro(c,m),C=Yo(null,c,w,o,C,m);var k=dd();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,pr(w)?(k=!0,Vr(c)):k=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ad(c),C.updater=wd,c.stateNode=C,C._reactInternals=c,Pf(c,w,o,m),c=Lf(null,c,w,!0,k,m)):(c.tag=0,Vt&&k&&hc(c),Nn(null,c,C,m),c=c.child),c;case 16:w=c.elementType;e:{switch(Ad(o,c),o=c.pendingProps,C=w._init,w=C(w._payload),c.type=w,C=c.tag=_0(w),o=Xr(w,o),C){case 0:c=Nf(null,c,w,o,m);break e;case 1:c=Of(null,c,w,o,m);break e;case 11:c=bg(null,c,w,o,m);break e;case 14:c=Mf(null,c,w,Xr(w.type,o),m);break e}throw Error(t(306,w,""))}return c;case 0:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Xr(w,C),Nf(o,c,w,C,m);case 1:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Xr(w,C),Of(o,c,w,C,m);case 3:e:{if(_g(c),o===null)throw Error(t(387));w=c.pendingProps,k=c.memoizedState,C=k.element,ug(o,c),Ja(c,w,null,m);var N=c.memoizedState;if(w=N.element,k.isDehydrated)if(k={element:w,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){C=Qo(Error(t(423)),c),c=Gs(o,c,w,m,C);break e}else if(w!==C){C=Qo(Error(t(424)),c),c=Gs(o,c,w,m,C);break e}else for(kr=Ji(c.stateNode.containerInfo.firstChild),qn=c,Vt=!0,gs=null,m=sd(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Us(),w===C){c=ys(o,c,m);break e}Nn(o,c,w,m)}c=c.child}return c;case 5:return gf(c),o===null&&mr(c),w=c.type,C=c.pendingProps,k=o!==null?o.memoizedProps:null,N=C.children,uc(w,C)?N=null:k!==null&&uc(w,k)&&(c.flags|=32),Df(o,c),Nn(o,c,N,m),c.child;case 6:return o===null&&mr(c),null;case 13:return Sd(o,c,m);case 4:return mf(c,c.stateNode.containerInfo),w=c.pendingProps,o===null?c.child=tn(c,null,w,m):Nn(o,c,w,m),c.child;case 11:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Xr(w,C),bg(o,c,w,C,m);case 7:return Nn(o,c,c.pendingProps,m),c.child;case 8:return Nn(o,c,c.pendingProps.children,m),c.child;case 12:return Nn(o,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,C=c.pendingProps,k=c.memoizedProps,N=C.value,$t(mc,w._currentValue),w._currentValue=N,k!==null)if(le(k.value,N)){if(k.children===C.children&&!fr.current){c=ys(o,c,m);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var U=k.dependencies;if(U!==null){N=k.child;for(var G=U.firstContext;G!==null;){if(G.context===w){if(k.tag===1){G=xi(-1,m&-m),G.tag=2;var he=k.updateQueue;if(he!==null){he=he.shared;var Ce=he.pending;Ce===null?G.next=G:(G.next=Ce.next,Ce.next=G),he.pending=G}}k.lanes|=m,G=k.alternate,G!==null&&(G.lanes|=m),Dn(k.return,m,c),U.lanes|=m;break}G=G.next}}else if(k.tag===10)N=k.type===c.type?null:k.child;else if(k.tag===18){if(N=k.return,N===null)throw Error(t(341));N.lanes|=m,U=N.alternate,U!==null&&(U.lanes|=m),Dn(N,m,c),N=k.sibling}else N=k.child;if(N!==null)N.return=k;else for(N=k;N!==null;){if(N===c){N=null;break}if(k=N.sibling,k!==null){k.return=N.return,N=k;break}N=N.return}k=N}Nn(o,c,C.children,m),c=c.child}return c;case 9:return C=c.type,w=c.pendingProps.children,ro(c,m),C=qr(C),w=w(C),c.flags|=1,Nn(o,c,w,m),c.child;case 14:return w=c.type,C=Xr(w,c.pendingProps),C=Xr(w.type,C),Mf(o,c,w,C,m);case 15:return qs(o,c,c.type,c.pendingProps,m);case 17:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Xr(w,C),Ad(o,c),c.tag=1,pr(w)?(o=!0,Vr(c)):o=!1,ro(c,m),Xo(c,w,C),Pf(c,w,C,m),Lf(null,c,w,!0,o,m);case 19:return oo(o,c,m);case 22:return If(o,c,m)}throw Error(t(156,c.tag))};function jg(o,c){return Be(o,c)}function b0(o,c,m,w){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(o,c,m,w){return new b0(o,c,m,w)}function jd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _0(o){if(typeof o=="function")return jd(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ue)return 11;if(o===H)return 14}return 2}function Ss(o,c){var m=o.alternate;return m===null?(m=Jr(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function Fd(o,c,m,w,C,k){var N=2;if(w=o,typeof o=="function")jd(o)&&(N=1);else if(typeof o=="string")N=5;else e:switch(o){case $:return na(m.children,C,k,c);case W:N=8,C|=8;break;case K:return o=Jr(12,m,c,C|2),o.elementType=K,o.lanes=k,o;case fe:return o=Jr(13,m,c,C),o.elementType=fe,o.lanes=k,o;case ne:return o=Jr(19,m,c,C),o.elementType=ne,o.lanes=k,o;case te:return Bd(m,C,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ce:N=10;break e;case pe:N=9;break e;case ue:N=11;break e;case H:N=14;break e;case q:N=16,w=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=Jr(N,m,c,C),c.elementType=o,c.type=w,c.lanes=k,c}function na(o,c,m,w){return o=Jr(7,o,w,c),o.lanes=m,o}function Bd(o,c,m,w){return o=Jr(22,o,w,c),o.elementType=te,o.lanes=m,o.stateNode={isHidden:!1},o}function Jf(o,c,m){return o=Jr(6,o,null,c),o.lanes=m,o}function Zf(o,c,m){return c=Jr(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function x0(o,c,m,w,C){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function ep(o,c,m,w,C,k,N,U,G){return o=new x0(o,c,m,U,G),c===1?(c=1,k===!0&&(c|=8)):c=0,k=Jr(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},ad(k),o}function S0(o,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:w==null?null:""+w,children:o,containerInfo:c,implementation:m}}function Fg(o){if(!o)return eo;o=o._reactInternals;e:{if(hi(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(pr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var m=o.type;if(pr(m))return rg(o,m,c)}return c}function Bg(o,c,m,w,C,k,N,U,G){return o=ep(m,w,!0,o,C,k,N,U,G),o.context=Fg(null),m=o.current,w=ar(),C=ho(m),k=xi(w,C),k.callback=c??null,Kr(m,k,C),o.current.lanes=C,Xl(o,C,w),yr(o,w),o}function $d(o,c,m,w){var C=c.current,k=ar(),N=ho(C);return m=Fg(m),c.context===null?c.context=m:c.pendingContext=m,c=xi(k,N),c.payload={element:o},w=w===void 0?null:w,w!==null&&(c.callback=w),o=Kr(C,c,N),o!==null&&(xs(o,C,N,k),ld(o,C,N)),N}function Ud(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function $g(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function tp(o,c){$g(o,c),(o=o.alternate)&&$g(o,c)}function A0(){return null}var Ug=typeof reportError=="function"?reportError:function(o){console.error(o)};function zd(o){this._internalRoot=o}jc.prototype.render=zd.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));$d(o,c,null,null)},jc.prototype.unmount=zd.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Zo(function(){$d(null,o,null,null)}),c[Er]=null}};function jc(o){this._internalRoot=o}jc.prototype.unstable_scheduleHydration=function(o){if(o){var c=Uh();o={blockedOn:null,target:o,priority:c};for(var m=0;m<qi.length&&c!==0&&c<qi[m].priority;m++);qi.splice(m,0,o),m===0&&Im(o)}};function np(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Vd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function zg(){}function C0(o,c,m,w,C){if(C){if(typeof w=="function"){var k=w;w=function(){var he=Ud(N);k.call(he)}}var N=Bg(c,w,o,0,null,!1,!1,"",zg);return o._reactRootContainer=N,o[Er]=N.current,Xi(o.nodeType===8?o.parentNode:o),Zo(),N}for(;C=o.lastChild;)o.removeChild(C);if(typeof w=="function"){var U=w;w=function(){var he=Ud(G);U.call(he)}}var G=ep(o,0,!1,null,null,!1,!1,"",zg);return o._reactRootContainer=G,o[Er]=G.current,Xi(o.nodeType===8?o.parentNode:o),Zo(function(){$d(c,G,m,w)}),G}function ra(o,c,m,w,C){var k=m._reactRootContainer;if(k){var N=k;if(typeof C=="function"){var U=C;C=function(){var G=Ud(N);U.call(G)}}$d(c,N,o,C)}else N=C0(m,c,o,C,w);return Ud(N)}$h=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ma(c.pendingLanes);m!==0&&(Ql(c,m|1),yr(c,It()),(wt&6)===0&&(Jo=It()+500,to()))}break;case 13:Zo(function(){var w=_i(o,1);if(w!==null){var C=ar();xs(w,o,1,C)}}),tp(o,1)}},Tu=function(o){if(o.tag===13){var c=_i(o,134217728);if(c!==null){var m=ar();xs(c,o,134217728,m)}tp(o,134217728)}},Rm=function(o){if(o.tag===13){var c=ho(o),m=_i(o,c);if(m!==null){var w=ar();xs(m,o,c,w)}tp(o,c)}},Uh=function(){return kt},zh=function(o,c){var m=kt;try{return kt=o,c()}finally{kt=m}},Vl=function(o,c,m){switch(c){case"input":if(In(o,m),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==o&&w.form===o.form){var C=Ju(w);if(!C)throw Error(t(90));Mt(w),In(w,C)}}}break;case"textarea":Aa(o,m);break;case"select":c=m.value,c!=null&&An(o,!!m.multiple,c,!1)}},Su=Yf,Hl=Zo;var E0={usingClientEntryPoint:!1,Events:[Vn,lt,Ju,_u,xu,Yf]},Fc={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k0={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=xe(o),o===null?null:o.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||A0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Cu=Hd.inject(k0),Ds=Hd}catch{}}return ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0,ns.createPortal=function(o,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!np(c))throw Error(t(200));return S0(o,c,null,m)},ns.createRoot=function(o,c){if(!np(o))throw Error(t(299));var m=!1,w="",C=Ug;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=ep(o,1,!1,null,null,m,!1,w,C),o[Er]=c.current,Xi(o.nodeType===8?o.parentNode:o),new zd(c)},ns.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=xe(c),o=o===null?null:o.stateNode,o},ns.flushSync=function(o){return Zo(o)},ns.hydrate=function(o,c,m){if(!Vd(c))throw Error(t(200));return ra(null,o,c,!0,m)},ns.hydrateRoot=function(o,c,m){if(!np(o))throw Error(t(405));var w=m!=null&&m.hydratedSources||null,C=!1,k="",N=Ug;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(N=m.onRecoverableError)),c=Bg(c,null,o,1,m??null,C,!1,k,N),o[Er]=c.current,Xi(o),w)for(o=0;o<w.length;o++)m=w[o],C=m._getVersion,C=C(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,C]:c.mutableSourceEagerHydrationData.push(m,C);return new jc(c)},ns.render=function(o,c,m){if(!Vd(c))throw Error(t(200));return ra(null,o,c,!1,m)},ns.unmountComponentAtNode=function(o){if(!Vd(o))throw Error(t(40));return o._reactRootContainer?(Zo(function(){ra(null,null,o,!1,function(){o._reactRootContainer=null,o[Er]=null})}),!0):!1},ns.unstable_batchedUpdates=Yf,ns.unstable_renderSubtreeIntoContainer=function(o,c,m,w){if(!Vd(m))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return ra(o,c,m,!1,w)},ns.version="18.3.1-next-f1338f8080-20240426",ns}var Kx;function YC(){if(Kx)return V0.exports;Kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),V0.exports=cN(),V0.exports}var Yx;function uN(){if(Yx)return Gg;Yx=1;var n=YC();return Gg.createRoot=n.createRoot,Gg.hydrateRoot=n.hydrateRoot,Gg}var dN=uN();const hN=im(dN),fN="modulepreload",pN=function(n){return"/"+n},Xx={},qe=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=d(t.map(h=>{if(h=pN(h),h in Xx)return;Xx[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":fN,f||(v.as="script"),v.crossOrigin="",v.href=h,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((_,S)=>{v.addEventListener("load",_),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var om=YC();const mN=im(om);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bp.apply(this,arguments)}var _l;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_l||(_l={}));const Qx="popstate";function gN(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return Ow("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Iv(s)}return yN(e,t,null,n)}function xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function XC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vN(){return Math.random().toString(36).substr(2,8)}function Jx(n,e){return{usr:n.state,key:n.key,idx:e}}function Ow(n,e,t,r){return t===void 0&&(t=null),Bp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Th(e):e,{state:t,key:e&&e.key||r||vN()})}function Iv(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Th(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function yN(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=_l.Pop,d=null,h=f();h==null&&(h=0,a.replaceState(Bp({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function g(){l=_l.Pop;let E=f(),P=E==null?null:E-h;h=E,d&&d({action:l,location:x.location,delta:P})}function v(E,P){l=_l.Push;let M=Ow(x.location,E,P);h=f()+1;let R=Jx(M,h),I=x.createHref(M);try{a.pushState(R,"",I)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(I)}i&&d&&d({action:l,location:x.location,delta:1})}function _(E,P){l=_l.Replace;let M=Ow(x.location,E,P);h=f();let R=Jx(M,h),I=x.createHref(M);a.replaceState(R,"",I),i&&d&&d({action:l,location:x.location,delta:0})}function S(E){let P=s.location.origin!=="null"?s.location.origin:s.location.href,M=typeof E=="string"?E:Iv(E);return M=M.replace(/ $/,"%20"),xn(P,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,P)}let x={get action(){return l},get location(){return n(s,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Qx,g),d=E,()=>{s.removeEventListener(Qx,g),d=null}},createHref(E){return e(s,E)},createURL:S,encodeLocation(E){let P=S(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:_,go(E){return a.go(E)}};return x}var Zx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Zx||(Zx={}));function wN(n,e,t){return t===void 0&&(t="/"),bN(n,e,t)}function bN(n,e,t,r){let s=typeof e=="string"?Th(e):e,i=Lb(s.pathname||"/",t);if(i==null)return null;let a=QC(n);_N(a);let l=null;for(let d=0;l==null&&d<a.length;++d){let h=DN(i);l=RN(a[d],h)}return l}function QC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};d.relativePath.startsWith("/")&&(xn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=xl([r,d.relativePath]),f=t.concat(d);i.children&&i.children.length>0&&(xn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),QC(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:TN(h,i.index),routesMeta:f})};return n.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let d of JC(i.path))s(i,a,d)}),e}function JC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=JC(r.join("/")),l=[];return l.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&l.push(...a),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function _N(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:PN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const xN=/^:[\w-]+$/,SN=3,AN=2,CN=1,EN=10,kN=-2,eS=n=>n==="*";function TN(n,e){let t=n.split("/"),r=t.length;return t.some(eS)&&(r+=kN),e&&(r+=AN),t.filter(s=>!eS(s)).reduce((s,i)=>s+(xN.test(i)?SN:i===""?CN:EN),r)}function PN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function RN(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=MN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),v=d.route;if(!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:xl([i,g.pathname]),pathnameBase:jN(xl([i,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(i=xl([i,g.pathnameBase]))}return a}function MN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=IN(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,g)=>{let{paramName:v,isOptional:_}=f;if(v==="*"){let x=l[g]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[g];return _&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:n}}function IN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),XC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return XC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Lb(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function NN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Th(n):n;return{pathname:t?t.startsWith("/")?t:ON(t,e):e,search:FN(r),hash:BN(s)}}function ON(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function q0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jb(n,e){let t=LN(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fb(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Th(n):(s=Bp({},n),xn(!s.pathname||!s.pathname.includes("?"),q0("?","pathname","search",s)),xn(!s.pathname||!s.pathname.includes("#"),q0("#","pathname","hash",s)),xn(!s.search||!s.search.includes("#"),q0("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}l=g>=0?e[g]:"/"}let d=NN(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const xl=n=>n.join("/").replace(/\/\/+/g,"/"),jN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $N(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ZC=["post","put","patch","delete"];new Set(ZC);const UN=["get",...ZC];new Set(UN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$p.apply(this,arguments)}const Bb=A.createContext(null),zN=A.createContext(null),Il=A.createContext(null),ny=A.createContext(null),xo=A.createContext({outlet:null,matches:[],isDataRoute:!1}),eE=A.createContext(null);function VN(n,e){let{relative:t}=e===void 0?{}:e;Ph()||xn(!1);let{basename:r,navigator:s}=A.useContext(Il),{hash:i,pathname:a,search:l}=nE(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:xl([r,a])),s.createHref({pathname:d,search:l,hash:i})}function Ph(){return A.useContext(ny)!=null}function $i(){return Ph()||xn(!1),A.useContext(ny).location}function tE(n){A.useContext(Il).static||A.useLayoutEffect(n)}function Rh(){let{isDataRoute:n}=A.useContext(xo);return n?sO():HN()}function HN(){Ph()||xn(!1);let n=A.useContext(Bb),{basename:e,future:t,navigator:r}=A.useContext(Il),{matches:s}=A.useContext(xo),{pathname:i}=$i(),a=JSON.stringify(jb(s,t.v7_relativeSplatPath)),l=A.useRef(!1);return tE(()=>{l.current=!0}),A.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let g=Fb(h,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:xl([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,a,i,n])}const WN=A.createContext(null);function qN(n){let e=A.useContext(xo).outlet;return e&&A.createElement(WN.Provider,{value:n},e)}function _9(){let{matches:n}=A.useContext(xo),e=n[n.length-1];return e?e.params:{}}function nE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=A.useContext(Il),{matches:s}=A.useContext(xo),{pathname:i}=$i(),a=JSON.stringify(jb(s,r.v7_relativeSplatPath));return A.useMemo(()=>Fb(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function GN(n,e){return KN(n,e)}function KN(n,e,t,r){Ph()||xn(!1);let{navigator:s}=A.useContext(Il),{matches:i}=A.useContext(xo),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=$i(),f;if(e){var g;let E=typeof e=="string"?Th(e):e;d==="/"||(g=E.pathname)!=null&&g.startsWith(d)||xn(!1),f=E}else f=h;let v=f.pathname||"/",_=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=wN(n,{pathname:_}),x=ZN(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:xl([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:xl([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,r);return e&&x?A.createElement(ny.Provider,{value:{location:$p({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_l.Pop}},x):x}function YN(){let n=rO(),e=$N(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const XN=A.createElement(YN,null);class QN extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(xo.Provider,{value:this.props.routeContext},A.createElement(eE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JN(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Bb);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(xo.Provider,{value:e},r)}function ZN(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(s=t)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);f>=0||xn(!1),a=a.slice(0,Math.min(a.length,f+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:v,errors:_}=t,S=g.route.loader&&v[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||S){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,g,v)=>{let _,S=!1,x=null,E=null;t&&(_=l&&g.route.id?l[g.route.id]:void 0,x=g.route.errorElement||XN,d&&(h<0&&v===0?(iO("route-fallback"),S=!0,E=null):h===v&&(S=!0,E=g.route.hydrateFallbackElement||null)));let P=e.concat(a.slice(0,v+1)),M=()=>{let R;return _?R=x:S?R=E:g.route.Component?R=A.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,A.createElement(JN,{match:g,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?A.createElement(QN,{location:t.location,revalidation:t.revalidation,component:x,error:_,children:M(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):M()},null)}var rE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(rE||{}),sE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(sE||{});function eO(n){let e=A.useContext(Bb);return e||xn(!1),e}function tO(n){let e=A.useContext(zN);return e||xn(!1),e}function nO(n){let e=A.useContext(xo);return e||xn(!1),e}function iE(n){let e=nO(),t=e.matches[e.matches.length-1];return t.route.id||xn(!1),t.route.id}function rO(){var n;let e=A.useContext(eE),t=tO(),r=iE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sO(){let{router:n}=eO(rE.UseNavigateStable),e=iE(sE.UseNavigateStable),t=A.useRef(!1);return tE(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$p({fromRouteId:e},i)))},[n,e])}const tS={};function iO(n,e,t){tS[n]||(tS[n]=!0)}function oO(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Up(n){let{to:e,replace:t,state:r,relative:s}=n;Ph()||xn(!1);let{future:i,static:a}=A.useContext(Il),{matches:l}=A.useContext(xo),{pathname:d}=$i(),h=Rh(),f=Fb(e,jb(l,i.v7_relativeSplatPath),d,s==="path"),g=JSON.stringify(f);return A.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:s}),[h,g,s,t,r]),null}function $b(n){return qN(n.context)}function ze(n){xn(!1)}function aO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=_l.Pop,navigator:i,static:a=!1,future:l}=n;Ph()&&xn(!1);let d=e.replace(/^\/*/,"/"),h=A.useMemo(()=>({basename:d,navigator:i,static:a,future:$p({v7_relativeSplatPath:!1},l)}),[d,l,i,a]);typeof r=="string"&&(r=Th(r));let{pathname:f="/",search:g="",hash:v="",state:_=null,key:S="default"}=r,x=A.useMemo(()=>{let E=Lb(f,d);return E==null?null:{location:{pathname:E,search:g,hash:v,state:_,key:S},navigationType:s}},[d,f,g,v,_,S,s]);return x==null?null:A.createElement(Il.Provider,{value:h},A.createElement(ny.Provider,{children:t,value:x}))}function oE(n){let{children:e,location:t}=n;return GN(Lw(e),t)}new Promise(()=>{});function Lw(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,Lw(r.props.children,i));return}r.type!==ze&&xn(!1),!r.props.index||!r.props.children||xn(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Lw(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jw(){return jw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jw.apply(this,arguments)}function lO(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function cO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uO(n,e){return n.button===0&&(!e||e==="_self")&&!cO(n)}const dO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hO="6";try{window.__reactRouterVersion=hO}catch{}const fO="startTransition",nS=Ob[fO];function pO(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=gN({window:s,v5Compat:!0}));let a=i.current,[l,d]=A.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=A.useCallback(g=>{h&&nS?nS(()=>d(g)):d(g)},[d,h]);return A.useLayoutEffect(()=>a.listen(f),[a,f]),A.useEffect(()=>oO(r),[r]),A.createElement(aO,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:r})}const mO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vO=A.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:d,to:h,preventScrollReset:f,viewTransition:g}=e,v=lO(e,dO),{basename:_}=A.useContext(Il),S,x=!1;if(typeof h=="string"&&gO.test(h)&&(S=h,mO))try{let R=new URL(window.location.href),I=h.startsWith("//")?new URL(R.protocol+h):new URL(h),O=Lb(I.pathname,_);I.origin===R.origin&&O!=null?h=O+I.search+I.hash:x=!0}catch{}let E=VN(h,{relative:s}),P=yO(h,{replace:a,state:l,target:d,preventScrollReset:f,relative:s,viewTransition:g});function M(R){r&&r(R),R.defaultPrevented||P(R)}return A.createElement("a",jw({},v,{href:S||E,onClick:x||i?r:M,ref:t,target:d}))});var rS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(rS||(rS={}));var sS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sS||(sS={}));function yO(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,d=Rh(),h=$i(),f=nE(n,{relative:a});return A.useCallback(g=>{if(uO(g,t)){g.preventDefault();let v=r!==void 0?r:Iv(h)===Iv(f);d(n,{replace:v,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[h,d,f,r,s,t,n,i,a,l])}const aE=A.createContext(),lE=()=>{const n=A.useContext(aE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},wO=({children:n})=>{const[e,t]=A.useState(()=>{try{const s=localStorage.getItem("go-fotografo-theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(s){return console.error("Could not access localStorage to get theme.",s),"light"}});A.useEffect(()=>{try{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("go-fotografo-theme",e)}catch(s){console.error("Could not access localStorage to set theme.",s)}},[e]);const r=()=>{t(s=>s==="light"?"dark":"light")};return y.jsx(aE.Provider,{value:{theme:e,setTheme:t,toggleTheme:r},children:n})},bO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>am);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ub extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class _O extends Ub{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xO extends Ub{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class SO extends Ub{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fw;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Fw||(Fw={}));var AO=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class CO{constructor(e,{headers:t={},customFetch:r,region:s=Fw.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=bO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return AO(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let l={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(S=>{throw new _O(S)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new xO(f);if(!f.ok)throw new SO(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield f.json():v==="application/octet-stream"?_=yield f.blob():v==="text/event-stream"?_=f:v==="multipart/form-data"?_=yield f.formData():_=yield f.text(),{data:_,error:null}}catch(s){return{data:null,error:s}}})}}var Xn={},Kd={},Yd={},Xd={},Qd={},Jd={},EO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bh=EO();const kO=bh.fetch,TO=bh.fetch.bind(bh),PO=bh.Headers,RO=bh.Request,MO=bh.Response,am=Object.freeze(Object.defineProperty({__proto__:null,Headers:PO,Request:RO,Response:MO,default:TO,fetch:kO},Symbol.toStringTag,{value:"Module"})),IO=rN(am);var Kg={},iS;function cE(){if(iS)return Kg;iS=1,Object.defineProperty(Kg,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Kg.default=n,Kg}var oS;function uE(){if(oS)return Jd;oS=1;var n=Jd&&Jd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jd,"__esModule",{value:!0});const e=n(IO),t=n(cE());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,g,v;let _=null,S=null,x=null,E=h.status,P=h.statusText;if(h.ok){if(this.method!=="HEAD"){const O=await h.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=O:S=JSON.parse(O))}const R=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),I=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");R&&I&&I.length>1&&(x=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(_={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,x=null,E=406,P="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await h.text();try{_=JSON.parse(R),Array.isArray(_)&&h.status===404&&(S=[],_=null,E=200,P="OK")}catch{h.status===404&&R===""?(E=204,P="No Content"):_={message:R}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,E=200,P="OK"),_&&this.shouldThrowOnError)throw new t.default(_)}return{error:_,data:S,count:x,status:E,statusText:P}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,g,v;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,a)}returns(){return this}overrideTypes(){return this}}return Jd.default=r,Jd}var aS;function dE(){if(aS)return Qd;aS=1;var n=Qd&&Qd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qd,"__esModule",{value:!0});const e=n(uE());class t extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Qd.default=t,Qd}var lS;function zb(){if(lS)return Xd;lS=1;var n=Xd&&Xd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xd,"__esModule",{value:!0});const e=n(dE());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${d}fts${h}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Xd.default=t,Xd}var cS;function hE(){if(cS)return Yd;cS=1;var n=Yd&&Yd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yd,"__esModule",{value:!0});const e=n(zb());class t{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=i,this.schema=a,this.fetch=l}select(s,{head:i=!1,count:a}={}){const l=i?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const l="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),a||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const h=s.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:d=!0}={}){const h="POST",f=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),d||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(s)){const g=s.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(g.length>0){const v=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Yd.default=t,Yd}var op={},ap={},uS;function DO(){return uS||(uS=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.version=void 0,ap.version="0.0.0-automated"),ap}var dS;function NO(){if(dS)return op;dS=1,Object.defineProperty(op,"__esModule",{value:!0}),op.DEFAULT_HEADERS=void 0;const n=DO();return op.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},op}var hS;function OO(){if(hS)return Kd;hS=1;var n=Kd&&Kd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Kd,"__esModule",{value:!0});const e=n(hE()),t=n(zb()),r=NO();class s{constructor(a,{headers:l={},schema:d,fetch:h}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=d,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:d=!1,get:h=!1,count:f}={}){let g;const v=new URL(`${this.url}/rpc/${a}`);let _;d||h?(g=d?"HEAD":"GET",Object.entries(l).filter(([x,E])=>E!==void 0).map(([x,E])=>[x,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([x,E])=>{v.searchParams.append(x,E)})):(g="POST",_=l);const S=Object.assign({},this.headers);return f&&(S.Prefer=`count=${f}`),new t.default({method:g,url:v,headers:S,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return Kd.default=s,Kd}var fS;function LO(){if(fS)return Xn;fS=1;var n=Xn&&Xn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.PostgrestError=Xn.PostgrestBuilder=Xn.PostgrestTransformBuilder=Xn.PostgrestFilterBuilder=Xn.PostgrestQueryBuilder=Xn.PostgrestClient=void 0;const e=n(OO());Xn.PostgrestClient=e.default;const t=n(hE());Xn.PostgrestQueryBuilder=t.default;const r=n(zb());Xn.PostgrestFilterBuilder=r.default;const s=n(dE());Xn.PostgrestTransformBuilder=s.default;const i=n(uE());Xn.PostgrestBuilder=i.default;const a=n(cE());return Xn.PostgrestError=a.default,Xn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},Xn}var jO=LO();const FO=im(jO),{PostgrestClient:BO,PostgrestQueryBuilder:x9,PostgrestFilterBuilder:S9,PostgrestTransformBuilder:A9,PostgrestBuilder:C9,PostgrestError:E9}=FO;let Bw;typeof window>"u"?Bw=require("ws"):Bw=window.WebSocket;const $O="2.11.10",UO={"X-Client-Info":`realtime-js/${$O}`},zO="1.0.0",fE=1e4,VO=1e3;var fh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(fh||(fh={}));var Ir;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ir||(Ir={}));var Li;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Li||(Li={}));var $w;(function(n){n.websocket="websocket"})($w||($w={}));var Gc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Gc||(Gc={}));class HO{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const d=r.decode(e.slice(a,a+i));a=a+i;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:d,payload:h}}}class pE{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Kt||(Kt={}));const pS=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=WO(a,n,e,s),i),{})},WO=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s?.type,a=t[n];return i&&!r.includes(i)?mE(i,a):Uw(a)},mE=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return YO(e,t)}switch(n){case Kt.bool:return qO(e);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return GO(e);case Kt.json:case Kt.jsonb:return KO(e);case Kt.timestamp:return XO(e);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return Uw(e);default:return Uw(e)}},Uw=n=>n,qO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},GO=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},KO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},YO=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>mE(e,l))}return n},XO=n=>typeof n=="string"?n.replace(" ","T"):n,gE=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class G0{constructor(e,t,r={},s=fE){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(mS||(mS={}));class Pp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pp.syncState(this.state,s,i,a),this.pendingDiffs.forEach(d=>{this.state=Pp.syncDiff(this.state,d,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pp.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),l={},d={};return this.map(i,(h,f)=>{a[h]||(d[h]=f)}),this.map(a,(h,f)=>{const g=i[h];if(g){const v=f.map(E=>E.presence_ref),_=g.map(E=>E.presence_ref),S=f.filter(E=>_.indexOf(E.presence_ref)<0),x=g.filter(E=>v.indexOf(E.presence_ref)<0);S.length>0&&(l[h]=S),x.length>0&&(d[h]=x)}else l[h]=f}),this.syncDiff(i,{joins:l,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var h;const f=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(d),f.length>0){const g=e[l].map(_=>_.presence_ref),v=f.filter(_=>g.indexOf(_.presence_ref)<0);e[l].unshift(...v)}r(l,f,d)}),this.map(a,(l,d)=>{let h=e[l];if(!h)return;const f=d.map(g=>g.presence_ref);h=h.filter(g=>f.indexOf(g.presence_ref)<0),e[l]=h,s(l,h,d),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(gS||(gS={}));var vS;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(vS||(vS={}));var fa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class Vb{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new G0(this,Li.join,this.params,this.timeout),this.rejoinTimer=new pE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ir.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Li.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Pp(this),this.broadcastEndpointURL=gE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(f=>e?.(fa.CHANNEL_ERROR,f)),this._onClose(()=>e?.(fa.CLOSED));const d={},h={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e?.(fa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(g=v?.length)!==null&&g!==void 0?g:0,S=[];for(let x=0;x<_;x++){const E=v[x],{filter:{event:P,schema:M,table:R,filter:I}}=E,O=f&&f[x];if(O&&O.event===P&&O.schema===M&&O.table===R&&O.filter===I)S.push(Object.assign(Object.assign({},E),{id:O.id}));else{this.unsubscribe(),this.state=Ir.errored,e?.(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(fa.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ir.errored,e?.(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ir.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Li.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new G0(this,Li.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new G0(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:d,leave:h,join:f}=Li;if(r&&[l,d,h,f].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var S,x,E;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(x=_.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(_=>_.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(_=>{var S,x,E,P,M,R;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in _){const I=_.id,O=(S=_.filter)===null||S===void 0?void 0:S.event;return I&&((x=t.ids)===null||x===void 0?void 0:x.includes(I))&&(O==="*"||O?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const I=(M=(P=_?.filter)===null||P===void 0?void 0:P.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return I==="*"||I===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===a}).map(_=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:E,commit_timestamp:P,type:M,errors:R}=S;v=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:P,eventType:M,new:{},old:{},errors:R}),this._getPayloadRecords(S))}_.callback(v,r)})}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Vb.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Li.close,{},e)}_onError(e){this._on(Li.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pS(e.columns,e.old_record)),t}}const yS=()=>{},QO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JO{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=UO,this.params={},this.timeout=fE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yS,this.ref=0,this.logger=yS,this.conn=null,this.sendBuffer=[],this.serializer=new HO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>qe(async()=>{const{default:d}=await Promise.resolve().then(()=>am);return{default:d}},void 0).then(({default:d})=>d(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${$w.websocket}`,this.httpEndpoint=gE(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Bw),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new ZO(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zO}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case fh.connecting:return Gc.Connecting;case fh.open:return Gc.Open;case fh.closing:return Gc.Closing;default:return Gc.Closed}}isConnected(){return this.connectionState()===Gc.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Vb(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Li.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(VO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:a}=t;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Li.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([QO],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class ZO{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=fh.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Hb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class eL extends Hb{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zw extends Hb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tL=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const vE=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>am);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},nL=()=>tL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>am),void 0)).Response:Response}),Vw=n=>{if(Array.isArray(n))return n.map(t=>Vw(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Vw(r)}),e},rL=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var cu=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const K0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sL=(n,e,t)=>cu(void 0,void 0,void 0,function*(){const r=yield nL();n instanceof r&&!t?.noResolveJson?n.json().then(s=>{const i=n.status||500,a=s?.statusCode||i+"";e(new eL(K0(s),i,a))}).catch(s=>{e(new zw(K0(s),s))}):e(new zw(K0(n),n))}),iL=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"||!r?s:(rL(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),t))};function lm(n,e,t,r,s,i){return cu(this,void 0,void 0,function*(){return new Promise((a,l)=>{n(t,iL(e,r,s,i)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>sL(d,l,r))})})}function Dv(n,e,t,r){return cu(this,void 0,void 0,function*(){return lm(n,"GET",e,t,r)})}function pa(n,e,t,r,s){return cu(this,void 0,void 0,function*(){return lm(n,"POST",e,r,s,t)})}function Hw(n,e,t,r,s){return cu(this,void 0,void 0,function*(){return lm(n,"PUT",e,r,s,t)})}function oL(n,e,t,r){return cu(this,void 0,void 0,function*(){return lm(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function yE(n,e,t,r,s){return cu(this,void 0,void 0,function*(){return lm(n,"DELETE",e,r,s,t)})}var rs=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const aL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lL{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=vE(s)}uploadOrUpdate(e,t,r,s){return rs(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},wS),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),g=yield(e=="PUT"?Hw:pa)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return rs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:wS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const g=yield Hw(this.fetch,l.toString(),d,{headers:f});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(Qn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return rs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const i=yield pa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Hb("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}update(e,t,r){return rs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return rs(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return rs(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return rs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return rs(this,void 0,void 0,function*(){try{const s=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}download(e,t){return rs(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Dv(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Qn(l))return{data:null,error:l};throw l}})}info(e){return rs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Dv(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vw(r),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}exists(e){return rs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield oL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Qn(r)&&r instanceof zw){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return rs(this,void 0,void 0,function*(){try{return{data:yield yE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}list(e,t,r){return rs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aL),t),{prefix:e||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cL="2.7.3",uL={"X-Client-Info":`storage-js/${cL}`};var Zd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class dL{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},uL),t),this.fetch=vE(r)}listBuckets(){return Zd(this,void 0,void 0,function*(){try{return{data:yield Dv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Qn(e))return{data:null,error:e};throw e}})}getBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield Dv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Zd(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Zd(this,void 0,void 0,function*(){try{return{data:yield Hw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield yE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}}class hL extends dL{constructor(e,t={},r){super(e,t,r)}from(e){return new lL(this.url,this.headers,e,this.fetch)}}const fL="2.30.0",pL={"X-Client-Info":`supabase-js/${fL}`};var Yg={exports:{}},bS;function mL(){return bS||(bS=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof bl<"u"&&bl,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(a){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof bl<"u"&&bl||{},d={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function h(H){return H&&DataView.prototype.isPrototypeOf(H)}if(d.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(H){return H&&f.indexOf(Object.prototype.toString.call(H))>-1};function v(H){if(typeof H!="string"&&(H=String(H)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(H)||H==="")throw new TypeError('Invalid character in header field name: "'+H+'"');return H.toLowerCase()}function _(H){return typeof H!="string"&&(H=String(H)),H}function S(H){var q={next:function(){var te=H.shift();return{done:te===void 0,value:te}}};return d.iterable&&(q[Symbol.iterator]=function(){return q}),q}function x(H){this.map={},H instanceof x?H.forEach(function(q,te){this.append(te,q)},this):Array.isArray(H)?H.forEach(function(q){if(q.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+q.length);this.append(q[0],q[1])},this):H&&Object.getOwnPropertyNames(H).forEach(function(q){this.append(q,H[q])},this)}x.prototype.append=function(H,q){H=v(H),q=_(q);var te=this.map[H];this.map[H]=te?te+", "+q:q},x.prototype.delete=function(H){delete this.map[v(H)]},x.prototype.get=function(H){return H=v(H),this.has(H)?this.map[H]:null},x.prototype.has=function(H){return this.map.hasOwnProperty(v(H))},x.prototype.set=function(H,q){this.map[v(H)]=_(q)},x.prototype.forEach=function(H,q){for(var te in this.map)this.map.hasOwnProperty(te)&&H.call(q,this.map[te],te,this)},x.prototype.keys=function(){var H=[];return this.forEach(function(q,te){H.push(te)}),S(H)},x.prototype.values=function(){var H=[];return this.forEach(function(q){H.push(q)}),S(H)},x.prototype.entries=function(){var H=[];return this.forEach(function(q,te){H.push([te,q])}),S(H)},d.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function E(H){if(!H._noBody){if(H.bodyUsed)return Promise.reject(new TypeError("Already read"));H.bodyUsed=!0}}function P(H){return new Promise(function(q,te){H.onload=function(){q(H.result)},H.onerror=function(){te(H.error)}})}function M(H){var q=new FileReader,te=P(q);return q.readAsArrayBuffer(H),te}function R(H){var q=new FileReader,te=P(q),z=/charset=([A-Za-z0-9_-]+)/.exec(H.type),re=z?z[1]:"utf-8";return q.readAsText(H,re),te}function I(H){for(var q=new Uint8Array(H),te=new Array(q.length),z=0;z<q.length;z++)te[z]=String.fromCharCode(q[z]);return te.join("")}function O(H){if(H.slice)return H.slice(0);var q=new Uint8Array(H.byteLength);return q.set(new Uint8Array(H)),q.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(H){this.bodyUsed=this.bodyUsed,this._bodyInit=H,H?typeof H=="string"?this._bodyText=H:d.blob&&Blob.prototype.isPrototypeOf(H)?this._bodyBlob=H:d.formData&&FormData.prototype.isPrototypeOf(H)?this._bodyFormData=H:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)?this._bodyText=H.toString():d.arrayBuffer&&d.blob&&h(H)?(this._bodyArrayBuffer=O(H.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(H)||g(H))?this._bodyArrayBuffer=O(H):this._bodyText=H=Object.prototype.toString.call(H):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof H=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var H=E(this);if(H)return H;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var H=E(this);return H||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(M);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var H=E(this);if(H)return H;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(ce)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function W(H){var q=H.toUpperCase();return $.indexOf(q)>-1?q:H}function K(H,q){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');q=q||{};var te=q.body;if(H instanceof K){if(H.bodyUsed)throw new TypeError("Already read");this.url=H.url,this.credentials=H.credentials,q.headers||(this.headers=new x(H.headers)),this.method=H.method,this.mode=H.mode,this.signal=H.signal,!te&&H._bodyInit!=null&&(te=H._bodyInit,H.bodyUsed=!0)}else this.url=String(H);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new x(q.headers)),this.method=W(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal||function(){if("AbortController"in l){var Z=new AbortController;return Z.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&te)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(te),(this.method==="GET"||this.method==="HEAD")&&(q.cache==="no-store"||q.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var re=/\?/;this.url+=(re.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function ce(H){var q=new FormData;return H.trim().split("&").forEach(function(te){if(te){var z=te.split("="),re=z.shift().replace(/\+/g," "),Z=z.join("=").replace(/\+/g," ");q.append(decodeURIComponent(re),decodeURIComponent(Z))}}),q}function pe(H){var q=new x,te=H.replace(/\r?\n[\t ]+/g," ");return te.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var re=z.split(":"),Z=re.shift().trim();if(Z){var B=re.join(":").trim();try{q.append(Z,B)}catch(X){console.warn("Response "+X.message)}}}),q}F.call(K.prototype);function ue(H,q){if(!(this instanceof ue))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=q.statusText===void 0?"":""+q.statusText,this.headers=new x(q.headers),this.url=q.url||"",this._initBody(H)}F.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},ue.error=function(){var H=new ue(null,{status:200,statusText:""});return H.ok=!1,H.status=0,H.type="error",H};var fe=[301,302,303,307,308];ue.redirect=function(H,q){if(fe.indexOf(q)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:q,headers:{location:H}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(q,te){this.message=q,this.name=te;var z=Error(q);this.stack=z.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function ne(H,q){return new Promise(function(te,z){var re=new K(H,q);if(re.signal&&re.signal.aborted)return z(new a.DOMException("Aborted","AbortError"));var Z=new XMLHttpRequest;function B(){Z.abort()}Z.onload=function(){var ye={statusText:Z.statusText,headers:pe(Z.getAllResponseHeaders()||"")};re.url.indexOf("file://")===0&&(Z.status<200||Z.status>599)?ye.status=200:ye.status=Z.status,ye.url="responseURL"in Z?Z.responseURL:ye.headers.get("X-Request-URL");var Me="response"in Z?Z.response:Z.responseText;setTimeout(function(){te(new ue(Me,ye))},0)},Z.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},Z.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request timed out"))},0)},Z.onabort=function(){setTimeout(function(){z(new a.DOMException("Aborted","AbortError"))},0)};function X(ye){try{return ye===""&&l.location.href?l.location.href:ye}catch{return ye}}if(Z.open(re.method,X(re.url),!0),re.credentials==="include"?Z.withCredentials=!0:re.credentials==="omit"&&(Z.withCredentials=!1),"responseType"in Z&&(d.blob?Z.responseType="blob":d.arrayBuffer&&(Z.responseType="arraybuffer")),q&&typeof q.headers=="object"&&!(q.headers instanceof x||l.Headers&&q.headers instanceof l.Headers)){var ae=[];Object.getOwnPropertyNames(q.headers).forEach(function(ye){ae.push(v(ye)),Z.setRequestHeader(ye,_(q.headers[ye]))}),re.headers.forEach(function(ye,Me){ae.indexOf(Me)===-1&&Z.setRequestHeader(Me,ye)})}else re.headers.forEach(function(ye,Me){Z.setRequestHeader(Me,ye)});re.signal&&(re.signal.addEventListener("abort",B),Z.onreadystatechange=function(){Z.readyState===4&&re.signal.removeEventListener("abort",B)}),Z.send(typeof re._bodyInit>"u"?null:re._bodyInit)})}return ne.polyfill=!0,l.fetch||(l.fetch=ne,l.Headers=x,l.Request=K,l.Response=ue),a.Headers=x,a.Request=K,a.Response=ue,a.fetch=ne,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e}(Yg,Yg.exports)),Yg.exports}var Wb=mL();const wE=im(Wb),gL=KC({__proto__:null,default:wE},[Wb]);var vL=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const yL=n=>{let e;return n?e=n:typeof fetch>"u"?e=wE:e=fetch,(...t)=>e(...t)},wL=()=>typeof Headers>"u"?Wb.Headers:Headers,bL=(n,e,t)=>{const r=yL(t),s=wL();return(i,a)=>vL(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:n;let h=new s(a?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},a),{headers:h}))})};function _L(n){return n.replace(/\/$/,"")}function xL(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:l,realtime:d,global:h}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},h),i)}}function SL(n){return Math.round(Date.now()/1e3)+n}function AL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const da=()=>typeof document<"u",$c={tested:!1,writable:!1},_v=()=>{if(!da())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($c.tested)return $c.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),$c.tested=!0,$c.writable=!0}catch{$c.tested=!0,$c.writable=!1}return $c.writable};function ss(n,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const bE=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await qe(async()=>{const{fetch:r}=await Promise.resolve().then(()=>gL);return{fetch:r}},void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},CL=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",lp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Xg=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Y0=async(n,e)=>{await n.removeItem(e)};function EL(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,a,l,d,h,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)a=e.indexOf(n.charAt(f++)),l=e.indexOf(n.charAt(f++)),d=e.indexOf(n.charAt(f++)),h=e.indexOf(n.charAt(f++)),r=a<<2|l>>4,s=(l&15)<<4|d>>2,i=(d&3)<<6|h,t=t+String.fromCharCode(r),d!=64&&s!=0&&(t=t+String.fromCharCode(s)),h!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ry{constructor(){this.promise=new ry.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ry.promiseConstructor=Promise;function _S(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(EL(r))}function kL(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function TL(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function PL(n){return("0"+n.toString(16)).substr(-2)}function Qg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,PL).join("")}async function RL(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function ML(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jg(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await RL(n);return ML(e)}const IL="__stack_guard__",DL="__",NL=/__stack_guard__([a-zA-Z0-9_-]+)__/;let xS=!1,qb;function Ww(n){var e,t;qb();let r;try{throw new Error}catch(i){r=i}const s=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<s.length;i+=1){const l=s[i].match(NL);if(l&&l[1]===n)return!0}return!1}async function qw(n,e){await qb();const t=`${IL}${n}${DL}`;return await{[t]:async()=>await e()}[t]()}qb=async()=>{xS||(xS=!0,await qw("ENV_CHECK",async()=>{const n=Ww("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class Gb extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Tt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class OL extends Gb{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function LL(n){return Tt(n)&&n.name==="AuthApiError"}class _E extends Gb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Mh extends Gb{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class eh extends Mh{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class X0 extends Mh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Zg extends Mh{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class aa extends Mh{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q0 extends Mh{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gw extends Mh{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function SS(n){return Tt(n)&&n.name==="AuthRetryableFetchError"}var jL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const xp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),FL=[502,503,504];async function AS(n){if(!CL(n))throw new Gw(xp(n),0);if(FL.includes(n.status))throw new Gw(xp(n),n.status);let e;try{e=await n.json()}catch(t){throw new _E(xp(t),t)}throw new OL(xp(e),n.status||500)}const BL=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Nt(n,e,t,r){var s;const i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await $L(n,e,t+l,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function $L(n,e,t,r,s,i){const a=BL(e,r,s,i);let l;try{l=await n(t,a)}catch(d){throw console.error(d),new Gw(xp(d),0)}if(l.ok||await AS(l),r?.noResolveJson)return l;try{return await l.json()}catch(d){await AS(d)}}function fl(n){var e;let t=null;HL(n)&&(t=Object.assign({},n),t.expires_at=SL(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Kc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function UL(n){return{data:n,error:null}}function zL(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=jL(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},d=Object.assign({},a);return{data:{properties:l,user:d},error:null}}function VL(n){return n}function HL(n){return n.access_token&&n.refresh_token&&n.expires_in}var WL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class qL{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=bE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Nt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Kc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=WL(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:zL,redirectTo:t?.redirectTo})}catch(t){if(Tt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,l,d;try{const h={nextPage:null,lastPage:0,total:0},f=await Nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:VL});if(f.error)throw f.error;const g=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,_=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Tt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Kc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Kc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}}const GL="2.43.1",KL="http://localhost:9999",YL="supabase.auth.token",XL={"X-Client-Info":`gotrue-js/${GL}`},CS=10,ES={getItem:n=>_v()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{_v()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{_v()&&globalThis.localStorage.removeItem(n)}};function QL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}QL();const JL={url:KL,storageKey:YL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XL,flowType:"implicit",debug:!1},ev=30*1e3,kS=3;class zp{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=zp.nextInstanceID,zp.nextInstanceID+=1,this.instanceID>0&&da()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},JL),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||ES,this.admin=new qL({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=bE(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===ES&&!_v()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),da()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=qw("_initialize",async()=>{try{const e=da()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Tt(e)?{error:e}:{error:new _E("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,s;try{await this._removeSession();let i;if("email"in e){const{email:f,password:g,options:v}=e;let _=null,S=null;if(this.flowType==="pkce"){const x=Qg();await lp(this.storage,`${this.storageKey}-code-verifier`,x),_=await Jg(x),S=x===_?"plain":"s256"}i=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:f,password:g,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:S},xform:fl})}else if("phone"in e){const{phone:f,password:g,options:v}=e;i=await Nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:fl})}else throw new Zg("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(Tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fl})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fl})}else throw new Zg("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new X0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:s})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Xg(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:s}=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:fl});return await Y0(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new X0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,l=await Nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:fl}),{data:d,error:h}=l;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new X0}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:d}=e;let h=null,f=null;if(this.flowType==="pkce"){const v=Qg();await lp(this.storage,`${this.storageKey}-code-verifier`,v),h=await Jg(v),f=v===h?"plain":"s256"}const{error:g}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:d}=e,{data:h,error:f}=await Nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new Zg("You must provide either an email or phone number.")}catch(l){if(Tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:s,error:i}=await Nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:fl});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const a=s.session,l=s.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(s){if(Tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{return await this._removeSession(),await Nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:UL})}catch(i){if(Tt(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new eh;const{error:s}=await Nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await Nt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Zg("You must provide either an email or phone number and a type")}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await qw("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!Ww("_useSession"))throw new Error("Please use #_useSession()");Ww("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await Xg(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,s;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0}return await Nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kc})})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new eh;const a=s.session,{data:l,error:d}=await Nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:a.access_token,xform:Kc});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return _S(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new eh;const t=Date.now()/1e3;let r=t,s=!0,i=null;const a=_S(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this.getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Tt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new eh;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!da())throw new aa("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new aa("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Q0("Not a valid PKCE flow url.");if(e){const E=ss("code");if(!E)throw new Q0("No code detected.");const{data:P,error:M}=await this.exchangeCodeForSession(E);if(M)throw M;if(!P.session)throw new Q0("No session detected.");let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:P.session,redirectType:null},error:null}}const t=ss("error_description");if(t){const E=ss("error_code");if(!E)throw new aa("No error_code detected.");const P=ss("error");throw P?new aa(t,{error:P,code:E}):new aa("No error detected.")}const r=ss("provider_token"),s=ss("provider_refresh_token"),i=ss("access_token");if(!i)throw new aa("No access_token detected.");const a=ss("expires_in");if(!a)throw new aa("No expires_in detected.");const l=ss("refresh_token");if(!l)throw new aa("No refresh_token detected.");const d=ss("token_type");if(!d)throw new aa("No token_type detected.");const f=Math.round(Date.now()/1e3)+parseInt(a),{data:g,error:v}=await this.getUser(i);if(v)throw v;const _=g.user,S={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(a),expires_at:f,refresh_token:l,token_type:d,user:_},x=ss("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:S,redirectType:x},error:null}}catch(t){if(Tt(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return da()&&(!!ss("access_token")||!!ss("error_description"))}async _isPKCEFlow(){const e=await Xg(this.storage,`${this.storageKey}-code-verifier`);return!!ss("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(LL(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Y0(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=AL(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;if(this.flowType==="pkce"){const i=Qg();await lp(this.storage,`${this.storageKey}-code-verifier`,i),r=await Jg(i),s=i===r?"plain":"s256"}try{return await Nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Tt(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await TL(async s=>(await kL(s*200),this._debug(t,"refreshing attempt",s),await Nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fl})),(s,i,a)=>a&&a.error&&SS(a.error)&&Date.now()+(s+1)*200-r<ev)}catch(r){if(this._debug(t,"error",r),Tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),da()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Xg(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+CS;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${CS}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),SS(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new eh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ry;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new eh;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Tt(i)){const a={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(d){i.push(d)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),lp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Y0(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&da()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ev);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ev);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ev}ms, refresh threshold is ${kS} ticks`),s<=kS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!da()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=Qg();await lp(this.storage,`${this.storageKey}-code-verifier`,s);const i=await Jg(s),a=s===i?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",i,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(t?.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:d}=await Nt(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(!((s=l?.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let l=null;a.aal&&(l=a.aal);let d=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}})}}zp.nextInstanceID=0;class ZL extends zp{constructor(e){super(e)}}var e2=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const t2={headers:pL},n2={schema:"public"},r2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s2={};class i2{constructor(e,t,r){var s,i,a,l,d,h,f,g;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const v=_L(e);this.realtimeUrl=`${v}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${v}/auth/v1`,this.storageUrl=`${v}/storage/v1`,this.functionsUrl=`${v}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,S={db:n2,realtime:s2,auth:Object.assign(Object.assign({},r2),{storageKey:_}),global:t2},x=xL(r??{},S);this.storageKey=(i=(s=x.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=x.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,(h=x.global)===null||h===void 0?void 0:h.fetch),this.fetch=bL(t,this._getAccessToken.bind(this),(f=x.global)===null||f===void 0?void 0:f.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new BO(`${v}/rest/v1`,{headers:this.headers,schema:(g=x.db)===null||g===void 0?void 0:g.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new CO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hL(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return e2(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,debug:l},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZL({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,debug:l,fetch:h})}_initRealtimeClient(e){return new JO(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const o2=(n,e,t)=>new i2(n,e,t),a2="cdn.gofotografo.com.br",l2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU",TS=a2,PS=l2;let Kw;try{Kw=o2(TS,PS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}catch(n){console.error("Erro criando o Supabase client:",n),Kw=null}const Se=Kw,c2=1,RS=768;let J0=0;function u2(){return J0=(J0+1)%Number.MAX_VALUE,J0.toString()}const Rn={state:{toasts:[],isMobileView:typeof window<"u"?window.innerWidth<RS:!1},listeners:[],getState:()=>Rn.state,setState:n=>{typeof n=="function"?Rn.state=n(Rn.state):Rn.state={...Rn.state,...n},Rn.listeners.forEach(e=>e(Rn.state))},subscribe:n=>(Rn.listeners.push(n),()=>{Rn.listeners=Rn.listeners.filter(e=>e!==n)}),updateMobileView:()=>{if(typeof window<"u"){const n=window.innerWidth<RS;n!==Rn.state.isMobileView&&Rn.setState(e=>({...e,isMobileView:n}))}}};typeof window<"u"&&(window.addEventListener("resize",Rn.updateMobileView),Rn.updateMobileView());const d2=({...n})=>{const{isMobileView:e}=Rn.getState(),t=["Saldos Visveis","Saldos Ocultos","Modo de Personalizao Ativado","Card Adicionado","Card Removido","Projeto movido","Projeto Excludo","Projeto Arquivado","Projeto Restaurado","Coluna Adicionada","Coluna Removida"];if(n.title&&t.includes(n.title))return{id:null,dismiss:()=>{},update:()=>{}};const r=u2(),s=a=>Rn.setState(l=>({...l,toasts:l.toasts.map(d=>d.id===r?{...d,...a}:d)})),i=()=>Rn.setState(a=>({...a,toasts:a.toasts.filter(l=>l.id!==r)}));return Rn.setState(a=>({...a,toasts:[{...n,id:r,dismiss:i},...a.toasts].slice(0,c2)})),{id:r,dismiss:i,update:s}};function ni(){const[n,e]=A.useState(Rn.getState());return A.useEffect(()=>Rn.subscribe(r=>{e(r)}),[]),A.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(s)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:d2,toasts:n.toasts,isMobileView:n.isMobileView}}const Rp=n=>{if(!n||!Array.isArray(n))return{transactions:[],totalRevenue:0,totalExpenses:0,operationalProfit:0,totalProLabore:0,netBalance:0,pendingPayments:0};const e=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PAGO").reduce((l,d)=>l+Number(d.valor),0),t=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category!=="Pr-labore").reduce((l,d)=>l+Number(d.valor),0),r=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category==="Pr-labore").reduce((l,d)=>l+Number(d.valor),0),s=e-t,i=s-r,a=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE").reduce((l,d)=>l+Number(d.valor),0);return{transactions:n,totalRevenue:e,totalExpenses:t,operationalProfit:s,totalProLabore:r,netBalance:i,pendingPayments:a}},h2=async(n,e,t)=>{const r={...t,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete r.id,"client_id"in r&&(r.cliente_id=r.client_id,delete r.client_id),"fornecedor_id"in r&&delete r.fornecedor_id,"date"in r&&(r.data=r.date,delete r.date),"workflow_id"in r&&(r.trabalho_id=r.workflow_id,delete r.workflow_id);const{data:s,error:i}=await n.from("transacoes").insert([r]).select().single();if(i)throw i;return s},f2=async(n,e,t,r)=>{const s={...r,updated_at:new Date().toISOString()};"client_id"in s&&(s.cliente_id=s.client_id,delete s.client_id),"fornecedor_id"in s&&delete s.fornecedor_id,"date"in s&&(s.data=s.date,delete s.date),"workflow_id"in s&&(s.trabalho_id=s.workflow_id,delete s.workflow_id);const{data:i,error:a}=await n.from("transacoes").update(s).eq("id",t).eq("user_id",e).select().single();if(a)throw a;return i},p2=async(n,e,t)=>{const{error:r}=await n.from("transacoes").delete().eq("id",t).eq("user_id",e);if(r)throw r},m2=async(n,e)=>{const{data:t,error:r}=await n.from("transacoes").select("*").eq("trabalho_id",e);return r?(console.error("Erro ao buscar transaes por workflow_id:",r),[]):t},ah=(n,e,t)=>{console.error(`Erro em ${e}:`,n);const r=`Erro em ${e}: ${n.message}`;t&&t({title:"Erro de Sistema",description:r,variant:"destructive",duration:5e3})},_r={profile_photo:null,logo:null,business_name:"",user_name:"",subdomain:"",notifications:{email:!0,push:!0},dashboard_layout:null,workflow_columns:[{id:"novo-lead",title:"Novos Leads",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"negocio-fechado",title:"Negcios Fechados",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"agendado",title:"Agendado",cardIds:[],color:"bg-teal-300 dark:bg-teal-700"},{id:"em-andamento",title:"Em Andamento",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"concluido",title:"Concludos",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"}],address:"",photography_type:"",cnpj:"",cpf:"",phones:[],contact_email:"",website_social:{instagram:"",facebook:"",website:""},language:"pt-BR",currency:"BRL",timezone:"America/Sao_Paulo",date_format:"dd/MM/yyyy",automation:{},current_plan_id:"FREE",stripe_customer_id:null,stripe_subscription_id:null,plan_expires_at:null,plan_status:"FREE",trial_ends_at:null,hide_dashboard_balances:!1,took_initial_tour:!1,has_completed_tour:!1,show_greetings:!0,workflow_card_view_mode:"list",workflow_summary_expanded:!0,mobile_menu_items:["dashboard","workflow","clients","financial","calendar"],google_calendar_integrated:!1,google_tokens:null,feature_overrides:{},pix_key:null},xv=[{id:"novo-lead",title:"Novos Leads",cardIds:[]},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[]},{id:"negocio-fechado",title:"Negcios Fechados",cardIds:[]},{id:"agendado",title:"Agendado",cardIds:[]},{id:"em-andamento",title:"Em Andamento",cardIds:[]},{id:"concluido",title:"Concludos",cardIds:[]}],g2=async(n,e,t,r,s)=>{const{data:i,error:a}=await n.from("settings").select("*").eq("user_id",e).limit(1).maybeSingle();if(a&&a.code!=="PGRST116")throw a;const l={};if(i){for(const f in t)t.hasOwnProperty(f)&&(l[f]=t[f]);l.user_name=t.user_name||i.user_name||s,l.contact_email=t.contact_email||i.contact_email||n.auth.user&&n.auth.user().email||s}else{const f={..._r,...r||{},...t};for(const g in _r)f.hasOwnProperty(g)&&(l[g]=f[g]);if(l.user_id=e,l.user_name=f.user_name||s,l.contact_email=f.contact_email||n.auth.user&&n.auth.user().email||s,l.plan_status=f.plan_status||"TRIAL",l.plan_status==="TRIAL"&&!f.trial_ends_at){const g=new Date;g.setDate(g.getDate()+7),l.trial_ends_at=g.toISOString()}l.took_initial_tour=f.took_initial_tour||!1}i&&Object.keys(l).forEach(f=>{l[f]===void 0&&delete l[f]});let d,h;if(i&&i.id){if(Object.keys(l).length===0)return i;({data:d,error:h}=await n.from("settings").update({...l,updated_at:new Date().toISOString()}).eq("id",i.id).eq("user_id",e).select().single())}else({data:d,error:h}=await n.from("settings").insert([{...l,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single());if(h)throw h;return d},xE=A.createContext(),Kb=()=>{const n=A.useContext(xE);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Z0=n=>{if(!n)return!1;const e=n.message||"",t=e.includes("Invalid Refresh Token")||e.includes("Token not found")||e.includes("Session not found"),r=n.code==="400"&&n.error_code==="refresh_token_not_found";return t||r},SE=({children:n})=>{const{toast:e}=ni(),[t,r]=A.useState(null),[s,i]=A.useState(null),[a,l]=A.useState(!0),[d,h]=A.useState(_r),[f,g]=A.useState(!0),v=A.useCallback(async(P,M)=>{if(Z0(P)){e({title:"Sesso Expirada ou Invlida",description:"Sua sesso expirou. Por favor, faa login novamente para continuar.",variant:"destructive",duration:7e3}),Se&&await Se.auth.signOut().catch(R=>{console.error("Erro durante o signOut forado:",R)}),r(null),i(null),h(_r),l(!1),g(!1);return}ah(P,M,e)},[e]),_=A.useCallback(async P=>{if(!P||!Se){h(_r),g(!1);return}g(!0);try{const{data:M,error:R}=await Se.from("settings").select("*").eq("user_id",P.id).single(),I=P.user_metadata?.full_name||P.email;if(R&&R.code!=="PGRST116"){if(await v(R,"buscar configuraes"),Z0(R))return;h({..._r,user_name:I,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:xv})}else if(M)h(O=>({..._r,...O,...M,user_name:M.user_name||I,contact_email:M.contact_email||P.email,user_id:M.user_id||P.id,profile_photo:M.profile_photo||P.user_metadata?.avatar_url||null,workflow_columns:M.workflow_columns||xv}));else{const O={..._r,user_name:I,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:xv};h(O);const{data:F,error:$}=await Se.from("settings").insert([O]).select().single();if($){if(await v($,"criar configuraes padro"),Z0($))return}else F&&h(W=>({..._r,...W,...F}))}}catch(M){await v(M,"carregar configuraes")}finally{g(!1)}},[v]);A.useEffect(()=>{if(l(!0),(async()=>{if(!Se){console.error("Supabase client not initialized. Cannot get session."),l(!1),h(_r),g(!1);return}const{data:{session:R},error:I}=await Se.auth.getSession();if(I){console.error("Error getting session:",I),await v(I,"obter sesso de autenticao"),l(!1);return}const O=R?.user??null;i(R),r(O),O&&O.email_confirmed_at?await _(O):(h(_r),g(!1),O&&!O.email_confirmed_at&&e({title:"Email no confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"})),l(!1)})(),!Se){console.error("Supabase client not initialized. Cannot set auth listener.");return}const{data:M}=Se.auth.onAuthStateChange(async(R,I)=>{l(!0);const O=I?.user??null;i(I),r(O),R==="SIGNED_IN"&&O&&O.email_confirmed_at?await _(O):R==="SIGNED_OUT"?(h(_r),g(!1)):R==="USER_UPDATED"&&O&&O.email_confirmed_at?h(F=>({...F,user_name:O.user_metadata?.full_name||F.user_name||O.email,profile_photo:O.user_metadata?.avatar_url||F.profile_photo})):!O&&R!=="SIGNED_OUT"&&(h(_r),g(!1)),O&&!O.email_confirmed_at&&R!=="INITIAL_SESSION"&&e({title:"Email no confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"}),l(!1)});return()=>{M&&M.subscription&&M.subscription.unsubscribe()}},[v,_,e]);const E={user:t,session:s,settings:d,loadingAuth:a,loadingSettings:f,setSettings:async P=>{if(!t||!t.email_confirmed_at||!Se){await v({message:"Usurio no autenticado, email no confirmado ou Supabase no inicializado"},"salvar configuraes");return}try{const M=t.user_metadata?.full_name||t.email,R=await g2(Se,t.id,P,d,M);if(R){h(O=>({..._r,...O,...R}));let I={};if(P.user_name&&P.user_name!==(t.user_metadata?.full_name||"")&&(I.data={...I.data,full_name:P.user_name}),P.profile_photo&&P.profile_photo!==(t.user_metadata?.avatar_url||"")&&(I.data={...I.data,avatar_url:P.profile_photo}),Object.keys(I).length>0){const{data:O,error:F}=await Se.auth.updateUser(I);F?await v(F,"atualizar dados do usurio na autenticao"):O&&r($=>({...$,user_metadata:O.user.user_metadata}))}}}catch(M){await v(M,"salvar configuraes")}},logout:async()=>{if(!Se){await v({message:"Supabase client not initialized"},"fazer logout");return}const{error:P}=await Se.auth.signOut();P?await v(P,"fazer logout"):(r(null),i(null),h(_r))},refreshSettings:()=>t?_(t):Promise.resolve()};return y.jsx(xE.Provider,{value:E,children:n})},v2=(n,e,t)=>{const[r,s]=A.useState({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!0,initialLoadCompleted:!1}),i=A.useCallback(h=>{s(f=>typeof h=="function"?h(f):{...f,...h})},[]),a=A.useCallback(()=>{s({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!1,initialLoadCompleted:!1})},[]),l=A.useCallback(async(h="all")=>{if(!n)return;const f={clients:()=>Se.from("clients").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),suppliers:()=>Se.from("suppliers").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),workflow_cards:()=>Se.from("workflow_cards").select("*").eq("user_id",n.id).order("order",{ascending:!0}),transacoes:()=>Se.from("transacoes").select("*").eq("user_id",n.id).order("data",{ascending:!1}),service_packages:()=>Se.from("service_packages").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),equipamentos:()=>Se.from("equipamentos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),manutencoes:()=>Se.from("manutencoes").select("*").eq("user_id",n.id).order("data_manutencao",{ascending:!1}),custos_fixos:()=>Se.from("custos_fixos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),servicos_precificados:()=>Se.from("servicos_precificados").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),metas_reserva:()=>Se.from("metas_reserva").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),availability_slots:()=>Se.from("availability_slots").select("*").eq("user_id",n.id),propostas:()=>Se.from("propostas").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1}),contratos:()=>Se.from("contratosgerados").select("*").eq("id_fotografo",n.id).order("data_geracao",{ascending:!1}),wallets:()=>Se.from("wallets").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),feature_flags:()=>Se.from("feature_flags").select("*"),referrals:()=>Se.from("referrals").select("*").eq("referrer_id",n.id),commissions:()=>Se.from("commissions").select("*").eq("referrer_id",n.id)},g=h==="all"?Object.keys(f):[h];try{const v=await Promise.all(g.map(x=>{const E=f[x];return typeof E=="function"?E():(console.warn(`fetchMap[${x}] no  uma funo. Pulando.`),Promise.resolve({data:[],error:null}))})),_=v.map((x,E)=>x.error?{key:g[E],error:x.error}:null).filter(Boolean);if(_.length>0){_.forEach(({key:x,error:E})=>ah(E,`carregar ${x}`,t));return}const S={};if(v.forEach((x,E)=>{switch(g[E]){case"clients":S.clients=x.data;break;case"suppliers":S.suppliers=x.data;break;case"workflow_cards":S.workflowCards=x.data;break;case"transacoes":S.financialData={...Rp(x.data),transactions:x.data};break;case"service_packages":S.servicePackages=x.data;break;case"equipamentos":S.equipments=x.data;break;case"manutencoes":S.maintenances=x.data;break;case"custos_fixos":S.fixedCosts=x.data;break;case"servicos_precificados":S.pricedServices=x.data;break;case"metas_reserva":S.savingGoals=x.data;break;case"availability_slots":S.availabilitySlots=x.data;break;case"propostas":S.proposals=x.data;break;case"contratos":S.contratos=x.data;break;case"wallets":S.wallets=x.data;break;case"feature_flags":S.featureFlags=x.data.reduce((M,R)=>({...M,[R.nome_funcionalidade]:R.esta_ativa}),{});break;case"referrals":S.affiliateData={...r.affiliateData,referrals:x.data};break;case"commissions":S.affiliateData={...r.affiliateData,commissions:x.data};break}}),S.workflowCards){const x=(S.workflowCards||[]).filter(E=>E.status==="novo-lead"||E.status==="proposta-enviada").reduce((E,P)=>E+(Number(P.value)||0),0);S.financialData={...S.financialData||r.financialData,potentialLeadValue:x}}i(x=>({...x,...S}))}catch(v){ah(v,"refresh data",t)}},[n,t,r.financialData,r.affiliateData]),d=A.useCallback(async h=>{if(h){i({loadingData:!0});try{const[f,g,v,_,S,x,E,P,M,R,I,O,F,$,W,K,ce]=await Promise.all([Se.from("clients").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("suppliers").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("workflow_cards").select("*").eq("user_id",h.id).order("order",{ascending:!0}),Se.from("transacoes").select("*").eq("user_id",h.id).order("data",{ascending:!1}),Se.from("service_packages").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("equipamentos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("manutencoes").select("*").eq("user_id",h.id).order("data_manutencao",{ascending:!1}),Se.from("custos_fixos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("servicos_precificados").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("metas_reserva").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("availability_slots").select("*").eq("user_id",h.id),Se.from("propostas").select("*").eq("user_id",h.id).order("updated_at",{ascending:!1}),Se.from("contratosgerados").select("*").eq("id_fotografo",h.id).order("data_geracao",{ascending:!1}),Se.from("wallets").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("feature_flags").select("*"),Se.from("referrals").select("*").eq("referrer_id",h.id),Se.from("commissions").select("*").eq("referrer_id",h.id)]),pe=[f.error,g.error,v.error,_.error,S.error,x.error,E.error,P.error,M.error,R.error,I.error,O.error,F.error,$.error,W.error,K.error,ce.error].filter(Boolean);if(pe.length>0){pe.forEach(ne=>ah(ne,"carregar dados iniciais",t)),i({loadingData:!1});return}const ue=Rp(_.data),fe=(v.data||[]).filter(ne=>ne.status==="novo-lead"||ne.status==="proposta-enviada").reduce((ne,H)=>ne+(Number(H.value)||0),0);i({clients:f.data,suppliers:g.data||[],workflowCards:v.data,financialData:{...ue,transactions:_.data,potentialLeadValue:fe},servicePackages:S.data,equipments:x.data,maintenances:E.data,fixedCosts:P.data,pricedServices:M.data,savingGoals:R.data,availabilitySlots:I.data,proposals:O.data,contratos:F.data,wallets:$.data,featureFlags:W.data.reduce((ne,H)=>({...ne,[H.nome_funcionalidade]:H.esta_ativa}),{}),affiliateData:{referrals:K.data,commissions:ce.data},loadingData:!1,initialLoadCompleted:!0})}catch(f){ah(f,"carregar dados iniciais",t),i({loadingData:!1})}}},[t]);return{...r,setDataState:i,clearLocalData:a,loadInitialData:d,refreshData:l,setInitialLoadCompleted:h=>i({initialLoadCompleted:h})}},y2=async(n,e,t)=>{if(t.name){const{count:i,error:a}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(a)throw new Error(`Erro ao verificar cliente existente: ${a.message}`);if(i>0)throw new Error(`Um cliente com o nome "${t.name}" j existe.`)}const{data:r,error:s}=await n.from("clients").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(s)throw s;return r},w2=async(n,e,t,r)=>{if(r.name){const{count:a,error:l}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar cliente existente: ${l.message}`);if(a>0)throw new Error(`Um cliente com o nome "${r.name}" j existe.`)}const{data:s,error:i}=await n.from("clients").update(r).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return s},b2=async(n,e,t)=>{const{error:r}=await n.from("clients").delete().eq("id",t).eq("user_id",e);if(r)throw r},_2=(n,e,t,r,s,i)=>{const a=A.useCallback(async f=>{if(!n||!e())return s({message:"Usurio no autenticado ou trial expirado"},"adicionar cliente"),null;try{const g=await y2(Se,n.id,f),v=[g,...t];return r(v),i(v),g}catch(g){throw s(g,"adicionar cliente"),g}},[n,e,t,r,s,i]),l=A.useCallback(async(f,g)=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"atualizar cliente");return}try{const v=await w2(Se,n.id,f,g),_=t.map(S=>S.id===f?v:S);r(_),i(_)}catch(v){throw s(v,"atualizar cliente"),v}},[n,e,t,r,s,i]),d=A.useCallback(async f=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"remover cliente");return}try{await b2(Se,n.id,f);const g=t.filter(v=>v.id!==f);r(g),i(g)}catch(g){s(g,"remover cliente")}},[n,e,t,r,s,i]),h=A.useCallback(f=>t.find(g=>g.id===f),[t]);return{addClient:a,updateClient:l,deleteClient:d,getClientById:h}},x2=async(n,e,t)=>{if(t.name){const{count:i,error:a}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(a)throw new Error(`Erro ao verificar fornecedor existente: ${a.message}`);if(i>0)throw new Error(`Um fornecedor com o nome "${t.name}" j existe.`)}const{data:r,error:s}=await n.from("suppliers").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(s)throw s;return r},S2=async(n,e,t,r)=>{if(r.name){const{count:a,error:l}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar fornecedor existente: ${l.message}`);if(a>0)throw new Error(`Um fornecedor com o nome "${r.name}" j existe.`)}const{data:s,error:i}=await n.from("suppliers").update(r).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return s},A2=async(n,e,t)=>{const{error:r}=await n.from("suppliers").delete().eq("id",t).eq("user_id",e);if(r)throw r},C2=(n,e,t,r,s)=>{const i=A.useCallback(async h=>{if(!n||!e())return s({message:"Usurio no autenticado ou trial expirado"},"adicionar fornecedor"),null;try{const f=await x2(Se,n.id,h),g=[f,...t];return r(g),f}catch(f){throw s(f,"adicionar fornecedor"),f}},[n,e,t,r,s]),a=A.useCallback(async(h,f)=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"atualizar fornecedor");return}try{const g=await S2(Se,n.id,h,f),v=t.map(_=>_.id===h?g:_);r(v)}catch(g){throw s(g,"atualizar fornecedor"),g}},[n,e,t,r,s]),l=A.useCallback(async h=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"remover fornecedor");return}try{await A2(Se,n.id,h);const f=t.filter(g=>g.id!==h);r(f)}catch(f){s(f,"remover fornecedor")}},[n,e,t,r,s]),d=A.useCallback(h=>t.find(f=>f.id===h),[t]);return{addSupplier:i,updateSupplier:a,deleteSupplier:l,getSupplierById:d}},E2=(n,e)=>({handleNewSubscription:A.useCallback(async(r,s)=>{if(!(!n?.id||!e?.referred_by))try{const{data:i,error:a}=await Se.from("settings").select("user_id").eq("referral_code",e.referred_by).single();if(a||!i){console.warn(`Referrer not found for code ${e.referred_by}. Cannot create referral record.`);return}const l=i.user_id,{data:d,error:h}=await Se.from("referrals").insert({referrer_id:l,referred_id:n.id,referred_email:n.email,referred_name:e.user_name,status:"subscribed",subscription_plan:r,subscription_date:new Date().toISOString()}).select().single();if(h)throw h;console.log(`Referral record created: ${d.id}`);const{data:f,error:g}=await Se.from("affiliate_settings").select("*").eq("id",1).single();if(g||!f||!f.is_active){console.log("Affiliate program is not active or settings not found. No commission will be generated.");return}const{data:v,error:_}=await Se.from("plans").select("price").eq("plan_id",r).single();if(_||!v){console.warn(`Plan details for ${r} not found. Cannot calculate commission.`);return}const S=v.price*f.commission_percentage/100,x=new Date;x.setDate(x.getDate()+f.payout_waiting_days);const{error:E}=await Se.from("commissions").insert({referral_id:d.id,referrer_id:l,amount:S,status:"pending",due_date:x.toISOString()});if(E)throw E;console.log(`Commission of ${S} created for referrer ${l}`)}catch(i){console.error("Error in handleNewSubscription for affiliate program:",i.message)}},[n,e])}),k2=async(n,e,t,r,s,i,a)=>{if(!s){console.warn(`Tentativa de atualizar card ${t} que no foi encontrado no estado local.`);const{data:v,error:_}=await n.from("workflow_cards").select("*").eq("id",t).single();if(_||!v)throw new Error(`Card com ID ${t} no encontrado para atualizao, nem no estado local nem no banco de dados.`);s=v}let l=[...s.history||[]];const d={title:"Ttulo",status:"Status",value:"Valor",date:"Data",time:"Hora",description:"Descrio",client_id:"Cliente",service_package_id:"Pacote de Servio",payment_status:"Status do Pagamento",contract_status:"Status do Contrato"};for(const v in r)if(Object.prototype.hasOwnProperty.call(r,v)&&d[v]&&r[v]!==s[v]){let _=s[v]||"vazio",S=r[v]||"vazio";v==="status"&&(_=i(_),S=i(S)),v==="value"&&(_=`R$ ${Number(_).toFixed(2)}`,S=`R$ ${Number(S).toFixed(2)}`),_!==S&&l.push({action:`${d[v]} alterado de "${_}" para "${S}"`,date:new Date().toISOString(),user:a})}r.archived===!0&&s.archived===!1?l.push({action:"Card arquivado",date:new Date().toISOString(),user:a}):r.archived===!1&&s.archived===!0&&l.push({action:"Card desarquivado",date:new Date().toISOString(),user:a});const h={...r,client_id:r.client_id===""?null:r.client_id,service_package_id:r.service_package_id===""?null:r.service_package_id,history:l,subtasks:r.subtasks!==void 0?(r.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})):(s.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})),comments:r.comments!==void 0?r.comments:s.comments,contract_status:r.contract_status!==void 0?r.contract_status:s.contract_status,archived:r.archived!==void 0?r.archived:s.archived,time:r.time!==void 0?r.time:s.time,installments:r.installments!==void 0?r.installments:r.num_installments!==void 0?r.num_installments:s.installments,num_installments:r.num_installments!==void 0?r.num_installments:r.installments!==void 0?r.installments:s.num_installments,date:r.date!==void 0?r.date:s.date};delete h.createFinancialTransaction,Object.keys(h).forEach(v=>{h[v]===void 0&&delete h[v]});const{data:f,error:g}=await n.from("workflow_cards").update(h).eq("id",t).eq("user_id",e).select().single();if(g)throw g;return f},T2=async(n,e,t)=>{const{error:r}=await n.from("workflow_cards").delete().eq("id",t).eq("user_id",e);if(r)throw r},P2=async(n,e,t,r,s,i,a)=>{const l=Array.isArray(s)?s:[],d={id:Math.random().toString(36).substr(2,9),text:r,date:new Date().toISOString(),user:i,user_photo_url:a},h=[...l,d];let f=await n.from("workflow_cards").select("history").eq("id",t).eq("user_id",e).single();if(f.error)throw f.error;let g=f.data?.history||[];g.push({action:`Comentrio adicionado: "${r.substring(0,30)}${r.length>30?"...":""}"`,date:new Date().toISOString(),user:i});const{data:v,error:_}=await n.from("workflow_cards").update({comments:h,history:g}).eq("id",t).eq("user_id",e).select().single();if(_)throw _;return v},R2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to add a service package.");const{count:r,error:s}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(s)throw new Error(`Erro ao verificar pacote: ${s.message}`);if(r>0)throw new Error(`Um pacote com o nome "${t.name}" j existe.`);const i={...t,user_id:e},{data:a,error:l}=await n.from("service_packages").insert([i]).select().single();if(l)throw l;return a},M2=async(n,e,t,r)=>{if(!e)throw new Error("User ID is required to update a service package.");if(r.name){const{count:a,error:l}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar pacote: ${l.message}`);if(a>0)throw new Error(`Um pacote com o nome "${r.name}" j existe.`)}const{data:s,error:i}=await n.from("service_packages").update(r).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return s},I2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to delete a service package.");const{error:r}=await n.from("service_packages").delete().eq("id",t).eq("user_id",e);if(r)throw r},D2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:r,error:s}=await n.from("orcamentos").select("*").eq("user_id",e).eq("client_id",t).order("data_envio",{ascending:!1});if(s)throw console.error("Erro ao buscar oramentos:",s),s;return r||[]},N2=async(n,e)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:t,error:r}=await n.from("orcamentos").insert([e]).select().single();if(r)throw console.error("Erro ao adicionar oramento:",r),r;return t},O2=async(n,e,t,r)=>{if(!n)throw new Error("Supabase client is not initialized.");const s={...t,updated_at:new Date().toISOString()},{data:i,error:a}=await n.from("orcamentos").update(s).eq("id",e).eq("user_id",r).select().single();if(a)throw console.error("Erro ao atualizar oramento:",a),a;return i},L2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{error:r}=await n.from("orcamentos").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Erro ao excluir oramento:",r),r;return!0};function ri(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Cl(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function j2(n,e){const t=ri(n);return isNaN(e)?Cl(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const AE=6048e5,F2=864e5,CE=6e4,EE=36e5,k9=1e3,T9=43200,P9=1440;let B2={};function sy(){return B2}function Vp(n,e){const t=sy(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=ri(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Nv(n){return Vp(n,{weekStartsOn:1})}function kE(n){const e=ri(n),t=e.getFullYear(),r=Cl(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=Nv(r),i=Cl(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Nv(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function MS(n){const e=ri(n);return e.setHours(0,0,0,0),e}function IS(n){const e=ri(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function $2(n,e){const t=MS(n),r=MS(e),s=+t-IS(t),i=+r-IS(r);return Math.round((s-i)/F2)}function U2(n){const e=kE(n),t=Cl(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Nv(t)}function z2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function V2(n){if(!z2(n)&&typeof n!="number")return!1;const e=ri(n);return!isNaN(Number(e))}function H2(n){const e=ri(n),t=Cl(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const W2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q2=(n,e,t)=>{let r;const s=W2[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ew(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const G2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},K2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X2={date:ew({formats:G2,defaultWidth:"full"}),time:ew({formats:K2,defaultWidth:"full"}),dateTime:ew({formats:Y2,defaultWidth:"full"})},Q2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J2=(n,e,t,r)=>Q2[n];function cp(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):a;s=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;s=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const Z2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ej={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ij=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},oj={ordinalNumber:ij,era:cp({values:Z2,defaultWidth:"wide"}),quarter:cp({values:ej,defaultWidth:"wide",argumentCallback:n=>n-1}),month:cp({values:tj,defaultWidth:"wide"}),day:cp({values:nj,defaultWidth:"wide"}),dayPeriod:cp({values:rj,defaultWidth:"wide",formattingValues:sj,defaultFormattingWidth:"wide"})};function up(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(l)?lj(l,g=>g.test(a)):aj(l,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function aj(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function lj(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function cj(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const uj=/^(\d+)(th|st|nd|rd)?/i,dj=/\d+/i,hj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fj={any:[/^b/i,/^(a|c)/i]},pj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mj={any:[/1/i,/2/i,/3/i,/4/i]},gj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_j={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xj={ordinalNumber:cj({matchPattern:uj,parsePattern:dj,valueCallback:n=>parseInt(n,10)}),era:up({matchPatterns:hj,defaultMatchWidth:"wide",parsePatterns:fj,defaultParseWidth:"any"}),quarter:up({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:mj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:up({matchPatterns:gj,defaultMatchWidth:"wide",parsePatterns:vj,defaultParseWidth:"any"}),day:up({matchPatterns:yj,defaultMatchWidth:"wide",parsePatterns:wj,defaultParseWidth:"any"}),dayPeriod:up({matchPatterns:bj,defaultMatchWidth:"any",parsePatterns:_j,defaultParseWidth:"any"})},Sj={code:"en-US",formatDistance:q2,formatLong:X2,formatRelative:J2,localize:oj,match:xj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Aj(n){const e=ri(n);return $2(e,H2(e))+1}function Cj(n){const e=ri(n),t=+Nv(e)-+U2(e);return Math.round(t/AE)+1}function TE(n,e){const t=ri(n),r=t.getFullYear(),s=sy(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=Cl(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Vp(a,e),d=Cl(n,0);d.setFullYear(r,0,i),d.setHours(0,0,0,0);const h=Vp(d,e);return t.getTime()>=l.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function Ej(n,e){const t=sy(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=TE(n,e),i=Cl(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Vp(i,e)}function kj(n,e){const t=ri(n),r=+Vp(t,e)-+Ej(t,e);return Math.round(r/AE)+1}function Ft(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const pl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Ft(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ft(t+1,2)},d(n,e){return Ft(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ft(n.getHours()%12||12,e.length)},H(n,e){return Ft(n.getHours(),e.length)},m(n,e){return Ft(n.getMinutes(),e.length)},s(n,e){return Ft(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return Ft(s,e.length)}},th={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return pl.y(n,e)},Y:function(n,e,t,r){const s=TE(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Ft(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ft(i,e.length)},R:function(n,e){const t=kE(n);return Ft(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ft(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ft(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ft(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return pl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ft(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=kj(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Ft(s,e.length)},I:function(n,e,t){const r=Cj(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Ft(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):pl.d(n,e)},D:function(n,e,t){const r=Aj(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Ft(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ft(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ft(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ft(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=th.noon:r===0?s=th.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=th.evening:r>=12?s=th.afternoon:r>=4?s=th.morning:s=th.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return pl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):pl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Ft(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Ft(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):pl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):pl.s(n,e)},S:function(n,e){return pl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return OS(r);case"XXXX":case"XX":return Vc(r);case"XXXXX":case"XXX":default:return Vc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return OS(r);case"xxxx":case"xx":return Vc(r);case"xxxxx":case"xxx":default:return Vc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NS(r,":");case"OOOO":default:return"GMT"+Vc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NS(r,":");case"zzzz":default:return"GMT"+Vc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Ft(r,e.length)},T:function(n,e,t){const r=n.getTime();return Ft(r,e.length)}};function NS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+Ft(i,2)}function OS(n,e){return n%60===0?(n>0?"-":"+")+Ft(Math.abs(n)/60,2):Vc(n,e)}function Vc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Ft(Math.trunc(r/60),2),i=Ft(r%60,2);return t+s+e+i}const LS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PE=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Tj=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return LS(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",LS(r,e)).replace("{{time}}",PE(s,e))},Pj={p:PE,P:Tj},Rj=/^D+$/,Mj=/^Y+$/,Ij=["D","DD","YY","YYYY"];function Dj(n){return Rj.test(n)}function Nj(n){return Mj.test(n)}function Oj(n,e,t){const r=Lj(n,e,t);if(console.warn(r),Ij.includes(n))throw new RangeError(r)}function Lj(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Bj=/^'([^]*?)'?$/,$j=/''/g,Uj=/[a-zA-Z]/;function Yc(n,e,t){const r=sy(),s=t?.locale??r.locale??Sj,i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=ri(n);if(!V2(l))throw new RangeError("Invalid time value");let d=e.match(Fj).map(f=>{const g=f[0];if(g==="p"||g==="P"){const v=Pj[g];return v(f,s.formatLong)}return f}).join("").match(jj).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const g=f[0];if(g==="'")return{isToken:!1,value:zj(f)};if(DS[g])return{isToken:!0,value:f};if(g.match(Uj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(d=s.localize.preprocessor(l,d));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return d.map(f=>{if(!f.isToken)return f.value;const g=f.value;(!t?.useAdditionalWeekYearTokens&&Nj(g)||!t?.useAdditionalDayOfYearTokens&&Dj(g))&&Oj(g,e,String(n));const v=DS[g[0]];return v(l,g,s.localize,h)}).join("")}function zj(n){const e=n.match(Bj);return e?e[1].replace($j,"'"):n}function RE(n,e){const r=qj(n);let s;if(r.date){const d=Gj(r.date,2);s=Kj(d.restDateString,d.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let a=0,l;if(r.time&&(a=Yj(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=Xj(r.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(i+a),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(i+a+l)}const tv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Vj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Hj=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qj(n){const e={},t=n.split(tv.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],tv.timeZoneDelimiter.test(e.date)&&(e.date=n.split(tv.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const s=tv.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Gj(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:n.slice((r[1]||r[2]).length)}}function Kj(n,e){if(e===null)return new Date(NaN);const t=n.match(Vj);if(!t)return new Date(NaN);const r=!!t[4],s=dp(t[1]),i=dp(t[2])-1,a=dp(t[3]),l=dp(t[4]),d=dp(t[5])-1;if(r)return tF(e,l,d)?Qj(e,l,d):new Date(NaN);{const h=new Date(0);return!Zj(e,i,a)||!eF(e,s)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(s,a)),h)}}function dp(n){return n?parseInt(n):1}function Yj(n){const e=n.match(Hj);if(!e)return NaN;const t=tw(e[1]),r=tw(e[2]),s=tw(e[3]);return nF(t,r,s)?t*EE+r*CE+s*1e3:NaN}function tw(n){return n&&parseFloat(n.replace(",","."))||0}function Xj(n){if(n==="Z")return 0;const e=n.match(Wj);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return rF(r,s)?t*(r*EE+s*CE):NaN}function Qj(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+t+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const Jj=[31,null,31,30,31,30,31,31,30,31,30,31];function ME(n){return n%400===0||n%4===0&&n%100!==0}function Zj(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Jj[e]||(ME(n)?29:28))}function eF(n,e){return e>=1&&e<=(ME(n)?366:365)}function tF(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function nF(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function rF(n,e){return e>=0&&e<=59}const IE=async(n,e,t=null)=>{let r=Se.from("equipamentos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_equipamento",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},sF=async(n,e)=>{if(await IE(n,e.nome_equipamento))throw new Error(`Um equipamento com o nome "${e.nome_equipamento}" j existe.`);const{data:r,error:s}=await Se.from("equipamentos").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},iF=async(n,e,t)=>{if(t.nome_equipamento&&await IE(n,t.nome_equipamento,e))throw new Error(`Um equipamento com o nome "${t.nome_equipamento}" j existe.`);const{data:r,error:s}=await Se.from("equipamentos").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},oF=async(n,e)=>{const{error:t}=await Se.from("equipamentos").delete().eq("id",e).eq("user_id",n);if(t)throw t},aF=async(n,e)=>{const{data:t,error:r}=await Se.from("manutencoes").insert([{...e,user_id:n}]).select().single();if(r)throw r;return t},lF=async(n,e,t=null)=>{let r=Se.from("servicos_precificados").select("id",{count:"exact"}).eq("user_id",n).eq("nome_servico",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},cF=async(n,e)=>{if(await lF(n,e.nome_servico))throw new Error(`Um servio com o nome "${e.nome_servico}" j existe.`);const{data:r,error:s}=await Se.from("servicos_precificados").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},DE=async(n,e,t=null)=>{let r=Se.from("custos_fixos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_custo",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},uF=async(n,e)=>{if(await DE(n,e.nome_custo))throw new Error(`Um custo com o nome "${e.nome_custo}" j existe.`);const{data:r,error:s}=await Se.from("custos_fixos").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},dF=async(n,e,t)=>{if(t.nome_custo&&await DE(n,t.nome_custo,e))throw new Error(`Um custo com o nome "${t.nome_custo}" j existe.`);const{data:r,error:s}=await Se.from("custos_fixos").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},hF=async(n,e)=>{const{error:t}=await Se.from("custos_fixos").delete().eq("id",e).eq("user_id",n);if(t)throw t},NE=async(n,e,t=null)=>{let r=Se.from("metas_reserva").select("id",{count:"exact"}).eq("user_id",n).eq("nome_meta",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},fF=async(n,e)=>{if(await NE(n,e.nome_meta))throw new Error(`Uma meta com o nome "${e.nome_meta}" j existe.`);const{data:r,error:s}=await Se.from("metas_reserva").insert([{...e,user_id:n,saldo_atual:0}]).select().single();if(s)throw s;return r},pF=async(n,e,t)=>{if(t.nome_meta&&await NE(n,t.nome_meta,e))throw new Error(`Uma meta com o nome "${t.nome_meta}" j existe.`);const{data:r,error:s}=await Se.from("metas_reserva").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},mF=async(n,e)=>{const{error:t}=await Se.from("metas_reserva").delete().eq("id",e).eq("user_id",n);if(t)throw t},OE=(n,e=[])=>({saldo_geral:{id:"saldo_geral",title:"Saldo Geral",type:"stat",icon:"Landmark",color:"text-green-500",onClick:()=>n("financial",{type:"all",period:"all",isDashboardClick:!0}),defaultSize:{w:3,h:2}},pagamentos_receber:{id:"pagamentos_receber",title:"A Receber",type:"stat",icon:"TrendingUp",color:"text-blue-500",onClick:()=>n("financial",{type:"entrada",status:"pendente",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_pagar:{id:"despesas_pagar",title:"Contas a Pagar",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pendente",period:"future",isDashboardClick:!0}),defaultSize:{w:3,h:2}},awaiting_release:{id:"awaiting_release",title:"Aguardando Liberao",type:"stat",icon:"Wallet",color:"text-cyan-500",onClick:()=>n("financial",{status:"AGUARDANDO_LIBERACAO",isDashboardClick:!0}),defaultSize:{w:3,h:2}},imposto_estimado:{id:"imposto_estimado",title:"Imposto Estimado (Ms)",type:"stat",icon:"Receipt",color:"text-yellow-500",onClick:()=>n("precifique"),defaultSize:{w:3,h:2}},pro_labore:{id:"pro_labore",title:"Prlabore (Ms)",type:"stat",icon:"DollarSign",color:"text-indigo-500",onClick:()=>n("financial",{type:"saida",category:"Pr-labore",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_mes:{id:"despesas_mes",title:"Despesas (Ms)",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pago",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},lucro_mes:{id:"lucro_mes",title:"Lucro (Ms)",type:"stat",icon:"TrendingUp",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:3,h:2}},depreciacao_mensal:{id:"depreciacao_mensal",title:"Depreciao Mensal",type:"stat",icon:"TrendingDown",color:"text-gray-500",onClick:()=>n("my-setup"),defaultSize:{w:3,h:2}},clientes_ativos:{id:"clientes_ativos",title:"Clientes Ativos",type:"smallStat",icon:"Users",iconColor:"text-purple-500",onClick:()=>n("clients"),defaultSize:{w:2,h:2}},trabalhos_em_andamento:{id:"trabalhos_em_andamento",title:"Em Andamento",type:"smallStat",icon:"Briefcase",iconColor:"text-orange-500",onClick:()=>n("workflow",{status:"em-andamento"}),defaultSize:{w:2,h:2}},trabalhos_agendados:{id:"trabalhos_agendados",title:"Agendados (Ms)",type:"smallStat",icon:"Calendar",iconColor:"text-teal-500",onClick:()=>n("workflow",{status:"agendado"}),defaultSize:{w:2,h:2}},conversao_clientes:{id:"conversao_clientes",title:"Converso de Clientes",type:"smallStat",icon:"Target",iconColor:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:2,h:2}},grafico_faturamento:{id:"grafico_faturamento",title:"Faturamento Anual",type:"chart",chartType:"bar",icon:"BarChart2",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},status_trabalhos:{id:"status_trabalhos",title:"Status dos Trabalhos",type:"chart",chartType:"pie",icon:"PieChart",color:"text-blue-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},ultimos_lancamentos:{id:"ultimos_lancamentos",title:"ltimos Lanamentos",type:"chart",chartType:"list",icon:"List",color:"text-gray-500",onClick:()=>n("financial"),defaultSize:{w:3,h:5}},lembretes:{id:"lembretes",title:"Lembretes e Tarefas",type:"reminders",icon:"BellRing",color:"text-yellow-500",onClick:()=>n("workflow"),defaultSize:{w:4,h:5}},metas_reserva:{id:"metas_reserva",title:"Resumo das Metas",type:"goals_summary",icon:"Target",color:"text-cyan-500",onClick:()=>n("reserva-inteligente"),defaultSize:{w:4,h:5}},...(e||[]).reduce((t,r)=>{const s=`wallet_${r.id}`;return t[s]={id:s,title:r.name||"Carteira",type:"stat",icon:"Wallet",iconUrl:r.icon_url||void 0,color:"text-blue-500",onClick:()=>n("financial",{walletId:r.id,isDashboardClick:!0}),defaultSize:{w:3,h:2}},t},{}),grafico_despesas_faturamento:{id:"grafico_despesas_faturamento",title:"Faturamento x Despesas",type:"chart",chartType:"bar",icon:"BarChart3",color:"text-purple-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_despesas_lucro:{id:"grafico_despesas_lucro",title:"Lucro x Despesas",type:"chart",chartType:"bar",icon:"BarChartBig",color:"text-orange-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_conversao_leads:{id:"grafico_conversao_leads",title:"Converso de Leads",type:"chart",chartType:"pie",icon:"PieChart",color:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},grafico_inadimplentes:{id:"grafico_inadimplentes",title:"Clientes Inadimplentes",type:"chart",chartType:"pie",icon:"Users",color:"text-red-500",onClick:()=>n("clients",{status:"inadimplentes"}),defaultSize:{w:3,h:5}}}),hp=n=>{const t=[...[{i:"saldo_geral",x:0,y:0,w:3,h:2},{i:"pagamentos_receber",x:3,y:0,w:3,h:2},{i:"despesas_pagar",x:6,y:0,w:3,h:2},{i:"awaiting_release",x:9,y:0,w:3,h:2},{i:"grafico_faturamento",x:0,y:2,w:6,h:5},{i:"ultimos_lancamentos",x:6,y:2,w:3,h:5},{i:"status_trabalhos",x:9,y:2,w:3,h:5},{i:"lembretes",x:0,y:7,w:4,h:5},{i:"metas_reserva",x:4,y:7,w:4,h:5},{i:"clientes_ativos",x:8,y:7,w:2,h:2},{i:"trabalhos_em_andamento",x:10,y:7,w:2,h:2},{i:"trabalhos_agendados",x:8,y:9,w:2,h:2},{i:"conversao_clientes",x:10,y:9,w:2,h:2}]];let r=Math.max(...t.map(i=>(i.y||0)+(i.h||0)),0);return Object.keys(n).forEach(i=>{if(i.startsWith("wallet_")&&!t.some(a=>a.i===i)){const a=n[i];t.push({i,x:0,y:r,w:a.defaultSize?.w||3,h:a.defaultSize?.h||2}),r+=a.defaultSize?.h||2}}),[{id:"grafico_despesas_faturamento",x:0,y:r,w:6,h:5},{id:"grafico_despesas_lucro",x:6,y:r,w:6,h:5},{id:"grafico_conversao_leads",x:0,y:r+5,w:3,h:5},{id:"grafico_inadimplentes",x:3,y:r+5,w:3,h:5}].forEach(i=>{n[i.id]&&!t.some(a=>a.i===i.id)&&t.push({i:i.id,x:i.x,y:i.y,w:i.w,h:i.h})}),t},gF=(n,e)=>n.map(t=>{const r=e[t.i];let s={...t};return r.type==="stat"?(s.w=5,s.h=2):r.type==="smallStat"?(s.w=2,s.h=2):s.w=Math.min(10,t.w*1.5),s}),vF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?6:5;break;case"reminders":case"goals_summary":i=6;break;default:i=4}const a={i:r.i,x:0,y:t,w:4,h:i};return t+=i,a})},yF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?7:5;break;case"reminders":case"goals_summary":i=7;break;default:i=4}const a={i:r.i,x:0,y:t,w:2,h:i};return t+=i,a})},wF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?8:6;break;case"reminders":case"goals_summary":i=8;break;default:i=5}const a={i:r.i,x:0,y:t,w:2,h:i};return t+=i,a})},bF=()=>{},la=OE(bF,[]);hp(la),gF(hp(la),la),vF(hp(la),la),yF(hp(la),la),wF(hp(la),la);const LE=A.createContext(),ds=()=>{const n=A.useContext(LE);if(!n)throw new Error("useData must be used within a DataProvider");return n},_F=({children:n})=>{const{toast:e}=ni(),{user:t,session:r,settings:s,loadingAuth:i,setSettings:a}=Kb(),{clients:l,suppliers:d,workflowCards:h,financialData:f,servicePackages:g,equipments:v,maintenances:_,fixedCosts:S,pricedServices:x,savingGoals:E,pendingReserveAllocations:P,upcomingReminders:M,clientContracts:R,clientOrcamentos:I,availabilitySlots:O,proposals:F,blogPosts:$,featureFlags:W,affiliateData:K,loadingData:ce,initialLoadCompleted:pe,wallets:ue,contratos:fe,setDataState:ne,clearLocalData:H,loadInitialData:q,refreshData:te}=v2(t,s,e),[z,re]=A.useState(null),[Z,B]=A.useState(0),X=A.useCallback((de,J)=>{ah(de,J,e)},[e]);A.useEffect(()=>{!i&&!t&&H()},[i,t,H]),A.useEffect(()=>{t&&!pe&&q(t)},[t,pe,q]);const ae=A.useCallback(de=>{de?.plan_status?(re(de.plan_status),B(999)):(re("FREE"),B(999))},[]);A.useEffect(()=>{ae(s)},[s,ae]);const ye=A.useCallback(()=>!0,[]),Me=A.useCallback(de=>{const J={agendado:"Agendado","novo-lead":"Novo Lead","proposta-enviada":"Proposta Enviada","em-andamento":"Em Andamento",concluido:"Concludo"};return(s?.workflow_columns?.reduce((xe,be)=>({...xe,[be.id]:be.title}),{})||{})[de]||J[de]||de},[s?.workflow_columns]),{addClient:Pe,updateClient:ve,deleteClient:Ne,getClientById:He}=_2(t,ye,l,de=>ne(J=>({...J,clients:de})),X,de=>ne(J=>({...J,upcomingReminders:de}))),{addSupplier:Ye,updateSupplier:it,deleteSupplier:Mt,getSupplierById:un}=C2(t,ye,d,de=>ne(J=>({...J,suppliers:de})),X),{handleNewSubscription:Xt}=E2(t,s),ur=de=>(de||[]).filter(J=>J.status==="novo-lead"||J.status==="proposta-enviada").reduce((J,me)=>J+(Number(me.value)||0),0),zi=A.useCallback(de=>{if(s?.role==="ADMIN")return!0;const J=s?.feature_overrides?.[de];return typeof J=="boolean"?J:W[de]??!1},[W,s]),In=A.useCallback(de=>{const J=(ue||[]).find(be=>be.id===de);return J?(f?.transactions||[]).filter(be=>be.wallet_id===de&&(be.status==="PAGO"||be.status==="AGUARDANDO_LIBERACAO"&&new Date(be.release_date)<=new Date)).reduce((be,Be)=>Be.tipo==="ENTRADA"?be+Number(Be.valor):Be.tipo==="SAIDA"?be-Number(Be.valor):be,Number(J.initial_balance)||0):0},[ue,f?.transactions]),jl=A.useMemo(()=>OE(()=>{},ue),[ue]),Fl=async de=>{if(!t){X({message:"Usurio no autenticado."},"deletar proposta");return}const{error:J}=await Se.from("propostas").delete().eq("id",de).eq("user_id",t.id);J?X(J,"deletar proposta"):(e({title:"Proposta deletada com sucesso!"}),await te("propostas"))},hs=async de=>{if(!t||!ye()||!s)throw new Error("Pr-condio falhou para adicionar card.");try{const{data:J,error:me}=await Se.functions.invoke("criar-agendamento",{body:JSON.stringify({cardData:de,userName:s.user_name||t.email})});if(me)throw me;if(J.error)throw new Error(J.error);const{newCard:xe}=J;return ne(be=>{const Be=[...be.workflowCards,xe].sort((Et,dn)=>(Et.order||0)-(dn.order||0));return{...be,workflowCards:Be,financialData:{...be.financialData,potentialLeadValue:ur(Be)}}}),xe}catch(J){throw X(J,"criar agendamento"),J}},An=async(de,J)=>{if(!t||!ye())return null;try{const me=h.find(be=>be.id===de);if(!me)return await te("workflow_cards"),null;const xe=await k2(Se,t.id,de,{...J},me,Me,s.user_name||t.email);if(ne(be=>{const Be=be.workflowCards.map(Et=>Et.id===de?xe:Et).sort((Et,dn)=>(Et.order||0)-(dn.order||0));return{...be,workflowCards:Be,financialData:{...be.financialData,potentialLeadValue:ur(Be)}}}),J.value!==void 0||J.payment_type!==void 0||J.entry_paid!==void 0){const be=await m2(Se,de),Be=be.length>0?be[0]:null,Et={descricao:xe.title||"Lanamento",valor:xe.value||0,data:xe.first_installment_date||xe.date||new Date().toISOString().split("T")[0],data_vencimento:xe.first_installment_date||xe.date,status:xe.entry_paid?"PAGO":"PENDENTE",tipo:"ENTRADA",metodo_pagamento:xe.payment_method||null,trabalho_id:de,cliente_id:xe.client_id};Be?await oi(Be.id,Et):xe.value>0&&await Aa(Et),await te("transacoes")}return xe}catch(me){return me.message?.includes("PGRST204")?(await te("workflow_cards"),null):(X(me,"atualizar card"),null)}},ii=async de=>{if(!(!t||!ye()))try{await T2(Se,t.id,de),ne(J=>{const me=J.workflowCards.filter(xe=>xe.id!==de);return{...J,workflowCards:me,financialData:{...J.financialData,potentialLeadValue:ur(me)}}})}catch(J){X(J,"remover card")}},Eo=async(de,J)=>{if(!t||!ye())return null;try{const me=h.find(be=>be.id===de),xe=await P2(Se,t.id,de,J,me?.comments,s.user_name||t.email,t.user_metadata?.avatar_url);return ne(be=>({...be,workflowCards:be.workflowCards.map(Be=>Be.id===de?xe:Be)})),xe}catch(me){throw X(me,"adicionar comentrio"),me}},Aa=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{let J={...de};if(de.wallet_id&&de.status==="PAGO"){const xe=ue.find(be=>be.id===de.wallet_id);if(xe&&xe.is_gateway&&xe.gateway_config&&de.tipo==="ENTRADA"){const be=xe.gateway_config.fee||0,Be=xe.gateway_config.release_days||0,Et=parseFloat(de.valor),dn=Et*be/100,fi=Et-dn;Be>1?J={...J,original_value:Et,fee_value:dn,valor:fi,status:"AGUARDANDO_LIBERACAO",release_date:Yc(j2(new Date(de.data),Be),"yyyy-MM-dd")}:J={...J,original_value:Et,fee_value:dn,valor:fi,status:"PAGO",release_date:null}}}const me=await h2(Se,t.id,J);return ne(xe=>{const be=[me,...xe.financialData.transactions];return{...xe,financialData:{...Rp(be),transactions:be,potentialLeadValue:xe.financialData.potentialLeadValue}}}),me}catch(J){throw X(J,"adicionar transao"),J}},oi=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=f.transactions.find(be=>be.id===de),xe=await f2(Se,t.id,de,J);if(ne(be=>{const Be=be.financialData.transactions.map(Et=>Et.id===de?xe:Et);return{...be,financialData:{...Rp(Be),transactions:Be,potentialLeadValue:be.financialData.potentialLeadValue}}}),xe.status==="PAGO"&&me?.status!=="PAGO"&&xe.trabalho_id){const be=h.find(Be=>Be.id===xe.trabalho_id);if(be?.service_package_id){const Be=x.find(Et=>Et.id===be.service_package_id);if(Be?.reserva_financeira_percentual>0){const Et=xe.valor*Be.reserva_financeira_percentual/100;ne(dn=>({...dn,pendingReserveAllocations:[...dn.pendingReserveAllocations,{transactionId:xe.id,transactionValue:xe.valor,serviceName:Be.nome_servico,reserveAmount:Et,pricedServiceId:Be.id}]}))}}}return xe}catch(me){throw X(me,"atualizar transao"),me}},wu=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{await p2(Se,t.id,de),ne(J=>{const me=J.financialData.transactions.filter(xe=>xe.id!==de);return{...J,financialData:{...Rp(me),transactions:me,potentialLeadValue:J.financialData.potentialLeadValue}}})}catch(J){throw X(J,"remover transao"),J}},ai=async de=>{if(!t)throw new Error("Usurio no autenticado");const{data:J,error:me}=await Se.from("wallets").insert([{...de,user_id:t.id}]).select().single();if(me)throw me;return await te("wallets"),J},fs=async(de,J)=>{if(!t)throw new Error("Usurio no autenticado");const{data:me,error:xe}=await Se.from("wallets").update(J).eq("id",de).eq("user_id",t.id).select().single();if(xe)throw xe;return await te("wallets"),me},Ca=async de=>{if(!t)throw new Error("Usurio no autenticado");const{error:J}=await Se.from("wallets").delete().eq("id",de).eq("user_id",t.id);if(J)throw J;await te("wallets")},li=async()=>{if(!t)return!1;try{const{error:de}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!1})});if(de)throw de;H();const J=t.user_metadata?.full_name||t.email,me={..._r,user_id:t.id,user_name:J,contact_email:t.email,profile_photo:t.user_metadata?.avatar_url||null,workflow_columns:xv};return await a(me,!0),te(),!0}catch(de){return X(de,"excluir dados"),!1}},ci=async()=>{if(!t)return!1;try{const{error:de}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!0})});if(de)throw de;return await Se.auth.signOut(),H(),!0}catch(de){return X(de,"excluir conta"),!1}},Bl=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await R2(Se,t.id,de);return ne(me=>({...me,servicePackages:[J,...me.servicePackages].sort((xe,be)=>new Date(be.created_at)-new Date(xe.created_at))})),J}catch(J){throw X(J,"adicionar pacote"),J}},Ea=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=await M2(Se,t.id,de,J);return ne(xe=>({...xe,servicePackages:xe.servicePackages.map(be=>be.id===de?me:be).sort((be,Be)=>new Date(Be.created_at)-new Date(be.created_at))})),me}catch(me){throw X(me,"atualizar pacote"),me}},ka=async de=>{if(!(!t||!ye()))try{await I2(Se,t.id,de),ne(J=>({...J,servicePackages:J.servicePackages.filter(me=>me.id!==de)}))}catch(J){X(J,"remover pacote")}},$l=de=>g.find(J=>J.id===de),ko=de=>f.transactions.find(J=>J.id===de),To=de=>h.find(J=>J.id===de),Ul=async de=>{if(!t||!ye())return 0;let J=0;const me=de.filter(xe=>!h.some(be=>be.google_event_id===xe.id)).map(xe=>{const be=xe.start?.date||(xe.start?.dateTime?xe.start.dateTime.split("T")[0]:null),Be=xe.start?.dateTime?Yc(RE(xe.start.dateTime),"HH:mm"):null;return be?{title:xe.summary||"Evento",description:xe.description||"",date:be,time:Be,status:"agendado",google_event_id:xe.id,user_id:t.id}:null}).filter(Boolean);if(me.length>0){const{data:xe,error:be}=await Se.from("workflow_cards").insert(me).select();be?X(be,"importar eventos"):xe&&(J=xe.length,ne(Be=>({...Be,workflowCards:[...Be.workflowCards,...xe].sort((Et,dn)=>(Et.order||0)-(dn.order||0))})))}return J},zl=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await sF(t.id,de);return ne(me=>({...me,equipments:[J,...me.equipments].sort((xe,be)=>new Date(be.created_at)-new Date(xe.created_at))})),J}catch(J){throw X(J,"add equipment"),J}},Vl=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=await iF(t.id,de,J);return ne(xe=>({...xe,equipments:xe.equipments.map(be=>be.id===de?me:be).sort((be,Be)=>new Date(Be.created_at)-new Date(be.created_at))})),me}catch(me){throw X(me,"update equipment"),me}},ui=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{await oF(t.id,de),ne(J=>({...J,equipments:J.equipments.filter(me=>me.id!==de)}))}catch(J){throw X(J,"delete equipment"),J}},di=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await aF(t.id,de);return ne(me=>({...me,maintenances:[J,...me.maintenances].sort((xe,be)=>new Date(be.data_manutencao)-new Date(xe.data_manutencao))})),J}catch(J){throw X(J,"add maintenance"),J}},bu=de=>_.filter(J=>J.equipamento_id===de).sort((J,me)=>new Date(me.data_manutencao)-new Date(J.data_manutencao)),_u=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await uF(t.id,de);return ne(me=>({...me,fixedCosts:[J,...me.fixedCosts].sort((xe,be)=>new Date(be.created_at)-new Date(xe.created_at))})),J}catch(J){throw X(J,"add fixed cost"),J}},xu=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=await dF(t.id,de,J);return ne(xe=>({...xe,fixedCosts:xe.fixedCosts.map(be=>be.id===de?me:be).sort((be,Be)=>new Date(Be.created_at)-new Date(be.created_at))})),me}catch(me){throw X(me,"update fixed cost"),me}},Su=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{await hF(t.id,de),ne(J=>({...J,fixedCosts:J.fixedCosts.filter(me=>me.id!==de)}))}catch(J){throw X(J,"delete fixed cost"),J}},Hl=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await cF(t.id,de);return ne(me=>({...me,pricedServices:[J,...me.pricedServices].sort((xe,be)=>new Date(be.created_at)-new Date(xe.created_at))})),J}catch(J){throw X(J,"add priced service"),J}},Wl=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await fF(t.id,de);return await te("metas_reserva"),J}catch(J){throw X(J,"add saving goal"),J}},Au=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=await pF(t.id,de,J);return ne(xe=>({...xe,savingGoals:xe.savingGoals.map(be=>be.id===de?me:be).sort((be,Be)=>new Date(Be.created_at)-new Date(be.created_at))})),me}catch(me){throw X(me,"update saving goal"),me}},Po=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{await mF(t.id,de),ne(J=>({...J,savingGoals:J.savingGoals.filter(me=>me.id!==de)}))}catch(J){throw X(J,"delete saving goal"),J}},Ro=async(de,J,me,xe)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const be=E.find(fi=>fi.id===de);if(!be)throw new Error("Meta no encontrada.");let Be;if(xe==="deposit")Be=Number(be.saldo_atual)+Number(J);else if(xe==="withdraw"){if(Number(be.saldo_atual)<Number(J))throw new Error("Saldo insuficiente.");Be=Number(be.saldo_atual)-Number(J)}else throw new Error("Tipo de transao invlido.");const{data:Et,error:dn}=await Se.from("metas_reserva").update({saldo_atual:Be,updated_at:new Date().toISOString()}).eq("id",de).eq("user_id",t.id).select().single();if(dn)throw dn;return xe==="withdraw"&&await Aa({descricao:`Saque da meta: ${be.nome_meta}${me?` - ${me}`:""}`,valor:Number(J),tipo:"SAIDA",status:"PAGO",data:new Date().toISOString().split("T")[0],category:"Saque de Meta",user_id:t.id}),ne(fi=>({...fi,savingGoals:fi.savingGoals.map(It=>It.id===de?Et:It).sort((It,Lh)=>new Date(Lh.created_at)-new Date(It.created_at))})),Et}catch(be){throw X(be,`Erro ao ${xe==="deposit"?"depositar":"sacar"}`),be}},Mo=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const{data:me,error:xe}=await Se.functions.invoke("alocarReserva",{body:JSON.stringify({meta_id:de,valor_alocar:J,user_id:t.id})});if(xe)throw xe;if(me.error)throw new Error(me.error);return ne(be=>({...be,savingGoals:be.savingGoals.map(Be=>Be.id===de?me:Be).sort((Be,Et)=>new Date(Et.created_at)-new Date(Be.created_at))})),me}catch(me){throw X(me,"alocar reserva"),me}},ql=de=>ne(J=>({...J,pendingReserveAllocations:J.pendingReserveAllocations.filter(me=>me.transactionId!==de)})),Io=A.useCallback(async de=>{if(!(!t||!de))try{const{data:J,error:me}=await Se.from("contratos_clientes").select("*").eq("user_id",t.id).eq("client_id",de).order("created_at",{ascending:!1});if(me)throw me;ne(xe=>({...xe,clientContracts:J||[]}))}catch(J){X(J,"buscar contratos")}},[t,X]),Ta=async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const{data:J,error:me}=await Se.from("contratos_clientes").insert([de]).select().single();if(me)throw me;return ne(xe=>({...xe,clientContracts:[J,...xe.clientContracts].sort((be,Be)=>new Date(Be.created_at)-new Date(be.created_at))})),J}catch(J){throw X(J,"add contrato"),J}},Pa=async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const{error:me}=await Se.from("contratos_clientes").delete().eq("id",de).eq("user_id",t.id);if(me)throw me;const{error:xe}=await Se.storage.from("contracts").remove([J]);xe&&console.warn("Erro ao deletar do storage:",xe.message),ne(be=>({...be,clientContracts:be.clientContracts.filter(Be=>Be.id!==de)}))}catch(me){throw X(me,"delete contrato"),me}},Gl=A.useCallback(async de=>{if(!(!t||!de))try{const J=await D2(Se,t.id,de);ne(me=>({...me,clientOrcamentos:J}))}catch(J){X(J,"buscar oramentos")}},[t,X]),hi={clients:l,suppliers:d,workflowCards:h,financialData:f,settings:s,loading:ce||i,servicePackages:g,user:t,session:r,loadingAuth:i,refreshData:te,planStatus:z,trialDaysRemaining:Z,isUserActive:ye,equipments:v,maintenances:_,fixedCosts:S,pricedServices:x,savingGoals:E,pendingReserveAllocations:P,upcomingReminders:M,clientContracts:R,clientOrcamentos:I,availabilitySlots:O,proposals:F,blogPosts:$,featureFlags:W,isFeatureEnabled:zi,affiliateData:K,wallets:ue,contratos:fe,getWalletBalance:In,addClient:Pe,updateClient:ve,deleteClient:Ne,getClientById:He,addSupplier:Ye,updateSupplier:it,deleteSupplier:Mt,getSupplierById:un,addWorkflowCard:hs,updateWorkflowCard:An,deleteWorkflowCard:ii,addComment:Eo,getStatusLabel:Me,importGoogleEventsAsWorkflowCards:Ul,getWorkflowCardById:To,addTransaction:Aa,updateTransaction:oi,deleteTransaction:wu,getTransactionById:ko,setSettings:a,addServicePackage:Bl,updateServicePackage:Ea,deleteServicePackage:ka,getServicePackageById:$l,addEquipment:zl,updateEquipment:Vl,deleteEquipment:ui,addMaintenance:di,getEquipmentMaintenances:bu,addFixedCost:_u,updateFixedCost:xu,deleteFixedCost:Su,addPricedService:Hl,addSavingGoal:Wl,updateSavingGoal:Au,deleteSavingGoal:Po,updateSavingGoalBalance:Ro,allocateToSavingGoal:Mo,dismissPendingAllocation:ql,refreshClientContracts:Io,addClientContract:Ta,deleteClientContract:Pa,refreshClientOrcamentos:Gl,addOrcamento:async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{const J=await N2(Se,de);return ne(me=>({...me,clientOrcamentos:[J,...me.clientOrcamentos].sort((xe,be)=>new Date(be.data_envio)-new Date(xe.data_envio))})),J}catch(J){throw X(J,"add oramento"),J}},updateOrcamento:async(de,J)=>{if(!t||!ye())throw new Error("Operao no permitida");try{const me=await O2(Se,de,J,t.id);return ne(xe=>({...xe,clientOrcamentos:xe.clientOrcamentos.map(be=>be.id===de?me:be).sort((be,Be)=>new Date(Be.data_envio)-new Date(be.data_envio))})),me}catch(me){throw X(me,"update oramento"),me}},deleteOrcamento:async de=>{if(!t||!ye())throw new Error("Operao no permitida");try{await L2(Se,de,t.id),ne(J=>({...J,clientOrcamentos:J.clientOrcamentos.filter(me=>me.id!==de)}))}catch(J){throw X(J,"delete oramento"),J}},deleteAllUserData:li,deleteUserAccount:ci,deleteProposal:Fl,handleNewSubscription:Xt,addWallet:ai,updateWallet:fs,deleteWallet:Ca,initialCardConfigMemo:jl};return y.jsx(LE.Provider,{value:hi,children:n})},jE=A.createContext(),Ih=()=>{const n=A.useContext(jE);if(!n)throw new Error("useModalState must be used within a ModalStateProvider");return n},xF=({children:n})=>{const[e,t]=A.useState({client:null,financial:null,workflow:null,servicePackage:null,equipment:null,maintenance:null,fixedCost:null,goal:null,goalTransaction:null,withdrawGoal:null,orcamento:null,formCreation:!1,formSuccess:null,bookingSettings:!1,availability:null}),r=A.useCallback((l,d={})=>{t(h=>({...h,[l]:{isOpen:!0,...d}}))},[]),s=A.useCallback(l=>{t(d=>({...d,[l]:null}))},[]),i=Object.values(e).some(l=>l?.isOpen),a={openModals:e,openModal:r,closeModal:s,isAnyModalOpen:i};return y.jsx(jE.Provider,{value:a,children:n})},SF=A.createContext(null),AF=()=>({browser:navigator.userAgent,platform:navigator.platform,screen_resolution:`${window.screen.width}x${window.screen.height}`,window_resolution:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language}),CF=({children:n})=>{const{user:e,settings:t}=Kb(),r=$i(),s=A.useCallback(async i=>{try{const a={type:i.type||"error",route:r.pathname,message:typeof i.message=="object"?JSON.stringify(i.message,null,2):String(i.message),stack_trace:i.stack_trace,user_info:{id:e?.id||null,email:e?.email||null,name:t?.user_name||null},device_info:AF(),user_id:e?.id||null};await Se.functions.invoke("report-error",{body:JSON.stringify(a)})}catch(a){console.error("Failed to report error:",a)}},[e,t,r.pathname]);return A.useEffect(()=>{const i=console.error;console.error=(...d)=>{i.apply(console,d);const h=d.map(g=>{if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return String(g)}}).join(" "),f=d.find(g=>g instanceof Error)?.stack;s({type:"log",message:`CONSOLE_ERROR: ${h}`,stack_trace:f})};const a=d=>{s({message:d.message,stack_trace:d.error?.stack})},l=d=>{s({type:"unhandled_rejection",message:d.reason?.message||"Promise rejection with no message",stack_trace:d.reason?.stack})};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",l),()=>{console.error=i,window.removeEventListener("error",a),window.removeEventListener("unhandledrejection",l)}},[s]),A.useEffect(()=>{const i=window.fetch;return window.fetch=async(...a)=>{const l=await i(...a);if(l.status>=400&&l.status<600){const d=a[0]instanceof Request?a[0].url:a[0];if(d.includes("/report-error"))return l;s({type:"network_error",message:`Fetch failed with status ${l.status} for URL: ${d}`,stack_trace:`Status: ${l.status}
URL: ${d}
Method: ${a[0]?.method||"GET"}`})}return l},()=>{window.fetch=i}},[s]),n},EF=({children:n})=>y.jsx(SF.Provider,{value:null,children:y.jsx(CF,{children:n})}),FE=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),iy=A.createContext({}),oy=A.createContext(null),ay=typeof document<"u",Yb=ay?A.useLayoutEffect:A.useEffect,BE=A.createContext({strict:!1}),Xb=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kF="framerAppearId",$E="data-"+Xb(kF);function TF(n,e,t,r){const{visualElement:s}=A.useContext(iy),i=A.useContext(BE),a=A.useContext(oy),l=A.useContext(FE).reducedMotion,d=A.useRef();r=r||i.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=d.current;A.useInsertionEffect(()=>{h&&h.update(t,a)});const f=A.useRef(!!(t[$E]&&!window.HandoffComplete));return Yb(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),A.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function lh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function PF(n,e,t){return A.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):lh(t)&&(t.current=r))},[e])}function Hp(n){return typeof n=="string"||Array.isArray(n)}function ly(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jb=["initial",...Qb];function cy(n){return ly(n.animate)||Jb.some(e=>Hp(n[e]))}function UE(n){return!!(cy(n)||n.variants)}function RF(n,e){if(cy(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Hp(t)?t:void 0,animate:Hp(r)?r:void 0}}return n.inherit!==!1?e:{}}function MF(n){const{initial:e,animate:t}=RF(n,A.useContext(iy));return A.useMemo(()=>({initial:e,animate:t}),[jS(e),jS(t)])}function jS(n){return Array.isArray(n)?n.join(" "):n}const FS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wp={};for(const n in FS)Wp[n]={isEnabled:e=>FS[n].some(t=>!!e[t])};function IF(n){for(const e in n)Wp[e]={...Wp[e],...n[e]}}const Zb=A.createContext({}),zE=A.createContext({}),DF=Symbol.for("motionComponentSymbol");function NF({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&IF(n);function i(l,d){let h;const f={...A.useContext(FE),...l,layoutId:OF(l)},{isStatic:g}=f,v=MF(l),_=r(l,g);if(!g&&ay){v.visualElement=TF(s,_,f,e);const S=A.useContext(zE),x=A.useContext(BE).strict;v.visualElement&&(h=v.visualElement.loadFeatures(f,x,n,S))}return A.createElement(iy.Provider,{value:v},h&&v.visualElement?A.createElement(h,{visualElement:v.visualElement,...f}):null,t(s,l,PF(_,v.visualElement,d),_,g,v.visualElement))}const a=A.forwardRef(i);return a[DF]=s,a}function OF({layoutId:n}){const e=A.useContext(Zb).id;return e&&n!==void 0?e+"-"+n:n}function LF(n){function e(r,s={}){return NF(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const jF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function e_(n){return typeof n!="string"||n.includes("-")?!1:!!(jF.indexOf(n)>-1||/[A-Z]/.test(n))}const Ov={};function FF(n){Object.assign(Ov,n)}const cm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uu=new Set(cm);function VE(n,{layout:e,layoutId:t}){return uu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ov[n]||n==="opacity")}const us=n=>!!(n&&n.getVelocity),BF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$F=cm.length;function UF(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let i="";for(let a=0;a<$F;a++){const l=cm[a];if(n[l]!==void 0){const d=BF[l]||l;i+=`${d}(${n[l]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(n,r?"":i):t&&r&&(i="none"),i}const HE=n=>e=>typeof e=="string"&&e.startsWith(n),WE=HE("--"),Yw=HE("var(--"),zF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,VF=(n,e)=>e&&typeof n=="number"?e.transform(n):n,El=(n,e,t)=>Math.min(Math.max(t,n),e),du={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Mp={...du,transform:n=>El(0,1,n)},nv={...du,default:1},Ip=n=>Math.round(n*1e5)/1e5,uy=/(-)?([\d]*\.?[\d])+/g,qE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,HF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function um(n){return typeof n=="string"}const dm=n=>({test:e=>um(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),gl=dm("deg"),wo=dm("%"),Ze=dm("px"),WF=dm("vh"),qF=dm("vw"),BS={...wo,parse:n=>wo.parse(n)/100,transform:n=>wo.transform(n*100)},$S={...du,transform:Math.round},GE={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,size:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,rotate:gl,rotateX:gl,rotateY:gl,rotateZ:gl,scale:nv,scaleX:nv,scaleY:nv,scaleZ:nv,skew:gl,skewX:gl,skewY:gl,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Mp,originX:BS,originY:BS,originZ:Ze,zIndex:$S,fillOpacity:Mp,strokeOpacity:Mp,numOctaves:$S};function t_(n,e,t,r){const{style:s,vars:i,transform:a,transformOrigin:l}=n;let d=!1,h=!1,f=!0;for(const g in e){const v=e[g];if(WE(g)){i[g]=v;continue}const _=GE[g],S=VF(v,_);if(uu.has(g)){if(d=!0,a[g]=S,!f)continue;v!==(_.default||0)&&(f=!1)}else g.startsWith("origin")?(h=!0,l[g]=S):s[g]=S}if(e.transform||(d||r?s.transform=UF(n.transform,t,f,r):s.transform&&(s.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:_=0}=l;s.transformOrigin=`${g} ${v} ${_}`}}const n_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KE(n,e,t){for(const r in e)!us(e[r])&&!VE(r,t)&&(n[r]=e[r])}function GF({transformTemplate:n},e,t){return A.useMemo(()=>{const r=n_();return t_(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function KF(n,e,t){const r=n.style||{},s={};return KE(s,r,n),Object.assign(s,GF(n,e,t)),n.transformValues?n.transformValues(s):s}function YF(n,e,t){const r={},s=KF(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const XF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||XF.has(n)}let YE=n=>!Lv(n);function QF(n){n&&(YE=e=>e.startsWith("on")?!Lv(e):n(e))}try{QF(require("@emotion/is-prop-valid").default)}catch{}function JF(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(YE(s)||t===!0&&Lv(s)||!e&&!Lv(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function US(n,e,t){return typeof n=="string"?n:Ze.transform(e+t*n)}function ZF(n,e,t){const r=US(e,n.x,n.width),s=US(t,n.y,n.height);return`${r} ${s}`}const eB={offset:"stroke-dashoffset",array:"stroke-dasharray"},tB={offset:"strokeDashoffset",array:"strokeDasharray"};function nB(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?eB:tB;n[i.offset]=Ze.transform(-r);const a=Ze.transform(e),l=Ze.transform(t);n[i.array]=`${a} ${l}`}function r_(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:d=0,...h},f,g,v){if(t_(n,h,f,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:S,dimensions:x}=n;_.transform&&(x&&(S.transform=_.transform),delete _.transform),x&&(s!==void 0||i!==void 0||S.transform)&&(S.transformOrigin=ZF(x,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),a!==void 0&&nB(_,a,l,d,!1)}const XE=()=>({...n_(),attrs:{}}),s_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function rB(n,e,t,r){const s=A.useMemo(()=>{const i=XE();return r_(i,e,{enableHardwareAcceleration:!1},s_(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};KE(i,n.style,n),s.style={...i,...s.style}}return s}function sB(n=!1){return(t,r,s,{latestValues:i},a)=>{const d=(e_(t)?rB:YF)(r,i,a,t),f={...JF(r,typeof t=="string",n),...d,ref:s},{children:g}=r,v=A.useMemo(()=>us(g)?g.get():g,[g]);return A.createElement(t,{...f,children:v})}}function QE(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const JE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZE(n,e,t,r){QE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(JE.has(s)?s:Xb(s),e.attrs[s])}function i_(n,e){const{style:t}=n,r={};for(const s in t)(us(t[s])||e.style&&us(e.style[s])||VE(s,n))&&(r[s]=t[s]);return r}function e1(n,e){const t=i_(n,e);for(const r in n)if(us(n[r])||us(e[r])){const s=cm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function o_(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function t1(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const jv=n=>Array.isArray(n),iB=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),oB=n=>jv(n)?n[n.length-1]||0:n;function Sv(n){const e=us(n)?n.get():n;return iB(e)?e.toValue():e}function aB({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,i){const a={latestValues:lB(r,s,i,n),renderState:e()};return t&&(a.mount=l=>t(r,l,a)),a}const n1=n=>(e,t)=>{const r=A.useContext(iy),s=A.useContext(oy),i=()=>aB(n,e,r,s);return t?i():t1(i)};function lB(n,e,t,r){const s={},i=r(n,{});for(const v in i)s[v]=Sv(i[v]);let{initial:a,animate:l}=n;const d=cy(n),h=UE(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const g=f?l:a;return g&&typeof g!="boolean"&&!ly(g)&&(Array.isArray(g)?g:[g]).forEach(_=>{const S=o_(n,_);if(!S)return;const{transitionEnd:x,transition:E,...P}=S;for(const M in P){let R=P[M];if(Array.isArray(R)){const I=f?R.length-1:0;R=R[I]}R!==null&&(s[M]=R)}for(const M in x)s[M]=x[M]}),s}const _n=n=>n;class zS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function cB(n){let e=new zS,t=new zS,r=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(d,h=!1,f=!1)=>{const g=f&&s,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&s&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(s){i=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const f=e.order[h];f(d),a.has(f)&&(l.schedule(f),n())}s=!1,i&&(i=!1,l.process(d))}};return l}const rv=["prepare","read","update","preRender","render","postRender"],uB=40;function dB(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=rv.reduce((g,v)=>(g[v]=cB(()=>t=!0),g),{}),a=g=>i[g].process(s),l=()=>{const g=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(g-s.timestamp,uB),1),s.timestamp=g,s.isProcessing=!0,rv.forEach(a),s.isProcessing=!1,t&&e&&(r=!1,n(l))},d=()=>{t=!0,r=!0,s.isProcessing||n(l)};return{schedule:rv.reduce((g,v)=>{const _=i[v];return g[v]=(S,x=!1,E=!1)=>(t||d(),_.schedule(S,x,E)),g},{}),cancel:g=>rv.forEach(v=>i[v].cancel(g)),state:s,steps:i}}const{schedule:Yt,cancel:_a,state:xr,steps:nw}=dB(typeof requestAnimationFrame<"u"?requestAnimationFrame:_n,!0),hB={useVisualState:n1({scrapeMotionValuesFromProps:e1,createRenderState:XE,onMount:(n,e,{renderState:t,latestValues:r})=>{Yt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Yt.render(()=>{r_(t,r,{enableHardwareAcceleration:!1},s_(e.tagName),n.transformTemplate),ZE(e,t)})}})},fB={useVisualState:n1({scrapeMotionValuesFromProps:i_,createRenderState:n_})};function pB(n,{forwardMotionProps:e=!1},t,r){return{...e_(n)?hB:fB,preloadedFeatures:t,useRender:sB(e),createVisualElement:r,Component:n}}function ga(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const r1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function dy(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const mB=n=>e=>r1(e)&&n(e,dy(e));function va(n,e,t,r){return ga(n,e,mB(t),r)}const gB=(n,e)=>t=>e(n(t)),Sl=(...n)=>n.reduce(gB);function s1(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const VS=s1("dragHorizontal"),HS=s1("dragVertical");function i1(n){let e=!1;if(n==="y")e=HS();else if(n==="x")e=VS();else{const t=VS(),r=HS();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function o1(){const n=i1(!0);return n?(n(),!1):!0}class Dl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function WS(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||o1())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&Yt.update(()=>l[r](i,a))};return va(n.current,t,s,{passive:!n.getProps()[r]})}class vB extends Dl{mount(){this.unmount=Sl(WS(this.node,!0),WS(this.node,!1))}unmount(){}}class yB extends Dl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sl(ga(this.node.current,"focus",()=>this.onFocus()),ga(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const a1=(n,e)=>e?n===e?!0:a1(n,e.parentElement):!1;function rw(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,dy(t))}class wB extends Dl{constructor(){super(...arguments),this.removeStartListeners=_n,this.removeEndListeners=_n,this.removeAccessibleListeners=_n,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=va(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:g}=this.node.getProps();Yt.update(()=>{!g&&!a1(this.node.current,l.target)?f&&f(l,d):h&&h(l,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=va(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Sl(i,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||rw("up",(d,h)=>{const{onTap:f}=this.node.getProps();f&&Yt.update(()=>f(d,h))})};this.removeEndListeners(),this.removeEndListeners=ga(this.node.current,"keyup",a),rw("down",(l,d)=>{this.startPress(l,d)})},t=ga(this.node.current,"keydown",e),r=()=>{this.isPressing&&rw("cancel",(i,a)=>this.cancelPress(i,a))},s=ga(this.node.current,"blur",r);this.removeAccessibleListeners=Sl(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Yt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!o1()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Yt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=va(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ga(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Sl(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Xw=new WeakMap,sw=new WeakMap,bB=n=>{const e=Xw.get(n.target);e&&e(n)},_B=n=>{n.forEach(bB)};function xB({root:n,...e}){const t=n||document;sw.has(t)||sw.set(t,{});const r=sw.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(_B,{root:n,...e})),r[s]}function SB(n,e,t){const r=xB(e);return Xw.set(n,t),r.observe(n),()=>{Xw.delete(n),r.unobserve(n)}}const AB={some:0,all:1};class CB extends Dl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:AB[s]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:g}=this.node.getProps(),v=h?f:g;v&&v(d)};return SB(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(EB(e,t))&&this.startObserver()}unmount(){}}function EB({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const kB={inView:{Feature:CB},tap:{Feature:wB},focus:{Feature:yB},hover:{Feature:vB}};function l1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function TB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function PB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function hy(n,e,t){const r=n.getProps();return o_(r,e,t!==void 0?t:r.custom,TB(n),PB(n))}let a_=_n;const tu=n=>n*1e3,ya=n=>n/1e3,RB={current:!1},c1=n=>Array.isArray(n)&&typeof n[0]=="number";function u1(n){return!!(!n||typeof n=="string"&&d1[n]||c1(n)||Array.isArray(n)&&n.every(u1))}const Sp=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,d1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sp([0,.65,.55,1]),circOut:Sp([.55,0,1,.45]),backIn:Sp([.31,.01,.66,-.59]),backOut:Sp([.33,1.53,.69,.99])};function h1(n){if(n)return c1(n)?Sp(n):Array.isArray(n)?n.map(h1):d1[n]}function MB(n,e,t,{delay:r=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:d}={}){const h={[e]:t};d&&(h.offset=d);const f=h1(l);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function IB(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const f1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,DB=1e-7,NB=12;function OB(n,e,t,r,s){let i,a,l=0;do a=e+(t-e)/2,i=f1(a,r,s)-n,i>0?t=a:e=a;while(Math.abs(i)>DB&&++l<NB);return a}function hm(n,e,t,r){if(n===e&&t===r)return _n;const s=i=>OB(i,0,1,n,t);return i=>i===0||i===1?i:f1(s(i),e,r)}const LB=hm(.42,0,1,1),jB=hm(0,0,.58,1),p1=hm(.42,0,.58,1),FB=n=>Array.isArray(n)&&typeof n[0]!="number",m1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,g1=n=>e=>1-n(1-e),l_=n=>1-Math.sin(Math.acos(n)),v1=g1(l_),BB=m1(l_),y1=hm(.33,1.53,.69,.99),c_=g1(y1),$B=m1(c_),UB=n=>(n*=2)<1?.5*c_(n):.5*(2-Math.pow(2,-10*(n-1))),zB={linear:_n,easeIn:LB,easeInOut:p1,easeOut:jB,circIn:l_,circInOut:BB,circOut:v1,backIn:c_,backInOut:$B,backOut:y1,anticipate:UB},qS=n=>{if(Array.isArray(n)){a_(n.length===4);const[e,t,r,s]=n;return hm(e,t,r,s)}else if(typeof n=="string")return zB[n];return n},u_=(n,e)=>t=>!!(um(t)&&HF.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),w1=(n,e,t)=>r=>{if(!um(r))return r;const[s,i,a,l]=r.match(uy);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},VB=n=>El(0,255,n),iw={...du,transform:n=>Math.round(VB(n))},Xc={test:u_("rgb","red"),parse:w1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+iw.transform(n)+", "+iw.transform(e)+", "+iw.transform(t)+", "+Ip(Mp.transform(r))+")"};function HB(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Qw={test:u_("#"),parse:HB,transform:Xc.transform},ch={test:u_("hsl","hue"),parse:w1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+wo.transform(Ip(e))+", "+wo.transform(Ip(t))+", "+Ip(Mp.transform(r))+")"},Nr={test:n=>Xc.test(n)||Qw.test(n)||ch.test(n),parse:n=>Xc.test(n)?Xc.parse(n):ch.test(n)?ch.parse(n):Qw.parse(n),transform:n=>um(n)?n:n.hasOwnProperty("red")?Xc.transform(n):ch.transform(n)},cn=(n,e,t)=>-t*n+t*e+n;function ow(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function WB({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,a=0;if(!e)s=i=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;s=ow(d,l,n+1/3),i=ow(d,l,n),a=ow(d,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}const aw=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},qB=[Qw,Xc,ch],GB=n=>qB.find(e=>e.test(n));function GS(n){const e=GB(n);let t=e.parse(n);return e===ch&&(t=WB(t)),t}const b1=(n,e)=>{const t=GS(n),r=GS(e),s={...t};return i=>(s.red=aw(t.red,r.red,i),s.green=aw(t.green,r.green,i),s.blue=aw(t.blue,r.blue,i),s.alpha=cn(t.alpha,r.alpha,i),Xc.transform(s))};function KB(n){var e,t;return isNaN(n)&&um(n)&&(((e=n.match(uy))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(qE))===null||t===void 0?void 0:t.length)||0)>0}const _1={regex:zF,countKey:"Vars",token:"${v}",parse:_n},x1={regex:qE,countKey:"Colors",token:"${c}",parse:Nr.parse},S1={regex:uy,countKey:"Numbers",token:"${n}",parse:du.parse};function lw(n,{regex:e,countKey:t,token:r,parse:s}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...i.map(s)))}function Fv(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&lw(t,_1),lw(t,x1),lw(t,S1),t}function A1(n){return Fv(n).values}function C1(n){const{values:e,numColors:t,numVars:r,tokenised:s}=Fv(n),i=e.length;return a=>{let l=s;for(let d=0;d<i;d++)d<r?l=l.replace(_1.token,a[d]):d<r+t?l=l.replace(x1.token,Nr.transform(a[d])):l=l.replace(S1.token,Ip(a[d]));return l}}const YB=n=>typeof n=="number"?0:n;function XB(n){const e=A1(n);return C1(n)(e.map(YB))}const kl={test:KB,parse:A1,createTransformer:C1,getAnimatableNone:XB},E1=(n,e)=>t=>`${t>0?e:n}`;function k1(n,e){return typeof n=="number"?t=>cn(n,e,t):Nr.test(n)?b1(n,e):n.startsWith("var(")?E1(n,e):P1(n,e)}const T1=(n,e)=>{const t=[...n],r=t.length,s=n.map((i,a)=>k1(i,e[a]));return i=>{for(let a=0;a<r;a++)t[a]=s[a](i);return t}},QB=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=k1(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}},P1=(n,e)=>{const t=kl.createTransformer(e),r=Fv(n),s=Fv(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Sl(T1(r.values,s.values),t):E1(n,e)},qp=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},KS=(n,e)=>t=>cn(n,e,t);function JB(n){return typeof n=="number"?KS:typeof n=="string"?Nr.test(n)?b1:P1:Array.isArray(n)?T1:typeof n=="object"?QB:KS}function ZB(n,e,t){const r=[],s=t||JB(n[0]),i=n.length-1;for(let a=0;a<i;a++){let l=s(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||_n:e;l=Sl(d,l)}r.push(l)}return r}function R1(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(a_(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=ZB(e,r,s),l=a.length,d=h=>{let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=qp(n[f],n[f+1],h);return a[f](g)};return t?h=>d(El(n[0],n[i-1],h)):d}function e$(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=qp(0,e,r);n.push(cn(t,1,s))}}function t$(n){const e=[0];return e$(e,n.length-1),e}function n$(n,e){return n.map(t=>t*e)}function r$(n,e){return n.map(()=>e||p1).splice(0,n.length-1)}function Bv({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=FB(r)?r.map(qS):qS(r),i={done:!1,value:e[0]},a=n$(t&&t.length===e.length?t:t$(e),n),l=R1(a,e,{ease:Array.isArray(s)?s:r$(e,s)});return{calculatedDuration:n,next:d=>(i.value=l(d),i.done=d>=n,i)}}function M1(n,e){return e?n*(1e3/e):0}const s$=5;function I1(n,e,t){const r=Math.max(e-s$,0);return M1(t-n(r),e-r)}const cw=.001,i$=.01,o$=10,a$=.05,l$=1;function c$({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,i,a=1-e;a=El(a$,l$,a),n=El(i$,o$,ya(n)),a<1?(s=h=>{const f=h*a,g=f*n,v=f-t,_=Jw(h,a),S=Math.exp(-g);return cw-v/_*S},i=h=>{const g=h*a*n,v=g*t+t,_=Math.pow(a,2)*Math.pow(h,2)*n,S=Math.exp(-g),x=Jw(Math.pow(h,2),a);return(-s(h)+cw>0?-1:1)*((v-_)*S)/x}):(s=h=>{const f=Math.exp(-h*n),g=(h-t)*n+1;return-cw+f*g},i=h=>{const f=Math.exp(-h*n),g=(t-h)*(n*n);return f*g});const l=5/n,d=d$(s,i,l);if(n=tu(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const u$=12;function d$(n,e,t){let r=t;for(let s=1;s<u$;s++)r=r-n(r)/e(r);return r}function Jw(n,e){return n*Math.sqrt(1-e*e)}const h$=["duration","bounce"],f$=["stiffness","damping","mass"];function YS(n,e){return e.some(t=>n[t]!==void 0)}function p$(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!YS(n,f$)&&YS(n,h$)){const t=c$(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function D1({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],i=n[n.length-1],a={done:!1,value:s},{stiffness:l,damping:d,mass:h,duration:f,velocity:g,isResolvedFromDuration:v}=p$({...r,velocity:-ya(r.velocity||0)}),_=g||0,S=d/(2*Math.sqrt(l*h)),x=i-s,E=ya(Math.sqrt(l/h)),P=Math.abs(x)<5;t||(t=P?.01:2),e||(e=P?.005:.5);let M;if(S<1){const R=Jw(E,S);M=I=>{const O=Math.exp(-S*E*I);return i-O*((_+S*E*x)/R*Math.sin(R*I)+x*Math.cos(R*I))}}else if(S===1)M=R=>i-Math.exp(-E*R)*(x+(_+E*x)*R);else{const R=E*Math.sqrt(S*S-1);M=I=>{const O=Math.exp(-S*E*I),F=Math.min(R*I,300);return i-O*((_+S*E*x)*Math.sinh(F)+R*x*Math.cosh(F))/R}}return{calculatedDuration:v&&f||null,next:R=>{const I=M(R);if(v)a.done=R>=f;else{let O=_;R!==0&&(S<1?O=I1(M,R,I):O=0);const F=Math.abs(O)<=t,$=Math.abs(i-I)<=e;a.done=F&&$}return a.value=a.done?i:I,a}}}function XS({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:d,restDelta:h=.5,restSpeed:f}){const g=n[0],v={done:!1,value:g},_=W=>l!==void 0&&W<l||d!==void 0&&W>d,S=W=>l===void 0?d:d===void 0||Math.abs(l-W)<Math.abs(d-W)?l:d;let x=t*e;const E=g+x,P=a===void 0?E:a(E);P!==E&&(x=P-g);const M=W=>-x*Math.exp(-W/r),R=W=>P+M(W),I=W=>{const K=M(W),ce=R(W);v.done=Math.abs(K)<=h,v.value=v.done?P:ce};let O,F;const $=W=>{_(v.value)&&(O=W,F=D1({keyframes:[v.value,S(v.value)],velocity:I1(R,W,v.value),damping:s,stiffness:i,restDelta:h,restSpeed:f}))};return $(0),{calculatedDuration:null,next:W=>{let K=!1;return!F&&O===void 0&&(K=!0,I(W),$(W)),O!==void 0&&W>O?F.next(W-O):(!K&&I(W),v)}}}const m$=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Yt.update(e,!0),stop:()=>_a(e),now:()=>xr.isProcessing?xr.timestamp:performance.now()}},QS=2e4;function JS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<QS;)e+=t,r=n.next(e);return e>=QS?1/0:e}const g$={decay:XS,inertia:XS,tween:Bv,keyframes:Bv,spring:D1};function $v({autoplay:n=!0,delay:e=0,driver:t=m$,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:g,...v}){let _=1,S=!1,x,E;const P=()=>{E=new Promise(B=>{x=B})};P();let M;const R=g$[s]||Bv;let I;R!==Bv&&typeof r[0]!="number"&&(I=R1([0,100],r,{clamp:!1}),r=[0,100]);const O=R({...v,keyframes:r});let F;l==="mirror"&&(F=R({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let $="idle",W=null,K=null,ce=null;O.calculatedDuration===null&&i&&(O.calculatedDuration=JS(O));const{calculatedDuration:pe}=O;let ue=1/0,fe=1/0;pe!==null&&(ue=pe+a,fe=ue*(i+1)-a);let ne=0;const H=B=>{if(K===null)return;_>0&&(K=Math.min(K,B)),_<0&&(K=Math.min(B-fe/_,K)),W!==null?ne=W:ne=Math.round(B-K)*_;const X=ne-e*(_>=0?1:-1),ae=_>=0?X<0:X>fe;ne=Math.max(X,0),$==="finished"&&W===null&&(ne=fe);let ye=ne,Me=O;if(i){const He=Math.min(ne,fe)/ue;let Ye=Math.floor(He),it=He%1;!it&&He>=1&&(it=1),it===1&&Ye--,Ye=Math.min(Ye,i+1),!!(Ye%2)&&(l==="reverse"?(it=1-it,a&&(it-=a/ue)):l==="mirror"&&(Me=F)),ye=El(0,1,it)*ue}const Pe=ae?{done:!1,value:r[0]}:Me.next(ye);I&&(Pe.value=I(Pe.value));let{done:ve}=Pe;!ae&&pe!==null&&(ve=_>=0?ne>=fe:ne<=0);const Ne=W===null&&($==="finished"||$==="running"&&ve);return g&&g(Pe.value),Ne&&z(),Pe},q=()=>{M&&M.stop(),M=void 0},te=()=>{$="idle",q(),x(),P(),K=ce=null},z=()=>{$="finished",f&&f(),q(),x()},re=()=>{if(S)return;M||(M=t(H));const B=M.now();d&&d(),W!==null?K=B-W:(!K||$==="finished")&&(K=B),$==="finished"&&P(),ce=K,W=null,$="running",M.start()};n&&re();const Z={then(B,X){return E.then(B,X)},get time(){return ya(ne)},set time(B){B=tu(B),ne=B,W!==null||!M||_===0?W=B:K=M.now()-B/_},get duration(){const B=O.calculatedDuration===null?JS(O):O.calculatedDuration;return ya(B)},get speed(){return _},set speed(B){B===_||!M||(_=B,Z.time=ya(ne))},get state(){return $},play:re,pause:()=>{$="paused",W=ne},stop:()=>{S=!0,$!=="idle"&&($="idle",h&&h(),te())},cancel:()=>{ce!==null&&H(ce),te()},complete:()=>{$="finished"},sample:B=>(K=0,H(B))};return Z}function v$(n){let e;return()=>(e===void 0&&(e=n()),e)}const y$=v$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),w$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sv=10,b$=2e4,_$=(n,e)=>e.type==="spring"||n==="backgroundColor"||!u1(e.ease);function x$(n,e,{onUpdate:t,onComplete:r,...s}){if(!(y$()&&w$.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,d,h=!1;const f=()=>{d=new Promise(R=>{l=R})};f();let{keyframes:g,duration:v=300,ease:_,times:S}=s;if(_$(e,s)){const R=$v({...s,repeat:0,delay:0});let I={done:!1,value:g[0]};const O=[];let F=0;for(;!I.done&&F<b$;)I=R.sample(F),O.push(I.value),F+=sv;S=void 0,g=O,v=F-sv,_="linear"}const x=MB(n.owner.current,e,g,{...s,duration:v,ease:_,times:S}),E=()=>{h=!1,x.cancel()},P=()=>{h=!0,Yt.update(E),l(),f()};return x.onfinish=()=>{h||(n.set(IB(g,s)),r&&r(),P())},{then(R,I){return d.then(R,I)},attachTimeline(R){return x.timeline=R,x.onfinish=null,_n},get time(){return ya(x.currentTime||0)},set time(R){x.currentTime=tu(R)},get speed(){return x.playbackRate},set speed(R){x.playbackRate=R},get duration(){return ya(v)},play:()=>{a||(x.play(),_a(E))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:R}=x;if(R){const I=$v({...s,autoplay:!1});n.setWithVelocity(I.sample(R-sv).value,I.sample(R).value,sv)}P()},complete:()=>{h||x.finish()},cancel:P}}function S$({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_n,pause:_n,stop:_n,then:i=>(i(),Promise.resolve()),cancel:_n,complete:_n});return e?$v({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const A$={type:"spring",stiffness:500,damping:25,restSpeed:10},C$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),E$={type:"keyframes",duration:.8},k$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T$=(n,{keyframes:e})=>e.length>2?E$:uu.has(n)?n.startsWith("scale")?C$(e[1]):A$:k$,Zw=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(kl.test(e)||e==="0")&&!e.startsWith("url(")),P$=new Set(["brightness","contrast","saturate","opacity"]);function R$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(uy)||[];if(!r)return n;const s=t.replace(r,"");let i=P$.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const M$=/([a-z-]*)\(.*?\)/g,eb={...kl,getAnimatableNone:n=>{const e=n.match(M$);return e?e.map(R$).join(" "):n}},I$={...GE,color:Nr,backgroundColor:Nr,outlineColor:Nr,fill:Nr,stroke:Nr,borderColor:Nr,borderTopColor:Nr,borderRightColor:Nr,borderBottomColor:Nr,borderLeftColor:Nr,filter:eb,WebkitFilter:eb},d_=n=>I$[n];function N1(n,e){let t=d_(n);return t!==eb&&(t=kl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const O1=n=>/^0[^.\s]+$/.test(n);function D$(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||O1(n)}function N$(n,e,t,r){const s=Zw(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const a=r.from!==void 0?r.from:n.get();let l;const d=[];for(let h=0;h<i.length;h++)i[h]===null&&(i[h]=h===0?a:i[h-1]),D$(i[h])&&d.push(h),typeof i[h]=="string"&&i[h]!=="none"&&i[h]!=="0"&&(l=i[h]);if(s&&d.length&&l)for(let h=0;h<d.length;h++){const f=d[h];i[f]=N1(e,l)}return i}function O$({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}function h_(n,e){return n[e]||n.default||n}const L$={skipAnimations:!1},f_=(n,e,t,r={})=>s=>{const i=h_(r,n)||{},a=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-tu(a);const d=N$(e,n,t,i),h=d[0],f=d[d.length-1],g=Zw(n,h),v=Zw(n,f);let _={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:S=>{e.set(S),i.onUpdate&&i.onUpdate(S)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(O$(i)||(_={..._,...T$(n,_)}),_.duration&&(_.duration=tu(_.duration)),_.repeatDelay&&(_.repeatDelay=tu(_.repeatDelay)),!g||!v||RB.current||i.type===!1||L$.skipAnimations)return S$(_);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const S=x$(e,n,_);if(S)return S}return $v(_)};function Uv(n){return!!(us(n)&&n.add)}const L1=n=>/^\-?\d*\.?\d+$/.test(n);function p_(n,e){n.indexOf(e)===-1&&n.push(e)}function m_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class g_{constructor(){this.subscriptions=[]}add(e){return p_(this.subscriptions,e),()=>m_(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const j$=n=>!isNaN(parseFloat(n));class F${constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:a}=xr;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Yt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Yt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=j$(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new g_);const r=this.events[e].add(t);return e==="change"?()=>{r(),Yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?M1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _h(n,e){return new F$(n,e)}const j1=n=>e=>e.test(n),B$={test:n=>n==="auto",parse:n=>n},F1=[du,Ze,wo,gl,qF,WF,B$],fp=n=>F1.find(j1(n)),$$=[...F1,Nr,kl],U$=n=>$$.find(j1(n));function z$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,_h(t))}function V$(n,e){const t=hy(n,e);let{transitionEnd:r={},transition:s={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...r};for(const a in i){const l=oB(i[a]);z$(n,a,l)}}function H$(n,e,t){var r,s;const i=Object.keys(e).filter(l=>!n.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const d=i[l],h=e[d];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(s=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&s!==void 0?s:e[d]),f!=null&&(typeof f=="string"&&(L1(f)||O1(f))?f=parseFloat(f):!U$(f)&&kl.test(h)&&(f=N1(d,h)),n.addValue(d,_h(f,{owner:n})),t[d]===void 0&&(t[d]=f),f!==null&&n.setBaseTarget(d,f))}}function W$(n,e){return e?(e[n]||e.default||e).from:void 0}function q$(n,e,t){const r={};for(const s in n){const i=W$(s,e);if(i!==void 0)r[s]=i;else{const a=t.getValue(s);a&&(r[s]=a.get())}}return r}function G$({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function K$(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function B1(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:a,...l}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(i=r);const h=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in l){const v=n.getValue(g),_=l[g];if(!v||_===void 0||f&&G$(f,g))continue;const S={delay:t,elapsed:0,...h_(i||{},g)};if(window.HandoffAppearAnimations){const P=n.getProps()[$E];if(P){const M=window.HandoffAppearAnimations(P,g,v,Yt);M!==null&&(S.elapsed=M,S.isHandoff=!0)}}let x=!S.isHandoff&&!K$(v,_);if(S.type==="spring"&&(v.getVelocity()||S.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(f_(g,v,_,n.shouldReduceMotion&&uu.has(g)?{type:!1}:S));const E=v.animation;Uv(d)&&(d.add(g),E.then(()=>d.remove(g))),h.push(E)}return a&&Promise.all(h).then(()=>{a&&V$(n,a)}),h}function tb(n,e,t={}){const r=hy(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const i=r?()=>Promise.all(B1(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=s;return Y$(n,e,h+d,f,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,h]=l==="beforeChildren"?[i,a]:[a,i];return d().then(()=>h())}else return Promise.all([i(),a(t.delay)])}function Y$(n,e,t=0,r=0,s=1,i){const a=[],l=(n.variantChildren.size-1)*r,d=s===1?(h=0)=>h*r:(h=0)=>l-h*r;return Array.from(n.variantChildren).sort(X$).forEach((h,f)=>{h.notify("AnimationStart",e),a.push(tb(h,e,{...i,delay:t+d(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function X$(n,e){return n.sortNodePosition(e)}function Q$(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>tb(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=tb(n,e,t);else{const s=typeof e=="function"?hy(n,e,t.custom):e;r=Promise.all(B1(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const J$=[...Qb].reverse(),Z$=Qb.length;function e3(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Q$(n,t,r)))}function t3(n){let e=e3(n);const t=r3();let r=!0;const s=(d,h)=>{const f=hy(n,h);if(f){const{transition:g,transitionEnd:v,..._}=f;d={...d,..._,...v}}return d};function i(d){e=d(n)}function a(d,h){const f=n.getProps(),g=n.getVariantContext(!0)||{},v=[],_=new Set;let S={},x=1/0;for(let P=0;P<Z$;P++){const M=J$[P],R=t[M],I=f[M]!==void 0?f[M]:g[M],O=Hp(I),F=M===h?R.isActive:null;F===!1&&(x=P);let $=I===g[M]&&I!==f[M]&&O;if($&&r&&n.manuallyAnimateOnMount&&($=!1),R.protectedKeys={...S},!R.isActive&&F===null||!I&&!R.prevProp||ly(I)||typeof I=="boolean")continue;let K=n3(R.prevProp,I)||M===h&&R.isActive&&!$&&O||P>x&&O,ce=!1;const pe=Array.isArray(I)?I:[I];let ue=pe.reduce(s,{});F===!1&&(ue={});const{prevResolvedValues:fe={}}=R,ne={...fe,...ue},H=q=>{K=!0,_.has(q)&&(ce=!0,_.delete(q)),R.needsAnimating[q]=!0};for(const q in ne){const te=ue[q],z=fe[q];if(S.hasOwnProperty(q))continue;let re=!1;jv(te)&&jv(z)?re=!l1(te,z):re=te!==z,re?te!==void 0?H(q):_.add(q):te!==void 0&&_.has(q)?H(q):R.protectedKeys[q]=!0}R.prevProp=I,R.prevResolvedValues=ue,R.isActive&&(S={...S,...ue}),r&&n.blockInitialAnimation&&(K=!1),K&&(!$||ce)&&v.push(...pe.map(q=>({animation:q,options:{type:M,...d}})))}if(_.size){const P={};_.forEach(M=>{const R=n.getBaseTarget(M);R!==void 0&&(P[M]=R)}),v.push({animation:P})}let E=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(v):Promise.resolve()}function l(d,h,f){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(_=>{var S;return(S=_.animationState)===null||S===void 0?void 0:S.setActive(d,h)}),t[d].isActive=h;const v=a(f,d);for(const _ in t)t[_].protectedKeys={};return v}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>t}}function n3(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!l1(e,n):!1}function Uc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r3(){return{animate:Uc(!0),whileInView:Uc(),whileHover:Uc(),whileTap:Uc(),whileDrag:Uc(),whileFocus:Uc(),exit:Uc()}}class s3 extends Dl{constructor(e){super(e),e.animationState||(e.animationState=t3(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ly(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let i3=0;class o3 extends Dl{constructor(){super(...arguments),this.id=i3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const a3={animation:{Feature:s3},exit:{Feature:o3}},ZS=(n,e)=>Math.abs(n-e);function l3(n,e){const t=ZS(n.x,e.x),r=ZS(n.y,e.y);return Math.sqrt(t**2+r**2)}class $1{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=dw(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,_=l3(g.offset,{x:0,y:0})>=3;if(!v&&!_)return;const{point:S}=g,{timestamp:x}=xr;this.history.push({...S,timestamp:x});const{onStart:E,onMove:P}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=uw(v,this.transformPagePoint),Yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:_,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=dw(g.type==="pointercancel"?this.lastMoveEventInfo:uw(v,this.transformPagePoint),this.history);this.startEvent&&_&&_(g,E),S&&S(g,E)},!r1(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const a=dy(e),l=uw(a,this.transformPagePoint),{point:d}=l,{timestamp:h}=xr;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,dw(l,this.history)),this.removeListeners=Sl(va(this.contextWindow,"pointermove",this.handlePointerMove),va(this.contextWindow,"pointerup",this.handlePointerUp),va(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function uw(n,e){return e?{point:e(n.point)}:n}function eA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function dw({point:n},e){return{point:n,delta:eA(n,U1(e)),offset:eA(n,c3(e)),velocity:u3(e,.1)}}function c3(n){return n[0]}function U1(n){return n[n.length-1]}function u3(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=U1(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>tu(e)));)t--;if(!r)return{x:0,y:0};const i=ya(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ms(n){return n.max-n.min}function nb(n,e=0,t=.01){return Math.abs(n-e)<=t}function tA(n,e,t,r=.5){n.origin=r,n.originPoint=cn(e.min,e.max,n.origin),n.scale=Ms(t)/Ms(e),(nb(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=cn(t.min,t.max,n.origin)-n.originPoint,(nb(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Dp(n,e,t,r){tA(n.x,e.x,t.x,r?r.originX:void 0),tA(n.y,e.y,t.y,r?r.originY:void 0)}function nA(n,e,t){n.min=t.min+e.min,n.max=n.min+Ms(e)}function d3(n,e,t){nA(n.x,e.x,t.x),nA(n.y,e.y,t.y)}function rA(n,e,t){n.min=e.min-t.min,n.max=n.min+Ms(e)}function Np(n,e,t){rA(n.x,e.x,t.x),rA(n.y,e.y,t.y)}function h3(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cn(t,n,r.max):Math.min(n,t)),n}function sA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function f3(n,{top:e,left:t,bottom:r,right:s}){return{x:sA(n.x,t,s),y:sA(n.y,e,r)}}function iA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function p3(n,e){return{x:iA(n.x,e.x),y:iA(n.y,e.y)}}function m3(n,e){let t=.5;const r=Ms(n),s=Ms(e);return s>r?t=qp(e.min,e.max-r,n.min):r>s&&(t=qp(n.min,n.max-s,e.min)),El(0,1,t)}function g3(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const rb=.35;function v3(n=rb){return n===!1?n=0:n===!0&&(n=rb),{x:oA(n,"left","right"),y:oA(n,"top","bottom")}}function oA(n,e,t){return{min:aA(n,e),max:aA(n,t)}}function aA(n,e){return typeof n=="number"?n:n[e]||0}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),uh=()=>({x:lA(),y:lA()}),cA=()=>({min:0,max:0}),Pn=()=>({x:cA(),y:cA()});function Js(n){return[n("x"),n("y")]}function z1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function y3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function w3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function hw(n){return n===void 0||n===1}function sb({scale:n,scaleX:e,scaleY:t}){return!hw(n)||!hw(e)||!hw(t)}function Hc(n){return sb(n)||V1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function V1(n){return uA(n.x)||uA(n.y)}function uA(n){return n&&n!=="0%"}function zv(n,e,t){const r=n-t,s=e*r;return t+s}function dA(n,e,t,r,s){return s!==void 0&&(n=zv(n,s,r)),zv(n,t,r)+e}function ib(n,e=0,t=1,r,s){n.min=dA(n.min,e,t,r,s),n.max=dA(n.max,e,t,r,s)}function H1(n,{x:e,y:t}){ib(n.x,e.translate,e.scale,e.originPoint),ib(n.y,t.translate,t.scale,t.originPoint)}function b3(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,a;for(let l=0;l<s;l++){i=t[l],a=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&dh(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,H1(n,a)),r&&Hc(i.latestValues)&&dh(n,i.latestValues))}e.x=hA(e.x),e.y=hA(e.y)}function hA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function yl(n,e){n.min=n.min+e,n.max=n.max+e}function fA(n,e,[t,r,s]){const i=e[s]!==void 0?e[s]:.5,a=cn(n.min,n.max,i);ib(n,e[t],e[r],a,e.scale)}const _3=["x","scaleX","originX"],x3=["y","scaleY","originY"];function dh(n,e){fA(n.x,e,_3),fA(n.y,e,x3)}function W1(n,e){return z1(w3(n.getBoundingClientRect(),e))}function S3(n,e,t){const r=W1(n,t),{scroll:s}=e;return s&&(yl(r.x,s.offset.x),yl(r.y,s.offset.y)),r}const q1=({current:n})=>n?n.ownerDocument.defaultView:null,A3=new WeakMap;class C3{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(dy(f,"page").point)},i=(f,g)=>{const{drag:v,dragPropagation:_,onDragStart:S}=this.getProps();if(v&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=i1(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Js(E=>{let P=this.getAxisMotionValue(E).get()||0;if(wo.test(P)){const{projection:M}=this.visualElement;if(M&&M.layout){const R=M.layout.layoutBox[E];R&&(P=Ms(R)*(parseFloat(P)/100))}}this.originPoint[E]=P}),S&&Yt.update(()=>S(f,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,g)=>{const{dragPropagation:v,dragDirectionLock:_,onDirectionLock:S,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:E}=g;if(_&&this.currentDirection===null){this.currentDirection=E3(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),x&&x(f,g)},l=(f,g)=>this.stop(f,g),d=()=>Js(f=>{var g;return this.getAnimationState(f)==="paused"&&((g=this.getAxisMotionValue(f).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $1(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:q1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Yt.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!iv(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=h3(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&lh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=f3(s.layoutBox,t):this.constraints=!1,this.elastic=v3(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Js(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=g3(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!lh(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=S3(r,s.root,this.visualElement.getTransformPagePoint());let a=p3(s.layout.layoutBox,i);if(t){const l=t(y3(a));this.hasMutatedConstraints=!!l,l&&(a=z1(l))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=Js(f=>{if(!iv(f,t,this.currentDirection))return;let g=d&&d[f]||{};a&&(g={min:0,max:0});const v=s?200:1e6,_=s?40:1e7,S={type:"inertia",velocity:r?e[f]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...i,...g};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(f_(e,r,0,t))}stopAnimation(){Js(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Js(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Js(t=>{const{drag:r}=this.getProps();if(!iv(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[t];i.set(e[t]-cn(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!lh(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Js(a=>{const l=this.getAxisMotionValue(a);if(l){const d=l.get();s[a]=m3({min:d,max:d},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Js(a=>{if(!iv(a,e,null))return;const l=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];l.set(cn(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;A3.set(this.visualElement,this);const e=this.visualElement.current,t=va(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();lh(d)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const a=ga(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Js(f=>{const g=this.getAxisMotionValue(f);g&&(this.originPoint[f]+=d[f].translate,g.set(g.get()+d[f].translate))}),this.visualElement.render())});return()=>{a(),t(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=rb,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function iv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function E3(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class k3 extends Dl{constructor(e){super(e),this.removeGroupControls=_n,this.removeListeners=_n,this.controls=new C3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_n}unmount(){this.removeGroupControls(),this.removeListeners()}}const pA=n=>(e,t)=>{n&&Yt.update(()=>n(e,t))};class T3 extends Dl{constructor(){super(...arguments),this.removePointerDownListener=_n}onPointerDown(e){this.session=new $1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:q1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:pA(e),onStart:pA(t),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Yt.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=va(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P3(){const n=A.useContext(oy);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=A.useId();return A.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const Av={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const pp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ze.test(n))n=parseFloat(n);else return n;const t=mA(n,e.target.x),r=mA(n,e.target.y);return`${t}% ${r}%`}},R3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=kl.parse(n);if(s.length>5)return r;const i=kl.createTransformer(n),a=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;s[0+a]/=l,s[1+a]/=d;const h=cn(l,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),i(s)}};class M3 extends ot.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;FF(I3),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Av.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Yt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G1(n){const[e,t]=P3(),r=A.useContext(Zb);return ot.createElement(M3,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(zE),isPresent:e,safeToRemove:t})}const I3={borderRadius:{...pp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pp,borderTopRightRadius:pp,borderBottomLeftRadius:pp,borderBottomRightRadius:pp,boxShadow:R3},K1=["TopLeft","TopRight","BottomLeft","BottomRight"],D3=K1.length,gA=n=>typeof n=="string"?parseFloat(n):n,vA=n=>typeof n=="number"||Ze.test(n);function N3(n,e,t,r,s,i){s?(n.opacity=cn(0,t.opacity!==void 0?t.opacity:1,O3(r)),n.opacityExit=cn(e.opacity!==void 0?e.opacity:1,0,L3(r))):i&&(n.opacity=cn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<D3;a++){const l=`border${K1[a]}Radius`;let d=yA(e,l),h=yA(t,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||vA(d)===vA(h)?(n[l]=Math.max(cn(gA(d),gA(h),r),0),(wo.test(h)||wo.test(d))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=cn(e.rotate||0,t.rotate||0,r))}function yA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const O3=Y1(0,.5,v1),L3=Y1(.5,.95,_n);function Y1(n,e,t){return r=>r<n?0:r>e?1:t(qp(n,e,r))}function wA(n,e){n.min=e.min,n.max=e.max}function Xs(n,e){wA(n.x,e.x),wA(n.y,e.y)}function bA(n,e,t,r,s){return n-=e,n=zv(n,1/t,r),s!==void 0&&(n=zv(n,1/s,r)),n}function j3(n,e=0,t=1,r=.5,s,i=n,a=n){if(wo.test(e)&&(e=parseFloat(e),e=cn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=cn(i.min,i.max,r);n===i&&(l-=e),n.min=bA(n.min,e,t,l,s),n.max=bA(n.max,e,t,l,s)}function _A(n,e,[t,r,s],i,a){j3(n,e[t],e[r],e[s],e.scale,i,a)}const F3=["x","scaleX","originX"],B3=["y","scaleY","originY"];function xA(n,e,t,r){_A(n.x,e,F3,t?t.x:void 0,r?r.x:void 0),_A(n.y,e,B3,t?t.y:void 0,r?r.y:void 0)}function SA(n){return n.translate===0&&n.scale===1}function X1(n){return SA(n.x)&&SA(n.y)}function $3(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Q1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function AA(n){return Ms(n.x)/Ms(n.y)}class U3{constructor(){this.members=[]}add(e){p_(this.members,e),e.scheduleRender()}remove(e){if(m_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CA(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:f}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const z3=(n,e)=>n.depth-e.depth;class V3{constructor(){this.children=[],this.isDirty=!1}add(e){p_(this.children,e),this.isDirty=!0}remove(e){m_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(z3),this.isDirty=!1,this.children.forEach(e)}}function H3(n,e){const t=performance.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&(_a(r),n(i-e))};return Yt.read(r,!0),()=>_a(r)}function W3(n){window.MotionDebug&&window.MotionDebug.record(n)}function q3(n){return n instanceof SVGElement&&n.tagName!=="svg"}function G3(n,e,t){const r=us(n)?n:_h(n);return r.start(f_("",r,e,t)),r.animation}const EA=["","X","Y","Z"],K3={visibility:"hidden"},kA=1e3;let Y3=0;const Wc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function J1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e?.()){this.id=Y3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Wc.totalNodes=Wc.resolvedTargetDeltas=Wc.recalculatedProjection=0,this.nodes.forEach(J3),this.nodes.forEach(rU),this.nodes.forEach(sU),this.nodes.forEach(Z3),W3(Wc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new V3)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new g_),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const d=this.eventHandlers.get(a);d&&d.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=q3(a),this.instance=a;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=H3(v,250),Av.hasAnimatedSinceResize&&(Av.hasAnimatedSinceResize=!1,this.nodes.forEach(PA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||cU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=f.getProps(),M=!this.targetLayout||!Q1(this.targetLayout,S)||_,R=!v&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,R);const I={...h_(x,"layout"),onPlay:E,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else v||PA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iU),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const g=this.path[f];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TA);return}this.isUpdating||this.nodes.forEach(tU),this.isUpdating=!1,this.nodes.forEach(nU),this.nodes.forEach(X3),this.nodes.forEach(Q3),this.clearAllSnapshots();const l=performance.now();xr.delta=El(0,1e3/60,l-xr.timestamp),xr.timestamp=l,xr.isProcessing=!0,nw.update.process(xr),nw.preRender.process(xr),nw.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(eU),this.sharedNodes.forEach(oU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!X1(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(l||Hc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return a&&(d=this.removeTransform(d)),uU(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Pn();const l=a.measureViewportBox(),{scroll:d}=this.root;return d&&(yl(l.x,d.offset.x),yl(l.y,d.offset.y)),l}removeElementScroll(a){const l=Pn();Xs(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:g}=h;if(h!==this.root&&f&&g.layoutScroll){if(f.isRoot){Xs(l,a);const{scroll:v}=this.root;v&&(yl(l.x,-v.offset.x),yl(l.y,-v.offset.y))}yl(l.x,f.offset.x),yl(l.y,f.offset.y)}}return l}applyTransform(a,l=!1){const d=Pn();Xs(d,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&dh(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Hc(f.latestValues)&&dh(d,f.latestValues)}return Hc(this.latestValues)&&dh(d,this.latestValues),d}removeTransform(a){const l=Pn();Xs(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Hc(h.latestValues))continue;sb(h.latestValues)&&h.updateSnapshot();const f=Pn(),g=h.measurePageBox();Xs(f,g),xA(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Hc(this.latestValues)&&xA(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pn(),this.relativeTargetOrigin=Pn(),Np(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pn(),this.targetWithTransforms=Pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),d3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xs(this.target,this.layout.layoutBox),H1(this.target,this.targetDelta)):Xs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pn(),this.relativeTargetOrigin=Pn(),Np(this.relativeTargetOrigin,this.target,_.target),Xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Wc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sb(this.parent.latestValues)||V1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Xs(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;b3(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:S}=l;if(!S){this.projectionTransform&&(this.projectionDelta=uh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=uh(),this.projectionDeltaWithTransform=uh());const x=this.projectionTransform;Dp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.projectionTransform=CA(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==_)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Wc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},g=uh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Pn(),_=d?d.source:void 0,S=this.layout?this.layout.source:void 0,x=_!==S,E=this.getStack(),P=!E||E.members.length<=1,M=!!(x&&!P&&this.options.crossfade===!0&&!this.path.some(lU));this.animationProgress=0;let R;this.mixTargetDelta=I=>{const O=I/1e3;RA(g.x,a.x,O),RA(g.y,a.y,O),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Np(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aU(this.relativeTarget,this.relativeTargetOrigin,v,O),R&&$3(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Pn()),Xs(R,this.relativeTarget)),x&&(this.animationValues=f,N3(f,h,this.latestValues,O,M,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yt.update(()=>{Av.hasAnimatedSinceResize=!0,this.currentAnimation=G3(0,kA,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=a;if(!(!l||!d||!h)){if(this!==a&&this.layout&&h&&Z1(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Pn();const g=Ms(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=Ms(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Xs(l,d),dh(l,f),Dp(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new U3),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const h={};for(let f=0;f<EA.length;f++){const g="rotate"+EA[f];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const f in h)a.setStaticValue(f,h[f]);a.scheduleRender()}getProjectionStyles(a){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return K3;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Sv(a?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Sv(a?.pointerEvents)||""),this.hasProjected&&!Hc(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=CA(this.projectionDeltaWithTransform,this.treeScale,v),f&&(h.transform=f(v,h.transform));const{x:_,y:S}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Ov){if(v[x]===void 0)continue;const{correct:E,applyTo:P}=Ov[x],M=h.transform==="none"?v[x]:E(v[x],g);if(P){const R=P.length;for(let I=0;I<R;I++)h[P[I]]=M}else h[x]=M}return this.options.layoutId&&(h.pointerEvents=g===this?Sv(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(TA),this.root.sharedNodes.clear()}}}function X3(n){n.updateLayout()}function Q3(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,a=t.source!==n.layout.source;i==="size"?Js(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],_=Ms(v);v.min=r[g].min,v.max=v.min+_}):Z1(i,t.layoutBox,r)&&Js(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],_=Ms(r[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=uh();Dp(l,r,t.layoutBox);const d=uh();a?Dp(d,n.applyTransform(s,!0),t.measuredBox):Dp(d,r,t.layoutBox);const h=!X1(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Pn();Np(S,t.layoutBox,v.layoutBox);const x=Pn();Np(x,r,_.layoutBox),Q1(S,x)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function J3(n){Wc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Z3(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function eU(n){n.clearSnapshot()}function TA(n){n.clearMeasurements()}function tU(n){n.isLayoutDirty=!1}function nU(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function PA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function rU(n){n.resolveTargetDelta()}function sU(n){n.calcProjection()}function iU(n){n.resetRotation()}function oU(n){n.removeLeadSnapshot()}function RA(n,e,t){n.translate=cn(e.translate,0,t),n.scale=cn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function MA(n,e,t,r){n.min=cn(e.min,t.min,r),n.max=cn(e.max,t.max,r)}function aU(n,e,t,r){MA(n.x,e.x,t.x,r),MA(n.y,e.y,t.y,r)}function lU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const cU={duration:.45,ease:[.4,0,.1,1]},IA=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),DA=IA("applewebkit/")&&!IA("chrome/")?Math.round:_n;function NA(n){n.min=DA(n.min),n.max=DA(n.max)}function uU(n){NA(n.x),NA(n.y)}function Z1(n,e,t){return n==="position"||n==="preserve-aspect"&&!nb(AA(e),AA(t),.2)}const dU=J1({attachResizeListener:(n,e)=>ga(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fw={current:void 0},ek=J1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fw.current){const n=new dU({});n.mount(window),n.setOptions({layoutScroll:!0}),fw.current=n}return fw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),hU={pan:{Feature:T3},drag:{Feature:k3,ProjectionNode:ek,MeasureLayout:G1}},fU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function pU(n){const e=fU.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function ob(n,e,t=1){const[r,s]=pU(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return L1(a)?parseFloat(a):a}else return Yw(s)?ob(s,e,t+1):s}function mU(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const i=s.get();if(!Yw(i))return;const a=ob(i,r);a&&s.set(a)});for(const s in e){const i=e[s];if(!Yw(i))continue;const a=ob(i,r);a&&(e[s]=a,t||(t={}),t[s]===void 0&&(t[s]=i))}return{target:e,transitionEnd:t}}const gU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tk=n=>gU.has(n),vU=n=>Object.keys(n).some(tk),OA=n=>n===du||n===Ze,LA=(n,e)=>parseFloat(n.split(", ")[e]),jA=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return LA(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?LA(i[1],n):0}},yU=new Set(["x","y","z"]),wU=cm.filter(n=>!yU.has(n));function bU(n){const e=[];return wU.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const xh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:jA(4,13),y:jA(5,14)};xh.translateX=xh.x;xh.translateY=xh.y;const _U=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{l[h]=xh[h](r,i)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(l[h]),n[h]=xh[h](d,i)}),n},xU=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(tk);let i=[],a=!1;const l=[];if(s.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let f=t[d],g=fp(f);const v=e[d];let _;if(jv(v)){const S=v.length,x=v[0]===null?1:0;f=v[x],g=fp(f);for(let E=x;E<S&&v[E]!==null;E++)_?a_(fp(v[E])===_):_=fp(v[E])}else _=fp(v);if(g!==_)if(OA(g)&&OA(_)){const S=h.get();typeof S=="string"&&h.set(parseFloat(S)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&_===Ze&&(e[d]=v.map(parseFloat))}else g?.transform&&_?.transform&&(f===0||v===0)?f===0?h.set(_.transform(f)):e[d]=g.transform(v):(a||(i=bU(n),a=!0),l.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,h=_U(e,n,l);return i.length&&i.forEach(([f,g])=>{n.getValue(f).set(g)}),n.render(),ay&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function SU(n,e,t,r){return vU(e)?xU(n,e,t,r):{target:e,transitionEnd:r}}const AU=(n,e,t,r)=>{const s=mU(n,e,r);return e=s.target,r=s.transitionEnd,SU(n,e,t,r)},ab={current:null},nk={current:!1};function CU(){if(nk.current=!0,!!ay)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ab.current=n.matches;n.addListener(e),e()}else ab.current=!1}function EU(n,e,t){const{willChange:r}=e;for(const s in e){const i=e[s],a=t[s];if(us(i))n.addValue(s,i),Uv(r)&&r.add(s);else if(us(a))n.addValue(s,_h(i,{owner:n})),Uv(r)&&r.remove(s);else if(a!==i)if(n.hasValue(s)){const l=n.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=n.getStaticValue(s);n.addValue(s,_h(l!==void 0?l:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const FA=new WeakMap,rk=Object.keys(Wp),kU=rk.length,BA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],TU=Jb.length;class PU{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Yt.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=cy(t),this.isVariantNode=UE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const g in f){const v=f[g];l[g]!==void 0&&us(v)&&(v.set(l[g],!1),Uv(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,FA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),nk.current||CU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ab.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FA.delete(this.current),this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=uu.has(e),s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Yt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,i){let a,l;for(let d=0;d<kU;d++){const h=rk[d],{isEnabled:f,Feature:g,ProjectionNode:v,MeasureLayout:_}=Wp[h];v&&(a=v),f(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),_&&(l=_))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:f,dragConstraints:g,layoutScroll:v,layoutRoot:_}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!f||g&&lh(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:i,layoutScroll:v,layoutRoot:_})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<BA.length;r++){const s=BA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=EU(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<TU;r++){const s=Jb[r],i=this.props[s];(Hp(i)||i===!1)&&(t[s]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=_h(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=o_(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!us(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new g_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class sk extends PU{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},i){let a=q$(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),a&&(a=s(a))),i){H$(this,r,a);const l=AU(this,r,a,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function RU(n){return window.getComputedStyle(n)}class MU extends sk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(uu.has(t)){const r=d_(t);return r&&r.default||0}else{const r=RU(e),s=(WE(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return W1(e,t)}build(e,t,r,s){t_(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return i_(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;us(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){QE(e,t,r,s)}}class IU extends sk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(uu.has(t)){const r=d_(t);return r&&r.default||0}return t=JE.has(t)?t:Xb(t),e.getAttribute(t)}measureInstanceViewportBox(){return Pn()}scrapeMotionValuesFromProps(e,t){return e1(e,t)}build(e,t,r,s){r_(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){ZE(e,t,r,s)}mount(e){this.isSVGTag=s_(e.tagName),super.mount(e)}}const DU=(n,e)=>e_(n)?new IU(e,{enableHardwareAcceleration:!1}):new MU(e,{enableHardwareAcceleration:!0}),NU={layout:{ProjectionNode:ek,MeasureLayout:G1}},OU={...a3,...kB,...hU,...NU},Zn=LF((n,e)=>pB(n,e,OU,DU));function ik(){const n=A.useRef(!1);return Yb(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function LU(){const n=ik(),[e,t]=A.useState(0),r=A.useCallback(()=>{n.current&&t(e+1)},[e]);return[A.useCallback(()=>Yt.postRender(r),[r]),e]}class jU extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FU({children:n,isPresent:e}){const t=A.useId(),r=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:d}=s.current;if(e||!r.current||!i||!a)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),A.createElement(jU,{isPresent:e,childRef:r,sizeRef:s},A.cloneElement(n,{ref:r}))}const pw=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=t1(BU),d=A.useId(),h=A.useMemo(()=>({id:d,initial:e,isPresent:t,custom:s,onExitComplete:f=>{l.set(f,!0);for(const g of l.values())if(!g)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),i?void 0:[t]);return A.useMemo(()=>{l.forEach((f,g)=>l.set(g,!1))},[t]),A.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),a==="popLayout"&&(n=A.createElement(FU,{isPresent:t},n)),A.createElement(oy.Provider,{value:h},n)};function BU(){return new Map}function $U(n){return A.useEffect(()=>()=>n(),[])}const qc=n=>n.key||"";function UU(n,e){n.forEach(t=>{const r=qc(t);e.set(r,t)})}function zU(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const ji=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=A.useContext(Zb).forceRender||LU()[0],d=ik(),h=zU(n);let f=h;const g=A.useRef(new Map).current,v=A.useRef(f),_=A.useRef(new Map).current,S=A.useRef(!0);if(Yb(()=>{S.current=!1,UU(h,_),v.current=f}),$U(()=>{S.current=!0,_.clear(),g.clear()}),S.current)return A.createElement(A.Fragment,null,f.map(M=>A.createElement(pw,{key:qc(M),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:a},M)));f=[...f];const x=v.current.map(qc),E=h.map(qc),P=x.length;for(let M=0;M<P;M++){const R=x[M];E.indexOf(R)===-1&&!g.has(R)&&g.set(R,void 0)}return a==="wait"&&g.size&&(f=[]),g.forEach((M,R)=>{if(E.indexOf(R)!==-1)return;const I=_.get(R);if(!I)return;const O=x.indexOf(R);let F=M;if(!F){const $=()=>{g.delete(R);const W=Array.from(_.keys()).filter(K=>!E.includes(K));if(W.forEach(K=>_.delete(K)),v.current=h.filter(K=>{const ce=qc(K);return ce===R||W.includes(ce)}),!g.size){if(d.current===!1)return;l(),r&&r()}};F=A.createElement(pw,{key:qc(I),isPresent:!1,onExitComplete:$,custom:e,presenceAffectsLayout:i,mode:a},I),g.set(R,F)}f.splice(O,0,F)}),f=f.map(M=>{const R=M.key;return g.has(R)?M:A.createElement(pw,{key:qc(M),isPresent:!0,presenceAffectsLayout:i,mode:a},M)}),A.createElement(A.Fragment,null,g.size?f:f.map(M=>A.cloneElement(M)))},VU=({children:n})=>{const{user:e,loadingAuth:t,settings:r}=ds(),s=$i(),[i,a]=A.useState({loading:!0,enabled:!1,message:""});if(A.useEffect(()=>{t||(async()=>{if(!e){a({loading:!1,enabled:!1,message:""});return}try{const{data:h,error:f}=await Se.from("system_status").select("maintenance_mode_enabled, maintenance_message").eq("id",1).single();if(f){console.error("Erro ao verificar modo de manuteno:",f),a({loading:!1,enabled:!1,message:""});return}a({loading:!1,enabled:h.maintenance_mode_enabled,message:h.maintenance_message})}catch{a({loading:!1,enabled:!1,message:""})}})()},[t,e]),t||i.loading)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background dark:bg-background",children:y.jsx(Zn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-customPurple dark:border-customGreen border-t-transparent rounded-full"})});const l=r?.role==="ADMIN";return i.enabled&&!l?y.jsx(Up,{to:"/manutencao",state:{message:i.message},replace:!0}):e?n:y.jsx(Up,{to:"/login",state:{from:s},replace:!0})};var HU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const WU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tt=(n,e)=>{const t=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...d},h)=>A.createElement("svg",{ref:h,...HU,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${WU(n)}`,...d},[...e.map(([f,g])=>A.createElement(f,g)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t},qU=tt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),GU=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ok=tt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),ak=tt("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),Gp=tt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Op=tt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),lk=tt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),KU=tt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),YU=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),v_=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),XU=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),QU=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ck=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),JU=tt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uk=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Kp=tt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ZU=tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ez=tt("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),lb=tt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),y_=tt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),dk=tt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),tz=tt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),w_=tt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),nz=tt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Sh=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),rz=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),hk=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fk=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),sz=tt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),iz=tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),pk=tt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),b_=tt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Yp=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$A=tt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),oz=tt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),mk=tt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),az=tt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),lz=tt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),__=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),gk=tt("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]),cz=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vk=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),uz=tt("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),Xp=tt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),dz=tt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),hu=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function yk(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=yk(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function wk(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=yk(n))&&(r&&(r+=" "),r+=e);return r}function hz(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=bk(e))&&(r&&(r+=" "),r+=t);return r}function bk(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=bk(n[r]))&&(t&&(t+=" "),t+=e);return t}var x_="-";function fz(n){var e=mz(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(l){var d=l.split(x_);return d[0]===""&&d.length!==1&&d.shift(),_k(d,e)||pz(l)}function a(l,d){var h=t[l]||[];return d&&s[l]?[].concat(h,s[l]):h}return{getClassGroupId:i,getConflictingClassGroupIds:a}}function _k(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),s=r?_k(n.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=n.join(x_);return e.validators.find(function(a){var l=a.validator;return l(i)})?.classGroupId}}var UA=/^\[(.+)\]$/;function pz(n){if(UA.test(n)){var e=UA.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function mz(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},s=vz(Object.entries(n.classGroups),t);return s.forEach(function(i){var a=i[0],l=i[1];cb(l,r,a,e)}),r}function cb(n,e,t,r){n.forEach(function(s){if(typeof s=="string"){var i=s===""?e:zA(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(gz(s)){cb(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(function(a){var l=a[0],d=a[1];cb(d,zA(e,l),t,r)})})}function zA(n,e){var t=n;return e.split(x_).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function gz(n){return n.isThemeGetter}function vz(n,e){return e?n.map(function(t){var r=t[0],s=t[1],i=s.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var d=l[0],h=l[1];return[e+d,h]})):a});return[r,i]}):n}function yz(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function s(i,a){t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return s(a,l),l},set:function(a,l){t.has(a)?t.set(a,l):s(a,l)}}}var xk="!";function wz(n){var e=n.separator||":",t=e.length===1,r=e[0],s=e.length;return function(a){for(var l=[],d=0,h=0,f,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+s)===e)){l.push(a.slice(h,g)),h=g+s;continue}if(v==="/"){f=g;continue}}v==="["?d++:v==="]"&&d--}var _=l.length===0?a:a.substring(h),S=_.startsWith(xk),x=S?_.substring(1):_,E=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:E}}}function bz(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function _z(n){return{cache:yz(n.cacheSize),splitModifiers:wz(n),...fz(n)}}var xz=/\s+/;function Sz(n,e){var t=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(xz).map(function(a){var l=t(a),d=l.modifiers,h=l.hasImportantModifier,f=l.baseClassName,g=l.maybePostfixModifierPosition,v=r(g?f.substring(0,g):f),_=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(f),!v)return{isTailwindClass:!1,originalClassName:a};_=!1}var S=bz(d).join(":"),x=h?S+xk:S;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:_}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,f=l+d;return i.has(f)?!1:(i.add(f),s(d,h).forEach(function(g){return i.add(l+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function Az(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,s,i,a=l;function l(h){var f=e[0],g=e.slice(1),v=g.reduce(function(_,S){return S(_)},f());return r=_z(v),s=r.cache.get,i=r.cache.set,a=d,d(h)}function d(h){var f=s(h);if(f)return f;var g=Sz(h,r);return i(h,g),g}return function(){return a(hz.apply(null,arguments))}}function Zt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var Sk=/^\[(?:([a-z-]+):)?(.+)\]$/i,Cz=/^\d+\/\d+$/,Ez=new Set(["px","full","screen"]),kz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Tz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ii(n){return Qc(n)||Ez.has(n)||Cz.test(n)||ub(n)}function ub(n){return fu(n,"length",Oz)}function Rz(n){return fu(n,"size",Ak)}function Mz(n){return fu(n,"position",Ak)}function Iz(n){return fu(n,"url",Lz)}function ov(n){return fu(n,"number",Qc)}function Qc(n){return!Number.isNaN(Number(n))}function Dz(n){return n.endsWith("%")&&Qc(n.slice(0,-1))}function mp(n){return VA(n)||fu(n,"number",VA)}function yt(n){return Sk.test(n)}function gp(){return!0}function ml(n){return kz.test(n)}function Nz(n){return fu(n,"",jz)}function fu(n,e,t){var r=Sk.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function Oz(n){return Tz.test(n)}function Ak(){return!1}function Lz(n){return n.startsWith("url(")}function VA(n){return Number.isInteger(Number(n))}function jz(n){return Pz.test(n)}function Fz(){var n=Zt("colors"),e=Zt("spacing"),t=Zt("blur"),r=Zt("brightness"),s=Zt("borderColor"),i=Zt("borderRadius"),a=Zt("borderSpacing"),l=Zt("borderWidth"),d=Zt("contrast"),h=Zt("grayscale"),f=Zt("hueRotate"),g=Zt("invert"),v=Zt("gap"),_=Zt("gradientColorStops"),S=Zt("gradientColorStopPositions"),x=Zt("inset"),E=Zt("margin"),P=Zt("opacity"),M=Zt("padding"),R=Zt("saturate"),I=Zt("scale"),O=Zt("sepia"),F=Zt("skew"),$=Zt("space"),W=Zt("translate"),K=function(){return["auto","contain","none"]},ce=function(){return["auto","hidden","clip","visible","scroll"]},pe=function(){return["auto",yt,e]},ue=function(){return[yt,e]},fe=function(){return["",Ii]},ne=function(){return["auto",Qc,yt]},H=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},te=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},z=function(){return["start","end","center","between","around","evenly","stretch"]},re=function(){return["","0",yt]},Z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},B=function(){return[Qc,ov]},X=function(){return[Qc,yt]};return{cacheSize:500,theme:{colors:[gp],spacing:[Ii],blur:["none","",ml,yt],brightness:B(),borderColor:[n],borderRadius:["none","","full",ml,yt],borderSpacing:ue(),borderWidth:fe(),contrast:B(),grayscale:re(),hueRotate:X(),invert:re(),gap:ue(),gradientColorStops:[n],gradientColorStopPositions:[Dz,ub],inset:pe(),margin:pe(),opacity:B(),padding:ue(),saturate:B(),scale:B(),sepia:re(),skew:X(),space:ue(),translate:ue()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[ml]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(H(),[yt])}],overflow:[{overflow:ce()}],"overflow-x":[{"overflow-x":ce()}],"overflow-y":[{"overflow-y":ce()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mp]}],basis:[{basis:pe()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",mp]}],"grid-cols":[{"grid-cols":[gp]}],"col-start-end":[{col:["auto",{span:["full",mp]},yt]}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":[gp]}],"row-start-end":[{row:["auto",{span:[mp]},yt]}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",yt,e]}],"min-w":[{"min-w":["min","max","fit",yt,Ii]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ml]},ml,yt]}],h:[{h:[yt,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",yt,Ii]}],"max-h":[{"max-h":[yt,e,"min","max","fit"]}],"font-size":[{text:["base",ml,ub]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ov]}],"font-family":[{font:[gp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",Qc,ov]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yt,Ii]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ii]}],"underline-offset":[{"underline-offset":["auto",yt,Ii]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ue()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(H(),[Mz])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Iz]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[yt,Ii]}],"outline-w":[{outline:[Ii]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[Ii]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ml,Nz]}],"shadow-color":[{shadow:[gp]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":te()}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",ml,yt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[g]}],saturate:[{saturate:[R]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[mp,yt]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ue()}],"scroll-mx":[{"scroll-mx":ue()}],"scroll-my":[{"scroll-my":ue()}],"scroll-ms":[{"scroll-ms":ue()}],"scroll-me":[{"scroll-me":ue()}],"scroll-mt":[{"scroll-mt":ue()}],"scroll-mr":[{"scroll-mr":ue()}],"scroll-mb":[{"scroll-mb":ue()}],"scroll-ml":[{"scroll-ml":ue()}],"scroll-p":[{"scroll-p":ue()}],"scroll-px":[{"scroll-px":ue()}],"scroll-py":[{"scroll-py":ue()}],"scroll-ps":[{"scroll-ps":ue()}],"scroll-pe":[{"scroll-pe":ue()}],"scroll-pt":[{"scroll-pt":ue()}],"scroll-pr":[{"scroll-pr":ue()}],"scroll-pb":[{"scroll-pb":ue()}],"scroll-pl":[{"scroll-pl":ue()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ii,ov]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Bz=Az(Fz),Ap={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var $z=Ap.exports,HA;function Uz(){return HA||(HA=1,function(n,e){(function(){var t,r="4.17.21",s=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",g=1,v=2,_=4,S=1,x=2,E=1,P=2,M=4,R=8,I=16,O=32,F=64,$=128,W=256,K=512,ce=30,pe="...",ue=800,fe=16,ne=1,H=2,q=3,te=1/0,z=9007199254740991,re=17976931348623157e292,Z=NaN,B=4294967295,X=B-1,ae=B>>>1,ye=[["ary",$],["bind",E],["bindKey",P],["curry",R],["curryRight",I],["flip",K],["partial",O],["partialRight",F],["rearg",W]],Me="[object Arguments]",Pe="[object Array]",ve="[object AsyncFunction]",Ne="[object Boolean]",He="[object Date]",Ye="[object DOMException]",it="[object Error]",Mt="[object Function]",un="[object GeneratorFunction]",Xt="[object Map]",ur="[object Number]",zi="[object Null]",In="[object Object]",jl="[object Promise]",Fl="[object Proxy]",hs="[object RegExp]",An="[object Set]",ii="[object String]",Eo="[object Symbol]",Aa="[object Undefined]",oi="[object WeakMap]",wu="[object WeakSet]",ai="[object ArrayBuffer]",fs="[object DataView]",Ca="[object Float32Array]",li="[object Float64Array]",ci="[object Int8Array]",Bl="[object Int16Array]",Ea="[object Int32Array]",ka="[object Uint8Array]",$l="[object Uint8ClampedArray]",ko="[object Uint16Array]",To="[object Uint32Array]",Ul=/\b__p \+= '';/g,zl=/\b(__p \+=) '' \+/g,Vl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ui=/&(?:amp|lt|gt|quot|#39);/g,di=/[&<>"']/g,bu=RegExp(ui.source),_u=RegExp(di.source),xu=/<%-([\s\S]+?)%>/g,Su=/<%([\s\S]+?)%>/g,Hl=/<%=([\s\S]+?)%>/g,Wl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Au=/^\w*$/,Po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ro=/[\\^$.*+?()[\]{}|]/g,Mo=RegExp(Ro.source),ql=/^\s+/,Io=/\s/,Ta=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pa=/\{\n\/\* \[wrapped with (.+)\] \*/,Gl=/,? & /,bm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_m=/[()=,{}\[\]\/\s]/,xm=/\\(\\)?/g,hi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,J=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,xe=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,Be=/^(?:0|[1-9]\d*)$/,Et=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dn=/($^)/,fi=/['\n\r\u2028\u2029\\]/g,It="\\ud800-\\udfff",Lh="\\u0300-\\u036f",jh="\\ufe20-\\ufe2f",Sm="\\u20d0-\\u20ff",Kl=Lh+jh+Sm,Am="\\u2700-\\u27bf",Fh="a-z\\xdf-\\xf6\\xf8-\\xff",Cu="\\xac\\xb1\\xd7\\xf7",Ds="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zy="\\u2000-\\u206f",ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cm="A-Z\\xc0-\\xd6\\xd8-\\xde",Em="\\ufe0e\\ufe0f",km=Cu+Ds+zy+ps,Ra="[']",Eu="["+It+"]",Ma="["+km+"]",Do="["+Kl+"]",Tm="\\d+",Vy="["+Am+"]",ku="["+Fh+"]",Bh="[^"+It+km+Tm+Am+Fh+Cm+"]",Yl="\\ud83c[\\udffb-\\udfff]",Xl="(?:"+Do+"|"+Yl+")",Pm="[^"+It+"]",Ql="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",No="["+Cm+"]",$h="\\u200d",Tu="(?:"+ku+"|"+Bh+")",Rm="(?:"+No+"|"+Bh+")",Uh="(?:"+Ra+"(?:d|ll|m|re|s|t|ve))?",zh="(?:"+Ra+"(?:D|LL|M|RE|S|T|VE))?",Pu=Xl+"?",Jl="["+Em+"]?",Vi="(?:"+$h+"(?:"+[Pm,Ql,kt].join("|")+")"+Jl+Pu+")*",Hi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ia=Jl+Pu+Vi,Zl="(?:"+[Vy,Ql,kt].join("|")+")"+Ia,qi="(?:"+[Pm+Do+"?",Do,Ql,kt,Eu].join("|")+")",Hy=RegExp(Ra,"g"),Mm=RegExp(Do,"g"),Oo=RegExp(Yl+"(?="+Yl+")|"+qi+Ia,"g"),Wy=RegExp([No+"?"+ku+"+"+Uh+"(?="+[Ma,No,"$"].join("|")+")",Rm+"+"+zh+"(?="+[Ma,No+Tu,"$"].join("|")+")",No+"?"+Tu+"+"+Uh,No+"+"+zh,Wi,Hi,Tm,Zl].join("|"),"g"),Im=RegExp("["+$h+It+Kl+Em+"]"),Ru=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qy=-1,Dt={};Dt[Ca]=Dt[li]=Dt[ci]=Dt[Bl]=Dt[Ea]=Dt[ka]=Dt[$l]=Dt[ko]=Dt[To]=!0,Dt[Me]=Dt[Pe]=Dt[ai]=Dt[Ne]=Dt[fs]=Dt[He]=Dt[it]=Dt[Mt]=Dt[Xt]=Dt[ur]=Dt[In]=Dt[hs]=Dt[An]=Dt[ii]=Dt[oi]=!1;var Pt={};Pt[Me]=Pt[Pe]=Pt[ai]=Pt[fs]=Pt[Ne]=Pt[He]=Pt[Ca]=Pt[li]=Pt[ci]=Pt[Bl]=Pt[Ea]=Pt[Xt]=Pt[ur]=Pt[In]=Pt[hs]=Pt[An]=Pt[ii]=Pt[Eo]=Pt[ka]=Pt[$l]=Pt[ko]=Pt[To]=!0,Pt[it]=Pt[Mt]=Pt[oi]=!1;var Da={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Mu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ky={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vh=parseFloat,Iu=parseInt,Du=typeof bl=="object"&&bl&&bl.Object===Object&&bl,Nm=typeof self=="object"&&self&&self.Object===Object&&self,Wt=Du||Nm||Function("return this")(),ec=e&&!e.nodeType&&e,Ns=ec&&!0&&n&&!n.nodeType&&n,Hh=Ns&&Ns.exports===ec,Na=Hh&&Du.process,er=function(){try{var ee=Ns&&Ns.require&&Ns.require("util").types;return ee||Na&&Na.binding&&Na.binding("util")}catch{}}(),Wh=er&&er.isArrayBuffer,dr=er&&er.isDate,Lo=er&&er.isMap,Nu=er&&er.isRegExp,Oa=er&&er.isSet,Om=er&&er.isTypedArray;function tr(ee,ge,le){switch(le.length){case 0:return ee.call(ge);case 1:return ee.call(ge,le[0]);case 2:return ee.call(ge,le[0],le[1]);case 3:return ee.call(ge,le[0],le[1],le[2])}return ee.apply(ge,le)}function qh(ee,ge,le,Ie){for(var et=-1,St=ee==null?0:ee.length;++et<St;){var hn=ee[et];ge(Ie,hn,le(hn),ee)}return Ie}function Un(ee,ge){for(var le=-1,Ie=ee==null?0:ee.length;++le<Ie&&ge(ee[le],le,ee)!==!1;);return ee}function Ou(ee,ge){for(var le=ee==null?0:ee.length;le--&&ge(ee[le],le,ee)!==!1;);return ee}function Gh(ee,ge){for(var le=-1,Ie=ee==null?0:ee.length;++le<Ie;)if(!ge(ee[le],le,ee))return!1;return!0}function Gi(ee,ge){for(var le=-1,Ie=ee==null?0:ee.length,et=0,St=[];++le<Ie;){var hn=ee[le];ge(hn,le,ee)&&(St[et++]=hn)}return St}function Lu(ee,ge){var le=ee==null?0:ee.length;return!!le&&La(ee,ge,0)>-1}function Kh(ee,ge,le){for(var Ie=-1,et=ee==null?0:ee.length;++Ie<et;)if(le(ge,ee[Ie]))return!0;return!1}function Bt(ee,ge){for(var le=-1,Ie=ee==null?0:ee.length,et=Array(Ie);++le<Ie;)et[le]=ge(ee[le],le,ee);return et}function Ki(ee,ge){for(var le=-1,Ie=ge.length,et=ee.length;++le<Ie;)ee[et+le]=ge[le];return ee}function Yh(ee,ge,le,Ie){var et=-1,St=ee==null?0:ee.length;for(Ie&&St&&(le=ee[++et]);++et<St;)le=ge(le,ee[et],et,ee);return le}function Yy(ee,ge,le,Ie){var et=ee==null?0:ee.length;for(Ie&&et&&(le=ee[--et]);et--;)le=ge(le,ee[et],et,ee);return le}function Xh(ee,ge){for(var le=-1,Ie=ee==null?0:ee.length;++le<Ie;)if(ge(ee[le],le,ee))return!0;return!1}var Xy=Jh("length");function Lm(ee){return ee.split("")}function Qy(ee){return ee.match(bm)||[]}function jm(ee,ge,le){var Ie;return le(ee,function(et,St,hn){if(ge(et,St,hn))return Ie=St,!1}),Ie}function ju(ee,ge,le,Ie){for(var et=ee.length,St=le+(Ie?1:-1);Ie?St--:++St<et;)if(ge(ee[St],St,ee))return St;return-1}function La(ee,ge,le){return ge===ge?$u(ee,ge,le):ju(ee,Fm,le)}function Qh(ee,ge,le,Ie){for(var et=le-1,St=ee.length;++et<St;)if(Ie(ee[et],ge))return et;return-1}function Fm(ee){return ee!==ee}function Bm(ee,ge){var le=ee==null?0:ee.length;return le?Zh(ee,ge)/le:Z}function Jh(ee){return function(ge){return ge==null?t:ge[ee]}}function Fu(ee){return function(ge){return ee==null?t:ee[ge]}}function $m(ee,ge,le,Ie,et){return et(ee,function(St,hn,Ot){le=Ie?(Ie=!1,St):ge(le,St,hn,Ot)}),le}function Jy(ee,ge){var le=ee.length;for(ee.sort(ge);le--;)ee[le]=ee[le].value;return ee}function Zh(ee,ge){for(var le,Ie=-1,et=ee.length;++Ie<et;){var St=ge(ee[Ie]);St!==t&&(le=le===t?St:le+St)}return le}function ef(ee,ge){for(var le=-1,Ie=Array(ee);++le<ee;)Ie[le]=ge(le);return Ie}function Zy(ee,ge){return Bt(ge,function(le){return[le,ee[le]]})}function Um(ee){return ee&&ee.slice(0,Uu(ee)+1).replace(ql,"")}function Ar(ee){return function(ge){return ee(ge)}}function tc(ee,ge){return Bt(ge,function(le){return ee[le]})}function pi(ee,ge){return ee.has(ge)}function zm(ee,ge){for(var le=-1,Ie=ee.length;++le<Ie&&La(ge,ee[le],0)>-1;);return le}function tf(ee,ge){for(var le=ee.length;le--&&La(ge,ee[le],0)>-1;);return le}function Vm(ee,ge){for(var le=ee.length,Ie=0;le--;)ee[le]===ge&&++Ie;return Ie}var Hm=Fu(Da),Wm=Fu(Mu);function qm(ee){return"\\"+Ky[ee]}function ja(ee,ge){return ee==null?t:ee[ge]}function Fa(ee){return Im.test(ee)}function e0(ee){return Ru.test(ee)}function t0(ee){for(var ge,le=[];!(ge=ee.next()).done;)le.push(ge.value);return le}function Bu(ee){var ge=-1,le=Array(ee.size);return ee.forEach(function(Ie,et){le[++ge]=[et,Ie]}),le}function nf(ee,ge){return function(le){return ee(ge(le))}}function Ur(ee,ge){for(var le=-1,Ie=ee.length,et=0,St=[];++le<Ie;){var hn=ee[le];(hn===ge||hn===f)&&(ee[le]=f,St[et++]=le)}return St}function Yi(ee){var ge=-1,le=Array(ee.size);return ee.forEach(function(Ie){le[++ge]=Ie}),le}function n0(ee){var ge=-1,le=Array(ee.size);return ee.forEach(function(Ie){le[++ge]=[Ie,Ie]}),le}function $u(ee,ge,le){for(var Ie=le-1,et=ee.length;++Ie<et;)if(ee[Ie]===ge)return Ie;return-1}function r0(ee,ge,le){for(var Ie=le+1;Ie--;)if(ee[Ie]===ge)return Ie;return Ie}function jo(ee){return Fa(ee)?Km(ee):Xy(ee)}function Cr(ee){return Fa(ee)?Ym(ee):Lm(ee)}function Uu(ee){for(var ge=ee.length;ge--&&Io.test(ee.charAt(ge)););return ge}var Gm=Fu(Gy);function Km(ee){for(var ge=Oo.lastIndex=0;Oo.test(ee);)++ge;return ge}function Ym(ee){return ee.match(Oo)||[]}function s0(ee){return ee.match(Wy)||[]}var i0=function ee(ge){ge=ge==null?Wt:Ba.defaults(Wt.Object(),ge,Ba.pick(Wt,Dm));var le=ge.Array,Ie=ge.Date,et=ge.Error,St=ge.Function,hn=ge.Math,Ot=ge.Object,nc=ge.RegExp,o0=ge.String,zr=ge.TypeError,mi=le.prototype,rf=St.prototype,Os=Ot.prototype,$a=ge["__core-js_shared__"],rc=rf.toString,At=Os.hasOwnProperty,Ua=0,zu=function(){var u=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),sc=Os.toString,Vu=rc.call(Ot),Xm=Wt._,Qm=nc("^"+rc.call(At).replace(Ro,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ic=Hh?ge.Buffer:t,gi=ge.Symbol,oc=ge.Uint8Array,sf=ic?ic.allocUnsafe:t,ms=nf(Ot.getPrototypeOf,Ot),Hu=Ot.create,Wu=Os.propertyIsEnumerable,qu=mi.splice,Jm=gi?gi.isConcatSpreadable:t,vi=gi?gi.iterator:t,Fo=gi?gi.toStringTag:t,ac=function(){try{var u=oo(Ot,"defineProperty");return u({},"",{}),u}catch{}}(),Zm=ge.clearTimeout!==Wt.clearTimeout&&ge.clearTimeout,Ut=Ie&&Ie.now!==Wt.Date.now&&Ie.now,of=ge.setTimeout!==Wt.setTimeout&&ge.setTimeout,Bo=hn.ceil,Xi=hn.floor,Gu=Ot.getOwnPropertySymbols,af=ic?ic.isBuffer:t,za=ge.isFinite,Ku=mi.join,Va=nf(Ot.keys,Ot),fn=hn.max,zn=hn.min,a0=Ie.now,eg=ge.parseInt,lc=hn.random,Yu=mi.reverse,cc=oo(ge,"DataView"),$o=oo(ge,"Map"),uc=oo(ge,"Promise"),Qi=oo(ge,"Set"),dc=oo(ge,"WeakMap"),Ha=oo(Ot,"create"),Xu=dc&&new dc,Wa={},lf=ao(cc),Ji=ao($o),tg=ao(uc),qa=ao(Qi),Ls=ao(dc),Zi=gi?gi.prototype:t,Er=Zi?Zi.valueOf:t,Qu=Zi?Zi.toString:t;function L(u){if(mn(u)&&!ct(u)&&!(u instanceof lt)){if(u instanceof Vn)return u;if(At.call(u,"__wrapped__"))return Pg(u)}return new Vn(u)}var Ga=function(){function u(){}return function(p){if(!on(p))return{};if(Hu)return Hu(p);u.prototype=p;var b=new u;return u.prototype=t,b}}();function js(){}function Vn(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}L.templateSettings={escape:xu,evaluate:Su,interpolate:Hl,variable:"",imports:{_:L}},L.prototype=js.prototype,L.prototype.constructor=L,Vn.prototype=Ga(js.prototype),Vn.prototype.constructor=Vn;function lt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Ju(){var u=new lt(this.__wrapped__);return u.__actions__=rr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=rr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=rr(this.__views__),u}function cf(){if(this.__filtered__){var u=new lt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ka(){var u=this.__wrapped__.value(),p=this.__dir__,b=ct(u),T=p<0,D=b?u.length:0,j=jf(0,D,this.__views__),V=j.start,Y=j.end,se=Y-V,we=T?Y:V-1,_e=this.__iteratees__,Ee=_e.length,Re=0,Ue=zn(se,this.__takeCount__);if(!b||!T&&D==se&&Ue==se)return nl(u,this.__actions__);var Qe=[];e:for(;se--&&Re<Ue;){we+=p;for(var pt=-1,Je=u[we];++pt<Ee;){var vt=_e[pt],bt=vt.iteratee,Cs=vt.type,Mr=bt(Je);if(Cs==H)Je=Mr;else if(!Mr){if(Cs==ne)continue e;break e}}Qe[Re++]=Je}return Qe}lt.prototype=Ga(js.prototype),lt.prototype.constructor=lt;function hr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function zt(){this.__data__=Ha?Ha(null):{},this.size=0}function $t(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function eo(u){var p=this.__data__;if(Ha){var b=p[u];return b===d?t:b}return At.call(p,u)?p[u]:t}function Hn(u){var p=this.__data__;return Ha?p[u]!==t:At.call(p,u)}function fr(u,p){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=Ha&&p===t?d:p,this}hr.prototype.clear=zt,hr.prototype.delete=$t,hr.prototype.get=eo,hr.prototype.has=Hn,hr.prototype.set=fr;function nr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function Ya(){this.__data__=[],this.size=0}function pr(u){var p=this.__data__,b=qn(p,u);if(b<0)return!1;var T=p.length-1;return b==T?p.pop():qu.call(p,b,1),--this.size,!0}function Zu(u){var p=this.__data__,b=qn(p,u);return b<0?t:p[b][1]}function ng(u){return qn(this.__data__,u)>-1}function rg(u,p){var b=this.__data__,T=qn(b,u);return T<0?(++this.size,b.push([u,p])):b[T][1]=p,this}nr.prototype.clear=Ya,nr.prototype.delete=pr,nr.prototype.get=Zu,nr.prototype.has=ng,nr.prototype.set=rg;function Vr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function sg(){this.size=0,this.__data__={hash:new hr,map:new($o||nr),string:new hr}}function yi(u){var p=kc(this,u).delete(u);return this.size-=p?1:0,p}function ed(u){return kc(this,u).get(u)}function uf(u){return kc(this,u).has(u)}function ig(u,p){var b=kc(this,u),T=b.size;return b.set(u,p),this.size+=b.size==T?0:1,this}Vr.prototype.clear=sg,Vr.prototype.delete=yi,Vr.prototype.get=ed,Vr.prototype.has=uf,Vr.prototype.set=ig;function Uo(u){var p=-1,b=u==null?0:u.length;for(this.__data__=new Vr;++p<b;)this.add(u[p])}function to(u){return this.__data__.set(u,d),this}function Xa(u){return this.__data__.has(u)}Uo.prototype.add=Uo.prototype.push=to,Uo.prototype.has=Xa;function Wn(u){var p=this.__data__=new nr(u);this.size=p.size}function td(){this.__data__=new nr,this.size=0}function nd(u){var p=this.__data__,b=p.delete(u);return this.size=p.size,b}function Hr(u){return this.__data__.get(u)}function Wr(u){return this.__data__.has(u)}function zo(u,p){var b=this.__data__;if(b instanceof nr){var T=b.__data__;if(!$o||T.length<s-1)return T.push([u,p]),this.size=++b.size,this;b=this.__data__=new Vr(T)}return b.set(u,p),this.size=b.size,this}Wn.prototype.clear=td,Wn.prototype.delete=nd,Wn.prototype.get=Hr,Wn.prototype.has=Wr,Wn.prototype.set=zo;function Fs(u,p){var b=ct(u),T=!b&&Bc(u),D=!b&&!T&&hl(u),j=!b&&!T&&!D&&Wd(u),V=b||T||D||j,Y=V?ef(u.length,o0):[],se=Y.length;for(var we in u)(p||At.call(u,we))&&!(V&&(we=="length"||D&&(we=="offset"||we=="parent")||j&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||Gt(we,se)))&&Y.push(we);return Y}function Bs(u){var p=u.length;return p?u[el(0,p-1)]:t}function Vo(u,p){return Td(rr(u),wi(p,0,u.length))}function og(u){return Td(rr(u))}function hc(u,p,b){(b!==t&&!Pi(u[p],b)||b===t&&!(p in u))&&$s(u,p,b)}function Ho(u,p,b){var T=u[p];(!(At.call(u,p)&&Pi(T,b))||b===t&&!(p in u))&&$s(u,p,b)}function qn(u,p){for(var b=u.length;b--;)if(Pi(u[b][0],p))return b;return-1}function kr(u,p,b,T){return zs(u,function(D,j,V){p(T,D,b(D),V)}),T}function Vt(u,p){return u&&vs(p,Yn(p),u)}function gs(u,p){return u&&vs(p,es(p),u)}function $s(u,p,b){p=="__proto__"&&ac?ac(u,p,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[p]=b}function rd(u,p){for(var b=-1,T=p.length,D=le(T),j=u==null;++b<T;)D[b]=j?t:M0(u,p[b]);return D}function wi(u,p,b){return u===u&&(b!==t&&(u=u<=b?u:b),p!==t&&(u=u>=p?u:p)),u}function mr(u,p,b,T,D,j){var V,Y=p&g,se=p&v,we=p&_;if(b&&(V=D?b(u,T,D,j):b(u)),V!==t)return V;if(!on(u))return u;var _e=ct(u);if(_e){if(V=Pc(u),!Y)return rr(u,V)}else{var Ee=On(u),Re=Ee==Mt||Ee==un;if(hl(u))return Cf(u,Y);if(Ee==In||Ee==Me||Re&&!D){if(V=se||Re?{}:Ln(u),!Y)return se?c0(u,gs(V,u)):gd(u,Vt(V,u))}else{if(!Pt[Ee])return D?u:{};V=u0(u,Ee,Y)}}j||(j=new Wn);var Ue=j.get(u);if(Ue)return Ue;j.set(u,V),Ax(u)?u.forEach(function(Je){V.add(mr(Je,p,b,Je,u,j))}):xx(u)&&u.forEach(function(Je,vt){V.set(vt,mr(Je,p,b,vt,u,j))});var Qe=we?se?Ec:Cc:se?es:Yn,pt=_e?t:Qe(u);return Un(pt||u,function(Je,vt){pt&&(vt=Je,Je=u[vt]),Ho(V,vt,mr(Je,p,b,vt,u,j))}),V}function ag(u){var p=Yn(u);return function(b){return fc(b,u,p)}}function fc(u,p,b){var T=b.length;if(u==null)return!T;for(u=Ot(u);T--;){var D=b[T],j=p[D],V=u[D];if(V===t&&!(D in u)||!j(V))return!1}return!0}function df(u,p,b){if(typeof u!="function")throw new zr(a);return cl(function(){u.apply(t,b)},p)}function Us(u,p,b,T){var D=-1,j=Lu,V=!0,Y=u.length,se=[],we=p.length;if(!Y)return se;b&&(p=Bt(p,Ar(b))),T?(j=Kh,V=!1):p.length>=s&&(j=pi,V=!1,p=new Uo(p));e:for(;++D<Y;){var _e=u[D],Ee=b==null?_e:b(_e);if(_e=T||_e!==0?_e:0,V&&Ee===Ee){for(var Re=we;Re--;)if(p[Re]===Ee)continue e;se.push(_e)}else j(p,Ee,T)||se.push(_e)}return se}var zs=Xr(Tr),lg=Xr(no,!0);function pc(u,p){var b=!0;return zs(u,function(T,D,j){return b=!!p(T,D,j),b}),b}function Wo(u,p,b){for(var T=-1,D=u.length;++T<D;){var j=u[T],V=p(j);if(V!=null&&(Y===t?V===V&&!As(V):b(V,Y)))var Y=V,se=j}return se}function cg(u,p,b,T){var D=u.length;for(b=ht(b),b<0&&(b=-b>D?0:D+b),T=T===t||T>D?D:ht(T),T<0&&(T+=D),T=b>T?0:Ex(T);b<T;)u[b++]=p;return u}function hf(u,p){var b=[];return zs(u,function(T,D,j){p(T,D,j)&&b.push(T)}),b}function tn(u,p,b,T,D){var j=-1,V=u.length;for(b||(b=Cd),D||(D=[]);++j<V;){var Y=u[j];p>0&&b(Y)?p>1?tn(Y,p-1,b,T,D):Ki(D,Y):T||(D[D.length]=Y)}return D}var sd=yd(),mc=yd(!0);function Tr(u,p){return u&&sd(u,p,Yn)}function no(u,p){return u&&mc(u,p,Yn)}function Qa(u,p){return Gi(p,function(b){return sa(u[b])})}function bi(u,p){p=Ws(p,u);for(var b=0,T=p.length;u!=null&&b<T;)u=u[_s(p[b++])];return b&&b==T?u:t}function id(u,p,b){var T=p(u);return ct(u)?T:Ki(T,b(u))}function Dn(u){return u==null?u===t?Aa:zi:Fo&&Fo in Ot(u)?Ad(u):Bf(u)}function ro(u,p){return u>p}function qr(u,p){return u!=null&&At.call(u,p)}function qo(u,p){return u!=null&&p in Ot(u)}function ff(u,p,b){return u>=zn(p,b)&&u<fn(p,b)}function od(u,p,b){for(var T=b?Kh:Lu,D=u[0].length,j=u.length,V=j,Y=le(j),se=1/0,we=[];V--;){var _e=u[V];V&&p&&(_e=Bt(_e,Ar(p))),se=zn(_e.length,se),Y[V]=!b&&(p||D>=120&&_e.length>=120)?new Uo(V&&_e):t}_e=u[0];var Ee=-1,Re=Y[0];e:for(;++Ee<D&&we.length<se;){var Ue=_e[Ee],Qe=p?p(Ue):Ue;if(Ue=b||Ue!==0?Ue:0,!(Re?pi(Re,Qe):T(we,Qe,b))){for(V=j;--V;){var pt=Y[V];if(!(pt?pi(pt,Qe):T(u[V],Qe,b)))continue e}Re&&Re.push(Qe),we.push(Ue)}}return we}function _i(u,p,b,T){return Tr(u,function(D,j,V){p(T,b(D),j,V)}),T}function Gr(u,p,b){p=Ws(p,u),u=Cn(u,p);var T=u==null?u:u[_s(or(p))];return T==null?t:tr(T,u,b)}function ad(u){return mn(u)&&Dn(u)==Me}function ug(u){return mn(u)&&Dn(u)==ai}function xi(u){return mn(u)&&Dn(u)==He}function Kr(u,p,b,T,D){return u===p?!0:u==null||p==null||!mn(u)&&!mn(p)?u!==u&&p!==p:ld(u,p,b,T,Kr,D)}function ld(u,p,b,T,D,j){var V=ct(u),Y=ct(p),se=V?Pe:On(u),we=Y?Pe:On(p);se=se==Me?In:se,we=we==Me?In:we;var _e=se==In,Ee=we==In,Re=se==we;if(Re&&hl(u)){if(!hl(p))return!1;V=!0,_e=!1}if(Re&&!_e)return j||(j=new Wn),V||Wd(u)?Of(u,p,b,T,D,j):Lf(u,p,se,b,T,D,j);if(!(b&S)){var Ue=_e&&At.call(u,"__wrapped__"),Qe=Ee&&At.call(p,"__wrapped__");if(Ue||Qe){var pt=Ue?u.value():u,Je=Qe?p.value():p;return j||(j=new Wn),D(pt,Je,b,T,j)}}return Re?(j||(j=new Wn),_g(u,p,b,T,D,j)):!1}function dg(u){return mn(u)&&On(u)==Xt}function Ja(u,p,b,T){var D=b.length,j=D,V=!T;if(u==null)return!j;for(u=Ot(u);D--;){var Y=b[D];if(V&&Y[2]?Y[1]!==u[Y[0]]:!(Y[0]in u))return!1}for(;++D<j;){Y=b[D];var se=Y[0],we=u[se],_e=Y[1];if(V&&Y[2]){if(we===t&&!(se in u))return!1}else{var Ee=new Wn;if(T)var Re=T(we,_e,se,u,p,Ee);if(!(Re===t?Kr(_e,we,S|x,T,Ee):Re))return!1}}return!0}function pf(u){if(!on(u)||Ag(u))return!1;var p=sa(u)?Qm:xe;return p.test(ao(u))}function gc(u){return mn(u)&&Dn(u)==hs}function Vs(u){return mn(u)&&On(u)==An}function vc(u){return mn(u)&&Vg(u.length)&&!!Dt[Dn(u)]}function Za(u){return typeof u=="function"?u:u==null?ts:typeof u=="object"?ct(u)?qt(u[0],u[1]):cd(u):jx(u)}function Si(u){if(!ki(u))return Va(u);var p=[];for(var b in Ot(u))At.call(u,b)&&b!="constructor"&&p.push(b);return p}function mf(u){if(!on(u))return kg(u);var p=ki(u),b=[];for(var T in u)T=="constructor"&&(p||!At.call(u,T))||b.push(T);return b}function so(u,p){return u<p}function gf(u,p){var b=-1,T=Zr(u)?le(u.length):[];return zs(u,function(D,j,V){T[++b]=p(D,j,V)}),T}function cd(u){var p=Tc(u);return p.length==1&&p[0][2]?Ed(p[0][0],p[0][1]):function(b){return b===u||Ja(b,u,p)}}function qt(u,p){return Oe(u)&&Mc(p)?Ed(_s(u),p):function(b){var T=M0(b,u);return T===t&&T===p?I0(b,u):Kr(p,T,S|x)}}function Go(u,p,b,T,D){u!==p&&sd(p,function(j,V){if(D||(D=new Wn),on(j))vf(u,p,V,b,Go,T,D);else{var Y=T?T(Ks(u,V),j,V+"",u,p,D):t;Y===t&&(Y=j),hc(u,V,Y)}},es)}function vf(u,p,b,T,D,j,V){var Y=Ks(u,b),se=Ks(p,b),we=V.get(se);if(we){hc(u,b,we);return}var _e=j?j(Y,se,b+"",u,p,V):t,Ee=_e===t;if(Ee){var Re=ct(se),Ue=!Re&&hl(se),Qe=!Re&&!Ue&&Wd(se);_e=se,Re||Ue||Qe?ct(Y)?_e=Y:yn(Y)?_e=rr(Y):Ue?(Ee=!1,_e=Cf(se,!0)):Qe?(Ee=!1,_e=gg(se,!0)):_e=[]:rp(se)||Bc(se)?(_e=Y,Bc(Y)?_e=kx(Y):(!on(Y)||sa(Y))&&(_e=Ln(se))):Ee=!1}Ee&&(V.set(se,_e),D(_e,se,T,j,V),V.delete(se)),hc(u,b,_e)}function ud(u,p){var b=u.length;if(b)return p+=p<0?b:0,Gt(p,b)?u[p]:t}function yc(u,p,b){p.length?p=Bt(p,function(j){return ct(j)?function(V){return bi(V,j.length===1?j[0]:j)}:j}):p=[ts];var T=-1;p=Bt(p,Ar(Ke()));var D=gf(u,function(j,V,Y){var se=Bt(p,function(we){return we(j)});return{criteria:se,index:++T,value:j}});return Jy(D,function(j,V){return l0(j,V,b)})}function yf(u,p){return io(u,p,function(b,T){return I0(u,T)})}function io(u,p,b){for(var T=-1,D=p.length,j={};++T<D;){var V=p[T],Y=bi(u,V);b(Y,V)&&Yo(j,Ws(V,u),Y)}return j}function Qt(u){return function(p){return bi(p,u)}}function rn(u,p,b,T){var D=T?Qh:La,j=-1,V=p.length,Y=u;for(u===p&&(p=rr(p)),b&&(Y=Bt(u,Ar(b)));++j<V;)for(var se=0,we=p[j],_e=b?b(we):we;(se=D(Y,_e,se,T))>-1;)Y!==u&&qu.call(Y,se,1),qu.call(u,se,1);return u}function gn(u,p){for(var b=u?p.length:0,T=b-1;b--;){var D=p[b];if(b==T||D!==j){var j=D;Gt(D)?qu.call(u,D,1):fd(u,D)}}return u}function el(u,p){return u+Xi(lc()*(p-u+1))}function wc(u,p,b,T){for(var D=-1,j=fn(Bo((p-u)/(b||1)),0),V=le(j);j--;)V[T?j:++D]=u,u+=b;return V}function Ko(u,p){var b="";if(!u||p<1||p>z)return b;do p%2&&(b+=u),p=Xi(p/2),p&&(u+=u);while(p);return b}function dt(u,p){return Pr(kd(u,p,ts),u+"")}function Gn(u){return Bs(qd(u))}function wf(u,p){var b=qd(u);return Td(b,wi(p,0,b.length))}function Yo(u,p,b,T){if(!on(u))return u;p=Ws(p,u);for(var D=-1,j=p.length,V=j-1,Y=u;Y!=null&&++D<j;){var se=_s(p[D]),we=b;if(se==="__proto__"||se==="constructor"||se==="prototype")return u;if(D!=V){var _e=Y[se];we=T?T(_e,se,Y):t,we===t&&(we=on(_e)?_e:Gt(p[D+1])?[]:{})}Ho(Y,se,we),Y=Y[se]}return u}var dd=Xu?function(u,p){return Xu.set(u,p),u}:ts,Hs=ac?function(u,p){return ac(u,"toString",{configurable:!0,enumerable:!1,value:N0(p),writable:!0})}:ts;function Yr(u){return Td(qd(u))}function Kn(u,p,b){var T=-1,D=u.length;p<0&&(p=-p>D?0:D+p),b=b>D?D:b,b<0&&(b+=D),D=p>b?0:b-p>>>0,p>>>=0;for(var j=le(D);++T<D;)j[T]=u[T+p];return j}function bf(u,p){var b;return zs(u,function(T,D,j){return b=p(T,D,j),!b}),!!b}function tl(u,p,b){var T=0,D=u==null?T:u.length;if(typeof p=="number"&&p===p&&D<=ae){for(;T<D;){var j=T+D>>>1,V=u[j];V!==null&&!As(V)&&(b?V<=p:V<p)?T=j+1:D=j}return D}return hd(u,p,ts,b)}function hd(u,p,b,T){var D=0,j=u==null?0:u.length;if(j===0)return 0;p=b(p);for(var V=p!==p,Y=p===null,se=As(p),we=p===t;D<j;){var _e=Xi((D+j)/2),Ee=b(u[_e]),Re=Ee!==t,Ue=Ee===null,Qe=Ee===Ee,pt=As(Ee);if(V)var Je=T||Qe;else we?Je=Qe&&(T||Re):Y?Je=Qe&&Re&&(T||!Ue):se?Je=Qe&&Re&&!Ue&&(T||!pt):Ue||pt?Je=!1:Je=T?Ee<=p:Ee<p;Je?D=_e+1:j=_e}return zn(j,X)}function _f(u,p){for(var b=-1,T=u.length,D=0,j=[];++b<T;){var V=u[b],Y=p?p(V):V;if(!b||!Pi(Y,se)){var se=Y;j[D++]=V===0?0:V}}return j}function xf(u){return typeof u=="number"?u:As(u)?Z:+u}function gr(u){if(typeof u=="string")return u;if(ct(u))return Bt(u,gr)+"";if(As(u))return Qu?Qu.call(u):"";var p=u+"";return p=="0"&&1/u==-te?"-0":p}function Ai(u,p,b){var T=-1,D=Lu,j=u.length,V=!0,Y=[],se=Y;if(b)V=!1,D=Kh;else if(j>=s){var we=p?null:bg(u);if(we)return Yi(we);V=!1,D=pi,se=new Uo}else se=p?[]:Y;e:for(;++T<j;){var _e=u[T],Ee=p?p(_e):_e;if(_e=b||_e!==0?_e:0,V&&Ee===Ee){for(var Re=se.length;Re--;)if(se[Re]===Ee)continue e;p&&se.push(Ee),Y.push(_e)}else D(se,Ee,b)||(se!==Y&&se.push(Ee),Y.push(_e))}return Y}function fd(u,p){return p=Ws(p,u),u=Cn(u,p),u==null||delete u[_s(or(p))]}function Sf(u,p,b,T){return Yo(u,p,b(bi(u,p)),T)}function bc(u,p,b,T){for(var D=u.length,j=T?D:-1;(T?j--:++j<D)&&p(u[j],j,u););return b?Kn(u,T?0:j,T?j+1:D):Kn(u,T?j+1:0,T?D:j)}function nl(u,p){var b=u;return b instanceof lt&&(b=b.value()),Yh(p,function(T,D){return D.func.apply(D.thisArg,Ki([T],D.args))},b)}function pd(u,p,b){var T=u.length;if(T<2)return T?Ai(u[0]):[];for(var D=-1,j=le(T);++D<T;)for(var V=u[D],Y=-1;++Y<T;)Y!=D&&(j[D]=Us(j[D]||V,u[Y],p,b));return Ai(tn(j,1),p,b)}function _c(u,p,b){for(var T=-1,D=u.length,j=p.length,V={};++T<D;){var Y=T<j?p[T]:t;b(V,u[T],Y)}return V}function rl(u){return yn(u)?u:[]}function md(u){return typeof u=="function"?u:ts}function Ws(u,p){return ct(u)?u:Oe(u,p)?[u]:zf(Lt(u))}var hg=dt;function Ci(u,p,b){var T=u.length;return b=b===t?T:b,!p&&b>=T?u:Kn(u,p,b)}var Af=Zm||function(u){return Wt.clearTimeout(u)};function Cf(u,p){if(p)return u.slice();var b=u.length,T=sf?sf(b):new u.constructor(b);return u.copy(T),T}function xc(u){var p=new u.constructor(u.byteLength);return new oc(p).set(new oc(u)),p}function fg(u,p){var b=p?xc(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function pg(u){var p=new u.constructor(u.source,de.exec(u));return p.lastIndex=u.lastIndex,p}function mg(u){return Er?Ot(Er.call(u)):{}}function gg(u,p){var b=p?xc(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function Ef(u,p){if(u!==p){var b=u!==t,T=u===null,D=u===u,j=As(u),V=p!==t,Y=p===null,se=p===p,we=As(p);if(!Y&&!we&&!j&&u>p||j&&V&&se&&!Y&&!we||T&&V&&se||!b&&se||!D)return 1;if(!T&&!j&&!we&&u<p||we&&b&&D&&!T&&!j||Y&&b&&D||!V&&D||!se)return-1}return 0}function l0(u,p,b){for(var T=-1,D=u.criteria,j=p.criteria,V=D.length,Y=b.length;++T<V;){var se=Ef(D[T],j[T]);if(se){if(T>=Y)return se;var we=b[T];return se*(we=="desc"?-1:1)}}return u.index-p.index}function vg(u,p,b,T){for(var D=-1,j=u.length,V=b.length,Y=-1,se=p.length,we=fn(j-V,0),_e=le(se+we),Ee=!T;++Y<se;)_e[Y]=p[Y];for(;++D<V;)(Ee||D<j)&&(_e[b[D]]=u[D]);for(;we--;)_e[Y++]=u[D++];return _e}function kf(u,p,b,T){for(var D=-1,j=u.length,V=-1,Y=b.length,se=-1,we=p.length,_e=fn(j-Y,0),Ee=le(_e+we),Re=!T;++D<_e;)Ee[D]=u[D];for(var Ue=D;++se<we;)Ee[Ue+se]=p[se];for(;++V<Y;)(Re||D<j)&&(Ee[Ue+b[V]]=u[D++]);return Ee}function rr(u,p){var b=-1,T=u.length;for(p||(p=le(T));++b<T;)p[b]=u[b];return p}function vs(u,p,b,T){var D=!b;b||(b={});for(var j=-1,V=p.length;++j<V;){var Y=p[j],se=T?T(b[Y],u[Y],Y,b,u):t;se===t&&(se=u[Y]),D?$s(b,Y,se):Ho(b,Y,se)}return b}function gd(u,p){return vs(u,ys(u),p)}function c0(u,p){return vs(u,xg(u),p)}function vd(u,p){return function(b,T){var D=ct(b)?qh:kr,j=p?p():{};return D(b,u,Ke(T,2),j)}}function sl(u){return dt(function(p,b){var T=-1,D=b.length,j=D>1?b[D-1]:t,V=D>2?b[2]:t;for(j=u.length>3&&typeof j=="function"?(D--,j):t,V&&ir(b[0],b[1],V)&&(j=D<3?t:j,D=1),p=Ot(p);++T<D;){var Y=b[T];Y&&u(p,Y,T,j)}return p})}function Xr(u,p){return function(b,T){if(b==null)return b;if(!Zr(b))return u(b,T);for(var D=b.length,j=p?D:-1,V=Ot(b);(p?j--:++j<D)&&T(V[j],j,V)!==!1;);return b}}function yd(u){return function(p,b,T){for(var D=-1,j=Ot(p),V=T(p),Y=V.length;Y--;){var se=V[u?Y:++D];if(b(j[se],se,j)===!1)break}return p}}function wd(u,p,b){var T=p&E,D=il(u);function j(){var V=this&&this!==Wt&&this instanceof j?D:u;return V.apply(T?b:this,arguments)}return j}function Tf(u){return function(p){p=Lt(p);var b=Fa(p)?Cr(p):t,T=b?b[0]:p.charAt(0),D=b?Ci(b,1).join(""):p.slice(1);return T[u]()+D}}function Xo(u){return function(p){return Yh(Ox(Nx(p).replace(Hy,"")),u,"")}}function il(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var b=Ga(u.prototype),T=u.apply(b,p);return on(T)?T:b}}function Pf(u,p,b){var T=il(u);function D(){for(var j=arguments.length,V=le(j),Y=j,se=Ei(D);Y--;)V[Y]=arguments[Y];var we=j<3&&V[0]!==se&&V[j-1]!==se?[]:Ur(V,se);if(j-=we.length,j<b)return sr(u,p,ol,D.placeholder,t,V,we,t,t,b-j);var _e=this&&this!==Wt&&this instanceof D?T:u;return tr(_e,this,V)}return D}function Qo(u){return function(p,b,T){var D=Ot(p);if(!Zr(p)){var j=Ke(b,3);p=Yn(p),b=function(Y){return j(D[Y],Y,D)}}var V=u(p,b,T);return V>-1?D[j?p[V]:V]:t}}function bd(u){return Gs(function(p){var b=p.length,T=b,D=Vn.prototype.thru;for(u&&p.reverse();T--;){var j=p[T];if(typeof j!="function")throw new zr(a);if(D&&!V&&al(j)=="wrapper")var V=new Vn([],!0)}for(T=V?T:b;++T<b;){j=p[T];var Y=al(j),se=Y=="wrapper"?Sd(j):t;se&&Rc(se[0])&&se[1]==($|R|O|W)&&!se[4].length&&se[9]==1?V=V[al(se[0])].apply(V,se[3]):V=j.length==1&&Rc(j)?V[Y]():V.thru(j)}return function(){var we=arguments,_e=we[0];if(V&&we.length==1&&ct(_e))return V.plant(_e).value();for(var Ee=0,Re=b?p[Ee].apply(this,we):_e;++Ee<b;)Re=p[Ee].call(this,Re);return Re}})}function ol(u,p,b,T,D,j,V,Y,se,we){var _e=p&$,Ee=p&E,Re=p&P,Ue=p&(R|I),Qe=p&K,pt=Re?t:il(u);function Je(){for(var vt=arguments.length,bt=le(vt),Cs=vt;Cs--;)bt[Cs]=arguments[Cs];if(Ue)var Mr=Ei(Je),Es=Vm(bt,Mr);if(T&&(bt=vg(bt,T,D,Ue)),j&&(bt=kf(bt,j,V,Ue)),vt-=Es,Ue&&vt<we){var wn=Ur(bt,Mr);return sr(u,p,ol,Je.placeholder,b,bt,wn,Y,se,we-vt)}var Ri=Ee?b:this,oa=Re?Ri[u]:u;return vt=bt.length,Y?bt=ws(bt,Y):Qe&&vt>1&&bt.reverse(),_e&&se<vt&&(bt.length=se),this&&this!==Wt&&this instanceof Je&&(oa=pt||il(oa)),oa.apply(Ri,bt)}return Je}function yg(u,p){return function(b,T){return _i(b,u,p(T),{})}}function Sc(u,p){return function(b,T){var D;if(b===t&&T===t)return p;if(b!==t&&(D=b),T!==t){if(D===t)return T;typeof b=="string"||typeof T=="string"?(b=gr(b),T=gr(T)):(b=xf(b),T=xf(T)),D=u(b,T)}return D}}function _d(u){return Gs(function(p){return p=Bt(p,Ar(Ke())),dt(function(b){var T=this;return u(p,function(D){return tr(D,T,b)})})})}function Ac(u,p){p=p===t?" ":gr(p);var b=p.length;if(b<2)return b?Ko(p,u):p;var T=Ko(p,Bo(u/jo(p)));return Fa(p)?Ci(Cr(T),0,u).join(""):T.slice(0,u)}function wg(u,p,b,T){var D=p&E,j=il(u);function V(){for(var Y=-1,se=arguments.length,we=-1,_e=T.length,Ee=le(_e+se),Re=this&&this!==Wt&&this instanceof V?j:u;++we<_e;)Ee[we]=T[we];for(;se--;)Ee[we++]=arguments[++Y];return tr(Re,D?b:this,Ee)}return V}function Rf(u){return function(p,b,T){return T&&typeof T!="number"&&ir(p,b,T)&&(b=T=t),p=ia(p),b===t?(b=p,p=0):b=ia(b),T=T===t?p<b?1:-1:ia(T),wc(p,b,T,u)}}function xd(u){return function(p,b){return typeof p=="string"&&typeof b=="string"||(p=Ys(p),b=Ys(b)),u(p,b)}}function sr(u,p,b,T,D,j,V,Y,se,we){var _e=p&R,Ee=_e?V:t,Re=_e?t:V,Ue=_e?j:t,Qe=_e?t:j;p|=_e?O:F,p&=~(_e?F:O),p&M||(p&=-4);var pt=[u,p,D,Ue,Ee,Qe,Re,Y,se,we],Je=b.apply(t,pt);return Rc(u)&&$f(Je,pt),Je.placeholder=T,Uf(Je,u,p)}function Nn(u){var p=hn[u];return function(b,T){if(b=Ys(b),T=T==null?0:zn(ht(T),292),T&&za(b)){var D=(Lt(b)+"e").split("e"),j=p(D[0]+"e"+(+D[1]+T));return D=(Lt(j)+"e").split("e"),+(D[0]+"e"+(+D[1]-T))}return p(b)}}var bg=Qi&&1/Yi(new Qi([,-0]))[1]==te?function(u){return new Qi(u)}:j0;function Mf(u){return function(p){var b=On(p);return b==Xt?Bu(p):b==An?n0(p):Zy(p,u(p))}}function qs(u,p,b,T,D,j,V,Y){var se=p&P;if(!se&&typeof u!="function")throw new zr(a);var we=T?T.length:0;if(we||(p&=-97,T=D=t),V=V===t?V:fn(ht(V),0),Y=Y===t?Y:ht(Y),we-=D?D.length:0,p&F){var _e=T,Ee=D;T=D=t}var Re=se?t:Sd(u),Ue=[u,p,b,T,D,_e,Ee,j,V,Y];if(Re&&Eg(Ue,Re),u=Ue[0],p=Ue[1],b=Ue[2],T=Ue[3],D=Ue[4],Y=Ue[9]=Ue[9]===t?se?0:u.length:fn(Ue[9]-we,0),!Y&&p&(R|I)&&(p&=-25),!p||p==E)var Qe=wd(u,p,b);else p==R||p==I?Qe=Pf(u,p,Y):(p==O||p==(E|O))&&!D.length?Qe=wg(u,p,b,T):Qe=ol.apply(t,Ue);var pt=Re?dd:$f;return Uf(pt(Qe,Ue),u,p)}function If(u,p,b,T){return u===t||Pi(u,Os[b])&&!At.call(T,b)?p:u}function Df(u,p,b,T,D,j){return on(u)&&on(p)&&(j.set(p,u),Go(u,p,t,Df,j),j.delete(p)),u}function Nf(u){return rp(u)?t:u}function Of(u,p,b,T,D,j){var V=b&S,Y=u.length,se=p.length;if(Y!=se&&!(V&&se>Y))return!1;var we=j.get(u),_e=j.get(p);if(we&&_e)return we==p&&_e==u;var Ee=-1,Re=!0,Ue=b&x?new Uo:t;for(j.set(u,p),j.set(p,u);++Ee<Y;){var Qe=u[Ee],pt=p[Ee];if(T)var Je=V?T(pt,Qe,Ee,p,u,j):T(Qe,pt,Ee,u,p,j);if(Je!==t){if(Je)continue;Re=!1;break}if(Ue){if(!Xh(p,function(vt,bt){if(!pi(Ue,bt)&&(Qe===vt||D(Qe,vt,b,T,j)))return Ue.push(bt)})){Re=!1;break}}else if(!(Qe===pt||D(Qe,pt,b,T,j))){Re=!1;break}}return j.delete(u),j.delete(p),Re}function Lf(u,p,b,T,D,j,V){switch(b){case fs:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case ai:return!(u.byteLength!=p.byteLength||!j(new oc(u),new oc(p)));case Ne:case He:case ur:return Pi(+u,+p);case it:return u.name==p.name&&u.message==p.message;case hs:case ii:return u==p+"";case Xt:var Y=Bu;case An:var se=T&S;if(Y||(Y=Yi),u.size!=p.size&&!se)return!1;var we=V.get(u);if(we)return we==p;T|=x,V.set(u,p);var _e=Of(Y(u),Y(p),T,D,j,V);return V.delete(u),_e;case Eo:if(Er)return Er.call(u)==Er.call(p)}return!1}function _g(u,p,b,T,D,j){var V=b&S,Y=Cc(u),se=Y.length,we=Cc(p),_e=we.length;if(se!=_e&&!V)return!1;for(var Ee=se;Ee--;){var Re=Y[Ee];if(!(V?Re in p:At.call(p,Re)))return!1}var Ue=j.get(u),Qe=j.get(p);if(Ue&&Qe)return Ue==p&&Qe==u;var pt=!0;j.set(u,p),j.set(p,u);for(var Je=V;++Ee<se;){Re=Y[Ee];var vt=u[Re],bt=p[Re];if(T)var Cs=V?T(bt,vt,Re,p,u,j):T(vt,bt,Re,u,p,j);if(!(Cs===t?vt===bt||D(vt,bt,b,T,j):Cs)){pt=!1;break}Je||(Je=Re=="constructor")}if(pt&&!Je){var Mr=u.constructor,Es=p.constructor;Mr!=Es&&"constructor"in u&&"constructor"in p&&!(typeof Mr=="function"&&Mr instanceof Mr&&typeof Es=="function"&&Es instanceof Es)&&(pt=!1)}return j.delete(u),j.delete(p),pt}function Gs(u){return Pr(kd(u,t,Rd),u+"")}function Cc(u){return id(u,Yn,ys)}function Ec(u){return id(u,es,xg)}var Sd=Xu?function(u){return Xu.get(u)}:j0;function al(u){for(var p=u.name+"",b=Wa[p],T=At.call(Wa,p)?b.length:0;T--;){var D=b[T],j=D.func;if(j==null||j==u)return D.name}return p}function Ei(u){var p=At.call(L,"placeholder")?L:u;return p.placeholder}function Ke(){var u=L.iteratee||O0;return u=u===O0?Za:u,arguments.length?u(arguments[0],arguments[1]):u}function kc(u,p){var b=u.__data__;return ll(p)?b[typeof p=="string"?"string":"hash"]:b.map}function Tc(u){for(var p=Yn(u),b=p.length;b--;){var T=p[b],D=u[T];p[b]=[T,D,Mc(D)]}return p}function oo(u,p){var b=ja(u,p);return pf(b)?b:t}function Ad(u){var p=At.call(u,Fo),b=u[Fo];try{u[Fo]=t;var T=!0}catch{}var D=sc.call(u);return T&&(p?u[Fo]=b:delete u[Fo]),D}var ys=Gu?function(u){return u==null?[]:(u=Ot(u),Gi(Gu(u),function(p){return Wu.call(u,p)}))}:F0,xg=Gu?function(u){for(var p=[];u;)Ki(p,ys(u)),u=ms(u);return p}:F0,On=Dn;(cc&&On(new cc(new ArrayBuffer(1)))!=fs||$o&&On(new $o)!=Xt||uc&&On(uc.resolve())!=jl||Qi&&On(new Qi)!=An||dc&&On(new dc)!=oi)&&(On=function(u){var p=Dn(u),b=p==In?u.constructor:t,T=b?ao(b):"";if(T)switch(T){case lf:return fs;case Ji:return Xt;case tg:return jl;case qa:return An;case Ls:return oi}return p});function jf(u,p,b){for(var T=-1,D=b.length;++T<D;){var j=b[T],V=j.size;switch(j.type){case"drop":u+=V;break;case"dropRight":p-=V;break;case"take":p=zn(p,u+V);break;case"takeRight":u=fn(u,p-V);break}}return{start:u,end:p}}function Sg(u){var p=u.match(Pa);return p?p[1].split(Gl):[]}function Ff(u,p,b){p=Ws(p,u);for(var T=-1,D=p.length,j=!1;++T<D;){var V=_s(p[T]);if(!(j=u!=null&&b(u,V)))break;u=u[V]}return j||++T!=D?j:(D=u==null?0:u.length,!!D&&Vg(D)&&Gt(V,D)&&(ct(u)||Bc(u)))}function Pc(u){var p=u.length,b=new u.constructor(p);return p&&typeof u[0]=="string"&&At.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function Ln(u){return typeof u.constructor=="function"&&!ki(u)?Ga(ms(u)):{}}function u0(u,p,b){var T=u.constructor;switch(p){case ai:return xc(u);case Ne:case He:return new T(+u);case fs:return fg(u,b);case Ca:case li:case ci:case Bl:case Ea:case ka:case $l:case ko:case To:return gg(u,b);case Xt:return new T;case ur:case ii:return new T(u);case hs:return pg(u);case An:return new T;case Eo:return mg(u)}}function d0(u,p){var b=p.length;if(!b)return u;var T=b-1;return p[T]=(b>1?"& ":"")+p[T],p=p.join(b>2?", ":" "),u.replace(Ta,`{
/* [wrapped with `+p+`] */
`)}function Cd(u){return ct(u)||Bc(u)||!!(Jm&&u&&u[Jm])}function Gt(u,p){var b=typeof u;return p=p??z,!!p&&(b=="number"||b!="symbol"&&Be.test(u))&&u>-1&&u%1==0&&u<p}function ir(u,p,b){if(!on(b))return!1;var T=typeof p;return(T=="number"?Zr(b)&&Gt(p,b.length):T=="string"&&p in b)?Pi(b[p],u):!1}function Oe(u,p){if(ct(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||As(u)?!0:Au.test(u)||!Wl.test(u)||p!=null&&u in Ot(p)}function ll(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function Rc(u){var p=al(u),b=L[p];if(typeof b!="function"||!(p in lt.prototype))return!1;if(u===b)return!0;var T=Sd(b);return!!T&&u===T[0]}function Ag(u){return!!zu&&zu in u}var h0=$a?sa:B0;function ki(u){var p=u&&u.constructor,b=typeof p=="function"&&p.prototype||Os;return u===b}function Mc(u){return u===u&&!on(u)}function Ed(u,p){return function(b){return b==null?!1:b[u]===p&&(p!==t||u in Ot(b))}}function Cg(u){var p=oe(u,function(T){return b.size===h&&b.clear(),T}),b=p.cache;return p}function Eg(u,p){var b=u[1],T=p[1],D=b|T,j=D<(E|P|$),V=T==$&&b==R||T==$&&b==W&&u[7].length<=p[8]||T==($|W)&&p[7].length<=p[8]&&b==R;if(!(j||V))return u;T&E&&(u[2]=p[2],D|=b&E?0:M);var Y=p[3];if(Y){var se=u[3];u[3]=se?vg(se,Y,p[4]):Y,u[4]=se?Ur(u[3],f):p[4]}return Y=p[5],Y&&(se=u[5],u[5]=se?kf(se,Y,p[6]):Y,u[6]=se?Ur(u[5],f):p[6]),Y=p[7],Y&&(u[7]=Y),T&$&&(u[8]=u[8]==null?p[8]:zn(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=D,u}function kg(u){var p=[];if(u!=null)for(var b in Ot(u))p.push(b);return p}function Bf(u){return sc.call(u)}function kd(u,p,b){return p=fn(p===t?u.length-1:p,0),function(){for(var T=arguments,D=-1,j=fn(T.length-p,0),V=le(j);++D<j;)V[D]=T[p+D];D=-1;for(var Y=le(p+1);++D<p;)Y[D]=T[D];return Y[p]=b(V),tr(u,this,Y)}}function Cn(u,p){return p.length<2?u:bi(u,Kn(p,0,-1))}function ws(u,p){for(var b=u.length,T=zn(p.length,b),D=rr(u);T--;){var j=p[T];u[T]=Gt(j,b)?D[j]:t}return u}function Ks(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var $f=bs(dd),cl=of||function(u,p){return Wt.setTimeout(u,p)},Pr=bs(Hs);function Uf(u,p,b){var T=p+"";return Pr(u,d0(T,Tg(Sg(T),b)))}function bs(u){var p=0,b=0;return function(){var T=a0(),D=fe-(T-b);if(b=T,D>0){if(++p>=ue)return arguments[0]}else p=0;return u.apply(t,arguments)}}function Td(u,p){var b=-1,T=u.length,D=T-1;for(p=p===t?T:p;++b<p;){var j=el(b,D),V=u[j];u[j]=u[b],u[b]=V}return u.length=p,u}var zf=Cg(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Po,function(b,T,D,j){p.push(D?j.replace(xm,"$1"):T||b)}),p});function _s(u){if(typeof u=="string"||As(u))return u;var p=u+"";return p=="0"&&1/u==-te?"-0":p}function ao(u){if(u!=null){try{return rc.call(u)}catch{}try{return u+""}catch{}}return""}function Tg(u,p){return Un(ye,function(b){var T="_."+b[0];p&b[1]&&!Lu(u,T)&&u.push(T)}),u.sort()}function Pg(u){if(u instanceof lt)return u.clone();var p=new Vn(u.__wrapped__,u.__chain__);return p.__actions__=rr(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function Pd(u,p,b){(b?ir(u,p,b):p===t)?p=1:p=fn(ht(p),0);var T=u==null?0:u.length;if(!T||p<1)return[];for(var D=0,j=0,V=le(Bo(T/p));D<T;)V[j++]=Kn(u,D,D+=p);return V}function Vf(u){for(var p=-1,b=u==null?0:u.length,T=0,D=[];++p<b;){var j=u[p];j&&(D[T++]=j)}return D}function Qr(){var u=arguments.length;if(!u)return[];for(var p=le(u-1),b=arguments[0],T=u;T--;)p[T-1]=arguments[T];return Ki(ct(b)?rr(b):[b],tn(p,1))}var wt=dt(function(u,p){return yn(u)?Us(u,tn(p,1,yn,!0)):[]}),En=dt(function(u,p){var b=or(p);return yn(b)&&(b=t),yn(u)?Us(u,tn(p,1,yn,!0),Ke(b,2)):[]}),pn=dt(function(u,p){var b=or(p);return yn(b)&&(b=t),yn(u)?Us(u,tn(p,1,yn,!0),t,b):[]});function jn(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),Kn(u,p<0?0:p,T)):[]}function Rr(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),p=T-p,Kn(u,0,p<0?0:p)):[]}function ul(u,p){return u&&u.length?bc(u,Ke(p,3),!0,!0):[]}function vn(u,p){return u&&u.length?bc(u,Ke(p,3),!0):[]}function Ic(u,p,b,T){var D=u==null?0:u.length;return D?(b&&typeof b!="number"&&ir(u,p,b)&&(b=0,T=D),cg(u,p,b,T)):[]}function lo(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var D=b==null?0:ht(b);return D<0&&(D=fn(T+D,0)),ju(u,Ke(p,3),D)}function Dc(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var D=T-1;return b!==t&&(D=ht(b),D=b<0?fn(T+D,0):zn(D,T-1)),ju(u,Ke(p,3),D,!0)}function Rd(u){var p=u==null?0:u.length;return p?tn(u,1):[]}function Nc(u){var p=u==null?0:u.length;return p?tn(u,te):[]}function vr(u,p){var b=u==null?0:u.length;return b?(p=p===t?1:ht(p),tn(u,p)):[]}function Hf(u){for(var p=-1,b=u==null?0:u.length,T={};++p<b;){var D=u[p];T[D[0]]=D[1]}return T}function Jo(u){return u&&u.length?u[0]:t}function Ti(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var D=b==null?0:ht(b);return D<0&&(D=fn(T+D,0)),La(u,p,D)}function Md(u){var p=u==null?0:u.length;return p?Kn(u,0,-1):[]}var Wf=dt(function(u){var p=Bt(u,rl);return p.length&&p[0]===u[0]?od(p):[]}),co=dt(function(u){var p=or(u),b=Bt(u,rl);return p===or(b)?p=t:b.pop(),b.length&&b[0]===u[0]?od(b,Ke(p,2)):[]}),Id=dt(function(u){var p=or(u),b=Bt(u,rl);return p=typeof p=="function"?p:t,p&&b.pop(),b.length&&b[0]===u[0]?od(b,t,p):[]});function uo(u,p){return u==null?"":Ku.call(u,p)}function or(u){var p=u==null?0:u.length;return p?u[p-1]:t}function Oc(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var D=T;return b!==t&&(D=ht(b),D=D<0?fn(T+D,0):zn(D,T-1)),p===p?r0(u,p,D):ju(u,Fm,D,!0)}function qf(u,p){return u&&u.length?ud(u,ht(p)):t}var Dd=dt(Lc);function Lc(u,p){return u&&u.length&&p&&p.length?rn(u,p):u}function ar(u,p,b){return u&&u.length&&p&&p.length?rn(u,p,Ke(b,2)):u}function ho(u,p,b){return u&&u.length&&p&&p.length?rn(u,p,t,b):u}var xs=Gs(function(u,p){var b=u==null?0:u.length,T=rd(u,p);return gn(u,Bt(p,function(D){return Gt(D,b)?+D:D}).sort(Ef)),T});function yr(u,p){var b=[];if(!(u&&u.length))return b;var T=-1,D=[],j=u.length;for(p=Ke(p,3);++T<j;){var V=u[T];p(V,T,u)&&(b.push(V),D.push(T))}return gn(u,D),b}function Nd(u){return u==null?u:Yu.call(u)}function Gf(u,p,b){var T=u==null?0:u.length;return T?(b&&typeof b!="number"&&ir(u,p,b)?(p=0,b=T):(p=p==null?0:ht(p),b=b===t?T:ht(b)),Kn(u,p,b)):[]}function Kf(u,p){return tl(u,p)}function f0(u,p,b){return hd(u,p,Ke(b,2))}function fo(u,p){var b=u==null?0:u.length;if(b){var T=tl(u,p);if(T<b&&Pi(u[T],p))return T}return-1}function Rg(u,p){return tl(u,p,!0)}function Yf(u,p,b){return hd(u,p,Ke(b,2),!0)}function Zo(u,p){var b=u==null?0:u.length;if(b){var T=tl(u,p,!0)-1;if(Pi(u[T],p))return T}return-1}function Xf(u){return u&&u.length?_f(u):[]}function ea(u,p){return u&&u.length?_f(u,Ke(p,2)):[]}function Mg(u){var p=u==null?0:u.length;return p?Kn(u,1,p):[]}function Ig(u,p,b){return u&&u.length?(p=b||p===t?1:ht(p),Kn(u,0,p<0?0:p)):[]}function Qf(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),p=T-p,Kn(u,p<0?0:p,T)):[]}function Od(u,p){return u&&u.length?bc(u,Ke(p,3),!1,!0):[]}function p0(u,p){return u&&u.length?bc(u,Ke(p,3)):[]}var m0=dt(function(u){return Ai(tn(u,1,yn,!0))}),Dg=dt(function(u){var p=or(u);return yn(p)&&(p=t),Ai(tn(u,1,yn,!0),Ke(p,2))}),Ng=dt(function(u){var p=or(u);return p=typeof p=="function"?p:t,Ai(tn(u,1,yn,!0),t,p)});function ta(u){return u&&u.length?Ai(u):[]}function g0(u,p){return u&&u.length?Ai(u,Ke(p,2)):[]}function dl(u,p){return p=typeof p=="function"?p:t,u&&u.length?Ai(u,t,p):[]}function Ld(u){if(!(u&&u.length))return[];var p=0;return u=Gi(u,function(b){if(yn(b))return p=fn(b.length,p),!0}),ef(p,function(b){return Bt(u,Jh(b))})}function Jt(u,p){if(!(u&&u.length))return[];var b=Ld(u);return p==null?b:Bt(b,function(T){return tr(p,t,T)})}var v0=dt(function(u,p){return yn(u)?Us(u,p):[]}),Og=dt(function(u){return pd(Gi(u,yn))}),y0=dt(function(u){var p=or(u);return yn(p)&&(p=t),pd(Gi(u,yn),Ke(p,2))}),w0=dt(function(u){var p=or(u);return p=typeof p=="function"?p:t,pd(Gi(u,yn),t,p)}),Lg=dt(Ld);function jg(u,p){return _c(u||[],p||[],Ho)}function b0(u,p){return _c(u||[],p||[],Yo)}var Jr=dt(function(u){var p=u.length,b=p>1?u[p-1]:t;return b=typeof b=="function"?(u.pop(),b):t,Jt(u,b)});function jd(u){var p=L(u);return p.__chain__=!0,p}function _0(u,p){return p(u),u}function Ss(u,p){return p(u)}var Fd=Gs(function(u){var p=u.length,b=p?u[0]:0,T=this.__wrapped__,D=function(j){return rd(j,u)};return p>1||this.__actions__.length||!(T instanceof lt)||!Gt(b)?this.thru(D):(T=T.slice(b,+b+(p?1:0)),T.__actions__.push({func:Ss,args:[D],thisArg:t}),new Vn(T,this.__chain__).thru(function(j){return p&&!j.length&&j.push(t),j}))});function na(){return jd(this)}function Bd(){return new Vn(this.value(),this.__chain__)}function Jf(){this.__values__===t&&(this.__values__=Cx(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function Zf(){return this}function x0(u){for(var p,b=this;b instanceof js;){var T=Pg(b);T.__index__=0,T.__values__=t,p?D.__wrapped__=T:p=T;var D=T;b=b.__wrapped__}return D.__wrapped__=u,p}function ep(){var u=this.__wrapped__;if(u instanceof lt){var p=u;return this.__actions__.length&&(p=new lt(this)),p=p.reverse(),p.__actions__.push({func:Ss,args:[Nd],thisArg:t}),new Vn(p,this.__chain__)}return this.thru(Nd)}function S0(){return nl(this.__wrapped__,this.__actions__)}var Fg=vd(function(u,p,b){At.call(u,b)?++u[b]:$s(u,b,1)});function Bg(u,p,b){var T=ct(u)?Gh:pc;return b&&ir(u,p,b)&&(p=t),T(u,Ke(p,3))}function $d(u,p){var b=ct(u)?Gi:hf;return b(u,Ke(p,3))}var Ud=Qo(lo),$g=Qo(Dc);function tp(u,p){return tn(ra(u,p),1)}function A0(u,p){return tn(ra(u,p),te)}function Ug(u,p,b){return b=b===t?1:ht(b),tn(ra(u,p),b)}function zd(u,p){var b=ct(u)?Un:zs;return b(u,Ke(p,3))}function jc(u,p){var b=ct(u)?Ou:lg;return b(u,Ke(p,3))}var np=vd(function(u,p,b){At.call(u,b)?u[b].push(p):$s(u,b,[p])});function Vd(u,p,b,T){u=Zr(u)?u:qd(u),b=b&&!T?ht(b):0;var D=u.length;return b<0&&(b=fn(D+b,0)),Hg(u)?b<=D&&u.indexOf(p,b)>-1:!!D&&La(u,p,b)>-1}var zg=dt(function(u,p,b){var T=-1,D=typeof p=="function",j=Zr(u)?le(u.length):[];return zs(u,function(V){j[++T]=D?tr(p,V,b):Gr(V,p,b)}),j}),C0=vd(function(u,p,b){$s(u,b,p)});function ra(u,p){var b=ct(u)?Bt:gf;return b(u,Ke(p,3))}function E0(u,p,b,T){return u==null?[]:(ct(p)||(p=p==null?[]:[p]),b=T?t:b,ct(b)||(b=b==null?[]:[b]),yc(u,p,b))}var Fc=vd(function(u,p,b){u[b?0:1].push(p)},function(){return[[],[]]});function k0(u,p,b){var T=ct(u)?Yh:$m,D=arguments.length<3;return T(u,Ke(p,4),b,D,zs)}function Hd(u,p,b){var T=ct(u)?Yy:$m,D=arguments.length<3;return T(u,Ke(p,4),b,D,lg)}function o(u,p){var b=ct(u)?Gi:hf;return b(u,Te(Ke(p,3)))}function c(u){var p=ct(u)?Bs:Gn;return p(u)}function m(u,p,b){(b?ir(u,p,b):p===t)?p=1:p=ht(p);var T=ct(u)?Vo:wf;return T(u,p)}function w(u){var p=ct(u)?og:Yr;return p(u)}function C(u){if(u==null)return 0;if(Zr(u))return Hg(u)?jo(u):u.length;var p=On(u);return p==Xt||p==An?u.size:Si(u).length}function k(u,p,b){var T=ct(u)?Xh:bf;return b&&ir(u,p,b)&&(p=t),T(u,Ke(p,3))}var N=dt(function(u,p){if(u==null)return[];var b=p.length;return b>1&&ir(u,p[0],p[1])?p=[]:b>2&&ir(p[0],p[1],p[2])&&(p=[p[0]]),yc(u,tn(p,1),[])}),U=Ut||function(){return Wt.Date.now()};function G(u,p){if(typeof p!="function")throw new zr(a);return u=ht(u),function(){if(--u<1)return p.apply(this,arguments)}}function he(u,p,b){return p=b?t:p,p=u&&p==null?u.length:p,qs(u,$,t,t,t,t,p)}function Ce(u,p){var b;if(typeof p!="function")throw new zr(a);return u=ht(u),function(){return--u>0&&(b=p.apply(this,arguments)),u<=1&&(p=t),b}}var ke=dt(function(u,p,b){var T=E;if(b.length){var D=Ur(b,Ei(ke));T|=O}return qs(u,T,p,b,D)}),Ae=dt(function(u,p,b){var T=E|P;if(b.length){var D=Ur(b,Ei(Ae));T|=O}return qs(p,T,u,b,D)});function De(u,p,b){p=b?t:p;var T=qs(u,R,t,t,t,t,t,p);return T.placeholder=De.placeholder,T}function Le(u,p,b){p=b?t:p;var T=qs(u,I,t,t,t,t,t,p);return T.placeholder=Le.placeholder,T}function je(u,p,b){var T,D,j,V,Y,se,we=0,_e=!1,Ee=!1,Re=!0;if(typeof u!="function")throw new zr(a);p=Ys(p)||0,on(b)&&(_e=!!b.leading,Ee="maxWait"in b,j=Ee?fn(Ys(b.maxWait)||0,p):j,Re="trailing"in b?!!b.trailing:Re);function Ue(wn){var Ri=T,oa=D;return T=D=t,we=wn,V=u.apply(oa,Ri),V}function Qe(wn){return we=wn,Y=cl(vt,p),_e?Ue(wn):V}function pt(wn){var Ri=wn-se,oa=wn-we,Fx=p-Ri;return Ee?zn(Fx,j-oa):Fx}function Je(wn){var Ri=wn-se,oa=wn-we;return se===t||Ri>=p||Ri<0||Ee&&oa>=j}function vt(){var wn=U();if(Je(wn))return bt(wn);Y=cl(vt,pt(wn))}function bt(wn){return Y=t,Re&&T?Ue(wn):(T=D=t,V)}function Cs(){Y!==t&&Af(Y),we=0,T=se=D=Y=t}function Mr(){return Y===t?V:bt(U())}function Es(){var wn=U(),Ri=Je(wn);if(T=arguments,D=this,se=wn,Ri){if(Y===t)return Qe(se);if(Ee)return Af(Y),Y=cl(vt,p),Ue(se)}return Y===t&&(Y=cl(vt,p)),V}return Es.cancel=Cs,Es.flush=Mr,Es}var sn=dt(function(u,p){return df(u,1,p)}),ie=dt(function(u,p,b){return df(u,Ys(p)||0,b)});function Q(u){return qs(u,K)}function oe(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new zr(a);var b=function(){var T=arguments,D=p?p.apply(this,T):T[0],j=b.cache;if(j.has(D))return j.get(D);var V=u.apply(this,T);return b.cache=j.set(D,V)||j,V};return b.cache=new(oe.Cache||Vr),b}oe.Cache=Vr;function Te(u){if(typeof u!="function")throw new zr(a);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function $e(u){return Ce(2,u)}var Ge=hg(function(u,p){p=p.length==1&&ct(p[0])?Bt(p[0],Ar(Ke())):Bt(tn(p,1),Ar(Ke()));var b=p.length;return dt(function(T){for(var D=-1,j=zn(T.length,b);++D<j;)T[D]=p[D].call(this,T[D]);return tr(u,this,T)})}),We=dt(function(u,p){var b=Ur(p,Ei(We));return qs(u,O,t,p,b)}),Xe=dt(function(u,p){var b=Ur(p,Ei(Xe));return qs(u,F,t,p,b)}),kn=Gs(function(u,p){return qs(u,W,t,t,t,p)});function Ct(u,p){if(typeof u!="function")throw new zr(a);return p=p===t?p:ht(p),dt(u,p)}function po(u,p){if(typeof u!="function")throw new zr(a);return p=p==null?0:fn(ht(p),0),dt(function(b){var T=b[p],D=Ci(b,0,p);return T&&Ki(D,T),tr(u,this,D)})}function T0(u,p,b){var T=!0,D=!0;if(typeof u!="function")throw new zr(a);return on(b)&&(T="leading"in b?!!b.leading:T,D="trailing"in b?!!b.trailing:D),je(u,p,{leading:T,maxWait:p,trailing:D})}function NM(u){return he(u,1)}function OM(u,p){return We(md(p),u)}function LM(){if(!arguments.length)return[];var u=arguments[0];return ct(u)?u:[u]}function jM(u){return mr(u,_)}function FM(u,p){return p=typeof p=="function"?p:t,mr(u,_,p)}function BM(u){return mr(u,g|_)}function $M(u,p){return p=typeof p=="function"?p:t,mr(u,g|_,p)}function UM(u,p){return p==null||fc(u,p,Yn(p))}function Pi(u,p){return u===p||u!==u&&p!==p}var zM=xd(ro),VM=xd(function(u,p){return u>=p}),Bc=ad(function(){return arguments}())?ad:function(u){return mn(u)&&At.call(u,"callee")&&!Wu.call(u,"callee")},ct=le.isArray,HM=Wh?Ar(Wh):ug;function Zr(u){return u!=null&&Vg(u.length)&&!sa(u)}function yn(u){return mn(u)&&Zr(u)}function WM(u){return u===!0||u===!1||mn(u)&&Dn(u)==Ne}var hl=af||B0,qM=dr?Ar(dr):xi;function GM(u){return mn(u)&&u.nodeType===1&&!rp(u)}function KM(u){if(u==null)return!0;if(Zr(u)&&(ct(u)||typeof u=="string"||typeof u.splice=="function"||hl(u)||Wd(u)||Bc(u)))return!u.length;var p=On(u);if(p==Xt||p==An)return!u.size;if(ki(u))return!Si(u).length;for(var b in u)if(At.call(u,b))return!1;return!0}function YM(u,p){return Kr(u,p)}function XM(u,p,b){b=typeof b=="function"?b:t;var T=b?b(u,p):t;return T===t?Kr(u,p,t,b):!!T}function P0(u){if(!mn(u))return!1;var p=Dn(u);return p==it||p==Ye||typeof u.message=="string"&&typeof u.name=="string"&&!rp(u)}function QM(u){return typeof u=="number"&&za(u)}function sa(u){if(!on(u))return!1;var p=Dn(u);return p==Mt||p==un||p==ve||p==Fl}function _x(u){return typeof u=="number"&&u==ht(u)}function Vg(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=z}function on(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function mn(u){return u!=null&&typeof u=="object"}var xx=Lo?Ar(Lo):dg;function JM(u,p){return u===p||Ja(u,p,Tc(p))}function ZM(u,p,b){return b=typeof b=="function"?b:t,Ja(u,p,Tc(p),b)}function eI(u){return Sx(u)&&u!=+u}function tI(u){if(h0(u))throw new et(i);return pf(u)}function nI(u){return u===null}function rI(u){return u==null}function Sx(u){return typeof u=="number"||mn(u)&&Dn(u)==ur}function rp(u){if(!mn(u)||Dn(u)!=In)return!1;var p=ms(u);if(p===null)return!0;var b=At.call(p,"constructor")&&p.constructor;return typeof b=="function"&&b instanceof b&&rc.call(b)==Vu}var R0=Nu?Ar(Nu):gc;function sI(u){return _x(u)&&u>=-z&&u<=z}var Ax=Oa?Ar(Oa):Vs;function Hg(u){return typeof u=="string"||!ct(u)&&mn(u)&&Dn(u)==ii}function As(u){return typeof u=="symbol"||mn(u)&&Dn(u)==Eo}var Wd=Om?Ar(Om):vc;function iI(u){return u===t}function oI(u){return mn(u)&&On(u)==oi}function aI(u){return mn(u)&&Dn(u)==wu}var lI=xd(so),cI=xd(function(u,p){return u<=p});function Cx(u){if(!u)return[];if(Zr(u))return Hg(u)?Cr(u):rr(u);if(vi&&u[vi])return t0(u[vi]());var p=On(u),b=p==Xt?Bu:p==An?Yi:qd;return b(u)}function ia(u){if(!u)return u===0?u:0;if(u=Ys(u),u===te||u===-te){var p=u<0?-1:1;return p*re}return u===u?u:0}function ht(u){var p=ia(u),b=p%1;return p===p?b?p-b:p:0}function Ex(u){return u?wi(ht(u),0,B):0}function Ys(u){if(typeof u=="number")return u;if(As(u))return Z;if(on(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=on(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=Um(u);var b=me.test(u);return b||be.test(u)?Iu(u.slice(2),b?2:8):J.test(u)?Z:+u}function kx(u){return vs(u,es(u))}function uI(u){return u?wi(ht(u),-z,z):u===0?u:0}function Lt(u){return u==null?"":gr(u)}var dI=sl(function(u,p){if(ki(p)||Zr(p)){vs(p,Yn(p),u);return}for(var b in p)At.call(p,b)&&Ho(u,b,p[b])}),Tx=sl(function(u,p){vs(p,es(p),u)}),Wg=sl(function(u,p,b,T){vs(p,es(p),u,T)}),hI=sl(function(u,p,b,T){vs(p,Yn(p),u,T)}),fI=Gs(rd);function pI(u,p){var b=Ga(u);return p==null?b:Vt(b,p)}var mI=dt(function(u,p){u=Ot(u);var b=-1,T=p.length,D=T>2?p[2]:t;for(D&&ir(p[0],p[1],D)&&(T=1);++b<T;)for(var j=p[b],V=es(j),Y=-1,se=V.length;++Y<se;){var we=V[Y],_e=u[we];(_e===t||Pi(_e,Os[we])&&!At.call(u,we))&&(u[we]=j[we])}return u}),gI=dt(function(u){return u.push(t,Df),tr(Px,t,u)});function vI(u,p){return jm(u,Ke(p,3),Tr)}function yI(u,p){return jm(u,Ke(p,3),no)}function wI(u,p){return u==null?u:sd(u,Ke(p,3),es)}function bI(u,p){return u==null?u:mc(u,Ke(p,3),es)}function _I(u,p){return u&&Tr(u,Ke(p,3))}function xI(u,p){return u&&no(u,Ke(p,3))}function SI(u){return u==null?[]:Qa(u,Yn(u))}function AI(u){return u==null?[]:Qa(u,es(u))}function M0(u,p,b){var T=u==null?t:bi(u,p);return T===t?b:T}function CI(u,p){return u!=null&&Ff(u,p,qr)}function I0(u,p){return u!=null&&Ff(u,p,qo)}var EI=yg(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=sc.call(p)),u[p]=b},N0(ts)),kI=yg(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=sc.call(p)),At.call(u,p)?u[p].push(b):u[p]=[b]},Ke),TI=dt(Gr);function Yn(u){return Zr(u)?Fs(u):Si(u)}function es(u){return Zr(u)?Fs(u,!0):mf(u)}function PI(u,p){var b={};return p=Ke(p,3),Tr(u,function(T,D,j){$s(b,p(T,D,j),T)}),b}function RI(u,p){var b={};return p=Ke(p,3),Tr(u,function(T,D,j){$s(b,D,p(T,D,j))}),b}var MI=sl(function(u,p,b){Go(u,p,b)}),Px=sl(function(u,p,b,T){Go(u,p,b,T)}),II=Gs(function(u,p){var b={};if(u==null)return b;var T=!1;p=Bt(p,function(j){return j=Ws(j,u),T||(T=j.length>1),j}),vs(u,Ec(u),b),T&&(b=mr(b,g|v|_,Nf));for(var D=p.length;D--;)fd(b,p[D]);return b});function DI(u,p){return Rx(u,Te(Ke(p)))}var NI=Gs(function(u,p){return u==null?{}:yf(u,p)});function Rx(u,p){if(u==null)return{};var b=Bt(Ec(u),function(T){return[T]});return p=Ke(p),io(u,b,function(T,D){return p(T,D[0])})}function OI(u,p,b){p=Ws(p,u);var T=-1,D=p.length;for(D||(D=1,u=t);++T<D;){var j=u==null?t:u[_s(p[T])];j===t&&(T=D,j=b),u=sa(j)?j.call(u):j}return u}function LI(u,p,b){return u==null?u:Yo(u,p,b)}function jI(u,p,b,T){return T=typeof T=="function"?T:t,u==null?u:Yo(u,p,b,T)}var Mx=Mf(Yn),Ix=Mf(es);function FI(u,p,b){var T=ct(u),D=T||hl(u)||Wd(u);if(p=Ke(p,4),b==null){var j=u&&u.constructor;D?b=T?new j:[]:on(u)?b=sa(j)?Ga(ms(u)):{}:b={}}return(D?Un:Tr)(u,function(V,Y,se){return p(b,V,Y,se)}),b}function BI(u,p){return u==null?!0:fd(u,p)}function $I(u,p,b){return u==null?u:Sf(u,p,md(b))}function UI(u,p,b,T){return T=typeof T=="function"?T:t,u==null?u:Sf(u,p,md(b),T)}function qd(u){return u==null?[]:tc(u,Yn(u))}function zI(u){return u==null?[]:tc(u,es(u))}function VI(u,p,b){return b===t&&(b=p,p=t),b!==t&&(b=Ys(b),b=b===b?b:0),p!==t&&(p=Ys(p),p=p===p?p:0),wi(Ys(u),p,b)}function HI(u,p,b){return p=ia(p),b===t?(b=p,p=0):b=ia(b),u=Ys(u),ff(u,p,b)}function WI(u,p,b){if(b&&typeof b!="boolean"&&ir(u,p,b)&&(p=b=t),b===t&&(typeof p=="boolean"?(b=p,p=t):typeof u=="boolean"&&(b=u,u=t)),u===t&&p===t?(u=0,p=1):(u=ia(u),p===t?(p=u,u=0):p=ia(p)),u>p){var T=u;u=p,p=T}if(b||u%1||p%1){var D=lc();return zn(u+D*(p-u+Vh("1e-"+((D+"").length-1))),p)}return el(u,p)}var qI=Xo(function(u,p,b){return p=p.toLowerCase(),u+(b?Dx(p):p)});function Dx(u){return D0(Lt(u).toLowerCase())}function Nx(u){return u=Lt(u),u&&u.replace(Et,Hm).replace(Mm,"")}function GI(u,p,b){u=Lt(u),p=gr(p);var T=u.length;b=b===t?T:wi(ht(b),0,T);var D=b;return b-=p.length,b>=0&&u.slice(b,D)==p}function KI(u){return u=Lt(u),u&&_u.test(u)?u.replace(di,Wm):u}function YI(u){return u=Lt(u),u&&Mo.test(u)?u.replace(Ro,"\\$&"):u}var XI=Xo(function(u,p,b){return u+(b?"-":"")+p.toLowerCase()}),QI=Xo(function(u,p,b){return u+(b?" ":"")+p.toLowerCase()}),JI=Tf("toLowerCase");function ZI(u,p,b){u=Lt(u),p=ht(p);var T=p?jo(u):0;if(!p||T>=p)return u;var D=(p-T)/2;return Ac(Xi(D),b)+u+Ac(Bo(D),b)}function eD(u,p,b){u=Lt(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?u+Ac(p-T,b):u}function tD(u,p,b){u=Lt(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?Ac(p-T,b)+u:u}function nD(u,p,b){return b||p==null?p=0:p&&(p=+p),eg(Lt(u).replace(ql,""),p||0)}function rD(u,p,b){return(b?ir(u,p,b):p===t)?p=1:p=ht(p),Ko(Lt(u),p)}function sD(){var u=arguments,p=Lt(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var iD=Xo(function(u,p,b){return u+(b?"_":"")+p.toLowerCase()});function oD(u,p,b){return b&&typeof b!="number"&&ir(u,p,b)&&(p=b=t),b=b===t?B:b>>>0,b?(u=Lt(u),u&&(typeof p=="string"||p!=null&&!R0(p))&&(p=gr(p),!p&&Fa(u))?Ci(Cr(u),0,b):u.split(p,b)):[]}var aD=Xo(function(u,p,b){return u+(b?" ":"")+D0(p)});function lD(u,p,b){return u=Lt(u),b=b==null?0:wi(ht(b),0,u.length),p=gr(p),u.slice(b,b+p.length)==p}function cD(u,p,b){var T=L.templateSettings;b&&ir(u,p,b)&&(p=t),u=Lt(u),p=Wg({},p,T,If);var D=Wg({},p.imports,T.imports,If),j=Yn(D),V=tc(D,j),Y,se,we=0,_e=p.interpolate||dn,Ee="__p += '",Re=nc((p.escape||dn).source+"|"+_e.source+"|"+(_e===Hl?hi:dn).source+"|"+(p.evaluate||dn).source+"|$","g"),Ue="//# sourceURL="+(At.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qy+"]")+`
`;u.replace(Re,function(Je,vt,bt,Cs,Mr,Es){return bt||(bt=Cs),Ee+=u.slice(we,Es).replace(fi,qm),vt&&(Y=!0,Ee+=`' +
__e(`+vt+`) +
'`),Mr&&(se=!0,Ee+=`';
`+Mr+`;
__p += '`),bt&&(Ee+=`' +
((__t = (`+bt+`)) == null ? '' : __t) +
'`),we=Es+Je.length,Je}),Ee+=`';
`;var Qe=At.call(p,"variable")&&p.variable;if(!Qe)Ee=`with (obj) {
`+Ee+`
}
`;else if(_m.test(Qe))throw new et(l);Ee=(se?Ee.replace(Ul,""):Ee).replace(zl,"$1").replace(Vl,"$1;"),Ee="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ee+`return __p
}`;var pt=Lx(function(){return St(j,Ue+"return "+Ee).apply(t,V)});if(pt.source=Ee,P0(pt))throw pt;return pt}function uD(u){return Lt(u).toLowerCase()}function dD(u){return Lt(u).toUpperCase()}function hD(u,p,b){if(u=Lt(u),u&&(b||p===t))return Um(u);if(!u||!(p=gr(p)))return u;var T=Cr(u),D=Cr(p),j=zm(T,D),V=tf(T,D)+1;return Ci(T,j,V).join("")}function fD(u,p,b){if(u=Lt(u),u&&(b||p===t))return u.slice(0,Uu(u)+1);if(!u||!(p=gr(p)))return u;var T=Cr(u),D=tf(T,Cr(p))+1;return Ci(T,0,D).join("")}function pD(u,p,b){if(u=Lt(u),u&&(b||p===t))return u.replace(ql,"");if(!u||!(p=gr(p)))return u;var T=Cr(u),D=zm(T,Cr(p));return Ci(T,D).join("")}function mD(u,p){var b=ce,T=pe;if(on(p)){var D="separator"in p?p.separator:D;b="length"in p?ht(p.length):b,T="omission"in p?gr(p.omission):T}u=Lt(u);var j=u.length;if(Fa(u)){var V=Cr(u);j=V.length}if(b>=j)return u;var Y=b-jo(T);if(Y<1)return T;var se=V?Ci(V,0,Y).join(""):u.slice(0,Y);if(D===t)return se+T;if(V&&(Y+=se.length-Y),R0(D)){if(u.slice(Y).search(D)){var we,_e=se;for(D.global||(D=nc(D.source,Lt(de.exec(D))+"g")),D.lastIndex=0;we=D.exec(_e);)var Ee=we.index;se=se.slice(0,Ee===t?Y:Ee)}}else if(u.indexOf(gr(D),Y)!=Y){var Re=se.lastIndexOf(D);Re>-1&&(se=se.slice(0,Re))}return se+T}function gD(u){return u=Lt(u),u&&bu.test(u)?u.replace(ui,Gm):u}var vD=Xo(function(u,p,b){return u+(b?" ":"")+p.toUpperCase()}),D0=Tf("toUpperCase");function Ox(u,p,b){return u=Lt(u),p=b?t:p,p===t?e0(u)?s0(u):Qy(u):u.match(p)||[]}var Lx=dt(function(u,p){try{return tr(u,t,p)}catch(b){return P0(b)?b:new et(b)}}),yD=Gs(function(u,p){return Un(p,function(b){b=_s(b),$s(u,b,ke(u[b],u))}),u});function wD(u){var p=u==null?0:u.length,b=Ke();return u=p?Bt(u,function(T){if(typeof T[1]!="function")throw new zr(a);return[b(T[0]),T[1]]}):[],dt(function(T){for(var D=-1;++D<p;){var j=u[D];if(tr(j[0],this,T))return tr(j[1],this,T)}})}function bD(u){return ag(mr(u,g))}function N0(u){return function(){return u}}function _D(u,p){return u==null||u!==u?p:u}var xD=bd(),SD=bd(!0);function ts(u){return u}function O0(u){return Za(typeof u=="function"?u:mr(u,g))}function AD(u){return cd(mr(u,g))}function CD(u,p){return qt(u,mr(p,g))}var ED=dt(function(u,p){return function(b){return Gr(b,u,p)}}),kD=dt(function(u,p){return function(b){return Gr(u,b,p)}});function L0(u,p,b){var T=Yn(p),D=Qa(p,T);b==null&&!(on(p)&&(D.length||!T.length))&&(b=p,p=u,u=this,D=Qa(p,Yn(p)));var j=!(on(b)&&"chain"in b)||!!b.chain,V=sa(u);return Un(D,function(Y){var se=p[Y];u[Y]=se,V&&(u.prototype[Y]=function(){var we=this.__chain__;if(j||we){var _e=u(this.__wrapped__),Ee=_e.__actions__=rr(this.__actions__);return Ee.push({func:se,args:arguments,thisArg:u}),_e.__chain__=we,_e}return se.apply(u,Ki([this.value()],arguments))})}),u}function TD(){return Wt._===this&&(Wt._=Xm),this}function j0(){}function PD(u){return u=ht(u),dt(function(p){return ud(p,u)})}var RD=_d(Bt),MD=_d(Gh),ID=_d(Xh);function jx(u){return Oe(u)?Jh(_s(u)):Qt(u)}function DD(u){return function(p){return u==null?t:bi(u,p)}}var ND=Rf(),OD=Rf(!0);function F0(){return[]}function B0(){return!1}function LD(){return{}}function jD(){return""}function FD(){return!0}function BD(u,p){if(u=ht(u),u<1||u>z)return[];var b=B,T=zn(u,B);p=Ke(p),u-=B;for(var D=ef(T,p);++b<u;)p(b);return D}function $D(u){return ct(u)?Bt(u,_s):As(u)?[u]:rr(zf(Lt(u)))}function UD(u){var p=++Ua;return Lt(u)+p}var zD=Sc(function(u,p){return u+p},0),VD=Nn("ceil"),HD=Sc(function(u,p){return u/p},1),WD=Nn("floor");function qD(u){return u&&u.length?Wo(u,ts,ro):t}function GD(u,p){return u&&u.length?Wo(u,Ke(p,2),ro):t}function KD(u){return Bm(u,ts)}function YD(u,p){return Bm(u,Ke(p,2))}function XD(u){return u&&u.length?Wo(u,ts,so):t}function QD(u,p){return u&&u.length?Wo(u,Ke(p,2),so):t}var JD=Sc(function(u,p){return u*p},1),ZD=Nn("round"),eN=Sc(function(u,p){return u-p},0);function tN(u){return u&&u.length?Zh(u,ts):0}function nN(u,p){return u&&u.length?Zh(u,Ke(p,2)):0}return L.after=G,L.ary=he,L.assign=dI,L.assignIn=Tx,L.assignInWith=Wg,L.assignWith=hI,L.at=fI,L.before=Ce,L.bind=ke,L.bindAll=yD,L.bindKey=Ae,L.castArray=LM,L.chain=jd,L.chunk=Pd,L.compact=Vf,L.concat=Qr,L.cond=wD,L.conforms=bD,L.constant=N0,L.countBy=Fg,L.create=pI,L.curry=De,L.curryRight=Le,L.debounce=je,L.defaults=mI,L.defaultsDeep=gI,L.defer=sn,L.delay=ie,L.difference=wt,L.differenceBy=En,L.differenceWith=pn,L.drop=jn,L.dropRight=Rr,L.dropRightWhile=ul,L.dropWhile=vn,L.fill=Ic,L.filter=$d,L.flatMap=tp,L.flatMapDeep=A0,L.flatMapDepth=Ug,L.flatten=Rd,L.flattenDeep=Nc,L.flattenDepth=vr,L.flip=Q,L.flow=xD,L.flowRight=SD,L.fromPairs=Hf,L.functions=SI,L.functionsIn=AI,L.groupBy=np,L.initial=Md,L.intersection=Wf,L.intersectionBy=co,L.intersectionWith=Id,L.invert=EI,L.invertBy=kI,L.invokeMap=zg,L.iteratee=O0,L.keyBy=C0,L.keys=Yn,L.keysIn=es,L.map=ra,L.mapKeys=PI,L.mapValues=RI,L.matches=AD,L.matchesProperty=CD,L.memoize=oe,L.merge=MI,L.mergeWith=Px,L.method=ED,L.methodOf=kD,L.mixin=L0,L.negate=Te,L.nthArg=PD,L.omit=II,L.omitBy=DI,L.once=$e,L.orderBy=E0,L.over=RD,L.overArgs=Ge,L.overEvery=MD,L.overSome=ID,L.partial=We,L.partialRight=Xe,L.partition=Fc,L.pick=NI,L.pickBy=Rx,L.property=jx,L.propertyOf=DD,L.pull=Dd,L.pullAll=Lc,L.pullAllBy=ar,L.pullAllWith=ho,L.pullAt=xs,L.range=ND,L.rangeRight=OD,L.rearg=kn,L.reject=o,L.remove=yr,L.rest=Ct,L.reverse=Nd,L.sampleSize=m,L.set=LI,L.setWith=jI,L.shuffle=w,L.slice=Gf,L.sortBy=N,L.sortedUniq=Xf,L.sortedUniqBy=ea,L.split=oD,L.spread=po,L.tail=Mg,L.take=Ig,L.takeRight=Qf,L.takeRightWhile=Od,L.takeWhile=p0,L.tap=_0,L.throttle=T0,L.thru=Ss,L.toArray=Cx,L.toPairs=Mx,L.toPairsIn=Ix,L.toPath=$D,L.toPlainObject=kx,L.transform=FI,L.unary=NM,L.union=m0,L.unionBy=Dg,L.unionWith=Ng,L.uniq=ta,L.uniqBy=g0,L.uniqWith=dl,L.unset=BI,L.unzip=Ld,L.unzipWith=Jt,L.update=$I,L.updateWith=UI,L.values=qd,L.valuesIn=zI,L.without=v0,L.words=Ox,L.wrap=OM,L.xor=Og,L.xorBy=y0,L.xorWith=w0,L.zip=Lg,L.zipObject=jg,L.zipObjectDeep=b0,L.zipWith=Jr,L.entries=Mx,L.entriesIn=Ix,L.extend=Tx,L.extendWith=Wg,L0(L,L),L.add=zD,L.attempt=Lx,L.camelCase=qI,L.capitalize=Dx,L.ceil=VD,L.clamp=VI,L.clone=jM,L.cloneDeep=BM,L.cloneDeepWith=$M,L.cloneWith=FM,L.conformsTo=UM,L.deburr=Nx,L.defaultTo=_D,L.divide=HD,L.endsWith=GI,L.eq=Pi,L.escape=KI,L.escapeRegExp=YI,L.every=Bg,L.find=Ud,L.findIndex=lo,L.findKey=vI,L.findLast=$g,L.findLastIndex=Dc,L.findLastKey=yI,L.floor=WD,L.forEach=zd,L.forEachRight=jc,L.forIn=wI,L.forInRight=bI,L.forOwn=_I,L.forOwnRight=xI,L.get=M0,L.gt=zM,L.gte=VM,L.has=CI,L.hasIn=I0,L.head=Jo,L.identity=ts,L.includes=Vd,L.indexOf=Ti,L.inRange=HI,L.invoke=TI,L.isArguments=Bc,L.isArray=ct,L.isArrayBuffer=HM,L.isArrayLike=Zr,L.isArrayLikeObject=yn,L.isBoolean=WM,L.isBuffer=hl,L.isDate=qM,L.isElement=GM,L.isEmpty=KM,L.isEqual=YM,L.isEqualWith=XM,L.isError=P0,L.isFinite=QM,L.isFunction=sa,L.isInteger=_x,L.isLength=Vg,L.isMap=xx,L.isMatch=JM,L.isMatchWith=ZM,L.isNaN=eI,L.isNative=tI,L.isNil=rI,L.isNull=nI,L.isNumber=Sx,L.isObject=on,L.isObjectLike=mn,L.isPlainObject=rp,L.isRegExp=R0,L.isSafeInteger=sI,L.isSet=Ax,L.isString=Hg,L.isSymbol=As,L.isTypedArray=Wd,L.isUndefined=iI,L.isWeakMap=oI,L.isWeakSet=aI,L.join=uo,L.kebabCase=XI,L.last=or,L.lastIndexOf=Oc,L.lowerCase=QI,L.lowerFirst=JI,L.lt=lI,L.lte=cI,L.max=qD,L.maxBy=GD,L.mean=KD,L.meanBy=YD,L.min=XD,L.minBy=QD,L.stubArray=F0,L.stubFalse=B0,L.stubObject=LD,L.stubString=jD,L.stubTrue=FD,L.multiply=JD,L.nth=qf,L.noConflict=TD,L.noop=j0,L.now=U,L.pad=ZI,L.padEnd=eD,L.padStart=tD,L.parseInt=nD,L.random=WI,L.reduce=k0,L.reduceRight=Hd,L.repeat=rD,L.replace=sD,L.result=OI,L.round=ZD,L.runInContext=ee,L.sample=c,L.size=C,L.snakeCase=iD,L.some=k,L.sortedIndex=Kf,L.sortedIndexBy=f0,L.sortedIndexOf=fo,L.sortedLastIndex=Rg,L.sortedLastIndexBy=Yf,L.sortedLastIndexOf=Zo,L.startCase=aD,L.startsWith=lD,L.subtract=eN,L.sum=tN,L.sumBy=nN,L.template=cD,L.times=BD,L.toFinite=ia,L.toInteger=ht,L.toLength=Ex,L.toLower=uD,L.toNumber=Ys,L.toSafeInteger=uI,L.toString=Lt,L.toUpper=dD,L.trim=hD,L.trimEnd=fD,L.trimStart=pD,L.truncate=mD,L.unescape=gD,L.uniqueId=UD,L.upperCase=vD,L.upperFirst=D0,L.each=zd,L.eachRight=jc,L.first=Jo,L0(L,function(){var u={};return Tr(L,function(p,b){At.call(L.prototype,b)||(u[b]=p)}),u}(),{chain:!1}),L.VERSION=r,Un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){L[u].placeholder=L}),Un(["drop","take"],function(u,p){lt.prototype[u]=function(b){b=b===t?1:fn(ht(b),0);var T=this.__filtered__&&!p?new lt(this):this.clone();return T.__filtered__?T.__takeCount__=zn(b,T.__takeCount__):T.__views__.push({size:zn(b,B),type:u+(T.__dir__<0?"Right":"")}),T},lt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),Un(["filter","map","takeWhile"],function(u,p){var b=p+1,T=b==ne||b==q;lt.prototype[u]=function(D){var j=this.clone();return j.__iteratees__.push({iteratee:Ke(D,3),type:b}),j.__filtered__=j.__filtered__||T,j}}),Un(["head","last"],function(u,p){var b="take"+(p?"Right":"");lt.prototype[u]=function(){return this[b](1).value()[0]}}),Un(["initial","tail"],function(u,p){var b="drop"+(p?"":"Right");lt.prototype[u]=function(){return this.__filtered__?new lt(this):this[b](1)}}),lt.prototype.compact=function(){return this.filter(ts)},lt.prototype.find=function(u){return this.filter(u).head()},lt.prototype.findLast=function(u){return this.reverse().find(u)},lt.prototype.invokeMap=dt(function(u,p){return typeof u=="function"?new lt(this):this.map(function(b){return Gr(b,u,p)})}),lt.prototype.reject=function(u){return this.filter(Te(Ke(u)))},lt.prototype.slice=function(u,p){u=ht(u);var b=this;return b.__filtered__&&(u>0||p<0)?new lt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),p!==t&&(p=ht(p),b=p<0?b.dropRight(-p):b.take(p-u)),b)},lt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},lt.prototype.toArray=function(){return this.take(B)},Tr(lt.prototype,function(u,p){var b=/^(?:filter|find|map|reject)|While$/.test(p),T=/^(?:head|last)$/.test(p),D=L[T?"take"+(p=="last"?"Right":""):p],j=T||/^find/.test(p);D&&(L.prototype[p]=function(){var V=this.__wrapped__,Y=T?[1]:arguments,se=V instanceof lt,we=Y[0],_e=se||ct(V),Ee=function(vt){var bt=D.apply(L,Ki([vt],Y));return T&&Re?bt[0]:bt};_e&&b&&typeof we=="function"&&we.length!=1&&(se=_e=!1);var Re=this.__chain__,Ue=!!this.__actions__.length,Qe=j&&!Re,pt=se&&!Ue;if(!j&&_e){V=pt?V:new lt(this);var Je=u.apply(V,Y);return Je.__actions__.push({func:Ss,args:[Ee],thisArg:t}),new Vn(Je,Re)}return Qe&&pt?u.apply(this,Y):(Je=this.thru(Ee),Qe?T?Je.value()[0]:Je.value():Je)})}),Un(["pop","push","shift","sort","splice","unshift"],function(u){var p=mi[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",T=/^(?:pop|shift)$/.test(u);L.prototype[u]=function(){var D=arguments;if(T&&!this.__chain__){var j=this.value();return p.apply(ct(j)?j:[],D)}return this[b](function(V){return p.apply(ct(V)?V:[],D)})}}),Tr(lt.prototype,function(u,p){var b=L[p];if(b){var T=b.name+"";At.call(Wa,T)||(Wa[T]=[]),Wa[T].push({name:p,func:b})}}),Wa[ol(t,P).name]=[{name:"wrapper",func:t}],lt.prototype.clone=Ju,lt.prototype.reverse=cf,lt.prototype.value=Ka,L.prototype.at=Fd,L.prototype.chain=na,L.prototype.commit=Bd,L.prototype.next=Jf,L.prototype.plant=x0,L.prototype.reverse=ep,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=S0,L.prototype.first=L.prototype.head,vi&&(L.prototype[vi]=Zf),L},Ba=i0();Ns?((Ns.exports=Ba)._=Ba,ec._=Ba):Wt._=Ba}).call($z)}(Ap,Ap.exports)),Ap.exports}var M9=Uz();function ut(...n){return Bz(wk(n))}function I9(n,e){const t={position:n.position,size:n.size,styles:n.styles,visible:n.visible!==!1};if(e==="desktop")return t;const r=n.layouts?.[e]||{};return{position:r.position||t.position,size:r.size||t.size,styles:{...t.styles,...r.styles||{}},visible:r.visible!==void 0?r.visible:t.visible}}function D9(n){return typeof n!="string"?(console.warn("sanitizeFilename expects a string argument"),`invalid_filename_${Date.now()}`):n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"")}function N9(n,e=!0){const t=Number(n);if(isNaN(t))return e?"R$ 0,00":"0,00";const r={style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2};return e?t.toLocaleString("pt-BR",r):t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function WA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function fy(...n){return e=>{let t=!1;const r=n.map(s=>{const i=WA(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():WA(n[s],null)}}}}function xt(...n){return A.useCallback(fy(...n),n)}function nu(n){const e=Vz(n),t=A.forwardRef((r,s)=>{const{children:i,...a}=r,l=A.Children.toArray(i),d=l.find(Hz);if(d){const h=d.props.children,f=l.map(g=>g===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:g);return y.jsx(e,{...a,ref:s,children:A.isValidElement(h)?A.cloneElement(h,void 0,f):null})}return y.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var zz=nu("Slot");function Vz(n){const e=A.forwardRef((t,r)=>{const{children:s,...i}=t;if(A.isValidElement(s)){const a=qz(s),l=Wz(i,s.props);return s.type!==A.Fragment&&(l.ref=r?fy(r,a):a),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Ck=Symbol("radix.slottable");function O9(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Ck,e}function Hz(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Ck}function Wz(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function qz(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const qA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,GA=wk,Ek=(n,e)=>t=>{var r;if(e?.variants==null)return GA(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const f=t?.[h],g=i?.[h];if(f===null)return null;const v=qA(f)||qA(g);return s[h][v]}),l=t&&Object.entries(t).reduce((h,f)=>{let[g,v]=f;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:g,className:v,..._}=f;return Object.entries(_).every(S=>{let[x,E]=S;return Array.isArray(E)?E.includes({...i,...l}[x]):{...i,...l}[x]===E})?[...h,g,v]:h},[]);return GA(n,a,d,t?.class,t?.className)},Gz=Ek("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-button-primary text-button-primary-foreground hover:bg-button-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Rt=ot.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?zz:"button";return y.jsx(a,{className:ut(Gz({variant:e,size:t,className:n})),ref:i,...s})});Rt.displayName="Button";const nh=({icon:n,text:e,active:t,onClick:r,collapsed:s,isBottomIcon:i=!1,hideActiveIndicator:a=!1,customStyle:l="",activeStyle:d=""})=>y.jsxs("li",{className:ut(`
      relative flex items-center py-2 px-3 font-medium rounded-md cursor-pointer
      transition-colors group text-sm`,t?d||"bg-primary text-primary-foreground":`text-muted-foreground/80 dark:text-foreground/80 hover:bg-accent hover:text-accent-foreground ${i&&s?"py-2 justify-center":""}`,l),onClick:r,children:[y.jsx(n,{className:`w-4 h-4 ${s?"mx-auto":"mr-3"}`}),!s&&y.jsx("span",{className:"transition-opacity duration-300",children:e}),!s&&t&&!a&&y.jsx(Zn.div,{layoutId:"activeIndicator",className:"absolute -left-1 w-1 h-5 bg-button-primary-foreground rounded-r-md",initial:!1,animate:{opacity:1},transition:{type:"spring",stiffness:300,damping:30}}),s&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
        invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:e})]}),Kz=({activeTab:n,setActiveTab:e,collapsed:t,setCollapsed:r})=>{const{user:s,logout:i,settings:a,isFeatureEnabled:l}=ds(),{theme:d}=lE(),h=Rh(),f=async()=>{try{await i(),h("/login")}catch(W){console.error("Erro no Logout:",W.message)}},g=[{id:"dashboard",text:"Dashboard",icon:nz,path:"/dashboard",feature:null},{id:"workflow",text:"Trabalhos",icon:Gp,path:"/workflow",feature:null},{id:"clients",text:"Clientes",icon:vk,path:"/clients",feature:null},{id:"financial",text:"Financeiro",icon:Xp,path:"/financial",feature:null},{id:"calendar",text:"Agenda",icon:lk,path:"/calendar",feature:"agenda_pro"},{id:"reports",text:"Relatrios",icon:ok,path:"/reports",feature:"relatorios"},{id:"service-packages",text:"Pacotes",icon:Gp,path:"/service-packages",feature:"pacotes_servico"},{id:"my-setup",text:"Meu Setup",icon:dk,path:"/my-setup",feature:"meu_setup"},{id:"precifique",text:"Precifique",icon:Kp,path:"/precifique",feature:"precifique"},{id:"reserva-inteligente",text:"Reserva",icon:b_,path:"/reserva-inteligente",feature:"reserva_inteligente"}].filter(W=>!W.feature||l(W.feature)),v=a?.user_name||s?.user_metadata?.full_name||s?.email||"Usurio",_=a?.contact_email||s?.email||"No informado",S=a?.profile_photo||s?.user_metadata?.avatar_url,x="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20escuro%20gofotografo.png",E="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png",P="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//favicon%20gofotografo.png",M=a?.logo,R=M||(d==="dark"?x:E),I=M||P,O=()=>{e("account-settings"),h("/account-settings")},F=(W,K)=>{e(W),h(K),W==="quadros"&&!t?r(!0):W!=="quadros"&&t&&K.startsWith("/quadros")};return y.jsxs(Zn.nav,{initial:!1,animate:{width:t?"4rem":"16rem"},className:`
        h-screen bg-card border-r border-border 
        flex flex-col p-2 transition-width duration-300 ease-in-out fixed left-0 top-0 z-30 hidden md:flex
      `,children:[y.jsx("div",{className:"flex items-center justify-center h-16 pt-4 mb-4",children:y.jsx(vO,{to:"/dashboard",onClick:()=>F("dashboard","/dashboard"),children:y.jsx(ji,{mode:"wait",initial:!1,children:y.jsx(Zn.img,{src:t?I:R,alt:"Logotipo",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`transition-all duration-300 ${t?"h-8 w-auto":"h-9 w-auto"}`},t?"collapsed":"full")})})}),y.jsx("ul",{className:"flex-grow space-y-3 overflow-y-auto overflow-x-hidden scrollbar-thin",children:g.map(W=>y.jsx(nh,{icon:W.icon,text:W.text,active:n===W.id,onClick:()=>F(W.id,W.path),collapsed:t,customStyle:W.customStyle},W.id))}),!1,y.jsx("div",{className:"border-t border-border/50 my-2"}),l("propostas_avancadas")&&y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:ez,text:"GO.STUDIO",active:n==="studio",onClick:()=>F("studio","/studio"),collapsed:t})}),l("quadros")&&y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:gk,text:"Quadros",active:n==="quadros",onClick:()=>F("quadros","/quadros"),collapsed:t,hideActiveIndicator:!1})}),y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:y_,text:"Indique e Ganhe",active:n==="referrals",onClick:()=>F("referrals","/referrals"),collapsed:t,customStyle:"border border-green-500/50 text-green-400 hover:bg-green-500/10 rounded-md",activeStyle:"bg-green-500/10 text-green-400",hideActiveIndicator:!0})}),y.jsxs("div",{className:"mt-auto border-t border-border pt-2",children:[y.jsxs("div",{className:`
            flex items-center p-2 rounded-lg cursor-pointer
            ${t?"justify-center":"justify-start"}
            hover:bg-accent transition-colors group
          `,onClick:O,title:"Minha Conta",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-foreground border-2 border-button-primary-foreground overflow-hidden flex-shrink-0",children:S?y.jsx("img",{src:S,alt:v,className:"w-full h-full object-cover"}):v?.charAt(0).toUpperCase()}),!t&&y.jsxs("div",{className:"ml-2 overflow-hidden",children:[y.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:v}),y.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:_})]}),t&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
              invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:v})]}),y.jsxs("div",{className:`flex ${t?"flex-col items-center space-y-1":"items-center justify-around"} mt-1`,children:[y.jsx(nh,{icon:mk,text:"Configuraes",active:n==="settings",onClick:()=>F("settings","/settings"),collapsed:t,isBottomIcon:!0}),y.jsx(nh,{icon:hk,text:"Sair",active:!1,onClick:f,collapsed:t,isBottomIcon:!0})]})]})]})};function Fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Yz(n,e){const t=A.createContext(e),r=i=>{const{children:a,...l}=i,d=A.useMemo(()=>l,Object.values(l));return y.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function s(i){const a=A.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function So(n,e=[]){let t=[];function r(i,a){const l=A.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:_,...S}=g,x=v?.[n]?.[d]||l,E=A.useMemo(()=>S,Object.values(S));return y.jsx(x.Provider,{value:E,children:_})};h.displayName=i+"Provider";function f(g,v){const _=v?.[n]?.[d]||l,S=A.useContext(_);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=t.map(a=>A.createContext(a));return function(l){const d=l?.[n]||i;return A.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return s.scopeName=n,[r,Xz(s,...e)]}function Xz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:d,scopeName:h})=>{const g=d(i)[`__scope${h}`];return{...l,...g}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var Mn=globalThis?.document?A.useLayoutEffect:()=>{},Qz=Ob[" useInsertionEffect ".trim().toString()]||Mn;function Ah({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=Jz({defaultProp:e,onChange:t}),l=n!==void 0,d=l?n:s;{const f=A.useRef(n!==void 0);A.useEffect(()=>{const g=f.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=A.useCallback(f=>{if(l){const g=Zz(f)?f(n):f;g!==n&&a.current?.(g)}else i(f)},[l,n,i,a]);return[d,h]}function Jz({defaultProp:n,onChange:e}){const[t,r]=A.useState(n),s=A.useRef(t),i=A.useRef(e);return Qz(()=>{i.current=e},[e]),A.useEffect(()=>{s.current!==t&&(i.current?.(t),s.current=t)},[t,s]),[t,r,i]}function Zz(n){return typeof n=="function"}var eV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nt=eV.reduce((n,e)=>{const t=nu(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:a,...l}=s,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(d,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function kk(n,e){n&&om.flushSync(()=>n.dispatchEvent(e))}function S_(n){const e=n+"CollectionProvider",[t,r]=So(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:E,children:P}=x,M=ot.useRef(null),R=ot.useRef(new Map).current;return y.jsx(s,{scope:E,itemMap:R,collectionRef:M,children:P})};a.displayName=e;const l=n+"CollectionSlot",d=nu(l),h=ot.forwardRef((x,E)=>{const{scope:P,children:M}=x,R=i(l,P),I=xt(E,R.collectionRef);return y.jsx(d,{ref:I,children:M})});h.displayName=l;const f=n+"CollectionItemSlot",g="data-radix-collection-item",v=nu(f),_=ot.forwardRef((x,E)=>{const{scope:P,children:M,...R}=x,I=ot.useRef(null),O=xt(E,I),F=i(f,P);return ot.useEffect(()=>(F.itemMap.set(I,{ref:I,...R}),()=>void F.itemMap.delete(I))),y.jsx(v,{[g]:"",ref:O,children:M})});_.displayName=f;function S(x){const E=i(n+"CollectionConsumer",x);return ot.useCallback(()=>{const M=E.collectionRef.current;if(!M)return[];const R=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((F,$)=>R.indexOf(F.ref.current)-R.indexOf($.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:a,Slot:h,ItemSlot:_},S,r]}var tV=A.createContext(void 0);function py(n){const e=A.useContext(tV);return n||e||"ltr"}function Jn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>e.current?.(...t),[])}function nV(n,e=globalThis?.document){const t=Jn(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var rV="DismissableLayer",db="dismissableLayer.update",sV="dismissableLayer.pointerDownOutside",iV="dismissableLayer.focusOutside",KA,Tk=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),my=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...d}=n,h=A.useContext(Tk),[f,g]=A.useState(null),v=f?.ownerDocument??globalThis?.document,[,_]=A.useState({}),S=xt(e,$=>g($)),x=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(E),M=f?x.indexOf(f):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,I=M>=P,O=lV($=>{const W=$.target,K=[...h.branches].some(ce=>ce.contains(W));!I||K||(s?.($),a?.($),$.defaultPrevented||l?.())},v),F=cV($=>{const W=$.target;[...h.branches].some(ce=>ce.contains(W))||(i?.($),a?.($),$.defaultPrevented||l?.())},v);return nV($=>{M===h.layers.size-1&&(r?.($),!$.defaultPrevented&&l&&($.preventDefault(),l()))},v),A.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(KA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),YA(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=KA)}},[f,v,t,h]),A.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),YA())},[f,h]),A.useEffect(()=>{const $=()=>_({});return document.addEventListener(db,$),()=>document.removeEventListener(db,$)},[]),y.jsx(nt.div,{...d,ref:S,style:{pointerEvents:R?I?"auto":"none":void 0,...n.style},onFocusCapture:Fe(n.onFocusCapture,F.onFocusCapture),onBlurCapture:Fe(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:Fe(n.onPointerDownCapture,O.onPointerDownCapture)})});my.displayName=rV;var oV="DismissableLayerBranch",aV=A.forwardRef((n,e)=>{const t=A.useContext(Tk),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),y.jsx(nt.div,{...n,ref:s})});aV.displayName=oV;function lV(n,e=globalThis?.document){const t=Jn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let d=function(){Pk(sV,t,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function cV(n,e=globalThis?.document){const t=Jn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&Pk(iV,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YA(){const n=new CustomEvent(db);document.dispatchEvent(n)}function Pk(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?kk(s,i):s.dispatchEvent(i)}var mw=0;function A_(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??XA()),document.body.insertAdjacentElement("beforeend",n[1]??XA()),mw++,()=>{mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),mw--}},[])}function XA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var gw="focusScope.autoFocusOnMount",vw="focusScope.autoFocusOnUnmount",QA={bubbles:!1,cancelable:!0},uV="FocusScope",gy=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[l,d]=A.useState(null),h=Jn(s),f=Jn(i),g=A.useRef(null),v=xt(e,x=>d(x)),_=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let x=function(R){if(_.paused||!l)return;const I=R.target;l.contains(I)?g.current=I:vl(g.current,{select:!0})},E=function(R){if(_.paused||!l)return;const I=R.relatedTarget;I!==null&&(l.contains(I)||vl(g.current,{select:!0}))},P=function(R){if(document.activeElement===document.body)for(const O of R)O.removedNodes.length>0&&vl(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const M=new MutationObserver(P);return l&&M.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),M.disconnect()}}},[r,l,_.paused]),A.useEffect(()=>{if(l){ZA.add(_);const x=document.activeElement;if(!l.contains(x)){const P=new CustomEvent(gw,QA);l.addEventListener(gw,h),l.dispatchEvent(P),P.defaultPrevented||(dV(gV(Rk(l)),{select:!0}),document.activeElement===x&&vl(l))}return()=>{l.removeEventListener(gw,h),setTimeout(()=>{const P=new CustomEvent(vw,QA);l.addEventListener(vw,f),l.dispatchEvent(P),P.defaultPrevented||vl(x??document.body,{select:!0}),l.removeEventListener(vw,f),ZA.remove(_)},0)}}},[l,h,f,_]);const S=A.useCallback(x=>{if(!t&&!r||_.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,P=document.activeElement;if(E&&P){const M=x.currentTarget,[R,I]=hV(M);R&&I?!x.shiftKey&&P===I?(x.preventDefault(),t&&vl(R,{select:!0})):x.shiftKey&&P===R&&(x.preventDefault(),t&&vl(I,{select:!0})):P===M&&x.preventDefault()}},[t,r,_.paused]);return y.jsx(nt.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});gy.displayName=uV;function dV(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(vl(r,{select:e}),document.activeElement!==t)return}function hV(n){const e=Rk(n),t=JA(e,n),r=JA(e.reverse(),n);return[t,r]}function Rk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JA(n,e){for(const t of n)if(!fV(t,{upTo:e}))return t}function fV(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function pV(n){return n instanceof HTMLInputElement&&"select"in n}function vl(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&pV(n)&&e&&n.select()}}var ZA=mV();function mV(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=eC(n,e),n.unshift(e)},remove(e){n=eC(n,e),n[0]?.resume()}}}function eC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function gV(n){return n.filter(e=>e.tagName!=="A")}var vV=Ob[" useId ".trim().toString()]||(()=>{}),yV=0;function wa(n){const[e,t]=A.useState(vV());return Mn(()=>{t(r=>r??String(yV++))},[n]),e?`radix-${e}`:""}const wV=["top","right","bottom","left"],Tl=Math.min,Ps=Math.max,Vv=Math.round,av=Math.floor,bo=n=>({x:n,y:n}),bV={left:"right",right:"left",bottom:"top",top:"bottom"},_V={start:"end",end:"start"};function hb(n,e,t){return Ps(n,Tl(e,t))}function xa(n,e){return typeof n=="function"?n(e):n}function Sa(n){return n.split("-")[0]}function Dh(n){return n.split("-")[1]}function C_(n){return n==="x"?"y":"x"}function E_(n){return n==="y"?"height":"width"}function yo(n){return["top","bottom"].includes(Sa(n))?"y":"x"}function k_(n){return C_(yo(n))}function xV(n,e,t){t===void 0&&(t=!1);const r=Dh(n),s=k_(n),i=E_(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Hv(a)),[a,Hv(a)]}function SV(n){const e=Hv(n);return[fb(n),e,fb(e)]}function fb(n){return n.replace(/start|end/g,e=>_V[e])}function AV(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function CV(n,e,t,r){const s=Dh(n);let i=AV(Sa(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(fb)))),i}function Hv(n){return n.replace(/left|right|bottom|top/g,e=>bV[e])}function EV(n){return{top:0,right:0,bottom:0,left:0,...n}}function Mk(n){return typeof n!="number"?EV(n):{top:n,right:n,bottom:n,left:n}}function Wv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function tC(n,e,t){let{reference:r,floating:s}=n;const i=yo(e),a=k_(e),l=E_(a),d=Sa(e),h=i==="y",f=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let _;switch(d){case"top":_={x:f,y:r.y-s.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:g};break;case"left":_={x:r.x-s.width,y:g};break;default:_={x:r.x,y:r.y}}switch(Dh(e)){case"start":_[a]-=v*(t&&h?-1:1);break;case"end":_[a]+=v*(t&&h?-1:1);break}return _}const kV=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,l=i.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:f,y:g}=tC(h,r,d),v=r,_={},S=0;for(let x=0;x<l.length;x++){const{name:E,fn:P}=l[x],{x:M,y:R,data:I,reset:O}=await P({x:f,y:g,initialPlacement:r,placement:v,strategy:s,middlewareData:_,rects:h,platform:a,elements:{reference:n,floating:e}});f=M??f,g=R??g,_={..._,[E]:{..._[E],...I}},O&&S<=50&&(S++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(h=O.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):O.rects),{x:f,y:g}=tC(h,v,d)),x=-1)}return{x:f,y:g,placement:v,strategy:s,middlewareData:_}};async function Qp(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:v=!1,padding:_=0}=xa(e,n),S=Mk(_),E=l[v?g==="floating"?"reference":"floating":g],P=Wv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(E)))==null||t?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),M=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(R))?await(i.getScale==null?void 0:i.getScale(R))||{x:1,y:1}:{x:1,y:1},O=Wv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:M,offsetParent:R,strategy:d}):M);return{top:(P.top-O.top+S.top)/I.y,bottom:(O.bottom-P.bottom+S.bottom)/I.y,left:(P.left-O.left+S.left)/I.x,right:(O.right-P.right+S.right)/I.x}}const TV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:d}=e,{element:h,padding:f=0}=xa(n,e)||{};if(h==null)return{};const g=Mk(f),v={x:t,y:r},_=k_(s),S=E_(_),x=await a.getDimensions(h),E=_==="y",P=E?"top":"left",M=E?"bottom":"right",R=E?"clientHeight":"clientWidth",I=i.reference[S]+i.reference[_]-v[_]-i.floating[S],O=v[_]-i.reference[_],F=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let $=F?F[R]:0;(!$||!await(a.isElement==null?void 0:a.isElement(F)))&&($=l.floating[R]||i.floating[S]);const W=I/2-O/2,K=$/2-x[S]/2-1,ce=Tl(g[P],K),pe=Tl(g[M],K),ue=ce,fe=$-x[S]-pe,ne=$/2-x[S]/2+W,H=hb(ue,ne,fe),q=!d.arrow&&Dh(s)!=null&&ne!==H&&i.reference[S]/2-(ne<ue?ce:pe)-x[S]/2<0,te=q?ne<ue?ne-ue:ne-fe:0;return{[_]:v[_]+te,data:{[_]:H,centerOffset:ne-H-te,...q&&{alignmentOffset:te}},reset:q}}}),PV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...E}=xa(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const P=Sa(s),M=yo(l),R=Sa(l)===l,I=await(d.isRTL==null?void 0:d.isRTL(h.floating)),O=v||(R||!x?[Hv(l)]:SV(l)),F=S!=="none";!v&&F&&O.push(...CV(l,x,S,I));const $=[l,...O],W=await Qp(e,E),K=[];let ce=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&K.push(W[P]),g){const ne=xV(s,a,I);K.push(W[ne[0]],W[ne[1]])}if(ce=[...ce,{placement:s,overflows:K}],!K.every(ne=>ne<=0)){var pe,ue;const ne=(((pe=i.flip)==null?void 0:pe.index)||0)+1,H=$[ne];if(H&&(!(g==="alignment"?M!==yo(H):!1)||ce.every(z=>z.overflows[0]>0&&yo(z.placement)===M)))return{data:{index:ne,overflows:ce},reset:{placement:H}};let q=(ue=ce.filter(te=>te.overflows[0]<=0).sort((te,z)=>te.overflows[1]-z.overflows[1])[0])==null?void 0:ue.placement;if(!q)switch(_){case"bestFit":{var fe;const te=(fe=ce.filter(z=>{if(F){const re=yo(z.placement);return re===M||re==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(re=>re>0).reduce((re,Z)=>re+Z,0)]).sort((z,re)=>z[1]-re[1])[0])==null?void 0:fe[0];te&&(q=te);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function nC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function rC(n){return wV.some(e=>n[e]>=0)}const RV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=xa(n,e);switch(r){case"referenceHidden":{const i=await Qp(e,{...s,elementContext:"reference"}),a=nC(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rC(a)}}}case"escaped":{const i=await Qp(e,{...s,altBoundary:!0}),a=nC(i,t.floating);return{data:{escapedOffsets:a,escaped:rC(a)}}}default:return{}}}}};async function MV(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Sa(t),l=Dh(t),d=yo(t)==="y",h=["left","top"].includes(a)?-1:1,f=i&&d?-1:1,g=xa(e,n);let{mainAxis:v,crossAxis:_,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(_=l==="end"?S*-1:S),d?{x:_*f,y:v*h}:{x:v*h,y:_*f}}const IV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:l}=e,d=await MV(e,n);return a===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:a}}}}},DV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:E=>{let{x:P,y:M}=E;return{x:P,y:M}}},...d}=xa(n,e),h={x:t,y:r},f=await Qp(e,d),g=yo(Sa(s)),v=C_(g);let _=h[v],S=h[g];if(i){const E=v==="y"?"top":"left",P=v==="y"?"bottom":"right",M=_+f[E],R=_-f[P];_=hb(M,_,R)}if(a){const E=g==="y"?"top":"left",P=g==="y"?"bottom":"right",M=S+f[E],R=S-f[P];S=hb(M,S,R)}const x=l.fn({...e,[v]:_,[g]:S});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:i,[g]:a}}}}}},NV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=xa(n,e),f={x:t,y:r},g=yo(s),v=C_(g);let _=f[v],S=f[g];const x=xa(l,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const R=v==="y"?"height":"width",I=i.reference[v]-i.floating[R]+E.mainAxis,O=i.reference[v]+i.reference[R]-E.mainAxis;_<I?_=I:_>O&&(_=O)}if(h){var P,M;const R=v==="y"?"width":"height",I=["top","left"].includes(Sa(s)),O=i.reference[g]-i.floating[R]+(I&&((P=a.offset)==null?void 0:P[g])||0)+(I?0:E.crossAxis),F=i.reference[g]+i.reference[R]+(I?0:((M=a.offset)==null?void 0:M[g])||0)-(I?E.crossAxis:0);S<O?S=O:S>F&&(S=F)}return{[v]:_,[g]:S}}}},OV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:d=()=>{},...h}=xa(n,e),f=await Qp(e,h),g=Sa(s),v=Dh(s),_=yo(s)==="y",{width:S,height:x}=i.floating;let E,P;g==="top"||g==="bottom"?(E=g,P=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(P=g,E=v==="end"?"top":"bottom");const M=x-f.top-f.bottom,R=S-f.left-f.right,I=Tl(x-f[E],M),O=Tl(S-f[P],R),F=!e.middlewareData.shift;let $=I,W=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(W=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=M),F&&!v){const ce=Ps(f.left,0),pe=Ps(f.right,0),ue=Ps(f.top,0),fe=Ps(f.bottom,0);_?W=S-2*(ce!==0||pe!==0?ce+pe:Ps(f.left,f.right)):$=x-2*(ue!==0||fe!==0?ue+fe:Ps(f.top,f.bottom))}await d({...e,availableWidth:W,availableHeight:$});const K=await a.getDimensions(l.floating);return S!==K.width||x!==K.height?{reset:{rects:!0}}:{}}}};function vy(){return typeof window<"u"}function Nh(n){return Ik(n)?(n.nodeName||"").toLowerCase():"#document"}function Rs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ao(n){var e;return(e=(Ik(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ik(n){return vy()?n instanceof Node||n instanceof Rs(n).Node:!1}function Fi(n){return vy()?n instanceof Element||n instanceof Rs(n).Element:!1}function _o(n){return vy()?n instanceof HTMLElement||n instanceof Rs(n).HTMLElement:!1}function sC(n){return!vy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Rs(n).ShadowRoot}function fm(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Bi(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function LV(n){return["table","td","th"].includes(Nh(n))}function yy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function T_(n){const e=P_(),t=Fi(n)?Bi(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function jV(n){let e=Pl(n);for(;_o(e)&&!Ch(e);){if(T_(e))return e;if(yy(e))return null;e=Pl(e)}return null}function P_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ch(n){return["html","body","#document"].includes(Nh(n))}function Bi(n){return Rs(n).getComputedStyle(n)}function wy(n){return Fi(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Pl(n){if(Nh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||sC(n)&&n.host||Ao(n);return sC(e)?e.host:e}function Dk(n){const e=Pl(n);return Ch(e)?n.ownerDocument?n.ownerDocument.body:n.body:_o(e)&&fm(e)?e:Dk(e)}function Jp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Dk(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=Rs(s);if(i){const l=pb(a);return e.concat(a,a.visualViewport||[],fm(s)?s:[],l&&t?Jp(l):[])}return e.concat(s,Jp(s,[],t))}function pb(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Nk(n){const e=Bi(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_o(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,l=Vv(t)!==i||Vv(r)!==a;return l&&(t=i,r=a),{width:t,height:r,$:l}}function R_(n){return Fi(n)?n:n.contextElement}function ph(n){const e=R_(n);if(!_o(e))return bo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=Nk(e);let a=(i?Vv(t.width):t.width)/r,l=(i?Vv(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const FV=bo(0);function Ok(n){const e=Rs(n);return!P_()||!e.visualViewport?FV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Rs(n)?!1:e}function ru(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=R_(n);let a=bo(1);e&&(r?Fi(r)&&(a=ph(r)):a=ph(n));const l=BV(i,t,r)?Ok(i):bo(0);let d=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,f=s.width/a.x,g=s.height/a.y;if(i){const v=Rs(i),_=r&&Fi(r)?Rs(r):r;let S=v,x=pb(S);for(;x&&r&&_!==S;){const E=ph(x),P=x.getBoundingClientRect(),M=Bi(x),R=P.left+(x.clientLeft+parseFloat(M.paddingLeft))*E.x,I=P.top+(x.clientTop+parseFloat(M.paddingTop))*E.y;d*=E.x,h*=E.y,f*=E.x,g*=E.y,d+=R,h+=I,S=Rs(x),x=pb(S)}}return Wv({width:f,height:g,x:d,y:h})}function M_(n,e){const t=wy(n).scrollLeft;return e?e.left+t:ru(Ao(n)).left+t}function Lk(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:M_(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function $V(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=Ao(r),l=e?yy(e.floating):!1;if(r===a||l&&i)return t;let d={scrollLeft:0,scrollTop:0},h=bo(1);const f=bo(0),g=_o(r);if((g||!g&&!i)&&((Nh(r)!=="body"||fm(a))&&(d=wy(r)),_o(r))){const _=ru(r);h=ph(r),f.x=_.x+r.clientLeft,f.y=_.y+r.clientTop}const v=a&&!g&&!i?Lk(a,d,!0):bo(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+v.x,y:t.y*h.y-d.scrollTop*h.y+f.y+v.y}}function UV(n){return Array.from(n.getClientRects())}function zV(n){const e=Ao(n),t=wy(n),r=n.ownerDocument.body,s=Ps(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ps(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+M_(n);const l=-t.scrollTop;return Bi(r).direction==="rtl"&&(a+=Ps(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function VV(n,e){const t=Rs(n),r=Ao(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,d=0;if(s){i=s.width,a=s.height;const h=P_();(!h||h&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:i,height:a,x:l,y:d}}function HV(n,e){const t=ru(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=_o(n)?ph(n):bo(1),a=n.clientWidth*i.x,l=n.clientHeight*i.y,d=s*i.x,h=r*i.y;return{width:a,height:l,x:d,y:h}}function iC(n,e,t){let r;if(e==="viewport")r=VV(n,t);else if(e==="document")r=zV(Ao(n));else if(Fi(e))r=HV(e,t);else{const s=Ok(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Wv(r)}function jk(n,e){const t=Pl(n);return t===e||!Fi(t)||Ch(t)?!1:Bi(t).position==="fixed"||jk(t,e)}function WV(n,e){const t=e.get(n);if(t)return t;let r=Jp(n,[],!1).filter(l=>Fi(l)&&Nh(l)!=="body"),s=null;const i=Bi(n).position==="fixed";let a=i?Pl(n):n;for(;Fi(a)&&!Ch(a);){const l=Bi(a),d=T_(a);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||fm(a)&&!d&&jk(n,a))?r=r.filter(f=>f!==a):s=l,a=Pl(a)}return e.set(n,r),r}function qV(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?yy(e)?[]:WV(e,this._c):[].concat(t),r],l=a[0],d=a.reduce((h,f)=>{const g=iC(e,f,s);return h.top=Ps(g.top,h.top),h.right=Tl(g.right,h.right),h.bottom=Tl(g.bottom,h.bottom),h.left=Ps(g.left,h.left),h},iC(e,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function GV(n){const{width:e,height:t}=Nk(n);return{width:e,height:t}}function KV(n,e,t){const r=_o(e),s=Ao(e),i=t==="fixed",a=ru(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const d=bo(0);function h(){d.x=M_(s)}if(r||!r&&!i)if((Nh(e)!=="body"||fm(s))&&(l=wy(e)),r){const _=ru(e,!0,i,e);d.x=_.x+e.clientLeft,d.y=_.y+e.clientTop}else s&&h();i&&!r&&s&&h();const f=s&&!r&&!i?Lk(s,l):bo(0),g=a.left+l.scrollLeft-d.x-f.x,v=a.top+l.scrollTop-d.y-f.y;return{x:g,y:v,width:a.width,height:a.height}}function yw(n){return Bi(n).position==="static"}function oC(n,e){if(!_o(n)||Bi(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ao(n)===t&&(t=t.ownerDocument.body),t}function Fk(n,e){const t=Rs(n);if(yy(n))return t;if(!_o(n)){let s=Pl(n);for(;s&&!Ch(s);){if(Fi(s)&&!yw(s))return s;s=Pl(s)}return t}let r=oC(n,e);for(;r&&LV(r)&&yw(r);)r=oC(r,e);return r&&Ch(r)&&yw(r)&&!T_(r)?t:r||jV(n)||t}const YV=async function(n){const e=this.getOffsetParent||Fk,t=this.getDimensions,r=await t(n.floating);return{reference:KV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XV(n){return Bi(n).direction==="rtl"}const QV={convertOffsetParentRelativeRectToViewportRelativeRect:$V,getDocumentElement:Ao,getClippingRect:qV,getOffsetParent:Fk,getElementRects:YV,getClientRects:UV,getDimensions:GV,getScale:ph,isElement:Fi,isRTL:XV};function Bk(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function JV(n,e){let t=null,r;const s=Ao(n);function i(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const h=n.getBoundingClientRect(),{left:f,top:g,width:v,height:_}=h;if(l||e(),!v||!_)return;const S=av(g),x=av(s.clientWidth-(f+v)),E=av(s.clientHeight-(g+_)),P=av(f),R={rootMargin:-S+"px "+-x+"px "+-E+"px "+-P+"px",threshold:Ps(0,Tl(1,d))||1};let I=!0;function O(F){const $=F[0].intersectionRatio;if($!==d){if(!I)return a();$?a(!1,$):r=setTimeout(()=>{a(!1,1e-7)},1e3)}$===1&&!Bk(h,n.getBoundingClientRect())&&a(),I=!1}try{t=new IntersectionObserver(O,{...R,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,R)}t.observe(n)}return a(!0),i}function ZV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=R_(n),f=s||i?[...h?Jp(h):[],...Jp(e)]:[];f.forEach(P=>{s&&P.addEventListener("scroll",t,{passive:!0}),i&&P.addEventListener("resize",t)});const g=h&&l?JV(h,t):null;let v=-1,_=null;a&&(_=new ResizeObserver(P=>{let[M]=P;M&&M.target===h&&_&&(_.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=_)==null||R.observe(e)})),t()}),h&&!d&&_.observe(h),_.observe(e));let S,x=d?ru(n):null;d&&E();function E(){const P=ru(n);x&&!Bk(x,P)&&t(),x=P,S=requestAnimationFrame(E)}return t(),()=>{var P;f.forEach(M=>{s&&M.removeEventListener("scroll",t),i&&M.removeEventListener("resize",t)}),g?.(),(P=_)==null||P.disconnect(),_=null,d&&cancelAnimationFrame(S)}}const e4=IV,t4=DV,n4=PV,r4=OV,s4=RV,aC=TV,i4=NV,o4=(n,e,t)=>{const r=new Map,s={platform:QV,...t},i={...s.platform,_c:r};return kV(n,e,{...s,platform:i})};var a4=typeof document<"u",l4=function(){},Cv=a4?A.useLayoutEffect:l4;function qv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!qv(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!qv(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function $k(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function lC(n,e){const t=$k(n);return Math.round(e*t)/t}function ww(n){const e=A.useRef(n);return Cv(()=>{e.current=n}),e}function c4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:d,open:h}=n,[f,g]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,_]=A.useState(r);qv(v,r)||_(r);const[S,x]=A.useState(null),[E,P]=A.useState(null),M=A.useCallback(z=>{z!==F.current&&(F.current=z,x(z))},[]),R=A.useCallback(z=>{z!==$.current&&($.current=z,P(z))},[]),I=i||S,O=a||E,F=A.useRef(null),$=A.useRef(null),W=A.useRef(f),K=d!=null,ce=ww(d),pe=ww(s),ue=ww(h),fe=A.useCallback(()=>{if(!F.current||!$.current)return;const z={placement:e,strategy:t,middleware:v};pe.current&&(z.platform=pe.current),o4(F.current,$.current,z).then(re=>{const Z={...re,isPositioned:ue.current!==!1};ne.current&&!qv(W.current,Z)&&(W.current=Z,om.flushSync(()=>{g(Z)}))})},[v,e,t,pe,ue]);Cv(()=>{h===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const ne=A.useRef(!1);Cv(()=>(ne.current=!0,()=>{ne.current=!1}),[]),Cv(()=>{if(I&&(F.current=I),O&&($.current=O),I&&O){if(ce.current)return ce.current(I,O,fe);fe()}},[I,O,fe,ce,K]);const H=A.useMemo(()=>({reference:F,floating:$,setReference:M,setFloating:R}),[M,R]),q=A.useMemo(()=>({reference:I,floating:O}),[I,O]),te=A.useMemo(()=>{const z={position:t,left:0,top:0};if(!q.floating)return z;const re=lC(q.floating,f.x),Z=lC(q.floating,f.y);return l?{...z,transform:"translate("+re+"px, "+Z+"px)",...$k(q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:re,top:Z}},[t,l,q.floating,f.x,f.y]);return A.useMemo(()=>({...f,update:fe,refs:H,elements:q,floatingStyles:te}),[f,fe,H,q,te])}const u4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?aC({element:r.current,padding:s}).fn(t):{}:r?aC({element:r,padding:s}).fn(t):{}}}},d4=(n,e)=>({...e4(n),options:[n,e]}),h4=(n,e)=>({...t4(n),options:[n,e]}),f4=(n,e)=>({...i4(n),options:[n,e]}),p4=(n,e)=>({...n4(n),options:[n,e]}),m4=(n,e)=>({...r4(n),options:[n,e]}),g4=(n,e)=>({...s4(n),options:[n,e]}),v4=(n,e)=>({...u4(n),options:[n,e]});var y4="Arrow",Uk=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return y.jsx(nt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Uk.displayName=y4;var w4=Uk;function zk(n){const[e,t]=A.useState(void 0);return Mn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,l=h.blockSize}else a=n.offsetWidth,l=n.offsetHeight;t({width:a,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var I_="Popper",[Vk,by]=So(I_),[b4,Hk]=Vk(I_),Wk=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return y.jsx(b4,{scope:e,anchor:r,onAnchorChange:s,children:t})};Wk.displayName=I_;var qk="PopperAnchor",Gk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=Hk(qk,t),a=A.useRef(null),l=xt(e,a);return A.useEffect(()=>{i.onAnchorChange(r?.current||a.current)}),r?null:y.jsx(nt.div,{...s,ref:l})});Gk.displayName=qk;var D_="PopperContent",[_4,x4]=Vk(D_),Kk=A.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:_="optimized",onPlaced:S,...x}=n,E=Hk(D_,t),[P,M]=A.useState(null),R=xt(e,ve=>M(ve)),[I,O]=A.useState(null),F=zk(I),$=F?.width??0,W=F?.height??0,K=r+(i!=="center"?"-"+i:""),ce=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},pe=Array.isArray(h)?h:[h],ue=pe.length>0,fe={padding:ce,boundary:pe.filter(A4),altBoundary:ue},{refs:ne,floatingStyles:H,placement:q,isPositioned:te,middlewareData:z}=c4({strategy:"fixed",placement:K,whileElementsMounted:(...ve)=>ZV(...ve,{animationFrame:_==="always"}),elements:{reference:E.anchor},middleware:[d4({mainAxis:s+W,alignmentAxis:a}),d&&h4({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?f4():void 0,...fe}),d&&p4({...fe}),m4({...fe,apply:({elements:ve,rects:Ne,availableWidth:He,availableHeight:Ye})=>{const{width:it,height:Mt}=Ne.reference,un=ve.floating.style;un.setProperty("--radix-popper-available-width",`${He}px`),un.setProperty("--radix-popper-available-height",`${Ye}px`),un.setProperty("--radix-popper-anchor-width",`${it}px`),un.setProperty("--radix-popper-anchor-height",`${Mt}px`)}}),I&&v4({element:I,padding:l}),C4({arrowWidth:$,arrowHeight:W}),v&&g4({strategy:"referenceHidden",...fe})]}),[re,Z]=Qk(q),B=Jn(S);Mn(()=>{te&&B?.()},[te,B]);const X=z.arrow?.x,ae=z.arrow?.y,ye=z.arrow?.centerOffset!==0,[Me,Pe]=A.useState();return Mn(()=>{P&&Pe(window.getComputedStyle(P).zIndex)},[P]),y.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:te?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(_4,{scope:t,placedSide:re,onArrowChange:O,arrowX:X,arrowY:ae,shouldHideArrow:ye,children:y.jsx(nt.div,{"data-side":re,"data-align":Z,...x,ref:R,style:{...x.style,animation:te?void 0:"none"}})})})});Kk.displayName=D_;var Yk="PopperArrow",S4={top:"bottom",right:"left",bottom:"top",left:"right"},Xk=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=x4(Yk,r),a=S4[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(w4,{...s,ref:t,style:{...s.style,display:"block"}})})});Xk.displayName=Yk;function A4(n){return n!==null}var C4=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,l=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[h,f]=Qk(t),g={start:"0%",center:"50%",end:"100%"}[f],v=(s.arrow?.x??0)+l/2,_=(s.arrow?.y??0)+d/2;let S="",x="";return h==="bottom"?(S=a?g:`${v}px`,x=`${-d}px`):h==="top"?(S=a?g:`${v}px`,x=`${r.floating.height+d}px`):h==="right"?(S=`${-d}px`,x=a?g:`${_}px`):h==="left"&&(S=`${r.floating.width+d}px`,x=a?g:`${_}px`),{data:{x:S,y:x}}}});function Qk(n){const[e,t="center"]=n.split("-");return[e,t]}var Jk=Wk,Zk=Gk,eT=Kk,tT=Xk,E4="Portal",_y=A.forwardRef((n,e)=>{const{container:t,...r}=n,[s,i]=A.useState(!1);Mn(()=>i(!0),[]);const a=t||s&&globalThis?.document?.body;return a?mN.createPortal(y.jsx(nt.div,{...r,ref:e}),a):null});_y.displayName=E4;function k4(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var Is=n=>{const{present:e,children:t}=n,r=T4(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,P4(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};Is.displayName="Presence";function T4(n){const[e,t]=A.useState(),r=A.useRef(null),s=A.useRef(n),i=A.useRef("none"),a=n?"mounted":"unmounted",[l,d]=k4(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const h=lv(r.current);i.current=l==="mounted"?h:"none"},[l]),Mn(()=>{const h=r.current,f=s.current;if(f!==n){const v=i.current,_=lv(h);n?d("MOUNT"):_==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&v!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Mn(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,g=_=>{const x=lv(r.current).includes(_.animationName);if(_.target===e&&x&&(d("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=_=>{_.target===e&&(i.current=lv(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function lv(n){return n?.animationName||"none"}function P4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var bw="rovingFocusGroup.onEntryFocus",R4={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[mb,nT,M4]=S_(pm),[I4,rT]=So(pm,[M4]),[D4,N4]=I4(pm),sT=A.forwardRef((n,e)=>y.jsx(mb.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(mb.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(O4,{...n,ref:e})})}));sT.displayName=pm;var O4=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...g}=n,v=A.useRef(null),_=xt(e,v),S=py(i),[x,E]=Ah({prop:a,defaultProp:l??null,onChange:d,caller:pm}),[P,M]=A.useState(!1),R=Jn(h),I=nT(t),O=A.useRef(!1),[F,$]=A.useState(0);return A.useEffect(()=>{const W=v.current;if(W)return W.addEventListener(bw,R),()=>W.removeEventListener(bw,R)},[R]),y.jsx(D4,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:x,onItemFocus:A.useCallback(W=>E(W),[E]),onItemShiftTab:A.useCallback(()=>M(!0),[]),onFocusableItemAdd:A.useCallback(()=>$(W=>W+1),[]),onFocusableItemRemove:A.useCallback(()=>$(W=>W-1),[]),children:y.jsx(nt.div,{tabIndex:P||F===0?-1:0,"data-orientation":r,...g,ref:_,style:{outline:"none",...n.style},onMouseDown:Fe(n.onMouseDown,()=>{O.current=!0}),onFocus:Fe(n.onFocus,W=>{const K=!O.current;if(W.target===W.currentTarget&&K&&!P){const ce=new CustomEvent(bw,R4);if(W.currentTarget.dispatchEvent(ce),!ce.defaultPrevented){const pe=I().filter(q=>q.focusable),ue=pe.find(q=>q.active),fe=pe.find(q=>q.id===x),H=[ue,fe,...pe].filter(Boolean).map(q=>q.ref.current);aT(H,f)}}O.current=!1}),onBlur:Fe(n.onBlur,()=>M(!1))})})}),iT="RovingFocusGroupItem",oT=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=n,d=wa(),h=i||d,f=N4(iT,t),g=f.currentTabStopId===h,v=nT(t),{onFocusableItemAdd:_,onFocusableItemRemove:S,currentTabStopId:x}=f;return A.useEffect(()=>{if(r)return _(),()=>S()},[r,_,S]),y.jsx(mb.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:y.jsx(nt.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Fe(n.onMouseDown,E=>{r?f.onItemFocus(h):E.preventDefault()}),onFocus:Fe(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:Fe(n.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const P=F4(E,f.orientation,f.dir);if(P!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let R=v().filter(I=>I.focusable).map(I=>I.ref.current);if(P==="last")R.reverse();else if(P==="prev"||P==="next"){P==="prev"&&R.reverse();const I=R.indexOf(E.currentTarget);R=f.loop?B4(R,I+1):R.slice(I+1)}setTimeout(()=>aT(R))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:x!=null}):a})})});oT.displayName=iT;var L4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function j4(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function F4(n,e,t){const r=j4(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return L4[r]}function aT(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function B4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var $4=sT,U4=oT,z4=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},rh=new WeakMap,cv=new WeakMap,uv={},_w=0,lT=function(n){return n&&(n.host||lT(n.parentNode))},V4=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=lT(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},H4=function(n,e,t,r){var s=V4(e,Array.isArray(n)?n:[n]);uv[t]||(uv[t]=new WeakMap);var i=uv[t],a=[],l=new Set,d=new Set(s),h=function(g){!g||l.has(g)||(l.add(g),h(g.parentNode))};s.forEach(h);var f=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(l.has(v))f(v);else try{var _=v.getAttribute(r),S=_!==null&&_!=="false",x=(rh.get(v)||0)+1,E=(i.get(v)||0)+1;rh.set(v,x),i.set(v,E),a.push(v),x===1&&S&&cv.set(v,!0),E===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return f(e),l.clear(),_w++,function(){a.forEach(function(g){var v=rh.get(g)-1,_=i.get(g)-1;rh.set(g,v),i.set(g,_),v||(cv.has(g)||g.removeAttribute(r),cv.delete(g)),_||g.removeAttribute(t)}),_w--,_w||(rh=new WeakMap,rh=new WeakMap,cv=new WeakMap,uv={})}},N_=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=z4(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),H4(r,s,t,"aria-hidden")):function(){return null}},vo=function(){return vo=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vo.apply(this,arguments)};function cT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function W4(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Ev="right-scroll-bar-position",kv="width-before-scroll-bar",q4="with-scroll-bars-hidden",G4="--removed-body-scroll-bar-size";function xw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function K4(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var Y4=typeof window<"u"?A.useLayoutEffect:A.useEffect,cC=new WeakMap;function X4(n,e){var t=K4(null,function(r){return n.forEach(function(s){return xw(s,r)})});return Y4(function(){var r=cC.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(l){i.has(l)||xw(l,null)}),i.forEach(function(l){s.has(l)||xw(l,a)})}cC.set(t,n)},[n]),t}function Q4(n){return n}function J4(n,e){e===void 0&&(e=Q4);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(i),a=t}var d=function(){var f=a;a=[],f.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),t}}}};return s}function Z4(n){n===void 0&&(n={});var e=J4(null);return e.options=vo({async:!0,ssr:!1},n),e}var uT=function(n){var e=n.sideCar,t=cT(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,vo({},t))};uT.isSideCarExport=!0;function eH(n,e){return n.useMedium(e),uT}var dT=Z4(),Sw=function(){},xy=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:Sw,onWheelCapture:Sw,onTouchMoveCapture:Sw}),s=r[0],i=r[1],a=n.forwardProps,l=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,g=n.shards,v=n.sideCar,_=n.noRelative,S=n.noIsolation,x=n.inert,E=n.allowPinchZoom,P=n.as,M=P===void 0?"div":P,R=n.gapMode,I=cT(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=v,F=X4([t,e]),$=vo(vo({},I),s);return A.createElement(A.Fragment,null,f&&A.createElement(O,{sideCar:dT,removeScrollBar:h,shards:g,noRelative:_,noIsolation:S,inert:x,setCallbacks:i,allowPinchZoom:!!E,lockRef:t,gapMode:R}),a?A.cloneElement(A.Children.only(l),vo(vo({},$),{ref:F})):A.createElement(M,vo({},$,{className:d,ref:F}),l))});xy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};xy.classNames={fullWidth:kv,zeroRight:Ev};var tH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nH(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=tH();return e&&n.setAttribute("nonce",e),n}function rH(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function sH(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var iH=function(){var n=0,e=null;return{add:function(t){n==0&&(e=nH())&&(rH(e,t),sH(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oH=function(){var n=iH();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},hT=function(){var n=oH(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},aH={left:0,top:0,right:0,gap:0},Aw=function(n){return parseInt(n||"",10)||0},lH=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Aw(t),Aw(r),Aw(s)]},cH=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return aH;var e=lH(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},uH=hT(),mh="data-scroll-locked",dH=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(q4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(mh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ev,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(kv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ev," .").concat(Ev,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kv," .").concat(kv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mh,`] {
    `).concat(G4,": ").concat(l,`px;
  }
`)},uC=function(){var n=parseInt(document.body.getAttribute(mh)||"0",10);return isFinite(n)?n:0},hH=function(){A.useEffect(function(){return document.body.setAttribute(mh,(uC()+1).toString()),function(){var n=uC()-1;n<=0?document.body.removeAttribute(mh):document.body.setAttribute(mh,n.toString())}},[])},fH=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;hH();var i=A.useMemo(function(){return cH(s)},[s]);return A.createElement(uH,{styles:dH(i,!e,s,t?"":"!important")})},gb=!1;if(typeof window<"u")try{var dv=Object.defineProperty({},"passive",{get:function(){return gb=!0,!0}});window.addEventListener("test",dv,dv),window.removeEventListener("test",dv,dv)}catch{gb=!1}var sh=gb?{passive:!1}:!1,pH=function(n){return n.tagName==="TEXTAREA"},fT=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!pH(n)&&t[e]==="visible")},mH=function(n){return fT(n,"overflowY")},gH=function(n){return fT(n,"overflowX")},dC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=pT(n,r);if(s){var i=mT(n,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},vH=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},yH=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},pT=function(n,e){return n==="v"?mH(e):gH(e)},mT=function(n,e){return n==="v"?vH(e):yH(e)},wH=function(n,e){return n==="h"&&e==="rtl"?-1:1},bH=function(n,e,t,r,s){var i=wH(n,window.getComputedStyle(e).direction),a=i*r,l=t.target,d=e.contains(l),h=!1,f=a>0,g=0,v=0;do{if(!l)break;var _=mT(n,l),S=_[0],x=_[1],E=_[2],P=x-E-i*S;(S||P)&&pT(n,l)&&(g+=P,v+=S);var M=l.parentNode;l=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(f&&Math.abs(g)<1||!f&&Math.abs(v)<1)&&(h=!0),h},hv=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},hC=function(n){return[n.deltaX,n.deltaY]},fC=function(n){return n&&"current"in n?n.current:n},_H=function(n,e){return n[0]===e[0]&&n[1]===e[1]},xH=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},SH=0,ih=[];function AH(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(SH++)[0],i=A.useState(hT)[0],a=A.useRef(n);A.useEffect(function(){a.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=W4([n.lockRef.current],(n.shards||[]).map(fC),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var l=A.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var P=hv(x),M=t.current,R="deltaX"in x?x.deltaX:M[0]-P[0],I="deltaY"in x?x.deltaY:M[1]-P[1],O,F=x.target,$=Math.abs(R)>Math.abs(I)?"h":"v";if("touches"in x&&$==="h"&&F.type==="range")return!1;var W=dC($,F);if(!W)return!0;if(W?O=$:(O=$==="v"?"h":"v",W=dC($,F)),!W)return!1;if(!r.current&&"changedTouches"in x&&(R||I)&&(r.current=O),!O)return!0;var K=r.current||O;return bH(K,E,x,K==="h"?R:I)},[]),d=A.useCallback(function(x){var E=x;if(!(!ih.length||ih[ih.length-1]!==i)){var P="deltaY"in E?hC(E):hv(E),M=e.current.filter(function(O){return O.name===E.type&&(O.target===E.target||E.target===O.shadowParent)&&_H(O.delta,P)})[0];if(M&&M.should){E.cancelable&&E.preventDefault();return}if(!M){var R=(a.current.shards||[]).map(fC).filter(Boolean).filter(function(O){return O.contains(E.target)}),I=R.length>0?l(E,R[0]):!a.current.noIsolation;I&&E.cancelable&&E.preventDefault()}}},[]),h=A.useCallback(function(x,E,P,M){var R={name:x,delta:E,target:P,should:M,shadowParent:CH(P)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(I){return I!==R})},1)},[]),f=A.useCallback(function(x){t.current=hv(x),r.current=void 0},[]),g=A.useCallback(function(x){h(x.type,hC(x),x.target,l(x,n.lockRef.current))},[]),v=A.useCallback(function(x){h(x.type,hv(x),x.target,l(x,n.lockRef.current))},[]);A.useEffect(function(){return ih.push(i),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,sh),document.addEventListener("touchmove",d,sh),document.addEventListener("touchstart",f,sh),function(){ih=ih.filter(function(x){return x!==i}),document.removeEventListener("wheel",d,sh),document.removeEventListener("touchmove",d,sh),document.removeEventListener("touchstart",f,sh)}},[]);var _=n.removeScrollBar,S=n.inert;return A.createElement(A.Fragment,null,S?A.createElement(i,{styles:xH(s)}):null,_?A.createElement(fH,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function CH(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const EH=eH(dT,AH);var Sy=A.forwardRef(function(n,e){return A.createElement(xy,vo({},n,{ref:e,sideCar:EH}))});Sy.classNames=xy.classNames;var vb=["Enter"," "],kH=["ArrowDown","PageUp","Home"],gT=["ArrowUp","PageDown","End"],TH=[...kH,...gT],PH={ltr:[...vb,"ArrowRight"],rtl:[...vb,"ArrowLeft"]},RH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mm="Menu",[Zp,MH,IH]=S_(mm),[pu,vT]=So(mm,[IH,by,rT]),Ay=by(),yT=rT(),[DH,mu]=pu(mm),[NH,gm]=pu(mm),wT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=n,l=Ay(e),[d,h]=A.useState(null),f=A.useRef(!1),g=Jn(i),v=py(s);return A.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),y.jsx(Jk,{...l,children:y.jsx(DH,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:h,children:y.jsx(NH,{scope:e,onClose:A.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:f,dir:v,modal:a,children:r})})})};wT.displayName=mm;var OH="MenuAnchor",O_=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Ay(t);return y.jsx(Zk,{...s,...r,ref:e})});O_.displayName=OH;var L_="MenuPortal",[LH,bT]=pu(L_,{forceMount:void 0}),_T=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=mu(L_,e);return y.jsx(LH,{scope:e,forceMount:t,children:y.jsx(Is,{present:t||i.open,children:y.jsx(_y,{asChild:!0,container:s,children:r})})})};_T.displayName=L_;var ei="MenuContent",[jH,j_]=pu(ei),xT=A.forwardRef((n,e)=>{const t=bT(ei,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=mu(ei,n.__scopeMenu),a=gm(ei,n.__scopeMenu);return y.jsx(Zp.Provider,{scope:n.__scopeMenu,children:y.jsx(Is,{present:r||i.open,children:y.jsx(Zp.Slot,{scope:n.__scopeMenu,children:a.modal?y.jsx(FH,{...s,ref:e}):y.jsx(BH,{...s,ref:e})})})})}),FH=A.forwardRef((n,e)=>{const t=mu(ei,n.__scopeMenu),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return N_(i)},[]),y.jsx(F_,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),BH=A.forwardRef((n,e)=>{const t=mu(ei,n.__scopeMenu);return y.jsx(F_,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),$H=nu("MenuContent.ScrollLock"),F_=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:_,disableOutsideScroll:S,...x}=n,E=mu(ei,t),P=gm(ei,t),M=Ay(t),R=yT(t),I=MH(t),[O,F]=A.useState(null),$=A.useRef(null),W=xt(e,$,E.onContentChange),K=A.useRef(0),ce=A.useRef(""),pe=A.useRef(0),ue=A.useRef(null),fe=A.useRef("right"),ne=A.useRef(0),H=S?Sy:A.Fragment,q=S?{as:$H,allowPinchZoom:!0}:void 0,te=re=>{const Z=ce.current+re,B=I().filter(ve=>!ve.disabled),X=document.activeElement,ae=B.find(ve=>ve.ref.current===X)?.textValue,ye=B.map(ve=>ve.textValue),Me=JH(ye,Z,ae),Pe=B.find(ve=>ve.textValue===Me)?.ref.current;(function ve(Ne){ce.current=Ne,window.clearTimeout(K.current),Ne!==""&&(K.current=window.setTimeout(()=>ve(""),1e3))})(Z),Pe&&setTimeout(()=>Pe.focus())};A.useEffect(()=>()=>window.clearTimeout(K.current),[]),A_();const z=A.useCallback(re=>fe.current===ue.current?.side&&eW(re,ue.current?.area),[]);return y.jsx(jH,{scope:t,searchRef:ce,onItemEnter:A.useCallback(re=>{z(re)&&re.preventDefault()},[z]),onItemLeave:A.useCallback(re=>{z(re)||($.current?.focus(),F(null))},[z]),onTriggerLeave:A.useCallback(re=>{z(re)&&re.preventDefault()},[z]),pointerGraceTimerRef:pe,onPointerGraceIntentChange:A.useCallback(re=>{ue.current=re},[]),children:y.jsx(H,{...q,children:y.jsx(gy,{asChild:!0,trapped:s,onMountAutoFocus:Fe(i,re=>{re.preventDefault(),$.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:y.jsx(my,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:_,children:y.jsx($4,{asChild:!0,...R,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:F,onEntryFocus:Fe(d,re=>{P.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(eT,{role:"menu","aria-orientation":"vertical","data-state":FT(E.open),"data-radix-menu-content":"",dir:P.dir,...M,...x,ref:W,style:{outline:"none",...x.style},onKeyDown:Fe(x.onKeyDown,re=>{const B=re.target.closest("[data-radix-menu-content]")===re.currentTarget,X=re.ctrlKey||re.altKey||re.metaKey,ae=re.key.length===1;B&&(re.key==="Tab"&&re.preventDefault(),!X&&ae&&te(re.key));const ye=$.current;if(re.target!==ye||!TH.includes(re.key))return;re.preventDefault();const Pe=I().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);gT.includes(re.key)&&Pe.reverse(),XH(Pe)}),onBlur:Fe(n.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(K.current),ce.current="")}),onPointerMove:Fe(n.onPointerMove,em(re=>{const Z=re.target,B=ne.current!==re.clientX;if(re.currentTarget.contains(Z)&&B){const X=re.clientX>ne.current?"right":"left";fe.current=X,ne.current=re.clientX}}))})})})})})})});xT.displayName=ei;var UH="MenuGroup",B_=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"group",...r,ref:e})});B_.displayName=UH;var zH="MenuLabel",ST=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{...r,ref:e})});ST.displayName=zH;var Gv="MenuItem",pC="menu.itemSelect",Cy=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),a=gm(Gv,n.__scopeMenu),l=j_(Gv,n.__scopeMenu),d=xt(e,i),h=A.useRef(!1),f=()=>{const g=i.current;if(!t&&g){const v=new CustomEvent(pC,{bubbles:!0,cancelable:!0});g.addEventListener(pC,_=>r?.(_),{once:!0}),kk(g,v),v.defaultPrevented?h.current=!1:a.onClose()}};return y.jsx(AT,{...s,ref:d,disabled:t,onClick:Fe(n.onClick,f),onPointerDown:g=>{n.onPointerDown?.(g),h.current=!0},onPointerUp:Fe(n.onPointerUp,g=>{h.current||g.currentTarget?.click()}),onKeyDown:Fe(n.onKeyDown,g=>{const v=l.searchRef.current!=="";t||v&&g.key===" "||vb.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Cy.displayName=Gv;var AT=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,a=j_(Gv,t),l=yT(t),d=A.useRef(null),h=xt(e,d),[f,g]=A.useState(!1),[v,_]=A.useState("");return A.useEffect(()=>{const S=d.current;S&&_((S.textContent??"").trim())},[i.children]),y.jsx(Zp.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:y.jsx(U4,{asChild:!0,...l,focusable:!r,children:y.jsx(nt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:Fe(n.onPointerMove,em(S=>{r?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(n.onPointerLeave,em(S=>a.onItemLeave(S))),onFocus:Fe(n.onFocus,()=>g(!0)),onBlur:Fe(n.onBlur,()=>g(!1))})})})}),VH="MenuCheckboxItem",CT=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return y.jsx(RT,{scope:n.__scopeMenu,checked:t,children:y.jsx(Cy,{role:"menuitemcheckbox","aria-checked":Kv(t)?"mixed":t,...s,ref:e,"data-state":U_(t),onSelect:Fe(s.onSelect,()=>r?.(Kv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});CT.displayName=VH;var ET="MenuRadioGroup",[HH,WH]=pu(ET,{value:void 0,onValueChange:()=>{}}),kT=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Jn(r);return y.jsx(HH,{scope:n.__scopeMenu,value:t,onValueChange:i,children:y.jsx(B_,{...s,ref:e})})});kT.displayName=ET;var TT="MenuRadioItem",PT=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=WH(TT,n.__scopeMenu),i=t===s.value;return y.jsx(RT,{scope:n.__scopeMenu,checked:i,children:y.jsx(Cy,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":U_(i),onSelect:Fe(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});PT.displayName=TT;var $_="MenuItemIndicator",[RT,qH]=pu($_,{checked:!1}),MT=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=qH($_,t);return y.jsx(Is,{present:r||Kv(i.checked)||i.checked===!0,children:y.jsx(nt.span,{...s,ref:e,"data-state":U_(i.checked)})})});MT.displayName=$_;var GH="MenuSeparator",IT=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});IT.displayName=GH;var KH="MenuArrow",DT=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Ay(t);return y.jsx(tT,{...s,...r,ref:e})});DT.displayName=KH;var YH="MenuSub",[L9,NT]=pu(YH),Cp="MenuSubTrigger",OT=A.forwardRef((n,e)=>{const t=mu(Cp,n.__scopeMenu),r=gm(Cp,n.__scopeMenu),s=NT(Cp,n.__scopeMenu),i=j_(Cp,n.__scopeMenu),a=A.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,h={__scopeMenu:n.__scopeMenu},f=A.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return A.useEffect(()=>f,[f]),A.useEffect(()=>{const g=l.current;return()=>{window.clearTimeout(g),d(null)}},[l,d]),y.jsx(O_,{asChild:!0,...h,children:y.jsx(AT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":FT(t.open),...n,ref:fy(e,s.onTriggerChange),onClick:g=>{n.onClick?.(g),!(n.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Fe(n.onPointerMove,em(g=>{i.onItemEnter(g),!g.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Fe(n.onPointerLeave,em(g=>{f();const v=t.content?.getBoundingClientRect();if(v){const _=t.content?.dataset.side,S=_==="right",x=S?-5:5,E=v[S?"left":"right"],P=v[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:g.clientX+x,y:g.clientY},{x:E,y:v.top},{x:P,y:v.top},{x:P,y:v.bottom},{x:E,y:v.bottom}],side:_}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(g),g.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(n.onKeyDown,g=>{const v=i.searchRef.current!=="";n.disabled||v&&g.key===" "||PH[r.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});OT.displayName=Cp;var LT="MenuSubContent",jT=A.forwardRef((n,e)=>{const t=bT(ei,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=mu(ei,n.__scopeMenu),a=gm(ei,n.__scopeMenu),l=NT(LT,n.__scopeMenu),d=A.useRef(null),h=xt(e,d);return y.jsx(Zp.Provider,{scope:n.__scopeMenu,children:y.jsx(Is,{present:r||i.open,children:y.jsx(Zp.Slot,{scope:n.__scopeMenu,children:y.jsx(F_,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{a.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Fe(n.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Fe(n.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:Fe(n.onKeyDown,f=>{const g=f.currentTarget.contains(f.target),v=RH[a.dir].includes(f.key);g&&v&&(i.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});jT.displayName=LT;function FT(n){return n?"open":"closed"}function Kv(n){return n==="indeterminate"}function U_(n){return Kv(n)?"indeterminate":n?"checked":"unchecked"}function XH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function QH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function JH(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=QH(n,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function ZH(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],d=e[a],h=l.x,f=l.y,g=d.x,v=d.y;f>r!=v>r&&t<(g-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function eW(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return ZH(t,e)}function em(n){return e=>e.pointerType==="mouse"?n(e):void 0}var tW=wT,nW=O_,rW=_T,sW=xT,iW=B_,oW=ST,aW=Cy,lW=CT,cW=kT,uW=PT,dW=MT,hW=IT,fW=DT,pW=OT,mW=jT,Ey="DropdownMenu",[gW,j9]=So(Ey,[vT]),$r=vT(),[vW,BT]=gW(Ey),$T=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=n,d=$r(e),h=A.useRef(null),[f,g]=Ah({prop:s,defaultProp:i??!1,onChange:a,caller:Ey});return y.jsx(vW,{scope:e,triggerId:wa(),triggerRef:h,contentId:wa(),open:f,onOpenChange:g,onOpenToggle:A.useCallback(()=>g(v=>!v),[g]),modal:l,children:y.jsx(tW,{...d,open:f,onOpenChange:g,dir:r,modal:l,children:t})})};$T.displayName=Ey;var UT="DropdownMenuTrigger",zT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=BT(UT,t),a=$r(t);return y.jsx(nW,{asChild:!0,...a,children:y.jsx(nt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:fy(e,i.triggerRef),onPointerDown:Fe(n.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Fe(n.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});zT.displayName=UT;var yW="DropdownMenuPortal",VT=n=>{const{__scopeDropdownMenu:e,...t}=n,r=$r(e);return y.jsx(rW,{...r,...t})};VT.displayName=yW;var HT="DropdownMenuContent",WT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=BT(HT,t),i=$r(t),a=A.useRef(!1);return y.jsx(sW,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Fe(n.onCloseAutoFocus,l=>{a.current||s.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Fe(n.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!s.modal||f)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WT.displayName=HT;var wW="DropdownMenuGroup",qT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(iW,{...s,...r,ref:e})});qT.displayName=wW;var bW="DropdownMenuLabel",GT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(oW,{...s,...r,ref:e})});GT.displayName=bW;var _W="DropdownMenuItem",KT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(aW,{...s,...r,ref:e})});KT.displayName=_W;var xW="DropdownMenuCheckboxItem",YT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(lW,{...s,...r,ref:e})});YT.displayName=xW;var SW="DropdownMenuRadioGroup",AW=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(cW,{...s,...r,ref:e})});AW.displayName=SW;var CW="DropdownMenuRadioItem",XT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(uW,{...s,...r,ref:e})});XT.displayName=CW;var EW="DropdownMenuItemIndicator",QT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(dW,{...s,...r,ref:e})});QT.displayName=EW;var kW="DropdownMenuSeparator",JT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(hW,{...s,...r,ref:e})});JT.displayName=kW;var TW="DropdownMenuArrow",PW=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(fW,{...s,...r,ref:e})});PW.displayName=TW;var RW="DropdownMenuSubTrigger",ZT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(pW,{...s,...r,ref:e})});ZT.displayName=RW;var MW="DropdownMenuSubContent",eP=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=$r(t);return y.jsx(mW,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eP.displayName=MW;var IW=$T,DW=zT,NW=VT,tP=WT,OW=qT,nP=GT,rP=KT,sP=YT,iP=XT,oP=QT,aP=JT,lP=ZT,cP=eP;const LW=IW,jW=DW,mC=OW,FW=ot.forwardRef(({className:n,inset:e,children:t,...r},s)=>y.jsxs(lP,{ref:s,className:ut("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,y.jsx(ck,{className:"ml-auto h-4 w-4"})]}));FW.displayName=lP.displayName;const BW=ot.forwardRef(({className:n,...e},t)=>y.jsx(cP,{ref:t,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));BW.displayName=cP.displayName;const uP=ot.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(NW,{children:y.jsx(tP,{ref:r,sideOffset:e,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));uP.displayName=tP.displayName;const Di=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(rP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));Di.displayName=rP.displayName;const $W=ot.forwardRef(({className:n,children:e,checked:t,...r},s)=>y.jsxs(sP,{ref:s,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(oP,{children:y.jsx(v_,{className:"h-4 w-4"})})}),e]}));$W.displayName=sP.displayName;const UW=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(iP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(oP,{children:y.jsx(JU,{className:"h-2 w-2 fill-current"})})}),e]}));UW.displayName=iP.displayName;const yb=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(nP,{ref:r,className:ut("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));yb.displayName=nP.displayName;const Tv=ot.forwardRef(({className:n,...e},t)=>y.jsx(aP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));Tv.displayName=aP.displayName;var Cw={exports:{}},Ew={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC;function zW(){if(gC)return Ew;gC=1;var n=ty();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,a=n.useDebugValue;function l(g,v){var _=v(),S=r({inst:{value:_,getSnapshot:v}}),x=S[0].inst,E=S[1];return i(function(){x.value=_,x.getSnapshot=v,d(x)&&E({inst:x})},[g,_,v]),s(function(){return d(x)&&E({inst:x}),g(function(){d(x)&&E({inst:x})})},[g]),a(_),_}function d(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function h(g,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Ew.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Ew}var vC;function VW(){return vC||(vC=1,Cw.exports=zW()),Cw.exports}var HW=VW();function WW(){return HW.useSyncExternalStore(qW,()=>!0,()=>!1)}function qW(){return()=>{}}var z_="Avatar",[GW,F9]=So(z_),[KW,dP]=GW(z_),hP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=A.useState("idle");return y.jsx(KW,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:y.jsx(nt.span,{...r,ref:e})})});hP.displayName=z_;var fP="AvatarImage",pP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=dP(fP,t),l=YW(r,i),d=Jn(h=>{s(h),a.onImageLoadingStatusChange(h)});return Mn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?y.jsx(nt.img,{...i,ref:e,src:r}):null});pP.displayName=fP;var mP="AvatarFallback",gP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=dP(mP,t),[a,l]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&i.imageLoadingStatus!=="loaded"?y.jsx(nt.span,{...s,ref:e}):null});gP.displayName=mP;function yC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YW(n,{referrerPolicy:e,crossOrigin:t}){const r=WW(),s=A.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=A.useState(()=>yC(i,n));return Mn(()=>{l(yC(i,n))},[i,n]),Mn(()=>{const d=g=>()=>{l(g)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,t,e]),a}var vP=hP,yP=pP,wP=gP;const tm=ot.forwardRef(({className:n,...e},t)=>y.jsx(vP,{ref:t,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));tm.displayName=vP.displayName;const nm=ot.forwardRef(({className:n,...e},t)=>y.jsx(yP,{ref:t,className:ut("aspect-square h-full w-full object-cover",n),...e}));nm.displayName=yP.displayName;const rm=ot.forwardRef(({className:n,...e},t)=>y.jsx(wP,{ref:t,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));rm.displayName=wP.displayName;const XW=({icon:n,active:e,onClick:t,label:r})=>y.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16
      ${e?"text-primary-foreground scale-110":"text-muted-foreground hover:text-foreground hover:scale-105"}`,style:e?{color:"hsl(var(--primary-foreground))"}:{},"aria-label":r,children:[y.jsx("div",{className:"relative w-6 h-6 mb-0.5 flex items-center justify-center",children:y.jsx(n,{className:`w-6 h-6 transition-all duration-200 ${e?"drop-shadow-md":""}`})}),y.jsx("span",{className:"text-[10px] font-medium transition-opacity duration-200 opacity-100",children:r})]}),bP=A.forwardRef(({activeTab:n,setActiveTab:e},t)=>{const{user:r,logout:s,settings:i,isFeatureEnabled:a}=ds(),l=Rh(),{toast:d}=ni(),h=E=>{e(E),l(`/${E}`)},f=async()=>{try{await s(),l("/login")}catch(E){console.error("Erro no Logout:",E.message)}},g=()=>{window.handlePWAInstall?window.handlePWAInstall():d({title:"Instalao no disponvel",description:"A funcionalidade de instalao no est pronta. Tente mais tarde.",variant:"destructive"})},v=i?.profile_photo||r?.user_metadata?.avatar_url,_=i?.user_name||r?.user_metadata?.full_name||"Usurio",S=E=>{const P=E.split(" ");return P.length===1?P[0].charAt(0).toUpperCase():`${P[0].charAt(0)}${P[P.length-1].charAt(0)}`.toUpperCase()},x=[{id:"dashboard",icon:tz,label:"Incio"},{id:"workflow",icon:Gp,label:"Trabalhos"},{id:"clients",icon:vk,label:"Clientes"},{id:"financial",icon:Xp,label:"Caixa"}];return y.jsxs(Zn.nav,{ref:t,initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:200,damping:30},className:"fixed bottom-0 left-0 right-0 bg-card/80 dark:bg-card/70 backdrop-blur-xl border-t border-border/70 shadow-top-lg z-[450] flex items-center justify-around px-1",style:{paddingTop:"0.5rem",paddingBottom:"calc(0.5rem + env(safe-area-inset-bottom))",height:"auto"},children:[x.map(E=>y.jsx(XW,{icon:E.icon,active:n===E.id,onClick:()=>h(E.id),label:E.label},E.id)),y.jsxs(LW,{children:[y.jsx(jW,{asChild:!0,children:y.jsxs("button",{className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16 text-muted-foreground hover:text-foreground hover:scale-105","aria-label":"Mais opes",children:[y.jsxs(tm,{className:"w-6 h-6 border-2 border-primary/70",children:[y.jsx(nm,{src:v,alt:_}),y.jsx(rm,{className:"bg-muted text-sm font-bold",children:S(_)})]}),y.jsx("span",{className:"text-[10px] font-medium opacity-100",children:"Menu"})]})}),y.jsxs(uP,{side:"top",align:"end",className:"mb-2 w-64 bg-popover/80 dark:bg-popover/70 backdrop-blur-md shadow-lg",style:{marginBottom:"calc(0.5rem + env(safe-area-inset-bottom))"},children:[y.jsx(yb,{className:"font-normal",children:y.jsxs("div",{className:"flex flex-col space-y-1",children:[y.jsx("p",{className:"text-sm font-medium leading-none",children:_}),y.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),y.jsx(Tv,{}),y.jsxs(mC,{children:[y.jsxs(Di,{onClick:()=>h("referrals"),className:"text-green-500 focus:bg-green-500/10 focus:text-green-500",children:[y.jsx(y_,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Indique e Ganhe"})]}),a("agenda_pro")&&y.jsxs(Di,{onClick:()=>h("calendar"),children:[y.jsx(lk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Agenda"})]}),a("quadros")&&y.jsxs(Di,{onClick:()=>h("quadros"),children:[y.jsx(gk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Quadros"})]}),a("relatorios")&&y.jsxs(Di,{onClick:()=>h("reports"),children:[y.jsx(ok,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Relatrios"})]})]}),y.jsx(Tv,{}),y.jsxs(mC,{children:[y.jsx(yb,{children:"Ferramentas"}),a("precifique")&&y.jsxs(Di,{onClick:()=>h("precifique"),children:[y.jsx(Kp,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Precificar"})]}),a("reserva_inteligente")&&y.jsxs(Di,{onClick:()=>h("reserva-inteligente"),children:[y.jsx(b_,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Reserva Inteligente"})]}),a("meu_setup")&&y.jsxs(Di,{onClick:()=>h("my-setup"),children:[y.jsx(dk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Meu Setup"})]})]}),y.jsx(Tv,{}),y.jsxs(Di,{onClick:g,children:[y.jsx(ZU,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Baixar aplicativo"})]}),y.jsxs(Di,{onClick:()=>h("settings"),children:[y.jsx(mk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Configuraes"})]}),y.jsxs(Di,{onClick:f,className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[y.jsx(hk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Sair"})]})]})]})]})});bP.displayName="BottomNavBar";const Ht=()=>y.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:[y.jsx(Zn.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:y.jsx(Sh,{className:"h-12 w-12 text-primary animate-spin"})}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Carregando..."})]});function wb(n,[e,t]){return Math.min(t,Math.max(e,n))}function _P(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var xP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QW="VisuallyHidden",JW=A.forwardRef((n,e)=>y.jsx(nt.span,{...n,ref:e,style:{...xP,...n.style}}));JW.displayName=QW;var ZW=[" ","Enter","ArrowUp","ArrowDown"],e5=[" ","Enter"],su="Select",[ky,Ty,t5]=S_(su),[Oh,B9]=So(su,[t5,by]),Py=by(),[n5,Nl]=Oh(su),[r5,s5]=Oh(su),SP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:g,disabled:v,required:_,form:S}=n,x=Py(e),[E,P]=A.useState(null),[M,R]=A.useState(null),[I,O]=A.useState(!1),F=py(h),[$,W]=Ah({prop:r,defaultProp:s??!1,onChange:i,caller:su}),[K,ce]=Ah({prop:a,defaultProp:l,onChange:d,caller:su}),pe=A.useRef(null),ue=E?S||!!E.closest("form"):!0,[fe,ne]=A.useState(new Set),H=Array.from(fe).map(q=>q.props.value).join(";");return y.jsx(Jk,{...x,children:y.jsxs(n5,{required:_,scope:e,trigger:E,onTriggerChange:P,valueNode:M,onValueNodeChange:R,valueNodeHasChildren:I,onValueNodeHasChildrenChange:O,contentId:wa(),value:K,onValueChange:ce,open:$,onOpenChange:W,dir:F,triggerPointerDownPosRef:pe,disabled:v,children:[y.jsx(ky.Provider,{scope:e,children:y.jsx(r5,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(q=>{ne(te=>new Set(te).add(q))},[]),onNativeOptionRemove:A.useCallback(q=>{ne(te=>{const z=new Set(te);return z.delete(q),z})},[]),children:t})}),ue?y.jsxs(WP,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:g,value:K,onChange:q=>ce(q.target.value),disabled:v,form:S,children:[K===void 0?y.jsx("option",{value:""}):null,Array.from(fe)]},H):null]})})};SP.displayName=su;var AP="SelectTrigger",CP=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Py(t),a=Nl(AP,t),l=a.disabled||r,d=xt(e,a.onTriggerChange),h=Ty(t),f=A.useRef("touch"),[g,v,_]=GP(x=>{const E=h().filter(R=>!R.disabled),P=E.find(R=>R.value===a.value),M=KP(E,x,P);M!==void 0&&a.onValueChange(M.value)}),S=x=>{l||(a.onOpenChange(!0),_()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return y.jsx(Zk,{asChild:!0,...i,children:y.jsx(nt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":qP(a.value)?"":void 0,...s,ref:d,onClick:Fe(s.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:Fe(s.onPointerDown,x=>{f.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:Fe(s.onKeyDown,x=>{const E=g.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(E&&x.key===" ")&&ZW.includes(x.key)&&(S(),x.preventDefault())})})})});CP.displayName=AP;var EP="SelectValue",kP=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...l}=n,d=Nl(EP,t),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,g=xt(e,d.onValueNodeChange);return Mn(()=>{h(f)},[h,f]),y.jsx(nt.span,{...l,ref:g,style:{pointerEvents:"none"},children:qP(d.value)?y.jsx(y.Fragment,{children:a}):i})});kP.displayName=EP;var i5="SelectIcon",TP=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return y.jsx(nt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});TP.displayName=i5;var o5="SelectPortal",PP=n=>y.jsx(_y,{asChild:!0,...n});PP.displayName=o5;var iu="SelectContent",RP=A.forwardRef((n,e)=>{const t=Nl(iu,n.__scopeSelect),[r,s]=A.useState();if(Mn(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?om.createPortal(y.jsx(MP,{scope:n.__scopeSelect,children:y.jsx(ky.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),i):null}return y.jsx(IP,{...n,ref:e})});RP.displayName=iu;var Ni=10,[MP,Ol]=Oh(iu),a5="SelectContentImpl",l5=nu("SelectContent.RemoveScroll"),IP=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:_,sticky:S,hideWhenDetached:x,avoidCollisions:E,...P}=n,M=Nl(iu,t),[R,I]=A.useState(null),[O,F]=A.useState(null),$=xt(e,ve=>I(ve)),[W,K]=A.useState(null),[ce,pe]=A.useState(null),ue=Ty(t),[fe,ne]=A.useState(!1),H=A.useRef(!1);A.useEffect(()=>{if(R)return N_(R)},[R]),A_();const q=A.useCallback(ve=>{const[Ne,...He]=ue().map(Mt=>Mt.ref.current),[Ye]=He.slice(-1),it=document.activeElement;for(const Mt of ve)if(Mt===it||(Mt?.scrollIntoView({block:"nearest"}),Mt===Ne&&O&&(O.scrollTop=0),Mt===Ye&&O&&(O.scrollTop=O.scrollHeight),Mt?.focus(),document.activeElement!==it))return},[ue,O]),te=A.useCallback(()=>q([W,R]),[q,W,R]);A.useEffect(()=>{fe&&te()},[fe,te]);const{onOpenChange:z,triggerPointerDownPosRef:re}=M;A.useEffect(()=>{if(R){let ve={x:0,y:0};const Ne=Ye=>{ve={x:Math.abs(Math.round(Ye.pageX)-(re.current?.x??0)),y:Math.abs(Math.round(Ye.pageY)-(re.current?.y??0))}},He=Ye=>{ve.x<=10&&ve.y<=10?Ye.preventDefault():R.contains(Ye.target)||z(!1),document.removeEventListener("pointermove",Ne),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",He,{capture:!0})}}},[R,z,re]),A.useEffect(()=>{const ve=()=>z(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[z]);const[Z,B]=GP(ve=>{const Ne=ue().filter(it=>!it.disabled),He=Ne.find(it=>it.ref.current===document.activeElement),Ye=KP(Ne,ve,He);Ye&&setTimeout(()=>Ye.ref.current.focus())}),X=A.useCallback((ve,Ne,He)=>{const Ye=!H.current&&!He;(M.value!==void 0&&M.value===Ne||Ye)&&(K(ve),Ye&&(H.current=!0))},[M.value]),ae=A.useCallback(()=>R?.focus(),[R]),ye=A.useCallback((ve,Ne,He)=>{const Ye=!H.current&&!He;(M.value!==void 0&&M.value===Ne||Ye)&&pe(ve)},[M.value]),Me=r==="popper"?bb:DP,Pe=Me===bb?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:_,sticky:S,hideWhenDetached:x,avoidCollisions:E}:{};return y.jsx(MP,{scope:t,content:R,viewport:O,onViewportChange:F,itemRefCallback:X,selectedItem:W,onItemLeave:ae,itemTextRefCallback:ye,focusSelectedItem:te,selectedItemText:ce,position:r,isPositioned:fe,searchRef:Z,children:y.jsx(Sy,{as:l5,allowPinchZoom:!0,children:y.jsx(gy,{asChild:!0,trapped:M.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Fe(s,ve=>{M.trigger?.focus({preventScroll:!0}),ve.preventDefault()}),children:y.jsx(my,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:y.jsx(Me,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:ve=>ve.preventDefault(),...P,...Pe,onPlaced:()=>ne(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:Fe(P.onKeyDown,ve=>{const Ne=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Ne&&ve.key.length===1&&B(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Ye=ue().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Ye=Ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const it=ve.target,Mt=Ye.indexOf(it);Ye=Ye.slice(Mt+1)}setTimeout(()=>q(Ye)),ve.preventDefault()}})})})})})})});IP.displayName=a5;var c5="SelectItemAlignedPosition",DP=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Nl(iu,t),a=Ol(iu,t),[l,d]=A.useState(null),[h,f]=A.useState(null),g=xt(e,$=>f($)),v=Ty(t),_=A.useRef(!1),S=A.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:P,focusSelectedItem:M}=a,R=A.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&x&&E&&P){const $=i.trigger.getBoundingClientRect(),W=h.getBoundingClientRect(),K=i.valueNode.getBoundingClientRect(),ce=P.getBoundingClientRect();if(i.dir!=="rtl"){const it=ce.left-W.left,Mt=K.left-it,un=$.left-Mt,Xt=$.width+un,ur=Math.max(Xt,W.width),zi=window.innerWidth-Ni,In=wb(Mt,[Ni,Math.max(Ni,zi-ur)]);l.style.minWidth=Xt+"px",l.style.left=In+"px"}else{const it=W.right-ce.right,Mt=window.innerWidth-K.right-it,un=window.innerWidth-$.right-Mt,Xt=$.width+un,ur=Math.max(Xt,W.width),zi=window.innerWidth-Ni,In=wb(Mt,[Ni,Math.max(Ni,zi-ur)]);l.style.minWidth=Xt+"px",l.style.right=In+"px"}const pe=v(),ue=window.innerHeight-Ni*2,fe=x.scrollHeight,ne=window.getComputedStyle(h),H=parseInt(ne.borderTopWidth,10),q=parseInt(ne.paddingTop,10),te=parseInt(ne.borderBottomWidth,10),z=parseInt(ne.paddingBottom,10),re=H+q+fe+z+te,Z=Math.min(E.offsetHeight*5,re),B=window.getComputedStyle(x),X=parseInt(B.paddingTop,10),ae=parseInt(B.paddingBottom,10),ye=$.top+$.height/2-Ni,Me=ue-ye,Pe=E.offsetHeight/2,ve=E.offsetTop+Pe,Ne=H+q+ve,He=re-Ne;if(Ne<=ye){const it=pe.length>0&&E===pe[pe.length-1].ref.current;l.style.bottom="0px";const Mt=h.clientHeight-x.offsetTop-x.offsetHeight,un=Math.max(Me,Pe+(it?ae:0)+Mt+te),Xt=Ne+un;l.style.height=Xt+"px"}else{const it=pe.length>0&&E===pe[0].ref.current;l.style.top="0px";const un=Math.max(ye,H+x.offsetTop+(it?X:0)+Pe)+He;l.style.height=un+"px",x.scrollTop=Ne-ye+x.offsetTop}l.style.margin=`${Ni}px 0`,l.style.minHeight=Z+"px",l.style.maxHeight=ue+"px",r?.(),requestAnimationFrame(()=>_.current=!0)}},[v,i.trigger,i.valueNode,l,h,x,E,P,i.dir,r]);Mn(()=>R(),[R]);const[I,O]=A.useState();Mn(()=>{h&&O(window.getComputedStyle(h).zIndex)},[h]);const F=A.useCallback($=>{$&&S.current===!0&&(R(),M?.(),S.current=!1)},[R,M]);return y.jsx(d5,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:F,children:y.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:y.jsx(nt.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});DP.displayName=c5;var u5="SelectPopperPosition",bb=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ni,...i}=n,a=Py(t);return y.jsx(eT,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bb.displayName=u5;var[d5,V_]=Oh(iu,{}),_b="SelectViewport",NP=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Ol(_b,t),a=V_(_b,t),l=xt(e,i.onViewportChange),d=A.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(ky.Slot,{scope:t,children:y.jsx(nt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Fe(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=a;if(v?.current&&g){const _=Math.abs(d.current-f.scrollTop);if(_>0){const S=window.innerHeight-Ni*2,x=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),P=Math.max(x,E);if(P<S){const M=P+_,R=Math.min(S,M),I=M-R;g.style.height=R+"px",g.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,g.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});NP.displayName=_b;var OP="SelectGroup",[h5,f5]=Oh(OP),p5=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=wa();return y.jsx(h5,{scope:t,id:s,children:y.jsx(nt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});p5.displayName=OP;var LP="SelectLabel",jP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=f5(LP,t);return y.jsx(nt.div,{id:s.id,...r,ref:e})});jP.displayName=LP;var Yv="SelectItem",[m5,FP]=Oh(Yv),BP=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,l=Nl(Yv,t),d=Ol(Yv,t),h=l.value===r,[f,g]=A.useState(i??""),[v,_]=A.useState(!1),S=xt(e,M=>d.itemRefCallback?.(M,r,s)),x=wa(),E=A.useRef("touch"),P=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(m5,{scope:t,value:r,disabled:s,textId:x,isSelected:h,onItemTextChange:A.useCallback(M=>{g(R=>R||(M?.textContent??"").trim())},[]),children:y.jsx(ky.ItemSlot,{scope:t,value:r,disabled:s,textValue:f,children:y.jsx(nt.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:Fe(a.onFocus,()=>_(!0)),onBlur:Fe(a.onBlur,()=>_(!1)),onClick:Fe(a.onClick,()=>{E.current!=="mouse"&&P()}),onPointerUp:Fe(a.onPointerUp,()=>{E.current==="mouse"&&P()}),onPointerDown:Fe(a.onPointerDown,M=>{E.current=M.pointerType}),onPointerMove:Fe(a.onPointerMove,M=>{E.current=M.pointerType,s?d.onItemLeave?.():E.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(a.onPointerLeave,M=>{M.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Fe(a.onKeyDown,M=>{d.searchRef?.current!==""&&M.key===" "||(e5.includes(M.key)&&P(),M.key===" "&&M.preventDefault())})})})})});BP.displayName=Yv;var Ep="SelectItemText",$P=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=Nl(Ep,t),l=Ol(Ep,t),d=FP(Ep,t),h=s5(Ep,t),[f,g]=A.useState(null),v=xt(e,P=>g(P),d.onItemTextChange,P=>l.itemTextRefCallback?.(P,d.value,d.disabled)),_=f?.textContent,S=A.useMemo(()=>y.jsx("option",{value:d.value,disabled:d.disabled,children:_},d.value),[d.disabled,d.value,_]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=h;return Mn(()=>(x(S),()=>E(S)),[x,E,S]),y.jsxs(y.Fragment,{children:[y.jsx(nt.span,{id:d.textId,...i,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?om.createPortal(i.children,a.valueNode):null]})});$P.displayName=Ep;var UP="SelectItemIndicator",zP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return FP(UP,t).isSelected?y.jsx(nt.span,{"aria-hidden":!0,...r,ref:e}):null});zP.displayName=UP;var xb="SelectScrollUpButton",g5=A.forwardRef((n,e)=>{const t=Ol(xb,n.__scopeSelect),r=V_(xb,n.__scopeSelect),[s,i]=A.useState(!1),a=xt(e,r.onScrollButtonChange);return Mn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollTop>0;i(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?y.jsx(VP,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});g5.displayName=xb;var Sb="SelectScrollDownButton",v5=A.forwardRef((n,e)=>{const t=Ol(Sb,n.__scopeSelect),r=V_(Sb,n.__scopeSelect),[s,i]=A.useState(!1),a=xt(e,r.onScrollButtonChange);return Mn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?y.jsx(VP,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});v5.displayName=Sb;var VP=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Ol("SelectScrollButton",t),a=A.useRef(null),l=Ty(t),d=A.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),Mn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),y.jsx(nt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Fe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Fe(s.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Fe(s.onPointerLeave,()=>{d()})})}),y5="SelectSeparator",HP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return y.jsx(nt.div,{"aria-hidden":!0,...r,ref:e})});HP.displayName=y5;var Ab="SelectArrow",w5=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Py(t),i=Nl(Ab,t),a=Ol(Ab,t);return i.open&&a.position==="popper"?y.jsx(tT,{...s,...r,ref:e}):null});w5.displayName=Ab;var b5="SelectBubbleInput",WP=A.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=A.useRef(null),i=xt(r,s),a=_P(e);return A.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&f){const g=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(g)}},[a,e]),y.jsx(nt.select,{...t,style:{...xP,...t.style},ref:i,defaultValue:e})});WP.displayName=b5;function qP(n){return n===""||n===void 0}function GP(n){const e=Jn(n),t=A.useRef(""),r=A.useRef(0),s=A.useCallback(a=>{const l=t.current+a;e(l),function d(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),i=A.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function KP(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=_5(n,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function _5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var x5=SP,YP=CP,S5=kP,A5=TP,C5=PP,XP=RP,E5=NP,QP=jP,JP=BP,k5=$P,T5=zP,ZP=HP;const ls=x5,cs=S5,Or=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(YP,{ref:r,className:ut("flex h-10 w-full items-center justify-between rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),...t,children:[e,y.jsx(A5,{asChild:!0,children:y.jsx(XU,{className:"h-4 w-4 opacity-50"})})]}));Or.displayName=YP.displayName;const Lr=A.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>y.jsx(C5,{children:y.jsx(XP,{ref:s,className:ut("relative z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-background dark:border-border",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:y.jsx(E5,{className:ut("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Lr.displayName=XP.displayName;const P5=A.forwardRef(({className:n,...e},t)=>y.jsx(QP,{ref:t,className:ut("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));P5.displayName=QP.displayName;const jt=A.forwardRef(({className:n,children:e,...t},r)=>t.value===null||t.value===void 0||t.value===""?null:y.jsxs(JP,{ref:r,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-accent",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(T5,{children:y.jsx(v_,{className:"h-4 w-4"})})}),y.jsx(k5,{children:e})]}));jt.displayName=JP.displayName;const R5=A.forwardRef(({className:n,...e},t)=>y.jsx(ZP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));R5.displayName=ZP.displayName;const H_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));H_.displayName="Card";const W_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex flex-col space-y-1.5 p-6",n),...e}));W_.displayName="CardHeader";const q_=ot.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ut("text-2xl font-semibold leading-none tracking-tight",n),...e}));q_.displayName="CardTitle";const G_=ot.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));G_.displayName="CardDescription";const eR=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("p-6 pt-0",n),...e}));eR.displayName="CardContent";const K_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex items-center p-6 pt-0",n),...e}));K_.displayName="CardFooter";const M5=({allocation:n,savingGoals:e,onConfirm:t,onDismiss:r})=>{const[s,i]=A.useState(""),[a,l]=A.useState(!0);A.useEffect(()=>{if(e&&e.length>0){const v=e.find(_=>_.nome_meta.toLowerCase().includes("emergncia")||_.nome_meta.toLowerCase().includes("reserva"));v?i(v.id):e[0]?.id?i(e[0].id):i("")}else i("")},[e]);const d=()=>{s&&(t(s),l(!1))},h=()=>{r(),l(!1)};if(!a||!n)return null;const f=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),g=e&&e.length>0;return y.jsx(Zn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50,transition:{duration:.2}},className:"fixed bottom-4 right-4 z-[101] w-full max-w-md",children:y.jsxs(H_,{className:"shadow-2xl border-l-4 border-customPurple bg-card",children:[y.jsx(W_,{children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(b_,{className:"w-8 h-8 mr-3 text-customPurple"}),y.jsxs("div",{children:[y.jsx(q_,{className:"text-lg font-semibold text-foreground",children:"Alocar Reserva Financeira?"}),y.jsxs(G_,{className:"text-sm text-muted-foreground",children:["Pagamento de ",f(n.transactionValue),' recebido para "',n.serviceName,'".']})]})]})}),y.jsxs(eR,{className:"space-y-3",children:[y.jsxs("p",{className:"text-base text-foreground",children:["Sugerimos guardar ",y.jsx("strong",{className:"text-customGreen",children:f(n.reserveAmount)}),"."]}),g?y.jsxs("div",{children:[y.jsx("label",{htmlFor:"goalSelect",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Escolha a meta de destino:"}),y.jsxs(ls,{value:s,onValueChange:i,disabled:!s,children:[y.jsx(Or,{id:"goalSelect",className:"w-full bg-input border-border focus:border-customPurple",children:y.jsx(cs,{placeholder:"Selecione uma meta..."})}),y.jsx(Lr,{className:"max-h-60",children:e.filter(v=>v.id).map(v=>y.jsxs(jt,{value:v.id,children:[v.icone&&y.jsx("span",{className:"mr-2",children:v.icone}),v.nome_meta," (",f(v.saldo_atual),")"]},v.id))})]})]}):y.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Nenhuma meta de reserva encontrada. Crie uma em "Reserva Inteligente" para alocar.'})]}),y.jsxs(K_,{className:"flex justify-end space-x-3 pt-4",children:[y.jsxs(Rt,{variant:"outline",onClick:h,className:"text-muted-foreground hover:bg-accent",children:[y.jsx(dz,{className:"mr-2 h-4 w-4"})," Agora no"]}),y.jsxs(Rt,{onClick:d,disabled:!s||!g,className:"bg-customGreen hover:bg-customGreen/90 text-white",children:[y.jsx(YU,{className:"mr-2 h-4 w-4"})," Confirmar"]})]})]})})},I5=n=>{const e=Rh(),[t,r]=A.useState(n),[s,i]=A.useState({type:"all",period:"all"}),a=A.useCallback((l,d={type:"all",period:"all"})=>{i(d),r(l),e(`/${l}`,{replace:!0}),window.scrollTo(0,0)},[e]);return{activeTab:t,setActiveTab:a,initialFinancialFilter:s}},D5=()=>{const[n,e]=A.useState(window.innerWidth<768);return A.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),{isMobile:n}},kw="gofotografo_trial_modal_shown_session",wC=[{element:"#dashboard-stat-card-netBalance",popover:{title:"Seu Saldo Geral",description:"Aqui voc acompanha o valor total de todos os pagamentos que j recebeu de seus clientes.",side:"bottom",align:"start"}},{element:"#dashboard-stat-card-pendingToReceive",popover:{title:"Pagamentos a Receber",description:"Fique de olho nos valores que ainda entraro no seu caixa. Essencial para seu planejamento!",side:"bottom",align:"start"}},{element:"#dashboard-chart-card-revenueExpensesChart",popover:{title:"Grfico de Faturamento",description:"Acompanhe visualmente a performance do seu negcio com o grfico de entradas e sadas.",side:"top",align:"start"}},{element:"#floating-action-button",popover:{title:"Menu de Navegao Rpida",description:"Clique aqui a qualquer momento para acessar as outras sees importantes, como Clientes, Trabalhos e Caixa.",side:"left",align:"start"}}],N5=n=>{const{user:e,settings:t,setSettings:r,trialDaysRemaining:s,planStatus:i,loadingAuth:a,loading:l}=ds(),{openModal:d,closeModal:h,openModals:f}=Ih(),g=$i(),v=Rh(),{toast:_}=ni(),[S,x]=A.useState(!1),[E,P]=A.useState(!1),M=A.useCallback((W=[],K={})=>{const ce=new URLSearchParams(g.search);W.forEach(ue=>ce.delete(ue)),Object.entries(K).forEach(([ue,fe])=>{fe!=null?ce.set(ue,String(fe)):ce.delete(ue)});const pe=ce.toString();v(`${g.pathname}${pe?`?${pe}`:""}`,{replace:!0})},[g.search,g.pathname,v]),R=A.useCallback(async()=>{if(e&&t&&t.has_completed_tour===!1)try{await r({...t,has_completed_tour:!0})}catch{_({title:"Erro",description:"No foi possvel salvar o status do tour.",variant:"destructive"})}},[e,t,r,_]),I=A.useCallback(()=>{if(typeof window.driver>"u"){_({title:"Erro no Tour",description:"No foi possvel iniciar o tour guiado.",variant:"destructive"}),R();return}const W=window.driver.js.driver,K=W({showProgress:!0,nextBtnText:"Prximo ",prevBtnText:" Anterior",doneBtnText:"Finalizar",steps:wC.map(ce=>({...ce,popover:{...ce.popover,onNextClick:()=>K.moveNext(),onPrevClick:()=>K.movePrevious(),onCloseClick:()=>{K.destroy(),R()}}})),onDestroyStarted:()=>{const ce=K.getActiveIndex?K.getActiveIndex():-1,pe=wC.length;(ce===-1||ce<pe-1)&&R(),K.destroy()},onHighlighted:ce=>{ce&&ce.node&&ce.node.scrollIntoView?ce.node.scrollIntoView({behavior:"smooth",block:"center"}):ce&&ce.target&&ce.target.scrollIntoView&&ce.target.scrollIntoView({behavior:"smooth",block:"center"})}});K.drive()},[_,R]);return A.useEffect(()=>{new URLSearchParams(g.search).get("payment_status")==="success"&&(M(["payment_status","session_id"]),sessionStorage.removeItem(kw))},[g,M]),A.useEffect(()=>{!a&&e&&i==="TRIAL"&&s>=0&&!sessionStorage.getItem(kw)&&!f.trialInfoModal&&!n&&(x(!0),d("trialInfoModal"),sessionStorage.setItem(kw,"true"))},[a,e,i,s,d,f,n]),A.useEffect(()=>{!a&&!l&&e&&t&&t.has_completed_tour===!1&&!f.trialInfoModal&&!f.welcomeTourModal&&!n&&(P(!0),d("welcomeTourModal"))},[a,l,e,t,d,f,n]),{showTrialInfoModal:S,handleCloseTrialInfoModal:()=>{x(!1),h("trialInfoModal")},showWelcomeTourModal:E,handleStartWelcomeTour:()=>{P(!1),h("welcomeTourModal"),I()},handleDeclineWelcomeTour:()=>{P(!1),h("welcomeTourModal"),R()},trialDaysRemainingFromHook:s}};let fv;const O5=new Uint8Array(16);function L5(){if(!fv&&(fv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fv(O5)}const lr=[];for(let n=0;n<256;++n)lr.push((n+256).toString(16).slice(1));function j5(n,e=0){return lr[n[e+0]]+lr[n[e+1]]+lr[n[e+2]]+lr[n[e+3]]+"-"+lr[n[e+4]]+lr[n[e+5]]+"-"+lr[n[e+6]]+lr[n[e+7]]+"-"+lr[n[e+8]]+lr[n[e+9]]+"-"+lr[n[e+10]]+lr[n[e+11]]+lr[n[e+12]]+lr[n[e+13]]+lr[n[e+14]]+lr[n[e+15]]}const F5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bC={randomUUID:F5};function B5(n,e,t){if(bC.randomUUID&&!n)return bC.randomUUID();n=n||{};const r=n.random||(n.rng||L5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,j5(r)}const tR=()=>{const{user:n,addClient:e,updateClient:t,getClientById:r}=ds(),{toast:s}=ni(),{openModals:i,closeModal:a}=Ih(),{isOpen:l,clientId:d,returnTo:h,onSuccess:f}=i.client||{},g=d?r(d):null,[v,_]=A.useState(!1),[S,x]=A.useState(null),[E,P]=A.useState(null),M=A.useRef(null),R=A.useCallback(()=>({name:"",email:"",phone:"",client_type:"Pessoa Fsica",status:"Ativo",cpf:"",cnpj:"",profile_photo_url:null}),[]),[I,O]=A.useState(R()),F=g?`client_form_draft_${g.id}`:"client_form_draft_new";A.useEffect(()=>{if(l){const fe=localStorage.getItem(F);if(fe)O(JSON.parse(fe)),P(JSON.parse(fe).profile_photo_url);else if(g){const ne={name:g.name||"",email:g.email||"",phone:g.phone||"",client_type:g.client_type||"Pessoa Fsica",status:g.status||"Ativo",cpf:g.cpf||"",cnpj:g.cnpj||"",profile_photo_url:g.profile_photo_url||null};O(ne),P(ne.profile_photo_url)}else O(R()),P(null)}else x(null),P(null)},[g,l,F,R]),A.useEffect(()=>{l&&localStorage.setItem(F,JSON.stringify(I))},[I,l,F]);const $=fe=>{const ne=fe.target.files[0];ne&&(x(ne),P(URL.createObjectURL(ne)))},W=()=>{x(null),P(null),O(fe=>({...fe,profile_photo_url:null})),M.current&&(M.current.value="")},K=()=>{localStorage.removeItem(F),a("client")},ce=fe=>{if(!fe)return"?";const ne=fe.split(" ");return ne.length===1?ne[0].charAt(0).toUpperCase():`${ne[0].charAt(0)}${ne[ne.length-1].charAt(0)}`.toUpperCase()},pe=async fe=>{if(fe.preventDefault(),!I.name.trim()){s({title:"Erro de Validao",description:"O nome do cliente  obrigatrio.",variant:"destructive"});return}_(!0);const ne={...I};ne.client_type==="Pessoa Fsica"?ne.cnpj="":ne.cpf="";try{let H=I.profile_photo_url;if(S){const te=S.name.split(".").pop(),z=`${I.name.replace(/\s+/g,"_")}-${B5()}.${te}`,re=`public/${n.id}/client_photos/${z}`,{error:Z}=await Se.storage.from("user_assets").upload(re,S,{cacheControl:"3600",upsert:!0});if(Z)throw Z;const{data:B}=Se.storage.from("user_assets").getPublicUrl(re);H=B.publicUrl}else I.profile_photo_url===null&&(H=null);ne.profile_photo_url=H;let q;g?(q=await t(g.id,ne),s({title:"Cliente atualizado",description:"Cliente foi atualizado com sucesso!"})):(q=await e(ne),s({title:"Cliente adicionado",description:"Novo cliente foi adicionado com sucesso!"})),h&&f&&(f(q||{...ne,id:g?.id}),s({title:"Sucesso!",description:"Cliente selecionado automaticamente no formulrio financeiro."})),localStorage.removeItem(F),K()}catch(H){s({title:"Erro ao salvar",description:`Falha ao salvar cliente: ${H.message}`,variant:"destructive"})}finally{_(!1)}},ue=(fe,ne)=>{O(H=>{const q={...H,[fe]:ne};return fe==="client_type"&&(q.cpf="",q.cnpj=""),q})};return l?y.jsx(ji,{children:l&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:g?"Editar Cliente":"Novo Cliente"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:K,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:v,children:y.jsx(hu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:pe,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[y.jsxs(tm,{className:"w-24 h-24 text-3xl border-4 border-primary/20",children:[y.jsx(nm,{src:E,alt:I.name}),y.jsx(rm,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:ce(I.name)})]}),y.jsx("input",{type:"file",ref:M,onChange:$,accept:"image/png, image/jpeg",className:"hidden",disabled:v}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:()=>M.current?.click(),disabled:v,children:[y.jsx(KU,{className:"w-4 h-4 mr-2"}),E?"Alterar Foto":"Adicionar Foto"]}),E&&y.jsxs(Rt,{type:"button",variant:"destructive",size:"sm",onClick:W,disabled:v,children:[y.jsx(__,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(cz,{className:"w-4 h-4 inline mr-2"}),"Nome *"]}),y.jsx("input",{type:"text",value:I.name,onChange:fe=>ue("name",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do cliente",required:!0,disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Tipo de Cliente"]}),y.jsxs("select",{value:I.client_type,onChange:fe=>ue("client_type",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:v,children:[y.jsx("option",{value:"Pessoa Fsica",children:"Pessoa Fsica"}),y.jsx("option",{value:"Pessoa Jurdica",children:"Pessoa Jurdica"})]})]}),I.client_type==="Pessoa Fsica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(uz,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:I.cpf,onChange:fe=>ue("cpf",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:v})]}),I.client_type==="Pessoa Jurdica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:I.cnpj,onChange:fe=>ue("cnpj",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fk,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:I.email,onChange:fe=>ue("email",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(pk,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:I.phone,onChange:fe=>ue("phone",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:v})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsxs("select",{value:I.status,onChange:fe=>ue("status",fe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:v,children:[y.jsx("option",{value:"Ativo",children:"Ativo"}),y.jsx("option",{value:"Inativo",children:"Inativo"})]})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:K,className:"flex-1",disabled:v,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:v,children:v?y.jsx(Sh,{className:"w-4 h-4 animate-spin"}):g?"Atualizar":"Adicionar"})]})]})]})})}):null},$5=[{value:"equipamentos",label:"Equipamentos Fotogrficos",icon:""},{value:"software",label:"Software/Licenas",icon:""},{value:"servicos",label:"Servios Gerais",icon:""},{value:"marketing",label:"Marketing/Publicidade",icon:""},{value:"educacao",label:"Educao/Cursos",icon:""},{value:"transporte",label:"Transporte/Logstica",icon:""},{value:"alimentacao",label:"Alimentao/Hospedagem",icon:""},{value:"estudio",label:"Estdio/Locao",icon:""},{value:"freelancer",label:"Freelancer/Assistente",icon:""},{value:"juridico",label:"Jurdico/Contabilidade",icon:""},{value:"manutencao",label:"Manuteno/Reparo",icon:""},{value:"material",label:"Material de Escritrio",icon:""},{value:"tecnologia",label:"Tecnologia/Internet",icon:""},{value:"seguro",label:"Seguros",icon:""},{value:"outros",label:"Outros",icon:""}],U5=[{value:"pessoa_fisica",label:"Pessoa Fsica"},{value:"pessoa_juridica",label:"Pessoa Jurdica"},{value:"mei",label:"MEI"}],z5=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"},{value:"bloqueado",label:"Bloqueado"}],V5=()=>{const{addSupplier:n,updateSupplier:e,getSupplierById:t}=ds(),{toast:r}=ni(),{openModals:s,closeModal:i}=Ih(),{isOpen:a,supplierId:l,returnTo:d,onSuccess:h}=s.supplier||{},f=l?t(l):null,[g,v]=A.useState(!1),_=A.useCallback(()=>({name:"",email:"",phone:"",supplier_type:"pessoa_juridica",category:"",status:"ativo",cpf:"",cnpj:"",notes:""}),[]),[S,x]=A.useState(_()),E=f?`supplier_form_draft_${f.id}`:"supplier_form_draft_new";A.useEffect(()=>{if(a){const I=localStorage.getItem(E);if(I)x(JSON.parse(I));else if(f){const O={name:f.name||"",email:f.email||"",phone:f.phone||"",supplier_type:f.supplier_type||"pessoa_juridica",category:f.category||"",status:f.status||"ativo",cpf:f.cpf||"",cnpj:f.cnpj||"",notes:f.notes||""};x(O)}else x(_())}},[f,a,E,_]),A.useEffect(()=>{a&&localStorage.setItem(E,JSON.stringify(S))},[S,a,E]);const P=()=>{localStorage.removeItem(E),i("supplier")},M=async I=>{if(I.preventDefault(),!S.name.trim()){r({title:"Erro de Validao",description:"O nome do fornecedor  obrigatrio.",variant:"destructive"});return}v(!0);const O={...S};O.supplier_type==="pessoa_fisica"||O.supplier_type==="mei"?O.cnpj="":O.cpf="";try{let F;f?(F=await e(f.id,O),r({title:"Fornecedor atualizado",description:"Fornecedor foi atualizado com sucesso!"})):(F=await n(O),r({title:"Fornecedor adicionado",description:"Novo fornecedor foi adicionado com sucesso!"})),d&&h&&(h(F||{...O,id:f?.id}),r({title:"Sucesso!",description:"Fornecedor selecionado automaticamente no formulrio financeiro."})),localStorage.removeItem(E),P()}catch(F){r({title:"Erro ao salvar",description:`Falha ao salvar fornecedor: ${F.message}`,variant:"destructive"})}finally{v(!1)}},R=(I,O)=>{x(F=>{const $={...F,[I]:O};return I==="supplier_type"&&($.cpf="",$.cnpj=""),$})};return a?y.jsx(ji,{children:a&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:f?"Editar Fornecedor":"Novo Fornecedor"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:P,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:g,children:y.jsx(hu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:M,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsx("div",{className:"flex flex-col items-center space-y-3",children:y.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:y.jsx(Gp,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Nome do Fornecedor *"]}),y.jsx("input",{type:"text",value:S.name,onChange:I=>R("name",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do fornecedor",required:!0,disabled:g})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Tipo de Fornecedor"]}),y.jsx("select",{value:S.supplier_type,onChange:I=>R("supplier_type",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:g,children:U5.map(I=>y.jsx("option",{value:I.value,children:I.label},I.value))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Gp,{className:"w-4 h-4 inline mr-2"}),"Categoria"]}),y.jsxs("select",{value:S.category,onChange:I=>R("category",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:g,children:[y.jsx("option",{value:"",children:"Selecione uma categoria"}),$5.map(I=>y.jsxs("option",{value:I.value,children:[I.icon," ",I.label]},I.value))]})]}),(S.supplier_type==="pessoa_fisica"||S.supplier_type==="mei")&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(lb,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:S.cpf,onChange:I=>R("cpf",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:g})]}),S.supplier_type==="pessoa_juridica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:S.cnpj,onChange:I=>R("cnpj",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:g})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fk,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:S.email,onChange:I=>R("email",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:g})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(pk,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:S.phone,onChange:I=>R("phone",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:g})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(lb,{className:"w-4 h-4 inline mr-2"}),"Observaes (Opcional)"]}),y.jsx("textarea",{value:S.notes,onChange:I=>R("notes",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent h-20 resize-none",placeholder:"Observaes sobre o fornecedor...",disabled:g})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsx("select",{value:S.status,onChange:I=>R("status",I.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:g,children:z5.map(I=>y.jsx("option",{value:I.value,children:I.label},I.value))})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:P,className:"flex-1",disabled:g,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:g,children:g?y.jsx(Sh,{className:"w-4 h-4 animate-spin"}):f?"Atualizar":"Adicionar"})]})]})]})})}):null},jr=A.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:ut("flex h-10 w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:r,...t}));jr.displayName="Input";var H5="Label",nR=A.forwardRef((n,e)=>y.jsx(nt.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));nR.displayName=H5;var rR=nR;const W5=Ek("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ln=ot.forwardRef(({className:n,...e},t)=>y.jsx(rR,{ref:t,className:ut(W5(),n),...e}));ln.displayName=rR.displayName;var Ry="Dialog",[sR,$9]=So(Ry),[q5,Ui]=sR(Ry),iR=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,l=A.useRef(null),d=A.useRef(null),[h,f]=Ah({prop:r,defaultProp:s??!1,onChange:i,caller:Ry});return y.jsx(q5,{scope:e,triggerRef:l,contentRef:d,contentId:wa(),titleId:wa(),descriptionId:wa(),open:h,onOpenChange:f,onOpenToggle:A.useCallback(()=>f(g=>!g),[f]),modal:a,children:t})};iR.displayName=Ry;var oR="DialogTrigger",aR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ui(oR,t),i=xt(e,s.triggerRef);return y.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Q_(s.open),...r,ref:i,onClick:Fe(n.onClick,s.onOpenToggle)})});aR.displayName=oR;var Y_="DialogPortal",[G5,lR]=sR(Y_,{forceMount:void 0}),cR=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=Ui(Y_,e);return y.jsx(G5,{scope:e,forceMount:t,children:A.Children.map(r,a=>y.jsx(Is,{present:t||i.open,children:y.jsx(_y,{asChild:!0,container:s,children:a})}))})};cR.displayName=Y_;var Xv="DialogOverlay",uR=A.forwardRef((n,e)=>{const t=lR(Xv,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Ui(Xv,n.__scopeDialog);return i.modal?y.jsx(Is,{present:r||i.open,children:y.jsx(Y5,{...s,ref:e})}):null});uR.displayName=Xv;var K5=nu("DialogOverlay.RemoveScroll"),Y5=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ui(Xv,t);return y.jsx(Sy,{as:K5,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(nt.div,{"data-state":Q_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ou="DialogContent",dR=A.forwardRef((n,e)=>{const t=lR(ou,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Ui(ou,n.__scopeDialog);return y.jsx(Is,{present:r||i.open,children:i.modal?y.jsx(X5,{...s,ref:e}):y.jsx(Q5,{...s,ref:e})})});dR.displayName=ou;var X5=A.forwardRef((n,e)=>{const t=Ui(ou,n.__scopeDialog),r=A.useRef(null),s=xt(e,t.contentRef,r);return A.useEffect(()=>{const i=r.current;if(i)return N_(i)},[]),y.jsx(hR,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(n.onCloseAutoFocus,i=>{i.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Fe(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault())})}),Q5=A.forwardRef((n,e)=>{const t=Ui(ou,n.__scopeDialog),r=A.useRef(!1),s=A.useRef(!1);return y.jsx(hR,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{n.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||t.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{n.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;t.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),hR=A.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,l=Ui(ou,t),d=A.useRef(null),h=xt(e,d);return A_(),y.jsxs(y.Fragment,{children:[y.jsx(gy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(my,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Q_(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(J5,{titleId:l.titleId}),y.jsx(e6,{contentRef:d,descriptionId:l.descriptionId})]})]})}),X_="DialogTitle",fR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ui(X_,t);return y.jsx(nt.h2,{id:s.titleId,...r,ref:e})});fR.displayName=X_;var pR="DialogDescription",mR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ui(pR,t);return y.jsx(nt.p,{id:s.descriptionId,...r,ref:e})});mR.displayName=pR;var gR="DialogClose",vR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Ui(gR,t);return y.jsx(nt.button,{type:"button",...r,ref:e,onClick:Fe(n.onClick,()=>s.onOpenChange(!1))})});vR.displayName=gR;function Q_(n){return n?"open":"closed"}var yR="DialogTitleWarning",[U9,wR]=Yz(yR,{contentName:ou,titleName:X_,docsSlug:"dialog"}),J5=({titleId:n})=>{const e=wR(yR),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},Z5="DialogDescriptionWarning",e6=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wR(Z5).contentName}}.`;return A.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},t6=iR,z9=aR,n6=cR,bR=uR,_R=dR,xR=fR,SR=mR,AR=vR;const r6=t6,s6=n6,V9=AR,CR=ot.forwardRef(({className:n,...e},t)=>y.jsx(bR,{ref:t,className:ut("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));CR.displayName=bR.displayName;const ER=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(s6,{children:[y.jsx(CR,{}),y.jsxs(_R,{ref:r,className:ut("fixed left-[50%] top-[50%] z-[51] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/50 bg-background/70 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-xl",n),...t,children:[e,y.jsxs(AR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(hu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ER.displayName=_R.displayName;const kR=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});kR.displayName="DialogHeader";const i6=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});i6.displayName="DialogFooter";const TR=ot.forwardRef(({className:n,...e},t)=>y.jsx(xR,{ref:t,className:ut("text-lg font-semibold leading-none tracking-tight",n),...e}));TR.displayName=xR.displayName;const PR=ot.forwardRef(({className:n,...e},t)=>y.jsx(SR,{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));PR.displayName=SR.displayName;const o6={ENTRADA:[{value:"sessao_fotos",label:"Sesso de Fotos",icon:""},{value:"evento",label:"Evento/Casamento",icon:""},{value:"ensaio",label:"Ensaio",icon:""},{value:"album",label:"lbum/Produto",icon:""},{value:"edicao",label:"Edio de Fotos",icon:""},{value:"consultoria",label:"Consultoria",icon:""},{value:"curso",label:"Curso/Workshop",icon:""},{value:"licenciamento",label:"Licenciamento de Imagem",icon:""},{value:"book",label:"Book Fotogrfico",icon:""},{value:"corporativo",label:"Evento Corporativo",icon:""},{value:"newborn",label:"Newborn",icon:""},{value:"gestante",label:"Ensaio Gestante",icon:""},{value:"familia",label:"Ensaio Famlia",icon:""},{value:"formatura",label:"Formatura",icon:""},{value:"aniversario",label:"Aniversrio",icon:""},{value:"outros",label:"Outros",icon:""}],SAIDA:[{value:"equipamento",label:"Equipamento Fotogrfico",icon:""},{value:"lente",label:"Lentes",icon:""},{value:"iluminacao",label:"Iluminao",icon:""},{value:"trip",label:"Trips/Suportes",icon:""},{value:"software",label:"Software/Licenas",icon:""},{value:"marketing",label:"Marketing/Publicidade",icon:""},{value:"site",label:"Site/Hospedagem",icon:""},{value:"curso_capacitacao",label:"Cursos/Capacitao",icon:""},{value:"transporte",label:"Transporte/Combustvel",icon:""},{value:"alimentacao",label:"Alimentao",icon:""},{value:"estudio",label:"Aluguel Estdio",icon:""},{value:"cenario",label:"Cenrios/Props",icon:""},{value:"assistente",label:"Assistente/Freelancer",icon:""},{value:"contador",label:"Contador/Contabilidade",icon:""},{value:"seguro",label:"Seguro Equipamentos",icon:""},{value:"manutencao",label:"Manuteno Equipamentos",icon:""},{value:"material",label:"Material Escritrio",icon:""},{value:"backup",label:"Backup/Armazenamento",icon:""},{value:"juridico",label:"Jurdico/Advocacia",icon:""},{value:"outros",label:"Outros",icon:""}]},a6=[{value:"pix",label:"PIX",icon:""},{value:"cartao_credito",label:"Carto de Crdito",icon:""},{value:"cartao_debito",label:"Carto de Dbito",icon:""},{value:"dinheiro",label:"Dinheiro",icon:""},{value:"cheque",label:"Cheque",icon:""},{value:"ted",label:"TED",icon:""},{value:"doc",label:"DOC",icon:""},{value:"deposito",label:"Depsito Bancrio",icon:""},{value:"boleto",label:"Boleto",icon:""},{value:"outros",label:"Outros",icon:""}],H9=[{value:"all",label:"Todos os perodos"},{value:"today",label:"Hoje"},{value:"week",label:"Esta semana"},{value:"month",label:"Este ms"},{value:"last_7_days",label:"ltimos 7 dias"},{value:"last_30_days",label:"ltimos 30 dias"},{value:"last_90_days",label:"ltimos 90 dias"},{value:"last_year",label:"ltimo ano"},{value:"current_year",label:"Este ano"},{value:"custom",label:"Perodo personalizado"}],l6=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:s})=>{const{clients:i,suppliers:a=[],addTransaction:l,updateTransaction:d,wallets:h}=ds(),{toast:f}=ni(),{openModal:g}=Ih(),[v,_]=A.useState(""),[S,x]=A.useState(""),[E,P]=A.useState(Yc(new Date,"yyyy-MM-dd")),[M,R]=A.useState("PENDENTE"),[I,O]=A.useState(""),[F,$]=A.useState(""),[W,K]=A.useState(""),[ce,pe]=A.useState(""),[ue,fe]=A.useState(""),[ne,H]=A.useState(!1),q=A.useCallback(()=>{_(""),x(""),P(Yc(new Date,"yyyy-MM-dd")),R("PENDENTE"),O(""),$(""),K(""),pe(""),fe("")},[]);A.useEffect(()=>{n&&(r?(_(r.descricao||""),x(r.valor||""),P(r.data?Yc(new Date(r.data),"yyyy-MM-dd"):Yc(new Date,"yyyy-MM-dd")),R(r.status||"PENDENTE"),O(r.cliente_id||""),$(r.fornecedor_id||r.supplier_id||""),K(r.category||""),pe(r.metodo_pagamento||""),fe(r.wallet_id||"")):q())},[r,n,q]);const te=async ae=>{if(ae.preventDefault(),t==="ENTRADA"&&M==="PAGO"&&!ue){f({title:"Erro de Validao",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}H(!0);const ye={descricao:v,valor:parseFloat(S),data:E,tipo:t.toUpperCase(),status:M,cliente_id:t.toUpperCase()==="ENTRADA"&&I||null,fornecedor_id:t.toUpperCase()==="SAIDA"&&F||null,category:W,metodo_pagamento:ce,wallet_id:ue||null};try{r?.id?(await d(r.id,ye),f({title:"Sucesso!",description:"Lanamento atualizado."})):(await l(ye),f({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`})),s&&s(),e()}catch(Me){f({title:"Erro",description:`No foi possvel salvar: ${Me.message}`,variant:"destructive"})}finally{H(!1)}},z=h?.filter(ae=>ae&&ae.id&&ae.name)||[],re=i?.filter(ae=>ae&&ae.id&&ae.name)||[],Z=a?.filter(ae=>ae&&ae.id&&ae.name)||[],B=()=>{g("client",{returnTo:"financial",onSuccess:ae=>{O(ae.id)}})},X=()=>{g("supplier",{returnTo:"financial",onSuccess:ae=>{$(ae.id)}})};return y.jsx(ji,{children:n&&y.jsx(r6,{open:n,onOpenChange:e,children:y.jsx(ER,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col z-[4000]",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex flex-col h-full",children:[y.jsxs(kR,{className:"flex-shrink-0",children:[y.jsxs(TR,{children:[r?.id?"Editar":"Novo"," Lanamento: ",t==="entrada"?"Entrada":"Sada"]}),y.jsx(PR,{children:"Preencha os detalhes abaixo."})]}),y.jsx("div",{className:"flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-muted-foreground/30",children:y.jsxs("form",{onSubmit:te,className:"space-y-4 py-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"descricao",children:"Descrio"}),y.jsx(jr,{id:"descricao",value:v,onChange:ae=>_(ae.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"valor",children:"Valor (R$)"}),y.jsx(jr,{id:"valor",type:"number",value:S,onChange:ae=>x(ae.target.value),required:!0,step:"0.01"})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"data",children:"Data"}),y.jsx(jr,{id:"data",type:"date",value:E,onChange:ae=>P(ae.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"status",children:"Status"}),y.jsxs(ls,{value:M,onValueChange:R,children:[y.jsx(Or,{children:y.jsx(cs,{})}),y.jsxs(Lr,{children:[y.jsx(jt,{value:"PENDENTE",children:"Pendente"}),y.jsx(jt,{value:"PAGO",children:"Pago"}),y.jsx(jt,{value:"ATRASADO",children:"Atrasado"}),y.jsx(jt,{value:"CANCELADO",children:"Cancelado"})]})]})]}),t==="entrada"?y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(ln,{htmlFor:"cliente",children:"Cliente (Opcional)"}),y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:B,className:"h-8 px-3 text-xs",children:[y.jsx(Yp,{className:"w-3 h-3 mr-1"}),"Novo Cliente"]})]}),y.jsxs(ls,{value:I||"",onValueChange:O,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um cliente"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"Nenhum"}),re.map(ae=>y.jsx(jt,{value:ae.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ae.name}),ae.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ae.email})]})},ae.id))]})]})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(ln,{htmlFor:"fornecedor",children:"Fornecedor (Opcional)"}),y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:X,className:"h-8 px-3 text-xs",children:[y.jsx(Yp,{className:"w-3 h-3 mr-1"}),"Novo Fornecedor"]})]}),y.jsxs(ls,{value:F||"",onValueChange:$,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um fornecedor"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"Nenhum"}),Z.map(ae=>y.jsx(jt,{value:ae.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ae.name}),ae.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ae.email}),ae.category&&y.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:ae.category.replace("_"," ")})]})},ae.id))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"categoria",children:"Categoria (Opcional)"}),y.jsxs(ls,{value:W,onValueChange:K,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione uma categoria"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"Sem categoria"}),(o6[t.toUpperCase()]||[]).map(ae=>y.jsx(jt,{value:ae.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ae.icon}),ae.label]})},ae.value))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"metodoPagamento",children:"Mtodo de Pagamento (Opcional)"}),y.jsxs(ls,{value:ce,onValueChange:pe,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um mtodo"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"No especificado"}),a6.map(ae=>y.jsx(jt,{value:ae.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ae.icon}),ae.label]})},ae.value))]})]})]}),y.jsxs("div",{children:[y.jsxs(ln,{htmlFor:"wallet",className:"flex items-center",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),"Carteira ",t==="ENTRADA"&&M==="PAGO"?"*":"(Opcional)"]}),z.length>0?y.jsxs(ls,{value:ue||"",onValueChange:fe,required:t==="ENTRADA"&&M==="PAGO",children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione uma carteira"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"Nenhuma"}),z.map(ae=>y.jsx(jt,{value:ae.id,children:y.jsxs("div",{className:"flex items-center",children:[ae.icon_url&&y.jsx("img",{src:ae.icon_url,alt:ae.name,className:"w-4 h-4 mr-2 object-contain"}),ae.name]})},ae.id))]})]}):y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-4 flex-shrink-0",children:[y.jsx(Rt,{type:"button",variant:"ghost",onClick:e,disabled:ne,children:"Cancelar"}),y.jsx(Rt,{type:"submit",disabled:ne,children:ne?"Salvando...":"Salvar"})]})]})})]})})})})},RR=ot.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ut("flex min-h-[80px] w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:t,...e}));RR.displayName="Textarea";const pv=({label:n,selectedWallet:e,onWalletChange:t,wallets:r,required:s=!1})=>{const i=r?.filter(a=>a&&a.id&&a.name)||[];return i.length===0?y.jsxs("div",{className:"space-y-1",children:[y.jsxs(ln,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),n]}),y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs(ln,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),n," ",s&&"*"]}),y.jsxs(ls,{value:e||"",onValueChange:t,required:s,children:[y.jsx(Or,{id:`wallet-selector-${n.replace(/\s+/g,"-")}`,children:y.jsx(cs,{placeholder:"Selecione uma carteira"})}),y.jsxs(Lr,{children:[y.jsx(jt,{value:"",children:"Nenhuma"}),i.map(a=>y.jsx(jt,{value:a.id,children:y.jsxs("div",{className:"flex items-center",children:[a.icon_url&&y.jsx("img",{src:a.icon_url,alt:a.name,className:"w-4 h-4 mr-2 object-contain"}),a.name]})},a.id))]})]})]})},c6=({card:n,onSave:e,onCancel:t,isSaving:r})=>{const{clients:s,servicePackages:i,settings:a,wallets:l}=ds(),{toast:d}=ni(),[h,f]=A.useState({title:"",client_id:"",status:"agendado",value:"",description:"",date:"",time:"",service_package_id:"",payment_type:"SOMENTE_AGENDADO",entry_value:"",installments:"",payment_method:"",main_wallet_id:"",entry_wallet_id:""});A.useEffect(()=>{f(n?{title:n.title||"",client_id:n.client_id||"",status:n.status||"agendado",value:n.value||"",description:n.description||"",date:n.date?Yc(RE(n.date),"yyyy-MM-dd"):"",time:n.time||"",service_package_id:n.service_package_id||"",payment_type:n.payment_type||"SOMENTE_AGENDADO",entry_value:n.entry_value||"",installments:n.installments||"",payment_method:n.payment_method||"",main_wallet_id:n.main_wallet_id||"",entry_wallet_id:n.entry_wallet_id||""}:P=>({...P,status:a?.workflow_columns?.[0]?.id||"agendado"}))},[n,a]);const g=P=>{const{name:M,value:R}=P.target;f(I=>({...I,[M]:R}))},v=(P,M)=>{f(R=>({...R,[P]:M}))},_=P=>{if(P.preventDefault(),h.payment_type!=="SOMENTE_AGENDADO"){if(h.payment_type==="integral"&&!h.main_wallet_id){d({title:"Campo obrigatrio",description:"Por favor, selecione a carteira para o pagamento integral.",variant:"destructive"});return}if(h.payment_type==="parcial"&&(!h.entry_wallet_id||!h.main_wallet_id)){d({title:"Campos obrigatrios",description:"Por favor, selecione as carteiras para a entrada e para o restante.",variant:"destructive"});return}if((h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&!h.main_wallet_id){d({title:"Campo obrigatrio",description:"Por favor, selecione a carteira para o parcelamento.",variant:"destructive"});return}}e(h)},S=a?.workflow_columns?.filter(P=>P&&P.id&&P.title)||[],x=s?.filter(P=>P&&P.id&&P.name)||[],E=i?.filter(P=>P&&P.id&&P.name)||[];return y.jsxs("form",{onSubmit:_,id:"workflow-form",className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"title",children:"Ttulo do Trabalho"}),y.jsx(jr,{id:"title",name:"title",value:h.title,onChange:g,required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"client_id",children:"Cliente"}),y.jsxs(ls,{name:"client_id",value:h.client_id||"",onValueChange:P=>v("client_id",P),children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um cliente"})}),y.jsx(Lr,{className:"max-h-60",children:x.map(P=>y.jsx(jt,{value:P.id,children:P.name},P.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"date",children:"Data"}),y.jsx(jr,{id:"date",name:"date",type:"date",value:h.date,onChange:g})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"time",children:"Hora"}),y.jsx(jr,{id:"time",name:"time",type:"time",value:h.time,onChange:g})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"status",children:"Status"}),y.jsxs(ls,{name:"status",value:h.status,onValueChange:P=>v("status",P),children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um status"})}),y.jsx(Lr,{className:"max-h-60",children:S.map(P=>y.jsx(jt,{value:P.id,children:P.title},P.id))})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"service_package_id",children:"Pacote de Servio (Opcional)"}),y.jsxs(ls,{name:"service_package_id",value:h.service_package_id||"",onValueChange:P=>v("service_package_id",P),children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um pacote"})}),y.jsxs(Lr,{className:"max-h-60",children:[y.jsx(jt,{value:"",children:"Nenhum"}),E.map(P=>y.jsx(jt,{value:P.id,children:P.name},P.id))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"description",children:"Descrio"}),y.jsx(RR,{id:"description",name:"description",value:h.description,onChange:g})]}),y.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[y.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[y.jsx(Kp,{className:"w-5 h-5 mr-2"})," Detalhes Financeiros"]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"value",children:"Valor Total do Trabalho"}),y.jsx(jr,{id:"value",name:"value",type:"number",step:"0.01",value:h.value,onChange:g,placeholder:"Ex: 1500.00"})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"payment_type",children:"Forma de Pagamento"}),y.jsxs(ls,{name:"payment_type",value:h.payment_type,onValueChange:P=>v("payment_type",P),children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione a forma de pagamento"})}),y.jsxs(Lr,{children:[y.jsx(jt,{value:"SOMENTE_AGENDADO",children:"Apenas Agendamento"}),y.jsx(jt,{value:"integral",children:"Pagamento Integral"}),y.jsx(jt,{value:"parcial",children:"Pagamento Parcial (Entrada + Restante)"}),y.jsx(jt,{value:"parcelado_pix",children:"Parcelado no PIX"}),y.jsx(jt,{value:"parcelado_cartao",children:"Parcelado no Carto"})]})]})]}),h.payment_type==="integral"&&y.jsx(pv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0}),h.payment_type==="parcial"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"entry_value",children:"Valor da Entrada"}),y.jsx(jr,{id:"entry_value",name:"entry_value",type:"number",step:"0.01",value:h.entry_value,onChange:g,placeholder:"Ex: 500.00"})]}),y.jsx(pv,{label:"Carteira da Entrada",selectedWallet:h.entry_wallet_id,onWalletChange:P=>v("entry_wallet_id",P),wallets:l,required:!0}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(pv,{label:"Carteira do Restante",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]}),(h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"installments",children:"Nmero de Parcelas"}),y.jsx(jr,{id:"installments",name:"installments",type:"number",step:"1",value:h.installments,onChange:g,placeholder:"Ex: 6"})]}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(pv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]})]})]})};var My="Checkbox",[u6,W9]=So(My),[d6,J_]=u6(My);function h6(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:g}=n,[v,_]=Ah({prop:t,defaultProp:s??!1,onChange:d,caller:My}),[S,x]=A.useState(null),[E,P]=A.useState(null),M=A.useRef(!1),R=S?!!a||!!S.closest("form"):!0,I={checked:v,disabled:i,setChecked:_,control:S,setControl:x,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:M,required:h,defaultChecked:Al(s)?!1:s,isFormControl:R,bubbleInput:E,setBubbleInput:P};return y.jsx(d6,{scope:e,...I,children:f6(g)?g(I):r})}var MR="CheckboxTrigger",IR=A.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:a,disabled:l,checked:d,required:h,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:_,bubbleInput:S}=J_(MR,n),x=xt(s,f),E=A.useRef(d);return A.useEffect(()=>{const P=i?.form;if(P){const M=()=>g(E.current);return P.addEventListener("reset",M),()=>P.removeEventListener("reset",M)}},[i,g]),y.jsx(nt.button,{type:"button",role:"checkbox","aria-checked":Al(d)?"mixed":d,"aria-required":h,"data-state":jR(d),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:x,onKeyDown:Fe(e,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:Fe(t,P=>{g(M=>Al(M)?!0:!M),S&&_&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})})});IR.displayName=MR;var Z_=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:d,onCheckedChange:h,form:f,...g}=n;return y.jsx(h6,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:v})=>y.jsxs(y.Fragment,{children:[y.jsx(IR,{...g,ref:e,__scopeCheckbox:t}),v&&y.jsx(LR,{__scopeCheckbox:t})]})})});Z_.displayName=My;var DR="CheckboxIndicator",NR=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=J_(DR,t);return y.jsx(Is,{present:r||Al(i.checked)||i.checked===!0,children:y.jsx(nt.span,{"data-state":jR(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});NR.displayName=DR;var OR="CheckboxBubbleInput",LR=A.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:d,name:h,value:f,form:g,bubbleInput:v,setBubbleInput:_}=J_(OR,n),S=xt(t,_),x=_P(i),E=zk(r);A.useEffect(()=>{const M=v;if(!M)return;const R=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(R,"checked").set,F=!s.current;if(x!==i&&O){const $=new Event("click",{bubbles:F});M.indeterminate=Al(i),O.call(M,Al(i)?!1:i),M.dispatchEvent($)}},[v,x,i,s]);const P=A.useRef(Al(i)?!1:i);return y.jsx(nt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??P.current,required:l,disabled:d,name:h,value:f,form:g,...e,tabIndex:-1,ref:S,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});LR.displayName=OR;function f6(n){return typeof n=="function"}function Al(n){return n==="indeterminate"}function jR(n){return Al(n)?"indeterminate":n?"checked":"unchecked"}const FR=A.forwardRef(({className:n,...e},t)=>y.jsx(Z_,{ref:t,className:ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(NR,{className:ut("flex items-center justify-center text-current"),children:y.jsx(v_,{className:"h-4 w-4"})})}));FR.displayName=Z_.displayName;const p6=({subtasks:n,onAddSubtask:e,onToggleSubtask:t,onDeleteSubtask:r,cardExists:s})=>{const[i,a]=A.useState(""),l=()=>{i.trim()&&(e(i),a(""))};return s?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(jr,{type:"text",placeholder:"Nova subtarefa...",value:i,onChange:d=>a(d.target.value),onKeyPress:d=>{d.key==="Enter"&&l()},className:"flex-grow"}),y.jsxs(Rt,{onClick:l,children:[y.jsx(Yp,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),y.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[(n||[]).map(d=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-700 rounded-md group",children:[y.jsxs("label",{className:"flex items-center space-x-2 text-sm text-slate-700 dark:text-slate-300 cursor-pointer",children:[y.jsx(FR,{checked:d.completed,onCheckedChange:()=>t(d.id)}),y.jsx("span",{className:d.completed?"line-through text-slate-500 dark:text-slate-400":"",children:d.text})]}),y.jsx(Rt,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100",onClick:()=>r(d.id),children:y.jsx(__,{size:14,className:"text-red-500"})})]},d.id||d.text)),(n||[]).length===0&&y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhuma subtarefa adicionada."})]})]}):y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(w_,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou gerenciar subtarefas."]})},m6=({comments:n,onAddComment:e,cardExists:t,onAfterComment:r})=>{const[s,i]=A.useState(""),{settings:a}=ds(),l=async()=>{s.trim()&&(await e(s),i(""),r&&r())};if(!t)return y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(w_,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou ver comentrios."]});const d=h=>{if(!h)return"?";const f=h.split(" ");return f.length>1?`${f[0][0]}${f[f.length-1][0]}`.toUpperCase():h.substring(0,2).toUpperCase()};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin p-1",children:n&&n.length>0?n.slice().sort((h,f)=>new Date(h.date)-new Date(f.date)).map(h=>y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs(tm,{className:"h-8 w-8",children:[y.jsx(nm,{src:h.user_photo_url,alt:h.user}),y.jsx(rm,{children:d(h.user)})]}),y.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:h.user}),y.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(h.date).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),y.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:h.text})]})]},h.id||h.date)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum comentrio ainda."})}),y.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 flex items-start space-x-3",children:[y.jsxs(tm,{className:"h-8 w-8 mt-1",children:[y.jsx(nm,{src:a?.profile_photo,alt:a?.user_name}),y.jsx(rm,{children:d(a?.user_name)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx(jr,{type:"text",value:s,onChange:h=>i(h.target.value),className:"flex-1",placeholder:"Adicionar comentrio...",onKeyPress:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l())}}),y.jsxs(Rt,{onClick:l,size:"sm",className:"mt-2",children:[y.jsx(oz,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]})},g6=({history:n})=>y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:n&&n.length>0?n.slice().reverse().map((e,t)=>y.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg shadow-sm",children:[y.jsx("div",{className:"mt-1 w-2.5 h-2.5 bg-orange-300 rounded-full flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:e.action}),y.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(e.date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),e.user&&`  ${e.user}`]})]}),y.jsx(uk,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]},t)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum histrico disponvel."})}),v6=({activeTab:n,setActiveTab:e,cardId:t,subtasksCount:r,commentsCount:s})=>{const i=[{id:"details",label:"Detalhes"},{id:"subtasks",label:`Subtarefas (${r||0})`}];return t&&(i.push({id:"comments",label:`Comentrios (${s||0})`}),i.push({id:"history",label:"Histrico"})),y.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:i.map(a=>y.jsx("button",{onClick:()=>e(a.id),className:`px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap ${n===a.id?"text-neutral-600 border-b-2 border-neutral-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:a.label},a.id))})},vp=({label:n,children:e,className:t})=>y.jsxs("div",{className:t,children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:n}),e]}),y6=({initialData:n,onSave:e,onCancel:t,onOpenClientModal:r,isSaving:s})=>{const{clients:i,servicePackages:a}=ds(),[l,d]=A.useState(n||{}),h=v=>{const{name:_,value:S}=v.target;d(x=>({...x,[_]:S}))},f=(v,_)=>{let S={...l,[v]:_};if(v==="client_id"||v==="service_package_id"){const x=v==="client_id"?i.find(M=>M.id===_):i.find(M=>M.id===S.client_id),E=v==="service_package_id"?a.find(M=>M.id===_):a.find(M=>M.id===S.service_package_id);let P="";x&&E?P=`${x.name} - ${E.name}`:x?P=x.name:E&&(P=E.name),S.title||(S.title=P),v==="service_package_id"&&E&&(S.value=E.price_cash_pix||E.price_card||"")}d(S)},g=v=>{v.preventDefault(),e(l)};return y.jsxs("form",{id:"quick-create-form",onSubmit:g,className:"space-y-4",children:[y.jsx(vp,{label:"Ttulo do Trabalho*",children:y.jsx(jr,{name:"title",value:l.title||"",onChange:h,placeholder:"Ex: Ensaio de Casamento de [Cliente]",required:!0,disabled:s})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(vp,{label:"Data",children:y.jsx(jr,{name:"date",type:"date",value:l.date||"",onChange:h,disabled:s})}),y.jsx(vp,{label:"Valor Total (R$)",children:y.jsx(jr,{name:"value",type:"number",value:l.value||"",onChange:h,placeholder:"0,00",step:"0.01",min:"0",disabled:s})})]}),y.jsx(vp,{label:"Cliente Vinculado",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs(ls,{name:"client_id",value:l.client_id||"",onValueChange:v=>f("client_id",v),disabled:s,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um cliente..."})}),y.jsx(Lr,{className:"max-h-60",children:(i||[]).map(v=>y.jsx(jt,{value:v.id,children:v.name},v.id))})]}),y.jsx(Rt,{type:"button",variant:"outline",onClick:r,disabled:s,children:y.jsx(Yp,{className:"w-4 h-4"})})]})}),y.jsx(vp,{label:"Pacote de Servios",children:y.jsxs(ls,{name:"service_package_id",value:l.service_package_id||"",onValueChange:v=>f("service_package_id",v),disabled:s,children:[y.jsx(Or,{children:y.jsx(cs,{placeholder:"Selecione um pacote..."})}),y.jsxs(Lr,{children:[y.jsx(jt,{value:"",children:"Nenhum"}),(a||[]).map(v=>y.jsxs(jt,{value:v.id,children:[v.name," - R$ ",Number(v.price_cash_pix||v.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]},v.id))]})]})})]})},_C=[{text:"Confirmar detalhes do evento com o cliente",completed:!1},{text:"Verificar e preparar equipamento fotogrfico",completed:!1},{text:"Scout do local (se aplicvel)",completed:!1},{text:"Definir cronograma do dia do evento/ensaio",completed:!1},{text:"Realizar o evento/ensaio fotogrfico",completed:!1},{text:"Fazer backup de todas as fotos e vdeos",completed:!1},{text:"Selecionar as melhores fotos (curadoria)",completed:!1},{text:"Edio e tratamento das imagens selecionadas",completed:!1},{text:"Preparar galeria online ou prvia para o cliente",completed:!1},{text:"Enviar prvia para aprovao do cliente",completed:!1},{text:"Realizar ajustes finais (se necessrio)",completed:!1},{text:"Preparar e exportar arquivos finais em alta resoluo",completed:!1},{text:"Entregar o material final ao cliente",completed:!1},{text:"Enviar nota fiscal (se aplicvel)",completed:!1},{text:"Solicitar feedback/depoimento do cliente",completed:!1},{text:"Arquivar projeto e materiais",completed:!1}],w6=()=>{const{clients:n,servicePackages:e,addWorkflowCard:t,updateWorkflowCard:r,getClientById:s,getServicePackageById:i,addComment:a,refreshData:l,user:d,settings:h,getWorkflowCardById:f}=ds(),{toast:g}=ni(),{openModals:v,closeModal:_,openModal:S}=Ih(),{isOpen:x,cardId:E,initialStatus:P,initialData:M}=v.workflow||{},R=E?f(E):null,I=A.useCallback(()=>{const Z=h?.workflow_columns?.[0]?.id||"novo-lead";return{title:"",client_id:"",service_package_id:"",description:"",date:"",time:"",value:"",tags:[],status:P||Z,contract_url:"",contract_name:"",contract_status:"pending",comments:[],history:[],subtasks:_C.map(X=>({...X,id:Math.random().toString(36).substr(2,9)})),order:0,archived:!1,sync_google_calendar:!1,payment_type:"SOMENTE_AGENDADO",payment_method:"",entry_value:"",installments:"",num_installments:"",card_processing_days:"",entry_paid:!1,first_installment_date:"",createFinancialTransaction:!0,main_wallet_id:"",entry_wallet_id:"",...M}},[h,P,M]),[O,F]=A.useState(I()),[$,W]=A.useState("details"),[K,ce]=A.useState(!1),[pe,ue]=A.useState("quick"),fe=R?`workflow_form_draft_${R.id}`:`workflow_form_draft_new_${P||"default"}`;A.useEffect(()=>{if(x){ue(R?"full":"quick");const Z=localStorage.getItem(fe);let B=I();R&&(B={...I(),...R,client_id:R.client_id||"",service_package_id:R.service_package_id||"",value:R.value!==void 0&&R.value!==null?String(R.value):"",entry_value:R.entry_value!==void 0&&R.entry_value!==null?String(R.entry_value):"",installments:R.installments!==void 0&&R.installments!==null?String(R.installments):"",num_installments:R.num_installments!==void 0&&R.num_installments!==null?String(R.num_installments):"",card_processing_days:R.card_processing_days!==void 0&&R.card_processing_days!==null?String(R.card_processing_days):"",subtasks:R.subtasks&&R.subtasks.length>0?R.subtasks.map(ae=>({...ae,id:ae.id||Math.random().toString(36).substr(2,9)})):_C.map(ae=>({...ae,id:Math.random().toString(36).substr(2,9)}))});const X=Z?{...B,...JSON.parse(Z)}:B;F(X),W("details")}},[R,x,I,fe]),A.useEffect(()=>{x&&localStorage.setItem(fe,JSON.stringify(O))},[O,x,fe]);const ne=()=>{localStorage.removeItem(fe),_("workflow")},H=async Z=>{ce(!0);const B=Z.title.trim()||"Novo Trabalho",X=Z.date||null,ae=(Z.payment_type==="ENTRADA_PARCELAS"||Z.payment_type==="PIX_PARCELADO"||Z.payment_type==="CARTAO_PARCELADO")&&parseInt(Z.installments||Z.num_installments,10)||null;let ye=Z.status;R||(ye=P||(Z.date?"agendado":h?.workflow_columns?.[0]?.id||"novo-lead"));const Me={...O,...Z,user_id:d.id,title:B,date:X,client_id:Z.client_id||null,service_package_id:Z.service_package_id||null,first_installment_date:Z.first_installment_date||null,value:parseFloat(Z.value)||null,entry_value:parseFloat(Z.entry_value)||null,history:[{action:"Criado",date:new Date().toISOString(),user:h.user_name||d.email}],status:ye,installments:ae,num_installments:ae,card_processing_days:(Z.payment_type==="CARTAO_CREDITO"||Z.payment_type==="CARTAO_PARCELADO")&&parseInt(Z.card_processing_days,10)||null,entry_paid:Z.payment_type==="ENTRADA_PARCELAS"||Z.payment_type==="INTEGRAL"?Z.entry_paid:!1,subtasks:O.subtasks.map(Pe=>({text:Pe.text,completed:Pe.completed,id:Pe.id||Math.random().toString(36).substr(2,9)})),main_wallet_id:Z.main_wallet_id||null,entry_wallet_id:Z.entry_wallet_id||null};try{R&&R.id?(await r(R.id,Me),g({title:"Sucesso!",description:`Card "${B}" atualizado.`})):(await t(Me),g({title:"Sucesso!",description:`Agendamento "${B}" criado.`})),localStorage.removeItem(fe),await l(),ne()}catch(Pe){g({title:"Erro ao Salvar",description:Pe.message||"No foi possvel salvar.",variant:"destructive",duration:7e3,action:Pe.message.includes("required fields")||Pe.message.includes("obrigatrios")?y.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>{ue("full"),W("details")},children:"Verificar Campos"}):void 0})}finally{ce(!1)}},q=async Z=>{if(!(!R||!R.id))try{const B=await a(R.id,Z);F(X=>({...X,comments:B.comments,history:B.history})),g({title:"Comentrio Adicionado"})}catch(B){g({title:"Erro",description:B.message,variant:"destructive"})}},te=Z=>F(B=>({...B,subtasks:[...B.subtasks||[],{id:Math.random().toString(36).substr(2,9),text:Z,completed:!1}]})),z=Z=>F(B=>({...B,subtasks:(B.subtasks||[]).map(X=>X.id===Z?{...X,completed:!X.completed}:X)})),re=Z=>F(B=>({...B,subtasks:(B.subtasks||[]).filter(X=>X.id!==Z)}));return x?y.jsxs(ji,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(Zn.div,{initial:{opacity:0,y:50,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.98},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-2xl w-full max-w-3xl shadow-2xl flex flex-col max-h-[95vh] z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:R?"Editar Agendamento":"Novo Agendamento"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:ne,className:"w-9 h-9 rounded-full",disabled:K,children:y.jsx(hu,{className:"w-5 h-5"})})]}),pe==="full"&&y.jsx(v6,{activeTab:$,setActiveTab:W,cardId:R?.id,subtasksCount:O.subtasks?.length,commentsCount:O.comments?.length}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 scrollbar-thin",children:[pe==="quick"&&y.jsx(y6,{initialData:O,onSave:H,onCancel:ne,onOpenClientModal:()=>S("client",{}),isSaving:K}),pe==="full"&&$==="details"&&y.jsx(c6,{card:O,onSave:H,onCancel:ne,isSaving:K}),pe==="full"&&$==="subtasks"&&y.jsx(p6,{subtasks:O.subtasks,onAddSubtask:te,onToggleSubtask:z,onDeleteSubtask:re,cardExists:!!R?.id}),pe==="full"&&$==="comments"&&y.jsx(m6,{comments:O.comments,onAddComment:q,cardExists:!!R?.id,onAfterComment:()=>W("comments")}),pe==="full"&&$==="history"&&R?.id&&y.jsx(g6,{history:O.history})]}),pe==="quick"?y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsxs(Rt,{type:"button",variant:"ghost",onClick:()=>ue("full"),disabled:K,children:["Mais Opes ",y.jsx(GU,{className:"w-4 h-4 ml-2"})]}),y.jsxs("div",{children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:ne,disabled:K,className:"mr-2",children:"Cancelar"}),y.jsxs(Rt,{type:"submit",form:"quick-create-form",className:"btn-custom-gradient text-white",disabled:K,children:[K?y.jsx(Sh,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($A,{className:"w-4 h-4 mr-2"}),K?"Salvando...":R?"Salvar":"Criar"]})]})]}):y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-end space-x-3 bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:ne,disabled:K,className:"mr-auto",children:"Cancelar"}),y.jsxs(Rt,{type:"submit",form:"workflow-form",className:"btn-custom-gradient text-white",disabled:K,children:[K?y.jsx(Sh,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($A,{className:"w-4 h-4 mr-2"}),K?"Salvando...":R?"Salvar Alteraes":"Salvar Agendamento"]})]})]},"workflow-modal-content")},"workflow-modal-backdrop"),y.jsx(tR,{})]}):null},b6=["Casamento","Gestante","Newborn","Famlia","Infantil","Debutante (15 anos)","Formatura","Empresarial/Corporativo","Produtos","Gastronomia","Moda","Esportivo","Eventos Sociais","Imobilirio","Pets","Sensual/Boudoir","Outro"],BR="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",_6=({isOpen:n,onClose:e,servicePackage:t,onSaveSuccess:r})=>{const{toast:s}=ni(),{addServicePackage:i,updateServicePackage:a,user:l}=ds(),[d,h]=A.useState(!1),f=A.useCallback(()=>({name:"",description:"",niche:"",price_cash_pix:"",price_card:"",cost:"",items_included:[{name:"",quantity:1}],payment_options:[],details:"",user_id:l?.id||null}),[l]),[g,v]=A.useState(f()),_=t?`service_package_form_draft_${t.id}`:"service_package_form_draft_new";A.useEffect(()=>{if(n){const F=localStorage.getItem(_);if(F){const $=JSON.parse(F);v({...$,user_id:$.user_id||l?.id})}else v(t?{name:t.name||"",description:t.description||"",niche:t.niche||"",price_cash_pix:t.price_cash_pix!==void 0?String(t.price_cash_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost:t.cost!==void 0?String(t.cost):"",items_included:t.items_included&&t.items_included.length>0?t.items_included:[{name:"",quantity:1}],payment_options:t.payment_options||[],details:t.details||"",user_id:t.user_id||l?.id}:f())}},[t,n,_,f,l]),A.useEffect(()=>{n&&localStorage.setItem(_,JSON.stringify(g))},[g,n,_]);const S=()=>{localStorage.removeItem(_),e()},x=(F,$)=>{v(W=>({...W,[F]:$}))},E=(F,$,W)=>{const K=[...g.items_included];K[F][$]=$==="quantity"?parseInt(W,10)||1:W,v(ce=>({...ce,items_included:K}))},P=()=>{v(F=>({...F,items_included:[...F.items_included,{name:"",quantity:1}]}))},M=F=>{const $=g.items_included.filter((W,K)=>K!==F);$.length===0?v(W=>({...W,items_included:[{name:"",quantity:1}]})):v(W=>({...W,items_included:$}))},R=F=>{v($=>{const W=$.payment_options||[];return W.includes(F)?{...$,payment_options:W.filter(K=>K!==F)}:{...$,payment_options:[...W,F]}})},I=async F=>{if(F.preventDefault(),!l){s({title:"Erro de Autenticao",description:"Usurio no est autenticado.",variant:"destructive"});return}if(!g.name||!g.price_cash_pix||!g.niche){s({title:"Erro de Validao",description:"Nome do pacote, Nicho e Preo ( vista/Pix) so obrigatrios.",variant:"destructive"});return}h(!0);const $={...g,price_cash_pix:parseFloat(g.price_cash_pix)||0,price_card:g.price_card?parseFloat(g.price_card):null,cost:g.cost?parseFloat(g.cost):null,items_included:g.items_included.filter(W=>W.name.trim()!==""),user_id:l.id};try{t&&t.id?await a(t.id,$):await i($),s({title:"Pacote Salvo",description:`O pacote "${g.name}" foi salvo com sucesso!`}),localStorage.removeItem(_),r&&r(),e()}catch(W){s({title:"Erro ao Salvar Pacote",description:W.message,variant:"destructive"})}finally{h(!1)}},O=["Entrada + Parcelamento","Parcelamento Integral Carto"," vista com Desconto"];return y.jsx(ji,{children:n&&y.jsx(Zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",id:"novo-pacote-backdrop-id",onClick:S,children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",id:"novo-pacote-modal-id",onClick:F=>F.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Pacote de Servio":"Novo Pacote de Servio"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:S,className:"w-8 h-8",disabled:d,children:y.jsx(hu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:I,className:"space-y-4",children:[y.jsxs(yp,{title:"Informaes Bsicas",children:[y.jsx(zc,{icon:sz,label:"Nome do Pacote *",htmlFor:"pkg-name",children:y.jsx("input",{id:"pkg-name",type:"text",value:g.name,onChange:F=>x("name",F.target.value),placeholder:"Ex: Ensaio Casal Completo",required:!0,disabled:d})}),y.jsx(zc,{icon:lz,label:"Nicho do Servio *",htmlFor:"pkg-niche",children:y.jsxs("select",{id:"pkg-niche",value:g.niche,onChange:F=>x("niche",F.target.value),required:!0,className:BR,disabled:d,children:[y.jsx("option",{value:"",children:"Selecione um nicho"}),b6.map(F=>y.jsx("option",{value:F,children:F},F))]})}),y.jsx(zc,{icon:lb,label:"Descrio",htmlFor:"pkg-desc",children:y.jsx("textarea",{id:"pkg-desc",value:g.description,onChange:F=>x("description",F.target.value),placeholder:"Detalhes sobre o pacote...",rows:"3",disabled:d})})]}),y.jsxs(yp,{title:"Precificao",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(zc,{icon:Kp,label:"Preo ( vista/Pix) *",htmlFor:"pkg-price-cash",children:y.jsx("input",{id:"pkg-price-cash",type:"number",value:g.price_cash_pix,onChange:F=>x("price_cash_pix",F.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:d})}),y.jsx(zc,{icon:Kp,label:"Preo (Carto)",htmlFor:"pkg-price-card",children:y.jsx("input",{id:"pkg-price-card",type:"number",value:g.price_card,onChange:F=>x("price_card",F.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsx(zc,{icon:w_,label:"Custo Estimado do Pacote",htmlFor:"pkg-cost",children:y.jsx("input",{id:"pkg-cost",type:"number",value:g.cost,onChange:F=>x("cost",F.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsxs(yp,{title:"Itens Inclusos",children:[g.items_included.map((F,$)=>y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("input",{type:"text",value:F.name,onChange:W=>E($,"name",W.target.value),placeholder:"Nome do item",className:"flex-grow px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx("input",{type:"number",value:F.quantity,onChange:W=>E($,"quantity",W.target.value),placeholder:"Qtd",min:"1",className:"w-20 px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx(Rt,{type:"button",variant:"ghost",size:"icon",onClick:()=>M($),className:"text-red-500",disabled:d,children:y.jsx(__,{className:"w-4 h-4"})})]},$)),y.jsxs(Rt,{type:"button",variant:"outline",onClick:P,className:"mt-2",disabled:d,children:[y.jsx(Yp,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]})]}),y.jsx(yp,{title:"Opes de Pagamento",children:y.jsx("div",{className:"space-y-2",children:O.map(F=>y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:(g.payment_options||[]).includes(F),onChange:()=>R(F),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:d}),y.jsx("span",{className:"text-muted-foreground",children:F})]},F))})}),y.jsx(yp,{title:"Detalhes Adicionais",children:y.jsx(zc,{icon:iz,label:"Observaes/Termos",htmlFor:"pkg-details",children:y.jsx("textarea",{id:"pkg-details",value:g.details,onChange:F=>x("details",F.target.value),placeholder:"Informaes extras, termos e condies...",rows:"4",disabled:d})})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:S,className:"flex-1",disabled:d,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:d,children:d?y.jsx(Sh,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alteraes":"Criar Pacote"})]})]})]})})})},yp=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),zc=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),ot.Children.map(r,s=>s.type==="select"?ot.cloneElement(s,{className:`${s.props.className||""} ${BR}`}):ot.cloneElement(s,{className:`${s.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),x6=()=>{const[n,e]=A.useState(null),[t,r]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const{data:h,error:f}=await Se.from("anuncios").select("*").eq("esta_ativo",!0).order("created_at",{ascending:!1}).limit(1);if(f)throw f;if(h&&h.length>0){const g=h[0],v=localStorage.getItem(`anuncio_closed_${g.id}`),_=g.cooldown_reaparicao_minutos||60;if(v){const S=_*60*1e3;if(Date.now()-parseInt(v,10)<S)return}e(g),r(!0)}}catch(h){console.error("Erro ao buscar anncio:",h)}})()},[]),A.useEffect(()=>{if(t&&n&&n.duracao_exibicao_segundos>0){const d=setTimeout(()=>{s()},n.duracao_exibicao_segundos*1e3);return()=>clearTimeout(d)}},[t,n]);const s=()=>{r(!1),n&&localStorage.setItem(`anuncio_closed_${n.id}`,Date.now().toString())},i=d=>{d&&(window.open(d,"_blank","noopener,noreferrer"),s())};if(!n)return null;const a={"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end",center:"items-center justify-center","bottom-left":"items-end justify-start","bottom-center":"items-end justify-center","bottom-right":"items-end justify-end"},l={small:"max-w-sm",medium:"max-w-md",large:"max-w-lg"};return y.jsx(ji,{children:t&&y.jsx(Zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:ut("fixed inset-0 z-[9999] flex p-4 bg-black/30 backdrop-blur-sm",a[n.posicao_anuncio]||a.center),onClick:s,children:y.jsx(Zn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:d=>d.stopPropagation(),children:y.jsxs(H_,{className:ut("shadow-2xl w-full",l[n.tamanho_anuncio]||l.medium),children:[y.jsxs("button",{onClick:s,className:"absolute top-2 right-2 p-1 rounded-full bg-background/50 hover:bg-background/80 transition-colors z-10",children:[y.jsx(hu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Fechar"})]}),n.imagem_url&&y.jsx("div",{className:"cursor-pointer",onClick:()=>i(n.link_imagem),children:y.jsx("img",{src:n.imagem_url,alt:n.titulo_anuncio,className:"w-full h-auto object-cover rounded-t-lg"})}),y.jsxs(W_,{children:[y.jsx(q_,{children:n.titulo_anuncio}),n.conteudo_anuncio&&y.jsx(G_,{children:n.conteudo_anuncio})]}),n.link_botao&&y.jsx(K_,{children:y.jsx(Rt,{className:"w-full",onClick:()=>i(n.link_botao),children:"Saiba Mais"})})]})})})})},is=({featureName:n,children:e})=>{const{isFeatureEnabled:t}=ds();return t(n)?e:y.jsxs(Zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center p-8 bg-card rounded-xl",children:[y.jsx(rz,{className:"w-16 h-16 text-destructive mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade no est habilitada para sua conta no momento."}),y.jsx("p",{className:"text-muted-foreground mt-1",children:"Por favor, contate o administrador do sistema para mais informaes."})]})},S6=A.lazy(()=>qe(()=>import("./Dashboard-9xnc2Wqf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),A6=A.lazy(()=>qe(()=>import("./Clients-BhU1gPtp.js"),__vite__mapDeps([29,9,25,30,31,32,7,21,33]))),C6=A.lazy(()=>qe(()=>import("./ClientDetail-CtyiJXpm.js"),__vite__mapDeps([34,35,36,37,38,39,30,40,18,41,20,25,42,22,43]))),E6=A.lazy(()=>qe(()=>import("./Workflow-D4iwbxDU.js"),__vite__mapDeps([44,45,46,47,5,48,19,49,50,15,51,31,18,9,4,20,21,30,52,6,42,53]))),k6=A.lazy(()=>qe(()=>import("./Financial-BagyQJOX.js"),__vite__mapDeps([54,15,14,8,32,18,4,5,55,20,21,22,56,57,58,59,36,12,31]))),T6=A.lazy(()=>qe(()=>import("./Calendar-_P-4E8Ld.js"),__vite__mapDeps([60,61,62,18,31,53,8,27,56,22,63,64,65,58,59,26,37,66,67,5,68,69]))),P6=A.lazy(()=>qe(()=>import("./Reports-CHMCMYJU.js"),__vite__mapDeps([70,17,71,47,72,22,62,18,4,5,58,27,59,32,15,73,74]))),R6=A.lazy(()=>qe(()=>import("./Settings-gUIjEZ4A.js"),__vite__mapDeps([75,61,67,5,76,33,18,4,62,77,52,36,78,25,79,65,57,59,50,22,80,8]))),M6=A.lazy(()=>qe(()=>import("./AccountSettings-C4k7zQdl.js"),__vite__mapDeps([81,37,18,52,82]))),I6=A.lazy(()=>qe(()=>import("./ServicePackages-Dj3wvFjZ.js"),__vite__mapDeps([83,18,9,51,20,21]))),D6=A.lazy(()=>qe(()=>import("./MySetup-fzJqBEQV.js"),__vite__mapDeps([84,35,85,42,77,15,18,36,14,21,13]))),N6=A.lazy(()=>qe(()=>import("./Precifique-DaqOd3fr.js"),__vite__mapDeps([86,18,11,36,55,21,74,15,16,87,40]))),O6=A.lazy(()=>qe(()=>import("./ReservaInteligente-TmRvzAW-.js"),__vite__mapDeps([88,24,18,40,36,16,74,89]))),L6=A.lazy(()=>qe(()=>import("./Boards-UIHJ29KA.js"),__vite__mapDeps([90,1,2,3,21,91,18,92,28]))),j6=A.lazy(()=>qe(()=>import("./BoardDetail-K3_Z5sYs.js"),__vite__mapDeps([93,45,46,47,5,48,92,94,89,18,4,52,82]))),F6=A.lazy(()=>qe(()=>import("./PlansPage-D5jd4lJj.js"),__vite__mapDeps([95,25,96,13,87]))),B6=A.lazy(()=>qe(()=>import("./FormsPage-DgxoDUrW.js"),__vite__mapDeps([97,18,9,98,99,33,91,100,101,68,21]))),$6=A.lazy(()=>qe(()=>import("./FormEditorPage-D0u6FUD_.js"),__vite__mapDeps([102,45,46,47,5,48,100,101,68,43,41,28]))),U6=A.lazy(()=>qe(()=>import("./CampaignSubmissionsPage-jqkPve1G.js"),__vite__mapDeps([103,71,47,72,43,98]))),z6=A.lazy(()=>qe(()=>import("./StudioPage-BW_Bn4Vo.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23]))),V6=A.lazy(()=>qe(()=>import("./ContractListPage-B6wWAvVH.js"),__vite__mapDeps([106,107,25,36,89,21,78,91,31,105,23,22]))),xC=A.lazy(()=>qe(()=>import("./ContractEditorPage-le87_IxM.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),SC=A.lazy(()=>qe(()=>import("./ProposalEditorPage-DnuKKZwK.js"),__vite__mapDeps([110,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19]))),H6=A.lazy(()=>qe(()=>import("./BlogPage-BeGCPkb-.js"),__vite__mapDeps([117,22]))),W6=A.lazy(()=>qe(()=>import("./AvailabilityManagerPage-DboCz8UJ.js"),__vite__mapDeps([118,107,25,69,18,22,64,43,21,58,59]))),q6=A.lazy(()=>qe(()=>import("./ReferralsPage-Do6quUsG.js"),__vite__mapDeps([119,35,107,30,68,73,22]))),AC="gofotografo_last_active_tab",CC="gofotografo_sidebar_collapsed",G6=({children:n})=>{const e=$i(),{toast:t}=ni(),{settings:r,loadingAuth:s,setSettings:i,pendingReserveAllocations:a,allocateToSavingGoal:l,dismissPendingAllocation:d,savingGoals:h,refreshData:f,isFeatureEnabled:g}=ds(),{theme:v}=lE(),{isAnyModalOpen:_,openModals:S,closeModal:x}=Ih(),[E,P]=A.useState({}),M=()=>{const z=e.pathname;return z.startsWith("/clients/")?"clients":z.startsWith("/quadros")?"quadros":z.startsWith("/forms")||z.startsWith("/campaigns")?"clients":z.startsWith("/studio")||z.startsWith("/contracts")?"studio":z.startsWith("/blog")?"blog":z.startsWith("/availability-manager")?"calendar":z.startsWith("/referrals")?"referrals":z.substring(1)||"dashboard"},{activeTab:R,setActiveTab:I,initialFinancialFilter:O}=I5(localStorage.getItem(AC)||M()),{isMobile:F}=D5();N5(_);const[$,W]=A.useState(()=>{const z=localStorage.getItem(CC);return z!==null?JSON.parse(z):!0}),[K,ce]=A.useState(!0);if(A.useEffect(()=>{localStorage.setItem(CC,JSON.stringify($)),window.dispatchEvent(new Event("resize"))},[$]),A.useEffect(()=>{const z=M();z!==R&&I(z),e.pathname.startsWith("/quadros/")||P({})},[e.pathname]),A.useEffect(()=>{localStorage.setItem(AC,R)},[R]),s)return y.jsx(Ht,{});const pe=e.pathname.startsWith("/quadros/"),ue=e.pathname==="/quadros",fe=S.financial,ne=S.servicePackage,te=v==="dark"?"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png":"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20claro%20go.fotografo%20cor%20.png";return y.jsxs("div",{className:`flex flex-col bg-background text-foreground ${F?"":"min-h-screen"}`,children:[y.jsx(x6,{}),a.map((z,re)=>y.jsx(M5,{allocation:z,savingGoals:h,onConfirm:async Z=>{try{await l(Z,z.reserveAmount),t({title:"Sucesso!",description:`R$ ${z.reserveAmount.toFixed(2)} alocados para a meta.`}),d(z.transactionId)}catch(B){t({title:"Erro ao alocar",description:B.message,variant:"destructive"})}},onDismiss:()=>d(z.transactionId)},z.transactionId+re)),y.jsxs("div",{className:`flex ${F?"flex-col":"h-screen"}`,children:[!F&&y.jsxs("div",{className:"relative",children:[y.jsx(Kz,{activeTab:R,setActiveTab:I,collapsed:$,setCollapsed:W}),y.jsx("button",{onClick:()=>W(!$),className:`
                absolute top-1/2 -translate-y-1/2 
                h-12 w-6 bg-card border border-border rounded-r-lg 
                flex items-center justify-center text-muted-foreground hover:bg-accent 
                transition-all duration-300 ease-in-out z-40
                ${$?"left-16":"left-64"}
              `,title:$?"Expandir menu":"Recolher menu",children:$?y.jsx(ck,{className:"w-4 h-4"}):y.jsx(QU,{className:"w-4 h-4"})})]}),F&&y.jsx(ji,{children:K&&y.jsx(Zn.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"mobile-header fixed top-0 left-0 right-0 bg-card/60 dark:bg-card/50 backdrop-blur-xl border-b border-border z-[450] flex items-center justify-center px-4 shadow-sm",children:y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("img",{alt:"Logo GO.FOTGRAFO",className:"h-10 w-auto object-contain",src:te})})})}),y.jsx("main",{id:"main-app-container",className:ut("main-content-container flex-1 transition-all duration-300 ease-in-out",F?`p-4 pb-24 ${K?"pt-20":"pt-4"}`:`p-6 sm:p-8 ${$?"ml-16":"ml-64"}`,"overflow-y-auto",pe&&"fundo-quadro-ativo p-0 sm:p-0",ue&&"pagina-quadros"),style:E,children:y.jsx("div",{className:ut("h-auto min-h-full",!pe&&"dashboard-page-container"),children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(ji,{mode:"wait",children:y.jsx(Zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:y.jsxs(oE,{children:[y.jsx(ze,{path:"/dashboard",element:y.jsx(S6,{setActiveTab:I,isMobile:F})}),y.jsx(ze,{path:"/clients",element:y.jsx(A6,{isMobile:F})}),y.jsx(ze,{path:"/clients/:clientId",element:y.jsx(C6,{isMobile:F})}),y.jsx(ze,{path:"/workflow",element:y.jsx(E6,{isMobile:F})}),y.jsx(ze,{path:"/financial",element:y.jsx(k6,{isMobile:F,initialFilter:O})}),y.jsx(ze,{path:"/calendar",element:y.jsx(is,{featureName:"agenda_pro",children:y.jsx(T6,{isMobile:F,setActiveTab:I})})}),y.jsx(ze,{path:"/reports",element:y.jsx(is,{featureName:"relatorios",children:y.jsx(P6,{})})}),y.jsx(ze,{path:"/service-packages",element:y.jsx(is,{featureName:"pacotes_servico",children:y.jsx(I6,{isMobile:F})})}),y.jsx(ze,{path:"/my-setup",element:y.jsx(is,{featureName:"meu_setup",children:y.jsx(D6,{isMobile:F})})}),y.jsx(ze,{path:"/precifique",element:y.jsx(is,{featureName:"precifique",children:y.jsx(N6,{isMobile:F})})}),y.jsx(ze,{path:"/reserva-inteligente",element:y.jsx(is,{featureName:"reserva_inteligente",children:y.jsx(O6,{isMobile:F})})}),y.jsx(ze,{path:"/quadros",element:y.jsx(is,{featureName:"quadros",children:y.jsx(L6,{setSidebarCollapsed:W})})}),y.jsx(ze,{path:"/quadros/:boardId",element:y.jsx(is,{featureName:"quadros",children:y.jsx(j6,{setPageStyle:P})})}),y.jsx(ze,{path:"/forms",element:y.jsx(is,{featureName:"formularios_captacao",children:y.jsx(B6,{})})}),y.jsx(ze,{path:"/forms/edit/:formId",element:y.jsx(is,{featureName:"formularios_captacao",children:y.jsx($6,{})})}),y.jsx(ze,{path:"/campaigns/:formId",element:y.jsx(is,{featureName:"formularios_captacao",children:y.jsx(U6,{})})}),y.jsxs(ze,{path:"/studio/*",element:y.jsx(is,{featureName:"propostas_avancadas",children:y.jsx($b,{})}),children:[y.jsx(ze,{index:!0,element:y.jsx(z6,{})}),y.jsx(ze,{path:"proposals/new",element:y.jsx(SC,{})}),y.jsx(ze,{path:"proposals/edit/:proposalId",element:y.jsx(SC,{})}),y.jsx(ze,{path:"contracts/new",element:y.jsx(xC,{mode:"new"})}),y.jsx(ze,{path:"contracts/edit/:contractId",element:y.jsx(xC,{mode:"edit"})})]}),y.jsx(ze,{path:"/contracts",element:y.jsx(is,{featureName:"contratos",children:y.jsx(V6,{})})}),y.jsx(ze,{path:"/availability-manager",element:y.jsx(is,{featureName:"agenda_pro",children:y.jsx(W6,{isMobile:F})})}),y.jsx(ze,{path:"/referrals",element:y.jsx(q6,{})}),y.jsx(ze,{path:"/settings",element:y.jsx(R6,{isMobile:F})}),y.jsx(ze,{path:"/account-settings",element:y.jsx(M6,{isMobile:F})}),y.jsx(ze,{path:"/plans",element:y.jsx(F6,{setActiveTab:I})}),y.jsx(ze,{path:"/blog",element:y.jsx(H6,{})}),y.jsx(ze,{path:"/",element:y.jsx(Up,{to:"/dashboard",replace:!0})}),y.jsx(ze,{path:"*",element:y.jsx(Up,{to:"/dashboard",replace:!0})})]})},e.pathname+"-inner")})})})},e.pathname),F&&y.jsx(bP,{activeTab:R,setActiveTab:I})]}),y.jsx(tR,{}),y.jsx(V5,{}),y.jsx(w6,{}),y.jsx(ji,{children:fe?.isOpen&&y.jsx(l6,{isOpen:fe.isOpen,onClose:()=>x("financial"),type:fe.type,transactionData:fe.transaction,onSaveSuccess:async()=>await f()})}),y.jsx(ji,{children:ne?.isOpen&&y.jsx(_6,{isOpen:ne.isOpen,onClose:()=>x("servicePackage"),servicePackage:ne.servicePackage,onSaveSuccess:async()=>await f()})})]})};function K6({children:n}){const[e,t]=A.useState(null),r=$i();return A.useEffect(()=>{let s=!0;return(async()=>{try{const{data:i,error:a}=await Se.auth.getUser();if(!s)return;if(a||!i?.user){t(!1);return}const l=!!i.user.app_metadata?.is_admin;t(l)}catch{t(!1)}})(),()=>{s=!1}},[]),e===null?y.jsx(Ht,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(Up,{to:"/login",replace:!0,state:{from:r}})}const Y6=()=>{const{toast:n}=ni(),e=()=>{let t;const r=i=>{i.preventDefault(),t=i,s()},s=()=>{t?(t.prompt(),t.userChoice.then(i=>{i.outcome==="accepted"?(console.log("User accepted the install prompt"),n({title:"Aplicativo Instalado!",description:"O GO.FOTGRAFO foi adicionado  sua tela inicial."})):console.log("User dismissed the install prompt"),t=null})):n({title:"J  um App ou no suportado",description:"O aplicativo j pode estar instalado ou seu navegador no suporta esta ao. Tente 'Adicionar  Tela de Incio' no menu do seu navegador.",variant:"default",duration:7e3})};return window.addEventListener("beforeinstallprompt",r),window.deferredPrompt?(t=window.deferredPrompt,s()):n({title:"Instalao",description:"Para instalar, use a opo 'Adicionar  Tela de Incio' do seu navegador.",variant:"default",duration:7e3}),()=>{window.removeEventListener("beforeinstallprompt",r)}};return ot.useEffect(()=>{window.handlePWAInstall=e;const t=r=>{r.preventDefault(),window.deferredPrompt=r};return window.addEventListener("beforeinstallprompt",t),()=>{delete window.handlePWAInstall,window.removeEventListener("beforeinstallprompt",t)}},[]),null};function X6(){const{user:n}=Kb(),e=A.useRef(null);return A.useEffect(()=>{if(e.current&&(clearInterval(e.current),e.current=null),!n)return;const t=24e4,r=async()=>{try{const{error:s}=await Se.from("settings").select("user_id",{count:"exact",head:!0}).eq("user_id",n.id).limit(1);s&&console.warn("KeepAlive: ping falhou:",s.message)}catch(s){console.warn("KeepAlive: erro no ping:",s)}};return r(),e.current=setInterval(r,t),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[n?.id]),null}class $R extends ot.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI crash capturado:",e,t)}render(){return this.state.hasError?y.jsx("div",{className:"p-6 text-sm",children:"Algo deu errado ao renderizar este contedo."}):this.props.children}}function Q6(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var ex="ScrollArea",[UR,q9]=So(ex),[J6,si]=UR(ex),zR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[l,d]=A.useState(null),[h,f]=A.useState(null),[g,v]=A.useState(null),[_,S]=A.useState(null),[x,E]=A.useState(null),[P,M]=A.useState(0),[R,I]=A.useState(0),[O,F]=A.useState(!1),[$,W]=A.useState(!1),K=xt(e,pe=>d(pe)),ce=py(s);return y.jsx(J6,{scope:t,type:r,dir:ce,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:g,onContentChange:v,scrollbarX:_,onScrollbarXChange:S,scrollbarXEnabled:O,onScrollbarXEnabledChange:F,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:$,onScrollbarYEnabledChange:W,onCornerWidthChange:M,onCornerHeightChange:I,children:y.jsx(nt.div,{dir:ce,...a,ref:K,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":R+"px",...n.style}})})});zR.displayName=ex;var VR="ScrollAreaViewport",HR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=si(VR,t),l=A.useRef(null),d=xt(e,l,a.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),y.jsx(nt.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:y.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});HR.displayName=VR;var Co="ScrollAreaScrollbar",tx=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=si(Co,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=n.orientation==="horizontal";return A.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?y.jsx(Z6,{...r,ref:e,forceMount:t}):s.type==="scroll"?y.jsx(eq,{...r,ref:e,forceMount:t}):s.type==="auto"?y.jsx(WR,{...r,ref:e,forceMount:t}):s.type==="always"?y.jsx(nx,{...r,ref:e}):null});tx.displayName=Co;var Z6=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=si(Co,n.__scopeScrollArea),[i,a]=A.useState(!1);return A.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),a(!0)},f=()=>{d=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),y.jsx(Is,{present:t||i,children:y.jsx(WR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),eq=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=si(Co,n.__scopeScrollArea),i=n.orientation==="horizontal",a=Dy(()=>d("SCROLL_END"),100),[l,d]=Q6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,d]),A.useEffect(()=>{const h=s.viewport,f=i?"scrollLeft":"scrollTop";if(h){let g=h[f];const v=()=>{const _=h[f];g!==_&&(d("SCROLL"),a()),g=_};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,d,a]),y.jsx(Is,{present:t||l!=="hidden",children:y.jsx(nx,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Fe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),WR=A.forwardRef((n,e)=>{const t=si(Co,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=A.useState(!1),l=n.orientation==="horizontal",d=Dy(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,f=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?h:f)}},10);return Eh(t.viewport,d),Eh(t.content,d),y.jsx(Is,{present:r||i,children:y.jsx(nx,{"data-state":i?"visible":"hidden",...s,ref:e})})}),nx=A.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=si(Co,n.__scopeScrollArea),i=A.useRef(null),a=A.useRef(0),[l,d]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=XR(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function g(v,_){return oq(v,a.current,l,_)}return t==="horizontal"?y.jsx(tq,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,_=EC(v,l,s.dir);i.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=g(v,s.dir))}}):t==="vertical"?y.jsx(nq,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,_=EC(v,l);i.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=g(v))}}):null}),tq=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=si(Co,n.__scopeScrollArea),[a,l]=A.useState(),d=A.useRef(null),h=xt(e,d,i.onScrollbarXChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(GR,{"data-orientation":"horizontal",...s,ref:h,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Iy(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,g)=>{if(i.viewport){const v=i.viewport.scrollLeft+f.deltaX;n.onWheelScroll(v),JR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Jv(a.paddingLeft),paddingEnd:Jv(a.paddingRight)}})}})}),nq=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=si(Co,n.__scopeScrollArea),[a,l]=A.useState(),d=A.useRef(null),h=xt(e,d,i.onScrollbarYChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(GR,{"data-orientation":"vertical",...s,ref:h,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Iy(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,g)=>{if(i.viewport){const v=i.viewport.scrollTop+f.deltaY;n.onWheelScroll(v),JR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Jv(a.paddingTop),paddingEnd:Jv(a.paddingBottom)}})}})}),[rq,qR]=UR(Co),GR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:g,...v}=n,_=si(Co,t),[S,x]=A.useState(null),E=xt(e,K=>x(K)),P=A.useRef(null),M=A.useRef(""),R=_.viewport,I=r.content-r.viewport,O=Jn(f),F=Jn(d),$=Dy(g,10);function W(K){if(P.current){const ce=K.clientX-P.current.left,pe=K.clientY-P.current.top;h({x:ce,y:pe})}}return A.useEffect(()=>{const K=ce=>{const pe=ce.target;S?.contains(pe)&&O(ce,I)};return document.addEventListener("wheel",K,{passive:!1}),()=>document.removeEventListener("wheel",K,{passive:!1})},[R,S,I,O]),A.useEffect(F,[r,F]),Eh(S,$),Eh(_.content,$),y.jsx(rq,{scope:t,scrollbar:S,hasThumb:s,onThumbChange:Jn(i),onThumbPointerUp:Jn(a),onThumbPositionChange:F,onThumbPointerDown:Jn(l),children:y.jsx(nt.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:Fe(n.onPointerDown,K=>{K.button===0&&(K.target.setPointerCapture(K.pointerId),P.current=S.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),W(K))}),onPointerMove:Fe(n.onPointerMove,W),onPointerUp:Fe(n.onPointerUp,K=>{const ce=K.target;ce.hasPointerCapture(K.pointerId)&&ce.releasePointerCapture(K.pointerId),document.body.style.webkitUserSelect=M.current,_.viewport&&(_.viewport.style.scrollBehavior=""),P.current=null})})})}),Qv="ScrollAreaThumb",KR=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=qR(Qv,n.__scopeScrollArea);return y.jsx(Is,{present:t||s.hasThumb,children:y.jsx(sq,{ref:e,...r})})}),sq=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=si(Qv,t),a=qR(Qv,t),{onThumbPositionChange:l}=a,d=xt(e,g=>a.onThumbChange(g)),h=A.useRef(void 0),f=Dy(()=>{h.current&&(h.current(),h.current=void 0)},100);return A.useEffect(()=>{const g=i.viewport;if(g){const v=()=>{if(f(),!h.current){const _=aq(g,l);h.current=_,l()}};return l(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[i.viewport,f,l]),y.jsx(nt.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(n.onPointerDownCapture,g=>{const _=g.target.getBoundingClientRect(),S=g.clientX-_.left,x=g.clientY-_.top;a.onThumbPointerDown({x:S,y:x})}),onPointerUp:Fe(n.onPointerUp,a.onThumbPointerUp)})});KR.displayName=Qv;var rx="ScrollAreaCorner",YR=A.forwardRef((n,e)=>{const t=si(rx,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?y.jsx(iq,{...n,ref:e}):null});YR.displayName=rx;var iq=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=si(rx,t),[i,a]=A.useState(0),[l,d]=A.useState(0),h=!!(i&&l);return Eh(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),d(f)}),Eh(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),a(f)}),h?y.jsx(nt.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Jv(n){return n?parseInt(n,10):0}function XR(n,e){const t=n/e;return isNaN(t)?0:t}function Iy(n){const e=XR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function oq(n,e,t,r="ltr"){const s=Iy(t),i=s/2,a=e||i,l=s-a,d=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-l,f=t.content-t.viewport,g=r==="ltr"?[0,f]:[f*-1,0];return QR([d,h],g)(n)}function EC(n,e,t="ltr"){const r=Iy(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,d=t==="ltr"?[0,a]:[a*-1,0],h=wb(n,d);return QR([0,a],[0,l])(h)}function QR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function JR(n,e){return n>0&&n<e}var aq=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Dy(n,e){const t=Jn(n),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Eh(n,e){const t=Jn(e);Mn(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var ZR=zR,lq=HR,cq=KR,uq=YR;const eM=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(ZR,{ref:r,className:ut("relative overflow-hidden",n),...t,children:[y.jsx(lq,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(tM,{}),y.jsx(uq,{})]}));eM.displayName=ZR.displayName;const tM=A.forwardRef(({className:n,orientation:e="vertical",...t},r)=>y.jsx(tx,{ref:r,orientation:e,className:ut("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:y.jsx(cq,{className:"relative flex-1 rounded-full bg-border"})}));tM.displayName=tx.displayName;const dq=({reminder:n,onDismiss:e,onFollowUp:t})=>{const r=()=>{if(n.icon)return n.icon;switch(n.reminderType||n.type){case"payment_overdue":case"expense_overdue":return qU;case"payment_due":case"expense_due":return uk;case"birthday":return y_;case"task_due":return az;default:return ak}},s=()=>{const l=n.reminderType||n.type;return l?.includes("overdue")?"bg-red-500":l?.includes("due")?"bg-yellow-500":l==="birthday"?"bg-pink-500":"bg-primary"},i=r(),a=s();return y.jsxs("div",{className:"flex items-start space-x-3 p-4 border-b border-border/20 last:border-0 hover:bg-muted/30 transition-all duration-200",children:[y.jsx("div",{className:`p-2.5 rounded-full text-white shadow-md ${a}`,children:y.jsx(i,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold mb-1 text-foreground leading-tight",children:n.title}),y.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),n.date&&y.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[n.clientPhone&&y.jsx("button",{onClick:()=>t(n),className:"p-2 hover:bg-green-50 hover:text-green-600 rounded-full transition-all duration-200",title:"Entrar em contato via WhatsApp",children:y.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/16566/16566143.png",alt:"WhatsApp",className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>e(n.id),className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-full transition-all duration-200",title:"Dispensar notificao",children:y.jsx(hu,{className:"w-3 h-3"})})]})]})},hq=({reminders:n,onDismiss:e,onDismissAll:t,onFollowUp:r})=>{if(!n||n.length===0)return null;const s=n.length>=3,i=s?"fixed inset-0 z-50 flex items-center justify-center":"fixed bottom-6 right-6 z-50";return y.jsxs("div",{className:i,children:[s&&y.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),y.jsxs("div",{className:`relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl ${s?"w-full max-w-md m-6 max-h-[70vh]":"w-96 max-h-[80vh] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.3),_0_10px_10px_-5px_rgba(0,0,0,0.2)]"}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/30",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ak,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"font-semibold text-lg",children:n.length===1?"Notificao":`${n.length} Notificaes`})]}),y.jsx("button",{onClick:t,className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-muted",children:"Limpar todas"})]}),y.jsx(eM,{className:s?"max-h-[55vh]":"max-h-80",children:n.map(a=>y.jsx(dq,{reminder:a,onDismiss:e,onFollowUp:r},a.id))})]})]})},fq=()=>{const[n,e]=ot.useState([]),t=ot.useRef({}),r=ot.useCallback(a=>{const l=Date.now(),d=t.current[a.id]||0;l-d>300*1e3&&(e(h=>[...h,a]),t.current[a.id]=l)},[]),s=a=>{e(l=>l.filter(d=>d.id!==a))},i=()=>{e([])};return ot.useEffect(()=>{const a=l=>{l.detail&&r(l.detail)};return window.addEventListener("addNotification",a),()=>{window.removeEventListener("addNotification",a)}},[r]),n.length===0?null:y.jsx(hq,{reminders:n,onDismiss:s,onDismissAll:i,onFollowUp:a=>window.dispatchEvent(new CustomEvent("openFollowUp",{detail:a}))})},pq=A.lazy(()=>qe(()=>import("./LandingPage-CFJl3E3g.js"),__vite__mapDeps([120,16,13,38]))),mq=A.lazy(()=>qe(()=>import("./PrivacyPolicyPage-DsplyK4d.js"),__vite__mapDeps([121,13,43]))),gq=A.lazy(()=>qe(()=>import("./LoginPage-B2qBTs37.js"),__vite__mapDeps([122,123,74,124]))),vq=A.lazy(()=>qe(()=>import("./SignupPage-C4-6oIH4.js"),__vite__mapDeps([125,123,6,7]))),yq=A.lazy(()=>qe(()=>import("./ForgotPasswordPage-DiRt4tEe.js"),__vite__mapDeps([126,123,43]))),wq=A.lazy(()=>qe(()=>import("./UpdatePasswordPage-B0tS0azr.js"),__vite__mapDeps([127,123]))),bq=A.lazy(()=>qe(()=>import("./AdminLoginPage-CIIker9G.js"),__vite__mapDeps([128,74,124]))),_q=A.lazy(()=>qe(()=>import("./AdminLayout-xZglzsqE.js"),__vite__mapDeps([129,10,79,65,57,59,22,45,46,47,5,48,2,98,107,25,89,21,116,67,35,80,18,36,68,76,6,7,32,50,33,28,99,52,8]))),xq=A.lazy(()=>qe(()=>import("./PublicFormPage-DT_IZpuB.js"),[])),Sq=A.lazy(()=>qe(()=>import("./PublicBookingPage-BGzDvrDs.js"),__vite__mapDeps([130,68,113,76,27,22,58,59,64]))),Aq=A.lazy(()=>qe(()=>import("./AssinafyWebhookPage-CQHJGKRm.js"),[])),Cq=A.lazy(()=>qe(()=>import("./MaintenancePage-BgLT1nmQ.js"),[])),Eq=A.lazy(()=>qe(()=>import("./BlogPage-BeGCPkb-.js"),__vite__mapDeps([117,22]))),kq=A.lazy(()=>qe(()=>import("./BlogPostPage-CFrAXMGK.js"),__vite__mapDeps([131,43,101,22]))),kC=A.lazy(()=>qe(()=>import("./ProposalEditorPage-2xRxiYtK.js"),__vite__mapDeps([132,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19,66]))),Tw=A.lazy(()=>qe(()=>import("./CustomPageViewer-BAcUlaCw.js"),__vite__mapDeps([133,22,37,43]))),Tq=A.lazy(()=>qe(()=>import("./TutorialsPage-CpoLNkiH.js"),__vite__mapDeps([134,31]))),Pq=A.lazy(()=>qe(()=>import("./ProposalPublicView-DFRuIHV7.js"),__vite__mapDeps([135,112,3,2,33,30,39,113,5,48,92,94,114])));A.lazy(()=>qe(()=>import("./StudioPage-BW_Bn4Vo.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23])));const TC=A.lazy(()=>qe(()=>import("./ContractEditorPage-le87_IxM.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),mv=({children:n})=>y.jsx(y.Fragment,{children:n}),Rq=()=>{const n=$i(),e=n.pathname.startsWith("/studio/proposals/edit/")||n.pathname==="/studio/proposals/new";return y.jsx(VU,{children:y.jsx(G6,{hideSidebar:e,children:y.jsx($b,{})})})},Mq=()=>y.jsxs(oE,{children:[y.jsx(ze,{path:"/lp",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(pq,{})})}),y.jsx(ze,{path:"/politica-de-privacidade-e-dados",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(mq,{})})}),y.jsx(ze,{path:"/login",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(gq,{})})}),y.jsx(ze,{path:"/signup",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(vq,{})})}),y.jsx(ze,{path:"/forgot-password",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(yq,{})})}),y.jsx(ze,{path:"/update-password",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(wq,{})})}),y.jsx(ze,{path:"/f/:formId",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(xq,{})})}),y.jsx(ze,{path:"/agendar/:bookingLinkId",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Sq,{})})}),y.jsx(ze,{path:"/p/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Pq,{})})}),y.jsx(ze,{path:"/webhooks/assinafy",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Aq,{})})}),y.jsx(ze,{path:"/manutencao",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Cq,{})})}),y.jsx(ze,{path:"/blog",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Eq,{})})}),y.jsx(ze,{path:"/blog/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(kq,{})})}),y.jsx(ze,{path:"/control-acess/login",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(bq,{})})}),y.jsx(ze,{path:"/control-acess/*",element:y.jsx(K6,{children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(_q,{})})})}),y.jsx(ze,{path:"/sobre",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Tw,{slug:"sobre"})})}),y.jsx(ze,{path:"/fale-conosco",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Tw,{slug:"fale-conosco"})})}),y.jsx(ze,{path:"/tutoriais",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Tq,{})})}),y.jsx(ze,{path:"/tutoriais/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(Tw,{isTutorial:!0})})}),y.jsx(ze,{path:"/studio/proposals/new",element:y.jsx(mv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(kC,{})})})}),y.jsx(ze,{path:"/studio/proposals/edit/:proposalId",element:y.jsx(mv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(kC,{})})})}),y.jsx(ze,{path:"/studio/contracts/new",element:y.jsx(mv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(TC,{mode:"new"})})})}),y.jsx(ze,{path:"/studio/contracts/edit/:contractId",element:y.jsx(mv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx(TC,{mode:"edit"})})})}),y.jsx(ze,{path:"/*",element:y.jsx(Rq,{}),children:y.jsx(ze,{path:"*",element:y.jsx(A.Suspense,{fallback:y.jsx(Ht,{}),children:y.jsx($b,{})})})})]});function Iq(){return y.jsxs(pO,{children:[y.jsx(wO,{children:y.jsx(SE,{children:y.jsx(_F,{children:y.jsx(xF,{children:y.jsx(EF,{children:y.jsxs($R,{children:[y.jsx(X6,{}),y.jsx(Y6,{}),y.jsx(Mq,{})]})})})})})}),y.jsx(fq,{})]})}var Lp={};Lp.d=(n,e)=>{for(var t in e)Lp.o(e,t)&&!Lp.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Lp.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var at=globalThis.pdfjsLib={};Lp.d(at,{AbortException:()=>vu,AnnotationEditorLayer:()=>ma,AnnotationEditorParamsType:()=>st,AnnotationEditorType:()=>ft,AnnotationEditorUIManager:()=>Rl,AnnotationLayer:()=>R8,AnnotationMode:()=>wl,ColorPicker:()=>Zs,DOMSVGFactory:()=>yx,DrawLayer:()=>br,FeatureTest:()=>Br,GlobalWorkerOptions:()=>Fp,ImageKind:()=>Pv,InvalidPDFException:()=>rM,MissingPDFException:()=>gu,OPS:()=>Oi,OutputScale:()=>Tb,PDFDataRangeTransport:()=>_M,PDFDateString:()=>iM,PDFWorker:()=>vh,PasswordResponses:()=>Lq,PermissionFlag:()=>Oq,PixelsPerInch:()=>kh,RenderingCancelledException:()=>ox,TextLayer:()=>Dr,UnexpectedResponseException:()=>jy,Util:()=>Ve,VerbosityLevel:()=>Ny,XfaLayer:()=>SM,build:()=>u8,createValidAbsoluteUrl:()=>$q,fetchData:()=>By,getDocument:()=>t8,getFilenameFromUrl:()=>Yq,getPdfFilenameFromUrl:()=>Xq,getXfaPageViewport:()=>Qq,isDataScheme:()=>$y,isPdfFile:()=>ax,noContextMenu:()=>ti,normalizeUnicode:()=>qq,setLayerDimensions:()=>au,shadow:()=>_t,version:()=>c8});const Sr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),nM=[1,0,0,1,0,0],Cb=[.001,0,0,.001,0,0],Dq=1e7,Pw=1.35,Ts={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Nq="pdfjs_internal_editor_",ft={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},st={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Oq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Pv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},wp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ny={ERRORS:0,WARNINGS:1,INFOS:5},Oi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Lq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Oy=Ny.WARNINGS;function jq(n){Number.isInteger(n)&&(Oy=n)}function Fq(){return Oy}function Ly(n){Oy>=Ny.INFOS&&console.log(`Info: ${n}`)}function mt(n){Oy>=Ny.WARNINGS&&console.log(`Warning: ${n}`)}function en(n){throw new Error(n)}function $n(n,e){n||en(e)}function Bq(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function $q(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=Wq(n)}catch{}const r=e?new URL(n,e):new URL(n);if(Bq(r))return r}catch{}return null}function _t(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Ll=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Eb extends Ll{constructor(e,t){super(e,"PasswordException"),this.code=t}}class kb extends Ll{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rM extends Ll{constructor(e){super(e,"InvalidPDFException")}}class gu extends Ll{constructor(e){super(e,"MissingPDFException")}}class jy extends Ll{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Uq extends Ll{constructor(e){super(e,"FormatError")}}class vu extends Ll{constructor(e){super(e,"AbortException")}}function sM(n){(typeof n!="object"||n?.length===void 0)&&en("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Fy(n){typeof n!="string"&&en("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function zq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function sx(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function Vq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Hq(){try{return new Function(""),!0}catch{return!1}}class Br{static get isLittleEndian(){return _t(this,"isLittleEndian",Vq())}static get isEvalSupported(){return _t(this,"isEvalSupported",Hq())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?_t(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):_t(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Rw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Ve{static makeHexColor(e,t,r){return`#${Rw[e]}${Rw[t]}${Rw[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],a[0]),Math.min(r[1],s[1],i[1],a[1]),Math.max(r[0],s[0],i[0],a[0]),Math.max(r[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(r+a)/2,d=Math.sqrt((r+a)**2-4*(r*a-i*s))/2,h=l+d||1,f=l-d||1;return[Math.sqrt(h),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static#e(e,t,r,s,i,a,l,d,h,f){if(h<=0||h>=1)return;const g=1-h,v=h*h,_=v*h,S=g*(g*(g*e+3*h*t)+3*v*r)+_*s,x=g*(g*(g*i+3*h*a)+3*v*l)+_*d;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],x)}static#t(e,t,r,s,i,a,l,d,h,f,g,v){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,s,i,a,l,d,-g/f,v);return}const _=f**2-4*g*h;if(_<0)return;const S=Math.sqrt(_),x=2*h;this.#e(e,t,r,s,i,a,l,d,(-f+S)/x,v),this.#e(e,t,r,s,i,a,l,d,(-f-S)/x,v)}static bezierBoundingBox(e,t,r,s,i,a,l,d,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,d)):h=[Math.min(e,l),Math.min(t,d),Math.max(e,l),Math.max(t,d)],this.#t(e,r,i,l,t,s,a,d,3*(-e+3*(r-i)+l),6*(e-2*r+i),3*(r-e),h),this.#t(e,r,i,l,t,s,a,d,3*(-t+3*(s-a)+d),6*(t-2*s+a),3*(s-t),h),h}}function Wq(n){return decodeURIComponent(escape(n))}let Mw=null,PC=null;function qq(n){return Mw||(Mw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,PC=new Map([["","t"]])),n.replaceAll(Mw,(e,t,r)=>t?t.normalize("NFKC"):PC.get(r))}function Gq(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return sM(n)}const ix="pdfjs_internal_id_",ca={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Kq(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(sM(n))}const ha="http://www.w3.org/2000/svg";class kh{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function By(n,e="text"){if(kp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class vm{constructor({viewBox:e,scale:t,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=s,this.offsetY=i;const l=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,g,v;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,g=0,v=1;break;case 90:h=0,f=1,g=1,v=0;break;case 270:h=0,f=-1,g=-1,v=0;break;case 0:h=1,f=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,S,x,E;h===0?(_=Math.abs(d-e[1])*t+s,S=Math.abs(l-e[0])*t+i,x=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(_=Math.abs(l-e[0])*t+s,S=Math.abs(d-e[1])*t+i,x=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[h*t,f*t,g*t,v*t,_-h*t*l-g*t*d,S-f*t*l-v*t*d],this.width=x,this.height=E}get rawDims(){const{viewBox:e}=this;return _t(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new vm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return Ve.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ve.applyTransform([e[0],e[1]],this.transform),r=Ve.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return Ve.applyInverseTransform([e,t],this.transform)}}class ox extends Ll{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function $y(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function ax(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Yq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Xq(n,e="document.pdf"){if(typeof n!="string")return e;if($y(n))return mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class RC{started=Object.create(null);times=[];time(e){e in this.started&&mt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||mt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function kp(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ti(n){n.preventDefault()}function MC(n){console.log("Deprecated API usage: "+n)}class iM{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,l+=g):h==="+"&&(a-=f,l-=g),new Date(Date.UTC(r,s,i,a,l,d))}}function Qq(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new vm({viewBox:i,scale:e,rotation:t})}function lx(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(mt(`Not a valid color format: "${n}"`),[0,0,0])}function Jq(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,lx(r))}e.remove()}function an(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function ua(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function au(n,e,t=!1,r=!0){if(e instanceof vm){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,l=Br.isCSSRoundSupported,d=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${i}px`,f=l?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=l?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Tb{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class jp{#e=null;#t=null;#n;#s=null;#i=null;static#r=null;constructor(e){this.#n=e,jp.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",ti,{signal:t}),e.addEventListener("pointerdown",jp.#l,{signal:t});const r=this.#s=document.createElement("div");r.className="buttons",e.append(r);const s=this.#n.toolbarPosition;if(s){const{style:i}=e,a=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ti,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",jp.#r[e]),this.#a(r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#s.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#a(t),this.#s.prepend(t,this.#o),this.#i=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#s.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Zq{#e=null;#t=null;#n;constructor(e){this.#n=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ti,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#i(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const l=i.x+(t?i.width:0);if(a>r){s=l,r=a;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,r]}show(e,t,r){const[s,i]=this.#i(t,r),{style:a}=this.#t||=this.#s();e.append(this.#t),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",ti,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Zv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function eG(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}class tG{#e=0;get id(){return`${Nq}${this.#e++}`}}class cx{#e=Gq();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",i)}async#s(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(r.url=t,s=await By(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=cx._isSVGFittingCanvas,a=new FileReader,l=new Image,d=new Promise((h,f)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,h()},a.onload=async()=>{const g=r.svgUrl=a.result;l.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=f});a.readAsDataURL(s),await d}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return this.#s(`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const r=await t;return this.#s(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class nG{#e=[];#t=!1;#n;#s=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&e(),this.#t)return;const d={cmd:e,undo:t,post:r,type:i};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(d);return}if(a&&this.#e[this.#s].type===i){l&&(d.undo=this.#e[this.#s].undo),this.#e[this.#s]=d;return}const h=this.#s+1;h===this.#n?this.#e.splice(0,1):(this.#s=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}destroy(){this.#e=null}}class ym{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Br.platform;for(const[r,s,i={}]of e)for(const a of r){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:l=null}}=r;l&&!l(e,t)||(s.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}class ux{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Jq(e),_t(this,"_colors",e)}convert(e){const t=lx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return ux._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ve.makeHexColor(...t):e}}class Rl{#e=new AbortController;#t=null;#n=new Map;#s=new Map;#i=null;#r=null;#l=null;#c=new nG;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#v=!1;#g=!1;#m=null;#y=null;#b=null;#E=null;#S=!1;#A=null;#O=new tG;#k=!1;#_=!1;#C=null;#T=null;#P=null;#I=null;#x=ft.NONE;#w=new Set;#D=null;#N=null;#L=null;#z={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#j=null;#F=null;#U=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Rl.prototype,t=a=>a.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new ym([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,r,s,i,a,l,d,h,f,g){const v=this._signal=this.#e.signal;this.#F=e,this.#U=t,this.#i=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),this.#ee(),this.#se(),this.#G(),this.#r=i.annotationStorage,this.#m=i.filterFactory,this.#N=a,this.#E=l||null,this.#f=d,this.#v=h,this.#g=f,this.#I=g||null,this.viewParameters={realScale:kh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#R?.resolve(),this.#R=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#A?.hide(),this.#A=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#I}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#g}get hcmFilter(){return _t(this,"hcmFilter",this.#N?this.#m.addHCMFilter(this.#N.foreground,this.#N.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return _t(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#P=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#g=t;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#s.values()){const{x:s,y:i,width:a,height:l}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+l)return r}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*kh.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#H({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#s.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,l=t.toString(),h=this.#H(t).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;t.empty();const g=this.#q(h),v=this.#x===ft.NONE,_=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(ft.HIGHLIGHT,_);return}_()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#H(e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#A||=new Zq(this),this.#A.show(r,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Z(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#D)return;const s=this.#H(e).closest(".textLayer");if(!s){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#D=t,this.#M({hasSelectedText:!0}),!(this.#x!==ft.HIGHLIGHT&&this.#x!==ft.NONE)&&(this.#x===ft.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const i=this.#x===ft.HIGHLIGHT?this.#q(s):null;i?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),d=h=>{h.type==="pointerup"&&h.button!==0||(a.abort(),i?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}#W(e=""){this.#x===ft.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#J()}#ee(){document.addEventListener("selectionchange",this.#Z.bind(this),{signal:this._signal})}#te(){if(this.#b)return;this.#b=new AbortController;const e=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#T=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#T)return;const[e,t]=this.#T;this.#T=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#G(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#C?.abort(),this.#C=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#se(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#G(),this.#K()}removeEditListeners(){this.#re(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#w){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){mt(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const d of r){const h=await s.deserialize(d);if(!h)return;i.push(h)}const a=()=>{for(const d of i)this.#X(d);this.#Q(i)},l=()=>{for(const d of i)d.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){mt(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==ft.NONE&&!this.isEditorHandlingKeyboard&&Rl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(e){Object.entries(e).some(([r,s])=>this.#z[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#z,e)}),this.#x===ft.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[st.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#K(),this.#M({isEditing:this.#x!==ft.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#Y(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#$(t.defaultPropertiesToUpdate)}}getId(){return this.#O.id}get currentLayer(){return this.#s.get(this.#a)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#s.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#x!==e&&!(this.#R&&(await this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#x=e,e===ft.NONE){this.setEditingState(!1),this.#oe(),this.#R.resolve();return}this.setEditingState(!0),await this.#ie(),this.unselectAll();for(const s of this.#s.values())s.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(const s of this.#n.values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#R.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case st.CREATE:this.currentLayer.addNewEditor();return;case st.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(t);break;case st.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#w)r.updateParams(e,t);for(const r of this.#h)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const i of this.#n.values())i.editorType===e&&i.show(t);(this.#L?.get(st.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#$([[st.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#_!==e){this.#_=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ie(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ae===e&&this.#$(e.propertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()})}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#c.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}#V(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#w],t=()=>{for(const s of e)s.remove()},r=()=>{for(const s of e)this.#X(s)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#x!==ft.NONE))&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=e,this.#B[1]+=t;const[s,i]=this.#B,a=[...this.#w],l=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(s,i)},undo:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(-s,-i)},mustExec:!1})},l);for(const d of a)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const e of this.#w)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const e=this.#o;this.#o=null;let t=!1;for(const[{x:s,y:i,pageIndex:a},l]of e)l.newX=s,l.newY=i,l.newPageIndex=a,t||=s!==l.savedX||i!==l.savedY||a!==l.savedPageIndex;if(!t)return!1;const r=(s,i,a,l)=>{if(this.#n.has(s.id)){const d=this.#s.get(l);d?s._setParentAndPosition(d,i,a):(s.pageIndex=l,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:l}]of e)r(s,i,a,l)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:l}]of e)r(s,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#o)for(const r of this.#o.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#x}get imageManager(){return _t(this,"imageManager",new cx)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,f,g,v)=>({x:(f-s)/a,y:1-(h+g-r)/i,width:v/a,height:g/i});break;case"180":l=(h,f,g,v)=>({x:1-(h+g-r)/i,y:1-(f+v-s)/a,width:g/i,height:v/a});break;case"270":l=(h,f,g,v)=>({x:1-(f+v-s)/a,y:(h-r)/i,width:v/a,height:g/i});break;default:l=(h,f,g,v)=>({x:(h-r)/i,y:(f-s)/a,width:g/i,height:v/a});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:v,y:_,width:S,height:x}of g.getClientRects())S===0||x===0||d.push(l(v,_,S,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#r.getRawValue(t);r&&(this.#x===ft.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class go{#e=null;#t=!1;#n=null;#s=null;#i=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,go.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){go._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",go.#h.missing),t.setAttribute("data-l10n-id",go.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",ti,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#l=!0,s(i))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}async setGuessedText(e){this.#e===null&&(this.#a=e,this.#d=await go._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#a===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(this.#a=r,this.#d=s),!(this.#e===e&&this.#t===t)&&(i||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#i=null,this.#c?.remove(),this.#c=null}async#f(){const e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",go.#h[this.#p]),this.#s?.setAttribute("data-l10n-id",go.#h[`${this.#p}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const s=100,i=this.#u._uiManager._signal;i.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:i}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i?.classList.remove("show")},{signal:i})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class rt{#e=null;#t=null;#n=null;#s=!1;#i=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#v=0;#g=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#b=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new ux;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=Rl.TRANSLATE_SMALL,r=Rl.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new rG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(rt._l10n??=e,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){en("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}#E([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,s]=this.parentDimensions;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[l,d]=this.getBaseTranslation();i+=l,a+=d,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=rt,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:s,y:i,width:a,height:l}=this;if(a*=t,l*=r,s*=t,i*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),i=Math.max(0,Math.min(r-l,i));break;case 90:s=Math.max(0,Math.min(t-l,s)),i=Math.min(r,Math.max(a,i));break;case 180:s=Math.min(t,Math.max(a,s)),i=Math.min(r,Math.max(l,i));break;case 270:s=Math.min(t,Math.max(l,s)),i=Math.max(0,Math.min(r-a,i));break}this.x=s/=t,this.y=i/=r;const[d,h]=this.getBaseTranslation();s+=d,i+=h;const{style:f}=this.div;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return rt.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return rt.#S(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#i||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!this.#i&&t.endsWith("%");if(s&&i)return;const[a,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!this.#i&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#O(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");this.#r.append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),s.addEventListener("contextmenu",ti,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#r)}#k(e,t){t.preventDefault();const{isMac:r}=Br.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#C.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",ti,{signal:a});const l=this.x,d=this.y,h=this.width,f=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const _=()=>{i.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=g,this.div.style.cursor=v,this.#_(l,d,h,f)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})}#_(e,t,r,s){const i=this.x,a=this.y,l=this.width,d=this.height;i===e&&a===t&&l===r&&d===s||this.addCommands({cmd:()=>{this.width=l,this.height=d,this.x=i,this.y=a;const[h,f]=this.parentDimensions;this.setDims(h*l,f*d),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=s,this.x=e,this.y=t;const[h,f]=this.parentDimensions;this.setDims(h*r,f*s),this.fixAndSetPosition()},mustExec:!0})}#C(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,l=this.width,d=this.height,h=rt.MIN_SIZE/r,f=rt.MIN_SIZE/s,g=te=>Math.round(te*1e4)/1e4,v=this.#A(this.rotation),_=(te,z)=>[v[0]*te+v[2]*z,v[1]*te+v[3]*z],S=this.#A(360-this.rotation),x=(te,z)=>[S[0]*te+S[2]*z,S[1]*te+S[3]*z];let E,P,M=!1,R=!1;switch(e){case"topLeft":M=!0,E=(te,z)=>[0,0],P=(te,z)=>[te,z];break;case"topMiddle":E=(te,z)=>[te/2,0],P=(te,z)=>[te/2,z];break;case"topRight":M=!0,E=(te,z)=>[te,0],P=(te,z)=>[0,z];break;case"middleRight":R=!0,E=(te,z)=>[te,z/2],P=(te,z)=>[0,z/2];break;case"bottomRight":M=!0,E=(te,z)=>[te,z],P=(te,z)=>[0,0];break;case"bottomMiddle":E=(te,z)=>[te/2,z],P=(te,z)=>[te/2,0];break;case"bottomLeft":M=!0,E=(te,z)=>[0,z],P=(te,z)=>[te,0];break;case"middleLeft":R=!0,E=(te,z)=>[0,z/2],P=(te,z)=>[te,z/2];break}const I=E(l,d),O=P(l,d);let F=_(...O);const $=g(i+F[0]),W=g(a+F[1]);let K=1,ce=1,[pe,ue]=this.screenToPageTranslation(t.movementX,t.movementY);if([pe,ue]=x(pe/r,ue/s),M){const te=Math.hypot(l,d);K=ce=Math.max(Math.min(Math.hypot(O[0]-I[0]-pe,O[1]-I[1]-ue)/te,1/l,1/d),h/l,f/d)}else R?K=Math.max(h,Math.min(1,Math.abs(O[0]-I[0]-pe)))/l:ce=Math.max(f,Math.min(1,Math.abs(O[1]-I[1]-ue)))/d;const fe=g(l*K),ne=g(d*ce);F=_(...P(fe,ne));const H=$-F[0],q=W-F[1];this.width=fe,this.height=ne,this.x=H,this.y=q,this.setDims(r*fe,s*ne),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new jp(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(go.initialize(rt._l10n),this.#n=new go(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#I();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),Zv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Br.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#P(e);return}this.#T(e)}get isSelected(){return this._uiManager.isSelected(this)}#T(e){const{isMac:t}=Br.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,s=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#v=e.clientX,this.#g=e.clientY;const a=l=>{const{clientX:d,clientY:h}=l,[f,g]=this.screenToPageTranslation(d-this.#v,h-this.#g);this.#v=d,this.#g=h,this._uiManager.dragSelectedEditors(f,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const i=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#T(e)};window.addEventListener("pointerup",i,{signal:s}),window.addEventListener("blur",i,{signal:s})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[l,d]=this.pageTranslation,h=e/s,f=t/s,g=this.x*i,v=this.y*a,_=this.width*i,S=this.height*a;switch(r){case 0:return[g+h+l,a-v-f-S+d,g+h+_+l,a-v-f+d];case 90:return[g+f+l,a-v+h+d,g+f+S+l,a-v+h+_+d];case 180:return[g-h-_+l,a-v+f+d,g-h+l,a-v+f+S+d];case 270:return[g-f-S+l,a-v-h-_+d,g-f+l,a-v-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,l=i-r,d=a-s;switch(this.rotation){case 0:return[r,t-a,l,d];case 90:return[r,t-s,d,l];case 180:return[i,t-s,l,d];case 270:return[i,t-a,d,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#I(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#I()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){en("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,s.#e=e.accessibilityData;const[i,a]=s.pageDimensions,[l,d,h,f]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/i,s.y=d/a,s.width=h/i,s.height=f/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#O(),this.#r.classList.remove("hidden"),Zv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const a=this.#x.bind(this),l=this.#w.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",this.#D.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",rt._l10nResizer[f])}}const r=this.#t[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(i!==s){if(i<s)for(let l=0;l<s-i;l++)this.#r.append(this.#r.firstChild);else if(i>s)for(let l=0;l<i-s;l++)this.#r.firstChild.before(this.#r.lastChild);let a=0;for(const l of t){const h=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",rt._l10nResizer[h])}}this.#N(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#x(e){rt._resizerKeyboardManager.exec(this,e)}#w(e){this.#p&&e.relatedTarget?.parentNode!==this.#r&&this.#L()}#D(e){this.#u=this.#p?e:""}#N(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#C(this.#u,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#N(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=this.#l;this.#_(e,t,r,s),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#i=!0;const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let s=this.#m.get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},rt._telemetryTimeout),this.#m.set(r,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class rG extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const IC=3285377520,Qs=4294901760,mo=65535;class oM{constructor(e){this.h1=e?e&4294967295:IC,this.h2=e?e&4294967295:IC}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,E=e.length;x<E;x++){const P=e.charCodeAt(x);P<=255?t[r++]=P:(t[r++]=P>>>8,t[r++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let l=0,d=0,h=this.h1,f=this.h2;const g=3432918353,v=461845907,_=g&mo,S=v&mo;for(let x=0;x<s;x++)x&1?(l=a[x],l=l*g&Qs|l*_&mo,l=l<<15|l>>>17,l=l*v&Qs|l*S&mo,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[x],d=d*g&Qs|d*_&mo,d=d<<15|d>>>17,d=d*v&Qs|d*S&mo,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,i){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*g&Qs|l*_&mo,l=l<<15|l>>>17,l=l*v&Qs|l*S&mo,s&1?h^=l:f^=l}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Qs|e*36045&mo,t=t*4283543511&Qs|((t<<16|e>>>16)*2950163797&Qs)>>>16,e^=t>>>1,e=e*444984403&Qs|e*60499&mo,t=t*3301882366&Qs|((t<<16|e>>>16)*3120437893&Qs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Pb=Object.freeze({map:null,hash:"",transfer:void 0});class dx{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,this.#n.set(e,t);s&&this.#s(),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?sx(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new aM(this)}get serializable(){if(this.#n.size===0)return Pb;const e=new Map,t=new oM,r=[],s=Object.create(null);let i=!1;for(const[a,l]of this.#n){const d=l instanceof rt?l.serialize(!1,s):l;d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),i||=!!d.bitmap)}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Pb}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof rt))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const a=e[i]||=new Map;for(const[l,d]of Object.entries(s)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const f=h.get(d)??0;h.set(d,f+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class aM extends dx{#e;constructor(e){super();const{map:t,hash:r,transfer:s}=e.serializable,i=structuredClone(t,s?{transfer:s}:null);this.#e={map:i,hash:r,transfer:s}}get print(){en("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class sG{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if($n(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,a=new FontFace(r,s,i);this.addNativeFontFace(a);try{await a.load(),this.#e.add(r),t?.(e)}catch{mt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}en("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw mt(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Sr||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),_t(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for($n(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(I,O){return I.charCodeAt(O)<<24|I.charCodeAt(O+1)<<16|I.charCodeAt(O+2)<<8|I.charCodeAt(O+3)&255}function s(I,O,F,$){const W=I.substring(0,O),K=I.substring(O+F);return W+$+K}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let h=0;function f(I,O){if(++h>30){mt("Load test font never loaded."),O();return}if(d.font="30px "+I,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(f.bind(null,I,O))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const S=16,x=1482184792;let E=r(v,S);for(i=0,a=g.length-3;i<a;i+=4)E=E-x+r(g,i)|0;i<g.length&&(E=E-x+r(g+"XXX",i)|0),v=s(v,S,4,zq(E));const P=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${g}";src:${P}}`;this.insertRule(M);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const I of[e.loadedName,g]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=I,R.append(O)}this._document.body.append(R),f(g,()=>{R.remove(),t.complete()})}}class iG{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Kq(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){mt(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(i,a){};const s=[];for(let i=0,a=r.length;i<a;)switch(r[i++]){case ca.BEZIER_CURVE_TO:{const[l,d,h,f,g,v]=r.slice(i,i+6);s.push(_=>_.bezierCurveTo(l,d,h,f,g,v)),i+=6}break;case ca.MOVE_TO:{const[l,d]=r.slice(i,i+2);s.push(h=>h.moveTo(l,d)),i+=2}break;case ca.LINE_TO:{const[l,d]=r.slice(i,i+2);s.push(h=>h.lineTo(l,d)),i+=2}break;case ca.QUADRATIC_CURVE_TO:{const[l,d,h,f]=r.slice(i,i+4);s.push(g=>g.quadraticCurveTo(l,d,h,f)),i+=4}break;case ca.RESTORE:s.push(l=>l.restore());break;case ca.SAVE:s.push(l=>l.save());break;case ca.SCALE:$n(s.length===2,"Scale command is only valid at the third position.");break;case ca.TRANSFORM:{const[l,d,h,f,g,v]=r.slice(i,i+6);s.push(_=>_.transform(l,d,h,f,g,v)),i+=6}break;case ca.TRANSLATE:{const[l,d]=r.slice(i,i+2);s.push(h=>h.translate(l,d)),i+=2}break}return this.compiledGlyphs[t]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let d=2,h=s.length;d<h;d++)s[d](a)}}}class lM{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){en("Abstract method `_createCanvas` called.")}}class oG extends lM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class cM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class uM extends cM{async _fetch(e){const t=await By(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Fy(t)}}class dM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}class aG extends dM{#e;#t;#n;#s;#i;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#i=t}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#i.createElementNS(ha,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#i.createElementNS(ha,"defs"),e.append(r),r.append(this.#n),this.#i.body.append(e)}return this.#n}#d(e){if(e.length===1){const d=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=d[g]/255;const f=h.join(",");return[f,f,f]}const[t,r,s]=e,i=new Array(256),a=new Array(256),l=new Array(256);for(let d=0;d<256;d++)i[d]=t[d]/255,a[d]=r[d]/255,l[d]=s[d]/255;return[i.join(","),a.join(","),l.join(",")]}#o(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&($y(t)?mt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,s,i]=this.#d(e),a=e.length===1?r:`${r}${s}${i}`;if(t=this.#c.get(a),t)return this.#c.set(e,t),t;const l=`g_${this.#s}_transfer_map_${this.#l++}`,d=this.#o(l);this.#c.set(e,d),this.#c.set(a,d);const h=this.#f(l);return this.#g(r,s,i,h),d}addHCMFilter(e,t){const r=`${e}-${t}`,s="base";let i=this.#u.get(s);if(i?.key===r||(i?(i.filter?.remove(),i.key=r,i.url="none",i.filter=null):(i={key:r,url:"none",filter:null},this.#u.set(s,i)),!e||!t))return i.url;const a=this.#y(e);e=Ve.makeHexColor(...a);const l=this.#y(t);if(t=Ve.makeHexColor(...l),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return i.url;const d=new Array(256);for(let _=0;_<=255;_++){const S=_/255;d[_]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#s}_hcm_filter`,g=i.filter=this.#f(f);this.#g(h,h,h,g),this.#p(g);const v=(_,S)=>{const x=a[_]/255,E=l[_]/255,P=new Array(S+1);for(let M=0;M<=S;M++)P[M]=x+M/S*(E-x);return P.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),g),i.url=this.#o(f),i.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),s=`alpha_${r}`;if(t=this.#c.get(s),t)return this.#c.set(e,t),t;const i=`g_${this.#s}_alpha_map_${this.#l++}`,a=this.#o(i);this.#c.set(e,a),this.#c.set(s,a);const l=this.#f(i);return this.#m(r,l),a}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,s;if(e?([r]=this.#d([e]),s=`luminosity_${r}`):s="luminosity",t=this.#c.get(s),t)return this.#c.set(e,t),t;const i=`g_${this.#s}_luminosity_map_${this.#l++}`,a=this.#o(i);this.#c.set(e,a),this.#c.set(s,a);const l=this.#f(i);return this.#h(l),e&&this.#m(r,l),a}addHighlightHCMFilter(e,t,r,s,i){const a=`${t}-${r}-${s}-${i}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!t||!r))return l.url;const[d,h]=[t,r].map(this.#y.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,_]=[s,i].map(this.#y.bind(this));g<f&&([f,g,v,_]=[g,f,_,v]),this.#a.style.color="";const S=(P,M,R)=>{const I=new Array(256),O=(g-f)/R,F=P/255,$=(M-P)/(255*R);let W=0;for(let K=0;K<=R;K++){const ce=Math.round(f+K*O),pe=F+K*$;for(let ue=W;ue<=ce;ue++)I[ue]=pe;W=ce+1}for(let K=W;K<256;K++)I[K]=I[W-1];return I.join(",")},x=`g_${this.#s}_hcm_${e}_filter`,E=l.filter=this.#f(x);return this.#p(E),this.#g(S(v[0],_[0],5),S(v[1],_[1],5),S(v[2],_[2],5),E),l.url=this.#o(x),l.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#i.createElementNS(ha,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#v(e,t,r){const s=this.#i.createElementNS(ha,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)}#g(e,t,r,s){const i=this.#i.createElementNS(ha,"feComponentTransfer");s.append(i),this.#v(i,"feFuncR",e),this.#v(i,"feFuncG",t),this.#v(i,"feFuncB",r)}#m(e,t){const r=this.#i.createElementNS(ha,"feComponentTransfer");t.append(r),this.#v(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,lx(getComputedStyle(this.#a).getPropertyValue("color"))}}class hM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class fM extends hM{async _fetch(e){const t=await By(e,"arraybuffer");return new Uint8Array(t)}}if(Sr){var Rb=Promise.withResolvers(),Mb=null;(async()=>{const e=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,a;return new Map(Object.entries({fs:e,http:t,https:r,url:s,canvas:i,path2d:a}))})().then(e=>{Mb=e,Rb.resolve()},e=>{mt(`loadPackages: ${e}`),Mb=new Map,Rb.resolve()})}class Ml{static get promise(){return Rb.promise}static get(e){return Mb?.get(e)}}async function pM(n){const t=await Ml.get("fs").promises.readFile(n);return new Uint8Array(t)}class lG extends dM{}class cG extends lM{_createCanvas(e,t){return Ml.get("canvas").createCanvas(e,t)}}class uG extends cM{async _fetch(e){return pM(e)}}class dG extends hM{async _fetch(e){return pM(e)}}const Fr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ib(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class hx{getPattern(){en("Abstract method `getPattern` called.")}}class hG extends hx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Fr.STROKE||s===Fr.FILL){const a=t.current.getClippedPathBoundingBox(s,an(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),r=Ve.transform(r,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Ib(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(r);i.setTransform(g)}else Ib(e,this._bbox),i=this._createGradient(e);return i}}function Iw(n,e,t,r,s,i,a,l){const d=e.coords,h=e.colors,f=n.data,g=n.width*4;let v;d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=i,i=a,a=v),d[r+1]>d[s+1]&&(v=r,r=s,s=v,v=a,a=l,l=v),d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=i,i=a,a=v);const _=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,x=(d[r]+e.offsetX)*e.scaleX,E=(d[r+1]+e.offsetY)*e.scaleY,P=(d[s]+e.offsetX)*e.scaleX,M=(d[s+1]+e.offsetY)*e.scaleY;if(S>=M)return;const R=h[i],I=h[i+1],O=h[i+2],F=h[a],$=h[a+1],W=h[a+2],K=h[l],ce=h[l+1],pe=h[l+2],ue=Math.round(S),fe=Math.round(M);let ne,H,q,te,z,re,Z,B;for(let X=ue;X<=fe;X++){if(X<E){const ve=X<S?0:(S-X)/(S-E);ne=_-(_-x)*ve,H=R-(R-F)*ve,q=I-(I-$)*ve,te=O-(O-W)*ve}else{let ve;X>M?ve=1:E===M?ve=0:ve=(E-X)/(E-M),ne=x-(x-P)*ve,H=F-(F-K)*ve,q=$-($-ce)*ve,te=W-(W-pe)*ve}let ae;X<S?ae=0:X>M?ae=1:ae=(S-X)/(S-M),z=_-(_-P)*ae,re=R-(R-K)*ae,Z=I-(I-ce)*ae,B=O-(O-pe)*ae;const ye=Math.round(Math.min(ne,z)),Me=Math.round(Math.max(ne,z));let Pe=g*X+ye*4;for(let ve=ye;ve<=Me;ve++)ae=(ne-ve)/(ne-z),ae<0?ae=0:ae>1&&(ae=1),f[Pe++]=H-(H-re)*ae|0,f[Pe++]=q-(q-Z)*ae|0,f[Pe++]=te-(te-B)*ae|0,f[Pe++]=255}}function fG(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(r.length/l)-1,h=l-1;for(i=0;i<d;i++){let f=i*l;for(let g=0;g<h;g++,f++)Iw(n,t,r[f],r[f+1],r[f+l],s[f],s[f+1],s[f+l]),Iw(n,t,r[f+l+1],r[f+1],r[f+l],s[f+l+1],s[f+1],s[f+l])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Iw(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class pG extends hx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),_=h/g,S=f/v,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/_,scaleY:1/S},E=g+4,P=v+4,M=r.getCanvas("mesh",E,P),R=M.context,I=R.createImageData(g,v);if(t){const F=I.data;for(let $=0,W=F.length;$<W;$+=4)F[$]=t[0],F[$+1]=t[1],F[$+2]=t[2],F[$+3]=255}for(const F of this._figures)fG(I,F,x);return R.putImageData(I,2,2),{canvas:M.canvas,offsetX:l-2*_,offsetY:d-2*S,scaleX:_,scaleY:S}}getPattern(e,t,r,s){Ib(e,this._bbox);let i;if(s===Fr.SHADING)i=Ve.singularValueDecompose2dScale(an(e));else if(i=Ve.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=Ve.singularValueDecompose2dScale(this.matrix);i=[i[0]*l[0],i[1]*l[1]]}const a=this._createMeshCanvas(i,s===Fr.SHADING?null:this._background,t.cachedCanvases);return s!==Fr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class mG extends hx{getPattern(){return"hotpink"}}function gG(n){switch(n[0]){case"RadialAxial":return new hG(n);case"Mesh":return new pG(n);case"Dummy":return new mG}throw new Error(`Unknown IR type: ${n[0]}`)}const DC={COLORED:1,UNCOLORED:2};class fx{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:l}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),Ly("TilingType: "+i);const f=t[0],g=t[1],v=t[2],_=t[3],S=v-f,x=_-g,E=Ve.singularValueDecompose2dScale(this.matrix),P=Ve.singularValueDecompose2dScale(this.baseTransform),M=E[0]*P[0],R=E[1]*P[1];let I=S,O=x,F=!1,$=!1;const W=Math.ceil(d*M),K=Math.ceil(h*R),ce=Math.ceil(S*M),pe=Math.ceil(x*R);W>=ce?I=d:F=!0,K>=pe?O=h:$=!0;const ue=this.getSizeAndScale(I,this.ctx.canvas.width,M),fe=this.getSizeAndScale(O,this.ctx.canvas.height,R),ne=e.cachedCanvases.getCanvas("pattern",ue.size,fe.size),H=ne.context,q=l.createCanvasGraphics(H);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,s,a),H.translate(-ue.scale*f,-fe.scale*g),q.transform(ue.scale,0,0,fe.scale,0,0),H.save(),this.clipBbox(q,f,g,v,_),q.baseTransform=an(q.ctx),q.executeOperatorList(r),q.endDrawing(),H.restore(),F||$){const te=ne.canvas;F&&(I=d),$&&(O=h);const z=this.getSizeAndScale(I,this.ctx.canvas.width,M),re=this.getSizeAndScale(O,this.ctx.canvas.height,R),Z=z.size,B=re.size,X=e.cachedCanvases.getCanvas("pattern-workaround",Z,B),ae=X.context,ye=F?Math.floor(S/d):0,Me=$?Math.floor(x/h):0;for(let Pe=0;Pe<=ye;Pe++)for(let ve=0;ve<=Me;ve++)ae.drawImage(te,Z*Pe,B*ve,Z,B,0,0,Z,B);return{canvas:X.canvas,scaleX:z.scale,scaleY:re.scale,offsetX:f,offsetY:g}}return{canvas:ne.canvas,scaleX:ue.scale,scaleY:fe.scale,offsetX:f,offsetY:g}}getSizeAndScale(e,t,r){const s=Math.max(fx.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,l=i-r;e.ctx.rect(t,r,a,l),e.current.updateRectMinMax(an(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case DC.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case DC.UNCOLORED:const l=Ve.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,i.fillColor=l,i.strokeColor=l;break;default:throw new Uq(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==Fr.SHADING&&(i=Ve.transform(i,t.baseTransform),this.matrix&&(i=Ve.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const d=e.createPattern(a.canvas,"repeat");return d.setTransform(l),d}}function vG({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=Br.isLittleEndian?4278190080:255,[d,h]=a?[i,l]:[l,i],f=r>>3,g=r&7,v=n.length;t=new Uint32Array(t.buffer);let _=0;for(let S=0;S<s;S++){for(const E=e+f;e<E;e++){const P=e<v?n[e]:255;t[_++]=P&128?h:d,t[_++]=P&64?h:d,t[_++]=P&32?h:d,t[_++]=P&16?h:d,t[_++]=P&8?h:d,t[_++]=P&4?h:d,t[_++]=P&2?h:d,t[_++]=P&1?h:d}if(g===0)continue;const x=e<v?n[e++]:255;for(let E=0;E<g;E++)t[_++]=x&1<<7-E?h:d}return{srcPos:e,destPos:_}}const NC=16,OC=100,yG=15,LC=10,jC=1e3,as=16;function wG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,a,l,d){e.transform(r,s,i,a,l,d),this.__originalTransform(r,s,i,a,l,d)},n.setTransform=function(r,s,i,a,l,d){e.setTransform(r,s,i,a,l,d),this.__originalSetTransform(r,s,i,a,l,d)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,l){e.bezierCurveTo(t,r,s,i,a,l),this.__originalBezierCurveTo(t,r,s,i,a,l)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class bG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function gv(n,e,t,r,s,i,a,l,d,h){const[f,g,v,_,S,x]=an(n);if(g===0&&v===0){const M=a*f+S,R=Math.round(M),I=l*_+x,O=Math.round(I),F=(a+d)*f+S,$=Math.abs(Math.round(F)-R)||1,W=(l+h)*_+x,K=Math.abs(Math.round(W)-O)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(_),R,O),n.drawImage(e,t,r,s,i,0,0,$,K),n.setTransform(f,g,v,_,S,x),[$,K]}if(f===0&&_===0){const M=l*v+S,R=Math.round(M),I=a*g+x,O=Math.round(I),F=(l+h)*v+S,$=Math.abs(Math.round(F)-R)||1,W=(a+d)*g+x,K=Math.abs(Math.round(W)-O)||1;return n.setTransform(0,Math.sign(g),Math.sign(v),0,R,O),n.drawImage(e,t,r,s,i,0,0,K,$),n.setTransform(f,g,v,_,S,x),[K,$]}n.drawImage(e,t,r,s,i,a,l,d,h);const E=Math.hypot(f,g),P=Math.hypot(v,_);return[E*d,P*h]}function _G(n){const{width:e,height:t}=n;if(e>jC||t>jC)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),l,d,h;const f=e+7&-8;let g=new Uint8Array(f*t),v=0;for(const P of n.data){let M=128;for(;M>0;)g[v++]=P&M?0:255,M>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),d=1;d<e;d++)g[v]!==g[v+1]&&(a[d]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[d]=2,++_),l=1;l<t;l++){v=l*f,h=l*i,g[v-f]!==g[v]&&(a[h]=g[v]?1:8,++_);let P=(g[v]?4:0)+(g[v-f]?8:0);for(d=1;d<e;d++)P=(P>>2)+(g[v+1]?4:0)+(g[v-f+1]?8:0),s[P]&&(a[h+d]=s[P],++_),v++;if(g[v-f]!==g[v]&&(a[h+d]=g[v]?2:4,++_),_>r)return null}for(v=f*(t-1),h=l*i,g[v]!==0&&(a[h]=8,++_),d=1;d<e;d++)g[v]!==g[v+1]&&(a[h+d]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[h+d]=4,++_),_>r)return null;const S=new Int32Array([0,i,-1,0,-i,0,0,0,1]),x=new Path2D;for(l=0;_&&l<=t;l++){let P=l*i;const M=P+e;for(;P<M&&!a[P];)P++;if(P===M)continue;x.moveTo(P%i,l);const R=P;let I=a[P];do{const O=S[I];do P+=O;while(!a[P]);const F=a[P];F!==5&&F!==10?(I=F,a[P]=0):(I=F&51*I>>4,a[P]&=I>>2|I<<2),x.lineTo(P%i,P/i|0),a[P]||--_}while(R!==P);--l}return g=null,a=null,function(P){P.save(),P.scale(1/e,-1/t),P.translate(0,-t),P.fill(x),P.beginPath(),P.restore()}}class FC{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nM,this.textMatrixScale=1,this.fontMatrix=Cb,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=wr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=Ve.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=Ve.applyTransform(t,e),s=Ve.applyTransform(t.slice(2),e),i=Ve.applyTransform([t[0],t[3]],e),a=Ve.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){Ve.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,a,l,d,h,f){const g=Ve.bezierBoundingBox(t,r,s,i,a,l,d,h,f);f||this.updateRectMinMax(e,g)}getPathBoundingBox(e=Fr.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Fr.STROKE){t||en("Stroke bounding box must include transform.");const s=Ve.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Fr.FILL,t=null){return Ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function BC(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%as,i=(t-s)/as,a=s===0?i:i+1,l=n.createImageData(r,as);let d=0,h;const f=e.data,g=l.data;let v,_,S,x;if(e.kind===Pv.GRAYSCALE_1BPP){const E=f.byteLength,P=new Uint32Array(g.buffer,0,g.byteLength>>2),M=P.length,R=r+7>>3,I=4294967295,O=Br.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(S=v<i?as:s,h=0,_=0;_<S;_++){const F=E-d;let $=0;const W=F>R?r:F*8-7,K=W&-8;let ce=0,pe=0;for(;$<K;$+=8)pe=f[d++],P[h++]=pe&128?I:O,P[h++]=pe&64?I:O,P[h++]=pe&32?I:O,P[h++]=pe&16?I:O,P[h++]=pe&8?I:O,P[h++]=pe&4?I:O,P[h++]=pe&2?I:O,P[h++]=pe&1?I:O;for(;$<W;$++)ce===0&&(pe=f[d++],ce=128),P[h++]=pe&ce?I:O,ce>>=1}for(;h<M;)P[h++]=0;n.putImageData(l,0,v*as)}}else if(e.kind===Pv.RGBA_32BPP){for(_=0,x=r*as*4,v=0;v<i;v++)g.set(f.subarray(d,d+x)),d+=x,n.putImageData(l,0,_),_+=as;v<a&&(x=r*s*4,g.set(f.subarray(d,d+x)),n.putImageData(l,0,_))}else if(e.kind===Pv.RGB_24BPP)for(S=as,x=r*S,v=0;v<a;v++){for(v>=i&&(S=s,x=r*S),h=0,_=x;_--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;n.putImageData(l,0,v*as)}else throw new Error(`bad image kind: ${e.kind}`)}function $C(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%as,i=(t-s)/as,a=s===0?i:i+1,l=n.createImageData(r,as);let d=0;const h=e.data,f=l.data;for(let g=0;g<a;g++){const v=g<i?as:s;({srcPos:d}=vG({src:h,srcPos:d,dest:f,width:r,height:v,nonBlackColor:0})),n.putImageData(l,0,g*as)}}function bp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function vv(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Sr){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function UC(n,e){if(e)return!0;const t=Ve.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*kh.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const xG=["butt","round","square"],SG=["miter","round","bevel"],AG={},zC={};class gh{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:l=null},d,h){this.ctx=e,this.current=new FC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new bG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,r){const d=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...an(this.compositeCtx))}this.ctx.save(),vv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=an(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let l=t||0;const d=i.length;if(d===l)return l;const h=d-l>LC&&typeof r=="function",f=h?Date.now()+yG:0;let g=0;const v=this.commonObjs,_=this.objs;let S;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,r),l;if(S=a[l],S!==Oi.dependency)this[S].apply(this,i[l]);else for(const x of i[l]){const E=x.startsWith("g_")?v:_;if(!E.has(x))return E.get(x,r),l}if(l++,l===d)return l;if(h&&++g>LC){if(Date.now()>f)return r(),l;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=r,d=s,h="prescale1",f,g;for(;i>2&&l>1||a>2&&d>1;){let v=l,_=d;i>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/v),a>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/_),f=this.cachedCanvases.getCanvas(h,v,_),g=f.context,g.clearRect(0,0,v,_),g.drawImage(e,0,0,l,d,0,0,v,_),e=f.canvas,l=v,d=_,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,l=an(t);let d,h,f,g;if((e.bitmap||e.data)&&e.count>1){const W=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),i]),d=this._cachedBitmapsMap.get(W),d||(d=new Map,this._cachedBitmapsMap.set(W,d));const K=d.get(h);if(K&&!a){const ce=Math.round(Math.min(l[0],l[2])+l[4]),pe=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:K,offsetX:ce,offsetY:pe}}f=K}f||(g=this.cachedCanvases.getCanvas("maskCanvas",r,s),$C(g.context,e));let v=Ve.transform(l,[1/r,0,0,-1/s,0,0]);v=Ve.transform(v,[1,0,0,1,0,-s]);const[_,S,x,E]=Ve.getAxialAlignedBoundingBox([0,0,r,s],v),P=Math.round(x-_)||1,M=Math.round(E-S)||1,R=this.cachedCanvases.getCanvas("fillCanvas",P,M),I=R.context,O=_,F=S;I.translate(-O,-F),I.transform(...v),f||(f=this._scaleImage(g.canvas,ua(I)),f=f.img,d&&a&&d.set(h,f)),I.imageSmoothingEnabled=UC(an(I),e.interpolate),gv(I,f,0,0,f.width,f.height,0,0,r,s),I.globalCompositeOperation="source-in";const $=Ve.transform(ua(I),[1,0,0,1,-O,-F]);return I.fillStyle=a?i.getPattern(t,this,$,Fr.FILL):i,I.fillRect(0,0,r,s),d&&!a&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(O),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=xG[e]}setLineJoin(e){this.ctx.lineJoin=SG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...an(this.suspendedCtx)),bp(this.suspendedCtx,i),wG(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],l=s[2]-i,d=s[3]-a;l===0||d===0||(this.genericComposeSMask(t.context,r,l,d,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,l,d,h,f,g){let v=e.canvas,_=d-f,S=h-g;if(a){const E=Ve.makeHexColor(...a);if(_<0||S<0||_+r>v.width||S+s>v.height){const P=this.cachedCanvases.getCanvas("maskExtension",r,s),M=P.context;M.drawImage(v,-_,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=E,M.fillRect(0,0,r,s),M.globalCompositeOperation="source-over",v=P.canvas,_=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const P=new Path2D;P.rect(_,S,r,s),e.clip(P),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(_,S,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(d,h,r,s),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(v,_,S,r,s,d,h,r,s),t.restore()}save(){this.inSMaskMode?(bp(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),bp(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let a=i.x,l=i.y,d,h;const f=an(s),g=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,v=g?r.slice(0):null;for(let _=0,S=0,x=e.length;_<x;_++)switch(e[_]|0){case Oi.rectangle:a=t[S++],l=t[S++];const E=t[S++],P=t[S++],M=a+E,R=l+P;s.moveTo(a,l),E===0||P===0?s.lineTo(M,R):(s.lineTo(M,l),s.lineTo(M,R),s.lineTo(a,R)),g||i.updateRectMinMax(f,[a,l,M,R]),s.closePath();break;case Oi.moveTo:a=t[S++],l=t[S++],s.moveTo(a,l),g||i.updatePathMinMax(f,a,l);break;case Oi.lineTo:a=t[S++],l=t[S++],s.lineTo(a,l),g||i.updatePathMinMax(f,a,l);break;case Oi.curveTo:d=a,h=l,a=t[S+4],l=t[S+5],s.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],a,l),i.updateCurvePathMinMax(f,d,h,t[S],t[S+1],t[S+2],t[S+3],a,l,v),S+=6;break;case Oi.curveTo2:d=a,h=l,s.bezierCurveTo(a,l,t[S],t[S+1],t[S+2],t[S+3]),i.updateCurvePathMinMax(f,d,h,a,l,t[S],t[S+1],t[S+2],t[S+3],v),a=t[S+2],l=t[S+3],S+=4;break;case Oi.curveTo3:d=a,h=l,a=t[S+2],l=t[S+3],s.bezierCurveTo(t[S],t[S+1],a,l,a,l),i.updateCurvePathMinMax(f,d,h,t[S],t[S+1],a,l,a,l,v),S+=4;break;case Oi.closePath:s.closePath();break}g&&i.updateScalingPathMinMax(f,v),i.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,ua(t),Fr.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,ua(t),Fr.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=AG}eoClip(){this.pendingClip=zC}beginText(){this.current.textMatrix=nM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||Cb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&mt("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=r.systemFontInfo?.css||`"${i}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const d=r.italic?"italic":"normal";let h=t;t<NC?h=NC:t>OC&&(h=OC),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,a){this.current.textMatrix=[e,t,r,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s){const i=this.ctx,a=this.current,l=a.font,d=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,f=d&wr.FILL_STROKE_MASK,g=!!(d&wr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||v?(i.save(),i.translate(t,r),i.beginPath(),_(i,h),s&&i.setTransform(...s),(f===wr.FILL||f===wr.FILL_STROKE)&&i.fill(),(f===wr.STROKE||f===wr.FILL_STROKE)&&i.stroke(),i.restore()):((f===wr.FILL||f===wr.FILL_STROKE)&&i.fillText(e,t,r),(f===wr.STROKE||f===wr.FILL_STROKE)&&i.strokeText(e,t,r)),g&&(this.pendingTextPaths||=[]).push({transform:an(i),x:t,y:r,fontSize:h,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return _t(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,f=t.textHScale*h,g=e.length,v=r.vertical,_=v?1:-1,S=r.defaultVMetrics,x=s*t.fontMatrix[0],E=t.textRenderingMode===wr.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(f,-1):i.scale(f,1);let P;if(t.patternFill){i.save();const F=t.fillColor.getPattern(i,this,ua(i),Fr.FILL);P=an(i),i.restore(),i.fillStyle=F}let M=t.lineWidth;const R=t.textMatrixScale;if(R===0||M===0){const F=t.textRenderingMode&wr.FILL_STROKE_MASK;(F===wr.STROKE||F===wr.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=R;if(a!==1&&(i.scale(a,a),M/=a),i.lineWidth=M,r.isInvalidPDFjsFont){const F=[];let $=0;for(const W of e)F.push(W.unicode),$+=W.width;i.fillText(F.join(""),0,0),t.x+=$*x*f,i.restore(),this.compose();return}let I=0,O;for(O=0;O<g;++O){const F=e[O];if(typeof F=="number"){I+=_*F*s/1e3;continue}let $=!1;const W=(F.isSpace?d:0)+l,K=F.fontChar,ce=F.accent;let pe,ue,fe=F.width;if(v){const H=F.vmetric||S,q=-(F.vmetric?H[1]:fe*.5)*x,te=H[2]*x;fe=H?-H[0]:fe,pe=q/a,ue=(I+te)/a}else pe=I/a,ue=0;if(r.remeasure&&fe>0){const H=i.measureText(K).width*1e3/s*a;if(fe<H&&this.isFontSubpixelAAEnabled){const q=fe/H;$=!0,i.save(),i.scale(q,1),pe/=q}else fe!==H&&(pe+=(fe-H)/2e3*s/a)}if(this.contentVisible&&(F.isInFont||r.missingFile)){if(E&&!ce)i.fillText(K,pe,ue);else if(this.paintChar(K,pe,ue,P),ce){const H=pe+s*ce.offset.x/a,q=ue-s*ce.offset.y/a;this.paintChar(ce.fontChar,H,q,P)}}const ne=v?fe*x-W*h:fe*x+W*h;I+=ne,$&&i.restore()}v?t.y-=I:t.x+=I*f,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,l=s.vertical?1:-1,d=r.charSpacing,h=r.wordSpacing,f=r.textHScale*a,g=r.fontMatrix||Cb,v=e.length,_=r.textRenderingMode===wr.INVISIBLE;let S,x,E,P;if(!(_||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(f,a),S=0;S<v;++S){if(x=e[S],typeof x=="number"){P=l*x*i/1e3,this.ctx.translate(P,0),r.x+=P*f;continue}const M=(x.isSpace?h:0)+d,R=s.charProcOperatorList[x.operatorListId];if(!R){mt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(i,i),t.transform(...g),this.executeOperatorList(R),this.restore()),E=Ve.applyTransform([x.width,0],g)[0]*i+M,t.translate(E,0),r.x+=E*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){this.ctx.rect(r,s,i-r,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||an(this.ctx),i={createCanvasGraphics:a=>new gh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new fx(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=Ve.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=Ve.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=gG(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ua(t),Fr.SHADING);const s=ua(t);if(s){const{width:i,height:a}=t.canvas,[l,d,h,f]=Ve.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(l,d,h-l,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){en("Should not call beginInlineImage")}beginImageData(){en("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=an(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(an(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ly("TODO: Support non-isolated groups."),e.knockout&&mt("Knockout groups not supported.");const r=an(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Ve.getAxialAlignedBoundingBox(e.bbox,an(t));const i=[0,0,t.canvas.width,t.canvas.height];s=Ve.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,d,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(f,d,h),v=g.context;v.translate(-a,-l),v.transform(...r),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),bp(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=an(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Ve.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(this.#e(),vv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[d,h]=Ve.singularValueDecompose2dScale(an(this.ctx)),{viewportScale:f}=this,g=Math.ceil(a*this.outputScaleX*f),v=Math.ceil(l*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-h,0,l*h),vv(this.ctx)}else vv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new FC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=_G(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const d=an(l);l.transform(t,r,s,i,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let f=0,g=a.length;f<g;f+=2){const v=Ve.transform(d,[t,r,s,i,a[f],a[f+1]]),[_,S]=Ve.applyTransform([0,0],v);l.drawImage(h.canvas,_,S)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:l,height:d,transform:h}=i,f=this.cachedCanvases.getCanvas("maskCanvas",l,d),g=f.context;g.save();const v=this.getObject(a,i);$C(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?r.getPattern(g,this,ua(t),Fr.FILL):r,g.fillRect(0,0,l,d),g.restore(),t.save(),t.transform(...h),t.scale(1,-1),gv(t,f.canvas,0,0,l,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){mt("Dependent image isn't ready yet");return}const a=i.width,l=i.height,d=[];for(let h=0,f=s.length;h<f;h+=2)d.push({transform:[t,0,0,r,s[h],s[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!Sr){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,r).context;BC(d,e),i=this.applyTransferMapsToCanvas(d)}const a=this._scaleImage(i,ua(s));s.imageSmoothingEnabled=UC(an(s),e.interpolate),gv(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,d=this.cachedCanvases.getCanvas("inlineImage",i,a).context;BC(d,e),s=this.applyTransferMapsToCanvas(d)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),gv(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===zC?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=an(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,l;if(r===0&&s===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)a=l=1/d;else{const f=d*e;a=l=f<1?1/f:1}else if(e===0)a=1/d,l=1/h;else{const f=d*e,g=h*e;a=f<1?1/f:1,l=g<1?1/g:1}}else{const d=Math.abs(t*i-r*s),h=Math.hypot(t,r),f=Math.hypot(s,i);if(e===0)a=f/d,l=h/d;else{const g=e*d;a=f>g?f/g:1,l=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const l=Math.max(s,i);t.setLineDash(a.map(d=>d/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Oi)gh.prototype[n]!==void 0&&(gh.prototype[Oi[n]]=gh.prototype[n]);class Fp{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const yv={DATA:1,ERROR:2},Tn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ks(n){switch(n instanceof Error||typeof n=="object"&&n!==null||en('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new vu(n.message);case"MissingPDFException":return new gu(n.message);case"PasswordException":return new Eb(n.message,n.code);case"UnexpectedResponseException":return new jy(n.message,n.status);case"UnknownErrorException":return new kb(n.message,n.details);default:return new kb(n.message,n.toString())}}class Tp{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===yv.DATA)s.resolve(e.data);else if(e.callback===yv.ERROR)s.reject(ks(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:yv.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:yv.ERROR,callbackId:e.callbackId,reason:ks(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:a,targetName:l,stream:Tn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{$n(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:a,targetName:l,stream:Tn.CANCEL,streamId:i,reason:ks(h)}),f.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=f,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Tn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Tn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){$n(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Tn.ERROR,streamId:t,reason:ks(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(h){h(l(e.data,d))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Tn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:r,targetName:s,stream:Tn.START_COMPLETE,streamId:t,reason:ks(h)})})}#s(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Tn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ks(e.reason));break;case Tn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ks(e.reason));break;case Tn.PULL:if(!l){i.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(d){d(l.onPull?.())}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:Tn.PULL_COMPLETE,streamId:t,reason:ks(d)})});break;case Tn.ENQUEUE:if($n(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Tn.CLOSE:if($n(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,t);break;case Tn.ERROR:$n(a,"error should have stream controller"),a.controller.error(ks(e.reason)),this.#i(a,t);break;case Tn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ks(e.reason)),this.#i(a,t);break;case Tn.CANCEL:if(!l)break;new Promise(function(d){d(l.onCancel?.(ks(e.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Tn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:Tn.CANCEL_COMPLETE,streamId:t,reason:ks(d)})}),l.sinkCapability.reject(ks(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class CG{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return sx(this.#e)}has(e){return this.#e.has(e)}}const oh=Symbol("INTERNAL");class EG{#e=!1;#t=!1;#n=!1;#s=!0;constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){this.#e=!!(e&Ts.DISPLAY),this.#t=!!(e&Ts.PRINT),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==oh&&en("Internal method `_setVisible` called."),this.#n=r,this.#s=t}}class kG{#e=null;#t=new Map;#n=null;#s=null;constructor(e,t=Ts.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const r of e.groups)this.#t.set(r.id,new EG(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(oh,!1);for(const r of e.on)this.#t.get(r)._setVisible(oh,!0);for(const r of e.off)this.#t.get(r)._setVisible(oh,!1);this.#n=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=this.#i(i);else if(this.#t.has(i))a=this.#t.get(i).visible;else return mt(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Ly("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(mt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return mt(`Unknown optional content policy ${e.policy}.`),!0}return mt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const s=this.#t.get(e);if(!s){mt(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const i of s.rbGroups)for(const a of i)a!==e&&this.#t.get(a)?._setVisible(oh,!1,!0);s._setVisible(oh,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=this.#t.get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?sx(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new oM;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class TG{constructor(e,{disableRange:t=!1,disableStream:r=!1}){$n(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,i?.length>0){const d=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});$n(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$n(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new PG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new RG(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class PG{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=ax(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class RG{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function MG(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=l(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=a(n),t){const f=h(t);return i(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=l(t);return f=h(f),i(f)}function r(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(f,{fatal:!0}),_=Fy(g);g=v.decode(_),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),e&&(f=s("iso-8859-1",f))),f}function a(f){const g=[];let v;const _=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(f))!==null;){let[,x,E,P]=v;if(x=parseInt(x,10),x in g){if(x===0)break;continue}g[x]=[E,P]}const S=[];for(let x=0;x<g.length&&x in g;++x){let[E,P]=g[x];P=l(P),E&&(P=unescape(P),x===0&&(P=d(P))),S.push(P)}return S.join("")}function l(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const v=f.slice(0,g),S=f.slice(g+1).replace(/^[^']*'/,"");return s(v,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,S){if(_==="q"||_==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),s(v,S);try{S=atob(S)}catch{}return s(v,S)})}return""}function px(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function mx({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function gx(n){const e=n.get("Content-Disposition");if(e){let t=MG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ax(t))return t}return null}function Uy(n,e){return n===404||n===0&&e.startsWith("file:")?new gu('Missing PDF "'+e+'".'):new jy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function mM(n){return n===200||n===206}function gM(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(mt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class VC{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=px(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new IG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new DG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class IG{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,gM(r,this._withCredentials,this._abortController)).then(i=>{if(!mM(i.status))throw Uy(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:d}=mx({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=gx(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:vM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class DG{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,gM(i,this._withCredentials,this._abortController)).then(l=>{if(!mM(l.status))throw Uy(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:vM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Dw=200,Nw=206;function NG(n){const e=n.response;return typeof e!="string"?e:Fy(e).buffer}class OG{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=px(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const s={begin:e,end:t};for(const i in r)s[i]=r[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Nw):s.expectedStatus=Dw,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError?.(s.status);return}const i=s.status||Dw;if(!(i===Dw&&r.expectedStatus===Nw)&&i!==r.expectedStatus){r.onError?.(s.status);return}const l=NG(s);if(i===Nw){const d=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);r.onDone({begin:parseInt(h[1],10),chunk:l})}else l?r.onDone({begin:0,chunk:l}):r.onError?.(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class LG{constructor(e){this._source=e,this._manager=new OG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $n(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new jG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new FG(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class jG{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...d]=a.split(": ");return[l,d.join(": ")]})),{allowRangeRequests:s,suggestedLength:i}=mx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=gx(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Uy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class FG{constructor(e,t,r){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Uy(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const BG=/^[a-z][a-z0-9\-+.]+:/i;function $G(n){if(BG.test(n))return new URL(n);const e=Ml.get("url");return new URL(e.pathToFileURL(n))}function yM(n,e,t){return n.protocol==="http:"?Ml.get("http").request(n,{headers:e},t):Ml.get("https").request(n,{headers:e},t)}class UG{constructor(e){this.source=e,this.url=$G(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=px(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new HG(this):new zG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new WG(this,e,t):new VG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class wM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class bM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class zG extends wM{constructor(e){super(e);const t=Object.fromEntries(e.headers),r=s=>{if(s.statusCode===404){const d=new gu(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(s);const i=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=mx({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=gx(i)};this._request=yM(this._url,t,r),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class VG extends bM{constructor(e,t,r){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${r-1}`;const i=a=>{if(a.statusCode===404){const l=new gu(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=yM(this._url,s,i),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class HG extends wM{constructor(e){super(e);const t=Ml.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new gu(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class WG extends bM{constructor(e,t,r){super(e);const s=Ml.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}}const qG=1e5,os=30,GG=.8;class Dr{#e=Promise.withResolvers();#t=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#i=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#v=[];#g=new WeakMap;#m=null;static#y=new Map;static#b=new Map;static#E=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:i,pageX:a,pageY:l}=r.rawDims;this.#m=[1,0,0,-1,-a,l+i],this.#c=s,this.#l=i,Dr.#P(),au(t,r),this.#e.promise.finally(()=>{Dr.#A.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Br.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#h,t.styles),this.#O(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),Dr.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==this.#d&&(t?.(),this.#d=s,au(this.#a,{rotation:s})),r!==this.#o){t?.(),this.#o=r;const i={div:null,properties:null,ctx:Dr.#C(this.#i)};for(const a of this.#v)i.properties=this.#g.get(a),i.div=a,this.#_(i)}}cancel(){const e=new vu("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#v}get textContentItemsStr(){return this.#p}#O(e){if(this.#n)return;this.#r.ctx??=Dr.#C(this.#i);const t=this.#v,r=this.#p;for(const s of e){if(t.length>qG){mt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const i=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id!==null&&this.#t.setAttribute("id",`${s.id}`),i.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(s.str),this.#k(s)}}#k(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#v.push(t);const s=Ve.transform(this.#m,e.transform);let i=Math.atan2(s[1],s[0]);const a=this.#h[e.fontName];a.vertical&&(i+=Math.PI/2);let l=this.#s&&a.fontSubstitution||a.fontFamily;l=Dr.fontFamilyMap.get(l)||l;const d=Math.hypot(s[2],s[3]),h=d*Dr.#I(l,this.#i);let f,g;i===0?(f=s[4],g=s[5]-h):(f=s[4]+h*Math.sin(i),g=s[5]-h*Math.cos(i));const v="calc(var(--scale-factor)*",_=t.style;this.#t===this.#a?(_.left=`${(100*f/this.#c).toFixed(2)}%`,_.top=`${(100*g/this.#l).toFixed(2)}%`):(_.left=`${v}${f.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(Dr.#S*d).toFixed(2)}px)`,_.fontFamily=l,r.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(S=!0)}if(S&&(r.canvasWidth=a.vertical?e.height:e.width),this.#g.set(t,r),this.#r.div=t,this.#r.properties=r,this.#_(this.#r),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#_(e){const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(Dr.#S>1&&(a=`scale(${1/Dr.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:d,fontSize:h}=r;Dr.#T(s,h*this.#o,l);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${d*this.#o/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#C(e=null){let t=this.#b.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#T(e,t,r){const s=this.#E.get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)}static#P(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t){const r=this.#y.get(e);if(r)return r;const s=this.#C(t);s.canvas.width=s.canvas.height=os,this.#T(s,os,e);const i=s.measureText("");let a=i.fontBoundingBoxAscent,l=Math.abs(i.fontBoundingBoxDescent);if(a){const f=a/(a+l);return this.#y.set(e,f),s.canvas.width=s.canvas.height=0,f}s.strokeStyle="red",s.clearRect(0,0,os,os),s.strokeText("g",0,0);let d=s.getImageData(0,0,os,os).data;l=0;for(let f=d.length-1-3;f>=0;f-=4)if(d[f]>0){l=Math.ceil(f/4/os);break}s.clearRect(0,0,os,os),s.strokeText("A",0,os),d=s.getImageData(0,0,os,os).data,a=0;for(let f=0,g=d.length;f<g;f+=4)if(d[f]>0){a=os-Math.floor(f/4/os);break}s.canvas.width=s.canvas.height=0;const h=a?a/(a+l):GG;return this.#y.set(e,h),h}}class sm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(sm.shouldBuildText(l))i?.attributes?.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)s(d)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const KG=65536,YG=100,XG=5e3,QG=Sr?cG:oG,JG=Sr?uG:uM,ZG=Sr?lG:aG,e8=Sr?dG:fM;function t8(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new vx,{docId:t}=e,r=n.url?n8(n.url):null,s=n.data?r8(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,d=n.range instanceof _M?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:KG;let f=n.worker instanceof vh?n.worker:null;const g=n.verbosity,v=typeof n.docBaseUrl=="string"&&!$y(n.docBaseUrl)?n.docBaseUrl:null,_=typeof n.cMapUrl=="string"?n.cMapUrl:null,S=n.cMapPacked!==!1,x=n.CMapReaderFactory||JG,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,P=n.StandardFontDataFactory||e8,M=n.stopAtErrors!==!0,R=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,O=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Sr,F=typeof n.isChrome=="boolean"?n.isChrome:!Br.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,$=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,W=typeof n.disableFontFace=="boolean"?n.disableFontFace:Sr,K=n.fontExtraProperties===!0,ce=n.enableXfa===!0,pe=n.ownerDocument||globalThis.document,ue=n.disableRange===!0,fe=n.disableStream===!0,ne=n.disableAutoFetch===!0,H=n.pdfBug===!0,q=n.CanvasFactory||QG,te=n.FilterFactory||ZG,z=n.enableHWA===!0,re=d?d.length:n.length??NaN,Z=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Sr&&!W,B=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===uM&&P===fM&&_&&E&&kp(_,document.baseURI)&&kp(E,document.baseURI);n.canvasFactory&&MC("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&MC("`filterFactory`-instance option, please use `FilterFactory` instead.");const X=null;jq(g);const ae={canvasFactory:new q({ownerDocument:pe,enableHWA:z}),filterFactory:new te({docId:t,ownerDocument:pe}),cMapReaderFactory:B?null:new x({baseUrl:_,isCompressed:S}),standardFontDataFactory:B?null:new P({baseUrl:E})};if(!f){const Pe={verbosity:g,port:Fp.workerPort};f=Pe.port?vh.fromPort(Pe):new vh(Pe),e._worker=f}const ye={docId:t,apiVersion:"4.8.69",data:s,password:l,disableAutoFetch:ne,rangeChunkSize:h,length:re,docBaseUrl:v,enableXfa:ce,evaluatorOptions:{maxImageSize:R,disableFontFace:W,ignoreErrors:M,isEvalSupported:I,isOffscreenCanvasSupported:O,isChrome:F,canvasMaxAreaInBytes:$,fontExtraProperties:K,useSystemFonts:Z,cMapUrl:B?_:null,standardFontDataUrl:B?E:null}},Me={disableFontFace:W,fontExtraProperties:K,ownerDocument:pe,pdfBug:H,styleElement:X,loadingParams:{disableAutoFetch:ne,enableXfa:ce}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pe=f.messageHandler.sendWithPromise("GetDocRequest",ye,s?[s.buffer]:null);let ve;if(d)ve=new TG(d,{disableRange:ue,disableStream:fe});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Ne;Sr?Ne=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&kp(r)?VC:UG:Ne=kp(r)?VC:LG,ve=new Ne({url:r,length:re,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:ue,disableStream:fe})}return Pe.then(Ne=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const He=new Tp(t,Ne,f.port),Ye=new a8(He,e,ve,Me,ae);e._transport=Ye,He.send("Ready",null)})}).catch(e._capability.reject),e}function n8(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Sr&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function r8(n){if(Sr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Fy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function HC(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class vx{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${vx.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class _M{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){en("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class s8{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class i8{#e=null;#t=!1;constructor(e,t,r,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new RC:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new xM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new vm({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=wl.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:g=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(r,s,f,g),{renderingIntent:_,cacheKey:S}=v;this.#t=!1,this.#s(),l||=this._transport.getOptionalContentConfig(_);let x=this._intentStates.get(S);x||(x=Object.create(null),this._intentStates.set(S,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(_&Ts.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=I=>{x.renderTasks.delete(M),(this._maybeCleanupAfterRender||E)&&(this.#t=!0),this.#n(!E),I?(M.capability.reject(I),this._abortOperatorList({intentState:x,reason:I instanceof Error?I:new Error(I)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new hh({callback:P,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(x.renderTasks||=new Set).add(M);const R=M.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([I,O])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(O.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:I,optionalContentConfig:O}),M.operatorListChanged()}).catch(P),R}getOperatorList({intent:e="display",annotationMode:t=wl.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>sm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:d,done:h}){if(h){r(l);return}l.lang??=d.lang,Object.assign(l.styles,d.styles),l.items.push(...d.items),i()},s)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#s(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new RC),t}#n(e=!1){if(this.#s(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},XG),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#s(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#n(!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ox){let s=YG;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new vu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class o8{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if(r?.signal instanceof AbortSignal){const{signal:i}=r;if(i.aborted){mt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var ey,Zc,eu,yh,Rv,wh,Mv;const nn=class nn{constructor({name:e=null,port:t=null,verbosity:r=Fq()}={}){Gd(this,yh);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Mi(nn,eu)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Mi(nn,eu)||sp(nn,eu,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Sr?Promise.all([Ml.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Tp("main","worker",e),this._messageHandler.on("ready",function(){}),qg(this,yh,Rv).call(this)}_initialize(){if(Mi(nn,Zc)||Mi(nn,wh,Mv)){this._setupFakeWorker();return}let{workerSrc:e}=nn;try{nn._isSameOrigin(window.location.href,e)||(e=nn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Tp("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",l=>{if(i.abort(),this.destroyed||!l){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,qg(this,yh,Rv).call(this)}),r.on("ready",l=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};a();return}catch{Ly("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Mi(nn,Zc)||(mt("Setting up fake worker."),sp(nn,Zc,!0)),nn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new o8;this._port=t;const r=`fake${$x(nn,ey)._++}`,s=new Tp(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new Tp(r,r+"_worker",t),qg(this,yh,Rv).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Mi(nn,eu)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=Mi(this,eu)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new nn(e)}static get workerSrc(){if(Fp.workerSrc)return Fp.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>Mi(this,wh,Mv)?Mi(this,wh,Mv):(await import(this.workerSrc)).WorkerMessageHandler)())}};ey=new WeakMap,Zc=new WeakMap,eu=new WeakMap,yh=new WeakSet,Rv=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wh=new WeakSet,Mv=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Gd(nn,wh),Gd(nn,ey,0),Gd(nn,Zc,!1),Gd(nn,eu),Sr&&(sp(nn,Zc,!0),Fp.workerSrc||="./pdf.worker.mjs"),nn._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const s=new URL(t,r);return r.origin===s.origin},nn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let vh=nn;class a8{#e=new Map;#t=new Map;#n=new Map;#s=new Map;#i=null;constructor(e,t,r,s,i){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xM,this.fontLoader=new sG({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const r=this.#e.get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return _t(this,"annotationStorage",new dx)}getRenderingIntent(e,t=wl.ENABLE,r=null,s=!1,i=!1){let a=Ts.DISPLAY,l=Pb;switch(e){case"any":a=Ts.ANY;break;case"display":break;case"print":a=Ts.PRINT;break;default:mt(`getRenderingIntent - invalid intent: ${e}`)}const d=a&Ts.PRINT&&r instanceof aM?r:this.annotationStorage;switch(t){case wl.DISABLE:a+=Ts.ANNOTATIONS_DISABLE;break;case wl.ENABLE:break;case wl.ENABLE_FORMS:a+=Ts.ANNOTATIONS_FORMS;break;case wl.ENABLE_STORAGE:a+=Ts.ANNOTATIONS_STORAGE,l=d.serializable;break;default:mt(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Ts.IS_EDITING),i&&(a+=Ts.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[a,l.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Dr.cleanup(),this._networkStream?.cancelAllRequests(new vu("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{$n(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}$n(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{$n(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){s.close();return}$n(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new s8(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new Eb(r.message,r.code);break;case"InvalidPDFException":s=new rM(r.message);break;case"MissingPDFException":s=new gu(r.message);break;case"UnexpectedResponseException":s=new jy(r.message,r.status);break;case"UnknownErrorException":s=new kb(r.message,r.details);break;default:en("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",r=>{if(this.#i=Promise.withResolvers(),t.onPassword){const s=i=>{i instanceof Error?this.#i.reject(i):this.#i.resolve({password:i})};try{t.onPassword(s,r.code)}catch(i){this.#i.reject(i)}}else this.#i.reject(new Eb(r.message,r.code));return this.#i.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:d}=this._params;if("error"in i){const v=i.error;mt(`Error during font loading: ${v}`),this.commonObjs.resolve(r,v);break}const h=d&&globalThis.FontInspector?.enabled?(v,_)=>globalThis.FontInspector.fontAdded(v,_):null,f=new iG(i,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:g}=i;$n(g,"The imageRef must be defined.");for(const v of this.#t.values())for(const[,_]of v.objs)if(_?.ref===g)return _.dataLen?(this.commonObjs.resolve(r,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(r)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(i){case"Image":l.objs.resolve(r,a),a?.dataLen>Dq&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#s.set(i.refStr,e);const a=new i8(t,i,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,s),s}getPageIndex(e){return HC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new kG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new CG(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Dr.cleanup()}}cachedPageNumber(e){if(!HC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}const wv=Symbol("INITIAL_DATA");class xM{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:wv}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const r=this.#e[e];if(!r||r.data===wv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==wv}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==wv&&(yield[e,t])}}}class l8{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class hh{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:v=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new l8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(hh.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");hh.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:a}=this.params;this.gfx=new gh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),hh.#t.delete(this._canvas),this.callback(e||new ox(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),hh.#t.delete(this._canvas),this.callback())))}}const c8="4.8.69",u8="3634dab10";function WC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function _p(n){return Math.max(0,Math.min(255,255*n))}class qC{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=_p(e),[e,e,e]}static G_HTML([e]){const t=WC(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(_p)}static RGB_HTML(e){return`#${e.map(WC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[_p(1-Math.min(1,e+s)),_p(1-Math.min(1,r+s)),_p(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,l=Math.min(s,i,a);return["CMYK",s,i,a,l]}}class d8{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){en("Abstract method `_createSVG` called.")}}class yx extends d8{_createSVG(e){return document.createElementNS(ha,e)}}class SM{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of r.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}l&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const l=i!=="richText",d=e.div;if(d.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=g}l&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);a.append(g),l&&sm.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const f=[[s,-1,a]];for(;f.length>0;){const[g,v,_]=f.at(-1);if(v+1===g.children.length){f.pop();continue}const S=g.children[++f.at(-1)[1]];if(S===null)continue;const{name:x}=S;if(x==="#text"){const P=document.createTextNode(S.value);h.push(P),_.append(P);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,x):document.createElement(x);if(_.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:t,intent:i,linkService:r}),S.children?.length>0)f.push([S,-1,E]);else if(S.value){const P=document.createTextNode(S.value);l&&sm.shouldBuildText(x)&&h.push(P),E.append(P)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const wm=1e3,h8=9,lu=new WeakSet;function ba(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class f8{static create(e){switch(e.data.annotationType){case Fn.LINK:return new AM(e);case Fn.TEXT:return new p8(e);case Fn.WIDGET:switch(e.data.fieldType){case"Tx":return new m8(e);case"Btn":return e.data.radioButton?new CM(e):e.data.checkBox?new v8(e):new y8(e);case"Ch":return new w8(e);case"Sig":return new g8(e)}return new yu(e);case Fn.POPUP:return new Db(e);case Fn.FREETEXT:return new EM(e);case Fn.LINE:return new _8(e);case Fn.SQUARE:return new x8(e);case Fn.CIRCLE:return new S8(e);case Fn.POLYLINE:return new kM(e);case Fn.CARET:return new C8(e);case Fn.INK:return new wx(e);case Fn.POLYGON:return new A8(e);case Fn.HIGHLIGHT:return new TM(e);case Fn.UNDERLINE:return new E8(e);case Fn.SQUIGGLY:return new k8(e);case Fn.STRIKEOUT:return new T8(e);case Fn.STAMP:return new PM(e);case Fn.FILEATTACHMENT:return new P8(e);default:return new Sn(e)}}}class Sn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Sn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#s(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:d}}}}=this;r?.splice(0,4,...e);const{width:h,height:f}=ba(e);t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+d)/a}%`,s===0?(t.width=`${100*h/i}%`,t.height=`${100*f/a}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof yu||(i.tabIndex=wm);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Db){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,i),i}const{width:l,height:d}=ba(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(x>0||E>0){const M=`calc(${x}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=M}else if(this instanceof CM){const M=`calc(${l}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;a.borderRadius=M}switch(t.borderStyle.style){case wp.SOLID:a.borderStyle="solid";break;case wp.DASHED:a.borderStyle="dashed";break;case wp.BEVELED:mt("Unimplemented border style: beveled");break;case wp.INSET:mt("Unimplemented border style: inset");break;case wp.UNDERLINE:a.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(this.#t=!0,a.borderColor=Ve.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):a.borderWidth=0}const h=Ve.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:g,pageX:v,pageY:_}=s.rawDims;a.left=`${100*(h[0]-v)/f}%`,a.top=`${100*(h[1]-_)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(a.width=`${100*l/f}%`,a.height=`${100*d/g}%`):this.setRotation(S,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=ba(this.data.rect);let l,d;e%180===0?(l=100*i/r,d=100*a/s):(l=100*a/r,d=100*i/s),t.style.width=`${l}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],l=i.slice(1);s.target.style[r]=qC[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:qC[`${a}_rgb`](l)})};return _t(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||r[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const l={detail:{[s]:i},target:e};a(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,E,P,M]=e.subarray(2,6);if(s===x&&i===E&&t===P&&r===M)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:x,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=s-t,h=i-r,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=f.createElement("defs");g.append(v);const _=f.createElement("clipPath"),S=`clippath_${this.data.id}`;_.setAttribute("id",S),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let x=2,E=e.length;x<E;x+=8){const P=e[x],M=e[x+1],R=e[x+2],I=e[x+3],O=f.createElement("rect"),F=(R-t)/d,$=(i-M)/h,W=(P-R)/d,K=(M-I)/h;O.setAttribute("x",F),O.setAttribute("y",$),O.setAttribute("width",W),O.setAttribute("height",K),_.append(O),l?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${$}" width="${W}" height="${K}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=this.#n=new Db({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){en("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:l}of s){if(i===-1||a===t)continue;const d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!lu.has(h)){mt(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:d,domElement:h})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&lu.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class AM extends Sn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action),s=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(this.#n(r,e.setOCGState),s=!0):e.dest?(this._bindLink(r,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const i=r.get(s);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:s,refs:i,include:a}=t,l=[];if(s.length!==0||i.length!==0){const f=new Set(i);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:_}of v)f.add(_)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===a&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const d=this.annotationStorage,h=[];for(const f of l){const{id:g}=f;switch(h.push(g),f.type){case"text":{const _=f.defaultValue||"";d.setValue(g,{value:_});break}case"checkbox":case"radiobutton":{const _=f.defaultValue===f.exportValues;d.setValue(g,{value:_});break}case"combobox":case"listbox":{const _=f.defaultValue||"";d.setValue(g,{value:_});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!lu.has(v)){mt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class p8 extends Sn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class yu extends Sn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Br.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}})})}_setEventListeners(e,t,r,s){for(const[i,a]of r)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,i,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||h8,i=e.style;let a;const l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(h/(Pw*s))||1,g=h/f;a=Math.min(s,d(g/Pw))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,d(h/Pw))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=Ve.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class m8 extends yu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let i=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&i.length>a&&(i=i.slice(0,a));let l=s.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const d={userValue:i,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??i,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",l??i),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),lu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=wm,this._setRequired(r,this.data.required),a&&(r.maxLength=a),r.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";r.value=d.userValue=g,d.formattedValue=null});let h=f=>{const{formattedValue:g}=d;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{if(d.focused)return;const{target:v}=g;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(_){d.userValue=_.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:S}=_.detail;d.formattedValue=S,S!=null&&_.target!==document.activeElement&&(_.target.value=S),e.setValue(t,{formattedValue:S})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:S}=_.detail,{target:x}=_;if(S===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",S);let E=d.userValue;!E||E.length<=S||(E=E.slice(0,S),x.value=d.userValue=E,e.setValue(t,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),r.addEventListener("keydown",g=>{d.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:_}=g.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=h;h=null,r.addEventListener("blur",g=>{if(!d.focused||!g.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=g.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),f(g)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",g=>{d.lastCommittedValue=null;const{data:v,target:_}=g,{value:S,selectionStart:x,selectionEnd:E}=_;let P=x,M=E;switch(g.inputType){case"deleteWordBackward":{const R=S.substring(0,x).match(/\w*[^\w]*$/);R&&(P-=R[0].length);break}case"deleteWordForward":{const R=S.substring(x).match(/^[^\w]*\w*/);R&&(M+=R[0].length);break}case"deleteContentBackward":x===E&&(P-=1);break;case"deleteContentForward":x===E&&(M+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:P,selEnd:M}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/a;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class g8 extends yu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class v8 extends yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return lu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=wm,i.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(r,{value:d})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(r,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class CM extends yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(lu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=wm,i.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r))e.setValue(h.id,{value:!1});e.setValue(r,{value:d})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const d={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const v=f&&g.id===r;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class y8 extends AM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class w8 extends yu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");lu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=wm;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,r.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),s.append(g)}let a=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),a=()=>{f.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=f=>{const g=f?"value":"textContent",{options:v,multiple:_}=s;return _?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=l(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const g={value(v){a?.();const _=v.detail.value,S=new Set(Array.isArray(_)?_:[_]);for(const x of s.options)x.selected=S.has(x.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const _=s.options,S=v.detail.remove;_[S].selected=!1,s.remove(S),_.length>0&&Array.prototype.findIndex.call(_,E=>E.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(v){const{index:_,displayValue:S,exportValue:x}=v.detail.insert,E=s.children[_],P=document.createElement("option");P.textContent=S,P.value=x,E?E.before(P):s.append(P),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},items(v){const{items:_}=v.detail;for(;s.length!==0;)s.remove(0);for(const S of _){const{displayValue:x,exportValue:E}=S,P=document.createElement("option");P.textContent=x,P.value=E,s.append(P)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const S of v.target.options)S.selected=_.has(S.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,f)}),s.addEventListener("input",f=>{const g=l(!0),v=l(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Db extends Sn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Sn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new b8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${ix}${r}`).join(",")),this.container}}class b8{#e=this.#O.bind(this);#t=this.#T.bind(this);#n=this.#C.bind(this);#s=this.#_.bind(this);#i=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#v=null;#g=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:l,parent:d,rect:h,parentRect:f,open:g}){this.#r=e,this.#g=s,this.#l=a,this.#v=l,this.#a=d,this.#i=t,this.#f=h,this.#d=f,this.#u=r,this.#c=iM.toDateObject(i),this.trigger=r.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#s),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#t),v.classList.add("popupTriggerArea");for(const v of r)v.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,g&&this.#_()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#i){const i=e.style.outlineColor=Ve.makeHexColor(...this.#i);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=Ve.makeHexColor(...this.#i.map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#c){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(i)}const s=this.#b;if(s)SM.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(this.#l);e.append(i)}this.#r.append(e)}get#b(){const e=this.#v,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#v.html||null}get#E(){return this.#b?.attributes?.style?.fontSize||0}get#S(){return this.#b?.attributes?.style?.color||null}#A(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#S,fontSize:this.#E?`calc(${this.#E}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const l=s[i];r.append(document.createTextNode(l)),i<a-1&&r.append(document.createElement("br"))}return r}#O(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#_()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#v},e&&(this.#p=null),t&&(this.#v=this.#A(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#v}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#k(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=this.#a;let a=!!this.#d,l=a?this.#d:this.#f;for(const S of this.#u)if(!l||Ve.intersect(S.data.rect,l)!==null){l=S.data.rect,a=!0;break}const d=Ve.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,g=d[0]+f,v=d[1];this.#p=[100*(g-s)/t,100*(v-i)/r];const{style:_}=this.#r;_.left=`${this.#p[0]}%`,_.top=`${this.#p[1]}%`}#_(){this.#o=!this.#o,this.#o?(this.#C(),this.#r.addEventListener("click",this.#s),this.#r.addEventListener("keydown",this.#e)):(this.#T(),this.#r.removeEventListener("click",this.#s),this.#r.removeEventListener("keydown",this.#e))}#C(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#T(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#r.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#C(),this.#y=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class EM extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ft.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _8 extends Sn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=this.#e=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class x8 extends Sn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",r-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class S8 extends Sn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",r/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",r/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kM extends Sn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:s}}=this;if(!t)return this.container;const{width:i,height:a}=ba(e),l=this.svgFactory.create(i,a,!0);let d=[];for(let f=0,g=t.length;f<g;f+=2){const v=t[f]-e[0],_=e[3]-t[f+1];d.push(`${v},${_}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class A8 extends kM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class C8 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class wx extends Sn{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ft.HIGHLIGHT:ft.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:s}}=this,{width:i,height:a}=ba(e),l=this.svgFactory.create(i,a,!0);for(const d of t){let h=[];for(let g=0,v=d.length;g<v;g+=2){const _=d[g]-e[0],S=e[3]-d[g+1];h.push(`${_},${S}`)}h=h.join(" ");const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),l.append(f)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class TM extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ft.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class E8 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class k8 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class T8 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class PM extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ft.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class P8 extends Sn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:s}=Br.platform;return e.addEventListener("keydown",i=>{i.key==="Enter"&&(s?i.metaKey:i.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class R8{#e=null;#t=null;#n=new Map;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:l}){this.div=e,this.#e=t,this.#t=r,this.#s=l||null,this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t){const r=e.firstChild||e,s=r.id=`${ix}${t}`,i=await this.#s?.getAriaAttributes(s);if(i)for(const[a,l]of i)r.setAttribute(a,l);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;au(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new yx,annotationStorage:e.annotationStorage||new dx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Fn.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:g}=ba(a.rect);if(f<=0||g<=0)continue}i.data=a;const d=f8.create(i);if(!d.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(d):s.set(a.popupRef,[d])}const h=d.render();a.hidden&&(h.style.visibility="hidden"),await this.#i(h,a.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,au(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const bv=/\r\n?|\n/g;class Bn extends rt{#e;#t="";#n=`${this.id}-editor`;#s=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Bn.prototype,t=i=>i.isEmpty(),r=Rl.TRANSLATE_SMALL,s=Rl.TRANSLATE_BIG;return _t(this,"_keyboardManager",new ym([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=ft.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Bn._defaultColor||rt._defaultLineColor,this.#i=e.fontSize||Bn._defaultFontSize}static initialize(e,t){rt.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case st.FREETEXT_SIZE:Bn._defaultFontSize=t;break;case st.FREETEXT_COLOR:Bn._defaultColor=t;break}}updateParams(e,t){switch(e){case st.FREETEXT_SIZE:this.#r(t);break;case st.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[st.FREETEXT_SIZE,Bn._defaultFontSize],[st.FREETEXT_COLOR,Bn._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[st.FREETEXT_SIZE,this.#i],[st.FREETEXT_COLOR,this.#e]]}#r(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#i)*this.parentScale),this.#i=s,this.#u()},r=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=s=>{this.#e=this.editorDiv.style.color=s},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Bn._internalPadding*e,-(Bn._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ft.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Bn.#a(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:i}=this,a=i.style.display,l=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",s.div.append(this.div),r=i.getBoundingClientRect(),i.remove(),i.style.display=a,i.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=s=>{if(this.#t=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Bn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Zv(this,this.div,["dblclick","keydown"]),this.width){const[s,i]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,d]=this.getInitialTranslation();[l,d]=this.pageTranslationToScreen(l,d);const[h,f]=this.pageDimensions,[g,v]=this.pageTranslation;let _,S;switch(this.rotation){case 0:_=e+(a[0]-g)/h,S=t+this.height-(a[1]-v)/f;break;case 90:_=e+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[d,-l];break;case 180:_=e-this.width+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[-l,-d];break;case 270:_=e+(a[0]-g-this.height*f)/h,S=t+(a[1]-v-this.width*h)/f,[l,d]=[-d,l];break}this.setAt(_*s,S*i,l,d)}else this.setAt(e*s,t*i,this.width*s,this.height*i);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(bv,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=Bn.#h(t.getData("text")||"").replaceAll(bv,`
`);if(!s)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const a=i.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),i.collapseToStart();return}const{startContainer:l,startOffset:d}=a,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const _=l.parentElement;if(f.push(l.nodeValue.slice(d).replaceAll(bv,"")),_!==this.editorDiv){let S=h;for(const x of this.editorDiv.childNodes){if(x===_){S=f;continue}S.push(Bn.#a(x))}}h.push(l.nodeValue.slice(0,d).replaceAll(bv,""))}else if(l===this.editorDiv){let _=h,S=0;for(const x of this.editorDiv.childNodes)S++===d&&(_=f),_.push(Bn.#a(x))}this.#t=`${h.join(`
`)}${s}${f.join(`
`)}`,this.#d();const g=new Range;let v=h.reduce((_,S)=>_+S.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const S=_.nodeValue.length;if(v<=S){g.setStart(_,v),g.setEnd(_,v);break}v-=S}i.removeAllRanges(),i.addRange(g)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll(""," ")}static#h(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let s=null;if(e instanceof EM){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:d,rotation:h,id:f,popupRef:g},textContent:v,textPosition:_,parent:{page:{pageNumber:S}}}=e;if(!v||v.length===0)return null;s=e={annotationType:ft.FREETEXT,color:Array.from(l),fontSize:a,value:v.join(`
`),position:_,pageIndex:S-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:g}}const i=await super.deserialize(e,t,r);return i.#i=e.fontSize,i.#e=Ve.makeHexColor(...e.color),i.#t=Bn.#h(e.value),i.annotationElementId=e.id||null,i._initialData=s,i}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Bn._internalPadding*this.parentScale,r=this.getRect(t,t),s=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),i={annotationType:ft.FREETEXT,color:s,fontSize:this.#i,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?i:this.annotationElementId&&!this.#p(i)?null:(i.id=this.annotationElementId,i)}#p(e){const{value:t,fontSize:r,color:s,pageIndex:i}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((a,l)=>a!==s[l])||e.pageIndex!==i}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const i of this.#t.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}const s=Bn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class RM{toSVGPath(){en("Abstract method `toSVGPath` must be implemented.")}get box(){en("Abstract getter `box` must be implemented.")}serialize(e,t){en("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){en("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){en("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Jc{#e;#t=[];#n;#s;#i=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#v=Jc.#p+Jc.#f;constructor({x:e,y:t},r,s,i,a,l=0){this.#e=r,this.#o=i*s,this.#s=a,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=l,this.#a=Jc.#p*s,this.#u=Jc.#v*s,this.#d=s,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[r,s,i,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/i,(this.#c+(e[1]-t[1])/2-s)/a,(this.#l+(t[0]-e[0])/2-r)/i,(this.#c+(t[1]-e[1])/2-s)/a]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,s,i,a]=this.#e;let[l,d,h,f]=this.#r.subarray(8,12);const g=e-h,v=t-f,_=Math.hypot(g,v);if(_<this.#u)return!1;const S=_-this.#a,x=S/_,E=x*g,P=x*v;let M=l,R=d;l=h,d=f,h+=E,f+=P,this.#h?.push(e,t);const I=-P/S,O=E/S,F=I*this.#o,$=O*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+F,f+$],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-F,f-$],16),isNaN(this.#r[6])?(this.#i.length===0&&(this.#r.set([l+F,d+$],2),this.#i.push(NaN,NaN,NaN,NaN,(l+F-r)/i,(d+$-s)/a),this.#r.set([l-F,d-$],14),this.#t.push(NaN,NaN,NaN,NaN,(l-F-r)/i,(d-$-s)/a)),this.#r.set([M,R,l,d,h,f],6),!this.isEmpty()):(this.#r.set([M,R,l,d,h,f],6),Math.abs(Math.atan2(R-d,M-l)-Math.atan2(P,E))<Math.PI/2?([l,d,h,f]=this.#r.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((l+h)/2-r)/i,((d+f)/2-s)/a),[l,d,M,R]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((M+l)/2-r)/i,((R+d)/2-s)/a),!0):([M,R,l,d,h,f]=this.#r.subarray(0,6),this.#i.push(((M+5*l)/6-r)/i,((R+5*d)/6-s)/a,((5*l+h)/6-r)/i,((5*d+f)/6-s)/a,((l+h)/2-r)/i,((d+f)/2-s)/a),[h,f,l,d,M,R]=this.#r.subarray(12,18),this.#t.push(((M+5*l)/6-r)/i,((R+5*d)/6-s)/a,((5*l+h)/6-r)/i,((5*d+f)/6-s)/a,((l+h)/2-r)/i,((d+f)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#b(r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#y(r),r.join(" ")}#m(){const[e,t,r,s]=this.#e,[i,a,l,d]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-t)/s} L${(this.#r[4]-e)/r} ${(this.#r[5]-t)/s} L${i} ${a} L${l} ${d} L${(this.#r[16]-e)/r} ${(this.#r[17]-t)/s} L${(this.#r[14]-e)/r} ${(this.#r[15]-t)/s} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,r,s,i]=this.#e,a=this.#r.subarray(4,6),l=this.#r.subarray(16,18),[d,h,f,g]=this.#g();e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${d} ${h} L${f} ${g} L${(l[0]-t)/s} ${(l[1]-r)/i}`)}newFreeDrawOutline(e,t,r,s,i,a){return new MM(e,t,r,s,i,a)}getOutlines(){const e=this.#i,t=this.#t,r=this.#r,[s,i,a,l]=this.#e,d=new Float64Array((this.#h?.length??0)+2);for(let g=0,v=d.length-2;g<v;g+=2)d[g]=(this.#h[g]-s)/a,d[g+1]=(this.#h[g+1]-i)/l;if(d[d.length-2]=(this.#l-s)/a,d[d.length-1]=(this.#c-i)/l,isNaN(r[6])&&!this.isEmpty())return this.#E(d);const h=new Float64Array(this.#i.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#A(h,f);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+v],h[f+1]=t[g+v+1],f+=2}return this.#S(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#d,this.#n,this.#s)}#E(e){const t=this.#r,[r,s,i,a]=this.#e,[l,d,h,f]=this.#g(),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(g,e,this.#e,this.#d,this.#n,this.#s)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#A(e,t){const r=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[i,a,l,d]=this.#e,[h,f,g,v]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-a)/d],t),t+=24}}class MM extends RM{#e;#t=null;#n;#s;#i;#r;#l;constructor(e,t,r,s,i,a){super(),this.#l=e,this.#i=t,this.#e=r,this.#r=s,this.#n=i,this.#s=a,this.#a(a);const{x:l,y:d,width:h,height:f}=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-l)/h,e[g+1]=(e[g+1]-d)/f;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-l)/h,t[g+1]=(t[g+1]-d)/f}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,s],i){const a=r-e,l=s-t;let d,h;switch(i){case 0:d=this.#c(this.#l,e,s,a,-l),h=this.#c(this.#i,e,s,a,-l);break;case 90:d=this.#u(this.#l,e,t,a,l),h=this.#u(this.#i,e,t,a,l);break;case 180:d=this.#c(this.#l,r,t,-a,l),h=this.#c(this.#i,r,t,-a,l);break;case 270:d=this.#u(this.#l,r,s,-a,-l),h=this.#u(this.#i,r,s,-a,-l);break}return{outline:Array.from(d),points:[Array.from(h)]}}#c(e,t,r,s,i){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l]*s,a[l+1]=r+e[l+1]*i;return a}#u(e,t,r,s,i){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l+1]*s,a[l+1]=r+e[l]*i;return a}#a(e){const t=this.#l;let r=t[4],s=t[5],i=r,a=s,l=r,d=s,h=r,f=s;const g=e?Math.max:Math.min;for(let E=6,P=t.length;E<P;E+=6){if(isNaN(t[E]))i=Math.min(i,t[E+4]),a=Math.min(a,t[E+5]),l=Math.max(l,t[E+4]),d=Math.max(d,t[E+5]),f<t[E+5]?(h=t[E+4],f=t[E+5]):f===t[E+5]&&(h=g(h,t[E+4]));else{const M=Ve.bezierBoundingBox(r,s,...t.slice(E,E+6));i=Math.min(i,M[0]),a=Math.min(a,M[1]),l=Math.max(l,M[2]),d=Math.max(d,M[3]),f<M[3]?(h=M[2],f=M[3]):f===M[3]&&(h=g(h,M[2]))}r=t[E+4],s=t[E+5]}const v=i-this.#n,_=a-this.#n,S=l-i+2*this.#n,x=d-a+2*this.#n;this.#t={x:v,y:_,width:S,height:x,lastPoint:[h,f]}}get box(){return this.#t}newOutliner(e,t,r,s,i,a=0){return new Jc(e,t,r,s,i,a)}getNewOutline(e,t){const{x:r,y:s,width:i,height:a}=this.#t,[l,d,h,f]=this.#e,g=i*h,v=a*f,_=r*h+l,S=s*f+d,x=this.newOutliner({x:this.#i[0]*g+_,y:this.#i[1]*v+S},this.#e,this.#r,e,this.#s,t??this.#n);for(let E=2;E<this.#i.length;E+=2)x.add({x:this.#i[E]*g+_,y:this.#i[E+1]*v+S});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class GC{#e;#t=[];#n=[];constructor(e,t=0,r=0,s=!0){let i=1/0,a=-1/0,l=1/0,d=-1/0;const h=10**-4;for(const{x:E,y:P,width:M,height:R}of e){const I=Math.floor((E-t)/h)*h,O=Math.ceil((E+M+t)/h)*h,F=Math.floor((P-t)/h)*h,$=Math.ceil((P+R+t)/h)*h,W=[I,F,$,!0],K=[O,F,$,!1];this.#t.push(W,K),i=Math.min(i,I),a=Math.max(a,O),l=Math.min(l,F),d=Math.max(d,$)}const f=a-i+2*r,g=d-l+2*r,v=i-r,_=l-r,S=this.#t.at(s?-1:-2),x=[S[0],S[2]];for(const E of this.#t){const[P,M,R]=E;E[0]=(P-v)/f,E[1]=(M-_)/g,E[2]=(R-_)/g}this.#e={x:v,y:_,width:f,height:g,lastPoint:x}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#r(t)):(this.#l(t),e.push(...this.#c(t)));return this.#s(e)}#s(e){const t=[],r=new Set;for(const a of e){const[l,d,h]=a;t.push([l,d,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),r.add(d),r.add(h)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[l,d,h,f,g]=a;r.delete(a);let v=l,_=d;for(i=[l,h],s.push(i);;){let S;if(r.has(f))S=f;else if(r.has(g))S=g;else break;r.delete(S),[l,d,h,f,g]=S,v!==l&&(i.push(v,_,l,_===d?d:h),v=l),_=_===d?h:d}i.push(v,_)}return new M8(s,this.#e)}#i(e){const t=this.#n;let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1}#r([,e,t]){const r=this.#i(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#i(e);for(let s=r;s<this.#n.length;s++){const[i,a]=this.#n[s];if(i!==e)break;if(i===e&&a===t){this.#n.splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=this.#n[s];if(i!==e)break;if(i===e&&a===t){this.#n.splice(s,1);return}}}#c(e){const[t,r,s]=e,i=[[t,r,s]],a=this.#i(s);for(let l=0;l<a;l++){const[d,h]=this.#n[l];for(let f=0,g=i.length;f<g;f++){const[,v,_]=i[f];if(!(h<=v||_<=d)){if(v>=d){if(_>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,_>h&&i.push([t,h,_])}}}return i}}class M8 extends RM{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,s]=t;e.push(`M${r} ${s}`);for(let i=2;i<t.length;i+=2){const a=t[i],l=t[i+1];a===r?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${a}`),r=a)}e.push("Z")}return e.join(" ")}serialize([e,t,r,s],i){const a=[],l=r-e,d=s-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*l,f[g+1]=s-h[g+1]*d;a.push(f)}return a}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class Nb extends Jc{newFreeDrawOutline(e,t,r,s,i,a){return new I8(e,t,r,s,i,a)}get classNamesForDrawing(){return["highlight","free"]}}class I8 extends MM{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,s,i,a=0){return new Nb(e,t,r,s,i,a)}}class Zs{#e=null;#t=null;#n;#s=null;#i=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new ym([[["Escape","mac+Escape"],Zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Zs.prototype._moveToPrevious],[["Home","mac+Home"],Zs.prototype._moveToBeginning],[["End","mac+End"],Zs.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#d=st.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#d=st.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",Zs.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#v.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#s=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",ti,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of this.#a.highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",Zs.#o[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.setAttribute("aria-selected",s===this.#n),i.addEventListener("click",this.#p.bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#v(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#v(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#v(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#v(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#v(e);return}this.#s.lastChild?.focus()}#f(e){Zs._keyboardManager.exec(this,e)}#v(e){if(this.#m){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#h();this.#e.append(t)}#g(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#a.highlightColors.values();for(const r of this.#s.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class bn extends rt{#e=null;#t=0;#n;#s=null;#i=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#v="";#g;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ft.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=bn.prototype;return _t(this,"_keyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||bn._defaultColor,this.#g=e.thickness||bn._defaultThickness,this.#p=e.opacity||bn._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#v=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#b(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new GC(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;const t=new GC(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:r}=this.#r.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;const s=1.5;if(this.#r=e.getNewOutline(this.#g/2+s,.0025),t>=0)this.#d=t,this.#s=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,bn.#_(this.#a.box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,bn.#_(this.#r.box,f))}const{x:i,y:a,width:l,height:d}=e.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=l,this.height=d;break;case 90:{const[f,g]=this.parentDimensions;this.x=a,this.y=1-i,this.width=l*g/f,this.height=d*f/g;break}case 180:this.x=1-i,this.y=1-a,this.width=l,this.height=d;break;case 270:{const[f,g]=this.parentDimensions;this.x=1-a,this.y=i,this.width=l*g/f,this.height=d*f/g;break}}const{lastPoint:h}=this.#r.box;this.#h=[(h[0]-i)/l,(h[1]-a)/d]}static initialize(e,t){rt.initialize(e,t),bn._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case st.HIGHLIGHT_DEFAULT_COLOR:bn._defaultColor=t;break;case st.HIGHLIGHT_THICKNESS:bn._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case st.HIGHLIGHT_COLOR:this.#E(t);break;case st.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[st.HIGHLIGHT_DEFAULT_COLOR,bn._defaultColor],[st.HIGHLIGHT_THICKNESS,bn._defaultThickness]]}get propertiesToUpdate(){return[[st.HIGHLIGHT_COLOR,this.color||bn._defaultColor],[st.HIGHLIGHT_THICKNESS,this.#g||bn._defaultThickness],[st.HIGHLIGHT_FREE,this.#o]]}#E(e){const t=(i,a)=>{this.color=i,this.parent?.drawLayer.changeColor(this.#d,i),this.#i?.updateColor(i),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#d,a)},r=this.color,s=this.#p;this.addCommands({cmd:t.bind(this,e,bn._defaultOpacity),undo:t.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,r=s=>{this.#g=s,this.#A(s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#i=new Zs({editor:this}),e.addColorPicker(this.#i)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#O(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#O():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#o)return;this.#b({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#O(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#s}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#s))}static#_({x:e,y:t,width:r,height:s},i){switch(i){case 90:return{x:1-t-s,y:e,width:s,height:r};case 180:return{x:1-e-r,y:1-t-s,width:r,height:s};case 270:return{x:t,y:1-e-r,width:s,height:r}}return{x:e,y:t,width:r,height:s}}rotate(e){const{drawLayer:t}=this.parent;let r;this.#o?(e=(e-this.rotation+360)%360,r=bn.#_(this.#a.box,e)):r=bn.#_(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,bn.#_(this.#r.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#v&&(e.setAttribute("aria-label",this.#v),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s;const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),Zv(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#C(e){bn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#T(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#I(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,s]=this.pageTranslation,i=this.#n,a=new Float32Array(i.length*8);let l=0;for(const{x:d,y:h,width:f,height:g}of i){const v=d*e+r,_=(1-h-g)*t+s;a[l]=a[l+4]=v,a[l+1]=a[l+3]=_,a[l+2]=a[l+6]=v+f*e,a[l+5]=a[l+7]=_+g*t,l+=8}return a}#x(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:s,y:i}){const{x:a,y:l,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),v=S=>{S.preventDefault(),S.stopPropagation()},_=S=>{f.abort(),this.#D(e,S)};window.addEventListener("blur",_,{signal:g}),window.addEventListener("pointerup",_,{signal:g}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ti,{signal:g}),r.addEventListener("pointermove",this.#w.bind(this,e),{signal:g}),this._freeHighlight=new Nb({x:s,y:i},[a,l,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let s=null;if(e instanceof TM){const{data:{quadPoints:S,rect:x,rotation:E,id:P,color:M,opacity:R,popupRef:I},parent:{page:{pageNumber:O}}}=e;s=e={annotationType:ft.HIGHLIGHT,color:Array.from(M),opacity:R,quadPoints:S,boxes:null,pageIndex:O-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:I}}else if(e instanceof wx){const{data:{inkLists:S,rect:x,rotation:E,id:P,color:M,borderStyle:{rawWidth:R},popupRef:I},parent:{page:{pageNumber:O}}}=e;s=e={annotationType:ft.HIGHLIGHT,color:Array.from(M),thickness:R,inkLists:S,boxes:null,pageIndex:O-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:I}}const{color:i,quadPoints:a,inkLists:l,opacity:d}=e,h=await super.deserialize(e,t,r);h.color=Ve.makeHexColor(...i),h.#p=d||1,l&&(h.#g=e.thickness),h.annotationElementId=e.id||null,h._initialData=s;const[f,g]=h.pageDimensions,[v,_]=h.pageTranslation;if(a){const S=h.#n=[];for(let x=0;x<a.length;x+=8)S.push({x:(a[x]-v)/f,y:1-(a[x+1]-_)/g,width:(a[x+2]-a[x])/f,height:(a[x+1]-a[x+5])/g});h.#y(),h.#k(),h.rotate(h.rotation)}else if(l){h.#o=!0;const S=l[0],x={x:S[0]-v,y:g-(S[1]-_)},E=new Nb(x,[0,0,f,g],1,h.#g/2,!0,.001);for(let R=0,I=S.length;R<I;R+=2)x.x=S[R]-v,x.y=g-(S[R+1]-_),E.add(x);const{id:P,clipPathId:M}=t.drawLayer.draw(E,h.color,h._defaultOpacity,!0);h.#b({highlightOutlines:E.getOutlines(),highlightId:P,clipPathId:M}),h.#k()}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=rt._colorManager.convert(this.color),s={annotationType:ft.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#g,quadPoints:this.#I(),outlines:this.#x(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(s)?null:(s.id=this.annotationElementId,s)}#N(e){const{color:t}=this._initialData;return e.color.some((r,s)=>r!==t[s])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class cr extends rt{#e=0;#t=0;#n=null;#s=new Path2D;#i=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ft.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){rt.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case st.INK_THICKNESS:cr._defaultThickness=t;break;case st.INK_COLOR:cr._defaultColor=t;break;case st.INK_OPACITY:cr._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case st.INK_THICKNESS:this.#p(t);break;case st.INK_COLOR:this.#f(t);break;case st.INK_OPACITY:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[st.INK_THICKNESS,cr._defaultThickness],[st.INK_COLOR,cr._defaultColor||rt._defaultLineColor],[st.INK_OPACITY,Math.round(cr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[st.INK_THICKNESS,this.thickness||cr._defaultThickness],[st.INK_COLOR,this.color||cr._defaultColor||rt._defaultLineColor],[st.INK_OPACITY,Math.round(100*(this.opacity??cr._defaultOpacity))]]}#p(e){const t=s=>{this.thickness=s,this.#R()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=s=>{this.color=s,this.#_()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(e){const t=s=>{this.opacity=s,this.#_()};e/=100;const r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#I(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#w()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,r=this.width*e,s=this.height*t;this.setDimensions(r,s)}enableEditMode(){this.#i||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#C())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#T())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#g(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:s,parentScale:i,scaleFactor:a}=this;e.lineWidth=s*i/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${eG(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",ti,{signal:this._uiManager._signal}),this.#T(),this.#r=new AbortController;const r=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#w(),this.thickness||=cr._defaultThickness,this.color||=cr._defaultColor||rt._defaultLineColor,this.opacity??=cr._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#A(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#b(e,t){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===s)return;const i=this.currentPath;let a=this.#s;if(i.push([e,t]),this.#l=!0,i.length<=2){a.moveTo(...i[0]),a.lineTo(e,t);return}i.length===3&&(this.#s=a=new Path2D,a.moveTo(...i[0])),this.#O(a,...i.at(-3),...i.at(-2),e,t)}#E(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#s.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#b(e,t),this.#E();let r;if(this.currentPath.length!==1)r=this.#k();else{const d=[e,t];r=[[d,d.slice(),d.slice(),d]]}const s=this.#s,i=this.currentPath;this.currentPath=[],this.#s=new Path2D;const a=()=>{this.allRawPaths.push(i),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#I(),this.#x()),this.#R())};this.addCommands({cmd:a,undo:l,mustExec:!0})}#A(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(a=>a[0]),s=t.map(a=>a[1]);Math.min(...r)-e,Math.max(...r)+e,Math.min(...s)-e,Math.max(...s)+e;const{ctx:i}=this;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)i.stroke(a);i.stroke(this.#s),i.restore()}#O(e,t,r,s,i,a,l){const d=(t+s)/2,h=(r+i)/2,f=(s+a)/2,g=(i+l)/2;e.bezierCurveTo(d+2*(s-d)/3,h+2*(i-h)/3,f+2*(s-f)/3,g+2*(i-g)/3,f,g)}#k(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[s,i]=e[0];for(r=1;r<e.length-2;r++){const[v,_]=e[r],[S,x]=e[r+1],E=(v+S)/2,P=(_+x)/2,M=[s+2*(v-s)/3,i+2*(_-i)/3],R=[E+2*(v-E)/3,P+2*(_-P)/3];t.push([[s,i],M,R,[E,P]]),[s,i]=[E,P]}const[a,l]=e[r],[d,h]=e[r+1],f=[s+2*(a-s)/3,i+2*(l-i)/3],g=[d+2*(a-d)/3,h+2*(l-h)/3];return t.push([[s,i],f,g,[d,h]]),t}#_(){if(this.isEmpty()){this.#N();return}this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#N();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#i||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#i=!0,this.div.classList.add("disabled"),this.#R(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#C(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#T(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#i||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#b(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#r?.abort(),this.#r=null,this.#C(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",ti)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#I(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#i}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,i,a]=this.#g();if(this.setAt(r,s,0,0),this.setDims(i,a),this.#I(),this.width){const[l,d]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*d),this.setAt(e*l,t*d,this.width*l,this.height*d),this.#c=!0,this.#w(),this.setDims(this.width*l,this.height*d),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#w(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#N()}setDimensions(e,t){const r=Math.round(e),s=Math.round(t);if(this.#d===r&&this.#o===s)return;this.#d=r,this.#o=s,this.canvas.style.visibility="hidden";const[i,a]=this.parentDimensions;this.width=e/i,this.height=t/a,this.fixAndSetPosition(),this.#i&&this.#D(e,t),this.#w(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#D(e,t){const r=this.#U(),s=(e-r)/this.#t,i=(t-r)/this.#e;this.scaleFactor=Math.min(s,i)}#N(){const e=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let r=0,s=e.length;r<s;r++){const[i,a,l,d]=e[r];r===0&&t.moveTo(...i),t.bezierCurveTo(a[0],a[1],l[0],l[1],d[0],d[1])}return t}static#z(e,t,r){const[s,i,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]+=s,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]+s,e[d+1]=f+i}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]+=i;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=a-e[d+1],e[d+1]=l-f}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,r){const[s,i,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]-=s,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]-i,e[d+1]=f-s}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]-=i;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=l-e[d+1],e[d+1]=a-f}break;default:throw new Error("Invalid rotation")}return e}#j(e,t,r,s){const i=[],a=this.thickness/2,l=e*t+a,d=e*r+a;for(const h of this.paths){const f=[],g=[];for(let v=0,_=h.length;v<_;v++){const[S,x,E,P]=h[v];if(S[0]===P[0]&&S[1]===P[1]&&_===1){const ce=e*S[0]+l,pe=e*S[1]+d;f.push(ce,pe),g.push(ce,pe);break}const M=e*S[0]+l,R=e*S[1]+d,I=e*x[0]+l,O=e*x[1]+d,F=e*E[0]+l,$=e*E[1]+d,W=e*P[0]+l,K=e*P[1]+d;v===0&&(f.push(M,R),g.push(M,R)),f.push(I,O,F,$,W,K),g.push(I,O),v===_-1&&g.push(W,K)}i.push({bezier:cr.#z(f,s,this.rotation),points:cr.#z(g,s,this.rotation)})}return i}#F(){let e=1/0,t=-1/0,r=1/0,s=-1/0;for(const i of this.paths)for(const[a,l,d,h]of i){const f=Ve.bezierBoundingBox(...a,...l,...d,...h);e=Math.min(e,f[0]),r=Math.min(r,f[1]),t=Math.max(t,f[2]),s=Math.max(s,f[3])}return[e,r,t,s]}#U(){return this.#i?Math.ceil(this.thickness*this.parentScale):0}#R(e=!1){if(this.isEmpty())return;if(!this.#i){this.#_();return}const t=this.#F(),r=this.#U();this.#t=Math.max(rt.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(rt.MIN_SIZE,t[3]-t[1]);const s=Math.ceil(r+this.#t*this.scaleFactor),i=Math.ceil(r+this.#e*this.scaleFactor),[a,l]=this.parentDimensions;this.width=s/a,this.height=i/l,this.setAspectRatio(s,i);const d=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#w(),this.#_(),this.#d=s,this.#o=i,this.setDims(s,i);const f=e?r/this.scaleFactor/2:0;this.translate(d-this.translationX-f,h-this.translationY-f)}static async deserialize(e,t,r){if(e instanceof wx)return null;const s=await super.deserialize(e,t,r);s.thickness=e.thickness,s.color=Ve.makeHexColor(...e.color),s.opacity=e.opacity;const[i,a]=s.pageDimensions,l=s.width*i,d=s.height*a,h=s.parentScale,f=e.thickness/2;s.#i=!0,s.#d=Math.round(l),s.#o=Math.round(d);const{paths:g,rect:v,rotation:_}=e;for(let{bezier:x}of g){x=cr.#B(x,v,_);const E=[];s.paths.push(E);let P=h*(x[0]-f),M=h*(x[1]-f);for(let I=2,O=x.length;I<O;I+=6){const F=h*(x[I]-f),$=h*(x[I+1]-f),W=h*(x[I+2]-f),K=h*(x[I+3]-f),ce=h*(x[I+4]-f),pe=h*(x[I+5]-f);E.push([[P,M],[F,$],[W,K],[ce,pe]]),P=ce,M=pe}const R=this.#L(E);s.bezierPath2D.push(R)}const S=s.#F();return s.#t=Math.max(rt.MIN_SIZE,S[2]-S[0]),s.#e=Math.max(rt.MIN_SIZE,S[3]-S[1]),s.#D(l,d),s}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=rt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ft.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class bx extends rt{#e=null;#t=null;#n=null;#s=null;#i=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ft.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#i=e.bitmapFile}static initialize(e,t){rt.initialize(e,t)}static get supportedTypes(){return _t(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return _t(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ft.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:s,width:i,height:a,channels:s.length/(i*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const d=l.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#o(s)).finally(()=>this.#h());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#o(s)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=bx.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(s)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#s||this.#i||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[s,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*s,r=this.height*i;else if(t>a*s||r>a*i){const f=Math.min(a*s/t,a*i/r);t*=f,r*=f}const[l,d]=this.parentDimensions;this.setDims(t*l/s,r*d/i),this._uiManager.enableWaiting(!1);const h=this.#l=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#b(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&h.setAttribute("aria-label",this.#r)}copyCanvas(e,t,r=!1){e||(e=224);const{width:s,height:i}=this.#e,a=new Tb;let l=this.#e,d=s,h=i,f=null;if(t){if(s>t||i>t){const F=Math.min(t/s,t/i);d=Math.floor(s*F),h=Math.floor(i*F)}f=document.createElement("canvas");const v=f.width=Math.ceil(d*a.sx),_=f.height=Math.ceil(h*a.sy);this.#a||(l=this.#g(v,_));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let x="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",E="#42414d");const P=15,M=P*a.sx,R=P*a.sy,I=new OffscreenCanvas(M*2,R*2),O=I.getContext("2d");O.fillStyle=x,O.fillRect(0,0,M*2,R*2),O.fillStyle=E,O.fillRect(0,0,M,R),O.fillRect(M,R,M,R),S.fillStyle=S.createPattern(I,"repeat"),S.fillRect(0,0,v,_),S.drawImage(l,0,0,l.width,l.height,0,0,v,_)}let g=null;if(r){let v,_;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,_=l.height;else if(l=this.#e,s>e||i>e){const E=Math.min(e/s,e/i);v=Math.floor(s*E),_=Math.floor(i*E),this.#a||(l=this.#g(v,_))}const x=new OffscreenCanvas(v,_).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,v,_),g={width:v,height:_,data:x.getImageData(0,0,v,_).data}}return{canvas:f,width:d,height:h,imageData:g}}#v(e,t){const[r,s]=this.parentDimensions;this.width=e/r,this.height=t/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const i=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},i)}#g(e,t){const{width:r,height:s}=this.#e;let i=r,a=s,l=this.#e;for(;i>2*e||a>2*t;){const d=i,h=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(i,a);f.getContext("2d").drawImage(l,0,0,d,h,0,0,i,a),l=f.transferToImageBitmap()}return l}#m(e,t){const r=new Tb,s=Math.ceil(e*r.sx),i=Math.ceil(t*r.sy),a=this.#l;if(!a||a.width===s&&a.height===i)return;a.width=s,a.height=i;const l=this.#a?this.#e:this.#g(s,i),d=a.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(l,0,0,l.width,l.height,0,0,s,i)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,s=Math.round(this.width*t*kh.PDF_TO_CSS_UNITS),i=Math.round(this.height*r*kh.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,i);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,i),a.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,r){let s=null;if(e instanceof PM){const{data:{rect:S,rotation:x,id:E,structParent:P,popupRef:M},container:R,parent:{page:{pageNumber:I}}}=e,O=R.querySelector("canvas"),F=r.imageManager.getFromCanvas(R.id,O);O.remove();const $=(await t._structTree.getAriaAttributes(`${ix}${E}`))?.get("aria-label")||"";s=e={annotationType:ft.STAMP,bitmapId:F.id,bitmap:F.bitmap,pageIndex:I-1,rect:S.slice(0),rotation:x,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:P,popupRef:M}}const i=await super.deserialize(e,t,r),{rect:a,bitmap:l,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:g}=e;h&&r.imageManager.isValidId(h)?(i.#t=h,l&&(i.#e=l)):i.#s=d,i.#a=f;const[v,_]=i.pageDimensions;return i.width=(a[2]-a[0])/v,i.height=(a[3]-a[1])/_,i.annotationElementId=e.id||null,g&&(i.altTextData=g),i._initialData=s,i.#d=!!s,i}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ft.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:i}=this.serializeAltText(!1);if(!s&&i&&(r.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const l=this.#E(r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const a=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){const l=t.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#y(!1))}return r}#E(e){const{rect:t,pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=e.rect.every((d,h)=>Math.abs(d-t[h])<1),a=e.pageIndex===r,l=(e.accessibilityData?.alt||"")===s;return{isSame:i&&a&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ma{#e;#t=!1;#n=null;#s=null;#i=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Bn,cr,bx,bn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:d,viewport:h,l10n:f}){const g=[...ma.#h.values()];if(!ma._initialized){ma._initialized=!0;for(const v of g)v.initialize(f,e)}e.registerEditorTypes(g),this.#o=e,this.pageIndex=t,this.div=r,this.#e=i,this.#n=a,this.viewport=h,this.#a=d,this.drawLayer=l,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ft.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case ft.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ft.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ft.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of ma.#h.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==ft.INK)return;if(!e){for(const r of this.#r.values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n)return;const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of this.#r.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const i of s){const{id:a}=i.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(i),l.show(!1),i.show();continue}l=e.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(i)&&l.show(!1)),i.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of ma.#h.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#a.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#a.div.contains(t)){const{isMac:r}=Br.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),bn.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#o.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return ma.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){const t=this.#f;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:r,offsetY:s}=this.#g(),i=this.getNextId(),a=this.#v({parent:this,id:i,x:r,y:s,uiManager:this.#o,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await ma.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=this.#v({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...r});return i&&this.add(i),i}#g(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+r),d=Math.min(window.innerHeight,t+s),h=(i+l)/2-e,f=(a+d)/2-t,[g,v]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=Br.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===ft.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===ft.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Br.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(e,t,r){const s=this.#o.findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,au(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,au(this.div,{rotation:r}),t!==r)for(const s of this.#r.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class br{#e=null;#t=0;#n=new Map;#s=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return _t(this,"_svgFactory",new yx)}static#i(e,{x:t=0,y:r=0,width:s=1,height:i=1}={}){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`}#r(e){const t=br._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),br.#i(t,e),t}#l(e,t){const r=br._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=br._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s}draw(e,t,r,s=!1){const i=this.#t++,a=this.#r(e.box);a.classList.add(...e.classNamesForDrawing);const l=br._svgFactory.createElement("defs");a.append(l);const d=br._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${i}`;d.setAttribute("id",h),d.setAttribute("d",e.toSVGPath()),s&&this.#s.set(i,d);const f=this.#l(l,h),g=br._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",t),a.setAttribute("fill-opacity",r),g.setAttribute("href",`#${h}`),this.#n.set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(e){const t=this.#t++,r=this.#r(e.box);r.classList.add(...e.classNamesForOutlining);const s=br._svgFactory.createElement("defs");r.append(s);const i=br._svgFactory.createElement("path");s.append(i);const a=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",a),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.mustRemoveSelfIntersections){const f=br._svgFactory.createElement("mask");s.append(f),l=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const g=br._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=br._svgFactory.createElement("use");f.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=br._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${a}`),l&&d.setAttribute("mask",`url(#${l})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#s.get(e);this.#s.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#s.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){br.#i(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#s.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#s.clear()}}var D8=at.AbortException,N8=at.AnnotationEditorLayer,O8=at.AnnotationEditorParamsType,L8=at.AnnotationEditorType,j8=at.AnnotationEditorUIManager,F8=at.AnnotationLayer,B8=at.AnnotationMode,$8=at.ColorPicker,U8=at.DOMSVGFactory,z8=at.DrawLayer,V8=at.FeatureTest,IM=at.GlobalWorkerOptions,H8=at.ImageKind,W8=at.InvalidPDFException,q8=at.MissingPDFException,G8=at.OPS,K8=at.OutputScale,Y8=at.PDFDataRangeTransport,X8=at.PDFDateString,Q8=at.PDFWorker,J8=at.PasswordResponses,Z8=at.PermissionFlag,e9=at.PixelsPerInch,t9=at.RenderingCancelledException,n9=at.TextLayer,r9=at.UnexpectedResponseException,s9=at.Util,i9=at.VerbosityLevel,o9=at.XfaLayer,a9=at.build,l9=at.createValidAbsoluteUrl,c9=at.fetchData,u9=at.getDocument,d9=at.getFilenameFromUrl,h9=at.getPdfFilenameFromUrl,f9=at.getXfaPageViewport,p9=at.isDataScheme,m9=at.isPdfFile,g9=at.noContextMenu,v9=at.normalizeUnicode,y9=at.setLayerDimensions,w9=at.shadow,DM=at.version;const G9=Object.freeze(Object.defineProperty({__proto__:null,AbortException:D8,AnnotationEditorLayer:N8,AnnotationEditorParamsType:O8,AnnotationEditorType:L8,AnnotationEditorUIManager:j8,AnnotationLayer:F8,AnnotationMode:B8,ColorPicker:$8,DOMSVGFactory:U8,DrawLayer:z8,FeatureTest:V8,GlobalWorkerOptions:IM,ImageKind:H8,InvalidPDFException:W8,MissingPDFException:q8,OPS:G8,OutputScale:K8,PDFDataRangeTransport:Y8,PDFDateString:X8,PDFWorker:Q8,PasswordResponses:J8,PermissionFlag:Z8,PixelsPerInch:e9,RenderingCancelledException:t9,TextLayer:n9,UnexpectedResponseException:r9,Util:s9,VerbosityLevel:i9,XfaLayer:o9,build:a9,createValidAbsoluteUrl:l9,fetchData:c9,getDocument:u9,getFilenameFromUrl:d9,getPdfFilenameFromUrl:h9,getXfaPageViewport:f9,isDataScheme:p9,isPdfFile:m9,noContextMenu:g9,normalizeUnicode:v9,setLayerDimensions:y9,shadow:w9,version:DM},Symbol.toStringTag,{value:"Module"}));IM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${DM}/pdf.worker.min.mjs`;hN.createRoot(document.getElementById("root")).render(y.jsx(ot.StrictMode,{children:y.jsx($R,{children:y.jsx(SE,{children:y.jsx(Iq,{})})})}));export{cs as $,GU as A,Rt as B,lk as C,Kp as D,rm as E,bl as F,im as G,wk as H,jr as I,Yc as J,LW as K,rz as L,fk as M,jW as N,uP as O,Di as P,r6 as Q,ot as R,az as S,__ as T,vk as U,ER as V,kR as W,TR as X,PR as Y,ls as Z,Or as _,YU as a,ck as a$,Lr as a0,jt as a1,i6 as a2,ds as a3,RR as a4,eM as a5,ut as a6,cz as a7,dz as a8,V9 as a9,Gp as aA,ok as aB,ak as aC,y_ as aD,N9 as aE,uk as aF,OE as aG,M9 as aH,hp as aI,wF as aJ,yF as aK,vF as aL,gF as aM,Ih as aN,iz as aO,$A as aP,lz as aQ,$2 as aR,Bz as aS,Tv as aT,xv as aU,H9 as aV,H2 as aW,Vp as aX,w_ as aY,j2 as aZ,QU as a_,B5 as aa,RE as ab,XU as ac,v_ as ad,lb as ae,_9 as af,Ht as ag,nz as ah,oE as ai,ze as aj,ri as ak,MS as al,pk as am,Op as an,DM as ao,IM as ap,hN as aq,Iq as ar,K_ as as,D9 as at,ez as au,KU as av,mN as aw,Yp as ax,hu as ay,Xp as az,D5 as b,my as b$,V2 as b0,sy as b1,ZU as b2,Cl as b3,Sj as b4,IS as b5,P9 as b6,T9 as b7,Ek as b8,ew as b9,ty as bA,VW as bB,om as bC,HW as bD,u9 as bE,sz as bF,JU as bG,S_ as bH,wb as bI,zk as bJ,_P as bK,G9 as bL,B8 as bM,n9 as bN,F8 as bO,Ob as bP,I9 as bQ,qe as bR,by as bS,Jk as bT,Zk as bU,_y as bV,N_ as bW,Sy as bX,nu as bY,A_ as bZ,gy as b_,cp as ba,up as bb,cj as bc,py as bd,Ah as be,So as bf,wa as bg,nt as bh,rT as bi,$4 as bj,U4 as bk,Fe as bl,Is as bm,$9 as bn,t6 as bo,z9 as bp,n6 as bq,xt as br,U9 as bs,_R as bt,O9 as bu,xR as bv,SR as bw,AR as bx,bR as by,Gz as bz,tt as c,eT as c0,tT as c1,c4 as c2,d4 as c3,h4 as c4,p4 as c5,m4 as c6,v4 as c7,g4 as c8,f4 as c9,ZV as ca,rN as cb,YC as cc,EE as cd,CE as ce,k9 as cf,TE as cg,Nv as ch,kj as ci,Cj as cj,Pj as ck,Nj as cl,Oj as cm,Dj as cn,dk as co,b_ as cp,gk as cq,yb as cr,lE as d,ni as e,$i as f,Kb as g,ln as h,FR as i,y as j,vO as k,Sh as l,Zn as m,oz as n,ji as o,qU as p,H_ as q,A as r,Se as s,W_ as t,Rh as u,q_ as v,G_ as w,eR as x,tm as y,nm as z};
