import{c as ue,G as nt,r as a,j as i,bE as Cn,H as ke,bL as wn,bM as Sn,bN as $n,bO as En,ap as Pn,o as Et,m as rt,B as le,a_ as Rn,a$ as Dn,y as Pt,z as Rt,E as Dt,ac as Tt,a6 as $e,A as Tn,ad as jn,R as P,bC as In,bP as jt,a3 as On,q as Nn,t as An,v as kn,w as _n,x as Mn,as as Ln,bQ as Oe,e as Fn,ae as zn,l as Vn,p as Bn,bG as Hn,av as Un,L as Gn,T as qn}from"./index-BLSLQMBf.js";import{r as Wn,a as Yn}from"./index-u4fM27WV.js";import{M as It}from"./message-square-BHrUuIgQ.js";import{L as Ot}from"./link-DRqCWMGU.js";import{I as Kn}from"./image-D--rNG-v.js";import{I as Jn}from"./instagram-Cyo-vX5b.js";import{_ as Y}from"./extends-CF3RwP-h.js";import{i as _}from"./tiny-invariant-CopsF_GD.js";import{u as Xn}from"./useDebounce-CubRa8jv.js";import{S as Qn}from"./square-OdZ_j_ck.js";const ot=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Zn=ue("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),er=ue("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),tr=ue("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),nr=ue("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),rr=ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),or=ue("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),sr=ue("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),ir=ue("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var J=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))},ar=["onCopy","onCut","onPaste"],cr=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],lr=["onFocus","onBlur"],ur=["onInput","onInvalid","onReset","onSubmit"],dr=["onLoad","onError"],fr=["onKeyDown","onKeyPress","onKeyUp"],pr=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],hr=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],gr=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],mr=["onSelect"],xr=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],br=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],vr=["onScroll"],yr=["onWheel"],Cr=["onAnimationStart","onAnimationEnd","onAnimationIteration"],wr=["onTransitionEnd"],Sr=["onToggle"],$r=["onChange"],Er=J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J(J([],ar,!0),cr,!0),lr,!0),ur,!0),dr,!0),fr,!0),pr,!0),hr,!0),gr,!0),mr,!0),xr,!0),br,!0),vr,!0),yr,!0),Cr,!0),wr,!0),$r,!0),Sr,!0);function Nt(e,t){var n={};return Er.forEach(function(r){var o=e[r];o&&(t?n[r]=function(s){return o(s,t(r))}:n[r]=o)}),n}function De(e){var t=!1,n=new Promise(function(r,o){e.then(function(s){return!t&&r(s)}).catch(function(s){return!t&&o(s)})});return{promise:n,cancel:function(){t=!0}}}var Be,dt;function Pr(){if(dt)return Be;dt=1;var e=function(){};return Be=e,Be}var Rr=Pr();const Q=nt(Rr);var ft=Object.prototype.hasOwnProperty;function pt(e,t,n){for(n of e.keys())if(Ce(n,t))return n}function Ce(e,t){var n,r,o;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ce(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(o=r,o&&typeof o=="object"&&(o=pt(t,o),!o)||!t.has(o))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(o=r[0],o&&typeof o=="object"&&(o=pt(t,o),!o)||!Ce(r[1],t.get(o)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ft.call(e,n)&&++r&&!ft.call(t,n)||!(n in t)||!Ce(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}const At=a.createContext(null);function we({children:e,type:t}){return i.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:e})}const Dr="noopener noreferrer nofollow";class Tr{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return _(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){_(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(n=>{_(this.pdfDocument),_(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{_(Array.isArray(n));const r=n[0];new Promise(o=>{_(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(s=>{o(s)}).catch(()=>{_(!1)}):typeof r=="number"?o(r):_(!1)}).then(o=>{const s=o+1;_(this.pdfViewer),_(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:o,pageNumber:s})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const n=t-1;_(this.pdfViewer),_(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}addLinkAttributes(t,n,r){t.href=n,t.rel=this.externalLinkRel||Dr,t.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const ht={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},_e=typeof window<"u",kt=_e&&window.location.protocol==="file:";function jr(e){return typeof e<"u"}function xe(e){return jr(e)&&e!==null}function Ir(e){return typeof e=="string"}function Or(e){return e instanceof ArrayBuffer}function Nr(e){return _(_e),e instanceof Blob}function Ye(e){return Ir(e)&&/^data:/.test(e)}function gt(e){_(Ye(e));const[t="",n=""]=e.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function Ar(){return _e&&window.devicePixelRatio||1}const _t="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function mt(){Q(!kt,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${_t}`)}function kr(){Q(!kt,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${_t}`)}function be(e){e?.cancel&&e.cancel()}function Ke(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function _r(e){return e.name==="RenderingCancelledException"}function Mr(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));t(r.result)},r.onerror=o=>{if(!o.target)return n(new Error("Error while reading a file."));const{error:s}=o.target;if(!s)return n(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(e)})}function Lr(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function Se(){return a.useReducer(Lr,{value:void 0,error:void 0})}var Fr=function(e,t,n,r){function o(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function u(p){try{d(r.next(p))}catch(f){l(f)}}function c(p){try{d(r.throw(p))}catch(f){l(f)}}function d(p){p.done?s(p.value):o(p.value).then(u,c)}d((r=r.apply(e,t||[])).next())})},xt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const{PDFDataRangeTransport:zr}=wn,Vr=(e,t)=>{switch(t){case ht.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");e(n);break}case ht.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");e(n);break}}};function bt(e){return typeof e=="object"&&e!==null&&("data"in e||"range"in e||"url"in e)}const Br=a.forwardRef(function(t,n){var{children:r,className:o,error:s="Failed to load PDF file.",externalLinkRel:l,externalLinkTarget:u,file:c,inputRef:d,imageResourcesPath:p,loading:f="Loading PDF…",noData:h="No PDF file specified.",onItemClick:m,onLoadError:g,onLoadProgress:y,onLoadSuccess:x,onPassword:b=Vr,onSourceError:v,onSourceSuccess:E,options:C,renderMode:$,rotate:j}=t,R=xt(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[w,T]=Se(),{value:O,error:G}=w,[ee,S]=Se(),{value:D,error:U}=ee,k=a.useRef(new Tr),F=a.useRef([]),X=a.useRef(void 0),te=a.useRef(void 0);c&&c!==X.current&&bt(c)&&(Q(!Ce(c,X.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),X.current=c),C&&C!==te.current&&(Q(!Ce(C,te.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),te.current=C);const re=a.useRef({scrollPageIntoView:N=>{const{dest:M,pageNumber:H,pageIndex:W=H-1}=N;if(m){m({dest:M,pageIndex:W,pageNumber:H});return}const ne=F.current[W];if(ne){ne.scrollIntoView();return}Q(!1,`An internal link leading to page ${H} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});a.useImperativeHandle(n,()=>({linkService:k,pages:F,viewer:re}),[]);function ie(){E&&E()}function I(){G&&(Q(!1,G.toString()),v&&v(G))}function A(){T({type:"RESET"})}a.useEffect(A,[c,T]);const z=a.useCallback(()=>Fr(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return Ye(c)?{data:gt(c)}:(mt(),{url:c});if(c instanceof zr)return{range:c};if(Or(c))return{data:c};if(_e&&Nr(c))return{data:yield Mr(c)};if(_(typeof c=="object"),_(bt(c)),"url"in c&&typeof c.url=="string"){if(Ye(c.url)){const{url:N}=c,M=xt(c,["url"]),H=gt(N);return Object.assign({data:H},M)}mt()}return c}),[c]);a.useEffect(()=>{const N=De(z());return N.promise.then(M=>{T({type:"RESOLVE",value:M})}).catch(M=>{T({type:"REJECT",error:M})}),()=>{be(N)}},[z,T]),a.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){I();return}ie()}},[O]);function V(){D&&(x&&x(D),F.current=new Array(D.numPages),k.current.setDocument(D))}function B(){U&&(Q(!1,U.toString()),g&&g(U))}a.useEffect(function(){S({type:"RESET"})},[S,O]),a.useEffect(function(){if(!O)return;const M=C?Object.assign(Object.assign({},O),C):O,H=Cn(M);y&&(H.onProgress=y),b&&(H.onPassword=b);const W=H,ne=W.promise.then(Z=>{S({type:"RESOLVE",value:Z})}).catch(Z=>{W.destroyed||S({type:"REJECT",error:Z})});return()=>{ne.finally(()=>W.destroy())}},[C,S,O]),a.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){B();return}V()}},[D]),a.useEffect(function(){k.current.setViewer(re.current),k.current.setExternalLinkRel(l),k.current.setExternalLinkTarget(u)},[l,u]);const q=a.useCallback((N,M)=>{F.current[N]=M},[]),ge=a.useCallback(N=>{delete F.current[N]},[]),ae=a.useMemo(()=>({imageResourcesPath:p,linkService:k.current,onItemClick:m,pdf:D,registerPage:q,renderMode:$,rotate:j,unregisterPage:ge}),[p,m,D,q,$,j,ge]),L=a.useMemo(()=>Nt(R,()=>D),[R,D]);function me(){return i.jsx(At.Provider,{value:ae,children:r})}function K(){return c?D==null?i.jsx(we,{type:"loading",children:typeof f=="function"?f():f}):D===!1?i.jsx(we,{type:"error",children:typeof s=="function"?s():s}):me():i.jsx(we,{type:"no-data",children:typeof h=="function"?h():h})}return i.jsx("div",Object.assign({className:ke("react-pdf__Document",o),ref:d,style:{"--scale-factor":"1"}},L,{children:K()}))});function Mt(){return a.useContext(At)}function Lt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);if(n.length<=1){var r=n[0];return r||null}return function(s){n.forEach(function(l){typeof l=="function"?l(s):l&&(l.current=s)})}}const Ft=a.createContext(null),zt={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Hr=/^H(\d+)$/;function Ur(e){return e in zt}function Me(e){return"children"in e}function Vt(e){return Me(e)?e.children.length===1&&0 in e.children&&"id"in e.children[0]:!1}function Gr(e){const t={};if(Me(e)){const{role:n}=e,r=n.match(Hr);if(r)t.role="heading",t["aria-level"]=Number(r[1]);else if(Ur(n)){const o=zt[n];o&&(t.role=o)}}return t}function Bt(e){const t={};if(Me(e)){if(e.alt!==void 0&&(t["aria-label"]=e.alt),e.lang!==void 0&&(t.lang=e.lang),Vt(e)){const[n]=e.children;if(n){const r=Bt(n);return Object.assign(Object.assign({},t),r)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function qr(e){return e?Object.assign(Object.assign({},Gr(e)),Bt(e)):null}function Ht({className:e,node:t}){const n=a.useMemo(()=>qr(t),[t]),r=a.useMemo(()=>!Me(t)||Vt(t)?null:t.children.map((o,s)=>i.jsx(Ht,{node:o},s)),[t]);return i.jsx("span",Object.assign({className:e},n,{children:r}))}function Le(){return a.useContext(Ft)}function Wr(){const e=Le();_(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[r,o]=Se(),{value:s,error:l}=r,{customTextRenderer:u,page:c}=e;function d(){s&&n&&n(s)}function p(){l&&(Q(!1,l.toString()),t&&t(l))}return a.useEffect(function(){o({type:"RESET"})},[o,c]),a.useEffect(function(){if(u||!c)return;const h=De(c.getStructTree()),m=h;return h.promise.then(g=>{o({type:"RESOLVE",value:g})}).catch(g=>{o({type:"REJECT",error:g})}),()=>be(m)},[u,c,o]),a.useEffect(()=>{if(s!==void 0){if(s===!1){p();return}d()}},[s]),s?i.jsx(Ht,{className:"react-pdf__Page__structTree structTree",node:s}):null}const vt=Sn;function Yr(e){const t=Le();_(t);const n=Object.assign(Object.assign({},t),e),{_className:r,canvasBackground:o,devicePixelRatio:s=Ar(),onRenderError:l,onRenderSuccess:u,page:c,renderForms:d,renderTextLayer:p,rotate:f,scale:h}=n,{canvasRef:m}=e;_(c);const g=a.useRef(null);function y(){c&&u&&u(Ke(c,h))}function x(C){_r(C)||(Q(!1,C.toString()),l&&l(C))}const b=a.useMemo(()=>c.getViewport({scale:h*s,rotation:f}),[s,c,f,h]),v=a.useMemo(()=>c.getViewport({scale:h,rotation:f}),[c,f,h]);a.useEffect(function(){if(!c)return;c.cleanup();const{current:$}=g;if(!$)return;$.width=b.width,$.height=b.height,$.style.width=`${Math.floor(v.width)}px`,$.style.height=`${Math.floor(v.height)}px`,$.style.visibility="hidden";const j={annotationMode:d?vt.ENABLE_FORMS:vt.ENABLE,canvasContext:$.getContext("2d",{alpha:!1}),viewport:b};o&&(j.background=o);const R=c.render(j),w=R;return R.promise.then(()=>{$.style.visibility="",y()}).catch(x),()=>be(w)},[o,c,d,b,v]);const E=a.useCallback(()=>{const{current:C}=g;C&&(C.width=0,C.height=0)},[]);return a.useEffect(()=>E,[E]),i.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:Lt(m,g),style:{display:"block",userSelect:"none"},children:p?i.jsx(Wr,{}):null})}function Kr(e){return"str"in e}function Jr(){const e=Le();_(e);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:o,onRenderTextLayerSuccess:s,page:l,pageIndex:u,pageNumber:c,rotate:d,scale:p}=e;_(l);const[f,h]=Se(),{value:m,error:g}=f,y=a.useRef(null);Q(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){m&&r&&r(m)}function b(){g&&(Q(!1,g.toString()),n&&n(g))}a.useEffect(function(){h({type:"RESET"})},[l,h]),a.useEffect(function(){if(!l)return;const w=De(l.getTextContent()),T=w;return w.promise.then(O=>{h({type:"RESOLVE",value:O})}).catch(O=>{h({type:"REJECT",error:O})}),()=>be(T)},[l,h]),a.useEffect(()=>{if(m!==void 0){if(m===!1){b();return}x()}},[m]);const v=a.useCallback(()=>{s&&s()},[s]),E=a.useCallback(R=>{Q(!1,R.toString()),o&&o(R)},[o]);function C(){const R=y.current;R&&R.classList.add("selecting")}function $(){const R=y.current;R&&R.classList.remove("selecting")}const j=a.useMemo(()=>l.getViewport({scale:p,rotation:d}),[l,d,p]);return a.useLayoutEffect(function(){if(!l||!m)return;const{current:w}=y;if(!w)return;w.innerHTML="";const T=l.streamTextContent({includeMarkedContent:!0}),O={container:w,textContentSource:T,viewport:j},G=new $n(O),ee=G;return G.render().then(()=>{const S=document.createElement("div");S.className="endOfContent",w.append(S);const D=w.querySelectorAll('[role="presentation"]');if(t){let U=0;m.items.forEach((k,F)=>{if(!Kr(k))return;const X=D[U];if(!X)return;const te=t(Object.assign({pageIndex:u,pageNumber:c,itemIndex:F},k));X.innerHTML=te,U+=k.str&&k.hasEOL?2:1})}v()}).catch(E),()=>be(ee)},[t,E,v,l,u,c,m,j]),i.jsx("div",{className:ke("react-pdf__Page__textContent","textLayer"),onMouseUp:$,onMouseDown:C,ref:y})}function Xr(){const e=Mt(),t=Le();_(t);const n=Object.assign(Object.assign({},e),t),{imageResourcesPath:r,linkService:o,onGetAnnotationsError:s,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:c,page:d,pdf:p,renderForms:f,rotate:h,scale:m=1}=n;_(p),_(d),_(o);const[g,y]=Se(),{value:x,error:b}=g,v=a.useRef(null);Q(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){x&&l&&l(x)}function C(){b&&(Q(!1,b.toString()),s&&s(b))}a.useEffect(function(){y({type:"RESET"})},[y,d]),a.useEffect(function(){if(!d)return;const T=De(d.getAnnotations()),O=T;return T.promise.then(G=>{y({type:"RESOLVE",value:G})}).catch(G=>{y({type:"REJECT",error:G})}),()=>{be(O)}},[y,d]),a.useEffect(()=>{if(x!==void 0){if(x===!1){C();return}E()}},[x]);function $(){c&&c()}function j(w){Q(!1,`${w}`),u&&u(w)}const R=a.useMemo(()=>d.getViewport({scale:m,rotation:h}),[d,h,m]);return a.useEffect(function(){if(!p||!d||!o||!x)return;const{current:T}=v;if(!T)return;const O=R.clone({dontFlip:!0}),G={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:T,l10n:null,page:d,structTreeLayer:null,viewport:O},ee={annotations:x,annotationStorage:p.annotationStorage,div:T,imageResourcesPath:r,linkService:o,page:d,renderForms:f,viewport:O};T.innerHTML="";try{new En(G).render(ee),$()}catch(S){j(S)}return()=>{}},[x,r,o,d,p,f,R]),i.jsx("div",{className:ke("react-pdf__Page__annotations","annotationLayer"),ref:v})}var Qr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const yt=1;function Zr(e){const t=Mt(),n=Object.assign(Object.assign({},t),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:o=!0,canvasBackground:s,canvasRef:l,children:u,className:c,customRenderer:d,customTextRenderer:p,devicePixelRatio:f,error:h="Failed to load the page.",height:m,inputRef:g,loading:y="Loading page…",noData:x="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:v,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:$,onGetTextSuccess:j,onLoadError:R,onLoadSuccess:w,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:O,onRenderError:G,onRenderSuccess:ee,onRenderTextLayerError:S,onRenderTextLayerSuccess:D,pageIndex:U,pageNumber:k,pdf:F,registerPage:X,renderAnnotationLayer:te=!0,renderForms:re=!1,renderMode:ie="canvas",renderTextLayer:I=!0,rotate:A,scale:z=yt,unregisterPage:V,width:B}=n,q=Qr(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ge,ae]=Se(),{value:L,error:me}=ge,K=a.useRef(null);_(F);const N=xe(k)?k-1:U??null,M=k??(xe(U)?U+1:null),H=A??(L?L.rotate:null),W=a.useMemo(()=>{if(!L)return null;let ye=1;const Te=z??yt;if(B||m){const je=L.getViewport({scale:1,rotation:H});B?ye=B/je.width:m&&(ye=m/je.height)}return Te*ye},[m,L,H,z,B]);a.useEffect(function(){return()=>{xe(N)&&o&&V&&V(N)}},[o,F,N,V]);function ne(){if(w){if(!L||!W)return;w(Ke(L,W))}if(o&&X){if(!xe(N)||!K.current)return;X(N,K.current)}}function Z(){me&&(Q(!1,me.toString()),R&&R(me))}a.useEffect(function(){ae({type:"RESET"})},[ae,F,N]),a.useEffect(function(){if(!F||!M)return;const Te=De(F.getPage(M)),je=Te;return Te.promise.then(Ve=>{ae({type:"RESOLVE",value:Ve})}).catch(Ve=>{ae({type:"REJECT",error:Ve})}),()=>be(je)},[ae,F,M]),a.useEffect(()=>{if(L!==void 0){if(L===!1){Z();return}ne()}},[L,W]);const ce=a.useMemo(()=>L&&xe(N)&&M&&xe(H)&&xe(W)?{_className:r,canvasBackground:s,customTextRenderer:p,devicePixelRatio:f,onGetAnnotationsError:b,onGetAnnotationsSuccess:v,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:$,onGetTextSuccess:j,onRenderAnnotationLayerError:T,onRenderAnnotationLayerSuccess:O,onRenderError:G,onRenderSuccess:ee,onRenderTextLayerError:S,onRenderTextLayerSuccess:D,page:L,pageIndex:N,pageNumber:M,renderForms:re,renderTextLayer:I,rotate:H,scale:W}:null,[r,s,p,f,b,v,E,C,$,j,T,O,G,ee,S,D,L,N,M,re,I,H,W]),de=a.useMemo(()=>Nt(q,()=>L&&(W?Ke(L,W):void 0)),[q,L,W]),oe=`${N}@${W}/${H}`;function Pe(){switch(ie){case"custom":return _(d),i.jsx(d,{},`${oe}_custom`);case"none":return null;case"canvas":default:return i.jsx(Yr,{canvasRef:l},`${oe}_canvas`)}}function Re(){return I?i.jsx(Jr,{},`${oe}_text`):null}function bn(){return te?i.jsx(Xr,{},`${oe}_annotations`):null}function vn(){return i.jsxs(Ft.Provider,{value:ce,children:[Pe(),Re(),bn(),u]})}function yn(){return M?F===null||L===void 0||L===null?i.jsx(we,{type:"loading",children:typeof y=="function"?y():y}):F===!1||L===!1?i.jsx(we,{type:"error",children:typeof h=="function"?h():h}):vn():i.jsx(we,{type:"no-data",children:typeof x=="function"?x():x})}return i.jsx("div",Object.assign({className:ke(r,c),"data-page-number":M,ref:Lt(g,K),style:{"--scale-factor":`${W}`,backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},de,{children:yn()}))}kr();Pn.workerSrc="pdf.worker.mjs";const eo=a.createContext({dragDropManager:void 0});function pe(e,t,...n){if(to()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let r;if(t===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;r=new Error(t.replace(/%s/g,function(){return n[o++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function to(){return typeof process<"u"&&!0}var He,Ct;function no(){return Ct||(Ct=1,He=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var l=s[o];if(!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n}),He}var ro=no();const oo=nt(ro),ve=typeof window<"u"?a.useLayoutEffect:a.useEffect;function so(e,t,n){const[r,o]=a.useState(()=>t(e)),s=a.useCallback(()=>{const l=t(e);oo(r,l)||(o(l),n&&n())},[r,e,n]);return ve(s),[r,s]}function io(e,t,n){const[r,o]=so(e,t,n);return ve(function(){const l=e.getHandlerId();if(l!=null)return e.subscribeToStateChange(o,{handlerIds:[l]})},[e,o]),r}function Ut(e,t,n){return io(t,e||(()=>({})),()=>n.reconnect())}function Gt(e,t){const n=[...t||[]];return t==null&&typeof e!="function"&&n.push(e),a.useMemo(()=>typeof e=="function"?e():e,n)}function ao(e){return a.useMemo(()=>e.hooks.dragSource(),[e])}function co(e){return a.useMemo(()=>e.hooks.dragPreview(),[e])}let Ue=!1,Ge=!1;class lo{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){pe(!Ue,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ue=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ue=!1}}isDragging(){if(!this.sourceId)return!1;pe(!Ge,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ge=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ge=!1}}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,n){return this.internalMonitor.isOverTarget(t,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let qe=!1;class uo{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}canDrop(){if(!this.targetId)return!1;pe(!qe,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return qe=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{qe=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function fo(e,t,n){const r=n.getRegistry(),o=r.addTarget(e,t);return[o,()=>r.removeTarget(o)]}function po(e,t,n){const r=n.getRegistry(),o=r.addSource(e,t);return[o,()=>r.removeSource(o)]}function Je(e,t,n,r){let o;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;const u=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<s.length;c++){const d=s[c];if(!u(d))return!1;const p=e[d],f=t[d];if(o=void 0,o===!1||o===void 0&&p!==f)return!1}return!0}function Xe(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ho(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function go(e){return(t=null,n=null)=>{if(!a.isValidElement(t)){const s=t;return e(s,n),s}const r=t;return ho(r),mo(r,n?s=>e(s,n):e)}}function qt(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const o=go(r);t[n]=()=>o}}),t}function wt(e,t){typeof e=="function"?e(t):e.current=t}function mo(e,t){const n=e.ref;return pe(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?a.cloneElement(e,{ref:r=>{wt(n,r),wt(t,r)}}):a.cloneElement(e,{ref:t})}class xo{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?t?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),n):(this.lastConnectedDragSource=t,n):n}reconnectDragPreview(t=!1){const n=this.dragPreview,r=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Je(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Je(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=qt({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Xe(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Xe(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class bo{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Je(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=qt({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Xe(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Ee(){const{dragDropManager:e}=a.useContext(eo);return pe(e!=null,"Expected drag drop context"),e}function vo(e,t){const n=Ee(),r=a.useMemo(()=>new xo(n.getBackend()),[n]);return ve(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),ve(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function yo(){const e=Ee();return a.useMemo(()=>new lo(e),[e])}class Co{beginDrag(){const t=this.spec,n=this.monitor;let r=null;return typeof t.item=="object"?r=t.item:typeof t.item=="function"?r=t.item(n):r={},r??null}canDrag(){const t=this.spec,n=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(n):!0}isDragging(t,n){const r=this.spec,o=this.monitor,{isDragging:s}=r;return s?s(o):n===t.getSourceId()}endDrag(){const t=this.spec,n=this.monitor,r=this.connector,{end:o}=t;o&&o(n.getItem(),n),r.reconnect()}constructor(t,n,r){this.spec=t,this.monitor=n,this.connector=r}}function wo(e,t,n){const r=a.useMemo(()=>new Co(e,t,n),[t,n]);return a.useEffect(()=>{r.spec=e},[e]),r}function So(e){return a.useMemo(()=>{const t=e.type;return pe(t!=null,"spec.type must be defined"),t},[e])}function $o(e,t,n){const r=Ee(),o=wo(e,t,n),s=So(e);ve(function(){if(s!=null){const[u,c]=po(s,o,r);return t.receiveHandlerId(u),n.receiveHandlerId(u),c}},[r,t,n,o,s])}function Eo(e,t){const n=Gt(e,t);pe(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=yo(),o=vo(n.options,n.previewOptions);return $o(n,r,o),[Ut(n.collect,r,o),ao(o),co(o)]}function Po(e){return a.useMemo(()=>e.hooks.dropTarget(),[e])}function Ro(e){const t=Ee(),n=a.useMemo(()=>new bo(t.getBackend()),[t]);return ve(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function Do(){const e=Ee();return a.useMemo(()=>new uo(e),[e])}function To(e){const{accept:t}=e;return a.useMemo(()=>(pe(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class jo{canDrop(){const t=this.spec,n=this.monitor;return t.canDrop?t.canDrop(n.getItem(),n):!0}hover(){const t=this.spec,n=this.monitor;t.hover&&t.hover(n.getItem(),n)}drop(){const t=this.spec,n=this.monitor;if(t.drop)return t.drop(n.getItem(),n)}constructor(t,n){this.spec=t,this.monitor=n}}function Io(e,t){const n=a.useMemo(()=>new jo(e,t),[t]);return a.useEffect(()=>{n.spec=e},[e]),n}function Oo(e,t,n){const r=Ee(),o=Io(e,t),s=To(e);ve(function(){const[u,c]=fo(s,o,r);return t.receiveHandlerId(u),n.receiveHandlerId(u),c},[r,t,o,n,s.map(l=>l.toString()).join("|")])}function Wt(e,t){const n=Gt(e,t),r=Do(),o=Ro(n.options);return Oo(n,r,o),[Ut(n.collect,r,o),Po(o)]}const fe={BLOCK:"block",IMAGE_UPLOAD:"image_upload",POSITIONED_BLOCK:"positioned_block"},pi=e=>({type:fe.IMAGE_UPLOAD,url:e,data:JSON.stringify({type:"image",content:{src:e},styles:{},size:{width:"30%",height:"auto"}})});var No=Wn();const Ao=nt(No);var ko=Yn();const We=({item:e,styles:t})=>i.jsxs("div",{className:"flex flex-col h-full items-center text-center p-6 bg-background/80 backdrop-blur-sm rounded-lg shadow-lg",children:[i.jsxs(Pt,{className:"w-20 h-20 mb-4 border-2 border-primary/50",children:[i.jsx(Rt,{src:e.avatarUrl,alt:e.name}),i.jsx(Dt,{children:e.name?.charAt(0)})]}),i.jsxs("p",{className:"text-lg italic text-foreground/80 mb-4 flex-grow",children:['"',e.text,'"']}),i.jsx("p",{className:"font-bold text-foreground",style:{color:t.textColor},children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",style:{color:t.textColorMuted},children:e.role})]}),_o=({item:e,styles:t})=>i.jsxs("div",{className:"relative text-center p-4",children:[i.jsx(or,{className:"w-16 h-16 text-primary/20 absolute -top-2 left-1/2 -translate-x-1/2"}),i.jsxs("p",{className:"text-2xl italic text-foreground mb-6 pt-8",style:{color:t.textColor},children:['"',e.text,'"']}),i.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i.jsxs(Pt,{children:[i.jsx(Rt,{src:e.avatarUrl,alt:e.name}),i.jsx(Dt,{children:e.name?.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-foreground",style:{color:t.textColor},children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",style:{color:t.textColorMuted},children:e.role})]})]})]}),Mo=({content:e,styles:t})=>{const{items:n=[],layout:r="slider"}=e,[o,s]=a.useState(0),l=p=>{p.stopPropagation(),s(f=>f===0?n.length-1:f-1)},u=p=>{p.stopPropagation(),s(f=>f===n.length-1?0:f+1)};if(!n||n.length===0)return i.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Adicione depoimentos no painel de edição."});const c=n[o],d=()=>{switch(r){case"card":return i.jsx(We,{item:n[0],styles:t});case"quote":return i.jsx(_o,{item:n[0],styles:t});case"grid":return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4 w-full h-full",children:n.map(p=>i.jsx(We,{item:p,styles:t},p.id))});case"slider":default:return i.jsxs("div",{className:"relative overflow-hidden w-full h-full flex items-center justify-center",children:[i.jsx(Et,{initial:!1,custom:o,children:i.jsx(rt.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.5},className:"w-full max-w-2xl",children:i.jsx(We,{item:c,styles:t})},o)}),n.length>1&&i.jsxs(i.Fragment,{children:[i.jsx(le,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-background/50 hover:bg-background/80",onClick:l,children:i.jsx(Rn,{})}),i.jsx(le,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-background/50 hover:bg-background/80",onClick:u,children:i.jsx(Dn,{})})]})]})}};return i.jsx("div",{className:"w-full h-full",style:{...t},children:d()})},Lo=({item:e})=>{const[t,n]=a.useState(!1);return i.jsxs("div",{className:"border-b border-border/50",children:[i.jsxs("button",{onClick:()=>n(!t),className:"flex justify-between items-center w-full py-4 text-left",children:[i.jsx("span",{className:"font-semibold text-foreground",children:e.question}),i.jsx(Tt,{className:$e("transform transition-transform duration-300",t&&"rotate-180")})]}),i.jsx(Et,{children:t&&i.jsx(rt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:i.jsx("p",{className:"pb-4 text-muted-foreground",children:e.answer})})})]})},Fo=({content:e,styles:t})=>{const{items:n=[]}=e;return!n||n.length===0?i.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Adicione perguntas e respostas no painel de edição."}):i.jsx("div",{className:"w-full",children:n.map(r=>i.jsx(Lo,{item:r},r.id))})},zo=({content:e,styles:t,handlers:n})=>{const{title:r,subtitle:o,buttons:s=[]}=e,l=c=>{switch(c){case"accept":return i.jsx(jn,{className:"w-4 h-4 mr-2"});case"whatsapp":return i.jsx(It,{className:"w-4 h-4 mr-2"});case"link":default:return i.jsx(Tn,{className:"w-4 h-4 mr-2"})}},u=c=>{if(c.actionType==="accept"&&n?.onAccept)n.onAccept();else if(c.actionType==="link"&&c.link)window.open(c.link,"_blank");else if(c.actionType==="whatsapp"&&c.link){const d=c.link.replace(/\D/g,"");window.open(`https://wa.me/${d}`,"_blank")}};return i.jsxs("div",{style:t,className:"w-full text-center cta-block-override",children:[i.jsx("h2",{className:"text-3xl font-bold mb-2 canvas-h2",style:{color:t.color},children:r}),i.jsx("p",{className:"text-lg opacity-80 mb-6 canvas-p",style:{color:t.color},children:o}),i.jsx("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:s.map(c=>i.jsxs(le,{size:"lg",style:{backgroundColor:t.accentColor,color:"#FFFFFF"},className:"shadow-lg transform hover:scale-105 transition-transform",onClick:()=>u(c),children:[l(c.actionType),c.text]},c.id))})]})},Vo={instagram:i.jsx(Jn,{}),facebook:i.jsx(Zn,{}),twitter:i.jsx(sr,{}),linkedin:i.jsx(er,{}),whatsapp:i.jsx(It,{}),youtube:i.jsx(ir,{}),pinterest:i.jsx(Kn,{}),site:i.jsx(Ot,{})},Bo=({content:e,styles:t})=>{const{items:n=[]}=e,{iconColor:r="#333333",alignment:o="center"}=t;if(!n||n.length===0)return i.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Adicione redes sociais no painel de edição."});const s={left:"justify-start",center:"justify-center",right:"justify-end"},l=(u,c)=>u==="whatsapp"?`https://wa.me/${c.replace(/\D/g,"")}`:c.startsWith("http")?c:`https://${c}`;return i.jsx("div",{className:`flex gap-4 ${s[o]||"justify-center"}`,children:n.map(u=>i.jsx("a",{href:l(u.platform,u.url),target:"_blank",rel:"noopener noreferrer",style:{color:r},className:"transform hover:scale-110 transition-transform",children:Vo[u.platform]||i.jsx(Ot,{})},u.id))})};function Yt(e,t=[]){let n=[];function r(s,l){const u=a.createContext(l),c=n.length;n=[...n,l];function d(f){const{scope:h,children:m,...g}=f,y=h?.[e][c]||u,x=a.useMemo(()=>g,Object.values(g));return a.createElement(y.Provider,{value:x},m)}function p(f,h){const m=h?.[e][c]||u,g=a.useContext(m);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,p]}const o=()=>{const s=n.map(l=>a.createContext(l));return function(u){const c=u?.[e]||s;return a.useMemo(()=>({[`__scope${e}`]:{...u,[e]:c}}),[u,c])}};return o.scopeName=e,[r,Ho(o,...t)]}function Ho(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const l=r.reduce((u,{useScope:c,scopeName:d})=>{const f=c(s)[`__scope${d}`];return{...u,...f}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function Uo(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Kt(...e){return t=>e.forEach(n=>Uo(n,t))}function Qe(...e){return a.useCallback(Kt(...e),e)}const Ne=a.forwardRef((e,t)=>{const{children:n,...r}=e,o=a.Children.toArray(n),s=o.find(qo);if(s){const l=s.props.children,u=o.map(c=>c===s?a.Children.count(l)>1?a.Children.only(null):a.isValidElement(l)?l.props.children:null:c);return a.createElement(Ze,Y({},r,{ref:t}),a.isValidElement(l)?a.cloneElement(l,void 0,u):null)}return a.createElement(Ze,Y({},r,{ref:t}),n)});Ne.displayName="Slot";const Ze=a.forwardRef((e,t)=>{const{children:n,...r}=e;return a.isValidElement(n)?a.cloneElement(n,{...Wo(r,n.props),ref:t?Kt(t,n.ref):n.ref}):a.Children.count(n)>1?a.Children.only(null):null});Ze.displayName="SlotClone";const Go=({children:e})=>a.createElement(a.Fragment,null,e);function qo(e){return a.isValidElement(e)&&e.type===Go}function Wo(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...u)=>{s(...u),o(...u)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function Yo(e){const t=e+"CollectionProvider",[n,r]=Yt(t),[o,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),l=m=>{const{scope:g,children:y}=m,x=P.useRef(null),b=P.useRef(new Map).current;return P.createElement(o,{scope:g,itemMap:b,collectionRef:x},y)},u=e+"CollectionSlot",c=P.forwardRef((m,g)=>{const{scope:y,children:x}=m,b=s(u,y),v=Qe(g,b.collectionRef);return P.createElement(Ne,{ref:v},x)}),d=e+"CollectionItemSlot",p="data-radix-collection-item",f=P.forwardRef((m,g)=>{const{scope:y,children:x,...b}=m,v=P.useRef(null),E=Qe(g,v),C=s(d,y);return P.useEffect(()=>(C.itemMap.set(v,{ref:v,...b}),()=>void C.itemMap.delete(v))),P.createElement(Ne,{[p]:"",ref:E},x)});function h(m){const g=s(e+"CollectionConsumer",m);return P.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${p}]`));return Array.from(g.itemMap.values()).sort((C,$)=>b.indexOf(C.ref.current)-b.indexOf($.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:l,Slot:c,ItemSlot:f},h,r]}function Ko(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function Jt(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function Xt({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=Jo({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:r,u=Jt(n),c=a.useCallback(d=>{if(s){const f=typeof d=="function"?d(e):d;f!==e&&u(f)}else o(d)},[s,e,o,u]);return[l,c]}function Jo({defaultProp:e,onChange:t}){const n=a.useState(e),[r]=n,o=a.useRef(r),s=Jt(t);return a.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}const Xo=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Qt=Xo.reduce((e,t)=>{const n=a.forwardRef((r,o)=>{const{asChild:s,...l}=r,u=s?Ne:t;return a.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),a.createElement(u,Y({},l,{ref:o}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qo(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function Zo(e,t=[]){let n=[];function r(s,l){const u=a.createContext(l),c=n.length;n=[...n,l];function d(f){const{scope:h,children:m,...g}=f,y=h?.[e][c]||u,x=a.useMemo(()=>g,Object.values(g));return a.createElement(y.Provider,{value:x},m)}function p(f,h){const m=h?.[e][c]||u,g=a.useContext(m);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${f}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,p]}const o=()=>{const s=n.map(l=>a.createContext(l));return function(u){const c=u?.[e]||s;return a.useMemo(()=>({[`__scope${e}`]:{...u,[e]:c}}),[u,c])}};return o.scopeName=e,[r,es(o,...t)]}function es(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const l=r.reduce((u,{useScope:c,scopeName:d})=>{const f=c(s)[`__scope${d}`];return{...u,...f}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}function Zt(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function ts({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=ns({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:r,u=Zt(n),c=a.useCallback(d=>{if(s){const f=typeof d=="function"?d(e):d;f!==e&&u(f)}else o(d)},[s,e,o,u]);return[l,c]}function ns({defaultProp:e,onChange:t}){const n=a.useState(e),[r]=n,o=a.useRef(r),s=Zt(t);return a.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}const Ae=globalThis?.document?a.useLayoutEffect:()=>{};function rs(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function en(...e){return t=>e.forEach(n=>rs(n,t))}function tn(...e){return a.useCallback(en(...e),e)}const nn=a.forwardRef((e,t)=>{const{children:n,...r}=e,o=a.Children.toArray(n),s=o.find(ss);if(s){const l=s.props.children,u=o.map(c=>c===s?a.Children.count(l)>1?a.Children.only(null):a.isValidElement(l)?l.props.children:null:c);return a.createElement(et,Y({},r,{ref:t}),a.isValidElement(l)?a.cloneElement(l,void 0,u):null)}return a.createElement(et,Y({},r,{ref:t}),n)});nn.displayName="Slot";const et=a.forwardRef((e,t)=>{const{children:n,...r}=e;return a.isValidElement(n)?a.cloneElement(n,{...is(r,n.props),ref:t?en(t,n.ref):n.ref}):a.Children.count(n)>1?a.Children.only(null):null});et.displayName="SlotClone";const os=({children:e})=>a.createElement(a.Fragment,null,e);function ss(e){return a.isValidElement(e)&&e.type===os}function is(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...u)=>{s(...u),o(...u)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}const as=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],st=as.reduce((e,t)=>{const n=a.forwardRef((r,o)=>{const{asChild:s,...l}=r,u=s?nn:t;return a.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),a.createElement(u,Y({},l,{ref:o}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function cs(e,t){return a.useReducer((n,r)=>{const o=t[n][r];return o??n},e)}const rn=e=>{const{present:t,children:n}=e,r=ls(t),o=typeof n=="function"?n({present:r.isPresent}):a.Children.only(n),s=tn(r.ref,o.ref);return typeof n=="function"||r.isPresent?a.cloneElement(o,{ref:s}):null};rn.displayName="Presence";function ls(e){const[t,n]=a.useState(),r=a.useRef({}),o=a.useRef(e),s=a.useRef("none"),l=e?"mounted":"unmounted",[u,c]=cs(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const d=Ie(r.current);s.current=u==="mounted"?d:"none"},[u]),Ae(()=>{const d=r.current,p=o.current;if(p!==e){const h=s.current,m=Ie(d);e?c("MOUNT"):m==="none"||d?.display==="none"?c("UNMOUNT"):c(p&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Ae(()=>{if(t){const d=f=>{const m=Ie(r.current).includes(f.animationName);f.target===t&&m&&In.flushSync(()=>c("ANIMATION_END"))},p=f=>{f.target===t&&(s.current=Ie(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Ie(e){return e?.animationName||"none"}const us=jt.useId||(()=>{});let ds=0;function fs(e){const[t,n]=a.useState(us());return Ae(()=>{n(r=>r??String(ds++))},[e]),e||(t?`radix-${t}`:"")}const on="Collapsible",[ps,sn]=Zo(on),[hs,it]=ps(on),gs=a.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:s,onOpenChange:l,...u}=e,[c=!1,d]=ts({prop:r,defaultProp:o,onChange:l});return a.createElement(hs,{scope:n,disabled:s,contentId:fs(),open:c,onOpenToggle:a.useCallback(()=>d(p=>!p),[d])},a.createElement(st.div,Y({"data-state":at(c),"data-disabled":s?"":void 0},u,{ref:t})))}),ms="CollapsibleTrigger",xs=a.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=it(ms,n);return a.createElement(st.button,Y({type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":at(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled},r,{ref:t,onClick:Qo(e.onClick,o.onOpenToggle)}))}),an="CollapsibleContent",bs=a.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=it(an,e.__scopeCollapsible);return a.createElement(rn,{present:n||o.open},({present:s})=>a.createElement(vs,Y({},r,{ref:t,present:s})))}),vs=a.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...s}=e,l=it(an,n),[u,c]=a.useState(r),d=a.useRef(null),p=tn(t,d),f=a.useRef(0),h=f.current,m=a.useRef(0),g=m.current,y=l.open||u,x=a.useRef(y),b=a.useRef();return a.useEffect(()=>{const v=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(v)},[]),Ae(()=>{const v=d.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const E=v.getBoundingClientRect();f.current=E.height,m.current=E.width,x.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),c(r)}},[l.open,r]),a.createElement(st.div,Y({"data-state":at(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!y},s,{ref:p,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style}}),y&&o)});function at(e){return e?"open":"closed"}const ys=gs,Cs=xs,ws=bs,Ss=globalThis?.document?a.useLayoutEffect:()=>{},$s=jt.useId||(()=>{});let Es=0;function Ps(e){const[t,n]=a.useState($s());return Ss(()=>{n(r=>r??String(Es++))},[e]),t?`radix-${t}`:""}const Rs=a.createContext(void 0);function Ds(e){const t=a.useContext(Rs);return e||t||"ltr"}const he="Accordion",Ts=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ct,js,Is]=Yo(he),[Fe,hi]=Yt(he,[Is,sn]),lt=sn(),cn=P.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,s=r;return P.createElement(ct.Provider,{scope:e.__scopeAccordion},n==="multiple"?P.createElement(ks,Y({},s,{ref:t})):P.createElement(As,Y({},o,{ref:t})))});cn.propTypes={type(e){const t=e.value||e.defaultValue;return e.type&&!["single","multiple"].includes(e.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):e.type==="multiple"&&typeof t=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):e.type==="single"&&Array.isArray(t)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const[ln,Os]=Fe(he),[un,Ns]=Fe(he,{collapsible:!1}),As=P.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:s=!1,...l}=e,[u,c]=Xt({prop:n,defaultProp:r,onChange:o});return P.createElement(ln,{scope:e.__scopeAccordion,value:u?[u]:[],onItemOpen:c,onItemClose:P.useCallback(()=>s&&c(""),[s,c])},P.createElement(un,{scope:e.__scopeAccordion,collapsible:s},P.createElement(dn,Y({},l,{ref:t}))))}),ks=P.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...s}=e,[l=[],u]=Xt({prop:n,defaultProp:r,onChange:o}),c=P.useCallback(p=>u((f=[])=>[...f,p]),[u]),d=P.useCallback(p=>u((f=[])=>f.filter(h=>h!==p)),[u]);return P.createElement(ln,{scope:e.__scopeAccordion,value:l,onItemOpen:c,onItemClose:d},P.createElement(un,{scope:e.__scopeAccordion,collapsible:!0},P.createElement(dn,Y({},s,{ref:t}))))}),[_s,ze]=Fe(he),dn=P.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:s="vertical",...l}=e,u=P.useRef(null),c=Qe(u,t),d=js(n),f=Ds(o)==="ltr",h=Ko(e.onKeyDown,m=>{var g;if(!Ts.includes(m.key))return;const y=m.target,x=d().filter(T=>{var O;return!((O=T.ref.current)!==null&&O!==void 0&&O.disabled)}),b=x.findIndex(T=>T.ref.current===y),v=x.length;if(b===-1)return;m.preventDefault();let E=b;const C=0,$=v-1,j=()=>{E=b+1,E>$&&(E=C)},R=()=>{E=b-1,E<C&&(E=$)};switch(m.key){case"Home":E=C;break;case"End":E=$;break;case"ArrowRight":s==="horizontal"&&(f?j():R());break;case"ArrowDown":s==="vertical"&&j();break;case"ArrowLeft":s==="horizontal"&&(f?R():j());break;case"ArrowUp":s==="vertical"&&R();break}const w=E%v;(g=x[w].ref.current)===null||g===void 0||g.focus()});return P.createElement(_s,{scope:n,disabled:r,direction:o,orientation:s},P.createElement(ct.Slot,{scope:n},P.createElement(Qt.div,Y({},l,{"data-orientation":s,ref:c,onKeyDown:r?void 0:h}))))}),tt="AccordionItem",[Ms,ut]=Fe(tt),Ls=P.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,s=ze(tt,n),l=Os(tt,n),u=lt(n),c=Ps(),d=r&&l.value.includes(r)||!1,p=s.disabled||e.disabled;return P.createElement(Ms,{scope:n,open:d,disabled:p,triggerId:c},P.createElement(ys,Y({"data-orientation":s.orientation,"data-state":fn(d)},u,o,{ref:t,disabled:p,open:d,onOpenChange:f=>{f?l.onItemOpen(r):l.onItemClose(r)}})))}),Fs="AccordionHeader",zs=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=ze(he,n),s=ut(Fs,n);return P.createElement(Qt.h3,Y({"data-orientation":o.orientation,"data-state":fn(s.open),"data-disabled":s.disabled?"":void 0},r,{ref:t}))}),St="AccordionTrigger",Vs=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=ze(he,n),s=ut(St,n),l=Ns(St,n),u=lt(n);return P.createElement(ct.ItemSlot,{scope:n},P.createElement(Cs,Y({"aria-disabled":s.open&&!l.collapsible||void 0,"data-orientation":o.orientation,id:s.triggerId},u,r,{ref:t})))}),Bs="AccordionContent",Hs=P.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=ze(he,n),s=ut(Bs,n),l=lt(n);return P.createElement(ws,Y({role:"region","aria-labelledby":s.triggerId,"data-orientation":o.orientation},l,r,{ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}}))});function fn(e){return e?"open":"closed"}const Us=cn,Gs=Ls,qs=zs,pn=Vs,hn=Hs,Ws=Us,gn=P.forwardRef(({className:e,...t},n)=>i.jsx(Gs,{ref:n,className:$e("border-b",e),...t}));gn.displayName="AccordionItem";const mn=P.forwardRef(({className:e,children:t,...n},r)=>i.jsx(qs,{className:"flex",children:i.jsxs(pn,{ref:r,className:$e("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(Tt,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));mn.displayName=pn.displayName;const xn=P.forwardRef(({className:e,children:t,...n},r)=>i.jsx(hn,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:$e("pb-4 pt-0",e),children:t})}));xn.displayName=hn.displayName;const Ys=({packages:e,styles:t})=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 w-full",children:e.map(n=>i.jsxs(Nn,{className:"flex flex-col shadow-lg hover:shadow-xl transition-shadow duration-300",children:[i.jsxs(An,{children:[i.jsx(kn,{style:{color:t.headingColor},children:n.name}),i.jsx(_n,{style:{color:t.textColor},children:n.description})]}),i.jsxs(Mn,{className:"flex-grow",children:[i.jsxs("p",{className:"text-3xl font-bold mb-4",style:{color:t.accentColor},children:["R$ ",n.price_cash_pix]}),i.jsx("ul",{className:"space-y-2",children:(n.items_included||[]).map((r,o)=>i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ot,{className:"w-5 h-5 text-green-500"}),i.jsx("span",{style:{color:t.textColor},children:typeof r=="object"?r.name:r})]},o))})]}),i.jsx(Ln,{children:i.jsx(le,{className:"w-full",style:{backgroundColor:t.accentColor},children:"Selecionar Pacote"})})]},n.id))}),Ks=({packages:e,styles:t})=>i.jsx("div",{className:"overflow-x-auto w-full",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"py-3 px-6 text-left text-xs font-medium uppercase tracking-wider",style:{color:t.headingColor},children:"Recurso"}),e.map(n=>i.jsx("th",{className:"py-3 px-6 text-center text-xs font-medium uppercase tracking-wider",style:{color:t.headingColor},children:n.name},n.id))]})}),i.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[[...new Set(e.flatMap(n=>(n.items_included||[]).map(r=>typeof r=="object"?r.name:r)))].map((n,r)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-4 px-6 text-sm font-medium",style:{color:t.textColor},children:n}),e.map(o=>i.jsx("td",{className:"py-4 px-6 text-center text-sm",children:(o.items_included||[]).some(s=>(typeof s=="object"?s.name:s)===n)?i.jsx(ot,{className:"w-6 h-6 text-green-500 mx-auto"}):i.jsx("span",{className:"text-gray-400",children:"-"})},o.id))]},r)),i.jsxs("tr",{children:[i.jsx("td",{className:"py-4 px-6 text-sm font-medium",style:{color:t.headingColor},children:"Preço"}),e.map(n=>i.jsxs("td",{className:"py-4 px-6 text-center text-lg font-bold",style:{color:t.accentColor},children:["R$ ",n.price_cash_pix]},n.id))]}),i.jsxs("tr",{children:[i.jsx("td",{}),e.map(n=>i.jsx("td",{className:"py-4 px-6 text-center",children:i.jsx(le,{style:{backgroundColor:t.accentColor},children:"Selecionar"})},n.id))]})]})]})}),Js=({packages:e,styles:t})=>i.jsx(Ws,{type:"single",collapsible:!0,className:"w-full",children:e.map(n=>i.jsxs(gn,{value:`item-${n.id}`,children:[i.jsx(mn,{style:{color:t.headingColor},children:n.name}),i.jsx(xn,{children:i.jsxs("div",{className:"p-4",children:[i.jsxs("p",{className:"text-lg font-bold mb-4",style:{color:t.accentColor},children:["R$ ",n.price_cash_pix]}),i.jsx("p",{className:"mb-4",style:{color:t.textColor},children:n.description}),i.jsx("ul",{className:"space-y-2 mb-4",children:(n.items_included||[]).map((r,o)=>i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(ot,{className:"w-5 h-5 text-green-500"}),i.jsx("span",{style:{color:t.textColor},children:typeof r=="object"?r.name:r})]},o))}),i.jsx(le,{className:"w-full",style:{backgroundColor:t.accentColor},children:"Selecionar Pacote"})]})})]},n.id))}),Xs=({content:e,styles:t})=>{const{servicePackages:n}=On(),{packageIds:r=[],layout:o="grid",title:s}=e,l=(n||[]).filter(c=>r.includes(c.id));if(!l||l.length===0)return i.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Selecione os pacotes a serem exibidos no painel de edição."});const u=()=>{switch(o){case"table":return i.jsx(Ks,{packages:l,styles:t});case"accordion":return i.jsx(Js,{packages:l,styles:t});case"grid":default:return i.jsx(Ys,{packages:l,styles:t})}};return i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4",children:[s&&i.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",style:{color:t.headingColor},children:s}),u()]})},Qs=({block:e,viewMode:t="desktop",onHeightChange:n,isSelected:r})=>{const{content:o}=e,{styles:s}=Oe(e,t),l=a.useRef(null),[u,c]=a.useState(0),{src:d}=o,[p,f]=a.useState(null),[h,m]=a.useState(!1),[g,y]=a.useState(null),{toast:x}=Fn(),b=a.useRef(null),v=Xn(u,300);a.useEffect(()=>{l.current&&c(l.current.offsetWidth);const w=new ResizeObserver(T=>{T[0]&&c(T[0].contentRect.width)});return l.current&&w.observe(l.current),()=>w.disconnect()},[]);const E=a.useCallback(()=>{b.current&&n&&setTimeout(()=>{if(b.current){const w=b.current.scrollHeight;n(w)}},150)},[n]);a.useEffect(()=>{d&&(m(!0),y(null),f(null))},[d]),a.useEffect(()=>{p>0&&E()},[v,p,E]);const C=a.useCallback(({numPages:w})=>{f(w),m(!1),y(null),E()},[E]),$=a.useCallback(w=>{console.error("Erro ao carregar PDF:",w),y("Falha ao carregar o arquivo PDF. Verifique o link ou tente fazer o upload novamente."),m(!1),x({title:"Erro de PDF",description:"Não foi possível carregar o arquivo PDF. Verifique se o link é público e permite acesso CORS.",variant:"destructive"})},[x]),j=a.useMemo(()=>d?{url:d}:null,[d]),R={position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0,border:"none",zIndex:s?.zIndex||1,objectFit:"cover",overflow:"hidden",outline:r?"2px solid #3B82F6":"none",outlineOffset:"2px"};return d?i.jsxs("div",{ref:l,style:R,children:[h&&i.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[i.jsx(Vn,{className:"h-8 w-8 animate-spin text-primary"}),i.jsx("p",{className:"ml-2 mt-2",children:"Carregando PDF..."})]}),g&&!h&&i.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full text-red-600 p-4",children:[i.jsx(Bn,{className:"h-8 w-8 mb-2"}),i.jsx("p",{className:"text-center text-sm",children:g})]}),i.jsx("div",{ref:b,className:"w-full h-full",children:i.jsx(Br,{file:j,onLoadSuccess:C,onLoadError:$,loading:"",error:"",className:"flex flex-col items-center w-full h-full",children:p&&Array.from(new Array(p),(w,T)=>i.jsx(Zr,{pageNumber:T+1,width:u,renderAnnotationLayer:!1,renderTextLayer:!1,className:"mb-0"},`page_${T+1}`))})})]}):i.jsxs("div",{style:R,className:"bg-gray-100 flex flex-col items-center justify-center text-gray-500 border-2 border-dashed border-gray-300 rounded-md p-4 text-center",children:[i.jsx(zn,{size:48}),i.jsx("p",{className:"mt-2 text-sm font-semibold",children:"Fundo de PDF"}),i.jsx("p",{className:"text-xs mt-1",children:"Clique com o botão direito para fazer o upload."})]})},$t=({block:e,isSelected:t,updateBlock:n,viewMode:r="desktop",onPdfHeightChange:o})=>{const{type:s,content:l,animation:u={}}=e,{styles:c}=Oe(e,r),d={...c,position:"relative"},p={};return u.type&&u.type==="fade"&&(p.initial={opacity:0},p.animate={opacity:1},p.transition={duration:u.duration||.5}),i.jsx(rt.div,{style:d,...p,children:(()=>{switch(s){case"text":return i.jsx("p",{style:{color:c.color,textAlign:c.textAlign},children:l.text});case"heading":return l.level===2?i.jsx("h2",{style:{color:c.color,textAlign:c.textAlign},children:l.text}):l.level===3?i.jsx("h3",{style:{color:c.color,textAlign:c.textAlign},children:l.text}):i.jsx("h1",{style:{color:c.color,textAlign:c.textAlign},children:l.text});case"divider":return i.jsx("hr",{style:{borderColor:c.color,borderWidth:c.thickness,width:"100%"}});case"spacer":return i.jsx("div",{style:{height:`${l.height}px`,width:"100%"}});case"cover":return i.jsx("h1",{className:"canvas-h1",style:{color:c.color,textAlign:c.textAlign},children:l.title});case"testimonial":return i.jsx(Mo,{content:l,styles:c});case"faq":return i.jsx(Fo,{content:l,styles:c});case"cta":return i.jsx(zo,{content:l,styles:c});case"social":return i.jsx(Bo,{content:l,styles:c});case"packages":return i.jsx(Xs,{content:l,styles:c});case"pdf":return i.jsx(Qs,{block:e,viewMode:r,onHeightChange:o});case"image":return l.src?i.jsx("img",{src:l.src,alt:l.alt,style:{width:"100%"}}):i.jsxs("div",{className:"border border-dashed border-gray-400 p-4 text-center",children:[i.jsx(Un,{size:48}),i.jsx("p",{className:"mt-2 text-sm",children:"Arraste ou clique para enviar uma imagem."})]});case"button":return i.jsx("div",{style:{textAlign:c.textAlign},children:i.jsx(le,{style:{backgroundColor:c.backgroundColor,color:c.color},children:l.text})});case"list":return l.style==="ordered"?i.jsx("ol",{style:{color:c.color},children:l.items.map((f,h)=>i.jsx("li",{style:{marginBottom:"4px"},children:f},h))}):i.jsx("ul",{style:{color:c.color},children:l.items.map((f,h)=>i.jsxs("li",{style:{listStyleType:"none",display:"flex",alignItems:"center",marginBottom:"4px"},children:[l.listIcon==="square"?i.jsx(Qn,{size:16,style:{marginRight:"8px"}}):l.listIcon==="circle"?i.jsx(Hn,{size:16,style:{marginRight:"8px"}}):i.jsx(rr,{size:16,style:{marginRight:"8px"}}),f]},h))});case"box":return i.jsx("div",{style:{width:"100%",height:l.height||"100px",backgroundColor:c.backgroundColor||"#f0f0f0"}});default:return i.jsxs("div",{children:["Bloco desconhecido: ",s]})}})()})},se=8,Zs=({block:e,updateBlock:t,setSelectedBlock:n,isSelected:r,onContextMenu:o,sectionRef:s,otherBlocks:l,setSnapLines:u,viewMode:c,sectionId:d,onPdfHeightChange:p})=>{const{id:f,locked:h,type:m}=e,g=Oe(e,c),{position:y,size:x,styles:b}=g,[v,E]=a.useState(!1),C=a.useRef(null),$=a.useRef({isDragging:!1,startX:0,startY:0}),[{isDndDragging:j},R]=Eo(()=>({type:fe.POSITIONED_BLOCK,item:{id:f,sectionId:d},collect:I=>({isDndDragging:I.isDragging()})})),w=()=>{if(!s.current)return{x:0,y:0};const I=s.current.getBoundingClientRect(),A=parseFloat(y?.x)/100*I.width,z=parseFloat(y?.y)/100*I.height;return{x:A,y:z}},T=()=>{if(!s.current)return{width:300,height:200};const I=s.current.getBoundingClientRect(),A=x?.width==="auto"?"auto":parseFloat(x?.width)/100*I.width,z=x?.height==="auto"?"auto":parseFloat(x?.height)/100*I.height;return{width:A,height:z}},O=(I,A)=>{$.current={isDragging:!1,startX:A.x,startY:A.y}},G=(I,A)=>{if(!$.current.isDragging){const M=Math.abs(A.x-$.current.startX),H=Math.abs(A.y-$.current.startY);(M>5||H>5)&&($.current.isDragging=!0)}if(!$.current.isDragging||!s.current)return;const z=s.current.getBoundingClientRect(),V=C.current.getBoundingClientRect();let B=A.x,q=A.y;const ge=B+V.width,ae=q+V.height,L=B+V.width/2,me=q+V.height/2,K=[],N=z.width/2;Math.abs(L-N)<se&&(B=N-V.width/2,K.push({type:"vertical",position:N})),l.forEach(M=>{if(M.id===f)return;const H=document.querySelector(`[data-block-id="${M.id}"]`);if(!H||Oe(M,c).visible===!1)return;const ne=H.getBoundingClientRect(),Z=ne.left-z.left,ce=ne.top-z.top,de=Z+ne.width,oe=ce+ne.height,Pe=Z+ne.width/2,Re=ce+ne.height/2;Math.abs(B-Z)<se&&(B=Z,K.push({type:"vertical",position:Z})),Math.abs(ge-de)<se&&(B=de-V.width,K.push({type:"vertical",position:de})),Math.abs(L-Pe)<se&&(B=Pe-V.width/2,K.push({type:"vertical",position:Pe})),Math.abs(B-de)<se&&(B=de,K.push({type:"vertical",position:de})),Math.abs(ge-Z)<se&&(B=Z-V.width,K.push({type:"vertical",position:Z})),Math.abs(q-ce)<se&&(q=ce,K.push({type:"horizontal",position:ce})),Math.abs(ae-oe)<se&&(q=oe-V.height,K.push({type:"horizontal",position:oe})),Math.abs(me-Re)<se&&(q=Re-V.height/2,K.push({type:"horizontal",position:Re})),Math.abs(q-oe)<se&&(q=oe,K.push({type:"horizontal",position:oe})),Math.abs(ae-ce)<se&&(q=ce-V.height,K.push({type:"horizontal",position:ce}))}),u(K)},ee=(I,A)=>{if(!$.current.isDragging)I.preventDefault(),I.stopPropagation(),n(e);else{if(!s.current)return;const z=s.current.getBoundingClientRect(),V=A.x/z.width*100,B=A.y/z.height*100,q={x:`${V}%`,y:`${B}%`};t(f,{position:q},c)}u([]),$.current.isDragging=!1},S=(I,{size:A})=>{if(I.stopPropagation(),h||!s.current)return;E(!1);const z=s.current.getBoundingClientRect(),V=A.width/z.width*100,B=A.height/z.height*100,q={width:`${V}%`,height:x.height==="auto"?"auto":`${B}%`};t(f,{size:q},c)},D=I=>{I.stopPropagation(),h||E(!0)},[,U]=Wt(()=>({accept:fe.IMAGE_UPLOAD,drop:(I,A)=>{if(!A.didDrop()&&e.type==="image")return t(f,{content:{...e.content,src:I.url}},c),{droppedOnBlock:!0}}}),[f,e.type,t,c]),k=I=>{I.stopPropagation();const A=g.visible;t(f,{visible:A===void 0?!1:!A},c)},F=I=>{I.stopPropagation(),t(f,null)},X=I=>{I.preventDefault(),I.stopPropagation(),n(e),o(I,e)},te=w(),re=T();R(C);const ie=x?.height==="auto";return m==="pdf"?i.jsx("div",{onContextMenu:X,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:i.jsx($t,{block:e,viewMode:c,onPdfHeightChange:p,isSelected:r})}):i.jsx(Ao,{nodeRef:C,position:te,onStart:O,onDrag:G,onStop:ee,disabled:v||h||j,bounds:"parent",children:i.jsx("div",{ref:C,style:{position:"absolute",zIndex:b?.zIndex||10,cursor:v?"auto":h?"default":"move",width:x?.width,height:x?.height,visibility:g.visible===!1?"hidden":"visible",opacity:j?.5:1},onContextMenu:X,"data-block-id":f,children:i.jsx(ko.ResizableBox,{width:re.width==="auto"?1/0:re.width,height:ie?1/0:re.height,onResizeStart:D,onResizeStop:S,draggableOpts:{enableUserSelectHack:!1,disabled:!0},className:$e("box",ie&&"inline-block",v&&"resizing-active"),handle:r&&!h?void 0:i.jsx(i.Fragment,{}),axis:ie?"x":"both",minConstraints:e.type==="text"?[100,20]:[50,50],children:i.jsxs("div",{ref:U,className:"relative w-full h-full",style:{outline:r?"2px solid #3B82F6":"none",outlineOffset:"2px",transition:"outline 0.2s ease-in-out"},children:[i.jsx($t,{block:e,isSelected:r,updateBlock:t,viewMode:c,onPdfHeightChange:p}),r&&i.jsxs(i.Fragment,{children:[h&&i.jsx("div",{className:"absolute -top-3 -left-3 bg-primary text-primary-foreground p-1 rounded-full z-50",children:i.jsx(Gn,{size:12})}),i.jsxs("div",{className:"absolute top-0 right-0 -translate-y-full flex gap-1 z-50 bg-background p-1 rounded-t-md",children:[i.jsx(le,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:k,children:g.visible!==!1?i.jsx(tr,{size:12}):i.jsx(nr,{size:12})}),i.jsx(le,{variant:"destructive",size:"icon",className:"h-6 w-6",onClick:F,children:i.jsx(qn,{size:12})})]})]})]})})})})};function ei(e,t=1){if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0,0,0,${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${t})`}const ti=({onResize:e,onResizeStop:t})=>{const n=a.useRef(null),r=o=>{o.preventDefault();const s=o.clientY,l=n.current.parentElement.parentElement.getBoundingClientRect().height,u=d=>{requestAnimationFrame(()=>{const f=d.clientY-s;e(l+f)})},c=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c),t()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return i.jsx("div",{className:"w-full flex justify-center absolute -bottom-2 left-0 z-10",children:i.jsx("div",{ref:n,className:"w-full h-4 flex items-center justify-center cursor-ns-resize group/resizer",onMouseDown:r,children:i.jsx("div",{className:"w-10 h-1.5 bg-primary/40 rounded-full group-hover/resizer:bg-primary/70 transition-colors"})})})},ni=a.forwardRef(({section:e,blocks:t,setSelectedBlock:n,selectedBlockId:r,updateBlock:o,showGrid:s,viewMode:l,addBlock:u,onSectionResize:c,moveBlock:d,setProposal:p,onContextMenu:f,setSnapLines:h},m)=>{const g=a.useRef(null),y=a.useCallback(()=>l!=="desktop"&&e.layouts?.[l]?.height?e.layouts[l].height:e.height||500,[e,l]),[x,b]=a.useState(y());a.useEffect(()=>{b(y())},[e,l,y]);const v=S=>{p(D=>{const U=D.sections.map(k=>k.id===e.id?{...k,styles:{...k.styles,backgroundImage:`url(${S})`,backgroundSize:"cover",backgroundPosition:"center",zIndex:0}}:k);return{...D,sections:U}})},[{isOver:E,canDrop:C},$]=Wt(()=>({accept:[fe.BLOCK,fe.IMAGE_UPLOAD,fe.POSITIONED_BLOCK],drop:(S,D)=>{if(D.didDrop()||!g.current)return;const k=D.getClientOffset(),F=g.current.getBoundingClientRect(),X=S.url?JSON.parse(S.data):S;if(X.type==="pdf"){const te={...X,position:{x:"0%",y:"0%"},size:{width:"100%",height:"100%"},styles:{...X.styles,zIndex:1}};u(te,e.id)}else{const te=(k.x-F.left)/F.width*100,re=(k.y-F.top)/F.height*100,ie={x:`${te}%`,y:`${re}%`};D.getItemType()===fe.IMAGE_UPLOAD?v(S.url):D.getItemType()===fe.POSITIONED_BLOCK?S.sectionId!==e.id&&d(S.id,e.id,ie):u(X,e.id,ie)}return{droppedOnSection:!0}},collect:S=>({isOver:S.isOver({shallow:!0})&&S.canDrop(),canDrop:S.canDrop()})}),[u,d,e.id,p]);$(g);const j=S=>{b(S),c(e.id,S,!1,l)},R=()=>{c(e.id,x,!0,l)},w=a.useCallback((S,D)=>{c(e.id,D,!0,l)},[e.id,c,l]),T={...e.styles,position:"relative",width:"100%",height:`${x}px`,backgroundColor:ei(e.styles?.backgroundColor,e.styles?.backgroundOpacity),backgroundImage:e.styles?.backgroundImage?`url(${e.styles.backgroundImage})`:"none",backgroundSize:e.styles?.backgroundSize||"cover",backgroundPosition:e.styles?.backgroundPosition||"center",backgroundRepeat:e.styles?.backgroundRepeat||"no-repeat",overflow:"visible"},O=S=>{if(S.target===g.current){const D=y();n({id:e.id,type:"section",styles:e.styles,height:D,layouts:e.layouts})}},G=S=>{S.preventDefault(),S.stopPropagation();const D=y(),U={id:e.id,type:"section",styles:e.styles,height:D,layouts:e.layouts};n(U),f(S,U)},ee=t.find(S=>S.type==="pdf");return i.jsxs("div",{ref:m,className:"relative mb-4",children:[i.jsxs("div",{ref:g,className:$e("bg-background relative w-full",E&&C&&"bg-blue-50 dark:bg-blue-900/20"),style:T,onClick:O,onContextMenu:G,children:[s&&i.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:i.jsx("div",{className:"h-full w-full bg-transparent bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"})}),t.map(S=>i.jsx(Zs,{block:S,updateBlock:o,setSelectedBlock:n,isSelected:r===S.id,onContextMenu:f,sectionRef:g,otherBlocks:t.filter(D=>D.id!==S.id),setSnapLines:h,viewMode:l,sectionId:e.id,onPdfHeightChange:D=>w(S.id,D)},S.id)),!ee&&t.length===0&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground pointer-events-none",children:i.jsx("p",{children:"Arraste um bloco ou imagem para esta seção"})})]}),!ee&&i.jsx(ti,{onResize:j,onResizeStop:R})]})}),gi=a.forwardRef(({sections:e=[],blocksBySection:t={},addBlock:n,setSelectedBlock:r,selectedBlockId:o,updateBlock:s,showGrid:l,globalStyles:u,activeSection:c,viewMode:d,setProposal:p,onContextMenu:f,setSnapLines:h},m)=>{const g=a.useRef({}),y=(b,v,E,C)=>{p($=>{const j=$.sections.map(R=>{if(R.id!==b)return R;const w={...R};return C==="desktop"?w.height=v:(w.layouts||(w.layouts={}),w.layouts[C]||(w.layouts[C]={}),w.layouts[C].height=v),w.isResizing=!E,w});return{...$,sections:j}})},x=(b,v,E)=>{p(C=>{let $;const j={...C.blocksBySection};for(const R in j){const w=j[R].findIndex(T=>T.id===b);if(w>-1){[$]=j[R].splice(w,1);break}}return $&&($.position=E,j[v]||(j[v]=[]),j[v].push($)),{...C,blocksBySection:j}})};return i.jsx("div",{ref:m,className:"bg-white shadow-lg",style:{fontFamily:u?.fontFamily?.body},children:e.map(b=>i.jsx(ni,{ref:v=>g.current[b.id]=v,section:b,blocks:t[b.id]||[],setSelectedBlock:r,selectedBlockId:o,updateBlock:s,showGrid:l,viewMode:d,addBlock:n,onSectionResize:y,moveBlock:x,setProposal:p,onContextMenu:f,setSnapLines:h},b.id))})});export{Ws as A,eo as D,gi as E,Zn as F,fe as I,er as L,rr as M,sr as T,ir as Y,gn as a,mn as b,xn as c,pi as d,Wt as e,pe as i,Eo as u};
