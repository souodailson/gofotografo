import{af as f,r as t,j as e,ag as p,s as m}from"./index-Dk_dtFm9.js";import{E as x}from"./EditorCanvas-C3_kGIOa.js";import"./index-BoKBKUDC.js";import"./index-Chjiymov.js";import"./message-square-DVj0dikI.js";import"./link-DRQ5J5M1.js";import"./image-CwC-0FqU.js";import"./instagram-Fg2UEpj1.js";import"./extends-CF3RwP-h.js";import"./tiny-invariant-CopsF_GD.js";import"./useDebounce-DIc0r68V.js";import"./square-D1nPqsYL.js";const _=()=>{const{slug:a}=f(),[o,n]=t.useState(null),[d,l]=t.useState(!0),[c,r]=t.useState(null),u=t.useRef(null);return t.useEffect(()=>{(async()=>{if(!a){r("Slug da proposta não encontrado."),l(!1);return}try{const{data:s,error:i}=await m.from("propostas").select("dados_json, state").eq("slug",a).eq("is_published",!0).single();if(i)throw i;s?s.dados_json?n(s.dados_json):s.state?n(s.state):r("Proposta não encontrada ou não está publicada."):r("Proposta não encontrada ou não está publicada.")}catch(s){console.error("Error fetching proposal:",s),r("Ocorreu um erro ao carregar a proposta.")}finally{l(!1)}})()},[a]),d?e.jsx(p,{}):c?e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Erro"}),e.jsx("p",{className:"text-gray-700 mt-2",children:c})]})}):o?e.jsx("div",{className:"bg-muted/40 min-h-screen flex justify-center p-4 sm:p-8",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsx(x,{ref:u,sections:o.sections,blocksBySection:o.blocksBySection,globalStyles:o.theme,viewMode:"desktop",addBlock:()=>{},setSelectedBlock:()=>{},updateBlock:()=>{},setProposal:()=>{},onContextMenu:()=>{},setSnapLines:()=>{},showGrid:!1})})}):e.jsx(p,{})};export{_ as default};
