const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DofzNoMJ.js","assets/index-CunKvv0L.js","assets/index-Chjiymov.js","assets/index-u4fM27WV.js","assets/tooltip-Npi6ZfkR.js","assets/extends-CF3RwP-h.js","assets/eye-off-ZotTGElo.js","assets/eye-CLkVh5C4.js","assets/settings-SU7GZOaT.js","assets/useCardHoverEffect-BoO1WmHq.js","assets/skeleton-CxXvECCB.js","assets/receipt-BjZKziVQ.js","assets/landmark-CkJa-H9X.js","assets/shield-check-DxPyxv9d.js","assets/trending-down-DypAu7ES.js","assets/trending-up-CreaiblQ.js","assets/target-BE1imfqv.js","assets/PieChart-c2qmOR4V.js","assets/alert-dialog-CyCTn1Rm.js","assets/list-qjwlEBp4.js","assets/more-vertical-NVbx7jmS.js","assets/pen-square-DjD69RmB.js","assets/pt-BR-DPdF7AXa.js","assets/cake-CdFe_PrC.js","assets/progress-C_CULVeV.js","assets/badge-CB9TUEzb.js","assets/isSameMonth-QuxqadTY.js","assets/subMonths-DKu_pBp7.js","assets/grip-vertical-DjK3cswO.js","assets/Clients-n0XVTzOo.js","assets/link-DRqCWMGU.js","assets/search-DJ0MWB75.js","assets/filter-bDjvoz3v.js","assets/message-square-BHrUuIgQ.js","assets/ClientDetail-p0vrtNeA.js","assets/tabs-DvVXEx4S.js","assets/plus-circle-BQpYhEhU.js","assets/map-pin-C98yHJxC.js","assets/heart-CaMG6g2s.js","assets/image-D--rNG-v.js","assets/pen-line-BDJ-8p3Y.js","assets/upload-cloud-zI0c4CIs.js","assets/calendar-days-DeS4Cxds.js","assets/arrow-left-BPkF6hUk.js","assets/Workflow-DVK9GL9C.js","assets/dnd.esm-CiHmV878.js","assets/defineProperty-DbXIQDXj.js","assets/typeof-QjJsDpFa.js","assets/tiny-invariant-CopsF_GD.js","assets/align-justify-w0Hk3Mv4.js","assets/chevron-up-C5AgUm7g.js","assets/archive-CepoKPcH.js","assets/palette-BqqHNHB8.js","assets/list-checks-BVONg6PA.js","assets/Financial-DWfC13Zr.js","assets/hourglass-BCA-k1kC.js","assets/subDays-C8257tG3.js","assets/endOfDay-C8LREYbK.js","assets/startOfMonth-BO5BXU5u.js","assets/endOfMonth-DNVfFewk.js","assets/Calendar-BTtiVto7.js","assets/googleCalendar-BcGLC59Q.js","assets/FeatureRestrictionModal-ebqpNC7M.js","assets/popover-C-rkLDOH.js","assets/getDay-uly9qA0D.js","assets/constructNow---ucJfcM.js","assets/external-link-CbCzzkyM.js","assets/switch-z__RrrqR.js","assets/copy-DQ3NWdc1.js","assets/AvailabilityModal-CDCjr2FE.js","assets/Reports--ouoAo18.js","assets/jspdf.es.min-BPOGv60G.js","assets/jspdf.plugin.autotable-DtM0_LT_.js","assets/bar-chart-3-DyrYy3u-.js","assets/alert-circle-CyCnbfGM.js","assets/Settings-Cy8S9cle.js","assets/globe-CuYDJflF.js","assets/shield-DVrn6uZQ.js","assets/refresh-cw-DtQ0yJvr.js","assets/formatDistanceToNow-DUwD8m_3.js","assets/lightbulb-it4DvIRF.js","assets/AccountSettings-g7WpnK9q.js","assets/upload-BtJ5VHjN.js","assets/ServicePackages-CumO61BX.js","assets/MySetup-BhmgxTVG.js","assets/type-CEWgQnpA.js","assets/Precifique-DLJajTnU.js","assets/percent-CHgfO-p2.js","assets/ReservaInteligente-8m4hOhC5.js","assets/more-horizontal-DtlIbcem.js","assets/Boards-LazXavP_.js","assets/file-plus-BEzts9cG.js","assets/useDebounce-CubRa8jv.js","assets/BoardDetail-DlbOibGf.js","assets/square-OdZ_j_ck.js","assets/PlansPage-BVaptGyU.js","assets/star-DDKwyPx7.js","assets/FormsPage-dMkmUADS.js","assets/user-plus-kj37sEq6.js","assets/megaphone-CP8s9I_c.js","assets/FormSuccessModal-Co5P-OAB.js","assets/share-2-B4vbJ8gD.js","assets/FormEditorPage-CvvikPK-.js","assets/CampaignSubmissionsPage-DxCxVHUx.js","assets/StudioPage-OpVSCWN6.js","assets/heart-handshake-BobhzmYi.js","assets/ContractListPage-DtLAWRyn.js","assets/table-9OQ54_od.js","assets/ContractEditorPage-BsLU5aWg.js","assets/underline-ChNAJmpE.js","assets/ProposalEditorPage-CHLfglgV.js","assets/EditorRulers-BqnyH7B8.js","assets/EditorCanvas-B86ceyQT.js","assets/instagram-Cyo-vX5b.js","assets/EditorCanvas-BxwK8EBg.css","assets/html2canvas.esm-BfxBtG_O.js","assets/ban-D4ihlT2T.js","assets/BlogPage-D57KaYn0.js","assets/AvailabilityManagerPage-VeYBmhdj.js","assets/ReferralsPage-Bnxz7KDk.js","assets/LandingPage-l1kgzA98.js","assets/PrivacyPolicyPage-CMi_hhwz.js","assets/LoginPage-CkXFc41Y.js","assets/AuthLayout-BT-_UxdJ.js","assets/log-in-B0KCAdPT.js","assets/SignupPage-1N_DVcoK.js","assets/ForgotPasswordPage-ABOMymPw.js","assets/UpdatePasswordPage-3rQqAgGt.js","assets/AdminLoginPage-DSDAABUD.js","assets/AdminLayout-my4gXxTA.js","assets/PublicBookingPage-BQZeH4io.js","assets/BlogPostPage-D0rn2XGO.js","assets/ProposalEditorPage-P933SrGY.js","assets/CustomPageViewer-D73RmI4h.js","assets/TutorialsPage-XRCuwYkp.js","assets/ProposalPublicView-C4_jvdwM.js"])))=>i.map(i=>d[i]);
var bS=n=>{throw TypeError(n)};var pw=(n,e,t)=>e.has(n)||bS("Cannot "+t);var js=(n,e,t)=>(pw(n,e,"read from private field"),t?t.call(n):e.get(n)),ah=(n,e,t)=>e.has(n)?bS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),yp=(n,e,t,r)=>(pw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),uv=(n,e,t)=>(pw(n,e,"access private method"),t);var xS=(n,e,t,r)=>({set _(i){yp(n,e,i,t)},get _(){return js(n,e,r)}});function GC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function AN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mw={exports:{}},wp={},gw={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS;function EN(){if(SS)return yt;SS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function C($,ie,Z){this.props=$,this.context=ie,this.refs=x,this.updater=Z||b}C.prototype.isReactComponent={},C.prototype.setState=function($,ie){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ie,"setState")},C.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function P(){}P.prototype=C.prototype;function I($,ie,Z){this.props=$,this.context=ie,this.refs=x,this.updater=Z||b}var R=I.prototype=new P;R.constructor=I,S(R,C.prototype),R.isPureReactComponent=!0;var M=Array.isArray,N=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function H($,ie,Z){var Re,Ae={},Ie=null,ve=null;if(ie!=null)for(Re in ie.ref!==void 0&&(ve=ie.ref),ie.key!==void 0&&(Ie=""+ie.key),ie)N.call(ie,Re)&&!B.hasOwnProperty(Re)&&(Ae[Re]=ie[Re]);var Ne=arguments.length-2;if(Ne===1)Ae.children=Z;else if(1<Ne){for(var He=Array(Ne),Xe=0;Xe<Ne;Xe++)He[Xe]=arguments[Xe+2];Ae.children=He}if($&&$.defaultProps)for(Re in Ne=$.defaultProps,Ne)Ae[Re]===void 0&&(Ae[Re]=Ne[Re]);return{$$typeof:n,type:$,key:Ie,ref:ve,props:Ae,_owner:F.current}}function K($,ie){return{$$typeof:n,type:$.type,key:ie,ref:$.ref,props:$.props,_owner:$._owner}}function le($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function me($){var ie={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Z){return ie[Z]})}var he=/\/+/g;function de($,ie){return typeof $=="object"&&$!==null&&$.key!=null?me(""+$.key):ie.toString(36)}function fe($,ie,Z,Re,Ae){var Ie=typeof $;(Ie==="undefined"||Ie==="boolean")&&($=null);var ve=!1;if($===null)ve=!0;else switch(Ie){case"string":case"number":ve=!0;break;case"object":switch($.$$typeof){case n:case e:ve=!0}}if(ve)return ve=$,Ae=Ae(ve),$=Re===""?"."+de(ve,0):Re,M(Ae)?(Z="",$!=null&&(Z=$.replace(he,"$&/")+"/"),fe(Ae,ie,Z,"",function(Xe){return Xe})):Ae!=null&&(le(Ae)&&(Ae=K(Ae,Z+(!Ae.key||ve&&ve.key===Ae.key?"":(""+Ae.key).replace(he,"$&/")+"/")+$)),ie.push(Ae)),1;if(ve=0,Re=Re===""?".":Re+":",M($))for(var Ne=0;Ne<$.length;Ne++){Ie=$[Ne];var He=Re+de(Ie,Ne);ve+=fe(Ie,ie,Z,He,Ae)}else if(He=v($),typeof He=="function")for($=He.call($),Ne=0;!(Ie=$.next()).done;)Ie=Ie.value,He=Re+de(Ie,Ne++),ve+=fe(Ie,ie,Z,He,Ae);else if(Ie==="object")throw ie=String($),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return ve}function z($,ie,Z){if($==null)return $;var Re=[],Ae=0;return fe($,Re,"","",function(Ie){return ie.call(Z,Ie,Ae++)}),Re}function q($){if($._status===-1){var ie=$._result;ie=ie(),ie.then(function(Z){($._status===0||$._status===-1)&&($._status=1,$._result=Z)},function(Z){($._status===0||$._status===-1)&&($._status=2,$._result=Z)}),$._status===-1&&($._status=0,$._result=ie)}if($._status===1)return $._result.default;throw $._result}var re={current:null},U={transition:null},ne={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:U,ReactCurrentOwner:F};function Q(){throw Error("act(...) is not supported in production builds of React.")}return yt.Children={map:z,forEach:function($,ie,Z){z($,function(){ie.apply(this,arguments)},Z)},count:function($){var ie=0;return z($,function(){ie++}),ie},toArray:function($){return z($,function(ie){return ie})||[]},only:function($){if(!le($))throw Error("React.Children.only expected to receive a single React element child.");return $}},yt.Component=C,yt.Fragment=t,yt.Profiler=i,yt.PureComponent=I,yt.StrictMode=r,yt.Suspense=d,yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,yt.act=Q,yt.cloneElement=function($,ie,Z){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Re=S({},$.props),Ae=$.key,Ie=$.ref,ve=$._owner;if(ie!=null){if(ie.ref!==void 0&&(Ie=ie.ref,ve=F.current),ie.key!==void 0&&(Ae=""+ie.key),$.type&&$.type.defaultProps)var Ne=$.type.defaultProps;for(He in ie)N.call(ie,He)&&!B.hasOwnProperty(He)&&(Re[He]=ie[He]===void 0&&Ne!==void 0?Ne[He]:ie[He])}var He=arguments.length-2;if(He===1)Re.children=Z;else if(1<He){Ne=Array(He);for(var Xe=0;Xe<He;Xe++)Ne[Xe]=arguments[Xe+2];Re.children=Ne}return{$$typeof:n,type:$.type,key:Ae,ref:Ie,props:Re,_owner:ve}},yt.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:s,_context:$},$.Consumer=$},yt.createElement=H,yt.createFactory=function($){var ie=H.bind(null,$);return ie.type=$,ie},yt.createRef=function(){return{current:null}},yt.forwardRef=function($){return{$$typeof:l,render:$}},yt.isValidElement=le,yt.lazy=function($){return{$$typeof:f,_payload:{_status:-1,_result:$},_init:q}},yt.memo=function($,ie){return{$$typeof:h,type:$,compare:ie===void 0?null:ie}},yt.startTransition=function($){var ie=U.transition;U.transition={};try{$()}finally{U.transition=ie}},yt.unstable_act=Q,yt.useCallback=function($,ie){return re.current.useCallback($,ie)},yt.useContext=function($){return re.current.useContext($)},yt.useDebugValue=function(){},yt.useDeferredValue=function($){return re.current.useDeferredValue($)},yt.useEffect=function($,ie){return re.current.useEffect($,ie)},yt.useId=function(){return re.current.useId()},yt.useImperativeHandle=function($,ie,Z){return re.current.useImperativeHandle($,ie,Z)},yt.useInsertionEffect=function($,ie){return re.current.useInsertionEffect($,ie)},yt.useLayoutEffect=function($,ie){return re.current.useLayoutEffect($,ie)},yt.useMemo=function($,ie){return re.current.useMemo($,ie)},yt.useReducer=function($,ie,Z){return re.current.useReducer($,ie,Z)},yt.useRef=function($){return re.current.useRef($)},yt.useState=function($){return re.current.useState($)},yt.useSyncExternalStore=function($,ie,Z){return re.current.useSyncExternalStore($,ie,Z)},yt.useTransition=function(){return re.current.useTransition()},yt.version="18.3.1",yt}var AS;function Cy(){return AS||(AS=1,gw.exports=EN()),gw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function CN(){if(ES)return wp;ES=1;var n=Cy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,h){var f,m={},v=null,b=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(b=d.ref);for(f in d)r.call(d,f)&&!s.hasOwnProperty(f)&&(m[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:e,type:l,key:v,ref:b,props:m,_owner:i.current}}return wp.Fragment=t,wp.jsx=o,wp.jsxs=o,wp}var CS;function kN(){return CS||(CS=1,mw.exports=CN()),mw.exports}var y=kN(),A=Cy();const lt=Sm(A),fb=GC({__proto__:null,default:lt},[A]);var dv={},vw={exports:{}},ci={},yw={exports:{}},ww={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS;function TN(){return kS||(kS=1,function(n){function e(U,ne){var Q=U.length;U.push(ne);e:for(;0<Q;){var $=Q-1>>>1,ie=U[$];if(0<i(ie,ne))U[$]=ne,U[Q]=ie,Q=$;else break e}}function t(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ne=U[0],Q=U.pop();if(Q!==ne){U[0]=Q;e:for(var $=0,ie=U.length,Z=ie>>>1;$<Z;){var Re=2*($+1)-1,Ae=U[Re],Ie=Re+1,ve=U[Ie];if(0>i(Ae,Q))Ie<ie&&0>i(ve,Ae)?(U[$]=ve,U[Ie]=Q,$=Ie):(U[$]=Ae,U[Re]=Q,$=Re);else if(Ie<ie&&0>i(ve,Q))U[$]=ve,U[Ie]=Q,$=Ie;else break e}}return ne}function i(U,ne){var Q=U.sortIndex-ne.sortIndex;return Q!==0?Q:U.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var d=[],h=[],f=1,m=null,v=3,b=!1,S=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(U){for(var ne=t(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=U)r(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=t(h)}}function M(U){if(x=!1,R(U),!S)if(t(d)!==null)S=!0,q(N);else{var ne=t(h);ne!==null&&re(M,ne.startTime-U)}}function N(U,ne){S=!1,x&&(x=!1,P(H),H=-1),b=!0;var Q=v;try{for(R(ne),m=t(d);m!==null&&(!(m.expirationTime>ne)||U&&!me());){var $=m.callback;if(typeof $=="function"){m.callback=null,v=m.priorityLevel;var ie=$(m.expirationTime<=ne);ne=n.unstable_now(),typeof ie=="function"?m.callback=ie:m===t(d)&&r(d),R(ne)}else r(d);m=t(d)}if(m!==null)var Z=!0;else{var Re=t(h);Re!==null&&re(M,Re.startTime-ne),Z=!1}return Z}finally{m=null,v=Q,b=!1}}var F=!1,B=null,H=-1,K=5,le=-1;function me(){return!(n.unstable_now()-le<K)}function he(){if(B!==null){var U=n.unstable_now();le=U;var ne=!0;try{ne=B(!0,U)}finally{ne?de():(F=!1,B=null)}}else F=!1}var de;if(typeof I=="function")de=function(){I(he)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,z=fe.port2;fe.port1.onmessage=he,de=function(){z.postMessage(null)}}else de=function(){C(he,0)};function q(U){B=U,F||(F=!0,de())}function re(U,ne){H=C(function(){U(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,q(N))},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(U){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var Q=v;v=ne;try{return U()}finally{v=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=v;v=U;try{return ne()}finally{v=Q}},n.unstable_scheduleCallback=function(U,ne,Q){var $=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?$+Q:$):Q=$,U){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,U={id:f++,callback:ne,priorityLevel:U,startTime:Q,expirationTime:ie,sortIndex:-1},Q>$?(U.sortIndex=Q,e(h,U),t(d)===null&&U===t(h)&&(x?(P(H),H=-1):x=!0,re(M,Q-$))):(U.sortIndex=ie,e(d,U),S||b||(S=!0,q(N))),U},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(U){var ne=v;return function(){var Q=v;v=ne;try{return U.apply(this,arguments)}finally{v=Q}}}}(ww)),ww}var TS;function PN(){return TS||(TS=1,yw.exports=TN()),yw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function RN(){if(PS)return ci;PS=1;var n=Cy(),e=PN();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)r.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function v(a){return d.call(m,a)?!0:d.call(f,a)?!1:h.test(a)?m[a]=!0:(f[a]=!0,!1)}function b(a,c,g,w){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function S(a,c,g,w){if(c===null||typeof c>"u"||b(a,c,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(a,c,g,w,E,k,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=a,this.type=c,this.sanitizeURL=k,this.removeEmptyString=O}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new x(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];C[c]=new x(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new x(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new x(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new x(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new x(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new x(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new x(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new x(a,5,!1,a.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function I(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(P,I);C[c]=new x(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(P,I);C[c]=new x(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(P,I);C[c]=new x(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new x(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new x(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,c,g,w){var E=C.hasOwnProperty(c)?C[c]:null;(E!==null?E.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,g,E,w)&&(g=null),w||E===null?v(c)&&(g===null?a.removeAttribute(c):a.setAttribute(c,""+g)):E.mustUseProperty?a[E.propertyName]=g===null?E.type===3?!1:"":g:(c=E.attributeName,w=E.attributeNamespace,g===null?a.removeAttribute(c):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,w?a.setAttributeNS(w,c,g):a.setAttribute(c,g))))}var M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),me=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),U=Symbol.iterator;function ne(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var Q=Object.assign,$;function ie(a){if($===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);$=c&&c[1]||""}return`
`+$+a}var Z=!1;function Re(a,c){if(!a||Z)return"";Z=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ue){var w=ue}Reflect.construct(a,[],c)}else{try{c.call()}catch(ue){w=ue}a.call(c.prototype)}else{try{throw Error()}catch(ue){w=ue}a()}}catch(ue){if(ue&&w&&typeof ue.stack=="string"){for(var E=ue.stack.split(`
`),k=w.stack.split(`
`),O=E.length-1,V=k.length-1;1<=O&&0<=V&&E[O]!==k[V];)V--;for(;1<=O&&0<=V;O--,V--)if(E[O]!==k[V]){if(O!==1||V!==1)do if(O--,V--,0>V||E[O]!==k[V]){var G=`
`+E[O].replace(" at new "," at ");return a.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",a.displayName)),G}while(1<=O&&0<=V);break}}}finally{Z=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?ie(a):""}function Ae(a){switch(a.tag){case 5:return ie(a.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return a=Re(a.type,!1),a;case 11:return a=Re(a.type.render,!1),a;case 1:return a=Re(a.type,!0),a;default:return""}}function Ie(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case B:return"Fragment";case F:return"Portal";case K:return"Profiler";case H:return"StrictMode";case de:return"Suspense";case fe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case me:return(a.displayName||"Context")+".Consumer";case le:return(a._context.displayName||"Context")+".Provider";case he:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return c=a.displayName||null,c!==null?c:Ie(a.type)||"Memo";case q:c=a._payload,a=a._init;try{return Ie(a(c))}catch{}}return null}function ve(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(c);case 8:return c===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ne(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function He(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Xe(a){var c=He(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),w=""+a[c];if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,k=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return E.call(this)},set:function(O){w=""+O,k.call(this,O)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(O){w=""+O},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function at(a){a._valueTracker||(a._valueTracker=Xe(a))}function Ot(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var g=c.getValue(),w="";return a&&(w=He(a)?a.checked?"true":"false":a.value),a=w,a!==g?(c.setValue(a),!0):!1}function mn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Qt(a,c){var g=c.checked;return Q({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function Gr(a,c){var g=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;g=Ne(c.value!=null?c.value:g),a._wrapperState={initialChecked:w,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function zi(a,c){c=c.checked,c!=null&&R(a,"checked",c,!1)}function Ln(a,c){zi(a,c);var g=Ne(c.value),w=c.type;if(g!=null)w==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Hl(a,c.type,g):c.hasOwnProperty("defaultValue")&&Hl(a,c.type,Ne(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Wl(a,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,g||c===a.value||(a.value=c),a.defaultValue=c}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function Hl(a,c,g){(c!=="number"||mn(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var wi=Array.isArray;function Tn(a,c,g,w){if(a=a.options,c){c={};for(var E=0;E<g.length;E++)c["$"+g[E]]=!0;for(g=0;g<a.length;g++)E=c.hasOwnProperty("$"+a[g].value),a[g].selected!==E&&(a[g].selected=E),E&&w&&(a[g].defaultSelected=!0)}else{for(g=""+Ne(g),c=null,E=0;E<a.length;E++){if(a[E].value===g){a[E].selected=!0,w&&(a[E].defaultSelected=!0);return}c!==null||a[E].disabled||(c=a[E])}c!==null&&(c.selected=!0)}}function ps(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Do(a,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(t(92));if(wi(g)){if(1<g.length)throw Error(t(93));g=g[0]}c=g}c==null&&(c=""),g=c}a._wrapperState={initialValue:Ne(g)}}function Du(a,c){var g=Ne(c.value),w=Ne(c.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),c.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),w!=null&&(a.defaultValue=""+w)}function Bi(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function ql(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ms(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?ql(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var _i,Ia=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,w,E){MSApp.execUnsafeLocalFunction(function(){return a(c,g,w,E)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(_i=_i||document.createElement("div"),_i.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=_i.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function gs(a,c){if(c){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=c;return}}a.textContent=c}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gl=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(a){Gl.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),vs[c]=vs[a]})});function Ma(a,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||vs.hasOwnProperty(a)&&vs[a]?(""+c).trim():c+"px"}function Da(a,c){a=a.style;for(var g in c)if(c.hasOwnProperty(g)){var w=g.indexOf("--")===0,E=Ma(g,c[g],w);g==="float"&&(g="cssFloat"),w?a.setProperty(g,E):a[g]=E}}var Kl=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oo(a,c){if(c){if(Kl[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function No(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yl=null;function Xl(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zl=null,ys=null,ws=null;function Ou(a){if(a=Yn(a)){if(typeof Zl!="function")throw Error(t(280));var c=a.stateNode;c&&(c=hd(c),Zl(a.stateNode,a.type,c))}}function Nu(a){ys?ws?ws.push(a):ws=[a]:ys=a}function Lu(){if(ys){var a=ys,c=ws;if(ws=ys=null,Ou(a),c)for(a=0;a<c.length;a++)Ou(c[a])}}function ju(a,c){return a(c)}function Jl(){}var Ql=!1;function Fu(a,c,g){if(Ql)return a(c,g);Ql=!0;try{return ju(a,c,g)}finally{Ql=!1,(ys!==null||ws!==null)&&(Jl(),Lu())}}function Lo(a,c){var g=a.stateNode;if(g===null)return null;var w=hd(g);if(w===null)return null;g=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,c,typeof g));return g}var jo=!1;if(l)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){jo=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{jo=!1}function ec(a,c,g,w,E,k,O,V,G){var ue=Array.prototype.slice.call(arguments,3);try{c.apply(g,ue)}catch(Ee){this.onError(Ee)}}var $o=!1,Oa=null,Na=!1,tc=null,Zh={onError:function(a){$o=!0,Oa=a}};function $m(a,c,g,w,E,k,O,V,G){$o=!1,Oa=null,ec.apply(Zh,arguments)}function zm(a,c,g,w,E,k,O,V,G){if($m.apply(this,arguments),$o){if($o){var ue=Oa;$o=!1,Oa=null}else throw Error(t(198));Na||(Na=!0,tc=ue)}}function Ks(a){var c=a,g=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(g=c.return),a=c.return;while(a)}return c.tag===3?g:null}function nc(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function ce(a){if(Ks(a)!==a)throw Error(t(188))}function J(a){var c=a.alternate;if(!c){if(c=Ks(a),c===null)throw Error(t(188));return c!==a?null:a}for(var g=a,w=c;;){var E=g.return;if(E===null)break;var k=E.alternate;if(k===null){if(w=E.return,w!==null){g=w;continue}break}if(E.child===k.child){for(k=E.child;k;){if(k===g)return ce(E),a;if(k===w)return ce(E),c;k=k.sibling}throw Error(t(188))}if(g.return!==w.return)g=E,w=k;else{for(var O=!1,V=E.child;V;){if(V===g){O=!0,g=E,w=k;break}if(V===w){O=!0,w=E,g=k;break}V=V.sibling}if(!O){for(V=k.child;V;){if(V===g){O=!0,g=k,w=E;break}if(V===w){O=!0,w=k,g=E;break}V=V.sibling}if(!O)throw Error(t(189))}}if(g.alternate!==w)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:c}function pe(a){return a=J(a),a!==null?be(a):null}function be(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=be(a);if(c!==null)return c;a=a.sibling}return null}var we=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,bt=e.unstable_shouldYield,jn=e.unstable_requestPaint,Ct=e.unstable_now,La=e.unstable_getCurrentPriorityLevel,rc=e.unstable_ImmediatePriority,Bm=e.unstable_UserBlockingPriority,ic=e.unstable_NormalPriority,Um=e.unstable_LowPriority,Jh=e.unstable_IdlePriority,$u=null,Ui=null;function g0(a){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot($u,a,void 0,(a.current.flags&128)===128)}catch{}}var bi=Math.clz32?Math.clz32:Hm,Vm=Math.log,Wm=Math.LN2;function Hm(a){return a>>>=0,a===0?32:31-(Vm(a)/Wm|0)|0}var ja=64,zu=4194304;function Fa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function zo(a,c){var g=a.pendingLanes;if(g===0)return 0;var w=0,E=a.suspendedLanes,k=a.pingedLanes,O=g&268435455;if(O!==0){var V=O&~E;V!==0?w=Fa(V):(k&=O,k!==0&&(w=Fa(k)))}else O=g&~E,O!==0?w=Fa(O):k!==0&&(w=Fa(k));if(w===0)return 0;if(c!==0&&c!==w&&(c&E)===0&&(E=w&-w,k=c&-c,E>=k||E===16&&(k&4194240)!==0))return c;if((w&4)!==0&&(w|=g&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=w;0<c;)g=31-bi(c),E=1<<g,w|=a[g],c&=~E;return w}function qm(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v0(a,c){for(var g=a.suspendedLanes,w=a.pingedLanes,E=a.expirationTimes,k=a.pendingLanes;0<k;){var O=31-bi(k),V=1<<O,G=E[O];G===-1?((V&g)===0||(V&w)!==0)&&(E[O]=qm(V,c)):G<=c&&(a.expiredLanes|=V),k&=~V}}function Bu(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qh(){var a=ja;return ja<<=1,(ja&4194240)===0&&(ja=64),a}function sc(a){for(var c=[],g=0;31>g;g++)c.push(a);return c}function oc(a,c,g){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-bi(c),a[c]=g}function Gm(a,c){var g=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<g;){var E=31-bi(g),k=1<<E;c[E]=0,w[E]=-1,a[E]=-1,g&=~k}}function ac(a,c){var g=a.entangledLanes|=c;for(a=a.entanglements;g;){var w=31-bi(g),E=1<<w;E&c|a[w]&c&&(a[w]|=c),g&=~E}}var Rt=0;function Bo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var ef,Uu,Km,tf,nf,Vu=!1,lc=[],Ys=null,Xs=null,Zs=null,$a=new Map,cc=new Map,Js=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ym(a,c){switch(a){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":$a.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(c.pointerId)}}function Uo(a,c,g,w,E,k){return a===null||a.nativeEvent!==k?(a={blockedOn:c,domEventName:g,eventSystemFlags:w,nativeEvent:k,targetContainers:[E]},c!==null&&(c=Yn(c),c!==null&&Uu(c)),a):(a.eventSystemFlags|=w,c=a.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),a)}function w0(a,c,g,w,E){switch(c){case"focusin":return Ys=Uo(Ys,a,c,g,w,E),!0;case"dragenter":return Xs=Uo(Xs,a,c,g,w,E),!0;case"mouseover":return Zs=Uo(Zs,a,c,g,w,E),!0;case"pointerover":var k=E.pointerId;return $a.set(k,Uo($a.get(k)||null,a,c,g,w,E)),!0;case"gotpointercapture":return k=E.pointerId,cc.set(k,Uo(cc.get(k)||null,a,c,g,w,E)),!0}return!1}function Xm(a){var c=qi(a.target);if(c!==null){var g=Ks(c);if(g!==null){if(c=g.tag,c===13){if(c=nc(g),c!==null){a.blockedOn=c,nf(a.priority,function(){Km(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Wu(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var g=Gu(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var w=new g.constructor(g.type,g);Yl=w,g.target.dispatchEvent(w),Yl=null}else return c=Yn(g),c!==null&&Uu(c),a.blockedOn=g,!1;c.shift()}return!0}function Zm(a,c,g){Wu(a)&&g.delete(c)}function _0(){Vu=!1,Ys!==null&&Wu(Ys)&&(Ys=null),Xs!==null&&Wu(Xs)&&(Xs=null),Zs!==null&&Wu(Zs)&&(Zs=null),$a.forEach(Zm),cc.forEach(Zm)}function Nt(a,c){a.blockedOn===c&&(a.blockedOn=null,Vu||(Vu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_0)))}function Mt(a){function c(E){return Nt(E,a)}if(0<lc.length){Nt(lc[0],a);for(var g=1;g<lc.length;g++){var w=lc[g];w.blockedOn===a&&(w.blockedOn=null)}}for(Ys!==null&&Nt(Ys,a),Xs!==null&&Nt(Xs,a),Zs!==null&&Nt(Zs,a),$a.forEach(c),cc.forEach(c),g=0;g<Js.length;g++)w=Js[g],w.blockedOn===a&&(w.blockedOn=null);for(;0<Js.length&&(g=Js[0],g.blockedOn===null);)Xm(g),g.blockedOn===null&&Js.shift()}var za=M.ReactCurrentBatchConfig,Hu=!0;function b0(a,c,g,w){var E=Rt,k=za.transition;za.transition=null;try{Rt=1,rf(a,c,g,w)}finally{Rt=E,za.transition=k}}function x0(a,c,g,w){var E=Rt,k=za.transition;za.transition=null;try{Rt=4,rf(a,c,g,w)}finally{Rt=E,za.transition=k}}function rf(a,c,g,w){if(Hu){var E=Gu(a,c,g,w);if(E===null)bf(a,c,w,qu,g),Ym(a,w);else if(w0(E,a,c,g,w))w.stopPropagation();else if(Ym(a,w),c&4&&-1<y0.indexOf(a)){for(;E!==null;){var k=Yn(E);if(k!==null&&ef(k),k=Gu(a,c,g,w),k===null&&bf(a,c,w,qu,g),k===E)break;E=k}E!==null&&w.stopPropagation()}else bf(a,c,w,null,g)}}var qu=null;function Gu(a,c,g,w){if(qu=null,a=Xl(w),a=qi(a),a!==null)if(c=Ks(a),c===null)a=null;else if(g=c.tag,g===13){if(a=nc(c),a!==null)return a;a=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return qu=a,null}function Jm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(La()){case rc:return 1;case Bm:return 4;case ic:case Um:return 16;case Jh:return 536870912;default:return 16}default:return 16}}var Gt=null,uc=null,Vi=null;function sf(){if(Vi)return Vi;var a,c=uc,g=c.length,w,E="value"in Gt?Gt.value:Gt.textContent,k=E.length;for(a=0;a<g&&c[a]===E[a];a++);var O=g-a;for(w=1;w<=O&&c[g-w]===E[k-w];w++);return Vi=E.slice(a,1<w?1-w:void 0)}function Ba(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function ar(){return!0}function of(){return!1}function vr(a){function c(g,w,E,k,O){this._reactName=g,this._targetInst=E,this.type=w,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(g=a[V],this[V]=g?g(k):k[V]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ar:of,this.isPropagationStopped=of,this}return Q(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),c}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=vr(Vo),Ua=Q({},Vo,{view:0,detail:0}),Qm=vr(Ua),lr,af,Gn,Yu=Q({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Gn&&(Gn&&a.type==="mousemove"?(lr=a.screenX-Gn.screenX,af=a.screenY-Gn.screenY):af=lr=0,Gn=a),lr)},movementY:function(a){return"movementY"in a?a.movementY:af}}),lf=vr(Yu),Qs=Q({},Yu,{dataTransfer:0}),Xu=vr(Qs),cf=Q({},Ua,{relatedTarget:0}),Bt=vr(cf),eo=Q({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),uf=vr(eo),S0=Q({},Vo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),df=vr(S0),A0=Q({},Vo,{data:0}),eg=vr(A0),E0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Va(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Zu[a])?!!c[a]:!1}function hf(){return Va}var ng=Q({},Ua,{key:function(a){if(a.key){var c=E0[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ba(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?tg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hf,charCode:function(a){return a.type==="keypress"?Ba(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ba(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),rg=vr(ng),ff=Q({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=vr(ff),ig=Q({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hf}),C0=vr(ig),pf=Q({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mf=vr(pf),k0=Q({},Yu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),sg=vr(k0),Rr=[9,13,27,32],dc=l&&"CompositionEvent"in window,_s=null;l&&"documentMode"in document&&(_s=document.documentMode);var og=l&&"TextEvent"in window&&!_s,gf=l&&(!dc||_s&&8<_s&&11>=_s),ag=" ",lg=!1;function cg(a,c){switch(a){case"keyup":return Rr.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ug(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Wa=!1;function Ha(a,c){switch(a){case"compositionend":return ug(c);case"keypress":return c.which!==32?null:(lg=!0,ag);case"textInput":return a=c.data,a===ag&&lg?null:a;default:return null}}function T0(a,c){if(Wa)return a==="compositionend"||!dc&&cg(a,c)?(a=sf(),Vi=uc=Gt=null,Wa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return gf&&c.locale!=="ko"?null:c.data;default:return null}}var P0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qu(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!P0[a.type]:c==="textarea"}function vf(a,c,g,w){Nu(w),c=ld(c,"onChange"),0<c.length&&(g=new Ku("onChange","change",null,g,w),a.push({event:g,listeners:c}))}var Kr=null,to=null;function R0(a){vg(a,0)}function ed(a){var c=ut(a);if(Ot(c))return a}function I0(a,c){if(a==="change")return c}var Wo=!1;if(l){var Ir;if(l){var td="oninput"in document;if(!td){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),td=typeof dg.oninput=="function"}Ir=td}else Ir=!1;Wo=Ir&&(!document.documentMode||9<document.documentMode)}function hg(){Kr&&(Kr.detachEvent("onpropertychange",fg),to=Kr=null)}function fg(a){if(a.propertyName==="value"&&ed(to)){var c=[];vf(c,to,a,Xl(a)),Fu(R0,c)}}function M0(a,c,g){a==="focusin"?(hg(),Kr=c,to=g,Kr.attachEvent("onpropertychange",fg)):a==="focusout"&&hg()}function D0(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ed(to)}function qa(a,c){if(a==="click")return ed(c)}function ee(a,c){if(a==="input"||a==="change")return ed(c)}function ge(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ae=typeof Object.is=="function"?Object.is:ge;function De(a,c){if(ae(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var g=Object.keys(a),w=Object.keys(c);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var E=g[w];if(!d.call(c,E)||!ae(a[E],c[E]))return!1}return!0}function tt(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function kt(a,c){var g=tt(a);a=0;for(var w;g;){if(g.nodeType===3){if(w=a+g.textContent.length,a<=c&&w>=c)return{node:g,offset:c-a};a=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=tt(g)}}function gn(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?gn(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function jt(){for(var a=window,c=mn();c instanceof a.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)a=c.contentWindow;else break;c=mn(a.document)}return c}function hc(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function O0(a){var c=jt(),g=a.focusedElem,w=a.selectionRange;if(c!==g&&g&&g.ownerDocument&&gn(g.ownerDocument.documentElement,g)){if(w!==null&&hc(g)){if(c=w.start,a=w.end,a===void 0&&(a=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(a,g.value.length);else if(a=(c=g.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var E=g.textContent.length,k=Math.min(w.start,E);w=w.end===void 0?k:Math.min(w.end,E),!a.extend&&k>w&&(E=w,w=k,k=E),E=kt(g,k);var O=kt(g,w);E&&O&&(a.rangeCount!==1||a.anchorNode!==E.node||a.anchorOffset!==E.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(E.node,E.offset),a.removeAllRanges(),k>w?(a.addRange(c),a.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),a.addRange(c)))}}for(c=[],a=g;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)a=c[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Yr=l&&"documentMode"in document&&11>=document.documentMode,bs=null,yf=null,Wi=null,Ga=!1;function fc(a,c,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Ga||bs==null||bs!==mn(w)||(w=bs,"selectionStart"in w&&hc(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Wi&&De(Wi,w)||(Wi=w,w=ld(yf,"onSelect"),0<w.length&&(c=new Ku("onSelect","select",null,c,g),a.push({event:c,listeners:w}),c.target=bs)))}function Tt(a,c){var g={};return g[a.toLowerCase()]=c.toLowerCase(),g["Webkit"+a]="webkit"+c,g["Moz"+a]="moz"+c,g}var Ka={animationend:Tt("Animation","AnimationEnd"),animationiteration:Tt("Animation","AnimationIteration"),animationstart:Tt("Animation","AnimationStart"),transitionend:Tt("Transition","TransitionEnd")},nd={},pc={};l&&(pc=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function rd(a){if(nd[a])return nd[a];if(!Ka[a])return a;var c=Ka[a],g;for(g in c)if(c.hasOwnProperty(g)&&g in pc)return nd[a]=c[g];return a}var pg=rd("animationend"),mg=rd("animationiteration"),mc=rd("animationstart"),xs=rd("transitionend"),gc=new Map,wf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(a,c){gc.set(a,c),s(c,[a])}for(var id=0;id<wf.length;id++){var sd=wf[id],od=sd.toLowerCase(),gg=sd[0].toUpperCase()+sd.slice(1);xi(od,"on"+gg)}xi(pg,"onAnimationEnd"),xi(mg,"onAnimationIteration"),xi(mc,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(xs,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ho=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function vc(a,c,g){var w=a.type||"unknown-event";a.currentTarget=g,zm(w,c,void 0,a),a.currentTarget=null}function vg(a,c){c=(c&4)!==0;for(var g=0;g<a.length;g++){var w=a[g],E=w.event;w=w.listeners;e:{var k=void 0;if(c)for(var O=w.length-1;0<=O;O--){var V=w[O],G=V.instance,ue=V.currentTarget;if(V=V.listener,G!==k&&E.isPropagationStopped())break e;vc(E,V,ue),k=G}else for(O=0;O<w.length;O++){if(V=w[O],G=V.instance,ue=V.currentTarget,V=V.listener,G!==k&&E.isPropagationStopped())break e;vc(E,V,ue),k=G}}}if(Na)throw a=tc,Na=!1,tc=null,a}function Vt(a,c){var g=c[dd];g===void 0&&(g=c[dd]=new Set);var w=a+"__bubble";g.has(w)||(ad(c,a,2,!1),g.add(w))}function _f(a,c,g){var w=0;c&&(w|=4),ad(g,a,w,c)}var qo="_reactListening"+Math.random().toString(36).slice(2);function no(a){if(!a[qo]){a[qo]=!0,r.forEach(function(g){g!=="selectionchange"&&(Ho.has(g)||_f(g,!1,a),_f(g,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[qo]||(c[qo]=!0,_f("selectionchange",!1,c))}}function ad(a,c,g,w){switch(Jm(c)){case 1:var E=b0;break;case 4:E=x0;break;default:E=rf}g=E.bind(null,c,g,a),E=void 0,!jo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),w?E!==void 0?a.addEventListener(c,g,{capture:!0,passive:E}):a.addEventListener(c,g,!0):E!==void 0?a.addEventListener(c,g,{passive:E}):a.addEventListener(c,g,!1)}function bf(a,c,g,w,E){var k=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var O=w.tag;if(O===3||O===4){var V=w.stateNode.containerInfo;if(V===E||V.nodeType===8&&V.parentNode===E)break;if(O===4)for(O=w.return;O!==null;){var G=O.tag;if((G===3||G===4)&&(G=O.stateNode.containerInfo,G===E||G.nodeType===8&&G.parentNode===E))return;O=O.return}for(;V!==null;){if(O=qi(V),O===null)return;if(G=O.tag,G===5||G===6){w=k=O;continue e}V=V.parentNode}}w=w.return}Fu(function(){var ue=k,Ee=Xl(g),Te=[];e:{var Se=gc.get(a);if(Se!==void 0){var Oe=Ku,je=a;switch(a){case"keypress":if(Ba(g)===0)break e;case"keydown":case"keyup":Oe=rg;break;case"focusin":je="focus",Oe=Bt;break;case"focusout":je="blur",Oe=Bt;break;case"beforeblur":case"afterblur":Oe=Bt;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=lf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=C0;break;case pg:case mg:case mc:Oe=uf;break;case xs:Oe=mf;break;case"scroll":Oe=Qm;break;case"wheel":Oe=sg;break;case"copy":case"cut":case"paste":Oe=df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=Ju}var Fe=(c&4)!==0,cn=!Fe&&a==="scroll",se=Fe?Se!==null?Se+"Capture":null:Se;Fe=[];for(var X=ue,oe;X!==null;){oe=X;var Pe=oe.stateNode;if(oe.tag===5&&Pe!==null&&(oe=Pe,se!==null&&(Pe=Lo(X,se),Pe!=null&&Fe.push(Ya(X,Pe,oe)))),cn)break;X=X.return}0<Fe.length&&(Se=new Oe(Se,je,null,g,Ee),Te.push({event:Se,listeners:Fe}))}}if((c&7)===0){e:{if(Se=a==="mouseover"||a==="pointerover",Oe=a==="mouseout"||a==="pointerout",Se&&g!==Yl&&(je=g.relatedTarget||g.fromElement)&&(qi(je)||je[Mr]))break e;if((Oe||Se)&&(Se=Ee.window===Ee?Ee:(Se=Ee.ownerDocument)?Se.defaultView||Se.parentWindow:window,Oe?(je=g.relatedTarget||g.toElement,Oe=ue,je=je?qi(je):null,je!==null&&(cn=Ks(je),je!==cn||je.tag!==5&&je.tag!==6)&&(je=null)):(Oe=null,je=ue),Oe!==je)){if(Fe=lf,Pe="onMouseLeave",se="onMouseEnter",X="mouse",(a==="pointerout"||a==="pointerover")&&(Fe=Ju,Pe="onPointerLeave",se="onPointerEnter",X="pointer"),cn=Oe==null?Se:ut(Oe),oe=je==null?Se:ut(je),Se=new Fe(Pe,X+"leave",Oe,g,Ee),Se.target=cn,Se.relatedTarget=oe,Pe=null,qi(Ee)===ue&&(Fe=new Fe(se,X+"enter",je,g,Ee),Fe.target=oe,Fe.relatedTarget=cn,Pe=Fe),cn=Pe,Oe&&je)t:{for(Fe=Oe,se=je,X=0,oe=Fe;oe;oe=Xa(oe))X++;for(oe=0,Pe=se;Pe;Pe=Xa(Pe))oe++;for(;0<X-oe;)Fe=Xa(Fe),X--;for(;0<oe-X;)se=Xa(se),oe--;for(;X--;){if(Fe===se||se!==null&&Fe===se.alternate)break t;Fe=Xa(Fe),se=Xa(se)}Fe=null}else Fe=null;Oe!==null&&vn(Te,Se,Oe,Fe,!1),je!==null&&cn!==null&&vn(Te,cn,je,Fe,!0)}}e:{if(Se=ue?ut(ue):window,Oe=Se.nodeName&&Se.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&Se.type==="file")var Be=I0;else if(Qu(Se))if(Wo)Be=ee;else{Be=D0;var Ke=M0}else(Oe=Se.nodeName)&&Oe.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(Be=qa);if(Be&&(Be=Be(a,ue))){vf(Te,Be,g,Ee);break e}Ke&&Ke(a,Se,ue),a==="focusout"&&(Ke=Se._wrapperState)&&Ke.controlled&&Se.type==="number"&&Hl(Se,"number",Se.value)}switch(Ke=ue?ut(ue):window,a){case"focusin":(Qu(Ke)||Ke.contentEditable==="true")&&(bs=Ke,yf=ue,Wi=null);break;case"focusout":Wi=yf=bs=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,fc(Te,g,Ee);break;case"selectionchange":if(Yr)break;case"keydown":case"keyup":fc(Te,g,Ee)}var qe;if(dc)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Wa?cg(a,g)&&(Ze="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Ze="onCompositionStart");Ze&&(gf&&g.locale!=="ko"&&(Wa||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Wa&&(qe=sf()):(Gt=Ee,uc="value"in Gt?Gt.value:Gt.textContent,Wa=!0)),Ke=ld(ue,Ze),0<Ke.length&&(Ze=new eg(Ze,a,null,g,Ee),Te.push({event:Ze,listeners:Ke}),qe?Ze.data=qe:(qe=ug(g),qe!==null&&(Ze.data=qe)))),(qe=og?Ha(a,g):T0(a,g))&&(ue=ld(ue,"onBeforeInput"),0<ue.length&&(Ee=new eg("onBeforeInput","beforeinput",null,g,Ee),Te.push({event:Ee,listeners:ue}),Ee.data=qe))}vg(Te,c)})}function Ya(a,c,g){return{instance:a,listener:c,currentTarget:g}}function ld(a,c){for(var g=c+"Capture",w=[];a!==null;){var E=a,k=E.stateNode;E.tag===5&&k!==null&&(E=k,k=Lo(a,g),k!=null&&w.unshift(Ya(a,k,E)),k=Lo(a,c),k!=null&&w.push(Ya(a,k,E))),a=a.return}return w}function Xa(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function vn(a,c,g,w,E){for(var k=c._reactName,O=[];g!==null&&g!==w;){var V=g,G=V.alternate,ue=V.stateNode;if(G!==null&&G===w)break;V.tag===5&&ue!==null&&(V=ue,E?(G=Lo(g,k),G!=null&&O.unshift(Ya(g,G,V))):E||(G=Lo(g,k),G!=null&&O.push(Ya(g,G,V)))),g=g.return}O.length!==0&&a.push({event:c,listeners:O})}var Kn=/\r\n?/g,N0=/\u0000|\uFFFD/g;function yg(a){return(typeof a=="string"?a:""+a).replace(Kn,`
`).replace(N0,"")}function yc(a,c,g){if(c=yg(c),yg(a)!==c&&g)throw Error(t(425))}function cd(){}var wc=null,Go=null;function _c(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var ro=typeof setTimeout=="function"?setTimeout:void 0,bc=typeof clearTimeout=="function"?clearTimeout:void 0,Za=typeof Promise=="function"?Promise:void 0,ud=typeof queueMicrotask=="function"?queueMicrotask:typeof Za<"u"?function(a){return Za.resolve(null).then(a).catch(Ja)}:ro;function Ja(a){setTimeout(function(){throw a})}function xf(a,c){var g=c,w=0;do{var E=g.nextSibling;if(a.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(w===0){a.removeChild(E),Mt(c);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=E}while(g);Mt(c)}function io(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function wg(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return a;c--}else g==="/$"&&c++}a=a.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Qa,so="__reactProps$"+Qa,Mr="__reactContainer$"+Qa,dd="__reactEvents$"+Qa,L="__reactListeners$"+Qa,el="__reactHandles$"+Qa;function qi(a){var c=a[Hi];if(c)return c;for(var g=a.parentNode;g;){if(c=g[Mr]||g[Hi]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(a=wg(a);a!==null;){if(g=a[Hi])return g;a=wg(a)}return c}a=g,g=a.parentNode}return null}function Yn(a){return a=a[Hi]||a[Mr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ut(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function hd(a){return a[so]||null}var Sf=[],tl=-1;function yr(a){return{current:a}}function Wt(a){0>tl||(a.current=Sf[tl],Sf[tl]=null,tl--)}function Ut(a,c){tl++,Sf[tl]=a.current,a.current=c}var oo={},Xn=yr(oo),wr=yr(!1),cr=oo;function nl(a,c){var g=a.type.contextTypes;if(!g)return oo;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var E={},k;for(k in g)E[k]=c[k];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=E),E}function _r(a){return a=a.childContextTypes,a!=null}function fd(){Wt(wr),Wt(Xn)}function _g(a,c,g){if(Xn.current!==oo)throw Error(t(168));Ut(Xn,c),Ut(wr,g)}function bg(a,c,g){var w=a.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var E in w)if(!(E in c))throw Error(t(108,ve(a)||"Unknown",E));return Q({},g,w)}function Xr(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||oo,cr=Xn.current,Ut(Xn,a),Ut(wr,wr.current),!0}function xg(a,c,g){var w=a.stateNode;if(!w)throw Error(t(169));g?(a=bg(a,c,cr),w.__reactInternalMemoizedMergedChildContext=a,Wt(wr),Wt(Xn),Ut(Xn,a)):Wt(wr),Ut(wr,g)}var As=null,pd=!1,Af=!1;function Sg(a){As===null?As=[a]:As.push(a)}function Ko(a){pd=!0,Sg(a)}function ao(){if(!Af&&As!==null){Af=!0;var a=0,c=Rt;try{var g=As;for(Rt=1;a<g.length;a++){var w=g[a];do w=w(!0);while(w!==null)}As=null,pd=!1}catch(E){throw As!==null&&(As=As.slice(a+1)),we(rc,ao),E}finally{Rt=c,Af=!1}}return null}var rl=[],Zn=0,md=null,gd=0,Zr=[],Jr=0,Yo=null,Gi=1,Ki="";function Xo(a,c){rl[Zn++]=gd,rl[Zn++]=md,md=a,gd=c}function Ag(a,c,g){Zr[Jr++]=Gi,Zr[Jr++]=Ki,Zr[Jr++]=Yo,Yo=a;var w=Gi;a=Ki;var E=32-bi(w)-1;w&=~(1<<E),g+=1;var k=32-bi(c)+E;if(30<k){var O=E-E%5;k=(w&(1<<O)-1).toString(32),w>>=O,E-=O,Gi=1<<32-bi(c)+E|g<<E|w,Ki=k+a}else Gi=1<<k|g<<E|w,Ki=a}function xc(a){a.return!==null&&(Xo(a,1),Ag(a,1,0))}function Zo(a){for(;a===md;)md=rl[--Zn],rl[Zn]=null,gd=rl[--Zn],rl[Zn]=null;for(;a===Yo;)Yo=Zr[--Jr],Zr[Jr]=null,Ki=Zr[--Jr],Zr[Jr]=null,Gi=Zr[--Jr],Zr[Jr]=null}var Jn=null,Dr=null,Ht=!1,Si=null;function Yi(a,c){var g=si(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=a,c=a.deletions,c===null?(a.deletions=[g],a.flags|=16):c.push(g)}function vd(a,c){switch(a.tag){case 5:var g=a.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Jn=a,Dr=io(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Jn=a,Dr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=Yo!==null?{id:Gi,overflow:Ki}:null,a.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=si(18,null,null,0),g.stateNode=c,g.return=a,a.child=g,Jn=a,Dr=null,!0):!1;default:return!1}}function Es(a){return(a.mode&1)!==0&&(a.flags&128)===0}function br(a){if(Ht){var c=Dr;if(c){var g=c;if(!vd(a,c)){if(Es(a))throw Error(t(418));c=io(g.nextSibling);var w=Jn;c&&vd(a,c)?Yi(w,g):(a.flags=a.flags&-4097|2,Ht=!1,Jn=a)}}else{if(Es(a))throw Error(t(418));a.flags=a.flags&-4097|2,Ht=!1,Jn=a}}}function Eg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Jn=a}function Sc(a){if(a!==Jn)return!1;if(!Ht)return Eg(a),Ht=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!_c(a.type,a.memoizedProps)),c&&(c=Dr)){if(Es(a))throw Ef(),Error(t(418));for(;c;)Yi(a,c),c=io(c.nextSibling)}if(Eg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(c===0){Dr=io(a.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}a=a.nextSibling}Dr=null}}else Dr=Jn?io(a.stateNode.nextSibling):null;return!0}function Ef(){for(var a=Dr;a;)a=io(a.nextSibling)}function Xi(){Dr=Jn=null,Ht=!1}function Zi(a){Si===null?Si=[a]:Si.push(a)}var Cg=M.ReactCurrentBatchConfig;function Ac(a,c,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var w=g.stateNode}if(!w)throw Error(t(147,a));var E=w,k=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(O){var V=E.refs;O===null?delete V[k]:V[k]=O},c._stringRef=k,c)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function Jo(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function kg(a){var c=a._init;return c(a._payload)}function Cf(a){function c(se,X){if(a){var oe=se.deletions;oe===null?(se.deletions=[X],se.flags|=16):oe.push(X)}}function g(se,X){if(!a)return null;for(;X!==null;)c(se,X),X=X.sibling;return null}function w(se,X){for(se=new Map;X!==null;)X.key!==null?se.set(X.key,X):se.set(X.index,X),X=X.sibling;return se}function E(se,X){return se=Ri(se,X),se.index=0,se.sibling=null,se}function k(se,X,oe){return se.index=oe,a?(oe=se.alternate,oe!==null?(oe=oe.index,oe<X?(se.flags|=2,X):oe):(se.flags|=2,X)):(se.flags|=1048576,X)}function O(se){return a&&se.alternate===null&&(se.flags|=2),se}function V(se,X,oe,Pe){return X===null||X.tag!==6?(X=hp(oe,se.mode,Pe),X.return=se,X):(X=E(X,oe),X.return=se,X)}function G(se,X,oe,Pe){var Be=oe.type;return Be===B?Ee(se,X,oe.props.children,Pe,oe.key):X!==null&&(X.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===q&&kg(Be)===X.type)?(Pe=E(X,oe.props),Pe.ref=Ac(se,X,oe),Pe.return=se,Pe):(Pe=Jd(oe.type,oe.key,oe.props,null,se.mode,Pe),Pe.ref=Ac(se,X,oe),Pe.return=se,Pe)}function ue(se,X,oe,Pe){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=fp(oe,se.mode,Pe),X.return=se,X):(X=E(X,oe.children||[]),X.return=se,X)}function Ee(se,X,oe,Pe,Be){return X===null||X.tag!==7?(X=ca(oe,se.mode,Pe,Be),X.return=se,X):(X=E(X,oe),X.return=se,X)}function Te(se,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=hp(""+X,se.mode,oe),X.return=se,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case N:return oe=Jd(X.type,X.key,X.props,null,se.mode,oe),oe.ref=Ac(se,null,X),oe.return=se,oe;case F:return X=fp(X,se.mode,oe),X.return=se,X;case q:var Pe=X._init;return Te(se,Pe(X._payload),oe)}if(wi(X)||ne(X))return X=ca(X,se.mode,oe,null),X.return=se,X;Jo(se,X)}return null}function Se(se,X,oe,Pe){var Be=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Be!==null?null:V(se,X,""+oe,Pe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return oe.key===Be?G(se,X,oe,Pe):null;case F:return oe.key===Be?ue(se,X,oe,Pe):null;case q:return Be=oe._init,Se(se,X,Be(oe._payload),Pe)}if(wi(oe)||ne(oe))return Be!==null?null:Ee(se,X,oe,Pe,null);Jo(se,oe)}return null}function Oe(se,X,oe,Pe,Be){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return se=se.get(oe)||null,V(X,se,""+Pe,Be);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case N:return se=se.get(Pe.key===null?oe:Pe.key)||null,G(X,se,Pe,Be);case F:return se=se.get(Pe.key===null?oe:Pe.key)||null,ue(X,se,Pe,Be);case q:var Ke=Pe._init;return Oe(se,X,oe,Ke(Pe._payload),Be)}if(wi(Pe)||ne(Pe))return se=se.get(oe)||null,Ee(X,se,Pe,Be,null);Jo(X,Pe)}return null}function je(se,X,oe,Pe){for(var Be=null,Ke=null,qe=X,Ze=X=0,In=null;qe!==null&&Ze<oe.length;Ze++){qe.index>Ze?(In=qe,qe=null):In=qe.sibling;var Pt=Se(se,qe,oe[Ze],Pe);if(Pt===null){qe===null&&(qe=In);break}a&&qe&&Pt.alternate===null&&c(se,qe),X=k(Pt,X,Ze),Ke===null?Be=Pt:Ke.sibling=Pt,Ke=Pt,qe=In}if(Ze===oe.length)return g(se,qe),Ht&&Xo(se,Ze),Be;if(qe===null){for(;Ze<oe.length;Ze++)qe=Te(se,oe[Ze],Pe),qe!==null&&(X=k(qe,X,Ze),Ke===null?Be=qe:Ke.sibling=qe,Ke=qe);return Ht&&Xo(se,Ze),Be}for(qe=w(se,qe);Ze<oe.length;Ze++)In=Oe(qe,se,Ze,oe[Ze],Pe),In!==null&&(a&&In.alternate!==null&&qe.delete(In.key===null?Ze:In.key),X=k(In,X,Ze),Ke===null?Be=In:Ke.sibling=In,Ke=In);return a&&qe.forEach(function(_o){return c(se,_o)}),Ht&&Xo(se,Ze),Be}function Fe(se,X,oe,Pe){var Be=ne(oe);if(typeof Be!="function")throw Error(t(150));if(oe=Be.call(oe),oe==null)throw Error(t(151));for(var Ke=Be=null,qe=X,Ze=X=0,In=null,Pt=oe.next();qe!==null&&!Pt.done;Ze++,Pt=oe.next()){qe.index>Ze?(In=qe,qe=null):In=qe.sibling;var _o=Se(se,qe,Pt.value,Pe);if(_o===null){qe===null&&(qe=In);break}a&&qe&&_o.alternate===null&&c(se,qe),X=k(_o,X,Ze),Ke===null?Be=_o:Ke.sibling=_o,Ke=_o,qe=In}if(Pt.done)return g(se,qe),Ht&&Xo(se,Ze),Be;if(qe===null){for(;!Pt.done;Ze++,Pt=oe.next())Pt=Te(se,Pt.value,Pe),Pt!==null&&(X=k(Pt,X,Ze),Ke===null?Be=Pt:Ke.sibling=Pt,Ke=Pt);return Ht&&Xo(se,Ze),Be}for(qe=w(se,qe);!Pt.done;Ze++,Pt=oe.next())Pt=Oe(qe,se,Ze,Pt.value,Pe),Pt!==null&&(a&&Pt.alternate!==null&&qe.delete(Pt.key===null?Ze:Pt.key),X=k(Pt,X,Ze),Ke===null?Be=Pt:Ke.sibling=Pt,Ke=Pt);return a&&qe.forEach(function(nw){return c(se,nw)}),Ht&&Xo(se,Ze),Be}function cn(se,X,oe,Pe){if(typeof oe=="object"&&oe!==null&&oe.type===B&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:e:{for(var Be=oe.key,Ke=X;Ke!==null;){if(Ke.key===Be){if(Be=oe.type,Be===B){if(Ke.tag===7){g(se,Ke.sibling),X=E(Ke,oe.props.children),X.return=se,se=X;break e}}else if(Ke.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===q&&kg(Be)===Ke.type){g(se,Ke.sibling),X=E(Ke,oe.props),X.ref=Ac(se,Ke,oe),X.return=se,se=X;break e}g(se,Ke);break}else c(se,Ke);Ke=Ke.sibling}oe.type===B?(X=ca(oe.props.children,se.mode,Pe,oe.key),X.return=se,se=X):(Pe=Jd(oe.type,oe.key,oe.props,null,se.mode,Pe),Pe.ref=Ac(se,X,oe),Pe.return=se,se=Pe)}return O(se);case F:e:{for(Ke=oe.key;X!==null;){if(X.key===Ke)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){g(se,X.sibling),X=E(X,oe.children||[]),X.return=se,se=X;break e}else{g(se,X);break}else c(se,X);X=X.sibling}X=fp(oe,se.mode,Pe),X.return=se,se=X}return O(se);case q:return Ke=oe._init,cn(se,X,Ke(oe._payload),Pe)}if(wi(oe))return je(se,X,oe,Pe);if(ne(oe))return Fe(se,X,oe,Pe);Jo(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(g(se,X.sibling),X=E(X,oe),X.return=se,se=X):(g(se,X),X=hp(oe,se.mode,Pe),X.return=se,se=X),O(se)):g(se,X)}return cn}var sn=Cf(!0),yd=Cf(!1),Ec=yr(null),Or=null,lo=null,il=null;function Cs(){il=lo=Or=null}function wd(a){var c=Ec.current;Wt(Ec),a._currentValue=c}function Fn(a,c,g){for(;a!==null;){var w=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),a===g)break;a=a.return}}function co(a,c){Or=a,il=lo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(dr=!0),a.firstContext=null)}function Qr(a){var c=a._currentValue;if(il!==a)if(a={context:a,memoizedValue:c,next:null},lo===null){if(Or===null)throw Error(t(308));lo=a,Or.dependencies={lanes:0,firstContext:a}}else lo=lo.next=a;return c}var Qo=null;function kf(a){Qo===null?Qo=[a]:Qo.push(a)}function _d(a,c,g,w){var E=c.interleaved;return E===null?(g.next=g,kf(c)):(g.next=E.next,E.next=g),c.interleaved=g,ks(a,w)}function ks(a,c){a.lanes|=c;var g=a.alternate;for(g!==null&&(g.lanes|=c),g=a,a=a.return;a!==null;)a.childLanes|=c,g=a.alternate,g!==null&&(g.childLanes|=c),g=a,a=a.return;return g.tag===3?g.stateNode:null}var ei=!1;function bd(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tg(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ts(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function ti(a,c,g){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,(xt&2)!==0){var E=w.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),w.pending=c,ks(a,g)}return E=w.interleaved,E===null?(c.next=c,kf(w)):(c.next=E.next,E.next=c),w.interleaved=c,ks(a,g)}function xd(a,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var w=c.lanes;w&=a.pendingLanes,g|=w,c.lanes=g,ac(a,g)}}function Pg(a,c){var g=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var E=null,k=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};k===null?E=k=O:k=k.next=O,g=g.next}while(g!==null);k===null?E=k=c:k=k.next=c}else E=k=c;g={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:k,shared:w.shared,effects:w.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=c:a.next=c,g.lastBaseUpdate=c}function sl(a,c,g,w){var E=a.updateQueue;ei=!1;var k=E.firstBaseUpdate,O=E.lastBaseUpdate,V=E.shared.pending;if(V!==null){E.shared.pending=null;var G=V,ue=G.next;G.next=null,O===null?k=ue:O.next=ue,O=G;var Ee=a.alternate;Ee!==null&&(Ee=Ee.updateQueue,V=Ee.lastBaseUpdate,V!==O&&(V===null?Ee.firstBaseUpdate=ue:V.next=ue,Ee.lastBaseUpdate=G))}if(k!==null){var Te=E.baseState;O=0,Ee=ue=G=null,V=k;do{var Se=V.lane,Oe=V.eventTime;if((w&Se)===Se){Ee!==null&&(Ee=Ee.next={eventTime:Oe,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var je=a,Fe=V;switch(Se=c,Oe=g,Fe.tag){case 1:if(je=Fe.payload,typeof je=="function"){Te=je.call(Oe,Te,Se);break e}Te=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Fe.payload,Se=typeof je=="function"?je.call(Oe,Te,Se):je,Se==null)break e;Te=Q({},Te,Se);break e;case 2:ei=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,Se=E.effects,Se===null?E.effects=[V]:Se.push(V))}else Oe={eventTime:Oe,lane:Se,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ee===null?(ue=Ee=Oe,G=Te):Ee=Ee.next=Oe,O|=Se;if(V=V.next,V===null){if(V=E.shared.pending,V===null)break;Se=V,V=Se.next,Se.next=null,E.lastBaseUpdate=Se,E.shared.pending=null}}while(!0);if(Ee===null&&(G=Te),E.baseState=G,E.firstBaseUpdate=ue,E.lastBaseUpdate=Ee,c=E.shared.interleaved,c!==null){E=c;do O|=E.lane,E=E.next;while(E!==c)}else k===null&&(E.shared.lanes=0);mo|=O,a.lanes=O,a.memoizedState=Te}}function Tf(a,c,g){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var w=a[c],E=w.callback;if(E!==null){if(w.callback=null,w=g,typeof E!="function")throw Error(t(191,E));E.call(w)}}}var Cc={},Ji=yr(Cc),kc=yr(Cc),ol=yr(Cc);function Ps(a){if(a===Cc)throw Error(t(174));return a}function Pf(a,c){switch(Ut(ol,c),Ut(kc,a),Ut(Ji,Cc),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ms(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=ms(c,a)}Wt(Ji),Ut(Ji,c)}function uo(){Wt(Ji),Wt(kc),Wt(ol)}function Rf(a){Ps(ol.current);var c=Ps(Ji.current),g=ms(c,a.type);c!==g&&(Ut(kc,a),Ut(Ji,g))}function Sd(a){kc.current===a&&(Wt(Ji),Wt(kc))}var Kt=yr(0);function ea(a){for(var c=a;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var If=[];function Ad(){for(var a=0;a<If.length;a++)If[a]._workInProgressVersionPrimary=null;If.length=0}var Tc=M.ReactCurrentDispatcher,Mf=M.ReactCurrentBatchConfig,ho=0,en=null,ln=null,_n=null,al=!1,Pc=!1,ta=0,ft=0;function Qn(){throw Error(t(321))}function Df(a,c){if(c===null)return!1;for(var g=0;g<c.length&&g<a.length;g++)if(!ae(a[g],c[g]))return!1;return!0}function na(a,c,g,w,E,k){if(ho=k,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Tc.current=a===null||a.memoizedState===null?j0:Id,a=g(w,E),Pc){k=0;do{if(Pc=!1,ta=0,25<=k)throw Error(t(301));k+=1,_n=ln=null,c.updateQueue=null,Tc.current=dl,a=g(w,E)}while(Pc)}if(Tc.current=Rd,c=ln!==null&&ln.next!==null,ho=0,_n=ln=en=null,al=!1,c)throw Error(t(300));return a}function Ed(){var a=ta!==0;return ta=0,a}function Qi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?en.memoizedState=_n=a:_n=_n.next=a,_n}function ni(){if(ln===null){var a=en.alternate;a=a!==null?a.memoizedState:null}else a=ln.next;var c=_n===null?en.memoizedState:_n.next;if(c!==null)_n=c,ln=a;else{if(a===null)throw Error(t(310));ln=a,a={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},_n===null?en.memoizedState=_n=a:_n=_n.next=a}return _n}function er(a,c){return typeof c=="function"?c(a):c}function Of(a){var c=ni(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var w=ln,E=w.baseQueue,k=g.pending;if(k!==null){if(E!==null){var O=E.next;E.next=k.next,k.next=O}w.baseQueue=E=k,g.pending=null}if(E!==null){k=E.next,w=w.baseState;var V=O=null,G=null,ue=k;do{var Ee=ue.lane;if((ho&Ee)===Ee)G!==null&&(G=G.next={lane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),w=ue.hasEagerState?ue.eagerState:a(w,ue.action);else{var Te={lane:Ee,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null};G===null?(V=G=Te,O=w):G=G.next=Te,en.lanes|=Ee,mo|=Ee}ue=ue.next}while(ue!==null&&ue!==k);G===null?O=w:G.next=V,ae(w,c.memoizedState)||(dr=!0),c.memoizedState=w,c.baseState=O,c.baseQueue=G,g.lastRenderedState=w}if(a=g.interleaved,a!==null){E=a;do k=E.lane,en.lanes|=k,mo|=k,E=E.next;while(E!==a)}else E===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function ll(a){var c=ni(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var w=g.dispatch,E=g.pending,k=c.memoizedState;if(E!==null){g.pending=null;var O=E=E.next;do k=a(k,O.action),O=O.next;while(O!==E);ae(k,c.memoizedState)||(dr=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),g.lastRenderedState=k}return[k,w]}function Cd(){}function Nf(a,c){var g=en,w=ni(),E=c(),k=!ae(w.memoizedState,E);if(k&&(w.memoizedState=E,dr=!0),w=w.queue,es(Rs.bind(null,g,w,a),[a]),w.getSnapshot!==c||k||_n!==null&&_n.memoizedState.tag&1){if(g.flags|=2048,cl(9,xr.bind(null,g,w,E,c),void 0,null),Rn===null)throw Error(t(349));(ho&30)!==0||Lf(g,c,E)}return E}function Lf(a,c,g){a.flags|=16384,a={getSnapshot:c,value:g},c=en.updateQueue,c===null?(c={lastEffect:null,stores:null},en.updateQueue=c,c.stores=[a]):(g=c.stores,g===null?c.stores=[a]:g.push(a))}function xr(a,c,g,w){c.value=g,c.getSnapshot=w,kd(c)&&jf(a)}function Rs(a,c,g){return g(function(){kd(c)&&jf(a)})}function kd(a){var c=a.getSnapshot;a=a.value;try{var g=c();return!ae(a,g)}catch{return!0}}function jf(a){var c=ks(a,1);c!==null&&Pi(c,a,1,-1)}function Rc(a){var c=Qi();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},c.queue=a,a=a.dispatch=Ng.bind(null,en,a),[c.memoizedState,a]}function cl(a,c,g,w){return a={tag:a,create:c,destroy:g,deps:w,next:null},c=en.updateQueue,c===null?(c={lastEffect:null,stores:null},en.updateQueue=c,c.lastEffect=a.next=a):(g=c.lastEffect,g===null?c.lastEffect=a.next=a:(w=g.next,g.next=a,a.next=w,c.lastEffect=a)),a}function Td(){return ni().memoizedState}function Ic(a,c,g,w){var E=Qi();en.flags|=a,E.memoizedState=cl(1|c,g,void 0,w===void 0?null:w)}function ul(a,c,g,w){var E=ni();w=w===void 0?null:w;var k=void 0;if(ln!==null){var O=ln.memoizedState;if(k=O.destroy,w!==null&&Df(w,O.deps)){E.memoizedState=cl(c,g,k,w);return}}en.flags|=a,E.memoizedState=cl(1|c,g,k,w)}function Pd(a,c){return Ic(8390656,8,a,c)}function es(a,c){return ul(2048,8,a,c)}function Rg(a,c){return ul(4,2,a,c)}function Is(a,c){return ul(4,4,a,c)}function Ff(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function $f(a,c,g){return g=g!=null?g.concat([a]):null,ul(4,4,Ff.bind(null,c,a),g)}function Mc(){}function Ig(a,c){var g=ni();c=c===void 0?null:c;var w=g.memoizedState;return w!==null&&c!==null&&Df(c,w[1])?w[0]:(g.memoizedState=[a,c],a)}function Mg(a,c){var g=ni();c=c===void 0?null:c;var w=g.memoizedState;return w!==null&&c!==null&&Df(c,w[1])?w[0]:(a=a(),g.memoizedState=[a,c],a)}function Dg(a,c,g){return(ho&21)===0?(a.baseState&&(a.baseState=!1,dr=!0),a.memoizedState=g):(ae(g,c)||(g=Qh(),en.lanes|=g,mo|=g,a.baseState=!0),c)}function Og(a,c){var g=Rt;Rt=g!==0&&4>g?g:4,a(!0);var w=Mf.transition;Mf.transition={};try{a(!1),c()}finally{Rt=g,Mf.transition=w}}function zf(){return ni().memoizedState}function L0(a,c,g){var w=yo(a);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},Bf(a))ur(c,g);else if(g=_d(a,c,g,w),g!==null){var E=pr();Pi(g,a,w,E),Ai(g,c,w)}}function Ng(a,c,g){var w=yo(a),E={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(Bf(a))ur(c,E);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var O=c.lastRenderedState,V=k(O,g);if(E.hasEagerState=!0,E.eagerState=V,ae(V,O)){var G=c.interleaved;G===null?(E.next=E,kf(c)):(E.next=G.next,G.next=E),c.interleaved=E;return}}catch{}finally{}g=_d(a,c,E,w),g!==null&&(E=pr(),Pi(g,a,w,E),Ai(g,c,w))}}function Bf(a){var c=a.alternate;return a===en||c!==null&&c===en}function ur(a,c){Pc=al=!0;var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}function Ai(a,c,g){if((g&4194240)!==0){var w=c.lanes;w&=a.pendingLanes,g|=w,c.lanes=g,ac(a,g)}}var Rd={readContext:Qr,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},j0={readContext:Qr,useCallback:function(a,c){return Qi().memoizedState=[a,c===void 0?null:c],a},useContext:Qr,useEffect:Pd,useImperativeHandle:function(a,c,g){return g=g!=null?g.concat([a]):null,Ic(4194308,4,Ff.bind(null,c,a),g)},useLayoutEffect:function(a,c){return Ic(4194308,4,a,c)},useInsertionEffect:function(a,c){return Ic(4,2,a,c)},useMemo:function(a,c){var g=Qi();return c=c===void 0?null:c,a=a(),g.memoizedState=[a,c],a},useReducer:function(a,c,g){var w=Qi();return c=g!==void 0?g(c):c,w.memoizedState=w.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},w.queue=a,a=a.dispatch=L0.bind(null,en,a),[w.memoizedState,a]},useRef:function(a){var c=Qi();return a={current:a},c.memoizedState=a},useState:Rc,useDebugValue:Mc,useDeferredValue:function(a){return Qi().memoizedState=a},useTransition:function(){var a=Rc(!1),c=a[0];return a=Og.bind(null,a[1]),Qi().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,g){var w=en,E=Qi();if(Ht){if(g===void 0)throw Error(t(407));g=g()}else{if(g=c(),Rn===null)throw Error(t(349));(ho&30)!==0||Lf(w,c,g)}E.memoizedState=g;var k={value:g,getSnapshot:c};return E.queue=k,Pd(Rs.bind(null,w,k,a),[a]),w.flags|=2048,cl(9,xr.bind(null,w,k,g,c),void 0,null),g},useId:function(){var a=Qi(),c=Rn.identifierPrefix;if(Ht){var g=Ki,w=Gi;g=(w&~(1<<32-bi(w)-1)).toString(32)+g,c=":"+c+"R"+g,g=ta++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=ft++,c=":"+c+"r"+g.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Id={readContext:Qr,useCallback:Ig,useContext:Qr,useEffect:es,useImperativeHandle:$f,useInsertionEffect:Rg,useLayoutEffect:Is,useMemo:Mg,useReducer:Of,useRef:Td,useState:function(){return Of(er)},useDebugValue:Mc,useDeferredValue:function(a){var c=ni();return Dg(c,ln.memoizedState,a)},useTransition:function(){var a=Of(er)[0],c=ni().memoizedState;return[a,c]},useMutableSource:Cd,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1},dl={readContext:Qr,useCallback:Ig,useContext:Qr,useEffect:es,useImperativeHandle:$f,useInsertionEffect:Rg,useLayoutEffect:Is,useMemo:Mg,useReducer:ll,useRef:Td,useState:function(){return ll(er)},useDebugValue:Mc,useDeferredValue:function(a){var c=ni();return ln===null?c.memoizedState=a:Dg(c,ln.memoizedState,a)},useTransition:function(){var a=ll(er)[0],c=ni().memoizedState;return[a,c]},useMutableSource:Cd,useSyncExternalStore:Nf,useId:zf,unstable_isNewReconciler:!1};function ri(a,c){if(a&&a.defaultProps){c=Q({},c),a=a.defaultProps;for(var g in a)c[g]===void 0&&(c[g]=a[g]);return c}return c}function Md(a,c,g,w){c=a.memoizedState,g=g(w,c),g=g==null?c:Q({},c,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var Dd={isMounted:function(a){return(a=a._reactInternals)?Ks(a)===a:!1},enqueueSetState:function(a,c,g){a=a._reactInternals;var w=pr(),E=yo(a),k=Ts(w,E);k.payload=c,g!=null&&(k.callback=g),c=ti(a,k,E),c!==null&&(Pi(c,a,E,w),xd(c,a,E))},enqueueReplaceState:function(a,c,g){a=a._reactInternals;var w=pr(),E=yo(a),k=Ts(w,E);k.tag=1,k.payload=c,g!=null&&(k.callback=g),c=ti(a,k,E),c!==null&&(Pi(c,a,E,w),xd(c,a,E))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var g=pr(),w=yo(a),E=Ts(g,w);E.tag=2,c!=null&&(E.callback=c),c=ti(a,E,w),c!==null&&(Pi(c,a,w,g),xd(c,a,w))}};function Uf(a,c,g,w,E,k,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,k,O):c.prototype&&c.prototype.isPureReactComponent?!De(g,w)||!De(E,k):!0}function ra(a,c,g){var w=!1,E=oo,k=c.contextType;return typeof k=="object"&&k!==null?k=Qr(k):(E=_r(c)?cr:Xn.current,w=c.contextTypes,k=(w=w!=null)?nl(a,E):oo),c=new c(g,k),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Dd,a.stateNode=c,c._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=E,a.__reactInternalMemoizedMaskedChildContext=k),c}function hl(a,c,g,w){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,w),c.state!==a&&Dd.enqueueReplaceState(c,c.state,null)}function Vf(a,c,g,w){var E=a.stateNode;E.props=g,E.state=a.memoizedState,E.refs={},bd(a);var k=c.contextType;typeof k=="object"&&k!==null?E.context=Qr(k):(k=_r(c)?cr:Xn.current,E.context=nl(a,k)),E.state=a.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Md(a,c,k,g),E.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&Dd.enqueueReplaceState(E,E.state,null),sl(a,g,E,w),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308)}function ia(a,c){try{var g="",w=c;do g+=Ae(w),w=w.return;while(w);var E=g}catch(k){E=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:c,stack:E,digest:null}}function Od(a,c,g){return{value:a,source:null,stack:g??null,digest:c??null}}function fl(a,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var Lg=typeof WeakMap=="function"?WeakMap:Map;function Dc(a,c,g){g=Ts(-1,g),g.tag=3,g.payload={element:null};var w=c.value;return g.callback=function(){Hd||(Hd=!0,sp=w),fl(a,c)},g}function Nd(a,c,g){g=Ts(-1,g),g.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var E=c.value;g.payload=function(){return w(E)},g.callback=function(){fl(a,c)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(g.callback=function(){fl(a,c),typeof w!="function"&&(go===null?go=new Set([this]):go.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),g}function Oc(a,c,g){var w=a.pingCache;if(w===null){w=a.pingCache=new Lg;var E=new Set;w.set(c,E)}else E=w.get(c),E===void 0&&(E=new Set,w.set(c,E));E.has(g)||(E.add(g),a=H0.bind(null,a,c,g),c.then(a,a))}function jg(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Wf(a,c,g,w,E){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=Ts(-1,1),c.tag=2,ti(g,c,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=E,a)}var Ld=M.ReactCurrentOwner,dr=!1;function $n(a,c,g,w){c.child=a===null?yd(c,null,g,w):sn(c,a.child,g,w)}function Fg(a,c,g,w,E){g=g.render;var k=c.ref;return co(c,E),w=na(a,c,g,w,k,E),g=Ed(),a!==null&&!dr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~E,Ei(a,c,E)):(Ht&&g&&xc(c),c.flags|=1,$n(a,c,w,E),c.child)}function Hf(a,c,g,w,E){if(a===null){var k=g.type;return typeof k=="function"&&!Zd(k)&&k.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=k,ts(a,c,k,w,E)):(a=Jd(g.type,null,w,c,c.mode,E),a.ref=c.ref,a.return=c,c.child=a)}if(k=a.child,(a.lanes&E)===0){var O=k.memoizedProps;if(g=g.compare,g=g!==null?g:De,g(O,w)&&a.ref===c.ref)return Ei(a,c,E)}return c.flags|=1,a=Ri(k,w),a.ref=c.ref,a.return=c,c.child=a}function ts(a,c,g,w,E){if(a!==null){var k=a.memoizedProps;if(De(k,w)&&a.ref===c.ref)if(dr=!1,c.pendingProps=w=k,(a.lanes&E)!==0)(a.flags&131072)!==0&&(dr=!0);else return c.lanes=a.lanes,Ei(a,c,E)}return Kf(a,c,g,w,E)}function qf(a,c,g){var w=c.pendingProps,E=w.children,k=a!==null?a.memoizedState:null;if(w.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(vl,Lr),Lr|=g;else{if((g&1073741824)===0)return a=k!==null?k.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,Ut(vl,Lr),Lr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=k!==null?k.baseLanes:g,Ut(vl,Lr),Lr|=w}else k!==null?(w=k.baseLanes|g,c.memoizedState=null):w=g,Ut(vl,Lr),Lr|=w;return $n(a,c,E,g),c.child}function Gf(a,c){var g=c.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function Kf(a,c,g,w,E){var k=_r(g)?cr:Xn.current;return k=nl(c,k),co(c,E),g=na(a,c,g,w,k,E),w=Ed(),a!==null&&!dr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~E,Ei(a,c,E)):(Ht&&w&&xc(c),c.flags|=1,$n(a,c,g,E),c.child)}function Yf(a,c,g,w,E){if(_r(g)){var k=!0;Xr(c)}else k=!1;if(co(c,E),c.stateNode===null)Fd(a,c),ra(c,g,w),Vf(c,g,w,E),w=!0;else if(a===null){var O=c.stateNode,V=c.memoizedProps;O.props=V;var G=O.context,ue=g.contextType;typeof ue=="object"&&ue!==null?ue=Qr(ue):(ue=_r(g)?cr:Xn.current,ue=nl(c,ue));var Ee=g.getDerivedStateFromProps,Te=typeof Ee=="function"||typeof O.getSnapshotBeforeUpdate=="function";Te||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(V!==w||G!==ue)&&hl(c,O,w,ue),ei=!1;var Se=c.memoizedState;O.state=Se,sl(c,w,O,E),G=c.memoizedState,V!==w||Se!==G||wr.current||ei?(typeof Ee=="function"&&(Md(c,g,Ee,w),G=c.memoizedState),(V=ei||Uf(c,g,V,w,Se,G,ue))?(Te||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=G),O.props=w,O.state=G,O.context=ue,w=V):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{O=c.stateNode,Tg(a,c),V=c.memoizedProps,ue=c.type===c.elementType?V:ri(c.type,V),O.props=ue,Te=c.pendingProps,Se=O.context,G=g.contextType,typeof G=="object"&&G!==null?G=Qr(G):(G=_r(g)?cr:Xn.current,G=nl(c,G));var Oe=g.getDerivedStateFromProps;(Ee=typeof Oe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(V!==Te||Se!==G)&&hl(c,O,w,G),ei=!1,Se=c.memoizedState,O.state=Se,sl(c,w,O,E);var je=c.memoizedState;V!==Te||Se!==je||wr.current||ei?(typeof Oe=="function"&&(Md(c,g,Oe,w),je=c.memoizedState),(ue=ei||Uf(c,g,ue,w,Se,je,G)||!1)?(Ee||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(w,je,G),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(w,je,G)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=je),O.props=w,O.state=je,O.context=G,w=ue):(typeof O.componentDidUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(c.flags|=1024),w=!1)}return Xf(a,c,g,w,k,E)}function Xf(a,c,g,w,E,k){Gf(a,c);var O=(c.flags&128)!==0;if(!w&&!O)return E&&xg(c,g,!1),Ei(a,c,k);w=c.stateNode,Ld.current=c;var V=O&&typeof g.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,a!==null&&O?(c.child=sn(c,a.child,null,k),c.child=sn(c,null,V,k)):$n(a,c,V,k),c.memoizedState=w.state,E&&xg(c,g,!0),c.child}function $g(a){var c=a.stateNode;c.pendingContext?_g(a,c.pendingContext,c.pendingContext!==c.context):c.context&&_g(a,c.context,!1),Pf(a,c.containerInfo)}function ns(a,c,g,w,E){return Xi(),Zi(E),c.flags|=256,$n(a,c,g,w),c.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function Lc(a){return{baseLanes:a,cachePool:null,transitions:null}}function jd(a,c,g){var w=c.pendingProps,E=Kt.current,k=!1,O=(c.flags&128)!==0,V;if((V=O)||(V=a!==null&&a.memoizedState===null?!1:(E&2)!==0),V?(k=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(E|=1),Ut(Kt,E&1),a===null)return br(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=w.children,a=w.fallback,k?(w=c.mode,k=c.child,O={mode:"hidden",children:O},(w&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=O):k=Qd(O,w,0,null),a=ca(a,w,g,null),k.return=c,a.return=c,k.sibling=a,c.child=k,c.child.memoizedState=Lc(g),c.memoizedState=Nc,a):pl(c,O));if(E=a.memoizedState,E!==null&&(V=E.dehydrated,V!==null))return Ye(a,c,O,w,V,E,g);if(k){k=w.fallback,O=c.mode,E=a.child,V=E.sibling;var G={mode:"hidden",children:w.children};return(O&1)===0&&c.child!==E?(w=c.child,w.childLanes=0,w.pendingProps=G,c.deletions=null):(w=Ri(E,G),w.subtreeFlags=E.subtreeFlags&14680064),V!==null?k=Ri(V,k):(k=ca(k,O,g,null),k.flags|=2),k.return=c,w.return=c,w.sibling=k,c.child=w,w=k,k=c.child,O=a.child.memoizedState,O=O===null?Lc(g):{baseLanes:O.baseLanes|g,cachePool:null,transitions:O.transitions},k.memoizedState=O,k.childLanes=a.childLanes&~g,c.memoizedState=Nc,w}return k=a.child,a=k.sibling,w=Ri(k,{mode:"visible",children:w.children}),(c.mode&1)===0&&(w.lanes=g),w.return=c,w.sibling=null,a!==null&&(g=c.deletions,g===null?(c.deletions=[a],c.flags|=16):g.push(a)),c.child=w,c.memoizedState=null,w}function pl(a,c){return c=Qd({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Ms(a,c,g,w){return w!==null&&Zi(w),sn(c,a.child,null,g),a=pl(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Ye(a,c,g,w,E,k,O){if(g)return c.flags&256?(c.flags&=-257,w=Od(Error(t(422))),Ms(a,c,O,w)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(k=w.fallback,E=c.mode,w=Qd({mode:"visible",children:w.children},E,0,null),k=ca(k,E,O,null),k.flags|=2,w.return=c,k.return=c,w.sibling=k,c.child=w,(c.mode&1)!==0&&sn(c,a.child,null,O),c.child.memoizedState=Lc(O),c.memoizedState=Nc,k);if((c.mode&1)===0)return Ms(a,c,O,null);if(E.data==="$!"){if(w=E.nextSibling&&E.nextSibling.dataset,w)var V=w.dgst;return w=V,k=Error(t(419)),w=Od(k,w,void 0),Ms(a,c,O,w)}if(V=(O&a.childLanes)!==0,dr||V){if(w=Rn,w!==null){switch(O&-O){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(w.suspendedLanes|O))!==0?0:E,E!==0&&E!==k.retryLane&&(k.retryLane=E,ks(a,E),Pi(w,a,E,-1))}return dp(),w=Od(Error(t(421))),Ms(a,c,O,w)}return E.data==="$?"?(c.flags|=128,c.child=a.child,c=q0.bind(null,a),E._reactRetry=c,null):(a=k.treeContext,Dr=io(E.nextSibling),Jn=c,Ht=!0,Si=null,a!==null&&(Zr[Jr++]=Gi,Zr[Jr++]=Ki,Zr[Jr++]=Yo,Gi=a.id,Ki=a.overflow,Yo=c),c=pl(c,w.children),c.flags|=4096,c)}function jc(a,c,g){a.lanes|=c;var w=a.alternate;w!==null&&(w.lanes|=c),Fn(a.return,c,g)}function Fc(a,c,g,w,E){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:E}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=g,k.tailMode=E)}function fo(a,c,g){var w=c.pendingProps,E=w.revealOrder,k=w.tail;if($n(a,c,w.children,g),w=Kt.current,(w&2)!==0)w=w&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&jc(a,g,c);else if(a.tag===19)jc(a,g,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(Ut(Kt,w),(c.mode&1)===0)c.memoizedState=null;else switch(E){case"forwards":for(g=c.child,E=null;g!==null;)a=g.alternate,a!==null&&ea(a)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),Fc(c,!1,E,g,k);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(a=E.alternate,a!==null&&ea(a)===null){c.child=E;break}a=E.sibling,E.sibling=g,g=E,E=a}Fc(c,!0,g,null,k);break;case"together":Fc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Fd(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Ei(a,c,g){if(a!==null&&(c.dependencies=a.dependencies),mo|=c.lanes,(g&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,g=Ri(a,a.pendingProps),c.child=g,g.return=c;a.sibling!==null;)a=a.sibling,g=g.sibling=Ri(a,a.pendingProps),g.return=c;g.sibling=null}return c.child}function zg(a,c,g){switch(c.tag){case 3:$g(c),Xi();break;case 5:Rf(c);break;case 1:_r(c.type)&&Xr(c);break;case 4:Pf(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,E=c.memoizedProps.value;Ut(Ec,w._currentValue),w._currentValue=E;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(Ut(Kt,Kt.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?jd(a,c,g):(Ut(Kt,Kt.current&1),a=Ei(a,c,g),a!==null?a.sibling:null);Ut(Kt,Kt.current&1);break;case 19:if(w=(g&c.childLanes)!==0,(a.flags&128)!==0){if(w)return fo(a,c,g);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ut(Kt,Kt.current),w)break;return null;case 22:case 23:return c.lanes=0,qf(a,c,g)}return Ei(a,c,g)}var zn,Zf,Bg,Jf;zn=function(a,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Zf=function(){},Bg=function(a,c,g,w){var E=a.memoizedProps;if(E!==w){a=c.stateNode,Ps(Ji.current);var k=null;switch(g){case"input":E=Qt(a,E),w=Qt(a,w),k=[];break;case"select":E=Q({},E,{value:void 0}),w=Q({},w,{value:void 0}),k=[];break;case"textarea":E=ps(a,E),w=ps(a,w),k=[];break;default:typeof E.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=cd)}Oo(g,w);var O;g=null;for(ue in E)if(!w.hasOwnProperty(ue)&&E.hasOwnProperty(ue)&&E[ue]!=null)if(ue==="style"){var V=E[ue];for(O in V)V.hasOwnProperty(O)&&(g||(g={}),g[O]="")}else ue!=="dangerouslySetInnerHTML"&&ue!=="children"&&ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&ue!=="autoFocus"&&(i.hasOwnProperty(ue)?k||(k=[]):(k=k||[]).push(ue,null));for(ue in w){var G=w[ue];if(V=E?.[ue],w.hasOwnProperty(ue)&&G!==V&&(G!=null||V!=null))if(ue==="style")if(V){for(O in V)!V.hasOwnProperty(O)||G&&G.hasOwnProperty(O)||(g||(g={}),g[O]="");for(O in G)G.hasOwnProperty(O)&&V[O]!==G[O]&&(g||(g={}),g[O]=G[O])}else g||(k||(k=[]),k.push(ue,g)),g=G;else ue==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,V=V?V.__html:void 0,G!=null&&V!==G&&(k=k||[]).push(ue,G)):ue==="children"?typeof G!="string"&&typeof G!="number"||(k=k||[]).push(ue,""+G):ue!=="suppressContentEditableWarning"&&ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(ue)?(G!=null&&ue==="onScroll"&&Vt("scroll",a),k||V===G||(k=[])):(k=k||[]).push(ue,G))}g&&(k=k||[]).push("style",g);var ue=k;(c.updateQueue=ue)&&(c.flags|=4)}},Jf=function(a,c,g,w){g!==w&&(c.flags|=4)};function $c(a,c){if(!Ht)switch(a.tailMode){case"hidden":c=a.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function Bn(a){var c=a.alternate!==null&&a.alternate.child===a.child,g=0,w=0;if(c)for(var E=a.child;E!==null;)g|=E.lanes|E.childLanes,w|=E.subtreeFlags&14680064,w|=E.flags&14680064,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)g|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=w,a.childLanes=g,c}function F0(a,c,g){var w=c.pendingProps;switch(Zo(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(c),null;case 1:return _r(c.type)&&fd(),Bn(c),null;case 3:return w=c.stateNode,uo(),Wt(wr),Wt(Xn),Ad(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(Sc(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Si!==null&&(lp(Si),Si=null))),Zf(a,c),Bn(c),null;case 5:Sd(c);var E=Ps(ol.current);if(g=c.type,a!==null&&c.stateNode!=null)Bg(a,c,g,w,E),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(t(166));return Bn(c),null}if(a=Ps(Ji.current),Sc(c)){w=c.stateNode,g=c.type;var k=c.memoizedProps;switch(w[Hi]=c,w[so]=k,a=(c.mode&1)!==0,g){case"dialog":Vt("cancel",w),Vt("close",w);break;case"iframe":case"object":case"embed":Vt("load",w);break;case"video":case"audio":for(E=0;E<Ss.length;E++)Vt(Ss[E],w);break;case"source":Vt("error",w);break;case"img":case"image":case"link":Vt("error",w),Vt("load",w);break;case"details":Vt("toggle",w);break;case"input":Gr(w,k),Vt("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!k.multiple},Vt("invalid",w);break;case"textarea":Do(w,k),Vt("invalid",w)}Oo(g,k),E=null;for(var O in k)if(k.hasOwnProperty(O)){var V=k[O];O==="children"?typeof V=="string"?w.textContent!==V&&(k.suppressHydrationWarning!==!0&&yc(w.textContent,V,a),E=["children",V]):typeof V=="number"&&w.textContent!==""+V&&(k.suppressHydrationWarning!==!0&&yc(w.textContent,V,a),E=["children",""+V]):i.hasOwnProperty(O)&&V!=null&&O==="onScroll"&&Vt("scroll",w)}switch(g){case"input":at(w),Wl(w,k,!0);break;case"textarea":at(w),Bi(w);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(w.onclick=cd)}w=E,c.updateQueue=w,w!==null&&(c.flags|=4)}else{O=E.nodeType===9?E:E.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ql(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=O.createElement(g,{is:w.is}):(a=O.createElement(g),g==="select"&&(O=a,w.multiple?O.multiple=!0:w.size&&(O.size=w.size))):a=O.createElementNS(a,g),a[Hi]=c,a[so]=w,zn(a,c,!1,!1),c.stateNode=a;e:{switch(O=No(g,w),g){case"dialog":Vt("cancel",a),Vt("close",a),E=w;break;case"iframe":case"object":case"embed":Vt("load",a),E=w;break;case"video":case"audio":for(E=0;E<Ss.length;E++)Vt(Ss[E],a);E=w;break;case"source":Vt("error",a),E=w;break;case"img":case"image":case"link":Vt("error",a),Vt("load",a),E=w;break;case"details":Vt("toggle",a),E=w;break;case"input":Gr(a,w),E=Qt(a,w),Vt("invalid",a);break;case"option":E=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},E=Q({},w,{value:void 0}),Vt("invalid",a);break;case"textarea":Do(a,w),E=ps(a,w),Vt("invalid",a);break;default:E=w}Oo(g,E),V=E;for(k in V)if(V.hasOwnProperty(k)){var G=V[k];k==="style"?Da(a,G):k==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Ia(a,G)):k==="children"?typeof G=="string"?(g!=="textarea"||G!=="")&&gs(a,G):typeof G=="number"&&gs(a,""+G):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?G!=null&&k==="onScroll"&&Vt("scroll",a):G!=null&&R(a,k,G,O))}switch(g){case"input":at(a),Wl(a,w,!1);break;case"textarea":at(a),Bi(a);break;case"option":w.value!=null&&a.setAttribute("value",""+Ne(w.value));break;case"select":a.multiple=!!w.multiple,k=w.value,k!=null?Tn(a,!!w.multiple,k,!1):w.defaultValue!=null&&Tn(a,!!w.multiple,w.defaultValue,!0);break;default:typeof E.onClick=="function"&&(a.onclick=cd)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Bn(c),null;case 6:if(a&&c.stateNode!=null)Jf(a,c,a.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(t(166));if(g=Ps(ol.current),Ps(Ji.current),Sc(c)){if(w=c.stateNode,g=c.memoizedProps,w[Hi]=c,(k=w.nodeValue!==g)&&(a=Jn,a!==null))switch(a.tag){case 3:yc(w.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&yc(w.nodeValue,g,(a.mode&1)!==0)}k&&(c.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[Hi]=c,c.stateNode=w}return Bn(c),null;case 13:if(Wt(Kt),w=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Ht&&Dr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Ef(),Xi(),c.flags|=98560,k=!1;else if(k=Sc(c),w!==null&&w.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Hi]=c}else Xi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Bn(c),k=!1}else Si!==null&&(lp(Si),Si=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Kt.current&1)!==0?bn===0&&(bn=3):dp())),c.updateQueue!==null&&(c.flags|=4),Bn(c),null);case 4:return uo(),Zf(a,c),a===null&&no(c.stateNode.containerInfo),Bn(c),null;case 10:return wd(c.type._context),Bn(c),null;case 17:return _r(c.type)&&fd(),Bn(c),null;case 19:if(Wt(Kt),k=c.memoizedState,k===null)return Bn(c),null;if(w=(c.flags&128)!==0,O=k.rendering,O===null)if(w)$c(k,!1);else{if(bn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(O=ea(a),O!==null){for(c.flags|=128,$c(k,!1),w=O.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=g,g=c.child;g!==null;)k=g,a=w,k.flags&=14680066,O=k.alternate,O===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=O.childLanes,k.lanes=O.lanes,k.child=O.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=O.memoizedProps,k.memoizedState=O.memoizedState,k.updateQueue=O.updateQueue,k.type=O.type,a=O.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return Ut(Kt,Kt.current&1|2),c.child}a=a.sibling}k.tail!==null&&Ct()>sa&&(c.flags|=128,w=!0,$c(k,!1),c.lanes=4194304)}else{if(!w)if(a=ea(O),a!==null){if(c.flags|=128,w=!0,g=a.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),$c(k,!0),k.tail===null&&k.tailMode==="hidden"&&!O.alternate&&!Ht)return Bn(c),null}else 2*Ct()-k.renderingStartTime>sa&&g!==1073741824&&(c.flags|=128,w=!0,$c(k,!1),c.lanes=4194304);k.isBackwards?(O.sibling=c.child,c.child=O):(g=k.last,g!==null?g.sibling=O:c.child=O,k.last=O)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=Ct(),c.sibling=null,g=Kt.current,Ut(Kt,w?g&1|2:g&1),c):(Bn(c),null);case 22:case 23:return up(),w=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(c.flags|=8192),w&&(c.mode&1)!==0?(Lr&1073741824)!==0&&(Bn(c),c.subtreeFlags&6&&(c.flags|=8192)):Bn(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function $0(a,c){switch(Zo(c),c.tag){case 1:return _r(c.type)&&fd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return uo(),Wt(wr),Wt(Xn),Ad(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Sd(c),null;case 13:if(Wt(Kt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Xi()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return Wt(Kt),null;case 4:return uo(),null;case 10:return wd(c.type._context),null;case 22:case 23:return up(),null;case 24:return null;default:return null}}var $d=!1,Yt=!1,hr=typeof WeakSet=="function"?WeakSet:Set,Le=null;function ml(a,c){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){tn(a,c,w)}else g.current=null}function zc(a,c,g){try{g()}catch(w){tn(a,c,w)}}var Ug=!1;function z0(a,c){if(wc=Hu,a=jt(),hc(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var E=w.anchorOffset,k=w.focusNode;w=w.focusOffset;try{g.nodeType,k.nodeType}catch{g=null;break e}var O=0,V=-1,G=-1,ue=0,Ee=0,Te=a,Se=null;t:for(;;){for(var Oe;Te!==g||E!==0&&Te.nodeType!==3||(V=O+E),Te!==k||w!==0&&Te.nodeType!==3||(G=O+w),Te.nodeType===3&&(O+=Te.nodeValue.length),(Oe=Te.firstChild)!==null;)Se=Te,Te=Oe;for(;;){if(Te===a)break t;if(Se===g&&++ue===E&&(V=O),Se===k&&++Ee===w&&(G=O),(Oe=Te.nextSibling)!==null)break;Te=Se,Se=Te.parentNode}Te=Oe}g=V===-1||G===-1?null:{start:V,end:G}}else g=null}g=g||{start:0,end:0}}else g=null;for(Go={focusedElem:a,selectionRange:g},Hu=!1,Le=c;Le!==null;)if(c=Le,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,Le=a;else for(;Le!==null;){c=Le;try{var je=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Fe=je.memoizedProps,cn=je.memoizedState,se=c.stateNode,X=se.getSnapshotBeforeUpdate(c.elementType===c.type?Fe:ri(c.type,Fe),cn);se.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=c.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Pe){tn(c,c.return,Pe)}if(a=c.sibling,a!==null){a.return=c.return,Le=a;break}Le=c.return}return je=Ug,Ug=!1,je}function Ds(a,c,g){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&a)===a){var k=E.destroy;E.destroy=void 0,k!==void 0&&zc(c,g,k)}E=E.next}while(E!==w)}}function Bc(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&a)===a){var w=g.create;g.destroy=w()}g=g.next}while(g!==c)}}function zd(a){var c=a.ref;if(c!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof c=="function"?c(a):c.current=a}}function Vg(a){var c=a.alternate;c!==null&&(a.alternate=null,Vg(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Hi],delete c[so],delete c[dd],delete c[L],delete c[el])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Wg(a){return a.tag===5||a.tag===3||a.tag===4}function Hg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Wg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Qf(a,c,g){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(a,c):g.insertBefore(a,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(a,g)):(c=g,c.appendChild(a)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=cd));else if(w!==4&&(a=a.child,a!==null))for(Qf(a,c,g),a=a.sibling;a!==null;)Qf(a,c,g),a=a.sibling}function Bd(a,c,g){var w=a.tag;if(w===5||w===6)a=a.stateNode,c?g.insertBefore(a,c):g.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(Bd(a,c,g),a=a.sibling;a!==null;)Bd(a,c,g),a=a.sibling}var Pn=null,Ci=!1;function rs(a,c,g){for(g=g.child;g!==null;)ep(a,c,g),g=g.sibling}function ep(a,c,g){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount($u,g)}catch{}switch(g.tag){case 5:Yt||ml(g,c);case 6:var w=Pn,E=Ci;Pn=null,rs(a,c,g),Pn=w,Ci=E,Pn!==null&&(Ci?(a=Pn,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):Pn.removeChild(g.stateNode));break;case 18:Pn!==null&&(Ci?(a=Pn,g=g.stateNode,a.nodeType===8?xf(a.parentNode,g):a.nodeType===1&&xf(a,g),Mt(a)):xf(Pn,g.stateNode));break;case 4:w=Pn,E=Ci,Pn=g.stateNode.containerInfo,Ci=!0,rs(a,c,g),Pn=w,Ci=E;break;case 0:case 11:case 14:case 15:if(!Yt&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){E=w=w.next;do{var k=E,O=k.destroy;k=k.tag,O!==void 0&&((k&2)!==0||(k&4)!==0)&&zc(g,c,O),E=E.next}while(E!==w)}rs(a,c,g);break;case 1:if(!Yt&&(ml(g,c),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(V){tn(g,c,V)}rs(a,c,g);break;case 21:rs(a,c,g);break;case 22:g.mode&1?(Yt=(w=Yt)||g.memoizedState!==null,rs(a,c,g),Yt=w):rs(a,c,g);break;default:rs(a,c,g)}}function gl(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new hr),c.forEach(function(w){var E=G0.bind(null,a,w);g.has(w)||(g.add(w),w.then(E,E))})}}function Nr(a,c){var g=c.deletions;if(g!==null)for(var w=0;w<g.length;w++){var E=g[w];try{var k=a,O=c,V=O;e:for(;V!==null;){switch(V.tag){case 5:Pn=V.stateNode,Ci=!1;break e;case 3:Pn=V.stateNode.containerInfo,Ci=!0;break e;case 4:Pn=V.stateNode.containerInfo,Ci=!0;break e}V=V.return}if(Pn===null)throw Error(t(160));ep(k,O,E),Pn=null,Ci=!1;var G=E.alternate;G!==null&&(G.return=null),E.return=null}catch(ue){tn(E,c,ue)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)tp(c,a),c=c.sibling}function tp(a,c){var g=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Nr(c,a),ki(a),w&4){try{Ds(3,a,a.return),Bc(3,a)}catch(Fe){tn(a,a.return,Fe)}try{Ds(5,a,a.return)}catch(Fe){tn(a,a.return,Fe)}}break;case 1:Nr(c,a),ki(a),w&512&&g!==null&&ml(g,g.return);break;case 5:if(Nr(c,a),ki(a),w&512&&g!==null&&ml(g,g.return),a.flags&32){var E=a.stateNode;try{gs(E,"")}catch(Fe){tn(a,a.return,Fe)}}if(w&4&&(E=a.stateNode,E!=null)){var k=a.memoizedProps,O=g!==null?g.memoizedProps:k,V=a.type,G=a.updateQueue;if(a.updateQueue=null,G!==null)try{V==="input"&&k.type==="radio"&&k.name!=null&&zi(E,k),No(V,O);var ue=No(V,k);for(O=0;O<G.length;O+=2){var Ee=G[O],Te=G[O+1];Ee==="style"?Da(E,Te):Ee==="dangerouslySetInnerHTML"?Ia(E,Te):Ee==="children"?gs(E,Te):R(E,Ee,Te,ue)}switch(V){case"input":Ln(E,k);break;case"textarea":Du(E,k);break;case"select":var Se=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!k.multiple;var Oe=k.value;Oe!=null?Tn(E,!!k.multiple,Oe,!1):Se!==!!k.multiple&&(k.defaultValue!=null?Tn(E,!!k.multiple,k.defaultValue,!0):Tn(E,!!k.multiple,k.multiple?[]:"",!1))}E[so]=k}catch(Fe){tn(a,a.return,Fe)}}break;case 6:if(Nr(c,a),ki(a),w&4){if(a.stateNode===null)throw Error(t(162));E=a.stateNode,k=a.memoizedProps;try{E.nodeValue=k}catch(Fe){tn(a,a.return,Fe)}}break;case 3:if(Nr(c,a),ki(a),w&4&&g!==null&&g.memoizedState.isDehydrated)try{Mt(c.containerInfo)}catch(Fe){tn(a,a.return,Fe)}break;case 4:Nr(c,a),ki(a);break;case 13:Nr(c,a),ki(a),E=a.child,E.flags&8192&&(k=E.memoizedState!==null,E.stateNode.isHidden=k,!k||E.alternate!==null&&E.alternate.memoizedState!==null||(ip=Ct())),w&4&&gl(a);break;case 22:if(Ee=g!==null&&g.memoizedState!==null,a.mode&1?(Yt=(ue=Yt)||Ee,Nr(c,a),Yt=ue):Nr(c,a),ki(a),w&8192){if(ue=a.memoizedState!==null,(a.stateNode.isHidden=ue)&&!Ee&&(a.mode&1)!==0)for(Le=a,Ee=a.child;Ee!==null;){for(Te=Le=Ee;Le!==null;){switch(Se=Le,Oe=Se.child,Se.tag){case 0:case 11:case 14:case 15:Ds(4,Se,Se.return);break;case 1:ml(Se,Se.return);var je=Se.stateNode;if(typeof je.componentWillUnmount=="function"){w=Se,g=Se.return;try{c=w,je.props=c.memoizedProps,je.state=c.memoizedState,je.componentWillUnmount()}catch(Fe){tn(w,g,Fe)}}break;case 5:ml(Se,Se.return);break;case 22:if(Se.memoizedState!==null){po(Te);continue}}Oe!==null?(Oe.return=Se,Le=Oe):po(Te)}Ee=Ee.sibling}e:for(Ee=null,Te=a;;){if(Te.tag===5){if(Ee===null){Ee=Te;try{E=Te.stateNode,ue?(k=E.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(V=Te.stateNode,G=Te.memoizedProps.style,O=G!=null&&G.hasOwnProperty("display")?G.display:null,V.style.display=Ma("display",O))}catch(Fe){tn(a,a.return,Fe)}}}else if(Te.tag===6){if(Ee===null)try{Te.stateNode.nodeValue=ue?"":Te.memoizedProps}catch(Fe){tn(a,a.return,Fe)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===a)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===a)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===a)break e;Ee===Te&&(Ee=null),Te=Te.return}Ee===Te&&(Ee=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:Nr(c,a),ki(a),w&4&&gl(a);break;case 21:break;default:Nr(c,a),ki(a)}}function ki(a){var c=a.flags;if(c&2){try{e:{for(var g=a.return;g!==null;){if(Wg(g)){var w=g;break e}g=g.return}throw Error(t(160))}switch(w.tag){case 5:var E=w.stateNode;w.flags&32&&(gs(E,""),w.flags&=-33);var k=Hg(a);Bd(a,k,E);break;case 3:case 4:var O=w.stateNode.containerInfo,V=Hg(a);Qf(a,V,O);break;default:throw Error(t(161))}}catch(G){tn(a,a.return,G)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function Ud(a,c,g){Le=a,np(a)}function np(a,c,g){for(var w=(a.mode&1)!==0;Le!==null;){var E=Le,k=E.child;if(E.tag===22&&w){var O=E.memoizedState!==null||$d;if(!O){var V=E.alternate,G=V!==null&&V.memoizedState!==null||Yt;V=$d;var ue=Yt;if($d=O,(Yt=G)&&!ue)for(Le=E;Le!==null;)O=Le,G=O.child,O.tag===22&&O.memoizedState!==null?qg(E):G!==null?(G.return=O,Le=G):qg(E);for(;k!==null;)Le=k,np(k),k=k.sibling;Le=E,$d=V,Yt=ue}Ti(a)}else(E.subtreeFlags&8772)!==0&&k!==null?(k.return=E,Le=k):Ti(a)}}function Ti(a){for(;Le!==null;){var c=Le;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Yt||Bc(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Yt)if(g===null)w.componentDidMount();else{var E=c.elementType===c.type?g.memoizedProps:ri(c.type,g.memoizedProps);w.componentDidUpdate(E,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&Tf(c,k,w);break;case 3:var O=c.updateQueue;if(O!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}Tf(c,O,g)}break;case 5:var V=c.stateNode;if(g===null&&c.flags&4){g=V;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&g.focus();break;case"img":G.src&&(g.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ue=c.alternate;if(ue!==null){var Ee=ue.memoizedState;if(Ee!==null){var Te=Ee.dehydrated;Te!==null&&Mt(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||c.flags&512&&zd(c)}catch(Se){tn(c,c.return,Se)}}if(c===a){Le=null;break}if(g=c.sibling,g!==null){g.return=c.return,Le=g;break}Le=c.return}}function po(a){for(;Le!==null;){var c=Le;if(c===a){Le=null;break}var g=c.sibling;if(g!==null){g.return=c.return,Le=g;break}Le=c.return}}function qg(a){for(;Le!==null;){var c=Le;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Bc(4,c)}catch(G){tn(c,g,G)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var E=c.return;try{w.componentDidMount()}catch(G){tn(c,E,G)}}var k=c.return;try{zd(c)}catch(G){tn(c,k,G)}break;case 5:var O=c.return;try{zd(c)}catch(G){tn(c,O,G)}}}catch(G){tn(c,c.return,G)}if(c===a){Le=null;break}var V=c.sibling;if(V!==null){V.return=c.return,Le=V;break}Le=c.return}}var Gg=Math.ceil,Vd=M.ReactCurrentDispatcher,rp=M.ReactCurrentOwner,ii=M.ReactCurrentBatchConfig,xt=0,Rn=null,yn=null,Un=0,Lr=0,vl=yr(0),bn=0,Uc=null,mo=0,Vc=0,Wd=0,Wc=null,Sr=null,ip=0,sa=1/0,Os=null,Hd=!1,sp=null,go=null,qd=!1,vo=null,fr=0,Hc=0,op=null,Gd=-1,qc=0;function pr(){return(xt&6)!==0?Ct():Gd!==-1?Gd:Gd=Ct()}function yo(a){return(a.mode&1)===0?1:(xt&2)!==0&&Un!==0?Un&-Un:Cg.transition!==null?(qc===0&&(qc=Qh()),qc):(a=Rt,a!==0||(a=window.event,a=a===void 0?16:Jm(a.type)),a)}function Pi(a,c,g,w){if(50<Hc)throw Hc=0,op=null,Error(t(185));oc(a,g,w),((xt&2)===0||a!==Rn)&&(a===Rn&&((xt&2)===0&&(Vc|=g),bn===4&&wo(a,Un)),Ar(a,w),g===1&&xt===0&&(c.mode&1)===0&&(sa=Ct()+500,pd&&ao()))}function Ar(a,c){var g=a.callbackNode;v0(a,c);var w=zo(a,a===Rn?Un:0);if(w===0)g!==null&&ze(g),a.callbackNode=null,a.callbackPriority=0;else if(c=w&-w,a.callbackPriority!==c){if(g!=null&&ze(g),c===1)a.tag===0?Ko(Kg.bind(null,a)):Sg(Kg.bind(null,a)),ud(function(){(xt&6)===0&&ao()}),g=null;else{switch(Bo(w)){case 1:g=rc;break;case 4:g=Bm;break;case 16:g=ic;break;case 536870912:g=Jh;break;default:g=ic}g=tv(g,Kd.bind(null,a))}a.callbackPriority=c,a.callbackNode=g}}function Kd(a,c){if(Gd=-1,qc=0,(xt&6)!==0)throw Error(t(327));var g=a.callbackNode;if(yl()&&a.callbackNode!==g)return null;var w=zo(a,a===Rn?Un:0);if(w===0)return null;if((w&30)!==0||(w&a.expiredLanes)!==0||c)c=Yd(a,w);else{c=w;var E=xt;xt|=2;var k=Xg();(Rn!==a||Un!==c)&&(Os=null,sa=Ct()+500,aa(a,c));do try{V0();break}catch(V){Yg(a,V)}while(!0);Cs(),Vd.current=k,xt=E,yn!==null?c=0:(Rn=null,Un=0,c=bn)}if(c!==0){if(c===2&&(E=Bu(a),E!==0&&(w=E,c=ap(a,E))),c===1)throw g=Uc,aa(a,0),wo(a,w),Ar(a,Ct()),g;if(c===6)wo(a,w);else{if(E=a.current.alternate,(w&30)===0&&!B0(E)&&(c=Yd(a,w),c===2&&(k=Bu(a),k!==0&&(w=k,c=ap(a,k))),c===1))throw g=Uc,aa(a,0),wo(a,w),Ar(a,Ct()),g;switch(a.finishedWork=E,a.finishedLanes=w,c){case 0:case 1:throw Error(t(345));case 2:la(a,Sr,Os);break;case 3:if(wo(a,w),(w&130023424)===w&&(c=ip+500-Ct(),10<c)){if(zo(a,0)!==0)break;if(E=a.suspendedLanes,(E&w)!==w){pr(),a.pingedLanes|=a.suspendedLanes&E;break}a.timeoutHandle=ro(la.bind(null,a,Sr,Os),c);break}la(a,Sr,Os);break;case 4:if(wo(a,w),(w&4194240)===w)break;for(c=a.eventTimes,E=-1;0<w;){var O=31-bi(w);k=1<<O,O=c[O],O>E&&(E=O),w&=~k}if(w=E,w=Ct()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Gg(w/1960))-w,10<w){a.timeoutHandle=ro(la.bind(null,a,Sr,Os),w);break}la(a,Sr,Os);break;case 5:la(a,Sr,Os);break;default:throw Error(t(329))}}}return Ar(a,Ct()),a.callbackNode===g?Kd.bind(null,a):null}function ap(a,c){var g=Wc;return a.current.memoizedState.isDehydrated&&(aa(a,c).flags|=256),a=Yd(a,c),a!==2&&(c=Sr,Sr=g,c!==null&&lp(c)),a}function lp(a){Sr===null?Sr=a:Sr.push.apply(Sr,a)}function B0(a){for(var c=a;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var E=g[w],k=E.getSnapshot;E=E.value;try{if(!ae(k(),E))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function wo(a,c){for(c&=~Wd,c&=~Vc,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var g=31-bi(c),w=1<<g;a[g]=-1,c&=~w}}function Kg(a){if((xt&6)!==0)throw Error(t(327));yl();var c=zo(a,0);if((c&1)===0)return Ar(a,Ct()),null;var g=Yd(a,c);if(a.tag!==0&&g===2){var w=Bu(a);w!==0&&(c=w,g=ap(a,w))}if(g===1)throw g=Uc,aa(a,0),wo(a,c),Ar(a,Ct()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,la(a,Sr,Os),Ar(a,Ct()),null}function cp(a,c){var g=xt;xt|=1;try{return a(c)}finally{xt=g,xt===0&&(sa=Ct()+500,pd&&ao())}}function oa(a){vo!==null&&vo.tag===0&&(xt&6)===0&&yl();var c=xt;xt|=1;var g=ii.transition,w=Rt;try{if(ii.transition=null,Rt=1,a)return a()}finally{Rt=w,ii.transition=g,xt=c,(xt&6)===0&&ao()}}function up(){Lr=vl.current,Wt(vl)}function aa(a,c){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,bc(g)),yn!==null)for(g=yn.return;g!==null;){var w=g;switch(Zo(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&fd();break;case 3:uo(),Wt(wr),Wt(Xn),Ad();break;case 5:Sd(w);break;case 4:uo();break;case 13:Wt(Kt);break;case 19:Wt(Kt);break;case 10:wd(w.type._context);break;case 22:case 23:up()}g=g.return}if(Rn=a,yn=a=Ri(a.current,null),Un=Lr=c,bn=0,Uc=null,Wd=Vc=mo=0,Sr=Wc=null,Qo!==null){for(c=0;c<Qo.length;c++)if(g=Qo[c],w=g.interleaved,w!==null){g.interleaved=null;var E=w.next,k=g.pending;if(k!==null){var O=k.next;k.next=E,w.next=O}g.pending=w}Qo=null}return a}function Yg(a,c){do{var g=yn;try{if(Cs(),Tc.current=Rd,al){for(var w=en.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}al=!1}if(ho=0,_n=ln=en=null,Pc=!1,ta=0,rp.current=null,g===null||g.return===null){bn=1,Uc=c,yn=null;break}e:{var k=a,O=g.return,V=g,G=c;if(c=Un,V.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ue=G,Ee=V,Te=Ee.tag;if((Ee.mode&1)===0&&(Te===0||Te===11||Te===15)){var Se=Ee.alternate;Se?(Ee.updateQueue=Se.updateQueue,Ee.memoizedState=Se.memoizedState,Ee.lanes=Se.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var Oe=jg(O);if(Oe!==null){Oe.flags&=-257,Wf(Oe,O,V,k,c),Oe.mode&1&&Oc(k,ue,c),c=Oe,G=ue;var je=c.updateQueue;if(je===null){var Fe=new Set;Fe.add(G),c.updateQueue=Fe}else je.add(G);break e}else{if((c&1)===0){Oc(k,ue,c),dp();break e}G=Error(t(426))}}else if(Ht&&V.mode&1){var cn=jg(O);if(cn!==null){(cn.flags&65536)===0&&(cn.flags|=256),Wf(cn,O,V,k,c),Zi(ia(G,V));break e}}k=G=ia(G,V),bn!==4&&(bn=2),Wc===null?Wc=[k]:Wc.push(k),k=O;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var se=Dc(k,G,c);Pg(k,se);break e;case 1:V=G;var X=k.type,oe=k.stateNode;if((k.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(go===null||!go.has(oe)))){k.flags|=65536,c&=-c,k.lanes|=c;var Pe=Nd(k,V,c);Pg(k,Pe);break e}}k=k.return}while(k!==null)}Jg(g)}catch(Be){c=Be,yn===g&&g!==null&&(yn=g=g.return);continue}break}while(!0)}function Xg(){var a=Vd.current;return Vd.current=Rd,a===null?Rd:a}function dp(){(bn===0||bn===3||bn===2)&&(bn=4),Rn===null||(mo&268435455)===0&&(Vc&268435455)===0||wo(Rn,Un)}function Yd(a,c){var g=xt;xt|=2;var w=Xg();(Rn!==a||Un!==c)&&(Os=null,aa(a,c));do try{U0();break}catch(E){Yg(a,E)}while(!0);if(Cs(),xt=g,Vd.current=w,yn!==null)throw Error(t(261));return Rn=null,Un=0,bn}function U0(){for(;yn!==null;)Zg(yn)}function V0(){for(;yn!==null&&!bt();)Zg(yn)}function Zg(a){var c=ev(a.alternate,a,Lr);a.memoizedProps=a.pendingProps,c===null?Jg(a):yn=c,rp.current=null}function Jg(a){var c=a;do{var g=c.alternate;if(a=c.return,(c.flags&32768)===0){if(g=F0(g,c,Lr),g!==null){yn=g;return}}else{if(g=$0(g,c),g!==null){g.flags&=32767,yn=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{bn=6,yn=null;return}}if(c=c.sibling,c!==null){yn=c;return}yn=c=a}while(c!==null);bn===0&&(bn=5)}function la(a,c,g){var w=Rt,E=ii.transition;try{ii.transition=null,Rt=1,W0(a,c,g,w)}finally{ii.transition=E,Rt=w}return null}function W0(a,c,g,w){do yl();while(vo!==null);if((xt&6)!==0)throw Error(t(327));g=a.finishedWork;var E=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=g.lanes|g.childLanes;if(Gm(a,k),a===Rn&&(yn=Rn=null,Un=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||qd||(qd=!0,tv(ic,function(){return yl(),null})),k=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||k){k=ii.transition,ii.transition=null;var O=Rt;Rt=1;var V=xt;xt|=4,rp.current=null,z0(a,g),tp(g,a),O0(Go),Hu=!!wc,Go=wc=null,a.current=g,Ud(g),jn(),xt=V,Rt=O,ii.transition=k}else a.current=g;if(qd&&(qd=!1,vo=a,fr=E),k=a.pendingLanes,k===0&&(go=null),g0(g.stateNode),Ar(a,Ct()),c!==null)for(w=a.onRecoverableError,g=0;g<c.length;g++)E=c[g],w(E.value,{componentStack:E.stack,digest:E.digest});if(Hd)throw Hd=!1,a=sp,sp=null,a;return(fr&1)!==0&&a.tag!==0&&yl(),k=a.pendingLanes,(k&1)!==0?a===op?Hc++:(Hc=0,op=a):Hc=0,ao(),null}function yl(){if(vo!==null){var a=Bo(fr),c=ii.transition,g=Rt;try{if(ii.transition=null,Rt=16>a?16:a,vo===null)var w=!1;else{if(a=vo,vo=null,fr=0,(xt&6)!==0)throw Error(t(331));var E=xt;for(xt|=4,Le=a.current;Le!==null;){var k=Le,O=k.child;if((Le.flags&16)!==0){var V=k.deletions;if(V!==null){for(var G=0;G<V.length;G++){var ue=V[G];for(Le=ue;Le!==null;){var Ee=Le;switch(Ee.tag){case 0:case 11:case 15:Ds(8,Ee,k)}var Te=Ee.child;if(Te!==null)Te.return=Ee,Le=Te;else for(;Le!==null;){Ee=Le;var Se=Ee.sibling,Oe=Ee.return;if(Vg(Ee),Ee===ue){Le=null;break}if(Se!==null){Se.return=Oe,Le=Se;break}Le=Oe}}}var je=k.alternate;if(je!==null){var Fe=je.child;if(Fe!==null){je.child=null;do{var cn=Fe.sibling;Fe.sibling=null,Fe=cn}while(Fe!==null)}}Le=k}}if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,Le=O;else e:for(;Le!==null;){if(k=Le,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Ds(9,k,k.return)}var se=k.sibling;if(se!==null){se.return=k.return,Le=se;break e}Le=k.return}}var X=a.current;for(Le=X;Le!==null;){O=Le;var oe=O.child;if((O.subtreeFlags&2064)!==0&&oe!==null)oe.return=O,Le=oe;else e:for(O=X;Le!==null;){if(V=Le,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Bc(9,V)}}catch(Be){tn(V,V.return,Be)}if(V===O){Le=null;break e}var Pe=V.sibling;if(Pe!==null){Pe.return=V.return,Le=Pe;break e}Le=V.return}}if(xt=E,ao(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot($u,a)}catch{}w=!0}return w}finally{Rt=g,ii.transition=c}}return!1}function Xd(a,c,g){c=ia(g,c),c=Dc(a,c,1),a=ti(a,c,1),c=pr(),a!==null&&(oc(a,1,c),Ar(a,c))}function tn(a,c,g){if(a.tag===3)Xd(a,a,g);else for(;c!==null;){if(c.tag===3){Xd(c,a,g);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(go===null||!go.has(w))){a=ia(g,a),a=Nd(c,a,1),c=ti(c,a,1),a=pr(),c!==null&&(oc(c,1,a),Ar(c,a));break}}c=c.return}}function H0(a,c,g){var w=a.pingCache;w!==null&&w.delete(c),c=pr(),a.pingedLanes|=a.suspendedLanes&g,Rn===a&&(Un&g)===g&&(bn===4||bn===3&&(Un&130023424)===Un&&500>Ct()-ip?aa(a,0):Wd|=g),Ar(a,c)}function Qg(a,c){c===0&&((a.mode&1)===0?c=1:(c=zu,zu<<=1,(zu&130023424)===0&&(zu=4194304)));var g=pr();a=ks(a,c),a!==null&&(oc(a,c,g),Ar(a,g))}function q0(a){var c=a.memoizedState,g=0;c!==null&&(g=c.retryLane),Qg(a,g)}function G0(a,c){var g=0;switch(a.tag){case 13:var w=a.stateNode,E=a.memoizedState;E!==null&&(g=E.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(c),Qg(a,g)}var ev;ev=function(a,c,g){if(a!==null)if(a.memoizedProps!==c.pendingProps||wr.current)dr=!0;else{if((a.lanes&g)===0&&(c.flags&128)===0)return dr=!1,zg(a,c,g);dr=(a.flags&131072)!==0}else dr=!1,Ht&&(c.flags&1048576)!==0&&Ag(c,gd,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Fd(a,c),a=c.pendingProps;var E=nl(c,Xn.current);co(c,g),E=na(null,c,w,a,E,g);var k=Ed();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,_r(w)?(k=!0,Xr(c)):k=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,bd(c),E.updater=Dd,c.stateNode=E,E._reactInternals=c,Vf(c,w,a,g),c=Xf(null,c,w,!0,k,g)):(c.tag=0,Ht&&k&&xc(c),$n(null,c,E,g),c=c.child),c;case 16:w=c.elementType;e:{switch(Fd(a,c),a=c.pendingProps,E=w._init,w=E(w._payload),c.type=w,E=c.tag=Y0(w),a=ri(w,a),E){case 0:c=Kf(null,c,w,a,g);break e;case 1:c=Yf(null,c,w,a,g);break e;case 11:c=Fg(null,c,w,a,g);break e;case 14:c=Hf(null,c,w,ri(w.type,a),g);break e}throw Error(t(306,w,""))}return c;case 0:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:ri(w,E),Kf(a,c,w,E,g);case 1:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:ri(w,E),Yf(a,c,w,E,g);case 3:e:{if($g(c),a===null)throw Error(t(387));w=c.pendingProps,k=c.memoizedState,E=k.element,Tg(a,c),sl(c,w,null,g);var O=c.memoizedState;if(w=O.element,k.isDehydrated)if(k={element:w,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){E=ia(Error(t(423)),c),c=ns(a,c,w,g,E);break e}else if(w!==E){E=ia(Error(t(424)),c),c=ns(a,c,w,g,E);break e}else for(Dr=io(c.stateNode.containerInfo.firstChild),Jn=c,Ht=!0,Si=null,g=yd(c,null,w,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Xi(),w===E){c=Ei(a,c,g);break e}$n(a,c,w,g)}c=c.child}return c;case 5:return Rf(c),a===null&&br(c),w=c.type,E=c.pendingProps,k=a!==null?a.memoizedProps:null,O=E.children,_c(w,E)?O=null:k!==null&&_c(w,k)&&(c.flags|=32),Gf(a,c),$n(a,c,O,g),c.child;case 6:return a===null&&br(c),null;case 13:return jd(a,c,g);case 4:return Pf(c,c.stateNode.containerInfo),w=c.pendingProps,a===null?c.child=sn(c,null,w,g):$n(a,c,w,g),c.child;case 11:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:ri(w,E),Fg(a,c,w,E,g);case 7:return $n(a,c,c.pendingProps,g),c.child;case 8:return $n(a,c,c.pendingProps.children,g),c.child;case 12:return $n(a,c,c.pendingProps.children,g),c.child;case 10:e:{if(w=c.type._context,E=c.pendingProps,k=c.memoizedProps,O=E.value,Ut(Ec,w._currentValue),w._currentValue=O,k!==null)if(ae(k.value,O)){if(k.children===E.children&&!wr.current){c=Ei(a,c,g);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var V=k.dependencies;if(V!==null){O=k.child;for(var G=V.firstContext;G!==null;){if(G.context===w){if(k.tag===1){G=Ts(-1,g&-g),G.tag=2;var ue=k.updateQueue;if(ue!==null){ue=ue.shared;var Ee=ue.pending;Ee===null?G.next=G:(G.next=Ee.next,Ee.next=G),ue.pending=G}}k.lanes|=g,G=k.alternate,G!==null&&(G.lanes|=g),Fn(k.return,g,c),V.lanes|=g;break}G=G.next}}else if(k.tag===10)O=k.type===c.type?null:k.child;else if(k.tag===18){if(O=k.return,O===null)throw Error(t(341));O.lanes|=g,V=O.alternate,V!==null&&(V.lanes|=g),Fn(O,g,c),O=k.sibling}else O=k.child;if(O!==null)O.return=k;else for(O=k;O!==null;){if(O===c){O=null;break}if(k=O.sibling,k!==null){k.return=O.return,O=k;break}O=O.return}k=O}$n(a,c,E.children,g),c=c.child}return c;case 9:return E=c.type,w=c.pendingProps.children,co(c,g),E=Qr(E),w=w(E),c.flags|=1,$n(a,c,w,g),c.child;case 14:return w=c.type,E=ri(w,c.pendingProps),E=ri(w.type,E),Hf(a,c,w,E,g);case 15:return ts(a,c,c.type,c.pendingProps,g);case 17:return w=c.type,E=c.pendingProps,E=c.elementType===w?E:ri(w,E),Fd(a,c),c.tag=1,_r(w)?(a=!0,Xr(c)):a=!1,co(c,g),ra(c,w,E),Vf(c,w,E,g),Xf(null,c,w,!0,a,g);case 19:return fo(a,c,g);case 22:return qf(a,c,g)}throw Error(t(156,c.tag))};function tv(a,c){return we(a,c)}function K0(a,c,g,w){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(a,c,g,w){return new K0(a,c,g,w)}function Zd(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Y0(a){if(typeof a=="function")return Zd(a)?1:0;if(a!=null){if(a=a.$$typeof,a===he)return 11;if(a===z)return 14}return 2}function Ri(a,c){var g=a.alternate;return g===null?(g=si(a.tag,c,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=c,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,c=a.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function Jd(a,c,g,w,E,k){var O=2;if(w=a,typeof a=="function")Zd(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case B:return ca(g.children,E,k,c);case H:O=8,E|=8;break;case K:return a=si(12,g,c,E|2),a.elementType=K,a.lanes=k,a;case de:return a=si(13,g,c,E),a.elementType=de,a.lanes=k,a;case fe:return a=si(19,g,c,E),a.elementType=fe,a.lanes=k,a;case re:return Qd(g,E,k,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case le:O=10;break e;case me:O=9;break e;case he:O=11;break e;case z:O=14;break e;case q:O=16,w=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=si(O,g,c,E),c.elementType=a,c.type=w,c.lanes=k,c}function ca(a,c,g,w){return a=si(7,a,w,c),a.lanes=g,a}function Qd(a,c,g,w){return a=si(22,a,w,c),a.elementType=re,a.lanes=g,a.stateNode={isHidden:!1},a}function hp(a,c,g){return a=si(6,a,null,c),a.lanes=g,a}function fp(a,c,g){return c=si(4,a.children!==null?a.children:[],a.key,c),c.lanes=g,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function X0(a,c,g,w,E){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sc(0),this.expirationTimes=sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sc(0),this.identifierPrefix=w,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function pp(a,c,g,w,E,k,O,V,G){return a=new X0(a,c,g,V,G),c===1?(c=1,k===!0&&(c|=8)):c=0,k=si(3,null,null,c),a.current=k,k.stateNode=a,k.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(k),a}function Z0(a,c,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:w==null?null:""+w,children:a,containerInfo:c,implementation:g}}function nv(a){if(!a)return oo;a=a._reactInternals;e:{if(Ks(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(_r(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(_r(g))return bg(a,g,c)}return c}function rv(a,c,g,w,E,k,O,V,G){return a=pp(g,w,!0,a,E,k,O,V,G),a.context=nv(null),g=a.current,w=pr(),E=yo(g),k=Ts(w,E),k.callback=c??null,ti(g,k,E),a.current.lanes=E,oc(a,E,w),Ar(a,w),a}function eh(a,c,g,w){var E=c.current,k=pr(),O=yo(E);return g=nv(g),c.context===null?c.context=g:c.pendingContext=g,c=Ts(k,O),c.payload={element:a},w=w===void 0?null:w,w!==null&&(c.callback=w),a=ti(E,c,O),a!==null&&(Pi(a,E,O,k),xd(a,E,O)),O}function th(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function iv(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<c?g:c}}function mp(a,c){iv(a,c),(a=a.alternate)&&iv(a,c)}function J0(){return null}var sv=typeof reportError=="function"?reportError:function(a){console.error(a)};function nh(a){this._internalRoot=a}Gc.prototype.render=nh.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));eh(a,c,null,null)},Gc.prototype.unmount=nh.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;oa(function(){eh(null,a,null,null)}),c[Mr]=null}};function Gc(a){this._internalRoot=a}Gc.prototype.unstable_scheduleHydration=function(a){if(a){var c=tf();a={blockedOn:null,target:a,priority:c};for(var g=0;g<Js.length&&c!==0&&c<Js[g].priority;g++);Js.splice(g,0,a),g===0&&Xm(a)}};function gp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function rh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ov(){}function Q0(a,c,g,w,E){if(E){if(typeof w=="function"){var k=w;w=function(){var ue=th(O);k.call(ue)}}var O=rv(c,w,a,0,null,!1,!1,"",ov);return a._reactRootContainer=O,a[Mr]=O.current,no(a.nodeType===8?a.parentNode:a),oa(),O}for(;E=a.lastChild;)a.removeChild(E);if(typeof w=="function"){var V=w;w=function(){var ue=th(G);V.call(ue)}}var G=pp(a,0,!1,null,null,!1,!1,"",ov);return a._reactRootContainer=G,a[Mr]=G.current,no(a.nodeType===8?a.parentNode:a),oa(function(){eh(c,G,g,w)}),G}function ua(a,c,g,w,E){var k=g._reactRootContainer;if(k){var O=k;if(typeof E=="function"){var V=E;E=function(){var G=th(O);V.call(G)}}eh(c,O,a,E)}else O=Q0(g,c,a,E,w);return th(O)}ef=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var g=Fa(c.pendingLanes);g!==0&&(ac(c,g|1),Ar(c,Ct()),(xt&6)===0&&(sa=Ct()+500,ao()))}break;case 13:oa(function(){var w=ks(a,1);if(w!==null){var E=pr();Pi(w,a,1,E)}}),mp(a,1)}},Uu=function(a){if(a.tag===13){var c=ks(a,134217728);if(c!==null){var g=pr();Pi(c,a,134217728,g)}mp(a,134217728)}},Km=function(a){if(a.tag===13){var c=yo(a),g=ks(a,c);if(g!==null){var w=pr();Pi(g,a,c,w)}mp(a,c)}},tf=function(){return Rt},nf=function(a,c){var g=Rt;try{return Rt=a,c()}finally{Rt=g}},Zl=function(a,c,g){switch(c){case"input":if(Ln(a,g),c=g.name,g.type==="radio"&&c!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var w=g[c];if(w!==a&&w.form===a.form){var E=hd(w);if(!E)throw Error(t(90));Ot(w),Ln(w,E)}}}break;case"textarea":Du(a,g);break;case"select":c=g.value,c!=null&&Tn(a,!!g.multiple,c,!1)}},ju=cp,Jl=oa;var ew={usingClientEntryPoint:!1,Events:[Yn,ut,hd,Nu,Lu,cp]},Kc={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tw={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=pe(a),a===null?null:a.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{$u=ih.inject(tw),Ui=ih}catch{}}return ci.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew,ci.createPortal=function(a,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gp(c))throw Error(t(200));return Z0(a,c,null,g)},ci.createRoot=function(a,c){if(!gp(a))throw Error(t(299));var g=!1,w="",E=sv;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),c=pp(a,1,!1,null,null,g,!1,w,E),a[Mr]=c.current,no(a.nodeType===8?a.parentNode:a),new nh(c)},ci.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=pe(c),a=a===null?null:a.stateNode,a},ci.flushSync=function(a){return oa(a)},ci.hydrate=function(a,c,g){if(!rh(c))throw Error(t(200));return ua(null,a,c,!0,g)},ci.hydrateRoot=function(a,c,g){if(!gp(a))throw Error(t(405));var w=g!=null&&g.hydratedSources||null,E=!1,k="",O=sv;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(O=g.onRecoverableError)),c=rv(c,null,a,1,g??null,E,!1,k,O),a[Mr]=c.current,no(a),w)for(a=0;a<w.length;a++)g=w[a],E=g._getVersion,E=E(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,E]:c.mutableSourceEagerHydrationData.push(g,E);return new Gc(c)},ci.render=function(a,c,g){if(!rh(c))throw Error(t(200));return ua(null,a,c,!1,g)},ci.unmountComponentAtNode=function(a){if(!rh(a))throw Error(t(40));return a._reactRootContainer?(oa(function(){ua(null,null,a,!1,function(){a._reactRootContainer=null,a[Mr]=null})}),!0):!1},ci.unstable_batchedUpdates=cp,ci.unstable_renderSubtreeIntoContainer=function(a,c,g,w){if(!rh(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return ua(a,c,g,!1,w)},ci.version="18.3.1-next-f1338f8080-20240426",ci}var RS;function KC(){if(RS)return vw.exports;RS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),vw.exports=RN(),vw.exports}var IS;function IN(){if(IS)return dv;IS=1;var n=KC();return dv.createRoot=n.createRoot,dv.hydrateRoot=n.hydrateRoot,dv}var MN=IN();const DN=Sm(MN),ON="modulepreload",NN=function(n){return"/"+n},MS={},Ge=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=d(t.map(h=>{if(h=NN(h),h in MS)return;MS[h]=!0;const f=h.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":ON,f||(v.as="script"),v.crossOrigin="",v.href=h,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((b,S)=>{v.addEventListener("load",b),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Am=KC();const LN=Sm(Am);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tm(){return tm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tm.apply(this,arguments)}var Tl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Tl||(Tl={}));const DS="popstate";function jN(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return c_("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ty(i)}return $N(e,t,null,n)}function Cn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function YC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FN(){return Math.random().toString(36).substr(2,8)}function OS(n,e){return{usr:n.state,key:n.key,idx:e}}function c_(n,e,t,r){return t===void 0&&(t=null),tm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Uh(e):e,{state:t,key:e&&e.key||r||FN()})}function ty(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Uh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function $N(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Tl.Pop,d=null,h=f();h==null&&(h=0,o.replaceState(tm({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=Tl.Pop;let C=f(),P=C==null?null:C-h;h=C,d&&d({action:l,location:x.location,delta:P})}function v(C,P){l=Tl.Push;let I=c_(x.location,C,P);h=f()+1;let R=OS(I,h),M=x.createHref(I);try{o.pushState(R,"",M)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(M)}s&&d&&d({action:l,location:x.location,delta:1})}function b(C,P){l=Tl.Replace;let I=c_(x.location,C,P);h=f();let R=OS(I,h),M=x.createHref(I);o.replaceState(R,"",M),s&&d&&d({action:l,location:x.location,delta:0})}function S(C){let P=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof C=="string"?C:ty(C);return I=I.replace(/ $/,"%20"),Cn(P,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,P)}let x={get action(){return l},get location(){return n(i,o)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(DS,m),d=C,()=>{i.removeEventListener(DS,m),d=null}},createHref(C){return e(i,C)},createURL:S,encodeLocation(C){let P=S(C);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:b,go(C){return o.go(C)}};return x}var NS;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(NS||(NS={}));function zN(n,e,t){return t===void 0&&(t="/"),BN(n,e,t)}function BN(n,e,t,r){let i=typeof e=="string"?Uh(e):e,s=pb(i.pathname||"/",t);if(s==null)return null;let o=XC(n);UN(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=eL(s);l=ZN(o[d],h)}return l}function XC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,l)=>{let d={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(Cn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=Pl([r,d.relativePath]),f=t.concat(d);s.children&&s.children.length>0&&(Cn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),XC(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:YN(h,s.index),routesMeta:f})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let d of ZC(s.path))i(s,o,d)}),e}function ZC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ZC(r.join("/")),l=[];return l.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&l.push(...o),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function UN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:XN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const VN=/^:[\w-]+$/,WN=3,HN=2,qN=1,GN=10,KN=-2,LS=n=>n==="*";function YN(n,e){let t=n.split("/"),r=t.length;return t.some(LS)&&(r+=KN),e&&(r+=HN),t.filter(i=>!LS(i)).reduce((i,s)=>i+(VN.test(s)?WN:s===""?qN:GN),r)}function XN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function ZN(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=JN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),v=d.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Pl([s,m.pathname]),pathnameBase:iL(Pl([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Pl([s,m.pathnameBase]))}return o}function JN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=QN(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,m)=>{let{paramName:v,isOptional:b}=f;if(v==="*"){let x=l[m]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[m];return b&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:n}}function QN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),YC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function eL(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return YC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function pb(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function tL(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Uh(n):n;return{pathname:t?t.startsWith("/")?t:nL(t,e):e,search:sL(r),hash:oL(i)}}function nL(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function _w(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rL(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mb(n,e){let t=rL(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function gb(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Uh(n):(i=tm({},n),Cn(!i.pathname||!i.pathname.includes("?"),_w("?","pathname","search",i)),Cn(!i.pathname||!i.pathname.includes("#"),_w("#","pathname","hash",i)),Cn(!i.search||!i.search.includes("#"),_w("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let d=tL(i,l),h=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const Pl=n=>n.join("/").replace(/\/\/+/g,"/"),iL=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sL=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,oL=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function aL(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const JC=["post","put","patch","delete"];new Set(JC);const lL=["get",...JC];new Set(lL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nm.apply(this,arguments)}const vb=A.createContext(null),cL=A.createContext(null),$l=A.createContext(null),ky=A.createContext(null),To=A.createContext({outlet:null,matches:[],isDataRoute:!1}),QC=A.createContext(null);function uL(n,e){let{relative:t}=e===void 0?{}:e;Vh()||Cn(!1);let{basename:r,navigator:i}=A.useContext($l),{hash:s,pathname:o,search:l}=t1(n,{relative:t}),d=o;return r!=="/"&&(d=o==="/"?r:Pl([r,o])),i.createHref({pathname:d,search:l,hash:s})}function Vh(){return A.useContext(ky)!=null}function qs(){return Vh()||Cn(!1),A.useContext(ky).location}function e1(n){A.useContext($l).static||A.useLayoutEffect(n)}function Wh(){let{isDataRoute:n}=A.useContext(To);return n?EL():dL()}function dL(){Vh()||Cn(!1);let n=A.useContext(vb),{basename:e,future:t,navigator:r}=A.useContext($l),{matches:i}=A.useContext(To),{pathname:s}=qs(),o=JSON.stringify(mb(i,t.v7_relativeSplatPath)),l=A.useRef(!1);return e1(()=>{l.current=!0}),A.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=gb(h,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Pl([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,s,n])}const hL=A.createContext(null);function fL(n){let e=A.useContext(To).outlet;return e&&A.createElement(hL.Provider,{value:n},e)}function AZ(){let{matches:n}=A.useContext(To),e=n[n.length-1];return e?e.params:{}}function t1(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=A.useContext($l),{matches:i}=A.useContext(To),{pathname:s}=qs(),o=JSON.stringify(mb(i,r.v7_relativeSplatPath));return A.useMemo(()=>gb(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function pL(n,e){return mL(n,e)}function mL(n,e,t,r){Vh()||Cn(!1);let{navigator:i}=A.useContext($l),{matches:s}=A.useContext(To),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=qs(),f;if(e){var m;let C=typeof e=="string"?Uh(e):e;d==="/"||(m=C.pathname)!=null&&m.startsWith(d)||Cn(!1),f=C}else f=h;let v=f.pathname||"/",b=v;if(d!=="/"){let C=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=zN(n,{pathname:b}),x=_L(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Pl([d,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Pl([d,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,t,r);return e&&x?A.createElement(ky.Provider,{value:{location:nm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Tl.Pop}},x):x}function gL(){let n=AL(),e=aL(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:i},t):null,null)}const vL=A.createElement(gL,null);class yL extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(To.Provider,{value:this.props.routeContext},A.createElement(QC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wL(n){let{routeContext:e,match:t,children:r}=n,i=A.useContext(vb);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(To.Provider,{value:e},r)}function _L(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);f>=0||Cn(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:v,errors:b}=t,S=m.route.loader&&v[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||S){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,m,v)=>{let b,S=!1,x=null,C=null;t&&(b=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||vL,d&&(h<0&&v===0?(CL("route-fallback"),S=!0,C=null):h===v&&(S=!0,C=m.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,v+1)),I=()=>{let R;return b?R=x:S?R=C:m.route.Component?R=A.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=f,A.createElement(wL,{match:m,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?A.createElement(yL,{location:t.location,revalidation:t.revalidation,component:x,error:b,children:I(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):I()},null)}var n1=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(n1||{}),r1=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(r1||{});function bL(n){let e=A.useContext(vb);return e||Cn(!1),e}function xL(n){let e=A.useContext(cL);return e||Cn(!1),e}function SL(n){let e=A.useContext(To);return e||Cn(!1),e}function i1(n){let e=SL(),t=e.matches[e.matches.length-1];return t.route.id||Cn(!1),t.route.id}function AL(){var n;let e=A.useContext(QC),t=xL(),r=i1();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function EL(){let{router:n}=bL(n1.UseNavigateStable),e=i1(r1.UseNavigateStable),t=A.useRef(!1);return e1(()=>{t.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,nm({fromRouteId:e},s)))},[n,e])}const jS={};function CL(n,e,t){jS[n]||(jS[n]=!0)}function kL(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function rm(n){let{to:e,replace:t,state:r,relative:i}=n;Vh()||Cn(!1);let{future:s,static:o}=A.useContext($l),{matches:l}=A.useContext(To),{pathname:d}=qs(),h=Wh(),f=gb(e,mb(l,s.v7_relativeSplatPath),d,i==="path"),m=JSON.stringify(f);return A.useEffect(()=>h(JSON.parse(m),{replace:t,state:r,relative:i}),[h,m,i,t,r]),null}function yb(n){return fL(n.context)}function Ve(n){Cn(!1)}function TL(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Tl.Pop,navigator:s,static:o=!1,future:l}=n;Vh()&&Cn(!1);let d=e.replace(/^\/*/,"/"),h=A.useMemo(()=>({basename:d,navigator:s,static:o,future:nm({v7_relativeSplatPath:!1},l)}),[d,l,s,o]);typeof r=="string"&&(r=Uh(r));let{pathname:f="/",search:m="",hash:v="",state:b=null,key:S="default"}=r,x=A.useMemo(()=>{let C=pb(f,d);return C==null?null:{location:{pathname:C,search:m,hash:v,state:b,key:S},navigationType:i}},[d,f,m,v,b,S,i]);return x==null?null:A.createElement($l.Provider,{value:h},A.createElement(ky.Provider,{children:t,value:x}))}function s1(n){let{children:e,location:t}=n;return pL(u_(e),t)}new Promise(()=>{});function u_(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,i)=>{if(!A.isValidElement(r))return;let s=[...e,i];if(r.type===A.Fragment){t.push.apply(t,u_(r.props.children,s));return}r.type!==Ve&&Cn(!1),!r.props.index||!r.props.children||Cn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=u_(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d_(){return d_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d_.apply(this,arguments)}function PL(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function RL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function IL(n,e){return n.button===0&&(!e||e==="_self")&&!RL(n)}const ML=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DL="6";try{window.__reactRouterVersion=DL}catch{}const OL="startTransition",FS=fb[OL];function NL(n){let{basename:e,children:t,future:r,window:i}=n,s=A.useRef();s.current==null&&(s.current=jN({window:i,v5Compat:!0}));let o=s.current,[l,d]=A.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=A.useCallback(m=>{h&&FS?FS(()=>d(m)):d(m)},[d,h]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>kL(r),[r]),A.createElement(TL,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const LL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FL=A.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:d,to:h,preventScrollReset:f,viewTransition:m}=e,v=PL(e,ML),{basename:b}=A.useContext($l),S,x=!1;if(typeof h=="string"&&jL.test(h)&&(S=h,LL))try{let R=new URL(window.location.href),M=h.startsWith("//")?new URL(R.protocol+h):new URL(h),N=pb(M.pathname,b);M.origin===R.origin&&N!=null?h=N+M.search+M.hash:x=!0}catch{}let C=uL(h,{relative:i}),P=$L(h,{replace:o,state:l,target:d,preventScrollReset:f,relative:i,viewTransition:m});function I(R){r&&r(R),R.defaultPrevented||P(R)}return A.createElement("a",d_({},v,{href:S||C,onClick:x||s?r:I,ref:t,target:d}))});var $S;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})($S||($S={}));var zS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zS||(zS={}));function $L(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,d=Wh(),h=qs(),f=t1(n,{relative:o});return A.useCallback(m=>{if(IL(m,t)){m.preventDefault();let v=r!==void 0?r:ty(h)===ty(f);d(n,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,d,f,r,i,t,n,s,o,l])}const o1=A.createContext(),a1=()=>{const n=A.useContext(o1);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},zL=({children:n})=>{const[e,t]=A.useState(()=>{try{const i=localStorage.getItem("go-fotografo-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(i){return console.error("Could not access localStorage to get theme.",i),"light"}});A.useEffect(()=>{try{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("go-fotografo-theme",e)}catch(i){console.error("Could not access localStorage to set theme.",i)}},[e]);const r=()=>{t(i=>i==="light"?"dark":"light")};return y.jsx(o1.Provider,{value:{theme:e,setTheme:t,toggleTheme:r},children:n})},BL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ge(async()=>{const{default:r}=await Promise.resolve().then(()=>Em);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class wb extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class UL extends wb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class VL extends wb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class WL extends wb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var h_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(h_||(h_={}));var HL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class qL{constructor(e,{headers:t={},customFetch:r,region:i=h_.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=BL(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return HL(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let l={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:h}).catch(S=>{throw new UL(S)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new VL(f);if(!f.ok)throw new WL(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield f.json():v==="application/octet-stream"?b=yield f.blob():v==="text/event-stream"?b=f:v==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null}}catch(i){return{data:null,error:i}}})}}var nr={},lh={},ch={},uh={},dh={},hh={},GL=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Oh=GL();const KL=Oh.fetch,YL=Oh.fetch.bind(Oh),XL=Oh.Headers,ZL=Oh.Request,JL=Oh.Response,Em=Object.freeze(Object.defineProperty({__proto__:null,Headers:XL,Request:ZL,Response:JL,default:YL,fetch:KL},Symbol.toStringTag,{value:"Module"})),QL=AN(Em);var hv={},BS;function l1(){if(BS)return hv;BS=1,Object.defineProperty(hv,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return hv.default=n,hv}var US;function c1(){if(US)return hh;US=1;var n=hh&&hh.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(hh,"__esModule",{value:!0});const e=n(QL),t=n(l1());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,m,v;let b=null,S=null,x=null,C=h.status,P=h.statusText;if(h.ok){if(this.method!=="HEAD"){const N=await h.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=N:S=JSON.parse(N))}const R=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),M=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");R&&M&&M.length>1&&(x=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,x=null,C=406,P="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await h.text();try{b=JSON.parse(R),Array.isArray(b)&&h.status===404&&(S=[],b=null,C=200,P="OK")}catch{h.status===404&&R===""?(C=204,P="No Content"):b={message:R}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,C=200,P="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:S,count:x,status:C,statusText:P}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,m,v;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(m=h?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(s,o)}returns(){return this}overrideTypes(){return this}}return hh.default=r,hh}var VS;function u1(){if(VS)return dh;VS=1;var n=dh&&dh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(dh,"__esModule",{value:!0});const e=n(c1());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const m=[i?"analyze":null,s?"verbose":null,o?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${m};`,h==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return dh.default=t,dh}var WS;function _b(){if(WS)return uh;WS=1;var n=uh&&uh.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(uh,"__esModule",{value:!0});const e=n(u1());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${d}fts${h}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return uh.default=t,uh}var HS;function d1(){if(HS)return ch;HS=1;var n=ch&&ch.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ch,"__esModule",{value:!0});const e=n(_b());class t{constructor(i,{headers:s={},schema:o,fetch:l}){this.url=i,this.headers=s,this.schema=o,this.fetch=l}select(i,{head:s=!1,count:o}={}){const l=s?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const l="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),s&&d.push(`count=${s}`),o||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(i)){const h=i.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:l,defaultToNull:d=!0}={}){const h="POST",f=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),d||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const m=i.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(m.length>0){const v=[...new Set(m)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ch.default=t,ch}var _p={},bp={},qS;function e2(){return qS||(qS=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.version=void 0,bp.version="0.0.0-automated"),bp}var GS;function t2(){if(GS)return _p;GS=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.DEFAULT_HEADERS=void 0;const n=e2();return _p.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},_p}var KS;function n2(){if(KS)return lh;KS=1;var n=lh&&lh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lh,"__esModule",{value:!0});const e=n(d1()),t=n(_b()),r=t2();class i{constructor(o,{headers:l={},schema:d,fetch:h}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=d,this.fetch=h}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:d=!1,get:h=!1,count:f}={}){let m;const v=new URL(`${this.url}/rpc/${o}`);let b;d||h?(m=d?"HEAD":"GET",Object.entries(l).filter(([x,C])=>C!==void 0).map(([x,C])=>[x,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([x,C])=>{v.searchParams.append(x,C)})):(m="POST",b=l);const S=Object.assign({},this.headers);return f&&(S.Prefer=`count=${f}`),new t.default({method:m,url:v,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return lh.default=i,lh}var YS;function r2(){if(YS)return nr;YS=1;var n=nr&&nr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(nr,"__esModule",{value:!0}),nr.PostgrestError=nr.PostgrestBuilder=nr.PostgrestTransformBuilder=nr.PostgrestFilterBuilder=nr.PostgrestQueryBuilder=nr.PostgrestClient=void 0;const e=n(n2());nr.PostgrestClient=e.default;const t=n(d1());nr.PostgrestQueryBuilder=t.default;const r=n(_b());nr.PostgrestFilterBuilder=r.default;const i=n(u1());nr.PostgrestTransformBuilder=i.default;const s=n(c1());nr.PostgrestBuilder=s.default;const o=n(l1());return nr.PostgrestError=o.default,nr.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},nr}var i2=r2();const s2=Sm(i2),{PostgrestClient:o2,PostgrestQueryBuilder:EZ,PostgrestFilterBuilder:CZ,PostgrestTransformBuilder:kZ,PostgrestBuilder:TZ,PostgrestError:PZ}=s2;let f_;typeof window>"u"?f_=require("ws"):f_=window.WebSocket;const a2="2.11.10",l2={"X-Client-Info":`realtime-js/${a2}`},c2="1.0.0",h1=1e4,u2=1e3;var kh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(kh||(kh={}));var Fr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fr||(Fr={}));var Us;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Us||(Us={}));var p_;(function(n){n.websocket="websocket"})(p_||(p_={}));var ru;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ru||(ru={}));class d2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+i));o=o+i;const d=r.decode(e.slice(o,o+s));o=o+s;const h=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:h}}}class f1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xt||(Xt={}));const XS=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=h2(o,n,e,i),s),{})},h2=(n,e,t,r)=>{const i=e.find(l=>l.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?p1(s,o):m_(o)},p1=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return g2(e,t)}switch(n){case Xt.bool:return f2(e);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return p2(e);case Xt.json:case Xt.jsonb:return m2(e);case Xt.timestamp:return v2(e);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return m_(e);default:return m_(e)}},m_=n=>n,f2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},p2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},m2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},g2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>p1(e,l))}return n},v2=n=>typeof n=="string"?n.replace(" ","T"):n,m1=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class bw{constructor(e,t,r={},i=h1){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ZS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ZS||(ZS={}));class Vp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vp.syncState(this.state,i,s,o),this.pendingDiffs.forEach(d=>{this.state=Vp.syncDiff(this.state,d,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vp.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),l={},d={};return this.map(s,(h,f)=>{o[h]||(d[h]=f)}),this.map(o,(h,f)=>{const m=s[h];if(m){const v=f.map(C=>C.presence_ref),b=m.map(C=>C.presence_ref),S=f.filter(C=>b.indexOf(C.presence_ref)<0),x=m.filter(C=>v.indexOf(C.presence_ref)<0);S.length>0&&(l[h]=S),x.length>0&&(d[h]=x)}else l[h]=f}),this.syncDiff(s,{joins:l,leaves:d},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,d)=>{var h;const f=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(d),f.length>0){const m=e[l].map(b=>b.presence_ref),v=f.filter(b=>m.indexOf(b.presence_ref)<0);e[l].unshift(...v)}r(l,f,d)}),this.map(o,(l,d)=>{let h=e[l];if(!h)return;const f=d.map(m=>m.presence_ref);h=h.filter(m=>f.indexOf(m.presence_ref)<0),e[l]=h,i(l,h,d),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var JS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(JS||(JS={}));var QS;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(QS||(QS={}));var _a;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(_a||(_a={}));class bb{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Fr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bw(this,Us.join,this.params,this.timeout),this.rejoinTimer=new f1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Us.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Vp(this),this.broadcastEndpointURL=m1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(f=>e?.(_a.CHANNEL_ERROR,f)),this._onClose(()=>e?.(_a.CLOSED));const d={},h={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e?.(_a.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v?.length)!==null&&m!==void 0?m:0,S=[];for(let x=0;x<b;x++){const C=v[x],{filter:{event:P,schema:I,table:R,filter:M}}=C,N=f&&f[x];if(N&&N.event===P&&N.schema===I&&N.table===R&&N.filter===M)S.push(Object.assign(Object.assign({},C),{id:N.id}));else{this.unsubscribe(),this.state=Fr.errored,e?.(_a.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(_a.SUBSCRIBED);return}}).receive("error",f=>{this.state=Fr.errored,e?.(_a.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(_a.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Us.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new bw(this,Us.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bw(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:h,join:f}=Us;if(r&&[l,d,h,f].indexOf(o)>=0&&r!==this._joinRef())return;let v=this._onMessage(o,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var S,x,C;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(x=b.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(b=>b.callback(v,r)):(s=this.bindings[o])===null||s===void 0||s.filter(b=>{var S,x,C,P,I,R;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const M=b.id,N=(S=b.filter)===null||S===void 0?void 0:S.event;return M&&((x=t.ids)===null||x===void 0?void 0:x.includes(M))&&(N==="*"||N?.toLocaleLowerCase()===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const M=(I=(P=b?.filter)===null||P===void 0?void 0:P.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return M==="*"||M===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:C,commit_timestamp:P,type:I,errors:R}=S;v=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:P,eventType:I,new:{},old:{},errors:R}),this._getPayloadRecords(S))}b.callback(v,r)})}_isClosed(){return this.state===Fr.closed}_isJoined(){return this.state===Fr.joined}_isJoining(){return this.state===Fr.joining}_isLeaving(){return this.state===Fr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&bb.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Us.close,{},e)}_onError(e){this._on(Us.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=XS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=XS(e.columns,e.old_record)),t}}const eA=()=>{},y2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w2{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=l2,this.params={},this.timeout=h1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eA,this.ref=0,this.logger=eA,this.conn=null,this.sendBuffer=[],this.serializer=new d2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>Ge(async()=>{const{default:d}=await Promise.resolve().then(()=>Em);return{default:d}},void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${p_.websocket}`,this.httpEndpoint=m1(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new f1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=f_),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new _2(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:c2}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kh.connecting:return ru.Connecting;case kh.open:return ru.Open;case kh.closing:return ru.Closing;default:return ru.Closed}}isConnected(){return this.connectionState()===ru.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new bb(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Us.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(u2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Us.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([y2],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class _2{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=kh.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class xb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class b2 extends xb{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class g_ extends xb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var x2=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const g1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ge(async()=>{const{default:r}=await Promise.resolve().then(()=>Em);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},S2=()=>x2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ge(()=>Promise.resolve().then(()=>Em),void 0)).Response:Response}),v_=n=>{if(Array.isArray(n))return n.map(t=>v_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=v_(r)}),e},A2=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var bu=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const xw=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),E2=(n,e,t)=>bu(void 0,void 0,void 0,function*(){const r=yield S2();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const s=n.status||500,o=i?.statusCode||s+"";e(new b2(xw(i),s,o))}).catch(i=>{e(new g_(xw(i),i))}):e(new g_(xw(n),n))}),C2=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(A2(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function Cm(n,e,t,r,i,s){return bu(this,void 0,void 0,function*(){return new Promise((o,l)=>{n(t,C2(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>E2(d,l,r))})})}function ny(n,e,t,r){return bu(this,void 0,void 0,function*(){return Cm(n,"GET",e,t,r)})}function ba(n,e,t,r,i){return bu(this,void 0,void 0,function*(){return Cm(n,"POST",e,r,i,t)})}function y_(n,e,t,r,i){return bu(this,void 0,void 0,function*(){return Cm(n,"PUT",e,r,i,t)})}function k2(n,e,t,r){return bu(this,void 0,void 0,function*(){return Cm(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function v1(n,e,t,r,i){return bu(this,void 0,void 0,function*(){return Cm(n,"DELETE",e,r,i,t)})}var ui=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const T2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class P2{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=g1(i)}uploadOrUpdate(e,t,r,i){return ui(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},tA),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),m=yield(e=="PUT"?y_:ba)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(rr(s))return{data:null,error:s};throw s}})}upload(e,t,r){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return ui(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:tA.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const m=yield y_(this.fetch,l.toString(),d,{headers:f});return{data:{path:s,fullPath:m.Key},error:null}}catch(d){if(rr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return ui(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield ba(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new xb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}update(e,t,r){return ui(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ui(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return ui(this,void 0,void 0,function*(){try{return{data:{path:(yield ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return ui(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield ba(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ui(this,void 0,void 0,function*(){try{const i=yield ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}download(e,t){return ui(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ny(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(rr(l))return{data:null,error:l};throw l}})}info(e){return ui(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ny(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:v_(r),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}exists(e){return ui(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield k2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rr(r)&&r instanceof g_){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const l=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return ui(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(rr(t))return{data:null,error:t};throw t}})}list(e,t,r){return ui(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},T2),t),{prefix:e||""});return{data:yield ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(rr(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const R2="2.7.3",I2={"X-Client-Info":`storage-js/${R2}`};var fh=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class M2{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},I2),t),this.fetch=g1(r)}listBuckets(){return fh(this,void 0,void 0,function*(){try{return{data:yield ny(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rr(e))return{data:null,error:e};throw e}})}getBucket(e){return fh(this,void 0,void 0,function*(){try{return{data:yield ny(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(rr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return fh(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return fh(this,void 0,void 0,function*(){try{return{data:yield y_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fh(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(rr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fh(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(rr(t))return{data:null,error:t};throw t}})}}class D2 extends M2{constructor(e,t={},r){super(e,t,r)}from(e){return new P2(this.url,this.headers,e,this.fetch)}}const O2="2.30.0",N2={"X-Client-Info":`supabase-js/${O2}`};var fv={exports:{}},nA;function L2(){return nA||(nA=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof kl<"u"&&kl,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var l=typeof s<"u"&&s||typeof self<"u"&&self||typeof kl<"u"&&kl||{},d={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function h(z){return z&&DataView.prototype.isPrototypeOf(z)}if(d.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(z){return z&&f.indexOf(Object.prototype.toString.call(z))>-1};function v(z){if(typeof z!="string"&&(z=String(z)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(z)||z==="")throw new TypeError('Invalid character in header field name: "'+z+'"');return z.toLowerCase()}function b(z){return typeof z!="string"&&(z=String(z)),z}function S(z){var q={next:function(){var re=z.shift();return{done:re===void 0,value:re}}};return d.iterable&&(q[Symbol.iterator]=function(){return q}),q}function x(z){this.map={},z instanceof x?z.forEach(function(q,re){this.append(re,q)},this):Array.isArray(z)?z.forEach(function(q){if(q.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+q.length);this.append(q[0],q[1])},this):z&&Object.getOwnPropertyNames(z).forEach(function(q){this.append(q,z[q])},this)}x.prototype.append=function(z,q){z=v(z),q=b(q);var re=this.map[z];this.map[z]=re?re+", "+q:q},x.prototype.delete=function(z){delete this.map[v(z)]},x.prototype.get=function(z){return z=v(z),this.has(z)?this.map[z]:null},x.prototype.has=function(z){return this.map.hasOwnProperty(v(z))},x.prototype.set=function(z,q){this.map[v(z)]=b(q)},x.prototype.forEach=function(z,q){for(var re in this.map)this.map.hasOwnProperty(re)&&z.call(q,this.map[re],re,this)},x.prototype.keys=function(){var z=[];return this.forEach(function(q,re){z.push(re)}),S(z)},x.prototype.values=function(){var z=[];return this.forEach(function(q){z.push(q)}),S(z)},x.prototype.entries=function(){var z=[];return this.forEach(function(q,re){z.push([re,q])}),S(z)},d.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function C(z){if(!z._noBody){if(z.bodyUsed)return Promise.reject(new TypeError("Already read"));z.bodyUsed=!0}}function P(z){return new Promise(function(q,re){z.onload=function(){q(z.result)},z.onerror=function(){re(z.error)}})}function I(z){var q=new FileReader,re=P(q);return q.readAsArrayBuffer(z),re}function R(z){var q=new FileReader,re=P(q),U=/charset=([A-Za-z0-9_-]+)/.exec(z.type),ne=U?U[1]:"utf-8";return q.readAsText(z,ne),re}function M(z){for(var q=new Uint8Array(z),re=new Array(q.length),U=0;U<q.length;U++)re[U]=String.fromCharCode(q[U]);return re.join("")}function N(z){if(z.slice)return z.slice(0);var q=new Uint8Array(z.byteLength);return q.set(new Uint8Array(z)),q.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(z){this.bodyUsed=this.bodyUsed,this._bodyInit=z,z?typeof z=="string"?this._bodyText=z:d.blob&&Blob.prototype.isPrototypeOf(z)?this._bodyBlob=z:d.formData&&FormData.prototype.isPrototypeOf(z)?this._bodyFormData=z:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)?this._bodyText=z.toString():d.arrayBuffer&&d.blob&&h(z)?(this._bodyArrayBuffer=N(z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(z)||m(z))?this._bodyArrayBuffer=N(z):this._bodyText=z=Object.prototype.toString.call(z):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof z=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var z=C(this);if(z)return z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var z=C(this);return z||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(I);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var z=C(this);if(z)return z;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(le)}),this.json=function(){return this.text().then(JSON.parse)},this}var B=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(z){var q=z.toUpperCase();return B.indexOf(q)>-1?q:z}function K(z,q){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');q=q||{};var re=q.body;if(z instanceof K){if(z.bodyUsed)throw new TypeError("Already read");this.url=z.url,this.credentials=z.credentials,q.headers||(this.headers=new x(z.headers)),this.method=z.method,this.mode=z.mode,this.signal=z.signal,!re&&z._bodyInit!=null&&(re=z._bodyInit,z.bodyUsed=!0)}else this.url=String(z);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new x(q.headers)),this.method=H(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal||function(){if("AbortController"in l){var Q=new AbortController;return Q.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&re)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(re),(this.method==="GET"||this.method==="HEAD")&&(q.cache==="no-store"||q.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var ne=/\?/;this.url+=(ne.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function le(z){var q=new FormData;return z.trim().split("&").forEach(function(re){if(re){var U=re.split("="),ne=U.shift().replace(/\+/g," "),Q=U.join("=").replace(/\+/g," ");q.append(decodeURIComponent(ne),decodeURIComponent(Q))}}),q}function me(z){var q=new x,re=z.replace(/\r?\n[\t ]+/g," ");return re.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var ne=U.split(":"),Q=ne.shift().trim();if(Q){var $=ne.join(":").trim();try{q.append(Q,$)}catch(ie){console.warn("Response "+ie.message)}}}),q}F.call(K.prototype);function he(z,q){if(!(this instanceof he))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=q.statusText===void 0?"":""+q.statusText,this.headers=new x(q.headers),this.url=q.url||"",this._initBody(z)}F.call(he.prototype),he.prototype.clone=function(){return new he(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},he.error=function(){var z=new he(null,{status:200,statusText:""});return z.ok=!1,z.status=0,z.type="error",z};var de=[301,302,303,307,308];he.redirect=function(z,q){if(de.indexOf(q)===-1)throw new RangeError("Invalid status code");return new he(null,{status:q,headers:{location:z}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(q,re){this.message=q,this.name=re;var U=Error(q);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function fe(z,q){return new Promise(function(re,U){var ne=new K(z,q);if(ne.signal&&ne.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var Q=new XMLHttpRequest;function $(){Q.abort()}Q.onload=function(){var Re={statusText:Q.statusText,headers:me(Q.getAllResponseHeaders()||"")};ne.url.indexOf("file://")===0&&(Q.status<200||Q.status>599)?Re.status=200:Re.status=Q.status,Re.url="responseURL"in Q?Q.responseURL:Re.headers.get("X-Request-URL");var Ae="response"in Q?Q.response:Q.responseText;setTimeout(function(){re(new he(Ae,Re))},0)},Q.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},Q.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},Q.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function ie(Re){try{return Re===""&&l.location.href?l.location.href:Re}catch{return Re}}if(Q.open(ne.method,ie(ne.url),!0),ne.credentials==="include"?Q.withCredentials=!0:ne.credentials==="omit"&&(Q.withCredentials=!1),"responseType"in Q&&(d.blob?Q.responseType="blob":d.arrayBuffer&&(Q.responseType="arraybuffer")),q&&typeof q.headers=="object"&&!(q.headers instanceof x||l.Headers&&q.headers instanceof l.Headers)){var Z=[];Object.getOwnPropertyNames(q.headers).forEach(function(Re){Z.push(v(Re)),Q.setRequestHeader(Re,b(q.headers[Re]))}),ne.headers.forEach(function(Re,Ae){Z.indexOf(Ae)===-1&&Q.setRequestHeader(Ae,Re)})}else ne.headers.forEach(function(Re,Ae){Q.setRequestHeader(Ae,Re)});ne.signal&&(ne.signal.addEventListener("abort",$),Q.onreadystatechange=function(){Q.readyState===4&&ne.signal.removeEventListener("abort",$)}),Q.send(typeof ne._bodyInit>"u"?null:ne._bodyInit)})}return fe.polyfill=!0,l.fetch||(l.fetch=fe,l.Headers=x,l.Request=K,l.Response=he),o.Headers=x,o.Request=K,o.Response=he,o.fetch=fe,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(fv,fv.exports)),fv.exports}var Sb=L2();const y1=Sm(Sb),j2=GC({__proto__:null,default:y1},[Sb]);var F2=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const $2=n=>{let e;return n?e=n:typeof fetch>"u"?e=y1:e=fetch,(...t)=>e(...t)},z2=()=>typeof Headers>"u"?Sb.Headers:Headers,B2=(n,e,t)=>{const r=$2(t),i=z2();return(s,o)=>F2(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:n;let h=new i(o?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},o),{headers:h}))})};function U2(n){return n.replace(/\/$/,"")}function V2(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:l,realtime:d,global:h}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign({},h),s)}}function W2(n){return Math.round(Date.now()/1e3)+n}function H2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ya=()=>typeof document<"u",Xc={tested:!1,writable:!1},Wv=()=>{if(!ya())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xc.tested)return Xc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Xc.tested=!0,Xc.writable=!0}catch{Xc.tested=!0,Xc.writable=!1}return Xc.writable};function di(n,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const w1=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await Ge(async()=>{const{fetch:r}=await Promise.resolve().then(()=>j2);return{fetch:r}},void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},q2=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",xp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},pv=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Sw=async(n,e)=>{await n.removeItem(e)};function G2(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,l,d,h,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)o=e.indexOf(n.charAt(f++)),l=e.indexOf(n.charAt(f++)),d=e.indexOf(n.charAt(f++)),h=e.indexOf(n.charAt(f++)),r=o<<2|l>>4,i=(l&15)<<4|d>>2,s=(d&3)<<6|h,t=t+String.fromCharCode(r),d!=64&&i!=0&&(t=t+String.fromCharCode(i)),h!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Ty{constructor(){this.promise=new Ty.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ty.promiseConstructor=Promise;function rA(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(G2(r))}function K2(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function Y2(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function X2(n){return("0"+n.toString(16)).substr(-2)}function mv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,X2).join("")}async function Z2(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function J2(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gv(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await Z2(n);return J2(e)}const Q2="__stack_guard__",ej="__",tj=/__stack_guard__([a-zA-Z0-9_-]+)__/;let iA=!1,Ab;function w_(n){var e,t;Ab();let r;try{throw new Error}catch(s){r=s}const i=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let s=0;s<i.length;s+=1){const l=i[s].match(tj);if(l&&l[1]===n)return!0}return!1}async function __(n,e){await Ab();const t=`${Q2}${n}${ej}`;return await{[t]:async()=>await e()}[t]()}Ab=async()=>{iA||(iA=!0,await __("ENV_CHECK",async()=>{const n=w_("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class Eb extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function It(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class nj extends Eb{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function rj(n){return It(n)&&n.name==="AuthApiError"}class _1 extends Eb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Hh extends Eb{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ph extends Hh{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Aw extends Hh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class vv extends Hh{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class pa extends Hh{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ew extends Hh{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class b_ extends Hh{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function sA(n){return It(n)&&n.name==="AuthRetryableFetchError"}var ij=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Lp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sj=[502,503,504];async function oA(n){if(!q2(n))throw new b_(Lp(n),0);if(sj.includes(n.status))throw new b_(Lp(n),n.status);let e;try{e=await n.json()}catch(t){throw new _1(Lp(t),t)}throw new nj(Lp(e),n.status||500)}const oj=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Lt(n,e,t,r){var i;const s=Object.assign({},r?.headers);r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await aj(n,e,t+l,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function aj(n,e,t,r,i,s){const o=oj(e,r,i,s);let l;try{l=await n(t,o)}catch(d){throw console.error(d),new b_(Lp(d),0)}if(l.ok||await oA(l),r?.noResolveJson)return l;try{return await l.json()}catch(d){await oA(d)}}function _l(n){var e;let t=null;dj(n)&&(t=Object.assign({},n),t.expires_at=W2(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function iu(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function lj(n){return{data:n,error:null}}function cj(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=ij(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function uj(n){return n}function dj(n){return n.access_token&&n.refresh_token&&n.expires_in}var hj=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class fj{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=w1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Lt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(It(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Lt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:iu})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=hj(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Lt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:cj,redirectTo:t?.redirectTo})}catch(t){if(It(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Lt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:iu})}catch(t){if(It(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,l,d;try{const h={nextPage:null,lastPage:0,total:0},f=await Lt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:uj});if(f.error)throw f.error;const m=await f.json(),v=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);h[`${C}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(It(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Lt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:iu})}catch(t){if(It(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Lt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:iu})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:iu})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Lt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(It(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Lt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(It(t))return{data:null,error:t};throw t}}}const pj="2.43.1",mj="http://localhost:9999",gj="supabase.auth.token",vj={"X-Client-Info":`gotrue-js/${pj}`},aA=10,lA={getItem:n=>Wv()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Wv()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Wv()&&globalThis.localStorage.removeItem(n)}};function yj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}yj();const wj={url:mj,storageKey:gj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vj,flowType:"implicit",debug:!1},yv=30*1e3,cA=3;class im{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=im.nextInstanceID,im.nextInstanceID+=1,this.instanceID>0&&ya()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},wj),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||lA,this.admin=new fj({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=w1(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===lA&&!Wv()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),ya()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=__("_initialize",async()=>{try{const e=ya()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return It(e)?{error:e}:{error:new _1("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:f,password:m,options:v}=e;let b=null,S=null;if(this.flowType==="pkce"){const x=mv();await xp(this.storage,`${this.storageKey}-code-verifier`,x),b=await gv(x),S=x===b?"plain":"s256"}s=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:f,password:m,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},xform:_l})}else if("phone"in e){const{phone:f,password:m,options:v}=e;s=await Lt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:_l})}else throw new vv("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(It(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:o,options:l}=e;t=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_l})}else if("phone"in e){const{phone:s,password:o,options:l}=e;t=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_l})}else throw new vv("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Aw}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await pv(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:_l});return await Sw(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Aw}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,l=await Lt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:_l}),{data:d,error:h}=l;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Aw}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:l,options:d}=e;let h=null,f=null;if(this.flowType==="pkce"){const v=mv();await xp(this.storage,`${this.storageKey}-code-verifier`,v),h=await gv(v),f=v===h?"plain":"s256"}const{error:m}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:l,options:d}=e,{data:h,error:f}=await Lt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new vv("You must provide either an email or phone number.")}catch(l){if(It(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:i,error:s}=await Lt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:_l});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return o?.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(It(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await Lt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:lj})}catch(s){if(It(s))return{data:null,error:s};throw s}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ph;const{error:i}=await Lt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(It(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:l}=await Lt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new vv("You must provide either an email or phone number and a type")}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await __("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!w_("_useSession"))throw new Error("Please use #_useSession()");w_("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const s=await pv(this.storage,this.storageKey);this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,i;if(!e){const{data:s,error:o}=t;if(o)throw o;e=(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0}return await Lt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:iu})})}catch(t){if(It(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ph;const o=i.session,{data:l,error:d}=await Lt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:o.access_token,xform:iu});if(d)throw d;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return rA(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ph;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=rA(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:d}=await this.getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(It(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ph;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!ya())throw new pa("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new pa("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ew("Not a valid PKCE flow url.");if(e){const C=di("code");if(!C)throw new Ew("No code detected.");const{data:P,error:I}=await this.exchangeCodeForSession(C);if(I)throw I;if(!P.session)throw new Ew("No session detected.");let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:P.session,redirectType:null},error:null}}const t=di("error_description");if(t){const C=di("error_code");if(!C)throw new pa("No error_code detected.");const P=di("error");throw P?new pa(t,{error:P,code:C}):new pa("No error detected.")}const r=di("provider_token"),i=di("provider_refresh_token"),s=di("access_token");if(!s)throw new pa("No access_token detected.");const o=di("expires_in");if(!o)throw new pa("No expires_in detected.");const l=di("refresh_token");if(!l)throw new pa("No refresh_token detected.");const d=di("token_type");if(!d)throw new pa("No token_type detected.");const f=Math.round(Date.now()/1e3)+parseInt(o),{data:m,error:v}=await this.getUser(s);if(v)throw v;const b=m.user,S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:f,refresh_token:l,token_type:d,user:b},x=di("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:S,redirectType:x},error:null}}catch(t){if(It(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return ya()&&(!!di("access_token")||!!di("error_description"))}async _isPKCEFlow(){const e=await pv(this.storage,`${this.storageKey}-code-verifier`);return!!di("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(rj(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Sw(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=H2(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=mv();await xp(this.storage,`${this.storageKey}-code-verifier`,s),r=await gv(s),i=s===r?"plain":"s256"}try{return await Lt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(It(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Y2(async i=>(await K2(i*200),this._debug(t,"refreshing attempt",i),await Lt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_l})),(i,s,o)=>o&&o.error&&sA(o.error)&&Date.now()+(i+1)*200-r<yv)}catch(r){if(this._debug(t,"error",r),It(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ya()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await pv(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+aA;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${aA}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),sA(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ph;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ty;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ph;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),It(s)){const o={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(d){s.push(d)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),xp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Sw(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ya()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yv);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/yv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${yv}ms, refresh threshold is ${cA} ticks`),i<=cA&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ya()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=mv();await xp(this.storage,`${this.storageKey}-code-verifier`,i);const s=await gv(i),o=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(t?.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Lt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:d}=await Lt(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(!((i=l?.totp)===null||i===void 0)&&i.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:l}=await Lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Lt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}})}}im.nextInstanceID=0;class _j extends im{constructor(e){super(e)}}var bj=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(r.next(f))}catch(m){o(m)}}function d(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const xj={headers:N2},Sj={schema:"public"},Aj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ej={};class Cj{constructor(e,t,r){var i,s,o,l,d,h,f,m;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const v=U2(e);this.realtimeUrl=`${v}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${v}/auth/v1`,this.storageUrl=`${v}/storage/v1`,this.functionsUrl=`${v}/functions/v1`;const b=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,S={db:Sj,realtime:Ej,auth:Object.assign(Object.assign({},Aj),{storageKey:b}),global:xj},x=V2(r??{},S);this.storageKey=(s=(i=x.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=(o=x.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,(h=x.global)===null||h===void 0?void 0:h.fetch),this.fetch=B2(t,this._getAccessToken.bind(this),(f=x.global)===null||f===void 0?void 0:f.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new o2(`${v}/rest/v1`,{headers:this.headers,schema:(m=x.db)===null||m===void 0?void 0:m.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new qL(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new D2(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return bj(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:l},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _j({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,debug:l,fetch:h})}_initRealtimeClient(e){return new w2(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kj=(n,e,t)=>new Cj(n,e,t);function ke(n,e,t){function r(l,d){var h;Object.defineProperty(l,"_zod",{value:l._zod??{},enumerable:!1}),(h=l._zod).traits??(h.traits=new Set),l._zod.traits.add(n),e(l,d);for(const f in o.prototype)f in l||Object.defineProperty(l,f,{value:o.prototype[f].bind(l)});l._zod.constr=o,l._zod.def=d}const i=t?.Parent??Object;class s extends i{}Object.defineProperty(s,"name",{value:n});function o(l){var d;const h=t?.Parent?new s:this;r(h,l),(d=h._zod).deferred??(d.deferred=[]);for(const f of h._zod.deferred)f();return h}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:l=>t?.Parent&&l instanceof t.Parent?!0:l?._zod?.traits?.has(n)}),Object.defineProperty(o,"name",{value:n}),o}class sm extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const b1={};function hu(n){return b1}function Tj(n){const e=Object.values(n).filter(r=>typeof r=="number");return Object.entries(n).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function x_(n,e){return typeof e=="bigint"?e.toString():e}function x1(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function Cb(n){return n==null}function kb(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}const uA=Symbol("evaluating");function Zt(n,e,t){let r;Object.defineProperty(n,e,{get(){if(r!==uA)return r===void 0&&(r=uA,r=t()),r},set(i){Object.defineProperty(n,e,{value:i})},configurable:!0})}function Pj(n){return Object.create(Object.getPrototypeOf(n),Object.getOwnPropertyDescriptors(n))}function xu(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function qh(...n){const e={};for(const t of n){const r=Object.getOwnPropertyDescriptors(t);Object.assign(e,r)}return Object.defineProperties({},e)}function dA(n){return JSON.stringify(n)}const S1="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function S_(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const Rj=x1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function ry(n){if(S_(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(S_(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function A1(n){return ry(n)?{...n}:n}const Ij=new Set(["string","number","symbol"]);function Py(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Su(n,e,t){const r=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(r._zod.parent=n),r}function nt(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Mj(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}function Dj(n,e){const t=n._zod.def,r=qh(n._zod.def,{get shape(){const i={};for(const s in e){if(!(s in t.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&(i[s]=t.shape[s])}return xu(this,"shape",i),i},checks:[]});return Su(n,r)}function Oj(n,e){const t=n._zod.def,r=qh(n._zod.def,{get shape(){const i={...n._zod.def.shape};for(const s in e){if(!(s in t.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&delete i[s]}return xu(this,"shape",i),i},checks:[]});return Su(n,r)}function Nj(n,e){if(!ry(e))throw new Error("Invalid input to extend: expected a plain object");const t=qh(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return xu(this,"shape",r),r},checks:[]});return Su(n,t)}function Lj(n,e){const t=qh(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e._zod.def.shape};return xu(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Su(n,t)}function jj(n,e,t){const r=qh(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(t)for(const o in t){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=n?new n({type:"optional",innerType:i[o]}):i[o])}else for(const o in i)s[o]=n?new n({type:"optional",innerType:i[o]}):i[o];return xu(this,"shape",s),s},checks:[]});return Su(e,r)}function Fj(n,e,t){const r=qh(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(t)for(const o in t){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=new n({type:"nonoptional",innerType:i[o]}))}else for(const o in i)s[o]=new n({type:"nonoptional",innerType:i[o]});return xu(this,"shape",s),s},checks:[]});return Su(e,r)}function Wp(n,e=0){for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function E1(n,e){return e.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(n),t})}function wv(n){return typeof n=="string"?n:n?.message}function fu(n,e,t){const r={...n,path:n.path??[]};if(!n.message){const i=wv(n.inst?._zod.def?.error?.(n))??wv(e?.error?.(n))??wv(t.customError?.(n))??wv(t.localeError?.(n))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Tb(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function om(...n){const[e,t,r]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:r}:{...e}}const C1=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,x_,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},k1=ke("$ZodError",C1),T1=ke("$ZodError",C1,{Parent:Error});function $j(n,e=t=>t.message){const t={},r=[];for(const i of n.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}function zj(n,e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>i({issues:l}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let l=r,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(t(o))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return i(n),r}const Bj=n=>(e,t,r,i)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:t,issues:[]},s);if(o instanceof Promise)throw new sm;if(o.issues.length){const l=new(i?.Err??n)(o.issues.map(d=>fu(d,s,hu())));throw S1(l,i?.callee),l}return o.value},Uj=n=>async(e,t,r,i)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:t,issues:[]},s);if(o instanceof Promise&&(o=await o),o.issues.length){const l=new(i?.Err??n)(o.issues.map(d=>fu(d,s,hu())));throw S1(l,i?.callee),l}return o.value},P1=n=>(e,t,r)=>{const i=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:t,issues:[]},i);if(s instanceof Promise)throw new sm;return s.issues.length?{success:!1,error:new(n??k1)(s.issues.map(o=>fu(o,i,hu())))}:{success:!0,data:s.value}},Vj=P1(T1),R1=n=>async(e,t,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:t,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new n(s.issues.map(o=>fu(o,i,hu())))}:{success:!0,data:s.value}},Wj=R1(T1),Hj=/^[cC][^\s-]{8,}$/,qj=/^[0-9a-z]+$/,Gj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Kj=/^[0-9a-vA-V]{20}$/,Yj=/^[A-Za-z0-9]{27}$/,Xj=/^[a-zA-Z0-9_-]{21}$/,Zj=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Jj=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,hA=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Qj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,eF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function tF(){return new RegExp(eF,"u")}const nF=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,iF=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sF=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,oF=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,I1=/^[A-Za-z0-9_-]*$/,aF=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,lF=/^\+(?:[0-9]){6,14}[0-9]$/,M1="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cF=new RegExp(`^${M1}$`);function D1(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function uF(n){return new RegExp(`^${D1(n)}$`)}function dF(n){const e=D1({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${t.join("|")})`;return new RegExp(`^${M1}T(?:${r})$`)}const hF=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},fF=/^[^A-Z]*$/,pF=/^[^a-z]*$/,Po=ke("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),mF=ke("$ZodCheckMaxLength",(n,e)=>{var t;Po.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!Cb(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),n._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const o=Tb(i);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),gF=ke("$ZodCheckMinLength",(n,e)=>{var t;Po.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!Cb(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),n._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const o=Tb(i);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),vF=ke("$ZodCheckLengthEquals",(n,e)=>{var t;Po.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!Cb(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),n._zod.check=r=>{const i=r.value,s=i.length;if(s===e.length)return;const o=Tb(i),l=s>e.length;r.issues.push({origin:o,...l?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:n,continue:!e.abort})}}),Ry=ke("$ZodCheckStringFormat",(n,e)=>{var t,r;Po.init(n,e),n._zod.onattach.push(i=>{const s=i._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(r=n._zod).check??(r.check=()=>{})}),yF=ke("$ZodCheckRegex",(n,e)=>{Ry.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),wF=ke("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=fF),Ry.init(n,e)}),_F=ke("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=pF),Ry.init(n,e)}),bF=ke("$ZodCheckIncludes",(n,e)=>{Po.init(n,e);const t=Py(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=r,n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),n._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:n,continue:!e.abort})}}),xF=ke("$ZodCheckStartsWith",(n,e)=>{Po.init(n,e);const t=new RegExp(`^${Py(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:n,continue:!e.abort})}}),SF=ke("$ZodCheckEndsWith",(n,e)=>{Po.init(n,e);const t=new RegExp(`.*${Py(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:n,continue:!e.abort})}}),AF=ke("$ZodCheckOverwrite",(n,e)=>{Po.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class EF{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),i=Math.min(...r.map(o=>o.length-o.trimStart().length)),s=r.map(o=>o.slice(i)).map(o=>" ".repeat(this.indent*2)+o);for(const o of s)this.content.push(o)}compile(){const e=Function,t=this?.args,i=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...t,i.join(`
`))}}const CF={major:4,minor:0,patch:17},qn=ke("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=CF;const r=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&r.unshift(n);for(const i of r)for(const s of i._zod.onattach)s(n);if(r.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const i=(s,o,l)=>{let d=Wp(s),h;for(const f of o){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(d)continue;const m=s.issues.length,v=f._zod.check(s);if(v instanceof Promise&&l?.async===!1)throw new sm;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,s.issues.length!==m&&(d||(d=Wp(s,m)))});else{if(s.issues.length===m)continue;d||(d=Wp(s,m))}}return h?h.then(()=>s):s};n._zod.run=(s,o)=>{const l=n._zod.parse(s,o);if(l instanceof Promise){if(o.async===!1)throw new sm;return l.then(d=>i(d,r,o))}return i(l,r,o)}}n["~standard"]={validate:i=>{try{const s=Vj(n,i);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return Wj(n,i).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),Pb=ke("$ZodString",(n,e)=>{qn.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??hF(n._zod.bag),n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),an=ke("$ZodStringFormat",(n,e)=>{Ry.init(n,e),Pb.init(n,e)}),kF=ke("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=Jj),an.init(n,e)}),TF=ke("$ZodUUID",(n,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=hA(r))}else e.pattern??(e.pattern=hA());an.init(n,e)}),PF=ke("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=Qj),an.init(n,e)}),RF=ke("$ZodURL",(n,e)=>{an.init(n,e),n._zod.check=t=>{try{const r=t.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:aF.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=i.href:t.value=r;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),IF=ke("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=tF()),an.init(n,e)}),MF=ke("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=Xj),an.init(n,e)}),DF=ke("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=Hj),an.init(n,e)}),OF=ke("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=qj),an.init(n,e)}),NF=ke("$ZodULID",(n,e)=>{e.pattern??(e.pattern=Gj),an.init(n,e)}),LF=ke("$ZodXID",(n,e)=>{e.pattern??(e.pattern=Kj),an.init(n,e)}),jF=ke("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=Yj),an.init(n,e)}),FF=ke("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=dF(e)),an.init(n,e)}),$F=ke("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=cF),an.init(n,e)}),zF=ke("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=uF(e)),an.init(n,e)}),BF=ke("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=Zj),an.init(n,e)}),UF=ke("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=nF),an.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv4"})}),VF=ke("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=rF),an.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),WF=ke("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=iF),an.init(n,e)}),HF=ke("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=sF),an.init(n,e),n._zod.check=t=>{const[r,i]=t.value.split("/");try{if(!i)throw new Error;const s=Number(i);if(`${s}`!==i)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function O1(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const qF=ke("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=oF),an.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{O1(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function GF(n){if(!I1.test(n))return!1;const e=n.replace(/[-_]/g,r=>r==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return O1(t)}const KF=ke("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=I1),an.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{GF(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),YF=ke("$ZodE164",(n,e)=>{e.pattern??(e.pattern=lF),an.init(n,e)});function XF(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[r]=t;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const ZF=ke("$ZodJWT",(n,e)=>{an.init(n,e),n._zod.check=t=>{XF(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),JF=ke("$ZodUnknown",(n,e)=>{qn.init(n,e),n._zod.parse=t=>t}),QF=ke("$ZodNever",(n,e)=>{qn.init(n,e),n._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function fA(n,e,t){n.issues.length&&e.issues.push(...E1(t,n.issues)),e.value[t]=n.value}const e$=ke("$ZodArray",(n,e)=>{qn.init(n,e),n._zod.parse=(t,r)=>{const i=t.value;if(!Array.isArray(i))return t.issues.push({expected:"array",code:"invalid_type",input:i,inst:n}),t;t.value=Array(i.length);const s=[];for(let o=0;o<i.length;o++){const l=i[o],d=e.element._zod.run({value:l,issues:[]},r);d instanceof Promise?s.push(d.then(h=>fA(h,t,o))):fA(d,t,o)}return s.length?Promise.all(s).then(()=>t):t}});function _v(n,e,t,r){n.issues.length&&e.issues.push(...E1(t,n.issues)),n.value===void 0?t in r&&(e.value[t]=void 0):e.value[t]=n.value}const t$=ke("$ZodObject",(n,e)=>{qn.init(n,e);const t=x1(()=>{const m=Object.keys(e.shape);for(const b of m)if(!e.shape[b]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${b}": expected a Zod schema`);const v=Mj(e.shape);return{shape:e.shape,keys:m,keySet:new Set(m),numKeys:m.length,optionalKeys:new Set(v)}});Zt(n._zod,"propValues",()=>{const m=e.shape,v={};for(const b in m){const S=m[b]._zod;if(S.values){v[b]??(v[b]=new Set);for(const x of S.values)v[b].add(x)}}return v});const r=m=>{const v=new EF(["shape","payload","ctx"]),b=t.value,S=I=>{const R=dA(I);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};v.write("const input = payload.value;");const x=Object.create(null);let C=0;for(const I of b.keys)x[I]=`key_${C++}`;v.write("const newResult = {}");for(const I of b.keys){const R=x[I],M=dA(I);v.write(`const ${R} = ${S(I)};`),v.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${M}, ...iss.path] : [${M}]
          })));
        }
        
        if (${R}.value === undefined) {
          if (${M} in input) {
            newResult[${M}] = undefined;
          }
        } else {
          newResult[${M}] = ${R}.value;
        }
      `)}v.write("payload.value = newResult;"),v.write("return payload;");const P=v.compile();return(I,R)=>P(m,I,R)};let i;const s=S_,o=!b1.jitless,d=o&&Rj.value,h=e.catchall;let f;n._zod.parse=(m,v)=>{f??(f=t.value);const b=m.value;if(!s(b))return m.issues.push({expected:"object",code:"invalid_type",input:b,inst:n}),m;const S=[];if(o&&d&&v?.async===!1&&v.jitless!==!0)i||(i=r(e.shape)),m=i(m,v);else{m.value={};const R=f.shape;for(const M of f.keys){const F=R[M]._zod.run({value:b[M],issues:[]},v);F instanceof Promise?S.push(F.then(B=>_v(B,m,M,b))):_v(F,m,M,b)}}if(!h)return S.length?Promise.all(S).then(()=>m):m;const x=[],C=f.keySet,P=h._zod,I=P.def.type;for(const R of Object.keys(b)){if(C.has(R))continue;if(I==="never"){x.push(R);continue}const M=P.run({value:b[R],issues:[]},v);M instanceof Promise?S.push(M.then(N=>_v(N,m,R,b))):_v(M,m,R,b)}return x.length&&m.issues.push({code:"unrecognized_keys",keys:x,input:b,inst:n}),S.length?Promise.all(S).then(()=>m):m}});function pA(n,e,t,r){for(const s of n)if(s.issues.length===0)return e.value=s.value,e;const i=n.filter(s=>!Wp(s));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(s=>s.issues.map(o=>fu(o,r,hu())))}),e)}const n$=ke("$ZodUnion",(n,e)=>{qn.init(n,e),Zt(n._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),Zt(n._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),Zt(n._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),Zt(n._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(s=>s._zod.pattern);return new RegExp(`^(${i.map(s=>kb(s.source)).join("|")})$`)}});const t=e.options.length===1,r=e.options[0]._zod.run;n._zod.parse=(i,s)=>{if(t)return r(i,s);let o=!1;const l=[];for(const d of e.options){const h=d._zod.run({value:i.value,issues:[]},s);if(h instanceof Promise)l.push(h),o=!0;else{if(h.issues.length===0)return h;l.push(h)}}return o?Promise.all(l).then(d=>pA(d,i,n,s)):pA(l,i,n,s)}}),r$=ke("$ZodIntersection",(n,e)=>{qn.init(n,e),n._zod.parse=(t,r)=>{const i=t.value,s=e.left._zod.run({value:i,issues:[]},r),o=e.right._zod.run({value:i,issues:[]},r);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([d,h])=>mA(t,d,h)):mA(t,s,o)}});function A_(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(ry(n)&&ry(e)){const t=Object.keys(e),r=Object.keys(n).filter(s=>t.indexOf(s)!==-1),i={...n,...e};for(const s of r){const o=A_(n[s],e[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};i[s]=o.data}return{valid:!0,data:i}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<n.length;r++){const i=n[r],s=e[r],o=A_(i,s);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};t.push(o.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function mA(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),Wp(n))return n;const r=A_(e.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return n.value=r.data,n}const i$=ke("$ZodEnum",(n,e)=>{qn.init(n,e);const t=Tj(e.entries),r=new Set(t);n._zod.values=r,n._zod.pattern=new RegExp(`^(${t.filter(i=>Ij.has(typeof i)).map(i=>typeof i=="string"?Py(i):i.toString()).join("|")})$`),n._zod.parse=(i,s)=>{const o=i.value;return r.has(o)||i.issues.push({code:"invalid_value",values:t,input:o,inst:n}),i}}),s$=ke("$ZodTransform",(n,e)=>{qn.init(n,e),n._zod.parse=(t,r)=>{const i=e.transform(t.value,t);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(o=>(t.value=o,t));if(i instanceof Promise)throw new sm;return t.value=i,t}});function gA(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const o$=ke("$ZodOptional",(n,e)=>{qn.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Zt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Zt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${kb(t.source)})?$`):void 0}),n._zod.parse=(t,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>gA(s,t.value)):gA(i,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,r)}}),a$=ke("$ZodNullable",(n,e)=>{qn.init(n,e),Zt(n._zod,"optin",()=>e.innerType._zod.optin),Zt(n._zod,"optout",()=>e.innerType._zod.optout),Zt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${kb(t.source)}|null)$`):void 0}),Zt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,r)=>t.value===null?t:e.innerType._zod.run(t,r)}),l$=ke("$ZodDefault",(n,e)=>{qn.init(n,e),n._zod.optin="optional",Zt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(t.value===void 0)return t.value=e.defaultValue,t;const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>vA(s,e)):vA(i,e)}});function vA(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const c$=ke("$ZodPrefault",(n,e)=>{qn.init(n,e),n._zod.optin="optional",Zt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>(t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,r))}),u$=ke("$ZodNonOptional",(n,e)=>{qn.init(n,e),Zt(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>yA(s,n)):yA(i,n)}});function yA(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const d$=ke("$ZodCatch",(n,e)=>{qn.init(n,e),Zt(n._zod,"optin",()=>e.innerType._zod.optin),Zt(n._zod,"optout",()=>e.innerType._zod.optout),Zt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(o=>fu(o,r,hu()))},input:t.value}),t.issues=[]),t)):(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(s=>fu(s,r,hu()))},input:t.value}),t.issues=[]),t)}}),h$=ke("$ZodPipe",(n,e)=>{qn.init(n,e),Zt(n._zod,"values",()=>e.in._zod.values),Zt(n._zod,"optin",()=>e.in._zod.optin),Zt(n._zod,"optout",()=>e.out._zod.optout),Zt(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,r)=>{const i=e.in._zod.run(t,r);return i instanceof Promise?i.then(s=>wA(s,e,r)):wA(i,e,r)}});function wA(n,e,t){return n.issues.length?n:e.out._zod.run({value:n.value,issues:n.issues},t)}const f$=ke("$ZodReadonly",(n,e)=>{qn.init(n,e),Zt(n._zod,"propValues",()=>e.innerType._zod.propValues),Zt(n._zod,"values",()=>e.innerType._zod.values),Zt(n._zod,"optin",()=>e.innerType._zod.optin),Zt(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(_A):_A(i)}});function _A(n){return n.value=Object.freeze(n.value),n}const p$=ke("$ZodCustom",(n,e)=>{Po.init(n,e),qn.init(n,e),n._zod.parse=(t,r)=>t,n._zod.check=t=>{const r=t.value,i=e.fn(r);if(i instanceof Promise)return i.then(s=>bA(s,t,r,n));bA(i,t,r,n)}});function bA(n,e,t,r){if(!n){const i={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(om(i))}}class m${constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function g$(){return new m$}const bv=g$();function v$(n,e){return new n({type:"string",...nt(e)})}function y$(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...nt(e)})}function xA(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...nt(e)})}function w$(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...nt(e)})}function _$(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...nt(e)})}function b$(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...nt(e)})}function x$(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...nt(e)})}function S$(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...nt(e)})}function A$(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...nt(e)})}function E$(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...nt(e)})}function C$(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...nt(e)})}function k$(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...nt(e)})}function T$(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...nt(e)})}function P$(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...nt(e)})}function R$(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...nt(e)})}function I$(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...nt(e)})}function M$(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...nt(e)})}function D$(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...nt(e)})}function O$(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...nt(e)})}function N$(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...nt(e)})}function L$(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...nt(e)})}function j$(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...nt(e)})}function F$(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...nt(e)})}function $$(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...nt(e)})}function z$(n,e){return new n({type:"string",format:"date",check:"string_format",...nt(e)})}function B$(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...nt(e)})}function U$(n,e){return new n({type:"string",format:"duration",check:"string_format",...nt(e)})}function V$(n){return new n({type:"unknown"})}function W$(n,e){return new n({type:"never",...nt(e)})}function N1(n,e){return new mF({check:"max_length",...nt(e),maximum:n})}function iy(n,e){return new gF({check:"min_length",...nt(e),minimum:n})}function L1(n,e){return new vF({check:"length_equals",...nt(e),length:n})}function H$(n,e){return new yF({check:"string_format",format:"regex",...nt(e),pattern:n})}function q$(n){return new wF({check:"string_format",format:"lowercase",...nt(n)})}function G$(n){return new _F({check:"string_format",format:"uppercase",...nt(n)})}function K$(n,e){return new bF({check:"string_format",format:"includes",...nt(e),includes:n})}function Y$(n,e){return new xF({check:"string_format",format:"starts_with",...nt(e),prefix:n})}function X$(n,e){return new SF({check:"string_format",format:"ends_with",...nt(e),suffix:n})}function km(n){return new AF({check:"overwrite",tx:n})}function Z$(n){return km(e=>e.normalize(n))}function J$(){return km(n=>n.trim())}function Q$(){return km(n=>n.toLowerCase())}function ez(){return km(n=>n.toUpperCase())}function tz(n,e,t){return new n({type:"array",element:e,...nt(t)})}function nz(n,e,t){return new n({type:"custom",check:"custom",fn:e,...nt(t)})}function rz(n){const e=iz(t=>(t.addIssue=r=>{if(typeof r=="string")t.issues.push(om(r,t.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=t.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),t.issues.push(om(i))}},n(t.value,t)));return e}function iz(n,e){const t=new Po({check:"custom",...nt(e)});return t._zod.check=n,t}const sz=ke("ZodISODateTime",(n,e)=>{FF.init(n,e),pn.init(n,e)});function oz(n){return $$(sz,n)}const az=ke("ZodISODate",(n,e)=>{$F.init(n,e),pn.init(n,e)});function lz(n){return z$(az,n)}const cz=ke("ZodISOTime",(n,e)=>{zF.init(n,e),pn.init(n,e)});function uz(n){return B$(cz,n)}const dz=ke("ZodISODuration",(n,e)=>{BF.init(n,e),pn.init(n,e)});function hz(n){return U$(dz,n)}const fz=(n,e)=>{k1.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>zj(n,t)},flatten:{value:t=>$j(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,x_,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,x_,2)}},isEmpty:{get(){return n.issues.length===0}}})},Iy=ke("ZodError",fz,{Parent:Error}),pz=Bj(Iy),mz=Uj(Iy),gz=P1(Iy),vz=R1(Iy),or=ke("ZodType",(n,e)=>(qn.init(n,e),n.def=e,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone({...e,checks:[...e.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),n.clone=(t,r)=>Su(n,t,r),n.brand=()=>n,n.register=(t,r)=>(t.add(n,r),n),n.parse=(t,r)=>pz(n,t,r,{callee:n.parse}),n.safeParse=(t,r)=>gz(n,t,r),n.parseAsync=async(t,r)=>mz(n,t,r,{callee:n.parseAsync}),n.safeParseAsync=async(t,r)=>vz(n,t,r),n.spa=n.safeParseAsync,n.refine=(t,r)=>n.check(aB(t,r)),n.superRefine=t=>n.check(lB(t)),n.overwrite=t=>n.check(km(t)),n.optional=()=>CA(n),n.nullable=()=>kA(n),n.nullish=()=>CA(kA(n)),n.nonoptional=t=>eB(n,t),n.array=()=>zz(n),n.or=t=>Wz([n,t]),n.and=t=>qz(n,t),n.transform=t=>TA(n,Kz(t)),n.default=t=>Zz(n,t),n.prefault=t=>Qz(n,t),n.catch=t=>nB(n,t),n.pipe=t=>TA(n,t),n.readonly=()=>sB(n),n.describe=t=>{const r=n.clone();return bv.add(r,{description:t}),r},Object.defineProperty(n,"description",{get(){return bv.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return bv.get(n);const r=n.clone();return bv.add(r,t[0]),r},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),j1=ke("_ZodString",(n,e)=>{Pb.init(n,e),or.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...r)=>n.check(H$(...r)),n.includes=(...r)=>n.check(K$(...r)),n.startsWith=(...r)=>n.check(Y$(...r)),n.endsWith=(...r)=>n.check(X$(...r)),n.min=(...r)=>n.check(iy(...r)),n.max=(...r)=>n.check(N1(...r)),n.length=(...r)=>n.check(L1(...r)),n.nonempty=(...r)=>n.check(iy(1,...r)),n.lowercase=r=>n.check(q$(r)),n.uppercase=r=>n.check(G$(r)),n.trim=()=>n.check(J$()),n.normalize=(...r)=>n.check(Z$(...r)),n.toLowerCase=()=>n.check(Q$()),n.toUpperCase=()=>n.check(ez())}),yz=ke("ZodString",(n,e)=>{Pb.init(n,e),j1.init(n,e),n.email=t=>n.check(y$(wz,t)),n.url=t=>n.check(S$(_z,t)),n.jwt=t=>n.check(F$(Nz,t)),n.emoji=t=>n.check(A$(bz,t)),n.guid=t=>n.check(xA(AA,t)),n.uuid=t=>n.check(w$(xv,t)),n.uuidv4=t=>n.check(_$(xv,t)),n.uuidv6=t=>n.check(b$(xv,t)),n.uuidv7=t=>n.check(x$(xv,t)),n.nanoid=t=>n.check(E$(xz,t)),n.guid=t=>n.check(xA(AA,t)),n.cuid=t=>n.check(C$(Sz,t)),n.cuid2=t=>n.check(k$(Az,t)),n.ulid=t=>n.check(T$(Ez,t)),n.base64=t=>n.check(N$(Mz,t)),n.base64url=t=>n.check(L$(Dz,t)),n.xid=t=>n.check(P$(Cz,t)),n.ksuid=t=>n.check(R$(kz,t)),n.ipv4=t=>n.check(I$(Tz,t)),n.ipv6=t=>n.check(M$(Pz,t)),n.cidrv4=t=>n.check(D$(Rz,t)),n.cidrv6=t=>n.check(O$(Iz,t)),n.e164=t=>n.check(j$(Oz,t)),n.datetime=t=>n.check(oz(t)),n.date=t=>n.check(lz(t)),n.time=t=>n.check(uz(t)),n.duration=t=>n.check(hz(t))});function SA(n){return v$(yz,n)}const pn=ke("ZodStringFormat",(n,e)=>{an.init(n,e),j1.init(n,e)}),wz=ke("ZodEmail",(n,e)=>{PF.init(n,e),pn.init(n,e)}),AA=ke("ZodGUID",(n,e)=>{kF.init(n,e),pn.init(n,e)}),xv=ke("ZodUUID",(n,e)=>{TF.init(n,e),pn.init(n,e)}),_z=ke("ZodURL",(n,e)=>{RF.init(n,e),pn.init(n,e)}),bz=ke("ZodEmoji",(n,e)=>{IF.init(n,e),pn.init(n,e)}),xz=ke("ZodNanoID",(n,e)=>{MF.init(n,e),pn.init(n,e)}),Sz=ke("ZodCUID",(n,e)=>{DF.init(n,e),pn.init(n,e)}),Az=ke("ZodCUID2",(n,e)=>{OF.init(n,e),pn.init(n,e)}),Ez=ke("ZodULID",(n,e)=>{NF.init(n,e),pn.init(n,e)}),Cz=ke("ZodXID",(n,e)=>{LF.init(n,e),pn.init(n,e)}),kz=ke("ZodKSUID",(n,e)=>{jF.init(n,e),pn.init(n,e)}),Tz=ke("ZodIPv4",(n,e)=>{UF.init(n,e),pn.init(n,e)}),Pz=ke("ZodIPv6",(n,e)=>{VF.init(n,e),pn.init(n,e)}),Rz=ke("ZodCIDRv4",(n,e)=>{WF.init(n,e),pn.init(n,e)}),Iz=ke("ZodCIDRv6",(n,e)=>{HF.init(n,e),pn.init(n,e)}),Mz=ke("ZodBase64",(n,e)=>{qF.init(n,e),pn.init(n,e)}),Dz=ke("ZodBase64URL",(n,e)=>{KF.init(n,e),pn.init(n,e)}),Oz=ke("ZodE164",(n,e)=>{YF.init(n,e),pn.init(n,e)}),Nz=ke("ZodJWT",(n,e)=>{ZF.init(n,e),pn.init(n,e)}),Lz=ke("ZodUnknown",(n,e)=>{JF.init(n,e),or.init(n,e)});function EA(){return V$(Lz)}const jz=ke("ZodNever",(n,e)=>{QF.init(n,e),or.init(n,e)});function Fz(n){return W$(jz,n)}const $z=ke("ZodArray",(n,e)=>{e$.init(n,e),or.init(n,e),n.element=e.element,n.min=(t,r)=>n.check(iy(t,r)),n.nonempty=t=>n.check(iy(1,t)),n.max=(t,r)=>n.check(N1(t,r)),n.length=(t,r)=>n.check(L1(t,r)),n.unwrap=()=>n.element});function zz(n,e){return tz($z,n,e)}const Bz=ke("ZodObject",(n,e)=>{t$.init(n,e),or.init(n,e),Zt(n,"shape",()=>e.shape),n.keyof=()=>F1(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:EA()}),n.loose=()=>n.clone({...n._zod.def,catchall:EA()}),n.strict=()=>n.clone({...n._zod.def,catchall:Fz()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>Nj(n,t),n.merge=t=>Lj(n,t),n.pick=t=>Dj(n,t),n.omit=t=>Oj(n,t),n.partial=(...t)=>jj($1,n,t[0]),n.required=(...t)=>Fj(z1,n,t[0])});function Uz(n,e){const t={type:"object",get shape(){return xu(this,"shape",n?Pj(n):{}),this.shape},...nt(e)};return new Bz(t)}const Vz=ke("ZodUnion",(n,e)=>{n$.init(n,e),or.init(n,e),n.options=e.options});function Wz(n,e){return new Vz({type:"union",options:n,...nt(e)})}const Hz=ke("ZodIntersection",(n,e)=>{r$.init(n,e),or.init(n,e)});function qz(n,e){return new Hz({type:"intersection",left:n,right:e})}const E_=ke("ZodEnum",(n,e)=>{i$.init(n,e),or.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(r,i)=>{const s={};for(const o of r)if(t.has(o))s[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new E_({...e,checks:[],...nt(i),entries:s})},n.exclude=(r,i)=>{const s={...e.entries};for(const o of r)if(t.has(o))delete s[o];else throw new Error(`Key ${o} not found in enum`);return new E_({...e,checks:[],...nt(i),entries:s})}});function F1(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(r=>[r,r])):n;return new E_({type:"enum",entries:t,...nt(e)})}const Gz=ke("ZodTransform",(n,e)=>{s$.init(n,e),or.init(n,e),n._zod.parse=(t,r)=>{t.addIssue=s=>{if(typeof s=="string")t.issues.push(om(s,t.value,e));else{const o=s;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=t.value),o.inst??(o.inst=n),t.issues.push(om(o))}};const i=e.transform(t.value,t);return i instanceof Promise?i.then(s=>(t.value=s,t)):(t.value=i,t)}});function Kz(n){return new Gz({type:"transform",transform:n})}const $1=ke("ZodOptional",(n,e)=>{o$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType});function CA(n){return new $1({type:"optional",innerType:n})}const Yz=ke("ZodNullable",(n,e)=>{a$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType});function kA(n){return new Yz({type:"nullable",innerType:n})}const Xz=ke("ZodDefault",(n,e)=>{l$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function Zz(n,e){return new Xz({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():A1(e)}})}const Jz=ke("ZodPrefault",(n,e)=>{c$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Qz(n,e){return new Jz({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():A1(e)}})}const z1=ke("ZodNonOptional",(n,e)=>{u$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType});function eB(n,e){return new z1({type:"nonoptional",innerType:n,...nt(e)})}const tB=ke("ZodCatch",(n,e)=>{d$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function nB(n,e){return new tB({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const rB=ke("ZodPipe",(n,e)=>{h$.init(n,e),or.init(n,e),n.in=e.in,n.out=e.out});function TA(n,e){return new rB({type:"pipe",in:n,out:e})}const iB=ke("ZodReadonly",(n,e)=>{f$.init(n,e),or.init(n,e),n.unwrap=()=>n._zod.def.innerType});function sB(n){return new iB({type:"readonly",innerType:n})}const oB=ke("ZodCustom",(n,e)=>{p$.init(n,e),or.init(n,e)});function aB(n,e={}){return nz(oB,n,e)}function lB(n){return rz(n)}const cB={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU",VITE_SUPABASE_URL:"cdn.gofotografo.com.br"},uB=Uz({VITE_SUPABASE_URL:SA().url("URL do Supabase deve ser válida"),VITE_SUPABASE_ANON_KEY:SA().min(1,"Chave anônima do Supabase é obrigatória"),VITE_APP_ENV:F1(["development","staging","production"]).optional().default("development")});let Sv=null;const B1=()=>{if(Sv)return Sv;try{const n={VITE_SUPABASE_URL:"cdn.gofotografo.com.br",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU",VITE_APP_ENV:cB?.VITE_APP_ENV||"development"};return Sv=uB.parse(n),Sv}catch(n){throw console.error("❌ Erro na validação das variáveis de ambiente:"),console.error(n.errors||n.message),new Error("Erro na configuração do ambiente. Verifique o console para detalhes.")}},C_=()=>{try{return B1().VITE_APP_ENV==="development"}catch{return!0}};let Hp=null;const U1=()=>{try{const n=B1();if(!n.VITE_SUPABASE_URL||!n.VITE_SUPABASE_ANON_KEY)throw new Error("Variáveis de ambiente do Supabase não encontradas.");return Hp=kj(n.VITE_SUPABASE_URL,n.VITE_SUPABASE_ANON_KEY,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),C_()&&console.log("✅ Supabase client inicializado com sucesso"),Hp}catch(n){throw console.error("❌ Erro ao inicializar Supabase client:",n.message),C_()&&console.error("Verifique se as variáveis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY estão definidas no arquivo .env"),Hp=null,n}};try{U1()}catch(n){if(C_())throw n;console.error("Supabase initialization failed:",n.message)}const dB=()=>{if(!Hp)try{return U1()}catch{throw new Error("Não foi possível conectar ao banco de dados. Verifique sua configuração.")}return Hp},xe=dB(),hB=1,PA=768;let Cw=0;function fB(){return Cw=(Cw+1)%Number.MAX_VALUE,Cw.toString()}const On={state:{toasts:[],isMobileView:typeof window<"u"?window.innerWidth<PA:!1},listeners:[],getState:()=>On.state,setState:n=>{typeof n=="function"?On.state=n(On.state):On.state={...On.state,...n},On.listeners.forEach(e=>e(On.state))},subscribe:n=>(On.listeners.push(n),()=>{On.listeners=On.listeners.filter(e=>e!==n)}),updateMobileView:()=>{if(typeof window<"u"){const n=window.innerWidth<PA;n!==On.state.isMobileView&&On.setState(e=>({...e,isMobileView:n}))}}};typeof window<"u"&&(window.addEventListener("resize",On.updateMobileView),On.updateMobileView());const pB=({...n})=>{const{isMobileView:e}=On.getState(),t=["Saldos Visíveis","Saldos Ocultos","Modo de Personalização Ativado","Card Adicionado","Card Removido","Projeto movido","Projeto Excluído","Projeto Arquivado","Projeto Restaurado","Coluna Adicionada","Coluna Removida"];if(n.title&&t.includes(n.title))return{id:null,dismiss:()=>{},update:()=>{}};const r=fB(),i=o=>On.setState(l=>({...l,toasts:l.toasts.map(d=>d.id===r?{...d,...o}:d)})),s=()=>On.setState(o=>({...o,toasts:o.toasts.filter(l=>l.id!==r)}));return On.setState(o=>({...o,toasts:[{...n,id:r,dismiss:s},...o.toasts].slice(0,hB)})),{id:r,dismiss:s,update:i}};function ds(){const[n,e]=A.useState(On.getState());return A.useEffect(()=>On.subscribe(r=>{e(r)}),[]),A.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:pB,toasts:n.toasts,isMobileView:n.isMobileView}}const qp=n=>{if(!n||!Array.isArray(n))return{transactions:[],totalRevenue:0,totalExpenses:0,operationalProfit:0,totalProLabore:0,netBalance:0,pendingPayments:0};const e=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PAGO").reduce((l,d)=>l+Number(d.valor),0),t=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category!=="Pró-labore").reduce((l,d)=>l+Number(d.valor),0),r=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category==="Pró-labore").reduce((l,d)=>l+Number(d.valor),0),i=e-t,s=i-r,o=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE").reduce((l,d)=>l+Number(d.valor),0);return{transactions:n,totalRevenue:e,totalExpenses:t,operationalProfit:i,totalProLabore:r,netBalance:s,pendingPayments:o}},mB=async(n,e,t)=>{const r={...t,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete r.id,"client_id"in r&&(r.cliente_id=r.client_id,delete r.client_id),"fornecedor_id"in r&&delete r.fornecedor_id,"date"in r&&(r.data=r.date,delete r.date),"workflow_id"in r&&(r.trabalho_id=r.workflow_id,delete r.workflow_id);const{data:i,error:s}=await n.from("transacoes").insert([r]).select().single();if(s)throw s;return i},gB=async(n,e,t,r)=>{const i={...r,updated_at:new Date().toISOString()};"client_id"in i&&(i.cliente_id=i.client_id,delete i.client_id),"fornecedor_id"in i&&delete i.fornecedor_id,"date"in i&&(i.data=i.date,delete i.date),"workflow_id"in i&&(i.trabalho_id=i.workflow_id,delete i.workflow_id);const{data:s,error:o}=await n.from("transacoes").update(i).eq("id",t).eq("user_id",e).select().single();if(o)throw o;return s},vB=async(n,e,t)=>{const{error:r}=await n.from("transacoes").delete().eq("id",t).eq("user_id",e);if(r)throw r},yB=async(n,e)=>{const{data:t,error:r}=await n.from("transacoes").select("*").eq("trabalho_id",e);return r?[]:t},bh=(n,e,t)=>{console.error(`Erro em ${e}:`,n);const r=`Erro em ${e}: ${n.message}`;t&&t({title:"Erro de Sistema",description:r,variant:"destructive",duration:5e3})},kr={profile_photo:null,logo:null,business_name:"",user_name:"",subdomain:"",notifications:{email:!0,push:!0},dashboard_layout:null,workflow_columns:[{id:"novo-lead",title:"Novos Leads",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"agendado",title:"Agendado",cardIds:[],color:"bg-teal-300 dark:bg-teal-700"},{id:"em-andamento",title:"Em Andamento",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"concluido",title:"Concluídos",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"}],address:"",photography_type:"",cnpj:"",cpf:"",phones:[],contact_email:"",website_social:{instagram:"",facebook:"",website:""},language:"pt-BR",currency:"BRL",timezone:"America/Sao_Paulo",date_format:"dd/MM/yyyy",automation:{},current_plan_id:"FREE",stripe_customer_id:null,stripe_subscription_id:null,plan_expires_at:null,plan_status:"FREE",trial_ends_at:null,hide_dashboard_balances:!1,took_initial_tour:!1,has_completed_tour:!1,show_greetings:!0,workflow_card_view_mode:"list",workflow_summary_expanded:!0,mobile_menu_items:["dashboard","workflow","clients","financial","calendar"],google_calendar_integrated:!1,google_tokens:null,feature_overrides:{},pix_key:null},Hv=[{id:"novo-lead",title:"Novos Leads",cardIds:[]},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[]},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[]},{id:"agendado",title:"Agendado",cardIds:[]},{id:"em-andamento",title:"Em Andamento",cardIds:[]},{id:"concluido",title:"Concluídos",cardIds:[]}],wB=async(n,e,t,r,i)=>{const{data:s,error:o}=await n.from("settings").select("*").eq("user_id",e).limit(1).maybeSingle();if(o&&o.code!=="PGRST116")throw o;const l={};if(s){for(const f in t)t.hasOwnProperty(f)&&(l[f]=t[f]);l.user_name=t.user_name||s.user_name||i,l.contact_email=t.contact_email||s.contact_email||n.auth.user&&n.auth.user().email||i}else{const f={...kr,...r||{},...t};for(const m in kr)f.hasOwnProperty(m)&&(l[m]=f[m]);if(l.user_id=e,l.user_name=f.user_name||i,l.contact_email=f.contact_email||n.auth.user&&n.auth.user().email||i,l.plan_status=f.plan_status||"TRIAL",l.plan_status==="TRIAL"&&!f.trial_ends_at){const m=new Date;m.setDate(m.getDate()+7),l.trial_ends_at=m.toISOString()}l.took_initial_tour=f.took_initial_tour||!1}s&&Object.keys(l).forEach(f=>{l[f]===void 0&&delete l[f]});let d,h;if(s&&s.id){if(Object.keys(l).length===0)return s;({data:d,error:h}=await n.from("settings").update({...l,updated_at:new Date().toISOString()}).eq("id",s.id).eq("user_id",e).select().single())}else({data:d,error:h}=await n.from("settings").insert([{...l,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single());if(h)throw h;return d},V1=A.createContext(),Rb=()=>{const n=A.useContext(V1);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},kw=n=>{if(!n)return!1;const e=n.message||"",t=e.includes("Invalid Refresh Token")||e.includes("Token not found")||e.includes("Session not found"),r=n.code==="400"&&n.error_code==="refresh_token_not_found";return t||r},W1=({children:n})=>{const{toast:e}=ds(),[t,r]=A.useState(null),[i,s]=A.useState(null),[o,l]=A.useState(!0),[d,h]=A.useState(kr),[f,m]=A.useState(!0),v=A.useCallback(async(P,I)=>{if(kw(P)){e({title:"Sessão Expirada ou Inválida",description:"Sua sessão expirou. Por favor, faça login novamente para continuar.",variant:"destructive",duration:7e3}),xe&&await xe.auth.signOut().catch(R=>{}),r(null),s(null),h(kr),l(!1),m(!1);return}bh(P,I,e)},[e]),b=A.useCallback(async P=>{if(!P||!xe){h(kr),m(!1);return}m(!0);try{const{data:I,error:R}=await xe.from("settings").select("*").eq("user_id",P.id).single(),M=P.user_metadata?.full_name||P.email;if(R&&R.code!=="PGRST116"){if(await v(R,"buscar configurações"),kw(R))return;h({...kr,user_name:M,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:Hv})}else if(I)h(N=>({...kr,...N,...I,user_name:I.user_name||M,contact_email:I.contact_email||P.email,user_id:I.user_id||P.id,profile_photo:I.profile_photo||P.user_metadata?.avatar_url||null,workflow_columns:I.workflow_columns||Hv}));else{const N={...kr,user_name:M,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:Hv};h(N);const{data:F,error:B}=await xe.from("settings").insert([N]).select().single();if(B){if(await v(B,"criar configurações padrão"),kw(B))return}else F&&h(H=>({...kr,...H,...F}))}}catch(I){await v(I,"carregar configurações")}finally{m(!1)}},[v]);A.useEffect(()=>{if(l(!0),(async()=>{if(!xe){console.error("❌ Supabase client not initialized. Cannot get session."),l(!1),h(kr),m(!1);return}const{data:{session:R},error:M}=await xe.auth.getSession();if(M){await v(M,"obter sessão de autenticação"),l(!1);return}const N=R?.user??null;s(R),r(N),N&&N.email_confirmed_at?await b(N):(h(kr),m(!1),N&&!N.email_confirmed_at&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"})),l(!1)})(),!xe)return;const{data:I}=xe.auth.onAuthStateChange(async(R,M)=>{l(!0);const N=M?.user??null;s(M),r(N),R==="SIGNED_IN"&&N&&N.email_confirmed_at?await b(N):R==="SIGNED_OUT"?(h(kr),m(!1)):R==="USER_UPDATED"&&N&&N.email_confirmed_at?h(F=>({...F,user_name:N.user_metadata?.full_name||F.user_name||N.email,profile_photo:N.user_metadata?.avatar_url||F.profile_photo})):!N&&R!=="SIGNED_OUT"&&(h(kr),m(!1)),N&&!N.email_confirmed_at&&R!=="INITIAL_SESSION"&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"}),l(!1)});return()=>{I&&I.subscription&&I.subscription.unsubscribe()}},[v,b,e]);const C={user:t,session:i,settings:d,loadingAuth:o,loadingSettings:f,setSettings:async P=>{if(!t||!t.email_confirmed_at||!xe){await v({message:"Usuário não autenticado, email não confirmado ou Supabase não inicializado"},"salvar configurações");return}try{const I=t.user_metadata?.full_name||t.email,R=await wB(xe,t.id,P,d,I);if(R){h(N=>({...kr,...N,...R}));let M={};if(P.user_name&&P.user_name!==(t.user_metadata?.full_name||"")&&(M.data={...M.data,full_name:P.user_name}),P.profile_photo&&P.profile_photo!==(t.user_metadata?.avatar_url||"")&&(M.data={...M.data,avatar_url:P.profile_photo}),Object.keys(M).length>0){const{data:N,error:F}=await xe.auth.updateUser(M);F?await v(F,"atualizar dados do usuário na autenticação"):N&&r(B=>({...B,user_metadata:N.user.user_metadata}))}}}catch(I){await v(I,"salvar configurações")}},logout:async()=>{try{if(!xe)return await v({message:"Supabase client not initialized"},"fazer logout"),!1;try{localStorage.clear(),sessionStorage.clear()}catch{}const{error:P}=await xe.auth.signOut();return P?(await v(P,"fazer logout"),!1):(r(null),s(null),h(kr),e({title:"Logout realizado",description:"Você foi desconectado com sucesso.",duration:3e3}),!0)}catch(P){return await v(P,"fazer logout"),!1}},refreshSettings:()=>t?b(t):Promise.resolve()};return y.jsx(V1.Provider,{value:C,children:n})},_B=(n,e,t)=>{const[r,i]=A.useState({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!0,initialLoadCompleted:!1}),s=A.useCallback(h=>{i(f=>typeof h=="function"?h(f):{...f,...h})},[]),o=A.useCallback(()=>{i({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!1,initialLoadCompleted:!1})},[]),l=A.useCallback(async(h="all")=>{if(!n)return;const f={clients:()=>xe.from("clients").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),suppliers:()=>xe.from("suppliers").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),workflow_cards:()=>xe.from("workflow_cards").select("*").eq("user_id",n.id).order("order",{ascending:!0}),transacoes:()=>xe.from("transacoes").select("*").eq("user_id",n.id).order("data",{ascending:!1}),service_packages:()=>xe.from("service_packages").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),equipamentos:()=>xe.from("equipamentos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),manutencoes:()=>xe.from("manutencoes").select("*").eq("user_id",n.id).order("data_manutencao",{ascending:!1}),custos_fixos:()=>xe.from("custos_fixos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),servicos_precificados:()=>xe.from("servicos_precificados").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),metas_reserva:()=>xe.from("metas_reserva").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),availability_slots:()=>xe.from("availability_slots").select("*").eq("user_id",n.id),propostas:()=>xe.from("propostas").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1}),contratos:()=>xe.from("contratosgerados").select("*").eq("id_fotografo",n.id).order("data_geracao",{ascending:!1}),wallets:()=>xe.from("wallets").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),feature_flags:()=>xe.from("feature_flags").select("*"),referrals:()=>xe.from("referrals").select("*").eq("referrer_id",n.id),commissions:()=>xe.from("commissions").select("*").eq("referrer_id",n.id)},m=h==="all"?Object.keys(f):[h];try{const v=await Promise.all(m.map(x=>{const C=f[x];return typeof C=="function"?C():(console.warn(`fetchMap[${x}] não é uma função. Pulando.`),Promise.resolve({data:[],error:null}))})),b=v.map((x,C)=>x.error?{key:m[C],error:x.error}:null).filter(Boolean);if(b.length>0){b.forEach(({key:x,error:C})=>bh(C,`carregar ${x}`,t));return}const S={};if(v.forEach((x,C)=>{switch(m[C]){case"clients":S.clients=x.data;break;case"suppliers":S.suppliers=x.data;break;case"workflow_cards":S.workflowCards=x.data;break;case"transacoes":S.financialData={...qp(x.data),transactions:x.data};break;case"service_packages":S.servicePackages=x.data;break;case"equipamentos":S.equipments=x.data;break;case"manutencoes":S.maintenances=x.data;break;case"custos_fixos":S.fixedCosts=x.data;break;case"servicos_precificados":S.pricedServices=x.data;break;case"metas_reserva":S.savingGoals=x.data;break;case"availability_slots":S.availabilitySlots=x.data;break;case"propostas":S.proposals=x.data;break;case"contratos":S.contratos=x.data;break;case"wallets":S.wallets=x.data;break;case"feature_flags":S.featureFlags=x.data.reduce((I,R)=>({...I,[R.nome_funcionalidade]:R.esta_ativa}),{});break;case"referrals":S.affiliateData={...r.affiliateData,referrals:x.data};break;case"commissions":S.affiliateData={...r.affiliateData,commissions:x.data};break}}),S.workflowCards){const x=(S.workflowCards||[]).filter(C=>C.status==="novo-lead"||C.status==="proposta-enviada").reduce((C,P)=>C+(Number(P.value)||0),0);S.financialData={...S.financialData||r.financialData,potentialLeadValue:x}}s(x=>({...x,...S}))}catch(v){bh(v,"refresh data",t)}},[n,t,r.financialData,r.affiliateData]),d=A.useCallback(async h=>{if(h){s({loadingData:!0});try{const[f,m,v,b,S,x,C,P,I,R,M,N,F,B,H,K,le]=await Promise.all([xe.from("clients").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("suppliers").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("workflow_cards").select("*").eq("user_id",h.id).order("order",{ascending:!0}),xe.from("transacoes").select("*").eq("user_id",h.id).order("data",{ascending:!1}),xe.from("service_packages").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("equipamentos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("manutencoes").select("*").eq("user_id",h.id).order("data_manutencao",{ascending:!1}),xe.from("custos_fixos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("servicos_precificados").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("metas_reserva").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("availability_slots").select("*").eq("user_id",h.id),xe.from("propostas").select("*").eq("user_id",h.id).order("updated_at",{ascending:!1}),xe.from("contratosgerados").select("*").eq("id_fotografo",h.id).order("data_geracao",{ascending:!1}),xe.from("wallets").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),xe.from("feature_flags").select("*"),xe.from("referrals").select("*").eq("referrer_id",h.id),xe.from("commissions").select("*").eq("referrer_id",h.id)]),me=[f.error,m.error,v.error,b.error,S.error,x.error,C.error,P.error,I.error,R.error,M.error,N.error,F.error,B.error,H.error,K.error,le.error].filter(Boolean);if(me.length>0){me.forEach(fe=>bh(fe,"carregar dados iniciais",t)),s({loadingData:!1});return}const he=qp(b.data),de=(v.data||[]).filter(fe=>fe.status==="novo-lead"||fe.status==="proposta-enviada").reduce((fe,z)=>fe+(Number(z.value)||0),0);s({clients:f.data,suppliers:m.data||[],workflowCards:v.data,financialData:{...he,transactions:b.data,potentialLeadValue:de},servicePackages:S.data,equipments:x.data,maintenances:C.data,fixedCosts:P.data,pricedServices:I.data,savingGoals:R.data,availabilitySlots:M.data,proposals:N.data,contratos:F.data,wallets:B.data,featureFlags:H.data.reduce((fe,z)=>({...fe,[z.nome_funcionalidade]:z.esta_ativa}),{}),affiliateData:{referrals:K.data,commissions:le.data},loadingData:!1,initialLoadCompleted:!0})}catch(f){bh(f,"carregar dados iniciais",t),s({loadingData:!1})}}},[t]);return{...r,setDataState:s,clearLocalData:o,loadInitialData:d,refreshData:l,setInitialLoadCompleted:h=>s({initialLoadCompleted:h})}},bB=async(n,e,t)=>{if(t.name){const{count:s,error:o}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(o)throw new Error(`Erro ao verificar cliente existente: ${o.message}`);if(s>0)throw new Error(`Um cliente com o nome "${t.name}" já existe.`)}const{data:r,error:i}=await n.from("clients").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(i)throw i;return r},xB=async(n,e,t,r)=>{if(r.name){const{count:o,error:l}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar cliente existente: ${l.message}`);if(o>0)throw new Error(`Um cliente com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("clients").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},SB=async(n,e,t)=>{const{error:r}=await n.from("clients").delete().eq("id",t).eq("user_id",e);if(r)throw r},AB=(n,e,t,r,i,s)=>{const o=A.useCallback(async f=>{if(!n||!e())return i({message:"Usuário não autenticado ou trial expirado"},"adicionar cliente"),null;try{const m=await bB(xe,n.id,f),v=[m,...t];return r(v),s(v),m}catch(m){throw i(m,"adicionar cliente"),m}},[n,e,t,r,i,s]),l=A.useCallback(async(f,m)=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"atualizar cliente");return}try{const v=await xB(xe,n.id,f,m),b=t.map(S=>S.id===f?v:S);r(b),s(b)}catch(v){throw i(v,"atualizar cliente"),v}},[n,e,t,r,i,s]),d=A.useCallback(async f=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"remover cliente");return}try{await SB(xe,n.id,f);const m=t.filter(v=>v.id!==f);r(m),s(m)}catch(m){i(m,"remover cliente")}},[n,e,t,r,i,s]),h=A.useCallback(f=>t.find(m=>m.id===f),[t]);return{addClient:o,updateClient:l,deleteClient:d,getClientById:h}},EB=async(n,e,t)=>{if(t.name){const{count:s,error:o}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(o)throw new Error(`Erro ao verificar fornecedor existente: ${o.message}`);if(s>0)throw new Error(`Um fornecedor com o nome "${t.name}" já existe.`)}const{data:r,error:i}=await n.from("suppliers").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(i)throw i;return r},CB=async(n,e,t,r)=>{if(r.name){const{count:o,error:l}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar fornecedor existente: ${l.message}`);if(o>0)throw new Error(`Um fornecedor com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("suppliers").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},kB=async(n,e,t)=>{const{error:r}=await n.from("suppliers").delete().eq("id",t).eq("user_id",e);if(r)throw r},TB=(n,e,t,r,i)=>{const s=A.useCallback(async h=>{if(!n||!e())return i({message:"Usuário não autenticado ou trial expirado"},"adicionar fornecedor"),null;try{const f=await EB(xe,n.id,h),m=[f,...t];return r(m),f}catch(f){throw i(f,"adicionar fornecedor"),f}},[n,e,t,r,i]),o=A.useCallback(async(h,f)=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"atualizar fornecedor");return}try{const m=await CB(xe,n.id,h,f),v=t.map(b=>b.id===h?m:b);r(v)}catch(m){throw i(m,"atualizar fornecedor"),m}},[n,e,t,r,i]),l=A.useCallback(async h=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"remover fornecedor");return}try{await kB(xe,n.id,h);const f=t.filter(m=>m.id!==h);r(f)}catch(f){i(f,"remover fornecedor")}},[n,e,t,r,i]),d=A.useCallback(h=>t.find(f=>f.id===h),[t]);return{addSupplier:s,updateSupplier:o,deleteSupplier:l,getSupplierById:d}},PB=(n,e)=>({handleNewSubscription:A.useCallback(async(r,i)=>{if(!(!n?.id||!e?.referred_by))try{const{data:s,error:o}=await xe.from("settings").select("user_id").eq("referral_code",e.referred_by).single();if(o||!s){console.warn(`Referrer not found for code ${e.referred_by}. Cannot create referral record.`);return}const l=s.user_id,{data:d,error:h}=await xe.from("referrals").insert({referrer_id:l,referred_id:n.id,referred_email:n.email,referred_name:e.user_name,status:"subscribed",subscription_plan:r,subscription_date:new Date().toISOString()}).select().single();if(h)throw h;console.log(`Referral record created: ${d.id}`);const{data:f,error:m}=await xe.from("affiliate_settings").select("*").eq("id",1).single();if(m||!f||!f.is_active){console.log("Affiliate program is not active or settings not found. No commission will be generated.");return}const{data:v,error:b}=await xe.from("plans").select("price").eq("plan_id",r).single();if(b||!v){console.warn(`Plan details for ${r} not found. Cannot calculate commission.`);return}const S=v.price*f.commission_percentage/100,x=new Date;x.setDate(x.getDate()+f.payout_waiting_days);const{error:C}=await xe.from("commissions").insert({referral_id:d.id,referrer_id:l,amount:S,status:"pending",due_date:x.toISOString()});if(C)throw C;console.log(`Commission of ${S} created for referrer ${l}`)}catch(s){console.error("Error in handleNewSubscription for affiliate program:",s.message)}},[n,e])}),RB=async(n,e,t,r,i,s,o)=>{if(!i){const{data:v,error:b}=await n.from("workflow_cards").select("*").eq("id",t).single();if(b||!v)throw new Error(`Card com ID ${t} não encontrado para atualização, nem no estado local nem no banco de dados.`);i=v}let l=[...i.history||[]];const d={title:"Título",status:"Status",value:"Valor",date:"Data",time:"Hora",description:"Descrição",client_id:"Cliente",service_package_id:"Pacote de Serviço",payment_status:"Status do Pagamento",contract_status:"Status do Contrato"};for(const v in r)if(Object.prototype.hasOwnProperty.call(r,v)&&d[v]&&r[v]!==i[v]){let b=i[v]||"vazio",S=r[v]||"vazio";v==="status"&&(b=s(b),S=s(S)),v==="value"&&(b=`R$ ${Number(b).toFixed(2)}`,S=`R$ ${Number(S).toFixed(2)}`),b!==S&&l.push({action:`${d[v]} alterado de "${b}" para "${S}"`,date:new Date().toISOString(),user:o})}r.archived===!0&&i.archived===!1?l.push({action:"Card arquivado",date:new Date().toISOString(),user:o}):r.archived===!1&&i.archived===!0&&l.push({action:"Card desarquivado",date:new Date().toISOString(),user:o});const h={...r,client_id:r.client_id===""?null:r.client_id,service_package_id:r.service_package_id===""?null:r.service_package_id,history:l,subtasks:r.subtasks!==void 0?(r.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})):(i.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})),comments:r.comments!==void 0?r.comments:i.comments,contract_status:r.contract_status!==void 0?r.contract_status:i.contract_status,archived:r.archived!==void 0?r.archived:i.archived,time:r.time!==void 0?r.time:i.time,installments:r.installments!==void 0?r.installments:r.num_installments!==void 0?r.num_installments:i.installments,num_installments:r.num_installments!==void 0?r.num_installments:r.installments!==void 0?r.installments:i.num_installments,date:r.date!==void 0?r.date:i.date};delete h.createFinancialTransaction,Object.keys(h).forEach(v=>{h[v]===void 0&&delete h[v]});const{data:f,error:m}=await n.from("workflow_cards").update(h).eq("id",t).eq("user_id",e).select().single();if(m)throw m;return f},IB=async(n,e,t)=>{const{error:r}=await n.from("workflow_cards").delete().eq("id",t).eq("user_id",e);if(r)throw r},MB=async(n,e,t,r,i,s,o)=>{const l=Array.isArray(i)?i:[],d={id:Math.random().toString(36).substr(2,9),text:r,date:new Date().toISOString(),user:s,user_photo_url:o},h=[...l,d];let f=await n.from("workflow_cards").select("history").eq("id",t).eq("user_id",e).single();if(f.error)throw f.error;let m=f.data?.history||[];m.push({action:`Comentário adicionado: "${r.substring(0,30)}${r.length>30?"...":""}"`,date:new Date().toISOString(),user:s});const{data:v,error:b}=await n.from("workflow_cards").update({comments:h,history:m}).eq("id",t).eq("user_id",e).select().single();if(b)throw b;return v},DB=async(n,e,t)=>{if(!e)throw new Error("User ID is required to add a service package.");const{count:r,error:i}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(i)throw new Error(`Erro ao verificar pacote: ${i.message}`);if(r>0)throw new Error(`Um pacote com o nome "${t.name}" já existe.`);const s={...t,user_id:e},{data:o,error:l}=await n.from("service_packages").insert([s]).select().single();if(l)throw l;return o},OB=async(n,e,t,r)=>{if(!e)throw new Error("User ID is required to update a service package.");if(r.name){const{count:o,error:l}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar pacote: ${l.message}`);if(o>0)throw new Error(`Um pacote com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("service_packages").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},NB=async(n,e,t)=>{if(!e)throw new Error("User ID is required to delete a service package.");const{error:r}=await n.from("service_packages").delete().eq("id",t).eq("user_id",e);if(r)throw r},LB=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:r,error:i}=await n.from("orcamentos").select("*").eq("user_id",e).eq("client_id",t).order("data_envio",{ascending:!1});if(i)throw console.error("Erro ao buscar orçamentos:",i),i;return r||[]},jB=async(n,e)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:t,error:r}=await n.from("orcamentos").insert([e]).select().single();if(r)throw console.error("Erro ao adicionar orçamento:",r),r;return t},FB=async(n,e,t,r)=>{if(!n)throw new Error("Supabase client is not initialized.");const i={...t,updated_at:new Date().toISOString()},{data:s,error:o}=await n.from("orcamentos").update(i).eq("id",e).eq("user_id",r).select().single();if(o)throw console.error("Erro ao atualizar orçamento:",o),o;return s},$B=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{error:r}=await n.from("orcamentos").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Erro ao excluir orçamento:",r),r;return!0};function hs(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Ml(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function zB(n,e){const t=hs(n);return isNaN(e)?Ml(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const H1=6048e5,BB=864e5,q1=6e4,G1=36e5,RZ=1e3,IZ=43200,MZ=1440;let UB={};function My(){return UB}function am(n,e){const t=My(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=hs(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function sy(n){return am(n,{weekStartsOn:1})}function K1(n){const e=hs(n),t=e.getFullYear(),r=Ml(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=sy(r),s=Ml(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=sy(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function RA(n){const e=hs(n);return e.setHours(0,0,0,0),e}function IA(n){const e=hs(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function VB(n,e){const t=RA(n),r=RA(e),i=+t-IA(t),s=+r-IA(r);return Math.round((i-s)/BB)}function WB(n){const e=K1(n),t=Ml(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),sy(t)}function HB(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function qB(n){if(!HB(n)&&typeof n!="number")return!1;const e=hs(n);return!isNaN(Number(e))}function GB(n){const e=hs(n),t=Ml(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const KB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},YB=(n,e,t)=>{let r;const i=KB[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Tw(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const XB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ZB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QB={date:Tw({formats:XB,defaultWidth:"full"}),time:Tw({formats:ZB,defaultWidth:"full"}),dateTime:Tw({formats:JB,defaultWidth:"full"})},eU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tU=(n,e,t,r)=>eU[n];function Sp(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):o;i=n.formattingValues[l]||n.formattingValues[o]}else{const o=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const nU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lU=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},cU={ordinalNumber:lU,era:Sp({values:nU,defaultWidth:"wide"}),quarter:Sp({values:rU,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Sp({values:iU,defaultWidth:"wide"}),day:Sp({values:sU,defaultWidth:"wide"}),dayPeriod:Sp({values:oU,defaultWidth:"wide",formattingValues:aU,defaultFormattingWidth:"wide"})};function Ap(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(l)?dU(l,m=>m.test(o)):uU(l,m=>m.test(o));let h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function uU(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function dU(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function hU(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(i.length);return{value:o,rest:l}}}const fU=/^(\d+)(th|st|nd|rd)?/i,pU=/\d+/i,mU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gU={any:[/^b/i,/^(a|c)/i]},vU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yU={any:[/1/i,/2/i,/3/i,/4/i]},wU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_U={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},AU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EU={ordinalNumber:hU({matchPattern:fU,parsePattern:pU,valueCallback:n=>parseInt(n,10)}),era:Ap({matchPatterns:mU,defaultMatchWidth:"wide",parsePatterns:gU,defaultParseWidth:"any"}),quarter:Ap({matchPatterns:vU,defaultMatchWidth:"wide",parsePatterns:yU,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ap({matchPatterns:wU,defaultMatchWidth:"wide",parsePatterns:_U,defaultParseWidth:"any"}),day:Ap({matchPatterns:bU,defaultMatchWidth:"wide",parsePatterns:xU,defaultParseWidth:"any"}),dayPeriod:Ap({matchPatterns:SU,defaultMatchWidth:"any",parsePatterns:AU,defaultParseWidth:"any"})},CU={code:"en-US",formatDistance:YB,formatLong:QB,formatRelative:tU,localize:cU,match:EU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kU(n){const e=hs(n);return VB(e,GB(e))+1}function TU(n){const e=hs(n),t=+sy(e)-+WB(e);return Math.round(t/H1)+1}function Y1(n,e){const t=hs(n),r=t.getFullYear(),i=My(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Ml(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=am(o,e),d=Ml(n,0);d.setFullYear(r,0,s),d.setHours(0,0,0,0);const h=am(d,e);return t.getTime()>=l.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function PU(n,e){const t=My(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Y1(n,e),s=Ml(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),am(s,e)}function RU(n,e){const t=hs(n),r=+am(t,e)-+PU(t,e);return Math.round(r/H1)+1}function zt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const bl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return zt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):zt(t+1,2)},d(n,e){return zt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return zt(n.getHours()%12||12,e.length)},H(n,e){return zt(n.getHours(),e.length)},m(n,e){return zt(n.getMinutes(),e.length)},s(n,e){return zt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return zt(i,e.length)}},mh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MA={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return bl.y(n,e)},Y:function(n,e,t,r){const i=Y1(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return zt(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):zt(s,e.length)},R:function(n,e){const t=K1(n);return zt(t,e.length)},u:function(n,e){const t=n.getFullYear();return zt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return zt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return zt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return bl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return zt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=RU(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):zt(i,e.length)},I:function(n,e,t){const r=TU(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):zt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):bl.d(n,e)},D:function(n,e,t){const r=kU(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):zt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return zt(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return zt(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return zt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=mh.noon:r===0?i=mh.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=mh.evening:r>=12?i=mh.afternoon:r>=4?i=mh.morning:i=mh.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return bl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):bl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):bl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):bl.s(n,e)},S:function(n,e){return bl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return OA(r);case"XXXX":case"XX":return Qc(r);case"XXXXX":case"XXX":default:return Qc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return OA(r);case"xxxx":case"xx":return Qc(r);case"xxxxx":case"xxx":default:return Qc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+DA(r,":");case"OOOO":default:return"GMT"+Qc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+DA(r,":");case"zzzz":default:return"GMT"+Qc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return zt(r,e.length)},T:function(n,e,t){const r=n.getTime();return zt(r,e.length)}};function DA(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+zt(s,2)}function OA(n,e){return n%60===0?(n>0?"-":"+")+zt(Math.abs(n)/60,2):Qc(n,e)}function Qc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=zt(Math.trunc(r/60),2),s=zt(r%60,2);return t+i+e+s}const NA=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},X1=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},IU=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return NA(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",NA(r,e)).replace("{{time}}",X1(i,e))},MU={p:X1,P:IU},DU=/^D+$/,OU=/^Y+$/,NU=["D","DD","YY","YYYY"];function LU(n){return DU.test(n)}function jU(n){return OU.test(n)}function FU(n,e,t){const r=$U(n,e,t);if(console.warn(r),NU.includes(n))throw new RangeError(r)}function $U(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,UU=/^'([^]*?)'?$/,VU=/''/g,WU=/[a-zA-Z]/;function su(n,e,t){const r=My(),i=t?.locale??r.locale??CU,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=hs(n);if(!qB(l))throw new RangeError("Invalid time value");let d=e.match(BU).map(f=>{const m=f[0];if(m==="p"||m==="P"){const v=MU[m];return v(f,i.formatLong)}return f}).join("").match(zU).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:HU(f)};if(MA[m])return{isToken:!0,value:f};if(m.match(WU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(d=i.localize.preprocessor(l,d));const h={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return d.map(f=>{if(!f.isToken)return f.value;const m=f.value;(!t?.useAdditionalWeekYearTokens&&jU(m)||!t?.useAdditionalDayOfYearTokens&&LU(m))&&FU(m,e,String(n));const v=MA[m[0]];return v(l,m,i.localize,h)}).join("")}function HU(n){const e=n.match(UU);return e?e[1].replace(VU,"'"):n}function Z1(n,e){const r=YU(n);let i;if(r.date){const d=XU(r.date,2);i=ZU(d.restDateString,d.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,l;if(r.time&&(o=JU(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(l=QU(r.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(s+o),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(s+o+l)}const Av={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},qU=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,GU=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,KU=/^([+-])(\d{2})(?::?(\d{2}))?$/;function YU(n){const e={},t=n.split(Av.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Av.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Av.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=Av.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function XU(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function ZU(n,e){if(e===null)return new Date(NaN);const t=n.match(qU);if(!t)return new Date(NaN);const r=!!t[4],i=Ep(t[1]),s=Ep(t[2])-1,o=Ep(t[3]),l=Ep(t[4]),d=Ep(t[5])-1;if(r)return i3(e,l,d)?e3(e,l,d):new Date(NaN);{const h=new Date(0);return!n3(e,s,o)||!r3(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,o)),h)}}function Ep(n){return n?parseInt(n):1}function JU(n){const e=n.match(GU);if(!e)return NaN;const t=Pw(e[1]),r=Pw(e[2]),i=Pw(e[3]);return s3(t,r,i)?t*G1+r*q1+i*1e3:NaN}function Pw(n){return n&&parseFloat(n.replace(",","."))||0}function QU(n){if(n==="Z")return 0;const e=n.match(KU);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return o3(r,i)?t*(r*G1+i*q1):NaN}function e3(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const t3=[31,null,31,30,31,30,31,31,30,31,30,31];function J1(n){return n%400===0||n%4===0&&n%100!==0}function n3(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(t3[e]||(J1(n)?29:28))}function r3(n,e){return e>=1&&e<=(J1(n)?366:365)}function i3(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function s3(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function o3(n,e){return e>=0&&e<=59}const Q1=async(n,e,t=null)=>{let r=xe.from("equipamentos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_equipamento",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},a3=async(n,e)=>{if(await Q1(n,e.nome_equipamento))throw new Error(`Um equipamento com o nome "${e.nome_equipamento}" já existe.`);const{data:r,error:i}=await xe.from("equipamentos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},l3=async(n,e,t)=>{if(t.nome_equipamento&&await Q1(n,t.nome_equipamento,e))throw new Error(`Um equipamento com o nome "${t.nome_equipamento}" já existe.`);const{data:r,error:i}=await xe.from("equipamentos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},c3=async(n,e)=>{const{error:t}=await xe.from("equipamentos").delete().eq("id",e).eq("user_id",n);if(t)throw t},u3=async(n,e)=>{const{data:t,error:r}=await xe.from("manutencoes").insert([{...e,user_id:n}]).select().single();if(r)throw r;return t},d3=async(n,e,t=null)=>{let r=xe.from("servicos_precificados").select("id",{count:"exact"}).eq("user_id",n).eq("nome_servico",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},h3=async(n,e)=>{if(await d3(n,e.nome_servico))throw new Error(`Um serviço com o nome "${e.nome_servico}" já existe.`);const{data:r,error:i}=await xe.from("servicos_precificados").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},ek=async(n,e,t=null)=>{let r=xe.from("custos_fixos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_custo",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},f3=async(n,e)=>{if(await ek(n,e.nome_custo))throw new Error(`Um custo com o nome "${e.nome_custo}" já existe.`);const{data:r,error:i}=await xe.from("custos_fixos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},p3=async(n,e,t)=>{if(t.nome_custo&&await ek(n,t.nome_custo,e))throw new Error(`Um custo com o nome "${t.nome_custo}" já existe.`);const{data:r,error:i}=await xe.from("custos_fixos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},m3=async(n,e)=>{const{error:t}=await xe.from("custos_fixos").delete().eq("id",e).eq("user_id",n);if(t)throw t},tk=async(n,e,t=null)=>{let r=xe.from("metas_reserva").select("id",{count:"exact"}).eq("user_id",n).eq("nome_meta",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},g3=async(n,e)=>{if(await tk(n,e.nome_meta))throw new Error(`Uma meta com o nome "${e.nome_meta}" já existe.`);const{data:r,error:i}=await xe.from("metas_reserva").insert([{...e,user_id:n,saldo_atual:0}]).select().single();if(i)throw i;return r},v3=async(n,e,t)=>{if(t.nome_meta&&await tk(n,t.nome_meta,e))throw new Error(`Uma meta com o nome "${t.nome_meta}" já existe.`);const{data:r,error:i}=await xe.from("metas_reserva").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},y3=async(n,e)=>{const{error:t}=await xe.from("metas_reserva").delete().eq("id",e).eq("user_id",n);if(t)throw t},nk=(n,e=[])=>({saldo_geral:{id:"saldo_geral",title:"Saldo Geral",type:"stat",icon:"Landmark",color:"text-green-500",onClick:()=>n("financial",{type:"all",period:"all",isDashboardClick:!0}),defaultSize:{w:3,h:2}},pagamentos_receber:{id:"pagamentos_receber",title:"A Receber",type:"stat",icon:"TrendingUp",color:"text-blue-500",onClick:()=>n("financial",{type:"entrada",status:"pendente",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_pagar:{id:"despesas_pagar",title:"Contas a Pagar",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pendente",period:"future",isDashboardClick:!0}),defaultSize:{w:3,h:2}},awaiting_release:{id:"awaiting_release",title:"Aguardando Liberação",type:"stat",icon:"Wallet",color:"text-cyan-500",onClick:()=>n("financial",{status:"AGUARDANDO_LIBERACAO",isDashboardClick:!0}),defaultSize:{w:3,h:2}},imposto_estimado:{id:"imposto_estimado",title:"Imposto Estimado (Mês)",type:"stat",icon:"Receipt",color:"text-yellow-500",onClick:()=>n("precifique"),defaultSize:{w:3,h:2}},pro_labore:{id:"pro_labore",title:"Pró‑labore (Mês)",type:"stat",icon:"DollarSign",color:"text-indigo-500",onClick:()=>n("financial",{type:"saida",category:"Pró-labore",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_mes:{id:"despesas_mes",title:"Despesas (Mês)",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pago",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},lucro_mes:{id:"lucro_mes",title:"Lucro (Mês)",type:"stat",icon:"TrendingUp",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:3,h:2}},depreciacao_mensal:{id:"depreciacao_mensal",title:"Depreciação Mensal",type:"stat",icon:"TrendingDown",color:"text-gray-500",onClick:()=>n("my-setup"),defaultSize:{w:3,h:2}},clientes_ativos:{id:"clientes_ativos",title:"Clientes Ativos",type:"smallStat",icon:"Users",iconColor:"text-purple-500",onClick:()=>n("clients"),defaultSize:{w:2,h:2}},trabalhos_em_andamento:{id:"trabalhos_em_andamento",title:"Em Andamento",type:"smallStat",icon:"Briefcase",iconColor:"text-orange-500",onClick:()=>n("workflow",{status:"em-andamento"}),defaultSize:{w:2,h:2}},trabalhos_agendados:{id:"trabalhos_agendados",title:"Agendados (Mês)",type:"smallStat",icon:"Calendar",iconColor:"text-teal-500",onClick:()=>n("workflow",{status:"agendado"}),defaultSize:{w:2,h:2}},conversao_clientes:{id:"conversao_clientes",title:"Conversão de Clientes",type:"smallStat",icon:"Target",iconColor:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:2,h:2}},grafico_faturamento:{id:"grafico_faturamento",title:"Faturamento Anual",type:"chart",chartType:"bar",icon:"BarChart2",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},status_trabalhos:{id:"status_trabalhos",title:"Status dos Trabalhos",type:"chart",chartType:"pie",icon:"PieChart",color:"text-blue-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},ultimos_lancamentos:{id:"ultimos_lancamentos",title:"Últimos Lançamentos",type:"chart",chartType:"list",icon:"List",color:"text-gray-500",onClick:()=>n("financial"),defaultSize:{w:3,h:5}},lembretes:{id:"lembretes",title:"Lembretes e Tarefas",type:"reminders",icon:"BellRing",color:"text-yellow-500",onClick:()=>n("workflow"),defaultSize:{w:4,h:5}},metas_reserva:{id:"metas_reserva",title:"Resumo das Metas",type:"goals_summary",icon:"Target",color:"text-cyan-500",onClick:()=>n("reserva-inteligente"),defaultSize:{w:4,h:5}},...(e||[]).reduce((t,r)=>{const i=`wallet_${r.id}`;return t[i]={id:i,title:r.name||"Carteira",type:"stat",icon:"Wallet",iconUrl:r.icon_url||void 0,color:"text-blue-500",onClick:()=>n("financial",{walletId:r.id,isDashboardClick:!0}),defaultSize:{w:3,h:2}},t},{}),grafico_despesas_faturamento:{id:"grafico_despesas_faturamento",title:"Faturamento x Despesas",type:"chart",chartType:"bar",icon:"BarChart3",color:"text-purple-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_despesas_lucro:{id:"grafico_despesas_lucro",title:"Lucro x Despesas",type:"chart",chartType:"bar",icon:"BarChartBig",color:"text-orange-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_conversao_leads:{id:"grafico_conversao_leads",title:"Conversão de Leads",type:"chart",chartType:"pie",icon:"PieChart",color:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},grafico_inadimplentes:{id:"grafico_inadimplentes",title:"Clientes Inadimplentes",type:"chart",chartType:"pie",icon:"Users",color:"text-red-500",onClick:()=>n("clients",{status:"inadimplentes"}),defaultSize:{w:3,h:5}}}),Cp=n=>{const t=[...[{i:"saldo_geral",x:0,y:0,w:3,h:2},{i:"pagamentos_receber",x:3,y:0,w:3,h:2},{i:"despesas_pagar",x:6,y:0,w:3,h:2},{i:"awaiting_release",x:9,y:0,w:3,h:2},{i:"grafico_faturamento",x:0,y:2,w:6,h:5},{i:"ultimos_lancamentos",x:6,y:2,w:3,h:5},{i:"status_trabalhos",x:9,y:2,w:3,h:5},{i:"lembretes",x:0,y:7,w:4,h:5},{i:"metas_reserva",x:4,y:7,w:4,h:5},{i:"clientes_ativos",x:8,y:7,w:2,h:2},{i:"trabalhos_em_andamento",x:10,y:7,w:2,h:2},{i:"trabalhos_agendados",x:8,y:9,w:2,h:2},{i:"conversao_clientes",x:10,y:9,w:2,h:2}]];let r=Math.max(...t.map(s=>(s.y||0)+(s.h||0)),0);return Object.keys(n).forEach(s=>{if(s.startsWith("wallet_")&&!t.some(o=>o.i===s)){const o=n[s];t.push({i:s,x:0,y:r,w:o.defaultSize?.w||3,h:o.defaultSize?.h||2}),r+=o.defaultSize?.h||2}}),[{id:"grafico_despesas_faturamento",x:0,y:r,w:6,h:5},{id:"grafico_despesas_lucro",x:6,y:r,w:6,h:5},{id:"grafico_conversao_leads",x:0,y:r+5,w:3,h:5},{id:"grafico_inadimplentes",x:3,y:r+5,w:3,h:5}].forEach(s=>{n[s.id]&&!t.some(o=>o.i===s.id)&&t.push({i:s.id,x:s.x,y:s.y,w:s.w,h:s.h})}),t},w3=(n,e)=>n.map(t=>{const r=e[t.i];let i={...t};return r.type==="stat"?(i.w=5,i.h=2):r.type==="smallStat"?(i.w=2,i.h=2):i.w=Math.min(10,t.w*1.5),i}),_3=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?6:5;break;case"reminders":case"goals_summary":s=6;break;default:s=4}const o={i:r.i,x:0,y:t,w:4,h:s};return t+=s,o})},b3=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?7:5;break;case"reminders":case"goals_summary":s=7;break;default:s=4}const o={i:r.i,x:0,y:t,w:2,h:s};return t+=s,o})},x3=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?8:6;break;case"reminders":case"goals_summary":s=8;break;default:s=5}const o={i:r.i,x:0,y:t,w:2,h:s};return t+=s,o})},S3=()=>{},ma=nk(S3,[]);Cp(ma),w3(Cp(ma),ma),_3(Cp(ma),ma),b3(Cp(ma),ma),x3(Cp(ma),ma);const rk=A.createContext(),yi=()=>{const n=A.useContext(rk);if(!n)throw new Error("useData must be used within a DataProvider");return n},A3=({children:n})=>{const{toast:e}=ds(),{user:t,session:r,settings:i,loadingAuth:s,setSettings:o,logout:l}=Rb(),{clients:d,suppliers:h,workflowCards:f,financialData:m,servicePackages:v,equipments:b,maintenances:S,fixedCosts:x,pricedServices:C,savingGoals:P,pendingReserveAllocations:I,upcomingReminders:R,clientContracts:M,clientOrcamentos:N,availabilitySlots:F,proposals:B,blogPosts:H,featureFlags:K,affiliateData:le,loadingData:me,initialLoadCompleted:he,wallets:de,contratos:fe,setDataState:z,clearLocalData:q,loadInitialData:re,refreshData:U}=_B(t,i,e),[ne,Q]=A.useState(null),[$,ie]=A.useState(0),Z=A.useCallback((ce,J)=>{bh(ce,J,e)},[e]);A.useEffect(()=>{!s&&!t&&q()},[s,t,q]),A.useEffect(()=>{t&&!he&&re(t)},[t,he,re]);const Re=A.useCallback(ce=>{ce?.plan_status?(Q(ce.plan_status),ie(999)):(Q("FREE"),ie(999))},[]);A.useEffect(()=>{Re(i)},[i,Re]);const Ae=A.useCallback(()=>!0,[]),Ie=A.useCallback(ce=>{const J={agendado:"Agendado","novo-lead":"Novo Lead","proposta-enviada":"Proposta Enviada","em-andamento":"Em Andamento",concluido:"Concluído"};return(i?.workflow_columns?.reduce((be,we)=>({...be,[we.id]:we.title}),{})||{})[ce]||J[ce]||ce},[i?.workflow_columns]),{addClient:ve,updateClient:Ne,deleteClient:He,getClientById:Xe}=AB(t,Ae,d,ce=>z(J=>({...J,clients:ce})),Z,ce=>z(J=>({...J,upcomingReminders:ce}))),{addSupplier:at,updateSupplier:Ot,deleteSupplier:mn,getSupplierById:Qt}=TB(t,Ae,h,ce=>z(J=>({...J,suppliers:ce})),Z),{handleNewSubscription:Gr}=PB(t,i),zi=ce=>(ce||[]).filter(J=>J.status==="novo-lead"||J.status==="proposta-enviada").reduce((J,pe)=>J+(Number(pe.value)||0),0),Ln=A.useCallback(ce=>{if(i?.role==="ADMIN")return!0;const J=i?.feature_overrides?.[ce];return typeof J=="boolean"?J:K[ce]??!1},[K,i]),Wl=A.useCallback(ce=>{const J=(de||[]).find(we=>we.id===ce);return J?(m?.transactions||[]).filter(we=>we.wallet_id===ce&&(we.status==="PAGO"||we.status==="AGUARDANDO_LIBERACAO"&&new Date(we.release_date)<=new Date)).reduce((we,ze)=>ze.tipo==="ENTRADA"?we+Number(ze.valor):ze.tipo==="SAIDA"?we-Number(ze.valor):we,Number(J.initial_balance)||0):0},[de,m?.transactions]),Hl=A.useMemo(()=>nk(()=>{},de),[de]),wi=async ce=>{if(!t){Z({message:"Usuário não autenticado."},"deletar proposta");return}const{error:J}=await xe.from("propostas").delete().eq("id",ce).eq("user_id",t.id);J?Z(J,"deletar proposta"):(e({title:"Proposta deletada com sucesso!"}),await U("propostas"))},Tn=async ce=>{if(!t||!Ae()||!i)throw new Error("Pré-condição falhou para adicionar card.");try{const{data:J,error:pe}=await xe.functions.invoke("criar-agendamento",{body:JSON.stringify({cardData:ce,userName:i.user_name||t.email})});if(pe)throw pe;if(J.error)throw new Error(J.error);const{newCard:be}=J;return z(we=>{const ze=[...we.workflowCards,be].sort((bt,jn)=>(bt.order||0)-(jn.order||0));return{...we,workflowCards:ze,financialData:{...we.financialData,potentialLeadValue:zi(ze)}}}),be}catch(J){throw Z(J,"criar agendamento"),J}},ps=async(ce,J)=>{if(!t||!Ae())return null;try{const pe=f.find(we=>we.id===ce);if(!pe)return await U("workflow_cards"),null;const be=await RB(xe,t.id,ce,{...J},pe,Ie,i.user_name||t.email);if(z(we=>{const ze=we.workflowCards.map(bt=>bt.id===ce?be:bt).sort((bt,jn)=>(bt.order||0)-(jn.order||0));return{...we,workflowCards:ze,financialData:{...we.financialData,potentialLeadValue:zi(ze)}}}),J.value!==void 0||J.payment_type!==void 0||J.entry_paid!==void 0){const we=await yB(xe,ce),ze=we.length>0?we[0]:null,bt={descricao:be.title||"Lançamento",valor:be.value||0,data:be.first_installment_date||be.date||new Date().toISOString().split("T")[0],data_vencimento:be.first_installment_date||be.date,status:be.entry_paid?"PAGO":"PENDENTE",tipo:"ENTRADA",metodo_pagamento:be.payment_method||null,trabalho_id:ce,cliente_id:be.client_id};ze?await ql(ze.id,bt):be.value>0&&await Bi(bt),await U("transacoes")}return be}catch(pe){return pe.message?.includes("PGRST204")?(await U("workflow_cards"),null):(Z(pe,"atualizar card"),null)}},Do=async ce=>{if(!(!t||!Ae()))try{await IB(xe,t.id,ce),z(J=>{const pe=J.workflowCards.filter(be=>be.id!==ce);return{...J,workflowCards:pe,financialData:{...J.financialData,potentialLeadValue:zi(pe)}}})}catch(J){Z(J,"remover card")}},Du=async(ce,J)=>{if(!t||!Ae())return null;try{const pe=f.find(we=>we.id===ce),be=await MB(xe,t.id,ce,J,pe?.comments,i.user_name||t.email,t.user_metadata?.avatar_url);return z(we=>({...we,workflowCards:we.workflowCards.map(ze=>ze.id===ce?be:ze)})),be}catch(pe){throw Z(pe,"adicionar comentário"),pe}},Bi=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{let J={...ce};if(ce.wallet_id&&ce.status==="PAGO"){const be=de.find(we=>we.id===ce.wallet_id);if(be&&be.is_gateway&&be.gateway_config&&ce.tipo==="ENTRADA"){const we=be.gateway_config.fee||0,ze=be.gateway_config.release_days||0,bt=parseFloat(ce.valor),jn=bt*we/100,Ct=bt-jn;ze>1?J={...J,original_value:bt,fee_value:jn,valor:Ct,status:"AGUARDANDO_LIBERACAO",release_date:su(zB(new Date(ce.data),ze),"yyyy-MM-dd")}:J={...J,original_value:bt,fee_value:jn,valor:Ct,status:"PAGO",release_date:null}}}const pe=await mB(xe,t.id,J);return z(be=>{const we=[pe,...be.financialData.transactions];return{...be,financialData:{...qp(we),transactions:we,potentialLeadValue:be.financialData.potentialLeadValue}}}),pe}catch(J){throw Z(J,"adicionar transação"),J}},ql=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=m.transactions.find(we=>we.id===ce),be=await gB(xe,t.id,ce,J);if(z(we=>{const ze=we.financialData.transactions.map(bt=>bt.id===ce?be:bt);return{...we,financialData:{...qp(ze),transactions:ze,potentialLeadValue:we.financialData.potentialLeadValue}}}),be.status==="PAGO"&&pe?.status!=="PAGO"&&be.trabalho_id){const we=f.find(ze=>ze.id===be.trabalho_id);if(we?.service_package_id){const ze=C.find(bt=>bt.id===we.service_package_id);if(ze?.reserva_financeira_percentual>0){const bt=be.valor*ze.reserva_financeira_percentual/100;z(jn=>({...jn,pendingReserveAllocations:[...jn.pendingReserveAllocations,{transactionId:be.id,transactionValue:be.valor,serviceName:ze.nome_servico,reserveAmount:bt,pricedServiceId:ze.id}]}))}}}return be}catch(pe){throw Z(pe,"atualizar transação"),pe}},ms=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{await vB(xe,t.id,ce),z(J=>{const pe=J.financialData.transactions.filter(be=>be.id!==ce);return{...J,financialData:{...qp(pe),transactions:pe,potentialLeadValue:J.financialData.potentialLeadValue}}})}catch(J){throw Z(J,"remover transação"),J}},_i=async ce=>{if(!t)throw new Error("Usuário não autenticado");const{data:J,error:pe}=await xe.from("wallets").insert([{...ce,user_id:t.id}]).select().single();if(pe)throw pe;return await U("wallets"),J},Ia=async(ce,J)=>{if(!t)throw new Error("Usuário não autenticado");const{data:pe,error:be}=await xe.from("wallets").update(J).eq("id",ce).eq("user_id",t.id).select().single();if(be)throw be;return await U("wallets"),pe},gs=async ce=>{if(!t)throw new Error("Usuário não autenticado");const{error:J}=await xe.from("wallets").delete().eq("id",ce).eq("user_id",t.id);if(J)throw J;await U("wallets")},vs=async()=>{if(!t)return!1;try{const{error:ce}=await xe.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!1})});if(ce)throw ce;q();const J=t.user_metadata?.full_name||t.email,pe={...kr,user_id:t.id,user_name:J,contact_email:t.email,profile_photo:t.user_metadata?.avatar_url||null,workflow_columns:Hv};return await o(pe,!0),U(),!0}catch(ce){return Z(ce,"excluir dados"),!1}},Gl=async()=>{if(!t)return!1;try{const{error:ce}=await xe.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!0})});if(ce)throw ce;return await xe.auth.signOut(),q(),!0}catch(ce){return Z(ce,"excluir conta"),!1}},Ma=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await DB(xe,t.id,ce);return z(pe=>({...pe,servicePackages:[J,...pe.servicePackages].sort((be,we)=>new Date(we.created_at)-new Date(be.created_at))})),J}catch(J){throw Z(J,"adicionar pacote"),J}},Da=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=await OB(xe,t.id,ce,J);return z(be=>({...be,servicePackages:be.servicePackages.map(we=>we.id===ce?pe:we).sort((we,ze)=>new Date(ze.created_at)-new Date(we.created_at))})),pe}catch(pe){throw Z(pe,"atualizar pacote"),pe}},Kl=async ce=>{if(!(!t||!Ae()))try{await NB(xe,t.id,ce),z(J=>({...J,servicePackages:J.servicePackages.filter(pe=>pe.id!==ce)}))}catch(J){Z(J,"remover pacote")}},Oo=ce=>v.find(J=>J.id===ce),No=ce=>m.transactions.find(J=>J.id===ce),Yl=ce=>f.find(J=>J.id===ce),Xl=async ce=>{if(!t||!Ae())return 0;let J=0;const pe=ce.filter(be=>!f.some(we=>we.google_event_id===be.id)).map(be=>{const we=be.start?.date||(be.start?.dateTime?be.start.dateTime.split("T")[0]:null),ze=be.start?.dateTime?su(Z1(be.start.dateTime),"HH:mm"):null;return we?{title:be.summary||"Evento",description:be.description||"",date:we,time:ze,status:"agendado",google_event_id:be.id,user_id:t.id}:null}).filter(Boolean);if(pe.length>0){const{data:be,error:we}=await xe.from("workflow_cards").insert(pe).select();we?Z(we,"importar eventos"):be&&(J=be.length,z(ze=>({...ze,workflowCards:[...ze.workflowCards,...be].sort((bt,jn)=>(bt.order||0)-(jn.order||0))})))}return J},Zl=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await a3(t.id,ce);return z(pe=>({...pe,equipments:[J,...pe.equipments].sort((be,we)=>new Date(we.created_at)-new Date(be.created_at))})),J}catch(J){throw Z(J,"add equipment"),J}},ys=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=await l3(t.id,ce,J);return z(be=>({...be,equipments:be.equipments.map(we=>we.id===ce?pe:we).sort((we,ze)=>new Date(ze.created_at)-new Date(we.created_at))})),pe}catch(pe){throw Z(pe,"update equipment"),pe}},ws=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{await c3(t.id,ce),z(J=>({...J,equipments:J.equipments.filter(pe=>pe.id!==ce)}))}catch(J){throw Z(J,"delete equipment"),J}},Ou=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await u3(t.id,ce);return z(pe=>({...pe,maintenances:[J,...pe.maintenances].sort((be,we)=>new Date(we.data_manutencao)-new Date(be.data_manutencao))})),J}catch(J){throw Z(J,"add maintenance"),J}},Nu=ce=>S.filter(J=>J.equipamento_id===ce).sort((J,pe)=>new Date(pe.data_manutencao)-new Date(J.data_manutencao)),Lu=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await f3(t.id,ce);return z(pe=>({...pe,fixedCosts:[J,...pe.fixedCosts].sort((be,we)=>new Date(we.created_at)-new Date(be.created_at))})),J}catch(J){throw Z(J,"add fixed cost"),J}},ju=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=await p3(t.id,ce,J);return z(be=>({...be,fixedCosts:be.fixedCosts.map(we=>we.id===ce?pe:we).sort((we,ze)=>new Date(ze.created_at)-new Date(we.created_at))})),pe}catch(pe){throw Z(pe,"update fixed cost"),pe}},Jl=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{await m3(t.id,ce),z(J=>({...J,fixedCosts:J.fixedCosts.filter(pe=>pe.id!==ce)}))}catch(J){throw Z(J,"delete fixed cost"),J}},Ql=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await h3(t.id,ce);return z(pe=>({...pe,pricedServices:[J,...pe.pricedServices].sort((be,we)=>new Date(we.created_at)-new Date(be.created_at))})),J}catch(J){throw Z(J,"add priced service"),J}},Fu=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await g3(t.id,ce);return await U("metas_reserva"),J}catch(J){throw Z(J,"add saving goal"),J}},Lo=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=await v3(t.id,ce,J);return z(be=>({...be,savingGoals:be.savingGoals.map(we=>we.id===ce?pe:we).sort((we,ze)=>new Date(ze.created_at)-new Date(we.created_at))})),pe}catch(pe){throw Z(pe,"update saving goal"),pe}},jo=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{await y3(t.id,ce),z(J=>({...J,savingGoals:J.savingGoals.filter(pe=>pe.id!==ce)}))}catch(J){throw Z(J,"delete saving goal"),J}},Fo=async(ce,J,pe,be)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const we=P.find(Ct=>Ct.id===ce);if(!we)throw new Error("Meta não encontrada.");let ze;if(be==="deposit")ze=Number(we.saldo_atual)+Number(J);else if(be==="withdraw"){if(Number(we.saldo_atual)<Number(J))throw new Error("Saldo insuficiente.");ze=Number(we.saldo_atual)-Number(J)}else throw new Error("Tipo de transação inválido.");const{data:bt,error:jn}=await xe.from("metas_reserva").update({saldo_atual:ze,updated_at:new Date().toISOString()}).eq("id",ce).eq("user_id",t.id).select().single();if(jn)throw jn;return be==="withdraw"&&await Bi({descricao:`Saque da meta: ${we.nome_meta}${pe?` - ${pe}`:""}`,valor:Number(J),tipo:"SAIDA",status:"PAGO",data:new Date().toISOString().split("T")[0],category:"Saque de Meta",user_id:t.id}),z(Ct=>({...Ct,savingGoals:Ct.savingGoals.map(La=>La.id===ce?bt:La).sort((La,rc)=>new Date(rc.created_at)-new Date(La.created_at))})),bt}catch(we){throw Z(we,`Erro ao ${be==="deposit"?"depositar":"sacar"}`),we}},ec=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const{data:pe,error:be}=await xe.functions.invoke("alocarReserva",{body:JSON.stringify({meta_id:ce,valor_alocar:J,user_id:t.id})});if(be)throw be;if(pe.error)throw new Error(pe.error);return z(we=>({...we,savingGoals:we.savingGoals.map(ze=>ze.id===ce?pe:ze).sort((ze,bt)=>new Date(bt.created_at)-new Date(ze.created_at))})),pe}catch(pe){throw Z(pe,"alocar reserva"),pe}},$o=ce=>z(J=>({...J,pendingReserveAllocations:J.pendingReserveAllocations.filter(pe=>pe.transactionId!==ce)})),Oa=A.useCallback(async ce=>{if(!(!t||!ce))try{const{data:J,error:pe}=await xe.from("contratos_clientes").select("*").eq("user_id",t.id).eq("client_id",ce).order("created_at",{ascending:!1});if(pe)throw pe;z(be=>({...be,clientContracts:J||[]}))}catch(J){Z(J,"buscar contratos")}},[t,Z]),Na=async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const{data:J,error:pe}=await xe.from("contratos_clientes").insert([ce]).select().single();if(pe)throw pe;return z(be=>({...be,clientContracts:[J,...be.clientContracts].sort((we,ze)=>new Date(ze.created_at)-new Date(we.created_at))})),J}catch(J){throw Z(J,"add contrato"),J}},tc=async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const{error:pe}=await xe.from("contratos_clientes").delete().eq("id",ce).eq("user_id",t.id);if(pe)throw pe;const{error:be}=await xe.storage.from("contracts").remove([J]);be&&console.warn("Erro ao deletar do storage:",be.message),z(we=>({...we,clientContracts:we.clientContracts.filter(ze=>ze.id!==ce)}))}catch(pe){throw Z(pe,"delete contrato"),pe}},Zh=A.useCallback(async ce=>{if(!(!t||!ce))try{const J=await LB(xe,t.id,ce);z(pe=>({...pe,clientOrcamentos:J}))}catch(J){Z(J,"buscar orçamentos")}},[t,Z]),nc={clients:d,suppliers:h,workflowCards:f,financialData:m,settings:i,loading:me||s,servicePackages:v,user:t,session:r,loadingAuth:s,refreshData:U,planStatus:ne,trialDaysRemaining:$,isUserActive:Ae,equipments:b,maintenances:S,fixedCosts:x,pricedServices:C,savingGoals:P,pendingReserveAllocations:I,upcomingReminders:R,clientContracts:M,clientOrcamentos:N,availabilitySlots:F,proposals:B,blogPosts:H,featureFlags:K,isFeatureEnabled:Ln,affiliateData:le,wallets:de,contratos:fe,getWalletBalance:Wl,logout:l,addClient:ve,updateClient:Ne,deleteClient:He,getClientById:Xe,addSupplier:at,updateSupplier:Ot,deleteSupplier:mn,getSupplierById:Qt,addWorkflowCard:Tn,updateWorkflowCard:ps,deleteWorkflowCard:Do,addComment:Du,getStatusLabel:Ie,importGoogleEventsAsWorkflowCards:Xl,getWorkflowCardById:Yl,addTransaction:Bi,updateTransaction:ql,deleteTransaction:ms,getTransactionById:No,setSettings:o,addServicePackage:Ma,updateServicePackage:Da,deleteServicePackage:Kl,getServicePackageById:Oo,addEquipment:Zl,updateEquipment:ys,deleteEquipment:ws,addMaintenance:Ou,getEquipmentMaintenances:Nu,addFixedCost:Lu,updateFixedCost:ju,deleteFixedCost:Jl,addPricedService:Ql,addSavingGoal:Fu,updateSavingGoal:Lo,deleteSavingGoal:jo,updateSavingGoalBalance:Fo,allocateToSavingGoal:ec,dismissPendingAllocation:$o,refreshClientContracts:Oa,addClientContract:Na,deleteClientContract:tc,refreshClientOrcamentos:Zh,addOrcamento:async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const J=await jB(xe,ce);return z(pe=>({...pe,clientOrcamentos:[J,...pe.clientOrcamentos].sort((be,we)=>new Date(we.data_envio)-new Date(be.data_envio))})),J}catch(J){throw Z(J,"add orçamento"),J}},updateOrcamento:async(ce,J)=>{if(!t||!Ae())throw new Error("Operação não permitida");try{const pe=await FB(xe,ce,J,t.id);return z(be=>({...be,clientOrcamentos:be.clientOrcamentos.map(we=>we.id===ce?pe:we).sort((we,ze)=>new Date(ze.data_envio)-new Date(we.data_envio))})),pe}catch(pe){throw Z(pe,"update orçamento"),pe}},deleteOrcamento:async ce=>{if(!t||!Ae())throw new Error("Operação não permitida");try{await $B(xe,ce,t.id),z(J=>({...J,clientOrcamentos:J.clientOrcamentos.filter(pe=>pe.id!==ce)}))}catch(J){throw Z(J,"delete orçamento"),J}},deleteAllUserData:vs,deleteUserAccount:Gl,deleteProposal:wi,handleNewSubscription:Gr,addWallet:_i,updateWallet:Ia,deleteWallet:gs,initialCardConfigMemo:Hl};return y.jsx(rk.Provider,{value:nc,children:n})},ik=A.createContext(),Gh=()=>{const n=A.useContext(ik);if(!n)throw new Error("useModalState must be used within a ModalStateProvider");return n},E3=({children:n})=>{const[e,t]=A.useState({client:null,financial:null,workflow:null,servicePackage:null,equipment:null,maintenance:null,fixedCost:null,goal:null,goalTransaction:null,withdrawGoal:null,orcamento:null,formCreation:!1,formSuccess:null,bookingSettings:!1,availability:null}),r=A.useCallback((l,d={})=>{t(h=>({...h,[l]:{isOpen:!0,...d}}))},[]),i=A.useCallback(l=>{t(d=>({...d,[l]:null}))},[]),s=Object.values(e).some(l=>l?.isOpen),o={openModals:e,openModal:r,closeModal:i,isAnyModalOpen:s};return y.jsx(ik.Provider,{value:o,children:n})},C3=A.createContext(null),k3=()=>({browser:navigator.userAgent,platform:navigator.platform,screen_resolution:`${window.screen.width}x${window.screen.height}`,window_resolution:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language}),T3=({children:n})=>{const{user:e,settings:t}=Rb(),r=qs(),i=A.useCallback(async s=>{try{const o={type:s.type||"error",route:r.pathname,message:typeof s.message=="object"?JSON.stringify(s.message,null,2):String(s.message),stack_trace:s.stack_trace,user_info:{id:e?.id||null,email:e?.email||null,name:t?.user_name||null},device_info:k3(),user_id:e?.id||null};await xe.functions.invoke("report-error",{body:JSON.stringify(o)})}catch(o){console.error("Failed to report error:",o)}},[e,t,r.pathname]);return A.useEffect(()=>{const s=console.error;console.error=(...d)=>{s.apply(console,d);const h=d.map(m=>{if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return String(m)}}).join(" "),f=d.find(m=>m instanceof Error)?.stack;i({type:"log",message:`CONSOLE_ERROR: ${h}`,stack_trace:f})};const o=d=>{i({message:d.message,stack_trace:d.error?.stack})},l=d=>{i({type:"unhandled_rejection",message:d.reason?.message||"Promise rejection with no message",stack_trace:d.reason?.stack})};return window.addEventListener("error",o),window.addEventListener("unhandledrejection",l),()=>{console.error=s,window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",l)}},[i]),A.useEffect(()=>{const s=window.fetch;return window.fetch=async(...o)=>{const l=await s(...o);if(l.status>=400&&l.status<600){const d=o[0]instanceof Request?o[0].url:o[0];if(d.includes("/report-error"))return l;i({type:"network_error",message:`Fetch failed with status ${l.status} for URL: ${d}`,stack_trace:`Status: ${l.status}
URL: ${d}
Method: ${o[0]?.method||"GET"}`})}return l},()=>{window.fetch=s}},[i]),n},P3=({children:n})=>y.jsx(C3.Provider,{value:null,children:y.jsx(T3,{children:n})}),sk=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Dy=A.createContext({}),Oy=A.createContext(null),Ny=typeof document<"u",Ib=Ny?A.useLayoutEffect:A.useEffect,ok=A.createContext({strict:!1}),Mb=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),R3="framerAppearId",ak="data-"+Mb(R3);function I3(n,e,t,r){const{visualElement:i}=A.useContext(Dy),s=A.useContext(ok),o=A.useContext(Oy),l=A.useContext(sk).reducedMotion,d=A.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const h=d.current;A.useInsertionEffect(()=>{h&&h.update(t,o)});const f=A.useRef(!!(t[ak]&&!window.HandoffComplete));return Ib(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),A.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function xh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function M3(n,e,t){return A.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):xh(t)&&(t.current=r))},[e])}function lm(n){return typeof n=="string"||Array.isArray(n)}function Ly(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Db=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ob=["initial",...Db];function jy(n){return Ly(n.animate)||Ob.some(e=>lm(n[e]))}function lk(n){return!!(jy(n)||n.variants)}function D3(n,e){if(jy(n)){const{initial:t,animate:r}=n;return{initial:t===!1||lm(t)?t:void 0,animate:lm(r)?r:void 0}}return n.inherit!==!1?e:{}}function O3(n){const{initial:e,animate:t}=D3(n,A.useContext(Dy));return A.useMemo(()=>({initial:e,animate:t}),[LA(e),LA(t)])}function LA(n){return Array.isArray(n)?n.join(" "):n}const jA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cm={};for(const n in jA)cm[n]={isEnabled:e=>jA[n].some(t=>!!e[t])};function N3(n){for(const e in n)cm[e]={...cm[e],...n[e]}}const Nb=A.createContext({}),ck=A.createContext({}),L3=Symbol.for("motionComponentSymbol");function j3({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&N3(n);function s(l,d){let h;const f={...A.useContext(sk),...l,layoutId:F3(l)},{isStatic:m}=f,v=O3(l),b=r(l,m);if(!m&&Ny){v.visualElement=I3(i,b,f,e);const S=A.useContext(ck),x=A.useContext(ok).strict;v.visualElement&&(h=v.visualElement.loadFeatures(f,x,n,S))}return A.createElement(Dy.Provider,{value:v},h&&v.visualElement?A.createElement(h,{visualElement:v.visualElement,...f}):null,t(i,l,M3(b,v.visualElement,d),b,m,v.visualElement))}const o=A.forwardRef(s);return o[L3]=i,o}function F3({layoutId:n}){const e=A.useContext(Nb).id;return e&&n!==void 0?e+"-"+n:n}function $3(n){function e(r,i={}){return j3(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const z3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lb(n){return typeof n!="string"||n.includes("-")?!1:!!(z3.indexOf(n)>-1||/[A-Z]/.test(n))}const oy={};function B3(n){Object.assign(oy,n)}const Tm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Au=new Set(Tm);function uk(n,{layout:e,layoutId:t}){return Au.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!oy[n]||n==="opacity")}const vi=n=>!!(n&&n.getVelocity),U3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},V3=Tm.length;function W3(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<V3;o++){const l=Tm[o];if(n[l]!==void 0){const d=U3[l]||l;s+=`${d}(${n[l]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const dk=n=>e=>typeof e=="string"&&e.startsWith(n),hk=dk("--"),k_=dk("var(--"),H3=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,q3=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Dl=(n,e,t)=>Math.min(Math.max(t,n),e),Eu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Gp={...Eu,transform:n=>Dl(0,1,n)},Ev={...Eu,default:1},Kp=n=>Math.round(n*1e5)/1e5,Fy=/(-)?([\d]*\.?[\d])+/g,fk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,G3=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Pm(n){return typeof n=="string"}const Rm=n=>({test:e=>Pm(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Sl=Rm("deg"),Eo=Rm("%"),et=Rm("px"),K3=Rm("vh"),Y3=Rm("vw"),FA={...Eo,parse:n=>Eo.parse(n)/100,transform:n=>Eo.transform(n*100)},$A={...Eu,transform:Math.round},pk={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,radius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,size:et,top:et,right:et,bottom:et,left:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,rotate:Sl,rotateX:Sl,rotateY:Sl,rotateZ:Sl,scale:Ev,scaleX:Ev,scaleY:Ev,scaleZ:Ev,skew:Sl,skewX:Sl,skewY:Sl,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Gp,originX:FA,originY:FA,originZ:et,zIndex:$A,fillOpacity:Gp,strokeOpacity:Gp,numOctaves:$A};function jb(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:l}=n;let d=!1,h=!1,f=!0;for(const m in e){const v=e[m];if(hk(m)){s[m]=v;continue}const b=pk[m],S=q3(v,b);if(Au.has(m)){if(d=!0,o[m]=S,!f)continue;v!==(b.default||0)&&(f=!1)}else m.startsWith("origin")?(h=!0,l[m]=S):i[m]=S}if(e.transform||(d||r?i.transform=W3(n.transform,t,f,r):i.transform&&(i.transform="none")),h){const{originX:m="50%",originY:v="50%",originZ:b=0}=l;i.transformOrigin=`${m} ${v} ${b}`}}const Fb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mk(n,e,t){for(const r in e)!vi(e[r])&&!uk(r,t)&&(n[r]=e[r])}function X3({transformTemplate:n},e,t){return A.useMemo(()=>{const r=Fb();return jb(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function Z3(n,e,t){const r=n.style||{},i={};return mk(i,r,n),Object.assign(i,X3(n,e,t)),n.transformValues?n.transformValues(i):i}function J3(n,e,t){const r={},i=Z3(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const Q3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ay(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Q3.has(n)}let gk=n=>!ay(n);function e4(n){n&&(gk=e=>e.startsWith("on")?!ay(e):n(e))}try{e4(require("@emotion/is-prop-valid").default)}catch{}function t4(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(gk(i)||t===!0&&ay(i)||!e&&!ay(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function zA(n,e,t){return typeof n=="string"?n:et.transform(e+t*n)}function n4(n,e,t){const r=zA(e,n.x,n.width),i=zA(t,n.y,n.height);return`${r} ${i}`}const r4={offset:"stroke-dashoffset",array:"stroke-dasharray"},i4={offset:"strokeDashoffset",array:"strokeDasharray"};function s4(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?r4:i4;n[s.offset]=et.transform(-r);const o=et.transform(e),l=et.transform(t);n[s.array]=`${o} ${l}`}function $b(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...h},f,m,v){if(jb(n,h,f,v),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:S,dimensions:x}=n;b.transform&&(x&&(S.transform=b.transform),delete b.transform),x&&(i!==void 0||s!==void 0||S.transform)&&(S.transformOrigin=n4(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),o!==void 0&&s4(b,o,l,d,!1)}const vk=()=>({...Fb(),attrs:{}}),zb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function o4(n,e,t,r){const i=A.useMemo(()=>{const s=vk();return $b(s,e,{enableHardwareAcceleration:!1},zb(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};mk(s,n.style,n),i.style={...s,...i.style}}return i}function a4(n=!1){return(t,r,i,{latestValues:s},o)=>{const d=(Lb(t)?o4:J3)(r,s,o,t),f={...t4(r,typeof t=="string",n),...d,ref:i},{children:m}=r,v=A.useMemo(()=>vi(m)?m.get():m,[m]);return A.createElement(t,{...f,children:v})}}function yk(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const wk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _k(n,e,t,r){yk(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(wk.has(i)?i:Mb(i),e.attrs[i])}function Bb(n,e){const{style:t}=n,r={};for(const i in t)(vi(t[i])||e.style&&vi(e.style[i])||uk(i,n))&&(r[i]=t[i]);return r}function bk(n,e){const t=Bb(n,e);for(const r in n)if(vi(n[r])||vi(e[r])){const i=Tm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Ub(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function xk(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const ly=n=>Array.isArray(n),l4=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),c4=n=>ly(n)?n[n.length-1]||0:n;function qv(n){const e=vi(n)?n.get():n;return l4(e)?e.toValue():e}function u4({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:d4(r,i,s,n),renderState:e()};return t&&(o.mount=l=>t(r,l,o)),o}const Sk=n=>(e,t)=>{const r=A.useContext(Dy),i=A.useContext(Oy),s=()=>u4(n,e,r,i);return t?s():xk(s)};function d4(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=qv(s[v]);let{initial:o,animate:l}=n;const d=jy(n),h=lk(n);e&&h&&!d&&n.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const m=f?l:o;return m&&typeof m!="boolean"&&!Ly(m)&&(Array.isArray(m)?m:[m]).forEach(b=>{const S=Ub(n,b);if(!S)return;const{transitionEnd:x,transition:C,...P}=S;for(const I in P){let R=P[I];if(Array.isArray(R)){const M=f?R.length-1:0;R=R[M]}R!==null&&(i[I]=R)}for(const I in x)i[I]=x[I]}),i}const En=n=>n;class BA{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function h4(n){let e=new BA,t=new BA,r=0,i=!1,s=!1;const o=new WeakSet,l={schedule:(d,h=!1,f=!1)=>{const m=f&&i,v=m?e:t;return h&&o.add(d),v.add(d)&&m&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),o.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const f=e.order[h];f(d),o.has(f)&&(l.schedule(f),n())}i=!1,s&&(s=!1,l.process(d))}};return l}const Cv=["prepare","read","update","preRender","render","postRender"],f4=40;function p4(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Cv.reduce((m,v)=>(m[v]=h4(()=>t=!0),m),{}),o=m=>s[m].process(i),l=()=>{const m=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,f4),1),i.timestamp=m,i.isProcessing=!0,Cv.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(l))},d=()=>{t=!0,r=!0,i.isProcessing||n(l)};return{schedule:Cv.reduce((m,v)=>{const b=s[v];return m[v]=(S,x=!1,C=!1)=>(t||d(),b.schedule(S,x,C)),m},{}),cancel:m=>Cv.forEach(v=>s[v].cancel(m)),state:i,steps:s}}const{schedule:Jt,cancel:Ta,state:Tr,steps:Rw}=p4(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0),m4={useVisualState:Sk({scrapeMotionValuesFromProps:bk,createRenderState:vk,onMount:(n,e,{renderState:t,latestValues:r})=>{Jt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Jt.render(()=>{$b(t,r,{enableHardwareAcceleration:!1},zb(e.tagName),n.transformTemplate),_k(e,t)})}})},g4={useVisualState:Sk({scrapeMotionValuesFromProps:Bb,createRenderState:Fb})};function v4(n,{forwardMotionProps:e=!1},t,r){return{...Lb(n)?m4:g4,preloadedFeatures:t,useRender:a4(e),createVisualElement:r,Component:n}}function Sa(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Ak=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function $y(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const y4=n=>e=>Ak(e)&&n(e,$y(e));function Aa(n,e,t,r){return Sa(n,e,y4(t),r)}const w4=(n,e)=>t=>e(n(t)),Rl=(...n)=>n.reduce(w4);function Ek(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const UA=Ek("dragHorizontal"),VA=Ek("dragVertical");function Ck(n){let e=!1;if(n==="y")e=VA();else if(n==="x")e=UA();else{const t=UA(),r=VA();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function kk(){const n=Ck(!0);return n?(n(),!1):!0}class zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function WA(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||kk())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&Jt.update(()=>l[r](s,o))};return Aa(n.current,t,i,{passive:!n.getProps()[r]})}class _4 extends zl{mount(){this.unmount=Rl(WA(this.node,!0),WA(this.node,!1))}unmount(){}}class b4 extends zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rl(Sa(this.node.current,"focus",()=>this.onFocus()),Sa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Tk=(n,e)=>e?n===e?!0:Tk(n,e.parentElement):!1;function Iw(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,$y(t))}class x4 extends zl{constructor(){super(...arguments),this.removeStartListeners=En,this.removeEndListeners=En,this.removeAccessibleListeners=En,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Aa(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:m}=this.node.getProps();Jt.update(()=>{!m&&!Tk(this.node.current,l.target)?f&&f(l,d):h&&h(l,d)})},{passive:!(r.onTap||r.onPointerUp)}),o=Aa(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Rl(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Iw("up",(d,h)=>{const{onTap:f}=this.node.getProps();f&&Jt.update(()=>f(d,h))})};this.removeEndListeners(),this.removeEndListeners=Sa(this.node.current,"keyup",o),Iw("down",(l,d)=>{this.startPress(l,d)})},t=Sa(this.node.current,"keydown",e),r=()=>{this.isPressing&&Iw("cancel",(s,o)=>this.cancelPress(s,o))},i=Sa(this.node.current,"blur",r);this.removeAccessibleListeners=Rl(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Jt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!kk()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Jt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Aa(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Sa(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Rl(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const T_=new WeakMap,Mw=new WeakMap,S4=n=>{const e=T_.get(n.target);e&&e(n)},A4=n=>{n.forEach(S4)};function E4({root:n,...e}){const t=n||document;Mw.has(t)||Mw.set(t,{});const r=Mw.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(A4,{root:n,...e})),r[i]}function C4(n,e,t){const r=E4(e);return T_.set(n,t),r.observe(n),()=>{T_.delete(n),r.unobserve(n)}}const k4={some:0,all:1};class T4 extends zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:k4[i]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),v=h?f:m;v&&v(d)};return C4(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(P4(e,t))&&this.startObserver()}unmount(){}}function P4({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const R4={inView:{Feature:T4},tap:{Feature:x4},focus:{Feature:b4},hover:{Feature:_4}};function Pk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function I4(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function M4(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function zy(n,e,t){const r=n.getProps();return Ub(r,e,t!==void 0?t:r.custom,I4(n),M4(n))}let Vb=En;const du=n=>n*1e3,Ea=n=>n/1e3,D4={current:!1},Rk=n=>Array.isArray(n)&&typeof n[0]=="number";function Ik(n){return!!(!n||typeof n=="string"&&Mk[n]||Rk(n)||Array.isArray(n)&&n.every(Ik))}const jp=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Mk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jp([0,.65,.55,1]),circOut:jp([.55,0,1,.45]),backIn:jp([.31,.01,.66,-.59]),backOut:jp([.33,1.53,.69,.99])};function Dk(n){if(n)return Rk(n)?jp(n):Array.isArray(n)?n.map(Dk):Mk[n]}function O4(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:l,times:d}={}){const h={[e]:t};d&&(h.offset=d);const f=Dk(l);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function N4(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const Ok=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,L4=1e-7,j4=12;function F4(n,e,t,r,i){let s,o,l=0;do o=e+(t-e)/2,s=Ok(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>L4&&++l<j4);return o}function Im(n,e,t,r){if(n===e&&t===r)return En;const i=s=>F4(s,0,1,n,t);return s=>s===0||s===1?s:Ok(i(s),e,r)}const $4=Im(.42,0,1,1),z4=Im(0,0,.58,1),Nk=Im(.42,0,.58,1),B4=n=>Array.isArray(n)&&typeof n[0]!="number",Lk=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,jk=n=>e=>1-n(1-e),Wb=n=>1-Math.sin(Math.acos(n)),Fk=jk(Wb),U4=Lk(Wb),$k=Im(.33,1.53,.69,.99),Hb=jk($k),V4=Lk(Hb),W4=n=>(n*=2)<1?.5*Hb(n):.5*(2-Math.pow(2,-10*(n-1))),H4={linear:En,easeIn:$4,easeInOut:Nk,easeOut:z4,circIn:Wb,circInOut:U4,circOut:Fk,backIn:Hb,backInOut:V4,backOut:$k,anticipate:W4},HA=n=>{if(Array.isArray(n)){Vb(n.length===4);const[e,t,r,i]=n;return Im(e,t,r,i)}else if(typeof n=="string")return H4[n];return n},qb=(n,e)=>t=>!!(Pm(t)&&G3.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),zk=(n,e,t)=>r=>{if(!Pm(r))return r;const[i,s,o,l]=r.match(Fy);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},q4=n=>Dl(0,255,n),Dw={...Eu,transform:n=>Math.round(q4(n))},ou={test:qb("rgb","red"),parse:zk("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Dw.transform(n)+", "+Dw.transform(e)+", "+Dw.transform(t)+", "+Kp(Gp.transform(r))+")"};function G4(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const P_={test:qb("#"),parse:G4,transform:ou.transform},Sh={test:qb("hsl","hue"),parse:zk("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Eo.transform(Kp(e))+", "+Eo.transform(Kp(t))+", "+Kp(Gp.transform(r))+")"},zr={test:n=>ou.test(n)||P_.test(n)||Sh.test(n),parse:n=>ou.test(n)?ou.parse(n):Sh.test(n)?Sh.parse(n):P_.parse(n),transform:n=>Pm(n)?n:n.hasOwnProperty("red")?ou.transform(n):Sh.transform(n)},fn=(n,e,t)=>-t*n+t*e+n;function Ow(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function K4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;i=Ow(d,l,n+1/3),s=Ow(d,l,n),o=Ow(d,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Nw=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},Y4=[P_,ou,Sh],X4=n=>Y4.find(e=>e.test(n));function qA(n){const e=X4(n);let t=e.parse(n);return e===Sh&&(t=K4(t)),t}const Bk=(n,e)=>{const t=qA(n),r=qA(e),i={...t};return s=>(i.red=Nw(t.red,r.red,s),i.green=Nw(t.green,r.green,s),i.blue=Nw(t.blue,r.blue,s),i.alpha=fn(t.alpha,r.alpha,s),ou.transform(i))};function Z4(n){var e,t;return isNaN(n)&&Pm(n)&&(((e=n.match(Fy))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(fk))===null||t===void 0?void 0:t.length)||0)>0}const Uk={regex:H3,countKey:"Vars",token:"${v}",parse:En},Vk={regex:fk,countKey:"Colors",token:"${c}",parse:zr.parse},Wk={regex:Fy,countKey:"Numbers",token:"${n}",parse:Eu.parse};function Lw(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function cy(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&Lw(t,Uk),Lw(t,Vk),Lw(t,Wk),t}function Hk(n){return cy(n).values}function qk(n){const{values:e,numColors:t,numVars:r,tokenised:i}=cy(n),s=e.length;return o=>{let l=i;for(let d=0;d<s;d++)d<r?l=l.replace(Uk.token,o[d]):d<r+t?l=l.replace(Vk.token,zr.transform(o[d])):l=l.replace(Wk.token,Kp(o[d]));return l}}const J4=n=>typeof n=="number"?0:n;function Q4(n){const e=Hk(n);return qk(n)(e.map(J4))}const Ol={test:Z4,parse:Hk,createTransformer:qk,getAnimatableNone:Q4},Gk=(n,e)=>t=>`${t>0?e:n}`;function Kk(n,e){return typeof n=="number"?t=>fn(n,e,t):zr.test(n)?Bk(n,e):n.startsWith("var(")?Gk(n,e):Xk(n,e)}const Yk=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>Kk(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},eV=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Kk(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},Xk=(n,e)=>{const t=Ol.createTransformer(e),r=cy(n),i=cy(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Rl(Yk(r.values,i.values),t):Gk(n,e)},um=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},GA=(n,e)=>t=>fn(n,e,t);function tV(n){return typeof n=="number"?GA:typeof n=="string"?zr.test(n)?Bk:Xk:Array.isArray(n)?Yk:typeof n=="object"?eV:GA}function nV(n,e,t){const r=[],i=t||tV(n[0]),s=n.length-1;for(let o=0;o<s;o++){let l=i(n[o],n[o+1]);if(e){const d=Array.isArray(e)?e[o]||En:e;l=Rl(d,l)}r.push(l)}return r}function Zk(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Vb(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=nV(e,r,i),l=o.length,d=h=>{let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const m=um(n[f],n[f+1],h);return o[f](m)};return t?h=>d(Dl(n[0],n[s-1],h)):d}function rV(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=um(0,e,r);n.push(fn(t,1,i))}}function iV(n){const e=[0];return rV(e,n.length-1),e}function sV(n,e){return n.map(t=>t*e)}function oV(n,e){return n.map(()=>e||Nk).splice(0,n.length-1)}function uy({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=B4(r)?r.map(HA):HA(r),s={done:!1,value:e[0]},o=sV(t&&t.length===e.length?t:iV(e),n),l=Zk(o,e,{ease:Array.isArray(i)?i:oV(e,i)});return{calculatedDuration:n,next:d=>(s.value=l(d),s.done=d>=n,s)}}function Jk(n,e){return e?n*(1e3/e):0}const aV=5;function Qk(n,e,t){const r=Math.max(e-aV,0);return Jk(t-n(r),e-r)}const jw=.001,lV=.01,cV=10,uV=.05,dV=1;function hV({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,o=1-e;o=Dl(uV,dV,o),n=Dl(lV,cV,Ea(n)),o<1?(i=h=>{const f=h*o,m=f*n,v=f-t,b=R_(h,o),S=Math.exp(-m);return jw-v/b*S},s=h=>{const m=h*o*n,v=m*t+t,b=Math.pow(o,2)*Math.pow(h,2)*n,S=Math.exp(-m),x=R_(Math.pow(h,2),o);return(-i(h)+jw>0?-1:1)*((v-b)*S)/x}):(i=h=>{const f=Math.exp(-h*n),m=(h-t)*n+1;return-jw+f*m},s=h=>{const f=Math.exp(-h*n),m=(t-h)*(n*n);return f*m});const l=5/n,d=pV(i,s,l);if(n=du(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:n}}}const fV=12;function pV(n,e,t){let r=t;for(let i=1;i<fV;i++)r=r-n(r)/e(r);return r}function R_(n,e){return n*Math.sqrt(1-e*e)}const mV=["duration","bounce"],gV=["stiffness","damping","mass"];function KA(n,e){return e.some(t=>n[t]!==void 0)}function vV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!KA(n,gV)&&KA(n,mV)){const t=hV(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function eT({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:l,damping:d,mass:h,duration:f,velocity:m,isResolvedFromDuration:v}=vV({...r,velocity:-Ea(r.velocity||0)}),b=m||0,S=d/(2*Math.sqrt(l*h)),x=s-i,C=Ea(Math.sqrt(l/h)),P=Math.abs(x)<5;t||(t=P?.01:2),e||(e=P?.005:.5);let I;if(S<1){const R=R_(C,S);I=M=>{const N=Math.exp(-S*C*M);return s-N*((b+S*C*x)/R*Math.sin(R*M)+x*Math.cos(R*M))}}else if(S===1)I=R=>s-Math.exp(-C*R)*(x+(b+C*x)*R);else{const R=C*Math.sqrt(S*S-1);I=M=>{const N=Math.exp(-S*C*M),F=Math.min(R*M,300);return s-N*((b+S*C*x)*Math.sinh(F)+R*x*Math.cosh(F))/R}}return{calculatedDuration:v&&f||null,next:R=>{const M=I(R);if(v)o.done=R>=f;else{let N=b;R!==0&&(S<1?N=Qk(I,R,M):N=0);const F=Math.abs(N)<=t,B=Math.abs(s-M)<=e;o.done=F&&B}return o.value=o.done?s:M,o}}}function YA({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:d,restDelta:h=.5,restSpeed:f}){const m=n[0],v={done:!1,value:m},b=H=>l!==void 0&&H<l||d!==void 0&&H>d,S=H=>l===void 0?d:d===void 0||Math.abs(l-H)<Math.abs(d-H)?l:d;let x=t*e;const C=m+x,P=o===void 0?C:o(C);P!==C&&(x=P-m);const I=H=>-x*Math.exp(-H/r),R=H=>P+I(H),M=H=>{const K=I(H),le=R(H);v.done=Math.abs(K)<=h,v.value=v.done?P:le};let N,F;const B=H=>{b(v.value)&&(N=H,F=eT({keyframes:[v.value,S(v.value)],velocity:Qk(R,H,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return B(0),{calculatedDuration:null,next:H=>{let K=!1;return!F&&N===void 0&&(K=!0,M(H),B(H)),N!==void 0&&H>N?F.next(H-N):(!K&&M(H),v)}}}const yV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Jt.update(e,!0),stop:()=>Ta(e),now:()=>Tr.isProcessing?Tr.timestamp:performance.now()}},XA=2e4;function ZA(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<XA;)e+=t,r=n.next(e);return e>=XA?1/0:e}const wV={decay:YA,inertia:YA,tween:uy,keyframes:uy,spring:eT};function dy({autoplay:n=!0,delay:e=0,driver:t=yV,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:m,...v}){let b=1,S=!1,x,C;const P=()=>{C=new Promise($=>{x=$})};P();let I;const R=wV[i]||uy;let M;R!==uy&&typeof r[0]!="number"&&(M=Zk([0,100],r,{clamp:!1}),r=[0,100]);const N=R({...v,keyframes:r});let F;l==="mirror"&&(F=R({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let B="idle",H=null,K=null,le=null;N.calculatedDuration===null&&s&&(N.calculatedDuration=ZA(N));const{calculatedDuration:me}=N;let he=1/0,de=1/0;me!==null&&(he=me+o,de=he*(s+1)-o);let fe=0;const z=$=>{if(K===null)return;b>0&&(K=Math.min(K,$)),b<0&&(K=Math.min($-de/b,K)),H!==null?fe=H:fe=Math.round($-K)*b;const ie=fe-e*(b>=0?1:-1),Z=b>=0?ie<0:ie>de;fe=Math.max(ie,0),B==="finished"&&H===null&&(fe=de);let Re=fe,Ae=N;if(s){const He=Math.min(fe,de)/he;let Xe=Math.floor(He),at=He%1;!at&&He>=1&&(at=1),at===1&&Xe--,Xe=Math.min(Xe,s+1),!!(Xe%2)&&(l==="reverse"?(at=1-at,o&&(at-=o/he)):l==="mirror"&&(Ae=F)),Re=Dl(0,1,at)*he}const Ie=Z?{done:!1,value:r[0]}:Ae.next(Re);M&&(Ie.value=M(Ie.value));let{done:ve}=Ie;!Z&&me!==null&&(ve=b>=0?fe>=de:fe<=0);const Ne=H===null&&(B==="finished"||B==="running"&&ve);return m&&m(Ie.value),Ne&&U(),Ie},q=()=>{I&&I.stop(),I=void 0},re=()=>{B="idle",q(),x(),P(),K=le=null},U=()=>{B="finished",f&&f(),q(),x()},ne=()=>{if(S)return;I||(I=t(z));const $=I.now();d&&d(),H!==null?K=$-H:(!K||B==="finished")&&(K=$),B==="finished"&&P(),le=K,H=null,B="running",I.start()};n&&ne();const Q={then($,ie){return C.then($,ie)},get time(){return Ea(fe)},set time($){$=du($),fe=$,H!==null||!I||b===0?H=$:K=I.now()-$/b},get duration(){const $=N.calculatedDuration===null?ZA(N):N.calculatedDuration;return Ea($)},get speed(){return b},set speed($){$===b||!I||(b=$,Q.time=Ea(fe))},get state(){return B},play:ne,pause:()=>{B="paused",H=fe},stop:()=>{S=!0,B!=="idle"&&(B="idle",h&&h(),re())},cancel:()=>{le!==null&&z(le),re()},complete:()=>{B="finished"},sample:$=>(K=0,z($))};return Q}function _V(n){let e;return()=>(e===void 0&&(e=n()),e)}const bV=_V(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),kv=10,SV=2e4,AV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!Ik(e.ease);function EV(n,e,{onUpdate:t,onComplete:r,...i}){if(!(bV()&&xV.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,d,h=!1;const f=()=>{d=new Promise(R=>{l=R})};f();let{keyframes:m,duration:v=300,ease:b,times:S}=i;if(AV(e,i)){const R=dy({...i,repeat:0,delay:0});let M={done:!1,value:m[0]};const N=[];let F=0;for(;!M.done&&F<SV;)M=R.sample(F),N.push(M.value),F+=kv;S=void 0,m=N,v=F-kv,b="linear"}const x=O4(n.owner.current,e,m,{...i,duration:v,ease:b,times:S}),C=()=>{h=!1,x.cancel()},P=()=>{h=!0,Jt.update(C),l(),f()};return x.onfinish=()=>{h||(n.set(N4(m,i)),r&&r(),P())},{then(R,M){return d.then(R,M)},attachTimeline(R){return x.timeline=R,x.onfinish=null,En},get time(){return Ea(x.currentTime||0)},set time(R){x.currentTime=du(R)},get speed(){return x.playbackRate},set speed(R){x.playbackRate=R},get duration(){return Ea(v)},play:()=>{o||(x.play(),Ta(C))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:R}=x;if(R){const M=dy({...i,autoplay:!1});n.setWithVelocity(M.sample(R-kv).value,M.sample(R).value,kv)}P()},complete:()=>{h||x.finish()},cancel:P}}function CV({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:En,pause:En,stop:En,then:s=>(s(),Promise.resolve()),cancel:En,complete:En});return e?dy({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const kV={type:"spring",stiffness:500,damping:25,restSpeed:10},TV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),PV={type:"keyframes",duration:.8},RV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},IV=(n,{keyframes:e})=>e.length>2?PV:Au.has(n)?n.startsWith("scale")?TV(e[1]):kV:RV,I_=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ol.test(e)||e==="0")&&!e.startsWith("url(")),MV=new Set(["brightness","contrast","saturate","opacity"]);function DV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Fy)||[];if(!r)return n;const i=t.replace(r,"");let s=MV.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const OV=/([a-z-]*)\(.*?\)/g,M_={...Ol,getAnimatableNone:n=>{const e=n.match(OV);return e?e.map(DV).join(" "):n}},NV={...pk,color:zr,backgroundColor:zr,outlineColor:zr,fill:zr,stroke:zr,borderColor:zr,borderTopColor:zr,borderRightColor:zr,borderBottomColor:zr,borderLeftColor:zr,filter:M_,WebkitFilter:M_},Gb=n=>NV[n];function tT(n,e){let t=Gb(n);return t!==M_&&(t=Ol),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const nT=n=>/^0[^.\s]+$/.test(n);function LV(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||nT(n)}function jV(n,e,t,r){const i=I_(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let l;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?o:s[h-1]),LV(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(l=s[h]);if(i&&d.length&&l)for(let h=0;h<d.length;h++){const f=d[h];s[f]=tT(e,l)}return s}function FV({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}function Kb(n,e){return n[e]||n.default||n}const $V={skipAnimations:!1},Yb=(n,e,t,r={})=>i=>{const s=Kb(r,n)||{},o=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-du(o);const d=jV(e,n,t,s),h=d[0],f=d[d.length-1],m=I_(n,h),v=I_(n,f);let b={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-l,onUpdate:S=>{e.set(S),s.onUpdate&&s.onUpdate(S)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(FV(s)||(b={...b,...IV(n,b)}),b.duration&&(b.duration=du(b.duration)),b.repeatDelay&&(b.repeatDelay=du(b.repeatDelay)),!m||!v||D4.current||s.type===!1||$V.skipAnimations)return CV(b);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const S=EV(e,n,b);if(S)return S}return dy(b)};function hy(n){return!!(vi(n)&&n.add)}const rT=n=>/^\-?\d*\.?\d+$/.test(n);function Xb(n,e){n.indexOf(e)===-1&&n.push(e)}function Zb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Jb{constructor(){this.subscriptions=[]}add(e){return Xb(this.subscriptions,e),()=>Zb(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zV=n=>!isNaN(parseFloat(n));class BV{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Tr;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Jt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Jt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=zV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Jb);const r=this.events[e].add(t);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Jk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nh(n,e){return new BV(n,e)}const iT=n=>e=>e.test(n),UV={test:n=>n==="auto",parse:n=>n},sT=[Eu,et,Eo,Sl,Y3,K3,UV],kp=n=>sT.find(iT(n)),VV=[...sT,zr,Ol],WV=n=>VV.find(iT(n));function HV(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Nh(t))}function qV(n,e){const t=zy(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const l=c4(s[o]);HV(n,o,l)}}function GV(n,e,t){var r,i;const s=Object.keys(e).filter(l=>!n.hasValue(l)),o=s.length;if(o)for(let l=0;l<o;l++){const d=s[l],h=e[d];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),f!=null&&(typeof f=="string"&&(rT(f)||nT(f))?f=parseFloat(f):!WV(f)&&Ol.test(h)&&(f=tT(d,h)),n.addValue(d,Nh(f,{owner:n})),t[d]===void 0&&(t[d]=f),f!==null&&n.setBaseTarget(d,f))}}function KV(n,e){return e?(e[n]||e.default||e).from:void 0}function YV(n,e,t){const r={};for(const i in n){const s=KV(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function XV({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function ZV(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function oT(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...l}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const m in l){const v=n.getValue(m),b=l[m];if(!v||b===void 0||f&&XV(f,m))continue;const S={delay:t,elapsed:0,...Kb(s||{},m)};if(window.HandoffAppearAnimations){const P=n.getProps()[ak];if(P){const I=window.HandoffAppearAnimations(P,m,v,Jt);I!==null&&(S.elapsed=I,S.isHandoff=!0)}}let x=!S.isHandoff&&!ZV(v,b);if(S.type==="spring"&&(v.getVelocity()||S.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(Yb(m,v,b,n.shouldReduceMotion&&Au.has(m)?{type:!1}:S));const C=v.animation;hy(d)&&(d.add(m),C.then(()=>d.remove(m))),h.push(C)}return o&&Promise.all(h).then(()=>{o&&qV(n,o)}),h}function D_(n,e,t={}){const r=zy(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(oT(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return JV(n,e,h+d,f,m,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(t.delay)])}function JV(n,e,t=0,r=0,i=1,s){const o=[],l=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>l-h*r;return Array.from(n.variantChildren).sort(QV).forEach((h,f)=>{h.notify("AnimationStart",e),o.push(D_(h,e,{...s,delay:t+d(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function QV(n,e){return n.sortNodePosition(e)}function eW(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>D_(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=D_(n,e,t);else{const i=typeof e=="function"?zy(n,e,t.custom):e;r=Promise.all(oT(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const tW=[...Db].reverse(),nW=Db.length;function rW(n){return e=>Promise.all(e.map(({animation:t,options:r})=>eW(n,t,r)))}function iW(n){let e=rW(n);const t=oW();let r=!0;const i=(d,h)=>{const f=zy(n,h);if(f){const{transition:m,transitionEnd:v,...b}=f;d={...d,...b,...v}}return d};function s(d){e=d(n)}function o(d,h){const f=n.getProps(),m=n.getVariantContext(!0)||{},v=[],b=new Set;let S={},x=1/0;for(let P=0;P<nW;P++){const I=tW[P],R=t[I],M=f[I]!==void 0?f[I]:m[I],N=lm(M),F=I===h?R.isActive:null;F===!1&&(x=P);let B=M===m[I]&&M!==f[I]&&N;if(B&&r&&n.manuallyAnimateOnMount&&(B=!1),R.protectedKeys={...S},!R.isActive&&F===null||!M&&!R.prevProp||Ly(M)||typeof M=="boolean")continue;let K=sW(R.prevProp,M)||I===h&&R.isActive&&!B&&N||P>x&&N,le=!1;const me=Array.isArray(M)?M:[M];let he=me.reduce(i,{});F===!1&&(he={});const{prevResolvedValues:de={}}=R,fe={...de,...he},z=q=>{K=!0,b.has(q)&&(le=!0,b.delete(q)),R.needsAnimating[q]=!0};for(const q in fe){const re=he[q],U=de[q];if(S.hasOwnProperty(q))continue;let ne=!1;ly(re)&&ly(U)?ne=!Pk(re,U):ne=re!==U,ne?re!==void 0?z(q):b.add(q):re!==void 0&&b.has(q)?z(q):R.protectedKeys[q]=!0}R.prevProp=M,R.prevResolvedValues=he,R.isActive&&(S={...S,...he}),r&&n.blockInitialAnimation&&(K=!1),K&&(!B||le)&&v.push(...me.map(q=>({animation:q,options:{type:I,...d}})))}if(b.size){const P={};b.forEach(I=>{const R=n.getBaseTarget(I);R!==void 0&&(P[I]=R)}),v.push({animation:P})}let C=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function l(d,h,f){var m;if(t[d].isActive===h)return Promise.resolve();(m=n.variantChildren)===null||m===void 0||m.forEach(b=>{var S;return(S=b.animationState)===null||S===void 0?void 0:S.setActive(d,h)}),t[d].isActive=h;const v=o(f,d);for(const b in t)t[b].protectedKeys={};return v}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t}}function sW(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Pk(e,n):!1}function Zc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oW(){return{animate:Zc(!0),whileInView:Zc(),whileHover:Zc(),whileTap:Zc(),whileDrag:Zc(),whileFocus:Zc(),exit:Zc()}}class aW extends zl{constructor(e){super(e),e.animationState||(e.animationState=iW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Ly(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let lW=0;class cW extends zl{constructor(){super(...arguments),this.id=lW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const uW={animation:{Feature:aW},exit:{Feature:cW}},JA=(n,e)=>Math.abs(n-e);function dW(n,e){const t=JA(n.x,e.x),r=JA(n.y,e.y);return Math.sqrt(t**2+r**2)}class aT{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$w(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=dW(m.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:S}=m,{timestamp:x}=Tr;this.history.push({...S,timestamp:x});const{onStart:C,onMove:P}=this.handlers;v||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Fw(v,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=$w(m.type==="pointercancel"?this.lastMoveEventInfo:Fw(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,C),S&&S(m,C)},!Ak(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=$y(e),l=Fw(o,this.transformPagePoint),{point:d}=l,{timestamp:h}=Tr;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,$w(l,this.history)),this.removeListeners=Rl(Aa(this.contextWindow,"pointermove",this.handlePointerMove),Aa(this.contextWindow,"pointerup",this.handlePointerUp),Aa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ta(this.updatePoint)}}function Fw(n,e){return e?{point:e(n.point)}:n}function QA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function $w({point:n},e){return{point:n,delta:QA(n,lT(e)),offset:QA(n,hW(e)),velocity:fW(e,.1)}}function hW(n){return n[0]}function lT(n){return n[n.length-1]}function fW(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=lT(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>du(e)));)t--;if(!r)return{x:0,y:0};const s=Ea(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fi(n){return n.max-n.min}function O_(n,e=0,t=.01){return Math.abs(n-e)<=t}function eE(n,e,t,r=.5){n.origin=r,n.originPoint=fn(e.min,e.max,n.origin),n.scale=Fi(t)/Fi(e),(O_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=fn(t.min,t.max,n.origin)-n.originPoint,(O_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Yp(n,e,t,r){eE(n.x,e.x,t.x,r?r.originX:void 0),eE(n.y,e.y,t.y,r?r.originY:void 0)}function tE(n,e,t){n.min=t.min+e.min,n.max=n.min+Fi(e)}function pW(n,e,t){tE(n.x,e.x,t.x),tE(n.y,e.y,t.y)}function nE(n,e,t){n.min=e.min-t.min,n.max=n.min+Fi(e)}function Xp(n,e,t){nE(n.x,e.x,t.x),nE(n.y,e.y,t.y)}function mW(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?fn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?fn(t,n,r.max):Math.min(n,t)),n}function rE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function gW(n,{top:e,left:t,bottom:r,right:i}){return{x:rE(n.x,t,i),y:rE(n.y,e,r)}}function iE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function vW(n,e){return{x:iE(n.x,e.x),y:iE(n.y,e.y)}}function yW(n,e){let t=.5;const r=Fi(n),i=Fi(e);return i>r?t=um(e.min,e.max-r,n.min):r>i&&(t=um(n.min,n.max-i,e.min)),Dl(0,1,t)}function wW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const N_=.35;function _W(n=N_){return n===!1?n=0:n===!0&&(n=N_),{x:sE(n,"left","right"),y:sE(n,"top","bottom")}}function sE(n,e,t){return{min:oE(n,e),max:oE(n,t)}}function oE(n,e){return typeof n=="number"?n:n[e]||0}const aE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ah=()=>({x:aE(),y:aE()}),lE=()=>({min:0,max:0}),Dn=()=>({x:lE(),y:lE()});function as(n){return[n("x"),n("y")]}function cT({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function bW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function xW(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function zw(n){return n===void 0||n===1}function L_({scale:n,scaleX:e,scaleY:t}){return!zw(n)||!zw(e)||!zw(t)}function eu(n){return L_(n)||uT(n)||n.z||n.rotate||n.rotateX||n.rotateY}function uT(n){return cE(n.x)||cE(n.y)}function cE(n){return n&&n!=="0%"}function fy(n,e,t){const r=n-t,i=e*r;return t+i}function uE(n,e,t,r,i){return i!==void 0&&(n=fy(n,i,r)),fy(n,t,r)+e}function j_(n,e=0,t=1,r,i){n.min=uE(n.min,e,t,r,i),n.max=uE(n.max,e,t,r,i)}function dT(n,{x:e,y:t}){j_(n.x,e.translate,e.scale,e.originPoint),j_(n.y,t.translate,t.scale,t.originPoint)}function SW(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=t[l],o=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Eh(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,dT(n,o)),r&&eu(s.latestValues)&&Eh(n,s.latestValues))}e.x=dE(e.x),e.y=dE(e.y)}function dE(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function El(n,e){n.min=n.min+e,n.max=n.max+e}function hE(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=fn(n.min,n.max,s);j_(n,e[t],e[r],o,e.scale)}const AW=["x","scaleX","originX"],EW=["y","scaleY","originY"];function Eh(n,e){hE(n.x,e,AW),hE(n.y,e,EW)}function hT(n,e){return cT(xW(n.getBoundingClientRect(),e))}function CW(n,e,t){const r=hT(n,t),{scroll:i}=e;return i&&(El(r.x,i.offset.x),El(r.y,i.offset.y)),r}const fT=({current:n})=>n?n.ownerDocument.defaultView:null,kW=new WeakMap;class TW{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor($y(f,"page").point)},s=(f,m)=>{const{drag:v,dragPropagation:b,onDragStart:S}=this.getProps();if(v&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ck(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),as(C=>{let P=this.getAxisMotionValue(C).get()||0;if(Eo.test(P)){const{projection:I}=this.visualElement;if(I&&I.layout){const R=I.layout.layoutBox[C];R&&(P=Fi(R)*(parseFloat(P)/100))}}this.originPoint[C]=P}),S&&Jt.update(()=>S(f,m),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(f,m)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:S,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:C}=m;if(b&&this.currentDirection===null){this.currentDirection=PW(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),x&&x(f,m)},l=(f,m)=>this.stop(f,m),d=()=>as(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new aT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:fT(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Jt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Tv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=mW(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&xh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=gW(i.layoutBox,t):this.constraints=!1,this.elastic=_W(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&as(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=wW(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!xh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=CW(r,i.root,this.visualElement.getTransformPagePoint());let o=vW(i.layout.layoutBox,s);if(t){const l=t(bW(o));this.hasMutatedConstraints=!!l,l&&(o=cT(l))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=as(f=>{if(!Tv(f,t,this.currentDirection))return;let m=d&&d[f]||{};o&&(m={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?e[f]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Yb(e,r,0,t))}stopAnimation(){as(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){as(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){as(t=>{const{drag:r}=this.getProps();if(!Tv(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[t];s.set(e[t]-fn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!xh(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};as(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();i[o]=yW({min:d,max:d},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),as(o=>{if(!Tv(o,e,null))return;const l=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];l.set(fn(d,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;kW.set(this.visualElement,this);const e=this.visualElement.current,t=Aa(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();xh(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Sa(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(as(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=d[f].translate,m.set(m.get()+d[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=N_,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Tv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function PW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class RW extends zl{constructor(e){super(e),this.removeGroupControls=En,this.removeListeners=En,this.controls=new TW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}unmount(){this.removeGroupControls(),this.removeListeners()}}const fE=n=>(e,t)=>{n&&Jt.update(()=>n(e,t))};class IW extends zl{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(e){this.session=new aT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:fE(e),onStart:fE(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Jt.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Aa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function MW(){const n=A.useContext(Oy);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=A.useId();return A.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Gv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pE(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Tp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(et.test(n))n=parseFloat(n);else return n;const t=pE(n,e.target.x),r=pE(n,e.target.y);return`${t}% ${r}%`}},DW={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ol.parse(n);if(i.length>5)return r;const s=Ol.createTransformer(n),o=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;i[0+o]/=l,i[1+o]/=d;const h=fn(l,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),s(i)}};class OW extends lt.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;B3(NW),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Jt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pT(n){const[e,t]=MW(),r=A.useContext(Nb);return lt.createElement(OW,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(ck),isPresent:e,safeToRemove:t})}const NW={borderRadius:{...Tp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tp,borderTopRightRadius:Tp,borderBottomLeftRadius:Tp,borderBottomRightRadius:Tp,boxShadow:DW},mT=["TopLeft","TopRight","BottomLeft","BottomRight"],LW=mT.length,mE=n=>typeof n=="string"?parseFloat(n):n,gE=n=>typeof n=="number"||et.test(n);function jW(n,e,t,r,i,s){i?(n.opacity=fn(0,t.opacity!==void 0?t.opacity:1,FW(r)),n.opacityExit=fn(e.opacity!==void 0?e.opacity:1,0,$W(r))):s&&(n.opacity=fn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<LW;o++){const l=`border${mT[o]}Radius`;let d=vE(e,l),h=vE(t,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||gE(d)===gE(h)?(n[l]=Math.max(fn(mE(d),mE(h),r),0),(Eo.test(h)||Eo.test(d))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=fn(e.rotate||0,t.rotate||0,r))}function vE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const FW=gT(0,.5,Fk),$W=gT(.5,.95,En);function gT(n,e,t){return r=>r<n?0:r>e?1:t(um(n,e,r))}function yE(n,e){n.min=e.min,n.max=e.max}function ss(n,e){yE(n.x,e.x),yE(n.y,e.y)}function wE(n,e,t,r,i){return n-=e,n=fy(n,1/t,r),i!==void 0&&(n=fy(n,1/i,r)),n}function zW(n,e=0,t=1,r=.5,i,s=n,o=n){if(Eo.test(e)&&(e=parseFloat(e),e=fn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=fn(s.min,s.max,r);n===s&&(l-=e),n.min=wE(n.min,e,t,l,i),n.max=wE(n.max,e,t,l,i)}function _E(n,e,[t,r,i],s,o){zW(n,e[t],e[r],e[i],e.scale,s,o)}const BW=["x","scaleX","originX"],UW=["y","scaleY","originY"];function bE(n,e,t,r){_E(n.x,e,BW,t?t.x:void 0,r?r.x:void 0),_E(n.y,e,UW,t?t.y:void 0,r?r.y:void 0)}function xE(n){return n.translate===0&&n.scale===1}function vT(n){return xE(n.x)&&xE(n.y)}function VW(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function yT(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function SE(n){return Fi(n.x)/Fi(n.y)}class WW{constructor(){this.members=[]}add(e){Xb(this.members,e),e.scheduleRender()}remove(e){if(Zb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function AE(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:f}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const HW=(n,e)=>n.depth-e.depth;class qW{constructor(){this.children=[],this.isDirty=!1}add(e){Xb(this.children,e),this.isDirty=!0}remove(e){Zb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HW),this.isDirty=!1,this.children.forEach(e)}}function GW(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Ta(r),n(s-e))};return Jt.read(r,!0),()=>Ta(r)}function KW(n){window.MotionDebug&&window.MotionDebug.record(n)}function YW(n){return n instanceof SVGElement&&n.tagName!=="svg"}function XW(n,e,t){const r=vi(n)?n:Nh(n);return r.start(Yb("",r,e,t)),r.animation}const EE=["","X","Y","Z"],ZW={visibility:"hidden"},CE=1e3;let JW=0;const tu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function wT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=JW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tu.totalNodes=tu.resolvedTargetDeltas=tu.recalculatedProjection=0,this.nodes.forEach(t5),this.nodes.forEach(o5),this.nodes.forEach(a5),this.nodes.forEach(n5),KW(tu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new qW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jb),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=YW(o),this.instance=o;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||d)&&(this.isLayoutDirty=!0),n){let m;const v=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=GW(v,250),Gv.hasAnimatedSinceResize&&(Gv.hasAnimatedSinceResize=!1,this.nodes.forEach(TE))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||h5,{onLayoutAnimationStart:C,onLayoutAnimationComplete:P}=f.getProps(),I=!this.targetLayout||!yT(this.targetLayout,S)||b,R=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||v&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,R);const M={...Kb(x,"layout"),onPlay:C,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else v||TE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ta(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(l5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kE);return}this.isUpdating||this.nodes.forEach(i5),this.isUpdating=!1,this.nodes.forEach(s5),this.nodes.forEach(QW),this.nodes.forEach(e5),this.clearAllSnapshots();const l=performance.now();Tr.delta=Dl(0,1e3/60,l-Tr.timestamp),Tr.timestamp=l,Tr.isProcessing=!0,Rw.update.process(Tr),Rw.preRender.process(Tr),Rw.render.process(Tr),Tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(r5),this.sharedNodes.forEach(c5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!vT(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&(l||eu(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),f5(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Dn();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(El(l.x,d.offset.x),El(l.y,d.offset.y)),l}removeElementScroll(o){const l=Dn();ss(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;if(h!==this.root&&f&&m.layoutScroll){if(f.isRoot){ss(l,o);const{scroll:v}=this.root;v&&(El(l.x,-v.offset.x),El(l.y,-v.offset.y))}El(l.x,f.offset.x),El(l.y,f.offset.y)}}return l}applyTransform(o,l=!1){const d=Dn();ss(d,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Eh(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),eu(f.latestValues)&&Eh(d,f.latestValues)}return eu(this.latestValues)&&Eh(d,this.latestValues),d}removeTransform(o){const l=Dn();ss(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!eu(h.latestValues))continue;L_(h.latestValues)&&h.updateSnapshot();const f=Dn(),m=h.measurePageBox();ss(f,m),bE(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return eu(this.latestValues)&&bE(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=Tr.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Xp(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ss(this.target,this.layout.layoutBox),dT(this.target,this.targetDelta)):ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Xp(this.relativeTargetOrigin,this.target,b.target),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||L_(this.parent.latestValues)||uT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Tr.timestamp&&(h=!1),h)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;ss(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;SW(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:S}=l;if(!S){this.projectionTransform&&(this.projectionDelta=Ah(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ah(),this.projectionDeltaWithTransform=Ah());const x=this.projectionTransform;Yp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.projectionTransform=AE(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),tu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},m=Ah();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Dn(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,x=b!==S,C=this.getStack(),P=!C||C.members.length<=1,I=!!(x&&!P&&this.options.crossfade===!0&&!this.path.some(d5));this.animationProgress=0;let R;this.mixTargetDelta=M=>{const N=M/1e3;PE(m.x,o.x,N),PE(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xp(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u5(this.relativeTarget,this.relativeTargetOrigin,v,N),R&&VW(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Dn()),ss(R,this.relativeTarget)),x&&(this.animationValues=f,jW(f,h,this.latestValues,N,I,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ta(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Gv.hasAnimatedSinceResize=!0,this.currentAnimation=XW(0,CE,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=o;if(!(!l||!d||!h)){if(this!==o&&this.layout&&h&&_T(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Dn();const m=Fi(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+m;const v=Fi(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+v}ss(l,d),Eh(l,f),Yp(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WW),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const h={};for(let f=0;f<EE.length;f++){const m="rotate"+EE[f];d[m]&&(h[m]=d[m],o.setStaticValue(m,0))}o.render();for(const f in h)o.setStaticValue(f,h[f]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZW;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=qv(o?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=qv(o?.pointerEvents)||""),this.hasProjected&&!eu(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const v=m.animationValues||m.latestValues;this.applyTransformsToTarget(),h.transform=AE(this.projectionDeltaWithTransform,this.treeScale,v),f&&(h.transform=f(v,h.transform));const{x:b,y:S}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,m.animationValues?h.opacity=m===this?(d=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in oy){if(v[x]===void 0)continue;const{correct:C,applyTo:P}=oy[x],I=h.transform==="none"?v[x]:C(v[x],m);if(P){const R=P.length;for(let M=0;M<R;M++)h[P[M]]=I}else h[x]=I}return this.options.layoutId&&(h.pointerEvents=m===this?qv(o?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(kE),this.root.sharedNodes.clear()}}}function QW(n){n.updateLayout()}function e5(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?as(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],b=Fi(v);v.min=r[m].min,v.max=v.min+b}):_T(s,t.layoutBox,r)&&as(m=>{const v=o?t.measuredBox[m]:t.layoutBox[m],b=Fi(r[m]);v.max=v.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+b)});const l=Ah();Yp(l,r,t.layoutBox);const d=Ah();o?Yp(d,n.applyTransform(i,!0),t.measuredBox):Yp(d,r,t.layoutBox);const h=!vT(l);let f=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:b}=m;if(v&&b){const S=Dn();Xp(S,t.layoutBox,v.layoutBox);const x=Dn();Xp(x,r,b.layoutBox),yT(S,x)||(f=!0),m.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=S,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function t5(n){tu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function n5(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function r5(n){n.clearSnapshot()}function kE(n){n.clearMeasurements()}function i5(n){n.isLayoutDirty=!1}function s5(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function TE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function o5(n){n.resolveTargetDelta()}function a5(n){n.calcProjection()}function l5(n){n.resetRotation()}function c5(n){n.removeLeadSnapshot()}function PE(n,e,t){n.translate=fn(e.translate,0,t),n.scale=fn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function RE(n,e,t,r){n.min=fn(e.min,t.min,r),n.max=fn(e.max,t.max,r)}function u5(n,e,t,r){RE(n.x,e.x,t.x,r),RE(n.y,e.y,t.y,r)}function d5(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const h5={duration:.45,ease:[.4,0,.1,1]},IE=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ME=IE("applewebkit/")&&!IE("chrome/")?Math.round:En;function DE(n){n.min=ME(n.min),n.max=ME(n.max)}function f5(n){DE(n.x),DE(n.y)}function _T(n,e,t){return n==="position"||n==="preserve-aspect"&&!O_(SE(e),SE(t),.2)}const p5=wT({attachResizeListener:(n,e)=>Sa(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bw={current:void 0},bT=wT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Bw.current){const n=new p5({});n.mount(window),n.setOptions({layoutScroll:!0}),Bw.current=n}return Bw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),m5={pan:{Feature:IW},drag:{Feature:RW,ProjectionNode:bT,MeasureLayout:pT}},g5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function v5(n){const e=g5.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function F_(n,e,t=1){const[r,i]=v5(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return rT(o)?parseFloat(o):o}else return k_(i)?F_(i,e,t+1):i}function y5(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!k_(s))return;const o=F_(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!k_(s))continue;const o=F_(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const w5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xT=n=>w5.has(n),_5=n=>Object.keys(n).some(xT),OE=n=>n===Eu||n===et,NE=(n,e)=>parseFloat(n.split(", ")[e]),LE=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return NE(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?NE(s[1],n):0}},b5=new Set(["x","y","z"]),x5=Tm.filter(n=>!b5.has(n));function S5(n){const e=[];return x5.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Lh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:LE(4,13),y:LE(5,14)};Lh.translateX=Lh.x;Lh.translateY=Lh.y;const A5=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,l={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{l[h]=Lh[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(l[h]),n[h]=Lh[h](d,s)}),n},E5=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(xT);let s=[],o=!1;const l=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let f=t[d],m=kp(f);const v=e[d];let b;if(ly(v)){const S=v.length,x=v[0]===null?1:0;f=v[x],m=kp(f);for(let C=x;C<S&&v[C]!==null;C++)b?Vb(kp(v[C])===b):b=kp(v[C])}else b=kp(v);if(m!==b)if(OE(m)&&OE(b)){const S=h.get();typeof S=="string"&&h.set(parseFloat(S)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&b===et&&(e[d]=v.map(parseFloat))}else m?.transform&&b?.transform&&(f===0||v===0)?f===0?h.set(b.transform(f)):e[d]=m.transform(v):(o||(s=S5(n),o=!0),l.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,h=A5(e,n,l);return s.length&&s.forEach(([f,m])=>{n.getValue(f).set(m)}),n.render(),Ny&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function C5(n,e,t,r){return _5(e)?E5(n,e,t,r):{target:e,transitionEnd:r}}const k5=(n,e,t,r)=>{const i=y5(n,e,r);return e=i.target,r=i.transitionEnd,C5(n,e,t,r)},$_={current:null},ST={current:!1};function T5(){if(ST.current=!0,!!Ny)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>$_.current=n.matches;n.addListener(e),e()}else $_.current=!1}function P5(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(vi(s))n.addValue(i,s),hy(r)&&r.add(i);else if(vi(o))n.addValue(i,Nh(s,{owner:n})),hy(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const l=n.getValue(i);!l.hasAnimated&&l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Nh(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const jE=new WeakMap,AT=Object.keys(cm),R5=AT.length,FE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],I5=Ob.length;class M5{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Jt.render(this.render,!1,!0);const{latestValues:l,renderState:d}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=jy(t),this.isVariantNode=lk(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const m in f){const v=f[m];l[m]!==void 0&&vi(v)&&(v.set(l[m],!1),hy(h)&&h.add(m))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,jE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),ST.current||T5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jE.delete(this.current),this.projection&&this.projection.unmount(),Ta(this.notifyUpdate),Ta(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Au.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Jt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,l;for(let d=0;d<R5;d++){const h=AT[d],{isEnabled:f,Feature:m,ProjectionNode:v,MeasureLayout:b}=cm[h];v&&(o=v),f(t)&&(!this.features[h]&&m&&(this.features[h]=new m(this)),b&&(l=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:f,dragConstraints:m,layoutScroll:v,layoutRoot:b}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!f||m&&xh(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:b})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<FE.length;r++){const i=FE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=P5(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<I5;r++){const i=Ob[r],s=this.props[i];(lm(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Nh(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Ub(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vi(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Jb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class ET extends M5{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=YV(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){GV(this,r,o);const l=k5(this,r,o,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function D5(n){return window.getComputedStyle(n)}class O5 extends ET{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Au.has(t)){const r=Gb(t);return r&&r.default||0}else{const r=D5(e),i=(hk(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return hT(e,t)}build(e,t,r,i){jb(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Bb(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){yk(e,t,r,i)}}class N5 extends ET{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Au.has(t)){const r=Gb(t);return r&&r.default||0}return t=wk.has(t)?t:Mb(t),e.getAttribute(t)}measureInstanceViewportBox(){return Dn()}scrapeMotionValuesFromProps(e,t){return bk(e,t)}build(e,t,r,i){$b(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){_k(e,t,r,i)}mount(e){this.isSVGTag=zb(e.tagName),super.mount(e)}}const L5=(n,e)=>Lb(n)?new N5(e,{enableHardwareAcceleration:!1}):new O5(e,{enableHardwareAcceleration:!0}),j5={layout:{ProjectionNode:bT,MeasureLayout:pT}},F5={...uW,...R4,...m5,...j5},sr=$3((n,e)=>v4(n,e,F5,L5));function CT(){const n=A.useRef(!1);return Ib(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function $5(){const n=CT(),[e,t]=A.useState(0),r=A.useCallback(()=>{n.current&&t(e+1)},[e]);return[A.useCallback(()=>Jt.postRender(r),[r]),e]}class z5 extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B5({children:n,isPresent:e}){const t=A.useId(),r=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:d}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),A.createElement(z5,{isPresent:e,childRef:r,sizeRef:i},A.cloneElement(n,{ref:r}))}const Uw=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=xk(U5),d=A.useId(),h=A.useMemo(()=>({id:d,initial:e,isPresent:t,custom:i,onExitComplete:f=>{l.set(f,!0);for(const m of l.values())if(!m)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),s?void 0:[t]);return A.useMemo(()=>{l.forEach((f,m)=>l.set(m,!1))},[t]),A.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),o==="popLayout"&&(n=A.createElement(B5,{isPresent:t},n)),A.createElement(Oy.Provider,{value:h},n)};function U5(){return new Map}function V5(n){return A.useEffect(()=>()=>n(),[])}const nu=n=>n.key||"";function W5(n,e){n.forEach(t=>{const r=nu(t);e.set(r,t)})}function H5(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const Vs=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const l=A.useContext(Nb).forceRender||$5()[0],d=CT(),h=H5(n);let f=h;const m=A.useRef(new Map).current,v=A.useRef(f),b=A.useRef(new Map).current,S=A.useRef(!0);if(Ib(()=>{S.current=!1,W5(h,b),v.current=f}),V5(()=>{S.current=!0,b.clear(),m.clear()}),S.current)return A.createElement(A.Fragment,null,f.map(I=>A.createElement(Uw,{key:nu(I),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},I)));f=[...f];const x=v.current.map(nu),C=h.map(nu),P=x.length;for(let I=0;I<P;I++){const R=x[I];C.indexOf(R)===-1&&!m.has(R)&&m.set(R,void 0)}return o==="wait"&&m.size&&(f=[]),m.forEach((I,R)=>{if(C.indexOf(R)!==-1)return;const M=b.get(R);if(!M)return;const N=x.indexOf(R);let F=I;if(!F){const B=()=>{m.delete(R);const H=Array.from(b.keys()).filter(K=>!C.includes(K));if(H.forEach(K=>b.delete(K)),v.current=h.filter(K=>{const le=nu(K);return le===R||H.includes(le)}),!m.size){if(d.current===!1)return;l(),r&&r()}};F=A.createElement(Uw,{key:nu(M),isPresent:!1,onExitComplete:B,custom:e,presenceAffectsLayout:s,mode:o},M),m.set(R,F)}f.splice(N,0,F)}),f=f.map(I=>{const R=I.key;return m.has(R)?I:A.createElement(Uw,{key:nu(I),isPresent:!0,presenceAffectsLayout:s,mode:o},I)}),A.createElement(A.Fragment,null,m.size?f:f.map(I=>A.cloneElement(I)))},q5=({children:n})=>{const{user:e,loadingAuth:t,settings:r}=yi(),i=qs(),[s,o]=A.useState({loading:!0,enabled:!1,message:""});if(A.useEffect(()=>{t||(async()=>{if(!e){o({loading:!1,enabled:!1,message:""});return}try{const{data:h,error:f}=await xe.from("system_status").select("maintenance_mode_enabled, maintenance_message").eq("id",1).single();if(f){console.error("Erro ao verificar modo de manutenção:",f),o({loading:!1,enabled:!1,message:""});return}o({loading:!1,enabled:h.maintenance_mode_enabled,message:h.maintenance_message})}catch{o({loading:!1,enabled:!1,message:""})}})()},[t,e]),t||s.loading)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background dark:bg-background",children:y.jsx(sr.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-customPurple dark:border-customGreen border-t-transparent rounded-full"})});const l=r?.role==="ADMIN";return s.enabled&&!l?y.jsx(rm,{to:"/manutencao",state:{message:s.message},replace:!0}):e?n:y.jsx(rm,{to:"/login",state:{from:i},replace:!0})};var G5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const K5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rt=(n,e)=>{const t=A.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:l,...d},h)=>A.createElement("svg",{ref:h,...G5,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${K5(n)}`,...d},[...e.map(([f,m])=>A.createElement(f,m)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t},Y5=rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),X5=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),kT=rt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),TT=rt("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),dm=rt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Zp=rt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),PT=rt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Z5=rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),J5=rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Qb=rt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Q5=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),eH=rt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),RT=rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),tH=rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),IT=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),hm=rt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),nH=rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),rH=rt("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),z_=rt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ex=rt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),MT=rt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),iH=rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),tx=rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),sH=rt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),jh=rt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),oH=rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),DT=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),OT=rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),aH=rt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),lH=rt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),NT=rt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),nx=rt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),fm=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$E=rt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),cH=rt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),LT=rt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),uH=rt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),dH=rt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),rx=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),jT=rt("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]),hH=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),FT=rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),fH=rt("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),pm=rt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),pH=rt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Cu=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function $T(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=$T(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function zT(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=$T(n))&&(r&&(r+=" "),r+=e);return r}function mH(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=BT(e))&&(r&&(r+=" "),r+=t);return r}function BT(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=BT(n[r]))&&(t&&(t+=" "),t+=e);return t}var ix="-";function gH(n){var e=yH(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(l){var d=l.split(ix);return d[0]===""&&d.length!==1&&d.shift(),UT(d,e)||vH(l)}function o(l,d){var h=t[l]||[];return d&&i[l]?[].concat(h,i[l]):h}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function UT(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?UT(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(ix);return e.validators.find(function(o){var l=o.validator;return l(s)})?.classGroupId}}var zE=/^\[(.+)\]$/;function vH(n){if(zE.test(n)){var e=zE.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function yH(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=_H(Object.entries(n.classGroups),t);return i.forEach(function(s){var o=s[0],l=s[1];B_(l,r,o,e)}),r}function B_(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:BE(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(wH(i)){B_(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(o){var l=o[0],d=o[1];B_(d,BE(e,l),t,r)})})}function BE(n,e){var t=n;return e.split(ix).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function wH(n){return n.isThemeGetter}function _H(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var d=l[0],h=l[1];return[e+d,h]})):o});return[r,s]}):n}function bH(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,o){t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(o){var l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set:function(o,l){t.has(o)?t.set(o,l):i(o,l)}}}var VT="!";function xH(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(o){for(var l=[],d=0,h=0,f,m=0;m<o.length;m++){var v=o[m];if(d===0){if(v===r&&(t||o.slice(m,m+i)===e)){l.push(o.slice(h,m)),h=m+i;continue}if(v==="/"){f=m;continue}}v==="["?d++:v==="]"&&d--}var b=l.length===0?o:o.substring(h),S=b.startsWith(VT),x=S?b.substring(1):b,C=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:C}}}function SH(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function AH(n){return{cache:bH(n.cacheSize),splitModifiers:xH(n),...gH(n)}}var EH=/\s+/;function CH(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(EH).map(function(o){var l=t(o),d=l.modifiers,h=l.hasImportantModifier,f=l.baseClassName,m=l.maybePostfixModifierPosition,v=r(m?f.substring(0,m):f),b=!!m;if(!v){if(!m)return{isTailwindClass:!1,originalClassName:o};if(v=r(f),!v)return{isTailwindClass:!1,originalClassName:o};b=!1}var S=SH(d).join(":"),x=h?S+VT:S;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:o,hasPostfixModifier:b}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,d=o.classGroupId,h=o.hasPostfixModifier,f=l+d;return s.has(f)?!1:(s.add(f),i(d,h).forEach(function(m){return s.add(l+m)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function kH(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,o=l;function l(h){var f=e[0],m=e.slice(1),v=m.reduce(function(b,S){return S(b)},f());return r=AH(v),i=r.cache.get,s=r.cache.set,o=d,d(h)}function d(h){var f=i(h);if(f)return f;var m=CH(h,r);return s(h,m),m}return function(){return o(mH.apply(null,arguments))}}function nn(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var WT=/^\[(?:([a-z-]+):)?(.+)\]$/i,TH=/^\d+\/\d+$/,PH=new Set(["px","full","screen"]),RH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,MH=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Fs(n){return au(n)||PH.has(n)||TH.test(n)||U_(n)}function U_(n){return ku(n,"length",FH)}function DH(n){return ku(n,"size",HT)}function OH(n){return ku(n,"position",HT)}function NH(n){return ku(n,"url",$H)}function Pv(n){return ku(n,"number",au)}function au(n){return!Number.isNaN(Number(n))}function LH(n){return n.endsWith("%")&&au(n.slice(0,-1))}function Pp(n){return UE(n)||ku(n,"number",UE)}function _t(n){return WT.test(n)}function Rp(){return!0}function xl(n){return RH.test(n)}function jH(n){return ku(n,"",zH)}function ku(n,e,t){var r=WT.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function FH(n){return IH.test(n)}function HT(){return!1}function $H(n){return n.startsWith("url(")}function UE(n){return Number.isInteger(Number(n))}function zH(n){return MH.test(n)}function BH(){var n=nn("colors"),e=nn("spacing"),t=nn("blur"),r=nn("brightness"),i=nn("borderColor"),s=nn("borderRadius"),o=nn("borderSpacing"),l=nn("borderWidth"),d=nn("contrast"),h=nn("grayscale"),f=nn("hueRotate"),m=nn("invert"),v=nn("gap"),b=nn("gradientColorStops"),S=nn("gradientColorStopPositions"),x=nn("inset"),C=nn("margin"),P=nn("opacity"),I=nn("padding"),R=nn("saturate"),M=nn("scale"),N=nn("sepia"),F=nn("skew"),B=nn("space"),H=nn("translate"),K=function(){return["auto","contain","none"]},le=function(){return["auto","hidden","clip","visible","scroll"]},me=function(){return["auto",_t,e]},he=function(){return[_t,e]},de=function(){return["",Fs]},fe=function(){return["auto",au,_t]},z=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},re=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},U=function(){return["start","end","center","between","around","evenly","stretch"]},ne=function(){return["","0",_t]},Q=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},$=function(){return[au,Pv]},ie=function(){return[au,_t]};return{cacheSize:500,theme:{colors:[Rp],spacing:[Fs],blur:["none","",xl,_t],brightness:$(),borderColor:[n],borderRadius:["none","","full",xl,_t],borderSpacing:he(),borderWidth:de(),contrast:$(),grayscale:ne(),hueRotate:ie(),invert:ne(),gap:he(),gradientColorStops:[n],gradientColorStopPositions:[LH,U_],inset:me(),margin:me(),opacity:$(),padding:he(),saturate:$(),scale:$(),sepia:ne(),skew:ie(),space:he(),translate:he()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[xl]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(z(),[_t])}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pp]}],basis:[{basis:me()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",Pp]}],"grid-cols":[{"grid-cols":[Rp]}],"col-start-end":[{col:["auto",{span:["full",Pp]},_t]}],"col-start":[{"col-start":fe()}],"col-end":[{"col-end":fe()}],"grid-rows":[{"grid-rows":[Rp]}],"row-start-end":[{row:["auto",{span:[Pp]},_t]}],"row-start":[{"row-start":fe()}],"row-end":[{"row-end":fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(U())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(U(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(U(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[I]}],px:[{px:[I]}],py:[{py:[I]}],ps:[{ps:[I]}],pe:[{pe:[I]}],pt:[{pt:[I]}],pr:[{pr:[I]}],pb:[{pb:[I]}],pl:[{pl:[I]}],m:[{m:[C]}],mx:[{mx:[C]}],my:[{my:[C]}],ms:[{ms:[C]}],me:[{me:[C]}],mt:[{mt:[C]}],mr:[{mr:[C]}],mb:[{mb:[C]}],ml:[{ml:[C]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",_t,e]}],"min-w":[{"min-w":["min","max","fit",_t,Fs]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[xl]},xl,_t]}],h:[{h:[_t,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",_t,Fs]}],"max-h":[{"max-h":[_t,e,"min","max","fit"]}],"font-size":[{text:["base",xl,U_]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pv]}],"font-family":[{font:[Rp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",au,Pv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_t,Fs]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Fs]}],"underline-offset":[{"underline-offset":["auto",_t,Fs]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:he()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(z(),[OH])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",DH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},NH]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[_t,Fs]}],"outline-w":[{outline:[Fs]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[Fs]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",xl,jH]}],"shadow-color":[{shadow:[Rp]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":re()}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",xl,_t]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[m]}],saturate:[{saturate:[R]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[M]}],"scale-x":[{"scale-x":[M]}],"scale-y":[{"scale-y":[M]}],rotate:[{rotate:[Pp,_t]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":he()}],"scroll-mx":[{"scroll-mx":he()}],"scroll-my":[{"scroll-my":he()}],"scroll-ms":[{"scroll-ms":he()}],"scroll-me":[{"scroll-me":he()}],"scroll-mt":[{"scroll-mt":he()}],"scroll-mr":[{"scroll-mr":he()}],"scroll-mb":[{"scroll-mb":he()}],"scroll-ml":[{"scroll-ml":he()}],"scroll-p":[{"scroll-p":he()}],"scroll-px":[{"scroll-px":he()}],"scroll-py":[{"scroll-py":he()}],"scroll-ps":[{"scroll-ps":he()}],"scroll-pe":[{"scroll-pe":he()}],"scroll-pt":[{"scroll-pt":he()}],"scroll-pr":[{"scroll-pr":he()}],"scroll-pb":[{"scroll-pb":he()}],"scroll-pl":[{"scroll-pl":he()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Fs,Pv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var UH=kH(BH),Fp={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var VH=Fp.exports,VE;function WH(){return VE||(VE=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",m=1,v=2,b=4,S=1,x=2,C=1,P=2,I=4,R=8,M=16,N=32,F=64,B=128,H=256,K=512,le=30,me="...",he=800,de=16,fe=1,z=2,q=3,re=1/0,U=9007199254740991,ne=17976931348623157e292,Q=NaN,$=4294967295,ie=$-1,Z=$>>>1,Re=[["ary",B],["bind",C],["bindKey",P],["curry",R],["curryRight",M],["flip",K],["partial",N],["partialRight",F],["rearg",H]],Ae="[object Arguments]",Ie="[object Array]",ve="[object AsyncFunction]",Ne="[object Boolean]",He="[object Date]",Xe="[object DOMException]",at="[object Error]",Ot="[object Function]",mn="[object GeneratorFunction]",Qt="[object Map]",Gr="[object Number]",zi="[object Null]",Ln="[object Object]",Wl="[object Promise]",Hl="[object Proxy]",wi="[object RegExp]",Tn="[object Set]",ps="[object String]",Do="[object Symbol]",Du="[object Undefined]",Bi="[object WeakMap]",ql="[object WeakSet]",ms="[object ArrayBuffer]",_i="[object DataView]",Ia="[object Float32Array]",gs="[object Float64Array]",vs="[object Int8Array]",Gl="[object Int16Array]",Ma="[object Int32Array]",Da="[object Uint8Array]",Kl="[object Uint8ClampedArray]",Oo="[object Uint16Array]",No="[object Uint32Array]",Yl=/\b__p \+= '';/g,Xl=/\b(__p \+=) '' \+/g,Zl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ys=/&(?:amp|lt|gt|quot|#39);/g,ws=/[&<>"']/g,Ou=RegExp(ys.source),Nu=RegExp(ws.source),Lu=/<%-([\s\S]+?)%>/g,ju=/<%([\s\S]+?)%>/g,Jl=/<%=([\s\S]+?)%>/g,Ql=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fu=/^\w*$/,Lo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jo=/[\\^$.*+?()[\]{}|]/g,Fo=RegExp(jo.source),ec=/^\s+/,$o=/\s/,Oa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Na=/\{\n\/\* \[wrapped with (.+)\] \*/,tc=/,? & /,Zh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$m=/[()=,{}\[\]\/\s]/,zm=/\\(\\)?/g,Ks=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nc=/\w*$/,ce=/^[-+]0x[0-9a-f]+$/i,J=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,jn=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",La="\\u0300-\\u036f",rc="\\ufe20-\\ufe2f",Bm="\\u20d0-\\u20ff",ic=La+rc+Bm,Um="\\u2700-\\u27bf",Jh="a-z\\xdf-\\xf6\\xf8-\\xff",$u="\\xac\\xb1\\xd7\\xf7",Ui="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",g0="\\u2000-\\u206f",bi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vm="A-Z\\xc0-\\xd6\\xd8-\\xde",Wm="\\ufe0e\\ufe0f",Hm=$u+Ui+g0+bi,ja="['’]",zu="["+Ct+"]",Fa="["+Hm+"]",zo="["+ic+"]",qm="\\d+",v0="["+Um+"]",Bu="["+Jh+"]",Qh="[^"+Ct+Hm+qm+Um+Jh+Vm+"]",sc="\\ud83c[\\udffb-\\udfff]",oc="(?:"+zo+"|"+sc+")",Gm="[^"+Ct+"]",ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Rt="[\\ud800-\\udbff][\\udc00-\\udfff]",Bo="["+Vm+"]",ef="\\u200d",Uu="(?:"+Bu+"|"+Qh+")",Km="(?:"+Bo+"|"+Qh+")",tf="(?:"+ja+"(?:d|ll|m|re|s|t|ve))?",nf="(?:"+ja+"(?:D|LL|M|RE|S|T|VE))?",Vu=oc+"?",lc="["+Wm+"]?",Ys="(?:"+ef+"(?:"+[Gm,ac,Rt].join("|")+")"+lc+Vu+")*",Xs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$a=lc+Vu+Ys,cc="(?:"+[v0,ac,Rt].join("|")+")"+$a,Js="(?:"+[Gm+zo+"?",zo,ac,Rt,zu].join("|")+")",y0=RegExp(ja,"g"),Ym=RegExp(zo,"g"),Uo=RegExp(sc+"(?="+sc+")|"+Js+$a,"g"),w0=RegExp([Bo+"?"+Bu+"+"+tf+"(?="+[Fa,Bo,"$"].join("|")+")",Km+"+"+nf+"(?="+[Fa,Bo+Uu,"$"].join("|")+")",Bo+"?"+Uu+"+"+tf,Bo+"+"+nf,Zs,Xs,qm,cc].join("|"),"g"),Xm=RegExp("["+ef+Ct+ic+Wm+"]"),Wu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_0=-1,Nt={};Nt[Ia]=Nt[gs]=Nt[vs]=Nt[Gl]=Nt[Ma]=Nt[Da]=Nt[Kl]=Nt[Oo]=Nt[No]=!0,Nt[Ae]=Nt[Ie]=Nt[ms]=Nt[Ne]=Nt[_i]=Nt[He]=Nt[at]=Nt[Ot]=Nt[Qt]=Nt[Gr]=Nt[Ln]=Nt[wi]=Nt[Tn]=Nt[ps]=Nt[Bi]=!1;var Mt={};Mt[Ae]=Mt[Ie]=Mt[ms]=Mt[_i]=Mt[Ne]=Mt[He]=Mt[Ia]=Mt[gs]=Mt[vs]=Mt[Gl]=Mt[Ma]=Mt[Qt]=Mt[Gr]=Mt[Ln]=Mt[wi]=Mt[Tn]=Mt[ps]=Mt[Do]=Mt[Da]=Mt[Kl]=Mt[Oo]=Mt[No]=!0,Mt[at]=Mt[Ot]=Mt[Bi]=!1;var za={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Hu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},x0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rf=parseFloat,qu=parseInt,Gu=typeof kl=="object"&&kl&&kl.Object===Object&&kl,Jm=typeof self=="object"&&self&&self.Object===Object&&self,Gt=Gu||Jm||Function("return this")(),uc=e&&!e.nodeType&&e,Vi=uc&&!0&&n&&!n.nodeType&&n,sf=Vi&&Vi.exports===uc,Ba=sf&&Gu.process,ar=function(){try{var ee=Vi&&Vi.require&&Vi.require("util").types;return ee||Ba&&Ba.binding&&Ba.binding("util")}catch{}}(),of=ar&&ar.isArrayBuffer,vr=ar&&ar.isDate,Vo=ar&&ar.isMap,Ku=ar&&ar.isRegExp,Ua=ar&&ar.isSet,Qm=ar&&ar.isTypedArray;function lr(ee,ge,ae){switch(ae.length){case 0:return ee.call(ge);case 1:return ee.call(ge,ae[0]);case 2:return ee.call(ge,ae[0],ae[1]);case 3:return ee.call(ge,ae[0],ae[1],ae[2])}return ee.apply(ge,ae)}function af(ee,ge,ae,De){for(var tt=-1,kt=ee==null?0:ee.length;++tt<kt;){var gn=ee[tt];ge(De,gn,ae(gn),ee)}return De}function Gn(ee,ge){for(var ae=-1,De=ee==null?0:ee.length;++ae<De&&ge(ee[ae],ae,ee)!==!1;);return ee}function Yu(ee,ge){for(var ae=ee==null?0:ee.length;ae--&&ge(ee[ae],ae,ee)!==!1;);return ee}function lf(ee,ge){for(var ae=-1,De=ee==null?0:ee.length;++ae<De;)if(!ge(ee[ae],ae,ee))return!1;return!0}function Qs(ee,ge){for(var ae=-1,De=ee==null?0:ee.length,tt=0,kt=[];++ae<De;){var gn=ee[ae];ge(gn,ae,ee)&&(kt[tt++]=gn)}return kt}function Xu(ee,ge){var ae=ee==null?0:ee.length;return!!ae&&Va(ee,ge,0)>-1}function cf(ee,ge,ae){for(var De=-1,tt=ee==null?0:ee.length;++De<tt;)if(ae(ge,ee[De]))return!0;return!1}function Bt(ee,ge){for(var ae=-1,De=ee==null?0:ee.length,tt=Array(De);++ae<De;)tt[ae]=ge(ee[ae],ae,ee);return tt}function eo(ee,ge){for(var ae=-1,De=ge.length,tt=ee.length;++ae<De;)ee[tt+ae]=ge[ae];return ee}function uf(ee,ge,ae,De){var tt=-1,kt=ee==null?0:ee.length;for(De&&kt&&(ae=ee[++tt]);++tt<kt;)ae=ge(ae,ee[tt],tt,ee);return ae}function S0(ee,ge,ae,De){var tt=ee==null?0:ee.length;for(De&&tt&&(ae=ee[--tt]);tt--;)ae=ge(ae,ee[tt],tt,ee);return ae}function df(ee,ge){for(var ae=-1,De=ee==null?0:ee.length;++ae<De;)if(ge(ee[ae],ae,ee))return!0;return!1}var A0=ff("length");function eg(ee){return ee.split("")}function E0(ee){return ee.match(Zh)||[]}function tg(ee,ge,ae){var De;return ae(ee,function(tt,kt,gn){if(ge(tt,kt,gn))return De=kt,!1}),De}function Zu(ee,ge,ae,De){for(var tt=ee.length,kt=ae+(De?1:-1);De?kt--:++kt<tt;)if(ge(ee[kt],kt,ee))return kt;return-1}function Va(ee,ge,ae){return ge===ge?ed(ee,ge,ae):Zu(ee,ng,ae)}function hf(ee,ge,ae,De){for(var tt=ae-1,kt=ee.length;++tt<kt;)if(De(ee[tt],ge))return tt;return-1}function ng(ee){return ee!==ee}function rg(ee,ge){var ae=ee==null?0:ee.length;return ae?pf(ee,ge)/ae:Q}function ff(ee){return function(ge){return ge==null?t:ge[ee]}}function Ju(ee){return function(ge){return ee==null?t:ee[ge]}}function ig(ee,ge,ae,De,tt){return tt(ee,function(kt,gn,jt){ae=De?(De=!1,kt):ge(ae,kt,gn,jt)}),ae}function C0(ee,ge){var ae=ee.length;for(ee.sort(ge);ae--;)ee[ae]=ee[ae].value;return ee}function pf(ee,ge){for(var ae,De=-1,tt=ee.length;++De<tt;){var kt=ge(ee[De]);kt!==t&&(ae=ae===t?kt:ae+kt)}return ae}function mf(ee,ge){for(var ae=-1,De=Array(ee);++ae<ee;)De[ae]=ge(ae);return De}function k0(ee,ge){return Bt(ge,function(ae){return[ae,ee[ae]]})}function sg(ee){return ee&&ee.slice(0,td(ee)+1).replace(ec,"")}function Rr(ee){return function(ge){return ee(ge)}}function dc(ee,ge){return Bt(ge,function(ae){return ee[ae]})}function _s(ee,ge){return ee.has(ge)}function og(ee,ge){for(var ae=-1,De=ee.length;++ae<De&&Va(ge,ee[ae],0)>-1;);return ae}function gf(ee,ge){for(var ae=ee.length;ae--&&Va(ge,ee[ae],0)>-1;);return ae}function ag(ee,ge){for(var ae=ee.length,De=0;ae--;)ee[ae]===ge&&++De;return De}var lg=Ju(za),cg=Ju(Hu);function ug(ee){return"\\"+x0[ee]}function Wa(ee,ge){return ee==null?t:ee[ge]}function Ha(ee){return Xm.test(ee)}function T0(ee){return Wu.test(ee)}function P0(ee){for(var ge,ae=[];!(ge=ee.next()).done;)ae.push(ge.value);return ae}function Qu(ee){var ge=-1,ae=Array(ee.size);return ee.forEach(function(De,tt){ae[++ge]=[tt,De]}),ae}function vf(ee,ge){return function(ae){return ee(ge(ae))}}function Kr(ee,ge){for(var ae=-1,De=ee.length,tt=0,kt=[];++ae<De;){var gn=ee[ae];(gn===ge||gn===f)&&(ee[ae]=f,kt[tt++]=ae)}return kt}function to(ee){var ge=-1,ae=Array(ee.size);return ee.forEach(function(De){ae[++ge]=De}),ae}function R0(ee){var ge=-1,ae=Array(ee.size);return ee.forEach(function(De){ae[++ge]=[De,De]}),ae}function ed(ee,ge,ae){for(var De=ae-1,tt=ee.length;++De<tt;)if(ee[De]===ge)return De;return-1}function I0(ee,ge,ae){for(var De=ae+1;De--;)if(ee[De]===ge)return De;return De}function Wo(ee){return Ha(ee)?hg(ee):A0(ee)}function Ir(ee){return Ha(ee)?fg(ee):eg(ee)}function td(ee){for(var ge=ee.length;ge--&&$o.test(ee.charAt(ge)););return ge}var dg=Ju(b0);function hg(ee){for(var ge=Uo.lastIndex=0;Uo.test(ee);)++ge;return ge}function fg(ee){return ee.match(Uo)||[]}function M0(ee){return ee.match(w0)||[]}var D0=function ee(ge){ge=ge==null?Gt:qa.defaults(Gt.Object(),ge,qa.pick(Gt,Zm));var ae=ge.Array,De=ge.Date,tt=ge.Error,kt=ge.Function,gn=ge.Math,jt=ge.Object,hc=ge.RegExp,O0=ge.String,Yr=ge.TypeError,bs=ae.prototype,yf=kt.prototype,Wi=jt.prototype,Ga=ge["__core-js_shared__"],fc=yf.toString,Tt=Wi.hasOwnProperty,Ka=0,nd=function(){var u=/[^.]+$/.exec(Ga&&Ga.keys&&Ga.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),pc=Wi.toString,rd=fc.call(jt),pg=Gt._,mg=hc("^"+fc.call(Tt).replace(jo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mc=sf?ge.Buffer:t,xs=ge.Symbol,gc=ge.Uint8Array,wf=mc?mc.allocUnsafe:t,xi=vf(jt.getPrototypeOf,jt),id=jt.create,sd=Wi.propertyIsEnumerable,od=bs.splice,gg=xs?xs.isConcatSpreadable:t,Ss=xs?xs.iterator:t,Ho=xs?xs.toStringTag:t,vc=function(){try{var u=fo(jt,"defineProperty");return u({},"",{}),u}catch{}}(),vg=ge.clearTimeout!==Gt.clearTimeout&&ge.clearTimeout,Vt=De&&De.now!==Gt.Date.now&&De.now,_f=ge.setTimeout!==Gt.setTimeout&&ge.setTimeout,qo=gn.ceil,no=gn.floor,ad=jt.getOwnPropertySymbols,bf=mc?mc.isBuffer:t,Ya=ge.isFinite,ld=bs.join,Xa=vf(jt.keys,jt),vn=gn.max,Kn=gn.min,N0=De.now,yg=ge.parseInt,yc=gn.random,cd=bs.reverse,wc=fo(ge,"DataView"),Go=fo(ge,"Map"),_c=fo(ge,"Promise"),ro=fo(ge,"Set"),bc=fo(ge,"WeakMap"),Za=fo(jt,"create"),ud=bc&&new bc,Ja={},xf=po(wc),io=po(Go),wg=po(_c),Qa=po(ro),Hi=po(bc),so=xs?xs.prototype:t,Mr=so?so.valueOf:t,dd=so?so.toString:t;function L(u){if(wn(u)&&!dt(u)&&!(u instanceof ut)){if(u instanceof Yn)return u;if(Tt.call(u,"__wrapped__"))return Gg(u)}return new Yn(u)}var el=function(){function u(){}return function(p){if(!un(p))return{};if(id)return id(p);u.prototype=p;var _=new u;return u.prototype=t,_}}();function qi(){}function Yn(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}L.templateSettings={escape:Lu,evaluate:ju,interpolate:Jl,variable:"",imports:{_:L}},L.prototype=qi.prototype,L.prototype.constructor=L,Yn.prototype=el(qi.prototype),Yn.prototype.constructor=Yn;function ut(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function hd(){var u=new ut(this.__wrapped__);return u.__actions__=ur(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ur(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ur(this.__views__),u}function Sf(){if(this.__filtered__){var u=new ut(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function tl(){var u=this.__wrapped__.value(),p=this.__dir__,_=dt(u),T=p<0,D=_?u.length:0,j=Zf(0,D,this.__views__),W=j.start,Y=j.end,te=Y-W,ye=T?Y:W-1,_e=this.__iteratees__,Ce=_e.length,Me=0,Ue=Kn(te,this.__takeCount__);if(!_||!T&&D==te&&Ue==te)return cl(u,this.__actions__);var Je=[];e:for(;te--&&Me<Ue;){ye+=p;for(var gt=-1,Qe=u[ye];++gt<Ce;){var wt=_e[gt],St=wt.iteratee,Mi=wt.type,jr=St(Qe);if(Mi==z)Qe=jr;else if(!jr){if(Mi==fe)continue e;break e}}Je[Me++]=Qe}return Je}ut.prototype=el(qi.prototype),ut.prototype.constructor=ut;function yr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function Wt(){this.__data__=Za?Za(null):{},this.size=0}function Ut(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function oo(u){var p=this.__data__;if(Za){var _=p[u];return _===d?t:_}return Tt.call(p,u)?p[u]:t}function Xn(u){var p=this.__data__;return Za?p[u]!==t:Tt.call(p,u)}function wr(u,p){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=Za&&p===t?d:p,this}yr.prototype.clear=Wt,yr.prototype.delete=Ut,yr.prototype.get=oo,yr.prototype.has=Xn,yr.prototype.set=wr;function cr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function nl(){this.__data__=[],this.size=0}function _r(u){var p=this.__data__,_=Jn(p,u);if(_<0)return!1;var T=p.length-1;return _==T?p.pop():od.call(p,_,1),--this.size,!0}function fd(u){var p=this.__data__,_=Jn(p,u);return _<0?t:p[_][1]}function _g(u){return Jn(this.__data__,u)>-1}function bg(u,p){var _=this.__data__,T=Jn(_,u);return T<0?(++this.size,_.push([u,p])):_[T][1]=p,this}cr.prototype.clear=nl,cr.prototype.delete=_r,cr.prototype.get=fd,cr.prototype.has=_g,cr.prototype.set=bg;function Xr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function xg(){this.size=0,this.__data__={hash:new yr,map:new(Go||cr),string:new yr}}function As(u){var p=jc(this,u).delete(u);return this.size-=p?1:0,p}function pd(u){return jc(this,u).get(u)}function Af(u){return jc(this,u).has(u)}function Sg(u,p){var _=jc(this,u),T=_.size;return _.set(u,p),this.size+=_.size==T?0:1,this}Xr.prototype.clear=xg,Xr.prototype.delete=As,Xr.prototype.get=pd,Xr.prototype.has=Af,Xr.prototype.set=Sg;function Ko(u){var p=-1,_=u==null?0:u.length;for(this.__data__=new Xr;++p<_;)this.add(u[p])}function ao(u){return this.__data__.set(u,d),this}function rl(u){return this.__data__.has(u)}Ko.prototype.add=Ko.prototype.push=ao,Ko.prototype.has=rl;function Zn(u){var p=this.__data__=new cr(u);this.size=p.size}function md(){this.__data__=new cr,this.size=0}function gd(u){var p=this.__data__,_=p.delete(u);return this.size=p.size,_}function Zr(u){return this.__data__.get(u)}function Jr(u){return this.__data__.has(u)}function Yo(u,p){var _=this.__data__;if(_ instanceof cr){var T=_.__data__;if(!Go||T.length<i-1)return T.push([u,p]),this.size=++_.size,this;_=this.__data__=new Xr(T)}return _.set(u,p),this.size=_.size,this}Zn.prototype.clear=md,Zn.prototype.delete=gd,Zn.prototype.get=Zr,Zn.prototype.has=Jr,Zn.prototype.set=Yo;function Gi(u,p){var _=dt(u),T=!_&&Yc(u),D=!_&&!T&&wl(u),j=!_&&!T&&!D&&sh(u),W=_||T||D||j,Y=W?mf(u.length,O0):[],te=Y.length;for(var ye in u)(p||Tt.call(u,ye))&&!(W&&(ye=="length"||D&&(ye=="offset"||ye=="parent")||j&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||Yt(ye,te)))&&Y.push(ye);return Y}function Ki(u){var p=u.length;return p?u[al(0,p-1)]:t}function Xo(u,p){return Ud(ur(u),Es(p,0,u.length))}function Ag(u){return Ud(ur(u))}function xc(u,p,_){(_!==t&&!Ns(u[p],_)||_===t&&!(p in u))&&Yi(u,p,_)}function Zo(u,p,_){var T=u[p];(!(Tt.call(u,p)&&Ns(T,_))||_===t&&!(p in u))&&Yi(u,p,_)}function Jn(u,p){for(var _=u.length;_--;)if(Ns(u[_][0],p))return _;return-1}function Dr(u,p,_,T){return Zi(u,function(D,j,W){p(T,D,_(D),W)}),T}function Ht(u,p){return u&&Ai(p,tr(p),u)}function Si(u,p){return u&&Ai(p,ai(p),u)}function Yi(u,p,_){p=="__proto__"&&vc?vc(u,p,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[p]=_}function vd(u,p){for(var _=-1,T=p.length,D=ae(T),j=u==null;++_<T;)D[_]=j?t:sw(u,p[_]);return D}function Es(u,p,_){return u===u&&(_!==t&&(u=u<=_?u:_),p!==t&&(u=u>=p?u:p)),u}function br(u,p,_,T,D,j){var W,Y=p&m,te=p&v,ye=p&b;if(_&&(W=D?_(u,T,D,j):_(u)),W!==t)return W;if(!un(u))return u;var _e=dt(u);if(_e){if(W=$c(u),!Y)return ur(u,W)}else{var Ce=zn(u),Me=Ce==Ot||Ce==mn;if(wl(u))return $f(u,Y);if(Ce==Ln||Ce==Ae||Me&&!D){if(W=te||Me?{}:Bn(u),!Y)return te?j0(u,Si(W,u)):Rd(u,Ht(W,u))}else{if(!Mt[Ce])return D?u:{};W=F0(u,Ce,Y)}}j||(j=new Zn);var Ue=j.get(u);if(Ue)return Ue;j.set(u,W),oS(u)?u.forEach(function(Qe){W.add(br(Qe,p,_,Qe,u,j))}):iS(u)&&u.forEach(function(Qe,wt){W.set(wt,br(Qe,p,_,wt,u,j))});var Je=ye?te?Lc:Nc:te?ai:tr,gt=_e?t:Je(u);return Gn(gt||u,function(Qe,wt){gt&&(wt=Qe,Qe=u[wt]),Zo(W,wt,br(Qe,p,_,wt,u,j))}),W}function Eg(u){var p=tr(u);return function(_){return Sc(_,u,p)}}function Sc(u,p,_){var T=_.length;if(u==null)return!T;for(u=jt(u);T--;){var D=_[T],j=p[D],W=u[D];if(W===t&&!(D in u)||!j(W))return!1}return!0}function Ef(u,p,_){if(typeof u!="function")throw new Yr(o);return gl(function(){u.apply(t,_)},p)}function Xi(u,p,_,T){var D=-1,j=Xu,W=!0,Y=u.length,te=[],ye=p.length;if(!Y)return te;_&&(p=Bt(p,Rr(_))),T?(j=cf,W=!1):p.length>=i&&(j=_s,W=!1,p=new Ko(p));e:for(;++D<Y;){var _e=u[D],Ce=_==null?_e:_(_e);if(_e=T||_e!==0?_e:0,W&&Ce===Ce){for(var Me=ye;Me--;)if(p[Me]===Ce)continue e;te.push(_e)}else j(p,Ce,T)||te.push(_e)}return te}var Zi=ri(Or),Cg=ri(lo,!0);function Ac(u,p){var _=!0;return Zi(u,function(T,D,j){return _=!!p(T,D,j),_}),_}function Jo(u,p,_){for(var T=-1,D=u.length;++T<D;){var j=u[T],W=p(j);if(W!=null&&(Y===t?W===W&&!Ii(W):_(W,Y)))var Y=W,te=j}return te}function kg(u,p,_,T){var D=u.length;for(_=pt(_),_<0&&(_=-_>D?0:D+_),T=T===t||T>D?D:pt(T),T<0&&(T+=D),T=_>T?0:lS(T);_<T;)u[_++]=p;return u}function Cf(u,p){var _=[];return Zi(u,function(T,D,j){p(T,D,j)&&_.push(T)}),_}function sn(u,p,_,T,D){var j=-1,W=u.length;for(_||(_=$d),D||(D=[]);++j<W;){var Y=u[j];p>0&&_(Y)?p>1?sn(Y,p-1,_,T,D):eo(D,Y):T||(D[D.length]=Y)}return D}var yd=Md(),Ec=Md(!0);function Or(u,p){return u&&yd(u,p,tr)}function lo(u,p){return u&&Ec(u,p,tr)}function il(u,p){return Qs(p,function(_){return da(u[_])})}function Cs(u,p){p=es(p,u);for(var _=0,T=p.length;u!=null&&_<T;)u=u[Ti(p[_++])];return _&&_==T?u:t}function wd(u,p,_){var T=p(u);return dt(u)?T:eo(T,_(u))}function Fn(u){return u==null?u===t?Du:zi:Ho&&Ho in jt(u)?Fd(u):Qf(u)}function co(u,p){return u>p}function Qr(u,p){return u!=null&&Tt.call(u,p)}function Qo(u,p){return u!=null&&p in jt(u)}function kf(u,p,_){return u>=Kn(p,_)&&u<vn(p,_)}function _d(u,p,_){for(var T=_?cf:Xu,D=u[0].length,j=u.length,W=j,Y=ae(j),te=1/0,ye=[];W--;){var _e=u[W];W&&p&&(_e=Bt(_e,Rr(p))),te=Kn(_e.length,te),Y[W]=!_&&(p||D>=120&&_e.length>=120)?new Ko(W&&_e):t}_e=u[0];var Ce=-1,Me=Y[0];e:for(;++Ce<D&&ye.length<te;){var Ue=_e[Ce],Je=p?p(Ue):Ue;if(Ue=_||Ue!==0?Ue:0,!(Me?_s(Me,Je):T(ye,Je,_))){for(W=j;--W;){var gt=Y[W];if(!(gt?_s(gt,Je):T(u[W],Je,_)))continue e}Me&&Me.push(Je),ye.push(Ue)}}return ye}function ks(u,p,_,T){return Or(u,function(D,j,W){p(T,_(D),j,W)}),T}function ei(u,p,_){p=es(p,u),u=Pn(u,p);var T=u==null?u:u[Ti(fr(p))];return T==null?t:lr(T,u,_)}function bd(u){return wn(u)&&Fn(u)==Ae}function Tg(u){return wn(u)&&Fn(u)==ms}function Ts(u){return wn(u)&&Fn(u)==He}function ti(u,p,_,T,D){return u===p?!0:u==null||p==null||!wn(u)&&!wn(p)?u!==u&&p!==p:xd(u,p,_,T,ti,D)}function xd(u,p,_,T,D,j){var W=dt(u),Y=dt(p),te=W?Ie:zn(u),ye=Y?Ie:zn(p);te=te==Ae?Ln:te,ye=ye==Ae?Ln:ye;var _e=te==Ln,Ce=ye==Ln,Me=te==ye;if(Me&&wl(u)){if(!wl(p))return!1;W=!0,_e=!1}if(Me&&!_e)return j||(j=new Zn),W||sh(u)?Yf(u,p,_,T,D,j):Xf(u,p,te,_,T,D,j);if(!(_&S)){var Ue=_e&&Tt.call(u,"__wrapped__"),Je=Ce&&Tt.call(p,"__wrapped__");if(Ue||Je){var gt=Ue?u.value():u,Qe=Je?p.value():p;return j||(j=new Zn),D(gt,Qe,_,T,j)}}return Me?(j||(j=new Zn),$g(u,p,_,T,D,j)):!1}function Pg(u){return wn(u)&&zn(u)==Qt}function sl(u,p,_,T){var D=_.length,j=D,W=!T;if(u==null)return!j;for(u=jt(u);D--;){var Y=_[D];if(W&&Y[2]?Y[1]!==u[Y[0]]:!(Y[0]in u))return!1}for(;++D<j;){Y=_[D];var te=Y[0],ye=u[te],_e=Y[1];if(W&&Y[2]){if(ye===t&&!(te in u))return!1}else{var Ce=new Zn;if(T)var Me=T(ye,_e,te,u,p,Ce);if(!(Me===t?ti(_e,ye,S|x,T,Ce):Me))return!1}}return!0}function Tf(u){if(!un(u)||Ug(u))return!1;var p=da(u)?mg:pe;return p.test(po(u))}function Cc(u){return wn(u)&&Fn(u)==wi}function Ji(u){return wn(u)&&zn(u)==Tn}function kc(u){return wn(u)&&av(u.length)&&!!Nt[Fn(u)]}function ol(u){return typeof u=="function"?u:u==null?li:typeof u=="object"?dt(u)?Kt(u[0],u[1]):Sd(u):wS(u)}function Ps(u){if(!Ds(u))return Xa(u);var p=[];for(var _ in jt(u))Tt.call(u,_)&&_!="constructor"&&p.push(_);return p}function Pf(u){if(!un(u))return Hg(u);var p=Ds(u),_=[];for(var T in u)T=="constructor"&&(p||!Tt.call(u,T))||_.push(T);return _}function uo(u,p){return u<p}function Rf(u,p){var _=-1,T=oi(u)?ae(u.length):[];return Zi(u,function(D,j,W){T[++_]=p(D,j,W)}),T}function Sd(u){var p=Fc(u);return p.length==1&&p[0][2]?zd(p[0][0],p[0][1]):function(_){return _===u||sl(_,u,p)}}function Kt(u,p){return Le(u)&&Bc(p)?zd(Ti(u),p):function(_){var T=sw(_,u);return T===t&&T===p?ow(_,u):ti(p,T,S|x)}}function ea(u,p,_,T,D){u!==p&&yd(p,function(j,W){if(D||(D=new Zn),un(j))If(u,p,W,_,ea,T,D);else{var Y=T?T(rs(u,W),j,W+"",u,p,D):t;Y===t&&(Y=j),xc(u,W,Y)}},ai)}function If(u,p,_,T,D,j,W){var Y=rs(u,_),te=rs(p,_),ye=W.get(te);if(ye){xc(u,_,ye);return}var _e=j?j(Y,te,_+"",u,p,W):t,Ce=_e===t;if(Ce){var Me=dt(te),Ue=!Me&&wl(te),Je=!Me&&!Ue&&sh(te);_e=te,Me||Ue||Je?dt(Y)?_e=Y:xn(Y)?_e=ur(Y):Ue?(Ce=!1,_e=$f(te,!0)):Je?(Ce=!1,_e=Og(te,!0)):_e=[]:vp(te)||Yc(te)?(_e=Y,Yc(Y)?_e=cS(Y):(!un(Y)||da(Y))&&(_e=Bn(te))):Ce=!1}Ce&&(W.set(te,_e),D(_e,te,T,j,W),W.delete(te)),xc(u,_,_e)}function Ad(u,p){var _=u.length;if(_)return p+=p<0?_:0,Yt(p,_)?u[p]:t}function Tc(u,p,_){p.length?p=Bt(p,function(j){return dt(j)?function(W){return Cs(W,j.length===1?j[0]:j)}:j}):p=[li];var T=-1;p=Bt(p,Rr(Ye()));var D=Rf(u,function(j,W,Y){var te=Bt(p,function(ye){return ye(j)});return{criteria:te,index:++T,value:j}});return C0(D,function(j,W){return L0(j,W,_)})}function Mf(u,p){return ho(u,p,function(_,T){return ow(u,T)})}function ho(u,p,_){for(var T=-1,D=p.length,j={};++T<D;){var W=p[T],Y=Cs(u,W);_(Y,W)&&na(j,es(W,u),Y)}return j}function en(u){return function(p){return Cs(p,u)}}function ln(u,p,_,T){var D=T?hf:Va,j=-1,W=p.length,Y=u;for(u===p&&(p=ur(p)),_&&(Y=Bt(u,Rr(_)));++j<W;)for(var te=0,ye=p[j],_e=_?_(ye):ye;(te=D(Y,_e,te,T))>-1;)Y!==u&&od.call(Y,te,1),od.call(u,te,1);return u}function _n(u,p){for(var _=u?p.length:0,T=_-1;_--;){var D=p[_];if(_==T||D!==j){var j=D;Yt(D)?od.call(u,D,1):kd(u,D)}}return u}function al(u,p){return u+no(yc()*(p-u+1))}function Pc(u,p,_,T){for(var D=-1,j=vn(qo((p-u)/(_||1)),0),W=ae(j);j--;)W[T?j:++D]=u,u+=_;return W}function ta(u,p){var _="";if(!u||p<1||p>U)return _;do p%2&&(_+=u),p=no(p/2),p&&(u+=u);while(p);return _}function ft(u,p){return Nr(Bd(u,p,li),u+"")}function Qn(u){return Ki(oh(u))}function Df(u,p){var _=oh(u);return Ud(_,Es(p,0,_.length))}function na(u,p,_,T){if(!un(u))return u;p=es(p,u);for(var D=-1,j=p.length,W=j-1,Y=u;Y!=null&&++D<j;){var te=Ti(p[D]),ye=_;if(te==="__proto__"||te==="constructor"||te==="prototype")return u;if(D!=W){var _e=Y[te];ye=T?T(_e,te,Y):t,ye===t&&(ye=un(_e)?_e:Yt(p[D+1])?[]:{})}Zo(Y,te,ye),Y=Y[te]}return u}var Ed=ud?function(u,p){return ud.set(u,p),u}:li,Qi=vc?function(u,p){return vc(u,"toString",{configurable:!0,enumerable:!1,value:lw(p),writable:!0})}:li;function ni(u){return Ud(oh(u))}function er(u,p,_){var T=-1,D=u.length;p<0&&(p=-p>D?0:D+p),_=_>D?D:_,_<0&&(_+=D),D=p>_?0:_-p>>>0,p>>>=0;for(var j=ae(D);++T<D;)j[T]=u[T+p];return j}function Of(u,p){var _;return Zi(u,function(T,D,j){return _=p(T,D,j),!_}),!!_}function ll(u,p,_){var T=0,D=u==null?T:u.length;if(typeof p=="number"&&p===p&&D<=Z){for(;T<D;){var j=T+D>>>1,W=u[j];W!==null&&!Ii(W)&&(_?W<=p:W<p)?T=j+1:D=j}return D}return Cd(u,p,li,_)}function Cd(u,p,_,T){var D=0,j=u==null?0:u.length;if(j===0)return 0;p=_(p);for(var W=p!==p,Y=p===null,te=Ii(p),ye=p===t;D<j;){var _e=no((D+j)/2),Ce=_(u[_e]),Me=Ce!==t,Ue=Ce===null,Je=Ce===Ce,gt=Ii(Ce);if(W)var Qe=T||Je;else ye?Qe=Je&&(T||Me):Y?Qe=Je&&Me&&(T||!Ue):te?Qe=Je&&Me&&!Ue&&(T||!gt):Ue||gt?Qe=!1:Qe=T?Ce<=p:Ce<p;Qe?D=_e+1:j=_e}return Kn(j,ie)}function Nf(u,p){for(var _=-1,T=u.length,D=0,j=[];++_<T;){var W=u[_],Y=p?p(W):W;if(!_||!Ns(Y,te)){var te=Y;j[D++]=W===0?0:W}}return j}function Lf(u){return typeof u=="number"?u:Ii(u)?Q:+u}function xr(u){if(typeof u=="string")return u;if(dt(u))return Bt(u,xr)+"";if(Ii(u))return dd?dd.call(u):"";var p=u+"";return p=="0"&&1/u==-re?"-0":p}function Rs(u,p,_){var T=-1,D=Xu,j=u.length,W=!0,Y=[],te=Y;if(_)W=!1,D=cf;else if(j>=i){var ye=p?null:Fg(u);if(ye)return to(ye);W=!1,D=_s,te=new Ko}else te=p?[]:Y;e:for(;++T<j;){var _e=u[T],Ce=p?p(_e):_e;if(_e=_||_e!==0?_e:0,W&&Ce===Ce){for(var Me=te.length;Me--;)if(te[Me]===Ce)continue e;p&&te.push(Ce),Y.push(_e)}else D(te,Ce,_)||(te!==Y&&te.push(Ce),Y.push(_e))}return Y}function kd(u,p){return p=es(p,u),u=Pn(u,p),u==null||delete u[Ti(fr(p))]}function jf(u,p,_,T){return na(u,p,_(Cs(u,p)),T)}function Rc(u,p,_,T){for(var D=u.length,j=T?D:-1;(T?j--:++j<D)&&p(u[j],j,u););return _?er(u,T?0:j,T?j+1:D):er(u,T?j+1:0,T?D:j)}function cl(u,p){var _=u;return _ instanceof ut&&(_=_.value()),uf(p,function(T,D){return D.func.apply(D.thisArg,eo([T],D.args))},_)}function Td(u,p,_){var T=u.length;if(T<2)return T?Rs(u[0]):[];for(var D=-1,j=ae(T);++D<T;)for(var W=u[D],Y=-1;++Y<T;)Y!=D&&(j[D]=Xi(j[D]||W,u[Y],p,_));return Rs(sn(j,1),p,_)}function Ic(u,p,_){for(var T=-1,D=u.length,j=p.length,W={};++T<D;){var Y=T<j?p[T]:t;_(W,u[T],Y)}return W}function ul(u){return xn(u)?u:[]}function Pd(u){return typeof u=="function"?u:li}function es(u,p){return dt(u)?u:Le(u,p)?[u]:np(Ft(u))}var Rg=ft;function Is(u,p,_){var T=u.length;return _=_===t?T:_,!p&&_>=T?u:er(u,p,_)}var Ff=vg||function(u){return Gt.clearTimeout(u)};function $f(u,p){if(p)return u.slice();var _=u.length,T=wf?wf(_):new u.constructor(_);return u.copy(T),T}function Mc(u){var p=new u.constructor(u.byteLength);return new gc(p).set(new gc(u)),p}function Ig(u,p){var _=p?Mc(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function Mg(u){var p=new u.constructor(u.source,nc.exec(u));return p.lastIndex=u.lastIndex,p}function Dg(u){return Mr?jt(Mr.call(u)):{}}function Og(u,p){var _=p?Mc(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function zf(u,p){if(u!==p){var _=u!==t,T=u===null,D=u===u,j=Ii(u),W=p!==t,Y=p===null,te=p===p,ye=Ii(p);if(!Y&&!ye&&!j&&u>p||j&&W&&te&&!Y&&!ye||T&&W&&te||!_&&te||!D)return 1;if(!T&&!j&&!ye&&u<p||ye&&_&&D&&!T&&!j||Y&&_&&D||!W&&D||!te)return-1}return 0}function L0(u,p,_){for(var T=-1,D=u.criteria,j=p.criteria,W=D.length,Y=_.length;++T<W;){var te=zf(D[T],j[T]);if(te){if(T>=Y)return te;var ye=_[T];return te*(ye=="desc"?-1:1)}}return u.index-p.index}function Ng(u,p,_,T){for(var D=-1,j=u.length,W=_.length,Y=-1,te=p.length,ye=vn(j-W,0),_e=ae(te+ye),Ce=!T;++Y<te;)_e[Y]=p[Y];for(;++D<W;)(Ce||D<j)&&(_e[_[D]]=u[D]);for(;ye--;)_e[Y++]=u[D++];return _e}function Bf(u,p,_,T){for(var D=-1,j=u.length,W=-1,Y=_.length,te=-1,ye=p.length,_e=vn(j-Y,0),Ce=ae(_e+ye),Me=!T;++D<_e;)Ce[D]=u[D];for(var Ue=D;++te<ye;)Ce[Ue+te]=p[te];for(;++W<Y;)(Me||D<j)&&(Ce[Ue+_[W]]=u[D++]);return Ce}function ur(u,p){var _=-1,T=u.length;for(p||(p=ae(T));++_<T;)p[_]=u[_];return p}function Ai(u,p,_,T){var D=!_;_||(_={});for(var j=-1,W=p.length;++j<W;){var Y=p[j],te=T?T(_[Y],u[Y],Y,_,u):t;te===t&&(te=u[Y]),D?Yi(_,Y,te):Zo(_,Y,te)}return _}function Rd(u,p){return Ai(u,Ei(u),p)}function j0(u,p){return Ai(u,zg(u),p)}function Id(u,p){return function(_,T){var D=dt(_)?af:Dr,j=p?p():{};return D(_,u,Ye(T,2),j)}}function dl(u){return ft(function(p,_){var T=-1,D=_.length,j=D>1?_[D-1]:t,W=D>2?_[2]:t;for(j=u.length>3&&typeof j=="function"?(D--,j):t,W&&hr(_[0],_[1],W)&&(j=D<3?t:j,D=1),p=jt(p);++T<D;){var Y=_[T];Y&&u(p,Y,T,j)}return p})}function ri(u,p){return function(_,T){if(_==null)return _;if(!oi(_))return u(_,T);for(var D=_.length,j=p?D:-1,W=jt(_);(p?j--:++j<D)&&T(W[j],j,W)!==!1;);return _}}function Md(u){return function(p,_,T){for(var D=-1,j=jt(p),W=T(p),Y=W.length;Y--;){var te=W[u?Y:++D];if(_(j[te],te,j)===!1)break}return p}}function Dd(u,p,_){var T=p&C,D=hl(u);function j(){var W=this&&this!==Gt&&this instanceof j?D:u;return W.apply(T?_:this,arguments)}return j}function Uf(u){return function(p){p=Ft(p);var _=Ha(p)?Ir(p):t,T=_?_[0]:p.charAt(0),D=_?Is(_,1).join(""):p.slice(1);return T[u]()+D}}function ra(u){return function(p){return uf(vS(gS(p).replace(y0,"")),u,"")}}function hl(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var _=el(u.prototype),T=u.apply(_,p);return un(T)?T:_}}function Vf(u,p,_){var T=hl(u);function D(){for(var j=arguments.length,W=ae(j),Y=j,te=Ms(D);Y--;)W[Y]=arguments[Y];var ye=j<3&&W[0]!==te&&W[j-1]!==te?[]:Kr(W,te);if(j-=ye.length,j<_)return dr(u,p,fl,D.placeholder,t,W,ye,t,t,_-j);var _e=this&&this!==Gt&&this instanceof D?T:u;return lr(_e,this,W)}return D}function ia(u){return function(p,_,T){var D=jt(p);if(!oi(p)){var j=Ye(_,3);p=tr(p),_=function(Y){return j(D[Y],Y,D)}}var W=u(p,_,T);return W>-1?D[j?p[W]:W]:t}}function Od(u){return ns(function(p){var _=p.length,T=_,D=Yn.prototype.thru;for(u&&p.reverse();T--;){var j=p[T];if(typeof j!="function")throw new Yr(o);if(D&&!W&&pl(j)=="wrapper")var W=new Yn([],!0)}for(T=W?T:_;++T<_;){j=p[T];var Y=pl(j),te=Y=="wrapper"?jd(j):t;te&&zc(te[0])&&te[1]==(B|R|N|H)&&!te[4].length&&te[9]==1?W=W[pl(te[0])].apply(W,te[3]):W=j.length==1&&zc(j)?W[Y]():W.thru(j)}return function(){var ye=arguments,_e=ye[0];if(W&&ye.length==1&&dt(_e))return W.plant(_e).value();for(var Ce=0,Me=_?p[Ce].apply(this,ye):_e;++Ce<_;)Me=p[Ce].call(this,Me);return Me}})}function fl(u,p,_,T,D,j,W,Y,te,ye){var _e=p&B,Ce=p&C,Me=p&P,Ue=p&(R|M),Je=p&K,gt=Me?t:hl(u);function Qe(){for(var wt=arguments.length,St=ae(wt),Mi=wt;Mi--;)St[Mi]=arguments[Mi];if(Ue)var jr=Ms(Qe),Di=ag(St,jr);if(T&&(St=Ng(St,T,D,Ue)),j&&(St=Bf(St,j,W,Ue)),wt-=Di,Ue&&wt<ye){var Sn=Kr(St,jr);return dr(u,p,fl,Qe.placeholder,_,St,Sn,Y,te,ye-wt)}var Ls=Ce?_:this,fa=Me?Ls[u]:u;return wt=St.length,Y?St=Ci(St,Y):Je&&wt>1&&St.reverse(),_e&&te<wt&&(St.length=te),this&&this!==Gt&&this instanceof Qe&&(fa=gt||hl(fa)),fa.apply(Ls,St)}return Qe}function Lg(u,p){return function(_,T){return ks(_,u,p(T),{})}}function Dc(u,p){return function(_,T){var D;if(_===t&&T===t)return p;if(_!==t&&(D=_),T!==t){if(D===t)return T;typeof _=="string"||typeof T=="string"?(_=xr(_),T=xr(T)):(_=Lf(_),T=Lf(T)),D=u(_,T)}return D}}function Nd(u){return ns(function(p){return p=Bt(p,Rr(Ye())),ft(function(_){var T=this;return u(p,function(D){return lr(D,T,_)})})})}function Oc(u,p){p=p===t?" ":xr(p);var _=p.length;if(_<2)return _?ta(p,u):p;var T=ta(p,qo(u/Wo(p)));return Ha(p)?Is(Ir(T),0,u).join(""):T.slice(0,u)}function jg(u,p,_,T){var D=p&C,j=hl(u);function W(){for(var Y=-1,te=arguments.length,ye=-1,_e=T.length,Ce=ae(_e+te),Me=this&&this!==Gt&&this instanceof W?j:u;++ye<_e;)Ce[ye]=T[ye];for(;te--;)Ce[ye++]=arguments[++Y];return lr(Me,D?_:this,Ce)}return W}function Wf(u){return function(p,_,T){return T&&typeof T!="number"&&hr(p,_,T)&&(_=T=t),p=ha(p),_===t?(_=p,p=0):_=ha(_),T=T===t?p<_?1:-1:ha(T),Pc(p,_,T,u)}}function Ld(u){return function(p,_){return typeof p=="string"&&typeof _=="string"||(p=is(p),_=is(_)),u(p,_)}}function dr(u,p,_,T,D,j,W,Y,te,ye){var _e=p&R,Ce=_e?W:t,Me=_e?t:W,Ue=_e?j:t,Je=_e?t:j;p|=_e?N:F,p&=~(_e?F:N),p&I||(p&=-4);var gt=[u,p,D,Ue,Ce,Je,Me,Y,te,ye],Qe=_.apply(t,gt);return zc(u)&&ep(Qe,gt),Qe.placeholder=T,tp(Qe,u,p)}function $n(u){var p=gn[u];return function(_,T){if(_=is(_),T=T==null?0:Kn(pt(T),292),T&&Ya(_)){var D=(Ft(_)+"e").split("e"),j=p(D[0]+"e"+(+D[1]+T));return D=(Ft(j)+"e").split("e"),+(D[0]+"e"+(+D[1]-T))}return p(_)}}var Fg=ro&&1/to(new ro([,-0]))[1]==re?function(u){return new ro(u)}:dw;function Hf(u){return function(p){var _=zn(p);return _==Qt?Qu(p):_==Tn?R0(p):k0(p,u(p))}}function ts(u,p,_,T,D,j,W,Y){var te=p&P;if(!te&&typeof u!="function")throw new Yr(o);var ye=T?T.length:0;if(ye||(p&=-97,T=D=t),W=W===t?W:vn(pt(W),0),Y=Y===t?Y:pt(Y),ye-=D?D.length:0,p&F){var _e=T,Ce=D;T=D=t}var Me=te?t:jd(u),Ue=[u,p,_,T,D,_e,Ce,j,W,Y];if(Me&&Wg(Ue,Me),u=Ue[0],p=Ue[1],_=Ue[2],T=Ue[3],D=Ue[4],Y=Ue[9]=Ue[9]===t?te?0:u.length:vn(Ue[9]-ye,0),!Y&&p&(R|M)&&(p&=-25),!p||p==C)var Je=Dd(u,p,_);else p==R||p==M?Je=Vf(u,p,Y):(p==N||p==(C|N))&&!D.length?Je=jg(u,p,_,T):Je=fl.apply(t,Ue);var gt=Me?Ed:ep;return tp(gt(Je,Ue),u,p)}function qf(u,p,_,T){return u===t||Ns(u,Wi[_])&&!Tt.call(T,_)?p:u}function Gf(u,p,_,T,D,j){return un(u)&&un(p)&&(j.set(p,u),ea(u,p,t,Gf,j),j.delete(p)),u}function Kf(u){return vp(u)?t:u}function Yf(u,p,_,T,D,j){var W=_&S,Y=u.length,te=p.length;if(Y!=te&&!(W&&te>Y))return!1;var ye=j.get(u),_e=j.get(p);if(ye&&_e)return ye==p&&_e==u;var Ce=-1,Me=!0,Ue=_&x?new Ko:t;for(j.set(u,p),j.set(p,u);++Ce<Y;){var Je=u[Ce],gt=p[Ce];if(T)var Qe=W?T(gt,Je,Ce,p,u,j):T(Je,gt,Ce,u,p,j);if(Qe!==t){if(Qe)continue;Me=!1;break}if(Ue){if(!df(p,function(wt,St){if(!_s(Ue,St)&&(Je===wt||D(Je,wt,_,T,j)))return Ue.push(St)})){Me=!1;break}}else if(!(Je===gt||D(Je,gt,_,T,j))){Me=!1;break}}return j.delete(u),j.delete(p),Me}function Xf(u,p,_,T,D,j,W){switch(_){case _i:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case ms:return!(u.byteLength!=p.byteLength||!j(new gc(u),new gc(p)));case Ne:case He:case Gr:return Ns(+u,+p);case at:return u.name==p.name&&u.message==p.message;case wi:case ps:return u==p+"";case Qt:var Y=Qu;case Tn:var te=T&S;if(Y||(Y=to),u.size!=p.size&&!te)return!1;var ye=W.get(u);if(ye)return ye==p;T|=x,W.set(u,p);var _e=Yf(Y(u),Y(p),T,D,j,W);return W.delete(u),_e;case Do:if(Mr)return Mr.call(u)==Mr.call(p)}return!1}function $g(u,p,_,T,D,j){var W=_&S,Y=Nc(u),te=Y.length,ye=Nc(p),_e=ye.length;if(te!=_e&&!W)return!1;for(var Ce=te;Ce--;){var Me=Y[Ce];if(!(W?Me in p:Tt.call(p,Me)))return!1}var Ue=j.get(u),Je=j.get(p);if(Ue&&Je)return Ue==p&&Je==u;var gt=!0;j.set(u,p),j.set(p,u);for(var Qe=W;++Ce<te;){Me=Y[Ce];var wt=u[Me],St=p[Me];if(T)var Mi=W?T(St,wt,Me,p,u,j):T(wt,St,Me,u,p,j);if(!(Mi===t?wt===St||D(wt,St,_,T,j):Mi)){gt=!1;break}Qe||(Qe=Me=="constructor")}if(gt&&!Qe){var jr=u.constructor,Di=p.constructor;jr!=Di&&"constructor"in u&&"constructor"in p&&!(typeof jr=="function"&&jr instanceof jr&&typeof Di=="function"&&Di instanceof Di)&&(gt=!1)}return j.delete(u),j.delete(p),gt}function ns(u){return Nr(Bd(u,t,Wd),u+"")}function Nc(u){return wd(u,tr,Ei)}function Lc(u){return wd(u,ai,zg)}var jd=ud?function(u){return ud.get(u)}:dw;function pl(u){for(var p=u.name+"",_=Ja[p],T=Tt.call(Ja,p)?_.length:0;T--;){var D=_[T],j=D.func;if(j==null||j==u)return D.name}return p}function Ms(u){var p=Tt.call(L,"placeholder")?L:u;return p.placeholder}function Ye(){var u=L.iteratee||cw;return u=u===cw?ol:u,arguments.length?u(arguments[0],arguments[1]):u}function jc(u,p){var _=u.__data__;return ml(p)?_[typeof p=="string"?"string":"hash"]:_.map}function Fc(u){for(var p=tr(u),_=p.length;_--;){var T=p[_],D=u[T];p[_]=[T,D,Bc(D)]}return p}function fo(u,p){var _=Wa(u,p);return Tf(_)?_:t}function Fd(u){var p=Tt.call(u,Ho),_=u[Ho];try{u[Ho]=t;var T=!0}catch{}var D=pc.call(u);return T&&(p?u[Ho]=_:delete u[Ho]),D}var Ei=ad?function(u){return u==null?[]:(u=jt(u),Qs(ad(u),function(p){return sd.call(u,p)}))}:hw,zg=ad?function(u){for(var p=[];u;)eo(p,Ei(u)),u=xi(u);return p}:hw,zn=Fn;(wc&&zn(new wc(new ArrayBuffer(1)))!=_i||Go&&zn(new Go)!=Qt||_c&&zn(_c.resolve())!=Wl||ro&&zn(new ro)!=Tn||bc&&zn(new bc)!=Bi)&&(zn=function(u){var p=Fn(u),_=p==Ln?u.constructor:t,T=_?po(_):"";if(T)switch(T){case xf:return _i;case io:return Qt;case wg:return Wl;case Qa:return Tn;case Hi:return Bi}return p});function Zf(u,p,_){for(var T=-1,D=_.length;++T<D;){var j=_[T],W=j.size;switch(j.type){case"drop":u+=W;break;case"dropRight":p-=W;break;case"take":p=Kn(p,u+W);break;case"takeRight":u=vn(u,p-W);break}}return{start:u,end:p}}function Bg(u){var p=u.match(Na);return p?p[1].split(tc):[]}function Jf(u,p,_){p=es(p,u);for(var T=-1,D=p.length,j=!1;++T<D;){var W=Ti(p[T]);if(!(j=u!=null&&_(u,W)))break;u=u[W]}return j||++T!=D?j:(D=u==null?0:u.length,!!D&&av(D)&&Yt(W,D)&&(dt(u)||Yc(u)))}function $c(u){var p=u.length,_=new u.constructor(p);return p&&typeof u[0]=="string"&&Tt.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function Bn(u){return typeof u.constructor=="function"&&!Ds(u)?el(xi(u)):{}}function F0(u,p,_){var T=u.constructor;switch(p){case ms:return Mc(u);case Ne:case He:return new T(+u);case _i:return Ig(u,_);case Ia:case gs:case vs:case Gl:case Ma:case Da:case Kl:case Oo:case No:return Og(u,_);case Qt:return new T;case Gr:case ps:return new T(u);case wi:return Mg(u);case Tn:return new T;case Do:return Dg(u)}}function $0(u,p){var _=p.length;if(!_)return u;var T=_-1;return p[T]=(_>1?"& ":"")+p[T],p=p.join(_>2?", ":" "),u.replace(Oa,`{
/* [wrapped with `+p+`] */
`)}function $d(u){return dt(u)||Yc(u)||!!(gg&&u&&u[gg])}function Yt(u,p){var _=typeof u;return p=p??U,!!p&&(_=="number"||_!="symbol"&&we.test(u))&&u>-1&&u%1==0&&u<p}function hr(u,p,_){if(!un(_))return!1;var T=typeof p;return(T=="number"?oi(_)&&Yt(p,_.length):T=="string"&&p in _)?Ns(_[p],u):!1}function Le(u,p){if(dt(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||Ii(u)?!0:Fu.test(u)||!Ql.test(u)||p!=null&&u in jt(p)}function ml(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function zc(u){var p=pl(u),_=L[p];if(typeof _!="function"||!(p in ut.prototype))return!1;if(u===_)return!0;var T=jd(_);return!!T&&u===T[0]}function Ug(u){return!!nd&&nd in u}var z0=Ga?da:fw;function Ds(u){var p=u&&u.constructor,_=typeof p=="function"&&p.prototype||Wi;return u===_}function Bc(u){return u===u&&!un(u)}function zd(u,p){return function(_){return _==null?!1:_[u]===p&&(p!==t||u in jt(_))}}function Vg(u){var p=oe(u,function(T){return _.size===h&&_.clear(),T}),_=p.cache;return p}function Wg(u,p){var _=u[1],T=p[1],D=_|T,j=D<(C|P|B),W=T==B&&_==R||T==B&&_==H&&u[7].length<=p[8]||T==(B|H)&&p[7].length<=p[8]&&_==R;if(!(j||W))return u;T&C&&(u[2]=p[2],D|=_&C?0:I);var Y=p[3];if(Y){var te=u[3];u[3]=te?Ng(te,Y,p[4]):Y,u[4]=te?Kr(u[3],f):p[4]}return Y=p[5],Y&&(te=u[5],u[5]=te?Bf(te,Y,p[6]):Y,u[6]=te?Kr(u[5],f):p[6]),Y=p[7],Y&&(u[7]=Y),T&B&&(u[8]=u[8]==null?p[8]:Kn(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=D,u}function Hg(u){var p=[];if(u!=null)for(var _ in jt(u))p.push(_);return p}function Qf(u){return pc.call(u)}function Bd(u,p,_){return p=vn(p===t?u.length-1:p,0),function(){for(var T=arguments,D=-1,j=vn(T.length-p,0),W=ae(j);++D<j;)W[D]=T[p+D];D=-1;for(var Y=ae(p+1);++D<p;)Y[D]=T[D];return Y[p]=_(W),lr(u,this,Y)}}function Pn(u,p){return p.length<2?u:Cs(u,er(p,0,-1))}function Ci(u,p){for(var _=u.length,T=Kn(p.length,_),D=ur(u);T--;){var j=p[T];u[T]=Yt(j,_)?D[j]:t}return u}function rs(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var ep=ki(Ed),gl=_f||function(u,p){return Gt.setTimeout(u,p)},Nr=ki(Qi);function tp(u,p,_){var T=p+"";return Nr(u,$0(T,qg(Bg(T),_)))}function ki(u){var p=0,_=0;return function(){var T=N0(),D=de-(T-_);if(_=T,D>0){if(++p>=he)return arguments[0]}else p=0;return u.apply(t,arguments)}}function Ud(u,p){var _=-1,T=u.length,D=T-1;for(p=p===t?T:p;++_<p;){var j=al(_,D),W=u[j];u[j]=u[_],u[_]=W}return u.length=p,u}var np=Vg(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Lo,function(_,T,D,j){p.push(D?j.replace(zm,"$1"):T||_)}),p});function Ti(u){if(typeof u=="string"||Ii(u))return u;var p=u+"";return p=="0"&&1/u==-re?"-0":p}function po(u){if(u!=null){try{return fc.call(u)}catch{}try{return u+""}catch{}}return""}function qg(u,p){return Gn(Re,function(_){var T="_."+_[0];p&_[1]&&!Xu(u,T)&&u.push(T)}),u.sort()}function Gg(u){if(u instanceof ut)return u.clone();var p=new Yn(u.__wrapped__,u.__chain__);return p.__actions__=ur(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function Vd(u,p,_){(_?hr(u,p,_):p===t)?p=1:p=vn(pt(p),0);var T=u==null?0:u.length;if(!T||p<1)return[];for(var D=0,j=0,W=ae(qo(T/p));D<T;)W[j++]=er(u,D,D+=p);return W}function rp(u){for(var p=-1,_=u==null?0:u.length,T=0,D=[];++p<_;){var j=u[p];j&&(D[T++]=j)}return D}function ii(){var u=arguments.length;if(!u)return[];for(var p=ae(u-1),_=arguments[0],T=u;T--;)p[T-1]=arguments[T];return eo(dt(_)?ur(_):[_],sn(p,1))}var xt=ft(function(u,p){return xn(u)?Xi(u,sn(p,1,xn,!0)):[]}),Rn=ft(function(u,p){var _=fr(p);return xn(_)&&(_=t),xn(u)?Xi(u,sn(p,1,xn,!0),Ye(_,2)):[]}),yn=ft(function(u,p){var _=fr(p);return xn(_)&&(_=t),xn(u)?Xi(u,sn(p,1,xn,!0),t,_):[]});function Un(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:pt(p),er(u,p<0?0:p,T)):[]}function Lr(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:pt(p),p=T-p,er(u,0,p<0?0:p)):[]}function vl(u,p){return u&&u.length?Rc(u,Ye(p,3),!0,!0):[]}function bn(u,p){return u&&u.length?Rc(u,Ye(p,3),!0):[]}function Uc(u,p,_,T){var D=u==null?0:u.length;return D?(_&&typeof _!="number"&&hr(u,p,_)&&(_=0,T=D),kg(u,p,_,T)):[]}function mo(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var D=_==null?0:pt(_);return D<0&&(D=vn(T+D,0)),Zu(u,Ye(p,3),D)}function Vc(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var D=T-1;return _!==t&&(D=pt(_),D=_<0?vn(T+D,0):Kn(D,T-1)),Zu(u,Ye(p,3),D,!0)}function Wd(u){var p=u==null?0:u.length;return p?sn(u,1):[]}function Wc(u){var p=u==null?0:u.length;return p?sn(u,re):[]}function Sr(u,p){var _=u==null?0:u.length;return _?(p=p===t?1:pt(p),sn(u,p)):[]}function ip(u){for(var p=-1,_=u==null?0:u.length,T={};++p<_;){var D=u[p];T[D[0]]=D[1]}return T}function sa(u){return u&&u.length?u[0]:t}function Os(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var D=_==null?0:pt(_);return D<0&&(D=vn(T+D,0)),Va(u,p,D)}function Hd(u){var p=u==null?0:u.length;return p?er(u,0,-1):[]}var sp=ft(function(u){var p=Bt(u,ul);return p.length&&p[0]===u[0]?_d(p):[]}),go=ft(function(u){var p=fr(u),_=Bt(u,ul);return p===fr(_)?p=t:_.pop(),_.length&&_[0]===u[0]?_d(_,Ye(p,2)):[]}),qd=ft(function(u){var p=fr(u),_=Bt(u,ul);return p=typeof p=="function"?p:t,p&&_.pop(),_.length&&_[0]===u[0]?_d(_,t,p):[]});function vo(u,p){return u==null?"":ld.call(u,p)}function fr(u){var p=u==null?0:u.length;return p?u[p-1]:t}function Hc(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var D=T;return _!==t&&(D=pt(_),D=D<0?vn(T+D,0):Kn(D,T-1)),p===p?I0(u,p,D):Zu(u,ng,D,!0)}function op(u,p){return u&&u.length?Ad(u,pt(p)):t}var Gd=ft(qc);function qc(u,p){return u&&u.length&&p&&p.length?ln(u,p):u}function pr(u,p,_){return u&&u.length&&p&&p.length?ln(u,p,Ye(_,2)):u}function yo(u,p,_){return u&&u.length&&p&&p.length?ln(u,p,t,_):u}var Pi=ns(function(u,p){var _=u==null?0:u.length,T=vd(u,p);return _n(u,Bt(p,function(D){return Yt(D,_)?+D:D}).sort(zf)),T});function Ar(u,p){var _=[];if(!(u&&u.length))return _;var T=-1,D=[],j=u.length;for(p=Ye(p,3);++T<j;){var W=u[T];p(W,T,u)&&(_.push(W),D.push(T))}return _n(u,D),_}function Kd(u){return u==null?u:cd.call(u)}function ap(u,p,_){var T=u==null?0:u.length;return T?(_&&typeof _!="number"&&hr(u,p,_)?(p=0,_=T):(p=p==null?0:pt(p),_=_===t?T:pt(_)),er(u,p,_)):[]}function lp(u,p){return ll(u,p)}function B0(u,p,_){return Cd(u,p,Ye(_,2))}function wo(u,p){var _=u==null?0:u.length;if(_){var T=ll(u,p);if(T<_&&Ns(u[T],p))return T}return-1}function Kg(u,p){return ll(u,p,!0)}function cp(u,p,_){return Cd(u,p,Ye(_,2),!0)}function oa(u,p){var _=u==null?0:u.length;if(_){var T=ll(u,p,!0)-1;if(Ns(u[T],p))return T}return-1}function up(u){return u&&u.length?Nf(u):[]}function aa(u,p){return u&&u.length?Nf(u,Ye(p,2)):[]}function Yg(u){var p=u==null?0:u.length;return p?er(u,1,p):[]}function Xg(u,p,_){return u&&u.length?(p=_||p===t?1:pt(p),er(u,0,p<0?0:p)):[]}function dp(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:pt(p),p=T-p,er(u,p<0?0:p,T)):[]}function Yd(u,p){return u&&u.length?Rc(u,Ye(p,3),!1,!0):[]}function U0(u,p){return u&&u.length?Rc(u,Ye(p,3)):[]}var V0=ft(function(u){return Rs(sn(u,1,xn,!0))}),Zg=ft(function(u){var p=fr(u);return xn(p)&&(p=t),Rs(sn(u,1,xn,!0),Ye(p,2))}),Jg=ft(function(u){var p=fr(u);return p=typeof p=="function"?p:t,Rs(sn(u,1,xn,!0),t,p)});function la(u){return u&&u.length?Rs(u):[]}function W0(u,p){return u&&u.length?Rs(u,Ye(p,2)):[]}function yl(u,p){return p=typeof p=="function"?p:t,u&&u.length?Rs(u,t,p):[]}function Xd(u){if(!(u&&u.length))return[];var p=0;return u=Qs(u,function(_){if(xn(_))return p=vn(_.length,p),!0}),mf(p,function(_){return Bt(u,ff(_))})}function tn(u,p){if(!(u&&u.length))return[];var _=Xd(u);return p==null?_:Bt(_,function(T){return lr(p,t,T)})}var H0=ft(function(u,p){return xn(u)?Xi(u,p):[]}),Qg=ft(function(u){return Td(Qs(u,xn))}),q0=ft(function(u){var p=fr(u);return xn(p)&&(p=t),Td(Qs(u,xn),Ye(p,2))}),G0=ft(function(u){var p=fr(u);return p=typeof p=="function"?p:t,Td(Qs(u,xn),t,p)}),ev=ft(Xd);function tv(u,p){return Ic(u||[],p||[],Zo)}function K0(u,p){return Ic(u||[],p||[],na)}var si=ft(function(u){var p=u.length,_=p>1?u[p-1]:t;return _=typeof _=="function"?(u.pop(),_):t,tn(u,_)});function Zd(u){var p=L(u);return p.__chain__=!0,p}function Y0(u,p){return p(u),u}function Ri(u,p){return p(u)}var Jd=ns(function(u){var p=u.length,_=p?u[0]:0,T=this.__wrapped__,D=function(j){return vd(j,u)};return p>1||this.__actions__.length||!(T instanceof ut)||!Yt(_)?this.thru(D):(T=T.slice(_,+_+(p?1:0)),T.__actions__.push({func:Ri,args:[D],thisArg:t}),new Yn(T,this.__chain__).thru(function(j){return p&&!j.length&&j.push(t),j}))});function ca(){return Zd(this)}function Qd(){return new Yn(this.value(),this.__chain__)}function hp(){this.__values__===t&&(this.__values__=aS(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function fp(){return this}function X0(u){for(var p,_=this;_ instanceof qi;){var T=Gg(_);T.__index__=0,T.__values__=t,p?D.__wrapped__=T:p=T;var D=T;_=_.__wrapped__}return D.__wrapped__=u,p}function pp(){var u=this.__wrapped__;if(u instanceof ut){var p=u;return this.__actions__.length&&(p=new ut(this)),p=p.reverse(),p.__actions__.push({func:Ri,args:[Kd],thisArg:t}),new Yn(p,this.__chain__)}return this.thru(Kd)}function Z0(){return cl(this.__wrapped__,this.__actions__)}var nv=Id(function(u,p,_){Tt.call(u,_)?++u[_]:Yi(u,_,1)});function rv(u,p,_){var T=dt(u)?lf:Ac;return _&&hr(u,p,_)&&(p=t),T(u,Ye(p,3))}function eh(u,p){var _=dt(u)?Qs:Cf;return _(u,Ye(p,3))}var th=ia(mo),iv=ia(Vc);function mp(u,p){return sn(ua(u,p),1)}function J0(u,p){return sn(ua(u,p),re)}function sv(u,p,_){return _=_===t?1:pt(_),sn(ua(u,p),_)}function nh(u,p){var _=dt(u)?Gn:Zi;return _(u,Ye(p,3))}function Gc(u,p){var _=dt(u)?Yu:Cg;return _(u,Ye(p,3))}var gp=Id(function(u,p,_){Tt.call(u,_)?u[_].push(p):Yi(u,_,[p])});function rh(u,p,_,T){u=oi(u)?u:oh(u),_=_&&!T?pt(_):0;var D=u.length;return _<0&&(_=vn(D+_,0)),lv(u)?_<=D&&u.indexOf(p,_)>-1:!!D&&Va(u,p,_)>-1}var ov=ft(function(u,p,_){var T=-1,D=typeof p=="function",j=oi(u)?ae(u.length):[];return Zi(u,function(W){j[++T]=D?lr(p,W,_):ei(W,p,_)}),j}),Q0=Id(function(u,p,_){Yi(u,_,p)});function ua(u,p){var _=dt(u)?Bt:Rf;return _(u,Ye(p,3))}function ew(u,p,_,T){return u==null?[]:(dt(p)||(p=p==null?[]:[p]),_=T?t:_,dt(_)||(_=_==null?[]:[_]),Tc(u,p,_))}var Kc=Id(function(u,p,_){u[_?0:1].push(p)},function(){return[[],[]]});function tw(u,p,_){var T=dt(u)?uf:ig,D=arguments.length<3;return T(u,Ye(p,4),_,D,Zi)}function ih(u,p,_){var T=dt(u)?S0:ig,D=arguments.length<3;return T(u,Ye(p,4),_,D,Cg)}function a(u,p){var _=dt(u)?Qs:Cf;return _(u,Pe(Ye(p,3)))}function c(u){var p=dt(u)?Ki:Qn;return p(u)}function g(u,p,_){(_?hr(u,p,_):p===t)?p=1:p=pt(p);var T=dt(u)?Xo:Df;return T(u,p)}function w(u){var p=dt(u)?Ag:ni;return p(u)}function E(u){if(u==null)return 0;if(oi(u))return lv(u)?Wo(u):u.length;var p=zn(u);return p==Qt||p==Tn?u.size:Ps(u).length}function k(u,p,_){var T=dt(u)?df:Of;return _&&hr(u,p,_)&&(p=t),T(u,Ye(p,3))}var O=ft(function(u,p){if(u==null)return[];var _=p.length;return _>1&&hr(u,p[0],p[1])?p=[]:_>2&&hr(p[0],p[1],p[2])&&(p=[p[0]]),Tc(u,sn(p,1),[])}),V=Vt||function(){return Gt.Date.now()};function G(u,p){if(typeof p!="function")throw new Yr(o);return u=pt(u),function(){if(--u<1)return p.apply(this,arguments)}}function ue(u,p,_){return p=_?t:p,p=u&&p==null?u.length:p,ts(u,B,t,t,t,t,p)}function Ee(u,p){var _;if(typeof p!="function")throw new Yr(o);return u=pt(u),function(){return--u>0&&(_=p.apply(this,arguments)),u<=1&&(p=t),_}}var Te=ft(function(u,p,_){var T=C;if(_.length){var D=Kr(_,Ms(Te));T|=N}return ts(u,T,p,_,D)}),Se=ft(function(u,p,_){var T=C|P;if(_.length){var D=Kr(_,Ms(Se));T|=N}return ts(p,T,u,_,D)});function Oe(u,p,_){p=_?t:p;var T=ts(u,R,t,t,t,t,t,p);return T.placeholder=Oe.placeholder,T}function je(u,p,_){p=_?t:p;var T=ts(u,M,t,t,t,t,t,p);return T.placeholder=je.placeholder,T}function Fe(u,p,_){var T,D,j,W,Y,te,ye=0,_e=!1,Ce=!1,Me=!0;if(typeof u!="function")throw new Yr(o);p=is(p)||0,un(_)&&(_e=!!_.leading,Ce="maxWait"in _,j=Ce?vn(is(_.maxWait)||0,p):j,Me="trailing"in _?!!_.trailing:Me);function Ue(Sn){var Ls=T,fa=D;return T=D=t,ye=Sn,W=u.apply(fa,Ls),W}function Je(Sn){return ye=Sn,Y=gl(wt,p),_e?Ue(Sn):W}function gt(Sn){var Ls=Sn-te,fa=Sn-ye,_S=p-Ls;return Ce?Kn(_S,j-fa):_S}function Qe(Sn){var Ls=Sn-te,fa=Sn-ye;return te===t||Ls>=p||Ls<0||Ce&&fa>=j}function wt(){var Sn=V();if(Qe(Sn))return St(Sn);Y=gl(wt,gt(Sn))}function St(Sn){return Y=t,Me&&T?Ue(Sn):(T=D=t,W)}function Mi(){Y!==t&&Ff(Y),ye=0,T=te=D=Y=t}function jr(){return Y===t?W:St(V())}function Di(){var Sn=V(),Ls=Qe(Sn);if(T=arguments,D=this,te=Sn,Ls){if(Y===t)return Je(te);if(Ce)return Ff(Y),Y=gl(wt,p),Ue(te)}return Y===t&&(Y=gl(wt,p)),W}return Di.cancel=Mi,Di.flush=jr,Di}var cn=ft(function(u,p){return Ef(u,1,p)}),se=ft(function(u,p,_){return Ef(u,is(p)||0,_)});function X(u){return ts(u,K)}function oe(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new Yr(o);var _=function(){var T=arguments,D=p?p.apply(this,T):T[0],j=_.cache;if(j.has(D))return j.get(D);var W=u.apply(this,T);return _.cache=j.set(D,W)||j,W};return _.cache=new(oe.Cache||Xr),_}oe.Cache=Xr;function Pe(u){if(typeof u!="function")throw new Yr(o);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function Be(u){return Ee(2,u)}var Ke=Rg(function(u,p){p=p.length==1&&dt(p[0])?Bt(p[0],Rr(Ye())):Bt(sn(p,1),Rr(Ye()));var _=p.length;return ft(function(T){for(var D=-1,j=Kn(T.length,_);++D<j;)T[D]=p[D].call(this,T[D]);return lr(u,this,T)})}),qe=ft(function(u,p){var _=Kr(p,Ms(qe));return ts(u,N,t,p,_)}),Ze=ft(function(u,p){var _=Kr(p,Ms(Ze));return ts(u,F,t,p,_)}),In=ns(function(u,p){return ts(u,H,t,t,t,p)});function Pt(u,p){if(typeof u!="function")throw new Yr(o);return p=p===t?p:pt(p),ft(u,p)}function _o(u,p){if(typeof u!="function")throw new Yr(o);return p=p==null?0:vn(pt(p),0),ft(function(_){var T=_[p],D=Is(_,0,p);return T&&eo(D,T),lr(u,this,D)})}function nw(u,p,_){var T=!0,D=!0;if(typeof u!="function")throw new Yr(o);return un(_)&&(T="leading"in _?!!_.leading:T,D="trailing"in _?!!_.trailing:D),Fe(u,p,{leading:T,maxWait:p,trailing:D})}function tD(u){return ue(u,1)}function nD(u,p){return qe(Pd(p),u)}function rD(){if(!arguments.length)return[];var u=arguments[0];return dt(u)?u:[u]}function iD(u){return br(u,b)}function sD(u,p){return p=typeof p=="function"?p:t,br(u,b,p)}function oD(u){return br(u,m|b)}function aD(u,p){return p=typeof p=="function"?p:t,br(u,m|b,p)}function lD(u,p){return p==null||Sc(u,p,tr(p))}function Ns(u,p){return u===p||u!==u&&p!==p}var cD=Ld(co),uD=Ld(function(u,p){return u>=p}),Yc=bd(function(){return arguments}())?bd:function(u){return wn(u)&&Tt.call(u,"callee")&&!sd.call(u,"callee")},dt=ae.isArray,dD=of?Rr(of):Tg;function oi(u){return u!=null&&av(u.length)&&!da(u)}function xn(u){return wn(u)&&oi(u)}function hD(u){return u===!0||u===!1||wn(u)&&Fn(u)==Ne}var wl=bf||fw,fD=vr?Rr(vr):Ts;function pD(u){return wn(u)&&u.nodeType===1&&!vp(u)}function mD(u){if(u==null)return!0;if(oi(u)&&(dt(u)||typeof u=="string"||typeof u.splice=="function"||wl(u)||sh(u)||Yc(u)))return!u.length;var p=zn(u);if(p==Qt||p==Tn)return!u.size;if(Ds(u))return!Ps(u).length;for(var _ in u)if(Tt.call(u,_))return!1;return!0}function gD(u,p){return ti(u,p)}function vD(u,p,_){_=typeof _=="function"?_:t;var T=_?_(u,p):t;return T===t?ti(u,p,t,_):!!T}function rw(u){if(!wn(u))return!1;var p=Fn(u);return p==at||p==Xe||typeof u.message=="string"&&typeof u.name=="string"&&!vp(u)}function yD(u){return typeof u=="number"&&Ya(u)}function da(u){if(!un(u))return!1;var p=Fn(u);return p==Ot||p==mn||p==ve||p==Hl}function rS(u){return typeof u=="number"&&u==pt(u)}function av(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=U}function un(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function wn(u){return u!=null&&typeof u=="object"}var iS=Vo?Rr(Vo):Pg;function wD(u,p){return u===p||sl(u,p,Fc(p))}function _D(u,p,_){return _=typeof _=="function"?_:t,sl(u,p,Fc(p),_)}function bD(u){return sS(u)&&u!=+u}function xD(u){if(z0(u))throw new tt(s);return Tf(u)}function SD(u){return u===null}function AD(u){return u==null}function sS(u){return typeof u=="number"||wn(u)&&Fn(u)==Gr}function vp(u){if(!wn(u)||Fn(u)!=Ln)return!1;var p=xi(u);if(p===null)return!0;var _=Tt.call(p,"constructor")&&p.constructor;return typeof _=="function"&&_ instanceof _&&fc.call(_)==rd}var iw=Ku?Rr(Ku):Cc;function ED(u){return rS(u)&&u>=-U&&u<=U}var oS=Ua?Rr(Ua):Ji;function lv(u){return typeof u=="string"||!dt(u)&&wn(u)&&Fn(u)==ps}function Ii(u){return typeof u=="symbol"||wn(u)&&Fn(u)==Do}var sh=Qm?Rr(Qm):kc;function CD(u){return u===t}function kD(u){return wn(u)&&zn(u)==Bi}function TD(u){return wn(u)&&Fn(u)==ql}var PD=Ld(uo),RD=Ld(function(u,p){return u<=p});function aS(u){if(!u)return[];if(oi(u))return lv(u)?Ir(u):ur(u);if(Ss&&u[Ss])return P0(u[Ss]());var p=zn(u),_=p==Qt?Qu:p==Tn?to:oh;return _(u)}function ha(u){if(!u)return u===0?u:0;if(u=is(u),u===re||u===-re){var p=u<0?-1:1;return p*ne}return u===u?u:0}function pt(u){var p=ha(u),_=p%1;return p===p?_?p-_:p:0}function lS(u){return u?Es(pt(u),0,$):0}function is(u){if(typeof u=="number")return u;if(Ii(u))return Q;if(un(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=un(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=sg(u);var _=J.test(u);return _||be.test(u)?qu(u.slice(2),_?2:8):ce.test(u)?Q:+u}function cS(u){return Ai(u,ai(u))}function ID(u){return u?Es(pt(u),-U,U):u===0?u:0}function Ft(u){return u==null?"":xr(u)}var MD=dl(function(u,p){if(Ds(p)||oi(p)){Ai(p,tr(p),u);return}for(var _ in p)Tt.call(p,_)&&Zo(u,_,p[_])}),uS=dl(function(u,p){Ai(p,ai(p),u)}),cv=dl(function(u,p,_,T){Ai(p,ai(p),u,T)}),DD=dl(function(u,p,_,T){Ai(p,tr(p),u,T)}),OD=ns(vd);function ND(u,p){var _=el(u);return p==null?_:Ht(_,p)}var LD=ft(function(u,p){u=jt(u);var _=-1,T=p.length,D=T>2?p[2]:t;for(D&&hr(p[0],p[1],D)&&(T=1);++_<T;)for(var j=p[_],W=ai(j),Y=-1,te=W.length;++Y<te;){var ye=W[Y],_e=u[ye];(_e===t||Ns(_e,Wi[ye])&&!Tt.call(u,ye))&&(u[ye]=j[ye])}return u}),jD=ft(function(u){return u.push(t,Gf),lr(dS,t,u)});function FD(u,p){return tg(u,Ye(p,3),Or)}function $D(u,p){return tg(u,Ye(p,3),lo)}function zD(u,p){return u==null?u:yd(u,Ye(p,3),ai)}function BD(u,p){return u==null?u:Ec(u,Ye(p,3),ai)}function UD(u,p){return u&&Or(u,Ye(p,3))}function VD(u,p){return u&&lo(u,Ye(p,3))}function WD(u){return u==null?[]:il(u,tr(u))}function HD(u){return u==null?[]:il(u,ai(u))}function sw(u,p,_){var T=u==null?t:Cs(u,p);return T===t?_:T}function qD(u,p){return u!=null&&Jf(u,p,Qr)}function ow(u,p){return u!=null&&Jf(u,p,Qo)}var GD=Lg(function(u,p,_){p!=null&&typeof p.toString!="function"&&(p=pc.call(p)),u[p]=_},lw(li)),KD=Lg(function(u,p,_){p!=null&&typeof p.toString!="function"&&(p=pc.call(p)),Tt.call(u,p)?u[p].push(_):u[p]=[_]},Ye),YD=ft(ei);function tr(u){return oi(u)?Gi(u):Ps(u)}function ai(u){return oi(u)?Gi(u,!0):Pf(u)}function XD(u,p){var _={};return p=Ye(p,3),Or(u,function(T,D,j){Yi(_,p(T,D,j),T)}),_}function ZD(u,p){var _={};return p=Ye(p,3),Or(u,function(T,D,j){Yi(_,D,p(T,D,j))}),_}var JD=dl(function(u,p,_){ea(u,p,_)}),dS=dl(function(u,p,_,T){ea(u,p,_,T)}),QD=ns(function(u,p){var _={};if(u==null)return _;var T=!1;p=Bt(p,function(j){return j=es(j,u),T||(T=j.length>1),j}),Ai(u,Lc(u),_),T&&(_=br(_,m|v|b,Kf));for(var D=p.length;D--;)kd(_,p[D]);return _});function eO(u,p){return hS(u,Pe(Ye(p)))}var tO=ns(function(u,p){return u==null?{}:Mf(u,p)});function hS(u,p){if(u==null)return{};var _=Bt(Lc(u),function(T){return[T]});return p=Ye(p),ho(u,_,function(T,D){return p(T,D[0])})}function nO(u,p,_){p=es(p,u);var T=-1,D=p.length;for(D||(D=1,u=t);++T<D;){var j=u==null?t:u[Ti(p[T])];j===t&&(T=D,j=_),u=da(j)?j.call(u):j}return u}function rO(u,p,_){return u==null?u:na(u,p,_)}function iO(u,p,_,T){return T=typeof T=="function"?T:t,u==null?u:na(u,p,_,T)}var fS=Hf(tr),pS=Hf(ai);function sO(u,p,_){var T=dt(u),D=T||wl(u)||sh(u);if(p=Ye(p,4),_==null){var j=u&&u.constructor;D?_=T?new j:[]:un(u)?_=da(j)?el(xi(u)):{}:_={}}return(D?Gn:Or)(u,function(W,Y,te){return p(_,W,Y,te)}),_}function oO(u,p){return u==null?!0:kd(u,p)}function aO(u,p,_){return u==null?u:jf(u,p,Pd(_))}function lO(u,p,_,T){return T=typeof T=="function"?T:t,u==null?u:jf(u,p,Pd(_),T)}function oh(u){return u==null?[]:dc(u,tr(u))}function cO(u){return u==null?[]:dc(u,ai(u))}function uO(u,p,_){return _===t&&(_=p,p=t),_!==t&&(_=is(_),_=_===_?_:0),p!==t&&(p=is(p),p=p===p?p:0),Es(is(u),p,_)}function dO(u,p,_){return p=ha(p),_===t?(_=p,p=0):_=ha(_),u=is(u),kf(u,p,_)}function hO(u,p,_){if(_&&typeof _!="boolean"&&hr(u,p,_)&&(p=_=t),_===t&&(typeof p=="boolean"?(_=p,p=t):typeof u=="boolean"&&(_=u,u=t)),u===t&&p===t?(u=0,p=1):(u=ha(u),p===t?(p=u,u=0):p=ha(p)),u>p){var T=u;u=p,p=T}if(_||u%1||p%1){var D=yc();return Kn(u+D*(p-u+rf("1e-"+((D+"").length-1))),p)}return al(u,p)}var fO=ra(function(u,p,_){return p=p.toLowerCase(),u+(_?mS(p):p)});function mS(u){return aw(Ft(u).toLowerCase())}function gS(u){return u=Ft(u),u&&u.replace(ze,lg).replace(Ym,"")}function pO(u,p,_){u=Ft(u),p=xr(p);var T=u.length;_=_===t?T:Es(pt(_),0,T);var D=_;return _-=p.length,_>=0&&u.slice(_,D)==p}function mO(u){return u=Ft(u),u&&Nu.test(u)?u.replace(ws,cg):u}function gO(u){return u=Ft(u),u&&Fo.test(u)?u.replace(jo,"\\$&"):u}var vO=ra(function(u,p,_){return u+(_?"-":"")+p.toLowerCase()}),yO=ra(function(u,p,_){return u+(_?" ":"")+p.toLowerCase()}),wO=Uf("toLowerCase");function _O(u,p,_){u=Ft(u),p=pt(p);var T=p?Wo(u):0;if(!p||T>=p)return u;var D=(p-T)/2;return Oc(no(D),_)+u+Oc(qo(D),_)}function bO(u,p,_){u=Ft(u),p=pt(p);var T=p?Wo(u):0;return p&&T<p?u+Oc(p-T,_):u}function xO(u,p,_){u=Ft(u),p=pt(p);var T=p?Wo(u):0;return p&&T<p?Oc(p-T,_)+u:u}function SO(u,p,_){return _||p==null?p=0:p&&(p=+p),yg(Ft(u).replace(ec,""),p||0)}function AO(u,p,_){return(_?hr(u,p,_):p===t)?p=1:p=pt(p),ta(Ft(u),p)}function EO(){var u=arguments,p=Ft(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var CO=ra(function(u,p,_){return u+(_?"_":"")+p.toLowerCase()});function kO(u,p,_){return _&&typeof _!="number"&&hr(u,p,_)&&(p=_=t),_=_===t?$:_>>>0,_?(u=Ft(u),u&&(typeof p=="string"||p!=null&&!iw(p))&&(p=xr(p),!p&&Ha(u))?Is(Ir(u),0,_):u.split(p,_)):[]}var TO=ra(function(u,p,_){return u+(_?" ":"")+aw(p)});function PO(u,p,_){return u=Ft(u),_=_==null?0:Es(pt(_),0,u.length),p=xr(p),u.slice(_,_+p.length)==p}function RO(u,p,_){var T=L.templateSettings;_&&hr(u,p,_)&&(p=t),u=Ft(u),p=cv({},p,T,qf);var D=cv({},p.imports,T.imports,qf),j=tr(D),W=dc(D,j),Y,te,ye=0,_e=p.interpolate||bt,Ce="__p += '",Me=hc((p.escape||bt).source+"|"+_e.source+"|"+(_e===Jl?Ks:bt).source+"|"+(p.evaluate||bt).source+"|$","g"),Ue="//# sourceURL="+(Tt.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_0+"]")+`
`;u.replace(Me,function(Qe,wt,St,Mi,jr,Di){return St||(St=Mi),Ce+=u.slice(ye,Di).replace(jn,ug),wt&&(Y=!0,Ce+=`' +
__e(`+wt+`) +
'`),jr&&(te=!0,Ce+=`';
`+jr+`;
__p += '`),St&&(Ce+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),ye=Di+Qe.length,Qe}),Ce+=`';
`;var Je=Tt.call(p,"variable")&&p.variable;if(!Je)Ce=`with (obj) {
`+Ce+`
}
`;else if($m.test(Je))throw new tt(l);Ce=(te?Ce.replace(Yl,""):Ce).replace(Xl,"$1").replace(Zl,"$1;"),Ce="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ce+`return __p
}`;var gt=yS(function(){return kt(j,Ue+"return "+Ce).apply(t,W)});if(gt.source=Ce,rw(gt))throw gt;return gt}function IO(u){return Ft(u).toLowerCase()}function MO(u){return Ft(u).toUpperCase()}function DO(u,p,_){if(u=Ft(u),u&&(_||p===t))return sg(u);if(!u||!(p=xr(p)))return u;var T=Ir(u),D=Ir(p),j=og(T,D),W=gf(T,D)+1;return Is(T,j,W).join("")}function OO(u,p,_){if(u=Ft(u),u&&(_||p===t))return u.slice(0,td(u)+1);if(!u||!(p=xr(p)))return u;var T=Ir(u),D=gf(T,Ir(p))+1;return Is(T,0,D).join("")}function NO(u,p,_){if(u=Ft(u),u&&(_||p===t))return u.replace(ec,"");if(!u||!(p=xr(p)))return u;var T=Ir(u),D=og(T,Ir(p));return Is(T,D).join("")}function LO(u,p){var _=le,T=me;if(un(p)){var D="separator"in p?p.separator:D;_="length"in p?pt(p.length):_,T="omission"in p?xr(p.omission):T}u=Ft(u);var j=u.length;if(Ha(u)){var W=Ir(u);j=W.length}if(_>=j)return u;var Y=_-Wo(T);if(Y<1)return T;var te=W?Is(W,0,Y).join(""):u.slice(0,Y);if(D===t)return te+T;if(W&&(Y+=te.length-Y),iw(D)){if(u.slice(Y).search(D)){var ye,_e=te;for(D.global||(D=hc(D.source,Ft(nc.exec(D))+"g")),D.lastIndex=0;ye=D.exec(_e);)var Ce=ye.index;te=te.slice(0,Ce===t?Y:Ce)}}else if(u.indexOf(xr(D),Y)!=Y){var Me=te.lastIndexOf(D);Me>-1&&(te=te.slice(0,Me))}return te+T}function jO(u){return u=Ft(u),u&&Ou.test(u)?u.replace(ys,dg):u}var FO=ra(function(u,p,_){return u+(_?" ":"")+p.toUpperCase()}),aw=Uf("toUpperCase");function vS(u,p,_){return u=Ft(u),p=_?t:p,p===t?T0(u)?M0(u):E0(u):u.match(p)||[]}var yS=ft(function(u,p){try{return lr(u,t,p)}catch(_){return rw(_)?_:new tt(_)}}),$O=ns(function(u,p){return Gn(p,function(_){_=Ti(_),Yi(u,_,Te(u[_],u))}),u});function zO(u){var p=u==null?0:u.length,_=Ye();return u=p?Bt(u,function(T){if(typeof T[1]!="function")throw new Yr(o);return[_(T[0]),T[1]]}):[],ft(function(T){for(var D=-1;++D<p;){var j=u[D];if(lr(j[0],this,T))return lr(j[1],this,T)}})}function BO(u){return Eg(br(u,m))}function lw(u){return function(){return u}}function UO(u,p){return u==null||u!==u?p:u}var VO=Od(),WO=Od(!0);function li(u){return u}function cw(u){return ol(typeof u=="function"?u:br(u,m))}function HO(u){return Sd(br(u,m))}function qO(u,p){return Kt(u,br(p,m))}var GO=ft(function(u,p){return function(_){return ei(_,u,p)}}),KO=ft(function(u,p){return function(_){return ei(u,_,p)}});function uw(u,p,_){var T=tr(p),D=il(p,T);_==null&&!(un(p)&&(D.length||!T.length))&&(_=p,p=u,u=this,D=il(p,tr(p)));var j=!(un(_)&&"chain"in _)||!!_.chain,W=da(u);return Gn(D,function(Y){var te=p[Y];u[Y]=te,W&&(u.prototype[Y]=function(){var ye=this.__chain__;if(j||ye){var _e=u(this.__wrapped__),Ce=_e.__actions__=ur(this.__actions__);return Ce.push({func:te,args:arguments,thisArg:u}),_e.__chain__=ye,_e}return te.apply(u,eo([this.value()],arguments))})}),u}function YO(){return Gt._===this&&(Gt._=pg),this}function dw(){}function XO(u){return u=pt(u),ft(function(p){return Ad(p,u)})}var ZO=Nd(Bt),JO=Nd(lf),QO=Nd(df);function wS(u){return Le(u)?ff(Ti(u)):en(u)}function eN(u){return function(p){return u==null?t:Cs(u,p)}}var tN=Wf(),nN=Wf(!0);function hw(){return[]}function fw(){return!1}function rN(){return{}}function iN(){return""}function sN(){return!0}function oN(u,p){if(u=pt(u),u<1||u>U)return[];var _=$,T=Kn(u,$);p=Ye(p),u-=$;for(var D=mf(T,p);++_<u;)p(_);return D}function aN(u){return dt(u)?Bt(u,Ti):Ii(u)?[u]:ur(np(Ft(u)))}function lN(u){var p=++Ka;return Ft(u)+p}var cN=Dc(function(u,p){return u+p},0),uN=$n("ceil"),dN=Dc(function(u,p){return u/p},1),hN=$n("floor");function fN(u){return u&&u.length?Jo(u,li,co):t}function pN(u,p){return u&&u.length?Jo(u,Ye(p,2),co):t}function mN(u){return rg(u,li)}function gN(u,p){return rg(u,Ye(p,2))}function vN(u){return u&&u.length?Jo(u,li,uo):t}function yN(u,p){return u&&u.length?Jo(u,Ye(p,2),uo):t}var wN=Dc(function(u,p){return u*p},1),_N=$n("round"),bN=Dc(function(u,p){return u-p},0);function xN(u){return u&&u.length?pf(u,li):0}function SN(u,p){return u&&u.length?pf(u,Ye(p,2)):0}return L.after=G,L.ary=ue,L.assign=MD,L.assignIn=uS,L.assignInWith=cv,L.assignWith=DD,L.at=OD,L.before=Ee,L.bind=Te,L.bindAll=$O,L.bindKey=Se,L.castArray=rD,L.chain=Zd,L.chunk=Vd,L.compact=rp,L.concat=ii,L.cond=zO,L.conforms=BO,L.constant=lw,L.countBy=nv,L.create=ND,L.curry=Oe,L.curryRight=je,L.debounce=Fe,L.defaults=LD,L.defaultsDeep=jD,L.defer=cn,L.delay=se,L.difference=xt,L.differenceBy=Rn,L.differenceWith=yn,L.drop=Un,L.dropRight=Lr,L.dropRightWhile=vl,L.dropWhile=bn,L.fill=Uc,L.filter=eh,L.flatMap=mp,L.flatMapDeep=J0,L.flatMapDepth=sv,L.flatten=Wd,L.flattenDeep=Wc,L.flattenDepth=Sr,L.flip=X,L.flow=VO,L.flowRight=WO,L.fromPairs=ip,L.functions=WD,L.functionsIn=HD,L.groupBy=gp,L.initial=Hd,L.intersection=sp,L.intersectionBy=go,L.intersectionWith=qd,L.invert=GD,L.invertBy=KD,L.invokeMap=ov,L.iteratee=cw,L.keyBy=Q0,L.keys=tr,L.keysIn=ai,L.map=ua,L.mapKeys=XD,L.mapValues=ZD,L.matches=HO,L.matchesProperty=qO,L.memoize=oe,L.merge=JD,L.mergeWith=dS,L.method=GO,L.methodOf=KO,L.mixin=uw,L.negate=Pe,L.nthArg=XO,L.omit=QD,L.omitBy=eO,L.once=Be,L.orderBy=ew,L.over=ZO,L.overArgs=Ke,L.overEvery=JO,L.overSome=QO,L.partial=qe,L.partialRight=Ze,L.partition=Kc,L.pick=tO,L.pickBy=hS,L.property=wS,L.propertyOf=eN,L.pull=Gd,L.pullAll=qc,L.pullAllBy=pr,L.pullAllWith=yo,L.pullAt=Pi,L.range=tN,L.rangeRight=nN,L.rearg=In,L.reject=a,L.remove=Ar,L.rest=Pt,L.reverse=Kd,L.sampleSize=g,L.set=rO,L.setWith=iO,L.shuffle=w,L.slice=ap,L.sortBy=O,L.sortedUniq=up,L.sortedUniqBy=aa,L.split=kO,L.spread=_o,L.tail=Yg,L.take=Xg,L.takeRight=dp,L.takeRightWhile=Yd,L.takeWhile=U0,L.tap=Y0,L.throttle=nw,L.thru=Ri,L.toArray=aS,L.toPairs=fS,L.toPairsIn=pS,L.toPath=aN,L.toPlainObject=cS,L.transform=sO,L.unary=tD,L.union=V0,L.unionBy=Zg,L.unionWith=Jg,L.uniq=la,L.uniqBy=W0,L.uniqWith=yl,L.unset=oO,L.unzip=Xd,L.unzipWith=tn,L.update=aO,L.updateWith=lO,L.values=oh,L.valuesIn=cO,L.without=H0,L.words=vS,L.wrap=nD,L.xor=Qg,L.xorBy=q0,L.xorWith=G0,L.zip=ev,L.zipObject=tv,L.zipObjectDeep=K0,L.zipWith=si,L.entries=fS,L.entriesIn=pS,L.extend=uS,L.extendWith=cv,uw(L,L),L.add=cN,L.attempt=yS,L.camelCase=fO,L.capitalize=mS,L.ceil=uN,L.clamp=uO,L.clone=iD,L.cloneDeep=oD,L.cloneDeepWith=aD,L.cloneWith=sD,L.conformsTo=lD,L.deburr=gS,L.defaultTo=UO,L.divide=dN,L.endsWith=pO,L.eq=Ns,L.escape=mO,L.escapeRegExp=gO,L.every=rv,L.find=th,L.findIndex=mo,L.findKey=FD,L.findLast=iv,L.findLastIndex=Vc,L.findLastKey=$D,L.floor=hN,L.forEach=nh,L.forEachRight=Gc,L.forIn=zD,L.forInRight=BD,L.forOwn=UD,L.forOwnRight=VD,L.get=sw,L.gt=cD,L.gte=uD,L.has=qD,L.hasIn=ow,L.head=sa,L.identity=li,L.includes=rh,L.indexOf=Os,L.inRange=dO,L.invoke=YD,L.isArguments=Yc,L.isArray=dt,L.isArrayBuffer=dD,L.isArrayLike=oi,L.isArrayLikeObject=xn,L.isBoolean=hD,L.isBuffer=wl,L.isDate=fD,L.isElement=pD,L.isEmpty=mD,L.isEqual=gD,L.isEqualWith=vD,L.isError=rw,L.isFinite=yD,L.isFunction=da,L.isInteger=rS,L.isLength=av,L.isMap=iS,L.isMatch=wD,L.isMatchWith=_D,L.isNaN=bD,L.isNative=xD,L.isNil=AD,L.isNull=SD,L.isNumber=sS,L.isObject=un,L.isObjectLike=wn,L.isPlainObject=vp,L.isRegExp=iw,L.isSafeInteger=ED,L.isSet=oS,L.isString=lv,L.isSymbol=Ii,L.isTypedArray=sh,L.isUndefined=CD,L.isWeakMap=kD,L.isWeakSet=TD,L.join=vo,L.kebabCase=vO,L.last=fr,L.lastIndexOf=Hc,L.lowerCase=yO,L.lowerFirst=wO,L.lt=PD,L.lte=RD,L.max=fN,L.maxBy=pN,L.mean=mN,L.meanBy=gN,L.min=vN,L.minBy=yN,L.stubArray=hw,L.stubFalse=fw,L.stubObject=rN,L.stubString=iN,L.stubTrue=sN,L.multiply=wN,L.nth=op,L.noConflict=YO,L.noop=dw,L.now=V,L.pad=_O,L.padEnd=bO,L.padStart=xO,L.parseInt=SO,L.random=hO,L.reduce=tw,L.reduceRight=ih,L.repeat=AO,L.replace=EO,L.result=nO,L.round=_N,L.runInContext=ee,L.sample=c,L.size=E,L.snakeCase=CO,L.some=k,L.sortedIndex=lp,L.sortedIndexBy=B0,L.sortedIndexOf=wo,L.sortedLastIndex=Kg,L.sortedLastIndexBy=cp,L.sortedLastIndexOf=oa,L.startCase=TO,L.startsWith=PO,L.subtract=bN,L.sum=xN,L.sumBy=SN,L.template=RO,L.times=oN,L.toFinite=ha,L.toInteger=pt,L.toLength=lS,L.toLower=IO,L.toNumber=is,L.toSafeInteger=ID,L.toString=Ft,L.toUpper=MO,L.trim=DO,L.trimEnd=OO,L.trimStart=NO,L.truncate=LO,L.unescape=jO,L.uniqueId=lN,L.upperCase=FO,L.upperFirst=aw,L.each=nh,L.eachRight=Gc,L.first=sa,uw(L,function(){var u={};return Or(L,function(p,_){Tt.call(L.prototype,_)||(u[_]=p)}),u}(),{chain:!1}),L.VERSION=r,Gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){L[u].placeholder=L}),Gn(["drop","take"],function(u,p){ut.prototype[u]=function(_){_=_===t?1:vn(pt(_),0);var T=this.__filtered__&&!p?new ut(this):this.clone();return T.__filtered__?T.__takeCount__=Kn(_,T.__takeCount__):T.__views__.push({size:Kn(_,$),type:u+(T.__dir__<0?"Right":"")}),T},ut.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Gn(["filter","map","takeWhile"],function(u,p){var _=p+1,T=_==fe||_==q;ut.prototype[u]=function(D){var j=this.clone();return j.__iteratees__.push({iteratee:Ye(D,3),type:_}),j.__filtered__=j.__filtered__||T,j}}),Gn(["head","last"],function(u,p){var _="take"+(p?"Right":"");ut.prototype[u]=function(){return this[_](1).value()[0]}}),Gn(["initial","tail"],function(u,p){var _="drop"+(p?"":"Right");ut.prototype[u]=function(){return this.__filtered__?new ut(this):this[_](1)}}),ut.prototype.compact=function(){return this.filter(li)},ut.prototype.find=function(u){return this.filter(u).head()},ut.prototype.findLast=function(u){return this.reverse().find(u)},ut.prototype.invokeMap=ft(function(u,p){return typeof u=="function"?new ut(this):this.map(function(_){return ei(_,u,p)})}),ut.prototype.reject=function(u){return this.filter(Pe(Ye(u)))},ut.prototype.slice=function(u,p){u=pt(u);var _=this;return _.__filtered__&&(u>0||p<0)?new ut(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),p!==t&&(p=pt(p),_=p<0?_.dropRight(-p):_.take(p-u)),_)},ut.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ut.prototype.toArray=function(){return this.take($)},Or(ut.prototype,function(u,p){var _=/^(?:filter|find|map|reject)|While$/.test(p),T=/^(?:head|last)$/.test(p),D=L[T?"take"+(p=="last"?"Right":""):p],j=T||/^find/.test(p);D&&(L.prototype[p]=function(){var W=this.__wrapped__,Y=T?[1]:arguments,te=W instanceof ut,ye=Y[0],_e=te||dt(W),Ce=function(wt){var St=D.apply(L,eo([wt],Y));return T&&Me?St[0]:St};_e&&_&&typeof ye=="function"&&ye.length!=1&&(te=_e=!1);var Me=this.__chain__,Ue=!!this.__actions__.length,Je=j&&!Me,gt=te&&!Ue;if(!j&&_e){W=gt?W:new ut(this);var Qe=u.apply(W,Y);return Qe.__actions__.push({func:Ri,args:[Ce],thisArg:t}),new Yn(Qe,Me)}return Je&&gt?u.apply(this,Y):(Qe=this.thru(Ce),Je?T?Qe.value()[0]:Qe.value():Qe)})}),Gn(["pop","push","shift","sort","splice","unshift"],function(u){var p=bs[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",T=/^(?:pop|shift)$/.test(u);L.prototype[u]=function(){var D=arguments;if(T&&!this.__chain__){var j=this.value();return p.apply(dt(j)?j:[],D)}return this[_](function(W){return p.apply(dt(W)?W:[],D)})}}),Or(ut.prototype,function(u,p){var _=L[p];if(_){var T=_.name+"";Tt.call(Ja,T)||(Ja[T]=[]),Ja[T].push({name:p,func:_})}}),Ja[fl(t,P).name]=[{name:"wrapper",func:t}],ut.prototype.clone=hd,ut.prototype.reverse=Sf,ut.prototype.value=tl,L.prototype.at=Jd,L.prototype.chain=ca,L.prototype.commit=Qd,L.prototype.next=hp,L.prototype.plant=X0,L.prototype.reverse=pp,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=Z0,L.prototype.first=L.prototype.head,Ss&&(L.prototype[Ss]=fp),L},qa=D0();Vi?((Vi.exports=qa)._=qa,uc._=qa):Gt._=qa}).call(VH)}(Fp,Fp.exports)),Fp.exports}var OZ=WH();function ht(...n){return UH(zT(n))}function NZ(n,e){const t={position:n.position,size:n.size,styles:n.styles,visible:n.visible!==!1};if(e==="desktop")return t;const r=n.layouts?.[e]||{};return{position:r.position||t.position,size:r.size||t.size,styles:{...t.styles,...r.styles||{}},visible:r.visible!==void 0?r.visible:t.visible}}function LZ(n){return typeof n!="string"?(console.warn("sanitizeFilename expects a string argument"),`invalid_filename_${Date.now()}`):n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"")}function jZ(n,e=!0){const t=Number(n);if(isNaN(t))return e?"R$ 0,00":"0,00";const r={style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2};return e?t.toLocaleString("pt-BR",r):t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function WE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function By(...n){return e=>{let t=!1;const r=n.map(i=>{const s=WE(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():WE(n[i],null)}}}}function Et(...n){return A.useCallback(By(...n),n)}function pu(n){const e=qH(n),t=A.forwardRef((r,i)=>{const{children:s,...o}=r,l=A.Children.toArray(s),d=l.find(GH);if(d){const h=d.props.children,f=l.map(m=>m===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:m);return y.jsx(e,{...o,ref:i,children:A.isValidElement(h)?A.cloneElement(h,void 0,f):null})}return y.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var HH=pu("Slot");function qH(n){const e=A.forwardRef((t,r)=>{const{children:i,...s}=t;if(A.isValidElement(i)){const o=YH(i),l=KH(s,i.props);return i.type!==A.Fragment&&(l.ref=r?By(r,o):o),A.cloneElement(i,l)}return A.Children.count(i)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var qT=Symbol("radix.slottable");function FZ(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=qT,e}function GH(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===qT}function KH(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...l)=>{const d=s(...l);return i(...l),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function YH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const HE=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,qE=zT,GT=(n,e)=>t=>{var r;if(e?.variants==null)return qE(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(h=>{const f=t?.[h],m=s?.[h];if(f===null)return null;const v=HE(f)||HE(m);return i[h][v]}),l=t&&Object.entries(t).reduce((h,f)=>{let[m,v]=f;return v===void 0||(h[m]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:m,className:v,...b}=f;return Object.entries(b).every(S=>{let[x,C]=S;return Array.isArray(C)?C.includes({...s,...l}[x]):{...s,...l}[x]===C})?[...h,m,v]:h},[]);return qE(n,o,d,t?.class,t?.className)},XH=GT("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-button-primary text-button-primary-foreground hover:bg-button-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Dt=lt.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?HH:"button";return y.jsx(o,{className:ht(XH({variant:e,size:t,className:n})),ref:s,...i})});Dt.displayName="Button";const gh=({icon:n,text:e,active:t,onClick:r,collapsed:i,isBottomIcon:s=!1,hideActiveIndicator:o=!1,customStyle:l="",activeStyle:d=""})=>y.jsxs("li",{className:ht(`
      relative flex items-center py-2 px-3 font-medium rounded-md cursor-pointer
      transition-colors group text-sm`,t?d||"bg-primary text-primary-foreground":`text-muted-foreground/80 dark:text-foreground/80 hover:bg-accent hover:text-accent-foreground ${s&&i?"py-2 justify-center":""}`,l),onClick:r,children:[y.jsx(n,{className:`w-4 h-4 ${i?"mx-auto":"mr-3"}`}),!i&&y.jsx("span",{className:"transition-opacity duration-300",children:e}),!i&&t&&!o&&y.jsx(sr.div,{layoutId:"activeIndicator",className:"absolute -left-1 w-1 h-5 bg-button-primary-foreground rounded-r-md",initial:!1,animate:{opacity:1},transition:{type:"spring",stiffness:300,damping:30}}),i&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
        invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:e})]}),ZH=({activeTab:n,setActiveTab:e,collapsed:t,setCollapsed:r})=>{const{user:i,logout:s,settings:o,isFeatureEnabled:l}=yi(),{theme:d}=a1(),h=Wh(),f=async()=>{try{await s()&&h("/login",{replace:!0})}catch{}},m=[{id:"dashboard",text:"Dashboard",icon:sH,path:"/dashboard",feature:null},{id:"workflow",text:"Trabalhos",icon:dm,path:"/workflow",feature:null},{id:"clients",text:"Clientes",icon:FT,path:"/clients",feature:null},{id:"financial",text:"Financeiro",icon:pm,path:"/financial",feature:null},{id:"calendar",text:"Agenda",icon:PT,path:"/calendar",feature:"agenda_pro"},{id:"reports",text:"Relatórios",icon:kT,path:"/reports",feature:"relatorios"},{id:"service-packages",text:"Pacotes",icon:dm,path:"/service-packages",feature:"pacotes_servico"},{id:"my-setup",text:"Meu Setup",icon:MT,path:"/my-setup",feature:"meu_setup"},{id:"precifique",text:"Precifique",icon:hm,path:"/precifique",feature:"precifique"},{id:"reserva-inteligente",text:"Reserva",icon:nx,path:"/reserva-inteligente",feature:"reserva_inteligente"}].filter(H=>!H.feature||l(H.feature)),v=o?.user_name||i?.user_metadata?.full_name||i?.email||"Usuário",b=o?.contact_email||i?.email||"Não informado",S=o?.profile_photo||i?.user_metadata?.avatar_url,x="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20escuro%20gofotografo.png",C="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png",P="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//favicon%20gofotografo.png",I=o?.logo,R=I||(d==="dark"?x:C),M=I||P,N=()=>{e("account-settings"),h("/account-settings")},F=(H,K)=>{e(H),h(K),H==="quadros"&&!t?r(!0):H!=="quadros"&&t&&K.startsWith("/quadros")};return y.jsxs(sr.nav,{initial:!1,animate:{width:t?"4rem":"16rem"},className:`
        h-screen bg-card border-r border-border 
        flex flex-col p-2 transition-width duration-300 ease-in-out fixed left-0 top-0 z-30 hidden md:flex
      `,children:[y.jsx("div",{className:"flex items-center justify-center h-16 pt-4 mb-4",children:y.jsx(FL,{to:"/dashboard",onClick:()=>F("dashboard","/dashboard"),children:y.jsx(Vs,{mode:"wait",initial:!1,children:y.jsx(sr.img,{src:t?M:R,alt:"Logotipo",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`transition-all duration-300 ${t?"h-8 w-auto":"h-9 w-auto"}`},t?"collapsed":"full")})})}),y.jsx("ul",{className:"flex-grow space-y-3 overflow-y-auto overflow-x-hidden scrollbar-thin",children:m.map(H=>y.jsx(gh,{icon:H.icon,text:H.text,active:n===H.id,onClick:()=>F(H.id,H.path),collapsed:t,customStyle:H.customStyle},H.id))}),!1,y.jsx("div",{className:"border-t border-border/50 my-2"}),l("propostas_avancadas")&&y.jsx("div",{className:"mb-2",children:y.jsx(gh,{icon:rH,text:"GO.STUDIO",active:n==="studio",onClick:()=>F("studio","/studio"),collapsed:t})}),l("quadros")&&y.jsx("div",{className:"mb-2",children:y.jsx(gh,{icon:jT,text:"Quadros",active:n==="quadros",onClick:()=>F("quadros","/quadros"),collapsed:t,hideActiveIndicator:!1})}),y.jsx("div",{className:"mb-2",children:y.jsx(gh,{icon:ex,text:"Indique e Ganhe",active:n==="referrals",onClick:()=>F("referrals","/referrals"),collapsed:t,customStyle:"border border-green-500/50 text-green-400 hover:bg-green-500/10 rounded-md",activeStyle:"bg-green-500/10 text-green-400",hideActiveIndicator:!0})}),y.jsxs("div",{className:"mt-auto border-t border-border pt-2",children:[y.jsxs("div",{className:`
            flex items-center p-2 rounded-lg cursor-pointer
            ${t?"justify-center":"justify-start"}
            hover:bg-accent transition-colors group
          `,onClick:N,title:"Minha Conta",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-foreground border-2 border-button-primary-foreground overflow-hidden flex-shrink-0",children:S?y.jsx("img",{src:S,alt:v,className:"w-full h-full object-cover"}):v?.charAt(0).toUpperCase()}),!t&&y.jsxs("div",{className:"ml-2 overflow-hidden",children:[y.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:v}),y.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:b})]}),t&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
              invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:v})]}),y.jsxs("div",{className:`flex ${t?"flex-col items-center space-y-1":"items-center justify-around"} mt-1`,children:[y.jsx(gh,{icon:LT,text:"Configurações",active:n==="settings",onClick:()=>F("settings","/settings"),collapsed:t,isBottomIcon:!0}),y.jsx(gh,{icon:DT,text:"Sair",active:!1,onClick:f,collapsed:t,isBottomIcon:!0})]})]})]})};function $e(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function JH(n,e){const t=A.createContext(e),r=s=>{const{children:o,...l}=s,d=A.useMemo(()=>l,Object.values(l));return y.jsx(t.Provider,{value:d,children:o})};r.displayName=n+"Provider";function i(s){const o=A.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function Ro(n,e=[]){let t=[];function r(s,o){const l=A.createContext(o),d=t.length;t=[...t,o];const h=m=>{const{scope:v,children:b,...S}=m,x=v?.[n]?.[d]||l,C=A.useMemo(()=>S,Object.values(S));return y.jsx(x.Provider,{value:C,children:b})};h.displayName=s+"Provider";function f(m,v){const b=v?.[n]?.[d]||l,S=A.useContext(b);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[h,f]}const i=()=>{const s=t.map(o=>A.createContext(o));return function(l){const d=l?.[n]||s;return A.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return i.scopeName=n,[r,QH(i,...e)]}function QH(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:d,scopeName:h})=>{const m=d(s)[`__scope${h}`];return{...l,...m}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Nn=globalThis?.document?A.useLayoutEffect:()=>{},e6=fb[" useInsertionEffect ".trim().toString()]||Nn;function Fh({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=t6({defaultProp:e,onChange:t}),l=n!==void 0,d=l?n:i;{const f=A.useRef(n!==void 0);A.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=A.useCallback(f=>{if(l){const m=n6(f)?f(n):f;m!==n&&o.current?.(m)}else s(f)},[l,n,s,o]);return[d,h]}function t6({defaultProp:n,onChange:e}){const[t,r]=A.useState(n),i=A.useRef(t),s=A.useRef(e);return e6(()=>{s.current=e},[e]),A.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function n6(n){return typeof n=="function"}var r6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],it=r6.reduce((n,e)=>{const t=pu(`Primitive.${e}`),r=A.forwardRef((i,s)=>{const{asChild:o,...l}=i,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(d,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function KT(n,e){n&&Am.flushSync(()=>n.dispatchEvent(e))}function sx(n){const e=n+"CollectionProvider",[t,r]=Ro(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:C,children:P}=x,I=lt.useRef(null),R=lt.useRef(new Map).current;return y.jsx(i,{scope:C,itemMap:R,collectionRef:I,children:P})};o.displayName=e;const l=n+"CollectionSlot",d=pu(l),h=lt.forwardRef((x,C)=>{const{scope:P,children:I}=x,R=s(l,P),M=Et(C,R.collectionRef);return y.jsx(d,{ref:M,children:I})});h.displayName=l;const f=n+"CollectionItemSlot",m="data-radix-collection-item",v=pu(f),b=lt.forwardRef((x,C)=>{const{scope:P,children:I,...R}=x,M=lt.useRef(null),N=Et(C,M),F=s(f,P);return lt.useEffect(()=>(F.itemMap.set(M,{ref:M,...R}),()=>void F.itemMap.delete(M))),y.jsx(v,{[m]:"",ref:N,children:I})});b.displayName=f;function S(x){const C=s(n+"CollectionConsumer",x);return lt.useCallback(()=>{const I=C.collectionRef.current;if(!I)return[];const R=Array.from(I.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((F,B)=>R.indexOf(F.ref.current)-R.indexOf(B.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:o,Slot:h,ItemSlot:b},S,r]}var i6=A.createContext(void 0);function Uy(n){const e=A.useContext(i6);return n||e||"ltr"}function ir(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>e.current?.(...t),[])}function s6(n,e=globalThis?.document){const t=ir(n);A.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var o6="DismissableLayer",V_="dismissableLayer.update",a6="dismissableLayer.pointerDownOutside",l6="dismissableLayer.focusOutside",GE,YT=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vy=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...d}=n,h=A.useContext(YT),[f,m]=A.useState(null),v=f?.ownerDocument??globalThis?.document,[,b]=A.useState({}),S=Et(e,B=>m(B)),x=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(C),I=f?x.indexOf(f):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,M=I>=P,N=d6(B=>{const H=B.target,K=[...h.branches].some(le=>le.contains(H));!M||K||(i?.(B),o?.(B),B.defaultPrevented||l?.())},v),F=h6(B=>{const H=B.target;[...h.branches].some(le=>le.contains(H))||(s?.(B),o?.(B),B.defaultPrevented||l?.())},v);return s6(B=>{I===h.layers.size-1&&(r?.(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},v),A.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(GE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),KE(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=GE)}},[f,v,t,h]),A.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),KE())},[f,h]),A.useEffect(()=>{const B=()=>b({});return document.addEventListener(V_,B),()=>document.removeEventListener(V_,B)},[]),y.jsx(it.div,{...d,ref:S,style:{pointerEvents:R?M?"auto":"none":void 0,...n.style},onFocusCapture:$e(n.onFocusCapture,F.onFocusCapture),onBlurCapture:$e(n.onBlurCapture,F.onBlurCapture),onPointerDownCapture:$e(n.onPointerDownCapture,N.onPointerDownCapture)})});Vy.displayName=o6;var c6="DismissableLayerBranch",u6=A.forwardRef((n,e)=>{const t=A.useContext(YT),r=A.useRef(null),i=Et(e,r);return A.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),y.jsx(it.div,{...n,ref:i})});u6.displayName=c6;function d6(n,e=globalThis?.document){const t=ir(n),r=A.useRef(!1),i=A.useRef(()=>{});return A.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let d=function(){XT(a6,t,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function h6(n,e=globalThis?.document){const t=ir(n),r=A.useRef(!1);return A.useEffect(()=>{const i=s=>{s.target&&!r.current&&XT(l6,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KE(){const n=new CustomEvent(V_);document.dispatchEvent(n)}function XT(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?KT(i,s):i.dispatchEvent(s)}var Vw=0;function ox(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??YE()),document.body.insertAdjacentElement("beforeend",n[1]??YE()),Vw++,()=>{Vw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Vw--}},[])}function YE(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Ww="focusScope.autoFocusOnMount",Hw="focusScope.autoFocusOnUnmount",XE={bubbles:!1,cancelable:!0},f6="FocusScope",Wy=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[l,d]=A.useState(null),h=ir(i),f=ir(s),m=A.useRef(null),v=Et(e,x=>d(x)),b=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let x=function(R){if(b.paused||!l)return;const M=R.target;l.contains(M)?m.current=M:Al(m.current,{select:!0})},C=function(R){if(b.paused||!l)return;const M=R.relatedTarget;M!==null&&(l.contains(M)||Al(m.current,{select:!0}))},P=function(R){if(document.activeElement===document.body)for(const N of R)N.removedNodes.length>0&&Al(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",C);const I=new MutationObserver(P);return l&&I.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",C),I.disconnect()}}},[r,l,b.paused]),A.useEffect(()=>{if(l){JE.add(b);const x=document.activeElement;if(!l.contains(x)){const P=new CustomEvent(Ww,XE);l.addEventListener(Ww,h),l.dispatchEvent(P),P.defaultPrevented||(p6(w6(ZT(l)),{select:!0}),document.activeElement===x&&Al(l))}return()=>{l.removeEventListener(Ww,h),setTimeout(()=>{const P=new CustomEvent(Hw,XE);l.addEventListener(Hw,f),l.dispatchEvent(P),P.defaultPrevented||Al(x??document.body,{select:!0}),l.removeEventListener(Hw,f),JE.remove(b)},0)}}},[l,h,f,b]);const S=A.useCallback(x=>{if(!t&&!r||b.paused)return;const C=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,P=document.activeElement;if(C&&P){const I=x.currentTarget,[R,M]=m6(I);R&&M?!x.shiftKey&&P===M?(x.preventDefault(),t&&Al(R,{select:!0})):x.shiftKey&&P===R&&(x.preventDefault(),t&&Al(M,{select:!0})):P===I&&x.preventDefault()}},[t,r,b.paused]);return y.jsx(it.div,{tabIndex:-1,...o,ref:v,onKeyDown:S})});Wy.displayName=f6;function p6(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Al(r,{select:e}),document.activeElement!==t)return}function m6(n){const e=ZT(n),t=ZE(e,n),r=ZE(e.reverse(),n);return[t,r]}function ZT(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function ZE(n,e){for(const t of n)if(!g6(t,{upTo:e}))return t}function g6(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function v6(n){return n instanceof HTMLInputElement&&"select"in n}function Al(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&v6(n)&&e&&n.select()}}var JE=y6();function y6(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=QE(n,e),n.unshift(e)},remove(e){n=QE(n,e),n[0]?.resume()}}}function QE(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function w6(n){return n.filter(e=>e.tagName!=="A")}var _6=fb[" useId ".trim().toString()]||(()=>{}),b6=0;function Ca(n){const[e,t]=A.useState(_6());return Nn(()=>{t(r=>r??String(b6++))},[n]),e?`radix-${e}`:""}const x6=["top","right","bottom","left"],Nl=Math.min,Li=Math.max,py=Math.round,Rv=Math.floor,Co=n=>({x:n,y:n}),S6={left:"right",right:"left",bottom:"top",top:"bottom"},A6={start:"end",end:"start"};function W_(n,e,t){return Li(n,Nl(e,t))}function Pa(n,e){return typeof n=="function"?n(e):n}function Ra(n){return n.split("-")[0]}function Kh(n){return n.split("-")[1]}function ax(n){return n==="x"?"y":"x"}function lx(n){return n==="y"?"height":"width"}function Ao(n){return["top","bottom"].includes(Ra(n))?"y":"x"}function cx(n){return ax(Ao(n))}function E6(n,e,t){t===void 0&&(t=!1);const r=Kh(n),i=cx(n),s=lx(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=my(o)),[o,my(o)]}function C6(n){const e=my(n);return[H_(n),e,H_(e)]}function H_(n){return n.replace(/start|end/g,e=>A6[e])}function k6(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function T6(n,e,t,r){const i=Kh(n);let s=k6(Ra(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(H_)))),s}function my(n){return n.replace(/left|right|bottom|top/g,e=>S6[e])}function P6(n){return{top:0,right:0,bottom:0,left:0,...n}}function JT(n){return typeof n!="number"?P6(n):{top:n,right:n,bottom:n,left:n}}function gy(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function eC(n,e,t){let{reference:r,floating:i}=n;const s=Ao(e),o=cx(e),l=lx(o),d=Ra(e),h=s==="y",f=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,v=r[l]/2-i[l]/2;let b;switch(d){case"top":b={x:f,y:r.y-i.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:m};break;case"left":b={x:r.x-i.width,y:m};break;default:b={x:r.x,y:r.y}}switch(Kh(e)){case"start":b[o]-=v*(t&&h?-1:1);break;case"end":b[o]+=v*(t&&h?-1:1);break}return b}const R6=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,l=s.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:m}=eC(h,r,d),v=r,b={},S=0;for(let x=0;x<l.length;x++){const{name:C,fn:P}=l[x],{x:I,y:R,data:M,reset:N}=await P({x:f,y:m,initialPlacement:r,placement:v,strategy:i,middlewareData:b,rects:h,platform:o,elements:{reference:n,floating:e}});f=I??f,m=R??m,b={...b,[C]:{...b[C],...M}},N&&S<=50&&(S++,typeof N=="object"&&(N.placement&&(v=N.placement),N.rects&&(h=N.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):N.rects),{x:f,y:m}=eC(h,v,d)),x=-1)}return{x:f,y:m,placement:v,strategy:i,middlewareData:b}};async function mm(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:v=!1,padding:b=0}=Pa(e,n),S=JT(b),C=l[v?m==="floating"?"reference":"floating":m],P=gy(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(C)))==null||t?C:C.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),I=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),M=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},N=gy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:I,offsetParent:R,strategy:d}):I);return{top:(P.top-N.top+S.top)/M.y,bottom:(N.bottom-P.bottom+S.bottom)/M.y,left:(P.left-N.left+S.left)/M.x,right:(N.right-P.right+S.right)/M.x}}const I6=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:d}=e,{element:h,padding:f=0}=Pa(n,e)||{};if(h==null)return{};const m=JT(f),v={x:t,y:r},b=cx(i),S=lx(b),x=await o.getDimensions(h),C=b==="y",P=C?"top":"left",I=C?"bottom":"right",R=C?"clientHeight":"clientWidth",M=s.reference[S]+s.reference[b]-v[b]-s.floating[S],N=v[b]-s.reference[b],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let B=F?F[R]:0;(!B||!await(o.isElement==null?void 0:o.isElement(F)))&&(B=l.floating[R]||s.floating[S]);const H=M/2-N/2,K=B/2-x[S]/2-1,le=Nl(m[P],K),me=Nl(m[I],K),he=le,de=B-x[S]-me,fe=B/2-x[S]/2+H,z=W_(he,fe,de),q=!d.arrow&&Kh(i)!=null&&fe!==z&&s.reference[S]/2-(fe<he?le:me)-x[S]/2<0,re=q?fe<he?fe-he:fe-de:0;return{[b]:v[b]+re,data:{[b]:z,centerOffset:fe-z-re,...q&&{alignmentOffset:re}},reset:q}}}),M6=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...C}=Pa(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const P=Ra(i),I=Ao(l),R=Ra(l)===l,M=await(d.isRTL==null?void 0:d.isRTL(h.floating)),N=v||(R||!x?[my(l)]:C6(l)),F=S!=="none";!v&&F&&N.push(...T6(l,x,S,M));const B=[l,...N],H=await mm(e,C),K=[];let le=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&K.push(H[P]),m){const fe=E6(i,o,M);K.push(H[fe[0]],H[fe[1]])}if(le=[...le,{placement:i,overflows:K}],!K.every(fe=>fe<=0)){var me,he;const fe=(((me=s.flip)==null?void 0:me.index)||0)+1,z=B[fe];if(z&&(!(m==="alignment"?I!==Ao(z):!1)||le.every(U=>U.overflows[0]>0&&Ao(U.placement)===I)))return{data:{index:fe,overflows:le},reset:{placement:z}};let q=(he=le.filter(re=>re.overflows[0]<=0).sort((re,U)=>re.overflows[1]-U.overflows[1])[0])==null?void 0:he.placement;if(!q)switch(b){case"bestFit":{var de;const re=(de=le.filter(U=>{if(F){const ne=Ao(U.placement);return ne===I||ne==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(ne=>ne>0).reduce((ne,Q)=>ne+Q,0)]).sort((U,ne)=>U[1]-ne[1])[0])==null?void 0:de[0];re&&(q=re);break}case"initialPlacement":q=l;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function tC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function nC(n){return x6.some(e=>n[e]>=0)}const D6=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Pa(n,e);switch(r){case"referenceHidden":{const s=await mm(e,{...i,elementContext:"reference"}),o=tC(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:nC(o)}}}case"escaped":{const s=await mm(e,{...i,altBoundary:!0}),o=tC(s,t.floating);return{data:{escapedOffsets:o,escaped:nC(o)}}}default:return{}}}}};async function O6(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ra(t),l=Kh(t),d=Ao(t)==="y",h=["left","top"].includes(o)?-1:1,f=s&&d?-1:1,m=Pa(e,n);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof S=="number"&&(b=l==="end"?S*-1:S),d?{x:b*f,y:v*h}:{x:v*h,y:b*f}}const N6=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:l}=e,d=await O6(e,n);return o===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:s+d.y,data:{...d,placement:o}}}}},L6=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:C=>{let{x:P,y:I}=C;return{x:P,y:I}}},...d}=Pa(n,e),h={x:t,y:r},f=await mm(e,d),m=Ao(Ra(i)),v=ax(m);let b=h[v],S=h[m];if(s){const C=v==="y"?"top":"left",P=v==="y"?"bottom":"right",I=b+f[C],R=b-f[P];b=W_(I,b,R)}if(o){const C=m==="y"?"top":"left",P=m==="y"?"bottom":"right",I=S+f[C],R=S-f[P];S=W_(I,S,R)}const x=l.fn({...e,[v]:b,[m]:S});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:s,[m]:o}}}}}},j6=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=Pa(n,e),f={x:t,y:r},m=Ao(i),v=ax(m);let b=f[v],S=f[m];const x=Pa(l,e),C=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const R=v==="y"?"height":"width",M=s.reference[v]-s.floating[R]+C.mainAxis,N=s.reference[v]+s.reference[R]-C.mainAxis;b<M?b=M:b>N&&(b=N)}if(h){var P,I;const R=v==="y"?"width":"height",M=["top","left"].includes(Ra(i)),N=s.reference[m]-s.floating[R]+(M&&((P=o.offset)==null?void 0:P[m])||0)+(M?0:C.crossAxis),F=s.reference[m]+s.reference[R]+(M?0:((I=o.offset)==null?void 0:I[m])||0)-(M?C.crossAxis:0);S<N?S=N:S>F&&(S=F)}return{[v]:b,[m]:S}}}},F6=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:d=()=>{},...h}=Pa(n,e),f=await mm(e,h),m=Ra(i),v=Kh(i),b=Ao(i)==="y",{width:S,height:x}=s.floating;let C,P;m==="top"||m==="bottom"?(C=m,P=v===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(P=m,C=v==="end"?"top":"bottom");const I=x-f.top-f.bottom,R=S-f.left-f.right,M=Nl(x-f[C],I),N=Nl(S-f[P],R),F=!e.middlewareData.shift;let B=M,H=N;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(H=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(B=I),F&&!v){const le=Li(f.left,0),me=Li(f.right,0),he=Li(f.top,0),de=Li(f.bottom,0);b?H=S-2*(le!==0||me!==0?le+me:Li(f.left,f.right)):B=x-2*(he!==0||de!==0?he+de:Li(f.top,f.bottom))}await d({...e,availableWidth:H,availableHeight:B});const K=await o.getDimensions(l.floating);return S!==K.width||x!==K.height?{reset:{rects:!0}}:{}}}};function Hy(){return typeof window<"u"}function Yh(n){return QT(n)?(n.nodeName||"").toLowerCase():"#document"}function ji(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Io(n){var e;return(e=(QT(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function QT(n){return Hy()?n instanceof Node||n instanceof ji(n).Node:!1}function Ws(n){return Hy()?n instanceof Element||n instanceof ji(n).Element:!1}function ko(n){return Hy()?n instanceof HTMLElement||n instanceof ji(n).HTMLElement:!1}function rC(n){return!Hy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ji(n).ShadowRoot}function Mm(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Hs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function $6(n){return["table","td","th"].includes(Yh(n))}function qy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function ux(n){const e=dx(),t=Ws(n)?Hs(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function z6(n){let e=Ll(n);for(;ko(e)&&!$h(e);){if(ux(e))return e;if(qy(e))return null;e=Ll(e)}return null}function dx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $h(n){return["html","body","#document"].includes(Yh(n))}function Hs(n){return ji(n).getComputedStyle(n)}function Gy(n){return Ws(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ll(n){if(Yh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||rC(n)&&n.host||Io(n);return rC(e)?e.host:e}function eP(n){const e=Ll(n);return $h(e)?n.ownerDocument?n.ownerDocument.body:n.body:ko(e)&&Mm(e)?e:eP(e)}function gm(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=eP(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=ji(i);if(s){const l=q_(o);return e.concat(o,o.visualViewport||[],Mm(i)?i:[],l&&t?gm(l):[])}return e.concat(i,gm(i,[],t))}function q_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function tP(n){const e=Hs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ko(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,l=py(t)!==s||py(r)!==o;return l&&(t=s,r=o),{width:t,height:r,$:l}}function hx(n){return Ws(n)?n:n.contextElement}function Th(n){const e=hx(n);if(!ko(e))return Co(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=tP(e);let o=(s?py(t.width):t.width)/r,l=(s?py(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const B6=Co(0);function nP(n){const e=ji(n);return!dx()||!e.visualViewport?B6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function U6(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ji(n)?!1:e}function mu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=hx(n);let o=Co(1);e&&(r?Ws(r)&&(o=Th(r)):o=Th(n));const l=U6(s,t,r)?nP(s):Co(0);let d=(i.left+l.x)/o.x,h=(i.top+l.y)/o.y,f=i.width/o.x,m=i.height/o.y;if(s){const v=ji(s),b=r&&Ws(r)?ji(r):r;let S=v,x=q_(S);for(;x&&r&&b!==S;){const C=Th(x),P=x.getBoundingClientRect(),I=Hs(x),R=P.left+(x.clientLeft+parseFloat(I.paddingLeft))*C.x,M=P.top+(x.clientTop+parseFloat(I.paddingTop))*C.y;d*=C.x,h*=C.y,f*=C.x,m*=C.y,d+=R,h+=M,S=ji(x),x=q_(S)}}return gy({width:f,height:m,x:d,y:h})}function fx(n,e){const t=Gy(n).scrollLeft;return e?e.left+t:mu(Io(n)).left+t}function rP(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:fx(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function V6(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Io(r),l=e?qy(e.floating):!1;if(r===o||l&&s)return t;let d={scrollLeft:0,scrollTop:0},h=Co(1);const f=Co(0),m=ko(r);if((m||!m&&!s)&&((Yh(r)!=="body"||Mm(o))&&(d=Gy(r)),ko(r))){const b=mu(r);h=Th(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const v=o&&!m&&!s?rP(o,d,!0):Co(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+v.x,y:t.y*h.y-d.scrollTop*h.y+f.y+v.y}}function W6(n){return Array.from(n.getClientRects())}function H6(n){const e=Io(n),t=Gy(n),r=n.ownerDocument.body,i=Li(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Li(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+fx(n);const l=-t.scrollTop;return Hs(r).direction==="rtl"&&(o+=Li(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function q6(n,e){const t=ji(n),r=Io(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,d=0;if(i){s=i.width,o=i.height;const h=dx();(!h||h&&e==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}return{width:s,height:o,x:l,y:d}}function G6(n,e){const t=mu(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=ko(n)?Th(n):Co(1),o=n.clientWidth*s.x,l=n.clientHeight*s.y,d=i*s.x,h=r*s.y;return{width:o,height:l,x:d,y:h}}function iC(n,e,t){let r;if(e==="viewport")r=q6(n,t);else if(e==="document")r=H6(Io(n));else if(Ws(e))r=G6(e,t);else{const i=nP(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return gy(r)}function iP(n,e){const t=Ll(n);return t===e||!Ws(t)||$h(t)?!1:Hs(t).position==="fixed"||iP(t,e)}function K6(n,e){const t=e.get(n);if(t)return t;let r=gm(n,[],!1).filter(l=>Ws(l)&&Yh(l)!=="body"),i=null;const s=Hs(n).position==="fixed";let o=s?Ll(n):n;for(;Ws(o)&&!$h(o);){const l=Hs(o),d=ux(o);!d&&l.position==="fixed"&&(i=null),(s?!d&&!i:!d&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Mm(o)&&!d&&iP(n,o))?r=r.filter(f=>f!==o):i=l,o=Ll(o)}return e.set(n,r),r}function Y6(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?qy(e)?[]:K6(e,this._c):[].concat(t),r],l=o[0],d=o.reduce((h,f)=>{const m=iC(e,f,i);return h.top=Li(m.top,h.top),h.right=Nl(m.right,h.right),h.bottom=Nl(m.bottom,h.bottom),h.left=Li(m.left,h.left),h},iC(e,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function X6(n){const{width:e,height:t}=tP(n);return{width:e,height:t}}function Z6(n,e,t){const r=ko(e),i=Io(e),s=t==="fixed",o=mu(n,!0,s,e);let l={scrollLeft:0,scrollTop:0};const d=Co(0);function h(){d.x=fx(i)}if(r||!r&&!s)if((Yh(e)!=="body"||Mm(i))&&(l=Gy(e)),r){const b=mu(e,!0,s,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?rP(i,l):Co(0),m=o.left+l.scrollLeft-d.x-f.x,v=o.top+l.scrollTop-d.y-f.y;return{x:m,y:v,width:o.width,height:o.height}}function qw(n){return Hs(n).position==="static"}function sC(n,e){if(!ko(n)||Hs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Io(n)===t&&(t=t.ownerDocument.body),t}function sP(n,e){const t=ji(n);if(qy(n))return t;if(!ko(n)){let i=Ll(n);for(;i&&!$h(i);){if(Ws(i)&&!qw(i))return i;i=Ll(i)}return t}let r=sC(n,e);for(;r&&$6(r)&&qw(r);)r=sC(r,e);return r&&$h(r)&&qw(r)&&!ux(r)?t:r||z6(n)||t}const J6=async function(n){const e=this.getOffsetParent||sP,t=this.getDimensions,r=await t(n.floating);return{reference:Z6(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Q6(n){return Hs(n).direction==="rtl"}const eq={convertOffsetParentRelativeRectToViewportRelativeRect:V6,getDocumentElement:Io,getClippingRect:Y6,getOffsetParent:sP,getElementRects:J6,getClientRects:W6,getDimensions:X6,getScale:Th,isElement:Ws,isRTL:Q6};function oP(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function tq(n,e){let t=null,r;const i=Io(n);function s(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const h=n.getBoundingClientRect(),{left:f,top:m,width:v,height:b}=h;if(l||e(),!v||!b)return;const S=Rv(m),x=Rv(i.clientWidth-(f+v)),C=Rv(i.clientHeight-(m+b)),P=Rv(f),R={rootMargin:-S+"px "+-x+"px "+-C+"px "+-P+"px",threshold:Li(0,Nl(1,d))||1};let M=!0;function N(F){const B=F[0].intersectionRatio;if(B!==d){if(!M)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}B===1&&!oP(h,n.getBoundingClientRect())&&o(),M=!1}try{t=new IntersectionObserver(N,{...R,root:i.ownerDocument})}catch{t=new IntersectionObserver(N,R)}t.observe(n)}return o(!0),s}function nq(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=hx(n),f=i||s?[...h?gm(h):[],...gm(e)]:[];f.forEach(P=>{i&&P.addEventListener("scroll",t,{passive:!0}),s&&P.addEventListener("resize",t)});const m=h&&l?tq(h,t):null;let v=-1,b=null;o&&(b=new ResizeObserver(P=>{let[I]=P;I&&I.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=b)==null||R.observe(e)})),t()}),h&&!d&&b.observe(h),b.observe(e));let S,x=d?mu(n):null;d&&C();function C(){const P=mu(n);x&&!oP(x,P)&&t(),x=P,S=requestAnimationFrame(C)}return t(),()=>{var P;f.forEach(I=>{i&&I.removeEventListener("scroll",t),s&&I.removeEventListener("resize",t)}),m?.(),(P=b)==null||P.disconnect(),b=null,d&&cancelAnimationFrame(S)}}const rq=N6,iq=L6,sq=M6,oq=F6,aq=D6,oC=I6,lq=j6,cq=(n,e,t)=>{const r=new Map,i={platform:eq,...t},s={...i.platform,_c:r};return R6(n,e,{...i,platform:s})};var uq=typeof document<"u",dq=function(){},Kv=uq?A.useLayoutEffect:dq;function vy(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!vy(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!vy(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function aP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function aC(n,e){const t=aP(n);return Math.round(e*t)/t}function Gw(n){const e=A.useRef(n);return Kv(()=>{e.current=n}),e}function hq(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:d,open:h}=n,[f,m]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=A.useState(r);vy(v,r)||b(r);const[S,x]=A.useState(null),[C,P]=A.useState(null),I=A.useCallback(U=>{U!==F.current&&(F.current=U,x(U))},[]),R=A.useCallback(U=>{U!==B.current&&(B.current=U,P(U))},[]),M=s||S,N=o||C,F=A.useRef(null),B=A.useRef(null),H=A.useRef(f),K=d!=null,le=Gw(d),me=Gw(i),he=Gw(h),de=A.useCallback(()=>{if(!F.current||!B.current)return;const U={placement:e,strategy:t,middleware:v};me.current&&(U.platform=me.current),cq(F.current,B.current,U).then(ne=>{const Q={...ne,isPositioned:he.current!==!1};fe.current&&!vy(H.current,Q)&&(H.current=Q,Am.flushSync(()=>{m(Q)}))})},[v,e,t,me,he]);Kv(()=>{h===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,m(U=>({...U,isPositioned:!1})))},[h]);const fe=A.useRef(!1);Kv(()=>(fe.current=!0,()=>{fe.current=!1}),[]),Kv(()=>{if(M&&(F.current=M),N&&(B.current=N),M&&N){if(le.current)return le.current(M,N,de);de()}},[M,N,de,le,K]);const z=A.useMemo(()=>({reference:F,floating:B,setReference:I,setFloating:R}),[I,R]),q=A.useMemo(()=>({reference:M,floating:N}),[M,N]),re=A.useMemo(()=>{const U={position:t,left:0,top:0};if(!q.floating)return U;const ne=aC(q.floating,f.x),Q=aC(q.floating,f.y);return l?{...U,transform:"translate("+ne+"px, "+Q+"px)",...aP(q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ne,top:Q}},[t,l,q.floating,f.x,f.y]);return A.useMemo(()=>({...f,update:de,refs:z,elements:q,floatingStyles:re}),[f,de,z,q,re])}const fq=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?oC({element:r.current,padding:i}).fn(t):{}:r?oC({element:r,padding:i}).fn(t):{}}}},pq=(n,e)=>({...rq(n),options:[n,e]}),mq=(n,e)=>({...iq(n),options:[n,e]}),gq=(n,e)=>({...lq(n),options:[n,e]}),vq=(n,e)=>({...sq(n),options:[n,e]}),yq=(n,e)=>({...oq(n),options:[n,e]}),wq=(n,e)=>({...aq(n),options:[n,e]}),_q=(n,e)=>({...fq(n),options:[n,e]});var bq="Arrow",lP=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return y.jsx(it.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});lP.displayName=bq;var xq=lP;function cP(n){const[e,t]=A.useState(void 0);return Nn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,l=h.blockSize}else o=n.offsetWidth,l=n.offsetHeight;t({width:o,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var px="Popper",[uP,Ky]=Ro(px),[Sq,dP]=uP(px),hP=n=>{const{__scopePopper:e,children:t}=n,[r,i]=A.useState(null);return y.jsx(Sq,{scope:e,anchor:r,onAnchorChange:i,children:t})};hP.displayName=px;var fP="PopperAnchor",pP=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=dP(fP,t),o=A.useRef(null),l=Et(e,o);return A.useEffect(()=>{s.onAnchorChange(r?.current||o.current)}),r?null:y.jsx(it.div,{...i,ref:l})});pP.displayName=fP;var mx="PopperContent",[Aq,Eq]=uP(mx),mP=A.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,...x}=n,C=dP(mx,t),[P,I]=A.useState(null),R=Et(e,ve=>I(ve)),[M,N]=A.useState(null),F=cP(M),B=F?.width??0,H=F?.height??0,K=r+(s!=="center"?"-"+s:""),le=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},me=Array.isArray(h)?h:[h],he=me.length>0,de={padding:le,boundary:me.filter(kq),altBoundary:he},{refs:fe,floatingStyles:z,placement:q,isPositioned:re,middlewareData:U}=hq({strategy:"fixed",placement:K,whileElementsMounted:(...ve)=>nq(...ve,{animationFrame:b==="always"}),elements:{reference:C.anchor},middleware:[pq({mainAxis:i+H,alignmentAxis:o}),d&&mq({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?gq():void 0,...de}),d&&vq({...de}),yq({...de,apply:({elements:ve,rects:Ne,availableWidth:He,availableHeight:Xe})=>{const{width:at,height:Ot}=Ne.reference,mn=ve.floating.style;mn.setProperty("--radix-popper-available-width",`${He}px`),mn.setProperty("--radix-popper-available-height",`${Xe}px`),mn.setProperty("--radix-popper-anchor-width",`${at}px`),mn.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),M&&_q({element:M,padding:l}),Tq({arrowWidth:B,arrowHeight:H}),v&&wq({strategy:"referenceHidden",...de})]}),[ne,Q]=yP(q),$=ir(S);Nn(()=>{re&&$?.()},[re,$]);const ie=U.arrow?.x,Z=U.arrow?.y,Re=U.arrow?.centerOffset!==0,[Ae,Ie]=A.useState();return Nn(()=>{P&&Ie(window.getComputedStyle(P).zIndex)},[P]),y.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:re?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ae,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(Aq,{scope:t,placedSide:ne,onArrowChange:N,arrowX:ie,arrowY:Z,shouldHideArrow:Re,children:y.jsx(it.div,{"data-side":ne,"data-align":Q,...x,ref:R,style:{...x.style,animation:re?void 0:"none"}})})})});mP.displayName=mx;var gP="PopperArrow",Cq={top:"bottom",right:"left",bottom:"top",left:"right"},vP=A.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=Eq(gP,r),o=Cq[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(xq,{...i,ref:t,style:{...i.style,display:"block"}})})});vP.displayName=gP;function kq(n){return n!==null}var Tq=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,l=o?0:n.arrowWidth,d=o?0:n.arrowHeight,[h,f]=yP(t),m={start:"0%",center:"50%",end:"100%"}[f],v=(i.arrow?.x??0)+l/2,b=(i.arrow?.y??0)+d/2;let S="",x="";return h==="bottom"?(S=o?m:`${v}px`,x=`${-d}px`):h==="top"?(S=o?m:`${v}px`,x=`${r.floating.height+d}px`):h==="right"?(S=`${-d}px`,x=o?m:`${b}px`):h==="left"&&(S=`${r.floating.width+d}px`,x=o?m:`${b}px`),{data:{x:S,y:x}}}});function yP(n){const[e,t="center"]=n.split("-");return[e,t]}var wP=hP,_P=pP,bP=mP,xP=vP,Pq="Portal",Yy=A.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=A.useState(!1);Nn(()=>s(!0),[]);const o=t||i&&globalThis?.document?.body;return o?LN.createPortal(y.jsx(it.div,{...r,ref:e}),o):null});Yy.displayName=Pq;function Rq(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var $i=n=>{const{present:e,children:t}=n,r=Iq(e),i=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),s=Et(r.ref,Mq(i));return typeof t=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};$i.displayName="Presence";function Iq(n){const[e,t]=A.useState(),r=A.useRef(null),i=A.useRef(n),s=A.useRef("none"),o=n?"mounted":"unmounted",[l,d]=Rq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const h=Iv(r.current);s.current=l==="mounted"?h:"none"},[l]),Nn(()=>{const h=r.current,f=i.current;if(f!==n){const v=s.current,b=Iv(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&v!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Nn(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=b=>{const x=Iv(r.current).includes(b.animationName);if(b.target===e&&x&&(d("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},v=b=>{b.target===e&&(s.current=Iv(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function Iv(n){return n?.animationName||"none"}function Mq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Kw="rovingFocusGroup.onEntryFocus",Dq={bubbles:!1,cancelable:!0},Dm="RovingFocusGroup",[G_,SP,Oq]=sx(Dm),[Nq,AP]=Ro(Dm,[Oq]),[Lq,jq]=Nq(Dm),EP=A.forwardRef((n,e)=>y.jsx(G_.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(G_.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(Fq,{...n,ref:e})})}));EP.displayName=Dm;var Fq=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=n,v=A.useRef(null),b=Et(e,v),S=Uy(s),[x,C]=Fh({prop:o,defaultProp:l??null,onChange:d,caller:Dm}),[P,I]=A.useState(!1),R=ir(h),M=SP(t),N=A.useRef(!1),[F,B]=A.useState(0);return A.useEffect(()=>{const H=v.current;if(H)return H.addEventListener(Kw,R),()=>H.removeEventListener(Kw,R)},[R]),y.jsx(Lq,{scope:t,orientation:r,dir:S,loop:i,currentTabStopId:x,onItemFocus:A.useCallback(H=>C(H),[C]),onItemShiftTab:A.useCallback(()=>I(!0),[]),onFocusableItemAdd:A.useCallback(()=>B(H=>H+1),[]),onFocusableItemRemove:A.useCallback(()=>B(H=>H-1),[]),children:y.jsx(it.div,{tabIndex:P||F===0?-1:0,"data-orientation":r,...m,ref:b,style:{outline:"none",...n.style},onMouseDown:$e(n.onMouseDown,()=>{N.current=!0}),onFocus:$e(n.onFocus,H=>{const K=!N.current;if(H.target===H.currentTarget&&K&&!P){const le=new CustomEvent(Kw,Dq);if(H.currentTarget.dispatchEvent(le),!le.defaultPrevented){const me=M().filter(q=>q.focusable),he=me.find(q=>q.active),de=me.find(q=>q.id===x),z=[he,de,...me].filter(Boolean).map(q=>q.ref.current);TP(z,f)}}N.current=!1}),onBlur:$e(n.onBlur,()=>I(!1))})})}),CP="RovingFocusGroupItem",kP=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...l}=n,d=Ca(),h=s||d,f=jq(CP,t),m=f.currentTabStopId===h,v=SP(t),{onFocusableItemAdd:b,onFocusableItemRemove:S,currentTabStopId:x}=f;return A.useEffect(()=>{if(r)return b(),()=>S()},[r,b,S]),y.jsx(G_.ItemSlot,{scope:t,id:h,focusable:r,active:i,children:y.jsx(it.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:$e(n.onMouseDown,C=>{r?f.onItemFocus(h):C.preventDefault()}),onFocus:$e(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:$e(n.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){f.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const P=Bq(C,f.orientation,f.dir);if(P!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let R=v().filter(M=>M.focusable).map(M=>M.ref.current);if(P==="last")R.reverse();else if(P==="prev"||P==="next"){P==="prev"&&R.reverse();const M=R.indexOf(C.currentTarget);R=f.loop?Uq(R,M+1):R.slice(M+1)}setTimeout(()=>TP(R))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:x!=null}):o})})});kP.displayName=CP;var $q={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zq(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Bq(n,e,t){const r=zq(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $q[r]}function TP(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Uq(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var Vq=EP,Wq=kP,Hq=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},vh=new WeakMap,Mv=new WeakMap,Dv={},Yw=0,PP=function(n){return n&&(n.host||PP(n.parentNode))},qq=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=PP(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},Gq=function(n,e,t,r){var i=qq(e,Array.isArray(n)?n:[n]);Dv[t]||(Dv[t]=new WeakMap);var s=Dv[t],o=[],l=new Set,d=new Set(i),h=function(m){!m||l.has(m)||(l.add(m),h(m.parentNode))};i.forEach(h);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(v){if(l.has(v))f(v);else try{var b=v.getAttribute(r),S=b!==null&&b!=="false",x=(vh.get(v)||0)+1,C=(s.get(v)||0)+1;vh.set(v,x),s.set(v,C),o.push(v),x===1&&S&&Mv.set(v,!0),C===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return f(e),l.clear(),Yw++,function(){o.forEach(function(m){var v=vh.get(m)-1,b=s.get(m)-1;vh.set(m,v),s.set(m,b),v||(Mv.has(m)||m.removeAttribute(r),Mv.delete(m)),b||m.removeAttribute(t)}),Yw--,Yw||(vh=new WeakMap,vh=new WeakMap,Mv=new WeakMap,Dv={})}},gx=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=Hq(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Gq(r,i,t,"aria-hidden")):function(){return null}},So=function(){return So=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},So.apply(this,arguments)};function RP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Kq(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Yv="right-scroll-bar-position",Xv="width-before-scroll-bar",Yq="with-scroll-bars-hidden",Xq="--removed-body-scroll-bar-size";function Xw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function Zq(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var Jq=typeof window<"u"?A.useLayoutEffect:A.useEffect,lC=new WeakMap;function Qq(n,e){var t=Zq(null,function(r){return n.forEach(function(i){return Xw(i,r)})});return Jq(function(){var r=lC.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(l){s.has(l)||Xw(l,null)}),s.forEach(function(l){i.has(l)||Xw(l,o)})}lC.set(t,n)},[n]),t}function eG(n){return n}function tG(n,e){e===void 0&&(e=eG);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(l){return s(l)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var l=t;t=[],l.forEach(s),o=t}var d=function(){var f=o;o=[],f.forEach(s)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),t}}}};return i}function nG(n){n===void 0&&(n={});var e=tG(null);return e.options=So({async:!0,ssr:!1},n),e}var IP=function(n){var e=n.sideCar,t=RP(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,So({},t))};IP.isSideCarExport=!0;function rG(n,e){return n.useMedium(e),IP}var MP=nG(),Zw=function(){},Xy=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:Zw,onWheelCapture:Zw,onTouchMoveCapture:Zw}),i=r[0],s=r[1],o=n.forwardProps,l=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,m=n.shards,v=n.sideCar,b=n.noRelative,S=n.noIsolation,x=n.inert,C=n.allowPinchZoom,P=n.as,I=P===void 0?"div":P,R=n.gapMode,M=RP(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=v,F=Qq([t,e]),B=So(So({},M),i);return A.createElement(A.Fragment,null,f&&A.createElement(N,{sideCar:MP,removeScrollBar:h,shards:m,noRelative:b,noIsolation:S,inert:x,setCallbacks:s,allowPinchZoom:!!C,lockRef:t,gapMode:R}),o?A.cloneElement(A.Children.only(l),So(So({},B),{ref:F})):A.createElement(I,So({},B,{className:d,ref:F}),l))});Xy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xy.classNames={fullWidth:Xv,zeroRight:Yv};var iG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function sG(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=iG();return e&&n.setAttribute("nonce",e),n}function oG(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function aG(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var lG=function(){var n=0,e=null;return{add:function(t){n==0&&(e=sG())&&(oG(e,t),aG(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cG=function(){var n=lG();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},DP=function(){var n=cG(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},uG={left:0,top:0,right:0,gap:0},Jw=function(n){return parseInt(n||"",10)||0},dG=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Jw(t),Jw(r),Jw(i)]},hG=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return uG;var e=dG(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},fG=DP(),Ph="data-scroll-locked",pG=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(Yq,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ph,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Xv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yv," .").concat(Yv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xv," .").concat(Xv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ph,`] {
    `).concat(Xq,": ").concat(l,`px;
  }
`)},cC=function(){var n=parseInt(document.body.getAttribute(Ph)||"0",10);return isFinite(n)?n:0},mG=function(){A.useEffect(function(){return document.body.setAttribute(Ph,(cC()+1).toString()),function(){var n=cC()-1;n<=0?document.body.removeAttribute(Ph):document.body.setAttribute(Ph,n.toString())}},[])},gG=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;mG();var s=A.useMemo(function(){return hG(i)},[i]);return A.createElement(fG,{styles:pG(s,!e,i,t?"":"!important")})},K_=!1;if(typeof window<"u")try{var Ov=Object.defineProperty({},"passive",{get:function(){return K_=!0,!0}});window.addEventListener("test",Ov,Ov),window.removeEventListener("test",Ov,Ov)}catch{K_=!1}var yh=K_?{passive:!1}:!1,vG=function(n){return n.tagName==="TEXTAREA"},OP=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!vG(n)&&t[e]==="visible")},yG=function(n){return OP(n,"overflowY")},wG=function(n){return OP(n,"overflowX")},uC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=NP(n,r);if(i){var s=LP(n,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},_G=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},bG=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},NP=function(n,e){return n==="v"?yG(e):wG(e)},LP=function(n,e){return n==="v"?_G(e):bG(e)},xG=function(n,e){return n==="h"&&e==="rtl"?-1:1},SG=function(n,e,t,r,i){var s=xG(n,window.getComputedStyle(e).direction),o=s*r,l=t.target,d=e.contains(l),h=!1,f=o>0,m=0,v=0;do{if(!l)break;var b=LP(n,l),S=b[0],x=b[1],C=b[2],P=x-C-s*S;(S||P)&&NP(n,l)&&(m+=P,v+=S);var I=l.parentNode;l=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(f&&Math.abs(m)<1||!f&&Math.abs(v)<1)&&(h=!0),h},Nv=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},dC=function(n){return[n.deltaX,n.deltaY]},hC=function(n){return n&&"current"in n?n.current:n},AG=function(n,e){return n[0]===e[0]&&n[1]===e[1]},EG=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},CG=0,wh=[];function kG(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),i=A.useState(CG++)[0],s=A.useState(DP)[0],o=A.useRef(n);A.useEffect(function(){o.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var x=Kq([n.lockRef.current],(n.shards||[]).map(hC),!0).filter(Boolean);return x.forEach(function(C){return C.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var l=A.useCallback(function(x,C){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var P=Nv(x),I=t.current,R="deltaX"in x?x.deltaX:I[0]-P[0],M="deltaY"in x?x.deltaY:I[1]-P[1],N,F=x.target,B=Math.abs(R)>Math.abs(M)?"h":"v";if("touches"in x&&B==="h"&&F.type==="range")return!1;var H=uC(B,F);if(!H)return!0;if(H?N=B:(N=B==="v"?"h":"v",H=uC(B,F)),!H)return!1;if(!r.current&&"changedTouches"in x&&(R||M)&&(r.current=N),!N)return!0;var K=r.current||N;return SG(K,C,x,K==="h"?R:M)},[]),d=A.useCallback(function(x){var C=x;if(!(!wh.length||wh[wh.length-1]!==s)){var P="deltaY"in C?dC(C):Nv(C),I=e.current.filter(function(N){return N.name===C.type&&(N.target===C.target||C.target===N.shadowParent)&&AG(N.delta,P)})[0];if(I&&I.should){C.cancelable&&C.preventDefault();return}if(!I){var R=(o.current.shards||[]).map(hC).filter(Boolean).filter(function(N){return N.contains(C.target)}),M=R.length>0?l(C,R[0]):!o.current.noIsolation;M&&C.cancelable&&C.preventDefault()}}},[]),h=A.useCallback(function(x,C,P,I){var R={name:x,delta:C,target:P,should:I,shadowParent:TG(P)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(M){return M!==R})},1)},[]),f=A.useCallback(function(x){t.current=Nv(x),r.current=void 0},[]),m=A.useCallback(function(x){h(x.type,dC(x),x.target,l(x,n.lockRef.current))},[]),v=A.useCallback(function(x){h(x.type,Nv(x),x.target,l(x,n.lockRef.current))},[]);A.useEffect(function(){return wh.push(s),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",d,yh),document.addEventListener("touchmove",d,yh),document.addEventListener("touchstart",f,yh),function(){wh=wh.filter(function(x){return x!==s}),document.removeEventListener("wheel",d,yh),document.removeEventListener("touchmove",d,yh),document.removeEventListener("touchstart",f,yh)}},[]);var b=n.removeScrollBar,S=n.inert;return A.createElement(A.Fragment,null,S?A.createElement(s,{styles:EG(i)}):null,b?A.createElement(gG,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function TG(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const PG=rG(MP,kG);var Zy=A.forwardRef(function(n,e){return A.createElement(Xy,So({},n,{ref:e,sideCar:PG}))});Zy.classNames=Xy.classNames;var Y_=["Enter"," "],RG=["ArrowDown","PageUp","Home"],jP=["ArrowUp","PageDown","End"],IG=[...RG,...jP],MG={ltr:[...Y_,"ArrowRight"],rtl:[...Y_,"ArrowLeft"]},DG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Om="Menu",[vm,OG,NG]=sx(Om),[Tu,FP]=Ro(Om,[NG,Ky,AP]),Jy=Ky(),$P=AP(),[LG,Pu]=Tu(Om),[jG,Nm]=Tu(Om),zP=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,l=Jy(e),[d,h]=A.useState(null),f=A.useRef(!1),m=ir(s),v=Uy(i);return A.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),y.jsx(wP,{...l,children:y.jsx(LG,{scope:e,open:t,onOpenChange:m,content:d,onContentChange:h,children:y.jsx(jG,{scope:e,onClose:A.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:v,modal:o,children:r})})})};zP.displayName=Om;var FG="MenuAnchor",vx=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Jy(t);return y.jsx(_P,{...i,...r,ref:e})});vx.displayName=FG;var yx="MenuPortal",[$G,BP]=Tu(yx,{forceMount:void 0}),UP=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=Pu(yx,e);return y.jsx($G,{scope:e,forceMount:t,children:y.jsx($i,{present:t||s.open,children:y.jsx(Yy,{asChild:!0,container:i,children:r})})})};UP.displayName=yx;var cs="MenuContent",[zG,wx]=Tu(cs),VP=A.forwardRef((n,e)=>{const t=BP(cs,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=Pu(cs,n.__scopeMenu),o=Nm(cs,n.__scopeMenu);return y.jsx(vm.Provider,{scope:n.__scopeMenu,children:y.jsx($i,{present:r||s.open,children:y.jsx(vm.Slot,{scope:n.__scopeMenu,children:o.modal?y.jsx(BG,{...i,ref:e}):y.jsx(UG,{...i,ref:e})})})})}),BG=A.forwardRef((n,e)=>{const t=Pu(cs,n.__scopeMenu),r=A.useRef(null),i=Et(e,r);return A.useEffect(()=>{const s=r.current;if(s)return gx(s)},[]),y.jsx(_x,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:$e(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),UG=A.forwardRef((n,e)=>{const t=Pu(cs,n.__scopeMenu);return y.jsx(_x,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),VG=pu("MenuContent.ScrollLock"),_x=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:b,disableOutsideScroll:S,...x}=n,C=Pu(cs,t),P=Nm(cs,t),I=Jy(t),R=$P(t),M=OG(t),[N,F]=A.useState(null),B=A.useRef(null),H=Et(e,B,C.onContentChange),K=A.useRef(0),le=A.useRef(""),me=A.useRef(0),he=A.useRef(null),de=A.useRef("right"),fe=A.useRef(0),z=S?Zy:A.Fragment,q=S?{as:VG,allowPinchZoom:!0}:void 0,re=ne=>{const Q=le.current+ne,$=M().filter(ve=>!ve.disabled),ie=document.activeElement,Z=$.find(ve=>ve.ref.current===ie)?.textValue,Re=$.map(ve=>ve.textValue),Ae=t8(Re,Q,Z),Ie=$.find(ve=>ve.textValue===Ae)?.ref.current;(function ve(Ne){le.current=Ne,window.clearTimeout(K.current),Ne!==""&&(K.current=window.setTimeout(()=>ve(""),1e3))})(Q),Ie&&setTimeout(()=>Ie.focus())};A.useEffect(()=>()=>window.clearTimeout(K.current),[]),ox();const U=A.useCallback(ne=>de.current===he.current?.side&&r8(ne,he.current?.area),[]);return y.jsx(zG,{scope:t,searchRef:le,onItemEnter:A.useCallback(ne=>{U(ne)&&ne.preventDefault()},[U]),onItemLeave:A.useCallback(ne=>{U(ne)||(B.current?.focus(),F(null))},[U]),onTriggerLeave:A.useCallback(ne=>{U(ne)&&ne.preventDefault()},[U]),pointerGraceTimerRef:me,onPointerGraceIntentChange:A.useCallback(ne=>{he.current=ne},[]),children:y.jsx(z,{...q,children:y.jsx(Wy,{asChild:!0,trapped:i,onMountAutoFocus:$e(s,ne=>{ne.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(Vy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:v,onDismiss:b,children:y.jsx(Vq,{asChild:!0,...R,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:F,onEntryFocus:$e(d,ne=>{P.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(bP,{role:"menu","aria-orientation":"vertical","data-state":sR(C.open),"data-radix-menu-content":"",dir:P.dir,...I,...x,ref:H,style:{outline:"none",...x.style},onKeyDown:$e(x.onKeyDown,ne=>{const $=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,ie=ne.ctrlKey||ne.altKey||ne.metaKey,Z=ne.key.length===1;$&&(ne.key==="Tab"&&ne.preventDefault(),!ie&&Z&&re(ne.key));const Re=B.current;if(ne.target!==Re||!IG.includes(ne.key))return;ne.preventDefault();const Ie=M().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);jP.includes(ne.key)&&Ie.reverse(),QG(Ie)}),onBlur:$e(n.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(K.current),le.current="")}),onPointerMove:$e(n.onPointerMove,ym(ne=>{const Q=ne.target,$=fe.current!==ne.clientX;if(ne.currentTarget.contains(Q)&&$){const ie=ne.clientX>fe.current?"right":"left";de.current=ie,fe.current=ne.clientX}}))})})})})})})});VP.displayName=cs;var WG="MenuGroup",bx=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(it.div,{role:"group",...r,ref:e})});bx.displayName=WG;var HG="MenuLabel",WP=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(it.div,{...r,ref:e})});WP.displayName=HG;var yy="MenuItem",fC="menu.itemSelect",Qy=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=A.useRef(null),o=Nm(yy,n.__scopeMenu),l=wx(yy,n.__scopeMenu),d=Et(e,s),h=A.useRef(!1),f=()=>{const m=s.current;if(!t&&m){const v=new CustomEvent(fC,{bubbles:!0,cancelable:!0});m.addEventListener(fC,b=>r?.(b),{once:!0}),KT(m,v),v.defaultPrevented?h.current=!1:o.onClose()}};return y.jsx(HP,{...i,ref:d,disabled:t,onClick:$e(n.onClick,f),onPointerDown:m=>{n.onPointerDown?.(m),h.current=!0},onPointerUp:$e(n.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:$e(n.onKeyDown,m=>{const v=l.searchRef.current!=="";t||v&&m.key===" "||Y_.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Qy.displayName=yy;var HP=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=wx(yy,t),l=$P(t),d=A.useRef(null),h=Et(e,d),[f,m]=A.useState(!1),[v,b]=A.useState("");return A.useEffect(()=>{const S=d.current;S&&b((S.textContent??"").trim())},[s.children]),y.jsx(vm.ItemSlot,{scope:t,disabled:r,textValue:i??v,children:y.jsx(Wq,{asChild:!0,...l,focusable:!r,children:y.jsx(it.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:h,onPointerMove:$e(n.onPointerMove,ym(S=>{r?o.onItemLeave(S):(o.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(n.onPointerLeave,ym(S=>o.onItemLeave(S))),onFocus:$e(n.onFocus,()=>m(!0)),onBlur:$e(n.onBlur,()=>m(!1))})})})}),qG="MenuCheckboxItem",qP=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return y.jsx(ZP,{scope:n.__scopeMenu,checked:t,children:y.jsx(Qy,{role:"menuitemcheckbox","aria-checked":wy(t)?"mixed":t,...i,ref:e,"data-state":Sx(t),onSelect:$e(i.onSelect,()=>r?.(wy(t)?!0:!t),{checkForDefaultPrevented:!1})})})});qP.displayName=qG;var GP="MenuRadioGroup",[GG,KG]=Tu(GP,{value:void 0,onValueChange:()=>{}}),KP=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=ir(r);return y.jsx(GG,{scope:n.__scopeMenu,value:t,onValueChange:s,children:y.jsx(bx,{...i,ref:e})})});KP.displayName=GP;var YP="MenuRadioItem",XP=A.forwardRef((n,e)=>{const{value:t,...r}=n,i=KG(YP,n.__scopeMenu),s=t===i.value;return y.jsx(ZP,{scope:n.__scopeMenu,checked:s,children:y.jsx(Qy,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Sx(s),onSelect:$e(r.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});XP.displayName=YP;var xx="MenuItemIndicator",[ZP,YG]=Tu(xx,{checked:!1}),JP=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=YG(xx,t);return y.jsx($i,{present:r||wy(s.checked)||s.checked===!0,children:y.jsx(it.span,{...i,ref:e,"data-state":Sx(s.checked)})})});JP.displayName=xx;var XG="MenuSeparator",QP=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});QP.displayName=XG;var ZG="MenuArrow",eR=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=Jy(t);return y.jsx(xP,{...i,...r,ref:e})});eR.displayName=ZG;var JG="MenuSub",[$Z,tR]=Tu(JG),$p="MenuSubTrigger",nR=A.forwardRef((n,e)=>{const t=Pu($p,n.__scopeMenu),r=Nm($p,n.__scopeMenu),i=tR($p,n.__scopeMenu),s=wx($p,n.__scopeMenu),o=A.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=s,h={__scopeMenu:n.__scopeMenu},f=A.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return A.useEffect(()=>f,[f]),A.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),d(null)}},[l,d]),y.jsx(vx,{asChild:!0,...h,children:y.jsx(HP,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":sR(t.open),...n,ref:By(e,i.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:$e(n.onPointerMove,ym(m=>{s.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:$e(n.onPointerLeave,ym(m=>{f();const v=t.content?.getBoundingClientRect();if(v){const b=t.content?.dataset.side,S=b==="right",x=S?-5:5,C=v[S?"left":"right"],P=v[S?"right":"left"];s.onPointerGraceIntentChange({area:[{x:m.clientX+x,y:m.clientY},{x:C,y:v.top},{x:P,y:v.top},{x:P,y:v.bottom},{x:C,y:v.bottom}],side:b}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(m),m.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:$e(n.onKeyDown,m=>{const v=s.searchRef.current!=="";n.disabled||v&&m.key===" "||MG[r.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});nR.displayName=$p;var rR="MenuSubContent",iR=A.forwardRef((n,e)=>{const t=BP(cs,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=Pu(cs,n.__scopeMenu),o=Nm(cs,n.__scopeMenu),l=tR(rR,n.__scopeMenu),d=A.useRef(null),h=Et(e,d);return y.jsx(vm.Provider,{scope:n.__scopeMenu,children:y.jsx($i,{present:r||s.open,children:y.jsx(vm.Slot,{scope:n.__scopeMenu,children:y.jsx(_x,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{o.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:$e(n.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:$e(n.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:$e(n.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),v=DG[o.dir].includes(f.key);m&&v&&(s.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});iR.displayName=rR;function sR(n){return n?"open":"closed"}function wy(n){return n==="indeterminate"}function Sx(n){return wy(n)?"indeterminate":n?"checked":"unchecked"}function QG(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function e8(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function t8(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=e8(n,Math.max(s,0));i.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function n8(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s],d=e[o],h=l.x,f=l.y,m=d.x,v=d.y;f>r!=v>r&&t<(m-h)*(r-f)/(v-f)+h&&(i=!i)}return i}function r8(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return n8(t,e)}function ym(n){return e=>e.pointerType==="mouse"?n(e):void 0}var i8=zP,s8=vx,o8=UP,a8=VP,l8=bx,c8=WP,u8=Qy,d8=qP,h8=KP,f8=XP,p8=JP,m8=QP,g8=eR,v8=nR,y8=iR,e0="DropdownMenu",[w8,zZ]=Ro(e0,[FP]),qr=FP(),[_8,oR]=w8(e0),aR=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:l=!0}=n,d=qr(e),h=A.useRef(null),[f,m]=Fh({prop:i,defaultProp:s??!1,onChange:o,caller:e0});return y.jsx(_8,{scope:e,triggerId:Ca(),triggerRef:h,contentId:Ca(),open:f,onOpenChange:m,onOpenToggle:A.useCallback(()=>m(v=>!v),[m]),modal:l,children:y.jsx(i8,{...d,open:f,onOpenChange:m,dir:r,modal:l,children:t})})};aR.displayName=e0;var lR="DropdownMenuTrigger",cR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=oR(lR,t),o=qr(t);return y.jsx(s8,{asChild:!0,...o,children:y.jsx(it.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:By(e,s.triggerRef),onPointerDown:$e(n.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:$e(n.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});cR.displayName=lR;var b8="DropdownMenuPortal",uR=n=>{const{__scopeDropdownMenu:e,...t}=n,r=qr(e);return y.jsx(o8,{...r,...t})};uR.displayName=b8;var dR="DropdownMenuContent",hR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=oR(dR,t),s=qr(t),o=A.useRef(!1);return y.jsx(a8,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:$e(n.onCloseAutoFocus,l=>{o.current||i.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:$e(n.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hR.displayName=dR;var x8="DropdownMenuGroup",fR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(l8,{...i,...r,ref:e})});fR.displayName=x8;var S8="DropdownMenuLabel",pR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(c8,{...i,...r,ref:e})});pR.displayName=S8;var A8="DropdownMenuItem",mR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(u8,{...i,...r,ref:e})});mR.displayName=A8;var E8="DropdownMenuCheckboxItem",gR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(d8,{...i,...r,ref:e})});gR.displayName=E8;var C8="DropdownMenuRadioGroup",k8=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(h8,{...i,...r,ref:e})});k8.displayName=C8;var T8="DropdownMenuRadioItem",vR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(f8,{...i,...r,ref:e})});vR.displayName=T8;var P8="DropdownMenuItemIndicator",yR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(p8,{...i,...r,ref:e})});yR.displayName=P8;var R8="DropdownMenuSeparator",wR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(m8,{...i,...r,ref:e})});wR.displayName=R8;var I8="DropdownMenuArrow",M8=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(g8,{...i,...r,ref:e})});M8.displayName=I8;var D8="DropdownMenuSubTrigger",_R=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(v8,{...i,...r,ref:e})});_R.displayName=D8;var O8="DropdownMenuSubContent",bR=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=qr(t);return y.jsx(y8,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bR.displayName=O8;var N8=aR,L8=cR,j8=uR,xR=hR,F8=fR,SR=pR,AR=mR,ER=gR,CR=vR,kR=yR,TR=wR,PR=_R,RR=bR;const $8=N8,z8=L8,pC=F8,B8=lt.forwardRef(({className:n,inset:e,children:t,...r},i)=>y.jsxs(PR,{ref:i,className:ht("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,y.jsx(RT,{className:"ml-auto h-4 w-4"})]}));B8.displayName=PR.displayName;const U8=lt.forwardRef(({className:n,...e},t)=>y.jsx(RR,{ref:t,className:ht("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));U8.displayName=RR.displayName;const IR=lt.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(j8,{children:y.jsx(xR,{ref:r,sideOffset:e,className:ht("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));IR.displayName=xR.displayName;const $s=lt.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(AR,{ref:r,className:ht("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));$s.displayName=AR.displayName;const V8=lt.forwardRef(({className:n,children:e,checked:t,...r},i)=>y.jsxs(ER,{ref:i,className:ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(kR,{children:y.jsx(Qb,{className:"h-4 w-4"})})}),e]}));V8.displayName=ER.displayName;const W8=lt.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(CR,{ref:r,className:ht("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(kR,{children:y.jsx(tH,{className:"h-2 w-2 fill-current"})})}),e]}));W8.displayName=CR.displayName;const X_=lt.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(SR,{ref:r,className:ht("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));X_.displayName=SR.displayName;const Zv=lt.forwardRef(({className:n,...e},t)=>y.jsx(TR,{ref:t,className:ht("-mx-1 my-1 h-px bg-muted",n),...e}));Zv.displayName=TR.displayName;var Qw={exports:{}},e_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC;function H8(){if(mC)return e_;mC=1;var n=Cy();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function l(m,v){var b=v(),S=r({inst:{value:b,getSnapshot:v}}),x=S[0].inst,C=S[1];return s(function(){x.value=b,x.getSnapshot=v,d(x)&&C({inst:x})},[m,b,v]),i(function(){return d(x)&&C({inst:x}),m(function(){d(x)&&C({inst:x})})},[m]),o(b),b}function d(m){var v=m.getSnapshot;m=m.value;try{var b=v();return!t(m,b)}catch{return!0}}function h(m,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return e_.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,e_}var gC;function q8(){return gC||(gC=1,Qw.exports=H8()),Qw.exports}var G8=q8();function K8(){return G8.useSyncExternalStore(Y8,()=>!0,()=>!1)}function Y8(){return()=>{}}var Ax="Avatar",[X8,BZ]=Ro(Ax),[Z8,MR]=X8(Ax),DR=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=A.useState("idle");return y.jsx(Z8,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:y.jsx(it.span,{...r,ref:e})})});DR.displayName=Ax;var OR="AvatarImage",NR=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,o=MR(OR,t),l=J8(r,s),d=ir(h=>{i(h),o.onImageLoadingStatusChange(h)});return Nn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?y.jsx(it.img,{...s,ref:e,src:r}):null});NR.displayName=OR;var LR="AvatarFallback",jR=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=MR(LR,t),[o,l]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&s.imageLoadingStatus!=="loaded"?y.jsx(it.span,{...i,ref:e}):null});jR.displayName=LR;function vC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function J8(n,{referrerPolicy:e,crossOrigin:t}){const r=K8(),i=A.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=A.useState(()=>vC(s,n));return Nn(()=>{l(vC(s,n))},[s,n]),Nn(()=>{const d=m=>()=>{l(m)};if(!s)return;const h=d("loaded"),f=d("error");return s.addEventListener("load",h),s.addEventListener("error",f),e&&(s.referrerPolicy=e),typeof t=="string"&&(s.crossOrigin=t),()=>{s.removeEventListener("load",h),s.removeEventListener("error",f)}},[s,t,e]),o}var FR=DR,$R=NR,zR=jR;const wm=lt.forwardRef(({className:n,...e},t)=>y.jsx(FR,{ref:t,className:ht("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));wm.displayName=FR.displayName;const _m=lt.forwardRef(({className:n,...e},t)=>y.jsx($R,{ref:t,className:ht("aspect-square h-full w-full object-cover",n),...e}));_m.displayName=$R.displayName;const bm=lt.forwardRef(({className:n,...e},t)=>y.jsx(zR,{ref:t,className:ht("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));bm.displayName=zR.displayName;const Q8=({icon:n,active:e,onClick:t,label:r})=>y.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16
      ${e?"text-primary-foreground scale-110":"text-muted-foreground hover:text-foreground hover:scale-105"}`,style:e?{color:"hsl(var(--primary-foreground))"}:{},"aria-label":r,children:[y.jsx("div",{className:"relative w-6 h-6 mb-0.5 flex items-center justify-center",children:y.jsx(n,{className:`w-6 h-6 transition-all duration-200 ${e?"drop-shadow-md":""}`})}),y.jsx("span",{className:"text-[10px] font-medium transition-opacity duration-200 opacity-100",children:r})]}),BR=A.forwardRef(({activeTab:n,setActiveTab:e},t)=>{const{user:r,logout:i,settings:s,isFeatureEnabled:o}=yi(),l=Wh(),{toast:d}=ds(),h=C=>{e(C),l(`/${C}`)},f=async()=>{try{await i()&&l("/login",{replace:!0})}catch{}},m=()=>{window.handlePWAInstall?window.handlePWAInstall():d({title:"Instalação não disponível",description:"A funcionalidade de instalação não está pronta. Tente mais tarde.",variant:"destructive"})},v=s?.profile_photo||r?.user_metadata?.avatar_url,b=s?.user_name||r?.user_metadata?.full_name||"Usuário",S=C=>{const P=C.split(" ");return P.length===1?P[0].charAt(0).toUpperCase():`${P[0].charAt(0)}${P[P.length-1].charAt(0)}`.toUpperCase()},x=[{id:"dashboard",icon:iH,label:"Início"},{id:"workflow",icon:dm,label:"Trabalhos"},{id:"clients",icon:FT,label:"Clientes"},{id:"financial",icon:pm,label:"Caixa"}];return y.jsxs(sr.nav,{ref:t,initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:200,damping:30},className:"fixed bottom-0 left-0 right-0 bg-card/80 dark:bg-card/70 backdrop-blur-xl border-t border-border/70 shadow-top-lg z-[450] flex items-center justify-around px-1",style:{paddingTop:"0.5rem",paddingBottom:"calc(0.5rem + env(safe-area-inset-bottom))",height:"auto"},children:[x.map(C=>y.jsx(Q8,{icon:C.icon,active:n===C.id,onClick:()=>h(C.id),label:C.label},C.id)),y.jsxs($8,{children:[y.jsx(z8,{asChild:!0,children:y.jsxs("button",{className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16 text-muted-foreground hover:text-foreground hover:scale-105","aria-label":"Mais opções",children:[y.jsxs(wm,{className:"w-6 h-6 border-2 border-primary/70",children:[y.jsx(_m,{src:v,alt:b}),y.jsx(bm,{className:"bg-muted text-sm font-bold",children:S(b)})]}),y.jsx("span",{className:"text-[10px] font-medium opacity-100",children:"Menu"})]})}),y.jsxs(IR,{side:"top",align:"end",className:"mb-2 w-64 bg-popover/80 dark:bg-popover/70 backdrop-blur-md shadow-lg",style:{marginBottom:"calc(0.5rem + env(safe-area-inset-bottom))"},children:[y.jsx(X_,{className:"font-normal",children:y.jsxs("div",{className:"flex flex-col space-y-1",children:[y.jsx("p",{className:"text-sm font-medium leading-none",children:b}),y.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),y.jsx(Zv,{}),y.jsxs(pC,{children:[y.jsxs($s,{onClick:()=>h("referrals"),className:"text-green-500 focus:bg-green-500/10 focus:text-green-500",children:[y.jsx(ex,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Indique e Ganhe"})]}),o("agenda_pro")&&y.jsxs($s,{onClick:()=>h("calendar"),children:[y.jsx(PT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Agenda"})]}),o("quadros")&&y.jsxs($s,{onClick:()=>h("quadros"),children:[y.jsx(jT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Quadros"})]}),o("relatorios")&&y.jsxs($s,{onClick:()=>h("reports"),children:[y.jsx(kT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Relatórios"})]})]}),y.jsx(Zv,{}),y.jsxs(pC,{children:[y.jsx(X_,{children:"Ferramentas"}),o("precifique")&&y.jsxs($s,{onClick:()=>h("precifique"),children:[y.jsx(hm,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Precificar"})]}),o("reserva_inteligente")&&y.jsxs($s,{onClick:()=>h("reserva-inteligente"),children:[y.jsx(nx,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Reserva Inteligente"})]}),o("meu_setup")&&y.jsxs($s,{onClick:()=>h("my-setup"),children:[y.jsx(MT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Meu Setup"})]})]}),y.jsx(Zv,{}),y.jsxs($s,{onClick:m,children:[y.jsx(nH,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Baixar aplicativo"})]}),y.jsxs($s,{onClick:()=>h("settings"),children:[y.jsx(LT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Configurações"})]}),y.jsxs($s,{onClick:f,className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[y.jsx(DT,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Sair"})]})]})]})]})});BR.displayName="BottomNavBar";const qt=()=>y.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:[y.jsx(sr.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:y.jsx(jh,{className:"h-12 w-12 text-primary animate-spin"})}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Carregando..."})]});function Z_(n,[e,t]){return Math.min(t,Math.max(e,n))}function UR(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var VR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),e9="VisuallyHidden",t9=A.forwardRef((n,e)=>y.jsx(it.span,{...n,ref:e,style:{...VR,...n.style}}));t9.displayName=e9;var n9=[" ","Enter","ArrowUp","ArrowDown"],r9=[" ","Enter"],gu="Select",[t0,n0,i9]=sx(gu),[Xh,UZ]=Ro(gu,[i9,Ky]),r0=Ky(),[s9,Bl]=Xh(gu),[o9,a9]=Xh(gu),WR=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:m,disabled:v,required:b,form:S}=n,x=r0(e),[C,P]=A.useState(null),[I,R]=A.useState(null),[M,N]=A.useState(!1),F=Uy(h),[B,H]=Fh({prop:r,defaultProp:i??!1,onChange:s,caller:gu}),[K,le]=Fh({prop:o,defaultProp:l,onChange:d,caller:gu}),me=A.useRef(null),he=C?S||!!C.closest("form"):!0,[de,fe]=A.useState(new Set),z=Array.from(de).map(q=>q.props.value).join(";");return y.jsx(wP,{...x,children:y.jsxs(s9,{required:b,scope:e,trigger:C,onTriggerChange:P,valueNode:I,onValueNodeChange:R,valueNodeHasChildren:M,onValueNodeHasChildrenChange:N,contentId:Ca(),value:K,onValueChange:le,open:B,onOpenChange:H,dir:F,triggerPointerDownPosRef:me,disabled:v,children:[y.jsx(t0.Provider,{scope:e,children:y.jsx(o9,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(q=>{fe(re=>new Set(re).add(q))},[]),onNativeOptionRemove:A.useCallback(q=>{fe(re=>{const U=new Set(re);return U.delete(q),U})},[]),children:t})}),he?y.jsxs(hI,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:m,value:K,onChange:q=>le(q.target.value),disabled:v,form:S,children:[K===void 0?y.jsx("option",{value:""}):null,Array.from(de)]},z):null]})})};WR.displayName=gu;var HR="SelectTrigger",qR=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=r0(t),o=Bl(HR,t),l=o.disabled||r,d=Et(e,o.onTriggerChange),h=n0(t),f=A.useRef("touch"),[m,v,b]=pI(x=>{const C=h().filter(R=>!R.disabled),P=C.find(R=>R.value===o.value),I=mI(C,x,P);I!==void 0&&o.onValueChange(I.value)}),S=x=>{l||(o.onOpenChange(!0),b()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return y.jsx(_P,{asChild:!0,...s,children:y.jsx(it.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":fI(o.value)?"":void 0,...i,ref:d,onClick:$e(i.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:$e(i.onPointerDown,x=>{f.current=x.pointerType;const C=x.target;C.hasPointerCapture(x.pointerId)&&C.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:$e(i.onKeyDown,x=>{const C=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(C&&x.key===" ")&&n9.includes(x.key)&&(S(),x.preventDefault())})})})});qR.displayName=HR;var GR="SelectValue",KR=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...l}=n,d=Bl(GR,t),{onValueNodeHasChildrenChange:h}=d,f=s!==void 0,m=Et(e,d.onValueNodeChange);return Nn(()=>{h(f)},[h,f]),y.jsx(it.span,{...l,ref:m,style:{pointerEvents:"none"},children:fI(d.value)?y.jsx(y.Fragment,{children:o}):s})});KR.displayName=GR;var l9="SelectIcon",YR=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return y.jsx(it.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});YR.displayName=l9;var c9="SelectPortal",XR=n=>y.jsx(Yy,{asChild:!0,...n});XR.displayName=c9;var vu="SelectContent",ZR=A.forwardRef((n,e)=>{const t=Bl(vu,n.__scopeSelect),[r,i]=A.useState();if(Nn(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?Am.createPortal(y.jsx(JR,{scope:n.__scopeSelect,children:y.jsx(t0.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),s):null}return y.jsx(QR,{...n,ref:e})});ZR.displayName=vu;var zs=10,[JR,Ul]=Xh(vu),u9="SelectContentImpl",d9=pu("SelectContent.RemoveScroll"),QR=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:C,...P}=n,I=Bl(vu,t),[R,M]=A.useState(null),[N,F]=A.useState(null),B=Et(e,ve=>M(ve)),[H,K]=A.useState(null),[le,me]=A.useState(null),he=n0(t),[de,fe]=A.useState(!1),z=A.useRef(!1);A.useEffect(()=>{if(R)return gx(R)},[R]),ox();const q=A.useCallback(ve=>{const[Ne,...He]=he().map(Ot=>Ot.ref.current),[Xe]=He.slice(-1),at=document.activeElement;for(const Ot of ve)if(Ot===at||(Ot?.scrollIntoView({block:"nearest"}),Ot===Ne&&N&&(N.scrollTop=0),Ot===Xe&&N&&(N.scrollTop=N.scrollHeight),Ot?.focus(),document.activeElement!==at))return},[he,N]),re=A.useCallback(()=>q([H,R]),[q,H,R]);A.useEffect(()=>{de&&re()},[de,re]);const{onOpenChange:U,triggerPointerDownPosRef:ne}=I;A.useEffect(()=>{if(R){let ve={x:0,y:0};const Ne=Xe=>{ve={x:Math.abs(Math.round(Xe.pageX)-(ne.current?.x??0)),y:Math.abs(Math.round(Xe.pageY)-(ne.current?.y??0))}},He=Xe=>{ve.x<=10&&ve.y<=10?Xe.preventDefault():R.contains(Xe.target)||U(!1),document.removeEventListener("pointermove",Ne),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",He,{capture:!0})}}},[R,U,ne]),A.useEffect(()=>{const ve=()=>U(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[U]);const[Q,$]=pI(ve=>{const Ne=he().filter(at=>!at.disabled),He=Ne.find(at=>at.ref.current===document.activeElement),Xe=mI(Ne,ve,He);Xe&&setTimeout(()=>Xe.ref.current.focus())}),ie=A.useCallback((ve,Ne,He)=>{const Xe=!z.current&&!He;(I.value!==void 0&&I.value===Ne||Xe)&&(K(ve),Xe&&(z.current=!0))},[I.value]),Z=A.useCallback(()=>R?.focus(),[R]),Re=A.useCallback((ve,Ne,He)=>{const Xe=!z.current&&!He;(I.value!==void 0&&I.value===Ne||Xe)&&me(ve)},[I.value]),Ae=r==="popper"?J_:eI,Ie=Ae===J_?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:C}:{};return y.jsx(JR,{scope:t,content:R,viewport:N,onViewportChange:F,itemRefCallback:ie,selectedItem:H,onItemLeave:Z,itemTextRefCallback:Re,focusSelectedItem:re,selectedItemText:le,position:r,isPositioned:de,searchRef:Q,children:y.jsx(Zy,{as:d9,allowPinchZoom:!0,children:y.jsx(Wy,{asChild:!0,trapped:I.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:$e(i,ve=>{I.trigger?.focus({preventScroll:!0}),ve.preventDefault()}),children:y.jsx(Vy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>I.onOpenChange(!1),children:y.jsx(Ae,{role:"listbox",id:I.contentId,"data-state":I.open?"open":"closed",dir:I.dir,onContextMenu:ve=>ve.preventDefault(),...P,...Ie,onPlaced:()=>fe(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:$e(P.onKeyDown,ve=>{const Ne=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Ne&&ve.key.length===1&&$(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Xe=he().filter(at=>!at.disabled).map(at=>at.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Xe=Xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const at=ve.target,Ot=Xe.indexOf(at);Xe=Xe.slice(Ot+1)}setTimeout(()=>q(Xe)),ve.preventDefault()}})})})})})})});QR.displayName=u9;var h9="SelectItemAlignedPosition",eI=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=Bl(vu,t),o=Ul(vu,t),[l,d]=A.useState(null),[h,f]=A.useState(null),m=Et(e,B=>f(B)),v=n0(t),b=A.useRef(!1),S=A.useRef(!0),{viewport:x,selectedItem:C,selectedItemText:P,focusSelectedItem:I}=o,R=A.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&h&&x&&C&&P){const B=s.trigger.getBoundingClientRect(),H=h.getBoundingClientRect(),K=s.valueNode.getBoundingClientRect(),le=P.getBoundingClientRect();if(s.dir!=="rtl"){const at=le.left-H.left,Ot=K.left-at,mn=B.left-Ot,Qt=B.width+mn,Gr=Math.max(Qt,H.width),zi=window.innerWidth-zs,Ln=Z_(Ot,[zs,Math.max(zs,zi-Gr)]);l.style.minWidth=Qt+"px",l.style.left=Ln+"px"}else{const at=H.right-le.right,Ot=window.innerWidth-K.right-at,mn=window.innerWidth-B.right-Ot,Qt=B.width+mn,Gr=Math.max(Qt,H.width),zi=window.innerWidth-zs,Ln=Z_(Ot,[zs,Math.max(zs,zi-Gr)]);l.style.minWidth=Qt+"px",l.style.right=Ln+"px"}const me=v(),he=window.innerHeight-zs*2,de=x.scrollHeight,fe=window.getComputedStyle(h),z=parseInt(fe.borderTopWidth,10),q=parseInt(fe.paddingTop,10),re=parseInt(fe.borderBottomWidth,10),U=parseInt(fe.paddingBottom,10),ne=z+q+de+U+re,Q=Math.min(C.offsetHeight*5,ne),$=window.getComputedStyle(x),ie=parseInt($.paddingTop,10),Z=parseInt($.paddingBottom,10),Re=B.top+B.height/2-zs,Ae=he-Re,Ie=C.offsetHeight/2,ve=C.offsetTop+Ie,Ne=z+q+ve,He=ne-Ne;if(Ne<=Re){const at=me.length>0&&C===me[me.length-1].ref.current;l.style.bottom="0px";const Ot=h.clientHeight-x.offsetTop-x.offsetHeight,mn=Math.max(Ae,Ie+(at?Z:0)+Ot+re),Qt=Ne+mn;l.style.height=Qt+"px"}else{const at=me.length>0&&C===me[0].ref.current;l.style.top="0px";const mn=Math.max(Re,z+x.offsetTop+(at?ie:0)+Ie)+He;l.style.height=mn+"px",x.scrollTop=Ne-Re+x.offsetTop}l.style.margin=`${zs}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=he+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[v,s.trigger,s.valueNode,l,h,x,C,P,s.dir,r]);Nn(()=>R(),[R]);const[M,N]=A.useState();Nn(()=>{h&&N(window.getComputedStyle(h).zIndex)},[h]);const F=A.useCallback(B=>{B&&S.current===!0&&(R(),I?.(),S.current=!1)},[R,I]);return y.jsx(p9,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:F,children:y.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:y.jsx(it.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});eI.displayName=h9;var f9="SelectPopperPosition",J_=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=zs,...s}=n,o=r0(t);return y.jsx(bP,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});J_.displayName=f9;var[p9,Ex]=Xh(vu,{}),Q_="SelectViewport",tI=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=Ul(Q_,t),o=Ex(Q_,t),l=Et(e,s.onViewportChange),d=A.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(t0.Slot,{scope:t,children:y.jsx(it.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$e(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=o;if(v?.current&&m){const b=Math.abs(d.current-f.scrollTop);if(b>0){const S=window.innerHeight-zs*2,x=parseFloat(m.style.minHeight),C=parseFloat(m.style.height),P=Math.max(x,C);if(P<S){const I=P+b,R=Math.min(S,I),M=I-R;m.style.height=R+"px",m.style.bottom==="0px"&&(f.scrollTop=M>0?M:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});tI.displayName=Q_;var nI="SelectGroup",[m9,g9]=Xh(nI),v9=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Ca();return y.jsx(m9,{scope:t,id:i,children:y.jsx(it.div,{role:"group","aria-labelledby":i,...r,ref:e})})});v9.displayName=nI;var rI="SelectLabel",iI=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=g9(rI,t);return y.jsx(it.div,{id:i.id,...r,ref:e})});iI.displayName=rI;var _y="SelectItem",[y9,sI]=Xh(_y),oI=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,l=Bl(_y,t),d=Ul(_y,t),h=l.value===r,[f,m]=A.useState(s??""),[v,b]=A.useState(!1),S=Et(e,I=>d.itemRefCallback?.(I,r,i)),x=Ca(),C=A.useRef("touch"),P=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(y9,{scope:t,value:r,disabled:i,textId:x,isSelected:h,onItemTextChange:A.useCallback(I=>{m(R=>R||(I?.textContent??"").trim())},[]),children:y.jsx(t0.ItemSlot,{scope:t,value:r,disabled:i,textValue:f,children:y.jsx(it.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:S,onFocus:$e(o.onFocus,()=>b(!0)),onBlur:$e(o.onBlur,()=>b(!1)),onClick:$e(o.onClick,()=>{C.current!=="mouse"&&P()}),onPointerUp:$e(o.onPointerUp,()=>{C.current==="mouse"&&P()}),onPointerDown:$e(o.onPointerDown,I=>{C.current=I.pointerType}),onPointerMove:$e(o.onPointerMove,I=>{C.current=I.pointerType,i?d.onItemLeave?.():C.current==="mouse"&&I.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,I=>{I.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:$e(o.onKeyDown,I=>{d.searchRef?.current!==""&&I.key===" "||(r9.includes(I.key)&&P(),I.key===" "&&I.preventDefault())})})})})});oI.displayName=_y;var zp="SelectItemText",aI=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=Bl(zp,t),l=Ul(zp,t),d=sI(zp,t),h=a9(zp,t),[f,m]=A.useState(null),v=Et(e,P=>m(P),d.onItemTextChange,P=>l.itemTextRefCallback?.(P,d.value,d.disabled)),b=f?.textContent,S=A.useMemo(()=>y.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:C}=h;return Nn(()=>(x(S),()=>C(S)),[x,C,S]),y.jsxs(y.Fragment,{children:[y.jsx(it.span,{id:d.textId,...s,ref:v}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Am.createPortal(s.children,o.valueNode):null]})});aI.displayName=zp;var lI="SelectItemIndicator",cI=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return sI(lI,t).isSelected?y.jsx(it.span,{"aria-hidden":!0,...r,ref:e}):null});cI.displayName=lI;var eb="SelectScrollUpButton",w9=A.forwardRef((n,e)=>{const t=Ul(eb,n.__scopeSelect),r=Ex(eb,n.__scopeSelect),[i,s]=A.useState(!1),o=Et(e,r.onScrollButtonChange);return Nn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollTop>0;s(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?y.jsx(uI,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});w9.displayName=eb;var tb="SelectScrollDownButton",_9=A.forwardRef((n,e)=>{const t=Ul(tb,n.__scopeSelect),r=Ex(tb,n.__scopeSelect),[i,s]=A.useState(!1),o=Et(e,r.onScrollButtonChange);return Nn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;s(f)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?y.jsx(uI,{...n,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});_9.displayName=tb;var uI=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=Ul("SelectScrollButton",t),o=A.useRef(null),l=n0(t),d=A.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),Nn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),y.jsx(it.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:$e(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:$e(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:$e(i.onPointerLeave,()=>{d()})})}),b9="SelectSeparator",dI=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return y.jsx(it.div,{"aria-hidden":!0,...r,ref:e})});dI.displayName=b9;var nb="SelectArrow",x9=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=r0(t),s=Bl(nb,t),o=Ul(nb,t);return s.open&&o.position==="popper"?y.jsx(xP,{...i,...r,ref:e}):null});x9.displayName=nb;var S9="SelectBubbleInput",hI=A.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=A.useRef(null),s=Et(r,i),o=UR(e);return A.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==e&&f){const m=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(m)}},[o,e]),y.jsx(it.select,{...t,style:{...VR,...t.style},ref:s,defaultValue:e})});hI.displayName=S9;function fI(n){return n===""||n===void 0}function pI(n){const e=ir(n),t=A.useRef(""),r=A.useRef(0),i=A.useCallback(o=>{const l=t.current+o;e(l),function d(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),s=A.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function mI(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=A9(n,Math.max(s,0));i.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function A9(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var E9=WR,gI=qR,C9=KR,k9=YR,T9=XR,vI=ZR,P9=tI,yI=iI,wI=oI,R9=aI,I9=cI,_I=dI;const mi=E9,gi=C9,Br=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(gI,{ref:r,className:ht("flex h-10 w-full items-center justify-between rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),...t,children:[e,y.jsx(k9,{asChild:!0,children:y.jsx(Q5,{className:"h-4 w-4 opacity-50"})})]}));Br.displayName=gI.displayName;const Ur=A.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>y.jsx(T9,{children:y.jsx(vI,{ref:i,className:ht("relative z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-background dark:border-border",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:y.jsx(P9,{className:ht("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Ur.displayName=vI.displayName;const M9=A.forwardRef(({className:n,...e},t)=>y.jsx(yI,{ref:t,className:ht("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));M9.displayName=yI.displayName;const $t=A.forwardRef(({className:n,children:e,...t},r)=>t.value===null||t.value===void 0||t.value===""?null:y.jsxs(wI,{ref:r,className:ht("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-accent",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(I9,{children:y.jsx(Qb,{className:"h-4 w-4"})})}),y.jsx(R9,{children:e})]}));$t.displayName=wI.displayName;const D9=A.forwardRef(({className:n,...e},t)=>y.jsx(_I,{ref:t,className:ht("-mx-1 my-1 h-px bg-muted",n),...e}));D9.displayName=_I.displayName;const Cx=lt.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ht("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Cx.displayName="Card";const kx=lt.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ht("flex flex-col space-y-1.5 p-6",n),...e}));kx.displayName="CardHeader";const Tx=lt.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ht("text-2xl font-semibold leading-none tracking-tight",n),...e}));Tx.displayName="CardTitle";const Px=lt.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ht("text-sm text-muted-foreground",n),...e}));Px.displayName="CardDescription";const bI=lt.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ht("p-6 pt-0",n),...e}));bI.displayName="CardContent";const Rx=lt.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ht("flex items-center p-6 pt-0",n),...e}));Rx.displayName="CardFooter";const O9=({allocation:n,savingGoals:e,onConfirm:t,onDismiss:r})=>{const[i,s]=A.useState(""),[o,l]=A.useState(!0);A.useEffect(()=>{if(e&&e.length>0){const v=e.find(b=>b.nome_meta.toLowerCase().includes("emergência")||b.nome_meta.toLowerCase().includes("reserva"));v?s(v.id):e[0]?.id?s(e[0].id):s("")}else s("")},[e]);const d=()=>{i&&(t(i),l(!1))},h=()=>{r(),l(!1)};if(!o||!n)return null;const f=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),m=e&&e.length>0;return y.jsx(sr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50,transition:{duration:.2}},className:"fixed bottom-4 right-4 z-[101] w-full max-w-md",children:y.jsxs(Cx,{className:"shadow-2xl border-l-4 border-customPurple bg-card",children:[y.jsx(kx,{children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(nx,{className:"w-8 h-8 mr-3 text-customPurple"}),y.jsxs("div",{children:[y.jsx(Tx,{className:"text-lg font-semibold text-foreground",children:"Alocar Reserva Financeira?"}),y.jsxs(Px,{className:"text-sm text-muted-foreground",children:["Pagamento de ",f(n.transactionValue),' recebido para "',n.serviceName,'".']})]})]})}),y.jsxs(bI,{className:"space-y-3",children:[y.jsxs("p",{className:"text-base text-foreground",children:["Sugerimos guardar ",y.jsx("strong",{className:"text-customGreen",children:f(n.reserveAmount)}),"."]}),m?y.jsxs("div",{children:[y.jsx("label",{htmlFor:"goalSelect",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Escolha a meta de destino:"}),y.jsxs(mi,{value:i,onValueChange:s,disabled:!i,children:[y.jsx(Br,{id:"goalSelect",className:"w-full bg-input border-border focus:border-customPurple",children:y.jsx(gi,{placeholder:"Selecione uma meta..."})}),y.jsx(Ur,{className:"max-h-60",children:e.filter(v=>v.id).map(v=>y.jsxs($t,{value:v.id,children:[v.icone&&y.jsx("span",{className:"mr-2",children:v.icone}),v.nome_meta," (",f(v.saldo_atual),")"]},v.id))})]})]}):y.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Nenhuma meta de reserva encontrada. Crie uma em "Reserva Inteligente" para alocar.'})]}),y.jsxs(Rx,{className:"flex justify-end space-x-3 pt-4",children:[y.jsxs(Dt,{variant:"outline",onClick:h,className:"text-muted-foreground hover:bg-accent",children:[y.jsx(pH,{className:"mr-2 h-4 w-4"})," Agora não"]}),y.jsxs(Dt,{onClick:d,disabled:!i||!m,className:"bg-customGreen hover:bg-customGreen/90 text-white",children:[y.jsx(J5,{className:"mr-2 h-4 w-4"})," Confirmar"]})]})]})})},N9=n=>{const e=Wh(),[t,r]=A.useState(n),[i,s]=A.useState({type:"all",period:"all"}),o=A.useCallback((l,d={type:"all",period:"all"})=>{s(d),r(l),e(`/${l}`,{replace:!0}),window.scrollTo(0,0)},[e]);return{activeTab:t,setActiveTab:o,initialFinancialFilter:i}},L9=()=>{const[n,e]=A.useState(window.innerWidth<768);return A.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),{isMobile:n}},t_="gofotografo_trial_modal_shown_session",yC=[{element:"#dashboard-stat-card-netBalance",popover:{title:"Seu Saldo Geral",description:"Aqui você acompanha o valor total de todos os pagamentos que já recebeu de seus clientes.",side:"bottom",align:"start"}},{element:"#dashboard-stat-card-pendingToReceive",popover:{title:"Pagamentos a Receber",description:"Fique de olho nos valores que ainda entrarão no seu caixa. Essencial para seu planejamento!",side:"bottom",align:"start"}},{element:"#dashboard-chart-card-revenueExpensesChart",popover:{title:"Gráfico de Faturamento",description:"Acompanhe visualmente a performance do seu negócio com o gráfico de entradas e saídas.",side:"top",align:"start"}},{element:"#floating-action-button",popover:{title:"Menu de Navegação Rápida",description:"Clique aqui a qualquer momento para acessar as outras seções importantes, como Clientes, Trabalhos e Caixa.",side:"left",align:"start"}}],j9=n=>{const{user:e,settings:t,setSettings:r,trialDaysRemaining:i,planStatus:s,loadingAuth:o,loading:l}=yi(),{openModal:d,closeModal:h,openModals:f}=Gh(),m=qs(),v=Wh(),{toast:b}=ds(),[S,x]=A.useState(!1),[C,P]=A.useState(!1),I=A.useCallback((H=[],K={})=>{const le=new URLSearchParams(m.search);H.forEach(he=>le.delete(he)),Object.entries(K).forEach(([he,de])=>{de!=null?le.set(he,String(de)):le.delete(he)});const me=le.toString();v(`${m.pathname}${me?`?${me}`:""}`,{replace:!0})},[m.search,m.pathname,v]),R=A.useCallback(async()=>{if(e&&t&&t.has_completed_tour===!1)try{await r({...t,has_completed_tour:!0})}catch{b({title:"Erro",description:"Não foi possível salvar o status do tour.",variant:"destructive"})}},[e,t,r,b]),M=A.useCallback(()=>{if(typeof window.driver>"u"){b({title:"Erro no Tour",description:"Não foi possível iniciar o tour guiado.",variant:"destructive"}),R();return}const H=window.driver.js.driver,K=H({showProgress:!0,nextBtnText:"Próximo →",prevBtnText:"← Anterior",doneBtnText:"Finalizar",steps:yC.map(le=>({...le,popover:{...le.popover,onNextClick:()=>K.moveNext(),onPrevClick:()=>K.movePrevious(),onCloseClick:()=>{K.destroy(),R()}}})),onDestroyStarted:()=>{const le=K.getActiveIndex?K.getActiveIndex():-1,me=yC.length;(le===-1||le<me-1)&&R(),K.destroy()},onHighlighted:le=>{le&&le.node&&le.node.scrollIntoView?le.node.scrollIntoView({behavior:"smooth",block:"center"}):le&&le.target&&le.target.scrollIntoView&&le.target.scrollIntoView({behavior:"smooth",block:"center"})}});K.drive()},[b,R]);return A.useEffect(()=>{new URLSearchParams(m.search).get("payment_status")==="success"&&(I(["payment_status","session_id"]),sessionStorage.removeItem(t_))},[m,I]),A.useEffect(()=>{!o&&e&&s==="TRIAL"&&i>=0&&!sessionStorage.getItem(t_)&&!f.trialInfoModal&&!n&&(x(!0),d("trialInfoModal"),sessionStorage.setItem(t_,"true"))},[o,e,s,i,d,f,n]),A.useEffect(()=>{!o&&!l&&e&&t&&t.has_completed_tour===!1&&!f.trialInfoModal&&!f.welcomeTourModal&&!n&&(P(!0),d("welcomeTourModal"))},[o,l,e,t,d,f,n]),{showTrialInfoModal:S,handleCloseTrialInfoModal:()=>{x(!1),h("trialInfoModal")},showWelcomeTourModal:C,handleStartWelcomeTour:()=>{P(!1),h("welcomeTourModal"),M()},handleDeclineWelcomeTour:()=>{P(!1),h("welcomeTourModal"),R()},trialDaysRemainingFromHook:i}};let Lv;const F9=new Uint8Array(16);function $9(){if(!Lv&&(Lv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Lv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Lv(F9)}const mr=[];for(let n=0;n<256;++n)mr.push((n+256).toString(16).slice(1));function z9(n,e=0){return mr[n[e+0]]+mr[n[e+1]]+mr[n[e+2]]+mr[n[e+3]]+"-"+mr[n[e+4]]+mr[n[e+5]]+"-"+mr[n[e+6]]+mr[n[e+7]]+"-"+mr[n[e+8]]+mr[n[e+9]]+"-"+mr[n[e+10]]+mr[n[e+11]]+mr[n[e+12]]+mr[n[e+13]]+mr[n[e+14]]+mr[n[e+15]]}const B9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wC={randomUUID:B9};function U9(n,e,t){if(wC.randomUUID&&!n)return wC.randomUUID();n=n||{};const r=n.random||(n.rng||$9)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,z9(r)}const xI=()=>{const{user:n,addClient:e,updateClient:t,getClientById:r}=yi(),{toast:i}=ds(),{openModals:s,closeModal:o}=Gh(),{isOpen:l,clientId:d,returnTo:h,onSuccess:f}=s.client||{},m=d?r(d):null,[v,b]=A.useState(!1),[S,x]=A.useState(null),[C,P]=A.useState(null),I=A.useRef(null),R=A.useCallback(()=>({name:"",email:"",phone:"",client_type:"Pessoa Física",status:"Ativo",cpf:"",cnpj:"",profile_photo_url:null}),[]),[M,N]=A.useState(R()),F=m?`client_form_draft_${m.id}`:"client_form_draft_new";A.useEffect(()=>{if(l){const de=localStorage.getItem(F);if(de)N(JSON.parse(de)),P(JSON.parse(de).profile_photo_url);else if(m){const fe={name:m.name||"",email:m.email||"",phone:m.phone||"",client_type:m.client_type||"Pessoa Física",status:m.status||"Ativo",cpf:m.cpf||"",cnpj:m.cnpj||"",profile_photo_url:m.profile_photo_url||null};N(fe),P(fe.profile_photo_url)}else N(R()),P(null)}else x(null),P(null)},[m,l,F,R]),A.useEffect(()=>{l&&localStorage.setItem(F,JSON.stringify(M))},[M,l,F]);const B=de=>{const fe=de.target.files[0];fe&&(x(fe),P(URL.createObjectURL(fe)))},H=()=>{x(null),P(null),N(de=>({...de,profile_photo_url:null})),I.current&&(I.current.value="")},K=()=>{localStorage.removeItem(F),o("client")},le=de=>{if(!de)return"?";const fe=de.split(" ");return fe.length===1?fe[0].charAt(0).toUpperCase():`${fe[0].charAt(0)}${fe[fe.length-1].charAt(0)}`.toUpperCase()},me=async de=>{if(de.preventDefault(),!M.name.trim()){i({title:"Erro de Validação",description:"O nome do cliente é obrigatório.",variant:"destructive"});return}b(!0);const fe={...M};fe.client_type==="Pessoa Física"?fe.cnpj="":fe.cpf="";try{let z=M.profile_photo_url;if(S){const re=S.name.split(".").pop(),U=`${M.name.replace(/\s+/g,"_")}-${U9()}.${re}`,ne=`public/${n.id}/client_photos/${U}`,{error:Q}=await xe.storage.from("user_assets").upload(ne,S,{cacheControl:"3600",upsert:!0});if(Q)throw Q;const{data:$}=xe.storage.from("user_assets").getPublicUrl(ne);z=$.publicUrl}else M.profile_photo_url===null&&(z=null);fe.profile_photo_url=z;let q;m?(q=await t(m.id,fe),i({title:"Cliente atualizado",description:"Cliente foi atualizado com sucesso!"})):(q=await e(fe),i({title:"Cliente adicionado",description:"Novo cliente foi adicionado com sucesso!"})),h&&f&&(f(q||{...fe,id:m?.id}),i({title:"Sucesso!",description:"Cliente selecionado automaticamente no formulário financeiro."})),localStorage.removeItem(F),K()}catch(z){i({title:"Erro ao salvar",description:`Falha ao salvar cliente: ${z.message}`,variant:"destructive"})}finally{b(!1)}},he=(de,fe)=>{N(z=>{const q={...z,[de]:fe};return de==="client_type"&&(q.cpf="",q.cnpj=""),q})};return l?y.jsx(Vs,{children:l&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(sr.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:m?"Editar Cliente":"Novo Cliente"}),y.jsx(Dt,{variant:"ghost",size:"icon",onClick:K,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:v,children:y.jsx(Cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:me,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[y.jsxs(wm,{className:"w-24 h-24 text-3xl border-4 border-primary/20",children:[y.jsx(_m,{src:C,alt:M.name}),y.jsx(bm,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:le(M.name)})]}),y.jsx("input",{type:"file",ref:I,onChange:B,accept:"image/png, image/jpeg",className:"hidden",disabled:v}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(Dt,{type:"button",variant:"outline",size:"sm",onClick:()=>I.current?.click(),disabled:v,children:[y.jsx(Z5,{className:"w-4 h-4 mr-2"}),C?"Alterar Foto":"Adicionar Foto"]}),C&&y.jsxs(Dt,{type:"button",variant:"destructive",size:"sm",onClick:H,disabled:v,children:[y.jsx(rx,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(hH,{className:"w-4 h-4 inline mr-2"}),"Nome *"]}),y.jsx("input",{type:"text",value:M.name,onChange:de=>he("name",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do cliente",required:!0,disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Zp,{className:"w-4 h-4 inline mr-2"}),"Tipo de Cliente"]}),y.jsxs("select",{value:M.client_type,onChange:de=>he("client_type",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:v,children:[y.jsx("option",{value:"Pessoa Física",children:"Pessoa Física"}),y.jsx("option",{value:"Pessoa Jurídica",children:"Pessoa Jurídica"})]})]}),M.client_type==="Pessoa Física"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fH,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:M.cpf,onChange:de=>he("cpf",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:v})]}),M.client_type==="Pessoa Jurídica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Zp,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:M.cnpj,onChange:de=>he("cnpj",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(OT,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:M.email,onChange:de=>he("email",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:v})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(NT,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:M.phone,onChange:de=>he("phone",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:v})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsxs("select",{value:M.status,onChange:de=>he("status",de.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:v,children:[y.jsx("option",{value:"Ativo",children:"Ativo"}),y.jsx("option",{value:"Inativo",children:"Inativo"})]})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Dt,{type:"button",variant:"outline",onClick:K,className:"flex-1",disabled:v,children:"Cancelar"}),y.jsx(Dt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:v,children:v?y.jsx(jh,{className:"w-4 h-4 animate-spin"}):m?"Atualizar":"Adicionar"})]})]})]})})}):null},V9=[{value:"equipamentos",label:"Equipamentos Fotográficos",icon:"📷"},{value:"software",label:"Software/Licenças",icon:"💻"},{value:"servicos",label:"Serviços Gerais",icon:"🛠️"},{value:"marketing",label:"Marketing/Publicidade",icon:"📢"},{value:"educacao",label:"Educação/Cursos",icon:"📚"},{value:"transporte",label:"Transporte/Logística",icon:"🚗"},{value:"alimentacao",label:"Alimentação/Hospedagem",icon:"🍽️"},{value:"estudio",label:"Estúdio/Locação",icon:"🏠"},{value:"freelancer",label:"Freelancer/Assistente",icon:"👤"},{value:"juridico",label:"Jurídico/Contabilidade",icon:"⚖️"},{value:"manutencao",label:"Manutenção/Reparo",icon:"🔧"},{value:"material",label:"Material de Escritório",icon:"📝"},{value:"tecnologia",label:"Tecnologia/Internet",icon:"🌐"},{value:"seguro",label:"Seguros",icon:"🛡️"},{value:"outros",label:"Outros",icon:"💼"}],W9=[{value:"pessoa_fisica",label:"Pessoa Física"},{value:"pessoa_juridica",label:"Pessoa Jurídica"},{value:"mei",label:"MEI"}],H9=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"},{value:"bloqueado",label:"Bloqueado"}],q9=()=>{const{addSupplier:n,updateSupplier:e,getSupplierById:t}=yi(),{toast:r}=ds(),{openModals:i,closeModal:s}=Gh(),{isOpen:o,supplierId:l,returnTo:d,onSuccess:h}=i.supplier||{},f=l?t(l):null,[m,v]=A.useState(!1),b=A.useCallback(()=>({name:"",email:"",phone:"",supplier_type:"pessoa_juridica",category:"",status:"ativo",cpf:"",cnpj:"",notes:""}),[]),[S,x]=A.useState(b()),C=f?`supplier_form_draft_${f.id}`:"supplier_form_draft_new";A.useEffect(()=>{if(o){const M=localStorage.getItem(C);if(M)x(JSON.parse(M));else if(f){const N={name:f.name||"",email:f.email||"",phone:f.phone||"",supplier_type:f.supplier_type||"pessoa_juridica",category:f.category||"",status:f.status||"ativo",cpf:f.cpf||"",cnpj:f.cnpj||"",notes:f.notes||""};x(N)}else x(b())}},[f,o,C,b]),A.useEffect(()=>{o&&localStorage.setItem(C,JSON.stringify(S))},[S,o,C]);const P=()=>{localStorage.removeItem(C),s("supplier")},I=async M=>{if(M.preventDefault(),!S.name.trim()){r({title:"Erro de Validação",description:"O nome do fornecedor é obrigatório.",variant:"destructive"});return}v(!0);const N={...S};N.supplier_type==="pessoa_fisica"||N.supplier_type==="mei"?N.cnpj="":N.cpf="";try{let F;f?(F=await e(f.id,N),r({title:"Fornecedor atualizado",description:"Fornecedor foi atualizado com sucesso!"})):(F=await n(N),r({title:"Fornecedor adicionado",description:"Novo fornecedor foi adicionado com sucesso!"})),d&&h&&(h(F||{...N,id:f?.id}),r({title:"Sucesso!",description:"Fornecedor selecionado automaticamente no formulário financeiro."})),localStorage.removeItem(C),P()}catch(F){r({title:"Erro ao salvar",description:`Falha ao salvar fornecedor: ${F.message}`,variant:"destructive"})}finally{v(!1)}},R=(M,N)=>{x(F=>{const B={...F,[M]:N};return M==="supplier_type"&&(B.cpf="",B.cnpj=""),B})};return o?y.jsx(Vs,{children:o&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(sr.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:f?"Editar Fornecedor":"Novo Fornecedor"}),y.jsx(Dt,{variant:"ghost",size:"icon",onClick:P,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:m,children:y.jsx(Cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:I,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsx("div",{className:"flex flex-col items-center space-y-3",children:y.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:y.jsx(dm,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Zp,{className:"w-4 h-4 inline mr-2"}),"Nome do Fornecedor *"]}),y.jsx("input",{type:"text",value:S.name,onChange:M=>R("name",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do fornecedor",required:!0,disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Zp,{className:"w-4 h-4 inline mr-2"}),"Tipo de Fornecedor"]}),y.jsx("select",{value:S.supplier_type,onChange:M=>R("supplier_type",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:m,children:W9.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(dm,{className:"w-4 h-4 inline mr-2"}),"Categoria"]}),y.jsxs("select",{value:S.category,onChange:M=>R("category",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:m,children:[y.jsx("option",{value:"",children:"Selecione uma categoria"}),V9.map(M=>y.jsxs("option",{value:M.value,children:[M.icon," ",M.label]},M.value))]})]}),(S.supplier_type==="pessoa_fisica"||S.supplier_type==="mei")&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(z_,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:S.cpf,onChange:M=>R("cpf",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:m})]}),S.supplier_type==="pessoa_juridica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Zp,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:S.cnpj,onChange:M=>R("cnpj",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(OT,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:S.email,onChange:M=>R("email",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(NT,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:S.phone,onChange:M=>R("phone",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(z_,{className:"w-4 h-4 inline mr-2"}),"Observações (Opcional)"]}),y.jsx("textarea",{value:S.notes,onChange:M=>R("notes",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent h-20 resize-none",placeholder:"Observações sobre o fornecedor...",disabled:m})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsx("select",{value:S.status,onChange:M=>R("status",M.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:m,children:H9.map(M=>y.jsx("option",{value:M.value,children:M.label},M.value))})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Dt,{type:"button",variant:"outline",onClick:P,className:"flex-1",disabled:m,children:"Cancelar"}),y.jsx(Dt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:m,children:m?y.jsx(jh,{className:"w-4 h-4 animate-spin"}):f?"Atualizar":"Adicionar"})]})]})]})})}):null},Vr=A.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:ht("flex h-10 w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:r,...t}));Vr.displayName="Input";var G9="Label",SI=A.forwardRef((n,e)=>y.jsx(it.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));SI.displayName=G9;var AI=SI;const K9=GT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),hn=lt.forwardRef(({className:n,...e},t)=>y.jsx(AI,{ref:t,className:ht(K9(),n),...e}));hn.displayName=AI.displayName;var i0="Dialog",[EI,VZ]=Ro(i0),[Y9,Gs]=EI(i0),CI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,l=A.useRef(null),d=A.useRef(null),[h,f]=Fh({prop:r,defaultProp:i??!1,onChange:s,caller:i0});return y.jsx(Y9,{scope:e,triggerRef:l,contentRef:d,contentId:Ca(),titleId:Ca(),descriptionId:Ca(),open:h,onOpenChange:f,onOpenToggle:A.useCallback(()=>f(m=>!m),[f]),modal:o,children:t})};CI.displayName=i0;var kI="DialogTrigger",TI=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Gs(kI,t),s=Et(e,i.triggerRef);return y.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Dx(i.open),...r,ref:s,onClick:$e(n.onClick,i.onOpenToggle)})});TI.displayName=kI;var Ix="DialogPortal",[X9,PI]=EI(Ix,{forceMount:void 0}),RI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Gs(Ix,e);return y.jsx(X9,{scope:e,forceMount:t,children:A.Children.map(r,o=>y.jsx($i,{present:t||s.open,children:y.jsx(Yy,{asChild:!0,container:i,children:o})}))})};RI.displayName=Ix;var by="DialogOverlay",II=A.forwardRef((n,e)=>{const t=PI(by,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Gs(by,n.__scopeDialog);return s.modal?y.jsx($i,{present:r||s.open,children:y.jsx(J9,{...i,ref:e})}):null});II.displayName=by;var Z9=pu("DialogOverlay.RemoveScroll"),J9=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Gs(by,t);return y.jsx(Zy,{as:Z9,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(it.div,{"data-state":Dx(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),yu="DialogContent",MI=A.forwardRef((n,e)=>{const t=PI(yu,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Gs(yu,n.__scopeDialog);return y.jsx($i,{present:r||s.open,children:s.modal?y.jsx(Q9,{...i,ref:e}):y.jsx(e7,{...i,ref:e})})});MI.displayName=yu;var Q9=A.forwardRef((n,e)=>{const t=Gs(yu,n.__scopeDialog),r=A.useRef(null),i=Et(e,t.contentRef,r);return A.useEffect(()=>{const s=r.current;if(s)return gx(s)},[]),y.jsx(DI,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(n.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:$e(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:$e(n.onFocusOutside,s=>s.preventDefault())})}),e7=A.forwardRef((n,e)=>{const t=Gs(yu,n.__scopeDialog),r=A.useRef(!1),i=A.useRef(!1);return y.jsx(DI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),DI=A.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,l=Gs(yu,t),d=A.useRef(null),h=Et(e,d);return ox(),y.jsxs(y.Fragment,{children:[y.jsx(Wy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(Vy,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Dx(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(t7,{titleId:l.titleId}),y.jsx(r7,{contentRef:d,descriptionId:l.descriptionId})]})]})}),Mx="DialogTitle",OI=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Gs(Mx,t);return y.jsx(it.h2,{id:i.titleId,...r,ref:e})});OI.displayName=Mx;var NI="DialogDescription",LI=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Gs(NI,t);return y.jsx(it.p,{id:i.descriptionId,...r,ref:e})});LI.displayName=NI;var jI="DialogClose",FI=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Gs(jI,t);return y.jsx(it.button,{type:"button",...r,ref:e,onClick:$e(n.onClick,()=>i.onOpenChange(!1))})});FI.displayName=jI;function Dx(n){return n?"open":"closed"}var $I="DialogTitleWarning",[WZ,zI]=JH($I,{contentName:yu,titleName:Mx,docsSlug:"dialog"}),t7=({titleId:n})=>{const e=zI($I),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},n7="DialogDescriptionWarning",r7=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zI(n7).contentName}}.`;return A.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},i7=CI,HZ=TI,s7=RI,BI=II,UI=MI,VI=OI,WI=LI,HI=FI;const o7=i7,a7=s7,qZ=HI,qI=lt.forwardRef(({className:n,...e},t)=>y.jsx(BI,{ref:t,className:ht("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));qI.displayName=BI.displayName;const GI=lt.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(a7,{children:[y.jsx(qI,{}),y.jsxs(UI,{ref:r,className:ht("fixed left-[50%] top-[50%] z-[51] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/50 bg-background/70 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-xl",n),...t,children:[e,y.jsxs(HI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(Cu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));GI.displayName=UI.displayName;const KI=({className:n,...e})=>y.jsx("div",{className:ht("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});KI.displayName="DialogHeader";const l7=({className:n,...e})=>y.jsx("div",{className:ht("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});l7.displayName="DialogFooter";const YI=lt.forwardRef(({className:n,...e},t)=>y.jsx(VI,{ref:t,className:ht("text-lg font-semibold leading-none tracking-tight",n),...e}));YI.displayName=VI.displayName;const XI=lt.forwardRef(({className:n,...e},t)=>y.jsx(WI,{ref:t,className:ht("text-sm text-muted-foreground",n),...e}));XI.displayName=WI.displayName;const c7={ENTRADA:[{value:"sessao_fotos",label:"Sessão de Fotos",icon:"📸"},{value:"evento",label:"Evento/Casamento",icon:"💒"},{value:"ensaio",label:"Ensaio",icon:"🌟"},{value:"album",label:"Álbum/Produto",icon:"📚"},{value:"edicao",label:"Edição de Fotos",icon:"✨"},{value:"consultoria",label:"Consultoria",icon:"💡"},{value:"curso",label:"Curso/Workshop",icon:"🎓"},{value:"licenciamento",label:"Licenciamento de Imagem",icon:"📄"},{value:"book",label:"Book Fotográfico",icon:"📖"},{value:"corporativo",label:"Evento Corporativo",icon:"🏢"},{value:"newborn",label:"Newborn",icon:"👶"},{value:"gestante",label:"Ensaio Gestante",icon:"🤱"},{value:"familia",label:"Ensaio Família",icon:"👨‍👩‍👧‍👦"},{value:"formatura",label:"Formatura",icon:"🎓"},{value:"aniversario",label:"Aniversário",icon:"🎂"},{value:"outros",label:"Outros",icon:"📷"}],SAIDA:[{value:"equipamento",label:"Equipamento Fotográfico",icon:"📹"},{value:"lente",label:"Lentes",icon:"🔍"},{value:"iluminacao",label:"Iluminação",icon:"💡"},{value:"tripé",label:"Tripés/Suportes",icon:"🏗️"},{value:"software",label:"Software/Licenças",icon:"💻"},{value:"marketing",label:"Marketing/Publicidade",icon:"📢"},{value:"site",label:"Site/Hospedagem",icon:"🌐"},{value:"curso_capacitacao",label:"Cursos/Capacitação",icon:"📚"},{value:"transporte",label:"Transporte/Combustível",icon:"🚗"},{value:"alimentacao",label:"Alimentação",icon:"🍽️"},{value:"estudio",label:"Aluguel Estúdio",icon:"🏠"},{value:"cenario",label:"Cenários/Props",icon:"🎭"},{value:"assistente",label:"Assistente/Freelancer",icon:"👤"},{value:"contador",label:"Contador/Contabilidade",icon:"📊"},{value:"seguro",label:"Seguro Equipamentos",icon:"🛡️"},{value:"manutencao",label:"Manutenção Equipamentos",icon:"🔧"},{value:"material",label:"Material Escritório",icon:"📝"},{value:"backup",label:"Backup/Armazenamento",icon:"💾"},{value:"juridico",label:"Jurídico/Advocacia",icon:"⚖️"},{value:"outros",label:"Outros",icon:"💸"}]},u7=[{value:"pix",label:"PIX",icon:"🔄"},{value:"cartao_credito",label:"Cartão de Crédito",icon:"💳"},{value:"cartao_debito",label:"Cartão de Débito",icon:"💳"},{value:"dinheiro",label:"Dinheiro",icon:"💵"},{value:"cheque",label:"Cheque",icon:"📄"},{value:"ted",label:"TED",icon:"🏦"},{value:"doc",label:"DOC",icon:"🏦"},{value:"deposito",label:"Depósito Bancário",icon:"🏧"},{value:"boleto",label:"Boleto",icon:"📊"},{value:"outros",label:"Outros",icon:"💰"}],GZ=[{value:"all",label:"Todos os períodos"},{value:"today",label:"Hoje"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mês"},{value:"last_7_days",label:"Últimos 7 dias"},{value:"last_30_days",label:"Últimos 30 dias"},{value:"last_90_days",label:"Últimos 90 dias"},{value:"last_year",label:"Último ano"},{value:"current_year",label:"Este ano"},{value:"custom",label:"Período personalizado"}],d7=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:i})=>{const{clients:s,suppliers:o=[],addTransaction:l,updateTransaction:d,wallets:h}=yi(),{toast:f}=ds(),{openModal:m}=Gh(),[v,b]=A.useState(""),[S,x]=A.useState(""),[C,P]=A.useState(su(new Date,"yyyy-MM-dd")),[I,R]=A.useState("PENDENTE"),[M,N]=A.useState(""),[F,B]=A.useState(""),[H,K]=A.useState(""),[le,me]=A.useState(""),[he,de]=A.useState(""),[fe,z]=A.useState(!1),q=A.useCallback(()=>{b(""),x(""),P(su(new Date,"yyyy-MM-dd")),R("PENDENTE"),N(""),B(""),K(""),me(""),de("")},[]);A.useEffect(()=>{n&&(r?(b(r.descricao||""),x(r.valor||""),P(r.data?su(new Date(r.data),"yyyy-MM-dd"):su(new Date,"yyyy-MM-dd")),R(r.status||"PENDENTE"),N(r.cliente_id||""),B(r.fornecedor_id||r.supplier_id||""),K(r.category||""),me(r.metodo_pagamento||""),de(r.wallet_id||"")):q())},[r,n,q]);const re=async Z=>{if(Z.preventDefault(),t==="ENTRADA"&&I==="PAGO"&&!he){f({title:"Erro de Validação",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}z(!0);const Re={descricao:v,valor:parseFloat(S),data:C,tipo:t.toUpperCase(),status:I,cliente_id:t.toUpperCase()==="ENTRADA"&&M||null,fornecedor_id:t.toUpperCase()==="SAIDA"&&F||null,category:H,metodo_pagamento:le,wallet_id:he||null};try{r?.id?(await d(r.id,Re),f({title:"Sucesso!",description:"Lançamento atualizado."})):(await l(Re),f({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`})),i&&i(),e()}catch(Ae){f({title:"Erro",description:`Não foi possível salvar: ${Ae.message}`,variant:"destructive"})}finally{z(!1)}},U=h?.filter(Z=>Z&&Z.id&&Z.name)||[],ne=s?.filter(Z=>Z&&Z.id&&Z.name)||[],Q=o?.filter(Z=>Z&&Z.id&&Z.name)||[],$=()=>{m("client",{returnTo:"financial",onSuccess:Z=>{N(Z.id)}})},ie=()=>{m("supplier",{returnTo:"financial",onSuccess:Z=>{B(Z.id)}})};return y.jsx(Vs,{children:n&&y.jsx(o7,{open:n,onOpenChange:e,children:y.jsx(GI,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col z-[4000]",children:y.jsxs(sr.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex flex-col h-full",children:[y.jsxs(KI,{className:"flex-shrink-0",children:[y.jsxs(YI,{children:[r?.id?"Editar":"Novo"," Lançamento: ",t==="entrada"?"Entrada":"Saída"]}),y.jsx(XI,{children:"Preencha os detalhes abaixo."})]}),y.jsx("div",{className:"flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-muted-foreground/30",children:y.jsxs("form",{onSubmit:re,className:"space-y-4 py-4",children:[y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"descricao",children:"Descrição"}),y.jsx(Vr,{id:"descricao",value:v,onChange:Z=>b(Z.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"valor",children:"Valor (R$)"}),y.jsx(Vr,{id:"valor",type:"number",value:S,onChange:Z=>x(Z.target.value),required:!0,step:"0.01"})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"data",children:"Data"}),y.jsx(Vr,{id:"data",type:"date",value:C,onChange:Z=>P(Z.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"status",children:"Status"}),y.jsxs(mi,{value:I,onValueChange:R,children:[y.jsx(Br,{children:y.jsx(gi,{})}),y.jsxs(Ur,{children:[y.jsx($t,{value:"PENDENTE",children:"Pendente"}),y.jsx($t,{value:"PAGO",children:"Pago"}),y.jsx($t,{value:"ATRASADO",children:"Atrasado"}),y.jsx($t,{value:"CANCELADO",children:"Cancelado"})]})]})]}),t==="entrada"?y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(hn,{htmlFor:"cliente",children:"Cliente (Opcional)"}),y.jsxs(Dt,{type:"button",variant:"outline",size:"sm",onClick:$,className:"h-8 px-3 text-xs",children:[y.jsx(fm,{className:"w-3 h-3 mr-1"}),"Novo Cliente"]})]}),y.jsxs(mi,{value:M||"",onValueChange:N,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um cliente"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Nenhum"}),ne.map(Z=>y.jsx($t,{value:Z.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:Z.name}),Z.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:Z.email})]})},Z.id))]})]})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(hn,{htmlFor:"fornecedor",children:"Fornecedor (Opcional)"}),y.jsxs(Dt,{type:"button",variant:"outline",size:"sm",onClick:ie,className:"h-8 px-3 text-xs",children:[y.jsx(fm,{className:"w-3 h-3 mr-1"}),"Novo Fornecedor"]})]}),y.jsxs(mi,{value:F||"",onValueChange:B,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um fornecedor"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Nenhum"}),Q.map(Z=>y.jsx($t,{value:Z.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:Z.name}),Z.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:Z.email}),Z.category&&y.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:Z.category.replace("_"," ")})]})},Z.id))]})]})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"categoria",children:"Categoria (Opcional)"}),y.jsxs(mi,{value:H,onValueChange:K,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione uma categoria"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Sem categoria"}),(c7[t.toUpperCase()]||[]).map(Z=>y.jsx($t,{value:Z.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:Z.icon}),Z.label]})},Z.value))]})]})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"metodoPagamento",children:"Método de Pagamento (Opcional)"}),y.jsxs(mi,{value:le,onValueChange:me,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um método"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Não especificado"}),u7.map(Z=>y.jsx($t,{value:Z.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:Z.icon}),Z.label]})},Z.value))]})]})]}),y.jsxs("div",{children:[y.jsxs(hn,{htmlFor:"wallet",className:"flex items-center",children:[y.jsx(pm,{className:"w-4 h-4 mr-2"}),"Carteira ",t==="ENTRADA"&&I==="PAGO"?"*":"(Opcional)"]}),U.length>0?y.jsxs(mi,{value:he||"",onValueChange:de,required:t==="ENTRADA"&&I==="PAGO",children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione uma carteira"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Nenhuma"}),U.map(Z=>y.jsx($t,{value:Z.id,children:y.jsxs("div",{className:"flex items-center",children:[Z.icon_url&&y.jsx("img",{src:Z.icon_url,alt:Z.name,className:"w-4 h-4 mr-2 object-contain"}),Z.name]})},Z.id))]})]}):y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-4 flex-shrink-0",children:[y.jsx(Dt,{type:"button",variant:"ghost",onClick:e,disabled:fe,children:"Cancelar"}),y.jsx(Dt,{type:"submit",disabled:fe,children:fe?"Salvando...":"Salvar"})]})]})})]})})})})},ZI=lt.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ht("flex min-h-[80px] w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:t,...e}));ZI.displayName="Textarea";const jv=({label:n,selectedWallet:e,onWalletChange:t,wallets:r,required:i=!1})=>{const s=r?.filter(o=>o&&o.id&&o.name)||[];return s.length===0?y.jsxs("div",{className:"space-y-1",children:[y.jsxs(hn,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(pm,{className:"w-4 h-4 mr-2"}),n]}),y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs(hn,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(pm,{className:"w-4 h-4 mr-2"}),n," ",i&&"*"]}),y.jsxs(mi,{value:e||"",onValueChange:t,required:i,children:[y.jsx(Br,{id:`wallet-selector-${n.replace(/\s+/g,"-")}`,children:y.jsx(gi,{placeholder:"Selecione uma carteira"})}),y.jsxs(Ur,{children:[y.jsx($t,{value:"",children:"Nenhuma"}),s.map(o=>y.jsx($t,{value:o.id,children:y.jsxs("div",{className:"flex items-center",children:[o.icon_url&&y.jsx("img",{src:o.icon_url,alt:o.name,className:"w-4 h-4 mr-2 object-contain"}),o.name]})},o.id))]})]})]})},h7=({card:n,onSave:e,onCancel:t,isSaving:r})=>{const{clients:i,servicePackages:s,settings:o,wallets:l}=yi(),{toast:d}=ds(),[h,f]=A.useState({title:"",client_id:"",status:"agendado",value:"",description:"",date:"",time:"",service_package_id:"",payment_type:"SOMENTE_AGENDADO",entry_value:"",installments:"",payment_method:"",main_wallet_id:"",entry_wallet_id:""});A.useEffect(()=>{f(n?{title:n.title||"",client_id:n.client_id||"",status:n.status||"agendado",value:n.value||"",description:n.description||"",date:n.date?su(Z1(n.date),"yyyy-MM-dd"):"",time:n.time||"",service_package_id:n.service_package_id||"",payment_type:n.payment_type||"SOMENTE_AGENDADO",entry_value:n.entry_value||"",installments:n.installments||"",payment_method:n.payment_method||"",main_wallet_id:n.main_wallet_id||"",entry_wallet_id:n.entry_wallet_id||""}:P=>({...P,status:o?.workflow_columns?.[0]?.id||"agendado"}))},[n,o]);const m=P=>{const{name:I,value:R}=P.target;f(M=>({...M,[I]:R}))},v=(P,I)=>{f(R=>({...R,[P]:I}))},b=P=>{if(P.preventDefault(),h.payment_type!=="SOMENTE_AGENDADO"){if(h.payment_type==="integral"&&!h.main_wallet_id){d({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o pagamento integral.",variant:"destructive"});return}if(h.payment_type==="parcial"&&(!h.entry_wallet_id||!h.main_wallet_id)){d({title:"Campos obrigatórios",description:"Por favor, selecione as carteiras para a entrada e para o restante.",variant:"destructive"});return}if((h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&!h.main_wallet_id){d({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o parcelamento.",variant:"destructive"});return}}e(h)},S=o?.workflow_columns?.filter(P=>P&&P.id&&P.title)||[],x=i?.filter(P=>P&&P.id&&P.name)||[],C=s?.filter(P=>P&&P.id&&P.name)||[];return y.jsxs("form",{onSubmit:b,id:"workflow-form",className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"title",children:"Título do Trabalho"}),y.jsx(Vr,{id:"title",name:"title",value:h.title,onChange:m,required:!0})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"client_id",children:"Cliente"}),y.jsxs(mi,{name:"client_id",value:h.client_id||"",onValueChange:P=>v("client_id",P),children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um cliente"})}),y.jsx(Ur,{className:"max-h-60",children:x.map(P=>y.jsx($t,{value:P.id,children:P.name},P.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"date",children:"Data"}),y.jsx(Vr,{id:"date",name:"date",type:"date",value:h.date,onChange:m})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"time",children:"Hora"}),y.jsx(Vr,{id:"time",name:"time",type:"time",value:h.time,onChange:m})]})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"status",children:"Status"}),y.jsxs(mi,{name:"status",value:h.status,onValueChange:P=>v("status",P),children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um status"})}),y.jsx(Ur,{className:"max-h-60",children:S.map(P=>y.jsx($t,{value:P.id,children:P.title},P.id))})]})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"service_package_id",children:"Pacote de Serviço (Opcional)"}),y.jsxs(mi,{name:"service_package_id",value:h.service_package_id||"",onValueChange:P=>v("service_package_id",P),children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um pacote"})}),y.jsxs(Ur,{className:"max-h-60",children:[y.jsx($t,{value:"",children:"Nenhum"}),C.map(P=>y.jsx($t,{value:P.id,children:P.name},P.id))]})]})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"description",children:"Descrição"}),y.jsx(ZI,{id:"description",name:"description",value:h.description,onChange:m})]}),y.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[y.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[y.jsx(hm,{className:"w-5 h-5 mr-2"})," Detalhes Financeiros"]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"value",children:"Valor Total do Trabalho"}),y.jsx(Vr,{id:"value",name:"value",type:"number",step:"0.01",value:h.value,onChange:m,placeholder:"Ex: 1500.00"})]}),y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"payment_type",children:"Forma de Pagamento"}),y.jsxs(mi,{name:"payment_type",value:h.payment_type,onValueChange:P=>v("payment_type",P),children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione a forma de pagamento"})}),y.jsxs(Ur,{children:[y.jsx($t,{value:"SOMENTE_AGENDADO",children:"Apenas Agendamento"}),y.jsx($t,{value:"integral",children:"Pagamento Integral"}),y.jsx($t,{value:"parcial",children:"Pagamento Parcial (Entrada + Restante)"}),y.jsx($t,{value:"parcelado_pix",children:"Parcelado no PIX"}),y.jsx($t,{value:"parcelado_cartao",children:"Parcelado no Cartão"})]})]})]}),h.payment_type==="integral"&&y.jsx(jv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0}),h.payment_type==="parcial"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"entry_value",children:"Valor da Entrada"}),y.jsx(Vr,{id:"entry_value",name:"entry_value",type:"number",step:"0.01",value:h.entry_value,onChange:m,placeholder:"Ex: 500.00"})]}),y.jsx(jv,{label:"Carteira da Entrada",selectedWallet:h.entry_wallet_id,onWalletChange:P=>v("entry_wallet_id",P),wallets:l,required:!0}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(jv,{label:"Carteira do Restante",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]}),(h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(hn,{htmlFor:"installments",children:"Número de Parcelas"}),y.jsx(Vr,{id:"installments",name:"installments",type:"number",step:"1",value:h.installments,onChange:m,placeholder:"Ex: 6"})]}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(jv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]})]})]})};var s0="Checkbox",[f7,KZ]=Ro(s0),[p7,Ox]=f7(s0);function m7(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:s,form:o,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:m}=n,[v,b]=Fh({prop:t,defaultProp:i??!1,onChange:d,caller:s0}),[S,x]=A.useState(null),[C,P]=A.useState(null),I=A.useRef(!1),R=S?!!o||!!S.closest("form"):!0,M={checked:v,disabled:s,setChecked:b,control:S,setControl:x,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:I,required:h,defaultChecked:Il(i)?!1:i,isFormControl:R,bubbleInput:C,setBubbleInput:P};return y.jsx(p7,{scope:e,...M,children:g7(m)?m(M):r})}var JI="CheckboxTrigger",QI=A.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:s,value:o,disabled:l,checked:d,required:h,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:b,bubbleInput:S}=Ox(JI,n),x=Et(i,f),C=A.useRef(d);return A.useEffect(()=>{const P=s?.form;if(P){const I=()=>m(C.current);return P.addEventListener("reset",I),()=>P.removeEventListener("reset",I)}},[s,m]),y.jsx(it.button,{type:"button",role:"checkbox","aria-checked":Il(d)?"mixed":d,"aria-required":h,"data-state":iM(d),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:x,onKeyDown:$e(e,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:$e(t,P=>{m(I=>Il(I)?!0:!I),S&&b&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})})});QI.displayName=JI;var Nx=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:d,onCheckedChange:h,form:f,...m}=n;return y.jsx(m7,{__scopeCheckbox:t,checked:i,defaultChecked:s,disabled:l,required:o,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:v})=>y.jsxs(y.Fragment,{children:[y.jsx(QI,{...m,ref:e,__scopeCheckbox:t}),v&&y.jsx(rM,{__scopeCheckbox:t})]})})});Nx.displayName=s0;var eM="CheckboxIndicator",tM=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=Ox(eM,t);return y.jsx($i,{present:r||Il(s.checked)||s.checked===!0,children:y.jsx(it.span,{"data-state":iM(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});tM.displayName=eM;var nM="CheckboxBubbleInput",rM=A.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:l,disabled:d,name:h,value:f,form:m,bubbleInput:v,setBubbleInput:b}=Ox(nM,n),S=Et(t,b),x=UR(s),C=cP(r);A.useEffect(()=>{const I=v;if(!I)return;const R=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(R,"checked").set,F=!i.current;if(x!==s&&N){const B=new Event("click",{bubbles:F});I.indeterminate=Il(s),N.call(I,Il(s)?!1:s),I.dispatchEvent(B)}},[v,x,s,i]);const P=A.useRef(Il(s)?!1:s);return y.jsx(it.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??P.current,required:l,disabled:d,name:h,value:f,form:m,...e,tabIndex:-1,ref:S,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rM.displayName=nM;function g7(n){return typeof n=="function"}function Il(n){return n==="indeterminate"}function iM(n){return Il(n)?"indeterminate":n?"checked":"unchecked"}const sM=A.forwardRef(({className:n,...e},t)=>y.jsx(Nx,{ref:t,className:ht("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(tM,{className:ht("flex items-center justify-center text-current"),children:y.jsx(Qb,{className:"h-4 w-4"})})}));sM.displayName=Nx.displayName;const v7=({subtasks:n,onAddSubtask:e,onToggleSubtask:t,onDeleteSubtask:r,cardExists:i})=>{const[s,o]=A.useState(""),l=()=>{s.trim()&&(e(s),o(""))};return i?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(Vr,{type:"text",placeholder:"Nova subtarefa...",value:s,onChange:d=>o(d.target.value),onKeyPress:d=>{d.key==="Enter"&&l()},className:"flex-grow"}),y.jsxs(Dt,{onClick:l,children:[y.jsx(fm,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),y.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[(n||[]).map(d=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-700 rounded-md group",children:[y.jsxs("label",{className:"flex items-center space-x-2 text-sm text-slate-700 dark:text-slate-300 cursor-pointer",children:[y.jsx(sM,{checked:d.completed,onCheckedChange:()=>t(d.id)}),y.jsx("span",{className:d.completed?"line-through text-slate-500 dark:text-slate-400":"",children:d.text})]}),y.jsx(Dt,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100",onClick:()=>r(d.id),children:y.jsx(rx,{size:14,className:"text-red-500"})})]},d.id||d.text)),(n||[]).length===0&&y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhuma subtarefa adicionada."})]})]}):y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(tx,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou gerenciar subtarefas."]})},y7=({comments:n,onAddComment:e,cardExists:t,onAfterComment:r})=>{const[i,s]=A.useState(""),{settings:o}=yi(),l=async()=>{i.trim()&&(await e(i),s(""),r&&r())};if(!t)return y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(tx,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou ver comentários."]});const d=h=>{if(!h)return"?";const f=h.split(" ");return f.length>1?`${f[0][0]}${f[f.length-1][0]}`.toUpperCase():h.substring(0,2).toUpperCase()};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin p-1",children:n&&n.length>0?n.slice().sort((h,f)=>new Date(h.date)-new Date(f.date)).map(h=>y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs(wm,{className:"h-8 w-8",children:[y.jsx(_m,{src:h.user_photo_url,alt:h.user}),y.jsx(bm,{children:d(h.user)})]}),y.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:h.user}),y.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(h.date).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),y.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:h.text})]})]},h.id||h.date)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum comentário ainda."})}),y.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 flex items-start space-x-3",children:[y.jsxs(wm,{className:"h-8 w-8 mt-1",children:[y.jsx(_m,{src:o?.profile_photo,alt:o?.user_name}),y.jsx(bm,{children:d(o?.user_name)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx(Vr,{type:"text",value:i,onChange:h=>s(h.target.value),className:"flex-1",placeholder:"Adicionar comentário...",onKeyPress:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l())}}),y.jsxs(Dt,{onClick:l,size:"sm",className:"mt-2",children:[y.jsx(cH,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]})},w7=({history:n})=>y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:n&&n.length>0?n.slice().reverse().map((e,t)=>y.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg shadow-sm",children:[y.jsx("div",{className:"mt-1 w-2.5 h-2.5 bg-orange-300 rounded-full flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:e.action}),y.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(e.date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),e.user&&` • ${e.user}`]})]}),y.jsx(IT,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]},t)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum histórico disponível."})}),_7=({activeTab:n,setActiveTab:e,cardId:t,subtasksCount:r,commentsCount:i})=>{const s=[{id:"details",label:"Detalhes"},{id:"subtasks",label:`Subtarefas (${r||0})`}];return t&&(s.push({id:"comments",label:`Comentários (${i||0})`}),s.push({id:"history",label:"Histórico"})),y.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:s.map(o=>y.jsx("button",{onClick:()=>e(o.id),className:`px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap ${n===o.id?"text-neutral-600 border-b-2 border-neutral-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.label},o.id))})},Ip=({label:n,children:e,className:t})=>y.jsxs("div",{className:t,children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:n}),e]}),b7=({initialData:n,onSave:e,onCancel:t,onOpenClientModal:r,isSaving:i})=>{const{clients:s,servicePackages:o}=yi(),[l,d]=A.useState(n||{}),h=v=>{const{name:b,value:S}=v.target;d(x=>({...x,[b]:S}))},f=(v,b)=>{let S={...l,[v]:b};if(v==="client_id"||v==="service_package_id"){const x=v==="client_id"?s.find(I=>I.id===b):s.find(I=>I.id===S.client_id),C=v==="service_package_id"?o.find(I=>I.id===b):o.find(I=>I.id===S.service_package_id);let P="";x&&C?P=`${x.name} - ${C.name}`:x?P=x.name:C&&(P=C.name),S.title||(S.title=P),v==="service_package_id"&&C&&(S.value=C.price_cash_pix||C.price_card||"")}d(S)},m=v=>{v.preventDefault(),e(l)};return y.jsxs("form",{id:"quick-create-form",onSubmit:m,className:"space-y-4",children:[y.jsx(Ip,{label:"Título do Trabalho*",children:y.jsx(Vr,{name:"title",value:l.title||"",onChange:h,placeholder:"Ex: Ensaio de Casamento de [Cliente]",required:!0,disabled:i})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(Ip,{label:"Data",children:y.jsx(Vr,{name:"date",type:"date",value:l.date||"",onChange:h,disabled:i})}),y.jsx(Ip,{label:"Valor Total (R$)",children:y.jsx(Vr,{name:"value",type:"number",value:l.value||"",onChange:h,placeholder:"0,00",step:"0.01",min:"0",disabled:i})})]}),y.jsx(Ip,{label:"Cliente Vinculado",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs(mi,{name:"client_id",value:l.client_id||"",onValueChange:v=>f("client_id",v),disabled:i,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um cliente..."})}),y.jsx(Ur,{className:"max-h-60",children:(s||[]).map(v=>y.jsx($t,{value:v.id,children:v.name},v.id))})]}),y.jsx(Dt,{type:"button",variant:"outline",onClick:r,disabled:i,children:y.jsx(fm,{className:"w-4 h-4"})})]})}),y.jsx(Ip,{label:"Pacote de Serviços",children:y.jsxs(mi,{name:"service_package_id",value:l.service_package_id||"",onValueChange:v=>f("service_package_id",v),disabled:i,children:[y.jsx(Br,{children:y.jsx(gi,{placeholder:"Selecione um pacote..."})}),y.jsxs(Ur,{children:[y.jsx($t,{value:"",children:"Nenhum"}),(o||[]).map(v=>y.jsxs($t,{value:v.id,children:[v.name," - R$ ",Number(v.price_cash_pix||v.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]},v.id))]})]})})]})},_C=[{text:"Confirmar detalhes do evento com o cliente",completed:!1},{text:"Verificar e preparar equipamento fotográfico",completed:!1},{text:"Scout do local (se aplicável)",completed:!1},{text:"Definir cronograma do dia do evento/ensaio",completed:!1},{text:"Realizar o evento/ensaio fotográfico",completed:!1},{text:"Fazer backup de todas as fotos e vídeos",completed:!1},{text:"Selecionar as melhores fotos (curadoria)",completed:!1},{text:"Edição e tratamento das imagens selecionadas",completed:!1},{text:"Preparar galeria online ou prévia para o cliente",completed:!1},{text:"Enviar prévia para aprovação do cliente",completed:!1},{text:"Realizar ajustes finais (se necessário)",completed:!1},{text:"Preparar e exportar arquivos finais em alta resolução",completed:!1},{text:"Entregar o material final ao cliente",completed:!1},{text:"Enviar nota fiscal (se aplicável)",completed:!1},{text:"Solicitar feedback/depoimento do cliente",completed:!1},{text:"Arquivar projeto e materiais",completed:!1}],x7=()=>{const{clients:n,servicePackages:e,addWorkflowCard:t,updateWorkflowCard:r,getClientById:i,getServicePackageById:s,addComment:o,refreshData:l,user:d,settings:h,getWorkflowCardById:f}=yi(),{toast:m}=ds(),{openModals:v,closeModal:b,openModal:S}=Gh(),{isOpen:x,cardId:C,initialStatus:P,initialData:I}=v.workflow||{},R=C?f(C):null,M=A.useCallback(()=>{const Q=h?.workflow_columns?.[0]?.id||"novo-lead";return{title:"",client_id:"",service_package_id:"",description:"",date:"",time:"",value:"",tags:[],status:P||Q,contract_url:"",contract_name:"",contract_status:"pending",comments:[],history:[],subtasks:_C.map(ie=>({...ie,id:Math.random().toString(36).substr(2,9)})),order:0,archived:!1,sync_google_calendar:!1,payment_type:"SOMENTE_AGENDADO",payment_method:"",entry_value:"",installments:"",num_installments:"",card_processing_days:"",entry_paid:!1,first_installment_date:"",createFinancialTransaction:!0,main_wallet_id:"",entry_wallet_id:"",...I}},[h,P,I]),[N,F]=A.useState(M()),[B,H]=A.useState("details"),[K,le]=A.useState(!1),[me,he]=A.useState("quick"),de=R?`workflow_form_draft_${R.id}`:`workflow_form_draft_new_${P||"default"}`;A.useEffect(()=>{if(x){he(R?"full":"quick");const Q=localStorage.getItem(de);let $=M();R&&($={...M(),...R,client_id:R.client_id||"",service_package_id:R.service_package_id||"",value:R.value!==void 0&&R.value!==null?String(R.value):"",entry_value:R.entry_value!==void 0&&R.entry_value!==null?String(R.entry_value):"",installments:R.installments!==void 0&&R.installments!==null?String(R.installments):"",num_installments:R.num_installments!==void 0&&R.num_installments!==null?String(R.num_installments):"",card_processing_days:R.card_processing_days!==void 0&&R.card_processing_days!==null?String(R.card_processing_days):"",subtasks:R.subtasks&&R.subtasks.length>0?R.subtasks.map(Z=>({...Z,id:Z.id||Math.random().toString(36).substr(2,9)})):_C.map(Z=>({...Z,id:Math.random().toString(36).substr(2,9)}))});const ie=Q?{...$,...JSON.parse(Q)}:$;F(ie),H("details")}},[R,x,M,de]),A.useEffect(()=>{x&&localStorage.setItem(de,JSON.stringify(N))},[N,x,de]);const fe=()=>{localStorage.removeItem(de),b("workflow")},z=async Q=>{le(!0);const $=Q.title.trim()||"Novo Trabalho",ie=Q.date||null,Z=(Q.payment_type==="ENTRADA_PARCELAS"||Q.payment_type==="PIX_PARCELADO"||Q.payment_type==="CARTAO_PARCELADO")&&parseInt(Q.installments||Q.num_installments,10)||null;let Re=Q.status;R||(Re=P||(Q.date?"agendado":h?.workflow_columns?.[0]?.id||"novo-lead"));const Ae={...N,...Q,user_id:d.id,title:$,date:ie,client_id:Q.client_id||null,service_package_id:Q.service_package_id||null,first_installment_date:Q.first_installment_date||null,value:parseFloat(Q.value)||null,entry_value:parseFloat(Q.entry_value)||null,history:[{action:"Criado",date:new Date().toISOString(),user:h.user_name||d.email}],status:Re,installments:Z,num_installments:Z,card_processing_days:(Q.payment_type==="CARTAO_CREDITO"||Q.payment_type==="CARTAO_PARCELADO")&&parseInt(Q.card_processing_days,10)||null,entry_paid:Q.payment_type==="ENTRADA_PARCELAS"||Q.payment_type==="INTEGRAL"?Q.entry_paid:!1,subtasks:N.subtasks.map(Ie=>({text:Ie.text,completed:Ie.completed,id:Ie.id||Math.random().toString(36).substr(2,9)})),main_wallet_id:Q.main_wallet_id||null,entry_wallet_id:Q.entry_wallet_id||null};try{R&&R.id?(await r(R.id,Ae),m({title:"Sucesso!",description:`Card "${$}" atualizado.`})):(await t(Ae),m({title:"Sucesso!",description:`Agendamento "${$}" criado.`})),localStorage.removeItem(de),await l(),fe()}catch(Ie){m({title:"Erro ao Salvar",description:Ie.message||"Não foi possível salvar.",variant:"destructive",duration:7e3,action:Ie.message.includes("required fields")||Ie.message.includes("obrigatórios")?y.jsx(Dt,{variant:"outline",size:"sm",onClick:()=>{he("full"),H("details")},children:"Verificar Campos"}):void 0})}finally{le(!1)}},q=async Q=>{if(!(!R||!R.id))try{const $=await o(R.id,Q);F(ie=>({...ie,comments:$.comments,history:$.history})),m({title:"Comentário Adicionado"})}catch($){m({title:"Erro",description:$.message,variant:"destructive"})}},re=Q=>F($=>({...$,subtasks:[...$.subtasks||[],{id:Math.random().toString(36).substr(2,9),text:Q,completed:!1}]})),U=Q=>F($=>({...$,subtasks:($.subtasks||[]).map(ie=>ie.id===Q?{...ie,completed:!ie.completed}:ie)})),ne=Q=>F($=>({...$,subtasks:($.subtasks||[]).filter(ie=>ie.id!==Q)}));return x?y.jsxs(Vs,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(sr.div,{initial:{opacity:0,y:50,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.98},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-2xl w-full max-w-3xl shadow-2xl flex flex-col max-h-[95vh] z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:R?"Editar Agendamento":"Novo Agendamento"}),y.jsx(Dt,{variant:"ghost",size:"icon",onClick:fe,className:"w-9 h-9 rounded-full",disabled:K,children:y.jsx(Cu,{className:"w-5 h-5"})})]}),me==="full"&&y.jsx(_7,{activeTab:B,setActiveTab:H,cardId:R?.id,subtasksCount:N.subtasks?.length,commentsCount:N.comments?.length}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 scrollbar-thin",children:[me==="quick"&&y.jsx(b7,{initialData:N,onSave:z,onCancel:fe,onOpenClientModal:()=>S("client",{}),isSaving:K}),me==="full"&&B==="details"&&y.jsx(h7,{card:N,onSave:z,onCancel:fe,isSaving:K}),me==="full"&&B==="subtasks"&&y.jsx(v7,{subtasks:N.subtasks,onAddSubtask:re,onToggleSubtask:U,onDeleteSubtask:ne,cardExists:!!R?.id}),me==="full"&&B==="comments"&&y.jsx(y7,{comments:N.comments,onAddComment:q,cardExists:!!R?.id,onAfterComment:()=>H("comments")}),me==="full"&&B==="history"&&R?.id&&y.jsx(w7,{history:N.history})]}),me==="quick"?y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsxs(Dt,{type:"button",variant:"ghost",onClick:()=>he("full"),disabled:K,children:["Mais Opções ",y.jsx(X5,{className:"w-4 h-4 ml-2"})]}),y.jsxs("div",{children:[y.jsx(Dt,{type:"button",variant:"outline",onClick:fe,disabled:K,className:"mr-2",children:"Cancelar"}),y.jsxs(Dt,{type:"submit",form:"quick-create-form",className:"btn-custom-gradient text-white",disabled:K,children:[K?y.jsx(jh,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($E,{className:"w-4 h-4 mr-2"}),K?"Salvando...":R?"Salvar":"Criar"]})]})]}):y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-end space-x-3 bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsx(Dt,{type:"button",variant:"outline",onClick:fe,disabled:K,className:"mr-auto",children:"Cancelar"}),y.jsxs(Dt,{type:"submit",form:"workflow-form",className:"btn-custom-gradient text-white",disabled:K,children:[K?y.jsx(jh,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($E,{className:"w-4 h-4 mr-2"}),K?"Salvando...":R?"Salvar Alterações":"Salvar Agendamento"]})]})]},"workflow-modal-content")},"workflow-modal-backdrop"),y.jsx(xI,{})]}):null},S7=["Casamento","Gestante","Newborn","Família","Infantil","Debutante (15 anos)","Formatura","Empresarial/Corporativo","Produtos","Gastronomia","Moda","Esportivo","Eventos Sociais","Imobiliário","Pets","Sensual/Boudoir","Outro"],oM="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",A7=({isOpen:n,onClose:e,servicePackage:t,onSaveSuccess:r})=>{const{toast:i}=ds(),{addServicePackage:s,updateServicePackage:o,user:l}=yi(),[d,h]=A.useState(!1),f=A.useCallback(()=>({name:"",description:"",niche:"",price_cash_pix:"",price_card:"",cost:"",items_included:[{name:"",quantity:1}],payment_options:[],details:"",user_id:l?.id||null}),[l]),[m,v]=A.useState(f()),b=t?`service_package_form_draft_${t.id}`:"service_package_form_draft_new";A.useEffect(()=>{if(n){const F=localStorage.getItem(b);if(F){const B=JSON.parse(F);v({...B,user_id:B.user_id||l?.id})}else v(t?{name:t.name||"",description:t.description||"",niche:t.niche||"",price_cash_pix:t.price_cash_pix!==void 0?String(t.price_cash_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost:t.cost!==void 0?String(t.cost):"",items_included:t.items_included&&t.items_included.length>0?t.items_included:[{name:"",quantity:1}],payment_options:t.payment_options||[],details:t.details||"",user_id:t.user_id||l?.id}:f())}},[t,n,b,f,l]),A.useEffect(()=>{n&&localStorage.setItem(b,JSON.stringify(m))},[m,n,b]);const S=()=>{localStorage.removeItem(b),e()},x=(F,B)=>{v(H=>({...H,[F]:B}))},C=(F,B,H)=>{const K=[...m.items_included];K[F][B]=B==="quantity"?parseInt(H,10)||1:H,v(le=>({...le,items_included:K}))},P=()=>{v(F=>({...F,items_included:[...F.items_included,{name:"",quantity:1}]}))},I=F=>{const B=m.items_included.filter((H,K)=>K!==F);B.length===0?v(H=>({...H,items_included:[{name:"",quantity:1}]})):v(H=>({...H,items_included:B}))},R=F=>{v(B=>{const H=B.payment_options||[];return H.includes(F)?{...B,payment_options:H.filter(K=>K!==F)}:{...B,payment_options:[...H,F]}})},M=async F=>{if(F.preventDefault(),!l){i({title:"Erro de Autenticação",description:"Usuário não está autenticado.",variant:"destructive"});return}if(!m.name||!m.price_cash_pix||!m.niche){i({title:"Erro de Validação",description:"Nome do pacote, Nicho e Preço (à vista/Pix) são obrigatórios.",variant:"destructive"});return}h(!0);const B={...m,price_cash_pix:parseFloat(m.price_cash_pix)||0,price_card:m.price_card?parseFloat(m.price_card):null,cost:m.cost?parseFloat(m.cost):null,items_included:m.items_included.filter(H=>H.name.trim()!==""),user_id:l.id};try{t&&t.id?await o(t.id,B):await s(B),i({title:"Pacote Salvo",description:`O pacote "${m.name}" foi salvo com sucesso!`}),localStorage.removeItem(b),r&&r(),e()}catch(H){i({title:"Erro ao Salvar Pacote",description:H.message,variant:"destructive"})}finally{h(!1)}},N=["Entrada + Parcelamento","Parcelamento Integral Cartão","À vista com Desconto"];return y.jsx(Vs,{children:n&&y.jsx(sr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",id:"novo-pacote-backdrop-id",onClick:S,children:y.jsxs(sr.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",id:"novo-pacote-modal-id",onClick:F=>F.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Pacote de Serviço":"Novo Pacote de Serviço"}),y.jsx(Dt,{variant:"ghost",size:"icon",onClick:S,className:"w-8 h-8",disabled:d,children:y.jsx(Cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:M,className:"space-y-4",children:[y.jsxs(Mp,{title:"Informações Básicas",children:[y.jsx(Jc,{icon:aH,label:"Nome do Pacote *",htmlFor:"pkg-name",children:y.jsx("input",{id:"pkg-name",type:"text",value:m.name,onChange:F=>x("name",F.target.value),placeholder:"Ex: Ensaio Casal Completo",required:!0,disabled:d})}),y.jsx(Jc,{icon:dH,label:"Nicho do Serviço *",htmlFor:"pkg-niche",children:y.jsxs("select",{id:"pkg-niche",value:m.niche,onChange:F=>x("niche",F.target.value),required:!0,className:oM,disabled:d,children:[y.jsx("option",{value:"",children:"Selecione um nicho"}),S7.map(F=>y.jsx("option",{value:F,children:F},F))]})}),y.jsx(Jc,{icon:z_,label:"Descrição",htmlFor:"pkg-desc",children:y.jsx("textarea",{id:"pkg-desc",value:m.description,onChange:F=>x("description",F.target.value),placeholder:"Detalhes sobre o pacote...",rows:"3",disabled:d})})]}),y.jsxs(Mp,{title:"Precificação",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(Jc,{icon:hm,label:"Preço (À vista/Pix) *",htmlFor:"pkg-price-cash",children:y.jsx("input",{id:"pkg-price-cash",type:"number",value:m.price_cash_pix,onChange:F=>x("price_cash_pix",F.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:d})}),y.jsx(Jc,{icon:hm,label:"Preço (Cartão)",htmlFor:"pkg-price-card",children:y.jsx("input",{id:"pkg-price-card",type:"number",value:m.price_card,onChange:F=>x("price_card",F.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsx(Jc,{icon:tx,label:"Custo Estimado do Pacote",htmlFor:"pkg-cost",children:y.jsx("input",{id:"pkg-cost",type:"number",value:m.cost,onChange:F=>x("cost",F.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsxs(Mp,{title:"Itens Inclusos",children:[m.items_included.map((F,B)=>y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("input",{type:"text",value:F.name,onChange:H=>C(B,"name",H.target.value),placeholder:"Nome do item",className:"flex-grow px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx("input",{type:"number",value:F.quantity,onChange:H=>C(B,"quantity",H.target.value),placeholder:"Qtd",min:"1",className:"w-20 px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx(Dt,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(B),className:"text-red-500",disabled:d,children:y.jsx(rx,{className:"w-4 h-4"})})]},B)),y.jsxs(Dt,{type:"button",variant:"outline",onClick:P,className:"mt-2",disabled:d,children:[y.jsx(fm,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]})]}),y.jsx(Mp,{title:"Opções de Pagamento",children:y.jsx("div",{className:"space-y-2",children:N.map(F=>y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:(m.payment_options||[]).includes(F),onChange:()=>R(F),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:d}),y.jsx("span",{className:"text-muted-foreground",children:F})]},F))})}),y.jsx(Mp,{title:"Detalhes Adicionais",children:y.jsx(Jc,{icon:lH,label:"Observações/Termos",htmlFor:"pkg-details",children:y.jsx("textarea",{id:"pkg-details",value:m.details,onChange:F=>x("details",F.target.value),placeholder:"Informações extras, termos e condições...",rows:"4",disabled:d})})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(Dt,{type:"button",variant:"outline",onClick:S,className:"flex-1",disabled:d,children:"Cancelar"}),y.jsx(Dt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:d,children:d?y.jsx(jh,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alterações":"Criar Pacote"})]})]})]})})})},Mp=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),Jc=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),lt.Children.map(r,i=>i.type==="select"?lt.cloneElement(i,{className:`${i.props.className||""} ${oM}`}):lt.cloneElement(i,{className:`${i.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),E7=()=>{const[n,e]=A.useState(null),[t,r]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const{data:h,error:f}=await xe.from("anuncios").select("*").eq("esta_ativo",!0).order("created_at",{ascending:!1}).limit(1);if(f)throw f;if(h&&h.length>0){const m=h[0],v=localStorage.getItem(`anuncio_closed_${m.id}`),b=m.cooldown_reaparicao_minutos||60;if(v){const S=b*60*1e3;if(Date.now()-parseInt(v,10)<S)return}e(m),r(!0)}}catch(h){console.error("Erro ao buscar anúncio:",h)}})()},[]),A.useEffect(()=>{if(t&&n&&n.duracao_exibicao_segundos>0){const d=setTimeout(()=>{i()},n.duracao_exibicao_segundos*1e3);return()=>clearTimeout(d)}},[t,n]);const i=()=>{r(!1),n&&localStorage.setItem(`anuncio_closed_${n.id}`,Date.now().toString())},s=d=>{d&&(window.open(d,"_blank","noopener,noreferrer"),i())};if(!n)return null;const o={"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end",center:"items-center justify-center","bottom-left":"items-end justify-start","bottom-center":"items-end justify-center","bottom-right":"items-end justify-end"},l={small:"max-w-sm",medium:"max-w-md",large:"max-w-lg"};return y.jsx(Vs,{children:t&&y.jsx(sr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:ht("fixed inset-0 z-[9999] flex p-4 bg-black/30 backdrop-blur-sm",o[n.posicao_anuncio]||o.center),onClick:i,children:y.jsx(sr.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:d=>d.stopPropagation(),children:y.jsxs(Cx,{className:ht("shadow-2xl w-full",l[n.tamanho_anuncio]||l.medium),children:[y.jsxs("button",{onClick:i,className:"absolute top-2 right-2 p-1 rounded-full bg-background/50 hover:bg-background/80 transition-colors z-10",children:[y.jsx(Cu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Fechar"})]}),n.imagem_url&&y.jsx("div",{className:"cursor-pointer",onClick:()=>s(n.link_imagem),children:y.jsx("img",{src:n.imagem_url,alt:n.titulo_anuncio,className:"w-full h-auto object-cover rounded-t-lg"})}),y.jsxs(kx,{children:[y.jsx(Tx,{children:n.titulo_anuncio}),n.conteudo_anuncio&&y.jsx(Px,{children:n.conteudo_anuncio})]}),n.link_botao&&y.jsx(Rx,{children:y.jsx(Dt,{className:"w-full",onClick:()=>s(n.link_botao),children:"Saiba Mais"})})]})})})})},hi=({featureName:n,children:e})=>{const{isFeatureEnabled:t}=yi();return t(n)?e:y.jsxs(sr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center p-8 bg-card rounded-xl",children:[y.jsx(oH,{className:"w-16 h-16 text-destructive mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade não está habilitada para sua conta no momento."}),y.jsx("p",{className:"text-muted-foreground mt-1",children:"Por favor, contate o administrador do sistema para mais informações."})]})},C7=A.lazy(()=>Ge(()=>import("./Dashboard-DofzNoMJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),k7=A.lazy(()=>Ge(()=>import("./Clients-n0XVTzOo.js"),__vite__mapDeps([29,9,25,30,31,32,7,21,33]))),T7=A.lazy(()=>Ge(()=>import("./ClientDetail-p0vrtNeA.js"),__vite__mapDeps([34,35,36,37,38,39,30,40,18,41,20,25,42,22,43]))),P7=A.lazy(()=>Ge(()=>import("./Workflow-DVK9GL9C.js"),__vite__mapDeps([44,45,46,47,5,48,19,49,50,15,51,31,18,9,4,20,21,30,52,6,42,53]))),R7=A.lazy(()=>Ge(()=>import("./Financial-DWfC13Zr.js"),__vite__mapDeps([54,15,14,8,32,18,4,5,55,20,21,22,56,57,58,59,36,12,31]))),I7=A.lazy(()=>Ge(()=>import("./Calendar-BTtiVto7.js"),__vite__mapDeps([60,61,62,18,31,53,8,27,56,22,63,64,65,58,59,26,37,66,67,5,68,69]))),M7=A.lazy(()=>Ge(()=>import("./Reports--ouoAo18.js"),__vite__mapDeps([70,17,71,47,72,22,62,18,4,5,58,27,59,32,15,73,74]))),D7=A.lazy(()=>Ge(()=>import("./Settings-Cy8S9cle.js"),__vite__mapDeps([75,61,67,5,76,33,18,4,62,77,52,36,78,25,79,65,57,59,50,22,80,8]))),O7=A.lazy(()=>Ge(()=>import("./AccountSettings-g7WpnK9q.js"),__vite__mapDeps([81,37,18,52,82]))),N7=A.lazy(()=>Ge(()=>import("./ServicePackages-CumO61BX.js"),__vite__mapDeps([83,18,9,51,20,21]))),L7=A.lazy(()=>Ge(()=>import("./MySetup-BhmgxTVG.js"),__vite__mapDeps([84,35,85,42,77,15,18,36,14,21,13]))),j7=A.lazy(()=>Ge(()=>import("./Precifique-DLJajTnU.js"),__vite__mapDeps([86,18,11,36,55,21,74,15,16,87,40]))),F7=A.lazy(()=>Ge(()=>import("./ReservaInteligente-8m4hOhC5.js"),__vite__mapDeps([88,24,18,40,36,16,74,89]))),$7=A.lazy(()=>Ge(()=>import("./Boards-LazXavP_.js"),__vite__mapDeps([90,1,2,3,21,91,18,92,28]))),z7=A.lazy(()=>Ge(()=>import("./BoardDetail-DlbOibGf.js"),__vite__mapDeps([93,45,46,47,5,48,92,94,89,18,4,52,82]))),B7=A.lazy(()=>Ge(()=>import("./PlansPage-BVaptGyU.js"),__vite__mapDeps([95,25,96,13,87]))),U7=A.lazy(()=>Ge(()=>import("./FormsPage-dMkmUADS.js"),__vite__mapDeps([97,18,9,98,99,33,91,100,101,68,21]))),V7=A.lazy(()=>Ge(()=>import("./FormEditorPage-CvvikPK-.js"),__vite__mapDeps([102,45,46,47,5,48,100,101,68,43,41,28]))),W7=A.lazy(()=>Ge(()=>import("./CampaignSubmissionsPage-DxCxVHUx.js"),__vite__mapDeps([103,71,47,72,43,98]))),H7=A.lazy(()=>Ge(()=>import("./StudioPage-OpVSCWN6.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23]))),q7=A.lazy(()=>Ge(()=>import("./ContractListPage-DtLAWRyn.js"),__vite__mapDeps([106,107,25,36,89,21,78,91,31,105,23,22]))),bC=A.lazy(()=>Ge(()=>import("./ContractEditorPage-BsLU5aWg.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),xC=A.lazy(()=>Ge(()=>import("./ProposalEditorPage-CHLfglgV.js"),__vite__mapDeps([110,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19]))),G7=A.lazy(()=>Ge(()=>import("./BlogPage-D57KaYn0.js"),__vite__mapDeps([117,22]))),K7=A.lazy(()=>Ge(()=>import("./AvailabilityManagerPage-VeYBmhdj.js"),__vite__mapDeps([118,107,25,69,18,22,64,43,21,58,59]))),Y7=A.lazy(()=>Ge(()=>import("./ReferralsPage-Bnxz7KDk.js"),__vite__mapDeps([119,35,107,30,68,73,22]))),SC="gofotografo_last_active_tab",AC="gofotografo_sidebar_collapsed",X7=({children:n})=>{const e=qs(),{toast:t}=ds(),{settings:r,loadingAuth:i,setSettings:s,pendingReserveAllocations:o,allocateToSavingGoal:l,dismissPendingAllocation:d,savingGoals:h,refreshData:f,isFeatureEnabled:m}=yi(),{theme:v}=a1(),{isAnyModalOpen:b,openModals:S,closeModal:x}=Gh(),[C,P]=A.useState({}),I=()=>{const U=e.pathname;return U.startsWith("/clients/")?"clients":U.startsWith("/quadros")?"quadros":U.startsWith("/forms")||U.startsWith("/campaigns")?"clients":U.startsWith("/studio")||U.startsWith("/contracts")?"studio":U.startsWith("/blog")?"blog":U.startsWith("/availability-manager")?"calendar":U.startsWith("/referrals")?"referrals":U.substring(1)||"dashboard"},{activeTab:R,setActiveTab:M,initialFinancialFilter:N}=N9(localStorage.getItem(SC)||I()),{isMobile:F}=L9();j9(b);const[B,H]=A.useState(()=>{const U=localStorage.getItem(AC);return U!==null?JSON.parse(U):!0}),[K,le]=A.useState(!0);if(A.useEffect(()=>{localStorage.setItem(AC,JSON.stringify(B)),window.dispatchEvent(new Event("resize"))},[B]),A.useEffect(()=>{const U=I();U!==R&&M(U),e.pathname.startsWith("/quadros/")||P({})},[e.pathname]),A.useEffect(()=>{localStorage.setItem(SC,R)},[R]),i)return y.jsx(qt,{});const me=e.pathname.startsWith("/quadros/"),he=e.pathname==="/quadros",de=S.financial,fe=S.servicePackage,re=v==="dark"?"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png":"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20claro%20go.fotografo%20cor%20.png";return y.jsxs("div",{className:`flex flex-col bg-background text-foreground ${F?"":"min-h-screen"}`,children:[y.jsx(E7,{}),o.map((U,ne)=>y.jsx(O9,{allocation:U,savingGoals:h,onConfirm:async Q=>{try{await l(Q,U.reserveAmount),t({title:"Sucesso!",description:`R$ ${U.reserveAmount.toFixed(2)} alocados para a meta.`}),d(U.transactionId)}catch($){t({title:"Erro ao alocar",description:$.message,variant:"destructive"})}},onDismiss:()=>d(U.transactionId)},U.transactionId+ne)),y.jsxs("div",{className:`flex ${F?"flex-col":"h-screen"}`,children:[!F&&y.jsxs("div",{className:"relative",children:[y.jsx(ZH,{activeTab:R,setActiveTab:M,collapsed:B,setCollapsed:H}),y.jsx("button",{onClick:()=>H(!B),className:`
                absolute top-1/2 -translate-y-1/2 
                h-12 w-6 bg-card border border-border rounded-r-lg 
                flex items-center justify-center text-muted-foreground hover:bg-accent 
                transition-all duration-300 ease-in-out z-40
                ${B?"left-16":"left-64"}
              `,title:B?"Expandir menu":"Recolher menu",children:B?y.jsx(RT,{className:"w-4 h-4"}):y.jsx(eH,{className:"w-4 h-4"})})]}),F&&y.jsx(Vs,{children:K&&y.jsx(sr.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"mobile-header fixed top-0 left-0 right-0 bg-card/60 dark:bg-card/50 backdrop-blur-xl border-b border-border z-[450] flex items-center justify-center px-4 shadow-sm",children:y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("img",{alt:"Logo GO.FOTÓGRAFO",className:"h-10 w-auto object-contain",src:re})})})}),y.jsx("main",{id:"main-app-container",className:ht("main-content-container flex-1 transition-all duration-300 ease-in-out",F?`p-4 pb-24 ${K?"pt-20":"pt-4"}`:`p-6 sm:p-8 ${B?"ml-16":"ml-64"}`,"overflow-y-auto",me&&"fundo-quadro-ativo p-0 sm:p-0",he&&"pagina-quadros"),style:C,children:y.jsx("div",{className:ht("h-auto min-h-full",!me&&"dashboard-page-container"),children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(Vs,{mode:"wait",children:y.jsx(sr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:y.jsxs(s1,{children:[y.jsx(Ve,{path:"/dashboard",element:y.jsx(C7,{setActiveTab:M,isMobile:F})}),y.jsx(Ve,{path:"/clients",element:y.jsx(k7,{isMobile:F})}),y.jsx(Ve,{path:"/clients/:clientId",element:y.jsx(T7,{isMobile:F})}),y.jsx(Ve,{path:"/workflow",element:y.jsx(P7,{isMobile:F})}),y.jsx(Ve,{path:"/financial",element:y.jsx(R7,{isMobile:F,initialFilter:N})}),y.jsx(Ve,{path:"/calendar",element:y.jsx(hi,{featureName:"agenda_pro",children:y.jsx(I7,{isMobile:F,setActiveTab:M})})}),y.jsx(Ve,{path:"/reports",element:y.jsx(hi,{featureName:"relatorios",children:y.jsx(M7,{})})}),y.jsx(Ve,{path:"/service-packages",element:y.jsx(hi,{featureName:"pacotes_servico",children:y.jsx(N7,{isMobile:F})})}),y.jsx(Ve,{path:"/my-setup",element:y.jsx(hi,{featureName:"meu_setup",children:y.jsx(L7,{isMobile:F})})}),y.jsx(Ve,{path:"/precifique",element:y.jsx(hi,{featureName:"precifique",children:y.jsx(j7,{isMobile:F})})}),y.jsx(Ve,{path:"/reserva-inteligente",element:y.jsx(hi,{featureName:"reserva_inteligente",children:y.jsx(F7,{isMobile:F})})}),y.jsx(Ve,{path:"/quadros",element:y.jsx(hi,{featureName:"quadros",children:y.jsx($7,{setSidebarCollapsed:H})})}),y.jsx(Ve,{path:"/quadros/:boardId",element:y.jsx(hi,{featureName:"quadros",children:y.jsx(z7,{setPageStyle:P})})}),y.jsx(Ve,{path:"/forms",element:y.jsx(hi,{featureName:"formularios_captacao",children:y.jsx(U7,{})})}),y.jsx(Ve,{path:"/forms/edit/:formId",element:y.jsx(hi,{featureName:"formularios_captacao",children:y.jsx(V7,{})})}),y.jsx(Ve,{path:"/campaigns/:formId",element:y.jsx(hi,{featureName:"formularios_captacao",children:y.jsx(W7,{})})}),y.jsxs(Ve,{path:"/studio/*",element:y.jsx(hi,{featureName:"propostas_avancadas",children:y.jsx(yb,{})}),children:[y.jsx(Ve,{index:!0,element:y.jsx(H7,{})}),y.jsx(Ve,{path:"proposals/new",element:y.jsx(xC,{})}),y.jsx(Ve,{path:"proposals/edit/:proposalId",element:y.jsx(xC,{})}),y.jsx(Ve,{path:"contracts/new",element:y.jsx(bC,{mode:"new"})}),y.jsx(Ve,{path:"contracts/edit/:contractId",element:y.jsx(bC,{mode:"edit"})})]}),y.jsx(Ve,{path:"/contracts",element:y.jsx(hi,{featureName:"contratos",children:y.jsx(q7,{})})}),y.jsx(Ve,{path:"/availability-manager",element:y.jsx(hi,{featureName:"agenda_pro",children:y.jsx(K7,{isMobile:F})})}),y.jsx(Ve,{path:"/referrals",element:y.jsx(Y7,{})}),y.jsx(Ve,{path:"/settings",element:y.jsx(D7,{isMobile:F})}),y.jsx(Ve,{path:"/account-settings",element:y.jsx(O7,{isMobile:F})}),y.jsx(Ve,{path:"/plans",element:y.jsx(B7,{setActiveTab:M})}),y.jsx(Ve,{path:"/blog",element:y.jsx(G7,{})}),y.jsx(Ve,{path:"/",element:y.jsx(rm,{to:"/dashboard",replace:!0})}),y.jsx(Ve,{path:"*",element:y.jsx(rm,{to:"/dashboard",replace:!0})})]})},e.pathname+"-inner")})})})},e.pathname),F&&y.jsx(BR,{activeTab:R,setActiveTab:M})]}),y.jsx(xI,{}),y.jsx(q9,{}),y.jsx(x7,{}),y.jsx(Vs,{children:de?.isOpen&&y.jsx(d7,{isOpen:de.isOpen,onClose:()=>x("financial"),type:de.type,transactionData:de.transaction,onSaveSuccess:async()=>await f()})}),y.jsx(Vs,{children:fe?.isOpen&&y.jsx(A7,{isOpen:fe.isOpen,onClose:()=>x("servicePackage"),servicePackage:fe.servicePackage,onSaveSuccess:async()=>await f()})})]})};function Z7({children:n}){const[e,t]=A.useState(null),r=qs();return A.useEffect(()=>{let i=!0;return(async()=>{try{const{data:s,error:o}=await xe.auth.getUser();if(!i)return;if(o||!s?.user){t(!1);return}const l=!!s.user.app_metadata?.is_admin;t(l)}catch{t(!1)}})(),()=>{i=!1}},[]),e===null?y.jsx(qt,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(rm,{to:"/login",replace:!0,state:{from:r}})}const J7=()=>{const{toast:n}=ds(),e=()=>{let t;const r=s=>{s.preventDefault(),t=s,i()},i=()=>{t?(t.prompt(),t.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User accepted the install prompt"),n({title:"Aplicativo Instalado!",description:"O GO.FOTÓGRAFO foi adicionado à sua tela inicial."})):console.log("User dismissed the install prompt"),t=null})):n({title:"Já é um App ou não suportado",description:"O aplicativo já pode estar instalado ou seu navegador não suporta esta ação. Tente 'Adicionar à Tela de Início' no menu do seu navegador.",variant:"default",duration:7e3})};return window.addEventListener("beforeinstallprompt",r),window.deferredPrompt?(t=window.deferredPrompt,i()):n({title:"Instalação",description:"Para instalar, use a opção 'Adicionar à Tela de Início' do seu navegador.",variant:"default",duration:7e3}),()=>{window.removeEventListener("beforeinstallprompt",r)}};return lt.useEffect(()=>{window.handlePWAInstall=e;const t=r=>{r.preventDefault(),window.deferredPrompt=r};return window.addEventListener("beforeinstallprompt",t),()=>{delete window.handlePWAInstall,window.removeEventListener("beforeinstallprompt",t)}},[]),null};function Q7(){const{user:n}=Rb(),e=A.useRef(null);return A.useEffect(()=>{if(e.current&&(clearInterval(e.current),e.current=null),!n)return;const t=24e4,r=async()=>{try{const{error:i}=await xe.from("settings").select("user_id",{count:"exact",head:!0}).eq("user_id",n.id).limit(1);i&&console.warn("KeepAlive: ping falhou:",i.message)}catch(i){console.warn("KeepAlive: erro no ping:",i)}};return r(),e.current=setInterval(r,t),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[n?.id]),null}class aM extends lt.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI crash capturado:",e,t)}render(){return this.state.hasError?y.jsx("div",{className:"p-6 text-sm",children:"Algo deu errado ao renderizar este conteúdo."}):this.props.children}}function eK(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var Lx="ScrollArea",[lM,YZ]=Ro(Lx),[tK,fs]=lM(Lx),cM=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=n,[l,d]=A.useState(null),[h,f]=A.useState(null),[m,v]=A.useState(null),[b,S]=A.useState(null),[x,C]=A.useState(null),[P,I]=A.useState(0),[R,M]=A.useState(0),[N,F]=A.useState(!1),[B,H]=A.useState(!1),K=Et(e,me=>d(me)),le=Uy(i);return y.jsx(tK,{scope:t,type:r,dir:le,scrollHideDelay:s,scrollArea:l,viewport:h,onViewportChange:f,content:m,onContentChange:v,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:N,onScrollbarXEnabledChange:F,scrollbarY:x,onScrollbarYChange:C,scrollbarYEnabled:B,onScrollbarYEnabledChange:H,onCornerWidthChange:I,onCornerHeightChange:M,children:y.jsx(it.div,{dir:le,...o,ref:K,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":R+"px",...n.style}})})});cM.displayName=Lx;var uM="ScrollAreaViewport",dM=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:i,...s}=n,o=fs(uM,t),l=A.useRef(null),d=Et(e,l,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),y.jsx(it.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});dM.displayName=uM;var Mo="ScrollAreaScrollbar",jx=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=fs(Mo,n.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,l=n.orientation==="horizontal";return A.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),i.type==="hover"?y.jsx(nK,{...r,ref:e,forceMount:t}):i.type==="scroll"?y.jsx(rK,{...r,ref:e,forceMount:t}):i.type==="auto"?y.jsx(hM,{...r,ref:e,forceMount:t}):i.type==="always"?y.jsx(Fx,{...r,ref:e}):null});jx.displayName=Mo;var nK=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=fs(Mo,n.__scopeScrollArea),[s,o]=A.useState(!1);return A.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),o(!0)},f=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),y.jsx($i,{present:t||s,children:y.jsx(hM,{"data-state":s?"visible":"hidden",...r,ref:e})})}),rK=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=fs(Mo,n.__scopeScrollArea),s=n.orientation==="horizontal",o=a0(()=>d("SCROLL_END"),100),[l,d]=eK("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,i.scrollHideDelay,d]),A.useEffect(()=>{const h=i.viewport,f=s?"scrollLeft":"scrollTop";if(h){let m=h[f];const v=()=>{const b=h[f];m!==b&&(d("SCROLL"),o()),m=b};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[i.viewport,s,d,o]),y.jsx($i,{present:t||l!=="hidden",children:y.jsx(Fx,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:$e(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:$e(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),hM=A.forwardRef((n,e)=>{const t=fs(Mo,n.__scopeScrollArea),{forceMount:r,...i}=n,[s,o]=A.useState(!1),l=n.orientation==="horizontal",d=a0(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,f=t.viewport.offsetHeight<t.viewport.scrollHeight;o(l?h:f)}},10);return zh(t.viewport,d),zh(t.content,d),y.jsx($i,{present:r||s,children:y.jsx(Fx,{"data-state":s?"visible":"hidden",...i,ref:e})})}),Fx=A.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,i=fs(Mo,n.__scopeScrollArea),s=A.useRef(null),o=A.useRef(0),[l,d]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=vM(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>s.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function m(v,b){return cK(v,o.current,l,b)}return t==="horizontal"?y.jsx(iK,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollLeft,b=EC(v,l,i.dir);s.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=m(v,i.dir))}}):t==="vertical"?y.jsx(sK,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollTop,b=EC(v,l);s.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=m(v))}}):null}),iK=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=fs(Mo,n.__scopeScrollArea),[o,l]=A.useState(),d=A.useRef(null),h=Et(e,d,s.onScrollbarXChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(pM,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":o0(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(s.viewport){const v=s.viewport.scrollLeft+f.deltaX;n.onWheelScroll(v),wM(v,m)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Sy(o.paddingLeft),paddingEnd:Sy(o.paddingRight)}})}})}),sK=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=fs(Mo,n.__scopeScrollArea),[o,l]=A.useState(),d=A.useRef(null),h=Et(e,d,s.onScrollbarYChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(pM,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":o0(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(s.viewport){const v=s.viewport.scrollTop+f.deltaY;n.onWheelScroll(v),wM(v,m)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Sy(o.paddingTop),paddingEnd:Sy(o.paddingBottom)}})}})}),[oK,fM]=lM(Mo),pM=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:m,...v}=n,b=fs(Mo,t),[S,x]=A.useState(null),C=Et(e,K=>x(K)),P=A.useRef(null),I=A.useRef(""),R=b.viewport,M=r.content-r.viewport,N=ir(f),F=ir(d),B=a0(m,10);function H(K){if(P.current){const le=K.clientX-P.current.left,me=K.clientY-P.current.top;h({x:le,y:me})}}return A.useEffect(()=>{const K=le=>{const me=le.target;S?.contains(me)&&N(le,M)};return document.addEventListener("wheel",K,{passive:!1}),()=>document.removeEventListener("wheel",K,{passive:!1})},[R,S,M,N]),A.useEffect(F,[r,F]),zh(S,B),zh(b.content,B),y.jsx(oK,{scope:t,scrollbar:S,hasThumb:i,onThumbChange:ir(s),onThumbPointerUp:ir(o),onThumbPositionChange:F,onThumbPointerDown:ir(l),children:y.jsx(it.div,{...v,ref:C,style:{position:"absolute",...v.style},onPointerDown:$e(n.onPointerDown,K=>{K.button===0&&(K.target.setPointerCapture(K.pointerId),P.current=S.getBoundingClientRect(),I.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),H(K))}),onPointerMove:$e(n.onPointerMove,H),onPointerUp:$e(n.onPointerUp,K=>{const le=K.target;le.hasPointerCapture(K.pointerId)&&le.releasePointerCapture(K.pointerId),document.body.style.webkitUserSelect=I.current,b.viewport&&(b.viewport.style.scrollBehavior=""),P.current=null})})})}),xy="ScrollAreaThumb",mM=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=fM(xy,n.__scopeScrollArea);return y.jsx($i,{present:t||i.hasThumb,children:y.jsx(aK,{ref:e,...r})})}),aK=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...i}=n,s=fs(xy,t),o=fM(xy,t),{onThumbPositionChange:l}=o,d=Et(e,m=>o.onThumbChange(m)),h=A.useRef(void 0),f=a0(()=>{h.current&&(h.current(),h.current=void 0)},100);return A.useEffect(()=>{const m=s.viewport;if(m){const v=()=>{if(f(),!h.current){const b=uK(m,l);h.current=b,l()}};return l(),m.addEventListener("scroll",v),()=>m.removeEventListener("scroll",v)}},[s.viewport,f,l]),y.jsx(it.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:$e(n.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),S=m.clientX-b.left,x=m.clientY-b.top;o.onThumbPointerDown({x:S,y:x})}),onPointerUp:$e(n.onPointerUp,o.onThumbPointerUp)})});mM.displayName=xy;var $x="ScrollAreaCorner",gM=A.forwardRef((n,e)=>{const t=fs($x,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?y.jsx(lK,{...n,ref:e}):null});gM.displayName=$x;var lK=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,i=fs($x,t),[s,o]=A.useState(0),[l,d]=A.useState(0),h=!!(s&&l);return zh(i.scrollbarX,()=>{const f=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(f),d(f)}),zh(i.scrollbarY,()=>{const f=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(f),o(f)}),h?y.jsx(it.div,{...r,ref:e,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Sy(n){return n?parseInt(n,10):0}function vM(n,e){const t=n/e;return isNaN(t)?0:t}function o0(n){const e=vM(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function cK(n,e,t,r="ltr"){const i=o0(t),s=i/2,o=e||s,l=i-o,d=t.scrollbar.paddingStart+o,h=t.scrollbar.size-t.scrollbar.paddingEnd-l,f=t.content-t.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return yM([d,h],m)(n)}function EC(n,e,t="ltr"){const r=o0(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,l=s-r,d=t==="ltr"?[0,o]:[o*-1,0],h=Z_(n,d);return yM([0,o],[0,l])(h)}function yM(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function wM(n,e){return n>0&&n<e}var uK=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function i(){const s={left:n.scrollLeft,top:n.scrollTop},o=t.left!==s.left,l=t.top!==s.top;(o||l)&&e(),t=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function a0(n,e){const t=ir(n),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function zh(n,e){const t=ir(e);Nn(()=>{let r=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(r),i.unobserve(n)}}},[n,t])}var _M=cM,dK=dM,hK=mM,fK=gM;const bM=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(_M,{ref:r,className:ht("relative overflow-hidden",n),...t,children:[y.jsx(dK,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(xM,{}),y.jsx(fK,{})]}));bM.displayName=_M.displayName;const xM=A.forwardRef(({className:n,orientation:e="vertical",...t},r)=>y.jsx(jx,{ref:r,orientation:e,className:ht("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:y.jsx(hK,{className:"relative flex-1 rounded-full bg-border"})}));xM.displayName=jx.displayName;const pK=({reminder:n,onDismiss:e,onFollowUp:t})=>{const r=()=>{if(n.icon)return n.icon;switch(n.reminderType||n.type){case"payment_overdue":case"expense_overdue":return Y5;case"payment_due":case"expense_due":return IT;case"birthday":return ex;case"task_due":return uH;default:return TT}},i=()=>{const l=n.reminderType||n.type;return l?.includes("overdue")?"bg-red-500":l?.includes("due")?"bg-yellow-500":l==="birthday"?"bg-pink-500":"bg-primary"},s=r(),o=i();return y.jsxs("div",{className:"flex items-start space-x-3 p-4 border-b border-border/20 last:border-0 hover:bg-muted/30 transition-all duration-200",children:[y.jsx("div",{className:`p-2.5 rounded-full text-white shadow-md ${o}`,children:y.jsx(s,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold mb-1 text-foreground leading-tight",children:n.title}),y.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),n.date&&y.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[n.clientPhone&&y.jsx("button",{onClick:()=>t(n),className:"p-2 hover:bg-green-50 hover:text-green-600 rounded-full transition-all duration-200",title:"Entrar em contato via WhatsApp",children:y.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/16566/16566143.png",alt:"WhatsApp",className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>e(n.id),className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-full transition-all duration-200",title:"Dispensar notificação",children:y.jsx(Cu,{className:"w-3 h-3"})})]})]})},mK=({reminders:n,onDismiss:e,onDismissAll:t,onFollowUp:r})=>{if(!n||n.length===0)return null;const i=n.length>=3,s=i?"fixed inset-0 z-50 flex items-center justify-center":"fixed bottom-6 right-6 z-50";return y.jsxs("div",{className:s,children:[i&&y.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),y.jsxs("div",{className:`relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl ${i?"w-full max-w-md m-6 max-h-[70vh]":"w-96 max-h-[80vh] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.3),_0_10px_10px_-5px_rgba(0,0,0,0.2)]"}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/30",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(TT,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"font-semibold text-lg",children:n.length===1?"Notificação":`${n.length} Notificações`})]}),y.jsx("button",{onClick:t,className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-muted",children:"Limpar todas"})]}),y.jsx(bM,{className:i?"max-h-[55vh]":"max-h-80",children:n.map(o=>y.jsx(pK,{reminder:o,onDismiss:e,onFollowUp:r},o.id))})]})]})},gK=()=>{const[n,e]=lt.useState([]),t=lt.useRef({}),r=lt.useCallback(o=>{const l=Date.now(),d=t.current[o.id]||0;l-d>300*1e3&&(e(h=>[...h,o]),t.current[o.id]=l)},[]),i=o=>{e(l=>l.filter(d=>d.id!==o))},s=()=>{e([])};return lt.useEffect(()=>{const o=l=>{l.detail&&r(l.detail)};return window.addEventListener("addNotification",o),()=>{window.removeEventListener("addNotification",o)}},[r]),n.length===0?null:y.jsx(mK,{reminders:n,onDismiss:i,onDismissAll:s,onFollowUp:o=>window.dispatchEvent(new CustomEvent("openFollowUp",{detail:o}))})},vK=A.lazy(()=>Ge(()=>import("./LandingPage-l1kgzA98.js"),__vite__mapDeps([120,16,13,38]))),yK=A.lazy(()=>Ge(()=>import("./PrivacyPolicyPage-CMi_hhwz.js"),__vite__mapDeps([121,13,43]))),wK=A.lazy(()=>Ge(()=>import("./LoginPage-CkXFc41Y.js"),__vite__mapDeps([122,123,74,124]))),_K=A.lazy(()=>Ge(()=>import("./SignupPage-1N_DVcoK.js"),__vite__mapDeps([125,123,6,7]))),bK=A.lazy(()=>Ge(()=>import("./ForgotPasswordPage-ABOMymPw.js"),__vite__mapDeps([126,123,43]))),xK=A.lazy(()=>Ge(()=>import("./UpdatePasswordPage-3rQqAgGt.js"),__vite__mapDeps([127,123]))),SK=A.lazy(()=>Ge(()=>import("./AdminLoginPage-DSDAABUD.js"),__vite__mapDeps([128,74,124]))),AK=A.lazy(()=>Ge(()=>import("./AdminLayout-my4gXxTA.js"),__vite__mapDeps([129,10,79,65,57,59,22,45,46,47,5,48,2,98,107,25,89,21,116,67,35,80,18,36,68,76,6,7,32,50,33,28,99,52,8]))),EK=A.lazy(()=>Ge(()=>import("./PublicFormPage-CDgcEvPS.js"),[])),CK=A.lazy(()=>Ge(()=>import("./PublicBookingPage-BQZeH4io.js"),__vite__mapDeps([130,68,113,76,27,22,58,59,64]))),kK=A.lazy(()=>Ge(()=>import("./AssinafyWebhookPage-UGSEUmLR.js"),[])),TK=A.lazy(()=>Ge(()=>import("./MaintenancePage-BSyjef3f.js"),[])),PK=A.lazy(()=>Ge(()=>import("./BlogPage-D57KaYn0.js"),__vite__mapDeps([117,22]))),RK=A.lazy(()=>Ge(()=>import("./BlogPostPage-D0rn2XGO.js"),__vite__mapDeps([131,43,101,22]))),CC=A.lazy(()=>Ge(()=>import("./ProposalEditorPage-P933SrGY.js"),__vite__mapDeps([132,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19,66]))),n_=A.lazy(()=>Ge(()=>import("./CustomPageViewer-D73RmI4h.js"),__vite__mapDeps([133,22,37,43]))),IK=A.lazy(()=>Ge(()=>import("./TutorialsPage-XRCuwYkp.js"),__vite__mapDeps([134,31]))),MK=A.lazy(()=>Ge(()=>import("./ProposalPublicView-C4_jvdwM.js"),__vite__mapDeps([135,112,3,2,33,30,39,113,5,48,92,94,114])));A.lazy(()=>Ge(()=>import("./StudioPage-OpVSCWN6.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23])));const kC=A.lazy(()=>Ge(()=>import("./ContractEditorPage-BsLU5aWg.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),Fv=({children:n})=>y.jsx(y.Fragment,{children:n}),DK=()=>{const n=qs(),e=n.pathname.startsWith("/studio/proposals/edit/")||n.pathname==="/studio/proposals/new";return y.jsx(q5,{children:y.jsx(X7,{hideSidebar:e,children:y.jsx(yb,{})})})},OK=()=>y.jsxs(s1,{children:[y.jsx(Ve,{path:"/lp",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(vK,{})})}),y.jsx(Ve,{path:"/politica-de-privacidade-e-dados",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(yK,{})})}),y.jsx(Ve,{path:"/login",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(wK,{})})}),y.jsx(Ve,{path:"/signup",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(_K,{})})}),y.jsx(Ve,{path:"/forgot-password",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(bK,{})})}),y.jsx(Ve,{path:"/update-password",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(xK,{})})}),y.jsx(Ve,{path:"/f/:formId",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(EK,{})})}),y.jsx(Ve,{path:"/agendar/:bookingLinkId",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(CK,{})})}),y.jsx(Ve,{path:"/p/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(MK,{})})}),y.jsx(Ve,{path:"/webhooks/assinafy",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(kK,{})})}),y.jsx(Ve,{path:"/manutencao",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(TK,{})})}),y.jsx(Ve,{path:"/blog",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(PK,{})})}),y.jsx(Ve,{path:"/blog/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(RK,{})})}),y.jsx(Ve,{path:"/control-acess/login",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(SK,{})})}),y.jsx(Ve,{path:"/control-acess/*",element:y.jsx(Z7,{children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(AK,{})})})}),y.jsx(Ve,{path:"/sobre",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(n_,{slug:"sobre"})})}),y.jsx(Ve,{path:"/fale-conosco",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(n_,{slug:"fale-conosco"})})}),y.jsx(Ve,{path:"/tutoriais",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(IK,{})})}),y.jsx(Ve,{path:"/tutoriais/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(n_,{isTutorial:!0})})}),y.jsx(Ve,{path:"/studio/proposals/new",element:y.jsx(Fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(CC,{})})})}),y.jsx(Ve,{path:"/studio/proposals/edit/:proposalId",element:y.jsx(Fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(CC,{})})})}),y.jsx(Ve,{path:"/studio/contracts/new",element:y.jsx(Fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(kC,{mode:"new"})})})}),y.jsx(Ve,{path:"/studio/contracts/edit/:contractId",element:y.jsx(Fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(kC,{mode:"edit"})})})}),y.jsx(Ve,{path:"/*",element:y.jsx(DK,{}),children:y.jsx(Ve,{path:"*",element:y.jsx(A.Suspense,{fallback:y.jsx(qt,{}),children:y.jsx(yb,{})})})})]});function NK(){return y.jsxs(NL,{children:[y.jsx(zL,{children:y.jsx(W1,{children:y.jsx(A3,{children:y.jsx(E3,{children:y.jsx(P3,{children:y.jsxs(aM,{children:[y.jsx(Q7,{}),y.jsx(J7,{}),y.jsx(OK,{})]})})})})})}),y.jsx(gK,{})]})}var Jp={};Jp.d=(n,e)=>{for(var t in e)Jp.o(e,t)&&!Jp.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Jp.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var ct=globalThis.pdfjsLib={};Jp.d(ct,{AbortException:()=>Iu,AnnotationEditorLayer:()=>xa,AnnotationEditorParamsType:()=>ot,AnnotationEditorType:()=>mt,AnnotationEditorUIManager:()=>jl,AnnotationLayer:()=>DX,AnnotationMode:()=>Cl,ColorPicker:()=>ls,DOMSVGFactory:()=>eS,DrawLayer:()=>Cr,FeatureTest:()=>Hr,GlobalWorkerOptions:()=>em,ImageKind:()=>Jv,InvalidPDFException:()=>AM,MissingPDFException:()=>Ru,OPS:()=>Bs,OutputScale:()=>ob,PDFDataRangeTransport:()=>UM,PDFDateString:()=>CM,PDFWorker:()=>Ih,PasswordResponses:()=>$K,PermissionFlag:()=>FK,PixelsPerInch:()=>Bh,RenderingCancelledException:()=>Ux,TextLayer:()=>$r,UnexpectedResponseException:()=>d0,Util:()=>We,VerbosityLevel:()=>l0,XfaLayer:()=>WM,build:()=>fX,createValidAbsoluteUrl:()=>VK,fetchData:()=>f0,getDocument:()=>iX,getFilenameFromUrl:()=>JK,getPdfFilenameFromUrl:()=>QK,getXfaPageViewport:()=>eY,isDataScheme:()=>p0,isPdfFile:()=>Vx,noContextMenu:()=>us,normalizeUnicode:()=>YK,setLayerDimensions:()=>wu,shadow:()=>At,version:()=>hX});const Pr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),SM=[1,0,0,1,0,0],rb=[.001,0,0,.001,0,0],LK=1e7,r_=1.35,Ni={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},jK="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},FK={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Er={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Vn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Dp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l0={ERRORS:0,WARNINGS:1,INFOS:5},Bs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},$K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let c0=l0.WARNINGS;function zK(n){Number.isInteger(n)&&(c0=n)}function BK(){return c0}function u0(n){c0>=l0.INFOS&&console.log(`Info: ${n}`)}function vt(n){c0>=l0.WARNINGS&&console.log(`Warning: ${n}`)}function rn(n){throw new Error(n)}function Hn(n,e){n||rn(e)}function UK(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VK(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=KK(n)}catch{}const r=e?new URL(n,e):new URL(n);if(UK(r))return r}catch{}return null}function At(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Vl=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class ib extends Vl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class sb extends Vl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class AM extends Vl{constructor(e){super(e,"InvalidPDFException")}}class Ru extends Vl{constructor(e){super(e,"MissingPDFException")}}class d0 extends Vl{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class WK extends Vl{constructor(e){super(e,"FormatError")}}class Iu extends Vl{constructor(e){super(e,"AbortException")}}function EM(n){(typeof n!="object"||n?.length===void 0)&&rn("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function h0(n){typeof n!="string"&&rn("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function HK(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function zx(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function qK(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function GK(){try{return new Function(""),!0}catch{return!1}}class Hr{static get isLittleEndian(){return At(this,"isLittleEndian",qK())}static get isEvalSupported(){return At(this,"isEvalSupported",GK())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?At(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):At(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return At(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const i_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class We{static makeHexColor(e,t,r){return`#${i_[e]}${i_[t]}${i_[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],l=(r+o)/2,d=Math.sqrt((r+o)**2-4*(r*o-s*i))/2,h=l+d||1,f=l-d||1;return[Math.sqrt(h),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static#e(e,t,r,i,s,o,l,d,h,f){if(h<=0||h>=1)return;const m=1-h,v=h*h,b=v*h,S=m*(m*(m*e+3*h*t)+3*v*r)+b*i,x=m*(m*(m*s+3*h*o)+3*v*l)+b*d;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],x)}static#t(e,t,r,i,s,o,l,d,h,f,m,v){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,i,s,o,l,d,-m/f,v);return}const b=f**2-4*m*h;if(b<0)return;const S=Math.sqrt(b),x=2*h;this.#e(e,t,r,i,s,o,l,d,(-f+S)/x,v),this.#e(e,t,r,i,s,o,l,d,(-f-S)/x,v)}static bezierBoundingBox(e,t,r,i,s,o,l,d,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,d)):h=[Math.min(e,l),Math.min(t,d),Math.max(e,l),Math.max(t,d)],this.#t(e,r,s,l,t,i,o,d,3*(-e+3*(r-s)+l),6*(e-2*r+s),3*(r-e),h),this.#t(e,r,s,l,t,i,o,d,3*(-t+3*(i-o)+d),6*(t-2*i+o),3*(i-t),h),h}}function KK(n){return decodeURIComponent(escape(n))}let s_=null,TC=null;function YK(n){return s_||(s_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,TC=new Map([["ﬅ","ſt"]])),n.replaceAll(s_,(e,t,r)=>t?t.normalize("NFKC"):TC.get(r))}function XK(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return EM(n)}const Bx="pdfjs_internal_id_",ga={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function ZK(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(EM(n))}const wa="http://www.w3.org/2000/svg";class Bh{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function f0(n,e="text"){if(Bp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Lm{constructor({viewBox:e,scale:t,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=i,this.offsetY=s;const l=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,m,v;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,m=0,v=1;break;case 90:h=0,f=1,m=1,v=0;break;case 270:h=0,f=-1,m=-1,v=0;break;case 0:h=1,f=0,m=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(m=-m,v=-v);let b,S,x,C;h===0?(b=Math.abs(d-e[1])*t+i,S=Math.abs(l-e[0])*t+s,x=(e[3]-e[1])*t,C=(e[2]-e[0])*t):(b=Math.abs(l-e[0])*t+i,S=Math.abs(d-e[1])*t+s,x=(e[2]-e[0])*t,C=(e[3]-e[1])*t),this.transform=[h*t,f*t,m*t,v*t,b-h*t*l-m*t*d,S-f*t*l-v*t*d],this.width=x,this.height=C}get rawDims(){const{viewBox:e}=this;return At(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Lm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return We.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=We.applyTransform([e[0],e[1]],this.transform),r=We.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return We.applyInverseTransform([e,t],this.transform)}}class Ux extends Vl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function p0(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Vx(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function JK(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function QK(n,e="document.pdf"){if(typeof n!="string")return e;if(p0(n))return vt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class PC{started=Object.create(null);times=[];time(e){e in this.started&&vt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||vt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Bp(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function us(n){n.preventDefault()}function RC(n){console.log("Deprecated API usage: "+n)}class CM{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(o+=f,l+=m):h==="+"&&(o-=f,l-=m),new Date(Date.UTC(r,i,s,o,l,d))}}function eY(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new Lm({viewBox:s,scale:e,rotation:t})}function Wx(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(vt(`Not a valid color format: "${n}"`),[0,0,0])}function tY(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Wx(r))}e.remove()}function dn(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function va(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function wu(n,e,t=!1,r=!0){if(e instanceof Lm){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,l=Hr.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,h=`var(--scale-factor) * ${s}px`,f=l?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,m=l?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=m):(o.width=m,o.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class ob{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Qp{#e=null;#t=null;#n;#i=null;#s=null;static#r=null;constructor(e){this.#n=e,Qp.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",us,{signal:t}),e.addEventListener("pointerdown",Qp.#l,{signal:t});const r=this.#i=document.createElement("div");r.className="buttons",e.append(r);const i=this.#n.toolbarPosition;if(i){const{style:s}=e,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",us,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",Qp.#r[e]),this.#a(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#i.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#a(t),this.#i.prepend(t,this.#o),this.#s=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class nY{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",us,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#s(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const l=s.x+(t?s.width:0);if(o>r){i=l,r=o;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,r]}show(e,t,r){const[i,s]=this.#s(t,r),{style:o}=this.#t||=this.#i();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",us,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Ay(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function rY(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}class iY{#e=0;get id(){return`${jK}${this.#e++}`}}class Hx{#e=XK();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return At(this,"_isSVGFittingCanvas",s)}async#i(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await f0(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=Hx._isSVGFittingCanvas,o=new FileReader,l=new Image,d=new Promise((h,f)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,h()},o.onload=async()=>{const m=r.svgUrl=o.result;l.src=await s?`${m}#svgView(preserveAspectRatio(none))`:m},l.onerror=o.onerror=f});o.readAsDataURL(i),await d}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){console.error(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return this.#i(`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,t){const r=await t;return this.#i(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class sY{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const d={cmd:e,undo:t,post:r,type:s};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(d);return}if(o&&this.#e[this.#i].type===s){l&&(d.undo=this.#e[this.#i].undo),this.#e[this.#i]=d;return}const h=this.#i+1;h===this.#n?this.#e.splice(0,1):(this.#i=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class jm{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Hr.platform;for(const[r,i,s={}]of e)for(const o of r){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:l=null}}=r;l&&!l(e,t)||(i.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class qx{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return tY(e),At(this,"_colors",e)}convert(e){const t=Wx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return qx._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?We.makeHexColor(...t):e}}class jl{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#s=null;#r=null;#l=null;#c=new sY;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#v=!1;#g=!1;#m=null;#y=null;#_=null;#C=null;#S=!1;#A=null;#N=new iY;#k=!1;#b=!1;#E=null;#T=null;#P=null;#M=null;#x=mt.NONE;#w=new Set;#D=null;#O=null;#L=null;#U={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#$=[0,0];#j=null;#F=null;#B=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=jl.prototype,t=o=>o.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return At(this,"_keyboardManager",new jm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#F.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,r,i,s,o,l,d,h,f,m){const v=this._signal=this.#e.signal;this.#F=e,this.#B=t,this.#s=r,this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),this.#ee(),this.#ie(),this.#G(),this.#r=s.annotationStorage,this.#m=s.filterFactory,this.#O=o,this.#C=l||null,this.#f=d,this.#v=h,this.#g=f,this.#M=m||null,this.viewParameters={realScale:Bh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#R?.resolve(),this.#R=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#s?.destroy(),this.#A?.hide(),this.#A=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#M}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#g}get hcmFilter(){return At(this,"hcmFilter",this.#O?this.#m.addHCMFilter(this.#O.foreground,this.#O.background):"none")}get direction(){return At(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return At(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return At(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#P=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#g=t;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#i.values()){const{x:i,y:s,width:o,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+l)return r}return null}disableUserSelect(e=!1){this.#B.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Bh.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#W({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#i.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=t,l=t.toString(),h=this.#W(t).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;t.empty();const m=this.#q(h),v=this.#x===mt.NONE,b=()=>{m?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(mt.HIGHLIGHT,b);return}b()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#W(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#A||=new nY(this),this.#A.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Q(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#A?.hide(),this.#D=null,this.#I({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#D)return;const i=this.#W(e).closest(".textLayer");if(!i){this.#D&&(this.#A?.hide(),this.#D=null,this.#I({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#D=t,this.#I({hasSelectedText:!0}),!(this.#x!==mt.HIGHLIGHT&&this.#x!==mt.NONE)&&(this.#x===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#x===mt.HIGHLIGHT?this.#q(i):null;s?.toggleDrawing();const o=new AbortController,l=this.combinedSignal(o),d=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),s?.toggleDrawing(!0),h.type==="pointerup"&&this.#H("main_toolbar"))};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}#H(e=""){this.#x===mt.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#J()}#ee(){document.addEventListener("selectionchange",this.#Q.bind(this),{signal:this._signal})}#te(){if(this.#_)return;this.#_=new AbortController;const e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#H("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#T=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#T)return;const[e,t]=this.#T;this.#T=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#G(){if(this.#E)return;this.#E=new AbortController;const e=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#E?.abort(),this.#E=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#ie(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#G(),this.#K()}removeEditListeners(){this.#re(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#w){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of this.#h)if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){vt(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const d of r){const h=await i.deserialize(d);if(!h)return;s.push(h)}const o=()=>{for(const d of s)this.#X(d);this.#Z(s)},l=()=>{for(const d of s)d.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(s){vt(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==mt.NONE&&!this.isEditorHandlingKeyboard&&jl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#H("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#I(e){Object.entries(e).some(([r,i])=>this.#U[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,e)}),this.#x===mt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[ot.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#K(),this.#I({isEditing:this.#x!==mt.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#Y(),this.#I({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#i.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#x!==e&&!(this.#R&&(await this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#x=e,e===mt.NONE){this.setEditingState(!1),this.#oe(),this.#R.resolve();return}this.setEditingState(!0),await this.#se(),this.unselectAll();for(const i of this.#i.values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(const i of this.#n.values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();this.#R.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case ot.CREATE:this.currentLayer.addNewEditor();return;case ot.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(t);break;case ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#w)r.updateParams(e,t);for(const r of this.#h)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const s of this.#n.values())s.editorType===e&&s.show(t);(this.#L?.get(ot.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[ot.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#b!==e){this.#b=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#se(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#i.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ae===e&&this.#z(e.propertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#I({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#I({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#I({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#I({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()})}redo(){this.#c.redo(),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#c.add(e),this.#I({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}#V(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#w],t=()=>{for(const i of e)i.remove()},r=()=>{for(const i of e)this.#X(i)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Z(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#I({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#Z(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#x!==mt.NONE))&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#I({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#$[0]+=e,this.#$[1]+=t;const[i,s]=this.#$,o=[...this.#w],l=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#$[0]=this.#$[1]=0,this.addCommands({cmd:()=>{for(const d of o)this.#n.has(d.id)&&d.translateInPage(i,s)},undo:()=>{for(const d of o)this.#n.has(d.id)&&d.translateInPage(-i,-s)},mustExec:!1})},l);for(const d of o)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const e of this.#w)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const e=this.#o;this.#o=null;let t=!1;for(const[{x:i,y:s,pageIndex:o},l]of e)l.newX=i,l.newY=s,l.newPageIndex=o,t||=i!==l.savedX||s!==l.savedY||o!==l.savedPageIndex;if(!t)return!1;const r=(i,s,o,l)=>{if(this.#n.has(i.id)){const d=this.#i.get(l);d?i._setParentAndPosition(d,s,o):(i.pageIndex=l,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:l}]of e)r(i,s,o,l)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:l}]of e)r(i,s,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#o)for(const r of this.#o.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#x}get imageManager(){return At(this,"imageManager",new Hx)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,f,m,v)=>({x:(f-i)/o,y:1-(h+m-r)/s,width:v/o,height:m/s});break;case"180":l=(h,f,m,v)=>({x:1-(h+m-r)/s,y:1-(f+v-i)/o,width:m/s,height:v/o});break;case"270":l=(h,f,m,v)=>({x:1-(f+v-i)/o,y:(h-r)/s,width:v/o,height:m/s});break;default:l=(h,f,m,v)=>({x:(h-r)/s,y:(f-i)/o,width:m/s,height:v/o});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:v,y:b,width:S,height:x}of m.getClientRects())S===0||x===0||d.push(l(v,b,S,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#r.getRawValue(t);r&&(this.#x===mt.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class xo{#e=null;#t=!1;#n=null;#i=null;#s=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,xo.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){xo._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#i=document.createElement("span");e.append(t),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",xo.#h.missing),t.setAttribute("data-l10n-id",xo.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",us,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#l=!0,i(s))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}async setGuessedText(e){this.#e===null&&(this.#a=e,this.#d=await xo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#a===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(this.#a=r,this.#d=i),!(this.#e===e&&this.#t===t)&&(s||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#c?.remove(),this.#c=null}async#f(){const e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",xo.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",xo.#h[`${this.#p}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const i=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:s})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class st{#e=null;#t=null;#n=null;#i=!1;#s=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#v=0;#g=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#_=st._zIndex++;static _borderLineWidth=-1;static _colorManager=new qx;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=st.prototype._resizeWithKeyboard,t=jl.TRANSLATE_SMALL,r=jl.TRANSLATE_BIG;return At(this,"_resizerKeyboardManager",new jm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],st.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return At(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new oY({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(st._l10n??=e,st._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),st._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);st._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}#C([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this.fixAndSetPosition()}translate(e,t){this.#C(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#C(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,i]=this.parentDimensions;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[l,d]=this.getBaseTranslation();s+=l,o+=d,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=st,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:i,y:s,width:o,height:l}=this;if(o*=t,l*=r,i*=t,s*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-o,i)),s=Math.max(0,Math.min(r-l,s));break;case 90:i=Math.max(0,Math.min(t-l,i)),s=Math.min(r,Math.max(o,s));break;case 180:i=Math.min(t,Math.max(o,i)),s=Math.min(r,Math.max(l,s));break;case 270:i=Math.min(t,Math.max(l,i)),s=Math.max(0,Math.min(r-o,s));break}this.x=i/=t,this.y=s/=r;const[d,h]=this.getBaseTranslation();i+=d,s+=h;const{style:f}=this.div;f.left=`${(100*i).toFixed(2)}%`,f.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return st.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return st.#S(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!this.#s&&t.endsWith("%");if(i&&s)return;const[o,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!this.#s&&!s&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#N(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#r.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),i.addEventListener("contextmenu",us,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#r)}#k(e,t){t.preventDefault();const{isMac:r}=Hr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#E.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",us,{signal:o});const l=this.x,d=this.y,h=this.width,f=this.height,m=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const b=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=m,this.div.style.cursor=v,this.#b(l,d,h,f)};window.addEventListener("pointerup",b,{signal:o}),window.addEventListener("blur",b,{signal:o})}#b(e,t,r,i){const s=this.x,o=this.y,l=this.width,d=this.height;s===e&&o===t&&l===r&&d===i||this.addCommands({cmd:()=>{this.width=l,this.height=d,this.x=s,this.y=o;const[h,f]=this.parentDimensions;this.setDims(h*l,f*d),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=i,this.x=e,this.y=t;const[h,f]=this.parentDimensions;this.setDims(h*r,f*i),this.fixAndSetPosition()},mustExec:!0})}#E(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,l=this.width,d=this.height,h=st.MIN_SIZE/r,f=st.MIN_SIZE/i,m=re=>Math.round(re*1e4)/1e4,v=this.#A(this.rotation),b=(re,U)=>[v[0]*re+v[2]*U,v[1]*re+v[3]*U],S=this.#A(360-this.rotation),x=(re,U)=>[S[0]*re+S[2]*U,S[1]*re+S[3]*U];let C,P,I=!1,R=!1;switch(e){case"topLeft":I=!0,C=(re,U)=>[0,0],P=(re,U)=>[re,U];break;case"topMiddle":C=(re,U)=>[re/2,0],P=(re,U)=>[re/2,U];break;case"topRight":I=!0,C=(re,U)=>[re,0],P=(re,U)=>[0,U];break;case"middleRight":R=!0,C=(re,U)=>[re,U/2],P=(re,U)=>[0,U/2];break;case"bottomRight":I=!0,C=(re,U)=>[re,U],P=(re,U)=>[0,0];break;case"bottomMiddle":C=(re,U)=>[re/2,U],P=(re,U)=>[re/2,0];break;case"bottomLeft":I=!0,C=(re,U)=>[0,U],P=(re,U)=>[re,0];break;case"middleLeft":R=!0,C=(re,U)=>[0,U/2],P=(re,U)=>[re,U/2];break}const M=C(l,d),N=P(l,d);let F=b(...N);const B=m(s+F[0]),H=m(o+F[1]);let K=1,le=1,[me,he]=this.screenToPageTranslation(t.movementX,t.movementY);if([me,he]=x(me/r,he/i),I){const re=Math.hypot(l,d);K=le=Math.max(Math.min(Math.hypot(N[0]-M[0]-me,N[1]-M[1]-he)/re,1/l,1/d),h/l,f/d)}else R?K=Math.max(h,Math.min(1,Math.abs(N[0]-M[0]-me)))/l:le=Math.max(f,Math.min(1,Math.abs(N[1]-M[1]-he)))/d;const de=m(l*K),fe=m(d*le);F=b(...P(de,fe));const z=B-F[0],q=H-F[1];this.width=de,this.height=fe,this.x=z,this.y=q,this.setDims(r*de,i*fe),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new Qp(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(xo.initialize(st._l10n),this.#n=new xo(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#M();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),Ay(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Hr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#P(e);return}this.#T(e)}get isSelected(){return this._uiManager.isSelected(this)}#T(e){const{isMac:t}=Hr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,i=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#v=e.clientX,this.#g=e.clientY;const o=l=>{const{clientX:d,clientY:h}=l,[f,m]=this.screenToPageTranslation(d-this.#v,h-this.#g);this.#v=d,this.#g=h,this._uiManager.dragSelectedEditors(f,m)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:i})}const s=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#T(e)};window.addEventListener("pointerup",s,{signal:i}),window.addEventListener("blur",s,{signal:i})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[l,d]=this.pageTranslation,h=e/i,f=t/i,m=this.x*s,v=this.y*o,b=this.width*s,S=this.height*o;switch(r){case 0:return[m+h+l,o-v-f-S+d,m+h+b+l,o-v-f+d];case 90:return[m+f+l,o-v+h+d,m+f+S+l,o-v+h+b+d];case 180:return[m-h-b+l,o-v+f+d,m-h+l,o-v+f+S+d];case 270:return[m-f-S+l,o-v-h-b+d,m-f+l,o-v-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,l=s-r,d=o-i;switch(this.rotation){case 0:return[r,t-o,l,d];case 90:return[r,t-i,d,l];case 180:return[s,t-i,l,d];case 270:return[s,t-o,d,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#M(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#M()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){rn("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;const[s,o]=i.pageDimensions,[l,d,h,f]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/s,i.y=d/o,i.width=h/s,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#r.classList.remove("hidden"),Ay(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const o=this.#x.bind(this),l=this.#w.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",this.#D.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",st._l10nResizer[f])}}const r=this.#t[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let l=0;l<i-s;l++)this.#r.append(this.#r.firstChild);else if(s>i)for(let l=0;l<s-i;l++)this.#r.firstChild.before(this.#r.lastChild);let o=0;for(const l of t){const h=this.#t[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",st._l10nResizer[h])}}this.#O(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#x(e){st._resizerKeyboardManager.exec(this,e)}#w(e){this.#p&&e.relatedTarget?.parentNode!==this.#r&&this.#L()}#D(e){this.#u=this.#p?e:""}#O(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#E(this.#u,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#O(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#l;this.#b(e,t,r,i),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#s=!0;const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let i=this.#m.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},st._telemetryTimeout),this.#m.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class oY extends st{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const IC=3285377520,os=4294901760,bo=65535;class kM{constructor(e){this.h1=e?e&4294967295:IC,this.h2=e?e&4294967295:IC}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,C=e.length;x<C;x++){const P=e.charCodeAt(x);P<=255?t[r++]=P:(t[r++]=P>>>8,t[r++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let l=0,d=0,h=this.h1,f=this.h2;const m=3432918353,v=461845907,b=m&bo,S=v&bo;for(let x=0;x<i;x++)x&1?(l=o[x],l=l*m&os|l*b&bo,l=l<<15|l>>>17,l=l*v&os|l*S&bo,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=o[x],d=d*m&os|d*b&bo,d=d<<15|d>>>17,d=d*v&os|d*S&bo,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,s){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*m&os|l*b&bo,l=l<<15|l>>>17,l=l*v&os|l*S&bo,i&1?h^=l:f^=l}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&os|e*36045&bo,t=t*4283543511&os|((t<<16|e>>>16)*2950163797&os)>>>16,e^=t>>>1,e=e*444984403&os|e*60499&bo,t=t*3301882366&os|((t<<16|e>>>16)*3120437893&os)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const ab=Object.freeze({map:null,hash:"",transfer:void 0});class Gx{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof st)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,this.#n.set(e,t);i&&this.#i(),t instanceof st&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?zx(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new TM(this)}get serializable(){if(this.#n.size===0)return ab;const e=new Map,t=new kM,r=[],i=Object.create(null);let s=!1;for(const[o,l]of this.#n){const d=l instanceof st?l.serialize(!1,i):l;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),s||=!!d.bitmap)}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:ab}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof st))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const o=e[s]||=new Map;for(const[l,d]of Object.entries(i)){if(l==="type")continue;let h=o.get(l);h||(h=new Map,o.set(l,h));const f=h.get(d)??0;h.set(d,f+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof st)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class TM extends Gx{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){rn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return At(this,"modifiedIds",{ids:new Set,hash:""})}}class aY{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(Hn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,o=new FontFace(r,i,s);this.addNativeFontFace(o);try{await o.load(),this.#e.add(r),t?.(e)}catch{vt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}rn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw vt(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return At(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Pr||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),At(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Hn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return At(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(M,N){return M.charCodeAt(N)<<24|M.charCodeAt(N+1)<<16|M.charCodeAt(N+2)<<8|M.charCodeAt(N+3)&255}function i(M,N,F,B){const H=M.substring(0,N),K=M.substring(N+F);return H+B+K}let s,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let h=0;function f(M,N){if(++h>30){vt("Load test font never loaded."),N();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(f.bind(null,M,N))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,m.length,m);const S=16,x=1482184792;let C=r(v,S);for(s=0,o=m.length-3;s<o;s+=4)C=C-x+r(m,s)|0;s<m.length&&(C=C-x+r(m+"XXX",s)|0),v=i(v,S,4,HK(C));const P=`url(data:font/opentype;base64,${btoa(v)});`,I=`@font-face {font-family:"${m}";src:${P}}`;this.insertRule(I);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const M of[e.loadedName,m]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=M,R.append(N)}this._document.body.append(R),f(m,()=>{R.remove(),t.complete()})}}class lY{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${ZK(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(s){vt(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(s,o){};const i=[];for(let s=0,o=r.length;s<o;)switch(r[s++]){case ga.BEZIER_CURVE_TO:{const[l,d,h,f,m,v]=r.slice(s,s+6);i.push(b=>b.bezierCurveTo(l,d,h,f,m,v)),s+=6}break;case ga.MOVE_TO:{const[l,d]=r.slice(s,s+2);i.push(h=>h.moveTo(l,d)),s+=2}break;case ga.LINE_TO:{const[l,d]=r.slice(s,s+2);i.push(h=>h.lineTo(l,d)),s+=2}break;case ga.QUADRATIC_CURVE_TO:{const[l,d,h,f]=r.slice(s,s+4);i.push(m=>m.quadraticCurveTo(l,d,h,f)),s+=4}break;case ga.RESTORE:i.push(l=>l.restore());break;case ga.SAVE:i.push(l=>l.save());break;case ga.SCALE:Hn(i.length===2,"Scale command is only valid at the third position.");break;case ga.TRANSFORM:{const[l,d,h,f,m,v]=r.slice(s,s+6);i.push(b=>b.transform(l,d,h,f,m,v)),s+=6}break;case ga.TRANSLATE:{const[l,d]=r.slice(s,s+2);i.push(h=>h.translate(l,d)),s+=2}break}return this.compiledGlyphs[t]=function(o,l){i[0](o),i[1](o),o.scale(l,-l);for(let d=2,h=i.length;d<h;d++)i[d](o)}}}class PM{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rn("Abstract method `_createCanvas` called.")}}class cY extends PM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class RM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rn("Abstract method `_fetch` called.")}}class IM extends RM{async _fetch(e){const t=await f0(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):h0(t)}}class MM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}class uY extends MM{#e;#t;#n;#i;#s;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#s=t}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(wa,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#s.createElementNS(wa,"defs"),e.append(r),r.append(this.#n),this.#s.body.append(e)}return this.#n}#d(e){if(e.length===1){const d=e[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const f=h.join(",");return[f,f,f]}const[t,r,i]=e,s=new Array(256),o=new Array(256),l=new Array(256);for(let d=0;d<256;d++)s[d]=t[d]/255,o[d]=r[d]/255,l[d]=i[d]/255;return[s.join(","),o.join(","),l.join(",")]}#o(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(p0(t)?vt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,i,s]=this.#d(e),o=e.length===1?r:`${r}${i}${s}`;if(t=this.#c.get(o),t)return this.#c.set(e,t),t;const l=`g_${this.#i}_transfer_map_${this.#l++}`,d=this.#o(l);this.#c.set(e,d),this.#c.set(o,d);const h=this.#f(l);return this.#g(r,i,s,h),d}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let s=this.#u.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#u.set(i,s)),!e||!t))return s.url;const o=this.#y(e);e=We.makeHexColor(...o);const l=this.#y(t);if(t=We.makeHexColor(...l),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;const d=new Array(256);for(let b=0;b<=255;b++){const S=b/255;d[b]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#i}_hcm_filter`,m=s.filter=this.#f(f);this.#g(h,h,h,m),this.#p(m);const v=(b,S)=>{const x=o[b]/255,C=l[b]/255,P=new Array(S+1);for(let I=0;I<=S;I++)P[I]=x+I/S*(C-x);return P.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),m),s.url=this.#o(f),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),i=`alpha_${r}`;if(t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);const l=this.#f(s);return this.#m(r,l),o}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#d([e]),i=`luminosity_${r}`):i="luminosity",t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);const l=this.#f(s);return this.#h(l),e&&this.#m(r,l),o}addHighlightHCMFilter(e,t,r,i,s){const o=`${t}-${r}-${i}-${s}`;let l=this.#u.get(e);if(l?.key===o||(l?(l.filter?.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},this.#u.set(e,l)),!t||!r))return l.url;const[d,h]=[t,r].map(this.#y.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,b]=[i,s].map(this.#y.bind(this));m<f&&([f,m,v,b]=[m,f,b,v]),this.#a.style.color="";const S=(P,I,R)=>{const M=new Array(256),N=(m-f)/R,F=P/255,B=(I-P)/(255*R);let H=0;for(let K=0;K<=R;K++){const le=Math.round(f+K*N),me=F+K*B;for(let he=H;he<=le;he++)M[he]=me;H=le+1}for(let K=H;K<256;K++)M[K]=M[H-1];return M.join(",")},x=`g_${this.#i}_hcm_${e}_filter`,C=l.filter=this.#f(x);return this.#p(C),this.#g(S(v[0],b[0],5),S(v[1],b[1],5),S(v[2],b[2],5),C),l.url=this.#o(x),l.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#s.createElementNS(wa,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#s.createElementNS(wa,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#s.createElementNS(wa,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#v(e,t,r){const i=this.#s.createElementNS(wa,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#g(e,t,r,i){const s=this.#s.createElementNS(wa,"feComponentTransfer");i.append(s),this.#v(s,"feFuncR",e),this.#v(s,"feFuncG",t),this.#v(s,"feFuncB",r)}#m(e,t){const r=this.#s.createElementNS(wa,"feComponentTransfer");t.append(r),this.#v(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,Wx(getComputedStyle(this.#a).getPropertyValue("color"))}}class DM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rn("Abstract method `_fetch` called.")}}class OM extends DM{async _fetch(e){const t=await f0(e,"arraybuffer");return new Uint8Array(t)}}if(Pr){var lb=Promise.withResolvers(),cb=null;(async()=>{const e=await Ge(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Ge(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Ge(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Ge(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:r,url:i,canvas:s,path2d:o}))})().then(e=>{cb=e,lb.resolve()},e=>{vt(`loadPackages: ${e}`),cb=new Map,lb.resolve()})}class Fl{static get promise(){return lb.promise}static get(e){return cb?.get(e)}}async function NM(n){const t=await Fl.get("fs").promises.readFile(n);return new Uint8Array(t)}class dY extends MM{}class hY extends PM{_createCanvas(e,t){return Fl.get("canvas").createCanvas(e,t)}}class fY extends RM{async _fetch(e){return NM(e)}}class pY extends DM{async _fetch(e){return NM(e)}}const Wr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ub(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class Kx{getPattern(){rn("Abstract method `getPattern` called.")}}class mY extends Kx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Wr.STROKE||i===Wr.FILL){const o=t.current.getClippedPathBoundingBox(i,dn(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),r=We.transform(r,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),ub(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(r);s.setTransform(m)}else ub(e,this._bbox),s=this._createGradient(e);return s}}function o_(n,e,t,r,i,s,o,l){const d=e.coords,h=e.colors,f=n.data,m=n.width*4;let v;d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=s,s=o,o=v),d[r+1]>d[i+1]&&(v=r,r=i,i=v,v=o,o=l,l=v),d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=s,s=o,o=v);const b=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,x=(d[r]+e.offsetX)*e.scaleX,C=(d[r+1]+e.offsetY)*e.scaleY,P=(d[i]+e.offsetX)*e.scaleX,I=(d[i+1]+e.offsetY)*e.scaleY;if(S>=I)return;const R=h[s],M=h[s+1],N=h[s+2],F=h[o],B=h[o+1],H=h[o+2],K=h[l],le=h[l+1],me=h[l+2],he=Math.round(S),de=Math.round(I);let fe,z,q,re,U,ne,Q,$;for(let ie=he;ie<=de;ie++){if(ie<C){const ve=ie<S?0:(S-ie)/(S-C);fe=b-(b-x)*ve,z=R-(R-F)*ve,q=M-(M-B)*ve,re=N-(N-H)*ve}else{let ve;ie>I?ve=1:C===I?ve=0:ve=(C-ie)/(C-I),fe=x-(x-P)*ve,z=F-(F-K)*ve,q=B-(B-le)*ve,re=H-(H-me)*ve}let Z;ie<S?Z=0:ie>I?Z=1:Z=(S-ie)/(S-I),U=b-(b-P)*Z,ne=R-(R-K)*Z,Q=M-(M-le)*Z,$=N-(N-me)*Z;const Re=Math.round(Math.min(fe,U)),Ae=Math.round(Math.max(fe,U));let Ie=m*ie+Re*4;for(let ve=Re;ve<=Ae;ve++)Z=(fe-ve)/(fe-U),Z<0?Z=0:Z>1&&(Z=1),f[Ie++]=z-(z-ne)*Z|0,f[Ie++]=q-(q-Q)*Z|0,f[Ie++]=re-(re-$)*Z|0,f[Ie++]=255}}function gY(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(r.length/l)-1,h=l-1;for(s=0;s<d;s++){let f=s*l;for(let m=0;m<h;m++,f++)o_(n,t,r[f],r[f+1],r[f+l],i[f],i[f+1],i[f+l]),o_(n,t,r[f+l+1],r[f+1],r[f+l],i[f+l+1],i[f+1],i[f+l])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)o_(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class vY extends Kx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),b=h/m,S=f/v,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/b,scaleY:1/S},C=m+4,P=v+4,I=r.getCanvas("mesh",C,P),R=I.context,M=R.createImageData(m,v);if(t){const F=M.data;for(let B=0,H=F.length;B<H;B+=4)F[B]=t[0],F[B+1]=t[1],F[B+2]=t[2],F[B+3]=255}for(const F of this._figures)gY(M,F,x);return R.putImageData(M,2,2),{canvas:I.canvas,offsetX:l-2*b,offsetY:d-2*S,scaleX:b,scaleY:S}}getPattern(e,t,r,i){ub(e,this._bbox);let s;if(i===Wr.SHADING)s=We.singularValueDecompose2dScale(dn(e));else if(s=We.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=We.singularValueDecompose2dScale(this.matrix);s=[s[0]*l[0],s[1]*l[1]]}const o=this._createMeshCanvas(s,i===Wr.SHADING?null:this._background,t.cachedCanvases);return i!==Wr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class yY extends Kx{getPattern(){return"hotpink"}}function wY(n){switch(n[0]){case"RadialAxial":return new mY(n);case"Mesh":return new vY(n);case"Dummy":return new yY}throw new Error(`Unknown IR type: ${n[0]}`)}const MC={COLORED:1,UNCOLORED:2};class Yx{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:o,canvasGraphicsFactory:l}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),u0("TilingType: "+s);const f=t[0],m=t[1],v=t[2],b=t[3],S=v-f,x=b-m,C=We.singularValueDecompose2dScale(this.matrix),P=We.singularValueDecompose2dScale(this.baseTransform),I=C[0]*P[0],R=C[1]*P[1];let M=S,N=x,F=!1,B=!1;const H=Math.ceil(d*I),K=Math.ceil(h*R),le=Math.ceil(S*I),me=Math.ceil(x*R);H>=le?M=d:F=!0,K>=me?N=h:B=!0;const he=this.getSizeAndScale(M,this.ctx.canvas.width,I),de=this.getSizeAndScale(N,this.ctx.canvas.height,R),fe=e.cachedCanvases.getCanvas("pattern",he.size,de.size),z=fe.context,q=l.createCanvasGraphics(z);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,i,o),z.translate(-he.scale*f,-de.scale*m),q.transform(he.scale,0,0,de.scale,0,0),z.save(),this.clipBbox(q,f,m,v,b),q.baseTransform=dn(q.ctx),q.executeOperatorList(r),q.endDrawing(),z.restore(),F||B){const re=fe.canvas;F&&(M=d),B&&(N=h);const U=this.getSizeAndScale(M,this.ctx.canvas.width,I),ne=this.getSizeAndScale(N,this.ctx.canvas.height,R),Q=U.size,$=ne.size,ie=e.cachedCanvases.getCanvas("pattern-workaround",Q,$),Z=ie.context,Re=F?Math.floor(S/d):0,Ae=B?Math.floor(x/h):0;for(let Ie=0;Ie<=Re;Ie++)for(let ve=0;ve<=Ae;ve++)Z.drawImage(re,Q*Ie,$*ve,Q,$,0,0,Q,$);return{canvas:ie.canvas,scaleX:U.scale,scaleY:ne.scale,offsetX:f,offsetY:m}}return{canvas:fe.canvas,scaleX:he.scale,scaleY:de.scale,offsetX:f,offsetY:m}}getSizeAndScale(e,t,r){const i=Math.max(Yx.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,l=s-r;e.ctx.rect(t,r,o,l),e.current.updateRectMinMax(dn(e.ctx),[t,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case MC.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case MC.UNCOLORED:const l=We.makeHexColor(r[0],r[1],r[2]);i.fillStyle=l,i.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new WK(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==Wr.SHADING&&(s=We.transform(s,t.baseTransform),this.matrix&&(s=We.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const d=e.createPattern(o.canvas,"repeat");return d.setTransform(l),d}}function _Y({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const l=Hr.isLittleEndian?4278190080:255,[d,h]=o?[s,l]:[l,s],f=r>>3,m=r&7,v=n.length;t=new Uint32Array(t.buffer);let b=0;for(let S=0;S<i;S++){for(const C=e+f;e<C;e++){const P=e<v?n[e]:255;t[b++]=P&128?h:d,t[b++]=P&64?h:d,t[b++]=P&32?h:d,t[b++]=P&16?h:d,t[b++]=P&8?h:d,t[b++]=P&4?h:d,t[b++]=P&2?h:d,t[b++]=P&1?h:d}if(m===0)continue;const x=e<v?n[e++]:255;for(let C=0;C<m;C++)t[b++]=x&1<<7-C?h:d}return{srcPos:e,destPos:b}}const DC=16,OC=100,bY=15,NC=10,LC=1e3,pi=16;function xY(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,o,l,d){e.transform(r,i,s,o,l,d),this.__originalTransform(r,i,s,o,l,d)},n.setTransform=function(r,i,s,o,l,d){e.setTransform(r,i,s,o,l,d),this.__originalSetTransform(r,i,s,o,l,d)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,l){e.bezierCurveTo(t,r,i,s,o,l),this.__originalBezierCurveTo(t,r,i,s,o,l)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class SY{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $v(n,e,t,r,i,s,o,l,d,h){const[f,m,v,b,S,x]=dn(n);if(m===0&&v===0){const I=o*f+S,R=Math.round(I),M=l*b+x,N=Math.round(M),F=(o+d)*f+S,B=Math.abs(Math.round(F)-R)||1,H=(l+h)*b+x,K=Math.abs(Math.round(H)-N)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(b),R,N),n.drawImage(e,t,r,i,s,0,0,B,K),n.setTransform(f,m,v,b,S,x),[B,K]}if(f===0&&b===0){const I=l*v+S,R=Math.round(I),M=o*m+x,N=Math.round(M),F=(l+h)*v+S,B=Math.abs(Math.round(F)-R)||1,H=(o+d)*m+x,K=Math.abs(Math.round(H)-N)||1;return n.setTransform(0,Math.sign(m),Math.sign(v),0,R,N),n.drawImage(e,t,r,i,s,0,0,K,B),n.setTransform(f,m,v,b,S,x),[K,B]}n.drawImage(e,t,r,i,s,o,l,d,h);const C=Math.hypot(f,m),P=Math.hypot(v,b);return[C*d,P*h]}function AY(n){const{width:e,height:t}=n;if(e>LC||t>LC)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),l,d,h;const f=e+7&-8;let m=new Uint8Array(f*t),v=0;for(const P of n.data){let I=128;for(;I>0;)m[v++]=P&I?0:255,I>>=1}let b=0;for(v=0,m[v]!==0&&(o[0]=1,++b),d=1;d<e;d++)m[v]!==m[v+1]&&(o[d]=m[v]?2:1,++b),v++;for(m[v]!==0&&(o[d]=2,++b),l=1;l<t;l++){v=l*f,h=l*s,m[v-f]!==m[v]&&(o[h]=m[v]?1:8,++b);let P=(m[v]?4:0)+(m[v-f]?8:0);for(d=1;d<e;d++)P=(P>>2)+(m[v+1]?4:0)+(m[v-f+1]?8:0),i[P]&&(o[h+d]=i[P],++b),v++;if(m[v-f]!==m[v]&&(o[h+d]=m[v]?2:4,++b),b>r)return null}for(v=f*(t-1),h=l*s,m[v]!==0&&(o[h]=8,++b),d=1;d<e;d++)m[v]!==m[v+1]&&(o[h+d]=m[v]?4:8,++b),v++;if(m[v]!==0&&(o[h+d]=4,++b),b>r)return null;const S=new Int32Array([0,s,-1,0,-s,0,0,0,1]),x=new Path2D;for(l=0;b&&l<=t;l++){let P=l*s;const I=P+e;for(;P<I&&!o[P];)P++;if(P===I)continue;x.moveTo(P%s,l);const R=P;let M=o[P];do{const N=S[M];do P+=N;while(!o[P]);const F=o[P];F!==5&&F!==10?(M=F,o[P]=0):(M=F&51*M>>4,o[P]&=M>>2|M<<2),x.lineTo(P%s,P/s|0),o[P]||--b}while(R!==P);--l}return m=null,o=null,function(P){P.save(),P.scale(1/e,-1/t),P.translate(0,-t),P.fill(x),P.beginPath(),P.restore()}}class jC{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=SM,this.textMatrixScale=1,this.fontMatrix=rb,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Er.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=We.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=We.applyTransform(t,e),i=We.applyTransform(t.slice(2),e),s=We.applyTransform([t[0],t[3]],e),o=We.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],o[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],o[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],o[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],o[1])}updateScalingPathMinMax(e,t){We.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,o,l,d,h,f){const m=We.bezierBoundingBox(t,r,i,s,o,l,d,h,f);f||this.updateRectMinMax(e,m)}getPathBoundingBox(e=Wr.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Wr.STROKE){t||rn("Stroke bounding box must include transform.");const i=We.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=o,r[2]+=s,r[3]+=o}return r}updateClipFromPath(){const e=We.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Wr.FILL,t=null){return We.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function FC(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%pi,s=(t-i)/pi,o=i===0?s:s+1,l=n.createImageData(r,pi);let d=0,h;const f=e.data,m=l.data;let v,b,S,x;if(e.kind===Jv.GRAYSCALE_1BPP){const C=f.byteLength,P=new Uint32Array(m.buffer,0,m.byteLength>>2),I=P.length,R=r+7>>3,M=4294967295,N=Hr.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(S=v<s?pi:i,h=0,b=0;b<S;b++){const F=C-d;let B=0;const H=F>R?r:F*8-7,K=H&-8;let le=0,me=0;for(;B<K;B+=8)me=f[d++],P[h++]=me&128?M:N,P[h++]=me&64?M:N,P[h++]=me&32?M:N,P[h++]=me&16?M:N,P[h++]=me&8?M:N,P[h++]=me&4?M:N,P[h++]=me&2?M:N,P[h++]=me&1?M:N;for(;B<H;B++)le===0&&(me=f[d++],le=128),P[h++]=me&le?M:N,le>>=1}for(;h<I;)P[h++]=0;n.putImageData(l,0,v*pi)}}else if(e.kind===Jv.RGBA_32BPP){for(b=0,x=r*pi*4,v=0;v<s;v++)m.set(f.subarray(d,d+x)),d+=x,n.putImageData(l,0,b),b+=pi;v<o&&(x=r*i*4,m.set(f.subarray(d,d+x)),n.putImageData(l,0,b))}else if(e.kind===Jv.RGB_24BPP)for(S=pi,x=r*S,v=0;v<o;v++){for(v>=s&&(S=i,x=r*S),h=0,b=x;b--;)m[h++]=f[d++],m[h++]=f[d++],m[h++]=f[d++],m[h++]=255;n.putImageData(l,0,v*pi)}else throw new Error(`bad image kind: ${e.kind}`)}function $C(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%pi,s=(t-i)/pi,o=i===0?s:s+1,l=n.createImageData(r,pi);let d=0;const h=e.data,f=l.data;for(let m=0;m<o;m++){const v=m<s?pi:i;({srcPos:d}=_Y({src:h,srcPos:d,dest:f,width:r,height:v,nonBlackColor:0})),n.putImageData(l,0,m*pi)}}function Op(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function zv(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Pr){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function zC(n,e){if(e)return!0;const t=We.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Bh.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const EY=["butt","round","square"],CY=["miter","round","bevel"],kY={},BC={};class Rh{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:l=null},d,h){this.ctx=e,this.current=new jC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new SY(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,r){const d=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...dn(this.compositeCtx))}this.ctx.save(),zv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=dn(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,o=e.fnArray;let l=t||0;const d=s.length;if(d===l)return l;const h=d-l>NC&&typeof r=="function",f=h?Date.now()+bY:0;let m=0;const v=this.commonObjs,b=this.objs;let S;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(S=o[l],S!==Bs.dependency)this[S].apply(this,s[l]);else for(const x of s[l]){const C=x.startsWith("g_")?v:b;if(!C.has(x))return C.get(x,r),l}if(l++,l===d)return l;if(h&&++m>NC){if(Date.now()>f)return r(),l;m=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=r,d=i,h="prescale1",f,m;for(;s>2&&l>1||o>2&&d>1;){let v=l,b=d;s>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/v),o>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/b),f=this.cachedCanvases.getCanvas(h,v,b),m=f.context,m.clearRect(0,0,v,b),m.drawImage(e,0,0,l,d,0,0,v,b),e=f.canvas,l=v,d=b,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,o=this.current.patternFill,l=dn(t);let d,h,f,m;if((e.bitmap||e.data)&&e.count>1){const H=e.bitmap||e.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),s]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const K=d.get(h);if(K&&!o){const le=Math.round(Math.min(l[0],l[2])+l[4]),me=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:K,offsetX:le,offsetY:me}}f=K}f||(m=this.cachedCanvases.getCanvas("maskCanvas",r,i),$C(m.context,e));let v=We.transform(l,[1/r,0,0,-1/i,0,0]);v=We.transform(v,[1,0,0,1,0,-i]);const[b,S,x,C]=We.getAxialAlignedBoundingBox([0,0,r,i],v),P=Math.round(x-b)||1,I=Math.round(C-S)||1,R=this.cachedCanvases.getCanvas("fillCanvas",P,I),M=R.context,N=b,F=S;M.translate(-N,-F),M.transform(...v),f||(f=this._scaleImage(m.canvas,va(M)),f=f.img,d&&o&&d.set(h,f)),M.imageSmoothingEnabled=zC(dn(M),e.interpolate),$v(M,f,0,0,f.width,f.height,0,0,r,i),M.globalCompositeOperation="source-in";const B=We.transform(va(M),[1,0,0,1,-N,-F]);return M.fillStyle=o?s.getPattern(t,this,B,Wr.FILL):s,M.fillRect(0,0,r,i),d&&!o&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(N),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=EY[e]}setLineJoin(e){this.ctx.lineJoin=CY[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...dn(this.suspendedCtx)),Op(this.suspendedCtx,s),xY(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Op(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],l=i[2]-s,d=i[3]-o;l===0||d===0||(this.genericComposeSMask(t.context,r,l,d,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,l,d,h,f,m){let v=e.canvas,b=d-f,S=h-m;if(o){const C=We.makeHexColor(...o);if(b<0||S<0||b+r>v.width||S+i>v.height){const P=this.cachedCanvases.getCanvas("maskExtension",r,i),I=P.context;I.drawImage(v,-b,-S),I.globalCompositeOperation="destination-atop",I.fillStyle=C,I.fillRect(0,0,r,i),I.globalCompositeOperation="source-over",v=P.canvas,b=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const P=new Path2D;P.rect(b,S,r,i),e.clip(P),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(b,S,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(d,h,r,i),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(v,b,S,r,i,d,h,r,i),t.restore()}save(){this.inSMaskMode?(Op(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Op(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,o){this.ctx.transform(e,t,r,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,s=this.current;let o=s.x,l=s.y,d,h;const f=dn(i),m=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,v=m?r.slice(0):null;for(let b=0,S=0,x=e.length;b<x;b++)switch(e[b]|0){case Bs.rectangle:o=t[S++],l=t[S++];const C=t[S++],P=t[S++],I=o+C,R=l+P;i.moveTo(o,l),C===0||P===0?i.lineTo(I,R):(i.lineTo(I,l),i.lineTo(I,R),i.lineTo(o,R)),m||s.updateRectMinMax(f,[o,l,I,R]),i.closePath();break;case Bs.moveTo:o=t[S++],l=t[S++],i.moveTo(o,l),m||s.updatePathMinMax(f,o,l);break;case Bs.lineTo:o=t[S++],l=t[S++],i.lineTo(o,l),m||s.updatePathMinMax(f,o,l);break;case Bs.curveTo:d=o,h=l,o=t[S+4],l=t[S+5],i.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],o,l),s.updateCurvePathMinMax(f,d,h,t[S],t[S+1],t[S+2],t[S+3],o,l,v),S+=6;break;case Bs.curveTo2:d=o,h=l,i.bezierCurveTo(o,l,t[S],t[S+1],t[S+2],t[S+3]),s.updateCurvePathMinMax(f,d,h,o,l,t[S],t[S+1],t[S+2],t[S+3],v),o=t[S+2],l=t[S+3],S+=4;break;case Bs.curveTo3:d=o,h=l,o=t[S+2],l=t[S+3],i.bezierCurveTo(t[S],t[S+1],o,l,o,l),s.updateCurvePathMinMax(f,d,h,t[S],t[S+1],o,l,o,l,v),S+=4;break;case Bs.closePath:i.closePath();break}m&&s.updateScalingPathMinMax(f,v),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,va(t),Wr.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,va(t),Wr.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=kY}eoClip(){this.pendingClip=BC}beginText(){this.current.textMatrix=SM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||rb,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&vt("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const d=r.italic?"italic":"normal";let h=t;t<DC?h=DC:t>OC&&(h=OC),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${l} ${h}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,o){this.current.textMatrix=[e,t,r,i,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){const s=this.ctx,o=this.current,l=o.font,d=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,f=d&Er.FILL_STROKE_MASK,m=!!(d&Er.ADD_TO_PATH_FLAG),v=o.patternFill&&!l.missingFile;let b;(l.disableFontFace||m||v)&&(b=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||v?(s.save(),s.translate(t,r),s.beginPath(),b(s,h),i&&s.setTransform(...i),(f===Er.FILL||f===Er.FILL_STROKE)&&s.fill(),(f===Er.STROKE||f===Er.FILL_STROKE)&&s.stroke(),s.restore()):((f===Er.FILL||f===Er.FILL_STROKE)&&s.fillText(e,t,r),(f===Er.STROKE||f===Er.FILL_STROKE)&&s.strokeText(e,t,r)),m&&(this.pendingTextPaths||=[]).push({transform:dn(s),x:t,y:r,fontSize:h,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return At(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,o=t.fontSizeScale,l=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,f=t.textHScale*h,m=e.length,v=r.vertical,b=v?1:-1,S=r.defaultVMetrics,x=i*t.fontMatrix[0],C=t.textRenderingMode===Er.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),h>0?s.scale(f,-1):s.scale(f,1);let P;if(t.patternFill){s.save();const F=t.fillColor.getPattern(s,this,va(s),Wr.FILL);P=dn(s),s.restore(),s.fillStyle=F}let I=t.lineWidth;const R=t.textMatrixScale;if(R===0||I===0){const F=t.textRenderingMode&Er.FILL_STROKE_MASK;(F===Er.STROKE||F===Er.FILL_STROKE)&&(I=this.getSinglePixelWidth())}else I/=R;if(o!==1&&(s.scale(o,o),I/=o),s.lineWidth=I,r.isInvalidPDFjsFont){const F=[];let B=0;for(const H of e)F.push(H.unicode),B+=H.width;s.fillText(F.join(""),0,0),t.x+=B*x*f,s.restore(),this.compose();return}let M=0,N;for(N=0;N<m;++N){const F=e[N];if(typeof F=="number"){M+=b*F*i/1e3;continue}let B=!1;const H=(F.isSpace?d:0)+l,K=F.fontChar,le=F.accent;let me,he,de=F.width;if(v){const z=F.vmetric||S,q=-(F.vmetric?z[1]:de*.5)*x,re=z[2]*x;de=z?-z[0]:de,me=q/o,he=(M+re)/o}else me=M/o,he=0;if(r.remeasure&&de>0){const z=s.measureText(K).width*1e3/i*o;if(de<z&&this.isFontSubpixelAAEnabled){const q=de/z;B=!0,s.save(),s.scale(q,1),me/=q}else de!==z&&(me+=(de-z)/2e3*i/o)}if(this.contentVisible&&(F.isInFont||r.missingFile)){if(C&&!le)s.fillText(K,me,he);else if(this.paintChar(K,me,he,P),le){const z=me+i*le.offset.x/o,q=he-i*le.offset.y/o;this.paintChar(le.fontChar,z,q,P)}}const fe=v?de*x-H*h:de*x+H*h;M+=fe,B&&s.restore()}v?t.y-=M:t.x+=M*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,o=r.fontDirection,l=i.vertical?1:-1,d=r.charSpacing,h=r.wordSpacing,f=r.textHScale*o,m=r.fontMatrix||rb,v=e.length,b=r.textRenderingMode===Er.INVISIBLE;let S,x,C,P;if(!(b||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(f,o),S=0;S<v;++S){if(x=e[S],typeof x=="number"){P=l*x*s/1e3,this.ctx.translate(P,0),r.x+=P*f;continue}const I=(x.isSpace?h:0)+d,R=i.charProcOperatorList[x.operatorListId];if(!R){vt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(s,s),t.transform(...m),this.executeOperatorList(R),this.restore()),C=We.applyTransform([x.width,0],m)[0]*s+I,t.translate(C,0),r.x+=C*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,o){this.ctx.rect(r,i,s-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||dn(this.ctx),s={createCanvasGraphics:o=>new Rh(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Yx(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=We.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=We.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=wY(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,va(t),Wr.SHADING);const i=va(t);if(i){const{width:s,height:o}=t.canvas,[l,d,h,f]=We.getAxialAlignedBoundingBox([0,0,s,o],i);this.ctx.fillRect(l,d,h-l,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){rn("Should not call beginInlineImage")}beginImageData(){rn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=dn(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(dn(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||u0("TODO: Support non-isolated groups."),e.knockout&&vt("Knockout groups not supported.");const r=dn(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=We.getAxialAlignedBoundingBox(e.bbox,dn(t));const s=[0,0,t.canvas.width,t.canvas.height];i=We.intersect(i,s)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-o,1),h=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,d,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(f,d,h),v=m.context;v.translate(-o,-l),v.transform(...r),e.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,l),t.save()),Op(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=dn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=We.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(this.#e(),zv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],l=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=l;const[d,h]=We.singularValueDecompose2dScale(dn(this.ctx)),{viewportScale:f}=this,m=Math.ceil(o*this.outputScaleX*f),v=Math.ceil(l*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,v);const{canvas:b,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-h,0,l*h),zv(this.ctx)}else zv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new jC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=AY(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const d=dn(l);l.transform(t,r,i,s,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let f=0,m=o.length;f<m;f+=2){const v=We.transform(d,[t,r,i,s,o[f],o[f+1]]),[b,S]=We.applyTransform([0,0],v);l.drawImage(h.canvas,b,S)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:o,width:l,height:d,transform:h}=s,f=this.cachedCanvases.getCanvas("maskCanvas",l,d),m=f.context;m.save();const v=this.getObject(o,s);$C(m,v),m.globalCompositeOperation="source-in",m.fillStyle=i?r.getPattern(m,this,va(t),Wr.FILL):r,m.fillRect(0,0,l,d),m.restore(),t.save(),t.transform(...h),t.scale(1,-1),$v(t,f.canvas,0,0,l,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){vt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){vt("Dependent image isn't ready yet");return}const o=s.width,l=s.height,d=[];for(let h=0,f=i.length;h<f;h+=2)d.push({transform:[t,0,0,r,i[h],i[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!Pr){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,r).context;FC(d,e),s=this.applyTransferMapsToCanvas(d)}const o=this._scaleImage(s,va(i));i.imageSmoothingEnabled=zC(dn(i),e.interpolate),$v(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,o=e.height,d=this.cachedCanvases.getCanvas("inlineImage",s,o).context;FC(d,e),i=this.applyTransferMapsToCanvas(d)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),$v(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===BC?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=dn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,l;if(r===0&&i===0){const d=Math.abs(t),h=Math.abs(s);if(d===h)if(e===0)o=l=1/d;else{const f=d*e;o=l=f<1?1/f:1}else if(e===0)o=1/d,l=1/h;else{const f=d*e,m=h*e;o=f<1?1/f:1,l=m<1?1/m:1}}else{const d=Math.abs(t*s-r*i),h=Math.hypot(t,r),f=Math.hypot(i,s);if(e===0)o=f/d,l=h/d;else{const m=e*d;o=f>m?f/m:1,l=h>m?h/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,s),o.length>0){const l=Math.max(i,s);t.setLineDash(o.map(d=>d/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Bs)Rh.prototype[n]!==void 0&&(Rh.prototype[Bs[n]]=Rh.prototype[n]);class em{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const Bv={DATA:1,ERROR:2},Mn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Oi(n){switch(n instanceof Error||typeof n=="object"&&n!==null||rn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Iu(n.message);case"MissingPDFException":return new Ru(n.message);case"PasswordException":return new ib(n.message,n.code);case"UnexpectedResponseException":return new d0(n.message,n.status);case"UnknownErrorException":return new sb(n.message,n.details);default:return new sb(n.message,n.toString())}}class Up{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Bv.DATA)i.resolve(e.data);else if(e.callback===Bv.ERROR)i.reject(Oi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:Bv.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:Bv.ERROR,callbackId:e.callbackId,reason:Oi(o)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:l,action:e,streamId:s,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,d.postMessage({sourceName:o,targetName:l,stream:Mn.PULL,streamId:s,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Hn(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,d.postMessage({sourceName:o,targetName:l,stream:Mn.CANCEL,streamId:s,reason:Oi(h)}),f.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,l=this.actionHandler[e.action],d={enqueue(h,f=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=f,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Mn.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Mn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){Hn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Mn.ERROR,streamId:t,reason:Oi(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(h){h(l(e.data,d))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Mn.START_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:r,targetName:i,stream:Mn.START_COMPLETE,streamId:t,reason:Oi(h)})})}#i(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Mn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Oi(e.reason));break;case Mn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Oi(e.reason));break;case Mn.PULL:if(!l){s.postMessage({sourceName:r,targetName:i,stream:Mn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(d){d(l.onPull?.())}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Mn.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:Mn.PULL_COMPLETE,streamId:t,reason:Oi(d)})});break;case Mn.ENQUEUE:if(Hn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Mn.CLOSE:if(Hn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#s(o,t);break;case Mn.ERROR:Hn(o,"error should have stream controller"),o.controller.error(Oi(e.reason)),this.#s(o,t);break;case Mn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Oi(e.reason)),this.#s(o,t);break;case Mn.CANCEL:if(!l)break;new Promise(function(d){d(l.onCancel?.(Oi(e.reason)))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Mn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:Mn.CANCEL_COMPLETE,streamId:t,reason:Oi(d)})}),l.sinkCapability.reject(Oi(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class TY{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return zx(this.#e)}has(e){return this.#e.has(e)}}const _h=Symbol("INTERNAL");class PY{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(e&Ni.DISPLAY),this.#t=!!(e&Ni.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==_h&&rn("Internal method `_setVisible` called."),this.#n=r,this.#i=t}}class RY{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=Ni.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const r of e.groups)this.#t.set(r.id,new PY(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(_h,!1);for(const r of e.on)this.#t.get(r)._setVisible(_h,!0);for(const r of e.off)this.#t.get(r)._setVisible(_h,!1);this.#n=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=this.#s(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return vt(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return u0("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(vt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return vt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return vt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return vt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return vt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return vt(`Unknown optional content policy ${e.policy}.`),!0}return vt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){vt(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&this.#t.get(o)?._setVisible(_h,!1,!0);i._setVisible(_h,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?zx(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new kM;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class IY{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Hn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,s?.length>0){const d=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});Hn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Hn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new MY(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new DY(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class MY{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=Vx(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class DY{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function OY(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=l(t);return f=unescape(f),f=d(f),f=h(f),s(f)}if(t=o(n),t){const f=h(t);return s(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=l(t);return f=h(f),s(f)}function r(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(f,{fatal:!0}),b=h0(m);m=v.decode(b),e=!1}catch{}}return m}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function o(f){const m=[];let v;const b=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(f))!==null;){let[,x,C,P]=v;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[C,P]}const S=[];for(let x=0;x<m.length&&x in m;++x){let[C,P]=m[x];P=l(P),C&&(P=unescape(P),x===0&&(P=d(P))),S.push(P)}return S.join("")}function l(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let v=0;v<m.length;++v){const b=m[v].indexOf('"');b!==-1&&(m[v]=m[v].slice(0,b),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function d(f){const m=f.indexOf("'");if(m===-1)return f;const v=f.slice(0,m),S=f.slice(m+1).replace(/^[^']*'/,"");return i(v,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,b,S){if(b==="q"||b==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,C){return String.fromCharCode(parseInt(C,16))}),i(v,S);try{S=atob(S)}catch{}return i(v,S)})}return""}function Xx(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function Zx({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Jx(n){const e=n.get("Content-Disposition");if(e){let t=OY(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Vx(t))return t}return null}function m0(n,e){return n===404||n===0&&e.startsWith("file:")?new Ru('Missing PDF "'+e+'".'):new d0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function LM(n){return n===200||n===206}function jM(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function FM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(vt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class UC{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Xx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Hn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new NY(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new LY(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class NY{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,jM(r,this._withCredentials,this._abortController)).then(s=>{if(!LM(s.status))throw m0(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:l,suggestedLength:d}=Zx({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=Jx(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Iu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:FM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class LY{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,jM(s,this._withCredentials,this._abortController)).then(l=>{if(!LM(l.status))throw m0(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:FM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const a_=200,l_=206;function jY(n){const e=n.response;return typeof e!="string"?e:h0(e).buffer}class FY{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Xx(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const i={begin:e,end:t};for(const s in r)i[s]=r[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=l_):i.expectedStatus=a_,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError?.(i.status);return}const s=i.status||a_;if(!(s===a_&&r.expectedStatus===l_)&&s!==r.expectedStatus){r.onError?.(i.status);return}const l=jY(i);if(s===l_){const d=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);r.onDone({begin:parseInt(h[1],10),chunk:l})}else l?r.onDone({begin:0,chunk:l}):r.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class $Y{constructor(e){this._source=e,this._manager=new FY(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Hn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new zY(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new BY(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class zY{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[l,...d]=o.split(": ");return[l,d.join(": ")]})),{allowRangeRequests:i,suggestedLength:s}=Zx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Jx(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=m0(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class BY{constructor(e,t,r){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=m0(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const UY=/^[a-z][a-z0-9\-+.]+:/i;function VY(n){if(UY.test(n))return new URL(n);const e=Fl.get("url");return new URL(e.pathToFileURL(n))}function $M(n,e,t){return n.protocol==="http:"?Fl.get("http").request(n,{headers:e},t):Fl.get("https").request(n,{headers:e},t)}class WY{constructor(e){this.source=e,this.url=VY(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Xx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Hn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new GY(this):new HY(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new KY(this,e,t):new qY(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class zM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Iu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class HY extends zM{constructor(e){super(e);const t=Object.fromEntries(e.headers),r=i=>{if(i.statusCode===404){const d=new Ru(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:l}=Zx({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=Jx(s)};this._request=$M(this._url,t,r),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class qY extends BM{constructor(e,t,r){super(e);const i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${r-1}`;const s=o=>{if(o.statusCode===404){const l=new Ru(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(o)};this._request=$M(this._url,i,s),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class GY extends zM{constructor(e){super(e);const t=Fl.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ru(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class KY extends BM{constructor(e,t,r){super(e);const i=Fl.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}}const YY=1e5,fi=30,XY=.8;class $r{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#v=[];#g=new WeakMap;#m=null;static#y=new Map;static#_=new Map;static#C=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:o,pageY:l}=r.rawDims;this.#m=[1,0,0,-1,-o,l+s],this.#c=i,this.#l=s,$r.#P(),wu(t,r),this.#e.promise.finally(()=>{$r.#A.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Hr.platform;return At(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#h,t.styles),this.#N(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),$r.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#d&&(t?.(),this.#d=i,wu(this.#a,{rotation:i})),r!==this.#o){t?.(),this.#o=r;const s={div:null,properties:null,ctx:$r.#E(this.#s)};for(const o of this.#v)s.properties=this.#g.get(o),s.div=o,this.#b(s)}}cancel(){const e=new Iu("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#v}get textContentItemsStr(){return this.#p}#N(e){if(this.#n)return;this.#r.ctx??=$r.#E(this.#s);const t=this.#v,r=this.#p;for(const i of e){if(t.length>YY){vt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#k(i)}}#k(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#v.push(t);const i=We.transform(this.#m,e.transform);let s=Math.atan2(i[1],i[0]);const o=this.#h[e.fontName];o.vertical&&(s+=Math.PI/2);let l=this.#i&&o.fontSubstitution||o.fontFamily;l=$r.fontFamilyMap.get(l)||l;const d=Math.hypot(i[2],i[3]),h=d*$r.#M(l,this.#s);let f,m;s===0?(f=i[4],m=i[5]-h):(f=i[4]+h*Math.sin(s),m=i[5]-h*Math.cos(s));const v="calc(var(--scale-factor)*",b=t.style;this.#t===this.#a?(b.left=`${(100*f/this.#c).toFixed(2)}%`,b.top=`${(100*m/this.#l).toFixed(2)}%`):(b.left=`${v}${f.toFixed(2)}px)`,b.top=`${v}${m.toFixed(2)}px)`),b.fontSize=`${v}${($r.#S*d).toFixed(2)}px)`,b.fontFamily=l,r.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),C=Math.abs(e.transform[3]);x!==C&&Math.max(x,C)/Math.min(x,C)>1.5&&(S=!0)}if(S&&(r.canvasWidth=o.vertical?e.height:e.width),this.#g.set(t,r),this.#r.div=t,this.#r.properties=r,this.#b(this.#r),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#b(e){const{div:t,properties:r,ctx:i}=e,{style:s}=t;let o="";if($r.#S>1&&(o=`scale(${1/$r.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:d,fontSize:h}=r;$r.#T(i,h*this.#o,l);const{width:f}=i.measureText(t.textContent);f>0&&(o=`scaleX(${d*this.#o/f}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#E(e=null){let t=this.#_.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#T(e,t,r){const i=this.#C.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#P(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#M(e,t){const r=this.#y.get(e);if(r)return r;const i=this.#E(t);i.canvas.width=i.canvas.height=fi,this.#T(i,fi,e);const s=i.measureText("");let o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);if(o){const f=o/(o+l);return this.#y.set(e,f),i.canvas.width=i.canvas.height=0,f}i.strokeStyle="red",i.clearRect(0,0,fi,fi),i.strokeText("g",0,0);let d=i.getImageData(0,0,fi,fi).data;l=0;for(let f=d.length-1-3;f>=0;f-=4)if(d[f]>0){l=Math.ceil(f/4/fi);break}i.clearRect(0,0,fi,fi),i.strokeText("A",0,fi),d=i.getImageData(0,0,fi,fi).data,o=0;for(let f=0,m=d.length;f<m;f+=4)if(d[f]>0){o=fi-Math.floor(f/4/fi);break}i.canvas.width=i.canvas.height=0;const h=o?o/(o+l):XY;return this.#y.set(e,h),h}}class xm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){if(!s)return;let o=null;const l=s.name;if(l==="#text")o=s.value;else if(xm.shouldBuildText(l))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const d of s.children)i(d)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ZY=65536,JY=100,QY=5e3,eX=Pr?hY:cY,tX=Pr?fY:IM,nX=Pr?dY:uY,rX=Pr?pY:OM;function iX(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Qx,{docId:t}=e,r=n.url?sX(n.url):null,i=n.data?oX(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,d=n.range instanceof UM?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:ZY;let f=n.worker instanceof Ih?n.worker:null;const m=n.verbosity,v=typeof n.docBaseUrl=="string"&&!p0(n.docBaseUrl)?n.docBaseUrl:null,b=typeof n.cMapUrl=="string"?n.cMapUrl:null,S=n.cMapPacked!==!1,x=n.CMapReaderFactory||tX,C=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,P=n.StandardFontDataFactory||rX,I=n.stopAtErrors!==!0,R=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,M=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Pr,F=typeof n.isChrome=="boolean"?n.isChrome:!Hr.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,B=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,H=typeof n.disableFontFace=="boolean"?n.disableFontFace:Pr,K=n.fontExtraProperties===!0,le=n.enableXfa===!0,me=n.ownerDocument||globalThis.document,he=n.disableRange===!0,de=n.disableStream===!0,fe=n.disableAutoFetch===!0,z=n.pdfBug===!0,q=n.CanvasFactory||eX,re=n.FilterFactory||nX,U=n.enableHWA===!0,ne=d?d.length:n.length??NaN,Q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Pr&&!H,$=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===IM&&P===OM&&b&&C&&Bp(b,document.baseURI)&&Bp(C,document.baseURI);n.canvasFactory&&RC("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&RC("`filterFactory`-instance option, please use `FilterFactory` instead.");const ie=null;zK(m);const Z={canvasFactory:new q({ownerDocument:me,enableHWA:U}),filterFactory:new re({docId:t,ownerDocument:me}),cMapReaderFactory:$?null:new x({baseUrl:b,isCompressed:S}),standardFontDataFactory:$?null:new P({baseUrl:C})};if(!f){const Ie={verbosity:m,port:em.workerPort};f=Ie.port?Ih.fromPort(Ie):new Ih(Ie),e._worker=f}const Re={docId:t,apiVersion:"4.8.69",data:i,password:l,disableAutoFetch:fe,rangeChunkSize:h,length:ne,docBaseUrl:v,enableXfa:le,evaluatorOptions:{maxImageSize:R,disableFontFace:H,ignoreErrors:I,isEvalSupported:M,isOffscreenCanvasSupported:N,isChrome:F,canvasMaxAreaInBytes:B,fontExtraProperties:K,useSystemFonts:Q,cMapUrl:$?b:null,standardFontDataUrl:$?C:null}},Ae={disableFontFace:H,fontExtraProperties:K,ownerDocument:me,pdfBug:z,styleElement:ie,loadingParams:{disableAutoFetch:fe,enableXfa:le}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ie=f.messageHandler.sendWithPromise("GetDocRequest",Re,i?[i.buffer]:null);let ve;if(d)ve=new IY(d,{disableRange:he,disableStream:de});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Ne;Pr?Ne=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Bp(r)?UC:WY:Ne=Bp(r)?UC:$Y,ve=new Ne({url:r,length:ne,httpHeaders:s,withCredentials:o,rangeChunkSize:h,disableRange:he,disableStream:de})}return Ie.then(Ne=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const He=new Up(t,Ne,f.port),Xe=new uX(He,e,ve,Ae,Z);e._transport=Xe,He.send("Ready",null)})}).catch(e._capability.reject),e}function sX(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Pr&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oX(n){if(Pr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return h0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function VC(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class Qx{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Qx.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class UM{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){rn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class aX{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class lX{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new PC:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new VM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new Lm({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=Cl.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(r,i,f,m),{renderingIntent:b,cacheKey:S}=v;this.#t=!1,this.#i(),l||=this._transport.getOptionalContentConfig(b);let x=this._intentStates.get(S);x||(x=Object.create(null),this._intentStates.set(S,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(b&Ni.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=M=>{x.renderTasks.delete(I),(this._maybeCleanupAfterRender||C)&&(this.#t=!0),this.#n(!C),M?(I.capability.reject(M),this._abortOperatorList({intentState:x,reason:M instanceof Error?M:new Error(M)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new Ch({callback:P,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:h});(x.renderTasks||=new Set).add(I);const R=I.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([M,N])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(N.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:M,optionalContentConfig:N}),I.operatorListChanged()}).catch(P),R}getOperatorList({intent:e="display",annotationMode:t=Cl.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>xm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:d,done:h}){if(h){r(l);return}l.lang??=d.lang,Object.assign(l.styles,d.styles),l.items.push(...d.items),s()},i)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new PC),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},QY),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:m,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),f())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#n(!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof Ux){let i=JY;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Iu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class cX{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:s}=r;if(s.aborted){vt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var Ey,cu,uu,Mh,Qv,Dh,ey;const on=class on{constructor({name:e=null,port:t=null,verbosity:r=BK()}={}){ah(this,Mh);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(js(on,uu)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(js(on,uu)||yp(on,uu,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Pr?Promise.all([Fl.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Up("main","worker",e),this._messageHandler.on("ready",function(){}),uv(this,Mh,Qv).call(this)}_initialize(){if(js(on,cu)||js(on,Dh,ey)){this._setupFakeWorker();return}let{workerSrc:e}=on;try{on._isSameOrigin(window.location.href,e)||(e=on._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Up("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",l=>{if(s.abort(),this.destroyed||!l){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,uv(this,Mh,Qv).call(this)}),r.on("ready",l=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};o();return}catch{u0("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){js(on,cu)||(vt("Setting up fake worker."),yp(on,cu,!0)),on._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new cX;this._port=t;const r=`fake${xS(on,Ey)._++}`,i=new Up(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new Up(r,r+"_worker",t),uv(this,Mh,Qv).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),js(on,uu)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=js(this,uu)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new on(e)}static get workerSrc(){if(em.workerSrc)return em.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return At(this,"_setupFakeWorkerGlobal",(async()=>js(this,Dh,ey)?js(this,Dh,ey):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ey=new WeakMap,cu=new WeakMap,uu=new WeakMap,Mh=new WeakSet,Qv=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Dh=new WeakSet,ey=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ah(on,Dh),ah(on,Ey,0),ah(on,cu,!1),ah(on,uu),Pr&&(yp(on,cu,!0),em.workerSrc||="./pdf.worker.mjs"),on._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(t,r);return r.origin===i.origin},on._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Ih=on;class uX{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#s=null;constructor(e,t,r,i,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new VM,this.fontLoader=new aY({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return At(this,"annotationStorage",new Gx)}getRenderingIntent(e,t=Cl.ENABLE,r=null,i=!1,s=!1){let o=Ni.DISPLAY,l=ab;switch(e){case"any":o=Ni.ANY;break;case"display":break;case"print":o=Ni.PRINT;break;default:vt(`getRenderingIntent - invalid intent: ${e}`)}const d=o&Ni.PRINT&&r instanceof TM?r:this.annotationStorage;switch(t){case Cl.DISABLE:o+=Ni.ANNOTATIONS_DISABLE;break;case Cl.ENABLE:break;case Cl.ENABLE_FORMS:o+=Ni.ANNOTATIONS_FORMS;break;case Cl.ENABLE_STORAGE:o+=Ni.ANNOTATIONS_STORAGE,l=d.serializable;break;default:vt(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Ni.IS_EDITING),s&&(o+=Ni.OPLIST);const{ids:h,hash:f}=d.modifiedIds,m=[o,l.hash,f];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),$r.cleanup(),this._networkStream?.cancelAllRequests(new Iu("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Hn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}Hn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{Hn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:l}){if(l){i.close();return}Hn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new aX(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new ib(r.message,r.code);break;case"InvalidPDFException":i=new AM(r.message);break;case"MissingPDFException":i=new Ru(r.message);break;case"UnexpectedResponseException":i=new d0(r.message,r.status);break;case"UnknownErrorException":i=new sb(r.message,r.details);break;default:rn("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",r=>{if(this.#s=Promise.withResolvers(),t.onPassword){const i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{t.onPassword(i,r.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new ib(r.message,r.code));return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:d}=this._params;if("error"in s){const v=s.error;vt(`Error during font loading: ${v}`),this.commonObjs.resolve(r,v);break}const h=d&&globalThis.FontInspector?.enabled?(v,b)=>globalThis.FontInspector.fontAdded(v,b):null,f=new lY(s,{disableFontFace:o,inspectFont:h});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:m}=s;Hn(m,"The imageRef must be defined.");for(const v of this.#t.values())for(const[,b]of v.objs)if(b?.ref===m)return b.dataLen?(this.commonObjs.resolve(r,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":l.objs.resolve(r,o),o?.dataLen>LK&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&vt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const o=new lX(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,i),i}getPageIndex(e){return VC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new RY(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new TY(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),$r.cleanup()}}cachedPageNumber(e){if(!VC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}}const Uv=Symbol("INITIAL_DATA");class VM{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Uv}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===Uv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==Uv}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Uv&&(yield[e,t])}}}class dX{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Ch{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:v=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new dX(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Ch.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ch.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new Rh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Ch.#t.delete(this._canvas),this.callback(e||new Ux(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ch.#t.delete(this._canvas),this.callback())))}}const hX="4.8.69",fX="3634dab10";function WC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Np(n){return Math.max(0,Math.min(255,255*n))}class HC{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Np(e),[e,e,e]}static G_HTML([e]){const t=WC(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Np)}static RGB_HTML(e){return`#${e.map(WC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Np(1-Math.min(1,e+i)),Np(1-Math.min(1,r+i)),Np(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,l=Math.min(i,s,o);return["CMYK",i,s,o,l]}}class pX{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rn("Abstract method `_createSVG` called.")}}class eS extends pX{_createSVG(e){return document.createElementNS(wa,e)}}class WM{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of r.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[d,h]of Object.entries(o))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}l&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const l=s!=="richText",d=e.div;if(d.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=m}l&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),l&&xm.shouldBuildText(i.name)&&h.push(m)}return{textDivs:h}}const f=[[i,-1,o]];for(;f.length>0;){const[m,v,b]=f.at(-1);if(v+1===m.children.length){f.pop();continue}const S=m.children[++f.at(-1)[1]];if(S===null)continue;const{name:x}=S;if(x==="#text"){const P=document.createTextNode(S.value);h.push(P),b.append(P);continue}const C=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,x):document.createElement(x);if(b.append(C),S.attributes&&this.setAttributes({html:C,element:S,storage:t,intent:s,linkService:r}),S.children?.length>0)f.push([S,-1,C]);else if(S.value){const P=document.createTextNode(S.value);l&&xm.shouldBuildText(x)&&h.push(P),C.append(P)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fm=1e3,mX=9,_u=new WeakSet;function ka(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class gX{static create(e){switch(e.data.annotationType){case Vn.LINK:return new HM(e);case Vn.TEXT:return new vX(e);case Vn.WIDGET:switch(e.data.fieldType){case"Tx":return new yX(e);case"Btn":return e.data.radioButton?new qM(e):e.data.checkBox?new _X(e):new bX(e);case"Ch":return new xX(e);case"Sig":return new wX(e)}return new Mu(e);case Vn.POPUP:return new db(e);case Vn.FREETEXT:return new GM(e);case Vn.LINE:return new AX(e);case Vn.SQUARE:return new EX(e);case Vn.CIRCLE:return new CX(e);case Vn.POLYLINE:return new KM(e);case Vn.CARET:return new TX(e);case Vn.INK:return new tS(e);case Vn.POLYGON:return new kX(e);case Vn.HIGHLIGHT:return new YM(e);case Vn.UNDERLINE:return new PX(e);case Vn.SQUIGGLY:return new RX(e);case Vn.STRIKEOUT:return new IX(e);case Vn.STAMP:return new XM(e);case Vn.FILEATTACHMENT:return new MX(e);default:return new kn(e)}}}class kn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return kn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:d}}}}=this;r?.splice(0,4,...e);const{width:h,height:f}=ka(e);t.left=`${100*(e[0]-l)/s}%`,t.top=`${100*(o-e[3]+d)/o}%`,i===0?(t.width=`${100*h/s}%`,t.height=`${100*f/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Mu||(s.tabIndex=Fm);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof db){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,s),s}const{width:l,height:d}=ka(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(x>0||C>0){const I=`calc(${x}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;o.borderRadius=I}else if(this instanceof qM){const I=`calc(${l}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;o.borderRadius=I}switch(t.borderStyle.style){case Dp.SOLID:o.borderStyle="solid";break;case Dp.DASHED:o.borderStyle="dashed";break;case Dp.BEVELED:vt("Unimplemented border style: beveled");break;case Dp.INSET:vt("Unimplemented border style: inset");break;case Dp.UNDERLINE:o.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(this.#t=!0,o.borderColor=We.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):o.borderWidth=0}const h=We.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:m,pageX:v,pageY:b}=i.rawDims;o.left=`${100*(h[0]-v)/f}%`,o.top=`${100*(h[1]-b)/m}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(o.width=`${100*l/f}%`,o.height=`${100*d/m}%`):this.setRotation(S,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=ka(this.data.rect);let l,d;e%180===0?(l=100*s/r,d=100*o/i):(l=100*o/r,d=100*s/i),t.style.width=`${l}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],l=s.slice(1);i.target.style[r]=HC[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:HC[`${o}_rgb`](l)})};return At(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const l={detail:{[i]:s},target:e};o(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,C,P,I]=e.subarray(2,6);if(i===x&&s===C&&t===P&&r===I)return}const{style:o}=this.container;let l;if(this.#t){const{borderColor:x,borderWidth:C}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=i-t,h=s-r,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0);const v=f.createElement("defs");m.append(v);const b=f.createElement("clipPath"),S=`clippath_${this.data.id}`;b.setAttribute("id",S),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let x=2,C=e.length;x<C;x+=8){const P=e[x],I=e[x+1],R=e[x+2],M=e[x+3],N=f.createElement("rect"),F=(R-t)/d,B=(s-I)/h,H=(P-R)/d,K=(I-M)/h;N.setAttribute("x",F),N.setAttribute("y",B),N.setAttribute("width",H),N.setAttribute("height",K),b.append(N),l?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${B}" width="${H}" height="${K}"/>`)}this.#t&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(m),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=this.#n=new db({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){rn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:l}of i){if(s===-1||o===t)continue;const d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!_u.has(h)){vt(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:d,domElement:h})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&_u.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class HM extends kn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){vt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:s,include:o}=t,l=[];if(i.length!==0||s.length!==0){const f=new Set(s);for(const m of i){const v=this._fieldObjects[m]||[];for(const{id:b}of v)f.add(b)}for(const m of Object.values(this._fieldObjects))for(const v of m)f.has(v.id)===o&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const d=this.annotationStorage,h=[];for(const f of l){const{id:m}=f;switch(h.push(m),f.type){case"text":{const b=f.defaultValue||"";d.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;d.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";d.setValue(m,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!_u.has(v)){vt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class vX extends kn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Mu extends kn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Hr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(e,t,r,i){for(const[s,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":We.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||mX,s=e.style;let o;const l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(h/(r_*i))||1,m=h/f;o=Math.min(i,d(m/r_))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,d(h/r_))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=We.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class yX extends Mu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let s=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const d={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",l??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),_u.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=Fm,this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue??"";r.value=d.userValue=m,d.formattedValue=null});let h=f=>{const{formattedValue:m}=d;m!=null&&(f.target.value=m),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",m=>{if(d.focused)return;const{target:v}=m;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const v={value(b){d.userValue=b.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:S}=b.detail;d.formattedValue=S,S!=null&&b.target!==document.activeElement&&(b.target.value=S),e.setValue(t,{formattedValue:S})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:S}=b.detail,{target:x}=b;if(S===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",S);let C=d.userValue;!C||C.length<=S||(C=C.slice(0,S),x.value=d.userValue=C,e.setValue(t,{value:C}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("keydown",m=>{d.commitKey=1;let v=-1;if(m.key==="Escape"?v=0:m.key==="Enter"&&!this.data.multiLine?v=2:m.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:b}=m.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const f=h;h=null,r.addEventListener("blur",m=>{if(!d.focused||!m.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=m.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}),f(m)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",m=>{d.lastCommittedValue=null;const{data:v,target:b}=m,{value:S,selectionStart:x,selectionEnd:C}=b;let P=x,I=C;switch(m.inputType){case"deleteWordBackward":{const R=S.substring(0,x).match(/\w*[^\w]*$/);R&&(P-=R[0].length);break}case"deleteWordForward":{const R=S.substring(x).match(/^[^\w]*\w*/);R&&(I+=R[0].length);break}case"deleteContentBackward":x===C&&(P-=1);break;case"deleteContentForward":x===C&&(I+=1);break}m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:P,selEnd:I}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wX extends Mu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class _X extends Mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return _u.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Fm,s.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const h of this._getElementsByName(l,r)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(r,{value:d})}),s.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(r,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class qM extends Mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(_u.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=Fm,s.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const h of this._getElementsByName(l,r))e.setValue(h.id,{value:!1});e.setValue(r,{value:d})}),s.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",l=>{const d={value:h=>{const f=o===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const v=f&&m.id===r;m.domElement&&(m.domElement.checked=v),e.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class bX extends HM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class xX extends Mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");_u.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Fm;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,r.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),s=!1),i.append(m)}let o=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=f=>{const m=f?"value":"textContent",{options:v,multiple:b}=i;return b?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=l(!1);const h=f=>{const m=f.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const m={value(v){o?.();const b=v.detail.value,S=new Set(Array.isArray(b)?b:[b]);for(const x of i.options)x.selected=S.has(x.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(v){i.multiple=!0},remove(v){const b=i.options,S=v.detail.remove;b[S].selected=!1,i.remove(S),b.length>0&&Array.prototype.findIndex.call(b,C=>C.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},clear(v){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(v){const{index:b,displayValue:S,exportValue:x}=v.detail.insert,C=i.children[b],P=document.createElement("option");P.textContent=S,P.value=x,C?C.before(P):i.append(P),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},items(v){const{items:b}=v.detail;for(;i.length!==0;)i.remove(0);for(const S of b){const{displayValue:x,exportValue:C}=S,P=document.createElement("option");P.textContent=x,P.value=C,i.append(P)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},indices(v){const b=new Set(v.detail.indices);for(const S of v.target.options)S.selected=b.has(S.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("input",f=>{const m=l(!0),v=l(!1);e.setValue(t,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class db extends kn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:kn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new SX({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${Bx}${r}`).join(",")),this.container}}class SX{#e=this.#N.bind(this);#t=this.#T.bind(this);#n=this.#E.bind(this);#i=this.#b.bind(this);#s=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#v=null;#g=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:l,parent:d,rect:h,parentRect:f,open:m}){this.#r=e,this.#g=i,this.#l=o,this.#v=l,this.#a=d,this.#s=t,this.#f=h,this.#d=f,this.#u=r,this.#c=CM.toDateObject(s),this.trigger=r.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#i),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#t),v.classList.add("popupTriggerArea");for(const v of r)v.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,m&&this.#b()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#s){const s=e.style.outlineColor=We.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=We.makeHexColor(...this.#s.map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#c){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}const i=this.#_;if(i)WM.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#r.append(e)}get#_(){const e=this.#v,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#v.html||null}get#C(){return this.#_?.attributes?.style?.fontSize||0}get#S(){return this.#_?.attributes?.style?.color||null}#A(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#S,fontSize:this.#C?`calc(${this.#C}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){const l=i[s];r.append(document.createTextNode(l)),s<o-1&&r.append(document.createElement("br"))}return r}#N(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#b()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#v},e&&(this.#p=null),t&&(this.#v=this.#A(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#v}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#k(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#a;let o=!!this.#d,l=o?this.#d:this.#f;for(const S of this.#u)if(!l||We.intersect(S.data.rect,l)!==null){l=S.data.rect,o=!0;break}const d=We.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=o?l[2]-l[0]+5:0,m=d[0]+f,v=d[1];this.#p=[100*(m-i)/t,100*(v-s)/r];const{style:b}=this.#r;b.left=`${this.#p[0]}%`,b.top=`${this.#p[1]}%`}#b(){this.#o=!this.#o,this.#o?(this.#E(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#e)):(this.#T(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#e))}#E(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#T(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#r.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#E(),this.#y=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class GM extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class AX extends kn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=ka(e.rect),i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class EX extends kn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=ka(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",r-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class CX extends kn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=ka(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",r/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class KM extends kn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;const{width:s,height:o}=ka(e),l=this.svgFactory.create(s,o,!0);let d=[];for(let f=0,m=t.length;f<m;f+=2){const v=t[f]-e[0],b=e[3]-t[f+1];d.push(`${v},${b}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kX extends KM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class TX extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class tS extends kn{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:i}}=this,{width:s,height:o}=ka(e),l=this.svgFactory.create(s,o,!0);for(const d of t){let h=[];for(let m=0,v=d.length;m<v;m+=2){const b=d[m]-e[0],S=e[3]-d[m+1];h.push(`${b},${S}`)}h=h.join(" ");const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),l.append(f)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class YM extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class PX extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class RX extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class IX extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class XM extends kn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class MX extends kn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=Hr.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class DX{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:l}){this.div=e,this.#e=t,this.#t=r,this.#i=l||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#s(e,t){const r=e.firstChild||e,i=r.id=`${Bx}${t}`,s=await this.#i?.getAriaAttributes(i);if(s)for(const[o,l]of s)r.setAttribute(o,l);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;wu(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new eS,annotationStorage:e.annotationStorage||new Gx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===Vn.POPUP;if(l){const f=i.get(o.id);if(!f)continue;s.elements=f}else{const{width:f,height:m}=ka(o.rect);if(f<=0||m<=0)continue}s.data=o;const d=gX.create(s);if(!d.isRenderable)continue;if(!l&&o.popupRef){const f=i.get(o.popupRef);f?f.push(d):i.set(o.popupRef,[d])}const h=d.render();o.hidden&&(h.style.visibility="hidden"),await this.#s(h,o.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,wu(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const Vv=/\r\n?|\n/g;class Wn extends st{#e;#t="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Wn.prototype,t=s=>s.isEmpty(),r=jl.TRANSLATE_SMALL,i=jl.TRANSLATE_BIG;return At(this,"_keyboardManager",new jm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Wn._defaultColor||st._defaultLineColor,this.#s=e.fontSize||Wn._defaultFontSize}static initialize(e,t){st.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ot.FREETEXT_SIZE:Wn._defaultFontSize=t;break;case ot.FREETEXT_COLOR:Wn._defaultColor=t;break}}updateParams(e,t){switch(e){case ot.FREETEXT_SIZE:this.#r(t);break;case ot.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[ot.FREETEXT_SIZE,Wn._defaultFontSize],[ot.FREETEXT_COLOR,Wn._defaultColor||st._defaultLineColor]]}get propertiesToUpdate(){return[[ot.FREETEXT_SIZE,this.#s],[ot.FREETEXT_COLOR,this.#e]]}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#u()},r=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Wn._internalPadding*e,-(Wn._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(mt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Wn.#a(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,o=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=i=>{if(this.#t=i,!i){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Wn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ay(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,d]=this.getInitialTranslation();[l,d]=this.pageTranslationToScreen(l,d);const[h,f]=this.pageDimensions,[m,v]=this.pageTranslation;let b,S;switch(this.rotation){case 0:b=e+(o[0]-m)/h,S=t+this.height-(o[1]-v)/f;break;case 90:b=e+(o[0]-m)/h,S=t-(o[1]-v)/f,[l,d]=[d,-l];break;case 180:b=e-this.width+(o[0]-m)/h,S=t-(o[1]-v)/f,[l,d]=[-l,-d];break;case 270:b=e+(o[0]-m-this.height*f)/h,S=t+(o[1]-v-this.width*h)/f,[l,d]=[-d,l];break}this.setAt(b*i,S*s,l,d)}else this.setAt(e*i,t*s,this.width*i,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Vv,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=Wn.#h(t.getData("text")||"").replaceAll(Vv,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:d}=o,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const b=l.parentElement;if(f.push(l.nodeValue.slice(d).replaceAll(Vv,"")),b!==this.editorDiv){let S=h;for(const x of this.editorDiv.childNodes){if(x===b){S=f;continue}S.push(Wn.#a(x))}}h.push(l.nodeValue.slice(0,d).replaceAll(Vv,""))}else if(l===this.editorDiv){let b=h,S=0;for(const x of this.editorDiv.childNodes)S++===d&&(b=f),b.push(Wn.#a(x))}this.#t=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#d();const m=new Range;let v=h.reduce((b,S)=>b+S.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const S=b.nodeValue.length;if(v<=S){m.setStart(b,v),m.setEnd(b,v);break}v-=S}s.removeAllRanges(),s.addRange(m)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll(" "," ")}static#h(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof GM){const{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:d,rotation:h,id:f,popupRef:m},textContent:v,textPosition:b,parent:{page:{pageNumber:S}}}=e;if(!v||v.length===0)return null;i=e={annotationType:mt.FREETEXT,color:Array.from(l),fontSize:o,value:v.join(`
`),position:b,pageIndex:S-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:m}}const s=await super.deserialize(e,t,r);return s.#s=e.fontSize,s.#e=We.makeHexColor(...e.color),s.#t=Wn.#h(e.value),s.annotationElementId=e.id||null,s._initialData=i,s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Wn._internalPadding*this.parentScale,r=this.getRect(t,t),i=st._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:mt.FREETEXT,color:i,fontSize:this.#s,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){const{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((o,l)=>o!==i[l])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const s of this.#t.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}const i=Wn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ZM{toSVGPath(){rn("Abstract method `toSVGPath` must be implemented.")}get box(){rn("Abstract getter `box` must be implemented.")}serialize(e,t){rn("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){rn("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){rn("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class lu{#e;#t=[];#n;#i;#s=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#v=lu.#p+lu.#f;constructor({x:e,y:t},r,i,s,o,l=0){this.#e=r,this.#o=s*i,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=l,this.#a=lu.#p*i,this.#u=lu.#v*i,this.#d=i,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[r,i,s,o]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/s,(this.#c+(e[1]-t[1])/2-i)/o,(this.#l+(t[0]-e[0])/2-r)/s,(this.#c+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,i,s,o]=this.#e;let[l,d,h,f]=this.#r.subarray(8,12);const m=e-h,v=t-f,b=Math.hypot(m,v);if(b<this.#u)return!1;const S=b-this.#a,x=S/b,C=x*m,P=x*v;let I=l,R=d;l=h,d=f,h+=C,f+=P,this.#h?.push(e,t);const M=-P/S,N=C/S,F=M*this.#o,B=N*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+F,f+B],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-F,f-B],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([l+F,d+B],2),this.#s.push(NaN,NaN,NaN,NaN,(l+F-r)/s,(d+B-i)/o),this.#r.set([l-F,d-B],14),this.#t.push(NaN,NaN,NaN,NaN,(l-F-r)/s,(d-B-i)/o)),this.#r.set([I,R,l,d,h,f],6),!this.isEmpty()):(this.#r.set([I,R,l,d,h,f],6),Math.abs(Math.atan2(R-d,I-l)-Math.atan2(P,C))<Math.PI/2?([l,d,h,f]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((l+h)/2-r)/s,((d+f)/2-i)/o),[l,d,I,R]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((I+l)/2-r)/s,((R+d)/2-i)/o),!0):([I,R,l,d,h,f]=this.#r.subarray(0,6),this.#s.push(((I+5*l)/6-r)/s,((R+5*d)/6-i)/o,((5*l+h)/6-r)/s,((5*d+f)/6-i)/o,((l+h)/2-r)/s,((d+f)/2-i)/o),[h,f,l,d,I,R]=this.#r.subarray(12,18),this.#t.push(((I+5*l)/6-r)/s,((R+5*d)/6-i)/o,((5*l+h)/6-r)/s,((5*d+f)/6-i)/o,((l+h)/2-r)/s,((d+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#_(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(r),r.join(" ")}#m(){const[e,t,r,i]=this.#e,[s,o,l,d]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-t)/i} L${(this.#r[4]-e)/r} ${(this.#r[5]-t)/i} L${s} ${o} L${l} ${d} L${(this.#r[16]-e)/r} ${(this.#r[17]-t)/i} L${(this.#r[14]-e)/r} ${(this.#r[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#_(e){const[t,r,i,s]=this.#e,o=this.#r.subarray(4,6),l=this.#r.subarray(16,18),[d,h,f,m]=this.#g();e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${d} ${h} L${f} ${m} L${(l[0]-t)/i} ${(l[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,o){return new JM(e,t,r,i,s,o)}getOutlines(){const e=this.#s,t=this.#t,r=this.#r,[i,s,o,l]=this.#e,d=new Float64Array((this.#h?.length??0)+2);for(let m=0,v=d.length-2;m<v;m+=2)d[m]=(this.#h[m]-i)/o,d[m+1]=(this.#h[m+1]-s)/l;if(d[d.length-2]=(this.#l-i)/o,d[d.length-1]=(this.#c-s)/l,isNaN(r[6])&&!this.isEmpty())return this.#C(d);const h=new Float64Array(this.#s.length+24+this.#t.length);let f=e.length;for(let m=0;m<f;m+=2){if(isNaN(e[m])){h[m]=h[m+1]=NaN;continue}h[m]=e[m],h[m+1]=e[m+1]}f=this.#A(h,f);for(let m=t.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(t[m+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[m+v],h[f+1]=t[m+v+1],f+=2}return this.#S(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#d,this.#n,this.#i)}#C(e){const t=this.#r,[r,i,s,o]=this.#e,[l,d,h,f]=this.#g(),m=new Float64Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(m,e,this.#e,this.#d,this.#n,this.#i)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#A(e,t){const r=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,o,l,d]=this.#e,[h,f,m,v]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-o)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-o)/d],t),t+=24}}class JM extends ZM{#e;#t=null;#n;#i;#s;#r;#l;constructor(e,t,r,i,s,o){super(),this.#l=e,this.#s=t,this.#e=r,this.#r=i,this.#n=s,this.#i=o,this.#a(o);const{x:l,y:d,width:h,height:f}=this.#t;for(let m=0,v=e.length;m<v;m+=2)e[m]=(e[m]-l)/h,e[m+1]=(e[m+1]-d)/f;for(let m=0,v=t.length;m<v;m+=2)t[m]=(t[m]-l)/h,t[m+1]=(t[m+1]-d)/f}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){const o=r-e,l=i-t;let d,h;switch(s){case 0:d=this.#c(this.#l,e,i,o,-l),h=this.#c(this.#s,e,i,o,-l);break;case 90:d=this.#u(this.#l,e,t,o,l),h=this.#u(this.#s,e,t,o,l);break;case 180:d=this.#c(this.#l,r,t,-o,l),h=this.#c(this.#s,r,t,-o,l);break;case 270:d=this.#u(this.#l,r,i,-o,-l),h=this.#u(this.#s,r,i,-o,-l);break}return{outline:Array.from(d),points:[Array.from(h)]}}#c(e,t,r,i,s){const o=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l]*i,o[l+1]=r+e[l+1]*s;return o}#u(e,t,r,i,s){const o=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l+1]*i,o[l+1]=r+e[l]*s;return o}#a(e){const t=this.#l;let r=t[4],i=t[5],s=r,o=i,l=r,d=i,h=r,f=i;const m=e?Math.max:Math.min;for(let C=6,P=t.length;C<P;C+=6){if(isNaN(t[C]))s=Math.min(s,t[C+4]),o=Math.min(o,t[C+5]),l=Math.max(l,t[C+4]),d=Math.max(d,t[C+5]),f<t[C+5]?(h=t[C+4],f=t[C+5]):f===t[C+5]&&(h=m(h,t[C+4]));else{const I=We.bezierBoundingBox(r,i,...t.slice(C,C+6));s=Math.min(s,I[0]),o=Math.min(o,I[1]),l=Math.max(l,I[2]),d=Math.max(d,I[3]),f<I[3]?(h=I[2],f=I[3]):f===I[3]&&(h=m(h,I[2]))}r=t[C+4],i=t[C+5]}const v=s-this.#n,b=o-this.#n,S=l-s+2*this.#n,x=d-o+2*this.#n;this.#t={x:v,y:b,width:S,height:x,lastPoint:[h,f]}}get box(){return this.#t}newOutliner(e,t,r,i,s,o=0){return new lu(e,t,r,i,s,o)}getNewOutline(e,t){const{x:r,y:i,width:s,height:o}=this.#t,[l,d,h,f]=this.#e,m=s*h,v=o*f,b=r*h+l,S=i*f+d,x=this.newOutliner({x:this.#s[0]*m+b,y:this.#s[1]*v+S},this.#e,this.#r,e,this.#i,t??this.#n);for(let C=2;C<this.#s.length;C+=2)x.add({x:this.#s[C]*m+b,y:this.#s[C+1]*v+S});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class qC{#e;#t=[];#n=[];constructor(e,t=0,r=0,i=!0){let s=1/0,o=-1/0,l=1/0,d=-1/0;const h=10**-4;for(const{x:C,y:P,width:I,height:R}of e){const M=Math.floor((C-t)/h)*h,N=Math.ceil((C+I+t)/h)*h,F=Math.floor((P-t)/h)*h,B=Math.ceil((P+R+t)/h)*h,H=[M,F,B,!0],K=[N,F,B,!1];this.#t.push(H,K),s=Math.min(s,M),o=Math.max(o,N),l=Math.min(l,F),d=Math.max(d,B)}const f=o-s+2*r,m=d-l+2*r,v=s-r,b=l-r,S=this.#t.at(i?-1:-2),x=[S[0],S[2]];for(const C of this.#t){const[P,I,R]=C;C[0]=(P-v)/f,C[1]=(I-b)/m,C[2]=(R-b)/m}this.#e={x:v,y:b,width:f,height:m,lastPoint:x}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#r(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const o of e){const[l,d,h]=o;t.push([l,d,o],[l,h,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const d=t[o][2],h=t[o+1][2];d.push(h),h.push(d),r.add(d),r.add(h)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[l,d,h,f,m]=o;r.delete(o);let v=l,b=d;for(s=[l,h],i.push(s);;){let S;if(r.has(f))S=f;else if(r.has(m))S=m;else break;r.delete(S),[l,d,h,f,m]=S,v!==l&&(s.push(v,b,l,b===d?d:h),v=l),b=b===d?h:d}s.push(v,b)}return new OX(i,this.#e)}#s(e){const t=this.#n;let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1}#r([,e,t]){const r=this.#s(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#s(e);for(let i=r;i<this.#n.length;i++){const[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}}#c(e){const[t,r,i]=e,s=[[t,r,i]],o=this.#s(i);for(let l=0;l<o;l++){const[d,h]=this.#n[l];for(let f=0,m=s.length;f<m;f++){const[,v,b]=s[f];if(!(h<=v||b<=d)){if(v>=d){if(b>h)s[f][1]=h;else{if(m===1)return[];s.splice(f,1),f--,m--}continue}s[f][2]=d,b>h&&s.push([t,h,b])}}}return s}}class OX extends ZM{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){const o=t[s],l=t[s+1];o===r?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){const o=[],l=r-e,d=i-t;for(const h of this.#t){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=e+h[m]*l,f[m+1]=i-h[m+1]*d;o.push(f)}return o}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class hb extends lu{newFreeDrawOutline(e,t,r,i,s,o){return new NX(e,t,r,i,s,o)}get classNamesForDrawing(){return["highlight","free"]}}class NX extends JM{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,i,s,o=0){return new hb(e,t,r,i,s,o)}}class ls{#e=null;#t=null;#n;#i=null;#s=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return At(this,"_keyboardManager",new jm([[["Escape","mac+Escape"],ls.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ls.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ls.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ls.prototype._moveToPrevious],[["Home","mac+Home"],ls.prototype._moveToBeginning],[["End","mac+End"],ls.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#d=ot.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#d=ot.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",ls.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#v.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",us,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of this.#a.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",ls.#o[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#p.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#v(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#v(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#v(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#v(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#v(e);return}this.#i.lastChild?.focus()}#f(e){ls._keyboardManager.exec(this,e)}#v(e){if(this.#m){this.hideDropdown();return}if(this.#s=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const t=this.#i=this.#h();this.#e.append(t)}#g(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#a.highlightColors.values();for(const r of this.#i.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class An extends st{#e=null;#t=0;#n;#i=null;#s=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#v="";#g;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=An.prototype;return At(this,"_keyboardManager",new jm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||An._defaultColor,this.#g=e.thickness||An._defaultThickness,this.#p=e.opacity||An._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#v=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#_(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new qC(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;const t=new qC(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:r}=this.#r.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;const i=1.5;if(this.#r=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#d=t,this.#i=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,An.#b(this.#a.box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,An.#b(this.#r.box,f))}const{x:s,y:o,width:l,height:d}=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=d;break;case 90:{const[f,m]=this.parentDimensions;this.x=o,this.y=1-s,this.width=l*m/f,this.height=d*f/m;break}case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=d;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-o,this.y=s,this.width=l*m/f,this.height=d*f/m;break}}const{lastPoint:h}=this.#r.box;this.#h=[(h[0]-s)/l,(h[1]-o)/d]}static initialize(e,t){st.initialize(e,t),An._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case ot.HIGHLIGHT_DEFAULT_COLOR:An._defaultColor=t;break;case ot.HIGHLIGHT_THICKNESS:An._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case ot.HIGHLIGHT_COLOR:this.#C(t);break;case ot.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[ot.HIGHLIGHT_DEFAULT_COLOR,An._defaultColor],[ot.HIGHLIGHT_THICKNESS,An._defaultThickness]]}get propertiesToUpdate(){return[[ot.HIGHLIGHT_COLOR,this.color||An._defaultColor],[ot.HIGHLIGHT_THICKNESS,this.#g||An._defaultThickness],[ot.HIGHLIGHT_FREE,this.#o]]}#C(e){const t=(s,o)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#s?.updateColor(s),this.#p=o,this.parent?.drawLayer.changeOpacity(this.#d,o)},r=this.color,i=this.#p;this.addCommands({cmd:t.bind(this,e,An._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,r=i=>{this.#g=i,this.#A(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#s=new ls({editor:this}),e.addColorPicker(this.#s)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#N(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#N():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#o)return;this.#_({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#N(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#i))}static#b({x:e,y:t,width:r,height:i},s){switch(s){case 90:return{x:1-t-i,y:e,width:i,height:r};case 180:return{x:1-e-r,y:1-t-i,width:r,height:i};case 270:return{x:t,y:1-e-r,width:i,height:r}}return{x:e,y:t,width:r,height:i}}rotate(e){const{drawLayer:t}=this.parent;let r;this.#o?(e=(e-this.rotation+360)%360,r=An.#b(this.#a.box,e)):r=An.#b(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,An.#b(this.#r.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#v&&(e.setAttribute("aria-label",this.#v),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#E.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Ay(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#E(e){An._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#T(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#M(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8);let l=0;for(const{x:d,y:h,width:f,height:m}of s){const v=d*e+r,b=(1-h-m)*t+i;o[l]=o[l+4]=v,o[l+1]=o[l+3]=b,o[l+2]=o[l+6]=v+f*e,o[l+5]=o[l+7]=b+m*t,l+=8}return o}#x(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:i,y:s}){const{x:o,y:l,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,m=e.combinedSignal(f),v=S=>{S.preventDefault(),S.stopPropagation()},b=S=>{f.abort(),this.#D(e,S)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",us,{signal:m}),r.addEventListener("pointermove",this.#w.bind(this,e),{signal:m}),this._freeHighlight=new hb({x:i,y:s},[o,l,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof YM){const{data:{quadPoints:S,rect:x,rotation:C,id:P,color:I,opacity:R,popupRef:M},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:mt.HIGHLIGHT,color:Array.from(I),opacity:R,quadPoints:S,boxes:null,pageIndex:N-1,rect:x.slice(0),rotation:C,id:P,deleted:!1,popupRef:M}}else if(e instanceof tS){const{data:{inkLists:S,rect:x,rotation:C,id:P,color:I,borderStyle:{rawWidth:R},popupRef:M},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:mt.HIGHLIGHT,color:Array.from(I),thickness:R,inkLists:S,boxes:null,pageIndex:N-1,rect:x.slice(0),rotation:C,id:P,deleted:!1,popupRef:M}}const{color:s,quadPoints:o,inkLists:l,opacity:d}=e,h=await super.deserialize(e,t,r);h.color=We.makeHexColor(...s),h.#p=d||1,l&&(h.#g=e.thickness),h.annotationElementId=e.id||null,h._initialData=i;const[f,m]=h.pageDimensions,[v,b]=h.pageTranslation;if(o){const S=h.#n=[];for(let x=0;x<o.length;x+=8)S.push({x:(o[x]-v)/f,y:1-(o[x+1]-b)/m,width:(o[x+2]-o[x])/f,height:(o[x+1]-o[x+5])/m});h.#y(),h.#k(),h.rotate(h.rotation)}else if(l){h.#o=!0;const S=l[0],x={x:S[0]-v,y:m-(S[1]-b)},C=new hb(x,[0,0,f,m],1,h.#g/2,!0,.001);for(let R=0,M=S.length;R<M;R+=2)x.x=S[R]-v,x.y=m-(S[R+1]-b),C.add(x);const{id:P,clipPathId:I}=t.drawLayer.draw(C,h.color,h._defaultOpacity,!0);h.#_({highlightOutlines:C.getOutlines(),highlightId:P,clipPathId:I}),h.#k()}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=st._colorManager.convert(this.color),i={annotationType:mt.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#g,quadPoints:this.#M(),outlines:this.#x(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(i)?null:(i.id=this.annotationElementId,i)}#O(e){const{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class gr extends st{#e=0;#t=0;#n=null;#i=new Path2D;#s=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=mt.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){st.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case ot.INK_THICKNESS:gr._defaultThickness=t;break;case ot.INK_COLOR:gr._defaultColor=t;break;case ot.INK_OPACITY:gr._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case ot.INK_THICKNESS:this.#p(t);break;case ot.INK_COLOR:this.#f(t);break;case ot.INK_OPACITY:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[ot.INK_THICKNESS,gr._defaultThickness],[ot.INK_COLOR,gr._defaultColor||st._defaultLineColor],[ot.INK_OPACITY,Math.round(gr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ot.INK_THICKNESS,this.thickness||gr._defaultThickness],[ot.INK_COLOR,this.color||gr._defaultColor||st._defaultLineColor],[ot.INK_OPACITY,Math.round(100*(this.opacity??gr._defaultOpacity))]]}#p(e){const t=i=>{this.thickness=i,this.#R()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=i=>{this.color=i,this.#b()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(e){const t=i=>{this.opacity=i,this.#b()};e/=100;const r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#M(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#w()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,r=this.width*e,i=this.height*t;this.setDimensions(r,i)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#E())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#T())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#g(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:i,parentScale:s,scaleFactor:o}=this;e.lineWidth=i*s/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${rY(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",us,{signal:this._uiManager._signal}),this.#T(),this.#r=new AbortController;const r=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#w(),this.thickness||=gr._defaultThickness,this.color||=gr._defaultColor||st._defaultLineColor,this.opacity??=gr._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#A(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#_(e,t){const[r,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===i)return;const s=this.currentPath;let o=this.#i;if(s.push([e,t]),this.#l=!0,s.length<=2){o.moveTo(...s[0]),o.lineTo(e,t);return}s.length===3&&(this.#i=o=new Path2D,o.moveTo(...s[0])),this.#N(o,...s.at(-3),...s.at(-2),e,t)}#C(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#_(e,t),this.#C();let r;if(this.currentPath.length!==1)r=this.#k();else{const d=[e,t];r=[[d,d.slice(),d.slice(),d]]}const i=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D;const o=()=>{this.allRawPaths.push(s),this.paths.push(r),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#M(),this.#x()),this.#R())};this.addCommands({cmd:o,undo:l,mustExec:!0})}#A(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(o=>o[0]),i=t.map(o=>o[1]);Math.min(...r)-e,Math.max(...r)+e,Math.min(...i)-e,Math.max(...i)+e;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)s.stroke(o);s.stroke(this.#i),s.restore()}#N(e,t,r,i,s,o,l){const d=(t+i)/2,h=(r+s)/2,f=(i+o)/2,m=(s+l)/2;e.bezierCurveTo(d+2*(i-d)/3,h+2*(s-h)/3,f+2*(i-f)/3,m+2*(s-m)/3,f,m)}#k(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[i,s]=e[0];for(r=1;r<e.length-2;r++){const[v,b]=e[r],[S,x]=e[r+1],C=(v+S)/2,P=(b+x)/2,I=[i+2*(v-i)/3,s+2*(b-s)/3],R=[C+2*(v-C)/3,P+2*(b-P)/3];t.push([[i,s],I,R,[C,P]]),[i,s]=[C,P]}const[o,l]=e[r],[d,h]=e[r+1],f=[i+2*(o-i)/3,s+2*(l-s)/3],m=[d+2*(o-d)/3,h+2*(l-h)/3];return t.push([[i,s],f,m,[d,h]]),t}#b(){if(this.isEmpty()){this.#O();return}this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#O();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#R(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#E(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#T(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#_(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#r?.abort(),this.#r=null,this.#E(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",us)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#M(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,i,s,o]=this.#g();if(this.setAt(r,i,0,0),this.setDims(s,o),this.#M(),this.width){const[l,d]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*d),this.setAt(e*l,t*d,this.width*l,this.height*d),this.#c=!0,this.#w(),this.setDims(this.width*l,this.height*d),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#w(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#O()}setDimensions(e,t){const r=Math.round(e),i=Math.round(t);if(this.#d===r&&this.#o===i)return;this.#d=r,this.#o=i,this.canvas.style.visibility="hidden";const[s,o]=this.parentDimensions;this.width=e/s,this.height=t/o,this.fixAndSetPosition(),this.#s&&this.#D(e,t),this.#w(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#D(e,t){const r=this.#B(),i=(e-r)/this.#t,s=(t-r)/this.#e;this.scaleFactor=Math.min(i,s)}#O(){const e=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let r=0,i=e.length;r<i;r++){const[s,o,l,d]=e[r];r===0&&t.moveTo(...s),t.bezierCurveTo(o[0],o[1],l[0],l[1],d[0],d[1])}return t}static#U(e,t,r){const[i,s,o,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]+=i,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]+i,e[d+1]=f+s}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=o-e[d],e[d+1]+=s;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=o-e[d+1],e[d+1]=l-f}break;default:throw new Error("Invalid rotation")}return e}static#$(e,t,r){const[i,s,o,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]-=i,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]-s,e[d+1]=f-i}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=o-e[d],e[d+1]-=s;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=l-e[d+1],e[d+1]=o-f}break;default:throw new Error("Invalid rotation")}return e}#j(e,t,r,i){const s=[],o=this.thickness/2,l=e*t+o,d=e*r+o;for(const h of this.paths){const f=[],m=[];for(let v=0,b=h.length;v<b;v++){const[S,x,C,P]=h[v];if(S[0]===P[0]&&S[1]===P[1]&&b===1){const le=e*S[0]+l,me=e*S[1]+d;f.push(le,me),m.push(le,me);break}const I=e*S[0]+l,R=e*S[1]+d,M=e*x[0]+l,N=e*x[1]+d,F=e*C[0]+l,B=e*C[1]+d,H=e*P[0]+l,K=e*P[1]+d;v===0&&(f.push(I,R),m.push(I,R)),f.push(M,N,F,B,H,K),m.push(M,N),v===b-1&&m.push(H,K)}s.push({bezier:gr.#U(f,i,this.rotation),points:gr.#U(m,i,this.rotation)})}return s}#F(){let e=1/0,t=-1/0,r=1/0,i=-1/0;for(const s of this.paths)for(const[o,l,d,h]of s){const f=We.bezierBoundingBox(...o,...l,...d,...h);e=Math.min(e,f[0]),r=Math.min(r,f[1]),t=Math.max(t,f[2]),i=Math.max(i,f[3])}return[e,r,t,i]}#B(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#R(e=!1){if(this.isEmpty())return;if(!this.#s){this.#b();return}const t=this.#F(),r=this.#B();this.#t=Math.max(st.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(st.MIN_SIZE,t[3]-t[1]);const i=Math.ceil(r+this.#t*this.scaleFactor),s=Math.ceil(r+this.#e*this.scaleFactor),[o,l]=this.parentDimensions;this.width=i/o,this.height=s/l,this.setAspectRatio(i,s);const d=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#w(),this.#b(),this.#d=i,this.#o=s,this.setDims(i,s);const f=e?r/this.scaleFactor/2:0;this.translate(d-this.translationX-f,h-this.translationY-f)}static async deserialize(e,t,r){if(e instanceof tS)return null;const i=await super.deserialize(e,t,r);i.thickness=e.thickness,i.color=We.makeHexColor(...e.color),i.opacity=e.opacity;const[s,o]=i.pageDimensions,l=i.width*s,d=i.height*o,h=i.parentScale,f=e.thickness/2;i.#s=!0,i.#d=Math.round(l),i.#o=Math.round(d);const{paths:m,rect:v,rotation:b}=e;for(let{bezier:x}of m){x=gr.#$(x,v,b);const C=[];i.paths.push(C);let P=h*(x[0]-f),I=h*(x[1]-f);for(let M=2,N=x.length;M<N;M+=6){const F=h*(x[M]-f),B=h*(x[M+1]-f),H=h*(x[M+2]-f),K=h*(x[M+3]-f),le=h*(x[M+4]-f),me=h*(x[M+5]-f);C.push([[P,I],[F,B],[H,K],[le,me]]),P=le,I=me}const R=this.#L(C);i.bezierPath2D.push(R)}const S=i.#F();return i.#t=Math.max(st.MIN_SIZE,S[2]-S[0]),i.#e=Math.max(st.MIN_SIZE,S[3]-S[1]),i.#D(l,d),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=st._colorManager.convert(this.ctx.strokeStyle);return{annotationType:mt.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class nS extends st{#e=null;#t=null;#n=null;#i=null;#s=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#s=e.bitmapFile}static initialize(e,t){st.initialize(e,t)}static get supportedTypes(){return At(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return At(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(mt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:s,height:o,channels:i.length/(s*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const d=l.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#o(i)).finally(()=>this.#h());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#o(i)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=nS.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>o*i||r>o*s){const f=Math.min(o*i/t,o*s/r);t*=f,r*=f}const[l,d]=this.parentDimensions;this.setDims(t*l/i,r*d/s),this._uiManager.enableWaiting(!1);const h=this.#l=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#_(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&h.setAttribute("aria-label",this.#r)}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:s}=this.#e,o=new ob;let l=this.#e,d=i,h=s,f=null;if(t){if(i>t||s>t){const F=Math.min(t/i,t/s);d=Math.floor(i*F),h=Math.floor(s*F)}f=document.createElement("canvas");const v=f.width=Math.ceil(d*o.sx),b=f.height=Math.ceil(h*o.sy);this.#a||(l=this.#g(v,b));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let x="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",C="#42414d");const P=15,I=P*o.sx,R=P*o.sy,M=new OffscreenCanvas(I*2,R*2),N=M.getContext("2d");N.fillStyle=x,N.fillRect(0,0,I*2,R*2),N.fillStyle=C,N.fillRect(0,0,I,R),N.fillRect(I,R,I,R),S.fillStyle=S.createPattern(M,"repeat"),S.fillRect(0,0,v,b),S.drawImage(l,0,0,l.width,l.height,0,0,v,b)}let m=null;if(r){let v,b;if(o.symmetric&&l.width<e&&l.height<e)v=l.width,b=l.height;else if(l=this.#e,i>e||s>e){const C=Math.min(e/i,e/s);v=Math.floor(i*C),b=Math.floor(s*C),this.#a||(l=this.#g(v,b))}const x=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,v,b),m={width:v,height:b,data:x.getImageData(0,0,v,b).data}}return{canvas:f,width:d,height:h,imageData:m}}#v(e,t){const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const s=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},s)}#g(e,t){const{width:r,height:i}=this.#e;let s=r,o=i,l=this.#e;for(;s>2*e||o>2*t;){const d=s,h=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(s,o);f.getContext("2d").drawImage(l,0,0,d,h,0,0,s,o),l=f.transferToImageBitmap()}return l}#m(e,t){const r=new ob,i=Math.ceil(e*r.sx),s=Math.ceil(t*r.sy),o=this.#l;if(!o||o.width===i&&o.height===s)return;o.width=i,o.height=s;const l=this.#a?this.#e:this.#g(i,s),d=o.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(l,0,0,l.width,l.height,0,0,i,s)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Bh.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*Bh.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}#_(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,r){let i=null;if(e instanceof XM){const{data:{rect:S,rotation:x,id:C,structParent:P,popupRef:I},container:R,parent:{page:{pageNumber:M}}}=e,N=R.querySelector("canvas"),F=r.imageManager.getFromCanvas(R.id,N);N.remove();const B=(await t._structTree.getAriaAttributes(`${Bx}${C}`))?.get("aria-label")||"";i=e={annotationType:mt.STAMP,bitmapId:F.id,bitmap:F.bitmap,pageIndex:M-1,rect:S.slice(0),rotation:x,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:B},isSvg:!1,structParent:P,popupRef:I}}const s=await super.deserialize(e,t,r),{rect:o,bitmap:l,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=e;h&&r.imageManager.isValidId(h)?(s.#t=h,l&&(s.#e=l)):s.#i=d,s.#a=f;const[v,b]=s.pageDimensions;return s.width=(o[2]-o[0])/v,s.height=(o[3]-o[1])/b,s.annotationElementId=e.id||null,m&&(s.altTextData=m),s._initialData=i,s.#d=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:mt.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=this.#C(r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const o=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){const l=t.stamps.get(this.#t);o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=this.#y(!1))}return r}#C(e){const{rect:t,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=e.rect.every((d,h)=>Math.abs(d-t[h])<1),o=e.pageIndex===r,l=(e.accessibilityData?.alt||"")===i;return{isSame:s&&o&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class xa{#e;#t=!1;#n=null;#i=null;#s=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Wn,gr,nS,An].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:l,textLayer:d,viewport:h,l10n:f}){const m=[...xa.#h.values()];if(!xa._initialized){xa._initialized=!0;for(const v of m)v.initialize(f,e)}e.registerEditorTypes(m),this.#o=e,this.pageIndex=t,this.div=r,this.#e=s,this.#n=o,this.viewport=h,this.#a=d,this.drawLayer=l,this._structTree=i,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===mt.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case mt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of xa.#h.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==mt.INK)return;if(!e){for(const r of this.#r.values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n)return;const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of this.#r.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const s of i){const{id:o}=s.data;if(this.#o.isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=e.get(o),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of xa.#h.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#a.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#a.div.contains(t)){const{isMac:r}=Hr.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),An.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),st.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return xa.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){const t=this.#f;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:r,offsetY:i}=this.#g(),s=this.getNextId(),o=this.#v({parent:this,id:s,x:r,y:i,uiManager:this.#o,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await xa.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...r});return s&&this.add(s),s}#g(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+r),d=Math.min(window.innerHeight,t+i),h=(s+l)/2-e,f=(o+d)/2-t,[m,v]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:m,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=Hr.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===mt.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Hr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(e,t,r){const i=this.#o.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,wu(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,wu(this.div,{rotation:r}),t!==r)for(const i of this.#r.values())i.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class Cr{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return At(this,"_svgFactory",new eS)}static#s(e,{x:t=0,y:r=0,width:i=1,height:s=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`}#r(e){const t=Cr._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),Cr.#s(t,e),t}#l(e,t){const r=Cr._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Cr._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}draw(e,t,r,i=!1){const s=this.#t++,o=this.#r(e.box);o.classList.add(...e.classNamesForDrawing);const l=Cr._svgFactory.createElement("defs");o.append(l);const d=Cr._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${s}`;d.setAttribute("id",h),d.setAttribute("d",e.toSVGPath()),i&&this.#i.set(s,d);const f=this.#l(l,h),m=Cr._svgFactory.createElement("use");return o.append(m),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),m.setAttribute("href",`#${h}`),this.#n.set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(e){const t=this.#t++,r=this.#r(e.box);r.classList.add(...e.classNamesForOutlining);const i=Cr._svgFactory.createElement("defs");r.append(i);const s=Cr._svgFactory.createElement("path");i.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.mustRemoveSelfIntersections){const f=Cr._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const m=Cr._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const v=Cr._svgFactory.createElement("use");f.append(v),v.setAttribute("href",`#${o}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=Cr._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${o}`),l&&d.setAttribute("mask",`url(#${l})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){Cr.#s(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var LX=ct.AbortException,jX=ct.AnnotationEditorLayer,FX=ct.AnnotationEditorParamsType,$X=ct.AnnotationEditorType,zX=ct.AnnotationEditorUIManager,BX=ct.AnnotationLayer,UX=ct.AnnotationMode,VX=ct.ColorPicker,WX=ct.DOMSVGFactory,HX=ct.DrawLayer,qX=ct.FeatureTest,QM=ct.GlobalWorkerOptions,GX=ct.ImageKind,KX=ct.InvalidPDFException,YX=ct.MissingPDFException,XX=ct.OPS,ZX=ct.OutputScale,JX=ct.PDFDataRangeTransport,QX=ct.PDFDateString,eZ=ct.PDFWorker,tZ=ct.PasswordResponses,nZ=ct.PermissionFlag,rZ=ct.PixelsPerInch,iZ=ct.RenderingCancelledException,sZ=ct.TextLayer,oZ=ct.UnexpectedResponseException,aZ=ct.Util,lZ=ct.VerbosityLevel,cZ=ct.XfaLayer,uZ=ct.build,dZ=ct.createValidAbsoluteUrl,hZ=ct.fetchData,fZ=ct.getDocument,pZ=ct.getFilenameFromUrl,mZ=ct.getPdfFilenameFromUrl,gZ=ct.getXfaPageViewport,vZ=ct.isDataScheme,yZ=ct.isPdfFile,wZ=ct.noContextMenu,_Z=ct.normalizeUnicode,bZ=ct.setLayerDimensions,xZ=ct.shadow,eD=ct.version;const XZ=Object.freeze(Object.defineProperty({__proto__:null,AbortException:LX,AnnotationEditorLayer:jX,AnnotationEditorParamsType:FX,AnnotationEditorType:$X,AnnotationEditorUIManager:zX,AnnotationLayer:BX,AnnotationMode:UX,ColorPicker:VX,DOMSVGFactory:WX,DrawLayer:HX,FeatureTest:qX,GlobalWorkerOptions:QM,ImageKind:GX,InvalidPDFException:KX,MissingPDFException:YX,OPS:XX,OutputScale:ZX,PDFDataRangeTransport:JX,PDFDateString:QX,PDFWorker:eZ,PasswordResponses:tZ,PermissionFlag:nZ,PixelsPerInch:rZ,RenderingCancelledException:iZ,TextLayer:sZ,UnexpectedResponseException:oZ,Util:aZ,VerbosityLevel:lZ,XfaLayer:cZ,build:uZ,createValidAbsoluteUrl:dZ,fetchData:hZ,getDocument:fZ,getFilenameFromUrl:pZ,getPdfFilenameFromUrl:mZ,getXfaPageViewport:gZ,isDataScheme:vZ,isPdfFile:yZ,noContextMenu:wZ,normalizeUnicode:_Z,setLayerDimensions:bZ,shadow:xZ,version:eD},Symbol.toStringTag,{value:"Module"}));QM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${eD}/pdf.worker.min.mjs`;DN.createRoot(document.getElementById("root")).render(y.jsx(lt.StrictMode,{children:y.jsx(aM,{children:y.jsx(W1,{children:y.jsx(NK,{})})})}));export{gi as $,X5 as A,Dt as B,PT as C,hm as D,bm as E,kl as F,Sm as G,zT as H,Vr as I,su as J,$8 as K,oH as L,OT as M,z8 as N,IR as O,$s as P,o7 as Q,lt as R,uH as S,rx as T,FT as U,GI as V,KI as W,YI as X,XI as Y,mi as Z,Br as _,J5 as a,RT as a$,Ur as a0,$t as a1,l7 as a2,yi as a3,ZI as a4,bM as a5,ht as a6,hH as a7,pH as a8,qZ as a9,dm as aA,kT as aB,TT as aC,ex as aD,jZ as aE,IT as aF,nk as aG,OZ as aH,Cp as aI,x3 as aJ,b3 as aK,_3 as aL,w3 as aM,Gh as aN,lH as aO,$E as aP,dH as aQ,VB as aR,UH as aS,Zv as aT,Hv as aU,GZ as aV,GB as aW,am as aX,tx as aY,zB as aZ,eH as a_,U9 as aa,Z1 as ab,Q5 as ac,Qb as ad,z_ as ae,AZ as af,qt as ag,sH as ah,s1 as ai,Ve as aj,hs as ak,RA as al,NT as am,Zp as an,eD as ao,QM as ap,DN as aq,NK as ar,Rx as as,LZ as at,rH as au,Z5 as av,LN as aw,fm as ax,Cu as ay,pm as az,L9 as b,Vy as b$,qB as b0,My as b1,nH as b2,Ml as b3,CU as b4,IA as b5,MZ as b6,IZ as b7,GT as b8,Tw as b9,Cy as bA,q8 as bB,Am as bC,G8 as bD,fZ as bE,aH as bF,tH as bG,sx as bH,Z_ as bI,cP as bJ,UR as bK,XZ as bL,UX as bM,sZ as bN,BX as bO,fb as bP,NZ as bQ,Ge as bR,Ky as bS,wP as bT,_P as bU,Yy as bV,gx as bW,Zy as bX,pu as bY,ox as bZ,Wy as b_,Sp as ba,Ap as bb,hU as bc,Uy as bd,Fh as be,Ro as bf,Ca as bg,it as bh,AP as bi,Vq as bj,Wq as bk,$e as bl,$i as bm,VZ as bn,i7 as bo,HZ as bp,s7 as bq,Et as br,WZ as bs,UI as bt,FZ as bu,VI as bv,WI as bw,HI as bx,BI as by,XH as bz,rt as c,bP as c0,xP as c1,hq as c2,pq as c3,mq as c4,vq as c5,yq as c6,_q as c7,wq as c8,gq as c9,nq as ca,AN as cb,KC as cc,G1 as cd,q1 as ce,RZ as cf,Y1 as cg,sy as ch,RU as ci,TU as cj,MU as ck,jU as cl,FU as cm,LU as cn,MT as co,nx as cp,jT as cq,X_ as cr,a1 as d,ds as e,qs as f,Rb as g,hn as h,sM as i,y as j,FL as k,jh as l,sr as m,cH as n,Vs as o,Y5 as p,Cx as q,A as r,xe as s,kx as t,Wh as u,Tx as v,Px as w,bI as x,wm as y,_m as z};
