import{c as Ye,f as de,h as We,r as o,s as N,j as e,Y as Xe,Z as Ze,$ as Je,a0 as ea,n as K,I as O,aV as aa,O as xe,aD as W,B as y,aC as be,a8 as me,k as sa,aa as ce,C as ze,ae as X,a7 as je,Q as fe,T as pe,V as ge,W as se,aj as ta,u as ra,as as oa,l as ia,ah as qe,cv as De,aY as Se,X as na}from"./index-B959_7_o.js";import{P as Ie,C as Te,D as la}from"./dnd.esm-CNSIsYfb.js";import{L as _e}from"./list-BWAYK6lC.js";import{M as Me}from"./message-square-DK6t4m6u.js";import{P as Pe}from"./palette-DYpEW6qD.js";import{C as Be}from"./check-square-B62HY2Cl.js";import{S as Ue}from"./square-Yty-hvSV.js";import{A as ve}from"./archive-DxXold_A.js";import{M as ca}from"./more-horizontal-rRStGP3z.js";import{A as da,a as ua,b as ma,c as ha,d as xa,e as fa,f as pa,g as ga,h as va}from"./alert-dialog-CMWSZjMP.js";import{T as Ae,a as ie,b as ne,c as le}from"./tooltip-Cwgo7U0h.js";import{S as he}from"./share-2-BzF6Ks-n.js";import{C as ba}from"./copy-BXl6xJ0E.js";import{U as ja}from"./upload-CdVbUmbv.js";import"./defineProperty-C-ST8_Gu.js";import"./extends-CF3RwP-h.js";import"./tiny-invariant-CopsF_GD.js";const wa=Ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Na=[{name:"Azul",value:"#3b82f6",bg:"bg-blue-500"},{name:"Verde",value:"#10b981",bg:"bg-green-500"},{name:"Vermelho",value:"#ef4444",bg:"bg-red-500"},{name:"Amarelo",value:"#f59e0b",bg:"bg-yellow-500"},{name:"Roxo",value:"#8b5cf6",bg:"bg-purple-500"},{name:"Rosa",value:"#ec4899",bg:"bg-pink-500"},{name:"Laranja",value:"#f97316",bg:"bg-orange-500"},{name:"Cinza",value:"#6b7280",bg:"bg-gray-500"}],Ee=[{name:"Verde",value:"#10b981",textColor:"#ffffff"},{name:"Azul",value:"#3b82f6",textColor:"#ffffff"},{name:"Vermelho",value:"#ef4444",textColor:"#ffffff"},{name:"Amarelo",value:"#f59e0b",textColor:"#000000"},{name:"Roxo",value:"#8b5cf6",textColor:"#ffffff"},{name:"Rosa",value:"#ec4899",textColor:"#ffffff"},{name:"Laranja",value:"#f97316",textColor:"#ffffff"},{name:"Turquesa",value:"#06b6d4",textColor:"#ffffff"},{name:"Lime",value:"#84cc16",textColor:"#000000"},{name:"√çndigo",value:"#6366f1",textColor:"#ffffff"}],Ca=[{text:"Urgente",color:"#ef4444"},{text:"Em Progresso",color:"#f59e0b"},{text:"Conclu√≠do",color:"#10b981"},{text:"Revis√£o",color:"#8b5cf6"},{text:"Bug",color:"#ef4444"},{text:"Feature",color:"#3b82f6"},{text:"Bloqueado",color:"#6b7280"},{text:"Importante",color:"#ec4899"}],ya=({isOpen:s,onClose:m,cardId:h,refreshBoard:l})=>{const{toast:c}=de(),{user:t}=We(),[d,x]=o.useState(null),[A,E]=o.useState(!0),[z,q]=o.useState(!1),[p,S]=o.useState(!1),[k,D]=o.useState(!1),[u,n]=o.useState("nota"),[f,T]=o.useState(""),[w,g]=o.useState(""),[j,P]=o.useState([]),[I,R]=o.useState(""),[v,b]=o.useState({cor:"#3b82f6",tags:[],prioridade:"media",observacoes:"",dataVencimento:"",comentarios:[]}),[$,H]=o.useState(""),[U,te]=o.useState(""),[ue,Z]=o.useState(!1),[B,r]=o.useState(""),[_,Q]=o.useState(!1),[J,ee]=o.useState(!1),V=o.useRef(!0),re=o.useCallback(async()=>{if(h){E(!0),V.current=!0;try{const{data:a,error:i}=await N.from("quadro_cards").select("*, coluna:quadro_colunas(titulo_coluna)").eq("id",h).single();if(i)throw i;x(a),D(!1);const C=a.conteudo?.type==="checklist"?"checklist":"nota";n(C);let M="",F="";if(C==="checklist"){const L=a.conteudo?.title||a.titulo||"",oe=a.conteudo?.items||[];g(L),P(Array.isArray(oe)?oe:[]),M=L,F=a.conteudo?.description||""}else{M=a.titulo||"";const L=a.conteudo;typeof L=="object"?(F=L?.description||"",!M&&L?.text&&(M=L.text.split(`
`)[0]||"")):typeof L=="string"&&!M&&L&&(M=L.split(`
`)[0]||"")}r(M||"Sem t√≠tulo"),T(F);const Y=a.customizacao||{};b({cor:Y.cor||"#3b82f6",tags:Y.tags||[],prioridade:Y.prioridade||"media",observacoes:Y.observacoes||"",dataVencimento:Y.dataVencimento||"",comentarios:Y.comentarios||[]})}catch(a){c({title:"Erro ao carregar cart√£o",description:a.message,variant:"destructive"}),m()}finally{E(!1),setTimeout(()=>{V.current=!1},500)}}},[h,c,m]);o.useEffect(()=>{s&&re()},[s,re]);const ae=o.useCallback(async a=>{try{const{error:i}=await N.from("quadro_cards").update(a).eq("id",h);if(i)throw i;x(C=>({...C,...a})),l&&l()}catch(i){c({title:"Erro ao salvar altera√ß√µes",description:i.message,variant:"destructive"})}},[h,c,l]),Ve=o.useCallback(async()=>{if(!(!k||p)){S(!0);try{const a={};u==="nota"?a.conteudo={...d.conteudo,text:B,description:f}:u==="checklist"&&(a.conteudo={type:"checklist",title:w,items:j,description:f}),a.customizacao=v,await ae(a),D(!1),c({title:"Cart√£o salvo!",description:"Suas altera√ß√µes foram salvas com sucesso."})}catch(a){c({title:"Erro ao salvar",description:a.message,variant:"destructive"})}finally{S(!1)}}},[u,f,w,j,v,k,p,ae,c,B]);o.useEffect(()=>{V.current||D(!0)},[f,w,j,v,B]);const He=async()=>{q(!0);try{const{error:a}=await N.from("quadro_cards").update({arquivado:!0,arquivado_em:new Date().toISOString()}).eq("id",h);if(a)throw a;c({title:"Cart√£o arquivado!",description:"O cart√£o foi arquivado com sucesso."}),l(),m()}catch(a){c({title:"Erro ao arquivar",description:a.message,variant:"destructive"})}finally{q(!1)}},Le=async()=>{q(!0);try{const{error:a}=await N.from("quadro_cards").update({arquivado:!1,arquivado_em:null}).eq("id",h);if(a)throw a;c({title:"Cart√£o desarquivado!",description:"O cart√£o foi restaurado com sucesso."}),l(),m()}catch(a){c({title:"Erro ao desarquivar",description:a.message,variant:"destructive"})}finally{q(!1)}},we=()=>{l(),m()},Ne=()=>{I.trim()&&(P([...j,{id:X(),text:I,completed:!1}]),R(""))},Re=a=>{P(j.map(i=>i.id===a?{...i,completed:!i.completed}:i))},$e=a=>{P(j.filter(i=>i.id!==a))},Oe=a=>{if(a===u)return;n(a);const i={};if(a==="checklist"){const C=noteContent.split(`
`)[0]||"Nova Checklist",M=noteContent.split(`
`).slice(1).map(F=>({id:X(),text:F,completed:!1})).filter(F=>F.text);i.titulo=C,i.conteudo={type:"checklist",title:C,items:M},g(C),P(M)}else{const C=`${w}
${j.map(M=>`- ${M.text}`).join(`
`)}`;i.conteudo={text:C},setNoteContent(C)}ae(i)},G=a=>{const i={...v,...a};b(i),V.current||D(!0)},Ce=(a,i=null)=>{const C=$.trim();if(C&&!v.tags.some(M=>M.text===C)){const M={text:C,color:i||Ee[Math.floor(Math.random()*Ee.length)].value,id:X()};G({tags:[...v.tags,M]}),H("")}},Ge=a=>{if(!v.tags.some(i=>i.text===a.text)){const i={text:a.text,color:a.color,id:X()};G({tags:[...v.tags,i]})}},Fe=a=>{G({tags:v.tags.filter(i=>i.id!==a.id)})},ye=()=>{if(!U.trim())return;const a={id:X(),texto:U.trim(),timestamp:new Date().toISOString(),autor:t?.user_metadata?.full_name||t?.email||"Usu√°rio",autorId:t?.id};G({comentarios:[...v.comentarios,a]}),te("")},Ke=(a,i)=>{G({comentarios:v.comentarios.map(C=>C.id===a?{...C,texto:i}:C)})},Qe=a=>{G({comentarios:v.comentarios.filter(i=>i.id!==a)})},ke=async()=>{if(Z(!1),!!B.trim())try{if(u==="checklist"){const a={...d.conteudo,title:B.trim()},{error:i}=await N.from("quadro_cards").update({conteudo:a}).eq("id",h);if(i)throw i;g(B.trim()),x(C=>({...C,conteudo:a}))}else{const a={...d.conteudo,text:B.trim()},{error:i}=await N.from("quadro_cards").update({conteudo:a}).eq("id",h);if(i)throw i;x(C=>({...C,conteudo:a}))}}catch(a){c({title:"Erro ao salvar t√≠tulo",description:a.message,variant:"destructive"})}};return e.jsx(Xe,{open:s,onOpenChange:we,children:e.jsxs(Ze,{className:"sm:max-w-[768px] max-h-[90vh] p-0 overflow-hidden",children:[e.jsx(Je,{className:"sr-only",children:B||"Editar Cart√£o"}),e.jsxs(ea,{className:"sr-only",children:["Modal para editar o cart√£o na coluna ",d?.coluna?.titulo_coluna]}),A?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx(K,{className:"h-8 w-8 animate-spin"})}):d?e.jsxs("div",{className:"flex h-[600px]",children:[e.jsx("div",{className:"flex-1 p-6 overflow-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-sm",style:{backgroundColor:v.cor}}),e.jsx(wa,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[ue?e.jsx(O,{value:B,onChange:a=>r(a.target.value),onBlur:ke,onKeyPress:a=>a.key==="Enter"&&ke(),className:"text-lg font-semibold border-none p-0 h-auto bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0",autoFocus:!0}):e.jsx("h2",{className:"text-lg font-semibold cursor-pointer hover:bg-muted/50 px-2 py-1 rounded",onDoubleClick:()=>Z(!0),children:B||(u==="nota"?"Nota sem t√≠tulo":"Lista sem t√≠tulo")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["na coluna ",e.jsx("span",{className:"underline",children:d.coluna?.titulo_coluna})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Etiquetas"})]}),v.tags?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map(a=>e.jsx("div",{className:"group relative",children:e.jsxs(xe,{className:"px-3 py-1 text-xs rounded-full cursor-pointer transition-all hover:scale-105",style:{backgroundColor:a.color||"#6b7280",color:a.color&&(a.color==="#f59e0b"||a.color==="#84cc16")?"#000":"#fff",border:"none"},onClick:()=>Fe(a),children:[a.text||a,e.jsx(W,{className:"w-3 h-3 ml-1 opacity-70 hover:opacity-100"})]})},a.id||a.text))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Etiquetas r√°pidas:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ca.map((a,i)=>e.jsxs("button",{onClick:()=>Ge(a),className:"px-2 py-1 text-xs rounded-full border transition-all hover:scale-105",style:{backgroundColor:`${a.color}20`,borderColor:a.color,color:a.color},children:["+ ",a.text]},i))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{placeholder:"Nova etiqueta...",value:$,onChange:a=>H(a.target.value),className:"text-xs h-8 flex-1",onKeyPress:a=>{a.key==="Enter"&&Ce()}}),e.jsx(y,{size:"sm",className:"h-8 w-8 p-0",onClick:()=>Ce(),children:e.jsx(be,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Descri√ß√£o"})]}),e.jsx(me,{placeholder:"Adicione uma descri√ß√£o mais detalhada...",value:f,onChange:a=>T(a.target.value),className:"min-h-[80px] resize-none border-none focus-visible:ring-1"})]}),u==="checklist"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_e,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Lista de tarefas"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"space-y-2",children:j.map(a=>e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx(sa,{id:`item-${a.id}`,checked:a.completed,onCheckedChange:()=>Re(a.id)}),e.jsx("label",{htmlFor:`item-${a.id}`,className:ce("flex-1 cursor-pointer",a.completed&&"line-through text-muted-foreground"),children:a.text}),e.jsx(y,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 h-6 w-6 p-0",onClick:()=>$e(a.id),children:e.jsx(W,{className:"h-3 w-3"})})]},a.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{placeholder:"Adicionar item...",value:I,onChange:a=>R(a.target.value),onKeyPress:a=>a.key==="Enter"&&Ne(),className:"flex-1"}),e.jsx(y,{onClick:Ne,size:"sm",children:"Adicionar"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Coment√°rios"})]}),v.comentarios?.length>0&&e.jsx("div",{className:"space-y-4",children:v.comentarios.map(a=>e.jsx("div",{className:"bg-transparent rounded-xl p-4 shadow-sm border border-gray-100/20 dark:border-white/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:t?.user_metadata?.avatar_url?e.jsx("img",{src:t.user_metadata.avatar_url,alt:a.autor,className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center text-sm font-medium shadow-sm",children:a.autor?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.autor}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(a.timestamp).toLocaleString()}),e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-50 hover:text-red-500 transition-colors",onClick:()=>Qe(a.id),children:e.jsx(W,{className:"h-3 w-3"})})]})]}),e.jsx(me,{value:a.texto,onChange:i=>Ke(a.id,i.target.value),placeholder:"Escreva um coment√°rio...",className:"text-sm min-h-[60px] resize-none border-none bg-transparent focus-visible:ring-0 focus-visible:outline-none p-0 text-gray-700 dark:text-gray-300"})]})]})},a.id))}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 rounded-xl p-4 border border-blue-200/50 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:t?.user_metadata?.avatar_url?e.jsx("img",{src:t.user_metadata.avatar_url,alt:t?.user_metadata?.full_name||t?.email||"Voc√™",className:"w-8 h-8 rounded-full object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center text-sm font-medium shadow-sm",children:t?.user_metadata?.full_name?.charAt(0)?.toUpperCase()||t?.email?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t?.user_metadata?.full_name||t?.email||"Voc√™"})}),e.jsx(me,{value:U,onChange:a=>te(a.target.value),placeholder:"Adicione um coment√°rio...",className:"text-sm min-h-[80px] resize-none border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:border-transparent p-3 transition-all",onKeyPress:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),ye())}}),U.trim()&&e.jsx("div",{className:"flex justify-end mt-3",children:e.jsx(y,{size:"sm",onClick:ye,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Comentar"})})]})]})})]})]})}),e.jsx("div",{className:"w-48 bg-muted/30 p-4 border-l",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{onClick:Ve,disabled:!k||p,className:"w-full",variant:k?"default":"secondary",children:p?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):k?"Salvar Altera√ß√µes":"Salvo"}),k&&e.jsx("p",{className:"text-xs text-orange-600 text-center",children:"H√° altera√ß√µes n√£o salvas"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Cor do cart√£o"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Na.map(a=>e.jsx("button",{className:ce("w-full h-8 rounded transition-all duration-200 border-2",a.bg,v.cor===a.value?"ring-2 ring-foreground ring-offset-2":"border-transparent"),onClick:()=>{G({cor:a.value})},title:a.name},a.value))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Adicionar ao cart√£o"}),e.jsx("div",{className:"space-y-2"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:"Data de vencimento"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{type:"datetime-local",value:v.dataVencimento,onChange:a=>{const i={...v,dataVencimento:a.target.value};b(i),V.current||D(!0)},className:"text-sm h-10"}),v.dataVencimento&&e.jsxs("div",{className:"flex items-center justify-between bg-muted/30 rounded p-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Vence em: ",new Date(v.dataVencimento).toLocaleString()]}),e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{const a={...v,dataVencimento:""};b(a),V.current||D(!0)},children:e.jsx(W,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"A√ß√µes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>Oe(u==="nota"?"checklist":"nota"),children:[u==="nota"?e.jsx(Be,{className:"w-4 h-4 mr-2"}):e.jsx(Ue,{className:"w-4 h-4 mr-2"}),u==="nota"?"Converter em Lista":"Converter em Nota"]}),d?.arquivado?e.jsxs(y,{variant:"ghost",size:"sm",className:"w-full justify-start text-green-600 hover:text-green-600",onClick:Le,disabled:z,children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),z?"Restaurando...":"Desarquivar"]}):e.jsxs(y,{variant:"ghost",size:"sm",className:"w-full justify-start text-destructive hover:text-destructive",onClick:He,disabled:z,children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),z?"Arquivando...":"Arquivar"]})]})]})]})}),e.jsx(y,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0",onClick:we,children:e.jsx(W,{className:"h-4 w-4"})})]}):null]})})},ka=s=>{if(!s)return"#000000";const m=s.replace("#",""),h=parseInt(m.substr(0,2),16),l=parseInt(m.substr(2,2),16),c=parseInt(m.substr(4,2),16);return(.299*h+.587*l+.114*c)/255>.5?"#000000":"#ffffff"},qa=(s,m)=>{if(!s)return{backgroundColor:"#6b7280",color:"#ffffff"};if(!m||m==="#3b82f6")return{backgroundColor:s,color:s==="#f59e0b"||s==="#84cc16"?"#000":"#fff"};const h=m.replace("#",""),l=s.replace("#",""),c=parseInt(h.substr(0,2),16),t=parseInt(h.substr(2,2),16),d=parseInt(h.substr(4,2),16),x=parseInt(l.substr(0,2),16),A=parseInt(l.substr(2,2),16),E=parseInt(l.substr(4,2),16);return Math.sqrt(Math.pow(c-x,2)+Math.pow(t-A,2)+Math.pow(d-E,2))<100?(.299*c+.587*t+.114*d)/255>.5?{backgroundColor:"#1f2937",color:"#ffffff",border:"1px solid #374151"}:{backgroundColor:"#f9fafb",color:"#111827",border:"1px solid #d1d5db"}:{backgroundColor:s,color:s==="#f59e0b"||s==="#84cc16"?"#000":"#fff"}},Da=({card:s,index:m,refreshColumns:h})=>{const[l,c]=o.useState(!1),t=s.customizacao||{},d=t.cor&&t.cor!=="#3b82f6",x=d?ka(t.cor):null,A=Array.isArray(t.tags)?t.tags:[],E=Array.isArray(t.comentarios)?t.comentarios:[],z={baixa:{color:"text-green-600",bg:"bg-green-100"},media:{color:"text-yellow-600",bg:"bg-yellow-100"},alta:{color:"text-orange-600",bg:"bg-orange-100"},critica:{color:"text-red-600",bg:"bg-red-100"}};z[t.prioridade]||z.media;const q=()=>{if(s.conteudo?.type==="checklist"&&Array.isArray(s.conteudo.items)){const p=s.conteudo.items.filter(k=>k.completed).length,S=s.conteudo.items.length;return e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",style:{color:d?x:void 0},children:s.conteudo.title||"Checklist"}),e.jsx("div",{className:"space-y-1",children:s.conteudo.items.slice(0,3).map((k,D)=>e.jsxs("div",{className:"flex items-center text-xs",style:{color:d?x:void 0},children:[k.completed?e.jsx(Be,{className:"w-3 h-3 mr-2 text-green-500",style:{color:d?x:void 0}}):e.jsx(Ue,{className:"w-3 h-3 mr-2",style:{color:d?x:void 0}}),e.jsx("span",{className:k.completed?"line-through":"",children:k.text})]},D))}),S>3&&e.jsxs("p",{className:"text-xs mt-1",style:{color:d?x:void 0},children:["...e mais ",S-3]}),S>0&&e.jsxs("div",{className:"text-xs text-right mt-2",style:{color:d?x:void 0},children:[p,"/",S]})]})}return e.jsx("h4",{className:"font-medium text-sm break-words",style:{color:d?x:void 0},children:s.conteudo?.text||""})};return e.jsxs(e.Fragment,{children:[e.jsx(Ie,{draggableId:s.id.toString(),index:m,children:(p,S)=>{const k={...p.draggableProps.style,transition:S.isDragging?"none":p.draggableProps.style?.transition};return e.jsxs("div",{ref:p.innerRef,...p.draggableProps,...p.dragHandleProps,style:{...k,...d?{backgroundColor:t.cor,borderColor:t.cor,color:x}:{}},onClick:()=>c(!0),className:ce("bg-white/90 dark:bg-background/80 p-3 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border",S.isDragging&&"shadow-lg",d&&"border-2"),children:[A.length>0&&e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[A.slice(0,4).map((D,u)=>e.jsx(xe,{variant:"secondary",className:"text-xs px-2 py-1 rounded-full",style:qa(D.color,t.cor),children:D.text||D},D.id||u)),A.length>4&&e.jsxs(xe,{variant:"secondary",className:"text-xs px-2 py-1 rounded-sm",children:["+",A.length-4]})]})}),(t.dataVencimento||E.length>0)&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.dataVencimento&&e.jsxs("div",{className:"flex items-center text-xs",style:{color:d?x:void 0},children:[e.jsx(ze,{className:"w-3 h-3 mr-1"}),new Date(t.dataVencimento).toLocaleDateString()]}),E.length>0&&e.jsxs("div",{className:"flex items-center text-xs",style:{color:d?x:void 0},children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),E.length]})]}),q(),t.observacoes&&e.jsx("div",{className:"mt-2 pt-2 border-t",style:{borderColor:d?`${x}20`:void 0},children:e.jsx("p",{className:"text-xs line-clamp-2",style:{color:d?x:void 0},children:t.observacoes})})]})}}),l&&e.jsx(ya,{isOpen:l,onClose:()=>c(!1),cardId:s.id,refreshBoard:h})]})},Sa=({column:s,index:m,refreshColumns:h,boardId:l})=>{const{user:c}=je(),{toast:t}=de(),[d,x]=o.useState(!1),[A,E]=o.useState(s.titulo_coluna),[z,q]=o.useState(!1),[p,S]=o.useState(""),k=async()=>{if(!A.trim()||A.trim()===s.titulo_coluna){x(!1),E(s.titulo_coluna);return}try{const{error:n}=await N.from("quadro_colunas").update({titulo_coluna:A.trim()}).eq("id",s.id);if(n)throw n;t({title:"Coluna atualizada!"}),x(!1),h()}catch(n){t({title:"Erro ao atualizar coluna",description:n.message,variant:"destructive"}),E(s.titulo_coluna)}},D=async()=>{if(!(!p.trim()||!c))try{await N.from("quadro_cards").insert({conteudo:{text:p},coluna_id:s.id,user_id:c.id,ordem:s.cards?.length||0,customizacao:{cor:"#3b82f6",tags:[],prioridade:"media",observacoes:"",dataVencimento:"",comentarios:[]}}).select().single(),S(""),q(!1),h(),t({title:"Cart√£o adicionado!"})}catch(n){t({title:"Erro ao adicionar cart√£o",description:n.message,variant:"destructive"})}},u=async()=>{if(s.cards&&s.cards.length>0){t({title:"Coluna n√£o est√° vazia",description:"Mova ou exclua todos os cart√µes antes de remover a coluna.",variant:"destructive"});return}try{const{error:n}=await N.from("quadro_colunas").delete().eq("id",s.id);if(n)throw n;t({title:"Coluna exclu√≠da!"}),h()}catch(n){t({title:"Erro ao excluir coluna",description:n.message,variant:"destructive"})}};return e.jsx(Ie,{draggableId:String(s.id),index:m,children:n=>e.jsx("div",{...n.draggableProps,ref:n.innerRef,className:"w-72 flex-shrink-0",children:e.jsxs("div",{className:"relative rounded-lg flex flex-col max-h-full",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/50 backdrop-blur-md rounded-lg -z-10"}),e.jsxs("div",{...n.dragHandleProps,className:"p-2 flex items-center justify-between cursor-grab text-white dark:text-gray-200",children:[d?e.jsx(O,{value:A,onChange:f=>E(f.target.value),onBlur:k,onKeyPress:f=>f.key==="Enter"&&k(),autoFocus:!0,className:"bg-transparent font-semibold border-0 focus-visible:ring-0 focus-visible:ring-offset-0 h-auto p-2"}):e.jsx("h3",{onClick:()=>x(!0),className:"font-semibold px-2 py-1",children:s.titulo_coluna}),e.jsxs(fe,{children:[e.jsx(pe,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"w-8 h-8 hover:bg-black/20 dark:hover:bg-white/10 text-white",children:e.jsx(ca,{className:"w-4 h-4"})})}),e.jsxs(ge,{children:[e.jsx(se,{onClick:()=>x(!0),children:"Renomear"}),e.jsx(se,{onClick:u,className:"text-red-500",children:"Excluir Coluna"})]})]})]}),e.jsx(Te,{droppableId:String(s.id),type:"CARD",children:(f,T)=>e.jsxs("div",{ref:f.innerRef,...f.droppableProps,className:ce("px-2 py-1 flex-grow min-h-[50px] transition-all duration-200","flex flex-col gap-2 max-h-[calc(100vh-200px)] overflow-y-auto scrollbar-hide",T.isDraggingOver&&"bg-white/10 rounded-md"),children:[s.cards&&s.cards.length>0&&s.cards.map((w,g)=>w?e.jsx(Da,{card:w,index:g,refreshColumns:h},w.id):null),f.placeholder]})}),e.jsx("div",{className:"p-2 mt-auto",children:z?e.jsxs("div",{children:[e.jsx(O,{placeholder:"Conte√∫do do cart√£o...",value:p,onChange:f=>S(f.target.value),onKeyPress:f=>f.key==="Enter"&&D(),className:"mb-2 bg-card text-foreground"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{onClick:D,children:"Adicionar"}),e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>q(!1),className:"text-white hover:bg-black/20",children:e.jsx(W,{className:"w-5 h-5"})})]})]}):e.jsxs(y,{variant:"ghost",onClick:()=>q(!0),className:"w-full justify-start text-gray-300 dark:text-gray-400 hover:text-white hover:bg-black/20 dark:hover:bg-white/10",children:[e.jsx(be,{className:"w-4 h-4 mr-2"})," Adicionar um cart√£o"]})})]})})})},_a=({board:s,showArchived:m=!1})=>{const{user:h}=je(),{toast:l}=de(),[c,t]=o.useState([]),[d,x]=o.useState(!0),[A,E]=o.useState(!1),[z,q]=o.useState(""),p=o.useCallback(async()=>{if(!(!h||!s?.id)){x(!0);try{const{data:u,error:n}=await N.from("quadro_colunas").select("*, quadro_cards(*)").eq("quadro_id",s.id).order("ordem",{ascending:!0});if(n)throw n;const f=u.map(T=>{let w=T.quadro_cards||[];return m?w=w.filter(g=>g.arquivado===!0):w=w.filter(g=>!g.arquivado),{...T,cards:w.sort((g,j)=>(g.ordem||0)-(j.ordem||0))}});if(t(f),m){const T=u.reduce((w,g)=>w+(g.quadro_cards||[]).filter(j=>j.arquivado===!0).length,0);console.log(`Mostrando ${T} cards arquivados`)}}catch(u){l({title:"Erro ao carregar colunas",description:u.message,variant:"destructive"})}finally{x(!1)}}},[s?.id,h,l,m]);o.useEffect(()=>{p()},[p]);const S=async()=>{if(z.trim())try{const{data:u,error:n}=await N.from("quadro_colunas").insert({quadro_id:s.id,user_id:h.id,titulo_coluna:z,ordem:c.length}).select("*, quadro_cards(*)").single();if(n)throw n;t([...c,{...u,cards:[]}]),q(""),E(!1),l({title:"Coluna adicionada!"})}catch(u){l({title:"Erro ao adicionar coluna",description:u.message,variant:"destructive"})}},k=async u=>{const{destination:n,source:f,draggableId:T,type:w}=u;if(!(!n||n.droppableId===f.droppableId&&n.index===f.index)){if(w==="COLUMN"){const g=Array.from(c),[j]=g.splice(f.index,1);g.splice(n.index,0,j),t(g);const P=g.map((I,R)=>N.from("quadro_colunas").update({ordem:R}).eq("id",I.id));try{await Promise.all(P)}catch{l({title:"Erro ao reordenar colunas",variant:"destructive"}),p()}return}if(w==="CARD"){const g=c.find(b=>b.id.toString()===f.droppableId),j=c.find(b=>b.id.toString()===n.droppableId);if(!g||!j)return;const P=[...g.cards],I=g.id===j.id?P:[...j.cards],[R]=P.splice(f.index,1);I.splice(n.index,0,R);const v=c.map(b=>b.id===g.id&&b.id===j.id?{...b,cards:I}:b.id===g.id?{...b,cards:P}:b.id===j.id?{...b,cards:I}:b);t(v);try{if(g.id===j.id){const b=I.map(($,H)=>N.from("quadro_cards").update({ordem:H}).eq("id",$.id));await Promise.all(b)}else{await N.from("quadro_cards").update({coluna_id:j.id,ordem:n.index}).eq("id",T);const b=P.map((H,U)=>N.from("quadro_cards").update({ordem:U}).eq("id",H.id)),$=I.map((H,U)=>N.from("quadro_cards").update({ordem:U}).eq("id",H.id));await Promise.all([...b,...$])}console.log("‚úÖ Card movido e salvo com sucesso")}catch(b){console.error("‚ùå Erro ao salvar posi√ß√£o do cart√£o:",b),p(),l({title:"Erro ao mover cart√£o",description:"Posi√ß√£o restaurada",variant:"destructive"})}}}},D=o.useCallback(()=>{p()},[p]);return d?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(K,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx("div",{className:"w-full h-full overflow-x-auto overflow-y-hidden scrollbar-hide",children:e.jsx(la,{onDragEnd:k,children:e.jsx(Te,{droppableId:"board",type:"COLUMN",direction:"horizontal",children:u=>e.jsxs("div",{...u.droppableProps,ref:u.innerRef,className:"flex items-start space-x-4 p-4 h-full",children:[c.map((n,f)=>e.jsx(Sa,{column:n,index:f,refreshColumns:D,boardId:s.id},n.id)),u.placeholder,e.jsx("div",{className:"w-72 flex-shrink-0",children:A?e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm p-2 rounded-lg",children:[e.jsx(O,{placeholder:"Nome da coluna...",value:z,onChange:n=>q(n.target.value),onKeyPress:n=>n.key==="Enter"&&S(),autoFocus:!0,onBlur:()=>E(!1),className:"mb-2"}),e.jsx(y,{onClick:S,size:"sm",children:"Adicionar"})]}):e.jsxs(y,{onClick:()=>E(!0),className:"w-full bg-white/20 dark:bg-black/30 backdrop-blur-sm hover:bg-white/30 dark:hover:bg-black/40 text-white",variant:"ghost",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Adicionar outra coluna"]})})]})})})})},Aa=["https://images.unsplash.com/photo-1753037626414-e8054960fad5?q=80&w=2064&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.unsplash.com/photo-1716927111848-56163afc0107?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.unsplash.com/photo-1734983235410-cbbc5f5fcdaf?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.unsplash.com/photo-1749680287741-243118ed6b2c?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.unsplash.com/photo-1750126833705-ba98013f16f3?q=80&w=1742&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","https://images.unsplash.com/photo-1746937807433-05748b80caf4?q=80&w=2148&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"],Qa=({setPageStyle:s})=>{const{boardId:m}=ta(),{user:h}=je(),{toast:l}=de(),c=ra(),[t,d]=o.useState(null),[x,A]=o.useState(!0),[E,z]=o.useState(!1),[q,p]=o.useState(""),[S,k]=o.useState(!1),[D,u]=o.useState(!1),[n,f]=o.useState(!1),[T,w]=o.useState(""),[g,j]=o.useState(!1),[P,I]=o.useState(!1),R=o.useRef(null),v=o.useCallback(r=>{r&&r.imagem_fundo?s({backgroundImage:`url(${r.imagem_fundo})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}):s({})},[s]),b=o.useCallback(async()=>{if(!(!h||!m)){A(!0);try{const{data:r,error:_}=await N.from("quadros").select("*").eq("id",m).single();if(_){if(_.code==="PGRST116")l({title:"Quadro n√£o encontrado",description:"Este quadro pode ter sido exclu√≠do.",variant:"destructive"}),c("/quadros");else throw _;return}d(r),p(r.nome_quadro),v(r),r.share_id&&r.is_public?w(`${window.location.origin}/public/board/${r.share_id}`):w("")}catch(r){r&&r.code!=="PGRST116"&&l({title:"Erro ao carregar quadro",description:r.message,variant:"destructive"})}finally{A(!1)}}},[m,h,l,c,v]);o.useEffect(()=>(b(),()=>{s({})}),[b,s]);const $=async()=>{if(!q.trim()){l({title:"Nome inv√°lido",description:"O nome do quadro n√£o pode ser vazio.",variant:"destructive"});return}try{const{error:r}=await N.from("quadros").update({nome_quadro:q}).eq("id",m);if(r)throw r;z(!1),d(_=>({..._,nome_quadro:q})),l({title:"Quadro atualizado!",description:"O nome do quadro foi alterado com sucesso."})}catch(r){l({title:"Erro ao atualizar",description:r.message,variant:"destructive"})}},H=async()=>{k(!0);try{await N.from("quadros").delete().eq("id",m),l({title:"Quadro exclu√≠do!",description:"O quadro foi removido com sucesso."}),c("/quadros")}catch(r){l({title:"Erro ao excluir",description:r.message,variant:"destructive"})}finally{k(!1)}},U=async r=>{try{const{error:_}=await N.from("quadros").update({imagem_fundo:r}).eq("id",m);if(_)throw _;l({title:"Sucesso!",description:"Imagem de fundo atualizada."}),b()}catch(_){l({title:"Erro ao atualizar fundo",description:_.message,variant:"destructive"})}},te=async r=>{const _=r.target.files[0];if(!_)return;u(!0);const Q=_.name.split(".").pop(),J=`${X()}.${Q}`,ee=`public/board-backgrounds/${h.id}/${m}/${J}`;try{const{error:V}=await N.storage.from("user_assets").upload(ee,_,{upsert:!0});if(V)throw V;const{data:re}=N.storage.from("user_assets").getPublicUrl(ee),ae=`${re.publicUrl}?t=${new Date().getTime()}`;await U(ae)}catch(V){l({title:"Erro no upload",description:V.message,variant:"destructive"})}finally{u(!1)}},ue=async()=>{if(T){await Z();return}j(!0);try{const r=`board_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;console.log("üîó Criando compartilhamento com ID:",r);const{data:_,error:Q}=await N.from("quadros").update({share_id:r,is_public:!0,shared_at:new Date().toISOString()}).eq("id",m).select().single();if(Q)throw console.error("‚ùå Erro ao atualizar quadro:",Q),Q;console.log("‚úÖ Quadro atualizado:",_);const J=`${window.location.origin}/public/board/${r}`;w(J),d(ee=>({...ee,share_id:r,is_public:!0,shared_at:new Date().toISOString()})),l({title:"Quadro compartilhado!",description:"Link copiado para a √°rea de transfer√™ncia"}),await navigator.clipboard.writeText(J),I(!0),setTimeout(()=>I(!1),2e3)}catch(r){console.error("‚ùå Erro no handleShare:",r),l({title:"Erro ao compartilhar",description:r.message,variant:"destructive"})}finally{j(!1)}},Z=async()=>{try{await navigator.clipboard.writeText(T),I(!0),setTimeout(()=>I(!1),2e3),l({title:"Link copiado!",description:"URL copiada para a √°rea de transfer√™ncia"})}catch{l({title:"Erro ao copiar",description:"N√£o foi poss√≠vel copiar o link",variant:"destructive"})}},B=async()=>{try{const{error:r}=await N.from("quadros").update({share_id:null,is_public:!1,shared_at:null}).eq("id",m);if(r)throw r;w(""),l({title:"Compartilhamento desativado",description:"O quadro n√£o est√° mais p√∫blico"})}catch(r){l({title:"Erro ao desativar",description:r.message,variant:"destructive"})}};return x?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(K,{className:"w-12 h-12 animate-spin text-primary"})}):t?e.jsxs("div",{className:"flex flex-col h-full relative",children:[e.jsx("header",{className:"absolute top-0 left-0 right-0 z-20 p-4 bg-black/20 backdrop-blur-md",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:E?e.jsx(O,{value:q,onChange:r=>p(r.target.value),onBlur:$,onKeyPress:r=>r.key==="Enter"&&$(),className:"bg-transparent text-white border-0 focus-visible:ring-0 focus-visible:ring-offset-0 text-2xl font-bold w-full p-0 h-auto",autoFocus:!0}):e.jsx("h1",{className:"text-2xl font-bold text-white cursor-pointer truncate",onClick:()=>z(!0),title:q,children:q})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ae,{children:[e.jsxs(ie,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",onClick:()=>f(!n),children:e.jsx(ve,{className:"w-5 h-5"})})}),e.jsx(le,{children:e.jsxs("p",{children:[n?"Ocultar":"Mostrar"," Arquivados"]})})]}),e.jsxs(fe,{children:[e.jsxs(ie,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(pe,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",disabled:g,className:"text-white hover:bg-white/20",children:g?e.jsx(K,{className:"w-5 h-5 animate-spin"}):P?e.jsx(qe,{className:"w-5 h-5 text-green-400"}):e.jsx(he,{className:"w-5 h-5"})})})}),e.jsx(le,{children:e.jsx("p",{children:"Compartilhar Quadro"})})]}),e.jsxs(ge,{align:"end",className:"w-64",children:[e.jsx(De,{children:"Compartilhamento"}),T?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Link p√∫blico ativo:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{value:T,readOnly:!0,className:"text-xs"}),e.jsx(y,{variant:"ghost",size:"icon",onClick:Z,className:"flex-shrink-0",children:P?e.jsx(qe,{className:"w-4 h-4 text-green-500"}):e.jsx(ba,{className:"w-4 h-4"})})]})]}),e.jsx(Se,{}),e.jsxs(se,{onClick:B,className:"text-red-500",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Desativar compartilhamento"})]})]}):e.jsxs(se,{onClick:ue,children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Compartilhar publicamente"})]})]})]}),e.jsxs(fe,{children:[e.jsxs(ie,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(pe,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",disabled:D,className:"text-white hover:bg-white/20",children:D?e.jsx(K,{className:"w-5 h-5 animate-spin"}):e.jsx(Pe,{className:"w-5 h-5"})})})}),e.jsx(le,{children:e.jsx("p",{children:"Alterar Fundo"})})]}),e.jsxs(ge,{align:"end",className:"w-64",children:[e.jsx(De,{children:"Imagens Padr√£o"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 p-2",children:Aa.map((r,_)=>e.jsx("div",{className:"aspect-video rounded-md cursor-pointer overflow-hidden ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",onClick:()=>U(r),children:e.jsx("img",{src:r,alt:`Fundo Padr√£o ${_+1}`,className:"w-full h-full object-cover"})},_))}),e.jsx(Se,{}),e.jsxs(se,{onSelect:()=>R.current?.click(),children:[e.jsx(ja,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Fazer upload de imagem"})]})]})]})]}),e.jsx("input",{type:"file",ref:R,onChange:te,accept:"image/*",className:"hidden"}),e.jsxs(da,{children:[e.jsx(Ae,{children:e.jsxs(ie,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(ua,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"text-red-400 hover:bg-red-500/20 hover:text-red-400",children:e.jsx(na,{className:"w-5 h-5"})})})}),e.jsx(le,{children:e.jsx("p",{children:"Excluir Quadro"})})]})}),e.jsxs(ma,{children:[e.jsxs(ha,{children:[e.jsx(xa,{children:"Voc√™ tem certeza?"}),e.jsx(fa,{children:"Esta a√ß√£o n√£o pode ser desfeita. Isso excluir√° permanentemente o quadro, junto com todas as suas colunas e cart√µes."})]}),e.jsxs(pa,{children:[e.jsx(ga,{disabled:S,children:"Cancelar"}),e.jsxs(va,{onClick:H,disabled:S,className:"bg-destructive hover:bg-destructive/90",children:[S&&e.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),"Excluir"]})]})]})]})]})]})}),e.jsx("div",{className:"flex-grow pt-20 h-full",children:e.jsx(_a,{board:t,showArchived:n})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[e.jsx(oa,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-destructive",children:"Quadro n√£o encontrado"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"O quadro que voc√™ est√° procurando n√£o existe ou foi removido."}),e.jsx(y,{asChild:!0,className:"mt-6",children:e.jsx(ia,{to:"/quadros",children:"Voltar para Meus Quadros"})})]})};export{Qa as default};
