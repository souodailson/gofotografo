const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-wa1T_jwR.js","assets/index-Ecn7dWn8.js","assets/index-Chjiymov.js","assets/index-BOBIWMK8.js","assets/tooltip-CA2pM5Qz.js","assets/extends-CF3RwP-h.js","assets/eye-off--e691_ET.js","assets/eye-CKajlMkg.js","assets/settings-ChNSCBVK.js","assets/useCardHoverEffect-CkmdxqWo.js","assets/skeleton-BYpHmYKc.js","assets/receipt-4EgD2ZZe.js","assets/landmark-C0yrMUou.js","assets/shield-check-BE19bi5H.js","assets/trending-down-BCl3g9BB.js","assets/trending-up-CO4LlKqt.js","assets/target-Bd-UuEKp.js","assets/PieChart-ZRCAYRMg.js","assets/alert-dialog-DrGulXcH.js","assets/list-BPzFOhM4.js","assets/more-vertical-r-cEV0le.js","assets/pen-square-BF_JmZQ6.js","assets/pt-BR-YF7Ed3aw.js","assets/cake-BLHyq9kf.js","assets/progress-DVBDvamU.js","assets/badge-C3zpU0uF.js","assets/isSameMonth-18dLZxIJ.js","assets/subMonths-BoQhdbOs.js","assets/grip-vertical-CXrLqlh_.js","assets/Clients-BXRM-IqY.js","assets/link-VGKN7uI3.js","assets/search-C5DISxiG.js","assets/filter-C2PdR1h6.js","assets/message-square-BANCNk0j.js","assets/ClientDetail-iliKpClo.js","assets/tabs-CeiCR6wT.js","assets/plus-circle-799Njh53.js","assets/map-pin-D3sYBR3y.js","assets/heart-Cmlkbnb-.js","assets/image-BhmwL_7y.js","assets/pen-line-B2EFEEAJ.js","assets/upload-cloud-CLdXl6sC.js","assets/calendar-days-BsvMdKtQ.js","assets/arrow-left-BAaDkxY8.js","assets/Workflow-BfhgnlUV.js","assets/dnd.esm-mF0vqcmQ.js","assets/defineProperty-DbXIQDXj.js","assets/typeof-QjJsDpFa.js","assets/tiny-invariant-CopsF_GD.js","assets/align-justify-C25ZwpfK.js","assets/chevron-up-D01iZDTV.js","assets/archive-Dqoxf0mI.js","assets/palette-BY3L2Gmb.js","assets/list-checks-DKT-9N4x.js","assets/Financial-BECAlIAO.js","assets/hourglass-ButidnKE.js","assets/subDays-DzAFIOdd.js","assets/endOfDay-BV1V2sfl.js","assets/startOfMonth-BzQif7bD.js","assets/endOfMonth-D64CafMR.js","assets/Calendar-qg60F3nu.js","assets/googleCalendar-BGRw3c9d.js","assets/FeatureRestrictionModal-BhQ_ejwH.js","assets/popover-BR03E6xU.js","assets/getDay-D82VKQcL.js","assets/constructNow-BDO1HICJ.js","assets/external-link-BEZ2VMsn.js","assets/switch-M_XKZwDx.js","assets/copy-Bl_qnmVJ.js","assets/AvailabilityModal-DuyOKReL.js","assets/Reports-CgJ9cxLi.js","assets/jspdf.es.min-DBVKixFd.js","assets/jspdf.plugin.autotable-DtM0_LT_.js","assets/bar-chart-3-BYy_aWOm.js","assets/alert-circle-d45Ds2zr.js","assets/Settings-NclQTrI9.js","assets/globe-C3oDGfXU.js","assets/shield-BZeyY-Rr.js","assets/refresh-cw-qvwv2_U1.js","assets/formatDistanceToNow-5wcFVQCI.js","assets/lightbulb-D6Ian9x-.js","assets/AccountSettings-Czw0sXew.js","assets/upload-BESewmob.js","assets/ServicePackages-BdBc7PgX.js","assets/MySetup-THesiihD.js","assets/type-D8ksgLol.js","assets/Precifique-Dgvb_5HW.js","assets/percent-BiPW6bCZ.js","assets/ReservaInteligente-BJx09G5n.js","assets/more-horizontal-C-It-It0.js","assets/Boards-dpr4nQo9.js","assets/file-plus-nk9JH22p.js","assets/useDebounce-JzH2ZcTg.js","assets/BoardDetail-BsJULq6Y.js","assets/square-Duo20h_r.js","assets/PlansPage-W26RMiHk.js","assets/star-BcXFo6v0.js","assets/FormsPage-J5lC50XW.js","assets/user-plus-BgfDSwjA.js","assets/megaphone-CWaNk280.js","assets/FormSuccessModal-CSwBOy-8.js","assets/share-2-CCXXzQDE.js","assets/FormEditorPage-BONnK_5K.js","assets/CampaignSubmissionsPage-Bx3TX5Rc.js","assets/StudioPage-TDfUSNZV.js","assets/heart-handshake-B0rRUrZ_.js","assets/ContractListPage-7m5OSBdc.js","assets/table-CIMCzeN1.js","assets/ContractEditorPage-BPj9Teyk.js","assets/underline-CT9XvQVO.js","assets/ProposalEditorPage-0NDqbCSK.js","assets/EditorRulers-DcxhLU1N.js","assets/EditorCanvas-PF6soU2K.js","assets/instagram-DttFMn-Q.js","assets/EditorCanvas-BxwK8EBg.css","assets/html2canvas.esm-BfxBtG_O.js","assets/ban-NW2JPt3Y.js","assets/BlogPage-DaDQjVg-.js","assets/AvailabilityManagerPage-C2rx0LyB.js","assets/ReferralsPage-9bzCKaR9.js","assets/LandingPage-B6Zlywkg.js","assets/PrivacyPolicyPage-CATQKYdM.js","assets/LoginPage-BGp3xO3U.js","assets/AuthLayout-D15voI9y.js","assets/log-in-CvyZNNgj.js","assets/SignupPage-D1fAcOew.js","assets/ForgotPasswordPage-miUt9lXT.js","assets/UpdatePasswordPage-CCV99UUf.js","assets/AdminLoginPage-DFNvSmXb.js","assets/AdminLayout-CmP8lm8B.js","assets/PublicBookingPage-Dic9PRwH.js","assets/BlogPostPage-J2s7tbWn.js","assets/ProposalEditorPage-CLMa5G7l.js","assets/CustomPageViewer-CApfy2r-.js","assets/TutorialsPage-CcOo01Ft.js","assets/ProposalPublicView-DwuJyg9h.js"])))=>i.map(i=>d[i]);
var Bx=n=>{throw TypeError(n)};var $0=(n,e,t)=>e.has(n)||Bx("Cannot "+t);var Pi=(n,e,t)=>($0(n,e,"read from private field"),t?t.call(n):e.get(n)),Kd=(n,e,t)=>e.has(n)?Bx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),sp=(n,e,t,r)=>($0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Hg=(n,e,t)=>($0(n,e,"access private method"),t);var $x=(n,e,t,r)=>({set _(s){sp(n,e,s,t)},get _(){return Pi(n,e,r)}});function KC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function im(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function rN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var U0={exports:{}},ip={},z0={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function sN(){if(Ux)return gt;Ux=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(F,se,ee){this.props=F,this.context=se,this.refs=x,this.updater=ee||_}E.prototype.isReactComponent={},E.prototype.setState=function(F,se){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,se,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function P(){}P.prototype=E.prototype;function R(F,se,ee){this.props=F,this.context=se,this.refs=x,this.updater=ee||_}var M=R.prototype=new P;M.constructor=R,S(M,E.prototype),M.isPureReactComponent=!0;var N=Array.isArray,L=Object.prototype.hasOwnProperty,B={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function H(F,se,ee){var Te,Me={},Pe=null,ve=null;if(se!=null)for(Te in se.ref!==void 0&&(ve=se.ref),se.key!==void 0&&(Pe=""+se.key),se)L.call(se,Te)&&!$.hasOwnProperty(Te)&&(Me[Te]=se[Te]);var Ne=arguments.length-2;if(Ne===1)Me.children=ee;else if(1<Ne){for(var He=Array(Ne),Ye=0;Ye<Ne;Ye++)He[Ye]=arguments[Ye+2];Me.children=He}if(F&&F.defaultProps)for(Te in Ne=F.defaultProps,Ne)Me[Te]===void 0&&(Me[Te]=Ne[Te]);return{$$typeof:n,type:F,key:Pe,ref:ve,props:Me,_owner:B.current}}function Y(F,se){return{$$typeof:n,type:F.type,key:se,ref:F.ref,props:F.props,_owner:F._owner}}function ue(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function oe(F){var se={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ee){return se[ee]})}var ce=/\/+/g;function ae(F,se){return typeof F=="object"&&F!==null&&F.key!=null?oe(""+F.key):se.toString(36)}function me(F,se,ee,Te,Me){var Pe=typeof F;(Pe==="undefined"||Pe==="boolean")&&(F=null);var ve=!1;if(F===null)ve=!0;else switch(Pe){case"string":case"number":ve=!0;break;case"object":switch(F.$$typeof){case n:case e:ve=!0}}if(ve)return ve=F,Me=Me(ve),F=Te===""?"."+ae(ve,0):Te,N(Me)?(ee="",F!=null&&(ee=F.replace(ce,"$&/")+"/"),me(Me,se,ee,"",function(Ye){return Ye})):Me!=null&&(ue(Me)&&(Me=Y(Me,ee+(!Me.key||ve&&ve.key===Me.key?"":(""+Me.key).replace(ce,"$&/")+"/")+F)),se.push(Me)),1;if(ve=0,Te=Te===""?".":Te+":",N(F))for(var Ne=0;Ne<F.length;Ne++){Pe=F[Ne];var He=Te+ae(Pe,Ne);ve+=me(Pe,se,ee,He,Me)}else if(He=v(F),typeof He=="function")for(F=He.call(F),Ne=0;!(Pe=F.next()).done;)Pe=Pe.value,He=Te+ae(Pe,Ne++),ve+=me(Pe,se,ee,He,Me);else if(Pe==="object")throw se=String(F),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ve}function W(F,se,ee){if(F==null)return F;var Te=[],Me=0;return me(F,Te,"","",function(Pe){return se.call(ee,Pe,Me++)}),Te}function q(F){if(F._status===-1){var se=F._result;se=se(),se.then(function(ee){(F._status===0||F._status===-1)&&(F._status=1,F._result=ee)},function(ee){(F._status===0||F._status===-1)&&(F._status=2,F._result=ee)}),F._status===-1&&(F._status=0,F._result=se)}if(F._status===1)return F._result.default;throw F._result}var ne={current:null},z={transition:null},re={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:z,ReactCurrentOwner:B};function J(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:W,forEach:function(F,se,ee){W(F,function(){se.apply(this,arguments)},ee)},count:function(F){var se=0;return W(F,function(){se++}),se},toArray:function(F){return W(F,function(se){return se})||[]},only:function(F){if(!ue(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},gt.Component=E,gt.Fragment=t,gt.Profiler=s,gt.PureComponent=R,gt.StrictMode=r,gt.Suspense=d,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,gt.act=J,gt.cloneElement=function(F,se,ee){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Te=S({},F.props),Me=F.key,Pe=F.ref,ve=F._owner;if(se!=null){if(se.ref!==void 0&&(Pe=se.ref,ve=B.current),se.key!==void 0&&(Me=""+se.key),F.type&&F.type.defaultProps)var Ne=F.type.defaultProps;for(He in se)L.call(se,He)&&!$.hasOwnProperty(He)&&(Te[He]=se[He]===void 0&&Ne!==void 0?Ne[He]:se[He])}var He=arguments.length-2;if(He===1)Te.children=ee;else if(1<He){Ne=Array(He);for(var Ye=0;Ye<He;Ye++)Ne[Ye]=arguments[Ye+2];Te.children=Ne}return{$$typeof:n,type:F.type,key:Me,ref:Pe,props:Te,_owner:ve}},gt.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:i,_context:F},F.Consumer=F},gt.createElement=H,gt.createFactory=function(F){var se=H.bind(null,F);return se.type=F,se},gt.createRef=function(){return{current:null}},gt.forwardRef=function(F){return{$$typeof:l,render:F}},gt.isValidElement=ue,gt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:q}},gt.memo=function(F,se){return{$$typeof:h,type:F,compare:se===void 0?null:se}},gt.startTransition=function(F){var se=z.transition;z.transition={};try{F()}finally{z.transition=se}},gt.unstable_act=J,gt.useCallback=function(F,se){return ne.current.useCallback(F,se)},gt.useContext=function(F){return ne.current.useContext(F)},gt.useDebugValue=function(){},gt.useDeferredValue=function(F){return ne.current.useDeferredValue(F)},gt.useEffect=function(F,se){return ne.current.useEffect(F,se)},gt.useId=function(){return ne.current.useId()},gt.useImperativeHandle=function(F,se,ee){return ne.current.useImperativeHandle(F,se,ee)},gt.useInsertionEffect=function(F,se){return ne.current.useInsertionEffect(F,se)},gt.useLayoutEffect=function(F,se){return ne.current.useLayoutEffect(F,se)},gt.useMemo=function(F,se){return ne.current.useMemo(F,se)},gt.useReducer=function(F,se,ee){return ne.current.useReducer(F,se,ee)},gt.useRef=function(F){return ne.current.useRef(F)},gt.useState=function(F){return ne.current.useState(F)},gt.useSyncExternalStore=function(F,se,ee){return ne.current.useSyncExternalStore(F,se,ee)},gt.useTransition=function(){return ne.current.useTransition()},gt.version="18.3.1",gt}var zx;function Zv(){return zx||(zx=1,z0.exports=sN()),z0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function iN(){if(Vx)return ip;Vx=1;var n=Zv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,d,h){var f,g={},v=null,_=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(_=d.ref);for(f in d)r.call(d,f)&&!i.hasOwnProperty(f)&&(g[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:l,key:v,ref:_,props:g,_owner:s.current}}return ip.Fragment=t,ip.jsx=a,ip.jsxs=a,ip}var Hx;function oN(){return Hx||(Hx=1,U0.exports=iN()),U0.exports}var y=oN(),A=Zv();const ot=im(A),Ob=KC({__proto__:null,default:ot},[A]);var Wg={},V0={exports:{}},rs={},H0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function aN(){return Wx||(Wx=1,function(n){function e(z,re){var J=z.length;z.push(re);e:for(;0<J;){var F=J-1>>>1,se=z[F];if(0<s(se,re))z[F]=re,z[J]=se,J=F;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var re=z[0],J=z.pop();if(J!==re){z[0]=J;e:for(var F=0,se=z.length,ee=se>>>1;F<ee;){var Te=2*(F+1)-1,Me=z[Te],Pe=Te+1,ve=z[Pe];if(0>s(Me,J))Pe<se&&0>s(ve,Me)?(z[F]=ve,z[Pe]=J,F=Pe):(z[F]=Me,z[Te]=J,F=Te);else if(Pe<se&&0>s(ve,J))z[F]=ve,z[Pe]=J,F=Pe;else break e}}return re}function s(z,re){var J=z.sortIndex-re.sortIndex;return J!==0?J:z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var d=[],h=[],f=1,g=null,v=3,_=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(z){for(var re=t(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=z)r(h),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(h)}}function N(z){if(x=!1,M(z),!S)if(t(d)!==null)S=!0,q(L);else{var re=t(h);re!==null&&ne(N,re.startTime-z)}}function L(z,re){S=!1,x&&(x=!1,P(H),H=-1),_=!0;var J=v;try{for(M(re),g=t(d);g!==null&&(!(g.expirationTime>re)||z&&!oe());){var F=g.callback;if(typeof F=="function"){g.callback=null,v=g.priorityLevel;var se=F(g.expirationTime<=re);re=n.unstable_now(),typeof se=="function"?g.callback=se:g===t(d)&&r(d),M(re)}else r(d);g=t(d)}if(g!==null)var ee=!0;else{var Te=t(h);Te!==null&&ne(N,Te.startTime-re),ee=!1}return ee}finally{g=null,v=J,_=!1}}var B=!1,$=null,H=-1,Y=5,ue=-1;function oe(){return!(n.unstable_now()-ue<Y)}function ce(){if($!==null){var z=n.unstable_now();ue=z;var re=!0;try{re=$(!0,z)}finally{re?ae():(B=!1,$=null)}}else B=!1}var ae;if(typeof R=="function")ae=function(){R(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,W=me.port2;me.port1.onmessage=ce,ae=function(){W.postMessage(null)}}else ae=function(){E(ce,0)};function q(z){$=z,B||(B=!0,ae())}function ne(z,re){H=E(function(){z(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){S||_||(S=!0,q(L))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(z){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var J=v;v=re;try{return z()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=v;v=z;try{return re()}finally{v=J}},n.unstable_scheduleCallback=function(z,re,J){var F=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,z={id:f++,callback:re,priorityLevel:z,startTime:J,expirationTime:se,sortIndex:-1},J>F?(z.sortIndex=J,e(h,z),t(d)===null&&z===t(h)&&(x?(P(H),H=-1):x=!0,ne(N,J-F))):(z.sortIndex=se,e(d,z),S||_||(S=!0,q(L))),z},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(z){var re=v;return function(){var J=v;v=re;try{return z.apply(this,arguments)}finally{v=J}}}}(W0)),W0}var qx;function lN(){return qx||(qx=1,H0.exports=aN()),H0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function cN(){if(Gx)return rs;Gx=1;var n=Zv(),e=lN();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(s[o]=c,o=0;o<c.length;o++)r.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function v(o){return d.call(g,o)?!0:d.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function _(o,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,m,w){if(c===null||typeof c>"u"||_(o,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,m,w,C,k,D){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=D}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];E[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function R(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(P,R);E[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(P,R);E[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(P,R);E[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function M(o,c,m,w){var C=E.hasOwnProperty(c)?E[c]:null;(C!==null?C.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,m,C,w)&&(m=null),w||C===null?v(c)&&(m===null?o.removeAttribute(c):o.setAttribute(c,""+m)):C.mustUseProperty?o[C.propertyName]=m===null?C.type===3?!1:"":m:(c=C.attributeName,w=C.attributeNamespace,m===null?o.removeAttribute(c):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,w?o.setAttributeNS(w,c,m):o.setAttribute(c,m))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),B=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),oe=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),z=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,F;function se(o){if(F===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);F=c&&c[1]||""}return`
`+F+o}var ee=!1;function Te(o,c){if(!o||ee)return"";ee=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(he){var w=he}Reflect.construct(o,[],c)}else{try{c.call()}catch(he){w=he}o.call(c.prototype)}else{try{throw Error()}catch(he){w=he}o()}}catch(he){if(he&&w&&typeof he.stack=="string"){for(var C=he.stack.split(`
`),k=w.stack.split(`
`),D=C.length-1,U=k.length-1;1<=D&&0<=U&&C[D]!==k[U];)U--;for(;1<=D&&0<=U;D--,U--)if(C[D]!==k[U]){if(D!==1||U!==1)do if(D--,U--,0>U||C[D]!==k[U]){var G=`
`+C[D].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=D&&0<=U);break}}}finally{ee=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?se(o):""}function Me(o){switch(o.tag){case 5:return se(o.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return o=Te(o.type,!1),o;case 11:return o=Te(o.type.render,!1),o;case 1:return o=Te(o.type,!0),o;default:return""}}function Pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case $:return"Fragment";case B:return"Portal";case Y:return"Profiler";case H:return"StrictMode";case ae:return"Suspense";case me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case oe:return(o.displayName||"Context")+".Consumer";case ue:return(o._context.displayName||"Context")+".Provider";case ce:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case W:return c=o.displayName||null,c!==null?c:Pe(o.type)||"Memo";case q:c=o._payload,o=o._init;try{return Pe(o(c))}catch{}}return null}function ve(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(c);case 8:return c===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ne(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function He(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ye(o){var c=He(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),w=""+o[c];if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,k=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return C.call(this)},set:function(D){w=""+D,k.call(this,D)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(D){w=""+D},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function it(o){o._valueTracker||(o._valueTracker=Ye(o))}function Mt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return o&&(w=He(o)?o.checked?"true":"false":o.value),o=w,o!==m?(c.setValue(o),!0):!1}function un(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Xt(o,c){var m=c.checked;return J({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??o._wrapperState.initialChecked})}function $r(o,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Ne(c.value!=null?c.value:m),o._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function $i(o,c){c=c.checked,c!=null&&M(o,"checked",c,!1)}function Mn(o,c){$i(o,c);var m=Ne(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(w==="submit"||w==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Co(o,c.type,m):c.hasOwnProperty("defaultValue")&&Co(o,c.type,Ne(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Ll(o,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,m||c===o.value||(o.value=c),o.defaultValue=c}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function Co(o,c,m){(c!=="number"||un(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var Ur=Array.isArray;function Sn(o,c,m,w){if(o=o.options,c){c={};for(var C=0;C<m.length;C++)c["$"+m[C]]=!0;for(m=0;m<o.length;m++)C=c.hasOwnProperty("$"+o[m].value),o[m].selected!==C&&(o[m].selected=C),C&&w&&(o[m].defaultSelected=!0)}else{for(m=""+Ne(m),c=null,C=0;C<o.length;C++){if(o[C].value===m){o[C].selected=!0,w&&(o[C].defaultSelected=!0);return}c!==null||o[C].disabled||(c=o[C])}c!==null&&(c.selected=!0)}}function oi(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Eo(o,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(t(92));if(Ur(m)){if(1<m.length)throw Error(t(93));m=m[0]}c=m}c==null&&(c=""),m=c}o._wrapperState={initialValue:Ne(m)}}function gu(o,c){var m=Ne(c.value),w=Ne(c.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),c.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),w!=null&&(o.defaultValue=""+w)}function Ui(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function vu(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?vu(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var fs,Aa=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,C){MSApp.execUnsafeLocalFunction(function(){return o(c,m,w,C)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(fs=fs||document.createElement("div"),fs.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=fs.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function li(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jl=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(o){jl.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),ci[c]=ci[o]})});function Ca(o,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||ci.hasOwnProperty(o)&&ci[o]?(""+c).trim():c+"px"}function Ea(o,c){o=o.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,C=Ca(m,c[m],w);m==="float"&&(m="cssFloat"),w?o.setProperty(m,C):o[m]=C}}var Fl=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(o,c){if(c){if(Fl[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function To(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function $l(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ul=null,ui=null,di=null;function yu(o){if(o=Vn(o)){if(typeof Ul!="function")throw Error(t(280));var c=o.stateNode;c&&(c=Zu(c),Ul(o.stateNode,o.type,c))}}function wu(o){ui?di?di.push(o):di=[o]:ui=o}function bu(){if(ui){var o=ui,c=di;if(di=ui=null,yu(o),c)for(o=0;o<c.length;o++)yu(c[o])}}function _u(o,c){return o(c)}function zl(){}var Vl=!1;function xu(o,c,m){if(Vl)return o(c,m);Vl=!0;try{return _u(o,c,m)}finally{Vl=!1,(ui!==null||di!==null)&&(zl(),bu())}}function Po(o,c){var m=o.stateNode;if(m===null)return null;var w=Zu(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(t(231,c,typeof m));return m}var Ro=!1;if(l)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Ro=!1}function Su(o,c,m,w,C,k,D,U,G){var he=Array.prototype.slice.call(arguments,3);try{c.apply(m,he)}catch(Ae){this.onError(Ae)}}var ka=!1,Hl=null,Ta=!1,fe=null,Q={onError:function(o){ka=!0,Hl=o}};function pe(o,c,m,w,C,k,D,U,G){ka=!1,Hl=null,Su.apply(Q,arguments)}function _e(o,c,m,w,C,k,D,U,G){if(pe.apply(this,arguments),ka){if(ka){var he=Hl;ka=!1,Hl=null}else throw Error(t(198));Ta||(Ta=!0,fe=he)}}function ye(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function Be(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Et(o){if(ye(o)!==o)throw Error(t(188))}function In(o){var c=o.alternate;if(!c){if(c=ye(o),c===null)throw Error(t(188));return c!==o?null:o}for(var m=o,w=c;;){var C=m.return;if(C===null)break;var k=C.alternate;if(k===null){if(w=C.return,w!==null){m=w;continue}break}if(C.child===k.child){for(k=C.child;k;){if(k===m)return Et(C),o;if(k===w)return Et(C),c;k=k.sibling}throw Error(t(188))}if(m.return!==w.return)m=C,w=k;else{for(var D=!1,U=C.child;U;){if(U===m){D=!0,m=C,w=k;break}if(U===w){D=!0,w=C,m=k;break}U=U.sibling}if(!D){for(U=k.child;U;){if(U===m){D=!0,m=k,w=C;break}if(U===w){D=!0,w=k,m=C;break}U=U.sibling}if(!D)throw Error(t(189))}}if(m.alternate!==w)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?o:c}function Ds(o){return o=In(o),o!==null?Io(o):null}function Io(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Io(o);if(c!==null)return c;o=o.sibling}return null}var Au=e.unstable_scheduleCallback,bm=e.unstable_cancelCallback,Cu=e.unstable_shouldYield,$y=e.unstable_requestPaint,Ht=e.unstable_now,Uy=e.unstable_getCurrentPriorityLevel,jh=e.unstable_ImmediatePriority,_m=e.unstable_UserBlockingPriority,Wl=e.unstable_NormalPriority,xm=e.unstable_LowPriority,Fh=e.unstable_IdlePriority,Eu=null,Ns=null;function zy(o){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(Eu,o,void 0,(o.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:Cm,Sm=Math.log,Am=Math.LN2;function Cm(o){return o>>>=0,o===0?32:31-(Sm(o)/Am|0)|0}var Pa=64,ku=4194304;function Ra(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Do(o,c){var m=o.pendingLanes;if(m===0)return 0;var w=0,C=o.suspendedLanes,k=o.pingedLanes,D=m&268435455;if(D!==0){var U=D&~C;U!==0?w=Ra(U):(k&=D,k!==0&&(w=Ra(k)))}else D=m&~C,D!==0?w=Ra(D):k!==0&&(w=Ra(k));if(w===0)return 0;if(c!==0&&c!==w&&(c&C)===0&&(C=w&-w,k=c&-c,C>=k||C===16&&(k&4194240)!==0))return c;if((w&4)!==0&&(w|=m&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=w;0<c;)m=31-ps(c),C=1<<m,w|=o[m],c&=~C;return w}function Em(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vy(o,c){for(var m=o.suspendedLanes,w=o.pingedLanes,C=o.expirationTimes,k=o.pendingLanes;0<k;){var D=31-ps(k),U=1<<D,G=C[D];G===-1?((U&m)===0||(U&w)!==0)&&(C[D]=Em(U,c)):G<=c&&(o.expiredLanes|=U),k&=~U}}function Tu(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Bh(){var o=Pa;return Pa<<=1,(Pa&4194240)===0&&(Pa=64),o}function ql(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function Gl(o,c,m){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ps(c),o[c]=m}function km(o,c){var m=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var w=o.eventTimes;for(o=o.expirationTimes;0<m;){var C=31-ps(m),k=1<<C;c[C]=0,w[C]=-1,o[C]=-1,m&=~k}}function Kl(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var w=31-ps(m),C=1<<w;C&c|o[w]&c&&(o[w]|=c),m&=~C}}var kt=0;function No(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var $h,Pu,Tm,Uh,zh,Ru=!1,Yl=[],zi=null,Vi=null,Hi=null,Ma=new Map,Xl=new Map,Wi=[],Hy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pm(o,c){switch(o){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Ma.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(c.pointerId)}}function Oo(o,c,m,w,C,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:k,targetContainers:[C]},c!==null&&(c=Vn(c),c!==null&&Pu(c)),o):(o.eventSystemFlags|=w,c=o.targetContainers,C!==null&&c.indexOf(C)===-1&&c.push(C),o)}function Wy(o,c,m,w,C){switch(c){case"focusin":return zi=Oo(zi,o,c,m,w,C),!0;case"dragenter":return Vi=Oo(Vi,o,c,m,w,C),!0;case"mouseover":return Hi=Oo(Hi,o,c,m,w,C),!0;case"pointerover":var k=C.pointerId;return Ma.set(k,Oo(Ma.get(k)||null,o,c,m,w,C)),!0;case"gotpointercapture":return k=C.pointerId,Xl.set(k,Oo(Xl.get(k)||null,o,c,m,w,C)),!0}return!1}function Rm(o){var c=Fs(o.target);if(c!==null){var m=ye(c);if(m!==null){if(c=m.tag,c===13){if(c=Be(m),c!==null){o.blockedOn=c,zh(o.priority,function(){Tm(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Mu(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=Nu(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var w=new m.constructor(m.type,m);Bl=w,m.target.dispatchEvent(w),Bl=null}else return c=Vn(m),c!==null&&Pu(c),o.blockedOn=m,!1;c.shift()}return!0}function Mm(o,c,m){Mu(o)&&m.delete(c)}function qy(){Ru=!1,zi!==null&&Mu(zi)&&(zi=null),Vi!==null&&Mu(Vi)&&(Vi=null),Hi!==null&&Mu(Hi)&&(Hi=null),Ma.forEach(Mm),Xl.forEach(Mm)}function It(o,c){o.blockedOn===c&&(o.blockedOn=null,Ru||(Ru=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qy)))}function Pt(o){function c(C){return It(C,o)}if(0<Yl.length){It(Yl[0],o);for(var m=1;m<Yl.length;m++){var w=Yl[m];w.blockedOn===o&&(w.blockedOn=null)}}for(zi!==null&&It(zi,o),Vi!==null&&It(Vi,o),Hi!==null&&It(Hi,o),Ma.forEach(c),Xl.forEach(c),m=0;m<Wi.length;m++)w=Wi[m],w.blockedOn===o&&(w.blockedOn=null);for(;0<Wi.length&&(m=Wi[0],m.blockedOn===null);)Rm(m),m.blockedOn===null&&Wi.shift()}var Ia=N.ReactCurrentBatchConfig,Iu=!0;function Gy(o,c,m,w){var C=kt,k=Ia.transition;Ia.transition=null;try{kt=1,Vh(o,c,m,w)}finally{kt=C,Ia.transition=k}}function Ky(o,c,m,w){var C=kt,k=Ia.transition;Ia.transition=null;try{kt=4,Vh(o,c,m,w)}finally{kt=C,Ia.transition=k}}function Vh(o,c,m,w){if(Iu){var C=Nu(o,c,m,w);if(C===null)af(o,c,w,Du,m),Pm(o,w);else if(Wy(C,o,c,m,w))w.stopPropagation();else if(Pm(o,w),c&4&&-1<Hy.indexOf(o)){for(;C!==null;){var k=Vn(C);if(k!==null&&$h(k),k=Nu(o,c,m,w),k===null&&af(o,c,w,Du,m),k===C)break;C=k}C!==null&&w.stopPropagation()}else af(o,c,w,null,m)}}var Du=null;function Nu(o,c,m,w){if(Du=null,o=$l(w),o=Fs(o),o!==null)if(c=ye(o),c===null)o=null;else if(m=c.tag,m===13){if(o=Be(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Du=o,null}function Im(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uy()){case jh:return 1;case _m:return 4;case Wl:case xm:return 16;case Fh:return 536870912;default:return 16}default:return 16}}var Wt=null,Ql=null,Os=null;function Hh(){if(Os)return Os;var o,c=Ql,m=c.length,w,C="value"in Wt?Wt.value:Wt.textContent,k=C.length;for(o=0;o<m&&c[o]===C[o];o++);var D=m-o;for(w=1;w<=D&&c[m-w]===C[k-w];w++);return Os=C.slice(o,1<w?1-w:void 0)}function Da(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function er(){return!0}function Wh(){return!1}function ur(o){function c(m,w,C,k,D){this._reactName=m,this._targetInst=C,this.type=w,this.nativeEvent=k,this.target=D,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(m=o[U],this[U]=m?m(k):k[U]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?er:Wh,this.isPropagationStopped=Wh,this}return J(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),c}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=ur(Lo),Na=J({},Lo,{view:0,detail:0}),Dm=ur(Na),tr,qh,Un,Lu=J({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Un&&(Un&&o.type==="mousemove"?(tr=o.screenX-Un.screenX,qh=o.screenY-Un.screenY):qh=tr=0,Un=o),tr)},movementY:function(o){return"movementY"in o?o.movementY:qh}}),Gh=ur(Lu),qi=J({},Lu,{dataTransfer:0}),ju=ur(qi),Kh=J({},Na,{relatedTarget:0}),Ft=ur(Kh),Gi=J({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Yh=ur(Gi),Yy=J({},Lo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Xh=ur(Yy),Xy=J({},Lo,{data:0}),Nm=ur(Xy),Qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Om={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oa(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Fu[o])?!!c[o]:!1}function Qh(){return Oa}var Lm=J({},Na,{key:function(o){if(o.key){var c=Qy[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Da(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Om[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(o){return o.type==="keypress"?Da(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Da(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),jm=ur(Lm),Jh=J({},Lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bu=ur(Jh),Fm=J({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),Jy=ur(Fm),Zh=J({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ef=ur(Zh),Zy=J({},Lu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Bm=ur(Zy),Sr=[9,13,27,32],Jl=l&&"CompositionEvent"in window,hi=null;l&&"documentMode"in document&&(hi=document.documentMode);var $m=l&&"TextEvent"in window&&!hi,tf=l&&(!Jl||hi&&8<hi&&11>=hi),Um=" ",zm=!1;function Vm(o,c){switch(o){case"keyup":return Sr.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hm(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var La=!1;function ja(o,c){switch(o){case"compositionend":return Hm(c);case"keypress":return c.which!==32?null:(zm=!0,Um);case"textInput":return o=c.data,o===Um&&zm?null:o;default:return null}}function e0(o,c){if(La)return o==="compositionend"||!Jl&&Vm(o,c)?(o=Hh(),Os=Ql=Wt=null,La=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return tf&&c.locale!=="ko"?null:c.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!t0[o.type]:c==="textarea"}function nf(o,c,m,w){wu(w),c=Yu(c,"onChange"),0<c.length&&(m=new Ou("onChange","change",null,m,w),o.push({event:m,listeners:c}))}var zr=null,Ki=null;function n0(o){Qm(o,0)}function Uu(o){var c=lt(o);if(Mt(c))return o}function r0(o,c){if(o==="change")return c}var jo=!1;if(l){var Ar;if(l){var zu="oninput"in document;if(!zu){var Wm=document.createElement("div");Wm.setAttribute("oninput","return;"),zu=typeof Wm.oninput=="function"}Ar=zu}else Ar=!1;jo=Ar&&(!document.documentMode||9<document.documentMode)}function qm(){zr&&(zr.detachEvent("onpropertychange",Gm),Ki=zr=null)}function Gm(o){if(o.propertyName==="value"&&Uu(Ki)){var c=[];nf(c,Ki,o,$l(o)),xu(n0,c)}}function s0(o,c,m){o==="focusin"?(qm(),zr=c,Ki=m,zr.attachEvent("onpropertychange",Gm)):o==="focusout"&&qm()}function i0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Uu(Ki)}function Fa(o,c){if(o==="click")return Uu(c)}function Z(o,c){if(o==="input"||o==="change")return Uu(c)}function ge(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var de=typeof Object.is=="function"?Object.is:ge;function Ie(o,c){if(de(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var C=m[w];if(!d.call(c,C)||!de(o[C],c[C]))return!1}return!0}function et(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function St(o,c){var m=et(o);o=0;for(var w;m;){if(m.nodeType===3){if(w=o+m.textContent.length,o<=c&&w>=c)return{node:m,offset:c-o};o=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=et(m)}}function dn(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?dn(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Nt(){for(var o=window,c=un();c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=un(o.document)}return c}function Zl(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function o0(o){var c=Nt(),m=o.focusedElem,w=o.selectionRange;if(c!==m&&m&&m.ownerDocument&&dn(m.ownerDocument.documentElement,m)){if(w!==null&&Zl(m)){if(c=w.start,o=w.end,o===void 0&&(o=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(o,m.value.length);else if(o=(c=m.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var C=m.textContent.length,k=Math.min(w.start,C);w=w.end===void 0?k:Math.min(w.end,C),!o.extend&&k>w&&(C=w,w=k,k=C),C=St(m,k);var D=St(m,w);C&&D&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(c=c.createRange(),c.setStart(C.node,C.offset),o.removeAllRanges(),k>w?(o.addRange(c),o.extend(D.node,D.offset)):(c.setEnd(D.node,D.offset),o.addRange(c)))}}for(c=[],o=m;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)o=c[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Vr=l&&"documentMode"in document&&11>=document.documentMode,fi=null,rf=null,Ls=null,Ba=!1;function ec(o,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ba||fi==null||fi!==un(w)||(w=fi,"selectionStart"in w&&Zl(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ls&&Ie(Ls,w)||(Ls=w,w=Yu(rf,"onSelect"),0<w.length&&(c=new Ou("onSelect","select",null,c,m),o.push({event:c,listeners:w}),c.target=fi)))}function At(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var $a={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionend:At("Transition","TransitionEnd")},Vu={},tc={};l&&(tc=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Hu(o){if(Vu[o])return Vu[o];if(!$a[o])return o;var c=$a[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in tc)return Vu[o]=c[m];return o}var Km=Hu("animationend"),Ym=Hu("animationiteration"),nc=Hu("animationstart"),pi=Hu("transitionend"),rc=new Map,sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(o,c){rc.set(o,c),i(c,[o])}for(var Wu=0;Wu<sf.length;Wu++){var qu=sf[Wu],Gu=qu.toLowerCase(),Xm=qu[0].toUpperCase()+qu.slice(1);ms(Gu,"on"+Xm)}ms(Km,"onAnimationEnd"),ms(Ym,"onAnimationIteration"),ms(nc,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(pi,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=new Set("cancel close invalid load scroll toggle".split(" ").concat(mi));function sc(o,c,m){var w=o.type||"unknown-event";o.currentTarget=m,_e(w,c,void 0,o),o.currentTarget=null}function Qm(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var w=o[m],C=w.event;w=w.listeners;e:{var k=void 0;if(c)for(var D=w.length-1;0<=D;D--){var U=w[D],G=U.instance,he=U.currentTarget;if(U=U.listener,G!==k&&C.isPropagationStopped())break e;sc(C,U,he),k=G}else for(D=0;D<w.length;D++){if(U=w[D],G=U.instance,he=U.currentTarget,U=U.listener,G!==k&&C.isPropagationStopped())break e;sc(C,U,he),k=G}}}if(Ta)throw o=fe,Ta=!1,fe=null,o}function $t(o,c){var m=c[Ju];m===void 0&&(m=c[Ju]=new Set);var w=o+"__bubble";m.has(w)||(Ku(c,o,2,!1),m.add(w))}function of(o,c,m){var w=0;c&&(w|=4),Ku(m,o,w,c)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Yi(o){if(!o[Bo]){o[Bo]=!0,r.forEach(function(m){m!=="selectionchange"&&(Fo.has(m)||of(m,!1,o),of(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Bo]||(c[Bo]=!0,of("selectionchange",!1,c))}}function Ku(o,c,m,w){switch(Im(c)){case 1:var C=Gy;break;case 4:C=Ky;break;default:C=Vh}m=C.bind(null,c,m,o),C=void 0,!Ro||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(C=!0),w?C!==void 0?o.addEventListener(c,m,{capture:!0,passive:C}):o.addEventListener(c,m,!0):C!==void 0?o.addEventListener(c,m,{passive:C}):o.addEventListener(c,m,!1)}function af(o,c,m,w,C){var k=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var D=w.tag;if(D===3||D===4){var U=w.stateNode.containerInfo;if(U===C||U.nodeType===8&&U.parentNode===C)break;if(D===4)for(D=w.return;D!==null;){var G=D.tag;if((G===3||G===4)&&(G=D.stateNode.containerInfo,G===C||G.nodeType===8&&G.parentNode===C))return;D=D.return}for(;U!==null;){if(D=Fs(U),D===null)return;if(G=D.tag,G===5||G===6){w=k=D;continue e}U=U.parentNode}}w=w.return}xu(function(){var he=k,Ae=$l(m),Ee=[];e:{var xe=rc.get(o);if(xe!==void 0){var De=Ou,Le=o;switch(o){case"keypress":if(Da(m)===0)break e;case"keydown":case"keyup":De=jm;break;case"focusin":Le="focus",De=Ft;break;case"focusout":Le="blur",De=Ft;break;case"beforeblur":case"afterblur":De=Ft;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=Jy;break;case Km:case Ym:case nc:De=Yh;break;case pi:De=ef;break;case"scroll":De=Dm;break;case"wheel":De=Bm;break;case"copy":case"cut":case"paste":De=Xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Bu}var je=(c&4)!==0,sn=!je&&o==="scroll",ie=je?xe!==null?xe+"Capture":null:xe;je=[];for(var X=he,le;X!==null;){le=X;var ke=le.stateNode;if(le.tag===5&&ke!==null&&(le=ke,ie!==null&&(ke=Po(X,ie),ke!=null&&je.push(Ua(X,ke,le)))),sn)break;X=X.return}0<je.length&&(xe=new De(xe,Le,null,m,Ae),Ee.push({event:xe,listeners:je}))}}if((c&7)===0){e:{if(xe=o==="mouseover"||o==="pointerover",De=o==="mouseout"||o==="pointerout",xe&&m!==Bl&&(Le=m.relatedTarget||m.fromElement)&&(Fs(Le)||Le[Cr]))break e;if((De||xe)&&(xe=Ae.window===Ae?Ae:(xe=Ae.ownerDocument)?xe.defaultView||xe.parentWindow:window,De?(Le=m.relatedTarget||m.toElement,De=he,Le=Le?Fs(Le):null,Le!==null&&(sn=ye(Le),Le!==sn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(De=null,Le=he),De!==Le)){if(je=Gh,ke="onMouseLeave",ie="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(je=Bu,ke="onPointerLeave",ie="onPointerEnter",X="pointer"),sn=De==null?xe:lt(De),le=Le==null?xe:lt(Le),xe=new je(ke,X+"leave",De,m,Ae),xe.target=sn,xe.relatedTarget=le,ke=null,Fs(Ae)===he&&(je=new je(ie,X+"enter",Le,m,Ae),je.target=le,je.relatedTarget=sn,ke=je),sn=ke,De&&Le)t:{for(je=De,ie=Le,X=0,le=je;le;le=za(le))X++;for(le=0,ke=ie;ke;ke=za(ke))le++;for(;0<X-le;)je=za(je),X--;for(;0<le-X;)ie=za(ie),le--;for(;X--;){if(je===ie||ie!==null&&je===ie.alternate)break t;je=za(je),ie=za(ie)}je=null}else je=null;De!==null&&hn(Ee,xe,De,je,!1),Le!==null&&sn!==null&&hn(Ee,sn,Le,je,!0)}}e:{if(xe=he?lt(he):window,De=xe.nodeName&&xe.nodeName.toLowerCase(),De==="select"||De==="input"&&xe.type==="file")var $e=r0;else if($u(xe))if(jo)$e=Z;else{$e=i0;var Ge=s0}else(De=xe.nodeName)&&De.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&($e=Fa);if($e&&($e=$e(o,he))){nf(Ee,$e,m,Ae);break e}Ge&&Ge(o,xe,he),o==="focusout"&&(Ge=xe._wrapperState)&&Ge.controlled&&xe.type==="number"&&Co(xe,"number",xe.value)}switch(Ge=he?lt(he):window,o){case"focusin":($u(Ge)||Ge.contentEditable==="true")&&(fi=Ge,rf=he,Ls=null);break;case"focusout":Ls=rf=fi=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,ec(Ee,m,Ae);break;case"selectionchange":if(Vr)break;case"keydown":case"keyup":ec(Ee,m,Ae)}var We;if(Jl)e:{switch(o){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else La?Vm(o,m)&&(Xe="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Xe="onCompositionStart");Xe&&(tf&&m.locale!=="ko"&&(La||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&La&&(We=Hh()):(Wt=Ae,Ql="value"in Wt?Wt.value:Wt.textContent,La=!0)),Ge=Yu(he,Xe),0<Ge.length&&(Xe=new Nm(Xe,o,null,m,Ae),Ee.push({event:Xe,listeners:Ge}),We?Xe.data=We:(We=Hm(m),We!==null&&(Xe.data=We)))),(We=$m?ja(o,m):e0(o,m))&&(he=Yu(he,"onBeforeInput"),0<he.length&&(Ae=new Nm("onBeforeInput","beforeinput",null,m,Ae),Ee.push({event:Ae,listeners:he}),Ae.data=We))}Qm(Ee,c)})}function Ua(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Yu(o,c){for(var m=c+"Capture",w=[];o!==null;){var C=o,k=C.stateNode;C.tag===5&&k!==null&&(C=k,k=Po(o,m),k!=null&&w.unshift(Ua(o,k,C)),k=Po(o,c),k!=null&&w.push(Ua(o,k,C))),o=o.return}return w}function za(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function hn(o,c,m,w,C){for(var k=c._reactName,D=[];m!==null&&m!==w;){var U=m,G=U.alternate,he=U.stateNode;if(G!==null&&G===w)break;U.tag===5&&he!==null&&(U=he,C?(G=Po(m,k),G!=null&&D.unshift(Ua(m,G,U))):C||(G=Po(m,k),G!=null&&D.push(Ua(m,G,U)))),m=m.return}D.length!==0&&o.push({event:c,listeners:D})}var zn=/\r\n?/g,a0=/\u0000|\uFFFD/g;function Jm(o){return(typeof o=="string"?o:""+o).replace(zn,`
`).replace(a0,"")}function ic(o,c,m){if(c=Jm(c),Jm(o)!==c&&m)throw Error(t(425))}function Xu(){}var oc=null,$o=null;function ac(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Xi=typeof setTimeout=="function"?setTimeout:void 0,lc=typeof clearTimeout=="function"?clearTimeout:void 0,Va=typeof Promise=="function"?Promise:void 0,Qu=typeof queueMicrotask=="function"?queueMicrotask:typeof Va<"u"?function(o){return Va.resolve(null).then(o).catch(Ha)}:Xi;function Ha(o){setTimeout(function(){throw o})}function lf(o,c){var m=c,w=0;do{var C=m.nextSibling;if(o.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(w===0){o.removeChild(C),Pt(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=C}while(m);Pt(c)}function Qi(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Zm(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),js="__reactFiber$"+Wa,Ji="__reactProps$"+Wa,Cr="__reactContainer$"+Wa,Ju="__reactEvents$"+Wa,O="__reactListeners$"+Wa,qa="__reactHandles$"+Wa;function Fs(o){var c=o[js];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Cr]||m[js]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=Zm(o);o!==null;){if(m=o[js])return m;o=Zm(o)}return c}o=m,m=o.parentNode}return null}function Vn(o){return o=o[js]||o[Cr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function lt(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Zu(o){return o[Ji]||null}var cf=[],Ga=-1;function dr(o){return{current:o}}function Ut(o){0>Ga||(o.current=cf[Ga],cf[Ga]=null,Ga--)}function Bt(o,c){Ga++,cf[Ga]=o.current,o.current=c}var Zi={},Hn=dr(Zi),hr=dr(!1),nr=Zi;function Ka(o,c){var m=o.type.contextTypes;if(!m)return Zi;var w=o.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var C={},k;for(k in m)C[k]=c[k];return w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=C),C}function fr(o){return o=o.childContextTypes,o!=null}function ed(){Ut(hr),Ut(Hn)}function eg(o,c,m){if(Hn.current!==Zi)throw Error(t(168));Bt(Hn,c),Bt(hr,m)}function tg(o,c,m){var w=o.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var C in w)if(!(C in c))throw Error(t(108,ve(o)||"Unknown",C));return J({},m,w)}function Hr(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Zi,nr=Hn.current,Bt(Hn,o),Bt(hr,hr.current),!0}function ng(o,c,m){var w=o.stateNode;if(!w)throw Error(t(169));m?(o=tg(o,c,nr),w.__reactInternalMemoizedMergedChildContext=o,Ut(hr),Ut(Hn),Bt(Hn,o)):Ut(hr),Bt(hr,m)}var gi=null,td=!1,uf=!1;function rg(o){gi===null?gi=[o]:gi.push(o)}function Uo(o){td=!0,rg(o)}function eo(){if(!uf&&gi!==null){uf=!0;var o=0,c=kt;try{var m=gi;for(kt=1;o<m.length;o++){var w=m[o];do w=w(!0);while(w!==null)}gi=null,td=!1}catch(C){throw gi!==null&&(gi=gi.slice(o+1)),Au(jh,eo),C}finally{kt=c,uf=!1}}return null}var Ya=[],Wn=0,nd=null,rd=0,Wr=[],qr=0,zo=null,Bs=1,$s="";function Vo(o,c){Ya[Wn++]=rd,Ya[Wn++]=nd,nd=o,rd=c}function sg(o,c,m){Wr[qr++]=Bs,Wr[qr++]=$s,Wr[qr++]=zo,zo=o;var w=Bs;o=$s;var C=32-ps(w)-1;w&=~(1<<C),m+=1;var k=32-ps(c)+C;if(30<k){var D=C-C%5;k=(w&(1<<D)-1).toString(32),w>>=D,C-=D,Bs=1<<32-ps(c)+C|m<<C|w,$s=k+o}else Bs=1<<k|m<<C|w,$s=o}function cc(o){o.return!==null&&(Vo(o,1),sg(o,1,0))}function Ho(o){for(;o===nd;)nd=Ya[--Wn],Ya[Wn]=null,rd=Ya[--Wn],Ya[Wn]=null;for(;o===zo;)zo=Wr[--qr],Wr[qr]=null,$s=Wr[--qr],Wr[qr]=null,Bs=Wr[--qr],Wr[qr]=null}var qn=null,Er=null,zt=!1,gs=null;function Us(o,c){var m=Zr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=o,c=o.deletions,c===null?(o.deletions=[m],o.flags|=16):c.push(m)}function sd(o,c){switch(o.tag){case 5:var m=o.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,qn=o,Er=Qi(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,qn=o,Er=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=zo!==null?{id:Bs,overflow:$s}:null,o.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Zr(18,null,null,0),m.stateNode=c,m.return=o,o.child=m,qn=o,Er=null,!0):!1;default:return!1}}function vi(o){return(o.mode&1)!==0&&(o.flags&128)===0}function pr(o){if(zt){var c=Er;if(c){var m=c;if(!sd(o,c)){if(vi(o))throw Error(t(418));c=Qi(m.nextSibling);var w=qn;c&&sd(o,c)?Us(w,m):(o.flags=o.flags&-4097|2,zt=!1,qn=o)}}else{if(vi(o))throw Error(t(418));o.flags=o.flags&-4097|2,zt=!1,qn=o}}}function ig(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;qn=o}function uc(o){if(o!==qn)return!1;if(!zt)return ig(o),zt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!ac(o.type,o.memoizedProps)),c&&(c=Er)){if(vi(o))throw df(),Error(t(418));for(;c;)Us(o,c),c=Qi(c.nextSibling)}if(ig(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(c===0){Er=Qi(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}o=o.nextSibling}Er=null}}else Er=qn?Qi(o.stateNode.nextSibling):null;return!0}function df(){for(var o=Er;o;)o=Qi(o.nextSibling)}function zs(){Er=qn=null,zt=!1}function Vs(o){gs===null?gs=[o]:gs.push(o)}var og=N.ReactCurrentBatchConfig;function dc(o,c,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var w=m.stateNode}if(!w)throw Error(t(147,o));var C=w,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(D){var U=C.refs;D===null?delete U[k]:U[k]=D},c._stringRef=k,c)}if(typeof o!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,o))}return o}function Wo(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function ag(o){var c=o._init;return c(o._payload)}function hf(o){function c(ie,X){if(o){var le=ie.deletions;le===null?(ie.deletions=[X],ie.flags|=16):le.push(X)}}function m(ie,X){if(!o)return null;for(;X!==null;)c(ie,X),X=X.sibling;return null}function w(ie,X){for(ie=new Map;X!==null;)X.key!==null?ie.set(X.key,X):ie.set(X.index,X),X=X.sibling;return ie}function C(ie,X){return ie=Ss(ie,X),ie.index=0,ie.sibling=null,ie}function k(ie,X,le){return ie.index=le,o?(le=ie.alternate,le!==null?(le=le.index,le<X?(ie.flags|=2,X):le):(ie.flags|=2,X)):(ie.flags|=1048576,X)}function D(ie){return o&&ie.alternate===null&&(ie.flags|=2),ie}function U(ie,X,le,ke){return X===null||X.tag!==6?(X=Jf(le,ie.mode,ke),X.return=ie,X):(X=C(X,le),X.return=ie,X)}function G(ie,X,le,ke){var $e=le.type;return $e===$?Ae(ie,X,le.props.children,ke,le.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&ag($e)===X.type)?(ke=C(X,le.props),ke.ref=dc(ie,X,le),ke.return=ie,ke):(ke=Bd(le.type,le.key,le.props,null,ie.mode,ke),ke.ref=dc(ie,X,le),ke.return=ie,ke)}function he(ie,X,le,ke){return X===null||X.tag!==4||X.stateNode.containerInfo!==le.containerInfo||X.stateNode.implementation!==le.implementation?(X=Zf(le,ie.mode,ke),X.return=ie,X):(X=C(X,le.children||[]),X.return=ie,X)}function Ae(ie,X,le,ke,$e){return X===null||X.tag!==7?(X=na(le,ie.mode,ke,$e),X.return=ie,X):(X=C(X,le),X.return=ie,X)}function Ee(ie,X,le){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Jf(""+X,ie.mode,le),X.return=ie,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case L:return le=Bd(X.type,X.key,X.props,null,ie.mode,le),le.ref=dc(ie,null,X),le.return=ie,le;case B:return X=Zf(X,ie.mode,le),X.return=ie,X;case q:var ke=X._init;return Ee(ie,ke(X._payload),le)}if(Ur(X)||re(X))return X=na(X,ie.mode,le,null),X.return=ie,X;Wo(ie,X)}return null}function xe(ie,X,le,ke){var $e=X!==null?X.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return $e!==null?null:U(ie,X,""+le,ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case L:return le.key===$e?G(ie,X,le,ke):null;case B:return le.key===$e?he(ie,X,le,ke):null;case q:return $e=le._init,xe(ie,X,$e(le._payload),ke)}if(Ur(le)||re(le))return $e!==null?null:Ae(ie,X,le,ke,null);Wo(ie,le)}return null}function De(ie,X,le,ke,$e){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ie=ie.get(le)||null,U(X,ie,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case L:return ie=ie.get(ke.key===null?le:ke.key)||null,G(X,ie,ke,$e);case B:return ie=ie.get(ke.key===null?le:ke.key)||null,he(X,ie,ke,$e);case q:var Ge=ke._init;return De(ie,X,le,Ge(ke._payload),$e)}if(Ur(ke)||re(ke))return ie=ie.get(le)||null,Ae(X,ie,ke,$e,null);Wo(X,ke)}return null}function Le(ie,X,le,ke){for(var $e=null,Ge=null,We=X,Xe=X=0,En=null;We!==null&&Xe<le.length;Xe++){We.index>Xe?(En=We,We=null):En=We.sibling;var Ct=xe(ie,We,le[Xe],ke);if(Ct===null){We===null&&(We=En);break}o&&We&&Ct.alternate===null&&c(ie,We),X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct,We=En}if(Xe===le.length)return m(ie,We),zt&&Vo(ie,Xe),$e;if(We===null){for(;Xe<le.length;Xe++)We=Ee(ie,le[Xe],ke),We!==null&&(X=k(We,X,Xe),Ge===null?$e=We:Ge.sibling=We,Ge=We);return zt&&Vo(ie,Xe),$e}for(We=w(ie,We);Xe<le.length;Xe++)En=De(We,ie,Xe,le[Xe],ke),En!==null&&(o&&En.alternate!==null&&We.delete(En.key===null?Xe:En.key),X=k(En,X,Xe),Ge===null?$e=En:Ge.sibling=En,Ge=En);return o&&We.forEach(function(fo){return c(ie,fo)}),zt&&Vo(ie,Xe),$e}function je(ie,X,le,ke){var $e=re(le);if(typeof $e!="function")throw Error(t(150));if(le=$e.call(le),le==null)throw Error(t(151));for(var Ge=$e=null,We=X,Xe=X=0,En=null,Ct=le.next();We!==null&&!Ct.done;Xe++,Ct=le.next()){We.index>Xe?(En=We,We=null):En=We.sibling;var fo=xe(ie,We,Ct.value,ke);if(fo===null){We===null&&(We=En);break}o&&We&&fo.alternate===null&&c(ie,We),X=k(fo,X,Xe),Ge===null?$e=fo:Ge.sibling=fo,Ge=fo,We=En}if(Ct.done)return m(ie,We),zt&&Vo(ie,Xe),$e;if(We===null){for(;!Ct.done;Xe++,Ct=le.next())Ct=Ee(ie,Ct.value,ke),Ct!==null&&(X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return zt&&Vo(ie,Xe),$e}for(We=w(ie,We);!Ct.done;Xe++,Ct=le.next())Ct=De(We,ie,Xe,Ct.value,ke),Ct!==null&&(o&&Ct.alternate!==null&&We.delete(Ct.key===null?Xe:Ct.key),X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return o&&We.forEach(function(T0){return c(ie,T0)}),zt&&Vo(ie,Xe),$e}function sn(ie,X,le,ke){if(typeof le=="object"&&le!==null&&le.type===$&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case L:e:{for(var $e=le.key,Ge=X;Ge!==null;){if(Ge.key===$e){if($e=le.type,$e===$){if(Ge.tag===7){m(ie,Ge.sibling),X=C(Ge,le.props.children),X.return=ie,ie=X;break e}}else if(Ge.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===q&&ag($e)===Ge.type){m(ie,Ge.sibling),X=C(Ge,le.props),X.ref=dc(ie,Ge,le),X.return=ie,ie=X;break e}m(ie,Ge);break}else c(ie,Ge);Ge=Ge.sibling}le.type===$?(X=na(le.props.children,ie.mode,ke,le.key),X.return=ie,ie=X):(ke=Bd(le.type,le.key,le.props,null,ie.mode,ke),ke.ref=dc(ie,X,le),ke.return=ie,ie=ke)}return D(ie);case B:e:{for(Ge=le.key;X!==null;){if(X.key===Ge)if(X.tag===4&&X.stateNode.containerInfo===le.containerInfo&&X.stateNode.implementation===le.implementation){m(ie,X.sibling),X=C(X,le.children||[]),X.return=ie,ie=X;break e}else{m(ie,X);break}else c(ie,X);X=X.sibling}X=Zf(le,ie.mode,ke),X.return=ie,ie=X}return D(ie);case q:return Ge=le._init,sn(ie,X,Ge(le._payload),ke)}if(Ur(le))return Le(ie,X,le,ke);if(re(le))return je(ie,X,le,ke);Wo(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,X!==null&&X.tag===6?(m(ie,X.sibling),X=C(X,le),X.return=ie,ie=X):(m(ie,X),X=Jf(le,ie.mode,ke),X.return=ie,ie=X),D(ie)):m(ie,X)}return sn}var tn=hf(!0),id=hf(!1),hc=dr(null),kr=null,to=null,Xa=null;function yi(){Xa=to=kr=null}function od(o){var c=hc.current;Ut(hc),o._currentValue=c}function Dn(o,c,m){for(;o!==null;){var w=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),o===m)break;o=o.return}}function no(o,c){kr=o,Xa=to=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(sr=!0),o.firstContext=null)}function Gr(o){var c=o._currentValue;if(Xa!==o)if(o={context:o,memoizedValue:c,next:null},to===null){if(kr===null)throw Error(t(308));to=o,kr.dependencies={lanes:0,firstContext:o}}else to=to.next=o;return c}var qo=null;function ff(o){qo===null?qo=[o]:qo.push(o)}function ad(o,c,m,w){var C=c.interleaved;return C===null?(m.next=m,ff(c)):(m.next=C.next,C.next=m),c.interleaved=m,wi(o,w)}function wi(o,c){o.lanes|=c;var m=o.alternate;for(m!==null&&(m.lanes|=c),m=o,o=o.return;o!==null;)o.childLanes|=c,m=o.alternate,m!==null&&(m.childLanes|=c),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Kr=!1;function ld(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lg(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function bi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Yr(o,c,m){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(wt&2)!==0){var C=w.pending;return C===null?c.next=c:(c.next=C.next,C.next=c),w.pending=c,wi(o,m)}return C=w.interleaved,C===null?(c.next=c,ff(w)):(c.next=C.next,C.next=c),w.interleaved=c,wi(o,m)}function cd(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Kl(o,m)}}function cg(o,c){var m=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var C=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var D={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};k===null?C=k=D:k=k.next=D,m=m.next}while(m!==null);k===null?C=k=c:k=k.next=c}else C=k=c;m={baseState:w.baseState,firstBaseUpdate:C,lastBaseUpdate:k,shared:w.shared,effects:w.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function Qa(o,c,m,w){var C=o.updateQueue;Kr=!1;var k=C.firstBaseUpdate,D=C.lastBaseUpdate,U=C.shared.pending;if(U!==null){C.shared.pending=null;var G=U,he=G.next;G.next=null,D===null?k=he:D.next=he,D=G;var Ae=o.alternate;Ae!==null&&(Ae=Ae.updateQueue,U=Ae.lastBaseUpdate,U!==D&&(U===null?Ae.firstBaseUpdate=he:U.next=he,Ae.lastBaseUpdate=G))}if(k!==null){var Ee=C.baseState;D=0,Ae=he=G=null,U=k;do{var xe=U.lane,De=U.eventTime;if((w&xe)===xe){Ae!==null&&(Ae=Ae.next={eventTime:De,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Le=o,je=U;switch(xe=c,De=m,je.tag){case 1:if(Le=je.payload,typeof Le=="function"){Ee=Le.call(De,Ee,xe);break e}Ee=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=je.payload,xe=typeof Le=="function"?Le.call(De,Ee,xe):Le,xe==null)break e;Ee=J({},Ee,xe);break e;case 2:Kr=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,xe=C.effects,xe===null?C.effects=[U]:xe.push(U))}else De={eventTime:De,lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ae===null?(he=Ae=De,G=Ee):Ae=Ae.next=De,D|=xe;if(U=U.next,U===null){if(U=C.shared.pending,U===null)break;xe=U,U=xe.next,xe.next=null,C.lastBaseUpdate=xe,C.shared.pending=null}}while(!0);if(Ae===null&&(G=Ee),C.baseState=G,C.firstBaseUpdate=he,C.lastBaseUpdate=Ae,c=C.shared.interleaved,c!==null){C=c;do D|=C.lane,C=C.next;while(C!==c)}else k===null&&(C.shared.lanes=0);ao|=D,o.lanes=D,o.memoizedState=Ee}}function pf(o,c,m){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var w=o[c],C=w.callback;if(C!==null){if(w.callback=null,w=m,typeof C!="function")throw Error(t(191,C));C.call(w)}}}var fc={},Hs=dr(fc),pc=dr(fc),Ja=dr(fc);function _i(o){if(o===fc)throw Error(t(174));return o}function mf(o,c){switch(Bt(Ja,c),Bt(pc,o),Bt(Hs,fc),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ai(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ai(c,o)}Ut(Hs),Bt(Hs,c)}function ro(){Ut(Hs),Ut(pc),Ut(Ja)}function gf(o){_i(Ja.current);var c=_i(Hs.current),m=ai(c,o.type);c!==m&&(Bt(pc,o),Bt(Hs,m))}function ud(o){pc.current===o&&(Ut(Hs),Ut(pc))}var qt=dr(0);function Go(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var vf=[];function dd(){for(var o=0;o<vf.length;o++)vf[o]._workInProgressVersionPrimary=null;vf.length=0}var mc=N.ReactCurrentDispatcher,yf=N.ReactCurrentBatchConfig,so=0,Qt=null,rn=null,mn=null,Za=!1,gc=!1,Ko=0,dt=0;function Gn(){throw Error(t(321))}function wf(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!de(o[m],c[m]))return!1;return!0}function Yo(o,c,m,w,C,k){if(so=k,Qt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,mc.current=o===null||o.memoizedState===null?c0:yd,o=m(w,C),gc){k=0;do{if(gc=!1,Ko=0,25<=k)throw Error(t(301));k+=1,mn=rn=null,c.updateQueue=null,mc.current=rl,o=m(w,C)}while(gc)}if(mc.current=vd,c=rn!==null&&rn.next!==null,so=0,mn=rn=Qt=null,Za=!1,c)throw Error(t(300));return o}function hd(){var o=Ko!==0;return Ko=0,o}function Ws(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Qt.memoizedState=mn=o:mn=mn.next=o,mn}function Xr(){if(rn===null){var o=Qt.alternate;o=o!==null?o.memoizedState:null}else o=rn.next;var c=mn===null?Qt.memoizedState:mn.next;if(c!==null)mn=c,rn=o;else{if(o===null)throw Error(t(310));rn=o,o={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},mn===null?Qt.memoizedState=mn=o:mn=mn.next=o}return mn}function Kn(o,c){return typeof c=="function"?c(o):c}function bf(o){var c=Xr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=rn,C=w.baseQueue,k=m.pending;if(k!==null){if(C!==null){var D=C.next;C.next=k.next,k.next=D}w.baseQueue=C=k,m.pending=null}if(C!==null){k=C.next,w=w.baseState;var U=D=null,G=null,he=k;do{var Ae=he.lane;if((so&Ae)===Ae)G!==null&&(G=G.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),w=he.hasEagerState?he.eagerState:o(w,he.action);else{var Ee={lane:Ae,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};G===null?(U=G=Ee,D=w):G=G.next=Ee,Qt.lanes|=Ae,ao|=Ae}he=he.next}while(he!==null&&he!==k);G===null?D=w:G.next=U,de(w,c.memoizedState)||(sr=!0),c.memoizedState=w,c.baseState=D,c.baseQueue=G,m.lastRenderedState=w}if(o=m.interleaved,o!==null){C=o;do k=C.lane,Qt.lanes|=k,ao|=k,C=C.next;while(C!==o)}else C===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function el(o){var c=Xr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=m.dispatch,C=m.pending,k=c.memoizedState;if(C!==null){m.pending=null;var D=C=C.next;do k=o(k,D.action),D=D.next;while(D!==C);de(k,c.memoizedState)||(sr=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),m.lastRenderedState=k}return[k,w]}function fd(){}function _f(o,c){var m=Qt,w=Xr(),C=c(),k=!de(w.memoizedState,C);if(k&&(w.memoizedState=C,sr=!0),w=w.queue,qs(xi.bind(null,m,w,o),[o]),w.getSnapshot!==c||k||mn!==null&&mn.memoizedState.tag&1){if(m.flags|=2048,tl(9,mr.bind(null,m,w,C,c),void 0,null),Cn===null)throw Error(t(349));(so&30)!==0||xf(m,c,C)}return C}function xf(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Qt.updateQueue,c===null?(c={lastEffect:null,stores:null},Qt.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function mr(o,c,m,w){c.value=m,c.getSnapshot=w,pd(c)&&Sf(o)}function xi(o,c,m){return m(function(){pd(c)&&Sf(o)})}function pd(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!de(o,m)}catch{return!0}}function Sf(o){var c=wi(o,1);c!==null&&xs(c,o,1,-1)}function vc(o){var c=Ws();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:o},c.queue=o,o=o.dispatch=mg.bind(null,Qt,o),[c.memoizedState,o]}function tl(o,c,m,w){return o={tag:o,create:c,destroy:m,deps:w,next:null},c=Qt.updateQueue,c===null?(c={lastEffect:null,stores:null},Qt.updateQueue=c,c.lastEffect=o.next=o):(m=c.lastEffect,m===null?c.lastEffect=o.next=o:(w=m.next,m.next=o,o.next=w,c.lastEffect=o)),o}function md(){return Xr().memoizedState}function yc(o,c,m,w){var C=Ws();Qt.flags|=o,C.memoizedState=tl(1|c,m,void 0,w===void 0?null:w)}function nl(o,c,m,w){var C=Xr();w=w===void 0?null:w;var k=void 0;if(rn!==null){var D=rn.memoizedState;if(k=D.destroy,w!==null&&wf(w,D.deps)){C.memoizedState=tl(c,m,k,w);return}}Qt.flags|=o,C.memoizedState=tl(1|c,m,k,w)}function gd(o,c){return yc(8390656,8,o,c)}function qs(o,c){return nl(2048,8,o,c)}function ug(o,c){return nl(4,2,o,c)}function Si(o,c){return nl(4,4,o,c)}function Af(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Cf(o,c,m){return m=m!=null?m.concat([o]):null,nl(4,4,Af.bind(null,c,o),m)}function wc(){}function dg(o,c){var m=Xr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&wf(c,w[1])?w[0]:(m.memoizedState=[o,c],o)}function hg(o,c){var m=Xr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&wf(c,w[1])?w[0]:(o=o(),m.memoizedState=[o,c],o)}function fg(o,c,m){return(so&21)===0?(o.baseState&&(o.baseState=!1,sr=!0),o.memoizedState=m):(de(m,c)||(m=Bh(),Qt.lanes|=m,ao|=m,o.baseState=!0),c)}function pg(o,c){var m=kt;kt=m!==0&&4>m?m:4,o(!0);var w=yf.transition;yf.transition={};try{o(!1),c()}finally{kt=m,yf.transition=w}}function Ef(){return Xr().memoizedState}function l0(o,c,m){var w=uo(o);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},kf(o))rr(c,m);else if(m=ad(o,c,m,w),m!==null){var C=ar();xs(m,o,w,C),vs(m,c,w)}}function mg(o,c,m){var w=uo(o),C={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(kf(o))rr(c,C);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var D=c.lastRenderedState,U=k(D,m);if(C.hasEagerState=!0,C.eagerState=U,de(U,D)){var G=c.interleaved;G===null?(C.next=C,ff(c)):(C.next=G.next,G.next=C),c.interleaved=C;return}}catch{}finally{}m=ad(o,c,C,w),m!==null&&(C=ar(),xs(m,o,w,C),vs(m,c,w))}}function kf(o){var c=o.alternate;return o===Qt||c!==null&&c===Qt}function rr(o,c){gc=Za=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function vs(o,c,m){if((m&4194240)!==0){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Kl(o,m)}}var vd={readContext:Gr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},c0={readContext:Gr,useCallback:function(o,c){return Ws().memoizedState=[o,c===void 0?null:c],o},useContext:Gr,useEffect:gd,useImperativeHandle:function(o,c,m){return m=m!=null?m.concat([o]):null,yc(4194308,4,Af.bind(null,c,o),m)},useLayoutEffect:function(o,c){return yc(4194308,4,o,c)},useInsertionEffect:function(o,c){return yc(4,2,o,c)},useMemo:function(o,c){var m=Ws();return c=c===void 0?null:c,o=o(),m.memoizedState=[o,c],o},useReducer:function(o,c,m){var w=Ws();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},w.queue=o,o=o.dispatch=l0.bind(null,Qt,o),[w.memoizedState,o]},useRef:function(o){var c=Ws();return o={current:o},c.memoizedState=o},useState:vc,useDebugValue:wc,useDeferredValue:function(o){return Ws().memoizedState=o},useTransition:function(){var o=vc(!1),c=o[0];return o=pg.bind(null,o[1]),Ws().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,m){var w=Qt,C=Ws();if(zt){if(m===void 0)throw Error(t(407));m=m()}else{if(m=c(),Cn===null)throw Error(t(349));(so&30)!==0||xf(w,c,m)}C.memoizedState=m;var k={value:m,getSnapshot:c};return C.queue=k,gd(xi.bind(null,w,k,o),[o]),w.flags|=2048,tl(9,mr.bind(null,w,k,m,c),void 0,null),m},useId:function(){var o=Ws(),c=Cn.identifierPrefix;if(zt){var m=$s,w=Bs;m=(w&~(1<<32-ps(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=Ko++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=dt++,c=":"+c+"r"+m.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},yd={readContext:Gr,useCallback:dg,useContext:Gr,useEffect:qs,useImperativeHandle:Cf,useInsertionEffect:ug,useLayoutEffect:Si,useMemo:hg,useReducer:bf,useRef:md,useState:function(){return bf(Kn)},useDebugValue:wc,useDeferredValue:function(o){var c=Xr();return fg(c,rn.memoizedState,o)},useTransition:function(){var o=bf(Kn)[0],c=Xr().memoizedState;return[o,c]},useMutableSource:fd,useSyncExternalStore:_f,useId:Ef,unstable_isNewReconciler:!1},rl={readContext:Gr,useCallback:dg,useContext:Gr,useEffect:qs,useImperativeHandle:Cf,useInsertionEffect:ug,useLayoutEffect:Si,useMemo:hg,useReducer:el,useRef:md,useState:function(){return el(Kn)},useDebugValue:wc,useDeferredValue:function(o){var c=Xr();return rn===null?c.memoizedState=o:fg(c,rn.memoizedState,o)},useTransition:function(){var o=el(Kn)[0],c=Xr().memoizedState;return[o,c]},useMutableSource:fd,useSyncExternalStore:_f,useId:Ef,unstable_isNewReconciler:!1};function Qr(o,c){if(o&&o.defaultProps){c=J({},c),o=o.defaultProps;for(var m in o)c[m]===void 0&&(c[m]=o[m]);return c}return c}function wd(o,c,m,w){c=o.memoizedState,m=m(w,c),m=m==null?c:J({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var bd={isMounted:function(o){return(o=o._reactInternals)?ye(o)===o:!1},enqueueSetState:function(o,c,m){o=o._reactInternals;var w=ar(),C=uo(o),k=bi(w,C);k.payload=c,m!=null&&(k.callback=m),c=Yr(o,k,C),c!==null&&(xs(c,o,C,w),cd(c,o,C))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var w=ar(),C=uo(o),k=bi(w,C);k.tag=1,k.payload=c,m!=null&&(k.callback=m),c=Yr(o,k,C),c!==null&&(xs(c,o,C,w),cd(c,o,C))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=ar(),w=uo(o),C=bi(m,w);C.tag=2,c!=null&&(C.callback=c),c=Yr(o,C,w),c!==null&&(xs(c,o,w,m),cd(c,o,w))}};function Tf(o,c,m,w,C,k,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,k,D):c.prototype&&c.prototype.isPureReactComponent?!Ie(m,w)||!Ie(C,k):!0}function Xo(o,c,m){var w=!1,C=Zi,k=c.contextType;return typeof k=="object"&&k!==null?k=Gr(k):(C=fr(c)?nr:Hn.current,w=c.contextTypes,k=(w=w!=null)?Ka(o,C):Zi),c=new c(m,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=bd,o.stateNode=c,c._reactInternals=o,w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=k),c}function sl(o,c,m,w){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==o&&bd.enqueueReplaceState(c,c.state,null)}function Pf(o,c,m,w){var C=o.stateNode;C.props=m,C.state=o.memoizedState,C.refs={},ld(o);var k=c.contextType;typeof k=="object"&&k!==null?C.context=Gr(k):(k=fr(c)?nr:Hn.current,C.context=Ka(o,k)),C.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(wd(o,c,k,m),C.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(c=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),c!==C.state&&bd.enqueueReplaceState(C,C.state,null),Qa(o,m,C,w),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function Qo(o,c){try{var m="",w=c;do m+=Me(w),w=w.return;while(w);var C=m}catch(k){C=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:C,digest:null}}function _d(o,c,m){return{value:o,source:null,stack:m??null,digest:c??null}}function il(o,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var gg=typeof WeakMap=="function"?WeakMap:Map;function bc(o,c,m){m=bi(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){Id||(Id=!0,Wf=w),il(o,c)},m}function xd(o,c,m){m=bi(-1,m),m.tag=3;var w=o.type.getDerivedStateFromError;if(typeof w=="function"){var C=c.value;m.payload=function(){return w(C)},m.callback=function(){il(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(m.callback=function(){il(o,c),typeof w!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})}),m}function _c(o,c,m){var w=o.pingCache;if(w===null){w=o.pingCache=new gg;var C=new Set;w.set(c,C)}else C=w.get(c),C===void 0&&(C=new Set,w.set(c,C));C.has(m)||(C.add(m),o=v0.bind(null,o,c,m),c.then(o,o))}function vg(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Rf(o,c,m,w,C){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=bi(-1,1),c.tag=2,Yr(m,c,1))),m.lanes|=1),o):(o.flags|=65536,o.lanes=C,o)}var Sd=N.ReactCurrentOwner,sr=!1;function Nn(o,c,m,w){c.child=o===null?id(c,null,m,w):tn(c,o.child,m,w)}function yg(o,c,m,w,C){m=m.render;var k=c.ref;return no(c,C),w=Yo(o,c,m,w,k,C),m=hd(),o!==null&&!sr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,ys(o,c,C)):(zt&&m&&cc(c),c.flags|=1,Nn(o,c,w,C),c.child)}function Mf(o,c,m,w,C){if(o===null){var k=m.type;return typeof k=="function"&&!Fd(k)&&k.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=k,Gs(o,c,k,w,C)):(o=Bd(m.type,null,w,c,c.mode,C),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&C)===0){var D=k.memoizedProps;if(m=m.compare,m=m!==null?m:Ie,m(D,w)&&o.ref===c.ref)return ys(o,c,C)}return c.flags|=1,o=Ss(k,w),o.ref=c.ref,o.return=c,c.child=o}function Gs(o,c,m,w,C){if(o!==null){var k=o.memoizedProps;if(Ie(k,w)&&o.ref===c.ref)if(sr=!1,c.pendingProps=w=k,(o.lanes&C)!==0)(o.flags&131072)!==0&&(sr=!0);else return c.lanes=o.lanes,ys(o,c,C)}return Nf(o,c,m,w,C)}function If(o,c,m){var w=c.pendingProps,C=w.children,k=o!==null?o.memoizedState:null;if(w.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(cl,Pr),Pr|=m;else{if((m&1073741824)===0)return o=k!==null?k.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Bt(cl,Pr),Pr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=k!==null?k.baseLanes:m,Bt(cl,Pr),Pr|=w}else k!==null?(w=k.baseLanes|m,c.memoizedState=null):w=m,Bt(cl,Pr),Pr|=w;return Nn(o,c,C,m),c.child}function Df(o,c){var m=c.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Nf(o,c,m,w,C){var k=fr(m)?nr:Hn.current;return k=Ka(c,k),no(c,C),m=Yo(o,c,m,w,k,C),w=hd(),o!==null&&!sr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~C,ys(o,c,C)):(zt&&w&&cc(c),c.flags|=1,Nn(o,c,m,C),c.child)}function Of(o,c,m,w,C){if(fr(m)){var k=!0;Hr(c)}else k=!1;if(no(c,C),c.stateNode===null)Cd(o,c),Xo(c,m,w),Pf(c,m,w,C),w=!0;else if(o===null){var D=c.stateNode,U=c.memoizedProps;D.props=U;var G=D.context,he=m.contextType;typeof he=="object"&&he!==null?he=Gr(he):(he=fr(m)?nr:Hn.current,he=Ka(c,he));var Ae=m.getDerivedStateFromProps,Ee=typeof Ae=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ee||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(U!==w||G!==he)&&sl(c,D,w,he),Kr=!1;var xe=c.memoizedState;D.state=xe,Qa(c,w,D,C),G=c.memoizedState,U!==w||xe!==G||hr.current||Kr?(typeof Ae=="function"&&(wd(c,m,Ae,w),G=c.memoizedState),(U=Kr||Tf(c,m,U,w,xe,G,he))?(Ee||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=G),D.props=w,D.state=G,D.context=he,w=U):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{D=c.stateNode,lg(o,c),U=c.memoizedProps,he=c.type===c.elementType?U:Qr(c.type,U),D.props=he,Ee=c.pendingProps,xe=D.context,G=m.contextType,typeof G=="object"&&G!==null?G=Gr(G):(G=fr(m)?nr:Hn.current,G=Ka(c,G));var De=m.getDerivedStateFromProps;(Ae=typeof De=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(U!==Ee||xe!==G)&&sl(c,D,w,G),Kr=!1,xe=c.memoizedState,D.state=xe,Qa(c,w,D,C);var Le=c.memoizedState;U!==Ee||xe!==Le||hr.current||Kr?(typeof De=="function"&&(wd(c,m,De,w),Le=c.memoizedState),(he=Kr||Tf(c,m,he,w,xe,Le,G)||!1)?(Ae||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,Le,G),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,Le,G)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Le),D.props=w,D.state=Le,D.context=G,w=he):(typeof D.componentDidUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=1024),w=!1)}return Lf(o,c,m,w,k,C)}function Lf(o,c,m,w,C,k){Df(o,c);var D=(c.flags&128)!==0;if(!w&&!D)return C&&ng(c,m,!1),ys(o,c,k);w=c.stateNode,Sd.current=c;var U=D&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,o!==null&&D?(c.child=tn(c,o.child,null,k),c.child=tn(c,null,U,k)):Nn(o,c,U,k),c.memoizedState=w.state,C&&ng(c,m,!0),c.child}function wg(o){var c=o.stateNode;c.pendingContext?eg(o,c.pendingContext,c.pendingContext!==c.context):c.context&&eg(o,c.context,!1),mf(o,c.containerInfo)}function Ks(o,c,m,w,C){return zs(),Vs(C),c.flags|=256,Nn(o,c,m,w),c.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function Sc(o){return{baseLanes:o,cachePool:null,transitions:null}}function Ad(o,c,m){var w=c.pendingProps,C=qt.current,k=!1,D=(c.flags&128)!==0,U;if((U=D)||(U=o!==null&&o.memoizedState===null?!1:(C&2)!==0),U?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),Bt(qt,C&1),o===null)return pr(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(D=w.children,o=w.fallback,k?(w=c.mode,k=c.child,D={mode:"hidden",children:D},(w&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=D):k=$d(D,w,0,null),o=na(o,w,m,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=Sc(m),c.memoizedState=xc,o):ol(c,D));if(C=o.memoizedState,C!==null&&(U=C.dehydrated,U!==null))return Ke(o,c,D,w,U,C,m);if(k){k=w.fallback,D=c.mode,C=o.child,U=C.sibling;var G={mode:"hidden",children:w.children};return(D&1)===0&&c.child!==C?(w=c.child,w.childLanes=0,w.pendingProps=G,c.deletions=null):(w=Ss(C,G),w.subtreeFlags=C.subtreeFlags&14680064),U!==null?k=Ss(U,k):(k=na(k,D,m,null),k.flags|=2),k.return=c,w.return=c,w.sibling=k,c.child=w,w=k,k=c.child,D=o.child.memoizedState,D=D===null?Sc(m):{baseLanes:D.baseLanes|m,cachePool:null,transitions:D.transitions},k.memoizedState=D,k.childLanes=o.childLanes&~m,c.memoizedState=xc,w}return k=o.child,o=k.sibling,w=Ss(k,{mode:"visible",children:w.children}),(c.mode&1)===0&&(w.lanes=m),w.return=c,w.sibling=null,o!==null&&(m=c.deletions,m===null?(c.deletions=[o],c.flags|=16):m.push(o)),c.child=w,c.memoizedState=null,w}function ol(o,c){return c=$d({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Ai(o,c,m,w){return w!==null&&Vs(w),tn(c,o.child,null,m),o=ol(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Ke(o,c,m,w,C,k,D){if(m)return c.flags&256?(c.flags&=-257,w=_d(Error(t(422))),Ai(o,c,D,w)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=w.fallback,C=c.mode,w=$d({mode:"visible",children:w.children},C,0,null),k=na(k,C,D,null),k.flags|=2,w.return=c,k.return=c,w.sibling=k,c.child=w,(c.mode&1)!==0&&tn(c,o.child,null,D),c.child.memoizedState=Sc(D),c.memoizedState=xc,k);if((c.mode&1)===0)return Ai(o,c,D,null);if(C.data==="$!"){if(w=C.nextSibling&&C.nextSibling.dataset,w)var U=w.dgst;return w=U,k=Error(t(419)),w=_d(k,w,void 0),Ai(o,c,D,w)}if(U=(D&o.childLanes)!==0,sr||U){if(w=Cn,w!==null){switch(D&-D){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(w.suspendedLanes|D))!==0?0:C,C!==0&&C!==k.retryLane&&(k.retryLane=C,wi(o,C),xs(w,o,C,-1))}return Qf(),w=_d(Error(t(421))),Ai(o,c,D,w)}return C.data==="$?"?(c.flags|=128,c.child=o.child,c=y0.bind(null,o),C._reactRetry=c,null):(o=k.treeContext,Er=Qi(C.nextSibling),qn=c,zt=!0,gs=null,o!==null&&(Wr[qr++]=Bs,Wr[qr++]=$s,Wr[qr++]=zo,Bs=o.id,$s=o.overflow,zo=c),c=ol(c,w.children),c.flags|=4096,c)}function Ac(o,c,m){o.lanes|=c;var w=o.alternate;w!==null&&(w.lanes|=c),Dn(o.return,c,m)}function Cc(o,c,m,w,C){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:C}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=m,k.tailMode=C)}function io(o,c,m){var w=c.pendingProps,C=w.revealOrder,k=w.tail;if(Nn(o,c,w.children,m),w=qt.current,(w&2)!==0)w=w&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ac(o,m,c);else if(o.tag===19)Ac(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}w&=1}if(Bt(qt,w),(c.mode&1)===0)c.memoizedState=null;else switch(C){case"forwards":for(m=c.child,C=null;m!==null;)o=m.alternate,o!==null&&Go(o)===null&&(C=m),m=m.sibling;m=C,m===null?(C=c.child,c.child=null):(C=m.sibling,m.sibling=null),Cc(c,!1,C,m,k);break;case"backwards":for(m=null,C=c.child,c.child=null;C!==null;){if(o=C.alternate,o!==null&&Go(o)===null){c.child=C;break}o=C.sibling,C.sibling=m,m=C,C=o}Cc(c,!0,m,null,k);break;case"together":Cc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Cd(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function ys(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),ao|=c.lanes,(m&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,m=Ss(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=Ss(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function bg(o,c,m){switch(c.tag){case 3:wg(c),zs();break;case 5:gf(c);break;case 1:fr(c.type)&&Hr(c);break;case 4:mf(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,C=c.memoizedProps.value;Bt(hc,w._currentValue),w._currentValue=C;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(Bt(qt,qt.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?Ad(o,c,m):(Bt(qt,qt.current&1),o=ys(o,c,m),o!==null?o.sibling:null);Bt(qt,qt.current&1);break;case 19:if(w=(m&c.childLanes)!==0,(o.flags&128)!==0){if(w)return io(o,c,m);c.flags|=128}if(C=c.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Bt(qt,qt.current),w)break;return null;case 22:case 23:return c.lanes=0,If(o,c,m)}return ys(o,c,m)}var On,jf,_g,Ff;On=function(o,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},jf=function(){},_g=function(o,c,m,w){var C=o.memoizedProps;if(C!==w){o=c.stateNode,_i(Hs.current);var k=null;switch(m){case"input":C=Xt(o,C),w=Xt(o,w),k=[];break;case"select":C=J({},C,{value:void 0}),w=J({},w,{value:void 0}),k=[];break;case"textarea":C=oi(o,C),w=oi(o,w),k=[];break;default:typeof C.onClick!="function"&&typeof w.onClick=="function"&&(o.onclick=Xu)}ko(m,w);var D;m=null;for(he in C)if(!w.hasOwnProperty(he)&&C.hasOwnProperty(he)&&C[he]!=null)if(he==="style"){var U=C[he];for(D in U)U.hasOwnProperty(D)&&(m||(m={}),m[D]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(s.hasOwnProperty(he)?k||(k=[]):(k=k||[]).push(he,null));for(he in w){var G=w[he];if(U=C?.[he],w.hasOwnProperty(he)&&G!==U&&(G!=null||U!=null))if(he==="style")if(U){for(D in U)!U.hasOwnProperty(D)||G&&G.hasOwnProperty(D)||(m||(m={}),m[D]="");for(D in G)G.hasOwnProperty(D)&&U[D]!==G[D]&&(m||(m={}),m[D]=G[D])}else m||(k||(k=[]),k.push(he,m)),m=G;else he==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,U=U?U.__html:void 0,G!=null&&U!==G&&(k=k||[]).push(he,G)):he==="children"?typeof G!="string"&&typeof G!="number"||(k=k||[]).push(he,""+G):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(s.hasOwnProperty(he)?(G!=null&&he==="onScroll"&&$t("scroll",o),k||U===G||(k=[])):(k=k||[]).push(he,G))}m&&(k=k||[]).push("style",m);var he=k;(c.updateQueue=he)&&(c.flags|=4)}},Ff=function(o,c,m,w){m!==w&&(c.flags|=4)};function Ec(o,c){if(!zt)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function Ln(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,w=0;if(c)for(var C=o.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags&14680064,w|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)m|=C.lanes|C.childLanes,w|=C.subtreeFlags,w|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=w,o.childLanes=m,c}function u0(o,c,m){var w=c.pendingProps;switch(Ho(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(c),null;case 1:return fr(c.type)&&ed(),Ln(c),null;case 3:return w=c.stateNode,ro(),Ut(hr),Ut(Hn),dd(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(o===null||o.child===null)&&(uc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,gs!==null&&(Kf(gs),gs=null))),jf(o,c),Ln(c),null;case 5:ud(c);var C=_i(Ja.current);if(m=c.type,o!==null&&c.stateNode!=null)_g(o,c,m,w,C),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(t(166));return Ln(c),null}if(o=_i(Hs.current),uc(c)){w=c.stateNode,m=c.type;var k=c.memoizedProps;switch(w[js]=c,w[Ji]=k,o=(c.mode&1)!==0,m){case"dialog":$t("cancel",w),$t("close",w);break;case"iframe":case"object":case"embed":$t("load",w);break;case"video":case"audio":for(C=0;C<mi.length;C++)$t(mi[C],w);break;case"source":$t("error",w);break;case"img":case"image":case"link":$t("error",w),$t("load",w);break;case"details":$t("toggle",w);break;case"input":$r(w,k),$t("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!k.multiple},$t("invalid",w);break;case"textarea":Eo(w,k),$t("invalid",w)}ko(m,k),C=null;for(var D in k)if(k.hasOwnProperty(D)){var U=k[D];D==="children"?typeof U=="string"?w.textContent!==U&&(k.suppressHydrationWarning!==!0&&ic(w.textContent,U,o),C=["children",U]):typeof U=="number"&&w.textContent!==""+U&&(k.suppressHydrationWarning!==!0&&ic(w.textContent,U,o),C=["children",""+U]):s.hasOwnProperty(D)&&U!=null&&D==="onScroll"&&$t("scroll",w)}switch(m){case"input":it(w),Ll(w,k,!0);break;case"textarea":it(w),Ui(w);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(w.onclick=Xu)}w=C,c.updateQueue=w,w!==null&&(c.flags|=4)}else{D=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=vu(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof w.is=="string"?o=D.createElement(m,{is:w.is}):(o=D.createElement(m),m==="select"&&(D=o,w.multiple?D.multiple=!0:w.size&&(D.size=w.size))):o=D.createElementNS(o,m),o[js]=c,o[Ji]=w,On(o,c,!1,!1),c.stateNode=o;e:{switch(D=To(m,w),m){case"dialog":$t("cancel",o),$t("close",o),C=w;break;case"iframe":case"object":case"embed":$t("load",o),C=w;break;case"video":case"audio":for(C=0;C<mi.length;C++)$t(mi[C],o);C=w;break;case"source":$t("error",o),C=w;break;case"img":case"image":case"link":$t("error",o),$t("load",o),C=w;break;case"details":$t("toggle",o),C=w;break;case"input":$r(o,w),C=Xt(o,w),$t("invalid",o);break;case"option":C=w;break;case"select":o._wrapperState={wasMultiple:!!w.multiple},C=J({},w,{value:void 0}),$t("invalid",o);break;case"textarea":Eo(o,w),C=oi(o,w),$t("invalid",o);break;default:C=w}ko(m,C),U=C;for(k in U)if(U.hasOwnProperty(k)){var G=U[k];k==="style"?Ea(o,G):k==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Aa(o,G)):k==="children"?typeof G=="string"?(m!=="textarea"||G!=="")&&li(o,G):typeof G=="number"&&li(o,""+G):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?G!=null&&k==="onScroll"&&$t("scroll",o):G!=null&&M(o,k,G,D))}switch(m){case"input":it(o),Ll(o,w,!1);break;case"textarea":it(o),Ui(o);break;case"option":w.value!=null&&o.setAttribute("value",""+Ne(w.value));break;case"select":o.multiple=!!w.multiple,k=w.value,k!=null?Sn(o,!!w.multiple,k,!1):w.defaultValue!=null&&Sn(o,!!w.multiple,w.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=Xu)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ln(c),null;case 6:if(o&&c.stateNode!=null)Ff(o,c,o.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(t(166));if(m=_i(Ja.current),_i(Hs.current),uc(c)){if(w=c.stateNode,m=c.memoizedProps,w[js]=c,(k=w.nodeValue!==m)&&(o=qn,o!==null))switch(o.tag){case 3:ic(w.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ic(w.nodeValue,m,(o.mode&1)!==0)}k&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[js]=c,c.stateNode=w}return Ln(c),null;case 13:if(Ut(qt),w=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(zt&&Er!==null&&(c.mode&1)!==0&&(c.flags&128)===0)df(),zs(),c.flags|=98560,k=!1;else if(k=uc(c),w!==null&&w.dehydrated!==null){if(o===null){if(!k)throw Error(t(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[js]=c}else zs(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ln(c),k=!1}else gs!==null&&(Kf(gs),gs=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(w=w!==null,w!==(o!==null&&o.memoizedState!==null)&&w&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(qt.current&1)!==0?gn===0&&(gn=3):Qf())),c.updateQueue!==null&&(c.flags|=4),Ln(c),null);case 4:return ro(),jf(o,c),o===null&&Yi(c.stateNode.containerInfo),Ln(c),null;case 10:return od(c.type._context),Ln(c),null;case 17:return fr(c.type)&&ed(),Ln(c),null;case 19:if(Ut(qt),k=c.memoizedState,k===null)return Ln(c),null;if(w=(c.flags&128)!==0,D=k.rendering,D===null)if(w)Ec(k,!1);else{if(gn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(D=Go(o),D!==null){for(c.flags|=128,Ec(k,!1),w=D.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)k=m,o=w,k.flags&=14680066,D=k.alternate,D===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=D.childLanes,k.lanes=D.lanes,k.child=D.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=D.memoizedProps,k.memoizedState=D.memoizedState,k.updateQueue=D.updateQueue,k.type=D.type,o=D.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return Bt(qt,qt.current&1|2),c.child}o=o.sibling}k.tail!==null&&Ht()>Jo&&(c.flags|=128,w=!0,Ec(k,!1),c.lanes=4194304)}else{if(!w)if(o=Go(D),o!==null){if(c.flags|=128,w=!0,m=o.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),Ec(k,!0),k.tail===null&&k.tailMode==="hidden"&&!D.alternate&&!zt)return Ln(c),null}else 2*Ht()-k.renderingStartTime>Jo&&m!==1073741824&&(c.flags|=128,w=!0,Ec(k,!1),c.lanes=4194304);k.isBackwards?(D.sibling=c.child,c.child=D):(m=k.last,m!==null?m.sibling=D:c.child=D,k.last=D)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=Ht(),c.sibling=null,m=qt.current,Bt(qt,w?m&1|2:m&1),c):(Ln(c),null);case 22:case 23:return Xf(),w=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==w&&(c.flags|=8192),w&&(c.mode&1)!==0?(Pr&1073741824)!==0&&(Ln(c),c.subtreeFlags&6&&(c.flags|=8192)):Ln(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function d0(o,c){switch(Ho(c),c.tag){case 1:return fr(c.type)&&ed(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return ro(),Ut(hr),Ut(Hn),dd(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return ud(c),null;case 13:if(Ut(qt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));zs()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ut(qt),null;case 4:return ro(),null;case 10:return od(c.type._context),null;case 22:case 23:return Xf(),null;case 24:return null;default:return null}}var Ed=!1,Gt=!1,ir=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function al(o,c){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Jt(o,c,w)}else m.current=null}function kc(o,c,m){try{m()}catch(w){Jt(o,c,w)}}var xg=!1;function h0(o,c){if(oc=Iu,o=Nt(),Zl(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var C=w.anchorOffset,k=w.focusNode;w=w.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break e}var D=0,U=-1,G=-1,he=0,Ae=0,Ee=o,xe=null;t:for(;;){for(var De;Ee!==m||C!==0&&Ee.nodeType!==3||(U=D+C),Ee!==k||w!==0&&Ee.nodeType!==3||(G=D+w),Ee.nodeType===3&&(D+=Ee.nodeValue.length),(De=Ee.firstChild)!==null;)xe=Ee,Ee=De;for(;;){if(Ee===o)break t;if(xe===m&&++he===C&&(U=D),xe===k&&++Ae===w&&(G=D),(De=Ee.nextSibling)!==null)break;Ee=xe,xe=Ee.parentNode}Ee=De}m=U===-1||G===-1?null:{start:U,end:G}}else m=null}m=m||{start:0,end:0}}else m=null;for($o={focusedElem:o,selectionRange:m},Iu=!1,Oe=c;Oe!==null;)if(c=Oe,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Oe=o;else for(;Oe!==null;){c=Oe;try{var Le=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var je=Le.memoizedProps,sn=Le.memoizedState,ie=c.stateNode,X=ie.getSnapshotBeforeUpdate(c.elementType===c.type?je:Qr(c.type,je),sn);ie.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var le=c.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ke){Jt(c,c.return,ke)}if(o=c.sibling,o!==null){o.return=c.return,Oe=o;break}Oe=c.return}return Le=xg,xg=!1,Le}function Ci(o,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&o)===o){var k=C.destroy;C.destroy=void 0,k!==void 0&&kc(c,m,k)}C=C.next}while(C!==w)}}function Tc(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&o)===o){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function kd(o){var c=o.ref;if(c!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof c=="function"?c(o):c.current=o}}function Sg(o){var c=o.alternate;c!==null&&(o.alternate=null,Sg(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[js],delete c[Ji],delete c[Ju],delete c[O],delete c[qa])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ag(o){return o.tag===5||o.tag===3||o.tag===4}function Cg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ag(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Bf(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(o,c):m.insertBefore(o,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(o,m)):(c=m,c.appendChild(o)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Xu));else if(w!==4&&(o=o.child,o!==null))for(Bf(o,c,m),o=o.sibling;o!==null;)Bf(o,c,m),o=o.sibling}function Td(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(w!==4&&(o=o.child,o!==null))for(Td(o,c,m),o=o.sibling;o!==null;)Td(o,c,m),o=o.sibling}var An=null,ws=!1;function Ys(o,c,m){for(m=m.child;m!==null;)$f(o,c,m),m=m.sibling}function $f(o,c,m){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(Eu,m)}catch{}switch(m.tag){case 5:Gt||al(m,c);case 6:var w=An,C=ws;An=null,Ys(o,c,m),An=w,ws=C,An!==null&&(ws?(o=An,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):An.removeChild(m.stateNode));break;case 18:An!==null&&(ws?(o=An,m=m.stateNode,o.nodeType===8?lf(o.parentNode,m):o.nodeType===1&&lf(o,m),Pt(o)):lf(An,m.stateNode));break;case 4:w=An,C=ws,An=m.stateNode.containerInfo,ws=!0,Ys(o,c,m),An=w,ws=C;break;case 0:case 11:case 14:case 15:if(!Gt&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){C=w=w.next;do{var k=C,D=k.destroy;k=k.tag,D!==void 0&&((k&2)!==0||(k&4)!==0)&&kc(m,c,D),C=C.next}while(C!==w)}Ys(o,c,m);break;case 1:if(!Gt&&(al(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(U){Jt(m,c,U)}Ys(o,c,m);break;case 21:Ys(o,c,m);break;case 22:m.mode&1?(Gt=(w=Gt)||m.memoizedState!==null,Ys(o,c,m),Gt=w):Ys(o,c,m);break;default:Ys(o,c,m)}}function ll(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new ir),c.forEach(function(w){var C=w0.bind(null,o,w);m.has(w)||(m.add(w),w.then(C,C))})}}function Tr(o,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var C=m[w];try{var k=o,D=c,U=D;e:for(;U!==null;){switch(U.tag){case 5:An=U.stateNode,ws=!1;break e;case 3:An=U.stateNode.containerInfo,ws=!0;break e;case 4:An=U.stateNode.containerInfo,ws=!0;break e}U=U.return}if(An===null)throw Error(t(160));$f(k,D,C),An=null,ws=!1;var G=C.alternate;G!==null&&(G.return=null),C.return=null}catch(he){Jt(C,c,he)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Uf(c,o),c=c.sibling}function Uf(o,c){var m=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Tr(c,o),bs(o),w&4){try{Ci(3,o,o.return),Tc(3,o)}catch(je){Jt(o,o.return,je)}try{Ci(5,o,o.return)}catch(je){Jt(o,o.return,je)}}break;case 1:Tr(c,o),bs(o),w&512&&m!==null&&al(m,m.return);break;case 5:if(Tr(c,o),bs(o),w&512&&m!==null&&al(m,m.return),o.flags&32){var C=o.stateNode;try{li(C,"")}catch(je){Jt(o,o.return,je)}}if(w&4&&(C=o.stateNode,C!=null)){var k=o.memoizedProps,D=m!==null?m.memoizedProps:k,U=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{U==="input"&&k.type==="radio"&&k.name!=null&&$i(C,k),To(U,D);var he=To(U,k);for(D=0;D<G.length;D+=2){var Ae=G[D],Ee=G[D+1];Ae==="style"?Ea(C,Ee):Ae==="dangerouslySetInnerHTML"?Aa(C,Ee):Ae==="children"?li(C,Ee):M(C,Ae,Ee,he)}switch(U){case"input":Mn(C,k);break;case"textarea":gu(C,k);break;case"select":var xe=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!k.multiple;var De=k.value;De!=null?Sn(C,!!k.multiple,De,!1):xe!==!!k.multiple&&(k.defaultValue!=null?Sn(C,!!k.multiple,k.defaultValue,!0):Sn(C,!!k.multiple,k.multiple?[]:"",!1))}C[Ji]=k}catch(je){Jt(o,o.return,je)}}break;case 6:if(Tr(c,o),bs(o),w&4){if(o.stateNode===null)throw Error(t(162));C=o.stateNode,k=o.memoizedProps;try{C.nodeValue=k}catch(je){Jt(o,o.return,je)}}break;case 3:if(Tr(c,o),bs(o),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Pt(c.containerInfo)}catch(je){Jt(o,o.return,je)}break;case 4:Tr(c,o),bs(o);break;case 13:Tr(c,o),bs(o),C=o.child,C.flags&8192&&(k=C.memoizedState!==null,C.stateNode.isHidden=k,!k||C.alternate!==null&&C.alternate.memoizedState!==null||(Hf=Ht())),w&4&&ll(o);break;case 22:if(Ae=m!==null&&m.memoizedState!==null,o.mode&1?(Gt=(he=Gt)||Ae,Tr(c,o),Gt=he):Tr(c,o),bs(o),w&8192){if(he=o.memoizedState!==null,(o.stateNode.isHidden=he)&&!Ae&&(o.mode&1)!==0)for(Oe=o,Ae=o.child;Ae!==null;){for(Ee=Oe=Ae;Oe!==null;){switch(xe=Oe,De=xe.child,xe.tag){case 0:case 11:case 14:case 15:Ci(4,xe,xe.return);break;case 1:al(xe,xe.return);var Le=xe.stateNode;if(typeof Le.componentWillUnmount=="function"){w=xe,m=xe.return;try{c=w,Le.props=c.memoizedProps,Le.state=c.memoizedState,Le.componentWillUnmount()}catch(je){Jt(w,m,je)}}break;case 5:al(xe,xe.return);break;case 22:if(xe.memoizedState!==null){oo(Ee);continue}}De!==null?(De.return=xe,Oe=De):oo(Ee)}Ae=Ae.sibling}e:for(Ae=null,Ee=o;;){if(Ee.tag===5){if(Ae===null){Ae=Ee;try{C=Ee.stateNode,he?(k=C.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(U=Ee.stateNode,G=Ee.memoizedProps.style,D=G!=null&&G.hasOwnProperty("display")?G.display:null,U.style.display=Ca("display",D))}catch(je){Jt(o,o.return,je)}}}else if(Ee.tag===6){if(Ae===null)try{Ee.stateNode.nodeValue=he?"":Ee.memoizedProps}catch(je){Jt(o,o.return,je)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===o)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===o)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===o)break e;Ae===Ee&&(Ae=null),Ee=Ee.return}Ae===Ee&&(Ae=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:Tr(c,o),bs(o),w&4&&ll(o);break;case 21:break;default:Tr(c,o),bs(o)}}function bs(o){var c=o.flags;if(c&2){try{e:{for(var m=o.return;m!==null;){if(Ag(m)){var w=m;break e}m=m.return}throw Error(t(160))}switch(w.tag){case 5:var C=w.stateNode;w.flags&32&&(li(C,""),w.flags&=-33);var k=Cg(o);Td(o,k,C);break;case 3:case 4:var D=w.stateNode.containerInfo,U=Cg(o);Bf(o,U,D);break;default:throw Error(t(161))}}catch(G){Jt(o,o.return,G)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Pd(o,c,m){Oe=o,zf(o)}function zf(o,c,m){for(var w=(o.mode&1)!==0;Oe!==null;){var C=Oe,k=C.child;if(C.tag===22&&w){var D=C.memoizedState!==null||Ed;if(!D){var U=C.alternate,G=U!==null&&U.memoizedState!==null||Gt;U=Ed;var he=Gt;if(Ed=D,(Gt=G)&&!he)for(Oe=C;Oe!==null;)D=Oe,G=D.child,D.tag===22&&D.memoizedState!==null?Eg(C):G!==null?(G.return=D,Oe=G):Eg(C);for(;k!==null;)Oe=k,zf(k),k=k.sibling;Oe=C,Ed=U,Gt=he}_s(o)}else(C.subtreeFlags&8772)!==0&&k!==null?(k.return=C,Oe=k):_s(o)}}function _s(o){for(;Oe!==null;){var c=Oe;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Gt||Tc(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!Gt)if(m===null)w.componentDidMount();else{var C=c.elementType===c.type?m.memoizedProps:Qr(c.type,m.memoizedProps);w.componentDidUpdate(C,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&pf(c,k,w);break;case 3:var D=c.updateQueue;if(D!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}pf(c,D,m)}break;case 5:var U=c.stateNode;if(m===null&&c.flags&4){m=U;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&m.focus();break;case"img":G.src&&(m.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var he=c.alternate;if(he!==null){var Ae=he.memoizedState;if(Ae!==null){var Ee=Ae.dehydrated;Ee!==null&&Pt(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Gt||c.flags&512&&kd(c)}catch(xe){Jt(c,c.return,xe)}}if(c===o){Oe=null;break}if(m=c.sibling,m!==null){m.return=c.return,Oe=m;break}Oe=c.return}}function oo(o){for(;Oe!==null;){var c=Oe;if(c===o){Oe=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Oe=m;break}Oe=c.return}}function Eg(o){for(;Oe!==null;){var c=Oe;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Tc(4,c)}catch(G){Jt(c,m,G)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var C=c.return;try{w.componentDidMount()}catch(G){Jt(c,C,G)}}var k=c.return;try{kd(c)}catch(G){Jt(c,k,G)}break;case 5:var D=c.return;try{kd(c)}catch(G){Jt(c,D,G)}}}catch(G){Jt(c,c.return,G)}if(c===o){Oe=null;break}var U=c.sibling;if(U!==null){U.return=c.return,Oe=U;break}Oe=c.return}}var kg=Math.ceil,Rd=N.ReactCurrentDispatcher,Vf=N.ReactCurrentOwner,Jr=N.ReactCurrentBatchConfig,wt=0,Cn=null,fn=null,jn=0,Pr=0,cl=dr(0),gn=0,Pc=null,ao=0,Rc=0,Md=0,Mc=null,gr=null,Hf=0,Jo=1/0,Ei=null,Id=!1,Wf=null,lo=null,Dd=!1,co=null,or=0,Ic=0,qf=null,Nd=-1,Dc=0;function ar(){return(wt&6)!==0?Ht():Nd!==-1?Nd:Nd=Ht()}function uo(o){return(o.mode&1)===0?1:(wt&2)!==0&&jn!==0?jn&-jn:og.transition!==null?(Dc===0&&(Dc=Bh()),Dc):(o=kt,o!==0||(o=window.event,o=o===void 0?16:Im(o.type)),o)}function xs(o,c,m,w){if(50<Ic)throw Ic=0,qf=null,Error(t(185));Gl(o,m,w),((wt&2)===0||o!==Cn)&&(o===Cn&&((wt&2)===0&&(Rc|=m),gn===4&&ho(o,jn)),vr(o,w),m===1&&wt===0&&(c.mode&1)===0&&(Jo=Ht()+500,td&&eo()))}function vr(o,c){var m=o.callbackNode;Vy(o,c);var w=Do(o,o===Cn?jn:0);if(w===0)m!==null&&bm(m),o.callbackNode=null,o.callbackPriority=0;else if(c=w&-w,o.callbackPriority!==c){if(m!=null&&bm(m),c===1)o.tag===0?Uo(Tg.bind(null,o)):rg(Tg.bind(null,o)),Qu(function(){(wt&6)===0&&eo()}),m=null;else{switch(No(w)){case 1:m=jh;break;case 4:m=_m;break;case 16:m=Wl;break;case 536870912:m=Fh;break;default:m=Wl}m=Og(m,Od.bind(null,o))}o.callbackPriority=c,o.callbackNode=m}}function Od(o,c){if(Nd=-1,Dc=0,(wt&6)!==0)throw Error(t(327));var m=o.callbackNode;if(ul()&&o.callbackNode!==m)return null;var w=Do(o,o===Cn?jn:0);if(w===0)return null;if((w&30)!==0||(w&o.expiredLanes)!==0||c)c=Ld(o,w);else{c=w;var C=wt;wt|=2;var k=Rg();(Cn!==o||jn!==c)&&(Ei=null,Jo=Ht()+500,ea(o,c));do try{m0();break}catch(U){Pg(o,U)}while(!0);yi(),Rd.current=k,wt=C,fn!==null?c=0:(Cn=null,jn=0,c=gn)}if(c!==0){if(c===2&&(C=Tu(o),C!==0&&(w=C,c=Gf(o,C))),c===1)throw m=Pc,ea(o,0),ho(o,w),vr(o,Ht()),m;if(c===6)ho(o,w);else{if(C=o.current.alternate,(w&30)===0&&!f0(C)&&(c=Ld(o,w),c===2&&(k=Tu(o),k!==0&&(w=k,c=Gf(o,k))),c===1))throw m=Pc,ea(o,0),ho(o,w),vr(o,Ht()),m;switch(o.finishedWork=C,o.finishedLanes=w,c){case 0:case 1:throw Error(t(345));case 2:ta(o,gr,Ei);break;case 3:if(ho(o,w),(w&130023424)===w&&(c=Hf+500-Ht(),10<c)){if(Do(o,0)!==0)break;if(C=o.suspendedLanes,(C&w)!==w){ar(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=Xi(ta.bind(null,o,gr,Ei),c);break}ta(o,gr,Ei);break;case 4:if(ho(o,w),(w&4194240)===w)break;for(c=o.eventTimes,C=-1;0<w;){var D=31-ps(w);k=1<<D,D=c[D],D>C&&(C=D),w&=~k}if(w=C,w=Ht()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*kg(w/1960))-w,10<w){o.timeoutHandle=Xi(ta.bind(null,o,gr,Ei),w);break}ta(o,gr,Ei);break;case 5:ta(o,gr,Ei);break;default:throw Error(t(329))}}}return vr(o,Ht()),o.callbackNode===m?Od.bind(null,o):null}function Gf(o,c){var m=Mc;return o.current.memoizedState.isDehydrated&&(ea(o,c).flags|=256),o=Ld(o,c),o!==2&&(c=gr,gr=m,c!==null&&Kf(c)),o}function Kf(o){gr===null?gr=o:gr.push.apply(gr,o)}function f0(o){for(var c=o;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var C=m[w],k=C.getSnapshot;C=C.value;try{if(!de(k(),C))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ho(o,c){for(c&=~Md,c&=~Rc,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var m=31-ps(c),w=1<<m;o[m]=-1,c&=~w}}function Tg(o){if((wt&6)!==0)throw Error(t(327));ul();var c=Do(o,0);if((c&1)===0)return vr(o,Ht()),null;var m=Ld(o,c);if(o.tag!==0&&m===2){var w=Tu(o);w!==0&&(c=w,m=Gf(o,w))}if(m===1)throw m=Pc,ea(o,0),ho(o,c),vr(o,Ht()),m;if(m===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ta(o,gr,Ei),vr(o,Ht()),null}function Yf(o,c){var m=wt;wt|=1;try{return o(c)}finally{wt=m,wt===0&&(Jo=Ht()+500,td&&eo())}}function Zo(o){co!==null&&co.tag===0&&(wt&6)===0&&ul();var c=wt;wt|=1;var m=Jr.transition,w=kt;try{if(Jr.transition=null,kt=1,o)return o()}finally{kt=w,Jr.transition=m,wt=c,(wt&6)===0&&eo()}}function Xf(){Pr=cl.current,Ut(cl)}function ea(o,c){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,lc(m)),fn!==null)for(m=fn.return;m!==null;){var w=m;switch(Ho(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&ed();break;case 3:ro(),Ut(hr),Ut(Hn),dd();break;case 5:ud(w);break;case 4:ro();break;case 13:Ut(qt);break;case 19:Ut(qt);break;case 10:od(w.type._context);break;case 22:case 23:Xf()}m=m.return}if(Cn=o,fn=o=Ss(o.current,null),jn=Pr=c,gn=0,Pc=null,Md=Rc=ao=0,gr=Mc=null,qo!==null){for(c=0;c<qo.length;c++)if(m=qo[c],w=m.interleaved,w!==null){m.interleaved=null;var C=w.next,k=m.pending;if(k!==null){var D=k.next;k.next=C,w.next=D}m.pending=w}qo=null}return o}function Pg(o,c){do{var m=fn;try{if(yi(),mc.current=vd,Za){for(var w=Qt.memoizedState;w!==null;){var C=w.queue;C!==null&&(C.pending=null),w=w.next}Za=!1}if(so=0,mn=rn=Qt=null,gc=!1,Ko=0,Vf.current=null,m===null||m.return===null){gn=1,Pc=c,fn=null;break}e:{var k=o,D=m.return,U=m,G=c;if(c=jn,U.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var he=G,Ae=U,Ee=Ae.tag;if((Ae.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var xe=Ae.alternate;xe?(Ae.updateQueue=xe.updateQueue,Ae.memoizedState=xe.memoizedState,Ae.lanes=xe.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var De=vg(D);if(De!==null){De.flags&=-257,Rf(De,D,U,k,c),De.mode&1&&_c(k,he,c),c=De,G=he;var Le=c.updateQueue;if(Le===null){var je=new Set;je.add(G),c.updateQueue=je}else Le.add(G);break e}else{if((c&1)===0){_c(k,he,c),Qf();break e}G=Error(t(426))}}else if(zt&&U.mode&1){var sn=vg(D);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),Rf(sn,D,U,k,c),Vs(Qo(G,U));break e}}k=G=Qo(G,U),gn!==4&&(gn=2),Mc===null?Mc=[k]:Mc.push(k),k=D;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var ie=bc(k,G,c);cg(k,ie);break e;case 1:U=G;var X=k.type,le=k.stateNode;if((k.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(lo===null||!lo.has(le)))){k.flags|=65536,c&=-c,k.lanes|=c;var ke=xd(k,U,c);cg(k,ke);break e}}k=k.return}while(k!==null)}Ig(m)}catch($e){c=$e,fn===m&&m!==null&&(fn=m=m.return);continue}break}while(!0)}function Rg(){var o=Rd.current;return Rd.current=vd,o===null?vd:o}function Qf(){(gn===0||gn===3||gn===2)&&(gn=4),Cn===null||(ao&268435455)===0&&(Rc&268435455)===0||ho(Cn,jn)}function Ld(o,c){var m=wt;wt|=2;var w=Rg();(Cn!==o||jn!==c)&&(Ei=null,ea(o,c));do try{p0();break}catch(C){Pg(o,C)}while(!0);if(yi(),wt=m,Rd.current=w,fn!==null)throw Error(t(261));return Cn=null,jn=0,gn}function p0(){for(;fn!==null;)Mg(fn)}function m0(){for(;fn!==null&&!Cu();)Mg(fn)}function Mg(o){var c=Ng(o.alternate,o,Pr);o.memoizedProps=o.pendingProps,c===null?Ig(o):fn=c,Vf.current=null}function Ig(o){var c=o;do{var m=c.alternate;if(o=c.return,(c.flags&32768)===0){if(m=u0(m,c,Pr),m!==null){fn=m;return}}else{if(m=d0(m,c),m!==null){m.flags&=32767,fn=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{gn=6,fn=null;return}}if(c=c.sibling,c!==null){fn=c;return}fn=c=o}while(c!==null);gn===0&&(gn=5)}function ta(o,c,m){var w=kt,C=Jr.transition;try{Jr.transition=null,kt=1,g0(o,c,m,w)}finally{Jr.transition=C,kt=w}return null}function g0(o,c,m,w){do ul();while(co!==null);if((wt&6)!==0)throw Error(t(327));m=o.finishedWork;var C=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var k=m.lanes|m.childLanes;if(km(o,k),o===Cn&&(fn=Cn=null,jn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Dd||(Dd=!0,Og(Wl,function(){return ul(),null})),k=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||k){k=Jr.transition,Jr.transition=null;var D=kt;kt=1;var U=wt;wt|=4,Vf.current=null,h0(o,m),Uf(m,o),o0($o),Iu=!!oc,$o=oc=null,o.current=m,Pd(m),$y(),wt=U,kt=D,Jr.transition=k}else o.current=m;if(Dd&&(Dd=!1,co=o,or=C),k=o.pendingLanes,k===0&&(lo=null),zy(m.stateNode),vr(o,Ht()),c!==null)for(w=o.onRecoverableError,m=0;m<c.length;m++)C=c[m],w(C.value,{componentStack:C.stack,digest:C.digest});if(Id)throw Id=!1,o=Wf,Wf=null,o;return(or&1)!==0&&o.tag!==0&&ul(),k=o.pendingLanes,(k&1)!==0?o===qf?Ic++:(Ic=0,qf=o):Ic=0,eo(),null}function ul(){if(co!==null){var o=No(or),c=Jr.transition,m=kt;try{if(Jr.transition=null,kt=16>o?16:o,co===null)var w=!1;else{if(o=co,co=null,or=0,(wt&6)!==0)throw Error(t(331));var C=wt;for(wt|=4,Oe=o.current;Oe!==null;){var k=Oe,D=k.child;if((Oe.flags&16)!==0){var U=k.deletions;if(U!==null){for(var G=0;G<U.length;G++){var he=U[G];for(Oe=he;Oe!==null;){var Ae=Oe;switch(Ae.tag){case 0:case 11:case 15:Ci(8,Ae,k)}var Ee=Ae.child;if(Ee!==null)Ee.return=Ae,Oe=Ee;else for(;Oe!==null;){Ae=Oe;var xe=Ae.sibling,De=Ae.return;if(Sg(Ae),Ae===he){Oe=null;break}if(xe!==null){xe.return=De,Oe=xe;break}Oe=De}}}var Le=k.alternate;if(Le!==null){var je=Le.child;if(je!==null){Le.child=null;do{var sn=je.sibling;je.sibling=null,je=sn}while(je!==null)}}Oe=k}}if((k.subtreeFlags&2064)!==0&&D!==null)D.return=k,Oe=D;else e:for(;Oe!==null;){if(k=Oe,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Ci(9,k,k.return)}var ie=k.sibling;if(ie!==null){ie.return=k.return,Oe=ie;break e}Oe=k.return}}var X=o.current;for(Oe=X;Oe!==null;){D=Oe;var le=D.child;if((D.subtreeFlags&2064)!==0&&le!==null)le.return=D,Oe=le;else e:for(D=X;Oe!==null;){if(U=Oe,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Tc(9,U)}}catch($e){Jt(U,U.return,$e)}if(U===D){Oe=null;break e}var ke=U.sibling;if(ke!==null){ke.return=U.return,Oe=ke;break e}Oe=U.return}}if(wt=C,eo(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(Eu,o)}catch{}w=!0}return w}finally{kt=m,Jr.transition=c}}return!1}function jd(o,c,m){c=Qo(m,c),c=bc(o,c,1),o=Yr(o,c,1),c=ar(),o!==null&&(Gl(o,1,c),vr(o,c))}function Jt(o,c,m){if(o.tag===3)jd(o,o,m);else for(;c!==null;){if(c.tag===3){jd(c,o,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(lo===null||!lo.has(w))){o=Qo(m,o),o=xd(c,o,1),c=Yr(c,o,1),o=ar(),c!==null&&(Gl(c,1,o),vr(c,o));break}}c=c.return}}function v0(o,c,m){var w=o.pingCache;w!==null&&w.delete(c),c=ar(),o.pingedLanes|=o.suspendedLanes&m,Cn===o&&(jn&m)===m&&(gn===4||gn===3&&(jn&130023424)===jn&&500>Ht()-Hf?ea(o,0):Md|=m),vr(o,c)}function Dg(o,c){c===0&&((o.mode&1)===0?c=1:(c=ku,ku<<=1,(ku&130023424)===0&&(ku=4194304)));var m=ar();o=wi(o,c),o!==null&&(Gl(o,c,m),vr(o,m))}function y0(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),Dg(o,m)}function w0(o,c){var m=0;switch(o.tag){case 13:var w=o.stateNode,C=o.memoizedState;C!==null&&(m=C.retryLane);break;case 19:w=o.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(c),Dg(o,m)}var Ng;Ng=function(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps||hr.current)sr=!0;else{if((o.lanes&m)===0&&(c.flags&128)===0)return sr=!1,bg(o,c,m);sr=(o.flags&131072)!==0}else sr=!1,zt&&(c.flags&1048576)!==0&&sg(c,rd,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Cd(o,c),o=c.pendingProps;var C=Ka(c,Hn.current);no(c,m),C=Yo(null,c,w,o,C,m);var k=hd();return c.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,fr(w)?(k=!0,Hr(c)):k=!1,c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ld(c),C.updater=bd,c.stateNode=C,C._reactInternals=c,Pf(c,w,o,m),c=Lf(null,c,w,!0,k,m)):(c.tag=0,zt&&k&&cc(c),Nn(null,c,C,m),c=c.child),c;case 16:w=c.elementType;e:{switch(Cd(o,c),o=c.pendingProps,C=w._init,w=C(w._payload),c.type=w,C=c.tag=_0(w),o=Qr(w,o),C){case 0:c=Nf(null,c,w,o,m);break e;case 1:c=Of(null,c,w,o,m);break e;case 11:c=yg(null,c,w,o,m);break e;case 14:c=Mf(null,c,w,Qr(w.type,o),m);break e}throw Error(t(306,w,""))}return c;case 0:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Qr(w,C),Nf(o,c,w,C,m);case 1:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Qr(w,C),Of(o,c,w,C,m);case 3:e:{if(wg(c),o===null)throw Error(t(387));w=c.pendingProps,k=c.memoizedState,C=k.element,lg(o,c),Qa(c,w,null,m);var D=c.memoizedState;if(w=D.element,k.isDehydrated)if(k={element:w,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){C=Qo(Error(t(423)),c),c=Ks(o,c,w,m,C);break e}else if(w!==C){C=Qo(Error(t(424)),c),c=Ks(o,c,w,m,C);break e}else for(Er=Qi(c.stateNode.containerInfo.firstChild),qn=c,zt=!0,gs=null,m=id(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(zs(),w===C){c=ys(o,c,m);break e}Nn(o,c,w,m)}c=c.child}return c;case 5:return gf(c),o===null&&pr(c),w=c.type,C=c.pendingProps,k=o!==null?o.memoizedProps:null,D=C.children,ac(w,C)?D=null:k!==null&&ac(w,k)&&(c.flags|=32),Df(o,c),Nn(o,c,D,m),c.child;case 6:return o===null&&pr(c),null;case 13:return Ad(o,c,m);case 4:return mf(c,c.stateNode.containerInfo),w=c.pendingProps,o===null?c.child=tn(c,null,w,m):Nn(o,c,w,m),c.child;case 11:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Qr(w,C),yg(o,c,w,C,m);case 7:return Nn(o,c,c.pendingProps,m),c.child;case 8:return Nn(o,c,c.pendingProps.children,m),c.child;case 12:return Nn(o,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,C=c.pendingProps,k=c.memoizedProps,D=C.value,Bt(hc,w._currentValue),w._currentValue=D,k!==null)if(de(k.value,D)){if(k.children===C.children&&!hr.current){c=ys(o,c,m);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var U=k.dependencies;if(U!==null){D=k.child;for(var G=U.firstContext;G!==null;){if(G.context===w){if(k.tag===1){G=bi(-1,m&-m),G.tag=2;var he=k.updateQueue;if(he!==null){he=he.shared;var Ae=he.pending;Ae===null?G.next=G:(G.next=Ae.next,Ae.next=G),he.pending=G}}k.lanes|=m,G=k.alternate,G!==null&&(G.lanes|=m),Dn(k.return,m,c),U.lanes|=m;break}G=G.next}}else if(k.tag===10)D=k.type===c.type?null:k.child;else if(k.tag===18){if(D=k.return,D===null)throw Error(t(341));D.lanes|=m,U=D.alternate,U!==null&&(U.lanes|=m),Dn(D,m,c),D=k.sibling}else D=k.child;if(D!==null)D.return=k;else for(D=k;D!==null;){if(D===c){D=null;break}if(k=D.sibling,k!==null){k.return=D.return,D=k;break}D=D.return}k=D}Nn(o,c,C.children,m),c=c.child}return c;case 9:return C=c.type,w=c.pendingProps.children,no(c,m),C=Gr(C),w=w(C),c.flags|=1,Nn(o,c,w,m),c.child;case 14:return w=c.type,C=Qr(w,c.pendingProps),C=Qr(w.type,C),Mf(o,c,w,C,m);case 15:return Gs(o,c,c.type,c.pendingProps,m);case 17:return w=c.type,C=c.pendingProps,C=c.elementType===w?C:Qr(w,C),Cd(o,c),c.tag=1,fr(w)?(o=!0,Hr(c)):o=!1,no(c,m),Xo(c,w,C),Pf(c,w,C,m),Lf(null,c,w,!0,o,m);case 19:return io(o,c,m);case 22:return If(o,c,m)}throw Error(t(156,c.tag))};function Og(o,c){return Au(o,c)}function b0(o,c,m,w){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(o,c,m,w){return new b0(o,c,m,w)}function Fd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function _0(o){if(typeof o=="function")return Fd(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ce)return 11;if(o===W)return 14}return 2}function Ss(o,c){var m=o.alternate;return m===null?(m=Zr(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function Bd(o,c,m,w,C,k){var D=2;if(w=o,typeof o=="function")Fd(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case $:return na(m.children,C,k,c);case H:D=8,C|=8;break;case Y:return o=Zr(12,m,c,C|2),o.elementType=Y,o.lanes=k,o;case ae:return o=Zr(13,m,c,C),o.elementType=ae,o.lanes=k,o;case me:return o=Zr(19,m,c,C),o.elementType=me,o.lanes=k,o;case ne:return $d(m,C,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ue:D=10;break e;case oe:D=9;break e;case ce:D=11;break e;case W:D=14;break e;case q:D=16,w=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=Zr(D,m,c,C),c.elementType=o,c.type=w,c.lanes=k,c}function na(o,c,m,w){return o=Zr(7,o,w,c),o.lanes=m,o}function $d(o,c,m,w){return o=Zr(22,o,w,c),o.elementType=ne,o.lanes=m,o.stateNode={isHidden:!1},o}function Jf(o,c,m){return o=Zr(6,o,null,c),o.lanes=m,o}function Zf(o,c,m){return c=Zr(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function x0(o,c,m,w,C){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=w,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function ep(o,c,m,w,C,k,D,U,G){return o=new x0(o,c,m,U,G),c===1?(c=1,k===!0&&(c|=8)):c=0,k=Zr(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},ld(k),o}function S0(o,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:w==null?null:""+w,children:o,containerInfo:c,implementation:m}}function Lg(o){if(!o)return Zi;o=o._reactInternals;e:{if(ye(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(fr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var m=o.type;if(fr(m))return tg(o,m,c)}return c}function jg(o,c,m,w,C,k,D,U,G){return o=ep(m,w,!0,o,C,k,D,U,G),o.context=Lg(null),m=o.current,w=ar(),C=uo(m),k=bi(w,C),k.callback=c??null,Yr(m,k,C),o.current.lanes=C,Gl(o,C,w),vr(o,w),o}function Ud(o,c,m,w){var C=c.current,k=ar(),D=uo(C);return m=Lg(m),c.context===null?c.context=m:c.pendingContext=m,c=bi(k,D),c.payload={element:o},w=w===void 0?null:w,w!==null&&(c.callback=w),o=Yr(C,c,D),o!==null&&(xs(o,C,D,k),cd(o,C,D)),D}function zd(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Fg(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function tp(o,c){Fg(o,c),(o=o.alternate)&&Fg(o,c)}function A0(){return null}var Bg=typeof reportError=="function"?reportError:function(o){console.error(o)};function Vd(o){this._internalRoot=o}Nc.prototype.render=Vd.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));Ud(o,c,null,null)},Nc.prototype.unmount=Vd.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Zo(function(){Ud(null,o,null,null)}),c[Cr]=null}};function Nc(o){this._internalRoot=o}Nc.prototype.unstable_scheduleHydration=function(o){if(o){var c=Uh();o={blockedOn:null,target:o,priority:c};for(var m=0;m<Wi.length&&c!==0&&c<Wi[m].priority;m++);Wi.splice(m,0,o),m===0&&Rm(o)}};function np(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Hd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function $g(){}function C0(o,c,m,w,C){if(C){if(typeof w=="function"){var k=w;w=function(){var he=zd(D);k.call(he)}}var D=jg(c,w,o,0,null,!1,!1,"",$g);return o._reactRootContainer=D,o[Cr]=D.current,Yi(o.nodeType===8?o.parentNode:o),Zo(),D}for(;C=o.lastChild;)o.removeChild(C);if(typeof w=="function"){var U=w;w=function(){var he=zd(G);U.call(he)}}var G=ep(o,0,!1,null,null,!1,!1,"",$g);return o._reactRootContainer=G,o[Cr]=G.current,Yi(o.nodeType===8?o.parentNode:o),Zo(function(){Ud(c,G,m,w)}),G}function ra(o,c,m,w,C){var k=m._reactRootContainer;if(k){var D=k;if(typeof C=="function"){var U=C;C=function(){var G=zd(D);U.call(G)}}Ud(c,D,o,C)}else D=C0(m,c,o,C,w);return zd(D)}$h=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ra(c.pendingLanes);m!==0&&(Kl(c,m|1),vr(c,Ht()),(wt&6)===0&&(Jo=Ht()+500,eo()))}break;case 13:Zo(function(){var w=wi(o,1);if(w!==null){var C=ar();xs(w,o,1,C)}}),tp(o,1)}},Pu=function(o){if(o.tag===13){var c=wi(o,134217728);if(c!==null){var m=ar();xs(c,o,134217728,m)}tp(o,134217728)}},Tm=function(o){if(o.tag===13){var c=uo(o),m=wi(o,c);if(m!==null){var w=ar();xs(m,o,c,w)}tp(o,c)}},Uh=function(){return kt},zh=function(o,c){var m=kt;try{return kt=o,c()}finally{kt=m}},Ul=function(o,c,m){switch(c){case"input":if(Mn(o,m),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==o&&w.form===o.form){var C=Zu(w);if(!C)throw Error(t(90));Mt(w),Mn(w,C)}}}break;case"textarea":gu(o,m);break;case"select":c=m.value,c!=null&&Sn(o,!!m.multiple,c,!1)}},_u=Yf,zl=Zo;var E0={usingClientEntryPoint:!1,Events:[Vn,lt,Zu,wu,bu,Yf]},Oc={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k0={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Ds(o),o===null?null:o.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||A0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Eu=Wd.inject(k0),Ns=Wd}catch{}}return rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0,rs.createPortal=function(o,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!np(c))throw Error(t(200));return S0(o,c,null,m)},rs.createRoot=function(o,c){if(!np(o))throw Error(t(299));var m=!1,w="",C=Bg;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(C=c.onRecoverableError)),c=ep(o,1,!1,null,null,m,!1,w,C),o[Cr]=c.current,Yi(o.nodeType===8?o.parentNode:o),new Vd(c)},rs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Ds(c),o=o===null?null:o.stateNode,o},rs.flushSync=function(o){return Zo(o)},rs.hydrate=function(o,c,m){if(!Hd(c))throw Error(t(200));return ra(null,o,c,!0,m)},rs.hydrateRoot=function(o,c,m){if(!np(o))throw Error(t(405));var w=m!=null&&m.hydratedSources||null,C=!1,k="",D=Bg;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(D=m.onRecoverableError)),c=jg(c,null,o,1,m??null,C,!1,k,D),o[Cr]=c.current,Yi(o),w)for(o=0;o<w.length;o++)m=w[o],C=m._getVersion,C=C(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,C]:c.mutableSourceEagerHydrationData.push(m,C);return new Nc(c)},rs.render=function(o,c,m){if(!Hd(c))throw Error(t(200));return ra(null,o,c,!1,m)},rs.unmountComponentAtNode=function(o){if(!Hd(o))throw Error(t(40));return o._reactRootContainer?(Zo(function(){ra(null,null,o,!1,function(){o._reactRootContainer=null,o[Cr]=null})}),!0):!1},rs.unstable_batchedUpdates=Yf,rs.unstable_renderSubtreeIntoContainer=function(o,c,m,w){if(!Hd(m))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return ra(o,c,m,!1,w)},rs.version="18.3.1-next-f1338f8080-20240426",rs}var Kx;function YC(){if(Kx)return V0.exports;Kx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),V0.exports=cN(),V0.exports}var Yx;function uN(){if(Yx)return Wg;Yx=1;var n=YC();return Wg.createRoot=n.createRoot,Wg.hydrateRoot=n.hydrateRoot,Wg}var dN=uN();const hN=im(dN),fN="modulepreload",pN=function(n){return"/"+n},Xx={},qe=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=d(t.map(h=>{if(h=pN(h),h in Xx)return;Xx[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":fN,f||(v.as="script"),v.crossOrigin="",v.href=h,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((_,S)=>{v.addEventListener("load",_),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var om=YC();const mN=im(om);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bp.apply(this,arguments)}var bl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(bl||(bl={}));const Qx="popstate";function gN(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return Ow("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Rv(s)}return yN(e,t,null,n)}function _n(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function XC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vN(){return Math.random().toString(36).substr(2,8)}function Jx(n,e){return{usr:n.state,key:n.key,idx:e}}function Ow(n,e,t,r){return t===void 0&&(t=null),Bp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ph(e):e,{state:t,key:e&&e.key||r||vN()})}function Rv(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ph(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function yN(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=bl.Pop,d=null,h=f();h==null&&(h=0,a.replaceState(Bp({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function g(){l=bl.Pop;let E=f(),P=E==null?null:E-h;h=E,d&&d({action:l,location:x.location,delta:P})}function v(E,P){l=bl.Push;let R=Ow(x.location,E,P);h=f()+1;let M=Jx(R,h),N=x.createHref(R);try{a.pushState(M,"",N)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(N)}i&&d&&d({action:l,location:x.location,delta:1})}function _(E,P){l=bl.Replace;let R=Ow(x.location,E,P);h=f();let M=Jx(R,h),N=x.createHref(R);a.replaceState(M,"",N),i&&d&&d({action:l,location:x.location,delta:0})}function S(E){let P=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof E=="string"?E:Rv(E);return R=R.replace(/ $/,"%20"),_n(P,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,P)}let x={get action(){return l},get location(){return n(s,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Qx,g),d=E,()=>{s.removeEventListener(Qx,g),d=null}},createHref(E){return e(s,E)},createURL:S,encodeLocation(E){let P=S(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:_,go(E){return a.go(E)}};return x}var Zx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Zx||(Zx={}));function wN(n,e,t){return t===void 0&&(t="/"),bN(n,e,t)}function bN(n,e,t,r){let s=typeof e=="string"?Ph(e):e,i=Lb(s.pathname||"/",t);if(i==null)return null;let a=QC(n);_N(a);let l=null;for(let d=0;l==null&&d<a.length;++d){let h=DN(i);l=RN(a[d],h)}return l}function QC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};d.relativePath.startsWith("/")&&(_n(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=_l([r,d.relativePath]),f=t.concat(d);i.children&&i.children.length>0&&(_n(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),QC(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:TN(h,i.index),routesMeta:f})};return n.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let d of JC(i.path))s(i,a,d)}),e}function JC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=JC(r.join("/")),l=[];return l.push(...a.map(d=>d===""?i:[i,d].join("/"))),s&&l.push(...a),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function _N(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:PN(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const xN=/^:[\w-]+$/,SN=3,AN=2,CN=1,EN=10,kN=-2,eS=n=>n==="*";function TN(n,e){let t=n.split("/"),r=t.length;return t.some(eS)&&(r+=kN),e&&(r+=AN),t.filter(s=>!eS(s)).reduce((s,i)=>s+(xN.test(i)?SN:i===""?CN:EN),r)}function PN(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function RN(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=MN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),v=d.route;if(!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:_l([i,g.pathname]),pathnameBase:jN(_l([i,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(i=_l([i,g.pathnameBase]))}return a}function MN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=IN(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((h,f,g)=>{let{paramName:v,isOptional:_}=f;if(v==="*"){let x=l[g]||"";a=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[g];return _&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:n}}function IN(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),XC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return XC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Lb(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function NN(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ph(n):n;return{pathname:t?t.startsWith("/")?t:ON(t,e):e,search:FN(r),hash:BN(s)}}function ON(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function q0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jb(n,e){let t=LN(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fb(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Ph(n):(s=Bp({},n),_n(!s.pathname||!s.pathname.includes("?"),q0("?","pathname","search",s)),_n(!s.pathname||!s.pathname.includes("#"),q0("#","pathname","hash",s)),_n(!s.search||!s.search.includes("#"),q0("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;s.pathname=v.join("/")}l=g>=0?e[g]:"/"}let d=NN(s,l),h=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const _l=n=>n.join("/").replace(/\/\/+/g,"/"),jN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,BN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function $N(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ZC=["post","put","patch","delete"];new Set(ZC);const UN=["get",...ZC];new Set(UN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $p(){return $p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$p.apply(this,arguments)}const Bb=A.createContext(null),zN=A.createContext(null),Ml=A.createContext(null),ey=A.createContext(null),_o=A.createContext({outlet:null,matches:[],isDataRoute:!1}),eE=A.createContext(null);function VN(n,e){let{relative:t}=e===void 0?{}:e;Rh()||_n(!1);let{basename:r,navigator:s}=A.useContext(Ml),{hash:i,pathname:a,search:l}=nE(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:_l([r,a])),s.createHref({pathname:d,search:l,hash:i})}function Rh(){return A.useContext(ey)!=null}function Fi(){return Rh()||_n(!1),A.useContext(ey).location}function tE(n){A.useContext(Ml).static||A.useLayoutEffect(n)}function Mh(){let{isDataRoute:n}=A.useContext(_o);return n?sO():HN()}function HN(){Rh()||_n(!1);let n=A.useContext(Bb),{basename:e,future:t,navigator:r}=A.useContext(Ml),{matches:s}=A.useContext(_o),{pathname:i}=Fi(),a=JSON.stringify(jb(s,t.v7_relativeSplatPath)),l=A.useRef(!1);return tE(()=>{l.current=!0}),A.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let g=Fb(h,JSON.parse(a),i,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:_l([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,a,i,n])}const WN=A.createContext(null);function qN(n){let e=A.useContext(_o).outlet;return e&&A.createElement(WN.Provider,{value:n},e)}function v9(){let{matches:n}=A.useContext(_o),e=n[n.length-1];return e?e.params:{}}function nE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=A.useContext(Ml),{matches:s}=A.useContext(_o),{pathname:i}=Fi(),a=JSON.stringify(jb(s,r.v7_relativeSplatPath));return A.useMemo(()=>Fb(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function GN(n,e){return KN(n,e)}function KN(n,e,t,r){Rh()||_n(!1);let{navigator:s}=A.useContext(Ml),{matches:i}=A.useContext(_o),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=Fi(),f;if(e){var g;let E=typeof e=="string"?Ph(e):e;d==="/"||(g=E.pathname)!=null&&g.startsWith(d)||_n(!1),f=E}else f=h;let v=f.pathname||"/",_=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=wN(n,{pathname:_}),x=ZN(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:_l([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:_l([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,r);return e&&x?A.createElement(ey.Provider,{value:{location:$p({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:bl.Pop}},x):x}function YN(){let n=rO(),e=$N(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const XN=A.createElement(YN,null);class QN extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(_o.Provider,{value:this.props.routeContext},A.createElement(eE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JN(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Bb);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(_o.Provider,{value:e},r)}function ZN(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(s=t)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);f>=0||_n(!1),a=a.slice(0,Math.min(a.length,f+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:v,errors:_}=t,S=g.route.loader&&v[g.route.id]===void 0&&(!_||_[g.route.id]===void 0);if(g.route.lazy||S){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,g,v)=>{let _,S=!1,x=null,E=null;t&&(_=l&&g.route.id?l[g.route.id]:void 0,x=g.route.errorElement||XN,d&&(h<0&&v===0?(iO("route-fallback"),S=!0,E=null):h===v&&(S=!0,E=g.route.hydrateFallbackElement||null)));let P=e.concat(a.slice(0,v+1)),R=()=>{let M;return _?M=x:S?M=E:g.route.Component?M=A.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=f,A.createElement(JN,{match:g,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:M})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?A.createElement(QN,{location:t.location,revalidation:t.revalidation,component:x,error:_,children:R(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):R()},null)}var rE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(rE||{}),sE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(sE||{});function eO(n){let e=A.useContext(Bb);return e||_n(!1),e}function tO(n){let e=A.useContext(zN);return e||_n(!1),e}function nO(n){let e=A.useContext(_o);return e||_n(!1),e}function iE(n){let e=nO(),t=e.matches[e.matches.length-1];return t.route.id||_n(!1),t.route.id}function rO(){var n;let e=A.useContext(eE),t=tO(),r=iE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sO(){let{router:n}=eO(rE.UseNavigateStable),e=iE(sE.UseNavigateStable),t=A.useRef(!1);return tE(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,$p({fromRouteId:e},i)))},[n,e])}const tS={};function iO(n,e,t){tS[n]||(tS[n]=!0)}function oO(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Up(n){let{to:e,replace:t,state:r,relative:s}=n;Rh()||_n(!1);let{future:i,static:a}=A.useContext(Ml),{matches:l}=A.useContext(_o),{pathname:d}=Fi(),h=Mh(),f=Fb(e,jb(l,i.v7_relativeSplatPath),d,s==="path"),g=JSON.stringify(f);return A.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:s}),[h,g,s,t,r]),null}function $b(n){return qN(n.context)}function ze(n){_n(!1)}function aO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=bl.Pop,navigator:i,static:a=!1,future:l}=n;Rh()&&_n(!1);let d=e.replace(/^\/*/,"/"),h=A.useMemo(()=>({basename:d,navigator:i,static:a,future:$p({v7_relativeSplatPath:!1},l)}),[d,l,i,a]);typeof r=="string"&&(r=Ph(r));let{pathname:f="/",search:g="",hash:v="",state:_=null,key:S="default"}=r,x=A.useMemo(()=>{let E=Lb(f,d);return E==null?null:{location:{pathname:E,search:g,hash:v,state:_,key:S},navigationType:s}},[d,f,g,v,_,S,s]);return x==null?null:A.createElement(Ml.Provider,{value:h},A.createElement(ey.Provider,{children:t,value:x}))}function oE(n){let{children:e,location:t}=n;return GN(Lw(e),t)}new Promise(()=>{});function Lw(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,Lw(r.props.children,i));return}r.type!==ze&&_n(!1),!r.props.index||!r.props.children||_n(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Lw(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jw(){return jw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jw.apply(this,arguments)}function lO(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function cO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uO(n,e){return n.button===0&&(!e||e==="_self")&&!cO(n)}const dO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hO="6";try{window.__reactRouterVersion=hO}catch{}const fO="startTransition",nS=Ob[fO];function pO(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=gN({window:s,v5Compat:!0}));let a=i.current,[l,d]=A.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=A.useCallback(g=>{h&&nS?nS(()=>d(g)):d(g)},[d,h]);return A.useLayoutEffect(()=>a.listen(f),[a,f]),A.useEffect(()=>oO(r),[r]),A.createElement(aO,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:r})}const mO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vO=A.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:d,to:h,preventScrollReset:f,viewTransition:g}=e,v=lO(e,dO),{basename:_}=A.useContext(Ml),S,x=!1;if(typeof h=="string"&&gO.test(h)&&(S=h,mO))try{let M=new URL(window.location.href),N=h.startsWith("//")?new URL(M.protocol+h):new URL(h),L=Lb(N.pathname,_);N.origin===M.origin&&L!=null?h=L+N.search+N.hash:x=!0}catch{}let E=VN(h,{relative:s}),P=yO(h,{replace:a,state:l,target:d,preventScrollReset:f,relative:s,viewTransition:g});function R(M){r&&r(M),M.defaultPrevented||P(M)}return A.createElement("a",jw({},v,{href:S||E,onClick:x||i?r:R,ref:t,target:d}))});var rS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(rS||(rS={}));var sS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sS||(sS={}));function yO(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,d=Mh(),h=Fi(),f=nE(n,{relative:a});return A.useCallback(g=>{if(uO(g,t)){g.preventDefault();let v=r!==void 0?r:Rv(h)===Rv(f);d(n,{replace:v,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[h,d,f,r,s,t,n,i,a,l])}const aE=A.createContext(),lE=()=>{const n=A.useContext(aE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},wO=({children:n})=>{const[e,t]=A.useState(()=>{try{const s=localStorage.getItem("go-fotografo-theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(s){return console.error("Could not access localStorage to get theme.",s),"light"}});A.useEffect(()=>{try{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("go-fotografo-theme",e)}catch(s){console.error("Could not access localStorage to set theme.",s)}},[e]);const r=()=>{t(s=>s==="light"?"dark":"light")};return y.jsx(aE.Provider,{value:{theme:e,setTheme:t,toggleTheme:r},children:n})},bO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>am);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ub extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class _O extends Ub{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class xO extends Ub{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class SO extends Ub{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fw;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Fw||(Fw={}));var AO=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class CO{constructor(e,{headers:t={},customFetch:r,region:s=Fw.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=bO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return AO(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let l={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:h}).catch(S=>{throw new _O(S)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new xO(f);if(!f.ok)throw new SO(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield f.json():v==="application/octet-stream"?_=yield f.blob():v==="text/event-stream"?_=f:v==="multipart/form-data"?_=yield f.formData():_=yield f.text(),{data:_,error:null}}catch(s){return{data:null,error:s}}})}}var Xn={},Yd={},Xd={},Qd={},Jd={},Zd={},EO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_h=EO();const kO=_h.fetch,TO=_h.fetch.bind(_h),PO=_h.Headers,RO=_h.Request,MO=_h.Response,am=Object.freeze(Object.defineProperty({__proto__:null,Headers:PO,Request:RO,Response:MO,default:TO,fetch:kO},Symbol.toStringTag,{value:"Module"})),IO=rN(am);var qg={},iS;function cE(){if(iS)return qg;iS=1,Object.defineProperty(qg,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return qg.default=n,qg}var oS;function uE(){if(oS)return Zd;oS=1;var n=Zd&&Zd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Zd,"__esModule",{value:!0});const e=n(IO),t=n(cE());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,g,v;let _=null,S=null,x=null,E=h.status,P=h.statusText;if(h.ok){if(this.method!=="HEAD"){const L=await h.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=L:S=JSON.parse(L))}const M=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),N=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");M&&N&&N.length>1&&(x=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(_={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,x=null,E=406,P="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const M=await h.text();try{_=JSON.parse(M),Array.isArray(_)&&h.status===404&&(S=[],_=null,E=200,P="OK")}catch{h.status===404&&M===""?(E=204,P="No Content"):_={message:M}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,E=200,P="OK"),_&&this.shouldThrowOnError)throw new t.default(_)}return{error:_,data:S,count:x,status:E,statusText:P}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,g,v;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,a)}returns(){return this}overrideTypes(){return this}}return Zd.default=r,Zd}var aS;function dE(){if(aS)return Jd;aS=1;var n=Jd&&Jd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jd,"__esModule",{value:!0});const e=n(uE());class t extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[s?"analyze":null,i?"verbose":null,a?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Jd.default=t,Jd}var lS;function zb(){if(lS)return Qd;lS=1;var n=Qd&&Qd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qd,"__esModule",{value:!0});const e=n(dE());class t extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${d}fts${h}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Qd.default=t,Qd}var cS;function hE(){if(cS)return Xd;cS=1;var n=Xd&&Xd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xd,"__esModule",{value:!0});const e=n(zb());class t{constructor(s,{headers:i={},schema:a,fetch:l}){this.url=s,this.headers=i,this.schema=a,this.fetch=l}select(s,{head:i=!1,count:a}={}){const l=i?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const l="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),i&&d.push(`count=${i}`),a||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const h=s.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:l,defaultToNull:d=!0}={}){const h="POST",f=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),d||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(s)){const g=s.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(g.length>0){const v=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Xd.default=t,Xd}var op={},ap={},uS;function DO(){return uS||(uS=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.version=void 0,ap.version="0.0.0-automated"),ap}var dS;function NO(){if(dS)return op;dS=1,Object.defineProperty(op,"__esModule",{value:!0}),op.DEFAULT_HEADERS=void 0;const n=DO();return op.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},op}var hS;function OO(){if(hS)return Yd;hS=1;var n=Yd&&Yd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Yd,"__esModule",{value:!0});const e=n(hE()),t=n(zb()),r=NO();class s{constructor(a,{headers:l={},schema:d,fetch:h}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=d,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:d=!1,get:h=!1,count:f}={}){let g;const v=new URL(`${this.url}/rpc/${a}`);let _;d||h?(g=d?"HEAD":"GET",Object.entries(l).filter(([x,E])=>E!==void 0).map(([x,E])=>[x,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([x,E])=>{v.searchParams.append(x,E)})):(g="POST",_=l);const S=Object.assign({},this.headers);return f&&(S.Prefer=`count=${f}`),new t.default({method:g,url:v,headers:S,schema:this.schemaName,body:_,fetch:this.fetch,allowEmpty:!1})}}return Yd.default=s,Yd}var fS;function LO(){if(fS)return Xn;fS=1;var n=Xn&&Xn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.PostgrestError=Xn.PostgrestBuilder=Xn.PostgrestTransformBuilder=Xn.PostgrestFilterBuilder=Xn.PostgrestQueryBuilder=Xn.PostgrestClient=void 0;const e=n(OO());Xn.PostgrestClient=e.default;const t=n(hE());Xn.PostgrestQueryBuilder=t.default;const r=n(zb());Xn.PostgrestFilterBuilder=r.default;const s=n(dE());Xn.PostgrestTransformBuilder=s.default;const i=n(uE());Xn.PostgrestBuilder=i.default;const a=n(cE());return Xn.PostgrestError=a.default,Xn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},Xn}var jO=LO();const FO=im(jO),{PostgrestClient:BO,PostgrestQueryBuilder:y9,PostgrestFilterBuilder:w9,PostgrestTransformBuilder:b9,PostgrestBuilder:_9,PostgrestError:x9}=FO;let Bw;typeof window>"u"?Bw=require("ws"):Bw=window.WebSocket;const $O="2.11.10",UO={"X-Client-Info":`realtime-js/${$O}`},zO="1.0.0",fE=1e4,VO=1e3;var ph;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ph||(ph={}));var Mr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Mr||(Mr={}));var Ni;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ni||(Ni={}));var $w;(function(n){n.websocket="websocket"})($w||($w={}));var Hc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Hc||(Hc={}));class HO{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const d=r.decode(e.slice(a,a+i));a=a+i;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:d,payload:h}}}class pE{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Kt||(Kt={}));const pS=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=WO(a,n,e,s),i),{})},WO=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s?.type,a=t[n];return i&&!r.includes(i)?mE(i,a):Uw(a)},mE=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return YO(e,t)}switch(n){case Kt.bool:return qO(e);case Kt.float4:case Kt.float8:case Kt.int2:case Kt.int4:case Kt.int8:case Kt.numeric:case Kt.oid:return GO(e);case Kt.json:case Kt.jsonb:return KO(e);case Kt.timestamp:return XO(e);case Kt.abstime:case Kt.date:case Kt.daterange:case Kt.int4range:case Kt.int8range:case Kt.money:case Kt.reltime:case Kt.text:case Kt.time:case Kt.timestamptz:case Kt.timetz:case Kt.tsrange:case Kt.tstzrange:return Uw(e);default:return Uw(e)}},Uw=n=>n,qO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},GO=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},KO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},YO=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>mE(e,l))}return n},XO=n=>typeof n=="string"?n.replace(" ","T"):n,gE=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class G0{constructor(e,t,r={},s=fE){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(mS||(mS={}));class Pp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pp.syncState(this.state,s,i,a),this.pendingDiffs.forEach(d=>{this.state=Pp.syncDiff(this.state,d,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Pp.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),l={},d={};return this.map(i,(h,f)=>{a[h]||(d[h]=f)}),this.map(a,(h,f)=>{const g=i[h];if(g){const v=f.map(E=>E.presence_ref),_=g.map(E=>E.presence_ref),S=f.filter(E=>_.indexOf(E.presence_ref)<0),x=g.filter(E=>v.indexOf(E.presence_ref)<0);S.length>0&&(l[h]=S),x.length>0&&(d[h]=x)}else l[h]=f}),this.syncDiff(i,{joins:l,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var h;const f=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(d),f.length>0){const g=e[l].map(_=>_.presence_ref),v=f.filter(_=>g.indexOf(_.presence_ref)<0);e[l].unshift(...v)}r(l,f,d)}),this.map(a,(l,d)=>{let h=e[l];if(!h)return;const f=d.map(g=>g.presence_ref);h=h.filter(g=>f.indexOf(g.presence_ref)<0),e[l]=h,s(l,h,d),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(gS||(gS={}));var vS;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(vS||(vS={}));var fa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class Vb{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Mr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new G0(this,Ni.join,this.params,this.timeout),this.rejoinTimer=new pE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ni.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Pp(this),this.broadcastEndpointURL=gE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(f=>e?.(fa.CHANNEL_ERROR,f)),this._onClose(()=>e?.(fa.CLOSED));const d={},h={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e?.(fa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,_=(g=v?.length)!==null&&g!==void 0?g:0,S=[];for(let x=0;x<_;x++){const E=v[x],{filter:{event:P,schema:R,table:M,filter:N}}=E,L=f&&f[x];if(L&&L.event===P&&L.schema===R&&L.table===M&&L.filter===N)S.push(Object.assign(Object.assign({},E),{id:L.id}));else{this.unsubscribe(),this.state=Mr.errored,e?.(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(fa.SUBSCRIBED);return}}).receive("error",f=>{this.state=Mr.errored,e?.(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ni.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new G0(this,Ni.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new G0(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:d,leave:h,join:f}=Ni;if(r&&[l,d,h,f].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var S,x,E;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(x=_.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(_=>_.callback(v,r)):(i=this.bindings[a])===null||i===void 0||i.filter(_=>{var S,x,E,P,R,M;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in _){const N=_.id,L=(S=_.filter)===null||S===void 0?void 0:S.event;return N&&((x=t.ids)===null||x===void 0?void 0:x.includes(N))&&(L==="*"||L?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const N=(R=(P=_?.filter)===null||P===void 0?void 0:P.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return N==="*"||N===((M=t?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===a}).map(_=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:E,commit_timestamp:P,type:R,errors:M}=S;v=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:P,eventType:R,new:{},old:{},errors:M}),this._getPayloadRecords(S))}_.callback(v,r)})}_isClosed(){return this.state===Mr.closed}_isJoined(){return this.state===Mr.joined}_isJoining(){return this.state===Mr.joining}_isLeaving(){return this.state===Mr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Vb.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ni.close,{},e)}_onError(e){this._on(Ni.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pS(e.columns,e.old_record)),t}}const yS=()=>{},QO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JO{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=UO,this.params={},this.timeout=fE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yS,this.ref=0,this.logger=yS,this.conn=null,this.sendBuffer=[],this.serializer=new HO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>qe(async()=>{const{default:d}=await Promise.resolve().then(()=>am);return{default:d}},void 0).then(({default:d})=>d(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${$w.websocket}`,this.httpEndpoint=gE(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t?.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Bw),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new ZO(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zO}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ph.connecting:return Hc.Connecting;case ph.open:return Hc.Open;case ph.closing:return Hc.Closing;default:return Hc.Closed}}isConnected(){return this.connectionState()===Hc.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Vb(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Ni.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(VO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:a}=t;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ni.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([QO],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class ZO{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ph.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Hb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class eL extends Hb{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class zw extends Hb{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tL=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const vE=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>am);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},nL=()=>tL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>am),void 0)).Response:Response}),Vw=n=>{if(Array.isArray(n))return n.map(t=>Vw(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Vw(r)}),e},rL=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var ou=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const K0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),sL=(n,e,t)=>ou(void 0,void 0,void 0,function*(){const r=yield nL();n instanceof r&&!t?.noResolveJson?n.json().then(s=>{const i=n.status||500,a=s?.statusCode||i+"";e(new eL(K0(s),i,a))}).catch(s=>{e(new zw(K0(s),s))}):e(new zw(K0(n),n))}),iL=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"||!r?s:(rL(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),t))};function lm(n,e,t,r,s,i){return ou(this,void 0,void 0,function*(){return new Promise((a,l)=>{n(t,iL(e,r,s,i)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>sL(d,l,r))})})}function Mv(n,e,t,r){return ou(this,void 0,void 0,function*(){return lm(n,"GET",e,t,r)})}function pa(n,e,t,r,s){return ou(this,void 0,void 0,function*(){return lm(n,"POST",e,r,s,t)})}function Hw(n,e,t,r,s){return ou(this,void 0,void 0,function*(){return lm(n,"PUT",e,r,s,t)})}function oL(n,e,t,r){return ou(this,void 0,void 0,function*(){return lm(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function yE(n,e,t,r,s){return ou(this,void 0,void 0,function*(){return lm(n,"DELETE",e,r,s,t)})}var ss=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const aL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lL{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=vE(s)}uploadOrUpdate(e,t,r,s){return ss(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},wS),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),g=yield(e=="PUT"?Hw:pa)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ss(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ss(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:wS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const g=yield Hw(this.fetch,l.toString(),d,{headers:f});return{data:{path:i,fullPath:g.Key},error:null}}catch(d){if(Qn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return ss(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const i=yield pa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Hb("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}update(e,t,r){return ss(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ss(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ss(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ss(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ss(this,void 0,void 0,function*(){try{const s=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}download(e,t){return ss(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Mv(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Qn(l))return{data:null,error:l};throw l}})}info(e){return ss(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Mv(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Vw(r),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}exists(e){return ss(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield oL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Qn(r)&&r instanceof zw){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return ss(this,void 0,void 0,function*(){try{return{data:yield yE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}list(e,t,r){return ss(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aL),t),{prefix:e||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cL="2.7.3",uL={"X-Client-Info":`storage-js/${cL}`};var eh=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class dL{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},uL),t),this.fetch=vE(r)}listBuckets(){return eh(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Qn(e))return{data:null,error:e};throw e}})}getBucket(e){return eh(this,void 0,void 0,function*(){try{return{data:yield Mv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return eh(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return eh(this,void 0,void 0,function*(){try{return{data:yield Hw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return eh(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return eh(this,void 0,void 0,function*(){try{return{data:yield yE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}}class hL extends dL{constructor(e,t={},r){super(e,t,r)}from(e){return new lL(this.url,this.headers,e,this.fetch)}}const fL="2.30.0",pL={"X-Client-Info":`supabase-js/${fL}`};var Gg={exports:{}},bS;function mL(){return bS||(bS=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof wl<"u"&&wl,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(a){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof wl<"u"&&wl||{},d={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function h(W){return W&&DataView.prototype.isPrototypeOf(W)}if(d.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(W){return W&&f.indexOf(Object.prototype.toString.call(W))>-1};function v(W){if(typeof W!="string"&&(W=String(W)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(W)||W==="")throw new TypeError('Invalid character in header field name: "'+W+'"');return W.toLowerCase()}function _(W){return typeof W!="string"&&(W=String(W)),W}function S(W){var q={next:function(){var ne=W.shift();return{done:ne===void 0,value:ne}}};return d.iterable&&(q[Symbol.iterator]=function(){return q}),q}function x(W){this.map={},W instanceof x?W.forEach(function(q,ne){this.append(ne,q)},this):Array.isArray(W)?W.forEach(function(q){if(q.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+q.length);this.append(q[0],q[1])},this):W&&Object.getOwnPropertyNames(W).forEach(function(q){this.append(q,W[q])},this)}x.prototype.append=function(W,q){W=v(W),q=_(q);var ne=this.map[W];this.map[W]=ne?ne+", "+q:q},x.prototype.delete=function(W){delete this.map[v(W)]},x.prototype.get=function(W){return W=v(W),this.has(W)?this.map[W]:null},x.prototype.has=function(W){return this.map.hasOwnProperty(v(W))},x.prototype.set=function(W,q){this.map[v(W)]=_(q)},x.prototype.forEach=function(W,q){for(var ne in this.map)this.map.hasOwnProperty(ne)&&W.call(q,this.map[ne],ne,this)},x.prototype.keys=function(){var W=[];return this.forEach(function(q,ne){W.push(ne)}),S(W)},x.prototype.values=function(){var W=[];return this.forEach(function(q){W.push(q)}),S(W)},x.prototype.entries=function(){var W=[];return this.forEach(function(q,ne){W.push([ne,q])}),S(W)},d.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function E(W){if(!W._noBody){if(W.bodyUsed)return Promise.reject(new TypeError("Already read"));W.bodyUsed=!0}}function P(W){return new Promise(function(q,ne){W.onload=function(){q(W.result)},W.onerror=function(){ne(W.error)}})}function R(W){var q=new FileReader,ne=P(q);return q.readAsArrayBuffer(W),ne}function M(W){var q=new FileReader,ne=P(q),z=/charset=([A-Za-z0-9_-]+)/.exec(W.type),re=z?z[1]:"utf-8";return q.readAsText(W,re),ne}function N(W){for(var q=new Uint8Array(W),ne=new Array(q.length),z=0;z<q.length;z++)ne[z]=String.fromCharCode(q[z]);return ne.join("")}function L(W){if(W.slice)return W.slice(0);var q=new Uint8Array(W.byteLength);return q.set(new Uint8Array(W)),q.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(W){this.bodyUsed=this.bodyUsed,this._bodyInit=W,W?typeof W=="string"?this._bodyText=W:d.blob&&Blob.prototype.isPrototypeOf(W)?this._bodyBlob=W:d.formData&&FormData.prototype.isPrototypeOf(W)?this._bodyFormData=W:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(W)?this._bodyText=W.toString():d.arrayBuffer&&d.blob&&h(W)?(this._bodyArrayBuffer=L(W.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(W)||g(W))?this._bodyArrayBuffer=L(W):this._bodyText=W=Object.prototype.toString.call(W):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof W=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(W)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var W=E(this);if(W)return W;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var W=E(this);return W||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var W=E(this);if(W)return W;if(this._bodyBlob)return M(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(ue)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function H(W){var q=W.toUpperCase();return $.indexOf(q)>-1?q:W}function Y(W,q){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');q=q||{};var ne=q.body;if(W instanceof Y){if(W.bodyUsed)throw new TypeError("Already read");this.url=W.url,this.credentials=W.credentials,q.headers||(this.headers=new x(W.headers)),this.method=W.method,this.mode=W.mode,this.signal=W.signal,!ne&&W._bodyInit!=null&&(ne=W._bodyInit,W.bodyUsed=!0)}else this.url=String(W);if(this.credentials=q.credentials||this.credentials||"same-origin",(q.headers||!this.headers)&&(this.headers=new x(q.headers)),this.method=H(q.method||this.method||"GET"),this.mode=q.mode||this.mode||null,this.signal=q.signal||this.signal||function(){if("AbortController"in l){var J=new AbortController;return J.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ne)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ne),(this.method==="GET"||this.method==="HEAD")&&(q.cache==="no-store"||q.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var re=/\?/;this.url+=(re.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function ue(W){var q=new FormData;return W.trim().split("&").forEach(function(ne){if(ne){var z=ne.split("="),re=z.shift().replace(/\+/g," "),J=z.join("=").replace(/\+/g," ");q.append(decodeURIComponent(re),decodeURIComponent(J))}}),q}function oe(W){var q=new x,ne=W.replace(/\r?\n[\t ]+/g," ");return ne.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var re=z.split(":"),J=re.shift().trim();if(J){var F=re.join(":").trim();try{q.append(J,F)}catch(se){console.warn("Response "+se.message)}}}),q}B.call(Y.prototype);function ce(W,q){if(!(this instanceof ce))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(q||(q={}),this.type="default",this.status=q.status===void 0?200:q.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=q.statusText===void 0?"":""+q.statusText,this.headers=new x(q.headers),this.url=q.url||"",this._initBody(W)}B.call(ce.prototype),ce.prototype.clone=function(){return new ce(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},ce.error=function(){var W=new ce(null,{status:200,statusText:""});return W.ok=!1,W.status=0,W.type="error",W};var ae=[301,302,303,307,308];ce.redirect=function(W,q){if(ae.indexOf(q)===-1)throw new RangeError("Invalid status code");return new ce(null,{status:q,headers:{location:W}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(q,ne){this.message=q,this.name=ne;var z=Error(q);this.stack=z.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function me(W,q){return new Promise(function(ne,z){var re=new Y(W,q);if(re.signal&&re.signal.aborted)return z(new a.DOMException("Aborted","AbortError"));var J=new XMLHttpRequest;function F(){J.abort()}J.onload=function(){var Te={statusText:J.statusText,headers:oe(J.getAllResponseHeaders()||"")};re.url.indexOf("file://")===0&&(J.status<200||J.status>599)?Te.status=200:Te.status=J.status,Te.url="responseURL"in J?J.responseURL:Te.headers.get("X-Request-URL");var Me="response"in J?J.response:J.responseText;setTimeout(function(){ne(new ce(Me,Te))},0)},J.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},J.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request timed out"))},0)},J.onabort=function(){setTimeout(function(){z(new a.DOMException("Aborted","AbortError"))},0)};function se(Te){try{return Te===""&&l.location.href?l.location.href:Te}catch{return Te}}if(J.open(re.method,se(re.url),!0),re.credentials==="include"?J.withCredentials=!0:re.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&(d.blob?J.responseType="blob":d.arrayBuffer&&(J.responseType="arraybuffer")),q&&typeof q.headers=="object"&&!(q.headers instanceof x||l.Headers&&q.headers instanceof l.Headers)){var ee=[];Object.getOwnPropertyNames(q.headers).forEach(function(Te){ee.push(v(Te)),J.setRequestHeader(Te,_(q.headers[Te]))}),re.headers.forEach(function(Te,Me){ee.indexOf(Me)===-1&&J.setRequestHeader(Me,Te)})}else re.headers.forEach(function(Te,Me){J.setRequestHeader(Me,Te)});re.signal&&(re.signal.addEventListener("abort",F),J.onreadystatechange=function(){J.readyState===4&&re.signal.removeEventListener("abort",F)}),J.send(typeof re._bodyInit>"u"?null:re._bodyInit)})}return me.polyfill=!0,l.fetch||(l.fetch=me,l.Headers=x,l.Request=Y,l.Response=ce),a.Headers=x,a.Request=Y,a.Response=ce,a.fetch=me,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e}(Gg,Gg.exports)),Gg.exports}var Wb=mL();const wE=im(Wb),gL=KC({__proto__:null,default:wE},[Wb]);var vL=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const yL=n=>{let e;return n?e=n:typeof fetch>"u"?e=wE:e=fetch,(...t)=>e(...t)},wL=()=>typeof Headers>"u"?Wb.Headers:Headers,bL=(n,e,t)=>{const r=yL(t),s=wL();return(i,a)=>vL(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:n;let h=new s(a?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},a),{headers:h}))})};function _L(n){return n.replace(/\/$/,"")}function xL(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:l,realtime:d,global:h}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},h),i)}}function SL(n){return Math.round(Date.now()/1e3)+n}function AL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const da=()=>typeof document<"u",jc={tested:!1,writable:!1},wv=()=>{if(!da())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jc.tested)return jc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),jc.tested=!0,jc.writable=!0}catch{jc.tested=!0,jc.writable=!1}return jc.writable};function is(n,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const bE=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await qe(async()=>{const{fetch:r}=await Promise.resolve().then(()=>gL);return{fetch:r}},void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},CL=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",lp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Kg=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Y0=async(n,e)=>{await n.removeItem(e)};function EL(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,a,l,d,h,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)a=e.indexOf(n.charAt(f++)),l=e.indexOf(n.charAt(f++)),d=e.indexOf(n.charAt(f++)),h=e.indexOf(n.charAt(f++)),r=a<<2|l>>4,s=(l&15)<<4|d>>2,i=(d&3)<<6|h,t=t+String.fromCharCode(r),d!=64&&s!=0&&(t=t+String.fromCharCode(s)),h!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ty{constructor(){this.promise=new ty.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ty.promiseConstructor=Promise;function _S(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(EL(r))}function kL(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function TL(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function PL(n){return("0"+n.toString(16)).substr(-2)}function Yg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,PL).join("")}async function RL(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function ML(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xg(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await RL(n);return ML(e)}const IL="__stack_guard__",DL="__",NL=/__stack_guard__([a-zA-Z0-9_-]+)__/;let xS=!1,qb;function Ww(n){var e,t;qb();let r;try{throw new Error}catch(i){r=i}const s=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<s.length;i+=1){const l=s[i].match(NL);if(l&&l[1]===n)return!0}return!1}async function qw(n,e){await qb();const t=`${IL}${n}${DL}`;return await{[t]:async()=>await e()}[t]()}qb=async()=>{xS||(xS=!0,await qw("ENV_CHECK",async()=>{const n=Ww("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class Gb extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Tt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class OL extends Gb{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function LL(n){return Tt(n)&&n.name==="AuthApiError"}class _E extends Gb{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ih extends Gb{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class th extends Ih{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class X0 extends Ih{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Qg extends Ih{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class aa extends Ih{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q0 extends Ih{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gw extends Ih{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function SS(n){return Tt(n)&&n.name==="AuthRetryableFetchError"}var jL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const xp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),FL=[502,503,504];async function AS(n){if(!CL(n))throw new Gw(xp(n),0);if(FL.includes(n.status))throw new Gw(xp(n),n.status);let e;try{e=await n.json()}catch(t){throw new _E(xp(t),t)}throw new OL(xp(e),n.status||500)}const BL=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Dt(n,e,t,r){var s;const i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await $L(n,e,t+l,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function $L(n,e,t,r,s,i){const a=BL(e,r,s,i);let l;try{l=await n(t,a)}catch(d){throw console.error(d),new Gw(xp(d),0)}if(l.ok||await AS(l),r?.noResolveJson)return l;try{return await l.json()}catch(d){await AS(d)}}function hl(n){var e;let t=null;HL(n)&&(t=Object.assign({},n),t.expires_at=SL(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Wc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function UL(n){return{data:n,error:null}}function zL(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=jL(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},d=Object.assign({},a);return{data:{properties:l,user:d},error:null}}function VL(n){return n}function HL(n){return n.access_token&&n.refresh_token&&n.expires_in}var WL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class qL{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=bE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Dt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=WL(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await Dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:zL,redirectTo:t?.redirectTo})}catch(t){if(Tt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Dt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,l,d;try{const h={nextPage:null,lastPage:0,total:0},f=await Dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:VL});if(f.error)throw f.error;const g=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,_=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Tt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Dt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Dt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Dt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}}const GL="2.43.1",KL="http://localhost:9999",YL="supabase.auth.token",XL={"X-Client-Info":`gotrue-js/${GL}`},CS=10,ES={getItem:n=>wv()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{wv()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{wv()&&globalThis.localStorage.removeItem(n)}};function QL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}QL();const JL={url:KL,storageKey:YL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XL,flowType:"implicit",debug:!1},Jg=30*1e3,kS=3;class zp{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=zp.nextInstanceID,zp.nextInstanceID+=1,this.instanceID>0&&da()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},JL),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||ES,this.admin=new qL({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=bE(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===ES&&!wv()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),da()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=qw("_initialize",async()=>{try{const e=da()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Tt(e)?{error:e}:{error:new _E("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,s;try{await this._removeSession();let i;if("email"in e){const{email:f,password:g,options:v}=e;let _=null,S=null;if(this.flowType==="pkce"){const x=Yg();await lp(this.storage,`${this.storageKey}-code-verifier`,x),_=await Xg(x),S=x===_?"plain":"s256"}i=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:f,password:g,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:S},xform:hl})}else if("phone"in e){const{phone:f,password:g,options:v}=e;i=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:hl})}else throw new Qg("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(i){if(Tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hl})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hl})}else throw new Qg("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new X0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:s})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Kg(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:s}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:hl});return await Y0(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new X0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,l=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:hl}),{data:d,error:h}=l;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new X0}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:d}=e;let h=null,f=null;if(this.flowType==="pkce"){const v=Yg();await lp(this.storage,`${this.storageKey}-code-verifier`,v),h=await Xg(v),f=v===h?"plain":"s256"}const{error:g}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:d}=e,{data:h,error:f}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new Qg("You must provide either an email or phone number.")}catch(l){if(Tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:s,error:i}=await Dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:hl});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const a=s.session,l=s.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(s){if(Tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{return await this._removeSession(),await Dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:UL})}catch(i){if(Tt(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new th;const{error:s}=await Dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await Dt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await Dt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Qg("You must provide either an email or phone number and a type")}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await qw("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!Ww("_useSession"))throw new Error("Please use #_useSession()");Ww("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await Kg(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,s;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0}return await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wc})})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new th;const a=s.session,{data:l,error:d}=await Dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:a.access_token,xform:Wc});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return _S(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new th;const t=Date.now()/1e3;let r=t,s=!0,i=null;const a=_S(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this.getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Tt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new th;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!da())throw new aa("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new aa("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Q0("Not a valid PKCE flow url.");if(e){const E=is("code");if(!E)throw new Q0("No code detected.");const{data:P,error:R}=await this.exchangeCodeForSession(E);if(R)throw R;if(!P.session)throw new Q0("No session detected.");let M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:P.session,redirectType:null},error:null}}const t=is("error_description");if(t){const E=is("error_code");if(!E)throw new aa("No error_code detected.");const P=is("error");throw P?new aa(t,{error:P,code:E}):new aa("No error detected.")}const r=is("provider_token"),s=is("provider_refresh_token"),i=is("access_token");if(!i)throw new aa("No access_token detected.");const a=is("expires_in");if(!a)throw new aa("No expires_in detected.");const l=is("refresh_token");if(!l)throw new aa("No refresh_token detected.");const d=is("token_type");if(!d)throw new aa("No token_type detected.");const f=Math.round(Date.now()/1e3)+parseInt(a),{data:g,error:v}=await this.getUser(i);if(v)throw v;const _=g.user,S={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(a),expires_at:f,refresh_token:l,token_type:d,user:_},x=is("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:S,redirectType:x},error:null}}catch(t){if(Tt(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return da()&&(!!is("access_token")||!!is("error_description"))}async _isPKCEFlow(){const e=await Kg(this.storage,`${this.storageKey}-code-verifier`);return!!is("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(LL(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Y0(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=AL(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;if(this.flowType==="pkce"){const i=Yg();await lp(this.storage,`${this.storageKey}-code-verifier`,i),r=await Xg(i),s=i===r?"plain":"s256"}try{return await Dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Tt(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await TL(async s=>(await kL(s*200),this._debug(t,"refreshing attempt",s),await Dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hl})),(s,i,a)=>a&&a.error&&SS(a.error)&&Date.now()+(s+1)*200-r<Jg)}catch(r){if(this._debug(t,"error",r),Tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),da()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Kg(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+CS;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${CS}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),SS(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new th;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ty;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new th;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Tt(i)){const a={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(d){i.push(d)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),lp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Y0(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&da()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Jg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Jg}ms, refresh threshold is ${kS} ticks`),s<=kS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!da()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=Yg();await lp(this.storage,`${this.storageKey}-code-verifier`,s);const i=await Xg(s),a=s===i?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",i,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(t?.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Dt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:d}=await Dt(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(!((s=l?.totp)===null||s===void 0)&&s.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Dt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let l=null;a.aal&&(l=a.aal);let d=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}})}}zp.nextInstanceID=0;class ZL extends zp{constructor(e){super(e)}}var e2=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?i(f.value):s(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const t2={headers:pL},n2={schema:"public"},r2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s2={};class i2{constructor(e,t,r){var s,i,a,l,d,h,f,g;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const v=_L(e);this.realtimeUrl=`${v}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${v}/auth/v1`,this.storageUrl=`${v}/storage/v1`,this.functionsUrl=`${v}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,S={db:n2,realtime:s2,auth:Object.assign(Object.assign({},r2),{storageKey:_}),global:t2},x=xL(r??{},S);this.storageKey=(i=(s=x.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(a=x.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,(h=x.global)===null||h===void 0?void 0:h.fetch),this.fetch=bL(t,this._getAccessToken.bind(this),(f=x.global)===null||f===void 0?void 0:f.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new BO(`${v}/rest/v1`,{headers:this.headers,schema:(g=x.db)===null||g===void 0?void 0:g.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new CO(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hL(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return e2(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,debug:l},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZL({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,debug:l,fetch:h})}_initRealtimeClient(e){return new JO(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const o2=(n,e,t)=>new i2(n,e,t),a2="cdn.gofotografo.com.br",l2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU",TS=a2,PS=l2;let Kw;try{Kw=o2(TS,PS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}catch(n){console.error("Erro criando o Supabase client:",n),Kw=null}const Se=Kw,c2=1,RS=768;let J0=0;function u2(){return J0=(J0+1)%Number.MAX_VALUE,J0.toString()}const Pn={state:{toasts:[],isMobileView:typeof window<"u"?window.innerWidth<RS:!1},listeners:[],getState:()=>Pn.state,setState:n=>{typeof n=="function"?Pn.state=n(Pn.state):Pn.state={...Pn.state,...n},Pn.listeners.forEach(e=>e(Pn.state))},subscribe:n=>(Pn.listeners.push(n),()=>{Pn.listeners=Pn.listeners.filter(e=>e!==n)}),updateMobileView:()=>{if(typeof window<"u"){const n=window.innerWidth<RS;n!==Pn.state.isMobileView&&Pn.setState(e=>({...e,isMobileView:n}))}}};typeof window<"u"&&(window.addEventListener("resize",Pn.updateMobileView),Pn.updateMobileView());const d2=({...n})=>{const{isMobileView:e}=Pn.getState(),t=["Saldos Visveis","Saldos Ocultos","Modo de Personalizao Ativado","Card Adicionado","Card Removido","Projeto movido","Projeto Excludo","Projeto Arquivado","Projeto Restaurado","Coluna Adicionada","Coluna Removida"];if(n.title&&t.includes(n.title))return{id:null,dismiss:()=>{},update:()=>{}};const r=u2(),s=a=>Pn.setState(l=>({...l,toasts:l.toasts.map(d=>d.id===r?{...d,...a}:d)})),i=()=>Pn.setState(a=>({...a,toasts:a.toasts.filter(l=>l.id!==r)}));return Pn.setState(a=>({...a,toasts:[{...n,id:r,dismiss:i},...a.toasts].slice(0,c2)})),{id:r,dismiss:i,update:s}};function ri(){const[n,e]=A.useState(Pn.getState());return A.useEffect(()=>Pn.subscribe(r=>{e(r)}),[]),A.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(s)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:d2,toasts:n.toasts,isMobileView:n.isMobileView}}const Rp=n=>{if(!n||!Array.isArray(n))return{transactions:[],totalRevenue:0,totalExpenses:0,operationalProfit:0,totalProLabore:0,netBalance:0,pendingPayments:0};const e=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PAGO").reduce((l,d)=>l+Number(d.valor),0),t=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category!=="Pr-labore").reduce((l,d)=>l+Number(d.valor),0),r=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category==="Pr-labore").reduce((l,d)=>l+Number(d.valor),0),s=e-t,i=s-r,a=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE").reduce((l,d)=>l+Number(d.valor),0);return{transactions:n,totalRevenue:e,totalExpenses:t,operationalProfit:s,totalProLabore:r,netBalance:i,pendingPayments:a}},h2=async(n,e,t)=>{const r={...t,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete r.id,"client_id"in r&&(r.cliente_id=r.client_id,delete r.client_id),"date"in r&&(r.data=r.date,delete r.date),"workflow_id"in r&&(r.trabalho_id=r.workflow_id,delete r.workflow_id);const{data:s,error:i}=await n.from("transacoes").insert([r]).select().single();if(i)throw i;return s},f2=async(n,e,t,r)=>{const s={...r,updated_at:new Date().toISOString()};"client_id"in s&&(s.cliente_id=s.client_id,delete s.client_id),"date"in s&&(s.data=s.date,delete s.date),"workflow_id"in s&&(s.trabalho_id=s.workflow_id,delete s.workflow_id);const{data:i,error:a}=await n.from("transacoes").update(s).eq("id",t).eq("user_id",e).select().single();if(a)throw a;return i},p2=async(n,e,t)=>{const{error:r}=await n.from("transacoes").delete().eq("id",t).eq("user_id",e);if(r)throw r},m2=async(n,e)=>{const{data:t,error:r}=await n.from("transacoes").select("*").eq("trabalho_id",e);return r?(console.error("Erro ao buscar transaes por workflow_id:",r),[]):t},lh=(n,e,t)=>{console.error(`Erro em ${e}:`,n);const r=`Erro em ${e}: ${n.message}`;t&&t({title:"Erro de Sistema",description:r,variant:"destructive",duration:5e3})},br={profile_photo:null,logo:null,business_name:"",user_name:"",subdomain:"",notifications:{email:!0,push:!0},dashboard_layout:null,workflow_columns:[{id:"novo-lead",title:"Novos Leads",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"negocio-fechado",title:"Negcios Fechados",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"agendado",title:"Agendado",cardIds:[],color:"bg-teal-300 dark:bg-teal-700"},{id:"em-andamento",title:"Em Andamento",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"concluido",title:"Concludos",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"}],address:"",photography_type:"",cnpj:"",cpf:"",phones:[],contact_email:"",website_social:{instagram:"",facebook:"",website:""},language:"pt-BR",currency:"BRL",timezone:"America/Sao_Paulo",date_format:"dd/MM/yyyy",automation:{},current_plan_id:"FREE",stripe_customer_id:null,stripe_subscription_id:null,plan_expires_at:null,plan_status:"FREE",trial_ends_at:null,hide_dashboard_balances:!1,took_initial_tour:!1,has_completed_tour:!1,show_greetings:!0,workflow_card_view_mode:"list",workflow_summary_expanded:!0,mobile_menu_items:["dashboard","workflow","clients","financial","calendar"],google_calendar_integrated:!1,google_tokens:null,feature_overrides:{},pix_key:null},bv=[{id:"novo-lead",title:"Novos Leads",cardIds:[]},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[]},{id:"negocio-fechado",title:"Negcios Fechados",cardIds:[]},{id:"agendado",title:"Agendado",cardIds:[]},{id:"em-andamento",title:"Em Andamento",cardIds:[]},{id:"concluido",title:"Concludos",cardIds:[]}],g2=async(n,e,t,r,s)=>{const{data:i,error:a}=await n.from("settings").select("*").eq("user_id",e).limit(1).maybeSingle();if(a&&a.code!=="PGRST116")throw a;const l={};if(i){for(const f in t)t.hasOwnProperty(f)&&(l[f]=t[f]);l.user_name=t.user_name||i.user_name||s,l.contact_email=t.contact_email||i.contact_email||n.auth.user&&n.auth.user().email||s}else{const f={...br,...r||{},...t};for(const g in br)f.hasOwnProperty(g)&&(l[g]=f[g]);if(l.user_id=e,l.user_name=f.user_name||s,l.contact_email=f.contact_email||n.auth.user&&n.auth.user().email||s,l.plan_status=f.plan_status||"TRIAL",l.plan_status==="TRIAL"&&!f.trial_ends_at){const g=new Date;g.setDate(g.getDate()+7),l.trial_ends_at=g.toISOString()}l.took_initial_tour=f.took_initial_tour||!1}i&&Object.keys(l).forEach(f=>{l[f]===void 0&&delete l[f]});let d,h;if(i&&i.id){if(Object.keys(l).length===0)return i;({data:d,error:h}=await n.from("settings").update({...l,updated_at:new Date().toISOString()}).eq("id",i.id).eq("user_id",e).select().single())}else({data:d,error:h}=await n.from("settings").insert([{...l,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single());if(h)throw h;return d},xE=A.createContext(),Kb=()=>{const n=A.useContext(xE);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Z0=n=>{if(!n)return!1;const e=n.message||"",t=e.includes("Invalid Refresh Token")||e.includes("Token not found")||e.includes("Session not found"),r=n.code==="400"&&n.error_code==="refresh_token_not_found";return t||r},SE=({children:n})=>{const{toast:e}=ri(),[t,r]=A.useState(null),[s,i]=A.useState(null),[a,l]=A.useState(!0),[d,h]=A.useState(br),[f,g]=A.useState(!0),v=A.useCallback(async(P,R)=>{if(Z0(P)){e({title:"Sesso Expirada ou Invlida",description:"Sua sesso expirou. Por favor, faa login novamente para continuar.",variant:"destructive",duration:7e3}),Se&&await Se.auth.signOut().catch(M=>{console.error("Erro durante o signOut forado:",M)}),r(null),i(null),h(br),l(!1),g(!1);return}lh(P,R,e)},[e]),_=A.useCallback(async P=>{if(!P||!Se){h(br),g(!1);return}g(!0);try{const{data:R,error:M}=await Se.from("settings").select("*").eq("user_id",P.id).single(),N=P.user_metadata?.full_name||P.email;if(M&&M.code!=="PGRST116"){if(await v(M,"buscar configuraes"),Z0(M))return;h({...br,user_name:N,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:bv})}else if(R)h(L=>({...br,...L,...R,user_name:R.user_name||N,contact_email:R.contact_email||P.email,user_id:R.user_id||P.id,profile_photo:R.profile_photo||P.user_metadata?.avatar_url||null,workflow_columns:R.workflow_columns||bv}));else{const L={...br,user_name:N,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:bv};h(L);const{data:B,error:$}=await Se.from("settings").insert([L]).select().single();if($){if(await v($,"criar configuraes padro"),Z0($))return}else B&&h(H=>({...br,...H,...B}))}}catch(R){await v(R,"carregar configuraes")}finally{g(!1)}},[v]);A.useEffect(()=>{if(l(!0),(async()=>{if(!Se){console.error("Supabase client not initialized. Cannot get session."),l(!1),h(br),g(!1);return}const{data:{session:M},error:N}=await Se.auth.getSession();if(N){console.error("Error getting session:",N),await v(N,"obter sesso de autenticao"),l(!1);return}const L=M?.user??null;i(M),r(L),L&&L.email_confirmed_at?await _(L):(h(br),g(!1),L&&!L.email_confirmed_at&&e({title:"Email no confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"})),l(!1)})(),!Se){console.error("Supabase client not initialized. Cannot set auth listener.");return}const{data:R}=Se.auth.onAuthStateChange(async(M,N)=>{l(!0);const L=N?.user??null;i(N),r(L),M==="SIGNED_IN"&&L&&L.email_confirmed_at?await _(L):M==="SIGNED_OUT"?(h(br),g(!1)):M==="USER_UPDATED"&&L&&L.email_confirmed_at?h(B=>({...B,user_name:L.user_metadata?.full_name||B.user_name||L.email,profile_photo:L.user_metadata?.avatar_url||B.profile_photo})):!L&&M!=="SIGNED_OUT"&&(h(br),g(!1)),L&&!L.email_confirmed_at&&M!=="INITIAL_SESSION"&&e({title:"Email no confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"}),l(!1)});return()=>{R&&R.subscription&&R.subscription.unsubscribe()}},[v,_,e]);const E={user:t,session:s,settings:d,loadingAuth:a,loadingSettings:f,setSettings:async P=>{if(!t||!t.email_confirmed_at||!Se){await v({message:"Usurio no autenticado, email no confirmado ou Supabase no inicializado"},"salvar configuraes");return}try{const R=t.user_metadata?.full_name||t.email,M=await g2(Se,t.id,P,d,R);if(M){h(L=>({...br,...L,...M}));let N={};if(P.user_name&&P.user_name!==(t.user_metadata?.full_name||"")&&(N.data={...N.data,full_name:P.user_name}),P.profile_photo&&P.profile_photo!==(t.user_metadata?.avatar_url||"")&&(N.data={...N.data,avatar_url:P.profile_photo}),Object.keys(N).length>0){const{data:L,error:B}=await Se.auth.updateUser(N);B?await v(B,"atualizar dados do usurio na autenticao"):L&&r($=>({...$,user_metadata:L.user.user_metadata}))}}}catch(R){await v(R,"salvar configuraes")}},logout:async()=>{if(!Se){await v({message:"Supabase client not initialized"},"fazer logout");return}const{error:P}=await Se.auth.signOut();P?await v(P,"fazer logout"):(r(null),i(null),h(br))},refreshSettings:()=>t?_(t):Promise.resolve()};return y.jsx(xE.Provider,{value:E,children:n})},v2=(n,e,t)=>{const[r,s]=A.useState({clients:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!0,initialLoadCompleted:!1}),i=A.useCallback(h=>{s(f=>typeof h=="function"?h(f):{...f,...h})},[]),a=A.useCallback(()=>{s({clients:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!1,initialLoadCompleted:!1})},[]),l=A.useCallback(async(h="all")=>{if(!n)return;const f={clients:()=>Se.from("clients").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),workflow_cards:()=>Se.from("workflow_cards").select("*").eq("user_id",n.id).order("order",{ascending:!0}),transacoes:()=>Se.from("transacoes").select("*").eq("user_id",n.id).order("data",{ascending:!1}),service_packages:()=>Se.from("service_packages").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),equipamentos:()=>Se.from("equipamentos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),manutencoes:()=>Se.from("manutencoes").select("*").eq("user_id",n.id).order("data_manutencao",{ascending:!1}),custos_fixos:()=>Se.from("custos_fixos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),servicos_precificados:()=>Se.from("servicos_precificados").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),metas_reserva:()=>Se.from("metas_reserva").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),availability_slots:()=>Se.from("availability_slots").select("*").eq("user_id",n.id),propostas:()=>Se.from("propostas").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1}),contratos:()=>Se.from("contratosgerados").select("*").eq("id_fotografo",n.id).order("data_geracao",{ascending:!1}),wallets:()=>Se.from("wallets").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),feature_flags:()=>Se.from("feature_flags").select("*"),referrals:()=>Se.from("referrals").select("*").eq("referrer_id",n.id),commissions:()=>Se.from("commissions").select("*").eq("referrer_id",n.id)},g=h==="all"?Object.keys(f):[h];try{const v=await Promise.all(g.map(x=>{const E=f[x];return typeof E=="function"?E():(console.warn(`fetchMap[${x}] no  uma funo. Pulando.`),Promise.resolve({data:[],error:null}))})),_=v.map((x,E)=>x.error?{key:g[E],error:x.error}:null).filter(Boolean);if(_.length>0){_.forEach(({key:x,error:E})=>lh(E,`carregar ${x}`,t));return}const S={};if(v.forEach((x,E)=>{switch(g[E]){case"clients":S.clients=x.data;break;case"workflow_cards":S.workflowCards=x.data;break;case"transacoes":S.financialData={...Rp(x.data),transactions:x.data};break;case"service_packages":S.servicePackages=x.data;break;case"equipamentos":S.equipments=x.data;break;case"manutencoes":S.maintenances=x.data;break;case"custos_fixos":S.fixedCosts=x.data;break;case"servicos_precificados":S.pricedServices=x.data;break;case"metas_reserva":S.savingGoals=x.data;break;case"availability_slots":S.availabilitySlots=x.data;break;case"propostas":S.proposals=x.data;break;case"contratos":S.contratos=x.data;break;case"wallets":S.wallets=x.data;break;case"feature_flags":S.featureFlags=x.data.reduce((R,M)=>({...R,[M.nome_funcionalidade]:M.esta_ativa}),{});break;case"referrals":S.affiliateData={...r.affiliateData,referrals:x.data};break;case"commissions":S.affiliateData={...r.affiliateData,commissions:x.data};break}}),S.workflowCards){const x=(S.workflowCards||[]).filter(E=>E.status==="novo-lead"||E.status==="proposta-enviada").reduce((E,P)=>E+(Number(P.value)||0),0);S.financialData={...S.financialData||r.financialData,potentialLeadValue:x}}i(x=>({...x,...S}))}catch(v){lh(v,"refresh data",t)}},[n,t,r.financialData,r.affiliateData]),d=A.useCallback(async h=>{if(h){i({loadingData:!0});try{const[f,g,v,_,S,x,E,P,R,M,N,L,B,$,H,Y]=await Promise.all([Se.from("clients").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("workflow_cards").select("*").eq("user_id",h.id).order("order",{ascending:!0}),Se.from("transacoes").select("*").eq("user_id",h.id).order("data",{ascending:!1}),Se.from("service_packages").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("equipamentos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("manutencoes").select("*").eq("user_id",h.id).order("data_manutencao",{ascending:!1}),Se.from("custos_fixos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("servicos_precificados").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("metas_reserva").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("availability_slots").select("*").eq("user_id",h.id),Se.from("propostas").select("*").eq("user_id",h.id).order("updated_at",{ascending:!1}),Se.from("contratosgerados").select("*").eq("id_fotografo",h.id).order("data_geracao",{ascending:!1}),Se.from("wallets").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("feature_flags").select("*"),Se.from("referrals").select("*").eq("referrer_id",h.id),Se.from("commissions").select("*").eq("referrer_id",h.id)]),ue=[f.error,g.error,v.error,_.error,S.error,x.error,E.error,P.error,R.error,M.error,N.error,L.error,B.error,$.error,H.error,Y.error].filter(Boolean);if(ue.length>0){ue.forEach(ae=>lh(ae,"carregar dados iniciais",t)),i({loadingData:!1});return}const oe=Rp(v.data),ce=(g.data||[]).filter(ae=>ae.status==="novo-lead"||ae.status==="proposta-enviada").reduce((ae,me)=>ae+(Number(me.value)||0),0);i({clients:f.data,workflowCards:g.data,financialData:{...oe,transactions:v.data,potentialLeadValue:ce},servicePackages:_.data,equipments:S.data,maintenances:x.data,fixedCosts:E.data,pricedServices:P.data,savingGoals:R.data,availabilitySlots:M.data,proposals:N.data,contratos:L.data,wallets:B.data,featureFlags:$.data.reduce((ae,me)=>({...ae,[me.nome_funcionalidade]:me.esta_ativa}),{}),affiliateData:{referrals:H.data,commissions:Y.data},loadingData:!1,initialLoadCompleted:!0})}catch(f){lh(f,"carregar dados iniciais",t),i({loadingData:!1})}}},[t]);return{...r,setDataState:i,clearLocalData:a,loadInitialData:d,refreshData:l,setInitialLoadCompleted:h=>i({initialLoadCompleted:h})}},y2=async(n,e,t)=>{if(t.name){const{count:i,error:a}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(a)throw new Error(`Erro ao verificar cliente existente: ${a.message}`);if(i>0)throw new Error(`Um cliente com o nome "${t.name}" j existe.`)}const{data:r,error:s}=await n.from("clients").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(s)throw s;return r},w2=async(n,e,t,r)=>{if(r.name){const{count:a,error:l}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar cliente existente: ${l.message}`);if(a>0)throw new Error(`Um cliente com o nome "${r.name}" j existe.`)}const{data:s,error:i}=await n.from("clients").update(r).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return s},b2=async(n,e,t)=>{const{error:r}=await n.from("clients").delete().eq("id",t).eq("user_id",e);if(r)throw r},_2=(n,e,t,r,s,i)=>{const a=A.useCallback(async f=>{if(!n||!e())return s({message:"Usurio no autenticado ou trial expirado"},"adicionar cliente"),null;try{const g=await y2(Se,n.id,f),v=[g,...t];return r(v),i(v),g}catch(g){throw s(g,"adicionar cliente"),g}},[n,e,t,r,s,i]),l=A.useCallback(async(f,g)=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"atualizar cliente");return}try{const v=await w2(Se,n.id,f,g),_=t.map(S=>S.id===f?v:S);r(_),i(_)}catch(v){throw s(v,"atualizar cliente"),v}},[n,e,t,r,s,i]),d=A.useCallback(async f=>{if(!n||!e()){s({message:"Usurio no autenticado ou trial expirado"},"remover cliente");return}try{await b2(Se,n.id,f);const g=t.filter(v=>v.id!==f);r(g),i(g)}catch(g){s(g,"remover cliente")}},[n,e,t,r,s,i]),h=A.useCallback(f=>t.find(g=>g.id===f),[t]);return{addClient:a,updateClient:l,deleteClient:d,getClientById:h}},x2=(n,e)=>({handleNewSubscription:A.useCallback(async(r,s)=>{if(!(!n?.id||!e?.referred_by))try{const{data:i,error:a}=await Se.from("settings").select("user_id").eq("referral_code",e.referred_by).single();if(a||!i){console.warn(`Referrer not found for code ${e.referred_by}. Cannot create referral record.`);return}const l=i.user_id,{data:d,error:h}=await Se.from("referrals").insert({referrer_id:l,referred_id:n.id,referred_email:n.email,referred_name:e.user_name,status:"subscribed",subscription_plan:r,subscription_date:new Date().toISOString()}).select().single();if(h)throw h;console.log(`Referral record created: ${d.id}`);const{data:f,error:g}=await Se.from("affiliate_settings").select("*").eq("id",1).single();if(g||!f||!f.is_active){console.log("Affiliate program is not active or settings not found. No commission will be generated.");return}const{data:v,error:_}=await Se.from("plans").select("price").eq("plan_id",r).single();if(_||!v){console.warn(`Plan details for ${r} not found. Cannot calculate commission.`);return}const S=v.price*f.commission_percentage/100,x=new Date;x.setDate(x.getDate()+f.payout_waiting_days);const{error:E}=await Se.from("commissions").insert({referral_id:d.id,referrer_id:l,amount:S,status:"pending",due_date:x.toISOString()});if(E)throw E;console.log(`Commission of ${S} created for referrer ${l}`)}catch(i){console.error("Error in handleNewSubscription for affiliate program:",i.message)}},[n,e])}),S2=async(n,e,t,r,s,i,a)=>{if(!s){console.warn(`Tentativa de atualizar card ${t} que no foi encontrado no estado local.`);const{data:v,error:_}=await n.from("workflow_cards").select("*").eq("id",t).single();if(_||!v)throw new Error(`Card com ID ${t} no encontrado para atualizao, nem no estado local nem no banco de dados.`);s=v}let l=[...s.history||[]];const d={title:"Ttulo",status:"Status",value:"Valor",date:"Data",time:"Hora",description:"Descrio",client_id:"Cliente",service_package_id:"Pacote de Servio",payment_status:"Status do Pagamento",contract_status:"Status do Contrato"};for(const v in r)if(Object.prototype.hasOwnProperty.call(r,v)&&d[v]&&r[v]!==s[v]){let _=s[v]||"vazio",S=r[v]||"vazio";v==="status"&&(_=i(_),S=i(S)),v==="value"&&(_=`R$ ${Number(_).toFixed(2)}`,S=`R$ ${Number(S).toFixed(2)}`),_!==S&&l.push({action:`${d[v]} alterado de "${_}" para "${S}"`,date:new Date().toISOString(),user:a})}r.archived===!0&&s.archived===!1?l.push({action:"Card arquivado",date:new Date().toISOString(),user:a}):r.archived===!1&&s.archived===!0&&l.push({action:"Card desarquivado",date:new Date().toISOString(),user:a});const h={...r,client_id:r.client_id===""?null:r.client_id,service_package_id:r.service_package_id===""?null:r.service_package_id,history:l,subtasks:r.subtasks!==void 0?(r.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})):(s.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})),comments:r.comments!==void 0?r.comments:s.comments,contract_status:r.contract_status!==void 0?r.contract_status:s.contract_status,archived:r.archived!==void 0?r.archived:s.archived,time:r.time!==void 0?r.time:s.time,installments:r.installments!==void 0?r.installments:r.num_installments!==void 0?r.num_installments:s.installments,num_installments:r.num_installments!==void 0?r.num_installments:r.installments!==void 0?r.installments:s.num_installments,date:r.date!==void 0?r.date:s.date};delete h.createFinancialTransaction,Object.keys(h).forEach(v=>{h[v]===void 0&&delete h[v]});const{data:f,error:g}=await n.from("workflow_cards").update(h).eq("id",t).eq("user_id",e).select().single();if(g)throw g;return f},A2=async(n,e,t)=>{const{error:r}=await n.from("workflow_cards").delete().eq("id",t).eq("user_id",e);if(r)throw r},C2=async(n,e,t,r,s,i,a)=>{const l=Array.isArray(s)?s:[],d={id:Math.random().toString(36).substr(2,9),text:r,date:new Date().toISOString(),user:i,user_photo_url:a},h=[...l,d];let f=await n.from("workflow_cards").select("history").eq("id",t).eq("user_id",e).single();if(f.error)throw f.error;let g=f.data?.history||[];g.push({action:`Comentrio adicionado: "${r.substring(0,30)}${r.length>30?"...":""}"`,date:new Date().toISOString(),user:i});const{data:v,error:_}=await n.from("workflow_cards").update({comments:h,history:g}).eq("id",t).eq("user_id",e).select().single();if(_)throw _;return v},E2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to add a service package.");const{count:r,error:s}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(s)throw new Error(`Erro ao verificar pacote: ${s.message}`);if(r>0)throw new Error(`Um pacote com o nome "${t.name}" j existe.`);const i={...t,user_id:e},{data:a,error:l}=await n.from("service_packages").insert([i]).select().single();if(l)throw l;return a},k2=async(n,e,t,r)=>{if(!e)throw new Error("User ID is required to update a service package.");if(r.name){const{count:a,error:l}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar pacote: ${l.message}`);if(a>0)throw new Error(`Um pacote com o nome "${r.name}" j existe.`)}const{data:s,error:i}=await n.from("service_packages").update(r).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return s},T2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to delete a service package.");const{error:r}=await n.from("service_packages").delete().eq("id",t).eq("user_id",e);if(r)throw r},P2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:r,error:s}=await n.from("orcamentos").select("*").eq("user_id",e).eq("client_id",t).order("data_envio",{ascending:!1});if(s)throw console.error("Erro ao buscar oramentos:",s),s;return r||[]},R2=async(n,e)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:t,error:r}=await n.from("orcamentos").insert([e]).select().single();if(r)throw console.error("Erro ao adicionar oramento:",r),r;return t},M2=async(n,e,t,r)=>{if(!n)throw new Error("Supabase client is not initialized.");const s={...t,updated_at:new Date().toISOString()},{data:i,error:a}=await n.from("orcamentos").update(s).eq("id",e).eq("user_id",r).select().single();if(a)throw console.error("Erro ao atualizar oramento:",a),a;return i},I2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{error:r}=await n.from("orcamentos").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Erro ao excluir oramento:",r),r;return!0};function si(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Al(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function D2(n,e){const t=si(n);return isNaN(e)?Al(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const AE=6048e5,N2=864e5,CE=6e4,EE=36e5,S9=1e3,A9=43200,C9=1440;let O2={};function ny(){return O2}function Vp(n,e){const t=ny(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,s=si(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Iv(n){return Vp(n,{weekStartsOn:1})}function kE(n){const e=si(n),t=e.getFullYear(),r=Al(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=Iv(r),i=Al(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Iv(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function MS(n){const e=si(n);return e.setHours(0,0,0,0),e}function IS(n){const e=si(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function L2(n,e){const t=MS(n),r=MS(e),s=+t-IS(t),i=+r-IS(r);return Math.round((s-i)/N2)}function j2(n){const e=kE(n),t=Al(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Iv(t)}function F2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function B2(n){if(!F2(n)&&typeof n!="number")return!1;const e=si(n);return!isNaN(Number(e))}function $2(n){const e=si(n),t=Al(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const U2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},z2=(n,e,t)=>{let r;const s=U2[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ew(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const V2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},H2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},W2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},q2={date:ew({formats:V2,defaultWidth:"full"}),time:ew({formats:H2,defaultWidth:"full"}),dateTime:ew({formats:W2,defaultWidth:"full"})},G2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},K2=(n,e,t,r)=>G2[n];function cp(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):a;s=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;s=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const Y2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},X2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Q2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},J2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Z2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ej={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tj=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},nj={ordinalNumber:tj,era:cp({values:Y2,defaultWidth:"wide"}),quarter:cp({values:X2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:cp({values:Q2,defaultWidth:"wide"}),day:cp({values:J2,defaultWidth:"wide"}),dayPeriod:cp({values:Z2,defaultWidth:"wide",formattingValues:ej,defaultFormattingWidth:"wide"})};function up(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(l)?sj(l,g=>g.test(a)):rj(l,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function rj(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function sj(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function ij(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const oj=/^(\d+)(th|st|nd|rd)?/i,aj=/\d+/i,lj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cj={any:[/^b/i,/^(a|c)/i]},uj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dj={any:[/1/i,/2/i,/3/i,/4/i]},hj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yj={ordinalNumber:ij({matchPattern:oj,parsePattern:aj,valueCallback:n=>parseInt(n,10)}),era:up({matchPatterns:lj,defaultMatchWidth:"wide",parsePatterns:cj,defaultParseWidth:"any"}),quarter:up({matchPatterns:uj,defaultMatchWidth:"wide",parsePatterns:dj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:up({matchPatterns:hj,defaultMatchWidth:"wide",parsePatterns:fj,defaultParseWidth:"any"}),day:up({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:mj,defaultParseWidth:"any"}),dayPeriod:up({matchPatterns:gj,defaultMatchWidth:"any",parsePatterns:vj,defaultParseWidth:"any"})},wj={code:"en-US",formatDistance:z2,formatLong:q2,formatRelative:K2,localize:nj,match:yj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bj(n){const e=si(n);return L2(e,$2(e))+1}function _j(n){const e=si(n),t=+Iv(e)-+j2(e);return Math.round(t/AE)+1}function TE(n,e){const t=si(n),r=t.getFullYear(),s=ny(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=Al(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const l=Vp(a,e),d=Al(n,0);d.setFullYear(r,0,i),d.setHours(0,0,0,0);const h=Vp(d,e);return t.getTime()>=l.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function xj(n,e){const t=ny(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,s=TE(n,e),i=Al(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Vp(i,e)}function Sj(n,e){const t=si(n),r=+Vp(t,e)-+xj(t,e);return Math.round(r/AE)+1}function jt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const fl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return jt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):jt(t+1,2)},d(n,e){return jt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return jt(n.getHours()%12||12,e.length)},H(n,e){return jt(n.getHours(),e.length)},m(n,e){return jt(n.getMinutes(),e.length)},s(n,e){return jt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return jt(s,e.length)}},nh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return fl.y(n,e)},Y:function(n,e,t,r){const s=TE(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return jt(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):jt(i,e.length)},R:function(n,e){const t=kE(n);return jt(t,e.length)},u:function(n,e){const t=n.getFullYear();return jt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return jt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return jt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return fl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return jt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=Sj(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):jt(s,e.length)},I:function(n,e,t){const r=_j(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):jt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):fl.d(n,e)},D:function(n,e,t){const r=bj(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):jt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return jt(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return jt(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return jt(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=nh.noon:r===0?s=nh.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=nh.evening:r>=12?s=nh.afternoon:r>=4?s=nh.morning:s=nh.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return fl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):fl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):fl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):fl.s(n,e)},S:function(n,e){return fl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return OS(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return OS(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NS(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NS(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return jt(r,e.length)},T:function(n,e,t){const r=n.getTime();return jt(r,e.length)}};function NS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+jt(i,2)}function OS(n,e){return n%60===0?(n>0?"-":"+")+jt(Math.abs(n)/60,2):$c(n,e)}function $c(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=jt(Math.trunc(r/60),2),i=jt(r%60,2);return t+s+e+i}const LS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PE=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Aj=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return LS(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",LS(r,e)).replace("{{time}}",PE(s,e))},Cj={p:PE,P:Aj},Ej=/^D+$/,kj=/^Y+$/,Tj=["D","DD","YY","YYYY"];function Pj(n){return Ej.test(n)}function Rj(n){return kj.test(n)}function Mj(n,e,t){const r=Ij(n,e,t);if(console.warn(r),Tj.includes(n))throw new RangeError(r)}function Ij(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oj=/^'([^]*?)'?$/,Lj=/''/g,jj=/[a-zA-Z]/;function qc(n,e,t){const r=ny(),s=t?.locale??r.locale??wj,i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=si(n);if(!B2(l))throw new RangeError("Invalid time value");let d=e.match(Nj).map(f=>{const g=f[0];if(g==="p"||g==="P"){const v=Cj[g];return v(f,s.formatLong)}return f}).join("").match(Dj).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const g=f[0];if(g==="'")return{isToken:!1,value:Fj(f)};if(DS[g])return{isToken:!0,value:f};if(g.match(jj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(d=s.localize.preprocessor(l,d));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return d.map(f=>{if(!f.isToken)return f.value;const g=f.value;(!t?.useAdditionalWeekYearTokens&&Rj(g)||!t?.useAdditionalDayOfYearTokens&&Pj(g))&&Mj(g,e,String(n));const v=DS[g[0]];return v(l,g,s.localize,h)}).join("")}function Fj(n){const e=n.match(Oj);return e?e[1].replace(Lj,"'"):n}function RE(n,e){const r=zj(n);let s;if(r.date){const d=Vj(r.date,2);s=Hj(d.restDateString,d.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const i=s.getTime();let a=0,l;if(r.time&&(a=Wj(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=qj(r.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(i+a),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(i+a+l)}const Zg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Bj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$j=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Uj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function zj(n){const e={},t=n.split(Zg.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Zg.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Zg.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const s=Zg.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Vj(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:n.slice((r[1]||r[2]).length)}}function Hj(n,e){if(e===null)return new Date(NaN);const t=n.match(Bj);if(!t)return new Date(NaN);const r=!!t[4],s=dp(t[1]),i=dp(t[2])-1,a=dp(t[3]),l=dp(t[4]),d=dp(t[5])-1;if(r)return Qj(e,l,d)?Gj(e,l,d):new Date(NaN);{const h=new Date(0);return!Yj(e,i,a)||!Xj(e,s)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(s,a)),h)}}function dp(n){return n?parseInt(n):1}function Wj(n){const e=n.match($j);if(!e)return NaN;const t=tw(e[1]),r=tw(e[2]),s=tw(e[3]);return Jj(t,r,s)?t*EE+r*CE+s*1e3:NaN}function tw(n){return n&&parseFloat(n.replace(",","."))||0}function qj(n){if(n==="Z")return 0;const e=n.match(Uj);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Zj(r,s)?t*(r*EE+s*CE):NaN}function Gj(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const s=r.getUTCDay()||7,i=(e-1)*7+t+1-s;return r.setUTCDate(r.getUTCDate()+i),r}const Kj=[31,null,31,30,31,30,31,31,30,31,30,31];function ME(n){return n%400===0||n%4===0&&n%100!==0}function Yj(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Kj[e]||(ME(n)?29:28))}function Xj(n,e){return e>=1&&e<=(ME(n)?366:365)}function Qj(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Jj(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Zj(n,e){return e>=0&&e<=59}const IE=async(n,e,t=null)=>{let r=Se.from("equipamentos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_equipamento",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},eF=async(n,e)=>{if(await IE(n,e.nome_equipamento))throw new Error(`Um equipamento com o nome "${e.nome_equipamento}" j existe.`);const{data:r,error:s}=await Se.from("equipamentos").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},tF=async(n,e,t)=>{if(t.nome_equipamento&&await IE(n,t.nome_equipamento,e))throw new Error(`Um equipamento com o nome "${t.nome_equipamento}" j existe.`);const{data:r,error:s}=await Se.from("equipamentos").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},nF=async(n,e)=>{const{error:t}=await Se.from("equipamentos").delete().eq("id",e).eq("user_id",n);if(t)throw t},rF=async(n,e)=>{const{data:t,error:r}=await Se.from("manutencoes").insert([{...e,user_id:n}]).select().single();if(r)throw r;return t},sF=async(n,e,t=null)=>{let r=Se.from("servicos_precificados").select("id",{count:"exact"}).eq("user_id",n).eq("nome_servico",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},iF=async(n,e)=>{if(await sF(n,e.nome_servico))throw new Error(`Um servio com o nome "${e.nome_servico}" j existe.`);const{data:r,error:s}=await Se.from("servicos_precificados").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},DE=async(n,e,t=null)=>{let r=Se.from("custos_fixos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_custo",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},oF=async(n,e)=>{if(await DE(n,e.nome_custo))throw new Error(`Um custo com o nome "${e.nome_custo}" j existe.`);const{data:r,error:s}=await Se.from("custos_fixos").insert([{...e,user_id:n}]).select().single();if(s)throw s;return r},aF=async(n,e,t)=>{if(t.nome_custo&&await DE(n,t.nome_custo,e))throw new Error(`Um custo com o nome "${t.nome_custo}" j existe.`);const{data:r,error:s}=await Se.from("custos_fixos").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},lF=async(n,e)=>{const{error:t}=await Se.from("custos_fixos").delete().eq("id",e).eq("user_id",n);if(t)throw t},NE=async(n,e,t=null)=>{let r=Se.from("metas_reserva").select("id",{count:"exact"}).eq("user_id",n).eq("nome_meta",e);t&&(r=r.neq("id",t));const{count:s,error:i}=await r;if(i)throw i;return s>0},cF=async(n,e)=>{if(await NE(n,e.nome_meta))throw new Error(`Uma meta com o nome "${e.nome_meta}" j existe.`);const{data:r,error:s}=await Se.from("metas_reserva").insert([{...e,user_id:n,saldo_atual:0}]).select().single();if(s)throw s;return r},uF=async(n,e,t)=>{if(t.nome_meta&&await NE(n,t.nome_meta,e))throw new Error(`Uma meta com o nome "${t.nome_meta}" j existe.`);const{data:r,error:s}=await Se.from("metas_reserva").update(t).eq("id",e).eq("user_id",n).select().single();if(s)throw s;return r},dF=async(n,e)=>{const{error:t}=await Se.from("metas_reserva").delete().eq("id",e).eq("user_id",n);if(t)throw t},OE=(n,e=[])=>({saldo_geral:{id:"saldo_geral",title:"Saldo Geral",type:"stat",icon:"Landmark",color:"text-green-500",onClick:()=>n("financial",{type:"all",period:"all",isDashboardClick:!0}),defaultSize:{w:3,h:2}},pagamentos_receber:{id:"pagamentos_receber",title:"A Receber",type:"stat",icon:"TrendingUp",color:"text-blue-500",onClick:()=>n("financial",{type:"entrada",status:"pendente",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_pagar:{id:"despesas_pagar",title:"Contas a Pagar",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pendente",period:"future",isDashboardClick:!0}),defaultSize:{w:3,h:2}},awaiting_release:{id:"awaiting_release",title:"Aguardando Liberao",type:"stat",icon:"Wallet",color:"text-cyan-500",onClick:()=>n("financial",{status:"AGUARDANDO_LIBERACAO",isDashboardClick:!0}),defaultSize:{w:3,h:2}},imposto_estimado:{id:"imposto_estimado",title:"Imposto Estimado (Ms)",type:"stat",icon:"Receipt",color:"text-yellow-500",onClick:()=>n("precifique"),defaultSize:{w:3,h:2}},pro_labore:{id:"pro_labore",title:"Prlabore (Ms)",type:"stat",icon:"DollarSign",color:"text-indigo-500",onClick:()=>n("financial",{type:"saida",category:"Pr-labore",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_mes:{id:"despesas_mes",title:"Despesas (Ms)",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pago",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},lucro_mes:{id:"lucro_mes",title:"Lucro (Ms)",type:"stat",icon:"TrendingUp",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:3,h:2}},depreciacao_mensal:{id:"depreciacao_mensal",title:"Depreciao Mensal",type:"stat",icon:"TrendingDown",color:"text-gray-500",onClick:()=>n("my-setup"),defaultSize:{w:3,h:2}},clientes_ativos:{id:"clientes_ativos",title:"Clientes Ativos",type:"smallStat",icon:"Users",iconColor:"text-purple-500",onClick:()=>n("clients"),defaultSize:{w:2,h:2}},trabalhos_em_andamento:{id:"trabalhos_em_andamento",title:"Em Andamento",type:"smallStat",icon:"Briefcase",iconColor:"text-orange-500",onClick:()=>n("workflow",{status:"em-andamento"}),defaultSize:{w:2,h:2}},trabalhos_agendados:{id:"trabalhos_agendados",title:"Agendados (Ms)",type:"smallStat",icon:"Calendar",iconColor:"text-teal-500",onClick:()=>n("workflow",{status:"agendado"}),defaultSize:{w:2,h:2}},conversao_clientes:{id:"conversao_clientes",title:"Converso de Clientes",type:"smallStat",icon:"Target",iconColor:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:2,h:2}},grafico_faturamento:{id:"grafico_faturamento",title:"Faturamento Anual",type:"chart",chartType:"bar",icon:"BarChart2",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},status_trabalhos:{id:"status_trabalhos",title:"Status dos Trabalhos",type:"chart",chartType:"pie",icon:"PieChart",color:"text-blue-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},ultimos_lancamentos:{id:"ultimos_lancamentos",title:"ltimos Lanamentos",type:"chart",chartType:"list",icon:"List",color:"text-gray-500",onClick:()=>n("financial"),defaultSize:{w:3,h:5}},lembretes:{id:"lembretes",title:"Lembretes e Tarefas",type:"reminders",icon:"BellRing",color:"text-yellow-500",onClick:()=>n("workflow"),defaultSize:{w:4,h:5}},metas_reserva:{id:"metas_reserva",title:"Resumo das Metas",type:"goals_summary",icon:"Target",color:"text-cyan-500",onClick:()=>n("reserva-inteligente"),defaultSize:{w:4,h:5}},...(e||[]).reduce((t,r)=>{const s=`wallet_${r.id}`;return t[s]={id:s,title:r.name||"Carteira",type:"stat",icon:"Wallet",iconUrl:r.icon_url||void 0,color:"text-blue-500",onClick:()=>n("financial",{walletId:r.id,isDashboardClick:!0}),defaultSize:{w:3,h:2}},t},{}),grafico_despesas_faturamento:{id:"grafico_despesas_faturamento",title:"Faturamento x Despesas",type:"chart",chartType:"bar",icon:"BarChart3",color:"text-purple-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_despesas_lucro:{id:"grafico_despesas_lucro",title:"Lucro x Despesas",type:"chart",chartType:"bar",icon:"BarChartBig",color:"text-orange-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_conversao_leads:{id:"grafico_conversao_leads",title:"Converso de Leads",type:"chart",chartType:"pie",icon:"PieChart",color:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},grafico_inadimplentes:{id:"grafico_inadimplentes",title:"Clientes Inadimplentes",type:"chart",chartType:"pie",icon:"Users",color:"text-red-500",onClick:()=>n("clients",{status:"inadimplentes"}),defaultSize:{w:3,h:5}}}),hp=n=>{const t=[...[{i:"saldo_geral",x:0,y:0,w:3,h:2},{i:"pagamentos_receber",x:3,y:0,w:3,h:2},{i:"despesas_pagar",x:6,y:0,w:3,h:2},{i:"awaiting_release",x:9,y:0,w:3,h:2},{i:"grafico_faturamento",x:0,y:2,w:6,h:5},{i:"ultimos_lancamentos",x:6,y:2,w:3,h:5},{i:"status_trabalhos",x:9,y:2,w:3,h:5},{i:"lembretes",x:0,y:7,w:4,h:5},{i:"metas_reserva",x:4,y:7,w:4,h:5},{i:"clientes_ativos",x:8,y:7,w:2,h:2},{i:"trabalhos_em_andamento",x:10,y:7,w:2,h:2},{i:"trabalhos_agendados",x:8,y:9,w:2,h:2},{i:"conversao_clientes",x:10,y:9,w:2,h:2}]];let r=Math.max(...t.map(i=>(i.y||0)+(i.h||0)),0);return Object.keys(n).forEach(i=>{if(i.startsWith("wallet_")&&!t.some(a=>a.i===i)){const a=n[i];t.push({i,x:0,y:r,w:a.defaultSize?.w||3,h:a.defaultSize?.h||2}),r+=a.defaultSize?.h||2}}),[{id:"grafico_despesas_faturamento",x:0,y:r,w:6,h:5},{id:"grafico_despesas_lucro",x:6,y:r,w:6,h:5},{id:"grafico_conversao_leads",x:0,y:r+5,w:3,h:5},{id:"grafico_inadimplentes",x:3,y:r+5,w:3,h:5}].forEach(i=>{n[i.id]&&!t.some(a=>a.i===i.id)&&t.push({i:i.id,x:i.x,y:i.y,w:i.w,h:i.h})}),t},hF=(n,e)=>n.map(t=>{const r=e[t.i];let s={...t};return r.type==="stat"?(s.w=5,s.h=2):r.type==="smallStat"?(s.w=2,s.h=2):s.w=Math.min(10,t.w*1.5),s}),fF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?6:5;break;case"reminders":case"goals_summary":i=6;break;default:i=4}const a={i:r.i,x:0,y:t,w:4,h:i};return t+=i,a})},pF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?7:5;break;case"reminders":case"goals_summary":i=7;break;default:i=4}const a={i:r.i,x:0,y:t,w:2,h:i};return t+=i,a})},mF=(n,e)=>{let t=0;return n.map(r=>{const s=e[r.i];let i;switch(s.type){case"stat":case"smallStat":i=2;break;case"chart":i=s.chartType==="list"?8:6;break;case"reminders":case"goals_summary":i=8;break;default:i=5}const a={i:r.i,x:0,y:t,w:2,h:i};return t+=i,a})},gF=()=>{},la=OE(gF,[]);hp(la),hF(hp(la),la),fF(hp(la),la),pF(hp(la),la),mF(hp(la),la);const LE=A.createContext(),hs=()=>{const n=A.useContext(LE);if(!n)throw new Error("useData must be used within a DataProvider");return n},vF=({children:n})=>{const{toast:e}=ri(),{user:t,session:r,settings:s,loadingAuth:i,setSettings:a}=Kb(),{clients:l,workflowCards:d,financialData:h,servicePackages:f,equipments:g,maintenances:v,fixedCosts:_,pricedServices:S,savingGoals:x,pendingReserveAllocations:E,upcomingReminders:P,clientContracts:R,clientOrcamentos:M,availabilitySlots:N,proposals:L,blogPosts:B,featureFlags:$,affiliateData:H,loadingData:Y,initialLoadCompleted:ue,wallets:oe,contratos:ce,setDataState:ae,clearLocalData:me,loadInitialData:W,refreshData:q}=v2(t,s,e),[ne,z]=A.useState(null),[re,J]=A.useState(0),F=A.useCallback((fe,Q)=>{lh(fe,Q,e)},[e]);A.useEffect(()=>{!i&&!t&&me()},[i,t,me]),A.useEffect(()=>{t&&!ue&&W(t)},[t,ue,W]);const se=A.useCallback(fe=>{fe?.plan_status?(z(fe.plan_status),J(999)):(z("FREE"),J(999))},[]);A.useEffect(()=>{se(s)},[s,se]);const ee=A.useCallback(()=>!0,[]),Te=A.useCallback(fe=>{const Q={agendado:"Agendado","novo-lead":"Novo Lead","proposta-enviada":"Proposta Enviada","em-andamento":"Em Andamento",concluido:"Concludo"};return(s?.workflow_columns?.reduce((_e,ye)=>({..._e,[ye.id]:ye.title}),{})||{})[fe]||Q[fe]||fe},[s?.workflow_columns]),{addClient:Me,updateClient:Pe,deleteClient:ve,getClientById:Ne}=_2(t,ee,l,fe=>ae(Q=>({...Q,clients:fe})),F,fe=>ae(Q=>({...Q,upcomingReminders:fe}))),{handleNewSubscription:He}=x2(t,s),Ye=fe=>(fe||[]).filter(Q=>Q.status==="novo-lead"||Q.status==="proposta-enviada").reduce((Q,pe)=>Q+(Number(pe.value)||0),0),it=A.useCallback(fe=>{if(s?.role==="ADMIN")return!0;const Q=s?.feature_overrides?.[fe];return typeof Q=="boolean"?Q:$[fe]??!1},[$,s]),Mt=A.useCallback(fe=>{const Q=(oe||[]).find(ye=>ye.id===fe);return Q?(h?.transactions||[]).filter(ye=>ye.wallet_id===fe&&(ye.status==="PAGO"||ye.status==="AGUARDANDO_LIBERACAO"&&new Date(ye.release_date)<=new Date)).reduce((ye,Be)=>Be.tipo==="ENTRADA"?ye+Number(Be.valor):Be.tipo==="SAIDA"?ye-Number(Be.valor):ye,Number(Q.initial_balance)||0):0},[oe,h?.transactions]),un=A.useMemo(()=>OE(()=>{},oe),[oe]),Xt=async fe=>{if(!t){F({message:"Usurio no autenticado."},"deletar proposta");return}const{error:Q}=await Se.from("propostas").delete().eq("id",fe).eq("user_id",t.id);Q?F(Q,"deletar proposta"):(e({title:"Proposta deletada com sucesso!"}),await q("propostas"))},$r=async fe=>{if(!t||!ee()||!s)throw new Error("Pr-condio falhou para adicionar card.");try{const{data:Q,error:pe}=await Se.functions.invoke("criar-agendamento",{body:JSON.stringify({cardData:fe,userName:s.user_name||t.email})});if(pe)throw pe;if(Q.error)throw new Error(Q.error);const{newCard:_e}=Q;return ae(ye=>{const Be=[...ye.workflowCards,_e].sort((Et,In)=>(Et.order||0)-(In.order||0));return{...ye,workflowCards:Be,financialData:{...ye.financialData,potentialLeadValue:Ye(Be)}}}),_e}catch(Q){throw F(Q,"criar agendamento"),Q}},$i=async(fe,Q)=>{if(!t||!ee())return null;try{const pe=d.find(ye=>ye.id===fe);if(!pe)return await q("workflow_cards"),null;const _e=await S2(Se,t.id,fe,{...Q},pe,Te,s.user_name||t.email);if(ae(ye=>{const Be=ye.workflowCards.map(Et=>Et.id===fe?_e:Et).sort((Et,In)=>(Et.order||0)-(In.order||0));return{...ye,workflowCards:Be,financialData:{...ye.financialData,potentialLeadValue:Ye(Be)}}}),Q.value!==void 0||Q.payment_type!==void 0||Q.entry_paid!==void 0){const ye=await m2(Se,fe),Be=ye.length>0?ye[0]:null,Et={descricao:_e.title||"Lanamento",valor:_e.value||0,data:_e.first_installment_date||_e.date||new Date().toISOString().split("T")[0],data_vencimento:_e.first_installment_date||_e.date,status:_e.entry_paid?"PAGO":"PENDENTE",tipo:"ENTRADA",metodo_pagamento:_e.payment_method||null,trabalho_id:fe,cliente_id:_e.client_id};Be?await Ur(Be.id,Et):_e.value>0&&await Co(Et),await q("transacoes")}return _e}catch(pe){return pe.message?.includes("PGRST204")?(await q("workflow_cards"),null):(F(pe,"atualizar card"),null)}},Mn=async fe=>{if(!(!t||!ee()))try{await A2(Se,t.id,fe),ae(Q=>{const pe=Q.workflowCards.filter(_e=>_e.id!==fe);return{...Q,workflowCards:pe,financialData:{...Q.financialData,potentialLeadValue:Ye(pe)}}})}catch(Q){F(Q,"remover card")}},Ll=async(fe,Q)=>{if(!t||!ee())return null;try{const pe=d.find(ye=>ye.id===fe),_e=await C2(Se,t.id,fe,Q,pe?.comments,s.user_name||t.email,t.user_metadata?.avatar_url);return ae(ye=>({...ye,workflowCards:ye.workflowCards.map(Be=>Be.id===fe?_e:Be)})),_e}catch(pe){throw F(pe,"adicionar comentrio"),pe}},Co=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{let Q={...fe};if(fe.wallet_id&&fe.status==="PAGO"){const _e=oe.find(ye=>ye.id===fe.wallet_id);if(_e&&_e.is_gateway&&_e.gateway_config&&fe.tipo==="ENTRADA"){const ye=_e.gateway_config.fee||0,Be=_e.gateway_config.release_days||0,Et=parseFloat(fe.valor),In=Et*ye/100,Ds=Et-In;Be>1?Q={...Q,original_value:Et,fee_value:In,valor:Ds,status:"AGUARDANDO_LIBERACAO",release_date:qc(D2(new Date(fe.data),Be),"yyyy-MM-dd")}:Q={...Q,original_value:Et,fee_value:In,valor:Ds,status:"PAGO",release_date:null}}}const pe=await h2(Se,t.id,Q);return ae(_e=>{const ye=[pe,..._e.financialData.transactions];return{..._e,financialData:{...Rp(ye),transactions:ye,potentialLeadValue:_e.financialData.potentialLeadValue}}}),pe}catch(Q){throw F(Q,"adicionar transao"),Q}},Ur=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=h.transactions.find(ye=>ye.id===fe),_e=await f2(Se,t.id,fe,Q);if(ae(ye=>{const Be=ye.financialData.transactions.map(Et=>Et.id===fe?_e:Et);return{...ye,financialData:{...Rp(Be),transactions:Be,potentialLeadValue:ye.financialData.potentialLeadValue}}}),_e.status==="PAGO"&&pe?.status!=="PAGO"&&_e.trabalho_id){const ye=d.find(Be=>Be.id===_e.trabalho_id);if(ye?.service_package_id){const Be=S.find(Et=>Et.id===ye.service_package_id);if(Be?.reserva_financeira_percentual>0){const Et=_e.valor*Be.reserva_financeira_percentual/100;ae(In=>({...In,pendingReserveAllocations:[...In.pendingReserveAllocations,{transactionId:_e.id,transactionValue:_e.valor,serviceName:Be.nome_servico,reserveAmount:Et,pricedServiceId:Be.id}]}))}}}return _e}catch(pe){throw F(pe,"atualizar transao"),pe}},Sn=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{await p2(Se,t.id,fe),ae(Q=>{const pe=Q.financialData.transactions.filter(_e=>_e.id!==fe);return{...Q,financialData:{...Rp(pe),transactions:pe,potentialLeadValue:Q.financialData.potentialLeadValue}}})}catch(Q){throw F(Q,"remover transao"),Q}},oi=async fe=>{if(!t)throw new Error("Usurio no autenticado");const{data:Q,error:pe}=await Se.from("wallets").insert([{...fe,user_id:t.id}]).select().single();if(pe)throw pe;return await q("wallets"),Q},Eo=async(fe,Q)=>{if(!t)throw new Error("Usurio no autenticado");const{data:pe,error:_e}=await Se.from("wallets").update(Q).eq("id",fe).eq("user_id",t.id).select().single();if(_e)throw _e;return await q("wallets"),pe},gu=async fe=>{if(!t)throw new Error("Usurio no autenticado");const{error:Q}=await Se.from("wallets").delete().eq("id",fe).eq("user_id",t.id);if(Q)throw Q;await q("wallets")},Ui=async()=>{if(!t)return!1;try{const{error:fe}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!1})});if(fe)throw fe;me();const Q=t.user_metadata?.full_name||t.email,pe={...br,user_id:t.id,user_name:Q,contact_email:t.email,profile_photo:t.user_metadata?.avatar_url||null,workflow_columns:bv};return await a(pe,!0),q(),!0}catch(fe){return F(fe,"excluir dados"),!1}},vu=async()=>{if(!t)return!1;try{const{error:fe}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!0})});if(fe)throw fe;return await Se.auth.signOut(),me(),!0}catch(fe){return F(fe,"excluir conta"),!1}},ai=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await E2(Se,t.id,fe);return ae(pe=>({...pe,servicePackages:[Q,...pe.servicePackages].sort((_e,ye)=>new Date(ye.created_at)-new Date(_e.created_at))})),Q}catch(Q){throw F(Q,"adicionar pacote"),Q}},fs=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=await k2(Se,t.id,fe,Q);return ae(_e=>({..._e,servicePackages:_e.servicePackages.map(ye=>ye.id===fe?pe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),pe}catch(pe){throw F(pe,"atualizar pacote"),pe}},Aa=async fe=>{if(!(!t||!ee()))try{await T2(Se,t.id,fe),ae(Q=>({...Q,servicePackages:Q.servicePackages.filter(pe=>pe.id!==fe)}))}catch(Q){F(Q,"remover pacote")}},li=fe=>f.find(Q=>Q.id===fe),ci=fe=>h.transactions.find(Q=>Q.id===fe),jl=fe=>d.find(Q=>Q.id===fe),Ca=async fe=>{if(!t||!ee())return 0;let Q=0;const pe=fe.filter(_e=>!d.some(ye=>ye.google_event_id===_e.id)).map(_e=>{const ye=_e.start?.date||(_e.start?.dateTime?_e.start.dateTime.split("T")[0]:null),Be=_e.start?.dateTime?qc(RE(_e.start.dateTime),"HH:mm"):null;return ye?{title:_e.summary||"Evento",description:_e.description||"",date:ye,time:Be,status:"agendado",google_event_id:_e.id,user_id:t.id}:null}).filter(Boolean);if(pe.length>0){const{data:_e,error:ye}=await Se.from("workflow_cards").insert(pe).select();ye?F(ye,"importar eventos"):_e&&(Q=_e.length,ae(Be=>({...Be,workflowCards:[...Be.workflowCards,..._e].sort((Et,In)=>(Et.order||0)-(In.order||0))})))}return Q},Ea=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await eF(t.id,fe);return ae(pe=>({...pe,equipments:[Q,...pe.equipments].sort((_e,ye)=>new Date(ye.created_at)-new Date(_e.created_at))})),Q}catch(Q){throw F(Q,"add equipment"),Q}},Fl=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=await tF(t.id,fe,Q);return ae(_e=>({..._e,equipments:_e.equipments.map(ye=>ye.id===fe?pe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),pe}catch(pe){throw F(pe,"update equipment"),pe}},ko=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{await nF(t.id,fe),ae(Q=>({...Q,equipments:Q.equipments.filter(pe=>pe.id!==fe)}))}catch(Q){throw F(Q,"delete equipment"),Q}},To=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await rF(t.id,fe);return ae(pe=>({...pe,maintenances:[Q,...pe.maintenances].sort((_e,ye)=>new Date(ye.data_manutencao)-new Date(_e.data_manutencao))})),Q}catch(Q){throw F(Q,"add maintenance"),Q}},Bl=fe=>v.filter(Q=>Q.equipamento_id===fe).sort((Q,pe)=>new Date(pe.data_manutencao)-new Date(Q.data_manutencao)),$l=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await oF(t.id,fe);return ae(pe=>({...pe,fixedCosts:[Q,...pe.fixedCosts].sort((_e,ye)=>new Date(ye.created_at)-new Date(_e.created_at))})),Q}catch(Q){throw F(Q,"add fixed cost"),Q}},Ul=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=await aF(t.id,fe,Q);return ae(_e=>({..._e,fixedCosts:_e.fixedCosts.map(ye=>ye.id===fe?pe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),pe}catch(pe){throw F(pe,"update fixed cost"),pe}},ui=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{await lF(t.id,fe),ae(Q=>({...Q,fixedCosts:Q.fixedCosts.filter(pe=>pe.id!==fe)}))}catch(Q){throw F(Q,"delete fixed cost"),Q}},di=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await iF(t.id,fe);return ae(pe=>({...pe,pricedServices:[Q,...pe.pricedServices].sort((_e,ye)=>new Date(ye.created_at)-new Date(_e.created_at))})),Q}catch(Q){throw F(Q,"add priced service"),Q}},yu=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await cF(t.id,fe);return await q("metas_reserva"),Q}catch(Q){throw F(Q,"add saving goal"),Q}},wu=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=await uF(t.id,fe,Q);return ae(_e=>({..._e,savingGoals:_e.savingGoals.map(ye=>ye.id===fe?pe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),pe}catch(pe){throw F(pe,"update saving goal"),pe}},bu=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{await dF(t.id,fe),ae(Q=>({...Q,savingGoals:Q.savingGoals.filter(pe=>pe.id!==fe)}))}catch(Q){throw F(Q,"delete saving goal"),Q}},_u=async(fe,Q,pe,_e)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const ye=x.find(Ds=>Ds.id===fe);if(!ye)throw new Error("Meta no encontrada.");let Be;if(_e==="deposit")Be=Number(ye.saldo_atual)+Number(Q);else if(_e==="withdraw"){if(Number(ye.saldo_atual)<Number(Q))throw new Error("Saldo insuficiente.");Be=Number(ye.saldo_atual)-Number(Q)}else throw new Error("Tipo de transao invlido.");const{data:Et,error:In}=await Se.from("metas_reserva").update({saldo_atual:Be,updated_at:new Date().toISOString()}).eq("id",fe).eq("user_id",t.id).select().single();if(In)throw In;return _e==="withdraw"&&await Co({descricao:`Saque da meta: ${ye.nome_meta}${pe?` - ${pe}`:""}`,valor:Number(Q),tipo:"SAIDA",status:"PAGO",data:new Date().toISOString().split("T")[0],category:"Saque de Meta",user_id:t.id}),ae(Ds=>({...Ds,savingGoals:Ds.savingGoals.map(Io=>Io.id===fe?Et:Io).sort((Io,Au)=>new Date(Au.created_at)-new Date(Io.created_at))})),Et}catch(ye){throw F(ye,`Erro ao ${_e==="deposit"?"depositar":"sacar"}`),ye}},zl=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const{data:pe,error:_e}=await Se.functions.invoke("alocarReserva",{body:JSON.stringify({meta_id:fe,valor_alocar:Q,user_id:t.id})});if(_e)throw _e;if(pe.error)throw new Error(pe.error);return ae(ye=>({...ye,savingGoals:ye.savingGoals.map(Be=>Be.id===fe?pe:Be).sort((Be,Et)=>new Date(Et.created_at)-new Date(Be.created_at))})),pe}catch(pe){throw F(pe,"alocar reserva"),pe}},Vl=fe=>ae(Q=>({...Q,pendingReserveAllocations:Q.pendingReserveAllocations.filter(pe=>pe.transactionId!==fe)})),xu=A.useCallback(async fe=>{if(!(!t||!fe))try{const{data:Q,error:pe}=await Se.from("contratos_clientes").select("*").eq("user_id",t.id).eq("client_id",fe).order("created_at",{ascending:!1});if(pe)throw pe;ae(_e=>({..._e,clientContracts:Q||[]}))}catch(Q){F(Q,"buscar contratos")}},[t,F]),Po=async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const{data:Q,error:pe}=await Se.from("contratos_clientes").insert([fe]).select().single();if(pe)throw pe;return ae(_e=>({..._e,clientContracts:[Q,..._e.clientContracts].sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),Q}catch(Q){throw F(Q,"add contrato"),Q}},Ro=async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const{error:pe}=await Se.from("contratos_clientes").delete().eq("id",fe).eq("user_id",t.id);if(pe)throw pe;const{error:_e}=await Se.storage.from("contracts").remove([Q]);_e&&console.warn("Erro ao deletar do storage:",_e.message),ae(ye=>({...ye,clientContracts:ye.clientContracts.filter(Be=>Be.id!==fe)}))}catch(pe){throw F(pe,"delete contrato"),pe}},Mo=A.useCallback(async fe=>{if(!(!t||!fe))try{const Q=await P2(Se,t.id,fe);ae(pe=>({...pe,clientOrcamentos:Q}))}catch(Q){F(Q,"buscar oramentos")}},[t,F]),Ta={clients:l,workflowCards:d,financialData:h,settings:s,loading:Y||i,servicePackages:f,user:t,session:r,loadingAuth:i,refreshData:q,planStatus:ne,trialDaysRemaining:re,isUserActive:ee,equipments:g,maintenances:v,fixedCosts:_,pricedServices:S,savingGoals:x,pendingReserveAllocations:E,upcomingReminders:P,clientContracts:R,clientOrcamentos:M,availabilitySlots:N,proposals:L,blogPosts:B,featureFlags:$,isFeatureEnabled:it,affiliateData:H,wallets:oe,contratos:ce,getWalletBalance:Mt,addClient:Me,updateClient:Pe,deleteClient:ve,getClientById:Ne,addWorkflowCard:$r,updateWorkflowCard:$i,deleteWorkflowCard:Mn,addComment:Ll,getStatusLabel:Te,importGoogleEventsAsWorkflowCards:Ca,getWorkflowCardById:jl,addTransaction:Co,updateTransaction:Ur,deleteTransaction:Sn,getTransactionById:ci,setSettings:a,addServicePackage:ai,updateServicePackage:fs,deleteServicePackage:Aa,getServicePackageById:li,addEquipment:Ea,updateEquipment:Fl,deleteEquipment:ko,addMaintenance:To,getEquipmentMaintenances:Bl,addFixedCost:$l,updateFixedCost:Ul,deleteFixedCost:ui,addPricedService:di,addSavingGoal:yu,updateSavingGoal:wu,deleteSavingGoal:bu,updateSavingGoalBalance:_u,allocateToSavingGoal:zl,dismissPendingAllocation:Vl,refreshClientContracts:xu,addClientContract:Po,deleteClientContract:Ro,refreshClientOrcamentos:Mo,addOrcamento:async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{const Q=await R2(Se,fe);return ae(pe=>({...pe,clientOrcamentos:[Q,...pe.clientOrcamentos].sort((_e,ye)=>new Date(ye.data_envio)-new Date(_e.data_envio))})),Q}catch(Q){throw F(Q,"add oramento"),Q}},updateOrcamento:async(fe,Q)=>{if(!t||!ee())throw new Error("Operao no permitida");try{const pe=await M2(Se,fe,Q,t.id);return ae(_e=>({..._e,clientOrcamentos:_e.clientOrcamentos.map(ye=>ye.id===fe?pe:ye).sort((ye,Be)=>new Date(Be.data_envio)-new Date(ye.data_envio))})),pe}catch(pe){throw F(pe,"update oramento"),pe}},deleteOrcamento:async fe=>{if(!t||!ee())throw new Error("Operao no permitida");try{await I2(Se,fe,t.id),ae(Q=>({...Q,clientOrcamentos:Q.clientOrcamentos.filter(pe=>pe.id!==fe)}))}catch(Q){throw F(Q,"delete oramento"),Q}},deleteAllUserData:Ui,deleteUserAccount:vu,deleteProposal:Xt,handleNewSubscription:He,addWallet:oi,updateWallet:Eo,deleteWallet:gu,initialCardConfigMemo:un};return y.jsx(LE.Provider,{value:Ta,children:n})},jE=A.createContext(),Dh=()=>{const n=A.useContext(jE);if(!n)throw new Error("useModalState must be used within a ModalStateProvider");return n},yF=({children:n})=>{const[e,t]=A.useState({client:null,financial:null,workflow:null,servicePackage:null,equipment:null,maintenance:null,fixedCost:null,goal:null,goalTransaction:null,withdrawGoal:null,orcamento:null,formCreation:!1,formSuccess:null,bookingSettings:!1,availability:null}),r=A.useCallback((l,d={})=>{t(h=>({...h,[l]:{isOpen:!0,...d}}))},[]),s=A.useCallback(l=>{t(d=>({...d,[l]:null}))},[]),i=Object.values(e).some(l=>l?.isOpen),a={openModals:e,openModal:r,closeModal:s,isAnyModalOpen:i};return y.jsx(jE.Provider,{value:a,children:n})},wF=A.createContext(null),bF=()=>({browser:navigator.userAgent,platform:navigator.platform,screen_resolution:`${window.screen.width}x${window.screen.height}`,window_resolution:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language}),_F=({children:n})=>{const{user:e,settings:t}=Kb(),r=Fi(),s=A.useCallback(async i=>{try{const a={type:i.type||"error",route:r.pathname,message:typeof i.message=="object"?JSON.stringify(i.message,null,2):String(i.message),stack_trace:i.stack_trace,user_info:{id:e?.id||null,email:e?.email||null,name:t?.user_name||null},device_info:bF(),user_id:e?.id||null};await Se.functions.invoke("report-error",{body:JSON.stringify(a)})}catch(a){console.error("Failed to report error:",a)}},[e,t,r.pathname]);return A.useEffect(()=>{const i=console.error;console.error=(...d)=>{i.apply(console,d);const h=d.map(g=>{if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return String(g)}}).join(" "),f=d.find(g=>g instanceof Error)?.stack;s({type:"log",message:`CONSOLE_ERROR: ${h}`,stack_trace:f})};const a=d=>{s({message:d.message,stack_trace:d.error?.stack})},l=d=>{s({type:"unhandled_rejection",message:d.reason?.message||"Promise rejection with no message",stack_trace:d.reason?.stack})};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",l),()=>{console.error=i,window.removeEventListener("error",a),window.removeEventListener("unhandledrejection",l)}},[s]),A.useEffect(()=>{const i=window.fetch;return window.fetch=async(...a)=>{const l=await i(...a);if(l.status>=400&&l.status<600){const d=a[0]instanceof Request?a[0].url:a[0];if(d.includes("/report-error"))return l;s({type:"network_error",message:`Fetch failed with status ${l.status} for URL: ${d}`,stack_trace:`Status: ${l.status}
URL: ${d}
Method: ${a[0]?.method||"GET"}`})}return l},()=>{window.fetch=i}},[s]),n},xF=({children:n})=>y.jsx(wF.Provider,{value:null,children:y.jsx(_F,{children:n})}),FE=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),ry=A.createContext({}),sy=A.createContext(null),iy=typeof document<"u",Yb=iy?A.useLayoutEffect:A.useEffect,BE=A.createContext({strict:!1}),Xb=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),SF="framerAppearId",$E="data-"+Xb(SF);function AF(n,e,t,r){const{visualElement:s}=A.useContext(ry),i=A.useContext(BE),a=A.useContext(sy),l=A.useContext(FE).reducedMotion,d=A.useRef();r=r||i.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=d.current;A.useInsertionEffect(()=>{h&&h.update(t,a)});const f=A.useRef(!!(t[$E]&&!window.HandoffComplete));return Yb(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),A.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function ch(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function CF(n,e,t){return A.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ch(t)&&(t.current=r))},[e])}function Hp(n){return typeof n=="string"||Array.isArray(n)}function oy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Qb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Jb=["initial",...Qb];function ay(n){return oy(n.animate)||Jb.some(e=>Hp(n[e]))}function UE(n){return!!(ay(n)||n.variants)}function EF(n,e){if(ay(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Hp(t)?t:void 0,animate:Hp(r)?r:void 0}}return n.inherit!==!1?e:{}}function kF(n){const{initial:e,animate:t}=EF(n,A.useContext(ry));return A.useMemo(()=>({initial:e,animate:t}),[jS(e),jS(t)])}function jS(n){return Array.isArray(n)?n.join(" "):n}const FS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wp={};for(const n in FS)Wp[n]={isEnabled:e=>FS[n].some(t=>!!e[t])};function TF(n){for(const e in n)Wp[e]={...Wp[e],...n[e]}}const Zb=A.createContext({}),zE=A.createContext({}),PF=Symbol.for("motionComponentSymbol");function RF({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&TF(n);function i(l,d){let h;const f={...A.useContext(FE),...l,layoutId:MF(l)},{isStatic:g}=f,v=kF(l),_=r(l,g);if(!g&&iy){v.visualElement=AF(s,_,f,e);const S=A.useContext(zE),x=A.useContext(BE).strict;v.visualElement&&(h=v.visualElement.loadFeatures(f,x,n,S))}return A.createElement(ry.Provider,{value:v},h&&v.visualElement?A.createElement(h,{visualElement:v.visualElement,...f}):null,t(s,l,CF(_,v.visualElement,d),_,g,v.visualElement))}const a=A.forwardRef(i);return a[PF]=s,a}function MF({layoutId:n}){const e=A.useContext(Zb).id;return e&&n!==void 0?e+"-"+n:n}function IF(n){function e(r,s={}){return RF(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const DF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function e_(n){return typeof n!="string"||n.includes("-")?!1:!!(DF.indexOf(n)>-1||/[A-Z]/.test(n))}const Dv={};function NF(n){Object.assign(Dv,n)}const cm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],au=new Set(cm);function VE(n,{layout:e,layoutId:t}){return au.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Dv[n]||n==="opacity")}const ds=n=>!!(n&&n.getVelocity),OF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LF=cm.length;function jF(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let i="";for(let a=0;a<LF;a++){const l=cm[a];if(n[l]!==void 0){const d=OF[l]||l;i+=`${d}(${n[l]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(n,r?"":i):t&&r&&(i="none"),i}const HE=n=>e=>typeof e=="string"&&e.startsWith(n),WE=HE("--"),Yw=HE("var(--"),FF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,BF=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Cl=(n,e,t)=>Math.min(Math.max(t,n),e),lu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Mp={...lu,transform:n=>Cl(0,1,n)},ev={...lu,default:1},Ip=n=>Math.round(n*1e5)/1e5,ly=/(-)?([\d]*\.?[\d])+/g,qE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$F=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function um(n){return typeof n=="string"}const dm=n=>({test:e=>um(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ml=dm("deg"),yo=dm("%"),Ze=dm("px"),UF=dm("vh"),zF=dm("vw"),BS={...yo,parse:n=>yo.parse(n)/100,transform:n=>yo.transform(n*100)},$S={...lu,transform:Math.round},GE={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,size:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:ev,scaleX:ev,scaleY:ev,scaleZ:ev,skew:ml,skewX:ml,skewY:ml,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Mp,originX:BS,originY:BS,originZ:Ze,zIndex:$S,fillOpacity:Mp,strokeOpacity:Mp,numOctaves:$S};function t_(n,e,t,r){const{style:s,vars:i,transform:a,transformOrigin:l}=n;let d=!1,h=!1,f=!0;for(const g in e){const v=e[g];if(WE(g)){i[g]=v;continue}const _=GE[g],S=BF(v,_);if(au.has(g)){if(d=!0,a[g]=S,!f)continue;v!==(_.default||0)&&(f=!1)}else g.startsWith("origin")?(h=!0,l[g]=S):s[g]=S}if(e.transform||(d||r?s.transform=jF(n.transform,t,f,r):s.transform&&(s.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:_=0}=l;s.transformOrigin=`${g} ${v} ${_}`}}const n_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KE(n,e,t){for(const r in e)!ds(e[r])&&!VE(r,t)&&(n[r]=e[r])}function VF({transformTemplate:n},e,t){return A.useMemo(()=>{const r=n_();return t_(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function HF(n,e,t){const r=n.style||{},s={};return KE(s,r,n),Object.assign(s,VF(n,e,t)),n.transformValues?n.transformValues(s):s}function WF(n,e,t){const r={},s=HF(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const qF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||qF.has(n)}let YE=n=>!Nv(n);function GF(n){n&&(YE=e=>e.startsWith("on")?!Nv(e):n(e))}try{GF(require("@emotion/is-prop-valid").default)}catch{}function KF(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(YE(s)||t===!0&&Nv(s)||!e&&!Nv(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function US(n,e,t){return typeof n=="string"?n:Ze.transform(e+t*n)}function YF(n,e,t){const r=US(e,n.x,n.width),s=US(t,n.y,n.height);return`${r} ${s}`}const XF={offset:"stroke-dashoffset",array:"stroke-dasharray"},QF={offset:"strokeDashoffset",array:"strokeDasharray"};function JF(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?XF:QF;n[i.offset]=Ze.transform(-r);const a=Ze.transform(e),l=Ze.transform(t);n[i.array]=`${a} ${l}`}function r_(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:d=0,...h},f,g,v){if(t_(n,h,f,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:S,dimensions:x}=n;_.transform&&(x&&(S.transform=_.transform),delete _.transform),x&&(s!==void 0||i!==void 0||S.transform)&&(S.transformOrigin=YF(x,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),a!==void 0&&JF(_,a,l,d,!1)}const XE=()=>({...n_(),attrs:{}}),s_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ZF(n,e,t,r){const s=A.useMemo(()=>{const i=XE();return r_(i,e,{enableHardwareAcceleration:!1},s_(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};KE(i,n.style,n),s.style={...i,...s.style}}return s}function eB(n=!1){return(t,r,s,{latestValues:i},a)=>{const d=(e_(t)?ZF:WF)(r,i,a,t),f={...KF(r,typeof t=="string",n),...d,ref:s},{children:g}=r,v=A.useMemo(()=>ds(g)?g.get():g,[g]);return A.createElement(t,{...f,children:v})}}function QE(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const JE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZE(n,e,t,r){QE(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(JE.has(s)?s:Xb(s),e.attrs[s])}function i_(n,e){const{style:t}=n,r={};for(const s in t)(ds(t[s])||e.style&&ds(e.style[s])||VE(s,n))&&(r[s]=t[s]);return r}function e1(n,e){const t=i_(n,e);for(const r in n)if(ds(n[r])||ds(e[r])){const s=cm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function o_(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function t1(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const Ov=n=>Array.isArray(n),tB=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),nB=n=>Ov(n)?n[n.length-1]||0:n;function _v(n){const e=ds(n)?n.get():n;return tB(e)?e.toValue():e}function rB({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,i){const a={latestValues:sB(r,s,i,n),renderState:e()};return t&&(a.mount=l=>t(r,l,a)),a}const n1=n=>(e,t)=>{const r=A.useContext(ry),s=A.useContext(sy),i=()=>rB(n,e,r,s);return t?i():t1(i)};function sB(n,e,t,r){const s={},i=r(n,{});for(const v in i)s[v]=_v(i[v]);let{initial:a,animate:l}=n;const d=ay(n),h=UE(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const g=f?l:a;return g&&typeof g!="boolean"&&!oy(g)&&(Array.isArray(g)?g:[g]).forEach(_=>{const S=o_(n,_);if(!S)return;const{transitionEnd:x,transition:E,...P}=S;for(const R in P){let M=P[R];if(Array.isArray(M)){const N=f?M.length-1:0;M=M[N]}M!==null&&(s[R]=M)}for(const R in x)s[R]=x[R]}),s}const bn=n=>n;class zS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function iB(n){let e=new zS,t=new zS,r=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(d,h=!1,f=!1)=>{const g=f&&s,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&s&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(s){i=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const f=e.order[h];f(d),a.has(f)&&(l.schedule(f),n())}s=!1,i&&(i=!1,l.process(d))}};return l}const tv=["prepare","read","update","preRender","render","postRender"],oB=40;function aB(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=tv.reduce((g,v)=>(g[v]=iB(()=>t=!0),g),{}),a=g=>i[g].process(s),l=()=>{const g=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(g-s.timestamp,oB),1),s.timestamp=g,s.isProcessing=!0,tv.forEach(a),s.isProcessing=!1,t&&e&&(r=!1,n(l))},d=()=>{t=!0,r=!0,s.isProcessing||n(l)};return{schedule:tv.reduce((g,v)=>{const _=i[v];return g[v]=(S,x=!1,E=!1)=>(t||d(),_.schedule(S,x,E)),g},{}),cancel:g=>tv.forEach(v=>i[v].cancel(g)),state:s,steps:i}}const{schedule:Yt,cancel:_a,state:_r,steps:nw}=aB(typeof requestAnimationFrame<"u"?requestAnimationFrame:bn,!0),lB={useVisualState:n1({scrapeMotionValuesFromProps:e1,createRenderState:XE,onMount:(n,e,{renderState:t,latestValues:r})=>{Yt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Yt.render(()=>{r_(t,r,{enableHardwareAcceleration:!1},s_(e.tagName),n.transformTemplate),ZE(e,t)})}})},cB={useVisualState:n1({scrapeMotionValuesFromProps:i_,createRenderState:n_})};function uB(n,{forwardMotionProps:e=!1},t,r){return{...e_(n)?lB:cB,preloadedFeatures:t,useRender:eB(e),createVisualElement:r,Component:n}}function ga(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const r1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function cy(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const dB=n=>e=>r1(e)&&n(e,cy(e));function va(n,e,t,r){return ga(n,e,dB(t),r)}const hB=(n,e)=>t=>e(n(t)),xl=(...n)=>n.reduce(hB);function s1(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const VS=s1("dragHorizontal"),HS=s1("dragVertical");function i1(n){let e=!1;if(n==="y")e=HS();else if(n==="x")e=VS();else{const t=VS(),r=HS();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function o1(){const n=i1(!0);return n?(n(),!1):!0}class Il{constructor(e){this.isMounted=!1,this.node=e}update(){}}function WS(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||o1())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&Yt.update(()=>l[r](i,a))};return va(n.current,t,s,{passive:!n.getProps()[r]})}class fB extends Il{mount(){this.unmount=xl(WS(this.node,!0),WS(this.node,!1))}unmount(){}}class pB extends Il{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xl(ga(this.node.current,"focus",()=>this.onFocus()),ga(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const a1=(n,e)=>e?n===e?!0:a1(n,e.parentElement):!1;function rw(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,cy(t))}class mB extends Il{constructor(){super(...arguments),this.removeStartListeners=bn,this.removeEndListeners=bn,this.removeAccessibleListeners=bn,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=va(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:g}=this.node.getProps();Yt.update(()=>{!g&&!a1(this.node.current,l.target)?f&&f(l,d):h&&h(l,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=va(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=xl(i,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||rw("up",(d,h)=>{const{onTap:f}=this.node.getProps();f&&Yt.update(()=>f(d,h))})};this.removeEndListeners(),this.removeEndListeners=ga(this.node.current,"keyup",a),rw("down",(l,d)=>{this.startPress(l,d)})},t=ga(this.node.current,"keydown",e),r=()=>{this.isPressing&&rw("cancel",(i,a)=>this.cancelPress(i,a))},s=ga(this.node.current,"blur",r);this.removeAccessibleListeners=xl(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Yt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!o1()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Yt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=va(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ga(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xl(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Xw=new WeakMap,sw=new WeakMap,gB=n=>{const e=Xw.get(n.target);e&&e(n)},vB=n=>{n.forEach(gB)};function yB({root:n,...e}){const t=n||document;sw.has(t)||sw.set(t,{});const r=sw.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(vB,{root:n,...e})),r[s]}function wB(n,e,t){const r=yB(e);return Xw.set(n,t),r.observe(n),()=>{Xw.delete(n),r.unobserve(n)}}const bB={some:0,all:1};class _B extends Il{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:bB[s]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:g}=this.node.getProps(),v=h?f:g;v&&v(d)};return wB(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(xB(e,t))&&this.startObserver()}unmount(){}}function xB({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const SB={inView:{Feature:_B},tap:{Feature:mB},focus:{Feature:pB},hover:{Feature:fB}};function l1(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function AB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function CB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function uy(n,e,t){const r=n.getProps();return o_(r,e,t!==void 0?t:r.custom,AB(n),CB(n))}let a_=bn;const Jc=n=>n*1e3,ya=n=>n/1e3,EB={current:!1},c1=n=>Array.isArray(n)&&typeof n[0]=="number";function u1(n){return!!(!n||typeof n=="string"&&d1[n]||c1(n)||Array.isArray(n)&&n.every(u1))}const Sp=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,d1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sp([0,.65,.55,1]),circOut:Sp([.55,0,1,.45]),backIn:Sp([.31,.01,.66,-.59]),backOut:Sp([.33,1.53,.69,.99])};function h1(n){if(n)return c1(n)?Sp(n):Array.isArray(n)?n.map(h1):d1[n]}function kB(n,e,t,{delay:r=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:d}={}){const h={[e]:t};d&&(h.offset=d);const f=h1(l);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function TB(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const f1=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,PB=1e-7,RB=12;function MB(n,e,t,r,s){let i,a,l=0;do a=e+(t-e)/2,i=f1(a,r,s)-n,i>0?t=a:e=a;while(Math.abs(i)>PB&&++l<RB);return a}function hm(n,e,t,r){if(n===e&&t===r)return bn;const s=i=>MB(i,0,1,n,t);return i=>i===0||i===1?i:f1(s(i),e,r)}const IB=hm(.42,0,1,1),DB=hm(0,0,.58,1),p1=hm(.42,0,.58,1),NB=n=>Array.isArray(n)&&typeof n[0]!="number",m1=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,g1=n=>e=>1-n(1-e),l_=n=>1-Math.sin(Math.acos(n)),v1=g1(l_),OB=m1(l_),y1=hm(.33,1.53,.69,.99),c_=g1(y1),LB=m1(c_),jB=n=>(n*=2)<1?.5*c_(n):.5*(2-Math.pow(2,-10*(n-1))),FB={linear:bn,easeIn:IB,easeInOut:p1,easeOut:DB,circIn:l_,circInOut:OB,circOut:v1,backIn:c_,backInOut:LB,backOut:y1,anticipate:jB},qS=n=>{if(Array.isArray(n)){a_(n.length===4);const[e,t,r,s]=n;return hm(e,t,r,s)}else if(typeof n=="string")return FB[n];return n},u_=(n,e)=>t=>!!(um(t)&&$F.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),w1=(n,e,t)=>r=>{if(!um(r))return r;const[s,i,a,l]=r.match(ly);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},BB=n=>Cl(0,255,n),iw={...lu,transform:n=>Math.round(BB(n))},Gc={test:u_("rgb","red"),parse:w1("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+iw.transform(n)+", "+iw.transform(e)+", "+iw.transform(t)+", "+Ip(Mp.transform(r))+")"};function $B(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Qw={test:u_("#"),parse:$B,transform:Gc.transform},uh={test:u_("hsl","hue"),parse:w1("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+yo.transform(Ip(e))+", "+yo.transform(Ip(t))+", "+Ip(Mp.transform(r))+")"},Dr={test:n=>Gc.test(n)||Qw.test(n)||uh.test(n),parse:n=>Gc.test(n)?Gc.parse(n):uh.test(n)?uh.parse(n):Qw.parse(n),transform:n=>um(n)?n:n.hasOwnProperty("red")?Gc.transform(n):uh.transform(n)},cn=(n,e,t)=>-t*n+t*e+n;function ow(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function UB({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,a=0;if(!e)s=i=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;s=ow(d,l,n+1/3),i=ow(d,l,n),a=ow(d,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}const aw=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},zB=[Qw,Gc,uh],VB=n=>zB.find(e=>e.test(n));function GS(n){const e=VB(n);let t=e.parse(n);return e===uh&&(t=UB(t)),t}const b1=(n,e)=>{const t=GS(n),r=GS(e),s={...t};return i=>(s.red=aw(t.red,r.red,i),s.green=aw(t.green,r.green,i),s.blue=aw(t.blue,r.blue,i),s.alpha=cn(t.alpha,r.alpha,i),Gc.transform(s))};function HB(n){var e,t;return isNaN(n)&&um(n)&&(((e=n.match(ly))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(qE))===null||t===void 0?void 0:t.length)||0)>0}const _1={regex:FF,countKey:"Vars",token:"${v}",parse:bn},x1={regex:qE,countKey:"Colors",token:"${c}",parse:Dr.parse},S1={regex:ly,countKey:"Numbers",token:"${n}",parse:lu.parse};function lw(n,{regex:e,countKey:t,token:r,parse:s}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...i.map(s)))}function Lv(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&lw(t,_1),lw(t,x1),lw(t,S1),t}function A1(n){return Lv(n).values}function C1(n){const{values:e,numColors:t,numVars:r,tokenised:s}=Lv(n),i=e.length;return a=>{let l=s;for(let d=0;d<i;d++)d<r?l=l.replace(_1.token,a[d]):d<r+t?l=l.replace(x1.token,Dr.transform(a[d])):l=l.replace(S1.token,Ip(a[d]));return l}}const WB=n=>typeof n=="number"?0:n;function qB(n){const e=A1(n);return C1(n)(e.map(WB))}const El={test:HB,parse:A1,createTransformer:C1,getAnimatableNone:qB},E1=(n,e)=>t=>`${t>0?e:n}`;function k1(n,e){return typeof n=="number"?t=>cn(n,e,t):Dr.test(n)?b1(n,e):n.startsWith("var(")?E1(n,e):P1(n,e)}const T1=(n,e)=>{const t=[...n],r=t.length,s=n.map((i,a)=>k1(i,e[a]));return i=>{for(let a=0;a<r;a++)t[a]=s[a](i);return t}},GB=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=k1(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}},P1=(n,e)=>{const t=El.createTransformer(e),r=Lv(n),s=Lv(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?xl(T1(r.values,s.values),t):E1(n,e)},qp=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},KS=(n,e)=>t=>cn(n,e,t);function KB(n){return typeof n=="number"?KS:typeof n=="string"?Dr.test(n)?b1:P1:Array.isArray(n)?T1:typeof n=="object"?GB:KS}function YB(n,e,t){const r=[],s=t||KB(n[0]),i=n.length-1;for(let a=0;a<i;a++){let l=s(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||bn:e;l=xl(d,l)}r.push(l)}return r}function R1(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(a_(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=YB(e,r,s),l=a.length,d=h=>{let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=qp(n[f],n[f+1],h);return a[f](g)};return t?h=>d(Cl(n[0],n[i-1],h)):d}function XB(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=qp(0,e,r);n.push(cn(t,1,s))}}function QB(n){const e=[0];return XB(e,n.length-1),e}function JB(n,e){return n.map(t=>t*e)}function ZB(n,e){return n.map(()=>e||p1).splice(0,n.length-1)}function jv({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=NB(r)?r.map(qS):qS(r),i={done:!1,value:e[0]},a=JB(t&&t.length===e.length?t:QB(e),n),l=R1(a,e,{ease:Array.isArray(s)?s:ZB(e,s)});return{calculatedDuration:n,next:d=>(i.value=l(d),i.done=d>=n,i)}}function M1(n,e){return e?n*(1e3/e):0}const e$=5;function I1(n,e,t){const r=Math.max(e-e$,0);return M1(t-n(r),e-r)}const cw=.001,t$=.01,n$=10,r$=.05,s$=1;function i$({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,i,a=1-e;a=Cl(r$,s$,a),n=Cl(t$,n$,ya(n)),a<1?(s=h=>{const f=h*a,g=f*n,v=f-t,_=Jw(h,a),S=Math.exp(-g);return cw-v/_*S},i=h=>{const g=h*a*n,v=g*t+t,_=Math.pow(a,2)*Math.pow(h,2)*n,S=Math.exp(-g),x=Jw(Math.pow(h,2),a);return(-s(h)+cw>0?-1:1)*((v-_)*S)/x}):(s=h=>{const f=Math.exp(-h*n),g=(h-t)*n+1;return-cw+f*g},i=h=>{const f=Math.exp(-h*n),g=(t-h)*(n*n);return f*g});const l=5/n,d=a$(s,i,l);if(n=Jc(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const o$=12;function a$(n,e,t){let r=t;for(let s=1;s<o$;s++)r=r-n(r)/e(r);return r}function Jw(n,e){return n*Math.sqrt(1-e*e)}const l$=["duration","bounce"],c$=["stiffness","damping","mass"];function YS(n,e){return e.some(t=>n[t]!==void 0)}function u$(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!YS(n,c$)&&YS(n,l$)){const t=i$(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function D1({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],i=n[n.length-1],a={done:!1,value:s},{stiffness:l,damping:d,mass:h,duration:f,velocity:g,isResolvedFromDuration:v}=u$({...r,velocity:-ya(r.velocity||0)}),_=g||0,S=d/(2*Math.sqrt(l*h)),x=i-s,E=ya(Math.sqrt(l/h)),P=Math.abs(x)<5;t||(t=P?.01:2),e||(e=P?.005:.5);let R;if(S<1){const M=Jw(E,S);R=N=>{const L=Math.exp(-S*E*N);return i-L*((_+S*E*x)/M*Math.sin(M*N)+x*Math.cos(M*N))}}else if(S===1)R=M=>i-Math.exp(-E*M)*(x+(_+E*x)*M);else{const M=E*Math.sqrt(S*S-1);R=N=>{const L=Math.exp(-S*E*N),B=Math.min(M*N,300);return i-L*((_+S*E*x)*Math.sinh(B)+M*x*Math.cosh(B))/M}}return{calculatedDuration:v&&f||null,next:M=>{const N=R(M);if(v)a.done=M>=f;else{let L=_;M!==0&&(S<1?L=I1(R,M,N):L=0);const B=Math.abs(L)<=t,$=Math.abs(i-N)<=e;a.done=B&&$}return a.value=a.done?i:N,a}}}function XS({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:d,restDelta:h=.5,restSpeed:f}){const g=n[0],v={done:!1,value:g},_=H=>l!==void 0&&H<l||d!==void 0&&H>d,S=H=>l===void 0?d:d===void 0||Math.abs(l-H)<Math.abs(d-H)?l:d;let x=t*e;const E=g+x,P=a===void 0?E:a(E);P!==E&&(x=P-g);const R=H=>-x*Math.exp(-H/r),M=H=>P+R(H),N=H=>{const Y=R(H),ue=M(H);v.done=Math.abs(Y)<=h,v.value=v.done?P:ue};let L,B;const $=H=>{_(v.value)&&(L=H,B=D1({keyframes:[v.value,S(v.value)],velocity:I1(M,H,v.value),damping:s,stiffness:i,restDelta:h,restSpeed:f}))};return $(0),{calculatedDuration:null,next:H=>{let Y=!1;return!B&&L===void 0&&(Y=!0,N(H),$(H)),L!==void 0&&H>L?B.next(H-L):(!Y&&N(H),v)}}}const d$=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Yt.update(e,!0),stop:()=>_a(e),now:()=>_r.isProcessing?_r.timestamp:performance.now()}},QS=2e4;function JS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<QS;)e+=t,r=n.next(e);return e>=QS?1/0:e}const h$={decay:XS,inertia:XS,tween:jv,keyframes:jv,spring:D1};function Fv({autoplay:n=!0,delay:e=0,driver:t=d$,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:g,...v}){let _=1,S=!1,x,E;const P=()=>{E=new Promise(F=>{x=F})};P();let R;const M=h$[s]||jv;let N;M!==jv&&typeof r[0]!="number"&&(N=R1([0,100],r,{clamp:!1}),r=[0,100]);const L=M({...v,keyframes:r});let B;l==="mirror"&&(B=M({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let $="idle",H=null,Y=null,ue=null;L.calculatedDuration===null&&i&&(L.calculatedDuration=JS(L));const{calculatedDuration:oe}=L;let ce=1/0,ae=1/0;oe!==null&&(ce=oe+a,ae=ce*(i+1)-a);let me=0;const W=F=>{if(Y===null)return;_>0&&(Y=Math.min(Y,F)),_<0&&(Y=Math.min(F-ae/_,Y)),H!==null?me=H:me=Math.round(F-Y)*_;const se=me-e*(_>=0?1:-1),ee=_>=0?se<0:se>ae;me=Math.max(se,0),$==="finished"&&H===null&&(me=ae);let Te=me,Me=L;if(i){const He=Math.min(me,ae)/ce;let Ye=Math.floor(He),it=He%1;!it&&He>=1&&(it=1),it===1&&Ye--,Ye=Math.min(Ye,i+1),!!(Ye%2)&&(l==="reverse"?(it=1-it,a&&(it-=a/ce)):l==="mirror"&&(Me=B)),Te=Cl(0,1,it)*ce}const Pe=ee?{done:!1,value:r[0]}:Me.next(Te);N&&(Pe.value=N(Pe.value));let{done:ve}=Pe;!ee&&oe!==null&&(ve=_>=0?me>=ae:me<=0);const Ne=H===null&&($==="finished"||$==="running"&&ve);return g&&g(Pe.value),Ne&&z(),Pe},q=()=>{R&&R.stop(),R=void 0},ne=()=>{$="idle",q(),x(),P(),Y=ue=null},z=()=>{$="finished",f&&f(),q(),x()},re=()=>{if(S)return;R||(R=t(W));const F=R.now();d&&d(),H!==null?Y=F-H:(!Y||$==="finished")&&(Y=F),$==="finished"&&P(),ue=Y,H=null,$="running",R.start()};n&&re();const J={then(F,se){return E.then(F,se)},get time(){return ya(me)},set time(F){F=Jc(F),me=F,H!==null||!R||_===0?H=F:Y=R.now()-F/_},get duration(){const F=L.calculatedDuration===null?JS(L):L.calculatedDuration;return ya(F)},get speed(){return _},set speed(F){F===_||!R||(_=F,J.time=ya(me))},get state(){return $},play:re,pause:()=>{$="paused",H=me},stop:()=>{S=!0,$!=="idle"&&($="idle",h&&h(),ne())},cancel:()=>{ue!==null&&W(ue),ne()},complete:()=>{$="finished"},sample:F=>(Y=0,W(F))};return J}function f$(n){let e;return()=>(e===void 0&&(e=n()),e)}const p$=f$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),m$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),nv=10,g$=2e4,v$=(n,e)=>e.type==="spring"||n==="backgroundColor"||!u1(e.ease);function y$(n,e,{onUpdate:t,onComplete:r,...s}){if(!(p$()&&m$.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,d,h=!1;const f=()=>{d=new Promise(M=>{l=M})};f();let{keyframes:g,duration:v=300,ease:_,times:S}=s;if(v$(e,s)){const M=Fv({...s,repeat:0,delay:0});let N={done:!1,value:g[0]};const L=[];let B=0;for(;!N.done&&B<g$;)N=M.sample(B),L.push(N.value),B+=nv;S=void 0,g=L,v=B-nv,_="linear"}const x=kB(n.owner.current,e,g,{...s,duration:v,ease:_,times:S}),E=()=>{h=!1,x.cancel()},P=()=>{h=!0,Yt.update(E),l(),f()};return x.onfinish=()=>{h||(n.set(TB(g,s)),r&&r(),P())},{then(M,N){return d.then(M,N)},attachTimeline(M){return x.timeline=M,x.onfinish=null,bn},get time(){return ya(x.currentTime||0)},set time(M){x.currentTime=Jc(M)},get speed(){return x.playbackRate},set speed(M){x.playbackRate=M},get duration(){return ya(v)},play:()=>{a||(x.play(),_a(E))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:M}=x;if(M){const N=Fv({...s,autoplay:!1});n.setWithVelocity(N.sample(M-nv).value,N.sample(M).value,nv)}P()},complete:()=>{h||x.finish()},cancel:P}}function w$({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:bn,pause:bn,stop:bn,then:i=>(i(),Promise.resolve()),cancel:bn,complete:bn});return e?Fv({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const b$={type:"spring",stiffness:500,damping:25,restSpeed:10},_$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),x$={type:"keyframes",duration:.8},S$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A$=(n,{keyframes:e})=>e.length>2?x$:au.has(n)?n.startsWith("scale")?_$(e[1]):b$:S$,Zw=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(El.test(e)||e==="0")&&!e.startsWith("url(")),C$=new Set(["brightness","contrast","saturate","opacity"]);function E$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ly)||[];if(!r)return n;const s=t.replace(r,"");let i=C$.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const k$=/([a-z-]*)\(.*?\)/g,eb={...El,getAnimatableNone:n=>{const e=n.match(k$);return e?e.map(E$).join(" "):n}},T$={...GE,color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:eb,WebkitFilter:eb},d_=n=>T$[n];function N1(n,e){let t=d_(n);return t!==eb&&(t=El),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const O1=n=>/^0[^.\s]+$/.test(n);function P$(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||O1(n)}function R$(n,e,t,r){const s=Zw(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const a=r.from!==void 0?r.from:n.get();let l;const d=[];for(let h=0;h<i.length;h++)i[h]===null&&(i[h]=h===0?a:i[h-1]),P$(i[h])&&d.push(h),typeof i[h]=="string"&&i[h]!=="none"&&i[h]!=="0"&&(l=i[h]);if(s&&d.length&&l)for(let h=0;h<d.length;h++){const f=d[h];i[f]=N1(e,l)}return i}function M$({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}function h_(n,e){return n[e]||n.default||n}const I$={skipAnimations:!1},f_=(n,e,t,r={})=>s=>{const i=h_(r,n)||{},a=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Jc(a);const d=R$(e,n,t,i),h=d[0],f=d[d.length-1],g=Zw(n,h),v=Zw(n,f);let _={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:S=>{e.set(S),i.onUpdate&&i.onUpdate(S)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(M$(i)||(_={..._,...A$(n,_)}),_.duration&&(_.duration=Jc(_.duration)),_.repeatDelay&&(_.repeatDelay=Jc(_.repeatDelay)),!g||!v||EB.current||i.type===!1||I$.skipAnimations)return w$(_);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const S=y$(e,n,_);if(S)return S}return Fv(_)};function Bv(n){return!!(ds(n)&&n.add)}const L1=n=>/^\-?\d*\.?\d+$/.test(n);function p_(n,e){n.indexOf(e)===-1&&n.push(e)}function m_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class g_{constructor(){this.subscriptions=[]}add(e){return p_(this.subscriptions,e),()=>m_(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const D$=n=>!isNaN(parseFloat(n));class N${constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:a}=_r;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Yt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Yt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=D$(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new g_);const r=this.events[e].add(t);return e==="change"?()=>{r(),Yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?M1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xh(n,e){return new N$(n,e)}const j1=n=>e=>e.test(n),O$={test:n=>n==="auto",parse:n=>n},F1=[lu,Ze,yo,ml,zF,UF,O$],fp=n=>F1.find(j1(n)),L$=[...F1,Dr,El],j$=n=>L$.find(j1(n));function F$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xh(t))}function B$(n,e){const t=uy(n,e);let{transitionEnd:r={},transition:s={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...r};for(const a in i){const l=nB(i[a]);F$(n,a,l)}}function $$(n,e,t){var r,s;const i=Object.keys(e).filter(l=>!n.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const d=i[l],h=e[d];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(s=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&s!==void 0?s:e[d]),f!=null&&(typeof f=="string"&&(L1(f)||O1(f))?f=parseFloat(f):!j$(f)&&El.test(h)&&(f=N1(d,h)),n.addValue(d,xh(f,{owner:n})),t[d]===void 0&&(t[d]=f),f!==null&&n.setBaseTarget(d,f))}}function U$(n,e){return e?(e[n]||e.default||e).from:void 0}function z$(n,e,t){const r={};for(const s in n){const i=U$(s,e);if(i!==void 0)r[s]=i;else{const a=t.getValue(s);a&&(r[s]=a.get())}}return r}function V$({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function H$(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function B1(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:a,...l}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(i=r);const h=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const g in l){const v=n.getValue(g),_=l[g];if(!v||_===void 0||f&&V$(f,g))continue;const S={delay:t,elapsed:0,...h_(i||{},g)};if(window.HandoffAppearAnimations){const P=n.getProps()[$E];if(P){const R=window.HandoffAppearAnimations(P,g,v,Yt);R!==null&&(S.elapsed=R,S.isHandoff=!0)}}let x=!S.isHandoff&&!H$(v,_);if(S.type==="spring"&&(v.getVelocity()||S.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(f_(g,v,_,n.shouldReduceMotion&&au.has(g)?{type:!1}:S));const E=v.animation;Bv(d)&&(d.add(g),E.then(()=>d.remove(g))),h.push(E)}return a&&Promise.all(h).then(()=>{a&&B$(n,a)}),h}function tb(n,e,t={}){const r=uy(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const i=r?()=>Promise.all(B1(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=s;return W$(n,e,h+d,f,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[d,h]=l==="beforeChildren"?[i,a]:[a,i];return d().then(()=>h())}else return Promise.all([i(),a(t.delay)])}function W$(n,e,t=0,r=0,s=1,i){const a=[],l=(n.variantChildren.size-1)*r,d=s===1?(h=0)=>h*r:(h=0)=>l-h*r;return Array.from(n.variantChildren).sort(q$).forEach((h,f)=>{h.notify("AnimationStart",e),a.push(tb(h,e,{...i,delay:t+d(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function q$(n,e){return n.sortNodePosition(e)}function G$(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>tb(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=tb(n,e,t);else{const s=typeof e=="function"?uy(n,e,t.custom):e;r=Promise.all(B1(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const K$=[...Qb].reverse(),Y$=Qb.length;function X$(n){return e=>Promise.all(e.map(({animation:t,options:r})=>G$(n,t,r)))}function Q$(n){let e=X$(n);const t=Z$();let r=!0;const s=(d,h)=>{const f=uy(n,h);if(f){const{transition:g,transitionEnd:v,..._}=f;d={...d,..._,...v}}return d};function i(d){e=d(n)}function a(d,h){const f=n.getProps(),g=n.getVariantContext(!0)||{},v=[],_=new Set;let S={},x=1/0;for(let P=0;P<Y$;P++){const R=K$[P],M=t[R],N=f[R]!==void 0?f[R]:g[R],L=Hp(N),B=R===h?M.isActive:null;B===!1&&(x=P);let $=N===g[R]&&N!==f[R]&&L;if($&&r&&n.manuallyAnimateOnMount&&($=!1),M.protectedKeys={...S},!M.isActive&&B===null||!N&&!M.prevProp||oy(N)||typeof N=="boolean")continue;let Y=J$(M.prevProp,N)||R===h&&M.isActive&&!$&&L||P>x&&L,ue=!1;const oe=Array.isArray(N)?N:[N];let ce=oe.reduce(s,{});B===!1&&(ce={});const{prevResolvedValues:ae={}}=M,me={...ae,...ce},W=q=>{Y=!0,_.has(q)&&(ue=!0,_.delete(q)),M.needsAnimating[q]=!0};for(const q in me){const ne=ce[q],z=ae[q];if(S.hasOwnProperty(q))continue;let re=!1;Ov(ne)&&Ov(z)?re=!l1(ne,z):re=ne!==z,re?ne!==void 0?W(q):_.add(q):ne!==void 0&&_.has(q)?W(q):M.protectedKeys[q]=!0}M.prevProp=N,M.prevResolvedValues=ce,M.isActive&&(S={...S,...ce}),r&&n.blockInitialAnimation&&(Y=!1),Y&&(!$||ue)&&v.push(...oe.map(q=>({animation:q,options:{type:R,...d}})))}if(_.size){const P={};_.forEach(R=>{const M=n.getBaseTarget(R);M!==void 0&&(P[R]=M)}),v.push({animation:P})}let E=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(v):Promise.resolve()}function l(d,h,f){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(_=>{var S;return(S=_.animationState)===null||S===void 0?void 0:S.setActive(d,h)}),t[d].isActive=h;const v=a(f,d);for(const _ in t)t[_].protectedKeys={};return v}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>t}}function J$(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!l1(e,n):!1}function Fc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z$(){return{animate:Fc(!0),whileInView:Fc(),whileHover:Fc(),whileTap:Fc(),whileDrag:Fc(),whileFocus:Fc(),exit:Fc()}}class e3 extends Il{constructor(e){super(e),e.animationState||(e.animationState=Q$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),oy(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let t3=0;class n3 extends Il{constructor(){super(...arguments),this.id=t3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const r3={animation:{Feature:e3},exit:{Feature:n3}},ZS=(n,e)=>Math.abs(n-e);function s3(n,e){const t=ZS(n.x,e.x),r=ZS(n.y,e.y);return Math.sqrt(t**2+r**2)}class $1{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=dw(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,_=s3(g.offset,{x:0,y:0})>=3;if(!v&&!_)return;const{point:S}=g,{timestamp:x}=_r;this.history.push({...S,timestamp:x});const{onStart:E,onMove:P}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=uw(v,this.transformPagePoint),Yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:_,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=dw(g.type==="pointercancel"?this.lastMoveEventInfo:uw(v,this.transformPagePoint),this.history);this.startEvent&&_&&_(g,E),S&&S(g,E)},!r1(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const a=cy(e),l=uw(a,this.transformPagePoint),{point:d}=l,{timestamp:h}=_r;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,dw(l,this.history)),this.removeListeners=xl(va(this.contextWindow,"pointermove",this.handlePointerMove),va(this.contextWindow,"pointerup",this.handlePointerUp),va(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function uw(n,e){return e?{point:e(n.point)}:n}function eA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function dw({point:n},e){return{point:n,delta:eA(n,U1(e)),offset:eA(n,i3(e)),velocity:o3(e,.1)}}function i3(n){return n[0]}function U1(n){return n[n.length-1]}function o3(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=U1(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Jc(e)));)t--;if(!r)return{x:0,y:0};const i=ya(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ms(n){return n.max-n.min}function nb(n,e=0,t=.01){return Math.abs(n-e)<=t}function tA(n,e,t,r=.5){n.origin=r,n.originPoint=cn(e.min,e.max,n.origin),n.scale=Ms(t)/Ms(e),(nb(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=cn(t.min,t.max,n.origin)-n.originPoint,(nb(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Dp(n,e,t,r){tA(n.x,e.x,t.x,r?r.originX:void 0),tA(n.y,e.y,t.y,r?r.originY:void 0)}function nA(n,e,t){n.min=t.min+e.min,n.max=n.min+Ms(e)}function a3(n,e,t){nA(n.x,e.x,t.x),nA(n.y,e.y,t.y)}function rA(n,e,t){n.min=e.min-t.min,n.max=n.min+Ms(e)}function Np(n,e,t){rA(n.x,e.x,t.x),rA(n.y,e.y,t.y)}function l3(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cn(t,n,r.max):Math.min(n,t)),n}function sA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function c3(n,{top:e,left:t,bottom:r,right:s}){return{x:sA(n.x,t,s),y:sA(n.y,e,r)}}function iA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function u3(n,e){return{x:iA(n.x,e.x),y:iA(n.y,e.y)}}function d3(n,e){let t=.5;const r=Ms(n),s=Ms(e);return s>r?t=qp(e.min,e.max-r,n.min):r>s&&(t=qp(n.min,n.max-s,e.min)),Cl(0,1,t)}function h3(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const rb=.35;function f3(n=rb){return n===!1?n=0:n===!0&&(n=rb),{x:oA(n,"left","right"),y:oA(n,"top","bottom")}}function oA(n,e,t){return{min:aA(n,e),max:aA(n,t)}}function aA(n,e){return typeof n=="number"?n:n[e]||0}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),dh=()=>({x:lA(),y:lA()}),cA=()=>({min:0,max:0}),Tn=()=>({x:cA(),y:cA()});function Zs(n){return[n("x"),n("y")]}function z1({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function p3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function m3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function hw(n){return n===void 0||n===1}function sb({scale:n,scaleX:e,scaleY:t}){return!hw(n)||!hw(e)||!hw(t)}function Uc(n){return sb(n)||V1(n)||n.z||n.rotate||n.rotateX||n.rotateY}function V1(n){return uA(n.x)||uA(n.y)}function uA(n){return n&&n!=="0%"}function $v(n,e,t){const r=n-t,s=e*r;return t+s}function dA(n,e,t,r,s){return s!==void 0&&(n=$v(n,s,r)),$v(n,t,r)+e}function ib(n,e=0,t=1,r,s){n.min=dA(n.min,e,t,r,s),n.max=dA(n.max,e,t,r,s)}function H1(n,{x:e,y:t}){ib(n.x,e.translate,e.scale,e.originPoint),ib(n.y,t.translate,t.scale,t.originPoint)}function g3(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,a;for(let l=0;l<s;l++){i=t[l],a=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&hh(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,H1(n,a)),r&&Uc(i.latestValues)&&hh(n,i.latestValues))}e.x=hA(e.x),e.y=hA(e.y)}function hA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function vl(n,e){n.min=n.min+e,n.max=n.max+e}function fA(n,e,[t,r,s]){const i=e[s]!==void 0?e[s]:.5,a=cn(n.min,n.max,i);ib(n,e[t],e[r],a,e.scale)}const v3=["x","scaleX","originX"],y3=["y","scaleY","originY"];function hh(n,e){fA(n.x,e,v3),fA(n.y,e,y3)}function W1(n,e){return z1(m3(n.getBoundingClientRect(),e))}function w3(n,e,t){const r=W1(n,t),{scroll:s}=e;return s&&(vl(r.x,s.offset.x),vl(r.y,s.offset.y)),r}const q1=({current:n})=>n?n.ownerDocument.defaultView:null,b3=new WeakMap;class _3{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(cy(f,"page").point)},i=(f,g)=>{const{drag:v,dragPropagation:_,onDragStart:S}=this.getProps();if(v&&!_&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=i1(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zs(E=>{let P=this.getAxisMotionValue(E).get()||0;if(yo.test(P)){const{projection:R}=this.visualElement;if(R&&R.layout){const M=R.layout.layoutBox[E];M&&(P=Ms(M)*(parseFloat(P)/100))}}this.originPoint[E]=P}),S&&Yt.update(()=>S(f,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,g)=>{const{dragPropagation:v,dragDirectionLock:_,onDirectionLock:S,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:E}=g;if(_&&this.currentDirection===null){this.currentDirection=x3(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),x&&x(f,g)},l=(f,g)=>this.stop(f,g),d=()=>Zs(f=>{var g;return this.getAnimationState(f)==="paused"&&((g=this.getAxisMotionValue(f).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $1(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:q1(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Yt.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!rv(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=l3(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&ch(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=c3(s.layoutBox,t):this.constraints=!1,this.elastic=f3(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Zs(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=h3(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ch(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=w3(r,s.root,this.visualElement.getTransformPagePoint());let a=u3(s.layout.layoutBox,i);if(t){const l=t(p3(a));this.hasMutatedConstraints=!!l,l&&(a=z1(l))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=Zs(f=>{if(!rv(f,t,this.currentDirection))return;let g=d&&d[f]||{};a&&(g={min:0,max:0});const v=s?200:1e6,_=s?40:1e7,S={type:"inertia",velocity:r?e[f]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...i,...g};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(f_(e,r,0,t))}stopAnimation(){Zs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zs(t=>{const{drag:r}=this.getProps();if(!rv(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[t];i.set(e[t]-cn(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ch(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Zs(a=>{const l=this.getAxisMotionValue(a);if(l){const d=l.get();s[a]=d3({min:d,max:d},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zs(a=>{if(!rv(a,e,null))return;const l=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];l.set(cn(d,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;b3.set(this.visualElement,this);const e=this.visualElement.current,t=va(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ch(d)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const a=ga(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Zs(f=>{const g=this.getAxisMotionValue(f);g&&(this.originPoint[f]+=d[f].translate,g.set(g.get()+d[f].translate))}),this.visualElement.render())});return()=>{a(),t(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=rb,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function rv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function x3(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class S3 extends Il{constructor(e){super(e),this.removeGroupControls=bn,this.removeListeners=bn,this.controls=new _3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bn}unmount(){this.removeGroupControls(),this.removeListeners()}}const pA=n=>(e,t)=>{n&&Yt.update(()=>n(e,t))};class A3 extends Il{constructor(){super(...arguments),this.removePointerDownListener=bn}onPointerDown(e){this.session=new $1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:q1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:pA(e),onStart:pA(t),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Yt.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=va(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function C3(){const n=A.useContext(sy);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=A.useId();return A.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const xv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const pp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ze.test(n))n=parseFloat(n);else return n;const t=mA(n,e.target.x),r=mA(n,e.target.y);return`${t}% ${r}%`}},E3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=El.parse(n);if(s.length>5)return r;const i=El.createTransformer(n),a=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;s[0+a]/=l,s[1+a]/=d;const h=cn(l,d,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),i(s)}};class k3 extends ot.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;NF(T3),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),xv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Yt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G1(n){const[e,t]=C3(),r=A.useContext(Zb);return ot.createElement(k3,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(zE),isPresent:e,safeToRemove:t})}const T3={borderRadius:{...pp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pp,borderTopRightRadius:pp,borderBottomLeftRadius:pp,borderBottomRightRadius:pp,boxShadow:E3},K1=["TopLeft","TopRight","BottomLeft","BottomRight"],P3=K1.length,gA=n=>typeof n=="string"?parseFloat(n):n,vA=n=>typeof n=="number"||Ze.test(n);function R3(n,e,t,r,s,i){s?(n.opacity=cn(0,t.opacity!==void 0?t.opacity:1,M3(r)),n.opacityExit=cn(e.opacity!==void 0?e.opacity:1,0,I3(r))):i&&(n.opacity=cn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<P3;a++){const l=`border${K1[a]}Radius`;let d=yA(e,l),h=yA(t,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||vA(d)===vA(h)?(n[l]=Math.max(cn(gA(d),gA(h),r),0),(yo.test(h)||yo.test(d))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=cn(e.rotate||0,t.rotate||0,r))}function yA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const M3=Y1(0,.5,v1),I3=Y1(.5,.95,bn);function Y1(n,e,t){return r=>r<n?0:r>e?1:t(qp(n,e,r))}function wA(n,e){n.min=e.min,n.max=e.max}function Qs(n,e){wA(n.x,e.x),wA(n.y,e.y)}function bA(n,e,t,r,s){return n-=e,n=$v(n,1/t,r),s!==void 0&&(n=$v(n,1/s,r)),n}function D3(n,e=0,t=1,r=.5,s,i=n,a=n){if(yo.test(e)&&(e=parseFloat(e),e=cn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=cn(i.min,i.max,r);n===i&&(l-=e),n.min=bA(n.min,e,t,l,s),n.max=bA(n.max,e,t,l,s)}function _A(n,e,[t,r,s],i,a){D3(n,e[t],e[r],e[s],e.scale,i,a)}const N3=["x","scaleX","originX"],O3=["y","scaleY","originY"];function xA(n,e,t,r){_A(n.x,e,N3,t?t.x:void 0,r?r.x:void 0),_A(n.y,e,O3,t?t.y:void 0,r?r.y:void 0)}function SA(n){return n.translate===0&&n.scale===1}function X1(n){return SA(n.x)&&SA(n.y)}function L3(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function Q1(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function AA(n){return Ms(n.x)/Ms(n.y)}class j3{constructor(){this.members=[]}add(e){p_(this.members,e),e.scheduleRender()}remove(e){if(m_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CA(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:f}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const F3=(n,e)=>n.depth-e.depth;class B3{constructor(){this.children=[],this.isDirty=!1}add(e){p_(this.children,e),this.isDirty=!0}remove(e){m_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(F3),this.isDirty=!1,this.children.forEach(e)}}function $3(n,e){const t=performance.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&(_a(r),n(i-e))};return Yt.read(r,!0),()=>_a(r)}function U3(n){window.MotionDebug&&window.MotionDebug.record(n)}function z3(n){return n instanceof SVGElement&&n.tagName!=="svg"}function V3(n,e,t){const r=ds(n)?n:xh(n);return r.start(f_("",r,e,t)),r.animation}const EA=["","X","Y","Z"],H3={visibility:"hidden"},kA=1e3;let W3=0;const zc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function J1({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e?.()){this.id=W3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zc.totalNodes=zc.resolvedTargetDeltas=zc.recalculatedProjection=0,this.nodes.forEach(K3),this.nodes.forEach(Z3),this.nodes.forEach(eU),this.nodes.forEach(Y3),U3(zc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new B3)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new g_),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const d=this.eventHandlers.get(a);d&&d.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=z3(a),this.instance=a;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=$3(v,250),xv.hasAnimatedSinceResize&&(xv.hasAnimatedSinceResize=!1,this.nodes.forEach(PA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||iU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=f.getProps(),R=!this.targetLayout||!Q1(this.targetLayout,S)||_,M=!v&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||v&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,M);const N={...h_(x,"layout"),onPlay:E,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else v||PA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tU),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const g=this.path[f];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TA);return}this.isUpdating||this.nodes.forEach(Q3),this.isUpdating=!1,this.nodes.forEach(J3),this.nodes.forEach(q3),this.nodes.forEach(G3),this.clearAllSnapshots();const l=performance.now();_r.delta=Cl(0,1e3/60,l-_r.timestamp),_r.timestamp=l,_r.isProcessing=!0,nw.update.process(_r),nw.preRender.process(_r),nw.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(X3),this.sharedNodes.forEach(nU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!X1(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(l||Uc(this.latestValues)||f)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return a&&(d=this.removeTransform(d)),oU(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Tn();const l=a.measureViewportBox(),{scroll:d}=this.root;return d&&(vl(l.x,d.offset.x),vl(l.y,d.offset.y)),l}removeElementScroll(a){const l=Tn();Qs(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:g}=h;if(h!==this.root&&f&&g.layoutScroll){if(f.isRoot){Qs(l,a);const{scroll:v}=this.root;v&&(vl(l.x,-v.offset.x),vl(l.y,-v.offset.y))}vl(l.x,f.offset.x),vl(l.y,f.offset.y)}}return l}applyTransform(a,l=!1){const d=Tn();Qs(d,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&hh(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Uc(f.latestValues)&&hh(d,f.latestValues)}return Uc(this.latestValues)&&hh(d,this.latestValues),d}removeTransform(a){const l=Tn();Qs(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Uc(h.latestValues))continue;sb(h.latestValues)&&h.updateSnapshot();const f=Tn(),g=h.measurePageBox();Qs(f,g),xA(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Uc(this.latestValues)&&xA(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Np(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qs(this.target,this.layout.layoutBox),H1(this.target,this.targetDelta)):Qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Np(this.relativeTargetOrigin,this.target,_.target),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sb(this.parent.latestValues)||V1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Qs(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,_=this.treeScale.y;g3(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:S}=l;if(!S){this.projectionTransform&&(this.projectionDelta=dh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=dh(),this.projectionDeltaWithTransform=dh());const x=this.projectionTransform;Dp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.projectionTransform=CA(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==_)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),zc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},g=dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Tn(),_=d?d.source:void 0,S=this.layout?this.layout.source:void 0,x=_!==S,E=this.getStack(),P=!E||E.members.length<=1,R=!!(x&&!P&&this.options.crossfade===!0&&!this.path.some(sU));this.animationProgress=0;let M;this.mixTargetDelta=N=>{const L=N/1e3;RA(g.x,a.x,L),RA(g.y,a.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Np(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rU(this.relativeTarget,this.relativeTargetOrigin,v,L),M&&L3(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Tn()),Qs(M,this.relativeTarget)),x&&(this.animationValues=f,R3(f,h,this.latestValues,L,R,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yt.update(()=>{xv.hasAnimatedSinceResize=!0,this.currentAnimation=V3(0,kA,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=a;if(!(!l||!d||!h)){if(this!==a&&this.layout&&h&&Z1(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Tn();const g=Ms(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=Ms(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Qs(l,d),hh(l,f),Dp(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new j3),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const h={};for(let f=0;f<EA.length;f++){const g="rotate"+EA[f];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const f in h)a.setStaticValue(f,h[f]);a.scheduleRender()}getProjectionStyles(a){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return H3;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=_v(a?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=_v(a?.pointerEvents)||""),this.hasProjected&&!Uc(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=CA(this.projectionDeltaWithTransform,this.treeScale,v),f&&(h.transform=f(v,h.transform));const{x:_,y:S}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Dv){if(v[x]===void 0)continue;const{correct:E,applyTo:P}=Dv[x],R=h.transform==="none"?v[x]:E(v[x],g);if(P){const M=P.length;for(let N=0;N<M;N++)h[P[N]]=R}else h[x]=R}return this.options.layoutId&&(h.pointerEvents=g===this?_v(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(TA),this.root.sharedNodes.clear()}}}function q3(n){n.updateLayout()}function G3(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,a=t.source!==n.layout.source;i==="size"?Zs(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],_=Ms(v);v.min=r[g].min,v.max=v.min+_}):Z1(i,t.layoutBox,r)&&Zs(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],_=Ms(r[g]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+_)});const l=dh();Dp(l,r,t.layoutBox);const d=dh();a?Dp(d,n.applyTransform(s,!0),t.measuredBox):Dp(d,r,t.layoutBox);const h=!X1(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:_}=g;if(v&&_){const S=Tn();Np(S,t.layoutBox,v.layoutBox);const x=Tn();Np(x,r,_.layoutBox),Q1(S,x)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function K3(n){zc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Y3(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function X3(n){n.clearSnapshot()}function TA(n){n.clearMeasurements()}function Q3(n){n.isLayoutDirty=!1}function J3(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function PA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Z3(n){n.resolveTargetDelta()}function eU(n){n.calcProjection()}function tU(n){n.resetRotation()}function nU(n){n.removeLeadSnapshot()}function RA(n,e,t){n.translate=cn(e.translate,0,t),n.scale=cn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function MA(n,e,t,r){n.min=cn(e.min,t.min,r),n.max=cn(e.max,t.max,r)}function rU(n,e,t,r){MA(n.x,e.x,t.x,r),MA(n.y,e.y,t.y,r)}function sU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const iU={duration:.45,ease:[.4,0,.1,1]},IA=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),DA=IA("applewebkit/")&&!IA("chrome/")?Math.round:bn;function NA(n){n.min=DA(n.min),n.max=DA(n.max)}function oU(n){NA(n.x),NA(n.y)}function Z1(n,e,t){return n==="position"||n==="preserve-aspect"&&!nb(AA(e),AA(t),.2)}const aU=J1({attachResizeListener:(n,e)=>ga(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fw={current:void 0},ek=J1({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fw.current){const n=new aU({});n.mount(window),n.setOptions({layoutScroll:!0}),fw.current=n}return fw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),lU={pan:{Feature:A3},drag:{Feature:S3,ProjectionNode:ek,MeasureLayout:G1}},cU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function uU(n){const e=cU.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function ob(n,e,t=1){const[r,s]=uU(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return L1(a)?parseFloat(a):a}else return Yw(s)?ob(s,e,t+1):s}function dU(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const i=s.get();if(!Yw(i))return;const a=ob(i,r);a&&s.set(a)});for(const s in e){const i=e[s];if(!Yw(i))continue;const a=ob(i,r);a&&(e[s]=a,t||(t={}),t[s]===void 0&&(t[s]=i))}return{target:e,transitionEnd:t}}const hU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tk=n=>hU.has(n),fU=n=>Object.keys(n).some(tk),OA=n=>n===lu||n===Ze,LA=(n,e)=>parseFloat(n.split(", ")[e]),jA=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return LA(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?LA(i[1],n):0}},pU=new Set(["x","y","z"]),mU=cm.filter(n=>!pU.has(n));function gU(n){const e=[];return mU.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Sh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:jA(4,13),y:jA(5,14)};Sh.translateX=Sh.x;Sh.translateY=Sh.y;const vU=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{l[h]=Sh[h](r,i)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(l[h]),n[h]=Sh[h](d,i)}),n},yU=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(tk);let i=[],a=!1;const l=[];if(s.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let f=t[d],g=fp(f);const v=e[d];let _;if(Ov(v)){const S=v.length,x=v[0]===null?1:0;f=v[x],g=fp(f);for(let E=x;E<S&&v[E]!==null;E++)_?a_(fp(v[E])===_):_=fp(v[E])}else _=fp(v);if(g!==_)if(OA(g)&&OA(_)){const S=h.get();typeof S=="string"&&h.set(parseFloat(S)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&_===Ze&&(e[d]=v.map(parseFloat))}else g?.transform&&_?.transform&&(f===0||v===0)?f===0?h.set(_.transform(f)):e[d]=g.transform(v):(a||(i=gU(n),a=!0),l.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,h=vU(e,n,l);return i.length&&i.forEach(([f,g])=>{n.getValue(f).set(g)}),n.render(),iy&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function wU(n,e,t,r){return fU(e)?yU(n,e,t,r):{target:e,transitionEnd:r}}const bU=(n,e,t,r)=>{const s=dU(n,e,r);return e=s.target,r=s.transitionEnd,wU(n,e,t,r)},ab={current:null},nk={current:!1};function _U(){if(nk.current=!0,!!iy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>ab.current=n.matches;n.addListener(e),e()}else ab.current=!1}function xU(n,e,t){const{willChange:r}=e;for(const s in e){const i=e[s],a=t[s];if(ds(i))n.addValue(s,i),Bv(r)&&r.add(s);else if(ds(a))n.addValue(s,xh(i,{owner:n})),Bv(r)&&r.remove(s);else if(a!==i)if(n.hasValue(s)){const l=n.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=n.getStaticValue(s);n.addValue(s,xh(l!==void 0?l:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const FA=new WeakMap,rk=Object.keys(Wp),SU=rk.length,BA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AU=Jb.length;class CU{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Yt.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=ay(t),this.isVariantNode=UE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const g in f){const v=f[g];l[g]!==void 0&&ds(v)&&(v.set(l[g],!1),Bv(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,FA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),nk.current||_U(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ab.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FA.delete(this.current),this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=au.has(e),s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Yt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,i){let a,l;for(let d=0;d<SU;d++){const h=rk[d],{isEnabled:f,Feature:g,ProjectionNode:v,MeasureLayout:_}=Wp[h];v&&(a=v),f(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),_&&(l=_))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:f,dragConstraints:g,layoutScroll:v,layoutRoot:_}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!f||g&&ch(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:i,layoutScroll:v,layoutRoot:_})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<BA.length;r++){const s=BA[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=xU(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<AU;r++){const s=Jb[r],i=this.props[s];(Hp(i)||i===!1)&&(t[s]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=xh(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=o_(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ds(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new g_),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class sk extends CU{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},i){let a=z$(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),a&&(a=s(a))),i){$$(this,r,a);const l=bU(this,r,a,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function EU(n){return window.getComputedStyle(n)}class kU extends sk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(au.has(t)){const r=d_(t);return r&&r.default||0}else{const r=EU(e),s=(WE(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return W1(e,t)}build(e,t,r,s){t_(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return i_(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ds(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){QE(e,t,r,s)}}class TU extends sk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(au.has(t)){const r=d_(t);return r&&r.default||0}return t=JE.has(t)?t:Xb(t),e.getAttribute(t)}measureInstanceViewportBox(){return Tn()}scrapeMotionValuesFromProps(e,t){return e1(e,t)}build(e,t,r,s){r_(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){ZE(e,t,r,s)}mount(e){this.isSVGTag=s_(e.tagName),super.mount(e)}}const PU=(n,e)=>e_(n)?new TU(e,{enableHardwareAcceleration:!1}):new kU(e,{enableHardwareAcceleration:!0}),RU={layout:{ProjectionNode:ek,MeasureLayout:G1}},MU={...r3,...SB,...lU,...RU},Zn=IF((n,e)=>uB(n,e,MU,PU));function ik(){const n=A.useRef(!1);return Yb(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function IU(){const n=ik(),[e,t]=A.useState(0),r=A.useCallback(()=>{n.current&&t(e+1)},[e]);return[A.useCallback(()=>Yt.postRender(r),[r]),e]}class DU extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function NU({children:n,isPresent:e}){const t=A.useId(),r=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:d}=s.current;if(e||!r.current||!i||!a)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),A.createElement(DU,{isPresent:e,childRef:r,sizeRef:s},A.cloneElement(n,{ref:r}))}const pw=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=t1(OU),d=A.useId(),h=A.useMemo(()=>({id:d,initial:e,isPresent:t,custom:s,onExitComplete:f=>{l.set(f,!0);for(const g of l.values())if(!g)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),i?void 0:[t]);return A.useMemo(()=>{l.forEach((f,g)=>l.set(g,!1))},[t]),A.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),a==="popLayout"&&(n=A.createElement(NU,{isPresent:t},n)),A.createElement(sy.Provider,{value:h},n)};function OU(){return new Map}function LU(n){return A.useEffect(()=>()=>n(),[])}const Vc=n=>n.key||"";function jU(n,e){n.forEach(t=>{const r=Vc(t);e.set(r,t)})}function FU(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const Oi=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=A.useContext(Zb).forceRender||IU()[0],d=ik(),h=FU(n);let f=h;const g=A.useRef(new Map).current,v=A.useRef(f),_=A.useRef(new Map).current,S=A.useRef(!0);if(Yb(()=>{S.current=!1,jU(h,_),v.current=f}),LU(()=>{S.current=!0,_.clear(),g.clear()}),S.current)return A.createElement(A.Fragment,null,f.map(R=>A.createElement(pw,{key:Vc(R),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:a},R)));f=[...f];const x=v.current.map(Vc),E=h.map(Vc),P=x.length;for(let R=0;R<P;R++){const M=x[R];E.indexOf(M)===-1&&!g.has(M)&&g.set(M,void 0)}return a==="wait"&&g.size&&(f=[]),g.forEach((R,M)=>{if(E.indexOf(M)!==-1)return;const N=_.get(M);if(!N)return;const L=x.indexOf(M);let B=R;if(!B){const $=()=>{g.delete(M);const H=Array.from(_.keys()).filter(Y=>!E.includes(Y));if(H.forEach(Y=>_.delete(Y)),v.current=h.filter(Y=>{const ue=Vc(Y);return ue===M||H.includes(ue)}),!g.size){if(d.current===!1)return;l(),r&&r()}};B=A.createElement(pw,{key:Vc(N),isPresent:!1,onExitComplete:$,custom:e,presenceAffectsLayout:i,mode:a},N),g.set(M,B)}f.splice(L,0,B)}),f=f.map(R=>{const M=R.key;return g.has(M)?R:A.createElement(pw,{key:Vc(R),isPresent:!0,presenceAffectsLayout:i,mode:a},R)}),A.createElement(A.Fragment,null,g.size?f:f.map(R=>A.cloneElement(R)))},BU=({children:n})=>{const{user:e,loadingAuth:t,settings:r}=hs(),s=Fi(),[i,a]=A.useState({loading:!0,enabled:!1,message:""});if(A.useEffect(()=>{t||(async()=>{if(!e){a({loading:!1,enabled:!1,message:""});return}try{const{data:h,error:f}=await Se.from("system_status").select("maintenance_mode_enabled, maintenance_message").eq("id",1).single();if(f){console.error("Erro ao verificar modo de manuteno:",f),a({loading:!1,enabled:!1,message:""});return}a({loading:!1,enabled:h.maintenance_mode_enabled,message:h.maintenance_message})}catch{a({loading:!1,enabled:!1,message:""})}})()},[t,e]),t||i.loading)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background dark:bg-background",children:y.jsx(Zn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-customPurple dark:border-customGreen border-t-transparent rounded-full"})});const l=r?.role==="ADMIN";return i.enabled&&!l?y.jsx(Up,{to:"/manutencao",state:{message:i.message},replace:!0}):e?n:y.jsx(Up,{to:"/login",state:{from:s},replace:!0})};var $U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tt=(n,e)=>{const t=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...d},h)=>A.createElement("svg",{ref:h,...$U,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${UU(n)}`,...d},[...e.map(([f,g])=>A.createElement(f,g)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t},zU=tt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),VU=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ok=tt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),ak=tt("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),Gp=tt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Op=tt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),lk=tt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),HU=tt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),WU=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),v_=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),qU=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),GU=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ck=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),KU=tt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),uk=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Kp=tt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),YU=tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),XU=tt("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),lb=tt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),y_=tt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),dk=tt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),QU=tt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),w_=tt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),JU=tt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Ah=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ZU=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),hk=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fk=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ez=tt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),tz=tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),pk=tt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),b_=tt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Yp=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$A=tt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),nz=tt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),mk=tt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),rz=tt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),sz=tt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),__=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),gk=tt("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]),iz=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vk=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),oz=tt("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),Xp=tt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),az=tt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),cu=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function yk(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=yk(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function wk(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=yk(n))&&(r&&(r+=" "),r+=e);return r}function lz(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=bk(e))&&(r&&(r+=" "),r+=t);return r}function bk(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=bk(n[r]))&&(t&&(t+=" "),t+=e);return t}var x_="-";function cz(n){var e=dz(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(l){var d=l.split(x_);return d[0]===""&&d.length!==1&&d.shift(),_k(d,e)||uz(l)}function a(l,d){var h=t[l]||[];return d&&s[l]?[].concat(h,s[l]):h}return{getClassGroupId:i,getConflictingClassGroupIds:a}}function _k(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),s=r?_k(n.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=n.join(x_);return e.validators.find(function(a){var l=a.validator;return l(i)})?.classGroupId}}var UA=/^\[(.+)\]$/;function uz(n){if(UA.test(n)){var e=UA.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function dz(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},s=fz(Object.entries(n.classGroups),t);return s.forEach(function(i){var a=i[0],l=i[1];cb(l,r,a,e)}),r}function cb(n,e,t,r){n.forEach(function(s){if(typeof s=="string"){var i=s===""?e:zA(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(hz(s)){cb(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(function(a){var l=a[0],d=a[1];cb(d,zA(e,l),t,r)})})}function zA(n,e){var t=n;return e.split(x_).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function hz(n){return n.isThemeGetter}function fz(n,e){return e?n.map(function(t){var r=t[0],s=t[1],i=s.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var d=l[0],h=l[1];return[e+d,h]})):a});return[r,i]}):n}function pz(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function s(i,a){t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return s(a,l),l},set:function(a,l){t.has(a)?t.set(a,l):s(a,l)}}}var xk="!";function mz(n){var e=n.separator||":",t=e.length===1,r=e[0],s=e.length;return function(a){for(var l=[],d=0,h=0,f,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+s)===e)){l.push(a.slice(h,g)),h=g+s;continue}if(v==="/"){f=g;continue}}v==="["?d++:v==="]"&&d--}var _=l.length===0?a:a.substring(h),S=_.startsWith(xk),x=S?_.substring(1):_,E=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:E}}}function gz(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function vz(n){return{cache:pz(n.cacheSize),splitModifiers:mz(n),...cz(n)}}var yz=/\s+/;function wz(n,e){var t=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(yz).map(function(a){var l=t(a),d=l.modifiers,h=l.hasImportantModifier,f=l.baseClassName,g=l.maybePostfixModifierPosition,v=r(g?f.substring(0,g):f),_=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(f),!v)return{isTailwindClass:!1,originalClassName:a};_=!1}var S=gz(d).join(":"),x=h?S+xk:S;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:_}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,f=l+d;return i.has(f)?!1:(i.add(f),s(d,h).forEach(function(g){return i.add(l+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function bz(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,s,i,a=l;function l(h){var f=e[0],g=e.slice(1),v=g.reduce(function(_,S){return S(_)},f());return r=vz(v),s=r.cache.get,i=r.cache.set,a=d,d(h)}function d(h){var f=s(h);if(f)return f;var g=wz(h,r);return i(h,g),g}return function(){return a(lz.apply(null,arguments))}}function Zt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var Sk=/^\[(?:([a-z-]+):)?(.+)\]$/i,_z=/^\d+\/\d+$/,xz=new Set(["px","full","screen"]),Sz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Az=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ri(n){return Kc(n)||xz.has(n)||_z.test(n)||ub(n)}function ub(n){return uu(n,"length",Mz)}function Ez(n){return uu(n,"size",Ak)}function kz(n){return uu(n,"position",Ak)}function Tz(n){return uu(n,"url",Iz)}function sv(n){return uu(n,"number",Kc)}function Kc(n){return!Number.isNaN(Number(n))}function Pz(n){return n.endsWith("%")&&Kc(n.slice(0,-1))}function mp(n){return VA(n)||uu(n,"number",VA)}function yt(n){return Sk.test(n)}function gp(){return!0}function pl(n){return Sz.test(n)}function Rz(n){return uu(n,"",Dz)}function uu(n,e,t){var r=Sk.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function Mz(n){return Az.test(n)}function Ak(){return!1}function Iz(n){return n.startsWith("url(")}function VA(n){return Number.isInteger(Number(n))}function Dz(n){return Cz.test(n)}function Nz(){var n=Zt("colors"),e=Zt("spacing"),t=Zt("blur"),r=Zt("brightness"),s=Zt("borderColor"),i=Zt("borderRadius"),a=Zt("borderSpacing"),l=Zt("borderWidth"),d=Zt("contrast"),h=Zt("grayscale"),f=Zt("hueRotate"),g=Zt("invert"),v=Zt("gap"),_=Zt("gradientColorStops"),S=Zt("gradientColorStopPositions"),x=Zt("inset"),E=Zt("margin"),P=Zt("opacity"),R=Zt("padding"),M=Zt("saturate"),N=Zt("scale"),L=Zt("sepia"),B=Zt("skew"),$=Zt("space"),H=Zt("translate"),Y=function(){return["auto","contain","none"]},ue=function(){return["auto","hidden","clip","visible","scroll"]},oe=function(){return["auto",yt,e]},ce=function(){return[yt,e]},ae=function(){return["",Ri]},me=function(){return["auto",Kc,yt]},W=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},ne=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},z=function(){return["start","end","center","between","around","evenly","stretch"]},re=function(){return["","0",yt]},J=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},F=function(){return[Kc,sv]},se=function(){return[Kc,yt]};return{cacheSize:500,theme:{colors:[gp],spacing:[Ri],blur:["none","",pl,yt],brightness:F(),borderColor:[n],borderRadius:["none","","full",pl,yt],borderSpacing:ce(),borderWidth:ae(),contrast:F(),grayscale:re(),hueRotate:se(),invert:re(),gap:ce(),gradientColorStops:[n],gradientColorStopPositions:[Pz,ub],inset:oe(),margin:oe(),opacity:F(),padding:ce(),saturate:F(),scale:F(),sepia:re(),skew:se(),space:ce(),translate:ce()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[pl]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(W(),[yt])}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:Y()}],"overscroll-x":[{"overscroll-x":Y()}],"overscroll-y":[{"overscroll-y":Y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",mp]}],basis:[{basis:oe()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",mp]}],"grid-cols":[{"grid-cols":[gp]}],"col-start-end":[{col:["auto",{span:["full",mp]},yt]}],"col-start":[{"col-start":me()}],"col-end":[{"col-end":me()}],"grid-rows":[{"grid-rows":[gp]}],"row-start-end":[{row:["auto",{span:[mp]},yt]}],"row-start":[{"row-start":me()}],"row-end":[{"row-end":me()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(z())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(z(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(z(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[R]}],px:[{px:[R]}],py:[{py:[R]}],ps:[{ps:[R]}],pe:[{pe:[R]}],pt:[{pt:[R]}],pr:[{pr:[R]}],pb:[{pb:[R]}],pl:[{pl:[R]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",yt,e]}],"min-w":[{"min-w":["min","max","fit",yt,Ri]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[pl]},pl,yt]}],h:[{h:[yt,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",yt,Ri]}],"max-h":[{"max-h":[yt,e,"min","max","fit"]}],"font-size":[{text:["base",pl,ub]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sv]}],"font-family":[{font:[gp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",Kc,sv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yt,Ri]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ri]}],"underline-offset":[{"underline-offset":["auto",yt,Ri]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:ce()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(W(),[kz])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ez]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Tz]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[yt,Ri]}],"outline-w":[{outline:[Ri]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[Ri]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",pl,Rz]}],"shadow-color":[{shadow:[gp]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":ne()}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",pl,yt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[g]}],saturate:[{saturate:[M]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[mp,yt]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ce()}],"scroll-mx":[{"scroll-mx":ce()}],"scroll-my":[{"scroll-my":ce()}],"scroll-ms":[{"scroll-ms":ce()}],"scroll-me":[{"scroll-me":ce()}],"scroll-mt":[{"scroll-mt":ce()}],"scroll-mr":[{"scroll-mr":ce()}],"scroll-mb":[{"scroll-mb":ce()}],"scroll-ml":[{"scroll-ml":ce()}],"scroll-p":[{"scroll-p":ce()}],"scroll-px":[{"scroll-px":ce()}],"scroll-py":[{"scroll-py":ce()}],"scroll-ps":[{"scroll-ps":ce()}],"scroll-pe":[{"scroll-pe":ce()}],"scroll-pt":[{"scroll-pt":ce()}],"scroll-pr":[{"scroll-pr":ce()}],"scroll-pb":[{"scroll-pb":ce()}],"scroll-pl":[{"scroll-pl":ce()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ri,sv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Oz=bz(Nz),Ap={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Lz=Ap.exports,HA;function jz(){return HA||(HA=1,function(n,e){(function(){var t,r="4.17.21",s=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",g=1,v=2,_=4,S=1,x=2,E=1,P=2,R=4,M=8,N=16,L=32,B=64,$=128,H=256,Y=512,ue=30,oe="...",ce=800,ae=16,me=1,W=2,q=3,ne=1/0,z=9007199254740991,re=17976931348623157e292,J=NaN,F=4294967295,se=F-1,ee=F>>>1,Te=[["ary",$],["bind",E],["bindKey",P],["curry",M],["curryRight",N],["flip",Y],["partial",L],["partialRight",B],["rearg",H]],Me="[object Arguments]",Pe="[object Array]",ve="[object AsyncFunction]",Ne="[object Boolean]",He="[object Date]",Ye="[object DOMException]",it="[object Error]",Mt="[object Function]",un="[object GeneratorFunction]",Xt="[object Map]",$r="[object Number]",$i="[object Null]",Mn="[object Object]",Ll="[object Promise]",Co="[object Proxy]",Ur="[object RegExp]",Sn="[object Set]",oi="[object String]",Eo="[object Symbol]",gu="[object Undefined]",Ui="[object WeakMap]",vu="[object WeakSet]",ai="[object ArrayBuffer]",fs="[object DataView]",Aa="[object Float32Array]",li="[object Float64Array]",ci="[object Int8Array]",jl="[object Int16Array]",Ca="[object Int32Array]",Ea="[object Uint8Array]",Fl="[object Uint8ClampedArray]",ko="[object Uint16Array]",To="[object Uint32Array]",Bl=/\b__p \+= '';/g,$l=/\b(__p \+=) '' \+/g,Ul=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ui=/&(?:amp|lt|gt|quot|#39);/g,di=/[&<>"']/g,yu=RegExp(ui.source),wu=RegExp(di.source),bu=/<%-([\s\S]+?)%>/g,_u=/<%([\s\S]+?)%>/g,zl=/<%=([\s\S]+?)%>/g,Vl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xu=/^\w*$/,Po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ro=/[\\^$.*+?()[\]{}|]/g,Mo=RegExp(Ro.source),Su=/^\s+/,ka=/\s/,Hl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ta=/\{\n\/\* \[wrapped with (.+)\] \*/,fe=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,_e=/\\(\\)?/g,ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Be=/\w*$/,Et=/^[-+]0x[0-9a-f]+$/i,In=/^0b[01]+$/i,Ds=/^\[object .+?Constructor\]$/,Io=/^0o[0-7]+$/i,Au=/^(?:0|[1-9]\d*)$/,bm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cu=/($^)/,$y=/['\n\r\u2028\u2029\\]/g,Ht="\\ud800-\\udfff",Uy="\\u0300-\\u036f",jh="\\ufe20-\\ufe2f",_m="\\u20d0-\\u20ff",Wl=Uy+jh+_m,xm="\\u2700-\\u27bf",Fh="a-z\\xdf-\\xf6\\xf8-\\xff",Eu="\\xac\\xb1\\xd7\\xf7",Ns="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zy="\\u2000-\\u206f",ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sm="A-Z\\xc0-\\xd6\\xd8-\\xde",Am="\\ufe0e\\ufe0f",Cm=Eu+Ns+zy+ps,Pa="[']",ku="["+Ht+"]",Ra="["+Cm+"]",Do="["+Wl+"]",Em="\\d+",Vy="["+xm+"]",Tu="["+Fh+"]",Bh="[^"+Ht+Cm+Em+xm+Fh+Sm+"]",ql="\\ud83c[\\udffb-\\udfff]",Gl="(?:"+Do+"|"+ql+")",km="[^"+Ht+"]",Kl="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",No="["+Sm+"]",$h="\\u200d",Pu="(?:"+Tu+"|"+Bh+")",Tm="(?:"+No+"|"+Bh+")",Uh="(?:"+Pa+"(?:d|ll|m|re|s|t|ve))?",zh="(?:"+Pa+"(?:D|LL|M|RE|S|T|VE))?",Ru=Gl+"?",Yl="["+Am+"]?",zi="(?:"+$h+"(?:"+[km,Kl,kt].join("|")+")"+Yl+Ru+")*",Vi="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ma=Yl+Ru+zi,Xl="(?:"+[Vy,Kl,kt].join("|")+")"+Ma,Wi="(?:"+[km+Do+"?",Do,Kl,kt,ku].join("|")+")",Hy=RegExp(Pa,"g"),Pm=RegExp(Do,"g"),Oo=RegExp(ql+"(?="+ql+")|"+Wi+Ma,"g"),Wy=RegExp([No+"?"+Tu+"+"+Uh+"(?="+[Ra,No,"$"].join("|")+")",Tm+"+"+zh+"(?="+[Ra,No+Pu,"$"].join("|")+")",No+"?"+Pu+"+"+Uh,No+"+"+zh,Hi,Vi,Em,Xl].join("|"),"g"),Rm=RegExp("["+$h+Ht+Wl+Am+"]"),Mu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qy=-1,It={};It[Aa]=It[li]=It[ci]=It[jl]=It[Ca]=It[Ea]=It[Fl]=It[ko]=It[To]=!0,It[Me]=It[Pe]=It[ai]=It[Ne]=It[fs]=It[He]=It[it]=It[Mt]=It[Xt]=It[$r]=It[Mn]=It[Ur]=It[Sn]=It[oi]=It[Ui]=!1;var Pt={};Pt[Me]=Pt[Pe]=Pt[ai]=Pt[fs]=Pt[Ne]=Pt[He]=Pt[Aa]=Pt[li]=Pt[ci]=Pt[jl]=Pt[Ca]=Pt[Xt]=Pt[$r]=Pt[Mn]=Pt[Ur]=Pt[Sn]=Pt[oi]=Pt[Eo]=Pt[Ea]=Pt[Fl]=Pt[ko]=Pt[To]=!0,Pt[it]=Pt[Mt]=Pt[Ui]=!1;var Ia={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Iu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ky={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vh=parseFloat,Du=parseInt,Nu=typeof wl=="object"&&wl&&wl.Object===Object&&wl,Im=typeof self=="object"&&self&&self.Object===Object&&self,Wt=Nu||Im||Function("return this")(),Ql=e&&!e.nodeType&&e,Os=Ql&&!0&&n&&!n.nodeType&&n,Hh=Os&&Os.exports===Ql,Da=Hh&&Nu.process,er=function(){try{var Z=Os&&Os.require&&Os.require("util").types;return Z||Da&&Da.binding&&Da.binding("util")}catch{}}(),Wh=er&&er.isArrayBuffer,ur=er&&er.isDate,Lo=er&&er.isMap,Ou=er&&er.isRegExp,Na=er&&er.isSet,Dm=er&&er.isTypedArray;function tr(Z,ge,de){switch(de.length){case 0:return Z.call(ge);case 1:return Z.call(ge,de[0]);case 2:return Z.call(ge,de[0],de[1]);case 3:return Z.call(ge,de[0],de[1],de[2])}return Z.apply(ge,de)}function qh(Z,ge,de,Ie){for(var et=-1,St=Z==null?0:Z.length;++et<St;){var dn=Z[et];ge(Ie,dn,de(dn),Z)}return Ie}function Un(Z,ge){for(var de=-1,Ie=Z==null?0:Z.length;++de<Ie&&ge(Z[de],de,Z)!==!1;);return Z}function Lu(Z,ge){for(var de=Z==null?0:Z.length;de--&&ge(Z[de],de,Z)!==!1;);return Z}function Gh(Z,ge){for(var de=-1,Ie=Z==null?0:Z.length;++de<Ie;)if(!ge(Z[de],de,Z))return!1;return!0}function qi(Z,ge){for(var de=-1,Ie=Z==null?0:Z.length,et=0,St=[];++de<Ie;){var dn=Z[de];ge(dn,de,Z)&&(St[et++]=dn)}return St}function ju(Z,ge){var de=Z==null?0:Z.length;return!!de&&Oa(Z,ge,0)>-1}function Kh(Z,ge,de){for(var Ie=-1,et=Z==null?0:Z.length;++Ie<et;)if(de(ge,Z[Ie]))return!0;return!1}function Ft(Z,ge){for(var de=-1,Ie=Z==null?0:Z.length,et=Array(Ie);++de<Ie;)et[de]=ge(Z[de],de,Z);return et}function Gi(Z,ge){for(var de=-1,Ie=ge.length,et=Z.length;++de<Ie;)Z[et+de]=ge[de];return Z}function Yh(Z,ge,de,Ie){var et=-1,St=Z==null?0:Z.length;for(Ie&&St&&(de=Z[++et]);++et<St;)de=ge(de,Z[et],et,Z);return de}function Yy(Z,ge,de,Ie){var et=Z==null?0:Z.length;for(Ie&&et&&(de=Z[--et]);et--;)de=ge(de,Z[et],et,Z);return de}function Xh(Z,ge){for(var de=-1,Ie=Z==null?0:Z.length;++de<Ie;)if(ge(Z[de],de,Z))return!0;return!1}var Xy=Jh("length");function Nm(Z){return Z.split("")}function Qy(Z){return Z.match(Q)||[]}function Om(Z,ge,de){var Ie;return de(Z,function(et,St,dn){if(ge(et,St,dn))return Ie=St,!1}),Ie}function Fu(Z,ge,de,Ie){for(var et=Z.length,St=de+(Ie?1:-1);Ie?St--:++St<et;)if(ge(Z[St],St,Z))return St;return-1}function Oa(Z,ge,de){return ge===ge?Uu(Z,ge,de):Fu(Z,Lm,de)}function Qh(Z,ge,de,Ie){for(var et=de-1,St=Z.length;++et<St;)if(Ie(Z[et],ge))return et;return-1}function Lm(Z){return Z!==Z}function jm(Z,ge){var de=Z==null?0:Z.length;return de?Zh(Z,ge)/de:J}function Jh(Z){return function(ge){return ge==null?t:ge[Z]}}function Bu(Z){return function(ge){return Z==null?t:Z[ge]}}function Fm(Z,ge,de,Ie,et){return et(Z,function(St,dn,Nt){de=Ie?(Ie=!1,St):ge(de,St,dn,Nt)}),de}function Jy(Z,ge){var de=Z.length;for(Z.sort(ge);de--;)Z[de]=Z[de].value;return Z}function Zh(Z,ge){for(var de,Ie=-1,et=Z.length;++Ie<et;){var St=ge(Z[Ie]);St!==t&&(de=de===t?St:de+St)}return de}function ef(Z,ge){for(var de=-1,Ie=Array(Z);++de<Z;)Ie[de]=ge(de);return Ie}function Zy(Z,ge){return Ft(ge,function(de){return[de,Z[de]]})}function Bm(Z){return Z&&Z.slice(0,zu(Z)+1).replace(Su,"")}function Sr(Z){return function(ge){return Z(ge)}}function Jl(Z,ge){return Ft(ge,function(de){return Z[de]})}function hi(Z,ge){return Z.has(ge)}function $m(Z,ge){for(var de=-1,Ie=Z.length;++de<Ie&&Oa(ge,Z[de],0)>-1;);return de}function tf(Z,ge){for(var de=Z.length;de--&&Oa(ge,Z[de],0)>-1;);return de}function Um(Z,ge){for(var de=Z.length,Ie=0;de--;)Z[de]===ge&&++Ie;return Ie}var zm=Bu(Ia),Vm=Bu(Iu);function Hm(Z){return"\\"+Ky[Z]}function La(Z,ge){return Z==null?t:Z[ge]}function ja(Z){return Rm.test(Z)}function e0(Z){return Mu.test(Z)}function t0(Z){for(var ge,de=[];!(ge=Z.next()).done;)de.push(ge.value);return de}function $u(Z){var ge=-1,de=Array(Z.size);return Z.forEach(function(Ie,et){de[++ge]=[et,Ie]}),de}function nf(Z,ge){return function(de){return Z(ge(de))}}function zr(Z,ge){for(var de=-1,Ie=Z.length,et=0,St=[];++de<Ie;){var dn=Z[de];(dn===ge||dn===f)&&(Z[de]=f,St[et++]=de)}return St}function Ki(Z){var ge=-1,de=Array(Z.size);return Z.forEach(function(Ie){de[++ge]=Ie}),de}function n0(Z){var ge=-1,de=Array(Z.size);return Z.forEach(function(Ie){de[++ge]=[Ie,Ie]}),de}function Uu(Z,ge,de){for(var Ie=de-1,et=Z.length;++Ie<et;)if(Z[Ie]===ge)return Ie;return-1}function r0(Z,ge,de){for(var Ie=de+1;Ie--;)if(Z[Ie]===ge)return Ie;return Ie}function jo(Z){return ja(Z)?qm(Z):Xy(Z)}function Ar(Z){return ja(Z)?Gm(Z):Nm(Z)}function zu(Z){for(var ge=Z.length;ge--&&ka.test(Z.charAt(ge)););return ge}var Wm=Bu(Gy);function qm(Z){for(var ge=Oo.lastIndex=0;Oo.test(Z);)++ge;return ge}function Gm(Z){return Z.match(Oo)||[]}function s0(Z){return Z.match(Wy)||[]}var i0=function Z(ge){ge=ge==null?Wt:Fa.defaults(Wt.Object(),ge,Fa.pick(Wt,Mm));var de=ge.Array,Ie=ge.Date,et=ge.Error,St=ge.Function,dn=ge.Math,Nt=ge.Object,Zl=ge.RegExp,o0=ge.String,Vr=ge.TypeError,fi=de.prototype,rf=St.prototype,Ls=Nt.prototype,Ba=ge["__core-js_shared__"],ec=rf.toString,At=Ls.hasOwnProperty,$a=0,Vu=function(){var u=/[^.]+$/.exec(Ba&&Ba.keys&&Ba.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),tc=Ls.toString,Hu=ec.call(Nt),Km=Wt._,Ym=Zl("^"+ec.call(At).replace(Ro,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nc=Hh?ge.Buffer:t,pi=ge.Symbol,rc=ge.Uint8Array,sf=nc?nc.allocUnsafe:t,ms=nf(Nt.getPrototypeOf,Nt),Wu=Nt.create,qu=Ls.propertyIsEnumerable,Gu=fi.splice,Xm=pi?pi.isConcatSpreadable:t,mi=pi?pi.iterator:t,Fo=pi?pi.toStringTag:t,sc=function(){try{var u=io(Nt,"defineProperty");return u({},"",{}),u}catch{}}(),Qm=ge.clearTimeout!==Wt.clearTimeout&&ge.clearTimeout,$t=Ie&&Ie.now!==Wt.Date.now&&Ie.now,of=ge.setTimeout!==Wt.setTimeout&&ge.setTimeout,Bo=dn.ceil,Yi=dn.floor,Ku=Nt.getOwnPropertySymbols,af=nc?nc.isBuffer:t,Ua=ge.isFinite,Yu=fi.join,za=nf(Nt.keys,Nt),hn=dn.max,zn=dn.min,a0=Ie.now,Jm=ge.parseInt,ic=dn.random,Xu=fi.reverse,oc=io(ge,"DataView"),$o=io(ge,"Map"),ac=io(ge,"Promise"),Xi=io(ge,"Set"),lc=io(ge,"WeakMap"),Va=io(Nt,"create"),Qu=lc&&new lc,Ha={},lf=oo(oc),Qi=oo($o),Zm=oo(ac),Wa=oo(Xi),js=oo(lc),Ji=pi?pi.prototype:t,Cr=Ji?Ji.valueOf:t,Ju=Ji?Ji.toString:t;function O(u){if(pn(u)&&!ct(u)&&!(u instanceof lt)){if(u instanceof Vn)return u;if(At.call(u,"__wrapped__"))return kg(u)}return new Vn(u)}var qa=function(){function u(){}return function(p){if(!on(p))return{};if(Wu)return Wu(p);u.prototype=p;var b=new u;return u.prototype=t,b}}();function Fs(){}function Vn(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}O.templateSettings={escape:bu,evaluate:_u,interpolate:zl,variable:"",imports:{_:O}},O.prototype=Fs.prototype,O.prototype.constructor=O,Vn.prototype=qa(Fs.prototype),Vn.prototype.constructor=Vn;function lt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function Zu(){var u=new lt(this.__wrapped__);return u.__actions__=rr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=rr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=rr(this.__views__),u}function cf(){if(this.__filtered__){var u=new lt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ga(){var u=this.__wrapped__.value(),p=this.__dir__,b=ct(u),T=p<0,I=b?u.length:0,j=jf(0,I,this.__views__),V=j.start,K=j.end,te=K-V,we=T?K:V-1,be=this.__iteratees__,Ce=be.length,Re=0,Ue=zn(te,this.__takeCount__);if(!b||!T&&I==te&&Ue==te)return tl(u,this.__actions__);var Qe=[];e:for(;te--&&Re<Ue;){we+=p;for(var pt=-1,Je=u[we];++pt<Ce;){var vt=be[pt],bt=vt.iteratee,Cs=vt.type,Rr=bt(Je);if(Cs==W)Je=Rr;else if(!Rr){if(Cs==me)continue e;break e}}Qe[Re++]=Je}return Qe}lt.prototype=qa(Fs.prototype),lt.prototype.constructor=lt;function dr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function Ut(){this.__data__=Va?Va(null):{},this.size=0}function Bt(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function Zi(u){var p=this.__data__;if(Va){var b=p[u];return b===d?t:b}return At.call(p,u)?p[u]:t}function Hn(u){var p=this.__data__;return Va?p[u]!==t:At.call(p,u)}function hr(u,p){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=Va&&p===t?d:p,this}dr.prototype.clear=Ut,dr.prototype.delete=Bt,dr.prototype.get=Zi,dr.prototype.has=Hn,dr.prototype.set=hr;function nr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function Ka(){this.__data__=[],this.size=0}function fr(u){var p=this.__data__,b=qn(p,u);if(b<0)return!1;var T=p.length-1;return b==T?p.pop():Gu.call(p,b,1),--this.size,!0}function ed(u){var p=this.__data__,b=qn(p,u);return b<0?t:p[b][1]}function eg(u){return qn(this.__data__,u)>-1}function tg(u,p){var b=this.__data__,T=qn(b,u);return T<0?(++this.size,b.push([u,p])):b[T][1]=p,this}nr.prototype.clear=Ka,nr.prototype.delete=fr,nr.prototype.get=ed,nr.prototype.has=eg,nr.prototype.set=tg;function Hr(u){var p=-1,b=u==null?0:u.length;for(this.clear();++p<b;){var T=u[p];this.set(T[0],T[1])}}function ng(){this.size=0,this.__data__={hash:new dr,map:new($o||nr),string:new dr}}function gi(u){var p=Ac(this,u).delete(u);return this.size-=p?1:0,p}function td(u){return Ac(this,u).get(u)}function uf(u){return Ac(this,u).has(u)}function rg(u,p){var b=Ac(this,u),T=b.size;return b.set(u,p),this.size+=b.size==T?0:1,this}Hr.prototype.clear=ng,Hr.prototype.delete=gi,Hr.prototype.get=td,Hr.prototype.has=uf,Hr.prototype.set=rg;function Uo(u){var p=-1,b=u==null?0:u.length;for(this.__data__=new Hr;++p<b;)this.add(u[p])}function eo(u){return this.__data__.set(u,d),this}function Ya(u){return this.__data__.has(u)}Uo.prototype.add=Uo.prototype.push=eo,Uo.prototype.has=Ya;function Wn(u){var p=this.__data__=new nr(u);this.size=p.size}function nd(){this.__data__=new nr,this.size=0}function rd(u){var p=this.__data__,b=p.delete(u);return this.size=p.size,b}function Wr(u){return this.__data__.get(u)}function qr(u){return this.__data__.has(u)}function zo(u,p){var b=this.__data__;if(b instanceof nr){var T=b.__data__;if(!$o||T.length<s-1)return T.push([u,p]),this.size=++b.size,this;b=this.__data__=new Hr(T)}return b.set(u,p),this.size=b.size,this}Wn.prototype.clear=nd,Wn.prototype.delete=rd,Wn.prototype.get=Wr,Wn.prototype.has=qr,Wn.prototype.set=zo;function Bs(u,p){var b=ct(u),T=!b&&Lc(u),I=!b&&!T&&dl(u),j=!b&&!T&&!I&&qd(u),V=b||T||I||j,K=V?ef(u.length,o0):[],te=K.length;for(var we in u)(p||At.call(u,we))&&!(V&&(we=="length"||I&&(we=="offset"||we=="parent")||j&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||Gt(we,te)))&&K.push(we);return K}function $s(u){var p=u.length;return p?u[Za(0,p-1)]:t}function Vo(u,p){return Pd(rr(u),vi(p,0,u.length))}function sg(u){return Pd(rr(u))}function cc(u,p,b){(b!==t&&!ki(u[p],b)||b===t&&!(p in u))&&Us(u,p,b)}function Ho(u,p,b){var T=u[p];(!(At.call(u,p)&&ki(T,b))||b===t&&!(p in u))&&Us(u,p,b)}function qn(u,p){for(var b=u.length;b--;)if(ki(u[b][0],p))return b;return-1}function Er(u,p,b,T){return Vs(u,function(I,j,V){p(T,I,b(I),V)}),T}function zt(u,p){return u&&vs(p,Yn(p),u)}function gs(u,p){return u&&vs(p,ts(p),u)}function Us(u,p,b){p=="__proto__"&&sc?sc(u,p,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[p]=b}function sd(u,p){for(var b=-1,T=p.length,I=de(T),j=u==null;++b<T;)I[b]=j?t:M0(u,p[b]);return I}function vi(u,p,b){return u===u&&(b!==t&&(u=u<=b?u:b),p!==t&&(u=u>=p?u:p)),u}function pr(u,p,b,T,I,j){var V,K=p&g,te=p&v,we=p&_;if(b&&(V=I?b(u,T,I,j):b(u)),V!==t)return V;if(!on(u))return u;var be=ct(u);if(be){if(V=Ec(u),!K)return rr(u,V)}else{var Ce=On(u),Re=Ce==Mt||Ce==un;if(dl(u))return Cf(u,K);if(Ce==Mn||Ce==Me||Re&&!I){if(V=te||Re?{}:Ln(u),!K)return te?c0(u,gs(V,u)):vd(u,zt(V,u))}else{if(!Pt[Ce])return I?u:{};V=u0(u,Ce,K)}}j||(j=new Wn);var Ue=j.get(u);if(Ue)return Ue;j.set(u,V),Ax(u)?u.forEach(function(Je){V.add(pr(Je,p,b,Je,u,j))}):xx(u)&&u.forEach(function(Je,vt){V.set(vt,pr(Je,p,b,vt,u,j))});var Qe=we?te?Sc:xc:te?ts:Yn,pt=be?t:Qe(u);return Un(pt||u,function(Je,vt){pt&&(vt=Je,Je=u[vt]),Ho(V,vt,pr(Je,p,b,vt,u,j))}),V}function ig(u){var p=Yn(u);return function(b){return uc(b,u,p)}}function uc(u,p,b){var T=b.length;if(u==null)return!T;for(u=Nt(u);T--;){var I=b[T],j=p[I],V=u[I];if(V===t&&!(I in u)||!j(V))return!1}return!0}function df(u,p,b){if(typeof u!="function")throw new Vr(a);return ll(function(){u.apply(t,b)},p)}function zs(u,p,b,T){var I=-1,j=ju,V=!0,K=u.length,te=[],we=p.length;if(!K)return te;b&&(p=Ft(p,Sr(b))),T?(j=Kh,V=!1):p.length>=s&&(j=hi,V=!1,p=new Uo(p));e:for(;++I<K;){var be=u[I],Ce=b==null?be:b(be);if(be=T||be!==0?be:0,V&&Ce===Ce){for(var Re=we;Re--;)if(p[Re]===Ce)continue e;te.push(be)}else j(p,Ce,T)||te.push(be)}return te}var Vs=Qr(kr),og=Qr(to,!0);function dc(u,p){var b=!0;return Vs(u,function(T,I,j){return b=!!p(T,I,j),b}),b}function Wo(u,p,b){for(var T=-1,I=u.length;++T<I;){var j=u[T],V=p(j);if(V!=null&&(K===t?V===V&&!As(V):b(V,K)))var K=V,te=j}return te}function ag(u,p,b,T){var I=u.length;for(b=ht(b),b<0&&(b=-b>I?0:I+b),T=T===t||T>I?I:ht(T),T<0&&(T+=I),T=b>T?0:Ex(T);b<T;)u[b++]=p;return u}function hf(u,p){var b=[];return Vs(u,function(T,I,j){p(T,I,j)&&b.push(T)}),b}function tn(u,p,b,T,I){var j=-1,V=u.length;for(b||(b=Ed),I||(I=[]);++j<V;){var K=u[j];p>0&&b(K)?p>1?tn(K,p-1,b,T,I):Gi(I,K):T||(I[I.length]=K)}return I}var id=wd(),hc=wd(!0);function kr(u,p){return u&&id(u,p,Yn)}function to(u,p){return u&&hc(u,p,Yn)}function Xa(u,p){return qi(p,function(b){return sa(u[b])})}function yi(u,p){p=qs(p,u);for(var b=0,T=p.length;u!=null&&b<T;)u=u[_s(p[b++])];return b&&b==T?u:t}function od(u,p,b){var T=p(u);return ct(u)?T:Gi(T,b(u))}function Dn(u){return u==null?u===t?gu:$i:Fo&&Fo in Nt(u)?Cd(u):Bf(u)}function no(u,p){return u>p}function Gr(u,p){return u!=null&&At.call(u,p)}function qo(u,p){return u!=null&&p in Nt(u)}function ff(u,p,b){return u>=zn(p,b)&&u<hn(p,b)}function ad(u,p,b){for(var T=b?Kh:ju,I=u[0].length,j=u.length,V=j,K=de(j),te=1/0,we=[];V--;){var be=u[V];V&&p&&(be=Ft(be,Sr(p))),te=zn(be.length,te),K[V]=!b&&(p||I>=120&&be.length>=120)?new Uo(V&&be):t}be=u[0];var Ce=-1,Re=K[0];e:for(;++Ce<I&&we.length<te;){var Ue=be[Ce],Qe=p?p(Ue):Ue;if(Ue=b||Ue!==0?Ue:0,!(Re?hi(Re,Qe):T(we,Qe,b))){for(V=j;--V;){var pt=K[V];if(!(pt?hi(pt,Qe):T(u[V],Qe,b)))continue e}Re&&Re.push(Qe),we.push(Ue)}}return we}function wi(u,p,b,T){return kr(u,function(I,j,V){p(T,b(I),j,V)}),T}function Kr(u,p,b){p=qs(p,u),u=An(u,p);var T=u==null?u:u[_s(or(p))];return T==null?t:tr(T,u,b)}function ld(u){return pn(u)&&Dn(u)==Me}function lg(u){return pn(u)&&Dn(u)==ai}function bi(u){return pn(u)&&Dn(u)==He}function Yr(u,p,b,T,I){return u===p?!0:u==null||p==null||!pn(u)&&!pn(p)?u!==u&&p!==p:cd(u,p,b,T,Yr,I)}function cd(u,p,b,T,I,j){var V=ct(u),K=ct(p),te=V?Pe:On(u),we=K?Pe:On(p);te=te==Me?Mn:te,we=we==Me?Mn:we;var be=te==Mn,Ce=we==Mn,Re=te==we;if(Re&&dl(u)){if(!dl(p))return!1;V=!0,be=!1}if(Re&&!be)return j||(j=new Wn),V||qd(u)?Of(u,p,b,T,I,j):Lf(u,p,te,b,T,I,j);if(!(b&S)){var Ue=be&&At.call(u,"__wrapped__"),Qe=Ce&&At.call(p,"__wrapped__");if(Ue||Qe){var pt=Ue?u.value():u,Je=Qe?p.value():p;return j||(j=new Wn),I(pt,Je,b,T,j)}}return Re?(j||(j=new Wn),wg(u,p,b,T,I,j)):!1}function cg(u){return pn(u)&&On(u)==Xt}function Qa(u,p,b,T){var I=b.length,j=I,V=!T;if(u==null)return!j;for(u=Nt(u);I--;){var K=b[I];if(V&&K[2]?K[1]!==u[K[0]]:!(K[0]in u))return!1}for(;++I<j;){K=b[I];var te=K[0],we=u[te],be=K[1];if(V&&K[2]){if(we===t&&!(te in u))return!1}else{var Ce=new Wn;if(T)var Re=T(we,be,te,u,p,Ce);if(!(Re===t?Yr(be,we,S|x,T,Ce):Re))return!1}}return!0}function pf(u){if(!on(u)||xg(u))return!1;var p=sa(u)?Ym:Ds;return p.test(oo(u))}function fc(u){return pn(u)&&Dn(u)==Ur}function Hs(u){return pn(u)&&On(u)==Sn}function pc(u){return pn(u)&&Ug(u.length)&&!!It[Dn(u)]}function Ja(u){return typeof u=="function"?u:u==null?ns:typeof u=="object"?ct(u)?qt(u[0],u[1]):ud(u):jx(u)}function _i(u){if(!Ci(u))return za(u);var p=[];for(var b in Nt(u))At.call(u,b)&&b!="constructor"&&p.push(b);return p}function mf(u){if(!on(u))return Cg(u);var p=Ci(u),b=[];for(var T in u)T=="constructor"&&(p||!At.call(u,T))||b.push(T);return b}function ro(u,p){return u<p}function gf(u,p){var b=-1,T=es(u)?de(u.length):[];return Vs(u,function(I,j,V){T[++b]=p(I,j,V)}),T}function ud(u){var p=Cc(u);return p.length==1&&p[0][2]?kd(p[0][0],p[0][1]):function(b){return b===u||Qa(b,u,p)}}function qt(u,p){return Oe(u)&&Tc(p)?kd(_s(u),p):function(b){var T=M0(b,u);return T===t&&T===p?I0(b,u):Yr(p,T,S|x)}}function Go(u,p,b,T,I){u!==p&&id(p,function(j,V){if(I||(I=new Wn),on(j))vf(u,p,V,b,Go,T,I);else{var K=T?T(Ys(u,V),j,V+"",u,p,I):t;K===t&&(K=j),cc(u,V,K)}},ts)}function vf(u,p,b,T,I,j,V){var K=Ys(u,b),te=Ys(p,b),we=V.get(te);if(we){cc(u,b,we);return}var be=j?j(K,te,b+"",u,p,V):t,Ce=be===t;if(Ce){var Re=ct(te),Ue=!Re&&dl(te),Qe=!Re&&!Ue&&qd(te);be=te,Re||Ue||Qe?ct(K)?be=K:vn(K)?be=rr(K):Ue?(Ce=!1,be=Cf(te,!0)):Qe?(Ce=!1,be=pg(te,!0)):be=[]:rp(te)||Lc(te)?(be=K,Lc(K)?be=kx(K):(!on(K)||sa(K))&&(be=Ln(te))):Ce=!1}Ce&&(V.set(te,be),I(be,te,T,j,V),V.delete(te)),cc(u,b,be)}function dd(u,p){var b=u.length;if(b)return p+=p<0?b:0,Gt(p,b)?u[p]:t}function mc(u,p,b){p.length?p=Ft(p,function(j){return ct(j)?function(V){return yi(V,j.length===1?j[0]:j)}:j}):p=[ns];var T=-1;p=Ft(p,Sr(Ke()));var I=gf(u,function(j,V,K){var te=Ft(p,function(we){return we(j)});return{criteria:te,index:++T,value:j}});return Jy(I,function(j,V){return l0(j,V,b)})}function yf(u,p){return so(u,p,function(b,T){return I0(u,T)})}function so(u,p,b){for(var T=-1,I=p.length,j={};++T<I;){var V=p[T],K=yi(u,V);b(K,V)&&Yo(j,qs(V,u),K)}return j}function Qt(u){return function(p){return yi(p,u)}}function rn(u,p,b,T){var I=T?Qh:Oa,j=-1,V=p.length,K=u;for(u===p&&(p=rr(p)),b&&(K=Ft(u,Sr(b)));++j<V;)for(var te=0,we=p[j],be=b?b(we):we;(te=I(K,be,te,T))>-1;)K!==u&&Gu.call(K,te,1),Gu.call(u,te,1);return u}function mn(u,p){for(var b=u?p.length:0,T=b-1;b--;){var I=p[b];if(b==T||I!==j){var j=I;Gt(I)?Gu.call(u,I,1):pd(u,I)}}return u}function Za(u,p){return u+Yi(ic()*(p-u+1))}function gc(u,p,b,T){for(var I=-1,j=hn(Bo((p-u)/(b||1)),0),V=de(j);j--;)V[T?j:++I]=u,u+=b;return V}function Ko(u,p){var b="";if(!u||p<1||p>z)return b;do p%2&&(b+=u),p=Yi(p/2),p&&(u+=u);while(p);return b}function dt(u,p){return Tr(Td(u,p,ns),u+"")}function Gn(u){return $s(Gd(u))}function wf(u,p){var b=Gd(u);return Pd(b,vi(p,0,b.length))}function Yo(u,p,b,T){if(!on(u))return u;p=qs(p,u);for(var I=-1,j=p.length,V=j-1,K=u;K!=null&&++I<j;){var te=_s(p[I]),we=b;if(te==="__proto__"||te==="constructor"||te==="prototype")return u;if(I!=V){var be=K[te];we=T?T(be,te,K):t,we===t&&(we=on(be)?be:Gt(p[I+1])?[]:{})}Ho(K,te,we),K=K[te]}return u}var hd=Qu?function(u,p){return Qu.set(u,p),u}:ns,Ws=sc?function(u,p){return sc(u,"toString",{configurable:!0,enumerable:!1,value:N0(p),writable:!0})}:ns;function Xr(u){return Pd(Gd(u))}function Kn(u,p,b){var T=-1,I=u.length;p<0&&(p=-p>I?0:I+p),b=b>I?I:b,b<0&&(b+=I),I=p>b?0:b-p>>>0,p>>>=0;for(var j=de(I);++T<I;)j[T]=u[T+p];return j}function bf(u,p){var b;return Vs(u,function(T,I,j){return b=p(T,I,j),!b}),!!b}function el(u,p,b){var T=0,I=u==null?T:u.length;if(typeof p=="number"&&p===p&&I<=ee){for(;T<I;){var j=T+I>>>1,V=u[j];V!==null&&!As(V)&&(b?V<=p:V<p)?T=j+1:I=j}return I}return fd(u,p,ns,b)}function fd(u,p,b,T){var I=0,j=u==null?0:u.length;if(j===0)return 0;p=b(p);for(var V=p!==p,K=p===null,te=As(p),we=p===t;I<j;){var be=Yi((I+j)/2),Ce=b(u[be]),Re=Ce!==t,Ue=Ce===null,Qe=Ce===Ce,pt=As(Ce);if(V)var Je=T||Qe;else we?Je=Qe&&(T||Re):K?Je=Qe&&Re&&(T||!Ue):te?Je=Qe&&Re&&!Ue&&(T||!pt):Ue||pt?Je=!1:Je=T?Ce<=p:Ce<p;Je?I=be+1:j=be}return zn(j,se)}function _f(u,p){for(var b=-1,T=u.length,I=0,j=[];++b<T;){var V=u[b],K=p?p(V):V;if(!b||!ki(K,te)){var te=K;j[I++]=V===0?0:V}}return j}function xf(u){return typeof u=="number"?u:As(u)?J:+u}function mr(u){if(typeof u=="string")return u;if(ct(u))return Ft(u,mr)+"";if(As(u))return Ju?Ju.call(u):"";var p=u+"";return p=="0"&&1/u==-ne?"-0":p}function xi(u,p,b){var T=-1,I=ju,j=u.length,V=!0,K=[],te=K;if(b)V=!1,I=Kh;else if(j>=s){var we=p?null:yg(u);if(we)return Ki(we);V=!1,I=hi,te=new Uo}else te=p?[]:K;e:for(;++T<j;){var be=u[T],Ce=p?p(be):be;if(be=b||be!==0?be:0,V&&Ce===Ce){for(var Re=te.length;Re--;)if(te[Re]===Ce)continue e;p&&te.push(Ce),K.push(be)}else I(te,Ce,b)||(te!==K&&te.push(Ce),K.push(be))}return K}function pd(u,p){return p=qs(p,u),u=An(u,p),u==null||delete u[_s(or(p))]}function Sf(u,p,b,T){return Yo(u,p,b(yi(u,p)),T)}function vc(u,p,b,T){for(var I=u.length,j=T?I:-1;(T?j--:++j<I)&&p(u[j],j,u););return b?Kn(u,T?0:j,T?j+1:I):Kn(u,T?j+1:0,T?I:j)}function tl(u,p){var b=u;return b instanceof lt&&(b=b.value()),Yh(p,function(T,I){return I.func.apply(I.thisArg,Gi([T],I.args))},b)}function md(u,p,b){var T=u.length;if(T<2)return T?xi(u[0]):[];for(var I=-1,j=de(T);++I<T;)for(var V=u[I],K=-1;++K<T;)K!=I&&(j[I]=zs(j[I]||V,u[K],p,b));return xi(tn(j,1),p,b)}function yc(u,p,b){for(var T=-1,I=u.length,j=p.length,V={};++T<I;){var K=T<j?p[T]:t;b(V,u[T],K)}return V}function nl(u){return vn(u)?u:[]}function gd(u){return typeof u=="function"?u:ns}function qs(u,p){return ct(u)?u:Oe(u,p)?[u]:zf(Ot(u))}var ug=dt;function Si(u,p,b){var T=u.length;return b=b===t?T:b,!p&&b>=T?u:Kn(u,p,b)}var Af=Qm||function(u){return Wt.clearTimeout(u)};function Cf(u,p){if(p)return u.slice();var b=u.length,T=sf?sf(b):new u.constructor(b);return u.copy(T),T}function wc(u){var p=new u.constructor(u.byteLength);return new rc(p).set(new rc(u)),p}function dg(u,p){var b=p?wc(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function hg(u){var p=new u.constructor(u.source,Be.exec(u));return p.lastIndex=u.lastIndex,p}function fg(u){return Cr?Nt(Cr.call(u)):{}}function pg(u,p){var b=p?wc(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function Ef(u,p){if(u!==p){var b=u!==t,T=u===null,I=u===u,j=As(u),V=p!==t,K=p===null,te=p===p,we=As(p);if(!K&&!we&&!j&&u>p||j&&V&&te&&!K&&!we||T&&V&&te||!b&&te||!I)return 1;if(!T&&!j&&!we&&u<p||we&&b&&I&&!T&&!j||K&&b&&I||!V&&I||!te)return-1}return 0}function l0(u,p,b){for(var T=-1,I=u.criteria,j=p.criteria,V=I.length,K=b.length;++T<V;){var te=Ef(I[T],j[T]);if(te){if(T>=K)return te;var we=b[T];return te*(we=="desc"?-1:1)}}return u.index-p.index}function mg(u,p,b,T){for(var I=-1,j=u.length,V=b.length,K=-1,te=p.length,we=hn(j-V,0),be=de(te+we),Ce=!T;++K<te;)be[K]=p[K];for(;++I<V;)(Ce||I<j)&&(be[b[I]]=u[I]);for(;we--;)be[K++]=u[I++];return be}function kf(u,p,b,T){for(var I=-1,j=u.length,V=-1,K=b.length,te=-1,we=p.length,be=hn(j-K,0),Ce=de(be+we),Re=!T;++I<be;)Ce[I]=u[I];for(var Ue=I;++te<we;)Ce[Ue+te]=p[te];for(;++V<K;)(Re||I<j)&&(Ce[Ue+b[V]]=u[I++]);return Ce}function rr(u,p){var b=-1,T=u.length;for(p||(p=de(T));++b<T;)p[b]=u[b];return p}function vs(u,p,b,T){var I=!b;b||(b={});for(var j=-1,V=p.length;++j<V;){var K=p[j],te=T?T(b[K],u[K],K,b,u):t;te===t&&(te=u[K]),I?Us(b,K,te):Ho(b,K,te)}return b}function vd(u,p){return vs(u,ys(u),p)}function c0(u,p){return vs(u,bg(u),p)}function yd(u,p){return function(b,T){var I=ct(b)?qh:Er,j=p?p():{};return I(b,u,Ke(T,2),j)}}function rl(u){return dt(function(p,b){var T=-1,I=b.length,j=I>1?b[I-1]:t,V=I>2?b[2]:t;for(j=u.length>3&&typeof j=="function"?(I--,j):t,V&&ir(b[0],b[1],V)&&(j=I<3?t:j,I=1),p=Nt(p);++T<I;){var K=b[T];K&&u(p,K,T,j)}return p})}function Qr(u,p){return function(b,T){if(b==null)return b;if(!es(b))return u(b,T);for(var I=b.length,j=p?I:-1,V=Nt(b);(p?j--:++j<I)&&T(V[j],j,V)!==!1;);return b}}function wd(u){return function(p,b,T){for(var I=-1,j=Nt(p),V=T(p),K=V.length;K--;){var te=V[u?K:++I];if(b(j[te],te,j)===!1)break}return p}}function bd(u,p,b){var T=p&E,I=sl(u);function j(){var V=this&&this!==Wt&&this instanceof j?I:u;return V.apply(T?b:this,arguments)}return j}function Tf(u){return function(p){p=Ot(p);var b=ja(p)?Ar(p):t,T=b?b[0]:p.charAt(0),I=b?Si(b,1).join(""):p.slice(1);return T[u]()+I}}function Xo(u){return function(p){return Yh(Ox(Nx(p).replace(Hy,"")),u,"")}}function sl(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var b=qa(u.prototype),T=u.apply(b,p);return on(T)?T:b}}function Pf(u,p,b){var T=sl(u);function I(){for(var j=arguments.length,V=de(j),K=j,te=Ai(I);K--;)V[K]=arguments[K];var we=j<3&&V[0]!==te&&V[j-1]!==te?[]:zr(V,te);if(j-=we.length,j<b)return sr(u,p,il,I.placeholder,t,V,we,t,t,b-j);var be=this&&this!==Wt&&this instanceof I?T:u;return tr(be,this,V)}return I}function Qo(u){return function(p,b,T){var I=Nt(p);if(!es(p)){var j=Ke(b,3);p=Yn(p),b=function(K){return j(I[K],K,I)}}var V=u(p,b,T);return V>-1?I[j?p[V]:V]:t}}function _d(u){return Ks(function(p){var b=p.length,T=b,I=Vn.prototype.thru;for(u&&p.reverse();T--;){var j=p[T];if(typeof j!="function")throw new Vr(a);if(I&&!V&&ol(j)=="wrapper")var V=new Vn([],!0)}for(T=V?T:b;++T<b;){j=p[T];var K=ol(j),te=K=="wrapper"?Ad(j):t;te&&kc(te[0])&&te[1]==($|M|L|H)&&!te[4].length&&te[9]==1?V=V[ol(te[0])].apply(V,te[3]):V=j.length==1&&kc(j)?V[K]():V.thru(j)}return function(){var we=arguments,be=we[0];if(V&&we.length==1&&ct(be))return V.plant(be).value();for(var Ce=0,Re=b?p[Ce].apply(this,we):be;++Ce<b;)Re=p[Ce].call(this,Re);return Re}})}function il(u,p,b,T,I,j,V,K,te,we){var be=p&$,Ce=p&E,Re=p&P,Ue=p&(M|N),Qe=p&Y,pt=Re?t:sl(u);function Je(){for(var vt=arguments.length,bt=de(vt),Cs=vt;Cs--;)bt[Cs]=arguments[Cs];if(Ue)var Rr=Ai(Je),Es=Um(bt,Rr);if(T&&(bt=mg(bt,T,I,Ue)),j&&(bt=kf(bt,j,V,Ue)),vt-=Es,Ue&&vt<we){var yn=zr(bt,Rr);return sr(u,p,il,Je.placeholder,b,bt,yn,K,te,we-vt)}var Ti=Ce?b:this,oa=Re?Ti[u]:u;return vt=bt.length,K?bt=ws(bt,K):Qe&&vt>1&&bt.reverse(),be&&te<vt&&(bt.length=te),this&&this!==Wt&&this instanceof Je&&(oa=pt||sl(oa)),oa.apply(Ti,bt)}return Je}function gg(u,p){return function(b,T){return wi(b,u,p(T),{})}}function bc(u,p){return function(b,T){var I;if(b===t&&T===t)return p;if(b!==t&&(I=b),T!==t){if(I===t)return T;typeof b=="string"||typeof T=="string"?(b=mr(b),T=mr(T)):(b=xf(b),T=xf(T)),I=u(b,T)}return I}}function xd(u){return Ks(function(p){return p=Ft(p,Sr(Ke())),dt(function(b){var T=this;return u(p,function(I){return tr(I,T,b)})})})}function _c(u,p){p=p===t?" ":mr(p);var b=p.length;if(b<2)return b?Ko(p,u):p;var T=Ko(p,Bo(u/jo(p)));return ja(p)?Si(Ar(T),0,u).join(""):T.slice(0,u)}function vg(u,p,b,T){var I=p&E,j=sl(u);function V(){for(var K=-1,te=arguments.length,we=-1,be=T.length,Ce=de(be+te),Re=this&&this!==Wt&&this instanceof V?j:u;++we<be;)Ce[we]=T[we];for(;te--;)Ce[we++]=arguments[++K];return tr(Re,I?b:this,Ce)}return V}function Rf(u){return function(p,b,T){return T&&typeof T!="number"&&ir(p,b,T)&&(b=T=t),p=ia(p),b===t?(b=p,p=0):b=ia(b),T=T===t?p<b?1:-1:ia(T),gc(p,b,T,u)}}function Sd(u){return function(p,b){return typeof p=="string"&&typeof b=="string"||(p=Xs(p),b=Xs(b)),u(p,b)}}function sr(u,p,b,T,I,j,V,K,te,we){var be=p&M,Ce=be?V:t,Re=be?t:V,Ue=be?j:t,Qe=be?t:j;p|=be?L:B,p&=~(be?B:L),p&R||(p&=-4);var pt=[u,p,I,Ue,Ce,Qe,Re,K,te,we],Je=b.apply(t,pt);return kc(u)&&$f(Je,pt),Je.placeholder=T,Uf(Je,u,p)}function Nn(u){var p=dn[u];return function(b,T){if(b=Xs(b),T=T==null?0:zn(ht(T),292),T&&Ua(b)){var I=(Ot(b)+"e").split("e"),j=p(I[0]+"e"+(+I[1]+T));return I=(Ot(j)+"e").split("e"),+(I[0]+"e"+(+I[1]-T))}return p(b)}}var yg=Xi&&1/Ki(new Xi([,-0]))[1]==ne?function(u){return new Xi(u)}:j0;function Mf(u){return function(p){var b=On(p);return b==Xt?$u(p):b==Sn?n0(p):Zy(p,u(p))}}function Gs(u,p,b,T,I,j,V,K){var te=p&P;if(!te&&typeof u!="function")throw new Vr(a);var we=T?T.length:0;if(we||(p&=-97,T=I=t),V=V===t?V:hn(ht(V),0),K=K===t?K:ht(K),we-=I?I.length:0,p&B){var be=T,Ce=I;T=I=t}var Re=te?t:Ad(u),Ue=[u,p,b,T,I,be,Ce,j,V,K];if(Re&&Ag(Ue,Re),u=Ue[0],p=Ue[1],b=Ue[2],T=Ue[3],I=Ue[4],K=Ue[9]=Ue[9]===t?te?0:u.length:hn(Ue[9]-we,0),!K&&p&(M|N)&&(p&=-25),!p||p==E)var Qe=bd(u,p,b);else p==M||p==N?Qe=Pf(u,p,K):(p==L||p==(E|L))&&!I.length?Qe=vg(u,p,b,T):Qe=il.apply(t,Ue);var pt=Re?hd:$f;return Uf(pt(Qe,Ue),u,p)}function If(u,p,b,T){return u===t||ki(u,Ls[b])&&!At.call(T,b)?p:u}function Df(u,p,b,T,I,j){return on(u)&&on(p)&&(j.set(p,u),Go(u,p,t,Df,j),j.delete(p)),u}function Nf(u){return rp(u)?t:u}function Of(u,p,b,T,I,j){var V=b&S,K=u.length,te=p.length;if(K!=te&&!(V&&te>K))return!1;var we=j.get(u),be=j.get(p);if(we&&be)return we==p&&be==u;var Ce=-1,Re=!0,Ue=b&x?new Uo:t;for(j.set(u,p),j.set(p,u);++Ce<K;){var Qe=u[Ce],pt=p[Ce];if(T)var Je=V?T(pt,Qe,Ce,p,u,j):T(Qe,pt,Ce,u,p,j);if(Je!==t){if(Je)continue;Re=!1;break}if(Ue){if(!Xh(p,function(vt,bt){if(!hi(Ue,bt)&&(Qe===vt||I(Qe,vt,b,T,j)))return Ue.push(bt)})){Re=!1;break}}else if(!(Qe===pt||I(Qe,pt,b,T,j))){Re=!1;break}}return j.delete(u),j.delete(p),Re}function Lf(u,p,b,T,I,j,V){switch(b){case fs:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case ai:return!(u.byteLength!=p.byteLength||!j(new rc(u),new rc(p)));case Ne:case He:case $r:return ki(+u,+p);case it:return u.name==p.name&&u.message==p.message;case Ur:case oi:return u==p+"";case Xt:var K=$u;case Sn:var te=T&S;if(K||(K=Ki),u.size!=p.size&&!te)return!1;var we=V.get(u);if(we)return we==p;T|=x,V.set(u,p);var be=Of(K(u),K(p),T,I,j,V);return V.delete(u),be;case Eo:if(Cr)return Cr.call(u)==Cr.call(p)}return!1}function wg(u,p,b,T,I,j){var V=b&S,K=xc(u),te=K.length,we=xc(p),be=we.length;if(te!=be&&!V)return!1;for(var Ce=te;Ce--;){var Re=K[Ce];if(!(V?Re in p:At.call(p,Re)))return!1}var Ue=j.get(u),Qe=j.get(p);if(Ue&&Qe)return Ue==p&&Qe==u;var pt=!0;j.set(u,p),j.set(p,u);for(var Je=V;++Ce<te;){Re=K[Ce];var vt=u[Re],bt=p[Re];if(T)var Cs=V?T(bt,vt,Re,p,u,j):T(vt,bt,Re,u,p,j);if(!(Cs===t?vt===bt||I(vt,bt,b,T,j):Cs)){pt=!1;break}Je||(Je=Re=="constructor")}if(pt&&!Je){var Rr=u.constructor,Es=p.constructor;Rr!=Es&&"constructor"in u&&"constructor"in p&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof Es=="function"&&Es instanceof Es)&&(pt=!1)}return j.delete(u),j.delete(p),pt}function Ks(u){return Tr(Td(u,t,Md),u+"")}function xc(u){return od(u,Yn,ys)}function Sc(u){return od(u,ts,bg)}var Ad=Qu?function(u){return Qu.get(u)}:j0;function ol(u){for(var p=u.name+"",b=Ha[p],T=At.call(Ha,p)?b.length:0;T--;){var I=b[T],j=I.func;if(j==null||j==u)return I.name}return p}function Ai(u){var p=At.call(O,"placeholder")?O:u;return p.placeholder}function Ke(){var u=O.iteratee||O0;return u=u===O0?Ja:u,arguments.length?u(arguments[0],arguments[1]):u}function Ac(u,p){var b=u.__data__;return al(p)?b[typeof p=="string"?"string":"hash"]:b.map}function Cc(u){for(var p=Yn(u),b=p.length;b--;){var T=p[b],I=u[T];p[b]=[T,I,Tc(I)]}return p}function io(u,p){var b=La(u,p);return pf(b)?b:t}function Cd(u){var p=At.call(u,Fo),b=u[Fo];try{u[Fo]=t;var T=!0}catch{}var I=tc.call(u);return T&&(p?u[Fo]=b:delete u[Fo]),I}var ys=Ku?function(u){return u==null?[]:(u=Nt(u),qi(Ku(u),function(p){return qu.call(u,p)}))}:F0,bg=Ku?function(u){for(var p=[];u;)Gi(p,ys(u)),u=ms(u);return p}:F0,On=Dn;(oc&&On(new oc(new ArrayBuffer(1)))!=fs||$o&&On(new $o)!=Xt||ac&&On(ac.resolve())!=Ll||Xi&&On(new Xi)!=Sn||lc&&On(new lc)!=Ui)&&(On=function(u){var p=Dn(u),b=p==Mn?u.constructor:t,T=b?oo(b):"";if(T)switch(T){case lf:return fs;case Qi:return Xt;case Zm:return Ll;case Wa:return Sn;case js:return Ui}return p});function jf(u,p,b){for(var T=-1,I=b.length;++T<I;){var j=b[T],V=j.size;switch(j.type){case"drop":u+=V;break;case"dropRight":p-=V;break;case"take":p=zn(p,u+V);break;case"takeRight":u=hn(u,p-V);break}}return{start:u,end:p}}function _g(u){var p=u.match(Ta);return p?p[1].split(fe):[]}function Ff(u,p,b){p=qs(p,u);for(var T=-1,I=p.length,j=!1;++T<I;){var V=_s(p[T]);if(!(j=u!=null&&b(u,V)))break;u=u[V]}return j||++T!=I?j:(I=u==null?0:u.length,!!I&&Ug(I)&&Gt(V,I)&&(ct(u)||Lc(u)))}function Ec(u){var p=u.length,b=new u.constructor(p);return p&&typeof u[0]=="string"&&At.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function Ln(u){return typeof u.constructor=="function"&&!Ci(u)?qa(ms(u)):{}}function u0(u,p,b){var T=u.constructor;switch(p){case ai:return wc(u);case Ne:case He:return new T(+u);case fs:return dg(u,b);case Aa:case li:case ci:case jl:case Ca:case Ea:case Fl:case ko:case To:return pg(u,b);case Xt:return new T;case $r:case oi:return new T(u);case Ur:return hg(u);case Sn:return new T;case Eo:return fg(u)}}function d0(u,p){var b=p.length;if(!b)return u;var T=b-1;return p[T]=(b>1?"& ":"")+p[T],p=p.join(b>2?", ":" "),u.replace(Hl,`{
/* [wrapped with `+p+`] */
`)}function Ed(u){return ct(u)||Lc(u)||!!(Xm&&u&&u[Xm])}function Gt(u,p){var b=typeof u;return p=p??z,!!p&&(b=="number"||b!="symbol"&&Au.test(u))&&u>-1&&u%1==0&&u<p}function ir(u,p,b){if(!on(b))return!1;var T=typeof p;return(T=="number"?es(b)&&Gt(p,b.length):T=="string"&&p in b)?ki(b[p],u):!1}function Oe(u,p){if(ct(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||As(u)?!0:xu.test(u)||!Vl.test(u)||p!=null&&u in Nt(p)}function al(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function kc(u){var p=ol(u),b=O[p];if(typeof b!="function"||!(p in lt.prototype))return!1;if(u===b)return!0;var T=Ad(b);return!!T&&u===T[0]}function xg(u){return!!Vu&&Vu in u}var h0=Ba?sa:B0;function Ci(u){var p=u&&u.constructor,b=typeof p=="function"&&p.prototype||Ls;return u===b}function Tc(u){return u===u&&!on(u)}function kd(u,p){return function(b){return b==null?!1:b[u]===p&&(p!==t||u in Nt(b))}}function Sg(u){var p=le(u,function(T){return b.size===h&&b.clear(),T}),b=p.cache;return p}function Ag(u,p){var b=u[1],T=p[1],I=b|T,j=I<(E|P|$),V=T==$&&b==M||T==$&&b==H&&u[7].length<=p[8]||T==($|H)&&p[7].length<=p[8]&&b==M;if(!(j||V))return u;T&E&&(u[2]=p[2],I|=b&E?0:R);var K=p[3];if(K){var te=u[3];u[3]=te?mg(te,K,p[4]):K,u[4]=te?zr(u[3],f):p[4]}return K=p[5],K&&(te=u[5],u[5]=te?kf(te,K,p[6]):K,u[6]=te?zr(u[5],f):p[6]),K=p[7],K&&(u[7]=K),T&$&&(u[8]=u[8]==null?p[8]:zn(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=I,u}function Cg(u){var p=[];if(u!=null)for(var b in Nt(u))p.push(b);return p}function Bf(u){return tc.call(u)}function Td(u,p,b){return p=hn(p===t?u.length-1:p,0),function(){for(var T=arguments,I=-1,j=hn(T.length-p,0),V=de(j);++I<j;)V[I]=T[p+I];I=-1;for(var K=de(p+1);++I<p;)K[I]=T[I];return K[p]=b(V),tr(u,this,K)}}function An(u,p){return p.length<2?u:yi(u,Kn(p,0,-1))}function ws(u,p){for(var b=u.length,T=zn(p.length,b),I=rr(u);T--;){var j=p[T];u[T]=Gt(j,b)?I[j]:t}return u}function Ys(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var $f=bs(hd),ll=of||function(u,p){return Wt.setTimeout(u,p)},Tr=bs(Ws);function Uf(u,p,b){var T=p+"";return Tr(u,d0(T,Eg(_g(T),b)))}function bs(u){var p=0,b=0;return function(){var T=a0(),I=ae-(T-b);if(b=T,I>0){if(++p>=ce)return arguments[0]}else p=0;return u.apply(t,arguments)}}function Pd(u,p){var b=-1,T=u.length,I=T-1;for(p=p===t?T:p;++b<p;){var j=Za(b,I),V=u[j];u[j]=u[b],u[b]=V}return u.length=p,u}var zf=Sg(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Po,function(b,T,I,j){p.push(I?j.replace(_e,"$1"):T||b)}),p});function _s(u){if(typeof u=="string"||As(u))return u;var p=u+"";return p=="0"&&1/u==-ne?"-0":p}function oo(u){if(u!=null){try{return ec.call(u)}catch{}try{return u+""}catch{}}return""}function Eg(u,p){return Un(Te,function(b){var T="_."+b[0];p&b[1]&&!ju(u,T)&&u.push(T)}),u.sort()}function kg(u){if(u instanceof lt)return u.clone();var p=new Vn(u.__wrapped__,u.__chain__);return p.__actions__=rr(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function Rd(u,p,b){(b?ir(u,p,b):p===t)?p=1:p=hn(ht(p),0);var T=u==null?0:u.length;if(!T||p<1)return[];for(var I=0,j=0,V=de(Bo(T/p));I<T;)V[j++]=Kn(u,I,I+=p);return V}function Vf(u){for(var p=-1,b=u==null?0:u.length,T=0,I=[];++p<b;){var j=u[p];j&&(I[T++]=j)}return I}function Jr(){var u=arguments.length;if(!u)return[];for(var p=de(u-1),b=arguments[0],T=u;T--;)p[T-1]=arguments[T];return Gi(ct(b)?rr(b):[b],tn(p,1))}var wt=dt(function(u,p){return vn(u)?zs(u,tn(p,1,vn,!0)):[]}),Cn=dt(function(u,p){var b=or(p);return vn(b)&&(b=t),vn(u)?zs(u,tn(p,1,vn,!0),Ke(b,2)):[]}),fn=dt(function(u,p){var b=or(p);return vn(b)&&(b=t),vn(u)?zs(u,tn(p,1,vn,!0),t,b):[]});function jn(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),Kn(u,p<0?0:p,T)):[]}function Pr(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),p=T-p,Kn(u,0,p<0?0:p)):[]}function cl(u,p){return u&&u.length?vc(u,Ke(p,3),!0,!0):[]}function gn(u,p){return u&&u.length?vc(u,Ke(p,3),!0):[]}function Pc(u,p,b,T){var I=u==null?0:u.length;return I?(b&&typeof b!="number"&&ir(u,p,b)&&(b=0,T=I),ag(u,p,b,T)):[]}function ao(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var I=b==null?0:ht(b);return I<0&&(I=hn(T+I,0)),Fu(u,Ke(p,3),I)}function Rc(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var I=T-1;return b!==t&&(I=ht(b),I=b<0?hn(T+I,0):zn(I,T-1)),Fu(u,Ke(p,3),I,!0)}function Md(u){var p=u==null?0:u.length;return p?tn(u,1):[]}function Mc(u){var p=u==null?0:u.length;return p?tn(u,ne):[]}function gr(u,p){var b=u==null?0:u.length;return b?(p=p===t?1:ht(p),tn(u,p)):[]}function Hf(u){for(var p=-1,b=u==null?0:u.length,T={};++p<b;){var I=u[p];T[I[0]]=I[1]}return T}function Jo(u){return u&&u.length?u[0]:t}function Ei(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var I=b==null?0:ht(b);return I<0&&(I=hn(T+I,0)),Oa(u,p,I)}function Id(u){var p=u==null?0:u.length;return p?Kn(u,0,-1):[]}var Wf=dt(function(u){var p=Ft(u,nl);return p.length&&p[0]===u[0]?ad(p):[]}),lo=dt(function(u){var p=or(u),b=Ft(u,nl);return p===or(b)?p=t:b.pop(),b.length&&b[0]===u[0]?ad(b,Ke(p,2)):[]}),Dd=dt(function(u){var p=or(u),b=Ft(u,nl);return p=typeof p=="function"?p:t,p&&b.pop(),b.length&&b[0]===u[0]?ad(b,t,p):[]});function co(u,p){return u==null?"":Yu.call(u,p)}function or(u){var p=u==null?0:u.length;return p?u[p-1]:t}function Ic(u,p,b){var T=u==null?0:u.length;if(!T)return-1;var I=T;return b!==t&&(I=ht(b),I=I<0?hn(T+I,0):zn(I,T-1)),p===p?r0(u,p,I):Fu(u,Lm,I,!0)}function qf(u,p){return u&&u.length?dd(u,ht(p)):t}var Nd=dt(Dc);function Dc(u,p){return u&&u.length&&p&&p.length?rn(u,p):u}function ar(u,p,b){return u&&u.length&&p&&p.length?rn(u,p,Ke(b,2)):u}function uo(u,p,b){return u&&u.length&&p&&p.length?rn(u,p,t,b):u}var xs=Ks(function(u,p){var b=u==null?0:u.length,T=sd(u,p);return mn(u,Ft(p,function(I){return Gt(I,b)?+I:I}).sort(Ef)),T});function vr(u,p){var b=[];if(!(u&&u.length))return b;var T=-1,I=[],j=u.length;for(p=Ke(p,3);++T<j;){var V=u[T];p(V,T,u)&&(b.push(V),I.push(T))}return mn(u,I),b}function Od(u){return u==null?u:Xu.call(u)}function Gf(u,p,b){var T=u==null?0:u.length;return T?(b&&typeof b!="number"&&ir(u,p,b)?(p=0,b=T):(p=p==null?0:ht(p),b=b===t?T:ht(b)),Kn(u,p,b)):[]}function Kf(u,p){return el(u,p)}function f0(u,p,b){return fd(u,p,Ke(b,2))}function ho(u,p){var b=u==null?0:u.length;if(b){var T=el(u,p);if(T<b&&ki(u[T],p))return T}return-1}function Tg(u,p){return el(u,p,!0)}function Yf(u,p,b){return fd(u,p,Ke(b,2),!0)}function Zo(u,p){var b=u==null?0:u.length;if(b){var T=el(u,p,!0)-1;if(ki(u[T],p))return T}return-1}function Xf(u){return u&&u.length?_f(u):[]}function ea(u,p){return u&&u.length?_f(u,Ke(p,2)):[]}function Pg(u){var p=u==null?0:u.length;return p?Kn(u,1,p):[]}function Rg(u,p,b){return u&&u.length?(p=b||p===t?1:ht(p),Kn(u,0,p<0?0:p)):[]}function Qf(u,p,b){var T=u==null?0:u.length;return T?(p=b||p===t?1:ht(p),p=T-p,Kn(u,p<0?0:p,T)):[]}function Ld(u,p){return u&&u.length?vc(u,Ke(p,3),!1,!0):[]}function p0(u,p){return u&&u.length?vc(u,Ke(p,3)):[]}var m0=dt(function(u){return xi(tn(u,1,vn,!0))}),Mg=dt(function(u){var p=or(u);return vn(p)&&(p=t),xi(tn(u,1,vn,!0),Ke(p,2))}),Ig=dt(function(u){var p=or(u);return p=typeof p=="function"?p:t,xi(tn(u,1,vn,!0),t,p)});function ta(u){return u&&u.length?xi(u):[]}function g0(u,p){return u&&u.length?xi(u,Ke(p,2)):[]}function ul(u,p){return p=typeof p=="function"?p:t,u&&u.length?xi(u,t,p):[]}function jd(u){if(!(u&&u.length))return[];var p=0;return u=qi(u,function(b){if(vn(b))return p=hn(b.length,p),!0}),ef(p,function(b){return Ft(u,Jh(b))})}function Jt(u,p){if(!(u&&u.length))return[];var b=jd(u);return p==null?b:Ft(b,function(T){return tr(p,t,T)})}var v0=dt(function(u,p){return vn(u)?zs(u,p):[]}),Dg=dt(function(u){return md(qi(u,vn))}),y0=dt(function(u){var p=or(u);return vn(p)&&(p=t),md(qi(u,vn),Ke(p,2))}),w0=dt(function(u){var p=or(u);return p=typeof p=="function"?p:t,md(qi(u,vn),t,p)}),Ng=dt(jd);function Og(u,p){return yc(u||[],p||[],Ho)}function b0(u,p){return yc(u||[],p||[],Yo)}var Zr=dt(function(u){var p=u.length,b=p>1?u[p-1]:t;return b=typeof b=="function"?(u.pop(),b):t,Jt(u,b)});function Fd(u){var p=O(u);return p.__chain__=!0,p}function _0(u,p){return p(u),u}function Ss(u,p){return p(u)}var Bd=Ks(function(u){var p=u.length,b=p?u[0]:0,T=this.__wrapped__,I=function(j){return sd(j,u)};return p>1||this.__actions__.length||!(T instanceof lt)||!Gt(b)?this.thru(I):(T=T.slice(b,+b+(p?1:0)),T.__actions__.push({func:Ss,args:[I],thisArg:t}),new Vn(T,this.__chain__).thru(function(j){return p&&!j.length&&j.push(t),j}))});function na(){return Fd(this)}function $d(){return new Vn(this.value(),this.__chain__)}function Jf(){this.__values__===t&&(this.__values__=Cx(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function Zf(){return this}function x0(u){for(var p,b=this;b instanceof Fs;){var T=kg(b);T.__index__=0,T.__values__=t,p?I.__wrapped__=T:p=T;var I=T;b=b.__wrapped__}return I.__wrapped__=u,p}function ep(){var u=this.__wrapped__;if(u instanceof lt){var p=u;return this.__actions__.length&&(p=new lt(this)),p=p.reverse(),p.__actions__.push({func:Ss,args:[Od],thisArg:t}),new Vn(p,this.__chain__)}return this.thru(Od)}function S0(){return tl(this.__wrapped__,this.__actions__)}var Lg=yd(function(u,p,b){At.call(u,b)?++u[b]:Us(u,b,1)});function jg(u,p,b){var T=ct(u)?Gh:dc;return b&&ir(u,p,b)&&(p=t),T(u,Ke(p,3))}function Ud(u,p){var b=ct(u)?qi:hf;return b(u,Ke(p,3))}var zd=Qo(ao),Fg=Qo(Rc);function tp(u,p){return tn(ra(u,p),1)}function A0(u,p){return tn(ra(u,p),ne)}function Bg(u,p,b){return b=b===t?1:ht(b),tn(ra(u,p),b)}function Vd(u,p){var b=ct(u)?Un:Vs;return b(u,Ke(p,3))}function Nc(u,p){var b=ct(u)?Lu:og;return b(u,Ke(p,3))}var np=yd(function(u,p,b){At.call(u,b)?u[b].push(p):Us(u,b,[p])});function Hd(u,p,b,T){u=es(u)?u:Gd(u),b=b&&!T?ht(b):0;var I=u.length;return b<0&&(b=hn(I+b,0)),zg(u)?b<=I&&u.indexOf(p,b)>-1:!!I&&Oa(u,p,b)>-1}var $g=dt(function(u,p,b){var T=-1,I=typeof p=="function",j=es(u)?de(u.length):[];return Vs(u,function(V){j[++T]=I?tr(p,V,b):Kr(V,p,b)}),j}),C0=yd(function(u,p,b){Us(u,b,p)});function ra(u,p){var b=ct(u)?Ft:gf;return b(u,Ke(p,3))}function E0(u,p,b,T){return u==null?[]:(ct(p)||(p=p==null?[]:[p]),b=T?t:b,ct(b)||(b=b==null?[]:[b]),mc(u,p,b))}var Oc=yd(function(u,p,b){u[b?0:1].push(p)},function(){return[[],[]]});function k0(u,p,b){var T=ct(u)?Yh:Fm,I=arguments.length<3;return T(u,Ke(p,4),b,I,Vs)}function Wd(u,p,b){var T=ct(u)?Yy:Fm,I=arguments.length<3;return T(u,Ke(p,4),b,I,og)}function o(u,p){var b=ct(u)?qi:hf;return b(u,ke(Ke(p,3)))}function c(u){var p=ct(u)?$s:Gn;return p(u)}function m(u,p,b){(b?ir(u,p,b):p===t)?p=1:p=ht(p);var T=ct(u)?Vo:wf;return T(u,p)}function w(u){var p=ct(u)?sg:Xr;return p(u)}function C(u){if(u==null)return 0;if(es(u))return zg(u)?jo(u):u.length;var p=On(u);return p==Xt||p==Sn?u.size:_i(u).length}function k(u,p,b){var T=ct(u)?Xh:bf;return b&&ir(u,p,b)&&(p=t),T(u,Ke(p,3))}var D=dt(function(u,p){if(u==null)return[];var b=p.length;return b>1&&ir(u,p[0],p[1])?p=[]:b>2&&ir(p[0],p[1],p[2])&&(p=[p[0]]),mc(u,tn(p,1),[])}),U=$t||function(){return Wt.Date.now()};function G(u,p){if(typeof p!="function")throw new Vr(a);return u=ht(u),function(){if(--u<1)return p.apply(this,arguments)}}function he(u,p,b){return p=b?t:p,p=u&&p==null?u.length:p,Gs(u,$,t,t,t,t,p)}function Ae(u,p){var b;if(typeof p!="function")throw new Vr(a);return u=ht(u),function(){return--u>0&&(b=p.apply(this,arguments)),u<=1&&(p=t),b}}var Ee=dt(function(u,p,b){var T=E;if(b.length){var I=zr(b,Ai(Ee));T|=L}return Gs(u,T,p,b,I)}),xe=dt(function(u,p,b){var T=E|P;if(b.length){var I=zr(b,Ai(xe));T|=L}return Gs(p,T,u,b,I)});function De(u,p,b){p=b?t:p;var T=Gs(u,M,t,t,t,t,t,p);return T.placeholder=De.placeholder,T}function Le(u,p,b){p=b?t:p;var T=Gs(u,N,t,t,t,t,t,p);return T.placeholder=Le.placeholder,T}function je(u,p,b){var T,I,j,V,K,te,we=0,be=!1,Ce=!1,Re=!0;if(typeof u!="function")throw new Vr(a);p=Xs(p)||0,on(b)&&(be=!!b.leading,Ce="maxWait"in b,j=Ce?hn(Xs(b.maxWait)||0,p):j,Re="trailing"in b?!!b.trailing:Re);function Ue(yn){var Ti=T,oa=I;return T=I=t,we=yn,V=u.apply(oa,Ti),V}function Qe(yn){return we=yn,K=ll(vt,p),be?Ue(yn):V}function pt(yn){var Ti=yn-te,oa=yn-we,Fx=p-Ti;return Ce?zn(Fx,j-oa):Fx}function Je(yn){var Ti=yn-te,oa=yn-we;return te===t||Ti>=p||Ti<0||Ce&&oa>=j}function vt(){var yn=U();if(Je(yn))return bt(yn);K=ll(vt,pt(yn))}function bt(yn){return K=t,Re&&T?Ue(yn):(T=I=t,V)}function Cs(){K!==t&&Af(K),we=0,T=te=I=K=t}function Rr(){return K===t?V:bt(U())}function Es(){var yn=U(),Ti=Je(yn);if(T=arguments,I=this,te=yn,Ti){if(K===t)return Qe(te);if(Ce)return Af(K),K=ll(vt,p),Ue(te)}return K===t&&(K=ll(vt,p)),V}return Es.cancel=Cs,Es.flush=Rr,Es}var sn=dt(function(u,p){return df(u,1,p)}),ie=dt(function(u,p,b){return df(u,Xs(p)||0,b)});function X(u){return Gs(u,Y)}function le(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new Vr(a);var b=function(){var T=arguments,I=p?p.apply(this,T):T[0],j=b.cache;if(j.has(I))return j.get(I);var V=u.apply(this,T);return b.cache=j.set(I,V)||j,V};return b.cache=new(le.Cache||Hr),b}le.Cache=Hr;function ke(u){if(typeof u!="function")throw new Vr(a);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function $e(u){return Ae(2,u)}var Ge=ug(function(u,p){p=p.length==1&&ct(p[0])?Ft(p[0],Sr(Ke())):Ft(tn(p,1),Sr(Ke()));var b=p.length;return dt(function(T){for(var I=-1,j=zn(T.length,b);++I<j;)T[I]=p[I].call(this,T[I]);return tr(u,this,T)})}),We=dt(function(u,p){var b=zr(p,Ai(We));return Gs(u,L,t,p,b)}),Xe=dt(function(u,p){var b=zr(p,Ai(Xe));return Gs(u,B,t,p,b)}),En=Ks(function(u,p){return Gs(u,H,t,t,t,p)});function Ct(u,p){if(typeof u!="function")throw new Vr(a);return p=p===t?p:ht(p),dt(u,p)}function fo(u,p){if(typeof u!="function")throw new Vr(a);return p=p==null?0:hn(ht(p),0),dt(function(b){var T=b[p],I=Si(b,0,p);return T&&Gi(I,T),tr(u,this,I)})}function T0(u,p,b){var T=!0,I=!0;if(typeof u!="function")throw new Vr(a);return on(b)&&(T="leading"in b?!!b.leading:T,I="trailing"in b?!!b.trailing:I),je(u,p,{leading:T,maxWait:p,trailing:I})}function NM(u){return he(u,1)}function OM(u,p){return We(gd(p),u)}function LM(){if(!arguments.length)return[];var u=arguments[0];return ct(u)?u:[u]}function jM(u){return pr(u,_)}function FM(u,p){return p=typeof p=="function"?p:t,pr(u,_,p)}function BM(u){return pr(u,g|_)}function $M(u,p){return p=typeof p=="function"?p:t,pr(u,g|_,p)}function UM(u,p){return p==null||uc(u,p,Yn(p))}function ki(u,p){return u===p||u!==u&&p!==p}var zM=Sd(no),VM=Sd(function(u,p){return u>=p}),Lc=ld(function(){return arguments}())?ld:function(u){return pn(u)&&At.call(u,"callee")&&!qu.call(u,"callee")},ct=de.isArray,HM=Wh?Sr(Wh):lg;function es(u){return u!=null&&Ug(u.length)&&!sa(u)}function vn(u){return pn(u)&&es(u)}function WM(u){return u===!0||u===!1||pn(u)&&Dn(u)==Ne}var dl=af||B0,qM=ur?Sr(ur):bi;function GM(u){return pn(u)&&u.nodeType===1&&!rp(u)}function KM(u){if(u==null)return!0;if(es(u)&&(ct(u)||typeof u=="string"||typeof u.splice=="function"||dl(u)||qd(u)||Lc(u)))return!u.length;var p=On(u);if(p==Xt||p==Sn)return!u.size;if(Ci(u))return!_i(u).length;for(var b in u)if(At.call(u,b))return!1;return!0}function YM(u,p){return Yr(u,p)}function XM(u,p,b){b=typeof b=="function"?b:t;var T=b?b(u,p):t;return T===t?Yr(u,p,t,b):!!T}function P0(u){if(!pn(u))return!1;var p=Dn(u);return p==it||p==Ye||typeof u.message=="string"&&typeof u.name=="string"&&!rp(u)}function QM(u){return typeof u=="number"&&Ua(u)}function sa(u){if(!on(u))return!1;var p=Dn(u);return p==Mt||p==un||p==ve||p==Co}function _x(u){return typeof u=="number"&&u==ht(u)}function Ug(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=z}function on(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function pn(u){return u!=null&&typeof u=="object"}var xx=Lo?Sr(Lo):cg;function JM(u,p){return u===p||Qa(u,p,Cc(p))}function ZM(u,p,b){return b=typeof b=="function"?b:t,Qa(u,p,Cc(p),b)}function eI(u){return Sx(u)&&u!=+u}function tI(u){if(h0(u))throw new et(i);return pf(u)}function nI(u){return u===null}function rI(u){return u==null}function Sx(u){return typeof u=="number"||pn(u)&&Dn(u)==$r}function rp(u){if(!pn(u)||Dn(u)!=Mn)return!1;var p=ms(u);if(p===null)return!0;var b=At.call(p,"constructor")&&p.constructor;return typeof b=="function"&&b instanceof b&&ec.call(b)==Hu}var R0=Ou?Sr(Ou):fc;function sI(u){return _x(u)&&u>=-z&&u<=z}var Ax=Na?Sr(Na):Hs;function zg(u){return typeof u=="string"||!ct(u)&&pn(u)&&Dn(u)==oi}function As(u){return typeof u=="symbol"||pn(u)&&Dn(u)==Eo}var qd=Dm?Sr(Dm):pc;function iI(u){return u===t}function oI(u){return pn(u)&&On(u)==Ui}function aI(u){return pn(u)&&Dn(u)==vu}var lI=Sd(ro),cI=Sd(function(u,p){return u<=p});function Cx(u){if(!u)return[];if(es(u))return zg(u)?Ar(u):rr(u);if(mi&&u[mi])return t0(u[mi]());var p=On(u),b=p==Xt?$u:p==Sn?Ki:Gd;return b(u)}function ia(u){if(!u)return u===0?u:0;if(u=Xs(u),u===ne||u===-ne){var p=u<0?-1:1;return p*re}return u===u?u:0}function ht(u){var p=ia(u),b=p%1;return p===p?b?p-b:p:0}function Ex(u){return u?vi(ht(u),0,F):0}function Xs(u){if(typeof u=="number")return u;if(As(u))return J;if(on(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=on(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=Bm(u);var b=In.test(u);return b||Io.test(u)?Du(u.slice(2),b?2:8):Et.test(u)?J:+u}function kx(u){return vs(u,ts(u))}function uI(u){return u?vi(ht(u),-z,z):u===0?u:0}function Ot(u){return u==null?"":mr(u)}var dI=rl(function(u,p){if(Ci(p)||es(p)){vs(p,Yn(p),u);return}for(var b in p)At.call(p,b)&&Ho(u,b,p[b])}),Tx=rl(function(u,p){vs(p,ts(p),u)}),Vg=rl(function(u,p,b,T){vs(p,ts(p),u,T)}),hI=rl(function(u,p,b,T){vs(p,Yn(p),u,T)}),fI=Ks(sd);function pI(u,p){var b=qa(u);return p==null?b:zt(b,p)}var mI=dt(function(u,p){u=Nt(u);var b=-1,T=p.length,I=T>2?p[2]:t;for(I&&ir(p[0],p[1],I)&&(T=1);++b<T;)for(var j=p[b],V=ts(j),K=-1,te=V.length;++K<te;){var we=V[K],be=u[we];(be===t||ki(be,Ls[we])&&!At.call(u,we))&&(u[we]=j[we])}return u}),gI=dt(function(u){return u.push(t,Df),tr(Px,t,u)});function vI(u,p){return Om(u,Ke(p,3),kr)}function yI(u,p){return Om(u,Ke(p,3),to)}function wI(u,p){return u==null?u:id(u,Ke(p,3),ts)}function bI(u,p){return u==null?u:hc(u,Ke(p,3),ts)}function _I(u,p){return u&&kr(u,Ke(p,3))}function xI(u,p){return u&&to(u,Ke(p,3))}function SI(u){return u==null?[]:Xa(u,Yn(u))}function AI(u){return u==null?[]:Xa(u,ts(u))}function M0(u,p,b){var T=u==null?t:yi(u,p);return T===t?b:T}function CI(u,p){return u!=null&&Ff(u,p,Gr)}function I0(u,p){return u!=null&&Ff(u,p,qo)}var EI=gg(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=tc.call(p)),u[p]=b},N0(ns)),kI=gg(function(u,p,b){p!=null&&typeof p.toString!="function"&&(p=tc.call(p)),At.call(u,p)?u[p].push(b):u[p]=[b]},Ke),TI=dt(Kr);function Yn(u){return es(u)?Bs(u):_i(u)}function ts(u){return es(u)?Bs(u,!0):mf(u)}function PI(u,p){var b={};return p=Ke(p,3),kr(u,function(T,I,j){Us(b,p(T,I,j),T)}),b}function RI(u,p){var b={};return p=Ke(p,3),kr(u,function(T,I,j){Us(b,I,p(T,I,j))}),b}var MI=rl(function(u,p,b){Go(u,p,b)}),Px=rl(function(u,p,b,T){Go(u,p,b,T)}),II=Ks(function(u,p){var b={};if(u==null)return b;var T=!1;p=Ft(p,function(j){return j=qs(j,u),T||(T=j.length>1),j}),vs(u,Sc(u),b),T&&(b=pr(b,g|v|_,Nf));for(var I=p.length;I--;)pd(b,p[I]);return b});function DI(u,p){return Rx(u,ke(Ke(p)))}var NI=Ks(function(u,p){return u==null?{}:yf(u,p)});function Rx(u,p){if(u==null)return{};var b=Ft(Sc(u),function(T){return[T]});return p=Ke(p),so(u,b,function(T,I){return p(T,I[0])})}function OI(u,p,b){p=qs(p,u);var T=-1,I=p.length;for(I||(I=1,u=t);++T<I;){var j=u==null?t:u[_s(p[T])];j===t&&(T=I,j=b),u=sa(j)?j.call(u):j}return u}function LI(u,p,b){return u==null?u:Yo(u,p,b)}function jI(u,p,b,T){return T=typeof T=="function"?T:t,u==null?u:Yo(u,p,b,T)}var Mx=Mf(Yn),Ix=Mf(ts);function FI(u,p,b){var T=ct(u),I=T||dl(u)||qd(u);if(p=Ke(p,4),b==null){var j=u&&u.constructor;I?b=T?new j:[]:on(u)?b=sa(j)?qa(ms(u)):{}:b={}}return(I?Un:kr)(u,function(V,K,te){return p(b,V,K,te)}),b}function BI(u,p){return u==null?!0:pd(u,p)}function $I(u,p,b){return u==null?u:Sf(u,p,gd(b))}function UI(u,p,b,T){return T=typeof T=="function"?T:t,u==null?u:Sf(u,p,gd(b),T)}function Gd(u){return u==null?[]:Jl(u,Yn(u))}function zI(u){return u==null?[]:Jl(u,ts(u))}function VI(u,p,b){return b===t&&(b=p,p=t),b!==t&&(b=Xs(b),b=b===b?b:0),p!==t&&(p=Xs(p),p=p===p?p:0),vi(Xs(u),p,b)}function HI(u,p,b){return p=ia(p),b===t?(b=p,p=0):b=ia(b),u=Xs(u),ff(u,p,b)}function WI(u,p,b){if(b&&typeof b!="boolean"&&ir(u,p,b)&&(p=b=t),b===t&&(typeof p=="boolean"?(b=p,p=t):typeof u=="boolean"&&(b=u,u=t)),u===t&&p===t?(u=0,p=1):(u=ia(u),p===t?(p=u,u=0):p=ia(p)),u>p){var T=u;u=p,p=T}if(b||u%1||p%1){var I=ic();return zn(u+I*(p-u+Vh("1e-"+((I+"").length-1))),p)}return Za(u,p)}var qI=Xo(function(u,p,b){return p=p.toLowerCase(),u+(b?Dx(p):p)});function Dx(u){return D0(Ot(u).toLowerCase())}function Nx(u){return u=Ot(u),u&&u.replace(bm,zm).replace(Pm,"")}function GI(u,p,b){u=Ot(u),p=mr(p);var T=u.length;b=b===t?T:vi(ht(b),0,T);var I=b;return b-=p.length,b>=0&&u.slice(b,I)==p}function KI(u){return u=Ot(u),u&&wu.test(u)?u.replace(di,Vm):u}function YI(u){return u=Ot(u),u&&Mo.test(u)?u.replace(Ro,"\\$&"):u}var XI=Xo(function(u,p,b){return u+(b?"-":"")+p.toLowerCase()}),QI=Xo(function(u,p,b){return u+(b?" ":"")+p.toLowerCase()}),JI=Tf("toLowerCase");function ZI(u,p,b){u=Ot(u),p=ht(p);var T=p?jo(u):0;if(!p||T>=p)return u;var I=(p-T)/2;return _c(Yi(I),b)+u+_c(Bo(I),b)}function eD(u,p,b){u=Ot(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?u+_c(p-T,b):u}function tD(u,p,b){u=Ot(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?_c(p-T,b)+u:u}function nD(u,p,b){return b||p==null?p=0:p&&(p=+p),Jm(Ot(u).replace(Su,""),p||0)}function rD(u,p,b){return(b?ir(u,p,b):p===t)?p=1:p=ht(p),Ko(Ot(u),p)}function sD(){var u=arguments,p=Ot(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var iD=Xo(function(u,p,b){return u+(b?"_":"")+p.toLowerCase()});function oD(u,p,b){return b&&typeof b!="number"&&ir(u,p,b)&&(p=b=t),b=b===t?F:b>>>0,b?(u=Ot(u),u&&(typeof p=="string"||p!=null&&!R0(p))&&(p=mr(p),!p&&ja(u))?Si(Ar(u),0,b):u.split(p,b)):[]}var aD=Xo(function(u,p,b){return u+(b?" ":"")+D0(p)});function lD(u,p,b){return u=Ot(u),b=b==null?0:vi(ht(b),0,u.length),p=mr(p),u.slice(b,b+p.length)==p}function cD(u,p,b){var T=O.templateSettings;b&&ir(u,p,b)&&(p=t),u=Ot(u),p=Vg({},p,T,If);var I=Vg({},p.imports,T.imports,If),j=Yn(I),V=Jl(I,j),K,te,we=0,be=p.interpolate||Cu,Ce="__p += '",Re=Zl((p.escape||Cu).source+"|"+be.source+"|"+(be===zl?ye:Cu).source+"|"+(p.evaluate||Cu).source+"|$","g"),Ue="//# sourceURL="+(At.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++qy+"]")+`
`;u.replace(Re,function(Je,vt,bt,Cs,Rr,Es){return bt||(bt=Cs),Ce+=u.slice(we,Es).replace($y,Hm),vt&&(K=!0,Ce+=`' +
__e(`+vt+`) +
'`),Rr&&(te=!0,Ce+=`';
`+Rr+`;
__p += '`),bt&&(Ce+=`' +
((__t = (`+bt+`)) == null ? '' : __t) +
'`),we=Es+Je.length,Je}),Ce+=`';
`;var Qe=At.call(p,"variable")&&p.variable;if(!Qe)Ce=`with (obj) {
`+Ce+`
}
`;else if(pe.test(Qe))throw new et(l);Ce=(te?Ce.replace(Bl,""):Ce).replace($l,"$1").replace(Ul,"$1;"),Ce="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ce+`return __p
}`;var pt=Lx(function(){return St(j,Ue+"return "+Ce).apply(t,V)});if(pt.source=Ce,P0(pt))throw pt;return pt}function uD(u){return Ot(u).toLowerCase()}function dD(u){return Ot(u).toUpperCase()}function hD(u,p,b){if(u=Ot(u),u&&(b||p===t))return Bm(u);if(!u||!(p=mr(p)))return u;var T=Ar(u),I=Ar(p),j=$m(T,I),V=tf(T,I)+1;return Si(T,j,V).join("")}function fD(u,p,b){if(u=Ot(u),u&&(b||p===t))return u.slice(0,zu(u)+1);if(!u||!(p=mr(p)))return u;var T=Ar(u),I=tf(T,Ar(p))+1;return Si(T,0,I).join("")}function pD(u,p,b){if(u=Ot(u),u&&(b||p===t))return u.replace(Su,"");if(!u||!(p=mr(p)))return u;var T=Ar(u),I=$m(T,Ar(p));return Si(T,I).join("")}function mD(u,p){var b=ue,T=oe;if(on(p)){var I="separator"in p?p.separator:I;b="length"in p?ht(p.length):b,T="omission"in p?mr(p.omission):T}u=Ot(u);var j=u.length;if(ja(u)){var V=Ar(u);j=V.length}if(b>=j)return u;var K=b-jo(T);if(K<1)return T;var te=V?Si(V,0,K).join(""):u.slice(0,K);if(I===t)return te+T;if(V&&(K+=te.length-K),R0(I)){if(u.slice(K).search(I)){var we,be=te;for(I.global||(I=Zl(I.source,Ot(Be.exec(I))+"g")),I.lastIndex=0;we=I.exec(be);)var Ce=we.index;te=te.slice(0,Ce===t?K:Ce)}}else if(u.indexOf(mr(I),K)!=K){var Re=te.lastIndexOf(I);Re>-1&&(te=te.slice(0,Re))}return te+T}function gD(u){return u=Ot(u),u&&yu.test(u)?u.replace(ui,Wm):u}var vD=Xo(function(u,p,b){return u+(b?" ":"")+p.toUpperCase()}),D0=Tf("toUpperCase");function Ox(u,p,b){return u=Ot(u),p=b?t:p,p===t?e0(u)?s0(u):Qy(u):u.match(p)||[]}var Lx=dt(function(u,p){try{return tr(u,t,p)}catch(b){return P0(b)?b:new et(b)}}),yD=Ks(function(u,p){return Un(p,function(b){b=_s(b),Us(u,b,Ee(u[b],u))}),u});function wD(u){var p=u==null?0:u.length,b=Ke();return u=p?Ft(u,function(T){if(typeof T[1]!="function")throw new Vr(a);return[b(T[0]),T[1]]}):[],dt(function(T){for(var I=-1;++I<p;){var j=u[I];if(tr(j[0],this,T))return tr(j[1],this,T)}})}function bD(u){return ig(pr(u,g))}function N0(u){return function(){return u}}function _D(u,p){return u==null||u!==u?p:u}var xD=_d(),SD=_d(!0);function ns(u){return u}function O0(u){return Ja(typeof u=="function"?u:pr(u,g))}function AD(u){return ud(pr(u,g))}function CD(u,p){return qt(u,pr(p,g))}var ED=dt(function(u,p){return function(b){return Kr(b,u,p)}}),kD=dt(function(u,p){return function(b){return Kr(u,b,p)}});function L0(u,p,b){var T=Yn(p),I=Xa(p,T);b==null&&!(on(p)&&(I.length||!T.length))&&(b=p,p=u,u=this,I=Xa(p,Yn(p)));var j=!(on(b)&&"chain"in b)||!!b.chain,V=sa(u);return Un(I,function(K){var te=p[K];u[K]=te,V&&(u.prototype[K]=function(){var we=this.__chain__;if(j||we){var be=u(this.__wrapped__),Ce=be.__actions__=rr(this.__actions__);return Ce.push({func:te,args:arguments,thisArg:u}),be.__chain__=we,be}return te.apply(u,Gi([this.value()],arguments))})}),u}function TD(){return Wt._===this&&(Wt._=Km),this}function j0(){}function PD(u){return u=ht(u),dt(function(p){return dd(p,u)})}var RD=xd(Ft),MD=xd(Gh),ID=xd(Xh);function jx(u){return Oe(u)?Jh(_s(u)):Qt(u)}function DD(u){return function(p){return u==null?t:yi(u,p)}}var ND=Rf(),OD=Rf(!0);function F0(){return[]}function B0(){return!1}function LD(){return{}}function jD(){return""}function FD(){return!0}function BD(u,p){if(u=ht(u),u<1||u>z)return[];var b=F,T=zn(u,F);p=Ke(p),u-=F;for(var I=ef(T,p);++b<u;)p(b);return I}function $D(u){return ct(u)?Ft(u,_s):As(u)?[u]:rr(zf(Ot(u)))}function UD(u){var p=++$a;return Ot(u)+p}var zD=bc(function(u,p){return u+p},0),VD=Nn("ceil"),HD=bc(function(u,p){return u/p},1),WD=Nn("floor");function qD(u){return u&&u.length?Wo(u,ns,no):t}function GD(u,p){return u&&u.length?Wo(u,Ke(p,2),no):t}function KD(u){return jm(u,ns)}function YD(u,p){return jm(u,Ke(p,2))}function XD(u){return u&&u.length?Wo(u,ns,ro):t}function QD(u,p){return u&&u.length?Wo(u,Ke(p,2),ro):t}var JD=bc(function(u,p){return u*p},1),ZD=Nn("round"),eN=bc(function(u,p){return u-p},0);function tN(u){return u&&u.length?Zh(u,ns):0}function nN(u,p){return u&&u.length?Zh(u,Ke(p,2)):0}return O.after=G,O.ary=he,O.assign=dI,O.assignIn=Tx,O.assignInWith=Vg,O.assignWith=hI,O.at=fI,O.before=Ae,O.bind=Ee,O.bindAll=yD,O.bindKey=xe,O.castArray=LM,O.chain=Fd,O.chunk=Rd,O.compact=Vf,O.concat=Jr,O.cond=wD,O.conforms=bD,O.constant=N0,O.countBy=Lg,O.create=pI,O.curry=De,O.curryRight=Le,O.debounce=je,O.defaults=mI,O.defaultsDeep=gI,O.defer=sn,O.delay=ie,O.difference=wt,O.differenceBy=Cn,O.differenceWith=fn,O.drop=jn,O.dropRight=Pr,O.dropRightWhile=cl,O.dropWhile=gn,O.fill=Pc,O.filter=Ud,O.flatMap=tp,O.flatMapDeep=A0,O.flatMapDepth=Bg,O.flatten=Md,O.flattenDeep=Mc,O.flattenDepth=gr,O.flip=X,O.flow=xD,O.flowRight=SD,O.fromPairs=Hf,O.functions=SI,O.functionsIn=AI,O.groupBy=np,O.initial=Id,O.intersection=Wf,O.intersectionBy=lo,O.intersectionWith=Dd,O.invert=EI,O.invertBy=kI,O.invokeMap=$g,O.iteratee=O0,O.keyBy=C0,O.keys=Yn,O.keysIn=ts,O.map=ra,O.mapKeys=PI,O.mapValues=RI,O.matches=AD,O.matchesProperty=CD,O.memoize=le,O.merge=MI,O.mergeWith=Px,O.method=ED,O.methodOf=kD,O.mixin=L0,O.negate=ke,O.nthArg=PD,O.omit=II,O.omitBy=DI,O.once=$e,O.orderBy=E0,O.over=RD,O.overArgs=Ge,O.overEvery=MD,O.overSome=ID,O.partial=We,O.partialRight=Xe,O.partition=Oc,O.pick=NI,O.pickBy=Rx,O.property=jx,O.propertyOf=DD,O.pull=Nd,O.pullAll=Dc,O.pullAllBy=ar,O.pullAllWith=uo,O.pullAt=xs,O.range=ND,O.rangeRight=OD,O.rearg=En,O.reject=o,O.remove=vr,O.rest=Ct,O.reverse=Od,O.sampleSize=m,O.set=LI,O.setWith=jI,O.shuffle=w,O.slice=Gf,O.sortBy=D,O.sortedUniq=Xf,O.sortedUniqBy=ea,O.split=oD,O.spread=fo,O.tail=Pg,O.take=Rg,O.takeRight=Qf,O.takeRightWhile=Ld,O.takeWhile=p0,O.tap=_0,O.throttle=T0,O.thru=Ss,O.toArray=Cx,O.toPairs=Mx,O.toPairsIn=Ix,O.toPath=$D,O.toPlainObject=kx,O.transform=FI,O.unary=NM,O.union=m0,O.unionBy=Mg,O.unionWith=Ig,O.uniq=ta,O.uniqBy=g0,O.uniqWith=ul,O.unset=BI,O.unzip=jd,O.unzipWith=Jt,O.update=$I,O.updateWith=UI,O.values=Gd,O.valuesIn=zI,O.without=v0,O.words=Ox,O.wrap=OM,O.xor=Dg,O.xorBy=y0,O.xorWith=w0,O.zip=Ng,O.zipObject=Og,O.zipObjectDeep=b0,O.zipWith=Zr,O.entries=Mx,O.entriesIn=Ix,O.extend=Tx,O.extendWith=Vg,L0(O,O),O.add=zD,O.attempt=Lx,O.camelCase=qI,O.capitalize=Dx,O.ceil=VD,O.clamp=VI,O.clone=jM,O.cloneDeep=BM,O.cloneDeepWith=$M,O.cloneWith=FM,O.conformsTo=UM,O.deburr=Nx,O.defaultTo=_D,O.divide=HD,O.endsWith=GI,O.eq=ki,O.escape=KI,O.escapeRegExp=YI,O.every=jg,O.find=zd,O.findIndex=ao,O.findKey=vI,O.findLast=Fg,O.findLastIndex=Rc,O.findLastKey=yI,O.floor=WD,O.forEach=Vd,O.forEachRight=Nc,O.forIn=wI,O.forInRight=bI,O.forOwn=_I,O.forOwnRight=xI,O.get=M0,O.gt=zM,O.gte=VM,O.has=CI,O.hasIn=I0,O.head=Jo,O.identity=ns,O.includes=Hd,O.indexOf=Ei,O.inRange=HI,O.invoke=TI,O.isArguments=Lc,O.isArray=ct,O.isArrayBuffer=HM,O.isArrayLike=es,O.isArrayLikeObject=vn,O.isBoolean=WM,O.isBuffer=dl,O.isDate=qM,O.isElement=GM,O.isEmpty=KM,O.isEqual=YM,O.isEqualWith=XM,O.isError=P0,O.isFinite=QM,O.isFunction=sa,O.isInteger=_x,O.isLength=Ug,O.isMap=xx,O.isMatch=JM,O.isMatchWith=ZM,O.isNaN=eI,O.isNative=tI,O.isNil=rI,O.isNull=nI,O.isNumber=Sx,O.isObject=on,O.isObjectLike=pn,O.isPlainObject=rp,O.isRegExp=R0,O.isSafeInteger=sI,O.isSet=Ax,O.isString=zg,O.isSymbol=As,O.isTypedArray=qd,O.isUndefined=iI,O.isWeakMap=oI,O.isWeakSet=aI,O.join=co,O.kebabCase=XI,O.last=or,O.lastIndexOf=Ic,O.lowerCase=QI,O.lowerFirst=JI,O.lt=lI,O.lte=cI,O.max=qD,O.maxBy=GD,O.mean=KD,O.meanBy=YD,O.min=XD,O.minBy=QD,O.stubArray=F0,O.stubFalse=B0,O.stubObject=LD,O.stubString=jD,O.stubTrue=FD,O.multiply=JD,O.nth=qf,O.noConflict=TD,O.noop=j0,O.now=U,O.pad=ZI,O.padEnd=eD,O.padStart=tD,O.parseInt=nD,O.random=WI,O.reduce=k0,O.reduceRight=Wd,O.repeat=rD,O.replace=sD,O.result=OI,O.round=ZD,O.runInContext=Z,O.sample=c,O.size=C,O.snakeCase=iD,O.some=k,O.sortedIndex=Kf,O.sortedIndexBy=f0,O.sortedIndexOf=ho,O.sortedLastIndex=Tg,O.sortedLastIndexBy=Yf,O.sortedLastIndexOf=Zo,O.startCase=aD,O.startsWith=lD,O.subtract=eN,O.sum=tN,O.sumBy=nN,O.template=cD,O.times=BD,O.toFinite=ia,O.toInteger=ht,O.toLength=Ex,O.toLower=uD,O.toNumber=Xs,O.toSafeInteger=uI,O.toString=Ot,O.toUpper=dD,O.trim=hD,O.trimEnd=fD,O.trimStart=pD,O.truncate=mD,O.unescape=gD,O.uniqueId=UD,O.upperCase=vD,O.upperFirst=D0,O.each=Vd,O.eachRight=Nc,O.first=Jo,L0(O,function(){var u={};return kr(O,function(p,b){At.call(O.prototype,b)||(u[b]=p)}),u}(),{chain:!1}),O.VERSION=r,Un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){O[u].placeholder=O}),Un(["drop","take"],function(u,p){lt.prototype[u]=function(b){b=b===t?1:hn(ht(b),0);var T=this.__filtered__&&!p?new lt(this):this.clone();return T.__filtered__?T.__takeCount__=zn(b,T.__takeCount__):T.__views__.push({size:zn(b,F),type:u+(T.__dir__<0?"Right":"")}),T},lt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),Un(["filter","map","takeWhile"],function(u,p){var b=p+1,T=b==me||b==q;lt.prototype[u]=function(I){var j=this.clone();return j.__iteratees__.push({iteratee:Ke(I,3),type:b}),j.__filtered__=j.__filtered__||T,j}}),Un(["head","last"],function(u,p){var b="take"+(p?"Right":"");lt.prototype[u]=function(){return this[b](1).value()[0]}}),Un(["initial","tail"],function(u,p){var b="drop"+(p?"":"Right");lt.prototype[u]=function(){return this.__filtered__?new lt(this):this[b](1)}}),lt.prototype.compact=function(){return this.filter(ns)},lt.prototype.find=function(u){return this.filter(u).head()},lt.prototype.findLast=function(u){return this.reverse().find(u)},lt.prototype.invokeMap=dt(function(u,p){return typeof u=="function"?new lt(this):this.map(function(b){return Kr(b,u,p)})}),lt.prototype.reject=function(u){return this.filter(ke(Ke(u)))},lt.prototype.slice=function(u,p){u=ht(u);var b=this;return b.__filtered__&&(u>0||p<0)?new lt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),p!==t&&(p=ht(p),b=p<0?b.dropRight(-p):b.take(p-u)),b)},lt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},lt.prototype.toArray=function(){return this.take(F)},kr(lt.prototype,function(u,p){var b=/^(?:filter|find|map|reject)|While$/.test(p),T=/^(?:head|last)$/.test(p),I=O[T?"take"+(p=="last"?"Right":""):p],j=T||/^find/.test(p);I&&(O.prototype[p]=function(){var V=this.__wrapped__,K=T?[1]:arguments,te=V instanceof lt,we=K[0],be=te||ct(V),Ce=function(vt){var bt=I.apply(O,Gi([vt],K));return T&&Re?bt[0]:bt};be&&b&&typeof we=="function"&&we.length!=1&&(te=be=!1);var Re=this.__chain__,Ue=!!this.__actions__.length,Qe=j&&!Re,pt=te&&!Ue;if(!j&&be){V=pt?V:new lt(this);var Je=u.apply(V,K);return Je.__actions__.push({func:Ss,args:[Ce],thisArg:t}),new Vn(Je,Re)}return Qe&&pt?u.apply(this,K):(Je=this.thru(Ce),Qe?T?Je.value()[0]:Je.value():Je)})}),Un(["pop","push","shift","sort","splice","unshift"],function(u){var p=fi[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",T=/^(?:pop|shift)$/.test(u);O.prototype[u]=function(){var I=arguments;if(T&&!this.__chain__){var j=this.value();return p.apply(ct(j)?j:[],I)}return this[b](function(V){return p.apply(ct(V)?V:[],I)})}}),kr(lt.prototype,function(u,p){var b=O[p];if(b){var T=b.name+"";At.call(Ha,T)||(Ha[T]=[]),Ha[T].push({name:p,func:b})}}),Ha[il(t,P).name]=[{name:"wrapper",func:t}],lt.prototype.clone=Zu,lt.prototype.reverse=cf,lt.prototype.value=Ga,O.prototype.at=Bd,O.prototype.chain=na,O.prototype.commit=$d,O.prototype.next=Jf,O.prototype.plant=x0,O.prototype.reverse=ep,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=S0,O.prototype.first=O.prototype.head,mi&&(O.prototype[mi]=Zf),O},Fa=i0();Os?((Os.exports=Fa)._=Fa,Ql._=Fa):Wt._=Fa}).call(Lz)}(Ap,Ap.exports)),Ap.exports}var k9=jz();function ut(...n){return Oz(wk(n))}function T9(n,e){const t={position:n.position,size:n.size,styles:n.styles,visible:n.visible!==!1};if(e==="desktop")return t;const r=n.layouts?.[e]||{};return{position:r.position||t.position,size:r.size||t.size,styles:{...t.styles,...r.styles||{}},visible:r.visible!==void 0?r.visible:t.visible}}function P9(n){return typeof n!="string"?(console.warn("sanitizeFilename expects a string argument"),`invalid_filename_${Date.now()}`):n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"")}function R9(n,e=!0){const t=Number(n);if(isNaN(t))return e?"R$ 0,00":"0,00";const r={style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2};return e?t.toLocaleString("pt-BR",r):t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function WA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function dy(...n){return e=>{let t=!1;const r=n.map(s=>{const i=WA(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():WA(n[s],null)}}}}function xt(...n){return A.useCallback(dy(...n),n)}function Zc(n){const e=Bz(n),t=A.forwardRef((r,s)=>{const{children:i,...a}=r,l=A.Children.toArray(i),d=l.find($z);if(d){const h=d.props.children,f=l.map(g=>g===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:g);return y.jsx(e,{...a,ref:s,children:A.isValidElement(h)?A.cloneElement(h,void 0,f):null})}return y.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var Fz=Zc("Slot");function Bz(n){const e=A.forwardRef((t,r)=>{const{children:s,...i}=t;if(A.isValidElement(s)){const a=zz(s),l=Uz(i,s.props);return s.type!==A.Fragment&&(l.ref=r?dy(r,a):a),A.cloneElement(s,l)}return A.Children.count(s)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Ck=Symbol("radix.slottable");function M9(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=Ck,e}function $z(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Ck}function Uz(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...l)=>{const d=i(...l);return s(...l),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function zz(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const qA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,GA=wk,Ek=(n,e)=>t=>{var r;if(e?.variants==null)return GA(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const f=t?.[h],g=i?.[h];if(f===null)return null;const v=qA(f)||qA(g);return s[h][v]}),l=t&&Object.entries(t).reduce((h,f)=>{let[g,v]=f;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:g,className:v,..._}=f;return Object.entries(_).every(S=>{let[x,E]=S;return Array.isArray(E)?E.includes({...i,...l}[x]):{...i,...l}[x]===E})?[...h,g,v]:h},[]);return GA(n,a,d,t?.class,t?.className)},Vz=Ek("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-button-primary text-button-primary-foreground hover:bg-button-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Rt=ot.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?Fz:"button";return y.jsx(a,{className:ut(Vz({variant:e,size:t,className:n})),ref:i,...s})});Rt.displayName="Button";const rh=({icon:n,text:e,active:t,onClick:r,collapsed:s,isBottomIcon:i=!1,hideActiveIndicator:a=!1,customStyle:l="",activeStyle:d=""})=>y.jsxs("li",{className:ut(`
      relative flex items-center py-2 px-3 font-medium rounded-md cursor-pointer
      transition-colors group text-sm`,t?d||"bg-primary text-primary-foreground":`text-muted-foreground/80 dark:text-foreground/80 hover:bg-accent hover:text-accent-foreground ${i&&s?"py-2 justify-center":""}`,l),onClick:r,children:[y.jsx(n,{className:`w-4 h-4 ${s?"mx-auto":"mr-3"}`}),!s&&y.jsx("span",{className:"transition-opacity duration-300",children:e}),!s&&t&&!a&&y.jsx(Zn.div,{layoutId:"activeIndicator",className:"absolute -left-1 w-1 h-5 bg-button-primary-foreground rounded-r-md",initial:!1,animate:{opacity:1},transition:{type:"spring",stiffness:300,damping:30}}),s&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
        invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:e})]}),Hz=({activeTab:n,setActiveTab:e,collapsed:t,setCollapsed:r})=>{const{user:s,logout:i,settings:a,isFeatureEnabled:l}=hs(),{theme:d}=lE(),h=Mh(),f=async()=>{try{await i(),h("/login")}catch(H){console.error("Erro no Logout:",H.message)}},g=[{id:"dashboard",text:"Dashboard",icon:JU,path:"/dashboard",feature:null},{id:"workflow",text:"Trabalhos",icon:Gp,path:"/workflow",feature:null},{id:"clients",text:"Clientes",icon:vk,path:"/clients",feature:null},{id:"financial",text:"Financeiro",icon:Xp,path:"/financial",feature:null},{id:"calendar",text:"Agenda",icon:lk,path:"/calendar",feature:"agenda_pro"},{id:"reports",text:"Relatrios",icon:ok,path:"/reports",feature:"relatorios"},{id:"service-packages",text:"Pacotes",icon:Gp,path:"/service-packages",feature:"pacotes_servico"},{id:"my-setup",text:"Meu Setup",icon:dk,path:"/my-setup",feature:"meu_setup"},{id:"precifique",text:"Precifique",icon:Kp,path:"/precifique",feature:"precifique"},{id:"reserva-inteligente",text:"Reserva",icon:b_,path:"/reserva-inteligente",feature:"reserva_inteligente"}].filter(H=>!H.feature||l(H.feature)),v=a?.user_name||s?.user_metadata?.full_name||s?.email||"Usurio",_=a?.contact_email||s?.email||"No informado",S=a?.profile_photo||s?.user_metadata?.avatar_url,x="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20escuro%20gofotografo.png",E="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png",P="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//favicon%20gofotografo.png",R=a?.logo,M=R||(d==="dark"?x:E),N=R||P,L=()=>{e("account-settings"),h("/account-settings")},B=(H,Y)=>{e(H),h(Y),H==="quadros"&&!t?r(!0):H!=="quadros"&&t&&Y.startsWith("/quadros")};return y.jsxs(Zn.nav,{initial:!1,animate:{width:t?"4rem":"16rem"},className:`
        h-screen bg-card border-r border-border 
        flex flex-col p-2 transition-width duration-300 ease-in-out fixed left-0 top-0 z-30 hidden md:flex
      `,children:[y.jsx("div",{className:"flex items-center justify-center h-16 pt-4 mb-4",children:y.jsx(vO,{to:"/dashboard",onClick:()=>B("dashboard","/dashboard"),children:y.jsx(Oi,{mode:"wait",initial:!1,children:y.jsx(Zn.img,{src:t?N:M,alt:"Logotipo",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`transition-all duration-300 ${t?"h-8 w-auto":"h-9 w-auto"}`},t?"collapsed":"full")})})}),y.jsx("ul",{className:"flex-grow space-y-3 overflow-y-auto overflow-x-hidden scrollbar-thin",children:g.map(H=>y.jsx(rh,{icon:H.icon,text:H.text,active:n===H.id,onClick:()=>B(H.id,H.path),collapsed:t,customStyle:H.customStyle},H.id))}),!1,y.jsx("div",{className:"border-t border-border/50 my-2"}),l("propostas_avancadas")&&y.jsx("div",{className:"mb-2",children:y.jsx(rh,{icon:XU,text:"GO.STUDIO",active:n==="studio",onClick:()=>B("studio","/studio"),collapsed:t})}),l("quadros")&&y.jsx("div",{className:"mb-2",children:y.jsx(rh,{icon:gk,text:"Quadros",active:n==="quadros",onClick:()=>B("quadros","/quadros"),collapsed:t,hideActiveIndicator:!1})}),y.jsx("div",{className:"mb-2",children:y.jsx(rh,{icon:y_,text:"Indique e Ganhe",active:n==="referrals",onClick:()=>B("referrals","/referrals"),collapsed:t,customStyle:"border border-green-500/50 text-green-400 hover:bg-green-500/10 rounded-md",activeStyle:"bg-green-500/10 text-green-400",hideActiveIndicator:!0})}),y.jsxs("div",{className:"mt-auto border-t border-border pt-2",children:[y.jsxs("div",{className:`
            flex items-center p-2 rounded-lg cursor-pointer
            ${t?"justify-center":"justify-start"}
            hover:bg-accent transition-colors group
          `,onClick:L,title:"Minha Conta",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-foreground border-2 border-button-primary-foreground overflow-hidden flex-shrink-0",children:S?y.jsx("img",{src:S,alt:v,className:"w-full h-full object-cover"}):v?.charAt(0).toUpperCase()}),!t&&y.jsxs("div",{className:"ml-2 overflow-hidden",children:[y.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:v}),y.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:_})]}),t&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
              invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:v})]}),y.jsxs("div",{className:`flex ${t?"flex-col items-center space-y-1":"items-center justify-around"} mt-1`,children:[y.jsx(rh,{icon:mk,text:"Configuraes",active:n==="settings",onClick:()=>B("settings","/settings"),collapsed:t,isBottomIcon:!0}),y.jsx(rh,{icon:hk,text:"Sair",active:!1,onClick:f,collapsed:t,isBottomIcon:!0})]})]})]})};function Fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Wz(n,e){const t=A.createContext(e),r=i=>{const{children:a,...l}=i,d=A.useMemo(()=>l,Object.values(l));return y.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function s(i){const a=A.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function xo(n,e=[]){let t=[];function r(i,a){const l=A.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:_,...S}=g,x=v?.[n]?.[d]||l,E=A.useMemo(()=>S,Object.values(S));return y.jsx(x.Provider,{value:E,children:_})};h.displayName=i+"Provider";function f(g,v){const _=v?.[n]?.[d]||l,S=A.useContext(_);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,f]}const s=()=>{const i=t.map(a=>A.createContext(a));return function(l){const d=l?.[n]||i;return A.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return s.scopeName=n,[r,qz(s,...e)]}function qz(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:d,scopeName:h})=>{const g=d(i)[`__scope${h}`];return{...l,...g}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var Rn=globalThis?.document?A.useLayoutEffect:()=>{},Gz=Ob[" useInsertionEffect ".trim().toString()]||Rn;function Ch({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=Kz({defaultProp:e,onChange:t}),l=n!==void 0,d=l?n:s;{const f=A.useRef(n!==void 0);A.useEffect(()=>{const g=f.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=A.useCallback(f=>{if(l){const g=Yz(f)?f(n):f;g!==n&&a.current?.(g)}else i(f)},[l,n,i,a]);return[d,h]}function Kz({defaultProp:n,onChange:e}){const[t,r]=A.useState(n),s=A.useRef(t),i=A.useRef(e);return Gz(()=>{i.current=e},[e]),A.useEffect(()=>{s.current!==t&&(i.current?.(t),s.current=t)},[t,s]),[t,r,i]}function Yz(n){return typeof n=="function"}var Xz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nt=Xz.reduce((n,e)=>{const t=Zc(`Primitive.${e}`),r=A.forwardRef((s,i)=>{const{asChild:a,...l}=s,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(d,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function kk(n,e){n&&om.flushSync(()=>n.dispatchEvent(e))}function S_(n){const e=n+"CollectionProvider",[t,r]=xo(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:E,children:P}=x,R=ot.useRef(null),M=ot.useRef(new Map).current;return y.jsx(s,{scope:E,itemMap:M,collectionRef:R,children:P})};a.displayName=e;const l=n+"CollectionSlot",d=Zc(l),h=ot.forwardRef((x,E)=>{const{scope:P,children:R}=x,M=i(l,P),N=xt(E,M.collectionRef);return y.jsx(d,{ref:N,children:R})});h.displayName=l;const f=n+"CollectionItemSlot",g="data-radix-collection-item",v=Zc(f),_=ot.forwardRef((x,E)=>{const{scope:P,children:R,...M}=x,N=ot.useRef(null),L=xt(E,N),B=i(f,P);return ot.useEffect(()=>(B.itemMap.set(N,{ref:N,...M}),()=>void B.itemMap.delete(N))),y.jsx(v,{[g]:"",ref:L,children:R})});_.displayName=f;function S(x){const E=i(n+"CollectionConsumer",x);return ot.useCallback(()=>{const R=E.collectionRef.current;if(!R)return[];const M=Array.from(R.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((B,$)=>M.indexOf(B.ref.current)-M.indexOf($.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:a,Slot:h,ItemSlot:_},S,r]}var Qz=A.createContext(void 0);function hy(n){const e=A.useContext(Qz);return n||e||"ltr"}function Jn(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>e.current?.(...t),[])}function Jz(n,e=globalThis?.document){const t=Jn(n);A.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var Zz="DismissableLayer",db="dismissableLayer.update",eV="dismissableLayer.pointerDownOutside",tV="dismissableLayer.focusOutside",KA,Tk=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),fy=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...d}=n,h=A.useContext(Tk),[f,g]=A.useState(null),v=f?.ownerDocument??globalThis?.document,[,_]=A.useState({}),S=xt(e,$=>g($)),x=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(E),R=f?x.indexOf(f):-1,M=h.layersWithOutsidePointerEventsDisabled.size>0,N=R>=P,L=sV($=>{const H=$.target,Y=[...h.branches].some(ue=>ue.contains(H));!N||Y||(s?.($),a?.($),$.defaultPrevented||l?.())},v),B=iV($=>{const H=$.target;[...h.branches].some(ue=>ue.contains(H))||(i?.($),a?.($),$.defaultPrevented||l?.())},v);return Jz($=>{R===h.layers.size-1&&(r?.($),!$.defaultPrevented&&l&&($.preventDefault(),l()))},v),A.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(KA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),YA(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=KA)}},[f,v,t,h]),A.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),YA())},[f,h]),A.useEffect(()=>{const $=()=>_({});return document.addEventListener(db,$),()=>document.removeEventListener(db,$)},[]),y.jsx(nt.div,{...d,ref:S,style:{pointerEvents:M?N?"auto":"none":void 0,...n.style},onFocusCapture:Fe(n.onFocusCapture,B.onFocusCapture),onBlurCapture:Fe(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Fe(n.onPointerDownCapture,L.onPointerDownCapture)})});fy.displayName=Zz;var nV="DismissableLayerBranch",rV=A.forwardRef((n,e)=>{const t=A.useContext(Tk),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),y.jsx(nt.div,{...n,ref:s})});rV.displayName=nV;function sV(n,e=globalThis?.document){const t=Jn(n),r=A.useRef(!1),s=A.useRef(()=>{});return A.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let d=function(){Pk(eV,t,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function iV(n,e=globalThis?.document){const t=Jn(n),r=A.useRef(!1);return A.useEffect(()=>{const s=i=>{i.target&&!r.current&&Pk(tV,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YA(){const n=new CustomEvent(db);document.dispatchEvent(n)}function Pk(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?kk(s,i):s.dispatchEvent(i)}var mw=0;function A_(){A.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??XA()),document.body.insertAdjacentElement("beforeend",n[1]??XA()),mw++,()=>{mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),mw--}},[])}function XA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var gw="focusScope.autoFocusOnMount",vw="focusScope.autoFocusOnUnmount",QA={bubbles:!1,cancelable:!0},oV="FocusScope",py=A.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[l,d]=A.useState(null),h=Jn(s),f=Jn(i),g=A.useRef(null),v=xt(e,x=>d(x)),_=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(r){let x=function(M){if(_.paused||!l)return;const N=M.target;l.contains(N)?g.current=N:gl(g.current,{select:!0})},E=function(M){if(_.paused||!l)return;const N=M.relatedTarget;N!==null&&(l.contains(N)||gl(g.current,{select:!0}))},P=function(M){if(document.activeElement===document.body)for(const L of M)L.removedNodes.length>0&&gl(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const R=new MutationObserver(P);return l&&R.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),R.disconnect()}}},[r,l,_.paused]),A.useEffect(()=>{if(l){ZA.add(_);const x=document.activeElement;if(!l.contains(x)){const P=new CustomEvent(gw,QA);l.addEventListener(gw,h),l.dispatchEvent(P),P.defaultPrevented||(aV(hV(Rk(l)),{select:!0}),document.activeElement===x&&gl(l))}return()=>{l.removeEventListener(gw,h),setTimeout(()=>{const P=new CustomEvent(vw,QA);l.addEventListener(vw,f),l.dispatchEvent(P),P.defaultPrevented||gl(x??document.body,{select:!0}),l.removeEventListener(vw,f),ZA.remove(_)},0)}}},[l,h,f,_]);const S=A.useCallback(x=>{if(!t&&!r||_.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,P=document.activeElement;if(E&&P){const R=x.currentTarget,[M,N]=lV(R);M&&N?!x.shiftKey&&P===N?(x.preventDefault(),t&&gl(M,{select:!0})):x.shiftKey&&P===M&&(x.preventDefault(),t&&gl(N,{select:!0})):P===R&&x.preventDefault()}},[t,r,_.paused]);return y.jsx(nt.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});py.displayName=oV;function aV(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(gl(r,{select:e}),document.activeElement!==t)return}function lV(n){const e=Rk(n),t=JA(e,n),r=JA(e.reverse(),n);return[t,r]}function Rk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JA(n,e){for(const t of n)if(!cV(t,{upTo:e}))return t}function cV(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function uV(n){return n instanceof HTMLInputElement&&"select"in n}function gl(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&uV(n)&&e&&n.select()}}var ZA=dV();function dV(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=eC(n,e),n.unshift(e)},remove(e){n=eC(n,e),n[0]?.resume()}}}function eC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function hV(n){return n.filter(e=>e.tagName!=="A")}var fV=Ob[" useId ".trim().toString()]||(()=>{}),pV=0;function wa(n){const[e,t]=A.useState(fV());return Rn(()=>{t(r=>r??String(pV++))},[n]),e?`radix-${e}`:""}const mV=["top","right","bottom","left"],kl=Math.min,Ps=Math.max,Uv=Math.round,iv=Math.floor,wo=n=>({x:n,y:n}),gV={left:"right",right:"left",bottom:"top",top:"bottom"},vV={start:"end",end:"start"};function hb(n,e,t){return Ps(n,kl(e,t))}function xa(n,e){return typeof n=="function"?n(e):n}function Sa(n){return n.split("-")[0]}function Nh(n){return n.split("-")[1]}function C_(n){return n==="x"?"y":"x"}function E_(n){return n==="y"?"height":"width"}function vo(n){return["top","bottom"].includes(Sa(n))?"y":"x"}function k_(n){return C_(vo(n))}function yV(n,e,t){t===void 0&&(t=!1);const r=Nh(n),s=k_(n),i=E_(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=zv(a)),[a,zv(a)]}function wV(n){const e=zv(n);return[fb(n),e,fb(e)]}function fb(n){return n.replace(/start|end/g,e=>vV[e])}function bV(n,e,t){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function _V(n,e,t,r){const s=Nh(n);let i=bV(Sa(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(fb)))),i}function zv(n){return n.replace(/left|right|bottom|top/g,e=>gV[e])}function xV(n){return{top:0,right:0,bottom:0,left:0,...n}}function Mk(n){return typeof n!="number"?xV(n):{top:n,right:n,bottom:n,left:n}}function Vv(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function tC(n,e,t){let{reference:r,floating:s}=n;const i=vo(e),a=k_(e),l=E_(a),d=Sa(e),h=i==="y",f=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,v=r[l]/2-s[l]/2;let _;switch(d){case"top":_={x:f,y:r.y-s.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:g};break;case"left":_={x:r.x-s.width,y:g};break;default:_={x:r.x,y:r.y}}switch(Nh(e)){case"start":_[a]-=v*(t&&h?-1:1);break;case"end":_[a]+=v*(t&&h?-1:1);break}return _}const SV=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,l=i.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:f,y:g}=tC(h,r,d),v=r,_={},S=0;for(let x=0;x<l.length;x++){const{name:E,fn:P}=l[x],{x:R,y:M,data:N,reset:L}=await P({x:f,y:g,initialPlacement:r,placement:v,strategy:s,middlewareData:_,rects:h,platform:a,elements:{reference:n,floating:e}});f=R??f,g=M??g,_={..._,[E]:{..._[E],...N}},L&&S<=50&&(S++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(h=L.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):L.rects),{x:f,y:g}=tC(h,v,d)),x=-1)}return{x:f,y:g,placement:v,strategy:s,middlewareData:_}};async function Qp(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:v=!1,padding:_=0}=xa(e,n),S=Mk(_),E=l[v?g==="floating"?"reference":"floating":g],P=Vv(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(E)))==null||t?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),R=g==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,M=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(M))?await(i.getScale==null?void 0:i.getScale(M))||{x:1,y:1}:{x:1,y:1},L=Vv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:R,offsetParent:M,strategy:d}):R);return{top:(P.top-L.top+S.top)/N.y,bottom:(L.bottom-P.bottom+S.bottom)/N.y,left:(P.left-L.left+S.left)/N.x,right:(L.right-P.right+S.right)/N.x}}const AV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:d}=e,{element:h,padding:f=0}=xa(n,e)||{};if(h==null)return{};const g=Mk(f),v={x:t,y:r},_=k_(s),S=E_(_),x=await a.getDimensions(h),E=_==="y",P=E?"top":"left",R=E?"bottom":"right",M=E?"clientHeight":"clientWidth",N=i.reference[S]+i.reference[_]-v[_]-i.floating[S],L=v[_]-i.reference[_],B=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let $=B?B[M]:0;(!$||!await(a.isElement==null?void 0:a.isElement(B)))&&($=l.floating[M]||i.floating[S]);const H=N/2-L/2,Y=$/2-x[S]/2-1,ue=kl(g[P],Y),oe=kl(g[R],Y),ce=ue,ae=$-x[S]-oe,me=$/2-x[S]/2+H,W=hb(ce,me,ae),q=!d.arrow&&Nh(s)!=null&&me!==W&&i.reference[S]/2-(me<ce?ue:oe)-x[S]/2<0,ne=q?me<ce?me-ce:me-ae:0;return{[_]:v[_]+ne,data:{[_]:W,centerOffset:me-W-ne,...q&&{alignmentOffset:ne}},reset:q}}}),CV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...E}=xa(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const P=Sa(s),R=vo(l),M=Sa(l)===l,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),L=v||(M||!x?[zv(l)]:wV(l)),B=S!=="none";!v&&B&&L.push(..._V(l,x,S,N));const $=[l,...L],H=await Qp(e,E),Y=[];let ue=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&Y.push(H[P]),g){const me=yV(s,a,N);Y.push(H[me[0]],H[me[1]])}if(ue=[...ue,{placement:s,overflows:Y}],!Y.every(me=>me<=0)){var oe,ce;const me=(((oe=i.flip)==null?void 0:oe.index)||0)+1,W=$[me];if(W&&(!(g==="alignment"?R!==vo(W):!1)||ue.every(z=>z.overflows[0]>0&&vo(z.placement)===R)))return{data:{index:me,overflows:ue},reset:{placement:W}};let q=(ce=ue.filter(ne=>ne.overflows[0]<=0).sort((ne,z)=>ne.overflows[1]-z.overflows[1])[0])==null?void 0:ce.placement;if(!q)switch(_){case"bestFit":{var ae;const ne=(ae=ue.filter(z=>{if(B){const re=vo(z.placement);return re===R||re==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(re=>re>0).reduce((re,J)=>re+J,0)]).sort((z,re)=>z[1]-re[1])[0])==null?void 0:ae[0];ne&&(q=ne);break}case"initialPlacement":q=l;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function nC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function rC(n){return mV.some(e=>n[e]>=0)}const EV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=xa(n,e);switch(r){case"referenceHidden":{const i=await Qp(e,{...s,elementContext:"reference"}),a=nC(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rC(a)}}}case"escaped":{const i=await Qp(e,{...s,altBoundary:!0}),a=nC(i,t.floating);return{data:{escapedOffsets:a,escaped:rC(a)}}}default:return{}}}}};async function kV(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Sa(t),l=Nh(t),d=vo(t)==="y",h=["left","top"].includes(a)?-1:1,f=i&&d?-1:1,g=xa(e,n);let{mainAxis:v,crossAxis:_,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(_=l==="end"?S*-1:S),d?{x:_*f,y:v*h}:{x:v*h,y:_*f}}const TV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:l}=e,d=await kV(e,n);return a===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:a}}}}},PV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:E=>{let{x:P,y:R}=E;return{x:P,y:R}}},...d}=xa(n,e),h={x:t,y:r},f=await Qp(e,d),g=vo(Sa(s)),v=C_(g);let _=h[v],S=h[g];if(i){const E=v==="y"?"top":"left",P=v==="y"?"bottom":"right",R=_+f[E],M=_-f[P];_=hb(R,_,M)}if(a){const E=g==="y"?"top":"left",P=g==="y"?"bottom":"right",R=S+f[E],M=S-f[P];S=hb(R,S,M)}const x=l.fn({...e,[v]:_,[g]:S});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:i,[g]:a}}}}}},RV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=xa(n,e),f={x:t,y:r},g=vo(s),v=C_(g);let _=f[v],S=f[g];const x=xa(l,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const M=v==="y"?"height":"width",N=i.reference[v]-i.floating[M]+E.mainAxis,L=i.reference[v]+i.reference[M]-E.mainAxis;_<N?_=N:_>L&&(_=L)}if(h){var P,R;const M=v==="y"?"width":"height",N=["top","left"].includes(Sa(s)),L=i.reference[g]-i.floating[M]+(N&&((P=a.offset)==null?void 0:P[g])||0)+(N?0:E.crossAxis),B=i.reference[g]+i.reference[M]+(N?0:((R=a.offset)==null?void 0:R[g])||0)-(N?E.crossAxis:0);S<L?S=L:S>B&&(S=B)}return{[v]:_,[g]:S}}}},MV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:d=()=>{},...h}=xa(n,e),f=await Qp(e,h),g=Sa(s),v=Nh(s),_=vo(s)==="y",{width:S,height:x}=i.floating;let E,P;g==="top"||g==="bottom"?(E=g,P=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(P=g,E=v==="end"?"top":"bottom");const R=x-f.top-f.bottom,M=S-f.left-f.right,N=kl(x-f[E],R),L=kl(S-f[P],M),B=!e.middlewareData.shift;let $=N,H=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(H=M),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=R),B&&!v){const ue=Ps(f.left,0),oe=Ps(f.right,0),ce=Ps(f.top,0),ae=Ps(f.bottom,0);_?H=S-2*(ue!==0||oe!==0?ue+oe:Ps(f.left,f.right)):$=x-2*(ce!==0||ae!==0?ce+ae:Ps(f.top,f.bottom))}await d({...e,availableWidth:H,availableHeight:$});const Y=await a.getDimensions(l.floating);return S!==Y.width||x!==Y.height?{reset:{rects:!0}}:{}}}};function my(){return typeof window<"u"}function Oh(n){return Ik(n)?(n.nodeName||"").toLowerCase():"#document"}function Rs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function So(n){var e;return(e=(Ik(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Ik(n){return my()?n instanceof Node||n instanceof Rs(n).Node:!1}function Li(n){return my()?n instanceof Element||n instanceof Rs(n).Element:!1}function bo(n){return my()?n instanceof HTMLElement||n instanceof Rs(n).HTMLElement:!1}function sC(n){return!my()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Rs(n).ShadowRoot}function fm(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=ji(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(s)}function IV(n){return["table","td","th"].includes(Oh(n))}function gy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function T_(n){const e=P_(),t=Li(n)?ji(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function DV(n){let e=Tl(n);for(;bo(e)&&!Eh(e);){if(T_(e))return e;if(gy(e))return null;e=Tl(e)}return null}function P_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Eh(n){return["html","body","#document"].includes(Oh(n))}function ji(n){return Rs(n).getComputedStyle(n)}function vy(n){return Li(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tl(n){if(Oh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||sC(n)&&n.host||So(n);return sC(e)?e.host:e}function Dk(n){const e=Tl(n);return Eh(e)?n.ownerDocument?n.ownerDocument.body:n.body:bo(e)&&fm(e)?e:Dk(e)}function Jp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Dk(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=Rs(s);if(i){const l=pb(a);return e.concat(a,a.visualViewport||[],fm(s)?s:[],l&&t?Jp(l):[])}return e.concat(s,Jp(s,[],t))}function pb(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Nk(n){const e=ji(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=bo(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,l=Uv(t)!==i||Uv(r)!==a;return l&&(t=i,r=a),{width:t,height:r,$:l}}function R_(n){return Li(n)?n:n.contextElement}function mh(n){const e=R_(n);if(!bo(e))return wo(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=Nk(e);let a=(i?Uv(t.width):t.width)/r,l=(i?Uv(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const NV=wo(0);function Ok(n){const e=Rs(n);return!P_()||!e.visualViewport?NV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Rs(n)?!1:e}function eu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=R_(n);let a=wo(1);e&&(r?Li(r)&&(a=mh(r)):a=mh(n));const l=OV(i,t,r)?Ok(i):wo(0);let d=(s.left+l.x)/a.x,h=(s.top+l.y)/a.y,f=s.width/a.x,g=s.height/a.y;if(i){const v=Rs(i),_=r&&Li(r)?Rs(r):r;let S=v,x=pb(S);for(;x&&r&&_!==S;){const E=mh(x),P=x.getBoundingClientRect(),R=ji(x),M=P.left+(x.clientLeft+parseFloat(R.paddingLeft))*E.x,N=P.top+(x.clientTop+parseFloat(R.paddingTop))*E.y;d*=E.x,h*=E.y,f*=E.x,g*=E.y,d+=M,h+=N,S=Rs(x),x=pb(S)}}return Vv({width:f,height:g,x:d,y:h})}function M_(n,e){const t=vy(n).scrollLeft;return e?e.left+t:eu(So(n)).left+t}function Lk(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:M_(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function LV(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=So(r),l=e?gy(e.floating):!1;if(r===a||l&&i)return t;let d={scrollLeft:0,scrollTop:0},h=wo(1);const f=wo(0),g=bo(r);if((g||!g&&!i)&&((Oh(r)!=="body"||fm(a))&&(d=vy(r)),bo(r))){const _=eu(r);h=mh(r),f.x=_.x+r.clientLeft,f.y=_.y+r.clientTop}const v=a&&!g&&!i?Lk(a,d,!0):wo(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+v.x,y:t.y*h.y-d.scrollTop*h.y+f.y+v.y}}function jV(n){return Array.from(n.getClientRects())}function FV(n){const e=So(n),t=vy(n),r=n.ownerDocument.body,s=Ps(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ps(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+M_(n);const l=-t.scrollTop;return ji(r).direction==="rtl"&&(a+=Ps(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function BV(n,e){const t=Rs(n),r=So(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,d=0;if(s){i=s.width,a=s.height;const h=P_();(!h||h&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:i,height:a,x:l,y:d}}function $V(n,e){const t=eu(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=bo(n)?mh(n):wo(1),a=n.clientWidth*i.x,l=n.clientHeight*i.y,d=s*i.x,h=r*i.y;return{width:a,height:l,x:d,y:h}}function iC(n,e,t){let r;if(e==="viewport")r=BV(n,t);else if(e==="document")r=FV(So(n));else if(Li(e))r=$V(e,t);else{const s=Ok(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Vv(r)}function jk(n,e){const t=Tl(n);return t===e||!Li(t)||Eh(t)?!1:ji(t).position==="fixed"||jk(t,e)}function UV(n,e){const t=e.get(n);if(t)return t;let r=Jp(n,[],!1).filter(l=>Li(l)&&Oh(l)!=="body"),s=null;const i=ji(n).position==="fixed";let a=i?Tl(n):n;for(;Li(a)&&!Eh(a);){const l=ji(a),d=T_(a);!d&&l.position==="fixed"&&(s=null),(i?!d&&!s:!d&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||fm(a)&&!d&&jk(n,a))?r=r.filter(f=>f!==a):s=l,a=Tl(a)}return e.set(n,r),r}function zV(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?gy(e)?[]:UV(e,this._c):[].concat(t),r],l=a[0],d=a.reduce((h,f)=>{const g=iC(e,f,s);return h.top=Ps(g.top,h.top),h.right=kl(g.right,h.right),h.bottom=kl(g.bottom,h.bottom),h.left=Ps(g.left,h.left),h},iC(e,l,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function VV(n){const{width:e,height:t}=Nk(n);return{width:e,height:t}}function HV(n,e,t){const r=bo(e),s=So(e),i=t==="fixed",a=eu(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const d=wo(0);function h(){d.x=M_(s)}if(r||!r&&!i)if((Oh(e)!=="body"||fm(s))&&(l=vy(e)),r){const _=eu(e,!0,i,e);d.x=_.x+e.clientLeft,d.y=_.y+e.clientTop}else s&&h();i&&!r&&s&&h();const f=s&&!r&&!i?Lk(s,l):wo(0),g=a.left+l.scrollLeft-d.x-f.x,v=a.top+l.scrollTop-d.y-f.y;return{x:g,y:v,width:a.width,height:a.height}}function yw(n){return ji(n).position==="static"}function oC(n,e){if(!bo(n)||ji(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return So(n)===t&&(t=t.ownerDocument.body),t}function Fk(n,e){const t=Rs(n);if(gy(n))return t;if(!bo(n)){let s=Tl(n);for(;s&&!Eh(s);){if(Li(s)&&!yw(s))return s;s=Tl(s)}return t}let r=oC(n,e);for(;r&&IV(r)&&yw(r);)r=oC(r,e);return r&&Eh(r)&&yw(r)&&!T_(r)?t:r||DV(n)||t}const WV=async function(n){const e=this.getOffsetParent||Fk,t=this.getDimensions,r=await t(n.floating);return{reference:HV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qV(n){return ji(n).direction==="rtl"}const GV={convertOffsetParentRelativeRectToViewportRelativeRect:LV,getDocumentElement:So,getClippingRect:zV,getOffsetParent:Fk,getElementRects:WV,getClientRects:jV,getDimensions:VV,getScale:mh,isElement:Li,isRTL:qV};function Bk(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function KV(n,e){let t=null,r;const s=So(n);function i(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const h=n.getBoundingClientRect(),{left:f,top:g,width:v,height:_}=h;if(l||e(),!v||!_)return;const S=iv(g),x=iv(s.clientWidth-(f+v)),E=iv(s.clientHeight-(g+_)),P=iv(f),M={rootMargin:-S+"px "+-x+"px "+-E+"px "+-P+"px",threshold:Ps(0,kl(1,d))||1};let N=!0;function L(B){const $=B[0].intersectionRatio;if($!==d){if(!N)return a();$?a(!1,$):r=setTimeout(()=>{a(!1,1e-7)},1e3)}$===1&&!Bk(h,n.getBoundingClientRect())&&a(),N=!1}try{t=new IntersectionObserver(L,{...M,root:s.ownerDocument})}catch{t=new IntersectionObserver(L,M)}t.observe(n)}return a(!0),i}function YV(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=R_(n),f=s||i?[...h?Jp(h):[],...Jp(e)]:[];f.forEach(P=>{s&&P.addEventListener("scroll",t,{passive:!0}),i&&P.addEventListener("resize",t)});const g=h&&l?KV(h,t):null;let v=-1,_=null;a&&(_=new ResizeObserver(P=>{let[R]=P;R&&R.target===h&&_&&(_.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var M;(M=_)==null||M.observe(e)})),t()}),h&&!d&&_.observe(h),_.observe(e));let S,x=d?eu(n):null;d&&E();function E(){const P=eu(n);x&&!Bk(x,P)&&t(),x=P,S=requestAnimationFrame(E)}return t(),()=>{var P;f.forEach(R=>{s&&R.removeEventListener("scroll",t),i&&R.removeEventListener("resize",t)}),g?.(),(P=_)==null||P.disconnect(),_=null,d&&cancelAnimationFrame(S)}}const XV=TV,QV=PV,JV=CV,ZV=MV,e4=EV,aC=AV,t4=RV,n4=(n,e,t)=>{const r=new Map,s={platform:GV,...t},i={...s.platform,_c:r};return SV(n,e,{...s,platform:i})};var r4=typeof document<"u",s4=function(){},Sv=r4?A.useLayoutEffect:s4;function Hv(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Hv(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Hv(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function $k(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function lC(n,e){const t=$k(n);return Math.round(e*t)/t}function ww(n){const e=A.useRef(n);return Sv(()=>{e.current=n}),e}function i4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:d,open:h}=n,[f,g]=A.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,_]=A.useState(r);Hv(v,r)||_(r);const[S,x]=A.useState(null),[E,P]=A.useState(null),R=A.useCallback(z=>{z!==B.current&&(B.current=z,x(z))},[]),M=A.useCallback(z=>{z!==$.current&&($.current=z,P(z))},[]),N=i||S,L=a||E,B=A.useRef(null),$=A.useRef(null),H=A.useRef(f),Y=d!=null,ue=ww(d),oe=ww(s),ce=ww(h),ae=A.useCallback(()=>{if(!B.current||!$.current)return;const z={placement:e,strategy:t,middleware:v};oe.current&&(z.platform=oe.current),n4(B.current,$.current,z).then(re=>{const J={...re,isPositioned:ce.current!==!1};me.current&&!Hv(H.current,J)&&(H.current=J,om.flushSync(()=>{g(J)}))})},[v,e,t,oe,ce]);Sv(()=>{h===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const me=A.useRef(!1);Sv(()=>(me.current=!0,()=>{me.current=!1}),[]),Sv(()=>{if(N&&(B.current=N),L&&($.current=L),N&&L){if(ue.current)return ue.current(N,L,ae);ae()}},[N,L,ae,ue,Y]);const W=A.useMemo(()=>({reference:B,floating:$,setReference:R,setFloating:M}),[R,M]),q=A.useMemo(()=>({reference:N,floating:L}),[N,L]),ne=A.useMemo(()=>{const z={position:t,left:0,top:0};if(!q.floating)return z;const re=lC(q.floating,f.x),J=lC(q.floating,f.y);return l?{...z,transform:"translate("+re+"px, "+J+"px)",...$k(q.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:re,top:J}},[t,l,q.floating,f.x,f.y]);return A.useMemo(()=>({...f,update:ae,refs:W,elements:q,floatingStyles:ne}),[f,ae,W,q,ne])}const o4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?aC({element:r.current,padding:s}).fn(t):{}:r?aC({element:r,padding:s}).fn(t):{}}}},a4=(n,e)=>({...XV(n),options:[n,e]}),l4=(n,e)=>({...QV(n),options:[n,e]}),c4=(n,e)=>({...t4(n),options:[n,e]}),u4=(n,e)=>({...JV(n),options:[n,e]}),d4=(n,e)=>({...ZV(n),options:[n,e]}),h4=(n,e)=>({...e4(n),options:[n,e]}),f4=(n,e)=>({...o4(n),options:[n,e]});var p4="Arrow",Uk=A.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return y.jsx(nt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Uk.displayName=p4;var m4=Uk;function zk(n){const[e,t]=A.useState(void 0);return Rn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,l=h.blockSize}else a=n.offsetWidth,l=n.offsetHeight;t({width:a,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var I_="Popper",[Vk,yy]=xo(I_),[g4,Hk]=Vk(I_),Wk=n=>{const{__scopePopper:e,children:t}=n,[r,s]=A.useState(null);return y.jsx(g4,{scope:e,anchor:r,onAnchorChange:s,children:t})};Wk.displayName=I_;var qk="PopperAnchor",Gk=A.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=Hk(qk,t),a=A.useRef(null),l=xt(e,a);return A.useEffect(()=>{i.onAnchorChange(r?.current||a.current)}),r?null:y.jsx(nt.div,{...s,ref:l})});Gk.displayName=qk;var D_="PopperContent",[v4,y4]=Vk(D_),Kk=A.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:_="optimized",onPlaced:S,...x}=n,E=Hk(D_,t),[P,R]=A.useState(null),M=xt(e,ve=>R(ve)),[N,L]=A.useState(null),B=zk(N),$=B?.width??0,H=B?.height??0,Y=r+(i!=="center"?"-"+i:""),ue=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},oe=Array.isArray(h)?h:[h],ce=oe.length>0,ae={padding:ue,boundary:oe.filter(b4),altBoundary:ce},{refs:me,floatingStyles:W,placement:q,isPositioned:ne,middlewareData:z}=i4({strategy:"fixed",placement:Y,whileElementsMounted:(...ve)=>YV(...ve,{animationFrame:_==="always"}),elements:{reference:E.anchor},middleware:[a4({mainAxis:s+H,alignmentAxis:a}),d&&l4({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?c4():void 0,...ae}),d&&u4({...ae}),d4({...ae,apply:({elements:ve,rects:Ne,availableWidth:He,availableHeight:Ye})=>{const{width:it,height:Mt}=Ne.reference,un=ve.floating.style;un.setProperty("--radix-popper-available-width",`${He}px`),un.setProperty("--radix-popper-available-height",`${Ye}px`),un.setProperty("--radix-popper-anchor-width",`${it}px`),un.setProperty("--radix-popper-anchor-height",`${Mt}px`)}}),N&&f4({element:N,padding:l}),_4({arrowWidth:$,arrowHeight:H}),v&&h4({strategy:"referenceHidden",...ae})]}),[re,J]=Qk(q),F=Jn(S);Rn(()=>{ne&&F?.()},[ne,F]);const se=z.arrow?.x,ee=z.arrow?.y,Te=z.arrow?.centerOffset!==0,[Me,Pe]=A.useState();return Rn(()=>{P&&Pe(window.getComputedStyle(P).zIndex)},[P]),y.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:ne?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(v4,{scope:t,placedSide:re,onArrowChange:L,arrowX:se,arrowY:ee,shouldHideArrow:Te,children:y.jsx(nt.div,{"data-side":re,"data-align":J,...x,ref:M,style:{...x.style,animation:ne?void 0:"none"}})})})});Kk.displayName=D_;var Yk="PopperArrow",w4={top:"bottom",right:"left",bottom:"top",left:"right"},Xk=A.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=y4(Yk,r),a=w4[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(m4,{...s,ref:t,style:{...s.style,display:"block"}})})});Xk.displayName=Yk;function b4(n){return n!==null}var _4=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,l=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[h,f]=Qk(t),g={start:"0%",center:"50%",end:"100%"}[f],v=(s.arrow?.x??0)+l/2,_=(s.arrow?.y??0)+d/2;let S="",x="";return h==="bottom"?(S=a?g:`${v}px`,x=`${-d}px`):h==="top"?(S=a?g:`${v}px`,x=`${r.floating.height+d}px`):h==="right"?(S=`${-d}px`,x=a?g:`${_}px`):h==="left"&&(S=`${r.floating.width+d}px`,x=a?g:`${_}px`),{data:{x:S,y:x}}}});function Qk(n){const[e,t="center"]=n.split("-");return[e,t]}var Jk=Wk,Zk=Gk,eT=Kk,tT=Xk,x4="Portal",wy=A.forwardRef((n,e)=>{const{container:t,...r}=n,[s,i]=A.useState(!1);Rn(()=>i(!0),[]);const a=t||s&&globalThis?.document?.body;return a?mN.createPortal(y.jsx(nt.div,{...r,ref:e}),a):null});wy.displayName=x4;function S4(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var Is=n=>{const{present:e,children:t}=n,r=A4(e),s=typeof t=="function"?t({present:r.isPresent}):A.Children.only(t),i=xt(r.ref,C4(s));return typeof t=="function"||r.isPresent?A.cloneElement(s,{ref:i}):null};Is.displayName="Presence";function A4(n){const[e,t]=A.useState(),r=A.useRef(null),s=A.useRef(n),i=A.useRef("none"),a=n?"mounted":"unmounted",[l,d]=S4(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const h=ov(r.current);i.current=l==="mounted"?h:"none"},[l]),Rn(()=>{const h=r.current,f=s.current;if(f!==n){const v=i.current,_=ov(h);n?d("MOUNT"):_==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&v!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Rn(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,g=_=>{const x=ov(r.current).includes(_.animationName);if(_.target===e&&x&&(d("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=_=>{_.target===e&&(i.current=ov(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:A.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function ov(n){return n?.animationName||"none"}function C4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var bw="rovingFocusGroup.onEntryFocus",E4={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[mb,nT,k4]=S_(pm),[T4,rT]=xo(pm,[k4]),[P4,R4]=T4(pm),sT=A.forwardRef((n,e)=>y.jsx(mb.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(mb.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(M4,{...n,ref:e})})}));sT.displayName=pm;var M4=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...g}=n,v=A.useRef(null),_=xt(e,v),S=hy(i),[x,E]=Ch({prop:a,defaultProp:l??null,onChange:d,caller:pm}),[P,R]=A.useState(!1),M=Jn(h),N=nT(t),L=A.useRef(!1),[B,$]=A.useState(0);return A.useEffect(()=>{const H=v.current;if(H)return H.addEventListener(bw,M),()=>H.removeEventListener(bw,M)},[M]),y.jsx(P4,{scope:t,orientation:r,dir:S,loop:s,currentTabStopId:x,onItemFocus:A.useCallback(H=>E(H),[E]),onItemShiftTab:A.useCallback(()=>R(!0),[]),onFocusableItemAdd:A.useCallback(()=>$(H=>H+1),[]),onFocusableItemRemove:A.useCallback(()=>$(H=>H-1),[]),children:y.jsx(nt.div,{tabIndex:P||B===0?-1:0,"data-orientation":r,...g,ref:_,style:{outline:"none",...n.style},onMouseDown:Fe(n.onMouseDown,()=>{L.current=!0}),onFocus:Fe(n.onFocus,H=>{const Y=!L.current;if(H.target===H.currentTarget&&Y&&!P){const ue=new CustomEvent(bw,E4);if(H.currentTarget.dispatchEvent(ue),!ue.defaultPrevented){const oe=N().filter(q=>q.focusable),ce=oe.find(q=>q.active),ae=oe.find(q=>q.id===x),W=[ce,ae,...oe].filter(Boolean).map(q=>q.ref.current);aT(W,f)}}L.current=!1}),onBlur:Fe(n.onBlur,()=>R(!1))})})}),iT="RovingFocusGroupItem",oT=A.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=n,d=wa(),h=i||d,f=R4(iT,t),g=f.currentTabStopId===h,v=nT(t),{onFocusableItemAdd:_,onFocusableItemRemove:S,currentTabStopId:x}=f;return A.useEffect(()=>{if(r)return _(),()=>S()},[r,_,S]),y.jsx(mb.ItemSlot,{scope:t,id:h,focusable:r,active:s,children:y.jsx(nt.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Fe(n.onMouseDown,E=>{r?f.onItemFocus(h):E.preventDefault()}),onFocus:Fe(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:Fe(n.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const P=N4(E,f.orientation,f.dir);if(P!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let M=v().filter(N=>N.focusable).map(N=>N.ref.current);if(P==="last")M.reverse();else if(P==="prev"||P==="next"){P==="prev"&&M.reverse();const N=M.indexOf(E.currentTarget);M=f.loop?O4(M,N+1):M.slice(N+1)}setTimeout(()=>aT(M))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:x!=null}):a})})});oT.displayName=iT;var I4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D4(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function N4(n,e,t){const r=D4(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return I4[r]}function aT(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function O4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var L4=sT,j4=oT,F4=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},sh=new WeakMap,av=new WeakMap,lv={},_w=0,lT=function(n){return n&&(n.host||lT(n.parentNode))},B4=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=lT(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},$4=function(n,e,t,r){var s=B4(e,Array.isArray(n)?n:[n]);lv[t]||(lv[t]=new WeakMap);var i=lv[t],a=[],l=new Set,d=new Set(s),h=function(g){!g||l.has(g)||(l.add(g),h(g.parentNode))};s.forEach(h);var f=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(l.has(v))f(v);else try{var _=v.getAttribute(r),S=_!==null&&_!=="false",x=(sh.get(v)||0)+1,E=(i.get(v)||0)+1;sh.set(v,x),i.set(v,E),a.push(v),x===1&&S&&av.set(v,!0),E===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return f(e),l.clear(),_w++,function(){a.forEach(function(g){var v=sh.get(g)-1,_=i.get(g)-1;sh.set(g,v),i.set(g,_),v||(av.has(g)||g.removeAttribute(r),av.delete(g)),_||g.removeAttribute(t)}),_w--,_w||(sh=new WeakMap,sh=new WeakMap,av=new WeakMap,lv={})}},N_=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=F4(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),$4(r,s,t,"aria-hidden")):function(){return null}},go=function(){return go=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},go.apply(this,arguments)};function cT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function U4(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Av="right-scroll-bar-position",Cv="width-before-scroll-bar",z4="with-scroll-bars-hidden",V4="--removed-body-scroll-bar-size";function xw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function H4(n,e){var t=A.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var W4=typeof window<"u"?A.useLayoutEffect:A.useEffect,cC=new WeakMap;function q4(n,e){var t=H4(null,function(r){return n.forEach(function(s){return xw(s,r)})});return W4(function(){var r=cC.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(l){i.has(l)||xw(l,null)}),i.forEach(function(l){s.has(l)||xw(l,a)})}cC.set(t,n)},[n]),t}function G4(n){return n}function K4(n,e){e===void 0&&(e=G4);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(i),a=t}var d=function(){var f=a;a=[],f.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),t}}}};return s}function Y4(n){n===void 0&&(n={});var e=K4(null);return e.options=go({async:!0,ssr:!1},n),e}var uT=function(n){var e=n.sideCar,t=cT(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,go({},t))};uT.isSideCarExport=!0;function X4(n,e){return n.useMedium(e),uT}var dT=Y4(),Sw=function(){},by=A.forwardRef(function(n,e){var t=A.useRef(null),r=A.useState({onScrollCapture:Sw,onWheelCapture:Sw,onTouchMoveCapture:Sw}),s=r[0],i=r[1],a=n.forwardProps,l=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,g=n.shards,v=n.sideCar,_=n.noRelative,S=n.noIsolation,x=n.inert,E=n.allowPinchZoom,P=n.as,R=P===void 0?"div":P,M=n.gapMode,N=cT(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,B=q4([t,e]),$=go(go({},N),s);return A.createElement(A.Fragment,null,f&&A.createElement(L,{sideCar:dT,removeScrollBar:h,shards:g,noRelative:_,noIsolation:S,inert:x,setCallbacks:i,allowPinchZoom:!!E,lockRef:t,gapMode:M}),a?A.cloneElement(A.Children.only(l),go(go({},$),{ref:B})):A.createElement(R,go({},$,{className:d,ref:B}),l))});by.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};by.classNames={fullWidth:Cv,zeroRight:Av};var Q4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function J4(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Q4();return e&&n.setAttribute("nonce",e),n}function Z4(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function e5(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var t5=function(){var n=0,e=null;return{add:function(t){n==0&&(e=J4())&&(Z4(e,t),e5(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n5=function(){var n=t5();return function(e,t){A.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},hT=function(){var n=n5(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},r5={left:0,top:0,right:0,gap:0},Aw=function(n){return parseInt(n||"",10)||0},s5=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Aw(t),Aw(r),Aw(s)]},i5=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return r5;var e=s5(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},o5=hT(),gh="data-scroll-locked",a5=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(z4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(gh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Av,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Cv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Av," .").concat(Av,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cv," .").concat(Cv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gh,`] {
    `).concat(V4,": ").concat(l,`px;
  }
`)},uC=function(){var n=parseInt(document.body.getAttribute(gh)||"0",10);return isFinite(n)?n:0},l5=function(){A.useEffect(function(){return document.body.setAttribute(gh,(uC()+1).toString()),function(){var n=uC()-1;n<=0?document.body.removeAttribute(gh):document.body.setAttribute(gh,n.toString())}},[])},c5=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;l5();var i=A.useMemo(function(){return i5(s)},[s]);return A.createElement(o5,{styles:a5(i,!e,s,t?"":"!important")})},gb=!1;if(typeof window<"u")try{var cv=Object.defineProperty({},"passive",{get:function(){return gb=!0,!0}});window.addEventListener("test",cv,cv),window.removeEventListener("test",cv,cv)}catch{gb=!1}var ih=gb?{passive:!1}:!1,u5=function(n){return n.tagName==="TEXTAREA"},fT=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!u5(n)&&t[e]==="visible")},d5=function(n){return fT(n,"overflowY")},h5=function(n){return fT(n,"overflowX")},dC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=pT(n,r);if(s){var i=mT(n,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},f5=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},p5=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},pT=function(n,e){return n==="v"?d5(e):h5(e)},mT=function(n,e){return n==="v"?f5(e):p5(e)},m5=function(n,e){return n==="h"&&e==="rtl"?-1:1},g5=function(n,e,t,r,s){var i=m5(n,window.getComputedStyle(e).direction),a=i*r,l=t.target,d=e.contains(l),h=!1,f=a>0,g=0,v=0;do{if(!l)break;var _=mT(n,l),S=_[0],x=_[1],E=_[2],P=x-E-i*S;(S||P)&&pT(n,l)&&(g+=P,v+=S);var R=l.parentNode;l=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(f&&Math.abs(g)<1||!f&&Math.abs(v)<1)&&(h=!0),h},uv=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},hC=function(n){return[n.deltaX,n.deltaY]},fC=function(n){return n&&"current"in n?n.current:n},v5=function(n,e){return n[0]===e[0]&&n[1]===e[1]},y5=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},w5=0,oh=[];function b5(n){var e=A.useRef([]),t=A.useRef([0,0]),r=A.useRef(),s=A.useState(w5++)[0],i=A.useState(hT)[0],a=A.useRef(n);A.useEffect(function(){a.current=n},[n]),A.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var x=U4([n.lockRef.current],(n.shards||[]).map(fC),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var l=A.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var P=uv(x),R=t.current,M="deltaX"in x?x.deltaX:R[0]-P[0],N="deltaY"in x?x.deltaY:R[1]-P[1],L,B=x.target,$=Math.abs(M)>Math.abs(N)?"h":"v";if("touches"in x&&$==="h"&&B.type==="range")return!1;var H=dC($,B);if(!H)return!0;if(H?L=$:(L=$==="v"?"h":"v",H=dC($,B)),!H)return!1;if(!r.current&&"changedTouches"in x&&(M||N)&&(r.current=L),!L)return!0;var Y=r.current||L;return g5(Y,E,x,Y==="h"?M:N)},[]),d=A.useCallback(function(x){var E=x;if(!(!oh.length||oh[oh.length-1]!==i)){var P="deltaY"in E?hC(E):uv(E),R=e.current.filter(function(L){return L.name===E.type&&(L.target===E.target||E.target===L.shadowParent)&&v5(L.delta,P)})[0];if(R&&R.should){E.cancelable&&E.preventDefault();return}if(!R){var M=(a.current.shards||[]).map(fC).filter(Boolean).filter(function(L){return L.contains(E.target)}),N=M.length>0?l(E,M[0]):!a.current.noIsolation;N&&E.cancelable&&E.preventDefault()}}},[]),h=A.useCallback(function(x,E,P,R){var M={name:x,delta:E,target:P,should:R,shadowParent:_5(P)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(N){return N!==M})},1)},[]),f=A.useCallback(function(x){t.current=uv(x),r.current=void 0},[]),g=A.useCallback(function(x){h(x.type,hC(x),x.target,l(x,n.lockRef.current))},[]),v=A.useCallback(function(x){h(x.type,uv(x),x.target,l(x,n.lockRef.current))},[]);A.useEffect(function(){return oh.push(i),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,ih),document.addEventListener("touchmove",d,ih),document.addEventListener("touchstart",f,ih),function(){oh=oh.filter(function(x){return x!==i}),document.removeEventListener("wheel",d,ih),document.removeEventListener("touchmove",d,ih),document.removeEventListener("touchstart",f,ih)}},[]);var _=n.removeScrollBar,S=n.inert;return A.createElement(A.Fragment,null,S?A.createElement(i,{styles:y5(s)}):null,_?A.createElement(c5,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function _5(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const x5=X4(dT,b5);var _y=A.forwardRef(function(n,e){return A.createElement(by,go({},n,{ref:e,sideCar:x5}))});_y.classNames=by.classNames;var vb=["Enter"," "],S5=["ArrowDown","PageUp","Home"],gT=["ArrowUp","PageDown","End"],A5=[...S5,...gT],C5={ltr:[...vb,"ArrowRight"],rtl:[...vb,"ArrowLeft"]},E5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mm="Menu",[Zp,k5,T5]=S_(mm),[du,vT]=xo(mm,[T5,yy,rT]),xy=yy(),yT=rT(),[P5,hu]=du(mm),[R5,gm]=du(mm),wT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:a=!0}=n,l=xy(e),[d,h]=A.useState(null),f=A.useRef(!1),g=Jn(i),v=hy(s);return A.useEffect(()=>{const _=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",_,{capture:!0}),()=>{document.removeEventListener("keydown",_,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),y.jsx(Jk,{...l,children:y.jsx(P5,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:h,children:y.jsx(R5,{scope:e,onClose:A.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:f,dir:v,modal:a,children:r})})})};wT.displayName=mm;var M5="MenuAnchor",O_=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=xy(t);return y.jsx(Zk,{...s,...r,ref:e})});O_.displayName=M5;var L_="MenuPortal",[I5,bT]=du(L_,{forceMount:void 0}),_T=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=hu(L_,e);return y.jsx(I5,{scope:e,forceMount:t,children:y.jsx(Is,{present:t||i.open,children:y.jsx(wy,{asChild:!0,container:s,children:r})})})};_T.displayName=L_;var ti="MenuContent",[D5,j_]=du(ti),xT=A.forwardRef((n,e)=>{const t=bT(ti,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=hu(ti,n.__scopeMenu),a=gm(ti,n.__scopeMenu);return y.jsx(Zp.Provider,{scope:n.__scopeMenu,children:y.jsx(Is,{present:r||i.open,children:y.jsx(Zp.Slot,{scope:n.__scopeMenu,children:a.modal?y.jsx(N5,{...s,ref:e}):y.jsx(O5,{...s,ref:e})})})})}),N5=A.forwardRef((n,e)=>{const t=hu(ti,n.__scopeMenu),r=A.useRef(null),s=xt(e,r);return A.useEffect(()=>{const i=r.current;if(i)return N_(i)},[]),y.jsx(F_,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),O5=A.forwardRef((n,e)=>{const t=hu(ti,n.__scopeMenu);return y.jsx(F_,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),L5=Zc("MenuContent.ScrollLock"),F_=A.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:_,disableOutsideScroll:S,...x}=n,E=hu(ti,t),P=gm(ti,t),R=xy(t),M=yT(t),N=k5(t),[L,B]=A.useState(null),$=A.useRef(null),H=xt(e,$,E.onContentChange),Y=A.useRef(0),ue=A.useRef(""),oe=A.useRef(0),ce=A.useRef(null),ae=A.useRef("right"),me=A.useRef(0),W=S?_y:A.Fragment,q=S?{as:L5,allowPinchZoom:!0}:void 0,ne=re=>{const J=ue.current+re,F=N().filter(ve=>!ve.disabled),se=document.activeElement,ee=F.find(ve=>ve.ref.current===se)?.textValue,Te=F.map(ve=>ve.textValue),Me=K5(Te,J,ee),Pe=F.find(ve=>ve.textValue===Me)?.ref.current;(function ve(Ne){ue.current=Ne,window.clearTimeout(Y.current),Ne!==""&&(Y.current=window.setTimeout(()=>ve(""),1e3))})(J),Pe&&setTimeout(()=>Pe.focus())};A.useEffect(()=>()=>window.clearTimeout(Y.current),[]),A_();const z=A.useCallback(re=>ae.current===ce.current?.side&&X5(re,ce.current?.area),[]);return y.jsx(D5,{scope:t,searchRef:ue,onItemEnter:A.useCallback(re=>{z(re)&&re.preventDefault()},[z]),onItemLeave:A.useCallback(re=>{z(re)||($.current?.focus(),B(null))},[z]),onTriggerLeave:A.useCallback(re=>{z(re)&&re.preventDefault()},[z]),pointerGraceTimerRef:oe,onPointerGraceIntentChange:A.useCallback(re=>{ce.current=re},[]),children:y.jsx(W,{...q,children:y.jsx(py,{asChild:!0,trapped:s,onMountAutoFocus:Fe(i,re=>{re.preventDefault(),$.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:y.jsx(fy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:_,children:y.jsx(L4,{asChild:!0,...M,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:L,onCurrentTabStopIdChange:B,onEntryFocus:Fe(d,re=>{P.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(eT,{role:"menu","aria-orientation":"vertical","data-state":FT(E.open),"data-radix-menu-content":"",dir:P.dir,...R,...x,ref:H,style:{outline:"none",...x.style},onKeyDown:Fe(x.onKeyDown,re=>{const F=re.target.closest("[data-radix-menu-content]")===re.currentTarget,se=re.ctrlKey||re.altKey||re.metaKey,ee=re.key.length===1;F&&(re.key==="Tab"&&re.preventDefault(),!se&&ee&&ne(re.key));const Te=$.current;if(re.target!==Te||!A5.includes(re.key))return;re.preventDefault();const Pe=N().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);gT.includes(re.key)&&Pe.reverse(),q5(Pe)}),onBlur:Fe(n.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(Y.current),ue.current="")}),onPointerMove:Fe(n.onPointerMove,em(re=>{const J=re.target,F=me.current!==re.clientX;if(re.currentTarget.contains(J)&&F){const se=re.clientX>me.current?"right":"left";ae.current=se,me.current=re.clientX}}))})})})})})})});xT.displayName=ti;var j5="MenuGroup",B_=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"group",...r,ref:e})});B_.displayName=j5;var F5="MenuLabel",ST=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{...r,ref:e})});ST.displayName=F5;var Wv="MenuItem",pC="menu.itemSelect",Sy=A.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=A.useRef(null),a=gm(Wv,n.__scopeMenu),l=j_(Wv,n.__scopeMenu),d=xt(e,i),h=A.useRef(!1),f=()=>{const g=i.current;if(!t&&g){const v=new CustomEvent(pC,{bubbles:!0,cancelable:!0});g.addEventListener(pC,_=>r?.(_),{once:!0}),kk(g,v),v.defaultPrevented?h.current=!1:a.onClose()}};return y.jsx(AT,{...s,ref:d,disabled:t,onClick:Fe(n.onClick,f),onPointerDown:g=>{n.onPointerDown?.(g),h.current=!0},onPointerUp:Fe(n.onPointerUp,g=>{h.current||g.currentTarget?.click()}),onKeyDown:Fe(n.onKeyDown,g=>{const v=l.searchRef.current!=="";t||v&&g.key===" "||vb.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});Sy.displayName=Wv;var AT=A.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,a=j_(Wv,t),l=yT(t),d=A.useRef(null),h=xt(e,d),[f,g]=A.useState(!1),[v,_]=A.useState("");return A.useEffect(()=>{const S=d.current;S&&_((S.textContent??"").trim())},[i.children]),y.jsx(Zp.ItemSlot,{scope:t,disabled:r,textValue:s??v,children:y.jsx(j4,{asChild:!0,...l,focusable:!r,children:y.jsx(nt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:Fe(n.onPointerMove,em(S=>{r?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(n.onPointerLeave,em(S=>a.onItemLeave(S))),onFocus:Fe(n.onFocus,()=>g(!0)),onBlur:Fe(n.onBlur,()=>g(!1))})})})}),B5="MenuCheckboxItem",CT=A.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return y.jsx(RT,{scope:n.__scopeMenu,checked:t,children:y.jsx(Sy,{role:"menuitemcheckbox","aria-checked":qv(t)?"mixed":t,...s,ref:e,"data-state":U_(t),onSelect:Fe(s.onSelect,()=>r?.(qv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});CT.displayName=B5;var ET="MenuRadioGroup",[$5,U5]=du(ET,{value:void 0,onValueChange:()=>{}}),kT=A.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Jn(r);return y.jsx($5,{scope:n.__scopeMenu,value:t,onValueChange:i,children:y.jsx(B_,{...s,ref:e})})});kT.displayName=ET;var TT="MenuRadioItem",PT=A.forwardRef((n,e)=>{const{value:t,...r}=n,s=U5(TT,n.__scopeMenu),i=t===s.value;return y.jsx(RT,{scope:n.__scopeMenu,checked:i,children:y.jsx(Sy,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":U_(i),onSelect:Fe(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});PT.displayName=TT;var $_="MenuItemIndicator",[RT,z5]=du($_,{checked:!1}),MT=A.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=z5($_,t);return y.jsx(Is,{present:r||qv(i.checked)||i.checked===!0,children:y.jsx(nt.span,{...s,ref:e,"data-state":U_(i.checked)})})});MT.displayName=$_;var V5="MenuSeparator",IT=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});IT.displayName=V5;var H5="MenuArrow",DT=A.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=xy(t);return y.jsx(tT,{...s,...r,ref:e})});DT.displayName=H5;var W5="MenuSub",[I9,NT]=du(W5),Cp="MenuSubTrigger",OT=A.forwardRef((n,e)=>{const t=hu(Cp,n.__scopeMenu),r=gm(Cp,n.__scopeMenu),s=NT(Cp,n.__scopeMenu),i=j_(Cp,n.__scopeMenu),a=A.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,h={__scopeMenu:n.__scopeMenu},f=A.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return A.useEffect(()=>f,[f]),A.useEffect(()=>{const g=l.current;return()=>{window.clearTimeout(g),d(null)}},[l,d]),y.jsx(O_,{asChild:!0,...h,children:y.jsx(AT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":FT(t.open),...n,ref:dy(e,s.onTriggerChange),onClick:g=>{n.onClick?.(g),!(n.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Fe(n.onPointerMove,em(g=>{i.onItemEnter(g),!g.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Fe(n.onPointerLeave,em(g=>{f();const v=t.content?.getBoundingClientRect();if(v){const _=t.content?.dataset.side,S=_==="right",x=S?-5:5,E=v[S?"left":"right"],P=v[S?"right":"left"];i.onPointerGraceIntentChange({area:[{x:g.clientX+x,y:g.clientY},{x:E,y:v.top},{x:P,y:v.top},{x:P,y:v.bottom},{x:E,y:v.bottom}],side:_}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(g),g.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(n.onKeyDown,g=>{const v=i.searchRef.current!=="";n.disabled||v&&g.key===" "||C5[r.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});OT.displayName=Cp;var LT="MenuSubContent",jT=A.forwardRef((n,e)=>{const t=bT(ti,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=hu(ti,n.__scopeMenu),a=gm(ti,n.__scopeMenu),l=NT(LT,n.__scopeMenu),d=A.useRef(null),h=xt(e,d);return y.jsx(Zp.Provider,{scope:n.__scopeMenu,children:y.jsx(Is,{present:r||i.open,children:y.jsx(Zp.Slot,{scope:n.__scopeMenu,children:y.jsx(F_,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{a.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Fe(n.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Fe(n.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:Fe(n.onKeyDown,f=>{const g=f.currentTarget.contains(f.target),v=E5[a.dir].includes(f.key);g&&v&&(i.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});jT.displayName=LT;function FT(n){return n?"open":"closed"}function qv(n){return n==="indeterminate"}function U_(n){return qv(n)?"indeterminate":n?"checked":"unchecked"}function q5(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function G5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function K5(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=G5(n,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function Y5(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],d=e[a],h=l.x,f=l.y,g=d.x,v=d.y;f>r!=v>r&&t<(g-h)*(r-f)/(v-f)+h&&(s=!s)}return s}function X5(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Y5(t,e)}function em(n){return e=>e.pointerType==="mouse"?n(e):void 0}var Q5=wT,J5=O_,Z5=_T,eH=xT,tH=B_,nH=ST,rH=Sy,sH=CT,iH=kT,oH=PT,aH=MT,lH=IT,cH=DT,uH=OT,dH=jT,Ay="DropdownMenu",[hH,D9]=xo(Ay,[vT]),Br=vT(),[fH,BT]=hH(Ay),$T=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=n,d=Br(e),h=A.useRef(null),[f,g]=Ch({prop:s,defaultProp:i??!1,onChange:a,caller:Ay});return y.jsx(fH,{scope:e,triggerId:wa(),triggerRef:h,contentId:wa(),open:f,onOpenChange:g,onOpenToggle:A.useCallback(()=>g(v=>!v),[g]),modal:l,children:y.jsx(Q5,{...d,open:f,onOpenChange:g,dir:r,modal:l,children:t})})};$T.displayName=Ay;var UT="DropdownMenuTrigger",zT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=BT(UT,t),a=Br(t);return y.jsx(J5,{asChild:!0,...a,children:y.jsx(nt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:dy(e,i.triggerRef),onPointerDown:Fe(n.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Fe(n.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});zT.displayName=UT;var pH="DropdownMenuPortal",VT=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Br(e);return y.jsx(Z5,{...r,...t})};VT.displayName=pH;var HT="DropdownMenuContent",WT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=BT(HT,t),i=Br(t),a=A.useRef(!1);return y.jsx(eH,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Fe(n.onCloseAutoFocus,l=>{a.current||s.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Fe(n.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!s.modal||f)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WT.displayName=HT;var mH="DropdownMenuGroup",qT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(tH,{...s,...r,ref:e})});qT.displayName=mH;var gH="DropdownMenuLabel",GT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(nH,{...s,...r,ref:e})});GT.displayName=gH;var vH="DropdownMenuItem",KT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(rH,{...s,...r,ref:e})});KT.displayName=vH;var yH="DropdownMenuCheckboxItem",YT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(sH,{...s,...r,ref:e})});YT.displayName=yH;var wH="DropdownMenuRadioGroup",bH=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(iH,{...s,...r,ref:e})});bH.displayName=wH;var _H="DropdownMenuRadioItem",XT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(oH,{...s,...r,ref:e})});XT.displayName=_H;var xH="DropdownMenuItemIndicator",QT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(aH,{...s,...r,ref:e})});QT.displayName=xH;var SH="DropdownMenuSeparator",JT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(lH,{...s,...r,ref:e})});JT.displayName=SH;var AH="DropdownMenuArrow",CH=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(cH,{...s,...r,ref:e})});CH.displayName=AH;var EH="DropdownMenuSubTrigger",ZT=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(uH,{...s,...r,ref:e})});ZT.displayName=EH;var kH="DropdownMenuSubContent",eP=A.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Br(t);return y.jsx(dH,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eP.displayName=kH;var TH=$T,PH=zT,RH=VT,tP=WT,MH=qT,nP=GT,rP=KT,sP=YT,iP=XT,oP=QT,aP=JT,lP=ZT,cP=eP;const IH=TH,DH=PH,mC=MH,NH=ot.forwardRef(({className:n,inset:e,children:t,...r},s)=>y.jsxs(lP,{ref:s,className:ut("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,y.jsx(ck,{className:"ml-auto h-4 w-4"})]}));NH.displayName=lP.displayName;const OH=ot.forwardRef(({className:n,...e},t)=>y.jsx(cP,{ref:t,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));OH.displayName=cP.displayName;const uP=ot.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(RH,{children:y.jsx(tP,{ref:r,sideOffset:e,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));uP.displayName=tP.displayName;const Mi=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(rP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));Mi.displayName=rP.displayName;const LH=ot.forwardRef(({className:n,children:e,checked:t,...r},s)=>y.jsxs(sP,{ref:s,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(oP,{children:y.jsx(v_,{className:"h-4 w-4"})})}),e]}));LH.displayName=sP.displayName;const jH=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(iP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(oP,{children:y.jsx(KU,{className:"h-2 w-2 fill-current"})})}),e]}));jH.displayName=iP.displayName;const yb=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(nP,{ref:r,className:ut("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));yb.displayName=nP.displayName;const Ev=ot.forwardRef(({className:n,...e},t)=>y.jsx(aP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));Ev.displayName=aP.displayName;var Cw={exports:{}},Ew={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC;function FH(){if(gC)return Ew;gC=1;var n=Zv();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,i=n.useLayoutEffect,a=n.useDebugValue;function l(g,v){var _=v(),S=r({inst:{value:_,getSnapshot:v}}),x=S[0].inst,E=S[1];return i(function(){x.value=_,x.getSnapshot=v,d(x)&&E({inst:x})},[g,_,v]),s(function(){return d(x)&&E({inst:x}),g(function(){d(x)&&E({inst:x})})},[g]),a(_),_}function d(g){var v=g.getSnapshot;g=g.value;try{var _=v();return!t(g,_)}catch{return!0}}function h(g,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Ew.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Ew}var vC;function BH(){return vC||(vC=1,Cw.exports=FH()),Cw.exports}var $H=BH();function UH(){return $H.useSyncExternalStore(zH,()=>!0,()=>!1)}function zH(){return()=>{}}var z_="Avatar",[VH,N9]=xo(z_),[HH,dP]=VH(z_),hP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=A.useState("idle");return y.jsx(HH,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:y.jsx(nt.span,{...r,ref:e})})});hP.displayName=z_;var fP="AvatarImage",pP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=dP(fP,t),l=WH(r,i),d=Jn(h=>{s(h),a.onImageLoadingStatusChange(h)});return Rn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?y.jsx(nt.img,{...i,ref:e,src:r}):null});pP.displayName=fP;var mP="AvatarFallback",gP=A.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=dP(mP,t),[a,l]=A.useState(r===void 0);return A.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&i.imageLoadingStatus!=="loaded"?y.jsx(nt.span,{...s,ref:e}):null});gP.displayName=mP;function yC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WH(n,{referrerPolicy:e,crossOrigin:t}){const r=UH(),s=A.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=A.useState(()=>yC(i,n));return Rn(()=>{l(yC(i,n))},[i,n]),Rn(()=>{const d=g=>()=>{l(g)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,t,e]),a}var vP=hP,yP=pP,wP=gP;const tm=ot.forwardRef(({className:n,...e},t)=>y.jsx(vP,{ref:t,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));tm.displayName=vP.displayName;const nm=ot.forwardRef(({className:n,...e},t)=>y.jsx(yP,{ref:t,className:ut("aspect-square h-full w-full object-cover",n),...e}));nm.displayName=yP.displayName;const rm=ot.forwardRef(({className:n,...e},t)=>y.jsx(wP,{ref:t,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));rm.displayName=wP.displayName;const qH=({icon:n,active:e,onClick:t,label:r})=>y.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16
      ${e?"text-primary-foreground scale-110":"text-muted-foreground hover:text-foreground hover:scale-105"}`,style:e?{color:"hsl(var(--primary-foreground))"}:{},"aria-label":r,children:[y.jsx("div",{className:"relative w-6 h-6 mb-0.5 flex items-center justify-center",children:y.jsx(n,{className:`w-6 h-6 transition-all duration-200 ${e?"drop-shadow-md":""}`})}),y.jsx("span",{className:"text-[10px] font-medium transition-opacity duration-200 opacity-100",children:r})]}),bP=A.forwardRef(({activeTab:n,setActiveTab:e},t)=>{const{user:r,logout:s,settings:i,isFeatureEnabled:a}=hs(),l=Mh(),{toast:d}=ri(),h=E=>{e(E),l(`/${E}`)},f=async()=>{try{await s(),l("/login")}catch(E){console.error("Erro no Logout:",E.message)}},g=()=>{window.handlePWAInstall?window.handlePWAInstall():d({title:"Instalao no disponvel",description:"A funcionalidade de instalao no est pronta. Tente mais tarde.",variant:"destructive"})},v=i?.profile_photo||r?.user_metadata?.avatar_url,_=i?.user_name||r?.user_metadata?.full_name||"Usurio",S=E=>{const P=E.split(" ");return P.length===1?P[0].charAt(0).toUpperCase():`${P[0].charAt(0)}${P[P.length-1].charAt(0)}`.toUpperCase()},x=[{id:"dashboard",icon:QU,label:"Incio"},{id:"workflow",icon:Gp,label:"Trabalhos"},{id:"clients",icon:vk,label:"Clientes"},{id:"financial",icon:Xp,label:"Caixa"}];return y.jsxs(Zn.nav,{ref:t,initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:200,damping:30},className:"fixed bottom-0 left-0 right-0 bg-card/80 dark:bg-card/70 backdrop-blur-xl border-t border-border/70 shadow-top-lg z-[450] flex items-center justify-around px-1",style:{paddingTop:"0.5rem",paddingBottom:"calc(0.5rem + env(safe-area-inset-bottom))",height:"auto"},children:[x.map(E=>y.jsx(qH,{icon:E.icon,active:n===E.id,onClick:()=>h(E.id),label:E.label},E.id)),y.jsxs(IH,{children:[y.jsx(DH,{asChild:!0,children:y.jsxs("button",{className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16 text-muted-foreground hover:text-foreground hover:scale-105","aria-label":"Mais opes",children:[y.jsxs(tm,{className:"w-6 h-6 border-2 border-primary/70",children:[y.jsx(nm,{src:v,alt:_}),y.jsx(rm,{className:"bg-muted text-sm font-bold",children:S(_)})]}),y.jsx("span",{className:"text-[10px] font-medium opacity-100",children:"Menu"})]})}),y.jsxs(uP,{side:"top",align:"end",className:"mb-2 w-64 bg-popover/80 dark:bg-popover/70 backdrop-blur-md shadow-lg",style:{marginBottom:"calc(0.5rem + env(safe-area-inset-bottom))"},children:[y.jsx(yb,{className:"font-normal",children:y.jsxs("div",{className:"flex flex-col space-y-1",children:[y.jsx("p",{className:"text-sm font-medium leading-none",children:_}),y.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),y.jsx(Ev,{}),y.jsxs(mC,{children:[y.jsxs(Mi,{onClick:()=>h("referrals"),className:"text-green-500 focus:bg-green-500/10 focus:text-green-500",children:[y.jsx(y_,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Indique e Ganhe"})]}),a("agenda_pro")&&y.jsxs(Mi,{onClick:()=>h("calendar"),children:[y.jsx(lk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Agenda"})]}),a("quadros")&&y.jsxs(Mi,{onClick:()=>h("quadros"),children:[y.jsx(gk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Quadros"})]}),a("relatorios")&&y.jsxs(Mi,{onClick:()=>h("reports"),children:[y.jsx(ok,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Relatrios"})]})]}),y.jsx(Ev,{}),y.jsxs(mC,{children:[y.jsx(yb,{children:"Ferramentas"}),a("precifique")&&y.jsxs(Mi,{onClick:()=>h("precifique"),children:[y.jsx(Kp,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Precificar"})]}),a("reserva_inteligente")&&y.jsxs(Mi,{onClick:()=>h("reserva-inteligente"),children:[y.jsx(b_,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Reserva Inteligente"})]}),a("meu_setup")&&y.jsxs(Mi,{onClick:()=>h("my-setup"),children:[y.jsx(dk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Meu Setup"})]})]}),y.jsx(Ev,{}),y.jsxs(Mi,{onClick:g,children:[y.jsx(YU,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Baixar aplicativo"})]}),y.jsxs(Mi,{onClick:()=>h("settings"),children:[y.jsx(mk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Configuraes"})]}),y.jsxs(Mi,{onClick:f,className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[y.jsx(hk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Sair"})]})]})]})]})});bP.displayName="BottomNavBar";const Vt=()=>y.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:[y.jsx(Zn.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:y.jsx(Ah,{className:"h-12 w-12 text-primary animate-spin"})}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Carregando..."})]});function wb(n,[e,t]){return Math.min(t,Math.max(e,n))}function _P(n){const e=A.useRef({value:n,previous:n});return A.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var xP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GH="VisuallyHidden",KH=A.forwardRef((n,e)=>y.jsx(nt.span,{...n,ref:e,style:{...xP,...n.style}}));KH.displayName=GH;var YH=[" ","Enter","ArrowUp","ArrowDown"],XH=[" ","Enter"],tu="Select",[Cy,Ey,QH]=S_(tu),[Lh,O9]=xo(tu,[QH,yy]),ky=yy(),[JH,Dl]=Lh(tu),[ZH,eW]=Lh(tu),SP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:g,disabled:v,required:_,form:S}=n,x=ky(e),[E,P]=A.useState(null),[R,M]=A.useState(null),[N,L]=A.useState(!1),B=hy(h),[$,H]=Ch({prop:r,defaultProp:s??!1,onChange:i,caller:tu}),[Y,ue]=Ch({prop:a,defaultProp:l,onChange:d,caller:tu}),oe=A.useRef(null),ce=E?S||!!E.closest("form"):!0,[ae,me]=A.useState(new Set),W=Array.from(ae).map(q=>q.props.value).join(";");return y.jsx(Jk,{...x,children:y.jsxs(JH,{required:_,scope:e,trigger:E,onTriggerChange:P,valueNode:R,onValueNodeChange:M,valueNodeHasChildren:N,onValueNodeHasChildrenChange:L,contentId:wa(),value:Y,onValueChange:ue,open:$,onOpenChange:H,dir:B,triggerPointerDownPosRef:oe,disabled:v,children:[y.jsx(Cy.Provider,{scope:e,children:y.jsx(ZH,{scope:n.__scopeSelect,onNativeOptionAdd:A.useCallback(q=>{me(ne=>new Set(ne).add(q))},[]),onNativeOptionRemove:A.useCallback(q=>{me(ne=>{const z=new Set(ne);return z.delete(q),z})},[]),children:t})}),ce?y.jsxs(WP,{"aria-hidden":!0,required:_,tabIndex:-1,name:f,autoComplete:g,value:Y,onChange:q=>ue(q.target.value),disabled:v,form:S,children:[Y===void 0?y.jsx("option",{value:""}):null,Array.from(ae)]},W):null]})})};SP.displayName=tu;var AP="SelectTrigger",CP=A.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=ky(t),a=Dl(AP,t),l=a.disabled||r,d=xt(e,a.onTriggerChange),h=Ey(t),f=A.useRef("touch"),[g,v,_]=GP(x=>{const E=h().filter(M=>!M.disabled),P=E.find(M=>M.value===a.value),R=KP(E,x,P);R!==void 0&&a.onValueChange(R.value)}),S=x=>{l||(a.onOpenChange(!0),_()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return y.jsx(Zk,{asChild:!0,...i,children:y.jsx(nt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":qP(a.value)?"":void 0,...s,ref:d,onClick:Fe(s.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:Fe(s.onPointerDown,x=>{f.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:Fe(s.onKeyDown,x=>{const E=g.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(E&&x.key===" ")&&YH.includes(x.key)&&(S(),x.preventDefault())})})})});CP.displayName=AP;var EP="SelectValue",kP=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...l}=n,d=Dl(EP,t),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,g=xt(e,d.onValueNodeChange);return Rn(()=>{h(f)},[h,f]),y.jsx(nt.span,{...l,ref:g,style:{pointerEvents:"none"},children:qP(d.value)?y.jsx(y.Fragment,{children:a}):i})});kP.displayName=EP;var tW="SelectIcon",TP=A.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return y.jsx(nt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});TP.displayName=tW;var nW="SelectPortal",PP=n=>y.jsx(wy,{asChild:!0,...n});PP.displayName=nW;var nu="SelectContent",RP=A.forwardRef((n,e)=>{const t=Dl(nu,n.__scopeSelect),[r,s]=A.useState();if(Rn(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?om.createPortal(y.jsx(MP,{scope:n.__scopeSelect,children:y.jsx(Cy.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),i):null}return y.jsx(IP,{...n,ref:e})});RP.displayName=nu;var Ii=10,[MP,Nl]=Lh(nu),rW="SelectContentImpl",sW=Zc("SelectContent.RemoveScroll"),IP=A.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:_,sticky:S,hideWhenDetached:x,avoidCollisions:E,...P}=n,R=Dl(nu,t),[M,N]=A.useState(null),[L,B]=A.useState(null),$=xt(e,ve=>N(ve)),[H,Y]=A.useState(null),[ue,oe]=A.useState(null),ce=Ey(t),[ae,me]=A.useState(!1),W=A.useRef(!1);A.useEffect(()=>{if(M)return N_(M)},[M]),A_();const q=A.useCallback(ve=>{const[Ne,...He]=ce().map(Mt=>Mt.ref.current),[Ye]=He.slice(-1),it=document.activeElement;for(const Mt of ve)if(Mt===it||(Mt?.scrollIntoView({block:"nearest"}),Mt===Ne&&L&&(L.scrollTop=0),Mt===Ye&&L&&(L.scrollTop=L.scrollHeight),Mt?.focus(),document.activeElement!==it))return},[ce,L]),ne=A.useCallback(()=>q([H,M]),[q,H,M]);A.useEffect(()=>{ae&&ne()},[ae,ne]);const{onOpenChange:z,triggerPointerDownPosRef:re}=R;A.useEffect(()=>{if(M){let ve={x:0,y:0};const Ne=Ye=>{ve={x:Math.abs(Math.round(Ye.pageX)-(re.current?.x??0)),y:Math.abs(Math.round(Ye.pageY)-(re.current?.y??0))}},He=Ye=>{ve.x<=10&&ve.y<=10?Ye.preventDefault():M.contains(Ye.target)||z(!1),document.removeEventListener("pointermove",Ne),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",He,{capture:!0})}}},[M,z,re]),A.useEffect(()=>{const ve=()=>z(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[z]);const[J,F]=GP(ve=>{const Ne=ce().filter(it=>!it.disabled),He=Ne.find(it=>it.ref.current===document.activeElement),Ye=KP(Ne,ve,He);Ye&&setTimeout(()=>Ye.ref.current.focus())}),se=A.useCallback((ve,Ne,He)=>{const Ye=!W.current&&!He;(R.value!==void 0&&R.value===Ne||Ye)&&(Y(ve),Ye&&(W.current=!0))},[R.value]),ee=A.useCallback(()=>M?.focus(),[M]),Te=A.useCallback((ve,Ne,He)=>{const Ye=!W.current&&!He;(R.value!==void 0&&R.value===Ne||Ye)&&oe(ve)},[R.value]),Me=r==="popper"?bb:DP,Pe=Me===bb?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:_,sticky:S,hideWhenDetached:x,avoidCollisions:E}:{};return y.jsx(MP,{scope:t,content:M,viewport:L,onViewportChange:B,itemRefCallback:se,selectedItem:H,onItemLeave:ee,itemTextRefCallback:Te,focusSelectedItem:ne,selectedItemText:ue,position:r,isPositioned:ae,searchRef:J,children:y.jsx(_y,{as:sW,allowPinchZoom:!0,children:y.jsx(py,{asChild:!0,trapped:R.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Fe(s,ve=>{R.trigger?.focus({preventScroll:!0}),ve.preventDefault()}),children:y.jsx(fy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:y.jsx(Me,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:ve=>ve.preventDefault(),...P,...Pe,onPlaced:()=>me(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:Fe(P.onKeyDown,ve=>{const Ne=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Ne&&ve.key.length===1&&F(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Ye=ce().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Ye=Ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const it=ve.target,Mt=Ye.indexOf(it);Ye=Ye.slice(Mt+1)}setTimeout(()=>q(Ye)),ve.preventDefault()}})})})})})})});IP.displayName=rW;var iW="SelectItemAlignedPosition",DP=A.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Dl(nu,t),a=Nl(nu,t),[l,d]=A.useState(null),[h,f]=A.useState(null),g=xt(e,$=>f($)),v=Ey(t),_=A.useRef(!1),S=A.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:P,focusSelectedItem:R}=a,M=A.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&x&&E&&P){const $=i.trigger.getBoundingClientRect(),H=h.getBoundingClientRect(),Y=i.valueNode.getBoundingClientRect(),ue=P.getBoundingClientRect();if(i.dir!=="rtl"){const it=ue.left-H.left,Mt=Y.left-it,un=$.left-Mt,Xt=$.width+un,$r=Math.max(Xt,H.width),$i=window.innerWidth-Ii,Mn=wb(Mt,[Ii,Math.max(Ii,$i-$r)]);l.style.minWidth=Xt+"px",l.style.left=Mn+"px"}else{const it=H.right-ue.right,Mt=window.innerWidth-Y.right-it,un=window.innerWidth-$.right-Mt,Xt=$.width+un,$r=Math.max(Xt,H.width),$i=window.innerWidth-Ii,Mn=wb(Mt,[Ii,Math.max(Ii,$i-$r)]);l.style.minWidth=Xt+"px",l.style.right=Mn+"px"}const oe=v(),ce=window.innerHeight-Ii*2,ae=x.scrollHeight,me=window.getComputedStyle(h),W=parseInt(me.borderTopWidth,10),q=parseInt(me.paddingTop,10),ne=parseInt(me.borderBottomWidth,10),z=parseInt(me.paddingBottom,10),re=W+q+ae+z+ne,J=Math.min(E.offsetHeight*5,re),F=window.getComputedStyle(x),se=parseInt(F.paddingTop,10),ee=parseInt(F.paddingBottom,10),Te=$.top+$.height/2-Ii,Me=ce-Te,Pe=E.offsetHeight/2,ve=E.offsetTop+Pe,Ne=W+q+ve,He=re-Ne;if(Ne<=Te){const it=oe.length>0&&E===oe[oe.length-1].ref.current;l.style.bottom="0px";const Mt=h.clientHeight-x.offsetTop-x.offsetHeight,un=Math.max(Me,Pe+(it?ee:0)+Mt+ne),Xt=Ne+un;l.style.height=Xt+"px"}else{const it=oe.length>0&&E===oe[0].ref.current;l.style.top="0px";const un=Math.max(Te,W+x.offsetTop+(it?se:0)+Pe)+He;l.style.height=un+"px",x.scrollTop=Ne-Te+x.offsetTop}l.style.margin=`${Ii}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=ce+"px",r?.(),requestAnimationFrame(()=>_.current=!0)}},[v,i.trigger,i.valueNode,l,h,x,E,P,i.dir,r]);Rn(()=>M(),[M]);const[N,L]=A.useState();Rn(()=>{h&&L(window.getComputedStyle(h).zIndex)},[h]);const B=A.useCallback($=>{$&&S.current===!0&&(M(),R?.(),S.current=!1)},[M,R]);return y.jsx(aW,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:B,children:y.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:y.jsx(nt.div,{...s,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});DP.displayName=iW;var oW="SelectPopperPosition",bb=A.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ii,...i}=n,a=ky(t);return y.jsx(eT,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bb.displayName=oW;var[aW,V_]=Lh(nu,{}),_b="SelectViewport",NP=A.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Nl(_b,t),a=V_(_b,t),l=xt(e,i.onViewportChange),d=A.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(Cy.Slot,{scope:t,children:y.jsx(nt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Fe(s.onScroll,h=>{const f=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=a;if(v?.current&&g){const _=Math.abs(d.current-f.scrollTop);if(_>0){const S=window.innerHeight-Ii*2,x=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),P=Math.max(x,E);if(P<S){const R=P+_,M=Math.min(S,R),N=R-M;g.style.height=M+"px",g.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,g.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});NP.displayName=_b;var OP="SelectGroup",[lW,cW]=Lh(OP),uW=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=wa();return y.jsx(lW,{scope:t,id:s,children:y.jsx(nt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});uW.displayName=OP;var LP="SelectLabel",jP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=cW(LP,t);return y.jsx(nt.div,{id:s.id,...r,ref:e})});jP.displayName=LP;var Gv="SelectItem",[dW,FP]=Lh(Gv),BP=A.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,l=Dl(Gv,t),d=Nl(Gv,t),h=l.value===r,[f,g]=A.useState(i??""),[v,_]=A.useState(!1),S=xt(e,R=>d.itemRefCallback?.(R,r,s)),x=wa(),E=A.useRef("touch"),P=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(dW,{scope:t,value:r,disabled:s,textId:x,isSelected:h,onItemTextChange:A.useCallback(R=>{g(M=>M||(R?.textContent??"").trim())},[]),children:y.jsx(Cy.ItemSlot,{scope:t,value:r,disabled:s,textValue:f,children:y.jsx(nt.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:Fe(a.onFocus,()=>_(!0)),onBlur:Fe(a.onBlur,()=>_(!1)),onClick:Fe(a.onClick,()=>{E.current!=="mouse"&&P()}),onPointerUp:Fe(a.onPointerUp,()=>{E.current==="mouse"&&P()}),onPointerDown:Fe(a.onPointerDown,R=>{E.current=R.pointerType}),onPointerMove:Fe(a.onPointerMove,R=>{E.current=R.pointerType,s?d.onItemLeave?.():E.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(a.onPointerLeave,R=>{R.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Fe(a.onKeyDown,R=>{d.searchRef?.current!==""&&R.key===" "||(XH.includes(R.key)&&P(),R.key===" "&&R.preventDefault())})})})})});BP.displayName=Gv;var Ep="SelectItemText",$P=A.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=Dl(Ep,t),l=Nl(Ep,t),d=FP(Ep,t),h=eW(Ep,t),[f,g]=A.useState(null),v=xt(e,P=>g(P),d.onItemTextChange,P=>l.itemTextRefCallback?.(P,d.value,d.disabled)),_=f?.textContent,S=A.useMemo(()=>y.jsx("option",{value:d.value,disabled:d.disabled,children:_},d.value),[d.disabled,d.value,_]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=h;return Rn(()=>(x(S),()=>E(S)),[x,E,S]),y.jsxs(y.Fragment,{children:[y.jsx(nt.span,{id:d.textId,...i,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?om.createPortal(i.children,a.valueNode):null]})});$P.displayName=Ep;var UP="SelectItemIndicator",zP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return FP(UP,t).isSelected?y.jsx(nt.span,{"aria-hidden":!0,...r,ref:e}):null});zP.displayName=UP;var xb="SelectScrollUpButton",hW=A.forwardRef((n,e)=>{const t=Nl(xb,n.__scopeSelect),r=V_(xb,n.__scopeSelect),[s,i]=A.useState(!1),a=xt(e,r.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollTop>0;i(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?y.jsx(VP,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});hW.displayName=xb;var Sb="SelectScrollDownButton",fW=A.forwardRef((n,e)=>{const t=Nl(Sb,n.__scopeSelect),r=V_(Sb,n.__scopeSelect),[s,i]=A.useState(!1),a=xt(e,r.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),s?y.jsx(VP,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});fW.displayName=Sb;var VP=A.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Nl("SelectScrollButton",t),a=A.useRef(null),l=Ey(t),d=A.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),Rn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),y.jsx(nt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Fe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Fe(s.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Fe(s.onPointerLeave,()=>{d()})})}),pW="SelectSeparator",HP=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return y.jsx(nt.div,{"aria-hidden":!0,...r,ref:e})});HP.displayName=pW;var Ab="SelectArrow",mW=A.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=ky(t),i=Dl(Ab,t),a=Nl(Ab,t);return i.open&&a.position==="popper"?y.jsx(tT,{...s,...r,ref:e}):null});mW.displayName=Ab;var gW="SelectBubbleInput",WP=A.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=A.useRef(null),i=xt(r,s),a=_P(e);return A.useEffect(()=>{const l=s.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&f){const g=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(g)}},[a,e]),y.jsx(nt.select,{...t,style:{...xP,...t.style},ref:i,defaultValue:e})});WP.displayName=gW;function qP(n){return n===""||n===void 0}function GP(n){const e=Jn(n),t=A.useRef(""),r=A.useRef(0),s=A.useCallback(a=>{const l=t.current+a;e(l),function d(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),i=A.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function KP(n,e,t){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=vW(n,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function vW(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var yW=SP,YP=CP,wW=kP,bW=TP,_W=PP,XP=RP,xW=NP,QP=jP,JP=BP,SW=$P,AW=zP,ZP=HP;const cs=yW,us=wW,Nr=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(YP,{ref:r,className:ut("flex h-10 w-full items-center justify-between rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),...t,children:[e,y.jsx(bW,{asChild:!0,children:y.jsx(qU,{className:"h-4 w-4 opacity-50"})})]}));Nr.displayName=YP.displayName;const Or=A.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>y.jsx(_W,{children:y.jsx(XP,{ref:s,className:ut("relative z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-background dark:border-border",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:y.jsx(xW,{className:ut("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Or.displayName=XP.displayName;const CW=A.forwardRef(({className:n,...e},t)=>y.jsx(QP,{ref:t,className:ut("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));CW.displayName=QP.displayName;const Lt=A.forwardRef(({className:n,children:e,...t},r)=>t.value===null||t.value===void 0||t.value===""?null:y.jsxs(JP,{ref:r,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-accent",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(AW,{children:y.jsx(v_,{className:"h-4 w-4"})})}),y.jsx(SW,{children:e})]}));Lt.displayName=JP.displayName;const EW=A.forwardRef(({className:n,...e},t)=>y.jsx(ZP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));EW.displayName=ZP.displayName;const H_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));H_.displayName="Card";const W_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex flex-col space-y-1.5 p-6",n),...e}));W_.displayName="CardHeader";const q_=ot.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ut("text-2xl font-semibold leading-none tracking-tight",n),...e}));q_.displayName="CardTitle";const G_=ot.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));G_.displayName="CardDescription";const eR=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("p-6 pt-0",n),...e}));eR.displayName="CardContent";const K_=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex items-center p-6 pt-0",n),...e}));K_.displayName="CardFooter";const kW=({allocation:n,savingGoals:e,onConfirm:t,onDismiss:r})=>{const[s,i]=A.useState(""),[a,l]=A.useState(!0);A.useEffect(()=>{if(e&&e.length>0){const v=e.find(_=>_.nome_meta.toLowerCase().includes("emergncia")||_.nome_meta.toLowerCase().includes("reserva"));v?i(v.id):e[0]?.id?i(e[0].id):i("")}else i("")},[e]);const d=()=>{s&&(t(s),l(!1))},h=()=>{r(),l(!1)};if(!a||!n)return null;const f=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),g=e&&e.length>0;return y.jsx(Zn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50,transition:{duration:.2}},className:"fixed bottom-4 right-4 z-[101] w-full max-w-md",children:y.jsxs(H_,{className:"shadow-2xl border-l-4 border-customPurple bg-card",children:[y.jsx(W_,{children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(b_,{className:"w-8 h-8 mr-3 text-customPurple"}),y.jsxs("div",{children:[y.jsx(q_,{className:"text-lg font-semibold text-foreground",children:"Alocar Reserva Financeira?"}),y.jsxs(G_,{className:"text-sm text-muted-foreground",children:["Pagamento de ",f(n.transactionValue),' recebido para "',n.serviceName,'".']})]})]})}),y.jsxs(eR,{className:"space-y-3",children:[y.jsxs("p",{className:"text-base text-foreground",children:["Sugerimos guardar ",y.jsx("strong",{className:"text-customGreen",children:f(n.reserveAmount)}),"."]}),g?y.jsxs("div",{children:[y.jsx("label",{htmlFor:"goalSelect",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Escolha a meta de destino:"}),y.jsxs(cs,{value:s,onValueChange:i,disabled:!s,children:[y.jsx(Nr,{id:"goalSelect",className:"w-full bg-input border-border focus:border-customPurple",children:y.jsx(us,{placeholder:"Selecione uma meta..."})}),y.jsx(Or,{children:e.filter(v=>v.id).map(v=>y.jsxs(Lt,{value:v.id,children:[v.icone&&y.jsx("span",{className:"mr-2",children:v.icone}),v.nome_meta," (",f(v.saldo_atual),")"]},v.id))})]})]}):y.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Nenhuma meta de reserva encontrada. Crie uma em "Reserva Inteligente" para alocar.'})]}),y.jsxs(K_,{className:"flex justify-end space-x-3 pt-4",children:[y.jsxs(Rt,{variant:"outline",onClick:h,className:"text-muted-foreground hover:bg-accent",children:[y.jsx(az,{className:"mr-2 h-4 w-4"})," Agora no"]}),y.jsxs(Rt,{onClick:d,disabled:!s||!g,className:"bg-customGreen hover:bg-customGreen/90 text-white",children:[y.jsx(WU,{className:"mr-2 h-4 w-4"})," Confirmar"]})]})]})})},TW=n=>{const e=Mh(),[t,r]=A.useState(n),[s,i]=A.useState({type:"all",period:"all"}),a=A.useCallback((l,d={type:"all",period:"all"})=>{i(d),r(l),e(`/${l}`,{replace:!0}),window.scrollTo(0,0)},[e]);return{activeTab:t,setActiveTab:a,initialFinancialFilter:s}},PW=()=>{const[n,e]=A.useState(window.innerWidth<768);return A.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),{isMobile:n}},kw="gofotografo_trial_modal_shown_session",wC=[{element:"#dashboard-stat-card-netBalance",popover:{title:"Seu Saldo Geral",description:"Aqui voc acompanha o valor total de todos os pagamentos que j recebeu de seus clientes.",side:"bottom",align:"start"}},{element:"#dashboard-stat-card-pendingToReceive",popover:{title:"Pagamentos a Receber",description:"Fique de olho nos valores que ainda entraro no seu caixa. Essencial para seu planejamento!",side:"bottom",align:"start"}},{element:"#dashboard-chart-card-revenueExpensesChart",popover:{title:"Grfico de Faturamento",description:"Acompanhe visualmente a performance do seu negcio com o grfico de entradas e sadas.",side:"top",align:"start"}},{element:"#floating-action-button",popover:{title:"Menu de Navegao Rpida",description:"Clique aqui a qualquer momento para acessar as outras sees importantes, como Clientes, Trabalhos e Caixa.",side:"left",align:"start"}}],RW=n=>{const{user:e,settings:t,setSettings:r,trialDaysRemaining:s,planStatus:i,loadingAuth:a,loading:l}=hs(),{openModal:d,closeModal:h,openModals:f}=Dh(),g=Fi(),v=Mh(),{toast:_}=ri(),[S,x]=A.useState(!1),[E,P]=A.useState(!1),R=A.useCallback((H=[],Y={})=>{const ue=new URLSearchParams(g.search);H.forEach(ce=>ue.delete(ce)),Object.entries(Y).forEach(([ce,ae])=>{ae!=null?ue.set(ce,String(ae)):ue.delete(ce)});const oe=ue.toString();v(`${g.pathname}${oe?`?${oe}`:""}`,{replace:!0})},[g.search,g.pathname,v]),M=A.useCallback(async()=>{if(e&&t&&t.has_completed_tour===!1)try{await r({...t,has_completed_tour:!0})}catch{_({title:"Erro",description:"No foi possvel salvar o status do tour.",variant:"destructive"})}},[e,t,r,_]),N=A.useCallback(()=>{if(typeof window.driver>"u"){_({title:"Erro no Tour",description:"No foi possvel iniciar o tour guiado.",variant:"destructive"}),M();return}const H=window.driver.js.driver,Y=H({showProgress:!0,nextBtnText:"Prximo ",prevBtnText:" Anterior",doneBtnText:"Finalizar",steps:wC.map(ue=>({...ue,popover:{...ue.popover,onNextClick:()=>Y.moveNext(),onPrevClick:()=>Y.movePrevious(),onCloseClick:()=>{Y.destroy(),M()}}})),onDestroyStarted:()=>{const ue=Y.getActiveIndex?Y.getActiveIndex():-1,oe=wC.length;(ue===-1||ue<oe-1)&&M(),Y.destroy()},onHighlighted:ue=>{ue&&ue.node&&ue.node.scrollIntoView?ue.node.scrollIntoView({behavior:"smooth",block:"center"}):ue&&ue.target&&ue.target.scrollIntoView&&ue.target.scrollIntoView({behavior:"smooth",block:"center"})}});Y.drive()},[_,M]);return A.useEffect(()=>{new URLSearchParams(g.search).get("payment_status")==="success"&&(R(["payment_status","session_id"]),sessionStorage.removeItem(kw))},[g,R]),A.useEffect(()=>{!a&&e&&i==="TRIAL"&&s>=0&&!sessionStorage.getItem(kw)&&!f.trialInfoModal&&!n&&(x(!0),d("trialInfoModal"),sessionStorage.setItem(kw,"true"))},[a,e,i,s,d,f,n]),A.useEffect(()=>{!a&&!l&&e&&t&&t.has_completed_tour===!1&&!f.trialInfoModal&&!f.welcomeTourModal&&!n&&(P(!0),d("welcomeTourModal"))},[a,l,e,t,d,f,n]),{showTrialInfoModal:S,handleCloseTrialInfoModal:()=>{x(!1),h("trialInfoModal")},showWelcomeTourModal:E,handleStartWelcomeTour:()=>{P(!1),h("welcomeTourModal"),N()},handleDeclineWelcomeTour:()=>{P(!1),h("welcomeTourModal"),M()},trialDaysRemainingFromHook:s}};let dv;const MW=new Uint8Array(16);function IW(){if(!dv&&(dv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dv(MW)}const lr=[];for(let n=0;n<256;++n)lr.push((n+256).toString(16).slice(1));function DW(n,e=0){return lr[n[e+0]]+lr[n[e+1]]+lr[n[e+2]]+lr[n[e+3]]+"-"+lr[n[e+4]]+lr[n[e+5]]+"-"+lr[n[e+6]]+lr[n[e+7]]+"-"+lr[n[e+8]]+lr[n[e+9]]+"-"+lr[n[e+10]]+lr[n[e+11]]+lr[n[e+12]]+lr[n[e+13]]+lr[n[e+14]]+lr[n[e+15]]}const NW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bC={randomUUID:NW};function OW(n,e,t){if(bC.randomUUID&&!n)return bC.randomUUID();n=n||{};const r=n.random||(n.rng||IW)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,DW(r)}const tR=()=>{const{user:n,addClient:e,updateClient:t,getClientById:r}=hs(),{toast:s}=ri(),{openModals:i,closeModal:a}=Dh(),{isOpen:l,clientId:d}=i.client||{},h=d?r(d):null,[f,g]=A.useState(!1),[v,_]=A.useState(null),[S,x]=A.useState(null),E=A.useRef(null),P=A.useCallback(()=>({name:"",email:"",phone:"",client_type:"Pessoa Fsica",status:"Ativo",cpf:"",cnpj:"",profile_photo_url:null}),[]),[R,M]=A.useState(P()),N=h?`client_form_draft_${h.id}`:"client_form_draft_new";A.useEffect(()=>{if(l){const oe=localStorage.getItem(N);if(oe)M(JSON.parse(oe)),x(JSON.parse(oe).profile_photo_url);else if(h){const ce={name:h.name||"",email:h.email||"",phone:h.phone||"",client_type:h.client_type||"Pessoa Fsica",status:h.status||"Ativo",cpf:h.cpf||"",cnpj:h.cnpj||"",profile_photo_url:h.profile_photo_url||null};M(ce),x(ce.profile_photo_url)}else M(P()),x(null)}else _(null),x(null)},[h,l,N,P]),A.useEffect(()=>{l&&localStorage.setItem(N,JSON.stringify(R))},[R,l,N]);const L=oe=>{const ce=oe.target.files[0];ce&&(_(ce),x(URL.createObjectURL(ce)))},B=()=>{_(null),x(null),M(oe=>({...oe,profile_photo_url:null})),E.current&&(E.current.value="")},$=()=>{localStorage.removeItem(N),a("client")},H=oe=>{if(!oe)return"?";const ce=oe.split(" ");return ce.length===1?ce[0].charAt(0).toUpperCase():`${ce[0].charAt(0)}${ce[ce.length-1].charAt(0)}`.toUpperCase()},Y=async oe=>{if(oe.preventDefault(),!R.name.trim()){s({title:"Erro de Validao",description:"O nome do cliente  obrigatrio.",variant:"destructive"});return}g(!0);const ce={...R};ce.client_type==="Pessoa Fsica"?ce.cnpj="":ce.cpf="";try{let ae=R.profile_photo_url;if(v){const me=v.name.split(".").pop(),W=`${R.name.replace(/\s+/g,"_")}-${OW()}.${me}`,q=`public/${n.id}/client_photos/${W}`,{error:ne}=await Se.storage.from("user_assets").upload(q,v,{cacheControl:"3600",upsert:!0});if(ne)throw ne;const{data:z}=Se.storage.from("user_assets").getPublicUrl(q);ae=z.publicUrl}else R.profile_photo_url===null&&(ae=null);ce.profile_photo_url=ae,h?(await t(h.id,ce),s({title:"Cliente atualizado",description:"Cliente foi atualizado com sucesso!"})):(await e(ce),s({title:"Cliente adicionado",description:"Novo cliente foi adicionado com sucesso!"})),localStorage.removeItem(N),$()}catch(ae){s({title:"Erro ao salvar",description:`Falha ao salvar cliente: ${ae.message}`,variant:"destructive"})}finally{g(!1)}},ue=(oe,ce)=>{M(ae=>{const me={...ae,[oe]:ce};return oe==="client_type"&&(me.cpf="",me.cnpj=""),me})};return l?y.jsx(Oi,{children:l&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:h?"Editar Cliente":"Novo Cliente"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:$,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:f,children:y.jsx(cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:Y,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[y.jsxs(tm,{className:"w-24 h-24 text-3xl border-4 border-primary/20",children:[y.jsx(nm,{src:S,alt:R.name}),y.jsx(rm,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:H(R.name)})]}),y.jsx("input",{type:"file",ref:E,onChange:L,accept:"image/png, image/jpeg",className:"hidden",disabled:f}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:()=>E.current?.click(),disabled:f,children:[y.jsx(HU,{className:"w-4 h-4 mr-2"}),S?"Alterar Foto":"Adicionar Foto"]}),S&&y.jsxs(Rt,{type:"button",variant:"destructive",size:"sm",onClick:B,disabled:f,children:[y.jsx(__,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(iz,{className:"w-4 h-4 inline mr-2"}),"Nome *"]}),y.jsx("input",{type:"text",value:R.name,onChange:oe=>ue("name",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do cliente",required:!0,disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Tipo de Cliente"]}),y.jsxs("select",{value:R.client_type,onChange:oe=>ue("client_type",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:f,children:[y.jsx("option",{value:"Pessoa Fsica",children:"Pessoa Fsica"}),y.jsx("option",{value:"Pessoa Jurdica",children:"Pessoa Jurdica"})]})]}),R.client_type==="Pessoa Fsica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(oz,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:R.cpf,onChange:oe=>ue("cpf",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:f})]}),R.client_type==="Pessoa Jurdica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:R.cnpj,onChange:oe=>ue("cnpj",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fk,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:R.email,onChange:oe=>ue("email",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(pk,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:R.phone,onChange:oe=>ue("phone",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:f})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsxs("select",{value:R.status,onChange:oe=>ue("status",oe.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:f,children:[y.jsx("option",{value:"Ativo",children:"Ativo"}),y.jsx("option",{value:"Inativo",children:"Inativo"})]})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:$,className:"flex-1",disabled:f,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:f,children:f?y.jsx(Ah,{className:"w-4 h-4 animate-spin"}):h?"Atualizar":"Adicionar"})]})]})]})})}):null},LW=[{value:"equipamentos",label:"Equipamentos Fotogrficos",icon:""},{value:"software",label:"Software/Licenas",icon:""},{value:"servicos",label:"Servios Gerais",icon:""},{value:"marketing",label:"Marketing/Publicidade",icon:""},{value:"educacao",label:"Educao/Cursos",icon:""},{value:"transporte",label:"Transporte/Logstica",icon:""},{value:"alimentacao",label:"Alimentao/Hospedagem",icon:""},{value:"estudio",label:"Estdio/Locao",icon:""},{value:"freelancer",label:"Freelancer/Assistente",icon:""},{value:"juridico",label:"Jurdico/Contabilidade",icon:""},{value:"manutencao",label:"Manuteno/Reparo",icon:""},{value:"material",label:"Material de Escritrio",icon:""},{value:"tecnologia",label:"Tecnologia/Internet",icon:""},{value:"seguro",label:"Seguros",icon:""},{value:"outros",label:"Outros",icon:""}],jW=[{value:"pessoa_fisica",label:"Pessoa Fsica"},{value:"pessoa_juridica",label:"Pessoa Jurdica"},{value:"mei",label:"MEI"}],FW=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"},{value:"bloqueado",label:"Bloqueado"}],BW=()=>{const{addSupplier:n,updateSupplier:e,getSupplierById:t}=hs(),{toast:r}=ri(),{openModals:s,closeModal:i}=Dh(),{isOpen:a,supplierId:l}=s.supplier||{},d=l?t(l):null,[h,f]=A.useState(!1),g=A.useCallback(()=>({name:"",email:"",phone:"",supplier_type:"pessoa_juridica",category:"",status:"ativo",cpf:"",cnpj:"",notes:""}),[]),[v,_]=A.useState(g()),S=d?`supplier_form_draft_${d.id}`:"supplier_form_draft_new";A.useEffect(()=>{if(a){const R=localStorage.getItem(S);if(R)_(JSON.parse(R));else if(d){const M={name:d.name||"",email:d.email||"",phone:d.phone||"",supplier_type:d.supplier_type||"pessoa_juridica",category:d.category||"",status:d.status||"ativo",cpf:d.cpf||"",cnpj:d.cnpj||"",notes:d.notes||""};_(M)}else _(g())}},[d,a,S,g]),A.useEffect(()=>{a&&localStorage.setItem(S,JSON.stringify(v))},[v,a,S]);const x=()=>{localStorage.removeItem(S),i("supplier")},E=async R=>{if(R.preventDefault(),!v.name.trim()){r({title:"Erro de Validao",description:"O nome do fornecedor  obrigatrio.",variant:"destructive"});return}f(!0);const M={...v};M.supplier_type==="pessoa_fisica"||M.supplier_type==="mei"?M.cnpj="":M.cpf="";try{d?(await e(d.id,M),r({title:"Fornecedor atualizado",description:"Fornecedor foi atualizado com sucesso!"})):(await n(M),r({title:"Fornecedor adicionado",description:"Novo fornecedor foi adicionado com sucesso!"})),localStorage.removeItem(S),x()}catch(N){r({title:"Erro ao salvar",description:`Falha ao salvar fornecedor: ${N.message}`,variant:"destructive"})}finally{f(!1)}},P=(R,M)=>{_(N=>{const L={...N,[R]:M};return R==="supplier_type"&&(L.cpf="",L.cnpj=""),L})};return a?y.jsx(Oi,{children:a&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:d?"Editar Fornecedor":"Novo Fornecedor"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:x,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:h,children:y.jsx(cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:E,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsx("div",{className:"flex flex-col items-center space-y-3",children:y.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:y.jsx(Gp,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Nome do Fornecedor *"]}),y.jsx("input",{type:"text",value:v.name,onChange:R=>P("name",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do fornecedor",required:!0,disabled:h})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"Tipo de Fornecedor"]}),y.jsx("select",{value:v.supplier_type,onChange:R=>P("supplier_type",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:h,children:jW.map(R=>y.jsx("option",{value:R.value,children:R.label},R.value))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Gp,{className:"w-4 h-4 inline mr-2"}),"Categoria"]}),y.jsxs("select",{value:v.category,onChange:R=>P("category",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:h,children:[y.jsx("option",{value:"",children:"Selecione uma categoria"}),LW.map(R=>y.jsxs("option",{value:R.value,children:[R.icon," ",R.label]},R.value))]})]}),(v.supplier_type==="pessoa_fisica"||v.supplier_type==="mei")&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(lb,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:v.cpf,onChange:R=>P("cpf",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:h})]}),v.supplier_type==="pessoa_juridica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Op,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:v.cnpj,onChange:R=>P("cnpj",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:h})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fk,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:v.email,onChange:R=>P("email",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:h})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(pk,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:v.phone,onChange:R=>P("phone",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:h})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(lb,{className:"w-4 h-4 inline mr-2"}),"Observaes (Opcional)"]}),y.jsx("textarea",{value:v.notes,onChange:R=>P("notes",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent h-20 resize-none",placeholder:"Observaes sobre o fornecedor...",disabled:h})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsx("select",{value:v.status,onChange:R=>P("status",R.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:h,children:FW.map(R=>y.jsx("option",{value:R.value,children:R.label},R.value))})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:x,className:"flex-1",disabled:h,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:h,children:h?y.jsx(Ah,{className:"w-4 h-4 animate-spin"}):d?"Atualizar":"Adicionar"})]})]})]})})}):null},Lr=A.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:ut("flex h-10 w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:r,...t}));Lr.displayName="Input";var $W="Label",nR=A.forwardRef((n,e)=>y.jsx(nt.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));nR.displayName=$W;var rR=nR;const UW=Ek("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ln=ot.forwardRef(({className:n,...e},t)=>y.jsx(rR,{ref:t,className:ut(UW(),n),...e}));ln.displayName=rR.displayName;var Ty="Dialog",[sR,L9]=xo(Ty),[zW,Bi]=sR(Ty),iR=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,l=A.useRef(null),d=A.useRef(null),[h,f]=Ch({prop:r,defaultProp:s??!1,onChange:i,caller:Ty});return y.jsx(zW,{scope:e,triggerRef:l,contentRef:d,contentId:wa(),titleId:wa(),descriptionId:wa(),open:h,onOpenChange:f,onOpenToggle:A.useCallback(()=>f(g=>!g),[f]),modal:a,children:t})};iR.displayName=Ty;var oR="DialogTrigger",aR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Bi(oR,t),i=xt(e,s.triggerRef);return y.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Q_(s.open),...r,ref:i,onClick:Fe(n.onClick,s.onOpenToggle)})});aR.displayName=oR;var Y_="DialogPortal",[VW,lR]=sR(Y_,{forceMount:void 0}),cR=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=Bi(Y_,e);return y.jsx(VW,{scope:e,forceMount:t,children:A.Children.map(r,a=>y.jsx(Is,{present:t||i.open,children:y.jsx(wy,{asChild:!0,container:s,children:a})}))})};cR.displayName=Y_;var Kv="DialogOverlay",uR=A.forwardRef((n,e)=>{const t=lR(Kv,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Bi(Kv,n.__scopeDialog);return i.modal?y.jsx(Is,{present:r||i.open,children:y.jsx(WW,{...s,ref:e})}):null});uR.displayName=Kv;var HW=Zc("DialogOverlay.RemoveScroll"),WW=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Bi(Kv,t);return y.jsx(_y,{as:HW,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(nt.div,{"data-state":Q_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ru="DialogContent",dR=A.forwardRef((n,e)=>{const t=lR(ru,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Bi(ru,n.__scopeDialog);return y.jsx(Is,{present:r||i.open,children:i.modal?y.jsx(qW,{...s,ref:e}):y.jsx(GW,{...s,ref:e})})});dR.displayName=ru;var qW=A.forwardRef((n,e)=>{const t=Bi(ru,n.__scopeDialog),r=A.useRef(null),s=xt(e,t.contentRef,r);return A.useEffect(()=>{const i=r.current;if(i)return N_(i)},[]),y.jsx(hR,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(n.onCloseAutoFocus,i=>{i.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Fe(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault())})}),GW=A.forwardRef((n,e)=>{const t=Bi(ru,n.__scopeDialog),r=A.useRef(!1),s=A.useRef(!1);return y.jsx(hR,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{n.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||t.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{n.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;t.triggerRef.current?.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),hR=A.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,l=Bi(ru,t),d=A.useRef(null),h=xt(e,d);return A_(),y.jsxs(y.Fragment,{children:[y.jsx(py,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(fy,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Q_(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(KW,{titleId:l.titleId}),y.jsx(XW,{contentRef:d,descriptionId:l.descriptionId})]})]})}),X_="DialogTitle",fR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Bi(X_,t);return y.jsx(nt.h2,{id:s.titleId,...r,ref:e})});fR.displayName=X_;var pR="DialogDescription",mR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Bi(pR,t);return y.jsx(nt.p,{id:s.descriptionId,...r,ref:e})});mR.displayName=pR;var gR="DialogClose",vR=A.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Bi(gR,t);return y.jsx(nt.button,{type:"button",...r,ref:e,onClick:Fe(n.onClick,()=>s.onOpenChange(!1))})});vR.displayName=gR;function Q_(n){return n?"open":"closed"}var yR="DialogTitleWarning",[j9,wR]=Wz(yR,{contentName:ru,titleName:X_,docsSlug:"dialog"}),KW=({titleId:n})=>{const e=wR(yR),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return A.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},YW="DialogDescriptionWarning",XW=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wR(YW).contentName}}.`;return A.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},QW=iR,F9=aR,JW=cR,bR=uR,_R=dR,xR=fR,SR=mR,AR=vR;const ZW=QW,e6=JW,B9=AR,CR=ot.forwardRef(({className:n,...e},t)=>y.jsx(bR,{ref:t,className:ut("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));CR.displayName=bR.displayName;const ER=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(e6,{children:[y.jsx(CR,{}),y.jsxs(_R,{ref:r,className:ut("fixed left-[50%] top-[50%] z-[51] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/50 bg-background/70 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-xl",n),...t,children:[e,y.jsxs(AR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(cu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ER.displayName=_R.displayName;const kR=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});kR.displayName="DialogHeader";const t6=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});t6.displayName="DialogFooter";const TR=ot.forwardRef(({className:n,...e},t)=>y.jsx(xR,{ref:t,className:ut("text-lg font-semibold leading-none tracking-tight",n),...e}));TR.displayName=xR.displayName;const PR=ot.forwardRef(({className:n,...e},t)=>y.jsx(SR,{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));PR.displayName=SR.displayName;const n6={ENTRADA:[{value:"sessao_fotos",label:"Sesso de Fotos",icon:""},{value:"evento",label:"Evento/Casamento",icon:""},{value:"ensaio",label:"Ensaio",icon:""},{value:"album",label:"lbum/Produto",icon:""},{value:"edicao",label:"Edio de Fotos",icon:""},{value:"consultoria",label:"Consultoria",icon:""},{value:"curso",label:"Curso/Workshop",icon:""},{value:"licenciamento",label:"Licenciamento de Imagem",icon:""},{value:"book",label:"Book Fotogrfico",icon:""},{value:"corporativo",label:"Evento Corporativo",icon:""},{value:"newborn",label:"Newborn",icon:""},{value:"gestante",label:"Ensaio Gestante",icon:""},{value:"familia",label:"Ensaio Famlia",icon:""},{value:"formatura",label:"Formatura",icon:""},{value:"aniversario",label:"Aniversrio",icon:""},{value:"outros",label:"Outros",icon:""}],SAIDA:[{value:"equipamento",label:"Equipamento Fotogrfico",icon:""},{value:"lente",label:"Lentes",icon:""},{value:"iluminacao",label:"Iluminao",icon:""},{value:"trip",label:"Trips/Suportes",icon:""},{value:"software",label:"Software/Licenas",icon:""},{value:"marketing",label:"Marketing/Publicidade",icon:""},{value:"site",label:"Site/Hospedagem",icon:""},{value:"curso_capacitacao",label:"Cursos/Capacitao",icon:""},{value:"transporte",label:"Transporte/Combustvel",icon:""},{value:"alimentacao",label:"Alimentao",icon:""},{value:"estudio",label:"Aluguel Estdio",icon:""},{value:"cenario",label:"Cenrios/Props",icon:""},{value:"assistente",label:"Assistente/Freelancer",icon:""},{value:"contador",label:"Contador/Contabilidade",icon:""},{value:"seguro",label:"Seguro Equipamentos",icon:""},{value:"manutencao",label:"Manuteno Equipamentos",icon:""},{value:"material",label:"Material Escritrio",icon:""},{value:"backup",label:"Backup/Armazenamento",icon:""},{value:"juridico",label:"Jurdico/Advocacia",icon:""},{value:"outros",label:"Outros",icon:""}]},r6=[{value:"pix",label:"PIX",icon:""},{value:"cartao_credito",label:"Carto de Crdito",icon:""},{value:"cartao_debito",label:"Carto de Dbito",icon:""},{value:"dinheiro",label:"Dinheiro",icon:""},{value:"cheque",label:"Cheque",icon:""},{value:"ted",label:"TED",icon:""},{value:"doc",label:"DOC",icon:""},{value:"deposito",label:"Depsito Bancrio",icon:""},{value:"boleto",label:"Boleto",icon:""},{value:"outros",label:"Outros",icon:""}],$9=[{value:"all",label:"Todos os perodos"},{value:"today",label:"Hoje"},{value:"week",label:"Esta semana"},{value:"month",label:"Este ms"},{value:"last_7_days",label:"ltimos 7 dias"},{value:"last_30_days",label:"ltimos 30 dias"},{value:"last_90_days",label:"ltimos 90 dias"},{value:"last_year",label:"ltimo ano"},{value:"current_year",label:"Este ano"},{value:"custom",label:"Perodo personalizado"}],s6=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:s})=>{const{clients:i,suppliers:a=[],addTransaction:l,updateTransaction:d,wallets:h}=hs(),{toast:f}=ri(),{openModal:g}=Dh(),[v,_]=A.useState(""),[S,x]=A.useState(""),[E,P]=A.useState(qc(new Date,"yyyy-MM-dd")),[R,M]=A.useState("PENDENTE"),[N,L]=A.useState(""),[B,$]=A.useState(""),[H,Y]=A.useState(""),[ue,oe]=A.useState(""),[ce,ae]=A.useState(""),[me,W]=A.useState(!1),q=A.useCallback(()=>{_(""),x(""),P(qc(new Date,"yyyy-MM-dd")),M("PENDENTE"),L(""),$(""),Y(""),oe(""),ae("")},[]);A.useEffect(()=>{n&&(r?(_(r.descricao||""),x(r.valor||""),P(r.data?qc(new Date(r.data),"yyyy-MM-dd"):qc(new Date,"yyyy-MM-dd")),M(r.status||"PENDENTE"),L(r.cliente_id||""),$(r.supplier_id||""),Y(r.category||""),oe(r.metodo_pagamento||""),ae(r.wallet_id||"")):q())},[r,n,q]);const ne=async ee=>{if(ee.preventDefault(),t==="ENTRADA"&&R==="PAGO"&&!ce){f({title:"Erro de Validao",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}W(!0);const Te={descricao:v,valor:parseFloat(S),data:E,tipo:t.toUpperCase(),status:R,cliente_id:t.toUpperCase()==="ENTRADA"&&N||null,supplier_id:t.toUpperCase()==="SAIDA"&&B||null,category:H,metodo_pagamento:ue,wallet_id:ce||null};try{r?.id?(await d(r.id,Te),f({title:"Sucesso!",description:"Lanamento atualizado."})):(await l(Te),f({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`})),s&&s(),e()}catch(Me){f({title:"Erro",description:`No foi possvel salvar: ${Me.message}`,variant:"destructive"})}finally{W(!1)}},z=h?.filter(ee=>ee&&ee.id&&ee.name)||[],re=i?.filter(ee=>ee&&ee.id&&ee.name)||[],J=a?.filter(ee=>ee&&ee.id&&ee.name)||[],F=()=>{g("client",{})},se=()=>{g("supplier",{})};return y.jsx(Oi,{children:n&&y.jsx(ZW,{open:n,onOpenChange:e,children:y.jsx(ER,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex flex-col h-full",children:[y.jsxs(kR,{className:"flex-shrink-0",children:[y.jsxs(TR,{children:[r?.id?"Editar":"Novo"," Lanamento: ",t==="entrada"?"Entrada":"Sada"]}),y.jsx(PR,{children:"Preencha os detalhes abaixo."})]}),y.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:y.jsxs("form",{onSubmit:ne,className:"space-y-4 py-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"descricao",children:"Descrio"}),y.jsx(Lr,{id:"descricao",value:v,onChange:ee=>_(ee.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"valor",children:"Valor (R$)"}),y.jsx(Lr,{id:"valor",type:"number",value:S,onChange:ee=>x(ee.target.value),required:!0,step:"0.01"})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"data",children:"Data"}),y.jsx(Lr,{id:"data",type:"date",value:E,onChange:ee=>P(ee.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"status",children:"Status"}),y.jsxs(cs,{value:R,onValueChange:M,children:[y.jsx(Nr,{children:y.jsx(us,{})}),y.jsxs(Or,{children:[y.jsx(Lt,{value:"PENDENTE",children:"Pendente"}),y.jsx(Lt,{value:"PAGO",children:"Pago"}),y.jsx(Lt,{value:"ATRASADO",children:"Atrasado"}),y.jsx(Lt,{value:"CANCELADO",children:"Cancelado"})]})]})]}),t==="entrada"?y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(ln,{htmlFor:"cliente",children:"Cliente (Opcional)"}),y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:F,className:"h-8 px-3 text-xs",children:[y.jsx(Yp,{className:"w-3 h-3 mr-1"}),"Novo Cliente"]})]}),y.jsxs(cs,{value:N||"",onValueChange:L,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um cliente"})}),y.jsxs(Or,{className:"max-h-60",children:[y.jsx(Lt,{value:"",children:"Nenhum"}),re.map(ee=>y.jsx(Lt,{value:ee.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ee.name}),ee.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ee.email})]})},ee.id))]})]})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(ln,{htmlFor:"fornecedor",children:"Fornecedor (Opcional)"}),y.jsxs(Rt,{type:"button",variant:"outline",size:"sm",onClick:se,className:"h-8 px-3 text-xs",children:[y.jsx(Yp,{className:"w-3 h-3 mr-1"}),"Novo Fornecedor"]})]}),y.jsxs(cs,{value:B||"",onValueChange:$,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um fornecedor"})}),y.jsxs(Or,{className:"max-h-60",children:[y.jsx(Lt,{value:"",children:"Nenhum"}),J.map(ee=>y.jsx(Lt,{value:ee.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ee.name}),ee.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ee.email}),ee.category&&y.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:ee.category.replace("_"," ")})]})},ee.id))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"categoria",children:"Categoria (Opcional)"}),y.jsxs(cs,{value:H,onValueChange:Y,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione uma categoria"})}),y.jsxs(Or,{className:"max-h-60",children:[y.jsx(Lt,{value:"",children:"Sem categoria"}),(n6[t.toUpperCase()]||[]).map(ee=>y.jsx(Lt,{value:ee.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ee.icon}),ee.label]})},ee.value))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"metodoPagamento",children:"Mtodo de Pagamento (Opcional)"}),y.jsxs(cs,{value:ue,onValueChange:oe,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um mtodo"})}),y.jsxs(Or,{className:"max-h-60",children:[y.jsx(Lt,{value:"",children:"No especificado"}),r6.map(ee=>y.jsx(Lt,{value:ee.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ee.icon}),ee.label]})},ee.value))]})]})]}),y.jsxs("div",{children:[y.jsxs(ln,{htmlFor:"wallet",className:"flex items-center",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),"Carteira ",t==="ENTRADA"&&R==="PAGO"?"*":"(Opcional)"]}),z.length>0?y.jsxs(cs,{value:ce||"",onValueChange:ae,required:t==="ENTRADA"&&R==="PAGO",children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione uma carteira"})}),y.jsxs(Or,{className:"max-h-60",children:[y.jsx(Lt,{value:"",children:"Nenhuma"}),z.map(ee=>y.jsx(Lt,{value:ee.id,children:y.jsxs("div",{className:"flex items-center",children:[ee.icon_url&&y.jsx("img",{src:ee.icon_url,alt:ee.name,className:"w-4 h-4 mr-2 object-contain"}),ee.name]})},ee.id))]})]}):y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-4 flex-shrink-0",children:[y.jsx(Rt,{type:"button",variant:"ghost",onClick:e,disabled:me,children:"Cancelar"}),y.jsx(Rt,{type:"submit",disabled:me,children:me?"Salvando...":"Salvar"})]})]})})]})})})})},RR=ot.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ut("flex min-h-[80px] w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:t,...e}));RR.displayName="Textarea";const hv=({label:n,selectedWallet:e,onWalletChange:t,wallets:r,required:s=!1})=>{const i=r?.filter(a=>a&&a.id&&a.name)||[];return i.length===0?y.jsxs("div",{className:"space-y-1",children:[y.jsxs(ln,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),n]}),y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs(ln,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Xp,{className:"w-4 h-4 mr-2"}),n," ",s&&"*"]}),y.jsxs(cs,{value:e||"",onValueChange:t,required:s,children:[y.jsx(Nr,{id:`wallet-selector-${n.replace(/\s+/g,"-")}`,children:y.jsx(us,{placeholder:"Selecione uma carteira"})}),y.jsxs(Or,{children:[y.jsx(Lt,{value:"",children:"Nenhuma"}),i.map(a=>y.jsx(Lt,{value:a.id,children:y.jsxs("div",{className:"flex items-center",children:[a.icon_url&&y.jsx("img",{src:a.icon_url,alt:a.name,className:"w-4 h-4 mr-2 object-contain"}),a.name]})},a.id))]})]})]})},i6=({card:n,onSave:e,onCancel:t,isSaving:r})=>{const{clients:s,servicePackages:i,settings:a,wallets:l}=hs(),{toast:d}=ri(),[h,f]=A.useState({title:"",client_id:"",status:"agendado",value:"",description:"",date:"",time:"",service_package_id:"",payment_type:"SOMENTE_AGENDADO",entry_value:"",installments:"",payment_method:"",main_wallet_id:"",entry_wallet_id:""});A.useEffect(()=>{f(n?{title:n.title||"",client_id:n.client_id||"",status:n.status||"agendado",value:n.value||"",description:n.description||"",date:n.date?qc(RE(n.date),"yyyy-MM-dd"):"",time:n.time||"",service_package_id:n.service_package_id||"",payment_type:n.payment_type||"SOMENTE_AGENDADO",entry_value:n.entry_value||"",installments:n.installments||"",payment_method:n.payment_method||"",main_wallet_id:n.main_wallet_id||"",entry_wallet_id:n.entry_wallet_id||""}:P=>({...P,status:a?.workflow_columns?.[0]?.id||"agendado"}))},[n,a]);const g=P=>{const{name:R,value:M}=P.target;f(N=>({...N,[R]:M}))},v=(P,R)=>{f(M=>({...M,[P]:R}))},_=P=>{if(P.preventDefault(),h.payment_type!=="SOMENTE_AGENDADO"){if(h.payment_type==="integral"&&!h.main_wallet_id){d({title:"Campo obrigatrio",description:"Por favor, selecione a carteira para o pagamento integral.",variant:"destructive"});return}if(h.payment_type==="parcial"&&(!h.entry_wallet_id||!h.main_wallet_id)){d({title:"Campos obrigatrios",description:"Por favor, selecione as carteiras para a entrada e para o restante.",variant:"destructive"});return}if((h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&!h.main_wallet_id){d({title:"Campo obrigatrio",description:"Por favor, selecione a carteira para o parcelamento.",variant:"destructive"});return}}e(h)},S=a?.workflow_columns?.filter(P=>P&&P.id&&P.title)||[],x=s?.filter(P=>P&&P.id&&P.name)||[],E=i?.filter(P=>P&&P.id&&P.name)||[];return y.jsxs("form",{onSubmit:_,id:"workflow-form",className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"title",children:"Ttulo do Trabalho"}),y.jsx(Lr,{id:"title",name:"title",value:h.title,onChange:g,required:!0})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"client_id",children:"Cliente"}),y.jsxs(cs,{name:"client_id",value:h.client_id||"",onValueChange:P=>v("client_id",P),children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um cliente"})}),y.jsx(Or,{children:x.map(P=>y.jsx(Lt,{value:P.id,children:P.name},P.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"date",children:"Data"}),y.jsx(Lr,{id:"date",name:"date",type:"date",value:h.date,onChange:g})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"time",children:"Hora"}),y.jsx(Lr,{id:"time",name:"time",type:"time",value:h.time,onChange:g})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"status",children:"Status"}),y.jsxs(cs,{name:"status",value:h.status,onValueChange:P=>v("status",P),children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um status"})}),y.jsx(Or,{children:S.map(P=>y.jsx(Lt,{value:P.id,children:P.title},P.id))})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"service_package_id",children:"Pacote de Servio (Opcional)"}),y.jsxs(cs,{name:"service_package_id",value:h.service_package_id||"",onValueChange:P=>v("service_package_id",P),children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um pacote"})}),y.jsxs(Or,{children:[y.jsx(Lt,{value:"",children:"Nenhum"}),E.map(P=>y.jsx(Lt,{value:P.id,children:P.name},P.id))]})]})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"description",children:"Descrio"}),y.jsx(RR,{id:"description",name:"description",value:h.description,onChange:g})]}),y.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[y.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[y.jsx(Kp,{className:"w-5 h-5 mr-2"})," Detalhes Financeiros"]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"value",children:"Valor Total do Trabalho"}),y.jsx(Lr,{id:"value",name:"value",type:"number",step:"0.01",value:h.value,onChange:g,placeholder:"Ex: 1500.00"})]}),y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"payment_type",children:"Forma de Pagamento"}),y.jsxs(cs,{name:"payment_type",value:h.payment_type,onValueChange:P=>v("payment_type",P),children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione a forma de pagamento"})}),y.jsxs(Or,{children:[y.jsx(Lt,{value:"SOMENTE_AGENDADO",children:"Apenas Agendamento"}),y.jsx(Lt,{value:"integral",children:"Pagamento Integral"}),y.jsx(Lt,{value:"parcial",children:"Pagamento Parcial (Entrada + Restante)"}),y.jsx(Lt,{value:"parcelado_pix",children:"Parcelado no PIX"}),y.jsx(Lt,{value:"parcelado_cartao",children:"Parcelado no Carto"})]})]})]}),h.payment_type==="integral"&&y.jsx(hv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0}),h.payment_type==="parcial"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"entry_value",children:"Valor da Entrada"}),y.jsx(Lr,{id:"entry_value",name:"entry_value",type:"number",step:"0.01",value:h.entry_value,onChange:g,placeholder:"Ex: 500.00"})]}),y.jsx(hv,{label:"Carteira da Entrada",selectedWallet:h.entry_wallet_id,onWalletChange:P=>v("entry_wallet_id",P),wallets:l,required:!0}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(hv,{label:"Carteira do Restante",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]}),(h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(ln,{htmlFor:"installments",children:"Nmero de Parcelas"}),y.jsx(Lr,{id:"installments",name:"installments",type:"number",step:"1",value:h.installments,onChange:g,placeholder:"Ex: 6"})]}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(hv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]})]})]})};var Py="Checkbox",[o6,U9]=xo(Py),[a6,J_]=o6(Py);function l6(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:g}=n,[v,_]=Ch({prop:t,defaultProp:s??!1,onChange:d,caller:Py}),[S,x]=A.useState(null),[E,P]=A.useState(null),R=A.useRef(!1),M=S?!!a||!!S.closest("form"):!0,N={checked:v,disabled:i,setChecked:_,control:S,setControl:x,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:R,required:h,defaultChecked:Sl(s)?!1:s,isFormControl:M,bubbleInput:E,setBubbleInput:P};return y.jsx(a6,{scope:e,...N,children:c6(g)?g(N):r})}var MR="CheckboxTrigger",IR=A.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:a,disabled:l,checked:d,required:h,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:_,bubbleInput:S}=J_(MR,n),x=xt(s,f),E=A.useRef(d);return A.useEffect(()=>{const P=i?.form;if(P){const R=()=>g(E.current);return P.addEventListener("reset",R),()=>P.removeEventListener("reset",R)}},[i,g]),y.jsx(nt.button,{type:"button",role:"checkbox","aria-checked":Sl(d)?"mixed":d,"aria-required":h,"data-state":jR(d),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:x,onKeyDown:Fe(e,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:Fe(t,P=>{g(R=>Sl(R)?!0:!R),S&&_&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})})});IR.displayName=MR;var Z_=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:d,onCheckedChange:h,form:f,...g}=n;return y.jsx(l6,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:v})=>y.jsxs(y.Fragment,{children:[y.jsx(IR,{...g,ref:e,__scopeCheckbox:t}),v&&y.jsx(LR,{__scopeCheckbox:t})]})})});Z_.displayName=Py;var DR="CheckboxIndicator",NR=A.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=J_(DR,t);return y.jsx(Is,{present:r||Sl(i.checked)||i.checked===!0,children:y.jsx(nt.span,{"data-state":jR(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});NR.displayName=DR;var OR="CheckboxBubbleInput",LR=A.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:d,name:h,value:f,form:g,bubbleInput:v,setBubbleInput:_}=J_(OR,n),S=xt(t,_),x=_P(i),E=zk(r);A.useEffect(()=>{const R=v;if(!R)return;const M=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(M,"checked").set,B=!s.current;if(x!==i&&L){const $=new Event("click",{bubbles:B});R.indeterminate=Sl(i),L.call(R,Sl(i)?!1:i),R.dispatchEvent($)}},[v,x,i,s]);const P=A.useRef(Sl(i)?!1:i);return y.jsx(nt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??P.current,required:l,disabled:d,name:h,value:f,form:g,...e,tabIndex:-1,ref:S,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});LR.displayName=OR;function c6(n){return typeof n=="function"}function Sl(n){return n==="indeterminate"}function jR(n){return Sl(n)?"indeterminate":n?"checked":"unchecked"}const FR=A.forwardRef(({className:n,...e},t)=>y.jsx(Z_,{ref:t,className:ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(NR,{className:ut("flex items-center justify-center text-current"),children:y.jsx(v_,{className:"h-4 w-4"})})}));FR.displayName=Z_.displayName;const u6=({subtasks:n,onAddSubtask:e,onToggleSubtask:t,onDeleteSubtask:r,cardExists:s})=>{const[i,a]=A.useState(""),l=()=>{i.trim()&&(e(i),a(""))};return s?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(Lr,{type:"text",placeholder:"Nova subtarefa...",value:i,onChange:d=>a(d.target.value),onKeyPress:d=>{d.key==="Enter"&&l()},className:"flex-grow"}),y.jsxs(Rt,{onClick:l,children:[y.jsx(Yp,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),y.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[(n||[]).map(d=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-700 rounded-md group",children:[y.jsxs("label",{className:"flex items-center space-x-2 text-sm text-slate-700 dark:text-slate-300 cursor-pointer",children:[y.jsx(FR,{checked:d.completed,onCheckedChange:()=>t(d.id)}),y.jsx("span",{className:d.completed?"line-through text-slate-500 dark:text-slate-400":"",children:d.text})]}),y.jsx(Rt,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100",onClick:()=>r(d.id),children:y.jsx(__,{size:14,className:"text-red-500"})})]},d.id||d.text)),(n||[]).length===0&&y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhuma subtarefa adicionada."})]})]}):y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(w_,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou gerenciar subtarefas."]})},d6=({comments:n,onAddComment:e,cardExists:t,onAfterComment:r})=>{const[s,i]=A.useState(""),{settings:a}=hs(),l=async()=>{s.trim()&&(await e(s),i(""),r&&r())};if(!t)return y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(w_,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou ver comentrios."]});const d=h=>{if(!h)return"?";const f=h.split(" ");return f.length>1?`${f[0][0]}${f[f.length-1][0]}`.toUpperCase():h.substring(0,2).toUpperCase()};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin p-1",children:n&&n.length>0?n.slice().sort((h,f)=>new Date(h.date)-new Date(f.date)).map(h=>y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs(tm,{className:"h-8 w-8",children:[y.jsx(nm,{src:h.user_photo_url,alt:h.user}),y.jsx(rm,{children:d(h.user)})]}),y.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:h.user}),y.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(h.date).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),y.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:h.text})]})]},h.id||h.date)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum comentrio ainda."})}),y.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 flex items-start space-x-3",children:[y.jsxs(tm,{className:"h-8 w-8 mt-1",children:[y.jsx(nm,{src:a?.profile_photo,alt:a?.user_name}),y.jsx(rm,{children:d(a?.user_name)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx(Lr,{type:"text",value:s,onChange:h=>i(h.target.value),className:"flex-1",placeholder:"Adicionar comentrio...",onKeyPress:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l())}}),y.jsxs(Rt,{onClick:l,size:"sm",className:"mt-2",children:[y.jsx(nz,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]})},h6=({history:n})=>y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:n&&n.length>0?n.slice().reverse().map((e,t)=>y.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg shadow-sm",children:[y.jsx("div",{className:"mt-1 w-2.5 h-2.5 bg-orange-300 rounded-full flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:e.action}),y.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(e.date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),e.user&&`  ${e.user}`]})]}),y.jsx(uk,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]},t)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum histrico disponvel."})}),f6=({activeTab:n,setActiveTab:e,cardId:t,subtasksCount:r,commentsCount:s})=>{const i=[{id:"details",label:"Detalhes"},{id:"subtasks",label:`Subtarefas (${r||0})`}];return t&&(i.push({id:"comments",label:`Comentrios (${s||0})`}),i.push({id:"history",label:"Histrico"})),y.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:i.map(a=>y.jsx("button",{onClick:()=>e(a.id),className:`px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap ${n===a.id?"text-neutral-600 border-b-2 border-neutral-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:a.label},a.id))})},vp=({label:n,children:e,className:t})=>y.jsxs("div",{className:t,children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:n}),e]}),p6=({initialData:n,onSave:e,onCancel:t,onOpenClientModal:r,isSaving:s})=>{const{clients:i,servicePackages:a}=hs(),[l,d]=A.useState(n||{}),h=v=>{const{name:_,value:S}=v.target;d(x=>({...x,[_]:S}))},f=(v,_)=>{let S={...l,[v]:_};if(v==="client_id"||v==="service_package_id"){const x=v==="client_id"?i.find(R=>R.id===_):i.find(R=>R.id===S.client_id),E=v==="service_package_id"?a.find(R=>R.id===_):a.find(R=>R.id===S.service_package_id);let P="";x&&E?P=`${x.name} - ${E.name}`:x?P=x.name:E&&(P=E.name),S.title||(S.title=P),v==="service_package_id"&&E&&(S.value=E.price_cash_pix||E.price_card||"")}d(S)},g=v=>{v.preventDefault(),e(l)};return y.jsxs("form",{id:"quick-create-form",onSubmit:g,className:"space-y-4",children:[y.jsx(vp,{label:"Ttulo do Trabalho*",children:y.jsx(Lr,{name:"title",value:l.title||"",onChange:h,placeholder:"Ex: Ensaio de Casamento de [Cliente]",required:!0,disabled:s})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(vp,{label:"Data",children:y.jsx(Lr,{name:"date",type:"date",value:l.date||"",onChange:h,disabled:s})}),y.jsx(vp,{label:"Valor Total (R$)",children:y.jsx(Lr,{name:"value",type:"number",value:l.value||"",onChange:h,placeholder:"0,00",step:"0.01",min:"0",disabled:s})})]}),y.jsx(vp,{label:"Cliente Vinculado",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs(cs,{name:"client_id",value:l.client_id||"",onValueChange:v=>f("client_id",v),disabled:s,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um cliente..."})}),y.jsx(Or,{children:(i||[]).map(v=>y.jsx(Lt,{value:v.id,children:v.name},v.id))})]}),y.jsx(Rt,{type:"button",variant:"outline",onClick:r,disabled:s,children:y.jsx(Yp,{className:"w-4 h-4"})})]})}),y.jsx(vp,{label:"Pacote de Servios",children:y.jsxs(cs,{name:"service_package_id",value:l.service_package_id||"",onValueChange:v=>f("service_package_id",v),disabled:s,children:[y.jsx(Nr,{children:y.jsx(us,{placeholder:"Selecione um pacote..."})}),y.jsxs(Or,{children:[y.jsx(Lt,{value:"",children:"Nenhum"}),(a||[]).map(v=>y.jsxs(Lt,{value:v.id,children:[v.name," - R$ ",Number(v.price_cash_pix||v.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]},v.id))]})]})})]})},_C=[{text:"Confirmar detalhes do evento com o cliente",completed:!1},{text:"Verificar e preparar equipamento fotogrfico",completed:!1},{text:"Scout do local (se aplicvel)",completed:!1},{text:"Definir cronograma do dia do evento/ensaio",completed:!1},{text:"Realizar o evento/ensaio fotogrfico",completed:!1},{text:"Fazer backup de todas as fotos e vdeos",completed:!1},{text:"Selecionar as melhores fotos (curadoria)",completed:!1},{text:"Edio e tratamento das imagens selecionadas",completed:!1},{text:"Preparar galeria online ou prvia para o cliente",completed:!1},{text:"Enviar prvia para aprovao do cliente",completed:!1},{text:"Realizar ajustes finais (se necessrio)",completed:!1},{text:"Preparar e exportar arquivos finais em alta resoluo",completed:!1},{text:"Entregar o material final ao cliente",completed:!1},{text:"Enviar nota fiscal (se aplicvel)",completed:!1},{text:"Solicitar feedback/depoimento do cliente",completed:!1},{text:"Arquivar projeto e materiais",completed:!1}],m6=()=>{const{clients:n,servicePackages:e,addWorkflowCard:t,updateWorkflowCard:r,getClientById:s,getServicePackageById:i,addComment:a,refreshData:l,user:d,settings:h,getWorkflowCardById:f}=hs(),{toast:g}=ri(),{openModals:v,closeModal:_,openModal:S}=Dh(),{isOpen:x,cardId:E,initialStatus:P,initialData:R}=v.workflow||{},M=E?f(E):null,N=A.useCallback(()=>{const J=h?.workflow_columns?.[0]?.id||"novo-lead";return{title:"",client_id:"",service_package_id:"",description:"",date:"",time:"",value:"",tags:[],status:P||J,contract_url:"",contract_name:"",contract_status:"pending",comments:[],history:[],subtasks:_C.map(se=>({...se,id:Math.random().toString(36).substr(2,9)})),order:0,archived:!1,sync_google_calendar:!1,payment_type:"SOMENTE_AGENDADO",payment_method:"",entry_value:"",installments:"",num_installments:"",card_processing_days:"",entry_paid:!1,first_installment_date:"",createFinancialTransaction:!0,main_wallet_id:"",entry_wallet_id:"",...R}},[h,P,R]),[L,B]=A.useState(N()),[$,H]=A.useState("details"),[Y,ue]=A.useState(!1),[oe,ce]=A.useState("quick"),ae=M?`workflow_form_draft_${M.id}`:`workflow_form_draft_new_${P||"default"}`;A.useEffect(()=>{if(x){ce(M?"full":"quick");const J=localStorage.getItem(ae);let F=N();M&&(F={...N(),...M,client_id:M.client_id||"",service_package_id:M.service_package_id||"",value:M.value!==void 0&&M.value!==null?String(M.value):"",entry_value:M.entry_value!==void 0&&M.entry_value!==null?String(M.entry_value):"",installments:M.installments!==void 0&&M.installments!==null?String(M.installments):"",num_installments:M.num_installments!==void 0&&M.num_installments!==null?String(M.num_installments):"",card_processing_days:M.card_processing_days!==void 0&&M.card_processing_days!==null?String(M.card_processing_days):"",subtasks:M.subtasks&&M.subtasks.length>0?M.subtasks.map(ee=>({...ee,id:ee.id||Math.random().toString(36).substr(2,9)})):_C.map(ee=>({...ee,id:Math.random().toString(36).substr(2,9)}))});const se=J?{...F,...JSON.parse(J)}:F;B(se),H("details")}},[M,x,N,ae]),A.useEffect(()=>{x&&localStorage.setItem(ae,JSON.stringify(L))},[L,x,ae]);const me=()=>{localStorage.removeItem(ae),_("workflow")},W=async J=>{ue(!0);const F=J.title.trim()||"Novo Trabalho",se=J.date||null,ee=(J.payment_type==="ENTRADA_PARCELAS"||J.payment_type==="PIX_PARCELADO"||J.payment_type==="CARTAO_PARCELADO")&&parseInt(J.installments||J.num_installments,10)||null;let Te=J.status;M||(Te=P||(J.date?"agendado":h?.workflow_columns?.[0]?.id||"novo-lead"));const Me={...L,...J,user_id:d.id,title:F,date:se,client_id:J.client_id||null,service_package_id:J.service_package_id||null,first_installment_date:J.first_installment_date||null,value:parseFloat(J.value)||null,entry_value:parseFloat(J.entry_value)||null,history:[{action:"Criado",date:new Date().toISOString(),user:h.user_name||d.email}],status:Te,installments:ee,num_installments:ee,card_processing_days:(J.payment_type==="CARTAO_CREDITO"||J.payment_type==="CARTAO_PARCELADO")&&parseInt(J.card_processing_days,10)||null,entry_paid:J.payment_type==="ENTRADA_PARCELAS"||J.payment_type==="INTEGRAL"?J.entry_paid:!1,subtasks:L.subtasks.map(Pe=>({text:Pe.text,completed:Pe.completed,id:Pe.id||Math.random().toString(36).substr(2,9)})),main_wallet_id:J.main_wallet_id||null,entry_wallet_id:J.entry_wallet_id||null};try{M&&M.id?(await r(M.id,Me),g({title:"Sucesso!",description:`Card "${F}" atualizado.`})):(await t(Me),g({title:"Sucesso!",description:`Agendamento "${F}" criado.`})),localStorage.removeItem(ae),await l(),me()}catch(Pe){g({title:"Erro ao Salvar",description:Pe.message||"No foi possvel salvar.",variant:"destructive",duration:7e3,action:Pe.message.includes("required fields")||Pe.message.includes("obrigatrios")?y.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>{ce("full"),H("details")},children:"Verificar Campos"}):void 0})}finally{ue(!1)}},q=async J=>{if(!(!M||!M.id))try{const F=await a(M.id,J);B(se=>({...se,comments:F.comments,history:F.history})),g({title:"Comentrio Adicionado"})}catch(F){g({title:"Erro",description:F.message,variant:"destructive"})}},ne=J=>B(F=>({...F,subtasks:[...F.subtasks||[],{id:Math.random().toString(36).substr(2,9),text:J,completed:!1}]})),z=J=>B(F=>({...F,subtasks:(F.subtasks||[]).map(se=>se.id===J?{...se,completed:!se.completed}:se)})),re=J=>B(F=>({...F,subtasks:(F.subtasks||[]).filter(se=>se.id!==J)}));return x?y.jsxs(Oi,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(Zn.div,{initial:{opacity:0,y:50,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.98},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-2xl w-full max-w-3xl shadow-2xl flex flex-col max-h-[95vh] z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:M?"Editar Agendamento":"Novo Agendamento"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:me,className:"w-9 h-9 rounded-full",disabled:Y,children:y.jsx(cu,{className:"w-5 h-5"})})]}),oe==="full"&&y.jsx(f6,{activeTab:$,setActiveTab:H,cardId:M?.id,subtasksCount:L.subtasks?.length,commentsCount:L.comments?.length}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 scrollbar-thin",children:[oe==="quick"&&y.jsx(p6,{initialData:L,onSave:W,onCancel:me,onOpenClientModal:()=>S("client",{}),isSaving:Y}),oe==="full"&&$==="details"&&y.jsx(i6,{card:L,onSave:W,onCancel:me,isSaving:Y}),oe==="full"&&$==="subtasks"&&y.jsx(u6,{subtasks:L.subtasks,onAddSubtask:ne,onToggleSubtask:z,onDeleteSubtask:re,cardExists:!!M?.id}),oe==="full"&&$==="comments"&&y.jsx(d6,{comments:L.comments,onAddComment:q,cardExists:!!M?.id,onAfterComment:()=>H("comments")}),oe==="full"&&$==="history"&&M?.id&&y.jsx(h6,{history:L.history})]}),oe==="quick"?y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsxs(Rt,{type:"button",variant:"ghost",onClick:()=>ce("full"),disabled:Y,children:["Mais Opes ",y.jsx(VU,{className:"w-4 h-4 ml-2"})]}),y.jsxs("div",{children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:me,disabled:Y,className:"mr-2",children:"Cancelar"}),y.jsxs(Rt,{type:"submit",form:"quick-create-form",className:"btn-custom-gradient text-white",disabled:Y,children:[Y?y.jsx(Ah,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($A,{className:"w-4 h-4 mr-2"}),Y?"Salvando...":M?"Salvar":"Criar"]})]})]}):y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-end space-x-3 bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:me,disabled:Y,className:"mr-auto",children:"Cancelar"}),y.jsxs(Rt,{type:"submit",form:"workflow-form",className:"btn-custom-gradient text-white",disabled:Y,children:[Y?y.jsx(Ah,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx($A,{className:"w-4 h-4 mr-2"}),Y?"Salvando...":M?"Salvar Alteraes":"Salvar Agendamento"]})]})]},"workflow-modal-content")},"workflow-modal-backdrop"),y.jsx(tR,{})]}):null},g6=["Casamento","Gestante","Newborn","Famlia","Infantil","Debutante (15 anos)","Formatura","Empresarial/Corporativo","Produtos","Gastronomia","Moda","Esportivo","Eventos Sociais","Imobilirio","Pets","Sensual/Boudoir","Outro"],BR="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",v6=({isOpen:n,onClose:e,servicePackage:t,onSaveSuccess:r})=>{const{toast:s}=ri(),{addServicePackage:i,updateServicePackage:a,user:l}=hs(),[d,h]=A.useState(!1),f=A.useCallback(()=>({name:"",description:"",niche:"",price_cash_pix:"",price_card:"",cost:"",items_included:[{name:"",quantity:1}],payment_options:[],details:"",user_id:l?.id||null}),[l]),[g,v]=A.useState(f()),_=t?`service_package_form_draft_${t.id}`:"service_package_form_draft_new";A.useEffect(()=>{if(n){const B=localStorage.getItem(_);if(B){const $=JSON.parse(B);v({...$,user_id:$.user_id||l?.id})}else v(t?{name:t.name||"",description:t.description||"",niche:t.niche||"",price_cash_pix:t.price_cash_pix!==void 0?String(t.price_cash_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost:t.cost!==void 0?String(t.cost):"",items_included:t.items_included&&t.items_included.length>0?t.items_included:[{name:"",quantity:1}],payment_options:t.payment_options||[],details:t.details||"",user_id:t.user_id||l?.id}:f())}},[t,n,_,f,l]),A.useEffect(()=>{n&&localStorage.setItem(_,JSON.stringify(g))},[g,n,_]);const S=()=>{localStorage.removeItem(_),e()},x=(B,$)=>{v(H=>({...H,[B]:$}))},E=(B,$,H)=>{const Y=[...g.items_included];Y[B][$]=$==="quantity"?parseInt(H,10)||1:H,v(ue=>({...ue,items_included:Y}))},P=()=>{v(B=>({...B,items_included:[...B.items_included,{name:"",quantity:1}]}))},R=B=>{const $=g.items_included.filter((H,Y)=>Y!==B);$.length===0?v(H=>({...H,items_included:[{name:"",quantity:1}]})):v(H=>({...H,items_included:$}))},M=B=>{v($=>{const H=$.payment_options||[];return H.includes(B)?{...$,payment_options:H.filter(Y=>Y!==B)}:{...$,payment_options:[...H,B]}})},N=async B=>{if(B.preventDefault(),!l){s({title:"Erro de Autenticao",description:"Usurio no est autenticado.",variant:"destructive"});return}if(!g.name||!g.price_cash_pix||!g.niche){s({title:"Erro de Validao",description:"Nome do pacote, Nicho e Preo ( vista/Pix) so obrigatrios.",variant:"destructive"});return}h(!0);const $={...g,price_cash_pix:parseFloat(g.price_cash_pix)||0,price_card:g.price_card?parseFloat(g.price_card):null,cost:g.cost?parseFloat(g.cost):null,items_included:g.items_included.filter(H=>H.name.trim()!==""),user_id:l.id};try{t&&t.id?await a(t.id,$):await i($),s({title:"Pacote Salvo",description:`O pacote "${g.name}" foi salvo com sucesso!`}),localStorage.removeItem(_),r&&r(),e()}catch(H){s({title:"Erro ao Salvar Pacote",description:H.message,variant:"destructive"})}finally{h(!1)}},L=["Entrada + Parcelamento","Parcelamento Integral Carto"," vista com Desconto"];return y.jsx(Oi,{children:n&&y.jsx(Zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",id:"novo-pacote-backdrop-id",onClick:S,children:y.jsxs(Zn.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",id:"novo-pacote-modal-id",onClick:B=>B.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Pacote de Servio":"Novo Pacote de Servio"}),y.jsx(Rt,{variant:"ghost",size:"icon",onClick:S,className:"w-8 h-8",disabled:d,children:y.jsx(cu,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:N,className:"space-y-4",children:[y.jsxs(yp,{title:"Informaes Bsicas",children:[y.jsx(Bc,{icon:ez,label:"Nome do Pacote *",htmlFor:"pkg-name",children:y.jsx("input",{id:"pkg-name",type:"text",value:g.name,onChange:B=>x("name",B.target.value),placeholder:"Ex: Ensaio Casal Completo",required:!0,disabled:d})}),y.jsx(Bc,{icon:sz,label:"Nicho do Servio *",htmlFor:"pkg-niche",children:y.jsxs("select",{id:"pkg-niche",value:g.niche,onChange:B=>x("niche",B.target.value),required:!0,className:BR,disabled:d,children:[y.jsx("option",{value:"",children:"Selecione um nicho"}),g6.map(B=>y.jsx("option",{value:B,children:B},B))]})}),y.jsx(Bc,{icon:lb,label:"Descrio",htmlFor:"pkg-desc",children:y.jsx("textarea",{id:"pkg-desc",value:g.description,onChange:B=>x("description",B.target.value),placeholder:"Detalhes sobre o pacote...",rows:"3",disabled:d})})]}),y.jsxs(yp,{title:"Precificao",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(Bc,{icon:Kp,label:"Preo ( vista/Pix) *",htmlFor:"pkg-price-cash",children:y.jsx("input",{id:"pkg-price-cash",type:"number",value:g.price_cash_pix,onChange:B=>x("price_cash_pix",B.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:d})}),y.jsx(Bc,{icon:Kp,label:"Preo (Carto)",htmlFor:"pkg-price-card",children:y.jsx("input",{id:"pkg-price-card",type:"number",value:g.price_card,onChange:B=>x("price_card",B.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsx(Bc,{icon:w_,label:"Custo Estimado do Pacote",htmlFor:"pkg-cost",children:y.jsx("input",{id:"pkg-cost",type:"number",value:g.cost,onChange:B=>x("cost",B.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsxs(yp,{title:"Itens Inclusos",children:[g.items_included.map((B,$)=>y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("input",{type:"text",value:B.name,onChange:H=>E($,"name",H.target.value),placeholder:"Nome do item",className:"flex-grow px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx("input",{type:"number",value:B.quantity,onChange:H=>E($,"quantity",H.target.value),placeholder:"Qtd",min:"1",className:"w-20 px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx(Rt,{type:"button",variant:"ghost",size:"icon",onClick:()=>R($),className:"text-red-500",disabled:d,children:y.jsx(__,{className:"w-4 h-4"})})]},$)),y.jsxs(Rt,{type:"button",variant:"outline",onClick:P,className:"mt-2",disabled:d,children:[y.jsx(Yp,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]})]}),y.jsx(yp,{title:"Opes de Pagamento",children:y.jsx("div",{className:"space-y-2",children:L.map(B=>y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:(g.payment_options||[]).includes(B),onChange:()=>M(B),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:d}),y.jsx("span",{className:"text-muted-foreground",children:B})]},B))})}),y.jsx(yp,{title:"Detalhes Adicionais",children:y.jsx(Bc,{icon:tz,label:"Observaes/Termos",htmlFor:"pkg-details",children:y.jsx("textarea",{id:"pkg-details",value:g.details,onChange:B=>x("details",B.target.value),placeholder:"Informaes extras, termos e condies...",rows:"4",disabled:d})})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(Rt,{type:"button",variant:"outline",onClick:S,className:"flex-1",disabled:d,children:"Cancelar"}),y.jsx(Rt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:d,children:d?y.jsx(Ah,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alteraes":"Criar Pacote"})]})]})]})})})},yp=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),Bc=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),ot.Children.map(r,s=>s.type==="select"?ot.cloneElement(s,{className:`${s.props.className||""} ${BR}`}):ot.cloneElement(s,{className:`${s.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),y6=()=>{const[n,e]=A.useState(null),[t,r]=A.useState(!1);A.useEffect(()=>{(async()=>{try{const{data:h,error:f}=await Se.from("anuncios").select("*").eq("esta_ativo",!0).order("created_at",{ascending:!1}).limit(1);if(f)throw f;if(h&&h.length>0){const g=h[0],v=localStorage.getItem(`anuncio_closed_${g.id}`),_=g.cooldown_reaparicao_minutos||60;if(v){const S=_*60*1e3;if(Date.now()-parseInt(v,10)<S)return}e(g),r(!0)}}catch(h){console.error("Erro ao buscar anncio:",h)}})()},[]),A.useEffect(()=>{if(t&&n&&n.duracao_exibicao_segundos>0){const d=setTimeout(()=>{s()},n.duracao_exibicao_segundos*1e3);return()=>clearTimeout(d)}},[t,n]);const s=()=>{r(!1),n&&localStorage.setItem(`anuncio_closed_${n.id}`,Date.now().toString())},i=d=>{d&&(window.open(d,"_blank","noopener,noreferrer"),s())};if(!n)return null;const a={"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end",center:"items-center justify-center","bottom-left":"items-end justify-start","bottom-center":"items-end justify-center","bottom-right":"items-end justify-end"},l={small:"max-w-sm",medium:"max-w-md",large:"max-w-lg"};return y.jsx(Oi,{children:t&&y.jsx(Zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:ut("fixed inset-0 z-[9999] flex p-4 bg-black/30 backdrop-blur-sm",a[n.posicao_anuncio]||a.center),onClick:s,children:y.jsx(Zn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:d=>d.stopPropagation(),children:y.jsxs(H_,{className:ut("shadow-2xl w-full",l[n.tamanho_anuncio]||l.medium),children:[y.jsxs("button",{onClick:s,className:"absolute top-2 right-2 p-1 rounded-full bg-background/50 hover:bg-background/80 transition-colors z-10",children:[y.jsx(cu,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Fechar"})]}),n.imagem_url&&y.jsx("div",{className:"cursor-pointer",onClick:()=>i(n.link_imagem),children:y.jsx("img",{src:n.imagem_url,alt:n.titulo_anuncio,className:"w-full h-auto object-cover rounded-t-lg"})}),y.jsxs(W_,{children:[y.jsx(q_,{children:n.titulo_anuncio}),n.conteudo_anuncio&&y.jsx(G_,{children:n.conteudo_anuncio})]}),n.link_botao&&y.jsx(K_,{children:y.jsx(Rt,{className:"w-full",onClick:()=>i(n.link_botao),children:"Saiba Mais"})})]})})})})},os=({featureName:n,children:e})=>{const{isFeatureEnabled:t}=hs();return t(n)?e:y.jsxs(Zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center p-8 bg-card rounded-xl",children:[y.jsx(ZU,{className:"w-16 h-16 text-destructive mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade no est habilitada para sua conta no momento."}),y.jsx("p",{className:"text-muted-foreground mt-1",children:"Por favor, contate o administrador do sistema para mais informaes."})]})},w6=A.lazy(()=>qe(()=>import("./Dashboard-wa1T_jwR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),b6=A.lazy(()=>qe(()=>import("./Clients-BXRM-IqY.js"),__vite__mapDeps([29,9,25,30,31,32,7,21,33]))),_6=A.lazy(()=>qe(()=>import("./ClientDetail-iliKpClo.js"),__vite__mapDeps([34,35,36,37,38,39,30,40,18,41,20,25,42,22,43]))),x6=A.lazy(()=>qe(()=>import("./Workflow-BfhgnlUV.js"),__vite__mapDeps([44,45,46,47,5,48,19,49,50,15,51,31,18,9,4,20,21,30,52,6,42,53]))),S6=A.lazy(()=>qe(()=>import("./Financial-BECAlIAO.js"),__vite__mapDeps([54,15,14,8,32,18,4,5,55,20,21,22,56,57,58,59,36,12,31]))),A6=A.lazy(()=>qe(()=>import("./Calendar-qg60F3nu.js"),__vite__mapDeps([60,61,62,18,31,53,8,27,56,22,63,64,65,58,59,26,37,66,67,5,68,69]))),C6=A.lazy(()=>qe(()=>import("./Reports-CgJ9cxLi.js"),__vite__mapDeps([70,17,71,47,72,22,62,18,4,5,58,27,59,32,15,73,74]))),E6=A.lazy(()=>qe(()=>import("./Settings-NclQTrI9.js"),__vite__mapDeps([75,61,67,5,76,33,18,4,62,77,52,36,78,25,79,65,57,59,50,22,80,8]))),k6=A.lazy(()=>qe(()=>import("./AccountSettings-Czw0sXew.js"),__vite__mapDeps([81,37,18,52,82]))),T6=A.lazy(()=>qe(()=>import("./ServicePackages-BdBc7PgX.js"),__vite__mapDeps([83,18,9,51,20,21]))),P6=A.lazy(()=>qe(()=>import("./MySetup-THesiihD.js"),__vite__mapDeps([84,35,85,42,77,15,18,36,14,21,13]))),R6=A.lazy(()=>qe(()=>import("./Precifique-Dgvb_5HW.js"),__vite__mapDeps([86,18,11,36,55,21,74,15,16,87,40]))),M6=A.lazy(()=>qe(()=>import("./ReservaInteligente-BJx09G5n.js"),__vite__mapDeps([88,24,18,40,36,16,74,89]))),I6=A.lazy(()=>qe(()=>import("./Boards-dpr4nQo9.js"),__vite__mapDeps([90,1,2,3,21,91,18,92,28]))),D6=A.lazy(()=>qe(()=>import("./BoardDetail-BsJULq6Y.js"),__vite__mapDeps([93,45,46,47,5,48,92,94,89,18,4,52,82]))),N6=A.lazy(()=>qe(()=>import("./PlansPage-W26RMiHk.js"),__vite__mapDeps([95,25,96,13,87]))),O6=A.lazy(()=>qe(()=>import("./FormsPage-J5lC50XW.js"),__vite__mapDeps([97,18,9,98,99,33,91,100,101,68,21]))),L6=A.lazy(()=>qe(()=>import("./FormEditorPage-BONnK_5K.js"),__vite__mapDeps([102,45,46,47,5,48,100,101,68,43,41,28]))),j6=A.lazy(()=>qe(()=>import("./CampaignSubmissionsPage-Bx3TX5Rc.js"),__vite__mapDeps([103,71,47,72,43,98]))),F6=A.lazy(()=>qe(()=>import("./StudioPage-TDfUSNZV.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23]))),B6=A.lazy(()=>qe(()=>import("./ContractListPage-7m5OSBdc.js"),__vite__mapDeps([106,107,25,36,89,21,78,91,31,105,23,22]))),xC=A.lazy(()=>qe(()=>import("./ContractEditorPage-BPj9Teyk.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),SC=A.lazy(()=>qe(()=>import("./ProposalEditorPage-0NDqbCSK.js"),__vite__mapDeps([110,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19]))),$6=A.lazy(()=>qe(()=>import("./BlogPage-DaDQjVg-.js"),__vite__mapDeps([117,22]))),U6=A.lazy(()=>qe(()=>import("./AvailabilityManagerPage-C2rx0LyB.js"),__vite__mapDeps([118,107,25,69,18,22,64,43,21,58,59]))),z6=A.lazy(()=>qe(()=>import("./ReferralsPage-9bzCKaR9.js"),__vite__mapDeps([119,35,107,30,68,73,22]))),AC="gofotografo_last_active_tab",CC="gofotografo_sidebar_collapsed",V6=({children:n})=>{const e=Fi(),{toast:t}=ri(),{settings:r,loadingAuth:s,setSettings:i,pendingReserveAllocations:a,allocateToSavingGoal:l,dismissPendingAllocation:d,savingGoals:h,refreshData:f,isFeatureEnabled:g}=hs(),{theme:v}=lE(),{isAnyModalOpen:_,openModals:S,closeModal:x}=Dh(),[E,P]=A.useState({}),R=()=>{const z=e.pathname;return z.startsWith("/clients/")?"clients":z.startsWith("/quadros")?"quadros":z.startsWith("/forms")||z.startsWith("/campaigns")?"clients":z.startsWith("/studio")||z.startsWith("/contracts")?"studio":z.startsWith("/blog")?"blog":z.startsWith("/availability-manager")?"calendar":z.startsWith("/referrals")?"referrals":z.substring(1)||"dashboard"},{activeTab:M,setActiveTab:N,initialFinancialFilter:L}=TW(localStorage.getItem(AC)||R()),{isMobile:B}=PW();RW(_);const[$,H]=A.useState(()=>{const z=localStorage.getItem(CC);return z!==null?JSON.parse(z):!0}),[Y,ue]=A.useState(!0);if(A.useEffect(()=>{localStorage.setItem(CC,JSON.stringify($)),window.dispatchEvent(new Event("resize"))},[$]),A.useEffect(()=>{const z=R();z!==M&&N(z),e.pathname.startsWith("/quadros/")||P({})},[e.pathname]),A.useEffect(()=>{localStorage.setItem(AC,M)},[M]),s)return y.jsx(Vt,{});const oe=e.pathname.startsWith("/quadros/"),ce=e.pathname==="/quadros",ae=S.financial,me=S.servicePackage,ne=v==="dark"?"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png":"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20claro%20go.fotografo%20cor%20.png";return y.jsxs("div",{className:`flex flex-col bg-background text-foreground ${B?"":"min-h-screen"}`,children:[y.jsx(y6,{}),a.map((z,re)=>y.jsx(kW,{allocation:z,savingGoals:h,onConfirm:async J=>{try{await l(J,z.reserveAmount),t({title:"Sucesso!",description:`R$ ${z.reserveAmount.toFixed(2)} alocados para a meta.`}),d(z.transactionId)}catch(F){t({title:"Erro ao alocar",description:F.message,variant:"destructive"})}},onDismiss:()=>d(z.transactionId)},z.transactionId+re)),y.jsxs("div",{className:`flex ${B?"flex-col":"h-screen"}`,children:[!B&&y.jsxs("div",{className:"relative",children:[y.jsx(Hz,{activeTab:M,setActiveTab:N,collapsed:$,setCollapsed:H}),y.jsx("button",{onClick:()=>H(!$),className:`
                absolute top-1/2 -translate-y-1/2 
                h-12 w-6 bg-card border border-border rounded-r-lg 
                flex items-center justify-center text-muted-foreground hover:bg-accent 
                transition-all duration-300 ease-in-out z-40
                ${$?"left-16":"left-64"}
              `,title:$?"Expandir menu":"Recolher menu",children:$?y.jsx(ck,{className:"w-4 h-4"}):y.jsx(GU,{className:"w-4 h-4"})})]}),B&&y.jsx(Oi,{children:Y&&y.jsx(Zn.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"mobile-header fixed top-0 left-0 right-0 bg-card/60 dark:bg-card/50 backdrop-blur-xl border-b border-border z-[450] flex items-center justify-center px-4 shadow-sm",children:y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("img",{alt:"Logo GO.FOTGRAFO",className:"h-10 w-auto object-contain",src:ne})})})}),y.jsx("main",{id:"main-app-container",className:ut("main-content-container flex-1 transition-all duration-300 ease-in-out",B?`p-4 pb-24 ${Y?"pt-20":"pt-4"}`:`p-6 sm:p-8 ${$?"ml-16":"ml-64"}`,"overflow-y-auto",oe&&"fundo-quadro-ativo p-0 sm:p-0",ce&&"pagina-quadros"),style:E,children:y.jsx("div",{className:ut("h-auto min-h-full",!oe&&"dashboard-page-container"),children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Oi,{mode:"wait",children:y.jsx(Zn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:y.jsxs(oE,{children:[y.jsx(ze,{path:"/dashboard",element:y.jsx(w6,{setActiveTab:N,isMobile:B})}),y.jsx(ze,{path:"/clients",element:y.jsx(b6,{isMobile:B})}),y.jsx(ze,{path:"/clients/:clientId",element:y.jsx(_6,{isMobile:B})}),y.jsx(ze,{path:"/workflow",element:y.jsx(x6,{isMobile:B})}),y.jsx(ze,{path:"/financial",element:y.jsx(S6,{isMobile:B,initialFilter:L})}),y.jsx(ze,{path:"/calendar",element:y.jsx(os,{featureName:"agenda_pro",children:y.jsx(A6,{isMobile:B,setActiveTab:N})})}),y.jsx(ze,{path:"/reports",element:y.jsx(os,{featureName:"relatorios",children:y.jsx(C6,{})})}),y.jsx(ze,{path:"/service-packages",element:y.jsx(os,{featureName:"pacotes_servico",children:y.jsx(T6,{isMobile:B})})}),y.jsx(ze,{path:"/my-setup",element:y.jsx(os,{featureName:"meu_setup",children:y.jsx(P6,{isMobile:B})})}),y.jsx(ze,{path:"/precifique",element:y.jsx(os,{featureName:"precifique",children:y.jsx(R6,{isMobile:B})})}),y.jsx(ze,{path:"/reserva-inteligente",element:y.jsx(os,{featureName:"reserva_inteligente",children:y.jsx(M6,{isMobile:B})})}),y.jsx(ze,{path:"/quadros",element:y.jsx(os,{featureName:"quadros",children:y.jsx(I6,{setSidebarCollapsed:H})})}),y.jsx(ze,{path:"/quadros/:boardId",element:y.jsx(os,{featureName:"quadros",children:y.jsx(D6,{setPageStyle:P})})}),y.jsx(ze,{path:"/forms",element:y.jsx(os,{featureName:"formularios_captacao",children:y.jsx(O6,{})})}),y.jsx(ze,{path:"/forms/edit/:formId",element:y.jsx(os,{featureName:"formularios_captacao",children:y.jsx(L6,{})})}),y.jsx(ze,{path:"/campaigns/:formId",element:y.jsx(os,{featureName:"formularios_captacao",children:y.jsx(j6,{})})}),y.jsxs(ze,{path:"/studio/*",element:y.jsx(os,{featureName:"propostas_avancadas",children:y.jsx($b,{})}),children:[y.jsx(ze,{index:!0,element:y.jsx(F6,{})}),y.jsx(ze,{path:"proposals/new",element:y.jsx(SC,{})}),y.jsx(ze,{path:"proposals/edit/:proposalId",element:y.jsx(SC,{})}),y.jsx(ze,{path:"contracts/new",element:y.jsx(xC,{mode:"new"})}),y.jsx(ze,{path:"contracts/edit/:contractId",element:y.jsx(xC,{mode:"edit"})})]}),y.jsx(ze,{path:"/contracts",element:y.jsx(os,{featureName:"contratos",children:y.jsx(B6,{})})}),y.jsx(ze,{path:"/availability-manager",element:y.jsx(os,{featureName:"agenda_pro",children:y.jsx(U6,{isMobile:B})})}),y.jsx(ze,{path:"/referrals",element:y.jsx(z6,{})}),y.jsx(ze,{path:"/settings",element:y.jsx(E6,{isMobile:B})}),y.jsx(ze,{path:"/account-settings",element:y.jsx(k6,{isMobile:B})}),y.jsx(ze,{path:"/plans",element:y.jsx(N6,{setActiveTab:N})}),y.jsx(ze,{path:"/blog",element:y.jsx($6,{})}),y.jsx(ze,{path:"/",element:y.jsx(Up,{to:"/dashboard",replace:!0})}),y.jsx(ze,{path:"*",element:y.jsx(Up,{to:"/dashboard",replace:!0})})]})},e.pathname+"-inner")})})})},e.pathname),B&&y.jsx(bP,{activeTab:M,setActiveTab:N})]}),y.jsx(tR,{}),y.jsx(BW,{}),y.jsx(m6,{}),y.jsx(Oi,{children:ae?.isOpen&&y.jsx(s6,{isOpen:ae.isOpen,onClose:()=>x("financial"),type:ae.type,transactionData:ae.transaction,onSaveSuccess:async()=>await f()})}),y.jsx(Oi,{children:me?.isOpen&&y.jsx(v6,{isOpen:me.isOpen,onClose:()=>x("servicePackage"),servicePackage:me.servicePackage,onSaveSuccess:async()=>await f()})})]})};function H6({children:n}){const[e,t]=A.useState(null),r=Fi();return A.useEffect(()=>{let s=!0;return(async()=>{try{const{data:i,error:a}=await Se.auth.getUser();if(!s)return;if(a||!i?.user){t(!1);return}const l=!!i.user.app_metadata?.is_admin;t(l)}catch{t(!1)}})(),()=>{s=!1}},[]),e===null?y.jsx(Vt,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(Up,{to:"/login",replace:!0,state:{from:r}})}const W6=()=>{const{toast:n}=ri(),e=()=>{let t;const r=i=>{i.preventDefault(),t=i,s()},s=()=>{t?(t.prompt(),t.userChoice.then(i=>{i.outcome==="accepted"?(console.log("User accepted the install prompt"),n({title:"Aplicativo Instalado!",description:"O GO.FOTGRAFO foi adicionado  sua tela inicial."})):console.log("User dismissed the install prompt"),t=null})):n({title:"J  um App ou no suportado",description:"O aplicativo j pode estar instalado ou seu navegador no suporta esta ao. Tente 'Adicionar  Tela de Incio' no menu do seu navegador.",variant:"default",duration:7e3})};return window.addEventListener("beforeinstallprompt",r),window.deferredPrompt?(t=window.deferredPrompt,s()):n({title:"Instalao",description:"Para instalar, use a opo 'Adicionar  Tela de Incio' do seu navegador.",variant:"default",duration:7e3}),()=>{window.removeEventListener("beforeinstallprompt",r)}};return ot.useEffect(()=>{window.handlePWAInstall=e;const t=r=>{r.preventDefault(),window.deferredPrompt=r};return window.addEventListener("beforeinstallprompt",t),()=>{delete window.handlePWAInstall,window.removeEventListener("beforeinstallprompt",t)}},[]),null};function q6(){const{user:n}=Kb(),e=A.useRef(null);return A.useEffect(()=>{if(e.current&&(clearInterval(e.current),e.current=null),!n)return;const t=24e4,r=async()=>{try{const{error:s}=await Se.from("settings").select("user_id",{count:"exact",head:!0}).eq("user_id",n.id).limit(1);s&&console.warn("KeepAlive: ping falhou:",s.message)}catch(s){console.warn("KeepAlive: erro no ping:",s)}};return r(),e.current=setInterval(r,t),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[n?.id]),null}class $R extends ot.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI crash capturado:",e,t)}render(){return this.state.hasError?y.jsx("div",{className:"p-6 text-sm",children:"Algo deu errado ao renderizar este contedo."}):this.props.children}}function G6(n,e){return A.useReducer((t,r)=>e[t][r]??t,n)}var ex="ScrollArea",[UR,z9]=xo(ex),[K6,ii]=UR(ex),zR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[l,d]=A.useState(null),[h,f]=A.useState(null),[g,v]=A.useState(null),[_,S]=A.useState(null),[x,E]=A.useState(null),[P,R]=A.useState(0),[M,N]=A.useState(0),[L,B]=A.useState(!1),[$,H]=A.useState(!1),Y=xt(e,oe=>d(oe)),ue=hy(s);return y.jsx(K6,{scope:t,type:r,dir:ue,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:g,onContentChange:v,scrollbarX:_,onScrollbarXChange:S,scrollbarXEnabled:L,onScrollbarXEnabledChange:B,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:$,onScrollbarYEnabledChange:H,onCornerWidthChange:R,onCornerHeightChange:N,children:y.jsx(nt.div,{dir:ue,...a,ref:Y,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":M+"px",...n.style}})})});zR.displayName=ex;var VR="ScrollAreaViewport",HR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=ii(VR,t),l=A.useRef(null),d=xt(e,l,a.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),y.jsx(nt.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:y.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});HR.displayName=VR;var Ao="ScrollAreaScrollbar",tx=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ii(Ao,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=n.orientation==="horizontal";return A.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?y.jsx(Y6,{...r,ref:e,forceMount:t}):s.type==="scroll"?y.jsx(X6,{...r,ref:e,forceMount:t}):s.type==="auto"?y.jsx(WR,{...r,ref:e,forceMount:t}):s.type==="always"?y.jsx(nx,{...r,ref:e}):null});tx.displayName=Ao;var Y6=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ii(Ao,n.__scopeScrollArea),[i,a]=A.useState(!1);return A.useEffect(()=>{const l=s.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),a(!0)},f=()=>{d=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),y.jsx(Is,{present:t||i,children:y.jsx(WR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),X6=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ii(Ao,n.__scopeScrollArea),i=n.orientation==="horizontal",a=My(()=>d("SCROLL_END"),100),[l,d]=G6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,s.scrollHideDelay,d]),A.useEffect(()=>{const h=s.viewport,f=i?"scrollLeft":"scrollTop";if(h){let g=h[f];const v=()=>{const _=h[f];g!==_&&(d("SCROLL"),a()),g=_};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[s.viewport,i,d,a]),y.jsx(Is,{present:t||l!=="hidden",children:y.jsx(nx,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Fe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),WR=A.forwardRef((n,e)=>{const t=ii(Ao,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=A.useState(!1),l=n.orientation==="horizontal",d=My(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,f=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?h:f)}},10);return kh(t.viewport,d),kh(t.content,d),y.jsx(Is,{present:r||i,children:y.jsx(nx,{"data-state":i?"visible":"hidden",...s,ref:e})})}),nx=A.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=ii(Ao,n.__scopeScrollArea),i=A.useRef(null),a=A.useRef(0),[l,d]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=XR(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function g(v,_){return nq(v,a.current,l,_)}return t==="horizontal"?y.jsx(Q6,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollLeft,_=EC(v,l,s.dir);i.current.style.transform=`translate3d(${_}px, 0, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollLeft=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollLeft=g(v,s.dir))}}):t==="vertical"?y.jsx(J6,{...f,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const v=s.viewport.scrollTop,_=EC(v,l);i.current.style.transform=`translate3d(0, ${_}px, 0)`}},onWheelScroll:v=>{s.viewport&&(s.viewport.scrollTop=v)},onDragScroll:v=>{s.viewport&&(s.viewport.scrollTop=g(v))}}):null}),Q6=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=ii(Ao,n.__scopeScrollArea),[a,l]=A.useState(),d=A.useRef(null),h=xt(e,d,i.onScrollbarXChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(GR,{"data-orientation":"horizontal",...s,ref:h,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ry(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,g)=>{if(i.viewport){const v=i.viewport.scrollLeft+f.deltaX;n.onWheelScroll(v),JR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Xv(a.paddingLeft),paddingEnd:Xv(a.paddingRight)}})}})}),J6=A.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=ii(Ao,n.__scopeScrollArea),[a,l]=A.useState(),d=A.useRef(null),h=xt(e,d,i.onScrollbarYChange);return A.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(GR,{"data-orientation":"vertical",...s,ref:h,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ry(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,g)=>{if(i.viewport){const v=i.viewport.scrollTop+f.deltaY;n.onWheelScroll(v),JR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Xv(a.paddingTop),paddingEnd:Xv(a.paddingBottom)}})}})}),[Z6,qR]=UR(Ao),GR=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:g,...v}=n,_=ii(Ao,t),[S,x]=A.useState(null),E=xt(e,Y=>x(Y)),P=A.useRef(null),R=A.useRef(""),M=_.viewport,N=r.content-r.viewport,L=Jn(f),B=Jn(d),$=My(g,10);function H(Y){if(P.current){const ue=Y.clientX-P.current.left,oe=Y.clientY-P.current.top;h({x:ue,y:oe})}}return A.useEffect(()=>{const Y=ue=>{const oe=ue.target;S?.contains(oe)&&L(ue,N)};return document.addEventListener("wheel",Y,{passive:!1}),()=>document.removeEventListener("wheel",Y,{passive:!1})},[M,S,N,L]),A.useEffect(B,[r,B]),kh(S,$),kh(_.content,$),y.jsx(Z6,{scope:t,scrollbar:S,hasThumb:s,onThumbChange:Jn(i),onThumbPointerUp:Jn(a),onThumbPositionChange:B,onThumbPointerDown:Jn(l),children:y.jsx(nt.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:Fe(n.onPointerDown,Y=>{Y.button===0&&(Y.target.setPointerCapture(Y.pointerId),P.current=S.getBoundingClientRect(),R.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",_.viewport&&(_.viewport.style.scrollBehavior="auto"),H(Y))}),onPointerMove:Fe(n.onPointerMove,H),onPointerUp:Fe(n.onPointerUp,Y=>{const ue=Y.target;ue.hasPointerCapture(Y.pointerId)&&ue.releasePointerCapture(Y.pointerId),document.body.style.webkitUserSelect=R.current,_.viewport&&(_.viewport.style.scrollBehavior=""),P.current=null})})})}),Yv="ScrollAreaThumb",KR=A.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=qR(Yv,n.__scopeScrollArea);return y.jsx(Is,{present:t||s.hasThumb,children:y.jsx(eq,{ref:e,...r})})}),eq=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=ii(Yv,t),a=qR(Yv,t),{onThumbPositionChange:l}=a,d=xt(e,g=>a.onThumbChange(g)),h=A.useRef(void 0),f=My(()=>{h.current&&(h.current(),h.current=void 0)},100);return A.useEffect(()=>{const g=i.viewport;if(g){const v=()=>{if(f(),!h.current){const _=rq(g,l);h.current=_,l()}};return l(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[i.viewport,f,l]),y.jsx(nt.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(n.onPointerDownCapture,g=>{const _=g.target.getBoundingClientRect(),S=g.clientX-_.left,x=g.clientY-_.top;a.onThumbPointerDown({x:S,y:x})}),onPointerUp:Fe(n.onPointerUp,a.onThumbPointerUp)})});KR.displayName=Yv;var rx="ScrollAreaCorner",YR=A.forwardRef((n,e)=>{const t=ii(rx,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?y.jsx(tq,{...n,ref:e}):null});YR.displayName=rx;var tq=A.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=ii(rx,t),[i,a]=A.useState(0),[l,d]=A.useState(0),h=!!(i&&l);return kh(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),d(f)}),kh(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),a(f)}),h?y.jsx(nt.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Xv(n){return n?parseInt(n,10):0}function XR(n,e){const t=n/e;return isNaN(t)?0:t}function Ry(n){const e=XR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function nq(n,e,t,r="ltr"){const s=Ry(t),i=s/2,a=e||i,l=s-a,d=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-l,f=t.content-t.viewport,g=r==="ltr"?[0,f]:[f*-1,0];return QR([d,h],g)(n)}function EC(n,e,t="ltr"){const r=Ry(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,d=t==="ltr"?[0,a]:[a*-1,0],h=wb(n,d);return QR([0,a],[0,l])(h)}function QR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function JR(n,e){return n>0&&n<e}var rq=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function My(n,e){const t=Jn(n),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function kh(n,e){const t=Jn(e);Rn(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var ZR=zR,sq=HR,iq=KR,oq=YR;const eM=A.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(ZR,{ref:r,className:ut("relative overflow-hidden",n),...t,children:[y.jsx(sq,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(tM,{}),y.jsx(oq,{})]}));eM.displayName=ZR.displayName;const tM=A.forwardRef(({className:n,orientation:e="vertical",...t},r)=>y.jsx(tx,{ref:r,orientation:e,className:ut("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:y.jsx(iq,{className:"relative flex-1 rounded-full bg-border"})}));tM.displayName=tx.displayName;const aq=({reminder:n,onDismiss:e,onFollowUp:t})=>{const r=()=>{if(n.icon)return n.icon;switch(n.reminderType||n.type){case"payment_overdue":case"expense_overdue":return zU;case"payment_due":case"expense_due":return uk;case"birthday":return y_;case"task_due":return rz;default:return ak}},s=()=>{const l=n.reminderType||n.type;return l?.includes("overdue")?"bg-red-500":l?.includes("due")?"bg-yellow-500":l==="birthday"?"bg-pink-500":"bg-primary"},i=r(),a=s();return y.jsxs("div",{className:"flex items-start space-x-3 p-4 border-b border-border/20 last:border-0 hover:bg-muted/30 transition-all duration-200",children:[y.jsx("div",{className:`p-2.5 rounded-full text-white shadow-md ${a}`,children:y.jsx(i,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold mb-1 text-foreground leading-tight",children:n.title}),y.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),n.date&&y.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[n.clientPhone&&y.jsx("button",{onClick:()=>t(n),className:"p-2 hover:bg-green-50 hover:text-green-600 rounded-full transition-all duration-200",title:"Entrar em contato via WhatsApp",children:y.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/16566/16566143.png",alt:"WhatsApp",className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>e(n.id),className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-full transition-all duration-200",title:"Dispensar notificao",children:y.jsx(cu,{className:"w-3 h-3"})})]})]})},lq=({reminders:n,onDismiss:e,onDismissAll:t,onFollowUp:r})=>{if(!n||n.length===0)return null;const s=n.length>=3,i=s?"fixed inset-0 z-50 flex items-center justify-center":"fixed bottom-6 right-6 z-50";return y.jsxs("div",{className:i,children:[s&&y.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),y.jsxs("div",{className:`relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl ${s?"w-full max-w-md m-6 max-h-[70vh]":"w-96 max-h-[80vh] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.3),_0_10px_10px_-5px_rgba(0,0,0,0.2)]"}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/30",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ak,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"font-semibold text-lg",children:n.length===1?"Notificao":`${n.length} Notificaes`})]}),y.jsx("button",{onClick:t,className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-muted",children:"Limpar todas"})]}),y.jsx(eM,{className:s?"max-h-[55vh]":"max-h-80",children:n.map(a=>y.jsx(aq,{reminder:a,onDismiss:e,onFollowUp:r},a.id))})]})]})},cq=()=>{const[n,e]=ot.useState([]),t=ot.useRef({}),r=ot.useCallback(a=>{const l=Date.now(),d=t.current[a.id]||0;l-d>300*1e3&&(e(h=>[...h,a]),t.current[a.id]=l)},[]),s=a=>{e(l=>l.filter(d=>d.id!==a))},i=()=>{e([])};return ot.useEffect(()=>{const a=l=>{l.detail&&r(l.detail)};return window.addEventListener("addNotification",a),()=>{window.removeEventListener("addNotification",a)}},[r]),n.length===0?null:y.jsx(lq,{reminders:n,onDismiss:s,onDismissAll:i,onFollowUp:a=>window.dispatchEvent(new CustomEvent("openFollowUp",{detail:a}))})},uq=A.lazy(()=>qe(()=>import("./LandingPage-B6Zlywkg.js"),__vite__mapDeps([120,16,13,38]))),dq=A.lazy(()=>qe(()=>import("./PrivacyPolicyPage-CATQKYdM.js"),__vite__mapDeps([121,13,43]))),hq=A.lazy(()=>qe(()=>import("./LoginPage-BGp3xO3U.js"),__vite__mapDeps([122,123,74,124]))),fq=A.lazy(()=>qe(()=>import("./SignupPage-D1fAcOew.js"),__vite__mapDeps([125,123,6,7]))),pq=A.lazy(()=>qe(()=>import("./ForgotPasswordPage-miUt9lXT.js"),__vite__mapDeps([126,123,43]))),mq=A.lazy(()=>qe(()=>import("./UpdatePasswordPage-CCV99UUf.js"),__vite__mapDeps([127,123]))),gq=A.lazy(()=>qe(()=>import("./AdminLoginPage-DFNvSmXb.js"),__vite__mapDeps([128,74,124]))),vq=A.lazy(()=>qe(()=>import("./AdminLayout-CmP8lm8B.js"),__vite__mapDeps([129,10,79,65,57,59,22,45,46,47,5,48,2,98,107,25,89,21,116,67,35,80,18,36,68,76,6,7,32,50,33,28,99,52,8]))),yq=A.lazy(()=>qe(()=>import("./PublicFormPage-DJ-P95Na.js"),[])),wq=A.lazy(()=>qe(()=>import("./PublicBookingPage-Dic9PRwH.js"),__vite__mapDeps([130,68,113,76,27,22,58,59,64]))),bq=A.lazy(()=>qe(()=>import("./AssinafyWebhookPage-ChETduUz.js"),[])),_q=A.lazy(()=>qe(()=>import("./MaintenancePage-BNaVPpEV.js"),[])),xq=A.lazy(()=>qe(()=>import("./BlogPage-DaDQjVg-.js"),__vite__mapDeps([117,22]))),Sq=A.lazy(()=>qe(()=>import("./BlogPostPage-J2s7tbWn.js"),__vite__mapDeps([131,43,101,22]))),kC=A.lazy(()=>qe(()=>import("./ProposalEditorPage-CLMa5G7l.js"),__vite__mapDeps([132,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19,66]))),Tw=A.lazy(()=>qe(()=>import("./CustomPageViewer-CApfy2r-.js"),__vite__mapDeps([133,22,37,43]))),Aq=A.lazy(()=>qe(()=>import("./TutorialsPage-CcOo01Ft.js"),__vite__mapDeps([134,31]))),Cq=A.lazy(()=>qe(()=>import("./ProposalPublicView-DwuJyg9h.js"),__vite__mapDeps([135,112,3,2,33,30,39,113,5,48,92,94,114])));A.lazy(()=>qe(()=>import("./StudioPage-TDfUSNZV.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,57,59,22,91,31,105,23])));const TC=A.lazy(()=>qe(()=>import("./ContractEditorPage-BPj9Teyk.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),fv=({children:n})=>y.jsx(y.Fragment,{children:n}),Eq=()=>{const n=Fi(),e=n.pathname.startsWith("/studio/proposals/edit/")||n.pathname==="/studio/proposals/new";return y.jsx(BU,{children:y.jsx(V6,{hideSidebar:e,children:y.jsx($b,{})})})},kq=()=>y.jsxs(oE,{children:[y.jsx(ze,{path:"/lp",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(uq,{})})}),y.jsx(ze,{path:"/politica-de-privacidade-e-dados",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(dq,{})})}),y.jsx(ze,{path:"/login",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(hq,{})})}),y.jsx(ze,{path:"/signup",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(fq,{})})}),y.jsx(ze,{path:"/forgot-password",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(pq,{})})}),y.jsx(ze,{path:"/update-password",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(mq,{})})}),y.jsx(ze,{path:"/f/:formId",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(yq,{})})}),y.jsx(ze,{path:"/agendar/:bookingLinkId",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(wq,{})})}),y.jsx(ze,{path:"/p/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Cq,{})})}),y.jsx(ze,{path:"/webhooks/assinafy",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(bq,{})})}),y.jsx(ze,{path:"/manutencao",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(_q,{})})}),y.jsx(ze,{path:"/blog",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(xq,{})})}),y.jsx(ze,{path:"/blog/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Sq,{})})}),y.jsx(ze,{path:"/control-acess/login",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(gq,{})})}),y.jsx(ze,{path:"/control-acess/*",element:y.jsx(H6,{children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(vq,{})})})}),y.jsx(ze,{path:"/sobre",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Tw,{slug:"sobre"})})}),y.jsx(ze,{path:"/fale-conosco",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Tw,{slug:"fale-conosco"})})}),y.jsx(ze,{path:"/tutoriais",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Aq,{})})}),y.jsx(ze,{path:"/tutoriais/:slug",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(Tw,{isTutorial:!0})})}),y.jsx(ze,{path:"/studio/proposals/new",element:y.jsx(fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(kC,{})})})}),y.jsx(ze,{path:"/studio/proposals/edit/:proposalId",element:y.jsx(fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(kC,{})})})}),y.jsx(ze,{path:"/studio/contracts/new",element:y.jsx(fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(TC,{mode:"new"})})})}),y.jsx(ze,{path:"/studio/contracts/edit/:contractId",element:y.jsx(fv,{children:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx(TC,{mode:"edit"})})})}),y.jsx(ze,{path:"/*",element:y.jsx(Eq,{}),children:y.jsx(ze,{path:"*",element:y.jsx(A.Suspense,{fallback:y.jsx(Vt,{}),children:y.jsx($b,{})})})})]});function Tq(){return y.jsxs(pO,{children:[y.jsx(wO,{children:y.jsx(SE,{children:y.jsx(vF,{children:y.jsx(yF,{children:y.jsx(xF,{children:y.jsxs($R,{children:[y.jsx(q6,{}),y.jsx(W6,{}),y.jsx(kq,{})]})})})})})}),y.jsx(cq,{})]})}var Lp={};Lp.d=(n,e)=>{for(var t in e)Lp.o(e,t)&&!Lp.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Lp.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var at=globalThis.pdfjsLib={};Lp.d(at,{AbortException:()=>pu,AnnotationEditorLayer:()=>ma,AnnotationEditorParamsType:()=>st,AnnotationEditorType:()=>ft,AnnotationEditorUIManager:()=>Pl,AnnotationLayer:()=>E8,AnnotationMode:()=>yl,ColorPicker:()=>ei,DOMSVGFactory:()=>yx,DrawLayer:()=>wr,FeatureTest:()=>Fr,GlobalWorkerOptions:()=>Fp,ImageKind:()=>kv,InvalidPDFException:()=>rM,MissingPDFException:()=>fu,OPS:()=>Di,OutputScale:()=>Tb,PDFDataRangeTransport:()=>_M,PDFDateString:()=>iM,PDFWorker:()=>yh,PasswordResponses:()=>Iq,PermissionFlag:()=>Mq,PixelsPerInch:()=>Th,RenderingCancelledException:()=>ox,TextLayer:()=>Ir,UnexpectedResponseException:()=>Oy,Util:()=>Ve,VerbosityLevel:()=>Iy,XfaLayer:()=>SM,build:()=>o8,createValidAbsoluteUrl:()=>Lq,fetchData:()=>jy,getDocument:()=>QG,getFilenameFromUrl:()=>Wq,getPdfFilenameFromUrl:()=>qq,getXfaPageViewport:()=>Gq,isDataScheme:()=>Fy,isPdfFile:()=>ax,noContextMenu:()=>ni,normalizeUnicode:()=>zq,setLayerDimensions:()=>su,shadow:()=>_t,version:()=>i8});const xr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),nM=[1,0,0,1,0,0],Cb=[.001,0,0,.001,0,0],Pq=1e7,Pw=1.35,Ts={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Rq="pdfjs_internal_editor_",ft={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},st={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Mq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},yr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},kv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},wp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Iy={ERRORS:0,WARNINGS:1,INFOS:5},Di={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Iq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Dy=Iy.WARNINGS;function Dq(n){Number.isInteger(n)&&(Dy=n)}function Nq(){return Dy}function Ny(n){Dy>=Iy.INFOS&&console.log(`Info: ${n}`)}function mt(n){Dy>=Iy.WARNINGS&&console.log(`Warning: ${n}`)}function en(n){throw new Error(n)}function $n(n,e){n||en(e)}function Oq(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Lq(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=Uq(n)}catch{}const r=e?new URL(n,e):new URL(n);if(Oq(r))return r}catch{}return null}function _t(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Ol=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Eb extends Ol{constructor(e,t){super(e,"PasswordException"),this.code=t}}class kb extends Ol{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class rM extends Ol{constructor(e){super(e,"InvalidPDFException")}}class fu extends Ol{constructor(e){super(e,"MissingPDFException")}}class Oy extends Ol{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class jq extends Ol{constructor(e){super(e,"FormatError")}}class pu extends Ol{constructor(e){super(e,"AbortException")}}function sM(n){(typeof n!="object"||n?.length===void 0)&&en("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Ly(n){typeof n!="string"&&en("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Fq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function sx(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function Bq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function $q(){try{return new Function(""),!0}catch{return!1}}class Fr{static get isLittleEndian(){return _t(this,"isLittleEndian",Bq())}static get isEvalSupported(){return _t(this,"isEvalSupported",$q())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?_t(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):_t(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Rw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Ve{static makeHexColor(e,t,r){return`#${Rw[e]}${Rw[t]}${Rw[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[r,s]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[s,i]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],s[0],i[0],a[0]),Math.min(r[1],s[1],i[1],a[1]),Math.max(r[0],s[0],i[0],a[0]),Math.max(r[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(r+a)/2,d=Math.sqrt((r+a)**2-4*(r*a-i*s))/2,h=l+d||1,f=l-d||1;return[Math.sqrt(h),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static#e(e,t,r,s,i,a,l,d,h,f){if(h<=0||h>=1)return;const g=1-h,v=h*h,_=v*h,S=g*(g*(g*e+3*h*t)+3*v*r)+_*s,x=g*(g*(g*i+3*h*a)+3*v*l)+_*d;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],x)}static#t(e,t,r,s,i,a,l,d,h,f,g,v){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,s,i,a,l,d,-g/f,v);return}const _=f**2-4*g*h;if(_<0)return;const S=Math.sqrt(_),x=2*h;this.#e(e,t,r,s,i,a,l,d,(-f+S)/x,v),this.#e(e,t,r,s,i,a,l,d,(-f-S)/x,v)}static bezierBoundingBox(e,t,r,s,i,a,l,d,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,d)):h=[Math.min(e,l),Math.min(t,d),Math.max(e,l),Math.max(t,d)],this.#t(e,r,i,l,t,s,a,d,3*(-e+3*(r-i)+l),6*(e-2*r+i),3*(r-e),h),this.#t(e,r,i,l,t,s,a,d,3*(-t+3*(s-a)+d),6*(t-2*s+a),3*(s-t),h),h}}function Uq(n){return decodeURIComponent(escape(n))}let Mw=null,PC=null;function zq(n){return Mw||(Mw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,PC=new Map([["","t"]])),n.replaceAll(Mw,(e,t,r)=>t?t.normalize("NFKC"):PC.get(r))}function Vq(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return sM(n)}const ix="pdfjs_internal_id_",ca={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Hq(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(sM(n))}const ha="http://www.w3.org/2000/svg";class Th{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function jy(n,e="text"){if(kp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class vm{constructor({viewBox:e,scale:t,rotation:r,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=s,this.offsetY=i;const l=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,g,v;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,g=0,v=1;break;case 90:h=0,f=1,g=1,v=0;break;case 270:h=0,f=-1,g=-1,v=0;break;case 0:h=1,f=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let _,S,x,E;h===0?(_=Math.abs(d-e[1])*t+s,S=Math.abs(l-e[0])*t+i,x=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(_=Math.abs(l-e[0])*t+s,S=Math.abs(d-e[1])*t+i,x=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[h*t,f*t,g*t,v*t,_-h*t*l-g*t*d,S-f*t*l-v*t*d],this.width=x,this.height=E}get rawDims(){const{viewBox:e}=this;return _t(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new vm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return Ve.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ve.applyTransform([e[0],e[1]],this.transform),r=Ve.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return Ve.applyInverseTransform([e,t],this.transform)}}class ox extends Ol{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Fy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function ax(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Wq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function qq(n,e="document.pdf"){if(typeof n!="string")return e;if(Fy(n))return mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let i=r.exec(s[1])||r.exec(s[2])||r.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=r.exec(decodeURIComponent(i))[0]}catch{}return i||e}class RC{started=Object.create(null);times=[];time(e){e in this.started&&mt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||mt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function kp(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function ni(n){n.preventDefault()}function MC(n){console.log("Deprecated API usage: "+n)}class iM{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,l+=g):h==="+"&&(a-=f,l-=g),new Date(Date.UTC(r,s,i,a,l,d))}}function Gq(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new vm({viewBox:i,scale:e,rotation:t})}function lx(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(mt(`Not a valid color format: "${n}"`),[0,0,0])}function Kq(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,lx(r))}e.remove()}function an(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function ua(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function su(n,e,t=!1,r=!0){if(e instanceof vm){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,l=Fr.isCSSRoundSupported,d=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${i}px`,f=l?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=l?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Tb{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class jp{#e=null;#t=null;#n;#s=null;#i=null;static#r=null;constructor(e){this.#n=e,jp.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",ni,{signal:t}),e.addEventListener("pointerdown",jp.#l,{signal:t});const r=this.#s=document.createElement("div");r.className="buttons",e.append(r);const s=this.#n.toolbarPosition;if(s){const{style:i}=e,a=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ni,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",jp.#r[e]),this.#a(r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#s.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#a(t),this.#s.prepend(t,this.#o),this.#i=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#s.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Yq{#e=null;#t=null;#n;constructor(e){this.#n=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ni,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#i(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const l=i.x+(t?i.width:0);if(a>r){s=l,r=a;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,r]}show(e,t,r){const[s,i]=this.#i(t,r),{style:a}=this.#t||=this.#s();e.append(this.#t),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",ni,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Qv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function Xq(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}class Qq{#e=0;get id(){return`${Rq}${this.#e++}`}}class cx{#e=Vq();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",i)}async#s(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(r.url=t,s=await jy(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=cx._isSVGFittingCanvas,a=new FileReader,l=new Image,d=new Promise((h,f)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,h()},a.onload=async()=>{const g=r.svgUrl=a.result;l.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=f});a.readAsDataURL(s),await d}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return this.#s(`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const r=await t;return this.#s(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Jq{#e=[];#t=!1;#n;#s=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&e(),this.#t)return;const d={cmd:e,undo:t,post:r,type:i};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(d);return}if(a&&this.#e[this.#s].type===i){l&&(d.undo=this.#e[this.#s].undo),this.#e[this.#s]=d;return}const h=this.#s+1;h===this.#n?this.#e.splice(0,1):(this.#s=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}destroy(){this.#e=null}}class ym{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Fr.platform;for(const[r,s,i={}]of e)for(const a of r){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:l=null}}=r;l&&!l(e,t)||(s.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}class ux{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Kq(e),_t(this,"_colors",e)}convert(e){const t=lx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return ux._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Ve.makeHexColor(...t):e}}class Pl{#e=new AbortController;#t=null;#n=new Map;#s=new Map;#i=null;#r=null;#l=null;#c=new Jq;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#v=!1;#g=!1;#m=null;#y=null;#b=null;#E=null;#S=!1;#A=null;#O=new Qq;#k=!1;#_=!1;#C=null;#T=null;#P=null;#I=null;#x=ft.NONE;#w=new Set;#D=null;#N=null;#L=null;#z={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#j=null;#F=null;#U=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Pl.prototype,t=a=>a.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new ym([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,r,s,i,a,l,d,h,f,g){const v=this._signal=this.#e.signal;this.#F=e,this.#U=t,this.#i=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:v}),this.#ee(),this.#se(),this.#G(),this.#r=i.annotationStorage,this.#m=i.filterFactory,this.#N=a,this.#E=l||null,this.#f=d,this.#v=h,this.#g=f,this.#I=g||null,this.viewParameters={realScale:Th.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#R?.resolve(),this.#R=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#A?.hide(),this.#A=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#I}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#g}get hcmFilter(){return _t(this,"hcmFilter",this.#N?this.#m.addHCMFilter(this.#N.foreground,this.#N.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return _t(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#P=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#g=t;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#s.values()){const{x:s,y:i,width:a,height:l}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+l)return r}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Th.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#H({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#s.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,l=t.toString(),h=this.#H(t).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;t.empty();const g=this.#q(h),v=this.#x===ft.NONE,_=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(ft.HIGHLIGHT,_);return}_()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#H(e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#A||=new Yq(this),this.#A.show(r,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Z(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#D)return;const s=this.#H(e).closest(".textLayer");if(!s){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#D=t,this.#M({hasSelectedText:!0}),!(this.#x!==ft.HIGHLIGHT&&this.#x!==ft.NONE)&&(this.#x===ft.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const i=this.#x===ft.HIGHLIGHT?this.#q(s):null;i?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),d=h=>{h.type==="pointerup"&&h.button!==0||(a.abort(),i?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}#W(e=""){this.#x===ft.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#J()}#ee(){document.addEventListener("selectionchange",this.#Z.bind(this),{signal:this._signal})}#te(){if(this.#b)return;this.#b=new AbortController;const e=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#T=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#T)return;const[e,t]=this.#T;this.#T=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#G(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#C?.abort(),this.#C=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#se(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#G(),this.#K()}removeEditListeners(){this.#re(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#w){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){mt(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const d of r){const h=await s.deserialize(d);if(!h)return;i.push(h)}const a=()=>{for(const d of i)this.#X(d);this.#Q(i)},l=()=>{for(const d of i)d.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){mt(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==ft.NONE&&!this.isEditorHandlingKeyboard&&Pl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(e){Object.entries(e).some(([r,s])=>this.#z[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#z,e)}),this.#x===ft.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[st.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#K(),this.#M({isEditing:this.#x!==ft.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#Y(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#$(t.defaultPropertiesToUpdate)}}getId(){return this.#O.id}get currentLayer(){return this.#s.get(this.#a)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#s.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#x!==e&&!(this.#R&&(await this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#x=e,e===ft.NONE){this.setEditingState(!1),this.#oe(),this.#R.resolve();return}this.setEditingState(!0),await this.#ie(),this.unselectAll();for(const s of this.#s.values())s.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(const s of this.#n.values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#R.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case st.CREATE:this.currentLayer.addNewEditor();return;case st.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(t);break;case st.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#w)r.updateParams(e,t);for(const r of this.#h)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const i of this.#n.values())i.editorType===e&&i.show(t);(this.#L?.get(st.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#$([[st.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#_!==e){this.#_=e;for(const t of this.#s.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ie(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#s.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#s.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ae===e&&this.#$(e.propertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()})}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#c.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}#V(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#w],t=()=>{for(const s of e)s.remove()},r=()=>{for(const s of e)this.#X(s)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#x!==ft.NONE))&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=e,this.#B[1]+=t;const[s,i]=this.#B,a=[...this.#w],l=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(s,i)},undo:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(-s,-i)},mustExec:!1})},l);for(const d of a)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const e of this.#w)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const e=this.#o;this.#o=null;let t=!1;for(const[{x:s,y:i,pageIndex:a},l]of e)l.newX=s,l.newY=i,l.newPageIndex=a,t||=s!==l.savedX||i!==l.savedY||a!==l.savedPageIndex;if(!t)return!1;const r=(s,i,a,l)=>{if(this.#n.has(s.id)){const d=this.#s.get(l);d?s._setParentAndPosition(d,i,a):(s.pageIndex=l,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:l}]of e)r(s,i,a,l)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:l}]of e)r(s,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#o)for(const r of this.#o.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#x}get imageManager(){return _t(this,"imageManager",new cx)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,f,g,v)=>({x:(f-s)/a,y:1-(h+g-r)/i,width:v/a,height:g/i});break;case"180":l=(h,f,g,v)=>({x:1-(h+g-r)/i,y:1-(f+v-s)/a,width:g/i,height:v/a});break;case"270":l=(h,f,g,v)=>({x:1-(f+v-s)/a,y:(h-r)/i,width:v/a,height:g/i});break;default:l=(h,f,g,v)=>({x:(h-r)/i,y:(f-s)/a,width:g/i,height:v/a});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:v,y:_,width:S,height:x}of g.getClientRects())S===0||x===0||d.push(l(v,_,S,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#r.getRawValue(t);r&&(this.#x===ft.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class mo{#e=null;#t=!1;#n=null;#s=null;#i=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,mo.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){mo._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",mo.#h.missing),t.setAttribute("data-l10n-id",mo.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",ni,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(this.#l=!0,s(i))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}async setGuessedText(e){this.#e===null&&(this.#a=e,this.#d=await mo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#a===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(this.#a=r,this.#d=s),!(this.#e===e&&this.#t===t)&&(i||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#i=null,this.#c?.remove(),this.#c=null}async#f(){const e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",mo.#h[this.#p]),this.#s?.setAttribute("data-l10n-id",mo.#h[`${this.#p}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const s=100,i=this.#u._uiManager._signal;i.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:i}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i?.classList.remove("show")},{signal:i})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class rt{#e=null;#t=null;#n=null;#s=!1;#i=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#v=0;#g=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#b=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new ux;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=Pl.TRANSLATE_SMALL,r=Pl.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Zq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(rt._l10n??=e,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){en("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}#E([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,s]=this.parentDimensions;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[l,d]=this.getBaseTranslation();i+=l,a+=d,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=rt,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:s,y:i,width:a,height:l}=this;if(a*=t,l*=r,s*=t,i*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),i=Math.max(0,Math.min(r-l,i));break;case 90:s=Math.max(0,Math.min(t-l,s)),i=Math.min(r,Math.max(a,i));break;case 180:s=Math.min(t,Math.max(a,s)),i=Math.min(r,Math.max(l,i));break;case 270:s=Math.min(t,Math.max(l,s)),i=Math.max(0,Math.min(r-a,i));break}this.x=s/=t,this.y=i/=r;const[d,h]=this.getBaseTranslation();s+=d,i+=h;const{style:f}=this.div;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return rt.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return rt.#S(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#i||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!this.#i&&t.endsWith("%");if(s&&i)return;const[a,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!this.#i&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#O(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");this.#r.append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),s.addEventListener("contextmenu",ni,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#r)}#k(e,t){t.preventDefault();const{isMac:r}=Fr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#C.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",ni,{signal:a});const l=this.x,d=this.y,h=this.width,f=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const _=()=>{i.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=g,this.div.style.cursor=v,this.#_(l,d,h,f)};window.addEventListener("pointerup",_,{signal:a}),window.addEventListener("blur",_,{signal:a})}#_(e,t,r,s){const i=this.x,a=this.y,l=this.width,d=this.height;i===e&&a===t&&l===r&&d===s||this.addCommands({cmd:()=>{this.width=l,this.height=d,this.x=i,this.y=a;const[h,f]=this.parentDimensions;this.setDims(h*l,f*d),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=s,this.x=e,this.y=t;const[h,f]=this.parentDimensions;this.setDims(h*r,f*s),this.fixAndSetPosition()},mustExec:!0})}#C(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,l=this.width,d=this.height,h=rt.MIN_SIZE/r,f=rt.MIN_SIZE/s,g=ne=>Math.round(ne*1e4)/1e4,v=this.#A(this.rotation),_=(ne,z)=>[v[0]*ne+v[2]*z,v[1]*ne+v[3]*z],S=this.#A(360-this.rotation),x=(ne,z)=>[S[0]*ne+S[2]*z,S[1]*ne+S[3]*z];let E,P,R=!1,M=!1;switch(e){case"topLeft":R=!0,E=(ne,z)=>[0,0],P=(ne,z)=>[ne,z];break;case"topMiddle":E=(ne,z)=>[ne/2,0],P=(ne,z)=>[ne/2,z];break;case"topRight":R=!0,E=(ne,z)=>[ne,0],P=(ne,z)=>[0,z];break;case"middleRight":M=!0,E=(ne,z)=>[ne,z/2],P=(ne,z)=>[0,z/2];break;case"bottomRight":R=!0,E=(ne,z)=>[ne,z],P=(ne,z)=>[0,0];break;case"bottomMiddle":E=(ne,z)=>[ne/2,z],P=(ne,z)=>[ne/2,0];break;case"bottomLeft":R=!0,E=(ne,z)=>[0,z],P=(ne,z)=>[ne,0];break;case"middleLeft":M=!0,E=(ne,z)=>[0,z/2],P=(ne,z)=>[ne,z/2];break}const N=E(l,d),L=P(l,d);let B=_(...L);const $=g(i+B[0]),H=g(a+B[1]);let Y=1,ue=1,[oe,ce]=this.screenToPageTranslation(t.movementX,t.movementY);if([oe,ce]=x(oe/r,ce/s),R){const ne=Math.hypot(l,d);Y=ue=Math.max(Math.min(Math.hypot(L[0]-N[0]-oe,L[1]-N[1]-ce)/ne,1/l,1/d),h/l,f/d)}else M?Y=Math.max(h,Math.min(1,Math.abs(L[0]-N[0]-oe)))/l:ue=Math.max(f,Math.min(1,Math.abs(L[1]-N[1]-ce)))/d;const ae=g(l*Y),me=g(d*ue);B=_(...P(ae,me));const W=$-B[0],q=H-B[1];this.width=ae,this.height=me,this.x=W,this.y=q,this.setDims(r*ae,s*me),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new jp(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(mo.initialize(rt._l10n),this.#n=new mo(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#s?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#I();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),Qv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Fr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#P(e);return}this.#T(e)}get isSelected(){return this._uiManager.isSelected(this)}#T(e){const{isMac:t}=Fr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,s=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#v=e.clientX,this.#g=e.clientY;const a=l=>{const{clientX:d,clientY:h}=l,[f,g]=this.screenToPageTranslation(d-this.#v,h-this.#g);this.#v=d,this.#g=h,this._uiManager.dragSelectedEditors(f,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const i=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#T(e)};window.addEventListener("pointerup",i,{signal:s}),window.addEventListener("blur",i,{signal:s})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[l,d]=this.pageTranslation,h=e/s,f=t/s,g=this.x*i,v=this.y*a,_=this.width*i,S=this.height*a;switch(r){case 0:return[g+h+l,a-v-f-S+d,g+h+_+l,a-v-f+d];case 90:return[g+f+l,a-v+h+d,g+f+S+l,a-v+h+_+d];case 180:return[g-h-_+l,a-v+f+d,g-h+l,a-v+f+S+d];case 270:return[g-f-S+l,a-v-h-_+d,g-f+l,a-v-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,l=i-r,d=a-s;switch(this.rotation){case 0:return[r,t-a,l,d];case 90:return[r,t-s,d,l];case 180:return[i,t-s,l,d];case 270:return[i,t-a,d,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#I(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#I()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){en("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});s.rotation=e.rotation,s.#e=e.accessibilityData;const[i,a]=s.pageDimensions,[l,d,h,f]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/i,s.y=d/a,s.width=h/i,s.height=f/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#O(),this.#r.classList.remove("hidden"),Qv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const a=this.#x.bind(this),l=this.#w.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",this.#D.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",rt._l10nResizer[f])}}const r=this.#t[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(i!==s){if(i<s)for(let l=0;l<s-i;l++)this.#r.append(this.#r.firstChild);else if(i>s)for(let l=0;l<i-s;l++)this.#r.firstChild.before(this.#r.lastChild);let a=0;for(const l of t){const h=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",rt._l10nResizer[h])}}this.#N(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#x(e){rt._resizerKeyboardManager.exec(this,e)}#w(e){this.#p&&e.relatedTarget?.parentNode!==this.#r&&this.#L()}#D(e){this.#u=this.#p?e:""}#N(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#C(this.#u,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#N(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=this.#l;this.#_(e,t,r,s),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#i=!0;const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let s=this.#m.get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},rt._telemetryTimeout),this.#m.set(r,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Zq extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const IC=3285377520,Js=4294901760,po=65535;class oM{constructor(e){this.h1=e?e&4294967295:IC,this.h2=e?e&4294967295:IC}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,E=e.length;x<E;x++){const P=e.charCodeAt(x);P<=255?t[r++]=P:(t[r++]=P>>>8,t[r++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let l=0,d=0,h=this.h1,f=this.h2;const g=3432918353,v=461845907,_=g&po,S=v&po;for(let x=0;x<s;x++)x&1?(l=a[x],l=l*g&Js|l*_&po,l=l<<15|l>>>17,l=l*v&Js|l*S&po,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[x],d=d*g&Js|d*_&po,d=d<<15|d>>>17,d=d*v&Js|d*S&po,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,i){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*g&Js|l*_&po,l=l<<15|l>>>17,l=l*v&Js|l*S&po,s&1?h^=l:f^=l}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Js|e*36045&po,t=t*4283543511&Js|((t<<16|e>>>16)*2950163797&Js)>>>16,e^=t>>>1,e=e*444984403&Js|e*60499&po,t=t*3301882366&Js|((t<<16|e>>>16)*3120437893&Js)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Pb=Object.freeze({map:null,hash:"",transfer:void 0});class dx{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,this.#n.set(e,t);s&&this.#s(),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?sx(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new aM(this)}get serializable(){if(this.#n.size===0)return Pb;const e=new Map,t=new oM,r=[],s=Object.create(null);let i=!1;for(const[a,l]of this.#n){const d=l instanceof rt?l.serialize(!1,s):l;d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),i||=!!d.bitmap)}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Pb}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof rt))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const a=e[i]||=new Map;for(const[l,d]of Object.entries(s)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const f=h.get(d)??0;h.set(d,f+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class aM extends dx{#e;constructor(e){super();const{map:t,hash:r,transfer:s}=e.serializable,i=structuredClone(t,s?{transfer:s}:null);this.#e={map:i,hash:r,transfer:s}}get print(){en("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class eG{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if($n(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:i}=e,a=new FontFace(r,s,i);this.addNativeFontFace(a);try{await a.load(),this.#e.add(r),t?.(e)}catch{mt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}en("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw mt(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(xr||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),_t(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for($n(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(N,L){return N.charCodeAt(L)<<24|N.charCodeAt(L+1)<<16|N.charCodeAt(L+2)<<8|N.charCodeAt(L+3)&255}function s(N,L,B,$){const H=N.substring(0,L),Y=N.substring(L+B);return H+$+Y}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let h=0;function f(N,L){if(++h>30){mt("Load test font never loaded."),L();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(f.bind(null,N,L))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,g.length,g);const S=16,x=1482184792;let E=r(v,S);for(i=0,a=g.length-3;i<a;i+=4)E=E-x+r(g,i)|0;i<g.length&&(E=E-x+r(g+"XXX",i)|0),v=s(v,S,4,Fq(E));const P=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${P}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const N of[e.loadedName,g]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=N,M.append(L)}this._document.body.append(M),f(g,()=>{M.remove(),t.complete()})}}class tG{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Hq(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){mt(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(i,a){};const s=[];for(let i=0,a=r.length;i<a;)switch(r[i++]){case ca.BEZIER_CURVE_TO:{const[l,d,h,f,g,v]=r.slice(i,i+6);s.push(_=>_.bezierCurveTo(l,d,h,f,g,v)),i+=6}break;case ca.MOVE_TO:{const[l,d]=r.slice(i,i+2);s.push(h=>h.moveTo(l,d)),i+=2}break;case ca.LINE_TO:{const[l,d]=r.slice(i,i+2);s.push(h=>h.lineTo(l,d)),i+=2}break;case ca.QUADRATIC_CURVE_TO:{const[l,d,h,f]=r.slice(i,i+4);s.push(g=>g.quadraticCurveTo(l,d,h,f)),i+=4}break;case ca.RESTORE:s.push(l=>l.restore());break;case ca.SAVE:s.push(l=>l.save());break;case ca.SCALE:$n(s.length===2,"Scale command is only valid at the third position.");break;case ca.TRANSFORM:{const[l,d,h,f,g,v]=r.slice(i,i+6);s.push(_=>_.transform(l,d,h,f,g,v)),i+=6}break;case ca.TRANSLATE:{const[l,d]=r.slice(i,i+2);s.push(h=>h.translate(l,d)),i+=2}break}return this.compiledGlyphs[t]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let d=2,h=s.length;d<h;d++)s[d](a)}}}class lM{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){en("Abstract method `_createCanvas` called.")}}class nG extends lM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class cM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class uM extends cM{async _fetch(e){const t=await jy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ly(t)}}class dM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}class rG extends dM{#e;#t;#n;#s;#i;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#i=t}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#i.createElementNS(ha,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#i.createElementNS(ha,"defs"),e.append(r),r.append(this.#n),this.#i.body.append(e)}return this.#n}#d(e){if(e.length===1){const d=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=d[g]/255;const f=h.join(",");return[f,f,f]}const[t,r,s]=e,i=new Array(256),a=new Array(256),l=new Array(256);for(let d=0;d<256;d++)i[d]=t[d]/255,a[d]=r[d]/255,l[d]=s[d]/255;return[i.join(","),a.join(","),l.join(",")]}#o(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(Fy(t)?mt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,s,i]=this.#d(e),a=e.length===1?r:`${r}${s}${i}`;if(t=this.#c.get(a),t)return this.#c.set(e,t),t;const l=`g_${this.#s}_transfer_map_${this.#l++}`,d=this.#o(l);this.#c.set(e,d),this.#c.set(a,d);const h=this.#f(l);return this.#g(r,s,i,h),d}addHCMFilter(e,t){const r=`${e}-${t}`,s="base";let i=this.#u.get(s);if(i?.key===r||(i?(i.filter?.remove(),i.key=r,i.url="none",i.filter=null):(i={key:r,url:"none",filter:null},this.#u.set(s,i)),!e||!t))return i.url;const a=this.#y(e);e=Ve.makeHexColor(...a);const l=this.#y(t);if(t=Ve.makeHexColor(...l),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return i.url;const d=new Array(256);for(let _=0;_<=255;_++){const S=_/255;d[_]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#s}_hcm_filter`,g=i.filter=this.#f(f);this.#g(h,h,h,g),this.#p(g);const v=(_,S)=>{const x=a[_]/255,E=l[_]/255,P=new Array(S+1);for(let R=0;R<=S;R++)P[R]=x+R/S*(E-x);return P.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),g),i.url=this.#o(f),i.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),s=`alpha_${r}`;if(t=this.#c.get(s),t)return this.#c.set(e,t),t;const i=`g_${this.#s}_alpha_map_${this.#l++}`,a=this.#o(i);this.#c.set(e,a),this.#c.set(s,a);const l=this.#f(i);return this.#m(r,l),a}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,s;if(e?([r]=this.#d([e]),s=`luminosity_${r}`):s="luminosity",t=this.#c.get(s),t)return this.#c.set(e,t),t;const i=`g_${this.#s}_luminosity_map_${this.#l++}`,a=this.#o(i);this.#c.set(e,a),this.#c.set(s,a);const l=this.#f(i);return this.#h(l),e&&this.#m(r,l),a}addHighlightHCMFilter(e,t,r,s,i){const a=`${t}-${r}-${s}-${i}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!t||!r))return l.url;const[d,h]=[t,r].map(this.#y.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,_]=[s,i].map(this.#y.bind(this));g<f&&([f,g,v,_]=[g,f,_,v]),this.#a.style.color="";const S=(P,R,M)=>{const N=new Array(256),L=(g-f)/M,B=P/255,$=(R-P)/(255*M);let H=0;for(let Y=0;Y<=M;Y++){const ue=Math.round(f+Y*L),oe=B+Y*$;for(let ce=H;ce<=ue;ce++)N[ce]=oe;H=ue+1}for(let Y=H;Y<256;Y++)N[Y]=N[H-1];return N.join(",")},x=`g_${this.#s}_hcm_${e}_filter`,E=l.filter=this.#f(x);return this.#p(E),this.#g(S(v[0],_[0],5),S(v[1],_[1],5),S(v[2],_[2],5),E),l.url=this.#o(x),l.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#i.createElementNS(ha,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#v(e,t,r){const s=this.#i.createElementNS(ha,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),e.append(s)}#g(e,t,r,s){const i=this.#i.createElementNS(ha,"feComponentTransfer");s.append(i),this.#v(i,"feFuncR",e),this.#v(i,"feFuncG",t),this.#v(i,"feFuncB",r)}#m(e,t){const r=this.#i.createElementNS(ha,"feComponentTransfer");t.append(r),this.#v(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,lx(getComputedStyle(this.#a).getPropertyValue("color"))}}class hM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class fM extends hM{async _fetch(e){const t=await jy(e,"arraybuffer");return new Uint8Array(t)}}if(xr){var Rb=Promise.withResolvers(),Mb=null;(async()=>{const e=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let i,a;return new Map(Object.entries({fs:e,http:t,https:r,url:s,canvas:i,path2d:a}))})().then(e=>{Mb=e,Rb.resolve()},e=>{mt(`loadPackages: ${e}`),Mb=new Map,Rb.resolve()})}class Rl{static get promise(){return Rb.promise}static get(e){return Mb?.get(e)}}async function pM(n){const t=await Rl.get("fs").promises.readFile(n);return new Uint8Array(t)}class sG extends dM{}class iG extends lM{_createCanvas(e,t){return Rl.get("canvas").createCanvas(e,t)}}class oG extends cM{async _fetch(e){return pM(e)}}class aG extends hM{async _fetch(e){return pM(e)}}const jr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ib(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class hx{getPattern(){en("Abstract method `getPattern` called.")}}class lG extends hx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===jr.STROKE||s===jr.FILL){const a=t.current.getClippedPathBoundingBox(s,an(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),r=Ve.transform(r,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Ib(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),i=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(r);i.setTransform(g)}else Ib(e,this._bbox),i=this._createGradient(e);return i}}function Iw(n,e,t,r,s,i,a,l){const d=e.coords,h=e.colors,f=n.data,g=n.width*4;let v;d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=i,i=a,a=v),d[r+1]>d[s+1]&&(v=r,r=s,s=v,v=a,a=l,l=v),d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=i,i=a,a=v);const _=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,x=(d[r]+e.offsetX)*e.scaleX,E=(d[r+1]+e.offsetY)*e.scaleY,P=(d[s]+e.offsetX)*e.scaleX,R=(d[s+1]+e.offsetY)*e.scaleY;if(S>=R)return;const M=h[i],N=h[i+1],L=h[i+2],B=h[a],$=h[a+1],H=h[a+2],Y=h[l],ue=h[l+1],oe=h[l+2],ce=Math.round(S),ae=Math.round(R);let me,W,q,ne,z,re,J,F;for(let se=ce;se<=ae;se++){if(se<E){const ve=se<S?0:(S-se)/(S-E);me=_-(_-x)*ve,W=M-(M-B)*ve,q=N-(N-$)*ve,ne=L-(L-H)*ve}else{let ve;se>R?ve=1:E===R?ve=0:ve=(E-se)/(E-R),me=x-(x-P)*ve,W=B-(B-Y)*ve,q=$-($-ue)*ve,ne=H-(H-oe)*ve}let ee;se<S?ee=0:se>R?ee=1:ee=(S-se)/(S-R),z=_-(_-P)*ee,re=M-(M-Y)*ee,J=N-(N-ue)*ee,F=L-(L-oe)*ee;const Te=Math.round(Math.min(me,z)),Me=Math.round(Math.max(me,z));let Pe=g*se+Te*4;for(let ve=Te;ve<=Me;ve++)ee=(me-ve)/(me-z),ee<0?ee=0:ee>1&&(ee=1),f[Pe++]=W-(W-re)*ee|0,f[Pe++]=q-(q-J)*ee|0,f[Pe++]=ne-(ne-F)*ee|0,f[Pe++]=255}}function cG(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(r.length/l)-1,h=l-1;for(i=0;i<d;i++){let f=i*l;for(let g=0;g<h;g++,f++)Iw(n,t,r[f],r[f+1],r[f+l],s[f],s[f+1],s[f+l]),Iw(n,t,r[f+l+1],r[f+1],r[f+l],s[f+l+1],s[f+1],s[f+l])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Iw(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class uG extends hx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),_=h/g,S=f/v,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/_,scaleY:1/S},E=g+4,P=v+4,R=r.getCanvas("mesh",E,P),M=R.context,N=M.createImageData(g,v);if(t){const B=N.data;for(let $=0,H=B.length;$<H;$+=4)B[$]=t[0],B[$+1]=t[1],B[$+2]=t[2],B[$+3]=255}for(const B of this._figures)cG(N,B,x);return M.putImageData(N,2,2),{canvas:R.canvas,offsetX:l-2*_,offsetY:d-2*S,scaleX:_,scaleY:S}}getPattern(e,t,r,s){Ib(e,this._bbox);let i;if(s===jr.SHADING)i=Ve.singularValueDecompose2dScale(an(e));else if(i=Ve.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=Ve.singularValueDecompose2dScale(this.matrix);i=[i[0]*l[0],i[1]*l[1]]}const a=this._createMeshCanvas(i,s===jr.SHADING?null:this._background,t.cachedCanvases);return s!==jr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class dG extends hx{getPattern(){return"hotpink"}}function hG(n){switch(n[0]){case"RadialAxial":return new lG(n);case"Mesh":return new uG(n);case"Dummy":return new dG}throw new Error(`Unknown IR type: ${n[0]}`)}const DC={COLORED:1,UNCOLORED:2};class fx{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:l}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),Ny("TilingType: "+i);const f=t[0],g=t[1],v=t[2],_=t[3],S=v-f,x=_-g,E=Ve.singularValueDecompose2dScale(this.matrix),P=Ve.singularValueDecompose2dScale(this.baseTransform),R=E[0]*P[0],M=E[1]*P[1];let N=S,L=x,B=!1,$=!1;const H=Math.ceil(d*R),Y=Math.ceil(h*M),ue=Math.ceil(S*R),oe=Math.ceil(x*M);H>=ue?N=d:B=!0,Y>=oe?L=h:$=!0;const ce=this.getSizeAndScale(N,this.ctx.canvas.width,R),ae=this.getSizeAndScale(L,this.ctx.canvas.height,M),me=e.cachedCanvases.getCanvas("pattern",ce.size,ae.size),W=me.context,q=l.createCanvasGraphics(W);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,s,a),W.translate(-ce.scale*f,-ae.scale*g),q.transform(ce.scale,0,0,ae.scale,0,0),W.save(),this.clipBbox(q,f,g,v,_),q.baseTransform=an(q.ctx),q.executeOperatorList(r),q.endDrawing(),W.restore(),B||$){const ne=me.canvas;B&&(N=d),$&&(L=h);const z=this.getSizeAndScale(N,this.ctx.canvas.width,R),re=this.getSizeAndScale(L,this.ctx.canvas.height,M),J=z.size,F=re.size,se=e.cachedCanvases.getCanvas("pattern-workaround",J,F),ee=se.context,Te=B?Math.floor(S/d):0,Me=$?Math.floor(x/h):0;for(let Pe=0;Pe<=Te;Pe++)for(let ve=0;ve<=Me;ve++)ee.drawImage(ne,J*Pe,F*ve,J,F,0,0,J,F);return{canvas:se.canvas,scaleX:z.scale,scaleY:re.scale,offsetX:f,offsetY:g}}return{canvas:me.canvas,scaleX:ce.scale,scaleY:ae.scale,offsetX:f,offsetY:g}}getSizeAndScale(e,t,r){const s=Math.max(fx.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,l=i-r;e.ctx.rect(t,r,a,l),e.current.updateRectMinMax(an(e.ctx),[t,r,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case DC.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case DC.UNCOLORED:const l=Ve.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,i.fillColor=l,i.strokeColor=l;break;default:throw new jq(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,s){let i=r;s!==jr.SHADING&&(i=Ve.transform(i,t.baseTransform),this.matrix&&(i=Ve.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const d=e.createPattern(a.canvas,"repeat");return d.setTransform(l),d}}function fG({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=Fr.isLittleEndian?4278190080:255,[d,h]=a?[i,l]:[l,i],f=r>>3,g=r&7,v=n.length;t=new Uint32Array(t.buffer);let _=0;for(let S=0;S<s;S++){for(const E=e+f;e<E;e++){const P=e<v?n[e]:255;t[_++]=P&128?h:d,t[_++]=P&64?h:d,t[_++]=P&32?h:d,t[_++]=P&16?h:d,t[_++]=P&8?h:d,t[_++]=P&4?h:d,t[_++]=P&2?h:d,t[_++]=P&1?h:d}if(g===0)continue;const x=e<v?n[e++]:255;for(let E=0;E<g;E++)t[_++]=x&1<<7-E?h:d}return{srcPos:e,destPos:_}}const NC=16,OC=100,pG=15,LC=10,jC=1e3,ls=16;function mG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,s){e.translate(r,s),this.__originalTranslate(r,s)},n.scale=function(r,s){e.scale(r,s),this.__originalScale(r,s)},n.transform=function(r,s,i,a,l,d){e.transform(r,s,i,a,l,d),this.__originalTransform(r,s,i,a,l,d)},n.setTransform=function(r,s,i,a,l,d){e.setTransform(r,s,i,a,l,d),this.__originalSetTransform(r,s,i,a,l,d)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,l){e.bezierCurveTo(t,r,s,i,a,l),this.__originalBezierCurveTo(t,r,s,i,a,l)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class gG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function pv(n,e,t,r,s,i,a,l,d,h){const[f,g,v,_,S,x]=an(n);if(g===0&&v===0){const R=a*f+S,M=Math.round(R),N=l*_+x,L=Math.round(N),B=(a+d)*f+S,$=Math.abs(Math.round(B)-M)||1,H=(l+h)*_+x,Y=Math.abs(Math.round(H)-L)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(_),M,L),n.drawImage(e,t,r,s,i,0,0,$,Y),n.setTransform(f,g,v,_,S,x),[$,Y]}if(f===0&&_===0){const R=l*v+S,M=Math.round(R),N=a*g+x,L=Math.round(N),B=(l+h)*v+S,$=Math.abs(Math.round(B)-M)||1,H=(a+d)*g+x,Y=Math.abs(Math.round(H)-L)||1;return n.setTransform(0,Math.sign(g),Math.sign(v),0,M,L),n.drawImage(e,t,r,s,i,0,0,Y,$),n.setTransform(f,g,v,_,S,x),[Y,$]}n.drawImage(e,t,r,s,i,a,l,d,h);const E=Math.hypot(f,g),P=Math.hypot(v,_);return[E*d,P*h]}function vG(n){const{width:e,height:t}=n;if(e>jC||t>jC)return null;const r=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),l,d,h;const f=e+7&-8;let g=new Uint8Array(f*t),v=0;for(const P of n.data){let R=128;for(;R>0;)g[v++]=P&R?0:255,R>>=1}let _=0;for(v=0,g[v]!==0&&(a[0]=1,++_),d=1;d<e;d++)g[v]!==g[v+1]&&(a[d]=g[v]?2:1,++_),v++;for(g[v]!==0&&(a[d]=2,++_),l=1;l<t;l++){v=l*f,h=l*i,g[v-f]!==g[v]&&(a[h]=g[v]?1:8,++_);let P=(g[v]?4:0)+(g[v-f]?8:0);for(d=1;d<e;d++)P=(P>>2)+(g[v+1]?4:0)+(g[v-f+1]?8:0),s[P]&&(a[h+d]=s[P],++_),v++;if(g[v-f]!==g[v]&&(a[h+d]=g[v]?2:4,++_),_>r)return null}for(v=f*(t-1),h=l*i,g[v]!==0&&(a[h]=8,++_),d=1;d<e;d++)g[v]!==g[v+1]&&(a[h+d]=g[v]?4:8,++_),v++;if(g[v]!==0&&(a[h+d]=4,++_),_>r)return null;const S=new Int32Array([0,i,-1,0,-i,0,0,0,1]),x=new Path2D;for(l=0;_&&l<=t;l++){let P=l*i;const R=P+e;for(;P<R&&!a[P];)P++;if(P===R)continue;x.moveTo(P%i,l);const M=P;let N=a[P];do{const L=S[N];do P+=L;while(!a[P]);const B=a[P];B!==5&&B!==10?(N=B,a[P]=0):(N=B&51*N>>4,a[P]&=N>>2|N<<2),x.lineTo(P%i,P/i|0),a[P]||--_}while(M!==P);--l}return g=null,a=null,function(P){P.save(),P.scale(1/e,-1/t),P.translate(0,-t),P.fill(x),P.beginPath(),P.restore()}}class FC{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nM,this.textMatrixScale=1,this.fontMatrix=Cb,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=yr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=Ve.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=Ve.applyTransform(t,e),s=Ve.applyTransform(t.slice(2),e),i=Ve.applyTransform([t[0],t[3]],e),a=Ve.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,r[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,r[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,r[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){Ve.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,s,i,a,l,d,h,f){const g=Ve.bezierBoundingBox(t,r,s,i,a,l,d,h,f);f||this.updateRectMinMax(e,g)}getPathBoundingBox(e=jr.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===jr.STROKE){t||en("Stroke bounding box must include transform.");const s=Ve.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=jr.FILL,t=null){return Ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function BC(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%ls,i=(t-s)/ls,a=s===0?i:i+1,l=n.createImageData(r,ls);let d=0,h;const f=e.data,g=l.data;let v,_,S,x;if(e.kind===kv.GRAYSCALE_1BPP){const E=f.byteLength,P=new Uint32Array(g.buffer,0,g.byteLength>>2),R=P.length,M=r+7>>3,N=4294967295,L=Fr.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(S=v<i?ls:s,h=0,_=0;_<S;_++){const B=E-d;let $=0;const H=B>M?r:B*8-7,Y=H&-8;let ue=0,oe=0;for(;$<Y;$+=8)oe=f[d++],P[h++]=oe&128?N:L,P[h++]=oe&64?N:L,P[h++]=oe&32?N:L,P[h++]=oe&16?N:L,P[h++]=oe&8?N:L,P[h++]=oe&4?N:L,P[h++]=oe&2?N:L,P[h++]=oe&1?N:L;for(;$<H;$++)ue===0&&(oe=f[d++],ue=128),P[h++]=oe&ue?N:L,ue>>=1}for(;h<R;)P[h++]=0;n.putImageData(l,0,v*ls)}}else if(e.kind===kv.RGBA_32BPP){for(_=0,x=r*ls*4,v=0;v<i;v++)g.set(f.subarray(d,d+x)),d+=x,n.putImageData(l,0,_),_+=ls;v<a&&(x=r*s*4,g.set(f.subarray(d,d+x)),n.putImageData(l,0,_))}else if(e.kind===kv.RGB_24BPP)for(S=ls,x=r*S,v=0;v<a;v++){for(v>=i&&(S=s,x=r*S),h=0,_=x;_--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;n.putImageData(l,0,v*ls)}else throw new Error(`bad image kind: ${e.kind}`)}function $C(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%ls,i=(t-s)/ls,a=s===0?i:i+1,l=n.createImageData(r,ls);let d=0;const h=e.data,f=l.data;for(let g=0;g<a;g++){const v=g<i?ls:s;({srcPos:d}=fG({src:h,srcPos:d,dest:f,width:r,height:v,nonBlackColor:0})),n.putImageData(l,0,g*ls)}}function bp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function mv(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!xr){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function UC(n,e){if(e)return!0;const t=Ve.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Th.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const yG=["butt","round","square"],wG=["miter","round","bevel"],bG={},zC={};class vh{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:l=null},d,h){this.ctx=e,this.current=new FC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new gG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,r){const d=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...an(this.compositeCtx))}this.ctx.save(),mv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=an(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let l=t||0;const d=i.length;if(d===l)return l;const h=d-l>LC&&typeof r=="function",f=h?Date.now()+pG:0;let g=0;const v=this.commonObjs,_=this.objs;let S;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,r),l;if(S=a[l],S!==Di.dependency)this[S].apply(this,i[l]);else for(const x of i[l]){const E=x.startsWith("g_")?v:_;if(!E.has(x))return E.get(x,r),l}if(l++,l===d)return l;if(h&&++g>LC){if(Date.now()>f)return r(),l;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=r,d=s,h="prescale1",f,g;for(;i>2&&l>1||a>2&&d>1;){let v=l,_=d;i>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/v),a>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/_),f=this.cachedCanvases.getCanvas(h,v,_),g=f.context,g.clearRect(0,0,v,_),g.drawImage(e,0,0,l,d,0,0,v,_),e=f.canvas,l=v,d=_,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,l=an(t);let d,h,f,g;if((e.bitmap||e.data)&&e.count>1){const H=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),i]),d=this._cachedBitmapsMap.get(H),d||(d=new Map,this._cachedBitmapsMap.set(H,d));const Y=d.get(h);if(Y&&!a){const ue=Math.round(Math.min(l[0],l[2])+l[4]),oe=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:Y,offsetX:ue,offsetY:oe}}f=Y}f||(g=this.cachedCanvases.getCanvas("maskCanvas",r,s),$C(g.context,e));let v=Ve.transform(l,[1/r,0,0,-1/s,0,0]);v=Ve.transform(v,[1,0,0,1,0,-s]);const[_,S,x,E]=Ve.getAxialAlignedBoundingBox([0,0,r,s],v),P=Math.round(x-_)||1,R=Math.round(E-S)||1,M=this.cachedCanvases.getCanvas("fillCanvas",P,R),N=M.context,L=_,B=S;N.translate(-L,-B),N.transform(...v),f||(f=this._scaleImage(g.canvas,ua(N)),f=f.img,d&&a&&d.set(h,f)),N.imageSmoothingEnabled=UC(an(N),e.interpolate),pv(N,f,0,0,f.width,f.height,0,0,r,s),N.globalCompositeOperation="source-in";const $=Ve.transform(ua(N),[1,0,0,1,-L,-B]);return N.fillStyle=a?i.getPattern(t,this,$,jr.FILL):i,N.fillRect(0,0,r,s),d&&!a&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,M.canvas)),{canvas:M.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=yG[e]}setLineJoin(e){this.ctx.lineJoin=wG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...an(this.suspendedCtx)),bp(this.suspendedCtx,i),mG(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],l=s[2]-i,d=s[3]-a;l===0||d===0||(this.genericComposeSMask(t.context,r,l,d,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,l,d,h,f,g){let v=e.canvas,_=d-f,S=h-g;if(a){const E=Ve.makeHexColor(...a);if(_<0||S<0||_+r>v.width||S+s>v.height){const P=this.cachedCanvases.getCanvas("maskExtension",r,s),R=P.context;R.drawImage(v,-_,-S),R.globalCompositeOperation="destination-atop",R.fillStyle=E,R.fillRect(0,0,r,s),R.globalCompositeOperation="source-over",v=P.canvas,_=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const P=new Path2D;P.rect(_,S,r,s),e.clip(P),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(_,S,r,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(d,h,r,s),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(v,_,S,r,s,d,h,r,s),t.restore()}save(){this.inSMaskMode?(bp(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),bp(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const s=this.ctx,i=this.current;let a=i.x,l=i.y,d,h;const f=an(s),g=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,v=g?r.slice(0):null;for(let _=0,S=0,x=e.length;_<x;_++)switch(e[_]|0){case Di.rectangle:a=t[S++],l=t[S++];const E=t[S++],P=t[S++],R=a+E,M=l+P;s.moveTo(a,l),E===0||P===0?s.lineTo(R,M):(s.lineTo(R,l),s.lineTo(R,M),s.lineTo(a,M)),g||i.updateRectMinMax(f,[a,l,R,M]),s.closePath();break;case Di.moveTo:a=t[S++],l=t[S++],s.moveTo(a,l),g||i.updatePathMinMax(f,a,l);break;case Di.lineTo:a=t[S++],l=t[S++],s.lineTo(a,l),g||i.updatePathMinMax(f,a,l);break;case Di.curveTo:d=a,h=l,a=t[S+4],l=t[S+5],s.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],a,l),i.updateCurvePathMinMax(f,d,h,t[S],t[S+1],t[S+2],t[S+3],a,l,v),S+=6;break;case Di.curveTo2:d=a,h=l,s.bezierCurveTo(a,l,t[S],t[S+1],t[S+2],t[S+3]),i.updateCurvePathMinMax(f,d,h,a,l,t[S],t[S+1],t[S+2],t[S+3],v),a=t[S+2],l=t[S+3],S+=4;break;case Di.curveTo3:d=a,h=l,a=t[S+2],l=t[S+3],s.bezierCurveTo(t[S],t[S+1],a,l,a,l),i.updateCurvePathMinMax(f,d,h,t[S],t[S+1],a,l,a,l,v),S+=4;break;case Di.closePath:s.closePath();break}g&&i.updateScalingPathMinMax(f,v),i.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,ua(t),jr.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=r.getPattern(t,this,ua(t),jr.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=bG}eoClip(){this.pendingClip=zC}beginText(){this.current.textMatrix=nM,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||Cb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&mt("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=r.systemFontInfo?.css||`"${i}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const d=r.italic?"italic":"normal";let h=t;t<NC?h=NC:t>OC&&(h=OC),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,s,i,a){this.current.textMatrix=[e,t,r,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s){const i=this.ctx,a=this.current,l=a.font,d=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,f=d&yr.FILL_STROKE_MASK,g=!!(d&yr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let _;(l.disableFontFace||g||v)&&(_=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||v?(i.save(),i.translate(t,r),i.beginPath(),_(i,h),s&&i.setTransform(...s),(f===yr.FILL||f===yr.FILL_STROKE)&&i.fill(),(f===yr.STROKE||f===yr.FILL_STROKE)&&i.stroke(),i.restore()):((f===yr.FILL||f===yr.FILL_STROKE)&&i.fillText(e,t,r),(f===yr.STROKE||f===yr.FILL_STROKE)&&i.strokeText(e,t,r)),g&&(this.pendingTextPaths||=[]).push({transform:an(i),x:t,y:r,fontSize:h,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return _t(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,f=t.textHScale*h,g=e.length,v=r.vertical,_=v?1:-1,S=r.defaultVMetrics,x=s*t.fontMatrix[0],E=t.textRenderingMode===yr.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(f,-1):i.scale(f,1);let P;if(t.patternFill){i.save();const B=t.fillColor.getPattern(i,this,ua(i),jr.FILL);P=an(i),i.restore(),i.fillStyle=B}let R=t.lineWidth;const M=t.textMatrixScale;if(M===0||R===0){const B=t.textRenderingMode&yr.FILL_STROKE_MASK;(B===yr.STROKE||B===yr.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=M;if(a!==1&&(i.scale(a,a),R/=a),i.lineWidth=R,r.isInvalidPDFjsFont){const B=[];let $=0;for(const H of e)B.push(H.unicode),$+=H.width;i.fillText(B.join(""),0,0),t.x+=$*x*f,i.restore(),this.compose();return}let N=0,L;for(L=0;L<g;++L){const B=e[L];if(typeof B=="number"){N+=_*B*s/1e3;continue}let $=!1;const H=(B.isSpace?d:0)+l,Y=B.fontChar,ue=B.accent;let oe,ce,ae=B.width;if(v){const W=B.vmetric||S,q=-(B.vmetric?W[1]:ae*.5)*x,ne=W[2]*x;ae=W?-W[0]:ae,oe=q/a,ce=(N+ne)/a}else oe=N/a,ce=0;if(r.remeasure&&ae>0){const W=i.measureText(Y).width*1e3/s*a;if(ae<W&&this.isFontSubpixelAAEnabled){const q=ae/W;$=!0,i.save(),i.scale(q,1),oe/=q}else ae!==W&&(oe+=(ae-W)/2e3*s/a)}if(this.contentVisible&&(B.isInFont||r.missingFile)){if(E&&!ue)i.fillText(Y,oe,ce);else if(this.paintChar(Y,oe,ce,P),ue){const W=oe+s*ue.offset.x/a,q=ce-s*ue.offset.y/a;this.paintChar(ue.fontChar,W,q,P)}}const me=v?ae*x-H*h:ae*x+H*h;N+=me,$&&i.restore()}v?t.y-=N:t.x+=N*f,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,l=s.vertical?1:-1,d=r.charSpacing,h=r.wordSpacing,f=r.textHScale*a,g=r.fontMatrix||Cb,v=e.length,_=r.textRenderingMode===yr.INVISIBLE;let S,x,E,P;if(!(_||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(f,a),S=0;S<v;++S){if(x=e[S],typeof x=="number"){P=l*x*i/1e3,this.ctx.translate(P,0),r.x+=P*f;continue}const R=(x.isSpace?h:0)+d,M=s.charProcOperatorList[x.operatorListId];if(!M){mt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(i,i),t.transform(...g),this.executeOperatorList(M),this.restore()),E=Ve.applyTransform([x.width,0],g)[0]*i+R,t.translate(E,0),r.x+=E*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){this.ctx.rect(r,s,i-r,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],s=this.baseTransform||an(this.ctx),i={createCanvasGraphics:a=>new vh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new fx(e,r,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=Ve.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=Ve.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=hG(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ua(t),jr.SHADING);const s=ua(t);if(s){const{width:i,height:a}=t.canvas,[l,d,h,f]=Ve.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(l,d,h-l,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){en("Should not call beginInlineImage")}beginImageData(){en("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=an(this.ctx),t)){const r=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],r,s),this.current.updateRectMinMax(an(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ny("TODO: Support non-isolated groups."),e.knockout&&mt("Knockout groups not supported.");const r=an(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Ve.getAxialAlignedBoundingBox(e.bbox,an(t));const i=[0,0,t.canvas.width,t.canvas.height];s=Ve.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,d,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(f,d,h),v=g.context;v.translate(-a,-l),v.transform(...r),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),bp(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=an(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Ve.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(this.#e(),mv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[d,h]=Ve.singularValueDecompose2dScale(an(this.ctx)),{viewportScale:f}=this,g=Math.ceil(a*this.outputScaleX*f),v=Math.ceil(l*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:_,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-h,0,l*h),mv(this.ctx)}else mv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new FC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=vG(e)),s.compiled)){s.compiled(r);return}const i=this._createMaskCanvas(e),a=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const d=an(l);l.transform(t,r,s,i,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let f=0,g=a.length;f<g;f+=2){const v=Ve.transform(d,[t,r,s,i,a[f],a[f+1]]),[_,S]=Ve.applyTransform([0,0],v);l.drawImage(h.canvas,_,S)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:l,height:d,transform:h}=i,f=this.cachedCanvases.getCanvas("maskCanvas",l,d),g=f.context;g.save();const v=this.getObject(a,i);$C(g,v),g.globalCompositeOperation="source-in",g.fillStyle=s?r.getPattern(g,this,ua(t),jr.FILL):r,g.fillRect(0,0,l,d),g.restore(),t.save(),t.transform(...h),t.scale(1,-1),pv(t,f.canvas,0,0,l,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){mt("Dependent image isn't ready yet");return}const a=i.width,l=i.height,d=[];for(let h=0,f=s.length;h<f;h+=2)d.push({transform:[t,0,0,r,s[h],s[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;if(this.save(),!xr){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/t,-1/r);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,r).context;BC(d,e),i=this.applyTransferMapsToCanvas(d)}const a=this._scaleImage(i,ua(s));s.imageSmoothingEnabled=UC(an(s),e.interpolate),pv(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,d=this.cachedCanvases.getCanvas("inlineImage",i,a).context;BC(d,e),s=this.applyTransferMapsToCanvas(d)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),pv(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===zC?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=an(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,l;if(r===0&&s===0){const d=Math.abs(t),h=Math.abs(i);if(d===h)if(e===0)a=l=1/d;else{const f=d*e;a=l=f<1?1/f:1}else if(e===0)a=1/d,l=1/h;else{const f=d*e,g=h*e;a=f<1?1/f:1,l=g<1?1/g:1}}else{const d=Math.abs(t*i-r*s),h=Math.hypot(t,r),f=Math.hypot(s,i);if(e===0)a=f/d,l=h/d;else{const g=e*d;a=f>g?f/g:1,l=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=r||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const l=Math.max(s,i);t.setLineDash(a.map(d=>d/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Di)vh.prototype[n]!==void 0&&(vh.prototype[Di[n]]=vh.prototype[n]);class Fp{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const gv={DATA:1,ERROR:2},kn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ks(n){switch(n instanceof Error||typeof n=="object"&&n!==null||en('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new pu(n.message);case"MissingPDFException":return new fu(n.message);case"PasswordException":return new Eb(n.message,n.code);case"UnexpectedResponseException":return new Oy(n.message,n.status);case"UnknownErrorException":return new kb(n.message,n.details);default:return new kb(n.message,n.toString())}}class Tp{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===gv.DATA)s.resolve(e.data);else if(e.callback===gv.ERROR)s.reject(ks(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:gv.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:gv.ERROR,callbackId:e.callbackId,reason:ks(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[i].pullCall=f,d.postMessage({sourceName:a,targetName:l,stream:kn.PULL,streamId:i,desiredSize:h.desiredSize}),f.promise},cancel:h=>{$n(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[i].cancelCall=f,this.streamControllers[i].isClosed=!0,d.postMessage({sourceName:a,targetName:l,stream:kn.CANCEL,streamId:i,reason:ks(h)}),f.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=f,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:kn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:kn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){$n(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:kn.ERROR,streamId:t,reason:ks(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(h){h(l(e.data,d))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:kn.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:r,targetName:s,stream:kn.START_COMPLETE,streamId:t,reason:ks(h)})})}#s(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case kn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ks(e.reason));break;case kn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ks(e.reason));break;case kn.PULL:if(!l){i.postMessage({sourceName:r,targetName:s,stream:kn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(d){d(l.onPull?.())}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:kn.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:kn.PULL_COMPLETE,streamId:t,reason:ks(d)})});break;case kn.ENQUEUE:if($n(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case kn.CLOSE:if($n(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#i(a,t);break;case kn.ERROR:$n(a,"error should have stream controller"),a.controller.error(ks(e.reason)),this.#i(a,t);break;case kn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ks(e.reason)),this.#i(a,t);break;case kn.CANCEL:if(!l)break;new Promise(function(d){d(l.onCancel?.(ks(e.reason)))}).then(function(){i.postMessage({sourceName:r,targetName:s,stream:kn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:kn.CANCEL_COMPLETE,streamId:t,reason:ks(d)})}),l.sinkCapability.reject(ks(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class _G{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return sx(this.#e)}has(e){return this.#e.has(e)}}const ah=Symbol("INTERNAL");class xG{#e=!1;#t=!1;#n=!1;#s=!0;constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){this.#e=!!(e&Ts.DISPLAY),this.#t=!!(e&Ts.PRINT),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==ah&&en("Internal method `_setVisible` called."),this.#n=r,this.#s=t}}class SG{#e=null;#t=new Map;#n=null;#s=null;constructor(e,t=Ts.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const r of e.groups)this.#t.set(r.id,new xG(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(ah,!1);for(const r of e.on)this.#t.get(r)._setVisible(ah,!0);for(const r of e.off)this.#t.get(r)._setVisible(ah,!1);this.#n=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=this.#i(i);else if(this.#t.has(i))a=this.#t.get(i).visible;else return mt(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Ny("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(mt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return mt(`Unknown optional content policy ${e.policy}.`),!0}return mt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const s=this.#t.get(e);if(!s){mt(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const i of s.rbGroups)for(const a of i)a!==e&&this.#t.get(a)?._setVisible(ah,!1,!0);s._setVisible(ah,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=this.#t.get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?sx(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new oM;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class AG{constructor(e,{disableRange:t=!1,disableStream:r=!1}){$n(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,i?.length>0){const d=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});$n(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$n(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new CG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new EG(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class CG{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=ax(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class EG{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function kG(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=l(t);return f=unescape(f),f=d(f),f=h(f),i(f)}if(t=a(n),t){const f=h(t);return i(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=l(t);return f=h(f),i(f)}function r(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(f,{fatal:!0}),_=Ly(g);g=v.decode(_),e=!1}catch{}}return g}function i(f){return e&&/[\x80-\xff]/.test(f)&&(f=s("utf-8",f),e&&(f=s("iso-8859-1",f))),f}function a(f){const g=[];let v;const _=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=_.exec(f))!==null;){let[,x,E,P]=v;if(x=parseInt(x,10),x in g){if(x===0)break;continue}g[x]=[E,P]}const S=[];for(let x=0;x<g.length&&x in g;++x){let[E,P]=g[x];P=l(P),E&&(P=unescape(P),x===0&&(P=d(P))),S.push(P)}return S.join("")}function l(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let v=0;v<g.length;++v){const _=g[v].indexOf('"');_!==-1&&(g[v]=g[v].slice(0,_),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const v=f.slice(0,g),S=f.slice(g+1).replace(/^[^']*'/,"");return s(v,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,_,S){if(_==="q"||_==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),s(v,S);try{S=atob(S)}catch{}return s(v,S)})}return""}function px(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function mx({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function gx(n){const e=n.get("Content-Disposition");if(e){let t=kG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ax(t))return t}return null}function By(n,e){return n===404||n===0&&e.startsWith("file:")?new fu('Missing PDF "'+e+'".'):new Oy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function mM(n){return n===200||n===206}function gM(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(mt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class VC{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=px(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new TG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new PG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class TG{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,gM(r,this._withCredentials,this._abortController)).then(i=>{if(!mM(i.status))throw By(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:d}=mx({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=gx(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new pu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:vM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class PG{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,gM(i,this._withCredentials,this._abortController)).then(l=>{if(!mM(l.status))throw By(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:vM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Dw=200,Nw=206;function RG(n){const e=n.response;return typeof e!="string"?e:Ly(e).buffer}class MG{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=px(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const s={begin:e,end:t};for(const i in r)s[i]=r[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Nw):s.expectedStatus=Dw,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError?.(s.status);return}const i=s.status||Dw;if(!(i===Dw&&r.expectedStatus===Nw)&&i!==r.expectedStatus){r.onError?.(s.status);return}const l=RG(s);if(i===Nw){const d=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);r.onDone({begin:parseInt(h[1],10),chunk:l})}else l?r.onDone({begin:0,chunk:l}):r.onError?.(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class IG{constructor(e){this._source=e,this._manager=new MG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $n(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new DG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new NG(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class DG{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...d]=a.split(": ");return[l,d.join(": ")]})),{allowRangeRequests:s,suggestedLength:i}=mx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=gx(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=By(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class NG{constructor(e,t,r){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=By(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const OG=/^[a-z][a-z0-9\-+.]+:/i;function LG(n){if(OG.test(n))return new URL(n);const e=Rl.get("url");return new URL(e.pathToFileURL(n))}function yM(n,e,t){return n.protocol==="http:"?Rl.get("http").request(n,{headers:e},t):Rl.get("https").request(n,{headers:e},t)}class jG{constructor(e){this.source=e,this.url=LG(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=px(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new $G(this):new FG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new UG(this,e,t):new BG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class wM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new pu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class bM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class FG extends wM{constructor(e){super(e);const t=Object.fromEntries(e.headers),r=s=>{if(s.statusCode===404){const d=new fu(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(s);const i=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=mx({responseHeaders:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=gx(i)};this._request=yM(this._url,t,r),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class BG extends bM{constructor(e,t,r){super(e);const s=Object.fromEntries(e.headers);s.Range=`bytes=${t}-${r-1}`;const i=a=>{if(a.statusCode===404){const l=new fu(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=yM(this._url,s,i),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class $G extends wM{constructor(e){super(e);const t=Rl.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new fu(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class UG extends bM{constructor(e,t,r){super(e);const s=Rl.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}}const zG=1e5,as=30,VG=.8;class Ir{#e=Promise.withResolvers();#t=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#i=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#v=[];#g=new WeakMap;#m=null;static#y=new Map;static#b=new Map;static#E=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:i,pageX:a,pageY:l}=r.rawDims;this.#m=[1,0,0,-1,-a,l+i],this.#c=s,this.#l=i,Ir.#P(),su(t,r),this.#e.promise.finally(()=>{Ir.#A.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Fr.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#h,t.styles),this.#O(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),Ir.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==this.#d&&(t?.(),this.#d=s,su(this.#a,{rotation:s})),r!==this.#o){t?.(),this.#o=r;const i={div:null,properties:null,ctx:Ir.#C(this.#i)};for(const a of this.#v)i.properties=this.#g.get(a),i.div=a,this.#_(i)}}cancel(){const e=new pu("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#v}get textContentItemsStr(){return this.#p}#O(e){if(this.#n)return;this.#r.ctx??=Ir.#C(this.#i);const t=this.#v,r=this.#p;for(const s of e){if(t.length>zG){mt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const i=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id!==null&&this.#t.setAttribute("id",`${s.id}`),i.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(s.str),this.#k(s)}}#k(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#v.push(t);const s=Ve.transform(this.#m,e.transform);let i=Math.atan2(s[1],s[0]);const a=this.#h[e.fontName];a.vertical&&(i+=Math.PI/2);let l=this.#s&&a.fontSubstitution||a.fontFamily;l=Ir.fontFamilyMap.get(l)||l;const d=Math.hypot(s[2],s[3]),h=d*Ir.#I(l,this.#i);let f,g;i===0?(f=s[4],g=s[5]-h):(f=s[4]+h*Math.sin(i),g=s[5]-h*Math.cos(i));const v="calc(var(--scale-factor)*",_=t.style;this.#t===this.#a?(_.left=`${(100*f/this.#c).toFixed(2)}%`,_.top=`${(100*g/this.#l).toFixed(2)}%`):(_.left=`${v}${f.toFixed(2)}px)`,_.top=`${v}${g.toFixed(2)}px)`),_.fontSize=`${v}${(Ir.#S*d).toFixed(2)}px)`,_.fontFamily=l,r.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(S=!0)}if(S&&(r.canvasWidth=a.vertical?e.height:e.width),this.#g.set(t,r),this.#r.div=t,this.#r.properties=r,this.#_(this.#r),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#_(e){const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(Ir.#S>1&&(a=`scale(${1/Ir.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:d,fontSize:h}=r;Ir.#T(s,h*this.#o,l);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${d*this.#o/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#C(e=null){let t=this.#b.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#T(e,t,r){const s=this.#E.get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)}static#P(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t){const r=this.#y.get(e);if(r)return r;const s=this.#C(t);s.canvas.width=s.canvas.height=as,this.#T(s,as,e);const i=s.measureText("");let a=i.fontBoundingBoxAscent,l=Math.abs(i.fontBoundingBoxDescent);if(a){const f=a/(a+l);return this.#y.set(e,f),s.canvas.width=s.canvas.height=0,f}s.strokeStyle="red",s.clearRect(0,0,as,as),s.strokeText("g",0,0);let d=s.getImageData(0,0,as,as).data;l=0;for(let f=d.length-1-3;f>=0;f-=4)if(d[f]>0){l=Math.ceil(f/4/as);break}s.clearRect(0,0,as,as),s.strokeText("A",0,as),d=s.getImageData(0,0,as,as).data,a=0;for(let f=0,g=d.length;f<g;f+=4)if(d[f]>0){a=as-Math.floor(f/4/as);break}s.canvas.width=s.canvas.height=0;const h=a?a/(a+l):VG;return this.#y.set(e,h),h}}class sm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(sm.shouldBuildText(l))i?.attributes?.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)s(d)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const HG=65536,WG=100,qG=5e3,GG=xr?iG:nG,KG=xr?oG:uM,YG=xr?sG:rG,XG=xr?aG:fM;function QG(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new vx,{docId:t}=e,r=n.url?JG(n.url):null,s=n.data?ZG(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,d=n.range instanceof _M?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:HG;let f=n.worker instanceof yh?n.worker:null;const g=n.verbosity,v=typeof n.docBaseUrl=="string"&&!Fy(n.docBaseUrl)?n.docBaseUrl:null,_=typeof n.cMapUrl=="string"?n.cMapUrl:null,S=n.cMapPacked!==!1,x=n.CMapReaderFactory||KG,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,P=n.StandardFontDataFactory||XG,R=n.stopAtErrors!==!0,M=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,L=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!xr,B=typeof n.isChrome=="boolean"?n.isChrome:!Fr.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,$=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,H=typeof n.disableFontFace=="boolean"?n.disableFontFace:xr,Y=n.fontExtraProperties===!0,ue=n.enableXfa===!0,oe=n.ownerDocument||globalThis.document,ce=n.disableRange===!0,ae=n.disableStream===!0,me=n.disableAutoFetch===!0,W=n.pdfBug===!0,q=n.CanvasFactory||GG,ne=n.FilterFactory||YG,z=n.enableHWA===!0,re=d?d.length:n.length??NaN,J=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!xr&&!H,F=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===uM&&P===fM&&_&&E&&kp(_,document.baseURI)&&kp(E,document.baseURI);n.canvasFactory&&MC("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&MC("`filterFactory`-instance option, please use `FilterFactory` instead.");const se=null;Dq(g);const ee={canvasFactory:new q({ownerDocument:oe,enableHWA:z}),filterFactory:new ne({docId:t,ownerDocument:oe}),cMapReaderFactory:F?null:new x({baseUrl:_,isCompressed:S}),standardFontDataFactory:F?null:new P({baseUrl:E})};if(!f){const Pe={verbosity:g,port:Fp.workerPort};f=Pe.port?yh.fromPort(Pe):new yh(Pe),e._worker=f}const Te={docId:t,apiVersion:"4.8.69",data:s,password:l,disableAutoFetch:me,rangeChunkSize:h,length:re,docBaseUrl:v,enableXfa:ue,evaluatorOptions:{maxImageSize:M,disableFontFace:H,ignoreErrors:R,isEvalSupported:N,isOffscreenCanvasSupported:L,isChrome:B,canvasMaxAreaInBytes:$,fontExtraProperties:Y,useSystemFonts:J,cMapUrl:F?_:null,standardFontDataUrl:F?E:null}},Me={disableFontFace:H,fontExtraProperties:Y,ownerDocument:oe,pdfBug:W,styleElement:se,loadingParams:{disableAutoFetch:me,enableXfa:ue}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pe=f.messageHandler.sendWithPromise("GetDocRequest",Te,s?[s.buffer]:null);let ve;if(d)ve=new AG(d,{disableRange:ce,disableStream:ae});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Ne;xr?Ne=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&kp(r)?VC:jG:Ne=kp(r)?VC:IG,ve=new Ne({url:r,length:re,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:ce,disableStream:ae})}return Pe.then(Ne=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const He=new Tp(t,Ne,f.port),Ye=new r8(He,e,ve,Me,ee);e._transport=Ye,He.send("Ready",null)})}).catch(e._capability.reject),e}function JG(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(xr&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZG(n){if(xr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Ly(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function HC(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class vx{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${vx.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class _M{constructor(e,t,r=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){en("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class e8{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class t8{#e=null;#t=!1;constructor(e,t,r,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new RC:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new xM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new vm({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=yl.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:g=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(r,s,f,g),{renderingIntent:_,cacheKey:S}=v;this.#t=!1,this.#s(),l||=this._transport.getOptionalContentConfig(_);let x=this._intentStates.get(S);x||(x=Object.create(null),this._intentStates.set(S,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(_&Ts.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=N=>{x.renderTasks.delete(R),(this._maybeCleanupAfterRender||E)&&(this.#t=!0),this.#n(!E),N?(R.capability.reject(N),this._abortOperatorList({intentState:x,reason:N instanceof Error?N:new Error(N)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new fh({callback:P,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(x.renderTasks||=new Set).add(R);const M=R.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([N,L])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(L.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:N,optionalContentConfig:L}),R.operatorListChanged()}).catch(P),M}getOperatorList({intent:e="display",annotationMode:t=yl.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>sm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:d,done:h}){if(h){r(l);return}l.lang??=d.lang,Object.assign(l.styles,d.styles),l.items.push(...d.items),i()},s)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#s(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new RC),t}#n(e=!1){if(this.#s(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},qG),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#s(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#n(!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ox){let s=WG;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new pu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class n8{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if(r?.signal instanceof AbortSignal){const{signal:i}=r;if(i.aborted){mt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var Jv,Xc,Qc,wh,Tv,bh,Pv;const nn=class nn{constructor({name:e=null,port:t=null,verbosity:r=Nq()}={}){Kd(this,wh);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Pi(nn,Qc)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Pi(nn,Qc)||sp(nn,Qc,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return xr?Promise.all([Rl.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Tp("main","worker",e),this._messageHandler.on("ready",function(){}),Hg(this,wh,Tv).call(this)}_initialize(){if(Pi(nn,Xc)||Pi(nn,bh,Pv)){this._setupFakeWorker();return}let{workerSrc:e}=nn;try{nn._isSameOrigin(window.location.href,e)||(e=nn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Tp("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:i.signal}),r.on("test",l=>{if(i.abort(),this.destroyed||!l){s();return}this._messageHandler=r,this._port=t,this._webWorker=t,Hg(this,wh,Tv).call(this)}),r.on("ready",l=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};a();return}catch{Ny("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Pi(nn,Xc)||(mt("Setting up fake worker."),sp(nn,Xc,!0)),nn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new n8;this._port=t;const r=`fake${$x(nn,Jv)._++}`,s=new Tp(r+"_worker",r,t);e.setup(s,t),this._messageHandler=new Tp(r,r+"_worker",t),Hg(this,wh,Tv).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Pi(nn,Qc)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=Pi(this,Qc)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new nn(e)}static get workerSrc(){if(Fp.workerSrc)return Fp.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>Pi(this,bh,Pv)?Pi(this,bh,Pv):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jv=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,wh=new WeakSet,Tv=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},bh=new WeakSet,Pv=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Kd(nn,bh),Kd(nn,Jv,0),Kd(nn,Xc,!1),Kd(nn,Qc),xr&&(sp(nn,Xc,!0),Fp.workerSrc||="./pdf.worker.mjs"),nn._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const s=new URL(t,r);return r.origin===s.origin},nn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let yh=nn;class r8{#e=new Map;#t=new Map;#n=new Map;#s=new Map;#i=null;constructor(e,t,r,s,i){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new xM,this.fontLoader=new eG({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const r=this.#e.get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return _t(this,"annotationStorage",new dx)}getRenderingIntent(e,t=yl.ENABLE,r=null,s=!1,i=!1){let a=Ts.DISPLAY,l=Pb;switch(e){case"any":a=Ts.ANY;break;case"display":break;case"print":a=Ts.PRINT;break;default:mt(`getRenderingIntent - invalid intent: ${e}`)}const d=a&Ts.PRINT&&r instanceof aM?r:this.annotationStorage;switch(t){case yl.DISABLE:a+=Ts.ANNOTATIONS_DISABLE;break;case yl.ENABLE:break;case yl.ENABLE_FORMS:a+=Ts.ANNOTATIONS_FORMS;break;case yl.ENABLE_STORAGE:a+=Ts.ANNOTATIONS_STORAGE,l=d.serializable;break;default:mt(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Ts.IS_EDITING),i&&(a+=Ts.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[a,l.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ir.cleanup(),this._networkStream?.cancelAllRequests(new pu("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{$n(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}$n(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{$n(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){s.close();return}$n(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new e8(r,this))}),e.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new Eb(r.message,r.code);break;case"InvalidPDFException":s=new rM(r.message);break;case"MissingPDFException":s=new fu(r.message);break;case"UnexpectedResponseException":s=new Oy(r.message,r.status);break;case"UnknownErrorException":s=new kb(r.message,r.details);break;default:en("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",r=>{if(this.#i=Promise.withResolvers(),t.onPassword){const s=i=>{i instanceof Error?this.#i.reject(i):this.#i.resolve({password:i})};try{t.onPassword(s,r.code)}catch(i){this.#i.reject(i)}}else this.#i.reject(new Eb(r.message,r.code));return this.#i.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:d}=this._params;if("error"in i){const v=i.error;mt(`Error during font loading: ${v}`),this.commonObjs.resolve(r,v);break}const h=d&&globalThis.FontInspector?.enabled?(v,_)=>globalThis.FontInspector.fontAdded(v,_):null,f=new tG(i,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:g}=i;$n(g,"The imageRef must be defined.");for(const v of this.#t.values())for(const[,_]of v.objs)if(_?.ref===g)return _.dataLen?(this.commonObjs.resolve(r,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(r)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(i){case"Image":l.objs.resolve(r,a),a?.dataLen>Pq&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#s.set(i.refStr,e);const a=new t8(t,i,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,s),s}getPageIndex(e){return HC(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new SG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new _G(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ir.cleanup()}}cachedPageNumber(e){if(!HC(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}const vv=Symbol("INITIAL_DATA");class xM{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:vv}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const r=this.#e[e];if(!r||r.data===vv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==vv}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==vv&&(yield[e,t])}}}class s8{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class fh{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:v=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(fh.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");fh.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:a}=this.params;this.gfx=new vh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),fh.#t.delete(this._canvas),this.callback(e||new ox(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),fh.#t.delete(this._canvas),this.callback())))}}const i8="4.8.69",o8="3634dab10";function WC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function _p(n){return Math.max(0,Math.min(255,255*n))}class qC{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=_p(e),[e,e,e]}static G_HTML([e]){const t=WC(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(_p)}static RGB_HTML(e){return`#${e.map(WC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[_p(1-Math.min(1,e+s)),_p(1-Math.min(1,r+s)),_p(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,l=Math.min(s,i,a);return["CMYK",s,i,a,l]}}class a8{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){en("Abstract method `_createSVG` called.")}}class yx extends a8{_createSVG(e){return document.createElementNS(ha,e)}}class SM{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of r.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}l&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const l=i!=="richText",d=e.div;if(d.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=g}l&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);a.append(g),l&&sm.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const f=[[s,-1,a]];for(;f.length>0;){const[g,v,_]=f.at(-1);if(v+1===g.children.length){f.pop();continue}const S=g.children[++f.at(-1)[1]];if(S===null)continue;const{name:x}=S;if(x==="#text"){const P=document.createTextNode(S.value);h.push(P),_.append(P);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,x):document.createElement(x);if(_.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:t,intent:i,linkService:r}),S.children?.length>0)f.push([S,-1,E]);else if(S.value){const P=document.createTextNode(S.value);l&&sm.shouldBuildText(x)&&h.push(P),E.append(P)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const wm=1e3,l8=9,iu=new WeakSet;function ba(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class c8{static create(e){switch(e.data.annotationType){case Fn.LINK:return new AM(e);case Fn.TEXT:return new u8(e);case Fn.WIDGET:switch(e.data.fieldType){case"Tx":return new d8(e);case"Btn":return e.data.radioButton?new CM(e):e.data.checkBox?new f8(e):new p8(e);case"Ch":return new m8(e);case"Sig":return new h8(e)}return new mu(e);case Fn.POPUP:return new Db(e);case Fn.FREETEXT:return new EM(e);case Fn.LINE:return new v8(e);case Fn.SQUARE:return new y8(e);case Fn.CIRCLE:return new w8(e);case Fn.POLYLINE:return new kM(e);case Fn.CARET:return new _8(e);case Fn.INK:return new wx(e);case Fn.POLYGON:return new b8(e);case Fn.HIGHLIGHT:return new TM(e);case Fn.UNDERLINE:return new x8(e);case Fn.SQUIGGLY:return new S8(e);case Fn.STRIKEOUT:return new A8(e);case Fn.STAMP:return new PM(e);case Fn.FILEATTACHMENT:return new C8(e);default:return new xn(e)}}}class xn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#s(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:d}}}}=this;r?.splice(0,4,...e);const{width:h,height:f}=ba(e);t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+d)/a}%`,s===0?(t.width=`${100*h/i}%`,t.height=`${100*f/a}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof mu||(i.tabIndex=wm);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Db){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,i),i}const{width:l,height:d}=ba(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(x>0||E>0){const R=`calc(${x}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=R}else if(this instanceof CM){const R=`calc(${l}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;a.borderRadius=R}switch(t.borderStyle.style){case wp.SOLID:a.borderStyle="solid";break;case wp.DASHED:a.borderStyle="dashed";break;case wp.BEVELED:mt("Unimplemented border style: beveled");break;case wp.INSET:mt("Unimplemented border style: inset");break;case wp.UNDERLINE:a.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(this.#t=!0,a.borderColor=Ve.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):a.borderWidth=0}const h=Ve.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:g,pageX:v,pageY:_}=s.rawDims;a.left=`${100*(h[0]-v)/f}%`,a.top=`${100*(h[1]-_)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(a.width=`${100*l/f}%`,a.height=`${100*d/g}%`):this.setRotation(S,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=ba(this.data.rect);let l,d;e%180===0?(l=100*i/r,d=100*a/s):(l=100*a/r,d=100*i/s),t.style.width=`${l}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],l=i.slice(1);s.target.style[r]=qC[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:qC[`${a}_rgb`](l)})};return _t(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||r[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const l={detail:{[s]:i},target:e};a(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,E,P,R]=e.subarray(2,6);if(s===x&&i===E&&t===P&&r===R)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:x,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=s-t,h=i-r,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=f.createElement("defs");g.append(v);const _=f.createElement("clipPath"),S=`clippath_${this.data.id}`;_.setAttribute("id",S),_.setAttribute("clipPathUnits","objectBoundingBox"),v.append(_);for(let x=2,E=e.length;x<E;x+=8){const P=e[x],R=e[x+1],M=e[x+2],N=e[x+3],L=f.createElement("rect"),B=(M-t)/d,$=(i-R)/h,H=(P-M)/d,Y=(R-N)/h;L.setAttribute("x",B),L.setAttribute("y",$),L.setAttribute("width",H),L.setAttribute("height",Y),_.append(L),l?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${$}" width="${H}" height="${Y}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=this.#n=new Db({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){en("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:l}of s){if(i===-1||a===t)continue;const d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!iu.has(h)){mt(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:d,domElement:h})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&iu.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class AM extends xn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(r,e.action),s=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(this.#n(r,e.setOCGState),s=!0):e.dest?(this._bindLink(r,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),s=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const i=r.get(s);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:s,refs:i,include:a}=t,l=[];if(s.length!==0||i.length!==0){const f=new Set(i);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:_}of v)f.add(_)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===a&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const d=this.annotationStorage,h=[];for(const f of l){const{id:g}=f;switch(h.push(g),f.type){case"text":{const _=f.defaultValue||"";d.setValue(g,{value:_});break}case"checkbox":case"radiobutton":{const _=f.defaultValue===f.exportValues;d.setValue(g,{value:_});break}case"combobox":case"listbox":{const _=f.defaultValue||"";d.setValue(g,{value:_});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!iu.has(v)){mt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class u8 extends xn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class mu extends xn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Fr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}})})}_setEventListeners(e,t,r,s){for(const[i,a]of r)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,i,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||l8,i=e.style;let a;const l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(h/(Pw*s))||1,g=h/f;a=Math.min(s,d(g/Pw))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,d(h/Pw))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=Ve.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class d8 extends mu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let i=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&i.length>a&&(i=i.slice(0,a));let l=s.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const d={userValue:i,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??i,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",l??i),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),iu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=wm,this._setRequired(r,this.data.required),a&&(r.maxLength=a),r.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";r.value=d.userValue=g,d.formattedValue=null});let h=f=>{const{formattedValue:g}=d;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{if(d.focused)return;const{target:v}=g;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(_){d.userValue=_.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:S}=_.detail;d.formattedValue=S,S!=null&&_.target!==document.activeElement&&(_.target.value=S),e.setValue(t,{formattedValue:S})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:S}=_.detail,{target:x}=_;if(S===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",S);let E=d.userValue;!E||E.length<=S||(E=E.slice(0,S),x.value=d.userValue=E,e.setValue(t,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),r.addEventListener("keydown",g=>{d.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:_}=g.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=h;h=null,r.addEventListener("blur",g=>{if(!d.focused||!g.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=g.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),f(g)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",g=>{d.lastCommittedValue=null;const{data:v,target:_}=g,{value:S,selectionStart:x,selectionEnd:E}=_;let P=x,R=E;switch(g.inputType){case"deleteWordBackward":{const M=S.substring(0,x).match(/\w*[^\w]*$/);M&&(P-=M[0].length);break}case"deleteWordForward":{const M=S.substring(x).match(/^[^\w]*\w*/);M&&(R+=M[0].length);break}case"deleteContentBackward":x===E&&(P-=1);break;case"deleteContentForward":x===E&&(R+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:P,selEnd:R}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/a;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class h8 extends mu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class f8 extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return iu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=wm,i.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(r,{value:d})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(r,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class CM extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(iu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=wm,i.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r))e.setValue(h.id,{value:!1});e.setValue(r,{value:d})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const d={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const v=f&&g.id===r;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class p8 extends AM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class m8 extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");iu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=wm;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,r.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),i=!1),s.append(g)}let a=null;if(i){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),s.prepend(f),a=()=>{f.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=f=>{const g=f?"value":"textContent",{options:v,multiple:_}=s;return _?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=l(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",f=>{const g={value(v){a?.();const _=v.detail.value,S=new Set(Array.isArray(_)?_:[_]);for(const x of s.options)x.selected=S.has(x.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const _=s.options,S=v.detail.remove;_[S].selected=!1,s.remove(S),_.length>0&&Array.prototype.findIndex.call(_,E=>E.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(v){const{index:_,displayValue:S,exportValue:x}=v.detail.insert,E=s.children[_],P=document.createElement("option");P.textContent=S,P.value=x,E?E.before(P):s.append(P),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},items(v){const{items:_}=v.detail;for(;s.length!==0;)s.remove(0);for(const S of _){const{displayValue:x,exportValue:E}=S,P=document.createElement("option");P.textContent=x,P.value=E,s.append(P)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},indices(v){const _=new Set(v.detail.indices);for(const S of v.target.options)S.selected=_.has(S.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,f)}),s.addEventListener("input",f=>{const g=l(!0),v=l(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):s.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Db extends xn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:xn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new g8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${ix}${r}`).join(",")),this.container}}class g8{#e=this.#O.bind(this);#t=this.#T.bind(this);#n=this.#C.bind(this);#s=this.#_.bind(this);#i=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#v=null;#g=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:l,parent:d,rect:h,parentRect:f,open:g}){this.#r=e,this.#g=s,this.#l=a,this.#v=l,this.#a=d,this.#i=t,this.#f=h,this.#d=f,this.#u=r,this.#c=iM.toDateObject(i),this.trigger=r.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#s),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#t),v.classList.add("popupTriggerArea");for(const v of r)v.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,g&&this.#_()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#i){const i=e.style.outlineColor=Ve.makeHexColor(...this.#i);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=Ve.makeHexColor(...this.#i.map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#c){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(i)}const s=this.#b;if(s)SM.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(this.#l);e.append(i)}this.#r.append(e)}get#b(){const e=this.#v,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#v.html||null}get#E(){return this.#b?.attributes?.style?.fontSize||0}get#S(){return this.#b?.attributes?.style?.color||null}#A(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#S,fontSize:this.#E?`calc(${this.#E}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const l=s[i];r.append(document.createTextNode(l)),i<a-1&&r.append(document.createElement("br"))}return r}#O(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#_()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#v},e&&(this.#p=null),t&&(this.#v=this.#A(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#v}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#k(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=this.#a;let a=!!this.#d,l=a?this.#d:this.#f;for(const S of this.#u)if(!l||Ve.intersect(S.data.rect,l)!==null){l=S.data.rect,a=!0;break}const d=Ve.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,g=d[0]+f,v=d[1];this.#p=[100*(g-s)/t,100*(v-i)/r];const{style:_}=this.#r;_.left=`${this.#p[0]}%`,_.top=`${this.#p[1]}%`}#_(){this.#o=!this.#o,this.#o?(this.#C(),this.#r.addEventListener("click",this.#s),this.#r.addEventListener("keydown",this.#e)):(this.#T(),this.#r.removeEventListener("click",this.#s),this.#r.removeEventListener("keydown",this.#e))}#C(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#T(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#r.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#C(),this.#y=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class EM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ft.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class v8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=this.#e=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),s.append(i),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class y8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",i/2),a.setAttribute("y",i/2),a.setAttribute("width",t-i),a.setAttribute("height",r-i),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class w8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=ba(e.rect),s=this.svgFactory.create(t,r,!0),i=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",r/2),a.setAttribute("rx",t/2-i/2),a.setAttribute("ry",r/2-i/2),a.setAttribute("stroke-width",i||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kM extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:s}}=this;if(!t)return this.container;const{width:i,height:a}=ba(e),l=this.svgFactory.create(i,a,!0);let d=[];for(let f=0,g=t.length;f<g;f+=2){const v=t[f]-e[0],_=e[3]-t[f+1];d.push(`${v},${_}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class b8 extends kM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class wx extends xn{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ft.HIGHLIGHT:ft.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:s}}=this,{width:i,height:a}=ba(e),l=this.svgFactory.create(i,a,!0);for(const d of t){let h=[];for(let g=0,v=d.length;g<v;g+=2){const _=d[g]-e[0],S=e[3]-d[g+1];h.push(`${_},${S}`)}h=h.join(" ");const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),l.append(f)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class TM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ft.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class x8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class S8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class A8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class PM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ft.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class C8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:s}=Fr.platform;return e.addEventListener("keydown",i=>{i.key==="Enter"&&(s?i.metaKey:i.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class E8{#e=null;#t=null;#n=new Map;#s=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:l}){this.div=e,this.#e=t,this.#t=r,this.#s=l||null,this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#i(e,t){const r=e.firstChild||e,s=r.id=`${ix}${t}`,i=await this.#s?.getAriaAttributes(s);if(i)for(const[a,l]of i)r.setAttribute(a,l);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;su(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new yx,annotationStorage:e.annotationStorage||new dx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Fn.POPUP;if(l){const f=s.get(a.id);if(!f)continue;i.elements=f}else{const{width:f,height:g}=ba(a.rect);if(f<=0||g<=0)continue}i.data=a;const d=c8.create(i);if(!d.isRenderable)continue;if(!l&&a.popupRef){const f=s.get(a.popupRef);f?f.push(d):s.set(a.popupRef,[d])}const h=d.render();a.hidden&&(h.style.visibility="hidden"),await this.#i(h,a.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,su(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;r.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(r):i.classList.contains("annotationContent")?i.after(r):i.before(r):s.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const yv=/\r\n?|\n/g;class Bn extends rt{#e;#t="";#n=`${this.id}-editor`;#s=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Bn.prototype,t=i=>i.isEmpty(),r=Pl.TRANSLATE_SMALL,s=Pl.TRANSLATE_BIG;return _t(this,"_keyboardManager",new ym([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=ft.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Bn._defaultColor||rt._defaultLineColor,this.#i=e.fontSize||Bn._defaultFontSize}static initialize(e,t){rt.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case st.FREETEXT_SIZE:Bn._defaultFontSize=t;break;case st.FREETEXT_COLOR:Bn._defaultColor=t;break}}updateParams(e,t){switch(e){case st.FREETEXT_SIZE:this.#r(t);break;case st.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[st.FREETEXT_SIZE,Bn._defaultFontSize],[st.FREETEXT_COLOR,Bn._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[st.FREETEXT_SIZE,this.#i],[st.FREETEXT_COLOR,this.#e]]}#r(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#i)*this.parentScale),this.#i=s,this.#u()},r=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=s=>{this.#e=this.editorDiv.style.color=s},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Bn._internalPadding*e,-(Bn._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ft.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Bn.#a(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:i}=this,a=i.style.display,l=i.classList.contains("hidden");i.classList.remove("hidden"),i.style.display="hidden",s.div.append(this.div),r=i.getBoundingClientRect(),i.remove(),i.style.display=a,i.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=s=>{if(this.#t=s,!s){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Bn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qv(this,this.div,["dblclick","keydown"]),this.width){const[s,i]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,d]=this.getInitialTranslation();[l,d]=this.pageTranslationToScreen(l,d);const[h,f]=this.pageDimensions,[g,v]=this.pageTranslation;let _,S;switch(this.rotation){case 0:_=e+(a[0]-g)/h,S=t+this.height-(a[1]-v)/f;break;case 90:_=e+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[d,-l];break;case 180:_=e-this.width+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[-l,-d];break;case 270:_=e+(a[0]-g-this.height*f)/h,S=t+(a[1]-v-this.width*h)/f,[l,d]=[-d,l];break}this.setAt(_*s,S*i,l,d)}else this.setAt(e*s,t*i,this.width*s,this.height*i);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(yv,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const s=Bn.#h(t.getData("text")||"").replaceAll(yv,`
`);if(!s)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const a=i.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),i.collapseToStart();return}const{startContainer:l,startOffset:d}=a,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const _=l.parentElement;if(f.push(l.nodeValue.slice(d).replaceAll(yv,"")),_!==this.editorDiv){let S=h;for(const x of this.editorDiv.childNodes){if(x===_){S=f;continue}S.push(Bn.#a(x))}}h.push(l.nodeValue.slice(0,d).replaceAll(yv,""))}else if(l===this.editorDiv){let _=h,S=0;for(const x of this.editorDiv.childNodes)S++===d&&(_=f),_.push(Bn.#a(x))}this.#t=`${h.join(`
`)}${s}${f.join(`
`)}`,this.#d();const g=new Range;let v=h.reduce((_,S)=>_+S.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const S=_.nodeValue.length;if(v<=S){g.setStart(_,v),g.setEnd(_,v);break}v-=S}i.removeAllRanges(),i.addRange(g)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll(""," ")}static#h(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let s=null;if(e instanceof EM){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:d,rotation:h,id:f,popupRef:g},textContent:v,textPosition:_,parent:{page:{pageNumber:S}}}=e;if(!v||v.length===0)return null;s=e={annotationType:ft.FREETEXT,color:Array.from(l),fontSize:a,value:v.join(`
`),position:_,pageIndex:S-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:g}}const i=await super.deserialize(e,t,r);return i.#i=e.fontSize,i.#e=Ve.makeHexColor(...e.color),i.#t=Bn.#h(e.value),i.annotationElementId=e.id||null,i._initialData=s,i}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Bn._internalPadding*this.parentScale,r=this.getRect(t,t),s=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),i={annotationType:ft.FREETEXT,color:s,fontSize:this.#i,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?i:this.annotationElementId&&!this.#p(i)?null:(i.id=this.annotationElementId,i)}#p(e){const{value:t,fontSize:r,color:s,pageIndex:i}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((a,l)=>a!==s[l])||e.pageIndex!==i}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#i}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const i of this.#t.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}const s=Bn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class RM{toSVGPath(){en("Abstract method `toSVGPath` must be implemented.")}get box(){en("Abstract getter `box` must be implemented.")}serialize(e,t){en("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){en("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){en("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Yc{#e;#t=[];#n;#s;#i=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#v=Yc.#p+Yc.#f;constructor({x:e,y:t},r,s,i,a,l=0){this.#e=r,this.#o=i*s,this.#s=a,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=l,this.#a=Yc.#p*s,this.#u=Yc.#v*s,this.#d=s,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[r,s,i,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/i,(this.#c+(e[1]-t[1])/2-s)/a,(this.#l+(t[0]-e[0])/2-r)/i,(this.#c+(t[1]-e[1])/2-s)/a]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,s,i,a]=this.#e;let[l,d,h,f]=this.#r.subarray(8,12);const g=e-h,v=t-f,_=Math.hypot(g,v);if(_<this.#u)return!1;const S=_-this.#a,x=S/_,E=x*g,P=x*v;let R=l,M=d;l=h,d=f,h+=E,f+=P,this.#h?.push(e,t);const N=-P/S,L=E/S,B=N*this.#o,$=L*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+B,f+$],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-B,f-$],16),isNaN(this.#r[6])?(this.#i.length===0&&(this.#r.set([l+B,d+$],2),this.#i.push(NaN,NaN,NaN,NaN,(l+B-r)/i,(d+$-s)/a),this.#r.set([l-B,d-$],14),this.#t.push(NaN,NaN,NaN,NaN,(l-B-r)/i,(d-$-s)/a)),this.#r.set([R,M,l,d,h,f],6),!this.isEmpty()):(this.#r.set([R,M,l,d,h,f],6),Math.abs(Math.atan2(M-d,R-l)-Math.atan2(P,E))<Math.PI/2?([l,d,h,f]=this.#r.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((l+h)/2-r)/i,((d+f)/2-s)/a),[l,d,R,M]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((R+l)/2-r)/i,((M+d)/2-s)/a),!0):([R,M,l,d,h,f]=this.#r.subarray(0,6),this.#i.push(((R+5*l)/6-r)/i,((M+5*d)/6-s)/a,((5*l+h)/6-r)/i,((5*d+f)/6-s)/a,((l+h)/2-r)/i,((d+f)/2-s)/a),[h,f,l,d,R,M]=this.#r.subarray(12,18),this.#t.push(((R+5*l)/6-r)/i,((M+5*d)/6-s)/a,((5*l+h)/6-r)/i,((5*d+f)/6-s)/a,((l+h)/2-r)/i,((d+f)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#b(r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#y(r),r.join(" ")}#m(){const[e,t,r,s]=this.#e,[i,a,l,d]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-t)/s} L${(this.#r[4]-e)/r} ${(this.#r[5]-t)/s} L${i} ${a} L${l} ${d} L${(this.#r[16]-e)/r} ${(this.#r[17]-t)/s} L${(this.#r[14]-e)/r} ${(this.#r[15]-t)/s} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,r,s,i]=this.#e,a=this.#r.subarray(4,6),l=this.#r.subarray(16,18),[d,h,f,g]=this.#g();e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${d} ${h} L${f} ${g} L${(l[0]-t)/s} ${(l[1]-r)/i}`)}newFreeDrawOutline(e,t,r,s,i,a){return new MM(e,t,r,s,i,a)}getOutlines(){const e=this.#i,t=this.#t,r=this.#r,[s,i,a,l]=this.#e,d=new Float64Array((this.#h?.length??0)+2);for(let g=0,v=d.length-2;g<v;g+=2)d[g]=(this.#h[g]-s)/a,d[g+1]=(this.#h[g+1]-i)/l;if(d[d.length-2]=(this.#l-s)/a,d[d.length-1]=(this.#c-i)/l,isNaN(r[6])&&!this.isEmpty())return this.#E(d);const h=new Float64Array(this.#i.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#A(h,f);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+v],h[f+1]=t[g+v+1],f+=2}return this.#S(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#d,this.#n,this.#s)}#E(e){const t=this.#r,[r,s,i,a]=this.#e,[l,d,h,f]=this.#g(),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(g,e,this.#e,this.#d,this.#n,this.#s)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#A(e,t){const r=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[i,a,l,d]=this.#e,[h,f,g,v]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-a)/d],t),t+=24}}class MM extends RM{#e;#t=null;#n;#s;#i;#r;#l;constructor(e,t,r,s,i,a){super(),this.#l=e,this.#i=t,this.#e=r,this.#r=s,this.#n=i,this.#s=a,this.#a(a);const{x:l,y:d,width:h,height:f}=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-l)/h,e[g+1]=(e[g+1]-d)/f;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-l)/h,t[g+1]=(t[g+1]-d)/f}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,s],i){const a=r-e,l=s-t;let d,h;switch(i){case 0:d=this.#c(this.#l,e,s,a,-l),h=this.#c(this.#i,e,s,a,-l);break;case 90:d=this.#u(this.#l,e,t,a,l),h=this.#u(this.#i,e,t,a,l);break;case 180:d=this.#c(this.#l,r,t,-a,l),h=this.#c(this.#i,r,t,-a,l);break;case 270:d=this.#u(this.#l,r,s,-a,-l),h=this.#u(this.#i,r,s,-a,-l);break}return{outline:Array.from(d),points:[Array.from(h)]}}#c(e,t,r,s,i){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l]*s,a[l+1]=r+e[l+1]*i;return a}#u(e,t,r,s,i){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l+1]*s,a[l+1]=r+e[l]*i;return a}#a(e){const t=this.#l;let r=t[4],s=t[5],i=r,a=s,l=r,d=s,h=r,f=s;const g=e?Math.max:Math.min;for(let E=6,P=t.length;E<P;E+=6){if(isNaN(t[E]))i=Math.min(i,t[E+4]),a=Math.min(a,t[E+5]),l=Math.max(l,t[E+4]),d=Math.max(d,t[E+5]),f<t[E+5]?(h=t[E+4],f=t[E+5]):f===t[E+5]&&(h=g(h,t[E+4]));else{const R=Ve.bezierBoundingBox(r,s,...t.slice(E,E+6));i=Math.min(i,R[0]),a=Math.min(a,R[1]),l=Math.max(l,R[2]),d=Math.max(d,R[3]),f<R[3]?(h=R[2],f=R[3]):f===R[3]&&(h=g(h,R[2]))}r=t[E+4],s=t[E+5]}const v=i-this.#n,_=a-this.#n,S=l-i+2*this.#n,x=d-a+2*this.#n;this.#t={x:v,y:_,width:S,height:x,lastPoint:[h,f]}}get box(){return this.#t}newOutliner(e,t,r,s,i,a=0){return new Yc(e,t,r,s,i,a)}getNewOutline(e,t){const{x:r,y:s,width:i,height:a}=this.#t,[l,d,h,f]=this.#e,g=i*h,v=a*f,_=r*h+l,S=s*f+d,x=this.newOutliner({x:this.#i[0]*g+_,y:this.#i[1]*v+S},this.#e,this.#r,e,this.#s,t??this.#n);for(let E=2;E<this.#i.length;E+=2)x.add({x:this.#i[E]*g+_,y:this.#i[E+1]*v+S});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class GC{#e;#t=[];#n=[];constructor(e,t=0,r=0,s=!0){let i=1/0,a=-1/0,l=1/0,d=-1/0;const h=10**-4;for(const{x:E,y:P,width:R,height:M}of e){const N=Math.floor((E-t)/h)*h,L=Math.ceil((E+R+t)/h)*h,B=Math.floor((P-t)/h)*h,$=Math.ceil((P+M+t)/h)*h,H=[N,B,$,!0],Y=[L,B,$,!1];this.#t.push(H,Y),i=Math.min(i,N),a=Math.max(a,L),l=Math.min(l,B),d=Math.max(d,$)}const f=a-i+2*r,g=d-l+2*r,v=i-r,_=l-r,S=this.#t.at(s?-1:-2),x=[S[0],S[2]];for(const E of this.#t){const[P,R,M]=E;E[0]=(P-v)/f,E[1]=(R-_)/g,E[2]=(M-_)/g}this.#e={x:v,y:_,width:f,height:g,lastPoint:x}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#r(t)):(this.#l(t),e.push(...this.#c(t)));return this.#s(e)}#s(e){const t=[],r=new Set;for(const a of e){const[l,d,h]=a;t.push([l,d,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),r.add(d),r.add(h)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[l,d,h,f,g]=a;r.delete(a);let v=l,_=d;for(i=[l,h],s.push(i);;){let S;if(r.has(f))S=f;else if(r.has(g))S=g;else break;r.delete(S),[l,d,h,f,g]=S,v!==l&&(i.push(v,_,l,_===d?d:h),v=l),_=_===d?h:d}i.push(v,_)}return new k8(s,this.#e)}#i(e){const t=this.#n;let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1}#r([,e,t]){const r=this.#i(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#i(e);for(let s=r;s<this.#n.length;s++){const[i,a]=this.#n[s];if(i!==e)break;if(i===e&&a===t){this.#n.splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=this.#n[s];if(i!==e)break;if(i===e&&a===t){this.#n.splice(s,1);return}}}#c(e){const[t,r,s]=e,i=[[t,r,s]],a=this.#i(s);for(let l=0;l<a;l++){const[d,h]=this.#n[l];for(let f=0,g=i.length;f<g;f++){const[,v,_]=i[f];if(!(h<=v||_<=d)){if(v>=d){if(_>h)i[f][1]=h;else{if(g===1)return[];i.splice(f,1),f--,g--}continue}i[f][2]=d,_>h&&i.push([t,h,_])}}}return i}}class k8 extends RM{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,s]=t;e.push(`M${r} ${s}`);for(let i=2;i<t.length;i+=2){const a=t[i],l=t[i+1];a===r?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${a}`),r=a)}e.push("Z")}return e.join(" ")}serialize([e,t,r,s],i){const a=[],l=r-e,d=s-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*l,f[g+1]=s-h[g+1]*d;a.push(f)}return a}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class Nb extends Yc{newFreeDrawOutline(e,t,r,s,i,a){return new T8(e,t,r,s,i,a)}get classNamesForDrawing(){return["highlight","free"]}}class T8 extends MM{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,s,i,a=0){return new Nb(e,t,r,s,i,a)}}class ei{#e=null;#t=null;#n;#s=null;#i=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new ym([[["Escape","mac+Escape"],ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ei.prototype._moveToPrevious],[["Home","mac+Home"],ei.prototype._moveToBeginning],[["End","mac+End"],ei.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#d=st.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#d=st.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",ei.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#v.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#s=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",ni,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,s]of this.#a.highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",ei.#o[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.setAttribute("aria-selected",s===this.#n),i.addEventListener("click",this.#p.bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#v(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#v(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#v(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#v(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#v(e);return}this.#s.lastChild?.focus()}#f(e){ei._keyboardManager.exec(this,e)}#v(e){if(this.#m){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#h();this.#e.append(t)}#g(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#a.highlightColors.values();for(const r of this.#s.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class wn extends rt{#e=null;#t=0;#n;#s=null;#i=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#v="";#g;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ft.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=wn.prototype;return _t(this,"_keyboardManager",new ym([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||wn._defaultColor,this.#g=e.thickness||wn._defaultThickness,this.#p=e.opacity||wn._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#v=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#b(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new GC(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;const t=new GC(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:r}=this.#r.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;const s=1.5;if(this.#r=e.getNewOutline(this.#g/2+s,.0025),t>=0)this.#d=t,this.#s=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,wn.#_(this.#a.box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,wn.#_(this.#r.box,f))}const{x:i,y:a,width:l,height:d}=e.box;switch(this.rotation){case 0:this.x=i,this.y=a,this.width=l,this.height=d;break;case 90:{const[f,g]=this.parentDimensions;this.x=a,this.y=1-i,this.width=l*g/f,this.height=d*f/g;break}case 180:this.x=1-i,this.y=1-a,this.width=l,this.height=d;break;case 270:{const[f,g]=this.parentDimensions;this.x=1-a,this.y=i,this.width=l*g/f,this.height=d*f/g;break}}const{lastPoint:h}=this.#r.box;this.#h=[(h[0]-i)/l,(h[1]-a)/d]}static initialize(e,t){rt.initialize(e,t),wn._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case st.HIGHLIGHT_DEFAULT_COLOR:wn._defaultColor=t;break;case st.HIGHLIGHT_THICKNESS:wn._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case st.HIGHLIGHT_COLOR:this.#E(t);break;case st.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[st.HIGHLIGHT_DEFAULT_COLOR,wn._defaultColor],[st.HIGHLIGHT_THICKNESS,wn._defaultThickness]]}get propertiesToUpdate(){return[[st.HIGHLIGHT_COLOR,this.color||wn._defaultColor],[st.HIGHLIGHT_THICKNESS,this.#g||wn._defaultThickness],[st.HIGHLIGHT_FREE,this.#o]]}#E(e){const t=(i,a)=>{this.color=i,this.parent?.drawLayer.changeColor(this.#d,i),this.#i?.updateColor(i),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#d,a)},r=this.color,s=this.#p;this.addCommands({cmd:t.bind(this,e,wn._defaultOpacity),undo:t.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,r=s=>{this.#g=s,this.#A(s)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#i=new ei({editor:this}),e.addColorPicker(this.#i)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#O(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#O():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#o)return;this.#b({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#O(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#s}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#s))}static#_({x:e,y:t,width:r,height:s},i){switch(i){case 90:return{x:1-t-s,y:e,width:s,height:r};case 180:return{x:1-e-r,y:1-t-s,width:r,height:s};case 270:return{x:t,y:1-e-r,width:s,height:r}}return{x:e,y:t,width:r,height:s}}rotate(e){const{drawLayer:t}=this.parent;let r;this.#o?(e=(e-this.rotation+360)%360,r=wn.#_(this.#a.box,e)):r=wn.#_(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,wn.#_(this.#r.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#v&&(e.setAttribute("aria-label",this.#v),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s;const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),Qv(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#C(e){wn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#T(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#I(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,s]=this.pageTranslation,i=this.#n,a=new Float32Array(i.length*8);let l=0;for(const{x:d,y:h,width:f,height:g}of i){const v=d*e+r,_=(1-h-g)*t+s;a[l]=a[l+4]=v,a[l+1]=a[l+3]=_,a[l+2]=a[l+6]=v+f*e,a[l+5]=a[l+7]=_+g*t,l+=8}return a}#x(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:s,y:i}){const{x:a,y:l,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),v=S=>{S.preventDefault(),S.stopPropagation()},_=S=>{f.abort(),this.#D(e,S)};window.addEventListener("blur",_,{signal:g}),window.addEventListener("pointerup",_,{signal:g}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ni,{signal:g}),r.addEventListener("pointermove",this.#w.bind(this,e),{signal:g}),this._freeHighlight=new Nb({x:s,y:i},[a,l,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let s=null;if(e instanceof TM){const{data:{quadPoints:S,rect:x,rotation:E,id:P,color:R,opacity:M,popupRef:N},parent:{page:{pageNumber:L}}}=e;s=e={annotationType:ft.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:S,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:N}}else if(e instanceof wx){const{data:{inkLists:S,rect:x,rotation:E,id:P,color:R,borderStyle:{rawWidth:M},popupRef:N},parent:{page:{pageNumber:L}}}=e;s=e={annotationType:ft.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:S,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:N}}const{color:i,quadPoints:a,inkLists:l,opacity:d}=e,h=await super.deserialize(e,t,r);h.color=Ve.makeHexColor(...i),h.#p=d||1,l&&(h.#g=e.thickness),h.annotationElementId=e.id||null,h._initialData=s;const[f,g]=h.pageDimensions,[v,_]=h.pageTranslation;if(a){const S=h.#n=[];for(let x=0;x<a.length;x+=8)S.push({x:(a[x]-v)/f,y:1-(a[x+1]-_)/g,width:(a[x+2]-a[x])/f,height:(a[x+1]-a[x+5])/g});h.#y(),h.#k(),h.rotate(h.rotation)}else if(l){h.#o=!0;const S=l[0],x={x:S[0]-v,y:g-(S[1]-_)},E=new Nb(x,[0,0,f,g],1,h.#g/2,!0,.001);for(let M=0,N=S.length;M<N;M+=2)x.x=S[M]-v,x.y=g-(S[M+1]-_),E.add(x);const{id:P,clipPathId:R}=t.drawLayer.draw(E,h.color,h._defaultOpacity,!0);h.#b({highlightOutlines:E.getOutlines(),highlightId:P,clipPathId:R}),h.#k()}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=rt._colorManager.convert(this.color),s={annotationType:ft.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#g,quadPoints:this.#I(),outlines:this.#x(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#N(s)?null:(s.id=this.annotationElementId,s)}#N(e){const{color:t}=this._initialData;return e.color.some((r,s)=>r!==t[s])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class cr extends rt{#e=0;#t=0;#n=null;#s=new Path2D;#i=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ft.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){rt.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case st.INK_THICKNESS:cr._defaultThickness=t;break;case st.INK_COLOR:cr._defaultColor=t;break;case st.INK_OPACITY:cr._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case st.INK_THICKNESS:this.#p(t);break;case st.INK_COLOR:this.#f(t);break;case st.INK_OPACITY:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[st.INK_THICKNESS,cr._defaultThickness],[st.INK_COLOR,cr._defaultColor||rt._defaultLineColor],[st.INK_OPACITY,Math.round(cr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[st.INK_THICKNESS,this.thickness||cr._defaultThickness],[st.INK_COLOR,this.color||cr._defaultColor||rt._defaultLineColor],[st.INK_OPACITY,Math.round(100*(this.opacity??cr._defaultOpacity))]]}#p(e){const t=s=>{this.thickness=s,this.#R()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=s=>{this.color=s,this.#_()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(e){const t=s=>{this.opacity=s,this.#_()};e/=100;const r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#I(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#w()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,r=this.width*e,s=this.height*t;this.setDimensions(r,s)}enableEditMode(){this.#i||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#C())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#T())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#g(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:s,parentScale:i,scaleFactor:a}=this;e.lineWidth=s*i/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${Xq(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",ni,{signal:this._uiManager._signal}),this.#T(),this.#r=new AbortController;const r=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#w(),this.thickness||=cr._defaultThickness,this.color||=cr._defaultColor||rt._defaultLineColor,this.opacity??=cr._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#A(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#b(e,t){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===s)return;const i=this.currentPath;let a=this.#s;if(i.push([e,t]),this.#l=!0,i.length<=2){a.moveTo(...i[0]),a.lineTo(e,t);return}i.length===3&&(this.#s=a=new Path2D,a.moveTo(...i[0])),this.#O(a,...i.at(-3),...i.at(-2),e,t)}#E(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#s.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#b(e,t),this.#E();let r;if(this.currentPath.length!==1)r=this.#k();else{const d=[e,t];r=[[d,d.slice(),d.slice(),d]]}const s=this.#s,i=this.currentPath;this.currentPath=[],this.#s=new Path2D;const a=()=>{this.allRawPaths.push(i),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#I(),this.#x()),this.#R())};this.addCommands({cmd:a,undo:l,mustExec:!0})}#A(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(a=>a[0]),s=t.map(a=>a[1]);Math.min(...r)-e,Math.max(...r)+e,Math.min(...s)-e,Math.max(...s)+e;const{ctx:i}=this;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)i.stroke(a);i.stroke(this.#s),i.restore()}#O(e,t,r,s,i,a,l){const d=(t+s)/2,h=(r+i)/2,f=(s+a)/2,g=(i+l)/2;e.bezierCurveTo(d+2*(s-d)/3,h+2*(i-h)/3,f+2*(s-f)/3,g+2*(i-g)/3,f,g)}#k(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[s,i]=e[0];for(r=1;r<e.length-2;r++){const[v,_]=e[r],[S,x]=e[r+1],E=(v+S)/2,P=(_+x)/2,R=[s+2*(v-s)/3,i+2*(_-i)/3],M=[E+2*(v-E)/3,P+2*(_-P)/3];t.push([[s,i],R,M,[E,P]]),[s,i]=[E,P]}const[a,l]=e[r],[d,h]=e[r+1],f=[s+2*(a-s)/3,i+2*(l-i)/3],g=[d+2*(a-d)/3,h+2*(l-h)/3];return t.push([[s,i],f,g,[d,h]]),t}#_(){if(this.isEmpty()){this.#N();return}this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#N();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#i||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#i=!0,this.div.classList.add("disabled"),this.#R(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#C(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#T(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#i||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#b(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#r?.abort(),this.#r=null,this.#C(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",ni)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#I(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#i}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,i,a]=this.#g();if(this.setAt(r,s,0,0),this.setDims(i,a),this.#I(),this.width){const[l,d]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*d),this.setAt(e*l,t*d,this.width*l,this.height*d),this.#c=!0,this.#w(),this.setDims(this.width*l,this.height*d),this.#_(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#w(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#N()}setDimensions(e,t){const r=Math.round(e),s=Math.round(t);if(this.#d===r&&this.#o===s)return;this.#d=r,this.#o=s,this.canvas.style.visibility="hidden";const[i,a]=this.parentDimensions;this.width=e/i,this.height=t/a,this.fixAndSetPosition(),this.#i&&this.#D(e,t),this.#w(),this.#_(),this.canvas.style.visibility="visible",this.fixDims()}#D(e,t){const r=this.#U(),s=(e-r)/this.#t,i=(t-r)/this.#e;this.scaleFactor=Math.min(s,i)}#N(){const e=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let r=0,s=e.length;r<s;r++){const[i,a,l,d]=e[r];r===0&&t.moveTo(...i),t.bezierCurveTo(a[0],a[1],l[0],l[1],d[0],d[1])}return t}static#z(e,t,r){const[s,i,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]+=s,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]+s,e[d+1]=f+i}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]+=i;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=a-e[d+1],e[d+1]=l-f}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,r){const[s,i,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]-=s,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]-i,e[d+1]=f-s}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]-=i;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=l-e[d+1],e[d+1]=a-f}break;default:throw new Error("Invalid rotation")}return e}#j(e,t,r,s){const i=[],a=this.thickness/2,l=e*t+a,d=e*r+a;for(const h of this.paths){const f=[],g=[];for(let v=0,_=h.length;v<_;v++){const[S,x,E,P]=h[v];if(S[0]===P[0]&&S[1]===P[1]&&_===1){const ue=e*S[0]+l,oe=e*S[1]+d;f.push(ue,oe),g.push(ue,oe);break}const R=e*S[0]+l,M=e*S[1]+d,N=e*x[0]+l,L=e*x[1]+d,B=e*E[0]+l,$=e*E[1]+d,H=e*P[0]+l,Y=e*P[1]+d;v===0&&(f.push(R,M),g.push(R,M)),f.push(N,L,B,$,H,Y),g.push(N,L),v===_-1&&g.push(H,Y)}i.push({bezier:cr.#z(f,s,this.rotation),points:cr.#z(g,s,this.rotation)})}return i}#F(){let e=1/0,t=-1/0,r=1/0,s=-1/0;for(const i of this.paths)for(const[a,l,d,h]of i){const f=Ve.bezierBoundingBox(...a,...l,...d,...h);e=Math.min(e,f[0]),r=Math.min(r,f[1]),t=Math.max(t,f[2]),s=Math.max(s,f[3])}return[e,r,t,s]}#U(){return this.#i?Math.ceil(this.thickness*this.parentScale):0}#R(e=!1){if(this.isEmpty())return;if(!this.#i){this.#_();return}const t=this.#F(),r=this.#U();this.#t=Math.max(rt.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(rt.MIN_SIZE,t[3]-t[1]);const s=Math.ceil(r+this.#t*this.scaleFactor),i=Math.ceil(r+this.#e*this.scaleFactor),[a,l]=this.parentDimensions;this.width=s/a,this.height=i/l,this.setAspectRatio(s,i);const d=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#w(),this.#_(),this.#d=s,this.#o=i,this.setDims(s,i);const f=e?r/this.scaleFactor/2:0;this.translate(d-this.translationX-f,h-this.translationY-f)}static async deserialize(e,t,r){if(e instanceof wx)return null;const s=await super.deserialize(e,t,r);s.thickness=e.thickness,s.color=Ve.makeHexColor(...e.color),s.opacity=e.opacity;const[i,a]=s.pageDimensions,l=s.width*i,d=s.height*a,h=s.parentScale,f=e.thickness/2;s.#i=!0,s.#d=Math.round(l),s.#o=Math.round(d);const{paths:g,rect:v,rotation:_}=e;for(let{bezier:x}of g){x=cr.#B(x,v,_);const E=[];s.paths.push(E);let P=h*(x[0]-f),R=h*(x[1]-f);for(let N=2,L=x.length;N<L;N+=6){const B=h*(x[N]-f),$=h*(x[N+1]-f),H=h*(x[N+2]-f),Y=h*(x[N+3]-f),ue=h*(x[N+4]-f),oe=h*(x[N+5]-f);E.push([[P,R],[B,$],[H,Y],[ue,oe]]),P=ue,R=oe}const M=this.#L(E);s.bezierPath2D.push(M)}const S=s.#F();return s.#t=Math.max(rt.MIN_SIZE,S[2]-S[0]),s.#e=Math.max(rt.MIN_SIZE,S[3]-S[1]),s.#D(l,d),s}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=rt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ft.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class bx extends rt{#e=null;#t=null;#n=null;#s=null;#i=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ft.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#i=e.bitmapFile}static initialize(e,t){rt.initialize(e,t)}static get supportedTypes(){return _t(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return _t(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ft.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:s,width:i,height:a,channels:s.length/(i*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const d=l.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#o(s)).finally(()=>this.#h());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#o(s)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=bx.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(s)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#s||this.#i||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[s,i]=this.pageDimensions,a=.75;if(this.width)t=this.width*s,r=this.height*i;else if(t>a*s||r>a*i){const f=Math.min(a*s/t,a*i/r);t*=f,r*=f}const[l,d]=this.parentDimensions;this.setDims(t*l/s,r*d/i),this._uiManager.enableWaiting(!1);const h=this.#l=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#b(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&h.setAttribute("aria-label",this.#r)}copyCanvas(e,t,r=!1){e||(e=224);const{width:s,height:i}=this.#e,a=new Tb;let l=this.#e,d=s,h=i,f=null;if(t){if(s>t||i>t){const B=Math.min(t/s,t/i);d=Math.floor(s*B),h=Math.floor(i*B)}f=document.createElement("canvas");const v=f.width=Math.ceil(d*a.sx),_=f.height=Math.ceil(h*a.sy);this.#a||(l=this.#g(v,_));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let x="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",E="#42414d");const P=15,R=P*a.sx,M=P*a.sy,N=new OffscreenCanvas(R*2,M*2),L=N.getContext("2d");L.fillStyle=x,L.fillRect(0,0,R*2,M*2),L.fillStyle=E,L.fillRect(0,0,R,M),L.fillRect(R,M,R,M),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,v,_),S.drawImage(l,0,0,l.width,l.height,0,0,v,_)}let g=null;if(r){let v,_;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,_=l.height;else if(l=this.#e,s>e||i>e){const E=Math.min(e/s,e/i);v=Math.floor(s*E),_=Math.floor(i*E),this.#a||(l=this.#g(v,_))}const x=new OffscreenCanvas(v,_).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,v,_),g={width:v,height:_,data:x.getImageData(0,0,v,_).data}}return{canvas:f,width:d,height:h,imageData:g}}#v(e,t){const[r,s]=this.parentDimensions;this.width=e/r,this.height=t/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const i=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},i)}#g(e,t){const{width:r,height:s}=this.#e;let i=r,a=s,l=this.#e;for(;i>2*e||a>2*t;){const d=i,h=a;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(i,a);f.getContext("2d").drawImage(l,0,0,d,h,0,0,i,a),l=f.transferToImageBitmap()}return l}#m(e,t){const r=new Tb,s=Math.ceil(e*r.sx),i=Math.ceil(t*r.sy),a=this.#l;if(!a||a.width===s&&a.height===i)return;a.width=s,a.height=i;const l=this.#a?this.#e:this.#g(s,i),d=a.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(l,0,0,l.width,l.height,0,0,s,i)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,s=Math.round(this.width*t*Th.PDF_TO_CSS_UNITS),i=Math.round(this.height*r*Th.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,i);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,i),a.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,r){let s=null;if(e instanceof PM){const{data:{rect:S,rotation:x,id:E,structParent:P,popupRef:R},container:M,parent:{page:{pageNumber:N}}}=e,L=M.querySelector("canvas"),B=r.imageManager.getFromCanvas(M.id,L);L.remove();const $=(await t._structTree.getAriaAttributes(`${ix}${E}`))?.get("aria-label")||"";s=e={annotationType:ft.STAMP,bitmapId:B.id,bitmap:B.bitmap,pageIndex:N-1,rect:S.slice(0),rotation:x,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:P,popupRef:R}}const i=await super.deserialize(e,t,r),{rect:a,bitmap:l,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:g}=e;h&&r.imageManager.isValidId(h)?(i.#t=h,l&&(i.#e=l)):i.#s=d,i.#a=f;const[v,_]=i.pageDimensions;return i.width=(a[2]-a[0])/v,i.height=(a[3]-a[1])/_,i.annotationElementId=e.id||null,g&&(i.altTextData=g),i._initialData=s,i.#d=!!s,i}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ft.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:i}=this.serializeAltText(!1);if(!s&&i&&(r.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const l=this.#E(r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const a=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){const l=t.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#y(!1))}return r}#E(e){const{rect:t,pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=e.rect.every((d,h)=>Math.abs(d-t[h])<1),a=e.pageIndex===r,l=(e.accessibilityData?.alt||"")===s;return{isSame:i&&a&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ma{#e;#t=!1;#n=null;#s=null;#i=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Bn,cr,bx,wn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:d,viewport:h,l10n:f}){const g=[...ma.#h.values()];if(!ma._initialized){ma._initialized=!0;for(const v of g)v.initialize(f,e)}e.registerEditorTypes(g),this.#o=e,this.pageIndex=t,this.div=r,this.#e=i,this.#n=a,this.viewport=h,this.#a=d,this.drawLayer=l,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ft.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case ft.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ft.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ft.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of ma.#h.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==ft.INK)return;if(!e){for(const r of this.#r.values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n)return;const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const s=await this.deserialize(r);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of this.#r.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const i of s){const{id:a}=i.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(i),l.show(!1),i.show();continue}l=e.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(i)&&l.show(!1)),i.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of ma.#h.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#a.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#a.div.contains(t)){const{isMac:r}=Fr.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),wn.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#o.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return ma.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){const t=this.#f;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:r,offsetY:s}=this.#g(),i=this.getNextId(),a=this.#v({parent:this,id:i,x:r,y:s,uiManager:this.#o,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await ma.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=this.#v({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...r});return i&&this.add(i),i}#g(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+r),d=Math.min(window.innerHeight,t+s),h=(i+l)/2-e,f=(a+d)/2-t,[g,v]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=Fr.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===ft.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===ft.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Fr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(e,t,r){const s=this.#o.findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,su(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,su(this.div,{rotation:r}),t!==r)for(const s of this.#r.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class wr{#e=null;#t=0;#n=new Map;#s=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return _t(this,"_svgFactory",new yx)}static#i(e,{x:t=0,y:r=0,width:s=1,height:i=1}={}){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`}#r(e){const t=wr._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),wr.#i(t,e),t}#l(e,t){const r=wr._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=wr._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s}draw(e,t,r,s=!1){const i=this.#t++,a=this.#r(e.box);a.classList.add(...e.classNamesForDrawing);const l=wr._svgFactory.createElement("defs");a.append(l);const d=wr._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${i}`;d.setAttribute("id",h),d.setAttribute("d",e.toSVGPath()),s&&this.#s.set(i,d);const f=this.#l(l,h),g=wr._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",t),a.setAttribute("fill-opacity",r),g.setAttribute("href",`#${h}`),this.#n.set(i,a),{id:i,clipPathId:`url(#${f})`}}drawOutline(e){const t=this.#t++,r=this.#r(e.box);r.classList.add(...e.classNamesForOutlining);const s=wr._svgFactory.createElement("defs");r.append(s);const i=wr._svgFactory.createElement("path");s.append(i);const a=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",a),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.mustRemoveSelfIntersections){const f=wr._svgFactory.createElement("mask");s.append(f),l=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const g=wr._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=wr._svgFactory.createElement("use");f.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=wr._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${a}`),l&&d.setAttribute("mask",`url(#${l})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#s.get(e);this.#s.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#s.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){wr.#i(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#s.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#s.clear()}}var P8=at.AbortException,R8=at.AnnotationEditorLayer,M8=at.AnnotationEditorParamsType,I8=at.AnnotationEditorType,D8=at.AnnotationEditorUIManager,N8=at.AnnotationLayer,O8=at.AnnotationMode,L8=at.ColorPicker,j8=at.DOMSVGFactory,F8=at.DrawLayer,B8=at.FeatureTest,IM=at.GlobalWorkerOptions,$8=at.ImageKind,U8=at.InvalidPDFException,z8=at.MissingPDFException,V8=at.OPS,H8=at.OutputScale,W8=at.PDFDataRangeTransport,q8=at.PDFDateString,G8=at.PDFWorker,K8=at.PasswordResponses,Y8=at.PermissionFlag,X8=at.PixelsPerInch,Q8=at.RenderingCancelledException,J8=at.TextLayer,Z8=at.UnexpectedResponseException,e9=at.Util,t9=at.VerbosityLevel,n9=at.XfaLayer,r9=at.build,s9=at.createValidAbsoluteUrl,i9=at.fetchData,o9=at.getDocument,a9=at.getFilenameFromUrl,l9=at.getPdfFilenameFromUrl,c9=at.getXfaPageViewport,u9=at.isDataScheme,d9=at.isPdfFile,h9=at.noContextMenu,f9=at.normalizeUnicode,p9=at.setLayerDimensions,m9=at.shadow,DM=at.version;const V9=Object.freeze(Object.defineProperty({__proto__:null,AbortException:P8,AnnotationEditorLayer:R8,AnnotationEditorParamsType:M8,AnnotationEditorType:I8,AnnotationEditorUIManager:D8,AnnotationLayer:N8,AnnotationMode:O8,ColorPicker:L8,DOMSVGFactory:j8,DrawLayer:F8,FeatureTest:B8,GlobalWorkerOptions:IM,ImageKind:$8,InvalidPDFException:U8,MissingPDFException:z8,OPS:V8,OutputScale:H8,PDFDataRangeTransport:W8,PDFDateString:q8,PDFWorker:G8,PasswordResponses:K8,PermissionFlag:Y8,PixelsPerInch:X8,RenderingCancelledException:Q8,TextLayer:J8,UnexpectedResponseException:Z8,Util:e9,VerbosityLevel:t9,XfaLayer:n9,build:r9,createValidAbsoluteUrl:s9,fetchData:i9,getDocument:o9,getFilenameFromUrl:a9,getPdfFilenameFromUrl:l9,getXfaPageViewport:c9,isDataScheme:u9,isPdfFile:d9,noContextMenu:h9,normalizeUnicode:f9,setLayerDimensions:p9,shadow:m9,version:DM},Symbol.toStringTag,{value:"Module"}));IM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${DM}/pdf.worker.min.mjs`;hN.createRoot(document.getElementById("root")).render(y.jsx(ot.StrictMode,{children:y.jsx($R,{children:y.jsx(SE,{children:y.jsx(Tq,{})})})}));export{us as $,VU as A,Rt as B,lk as C,Kp as D,rm as E,wl as F,im as G,wk as H,Lr as I,qc as J,IH as K,ZU as L,fk as M,DH as N,uP as O,Mi as P,ZW as Q,ot as R,rz as S,__ as T,vk as U,ER as V,kR as W,TR as X,PR as Y,cs as Z,Nr as _,WU as a,ck as a$,Or as a0,Lt as a1,t6 as a2,hs as a3,RR as a4,eM as a5,ut as a6,iz as a7,az as a8,B9 as a9,Gp as aA,ok as aB,ak as aC,y_ as aD,R9 as aE,uk as aF,OE as aG,k9 as aH,hp as aI,mF as aJ,pF as aK,fF as aL,hF as aM,Dh as aN,tz as aO,$A as aP,sz as aQ,L2 as aR,Oz as aS,Ev as aT,bv as aU,$9 as aV,$2 as aW,Vp as aX,w_ as aY,D2 as aZ,GU as a_,OW as aa,RE as ab,qU as ac,v_ as ad,lb as ae,v9 as af,Vt as ag,JU as ah,oE as ai,ze as aj,si as ak,MS as al,pk as am,Op as an,DM as ao,IM as ap,hN as aq,Tq as ar,K_ as as,P9 as at,XU as au,HU as av,mN as aw,Yp as ax,cu as ay,Xp as az,PW as b,fy as b$,B2 as b0,ny as b1,YU as b2,Al as b3,wj as b4,IS as b5,C9 as b6,A9 as b7,Ek as b8,ew as b9,Zv as bA,BH as bB,om as bC,$H as bD,o9 as bE,ez as bF,KU as bG,S_ as bH,wb as bI,zk as bJ,_P as bK,V9 as bL,O8 as bM,J8 as bN,N8 as bO,Ob as bP,T9 as bQ,qe as bR,yy as bS,Jk as bT,Zk as bU,wy as bV,N_ as bW,_y as bX,Zc as bY,A_ as bZ,py as b_,cp as ba,up as bb,ij as bc,hy as bd,Ch as be,xo as bf,wa as bg,nt as bh,rT as bi,L4 as bj,j4 as bk,Fe as bl,Is as bm,L9 as bn,QW as bo,F9 as bp,JW as bq,xt as br,j9 as bs,_R as bt,M9 as bu,xR as bv,SR as bw,AR as bx,bR as by,Vz as bz,tt as c,eT as c0,tT as c1,i4 as c2,a4 as c3,l4 as c4,u4 as c5,d4 as c6,f4 as c7,h4 as c8,c4 as c9,YV as ca,rN as cb,YC as cc,EE as cd,CE as ce,S9 as cf,TE as cg,Iv as ch,Sj as ci,_j as cj,Cj as ck,Rj as cl,Mj as cm,Pj as cn,dk as co,b_ as cp,gk as cq,yb as cr,lE as d,ri as e,Fi as f,Kb as g,ln as h,FR as i,y as j,vO as k,Ah as l,Zn as m,nz as n,Oi as o,zU as p,H_ as q,A as r,Se as s,W_ as t,Mh as u,q_ as v,G_ as w,eR as x,tm as y,nm as z};
