import{ak as Ke,c as Pe,D as Fe,j as e,Z,_ as K,$ as F,a0 as ee,aV as ge,a1 as $,m as G,C as ea,R as Ne,K as aa,N as sa,B as L,O as ta,P as we,T as Le,ab as B,J as H,a3 as ae,e as fe,r as p,aW as ve,al as M,aX as ke,aY as Re,a7 as ra,Q as na,V as oa,W as la,X as ca,Y as da,h as Y,I as J,i as ia,az as ma,o as Ae,q as ua,t as xa,v as pa,x as ha,aE as ga,aN as fa,b as ya,ax as _e,p as ba}from"./index-DosJhT9z.js";import{T as ye}from"./trending-up-B1oXkSIa.js";import{T as be}from"./trending-down-C0IVpLP_.js";import{S as ja}from"./settings-BxYDetoK.js";import{F as Na}from"./filter-C-rjcpcd.js";import{A as Be,b as Oe,c as Ie,d as Me,e as ze,f as Ge,g as Ve,h as Ye}from"./alert-dialog-DPQNfubJ.js";import{T as wa,a as va,b as ka,c as Aa}from"./tooltip-CeT8TWZO.js";import{H as _a}from"./hourglass-D6NCXFLM.js";import{M as Sa}from"./more-vertical-DzrPyr0B.js";import{P as qe}from"./pen-square-B4TDd2Gh.js";import{p as V}from"./pt-BR-Dqdi3X7i.js";import{s as q,e as Se}from"./subDays-BJ9LAypw.js";import{e as z}from"./endOfDay-1sfWewCa.js";import{s as Ce}from"./startOfMonth-w8o4pQ9n.js";import{e as De}from"./endOfMonth-BI7KFyvk.js";import{P as Ca}from"./plus-circle-BCyIaDZs.js";import{L as Da}from"./landmark-6XeQXr0E.js";import{S as Ta}from"./search-ByMMlkpH.js";import"./extends-CF3RwP-h.js";function Te(a){const n=Ke(a),x=n.getFullYear();return n.setFullYear(x+1,0,0),n.setHours(23,59,59,999),n}const Ea=Pe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Pa=Pe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),La=({title:a,value:n,icon:x,color:r,bgColor:h,delay:o})=>e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o},className:`${h} bg-card rounded-xl p-6 shadow-lg border border-border card-hover`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:n})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${r} flex items-center justify-center`,children:e.jsx(x,{className:"w-6 h-6 text-white"})})]})}),Ra=({summary:a,summaryPeriod:n,onSummaryPeriodChange:x})=>{const r=[{title:"Faturamento Total (Pago)",value:`R$ ${(a.totalRevenue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:ye,color:"from-green-500 to-emerald-600",bgColor:"dark:bg-green-900/10"},{title:"Despesas Totais (Pagas)",value:`R$ ${(a.totalExpenses||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:be,color:"from-red-500 to-pink-600",bgColor:"dark:bg-red-900/10"},{title:"Lucro Líquido (Pago)",value:`R$ ${(a.netBalance||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:Fe,color:(a.netBalance||0)>=0?"from-blue-500 to-cyan-600":"from-red-500 to-pink-600",bgColor:(a.netBalance||0)>=0?"dark:bg-blue-900/10":"dark:bg-red-900/10"}],h=()=>{const o=ge.find(d=>d.value===n);return o?o.label.toLowerCase():"todos os períodos"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Resumo Financeiro"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dados baseados em: ",h()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ja,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(Z,{value:n,onValueChange:x,children:[e.jsx(K,{className:"w-48",children:e.jsx(F,{placeholder:"Período dos cards"})}),e.jsx(ee,{className:"max-h-60",children:ge.map(o=>e.jsx($,{value:o.value,children:o.label},o.value))})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map((o,d)=>e.jsx(La,{...o,delay:d*.1},o.title))})]})},Ee="w-full md:w-auto px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",Ba=({filterType:a,setFilterType:n,filterPeriod:x,setFilterPeriod:r})=>{const h=d=>{n(d==="ALL"?"ALL":d)},o=d=>{r(d==="all-periods"?"all":d)};return e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("select",{value:a,onChange:d=>h(d.target.value),className:Ee,children:[e.jsx("option",{value:"ALL",children:"Todos os tipos"}),e.jsx("option",{value:"ENTRADA",children:"Entradas"}),e.jsx("option",{value:"SAIDA",children:"Saídas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("select",{value:x,onChange:d=>o(d.target.value),className:Ee,children:ge.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]})})},Oa=({transactions:a,onEdit:n,onDelete:x,isMobile:r})=>{const[h,o]=Ne.useState(!1),[d,A]=Ne.useState(null),N=s=>{A(s),o(!0)},D=()=>{d&&x(d),o(!1),A(null)},f=()=>{o(!1),A(null)},T=s=>{if(!s)return"N/A";try{const u=B(s);return isNaN(u.getTime())?"Data inválida":r?H(u,"dd/MM/yy",{locale:V}):H(u,"dd/MM/yyyy",{locale:V})}catch(u){return console.error("Error formatting date:",s,u),"Data inválida"}};return e.jsxs(e.Fragment,{children:[e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-card rounded-xl shadow-lg border border-border",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Últimos Lançamentos"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-accent/50 dark:bg-accent/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Descrição"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider ${r?"hidden":"table-cell"}`,children:"Carteira"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider ${r?"hidden":"table-cell"}`,children:"Pagamento"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r?5:7,className:"px-6 py-8 text-center text-muted-foreground",children:"Nenhum lançamento encontrado."})}):a.map(s=>e.jsxs("tr",{className:`
                      ${s.tipo==="ENTRADA"?"bg-green-500/5 dark:bg-green-500/10":"bg-red-500/5 dark:bg-red-500/10"}
                      hover:bg-accent/50 dark:hover:bg-accent/30
                    `,children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-foreground",children:T(s.data_recebimento||s.release_date||s.data_vencimento||s.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-foreground truncate max-w-[100px] sm:max-w-xs",title:s.descricao,children:s.descricao}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-muted-foreground ${r?"hidden":"table-cell"}`,children:s.wallet?e.jsxs("div",{className:"flex items-center",children:[s.wallet.icon_url&&e.jsx("img",{src:s.wallet.icon_url,alt:s.wallet.name,className:"w-4 h-4 mr-2 object-contain"}),e.jsx("span",{className:"truncate",children:s.wallet.name})]}):"N/A"}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsxs("span",{className:s.tipo==="ENTRADA"?"text-customGreen":"text-red-500",children:[s.tipo==="SAIDA"?"- R$ ":"+ R$ ",Number(s.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),s.original_value&&e.jsx(wa,{children:e.jsxs(va,{children:[e.jsx(ka,{asChild:!0,children:e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground cursor-help",children:["(de ",Number(s.original_value).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),")"]})}),e.jsx(Aa,{children:e.jsxs("p",{children:["Taxa de R$ ",Number(s.fee_value).toLocaleString("pt-BR",{minimumFractionDigits:2})," descontada"]})})]})})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${s.status==="PAGO"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":s.status==="PENDENTE"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":s.status==="AGUARDANDO_LIBERACAO"?"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100":s.status==="CANCELADO"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}`,children:[s.status==="AGUARDANDO_LIBERACAO"&&e.jsx(_a,{className:"w-3 h-3 mr-1"}),s.status.replace(/_/g," ")]})}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-muted-foreground ${r?"hidden":"table-cell"}`,children:s.metodo_pagamento||"N/A"}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(aa,{children:[e.jsx(sa,{asChild:!0,children:e.jsx(L,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Sa,{className:"h-4 w-4"})})}),e.jsxs(ta,{align:"end",children:[e.jsxs(we,{onClick:()=>n(s),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(we,{onClick:()=>N(s.id),className:"text-red-600 dark:text-red-400 hover:!text-red-600 dark:hover:!text-red-400",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})})]},s.id))})]})})]}),e.jsx(Be,{open:h,onOpenChange:o,children:e.jsxs(Oe,{children:[e.jsxs(Ie,{children:[e.jsx(Me,{children:"Confirmar Exclusão"}),e.jsx(ze,{children:"Tem certeza que deseja excluir este lançamento? Esta ação não pode ser desfeita."})]}),e.jsxs(Ge,{children:[e.jsx(Ve,{onClick:f,children:"Cancelar"}),e.jsx(Ye,{onClick:D,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},Ia=({data:a})=>e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Resumo de Meses Anteriores (Últimos 3 meses)"})}),e.jsx("div",{className:"space-y-4",children:a.length>0?a.map((n,x)=>{const r=n.revenue+n.expenses,h=r>0?n.revenue/r*100:0,o=r>0?n.expenses/r*100:0;return e.jsxs(G.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"p-4 bg-background/50 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"font-semibold text-foreground",children:n.monthYear}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.transactions," transações"]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(ye,{size:16,className:"mr-1"}),"Receitas: R$ ",Number(n.revenue).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[e.jsx(be,{size:16,className:"mr-1"}),"Despesas: R$ ",Number(n.expenses).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),r>0&&e.jsxs("div",{className:"w-full bg-muted rounded-full h-2.5",children:[e.jsx("div",{className:"bg-green-500 h-2.5 rounded-l-full",style:{width:`${h}%`,display:"inline-block"},title:`Receitas: ${h.toFixed(1)}%`}),e.jsx("div",{className:"bg-red-500 h-2.5 rounded-r-full",style:{width:`${o}%`,display:"inline-block",marginLeft:h>0&&o>0?"-1px":"0"},title:`Despesas: ${o.toFixed(1)}%`})]})]},n.monthYear)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhum dado para os últimos 3 meses."})})]}),Ma=a=>{const{financialData:n,deleteTransaction:x,workflowCards:r,getClientById:h,wallets:o}=ae(),{toast:d}=fe(),[A,N]=p.useState(!1),[D,f]=p.useState("entrada"),[T,s]=p.useState(null),[u,w]=p.useState(""),[C,E]=p.useState(()=>a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?"SAIDA":a.type==="entrada"&&a.status==="pendente"?"ALL":a.type==="entrada"&&a.status==="pago"?"ENTRADA":a.type==="saida"&&a.status==="pago"?"SAIDA":a.type?.toUpperCase()||"ALL":"ALL"),[R,P]=p.useState(()=>a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?"all":a.period||"all":"all"),[O,I]=p.useState("month"),[k,S]=p.useState(()=>a&&a.isDashboardClick?a.type==="entrada"&&a.status==="pendente":!1);p.useEffect(()=>{a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?(E("SAIDA"),P("all"),S(!1)):a.type==="entrada"&&a.status==="pendente"?(S(!0),E("ALL"),P("all")):a.type==="entrada"&&a.status==="pago"?(S(!1),E("ENTRADA"),P("all")):a.type==="saida"&&a.status==="pago"?(S(!1),E("SAIDA"),P("all")):(E(a.type?.toUpperCase()||"ALL"),P(a.period||"all"),S(!1)):(!a||Object.keys(a).length===0)&&(S(!1),E("ALL"),P("all"))},[a]);const W=p.useMemo(()=>{let c=n.transactions;O!=="all"&&(c=n.transactions.filter(j=>{const y=j.status==="PAGO"&&j.data_recebimento?j.data_recebimento:j.data_vencimento||j.created_at;if(!y)return!1;const m=B(y),g=new Date;switch(O){case"today":const U=M(g),se=z(g);return m>=U&&m<=se;case"week":const te=ke(g,{locale:V}),re=Se(g,{locale:V});return m>=te&&m<=re;case"month":const ne=Ce(g),oe=De(g);return m>=ne&&m<=oe;case"last_7_days":const le=M(q(g,6)),ce=z(g);return m>=le&&m<=ce;case"last_30_days":const de=M(q(g,29)),ie=z(g);return m>=de&&m<=ie;case"last_90_days":const me=M(q(g,89)),ue=z(g);return m>=me&&m<=ue;case"last_year":const xe=M(q(g,364)),pe=z(g);return m>=xe&&m<=pe;case"current_year":const he=ve(g),Ze=Te(g);return m>=he&&m<=Ze;default:return!0}}));const t=c.filter(j=>j.tipo==="ENTRADA"&&j.status==="PAGO").reduce((j,y)=>j+Number(y.valor),0),l=c.filter(j=>j.tipo==="SAIDA"&&j.status==="PAGO").reduce((j,y)=>j+Number(y.valor),0),b=t-l;return{totalRevenue:t,totalExpenses:l,netBalance:b}},[n.transactions,O]),i=p.useMemo(()=>{let c=n.transactions.map(t=>({...t,wallet:o.find(l=>l.id===t.wallet_id)}));if(u){const t=u.toLowerCase();c=c.filter(l=>l.descricao.toLowerCase().includes(t)||l.valor.toString().includes(t))}return c.filter(t=>{let l=C==="ALL"||t.tipo===C;a?.isDashboardClick&&(a.type==="saida"&&a.status==="pendente"&&a.period==="future"&&C==="SAIDA"?l=l&&t.status==="PENDENTE":(a.type==="entrada"&&a.status==="pago"&&C==="ENTRADA"||a.type==="saida"&&a.status==="pago"&&C==="SAIDA")&&(l=l&&t.status==="PAGO"));let b=!0;if(R!=="all"){const j=t.status==="PAGO"&&t.data_recebimento?t.data_recebimento:t.data_vencimento||t.created_at;if(!j)return!1;const y=B(j),m=new Date;switch(R){case"today":const g=M(m),U=z(m);b=y>=g&&y<=U;break;case"week":const se=ke(m,{locale:V}),te=Se(m,{locale:V});b=y>=se&&y<=te;break;case"month":const re=Ce(m),ne=De(m);b=y>=re&&y<=ne;break;case"last_7_days":const oe=M(q(m,6)),le=z(m);b=y>=oe&&y<=le;break;case"last_30_days":const ce=M(q(m,29)),de=z(m);b=y>=ce&&y<=de;break;case"last_90_days":const ie=M(q(m,89)),me=z(m);b=y>=ie&&y<=me;break;case"last_year":const ue=M(q(m,364)),xe=z(m);b=y>=ue&&y<=xe;break;case"current_year":const pe=ve(m),he=Te(m);b=y>=pe&&y<=he;break}}return l&&b}).sort((t,l)=>B(l.created_at).getTime()-B(t.created_at).getTime())},[n.transactions,C,R,a,u,o]),_=p.useMemo(()=>{const c=new Date;switch(!0){case C==="SAIDA":return i.filter(t=>t.tipo==="SAIDA"&&t.status==="PENDENTE"&&(!t.data_vencimento||B(t.data_vencimento)>=c));case(a?.isDashboardClick&&a.type==="saida"&&a.status==="pendente"):return i.filter(t=>t.tipo==="SAIDA"&&t.status==="PENDENTE");default:return i}},[i,C,a]),v=p.useMemo(()=>{const c=new Date;return n.transactions.filter(t=>t.status==="PENDENTE"&&t.data_vencimento&&B(t.data_vencimento)<c).map(t=>({...t,wallet:o.find(l=>l.id===t.wallet_id)}))},[n.transactions,o]),We=p.useMemo(()=>{const c=new Date,t={};return n.transactions.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE"&&l.cliente_id&&l.data_vencimento&&B(l.data_vencimento)<c).forEach(l=>{t[l.cliente_id]||(t[l.cliente_id]=[]),t[l.cliente_id].push({...l,wallet:o.find(b=>b.id===l.wallet_id)})}),Object.values(t).flat()},[n.transactions,o]),Ue=c=>{f(c),s(null),N(!0)},$e=c=>{f(c.tipo),s(c),N(!0)},Je=async c=>{try{await x(c),d({title:"Lançamento Removido",description:"O lançamento financeiro foi removido com sucesso."})}catch(t){d({title:"Erro ao remover",description:t.message,variant:"destructive"})}},He=()=>{N(!1),s(null)},je=c=>["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"].indexOf(c.toLowerCase()),Qe=p.useMemo(()=>{const c={};return n.transactions.forEach(t=>{const l=B(t.data_recebimento||t.created_at),b=H(l,"MMMM/yyyy",{locale:V});c[b]||(c[b]={revenue:0,expenses:0,transactions:0}),t.tipo==="ENTRADA"&&t.status==="PAGO"&&(c[b].revenue+=Number(t.valor)),t.tipo==="SAIDA"&&t.status==="PAGO"&&(c[b].expenses+=Number(t.valor)),c[b].transactions++}),Object.entries(c).map(([t,l])=>({monthYear:t,...l})).sort((t,l)=>{const[b,j]=t.monthYear.split("/"),[y,m]=l.monthYear.split("/");return new Date(m,je(y))-new Date(j,je(b))}).slice(0,3)},[n.transactions]),Xe=p.useMemo(()=>r.map(c=>{const t=n.transactions.filter(g=>g.trabalho_id===c.id&&g.tipo==="ENTRADA"),l=t.filter(g=>g.status==="PAGO").reduce((g,U)=>g+Number(U.valor),0);let b=t.filter(g=>g.status==="PENDENTE").reduce((g,U)=>g+Number(U.valor),0),j=Number(c.value)||0,y=0;j>l&&(y=j-l);const m=b>0?b:y;return{...c,pending_amount:m,client:c.client_id?h(c.client_id):null}}).filter(c=>c.pending_amount>0&&c.status!=="concluido"&&!c.archived),[r,n.transactions,h]);return{financialSummary:W,summaryPeriod:O,setSummaryPeriod:I,filteredTransactions:i,getFilteredTransactionsByListType:_,overdueTransactions:v,defaultDebtorTransactions:We,isModalOpen:A,transactionType:D,editingTransaction:T,filterType:C,setFilterType:E,filterPeriod:R,setFilterPeriod:P,handleAddTransaction:Ue,handleEditTransaction:$e,handleDeleteTransaction:Je,closeModal:He,pastMonthsSummaryData:Qe,showPaymentsToReceive:k,setShowPaymentsToReceive:S,pendingToReceiveWorkflowCards:Xe,searchTerm:u,setSearchTerm:w}},za=({cards:a})=>{const{getClientById:n,getServicePackageById:x}=ae();return!a||a.length===0?e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 bg-card rounded-xl shadow-lg border border-border text-center",children:[e.jsx(Re,{size:48,className:"mx-auto text-primary mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"Nenhum Pagamento a Receber"}),e.jsx("p",{className:"text-muted-foreground",children:"Não há trabalhos ou transações com valores pendentes no momento."})]}):e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl shadow-lg border border-border",children:[e.jsxs("div",{className:"p-6 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pagamentos a Receber"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trabalhos e transações com valores pendentes de clientes."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-accent/50 dark:bg-accent/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Trabalho / Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Data Evento/Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Pacote/Descrição"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor Pendente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status Contrato/Lanç."})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:a.map(r=>{const h=!!r.title,o=r.client_id?n(r.client_id):null,d=h&&r.service_package_id?x(r.service_package_id):null,A=h?r.title:r.descricao,N=h?r.date?H(B(r.date),"dd/MM/yyyy",{locale:V}):"N/A":r.data_vencimento?H(B(r.data_vencimento),"dd/MM/yyyy",{locale:V}):"N/A",D=h?d?d.name:"N/A":r.descricao,f=h?r.value||0:r.valor||0,T=h?r.pending_amount||0:r.valor||0,s=h?r.contract_status==="signed"?"Assinado":r.contract_status==="sent"?"Enviado":"Pendente":r.status,u=h?r.contract_status==="signed"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":r.contract_status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":r.status==="PENDENTE"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100";return e.jsxs("tr",{className:"hover:bg-accent/50 dark:hover:bg-accent/30",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:A}),o&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[e.jsx(ra,{size:12,className:"mr-1"}),o.name]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:N}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:D}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:["R$ ",Number(f).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-orange-600 dark:text-orange-400",children:["R$ ",Number(T).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full capitalize ${u}`,children:s})})]},r.id)})})]})})]})},Q={bank:[{name:"Nubank",url:"https://play-lh.googleusercontent.com/NPkx0aiwABB31gBw_CuZO9Rwukhir-BwemxfNlAVjT6smwk6QgUbb3XrmsSSClfzk0dY"},{name:"Banco do Brasil",url:"https://play-lh.googleusercontent.com/1-aNhsSPNqiVluwNGZar_7F5PbQ4u1zteuJ1jumnArhe8bfYHHaVwu4aVOF5-NAmLaA"},{name:"Bradesco",url:"https://play-lh.googleusercontent.com/ReQEaxm44OuduIlJEVO_-xs9iZXSyRNdzGKrONYoLSgAdOzyhPKTb1xuuoPXK6tABm0"},{name:"Itaú",url:"https://play-lh.googleusercontent.com/gRcutACE4XkEHmxcbUdOehxpTbp_LjmwJ6qIEbqfD34oh9feTNhTnlDgf97HEZ9eGKY"},{name:"Caixa Econômica",url:"https://play-lh.googleusercontent.com/ubV0x2kGJIEe10shxuFnH9Cy21OgHARwVUZ89nyE0YOZN9c25ov_dyHdk1rMgbPvoDI"},{name:"Santander",url:"https://play-lh.googleusercontent.com/g_QDzrOlw8Belx8qb47fUu0MPL6AVFzDdbOz_NJZYQDNLveHYxwiUoe09Wvkxf-_548q=w240-h480-rw"},{name:"Inter",url:"https://play-lh.googleusercontent.com/dLVmnD6SlKMWO8_iiw5Cepca0zqmJq3zMaAfXXp6kJfrVBgctX2qTClAOCuaCLn-XmQ=w240-h480-rw"},{name:"C6 Bank",url:"https://play-lh.googleusercontent.com/qYXhGgBxFLr5xgnv0AGhqW9v7tyedb_i5AVoebI6pow5pWPNZH1qEHnslmSHNkVpB-g"},{name:"Neon",url:"https://play-lh.googleusercontent.com/pZ1aEI_Jdk4XAI5E9CpxEgJBT_8URFmOqfMQSjvwzcwFr7gLI1M0Blodm9Xei8hcK9rG=w240-h480-rw"},{name:"Original",url:"https://media.licdn.com/dms/image/v2/C4E0BAQFbBkg4ksroTw/company-logo_200_200/company-logo_200_200/0/1630641770300/bancooriginal_logo?e=2147483647&v=beta&t=A2TQReLKV9Uj75AzEN6_ezfhKEb_Ir3a82Y34UKu8BA"},{name:"Sicoob",url:"https://play-lh.googleusercontent.com/GY-KNYDw_GFuEBK4C_iVXBqFX2VpIW3cJ5Yb-7BkWv363sNO19z8s_0rS0BQ40AXzms"},{name:"Sicredi",url:"https://play-lh.googleusercontent.com/yTaFNMenVIz0MW_Msc9IbUxVbBpTF49aOcI__Z2ppoK7a8Un_MWIqzZ92U2-VUXTNA"},{name:"Next",url:"https://play-lh.googleusercontent.com/H10aAKl4vs91sow3buRJk85cEN58T7onVyNqVQPnWnEpRQmelArjGLdUx05imRQePjCD"},{name:"Digio",url:"https://play-lh.googleusercontent.com/x3cmvHcj6dBUQZ-AJXz6PnmKwCe6PNqyPK9yKW7JIP9kUlOS08g40VmtxatJJkXfFg"},{name:"PagBank",url:"https://play-lh.googleusercontent.com/O9GpqGB-9aE8Qt79JM1VXoVA5rRQjLb4LVk7yVwd2cuWeAi0ML6uVbc7aXZEOeyYwg"},{name:"Will Bank",url:"https://play-lh.googleusercontent.com/fazUU0h6BiMpjSxgq1son0-VRhBhkimr6kzCLw6T1Y3ZGZj1Nrnvi-ETM2je3-miRQ"},{name:"BS2",url:"https://play-lh.googleusercontent.com/tlOQ2LtLwJsAPw1p_S5Lz3S6e-EbkxgIcaNkuqv6URJA9-CkhOlZzIrTdfi-oEdZK9nn"},{name:"Banco Personalizado",url:"https://cdn-icons-png.flaticon.com/512/3638/3638616.png"}],gateway:[{name:"PicPay",url:"https://play-lh.googleusercontent.com/pTvc9kCumx_24eJDwGUpvcBwljcIBkrsL3qHwhBW2NalMQ-XxTtHRV9YAJanBxkV0Rw"},{name:"Mercado Pago",url:"https://play-lh.googleusercontent.com/6a7KGB_J06Lwct1F2kuwK_GbNm4E8Vkl0MJqzjcddpGjCIsTMOg2nJ3WW-dGCr883FI=w240-h480-rw"},{name:"PagSeguro",url:"https://assets.pagseguro.com.br/registration-fe/5.10.1/_next/static/media/pag-bank-banner.3e81dc45.png"},{name:"SumUp",url:"https://play-lh.googleusercontent.com/QmvpebjqnqTtUuTSDEt8zBmLf87-FpVU1uvuMP2zazqyYoEHZlZUB7QZ4j_klH3igQ"},{name:"Stone",url:"https://images.seeklogo.com/logo-png/36/1/stone-pagamentos-logo-png_seeklogo-364485.png"},{name:"PayPal",url:"https://play-lh.googleusercontent.com/iQ8f5plIFy9rrY46Q2TNRwq_8nCvh9LZVwytqMBpOEcfnIU3vTkICQ6L1-RInWS93oQg"},{name:"Stripe",url:"https://play-lh.googleusercontent.com/2PS6w7uBztfuMys5fgodNkTwTOE6bLVB2cJYbu5GHlARAK36FzO5bUfMDP9cEJk__cE"},{name:"Asaas",url:"https://play-lh.googleusercontent.com/Rze4nR-Mol9j-dj4LDaPH4lWZG_PENIljWnH_hu78uYpMd9AFenlr84sGlYQTT2xBA"},{name:"Gerencianet",url:"https://play-lh.googleusercontent.com/2M3YecvH6Nv-yWp43Ekal7RyJPXuwinvC8pUln_ophYqWimQEeviw-yOR7DbLOf2U6I"},{name:"Pagar.me",url:"https://play-lh.googleusercontent.com/_zZlN3sJsEXGEicuECbyCcEuaV9gf2ZJtqz0r5UtBd59-G93hNNiKZEgBwqiBFgflH6T=w240-h480-rw"},{name:"Cielo",url:"https://play-lh.googleusercontent.com/BukKjSZwbGxLLSOkuzNztYXGV2KpEecAWO7TvFdC8-cVGWv_kzJ4I_J5lKwexQlEky4"},{name:"Rede",url:"https://cdn6.aptoide.com/imgs/7/1/8/7184445ac1374f5a1e87a50d56c2b6db_icon.png"},{name:"GetNet",url:"https://play-lh.googleusercontent.com/4tGSaBYJh7I_11w3T8laid5Y62e7jgJIyOeDiJkRPH9s6HJi6XRk_Rqz4vsu1gq_Qg"}],cash:[{name:"Dinheiro",url:"https://cdn-icons-png.flaticon.com/512/5451/5451648.png"}]},X={"Mercado Pago":[{name:"Recebimento na hora",fee:4.99,release_days:0},{name:"Recebimento em 14 dias",fee:3.79,release_days:14},{name:"Recebimento em 30 dias",fee:3.03,release_days:30}],PagSeguro:[{name:"Recebimento na hora",fee:4.99,release_days:0},{name:"Recebimento em 14 dias",fee:3.89,release_days:14},{name:"Recebimento em 30 dias",fee:3.19,release_days:30}],PicPay:[{name:"Padrão",fee:3.99,release_days:30}],PayPal:[{name:"Padrão",fee:4.79,release_days:1}],SumUp:[{name:"Recebimento em 1 dia útil",fee:4.6,release_days:1},{name:"Recebimento em 30 dias",fee:3.6,release_days:30}],Stone:[{name:"Recebimento imediato",fee:5.49,release_days:0},{name:"Recebimento em 30 dias",fee:3.89,release_days:30}],Stripe:[{name:"Padrão",fee:4.9,release_days:7}],Asaas:[{name:"Recebimento parcelado",fee:4,release_days:30}],Gerencianet:[{name:"Padrão",fee:3.89,release_days:2}],"Pagar.me":[{name:"Padrão",fee:3.79,release_days:30}],Cielo:[{name:"Padrão",fee:3.29,release_days:30}],Rede:[{name:"Padrão",fee:3.09,release_days:30}],GetNet:[{name:"Padrão",fee:3.19,release_days:30}]},Ga=({isOpen:a,onClose:n,walletData:x})=>{const{addWallet:r,updateWallet:h}=ae(),{toast:o}=fe(),[d,A]=p.useState(""),[N,D]=p.useState("bank"),[f,T]=p.useState(""),[s,u]=p.useState(""),[w,C]=p.useState(!1),[E,R]=p.useState({fee:"",release_days:""}),[P,O]=p.useState(!1),[I,k]=p.useState("custom");p.useEffect(()=>{x?(A(x.name),D(x.type),T(x.icon_url),u(x.initial_balance||""),C(x.is_gateway||!1),R(x.gateway_config||{fee:"",release_days:""})):(A(""),D("bank"),T(Q.bank[0]?.url||""),u(""),C(!1),R({fee:"",release_days:""})),k("custom")},[x,a]),p.useEffect(()=>{if(a&&!x){const i=Q[N]?.[0]?.url||"";T(i)}},[N,a,x]),p.useEffect(()=>{if(I&&I!=="custom"){const[i,_]=I.split("_"),v=X[i]?.[_];v&&R({fee:v.fee,release_days:v.release_days})}},[I]);const S=async i=>{i.preventDefault(),O(!0);const _={name:d,type:N,icon_url:f,initial_balance:parseFloat(s)||0,is_gateway:w,gateway_config:w?{fee:parseFloat(E.fee)||0,release_days:parseInt(E.release_days,10)||0}:null};try{x?(await h(x.id,_),o({title:"Carteira atualizada!",description:"As informações da carteira foram salvas."})):(await r(_),o({title:"Carteira criada!",description:"Sua nova carteira está pronta para uso."})),n()}catch(v){o({title:"Erro ao salvar",description:v.message,variant:"destructive"})}finally{O(!1)}},W=X[Object.keys(X).find(i=>d.toLowerCase().includes(i.toLowerCase()))]||[];return e.jsx(na,{open:a,onOpenChange:n,children:e.jsxs(oa,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(la,{children:[e.jsx(ca,{children:x?"Editar Carteira":"Nova Carteira"}),e.jsx(da,{children:x?"Atualize as informações da sua carteira.":"Crie uma nova carteira para organizar suas finanças."})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-name",children:"Nome da Carteira"}),e.jsx(J,{id:"wallet-name",value:d,onChange:i=>A(i.target.value),placeholder:"Ex: Conta Principal",required:!0})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-type",children:"Tipo"}),e.jsxs(Z,{value:N,onValueChange:D,children:[e.jsx(K,{children:e.jsx(F,{placeholder:"Selecione o tipo"})}),e.jsxs(ee,{children:[e.jsx($,{value:"bank",children:"Banco"}),e.jsx($,{value:"gateway",children:"Gateway de Pagamento"}),e.jsx($,{value:"cash",children:"Dinheiro (Caixa Físico)"})]})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-icon",children:"Ícone"}),e.jsxs(Z,{value:f,onValueChange:T,children:[e.jsx(K,{children:e.jsx(F,{children:f?e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:f,alt:"ícone selecionado",className:"w-5 h-5 mr-2 object-contain"}),e.jsx("span",{children:Q[N]?.find(i=>i.url===f)?.name||"Ícone"})]}):"Selecione um ícone"})}),e.jsx(ee,{className:"max-h-60",children:Q[N]?.map(i=>e.jsx($,{value:i.url,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:i.url,alt:i.name,className:"w-5 h-5 mr-2 object-contain"}),e.jsx("span",{children:i.name})]})},i.name))})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"initial-balance",children:"Saldo Inicial (Opcional)"}),e.jsx(J,{id:"initial-balance",type:"number",step:"0.01",value:s,onChange:i=>u(i.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(ia,{id:"is-gateway",checked:w,onCheckedChange:C}),e.jsx(Y,{htmlFor:"is-gateway",className:"font-medium",children:"É um Gateway de Pagamento?"})]}),w&&e.jsxs("div",{className:"p-4 border rounded-lg space-y-4 bg-accent/50",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Configuração do Gateway"}),W.length>0&&e.jsxs("div",{children:[e.jsxs(Y,{htmlFor:"gateway-suggestion",children:["Sugestões para ",Object.keys(X).find(i=>d.toLowerCase().includes(i.toLowerCase()))]}),e.jsxs(Z,{value:I,onValueChange:k,children:[e.jsx(K,{children:e.jsx(F,{placeholder:"Usar sugestão..."})}),e.jsxs(ee,{children:[e.jsx($,{value:"custom",children:"Personalizado"}),W.map((i,_)=>e.jsxs($,{value:`${d}_${_}`,children:[i.name," (",i.fee,"% em ",i.release_days,"d)"]},`${d}_${_}`))]})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"gateway-fee",children:"Taxa (%)"}),e.jsx(J,{id:"gateway-fee",type:"number",step:"0.01",value:E.fee,onChange:i=>R(_=>({..._,fee:i.target.value})),placeholder:"Ex: 4.99",required:!0})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"gateway-release",children:"Prazo de Liberação (dias)"}),e.jsx(J,{id:"gateway-release",type:"number",step:"1",value:E.release_days,onChange:i=>R(_=>({..._,release_days:i.target.value})),placeholder:"Ex: 14",required:!0})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-start",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"}),e.jsx("span",{children:"Ao usar esta carteira em um lançamento, a taxa será descontada e o valor líquido agendado para a data de liberação."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(L,{type:"button",variant:"ghost",onClick:n,disabled:P,children:"Cancelar"}),e.jsx(L,{type:"submit",disabled:P,children:P?"Salvando...":"Salvar"})]})]})]})})},Va=()=>{const{wallets:a,getWalletBalance:n,deleteWallet:x}=ae(),[r,h]=p.useState(!1),[o,d]=p.useState(null),[A,N]=p.useState(null),{toast:D}=fe(),f=()=>{d(null),h(!0)},T=u=>{d(u),h(!0)},s=async()=>{if(A)try{await x(A.id),D({title:"Carteira removida!",description:`A carteira "${A.name}" foi removida com sucesso.`})}catch(u){D({title:"Erro ao remover",description:u.message,variant:"destructive"})}finally{N(null)}};return e.jsxs(e.Fragment,{children:[e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Minhas Carteiras"}),e.jsxs(L,{onClick:f,children:[e.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Nova Carteira"]})]}),a.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ma,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),e.jsx("p",{children:"Nenhuma carteira encontrada."}),e.jsx("p",{className:"text-sm",children:"Crie sua primeira carteira para organizar suas finanças."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(Ae,{children:a.map(u=>e.jsx(G.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:260,damping:20},children:e.jsxs(ua,{className:"h-full group relative",children:[e.jsxs(xa,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(pa,{className:"text-sm font-medium flex items-center",children:[u.icon_url?e.jsx("img",{src:u.icon_url,alt:u.name,className:"w-5 h-5 mr-2 object-contain"}):e.jsx(Da,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"truncate",title:u.name,children:u.name})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>T(u),children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>N(u),children:e.jsx(Le,{className:"w-4 h-4"})})]})]}),e.jsxs(ha,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ga(n(u.id))}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:u.type})]})]})},u.id))})})]}),e.jsx(Ae,{children:r&&e.jsx(Ga,{isOpen:r,onClose:()=>h(!1),walletData:o})}),e.jsx(Be,{open:!!A,onOpenChange:u=>!u&&N(null),children:e.jsxs(Oe,{children:[e.jsxs(Ie,{children:[e.jsx(Me,{children:"Confirmar Exclusão"}),e.jsxs(ze,{children:['Tem certeza que deseja excluir a carteira "',A?.name,'"? Os lançamentos associados a ela não serão excluídos, mas perderão o vínculo.']})]}),e.jsxs(Ge,{children:[e.jsx(Ve,{onClick:()=>N(null),children:"Cancelar"}),e.jsx(Ye,{onClick:s,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},ls=({initialFilter:a,isMobile:n})=>{const{financialSummary:x,summaryPeriod:r,setSummaryPeriod:h,filteredTransactions:o,getFilteredTransactionsByListType:d,overdueTransactions:A,defaultDebtorTransactions:N,filterType:D,setFilterType:f,filterPeriod:T,setFilterPeriod:s,pastMonthsSummaryData:u,setShowPaymentsToReceive:w,pendingToReceiveWorkflowCards:C,handleDeleteTransaction:E,searchTerm:R,setSearchTerm:P}=Ma(a),{openModal:O}=fa(),{isMobile:I}=ya();p.useEffect(()=>{a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?(S("pagar"),f("SAIDA"),s("all"),w(!1)):a.type==="entrada"&&a.status==="pendente"?(S("receber"),w(!0),f("ALL"),s("all")):a.type==="entrada"&&a.status==="pago"?(S("geral"),w(!1),f("ENTRADA"),s("all")):a.type==="saida"&&a.status==="pago"?(S("geral"),w(!1),f("SAIDA"),s("all")):(S("geral"),f(a.type?.toUpperCase()||"ALL"),s(a.period||"all"),w(!1)):(!a||Object.keys(a).length===0)&&(S("geral"),w(!1),f("ALL"),s("all"))},[a,f,s,w]);const[k,S]=p.useState("geral"),W=v=>{w(!1),O("financial",{type:v,transaction:null})},i=v=>{w(!1),O("financial",{type:v.tipo,transaction:v})},_=v=>{S(v),v==="geral"?(w(!1),f("ALL"),s("all")):v==="pagar"?(w(!1),f("SAIDA"),s("all")):v==="receber"?(w(!0),f("ALL"),s("all")):v==="atrasadas"?(w(!1),f("ALL"),s("all")):v==="inadimplentes"&&(w(!1),f("ENTRADA"),s("all"))};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs(G.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:I?"hidden":"",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground titulo-gradiente",children:"Gestão Financeira"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:"Controle suas receitas, despesas e carteiras."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto",children:[e.jsxs(L,{onClick:()=>W("entrada"),variant:"success",className:"text-white shadow-lg w-full sm:w-auto",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Nova Entrada"}),e.jsx("span",{className:"sm:hidden",children:"Entrada"})]}),e.jsxs(L,{onClick:()=>W("saida"),className:"bg-red-500 hover:bg-red-600 text-white shadow-lg w-full sm:w-auto",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Nova Saída"}),e.jsx("span",{className:"sm:hidden",children:"Saída"})]})]})]}),e.jsx(Ra,{summary:x,summaryPeriod:r,onSummaryPeriodChange:h}),e.jsx(Va,{}),e.jsx(Ia,{data:u}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mb-4",children:[e.jsxs(L,{variant:k==="geral"?"default":"outline",onClick:()=>_("geral"),className:`${k==="geral"?"bg-blue-600 hover:bg-blue-700 text-white":"border-border text-muted-foreground hover:bg-accent"} w-full sm:w-auto`,children:[e.jsx(Ea,{className:"w-4 h-4 mr-2"})," Lançamentos Gerais"]}),e.jsxs(L,{variant:k==="pagar"?"default":"outline",onClick:()=>_("pagar"),className:`${k==="pagar"?"bg-red-500 hover:bg-red-600 text-white":"border-border text-muted-foreground hover:bg-accent"} w-full sm:w-auto`,children:[e.jsx(be,{className:"w-4 h-4 mr-2"})," Contas a Pagar"]}),e.jsxs(L,{variant:k==="receber"?"default":"outline",onClick:()=>_("receber"),className:`${k==="receber"?"bg-green-500 hover:bg-green-600 text-white":"border-border text-muted-foreground hover:bg-accent"} w-full sm:w-auto`,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Contas a Receber"]}),e.jsxs(L,{variant:k==="atrasadas"?"default":"outline",onClick:()=>_("atrasadas"),className:`${k==="atrasadas"?"bg-orange-500 hover:bg-orange-600 text-white":"border-border text-muted-foreground hover:bg-accent"} w-full sm:w-auto`,children:[e.jsx(ba,{className:"w-4 h-4 mr-2"})," Contas Atrasadas"]}),e.jsxs(L,{variant:k==="inadimplentes"?"default":"outline",onClick:()=>_("inadimplentes"),className:`${k==="inadimplentes"?"bg-red-700 hover:bg-red-800 text-white":"border-border text-muted-foreground hover:bg-accent"} w-full sm:w-auto`,children:[e.jsx(Pa,{className:"w-4 h-4 mr-2"})," Inadimplentes"]})]}),k!=="receber"&&e.jsxs("div",{className:"bg-card rounded-xl p-4 sm:p-6 shadow-lg border border-border",children:[e.jsxs("div",{className:"flex-1 relative mb-4",children:[e.jsx(Ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(J,{type:"text",placeholder:"Buscar por descrição ou valor...",value:R,onChange:v=>P(v.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsx(Ba,{filterType:D,setFilterType:f,filterPeriod:T,setFilterPeriod:s})]}),k==="receber"?e.jsx(za,{cards:C}):e.jsx(Oa,{transactions:k==="pagar"?d:k==="atrasadas"?A:k==="inadimplentes"?N:o,onEdit:i,onDelete:E,isMobile:I})]})};export{ls as default};
