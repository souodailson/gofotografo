import{a7 as P,f as S,aS as T,u as D,r as f,b as _,j as e,m as h,B as l,ai as L,aC as g,I,ab as W,z,F as B,G,O as j,E as $,X as q,M as J,aq as R}from"./index-DHBNVHsv.js";import{u as U}from"./useCardHoverEffect-Bxobbnpg.js";import{L as H}from"./link-CdWJa35W.js";import{S as O}from"./search-DbNcPKSo.js";import{F as V}from"./filter-CVlwnKjx.js";import{P as X}from"./pen-square-BkMXMyrY.js";import{M as K}from"./message-square-ZkAFTajl.js";const Q=({client:a,onViewDetails:n,onEdit:m,onDelete:d,onWhatsApp:x})=>{const c=U(),o=t=>{if(!t)return"?";const r=t.split(" ");return r.length===1?r[0].charAt(0).toUpperCase():`${r[0].charAt(0)}${r[r.length-1].charAt(0)}`.toUpperCase()};return e.jsxs(h.div,{ref:c,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl p-4 sm:p-6 shadow-lg border border-border card-hover-effect flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer",onClick:()=>n(a),children:[e.jsxs(z,{className:"w-10 h-10 sm:w-12 sm:h-12 border-2 border-primary/20",children:[e.jsx(B,{src:a.profile_photo_url,alt:a.name}),e.jsx(G,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:o(a.name)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground text-base sm:text-lg hover:text-primary transition-colors",children:a.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsx(j,{variant:"secondary",children:a.client_type}),a.tags?.map(t=>e.jsx(j,{variant:t==="Novo"?"default":"outline",className:t==="Novo"?"bg-primary text-primary-foreground":"",children:t},t))]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>n(a),className:"w-8 h-8 text-muted-foreground hover:text-primary",title:"Ver Detalhes",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>m(a),className:"w-8 h-8 text-muted-foreground hover:text-primary",title:"Edição Rápida",children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>d(a.id),className:"w-8 h-8 text-destructive/70 hover:text-destructive",title:"Excluir Cliente",children:e.jsx(q,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs sm:text-sm mb-4 flex-grow cursor-pointer",onClick:()=>n(a),children:[a.email&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(J,{className:"w-3.5 h-3.5 mr-2"}),a.email]}),a.phone&&e.jsxs("div",{className:"flex items-center text-muted-foreground",children:[e.jsx(R,{className:"w-3.5 h-3.5 mr-2"}),a.phone]})]}),e.jsx("div",{className:"mt-auto pt-3 border-t border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.status==="Ativo"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:a.status}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>x(a.phone),className:"text-green-600 border-green-600 hover:bg-green-50 dark:text-customGreen dark:border-customGreen dark:hover:bg-customGreen/10",title:"Enviar WhatsApp",disabled:!a.phone,children:[e.jsx(K,{className:"w-3.5 h-3.5 sm:mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"WhatsApp"})]})]})})]},a.id)},Y="w-full md:w-auto px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-background text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary focus:border-primary",le=()=>{const{clients:a,deleteClient:n,isFeatureEnabled:m}=P(),{toast:d}=S(),{openModal:x}=T(),c=D(),[o,t]=f.useState(""),[r,b]=f.useState("all"),{isMobile:v}=_(),u=a.filter(s=>{const i=s.name?.toLowerCase().includes(o.toLowerCase()),k=s.email?.toLowerCase().includes(o.toLowerCase()),A=s.cpf?.includes(o),E=s.cnpj?.includes(o),F=i||k||A||E,M=r==="all"||s.client_type===r;return F&&M}).sort((s,i)=>new Date(i.created_at)-new Date(s.created_at)),N=s=>{x("client",{clientId:s.id})},w=s=>{n(s),d({title:"Cliente removido",description:"Cliente foi removido com sucesso!"})},p=()=>{x("client",{})},y=s=>{if(!s){d({title:"WhatsApp",description:"Número de telefone não disponível.",variant:"destructive"});return}const i=s.replace(/\D/g,"");window.open(`https://wa.me/${i.startsWith("55")?i:"55"+i}`,"_blank")},C=s=>{s&&s.id?c(`/clients/${s.id}`):d({title:"Erro",description:"ID do cliente não encontrado.",variant:"destructive"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:v?"hidden":"",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground titulo-gradiente",children:"Clientes"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:"Gerencie seus clientes e contatos"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[m("formularios_captacao")&&e.jsxs(l,{onClick:()=>c("/forms"),variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Formulário de Captação"]}),m("contratos")&&e.jsxs(l,{onClick:()=>c("/contracts"),variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Contratos"]}),e.jsxs(l,{onClick:p,className:"btn-custom-gradient text-white shadow-lg w-full sm:w-auto",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Novo Cliente"}),e.jsx("span",{className:"sm:hidden",children:"Cliente"})]})]})]}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl p-4 sm:p-6 shadow-lg border border-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(I,{type:"text",placeholder:"Buscar por nome, email, CPF/CNPJ...",value:o,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-muted-foreground hidden sm:block"}),e.jsxs("select",{value:r,onChange:s=>b(s.target.value),className:Y,children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"Pessoa Física",children:"Pessoa Física"}),e.jsx("option",{value:"Pessoa Jurídica",children:"Pessoa Jurídica"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(s=>e.jsx(Q,{client:s,onViewDetails:C,onEdit:N,onDelete:w,onWhatsApp:y},s.id))}),u.length===0&&e.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx(W,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-md sm:text-lg font-medium text-foreground mb-2",children:"Nenhum cliente encontrado"}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm sm:text-base",children:o?"Tente ajustar os filtros de busca":"Comece adicionando seu primeiro cliente"}),e.jsxs(l,{onClick:p,className:"btn-custom-gradient text-white",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Adicionar Cliente"]})]})]})};export{le as default};
