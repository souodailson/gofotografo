import{c as la,s as I,h as ie,f as Te,r as N,j as e,m as D,at as K,U as le,t as q,v as V,w as Y,y as M,M as me,I as A,L as Ee,B as w,A as be,ab as xe,aq as Ne,ah as Pe,a8 as te,O as k,e as na,Y as $e,Z as Le,_ as Je,$ as ze,aD as he,z as Z,F as ee,G as ae,E as _e,C as ne,aK as we,D as se,a1 as B,a2 as O,a3 as U,a4 as G,a5 as T,H as oe,cw as oa,aF as Ve,Q as Ae,T as Fe,V as De,W as de,aY as ca,cx as da,o as ve,aU as ma,aC as ye,X as Be,ac as xa,a as ha}from"./index-DHBNVHsv.js";import{T as ua,a as pa,b as Re,c as Ie}from"./tabs-DSqzsg_3.js";import{M as re}from"./map-pin-CSRkdryr.js";import{S as ke}from"./star-hcmGvLZa.js";import{H as X}from"./heart-CGSoWq7V.js";import{f as ce}from"./formatDistanceToNow-B9rgzkoT.js";import{S as qe}from"./search-DbNcPKSo.js";import{P as je}from"./plus-circle-BRMk-46g.js";import{M as ue}from"./message-circle-JQk8XoMW.js";import{B as ga}from"./bell-CAtwB1qs.js";import{F as fa}from"./filter-CVlwnKjx.js";import{A as pe}from"./alert-circle-DF9xjBLi.js";import{E as Oe}from"./external-link-DSa138R5.js";import{P as Ue}from"./pen-square-BkMXMyrY.js";import{I as ja}from"./instagram-DpjIItDL.js";import{G as ba}from"./globe-CfJKnq5Y.js";import"./constructNow-DKKJTFER.js";import"./endOfDay-B9Vn3X1G.js";import"./endOfMonth-FRBqcOZp.js";const va=la("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ya=async s=>{const{data:r,error:a}=await I.from("freela_profiles").insert([s]).select().single();if(a)throw a;return r},Na=async s=>{const{data:r,error:a}=await I.from("freela_profiles").select("*").eq("user_id",s).single();if(a&&a.code!=="PGRST116")throw a;return r},_a=async(s,r)=>{const{data:a,error:t}=await I.from("freela_profiles").update(r).eq("id",s).select().single();if(t)throw t;return a},wa=async s=>{const{data:r,error:a}=await I.from("freela_portfolio").insert([s]).select().single();if(a)throw a;return r},ka=async s=>{const{data:r,error:a}=await I.from("freela_portfolio").select("*").eq("profile_id",s).order("order_position",{ascending:!0});if(a)throw a;return r},Ca=async(s,r)=>{const{data:a,error:t}=await I.from("freela_portfolio").update(r).eq("id",s).select().single();if(t)throw t;return a},Sa=async s=>{const{error:r}=await I.from("freela_portfolio").delete().eq("id",s);if(r)throw r},Ea=async s=>{const{data:r,error:a}=await I.from("freela_jobs").insert([s]).select(`
      *,
      posted_by_profile:freela_profiles!posted_by(id, name, profile_image_url, rating, verified)
    `).single();if(a)throw a;return r},Ge=async(s={})=>{let r=I.from("freela_jobs").select(`
      *,
      posted_by_profile:freela_profiles!posted_by(id, name, profile_image_url, rating, verified)
    `).eq("status","open").order("created_at",{ascending:!1});s.category&&(r=r.eq("category",s.category)),s.region&&(r=r.eq("region",s.region)),s.remote_work!==void 0&&(r=r.eq("remote_work",s.remote_work)),s.date_from&&(r=r.gte("job_date",s.date_from)),s.date_to&&(r=r.lte("job_date",s.date_to)),s.budget_min&&(r=r.gte("budget_min",s.budget_min)),s.budget_max&&(r=r.lte("budget_max",s.budget_max)),s.search&&(r=r.or(`title.ilike.%${s.search}%,description.ilike.%${s.search}%`));const{data:a,error:t}=await r;if(t)throw t;return a},Pa=async(s,r)=>{const{data:a,error:t}=await I.from("freela_jobs").update(r).eq("id",s).select().single();if(t)throw t;return a},He=async s=>{const{error:r}=await I.from("freela_jobs").delete().eq("id",s);if(r)throw r},Aa=async s=>{const{data:r,error:a}=await I.from("freela_applications").insert([s]).select(`
      *,
      freelancer:freela_profiles!freelancer_id(id, name, profile_image_url, rating, verified),
      job:freela_jobs!job_id(id, title, budget_min, budget_max)
    `).single();if(a)throw a;return r},Fa=async s=>{const{data:r,error:a}=await I.from("freela_applications").select(`
      *,
      freelancer:freela_profiles!freelancer_id(id, name, profile_image_url, rating, verified, bio)
    `).eq("job_id",s).order("created_at",{ascending:!1});if(a)throw a;return r},Da=async s=>{const{data:r,error:a}=await I.from("freela_applications").select(`
      *,
      job:freela_jobs!job_id(id, title, location, job_date, budget_min, budget_max, status)
    `).eq("freelancer_id",s).order("created_at",{ascending:!1});if(a)throw a;return r},Ye=async(s,r)=>{const{data:a,error:t}=await I.from("freela_applications").update(r).eq("id",s).select().single();if(t)throw t;return a},Ra=async s=>{const{data:r,error:a}=await I.from("freela_messages").insert([s]).select(`
      *,
      sender:freela_profiles!sender_id(id, name, profile_image_url),
      receiver:freela_profiles!receiver_id(id, name, profile_image_url)
    `).single();if(a)throw a;return r},Ia=async s=>{const{data:r,error:a}=await I.from("freela_messages").select(`
      conversation_id,
      job_id,
      sender:freela_profiles!sender_id(id, name, profile_image_url),
      receiver:freela_profiles!receiver_id(id, name, profile_image_url),
      message,
      created_at,
      read_at
    `).or(`sender_id.eq.${s},receiver_id.eq.${s}`).order("created_at",{ascending:!1});if(a)throw a;const t={};return r.forEach(_=>{(!t[_.conversation_id]||new Date(_.created_at)>new Date(t[_.conversation_id].created_at))&&(t[_.conversation_id]=_)}),Object.values(t)},qa=async(s,r)=>{const{data:a,error:t}=await I.from("freela_favorites").insert([{user_id:s,job_id:r}]).select().single();if(t)throw t;return a},Ma=async(s,r)=>{const{error:a}=await I.from("freela_favorites").delete().eq("user_id",s).eq("job_id",r);if(a)throw a},Ta=async s=>{const{data:r,error:a}=await I.from("freela_favorites").select(`
      *,
      job:freela_jobs!job_id(
        *,
        posted_by_profile:freela_profiles!posted_by(id, name, profile_image_url, rating, verified)
      )
    `).eq("user_id",s).order("created_at",{ascending:!1});if(a)throw a;return r},$a=async(s,r)=>{const{data:a,error:t}=await I.from("freela_favorites").select("id").eq("user_id",s).eq("job_id",r).single();if(t&&t.code!=="PGRST116")throw t;return!!a},La=async(s,r="freela-images",a="")=>{const t=s.name.split(".").pop(),_=`${a}${Date.now()}-${Math.random().toString(36).substring(2)}.${t}`,{data:j,error:b}=await I.storage.from(r).upload(_,s);if(b)throw b;const{data:{publicUrl:u}}=I.storage.from(r).getPublicUrl(_);return u},Ja=["fotografia","filmmaker","storymaker","editor_video","editor_foto","motion_design","designer_grafico","social_media","drone","livestream","producao","assistente"],za=["Acre (AC)","Alagoas (AL)","Amapá (AP)","Amazonas (AM)","Bahia (BA)","Ceará (CE)","Distrito Federal (DF)","Espírito Santo (ES)","Goiás (GO)","Maranhão (MA)","Mato Grosso (MT)","Mato Grosso do Sul (MS)","Minas Gerais (MG)","Pará (PA)","Paraíba (PB)","Paraná (PR)","Pernambuco (PE)","Piauí (PI)","Rio de Janeiro (RJ)","Rio Grande do Norte (RN)","Rio Grande do Sul (RS)","Rondônia (RO)","Roraima (RR)","Santa Catarina (SC)","São Paulo (SP)","Sergipe (SE)","Tocantins (TO)","Nacional","Internacional"],Va=[{value:"hourly",label:"Por Hora"},{value:"daily",label:"Diária"},{value:"project",label:"Projeto Completo"}],Ba=[{value:"low",label:"Baixa",color:"bg-gray-500"},{value:"normal",label:"Normal",color:"bg-blue-500"},{value:"high",label:"Alta",color:"bg-orange-500"},{value:"urgent",label:"Urgente",color:"bg-red-500"}],Qe=N.createContext(),H=()=>{const s=N.useContext(Qe);if(!s)throw new Error("useFreela must be used within a FreelaProvider");return s},Oa=({children:s})=>{const{user:r}=ie(),{toast:a}=Te(),[t,_]=N.useState(null),[j,b]=N.useState([]),[u,i]=N.useState([]),[v,C]=N.useState([]),[n,f]=N.useState([]),[c,F]=N.useState([]),[g,R]=N.useState([]),[p,P]=N.useState(!1),[$,m]=N.useState(!1),d=N.useCallback(async()=>{if(r){m(!0);try{const h=await Na(r.id);if(_(h),h){const o=await ka(h.id);R(o)}}catch(h){console.error("Erro ao carregar perfil:",h)}finally{m(!1)}}},[r]),y=async h=>{if(!r)throw new Error("Usuário não autenticado");P(!0);try{const o=await ya({...h,user_id:r.id,email:r.email});return _(o),a({title:"Perfil criado!",description:"Seu perfil FREELA foi criado com sucesso."}),o}catch(o){throw a({title:"Erro ao criar perfil",description:o.message,variant:"destructive"}),o}finally{P(!1)}},l=async h=>{if(!t)throw new Error("Perfil não encontrado");P(!0);try{const o=await _a(t.id,h);return _(o),a({title:"Perfil atualizado!",description:"Suas alterações foram salvas."}),o}catch(o){throw a({title:"Erro ao atualizar perfil",description:o.message,variant:"destructive"}),o}finally{P(!1)}},J=async h=>{if(!t)throw new Error("Perfil não encontrado");try{const o=await wa({...h,profile_id:t.id});return R(E=>[...E,o]),a({title:"Item adicionado!",description:"Novo item adicionado ao portfólio."}),o}catch(o){throw a({title:"Erro ao adicionar item",description:o.message,variant:"destructive"}),o}},L=async(h,o)=>{try{const E=await Ca(h,o);return R(W=>W.map(Q=>Q.id===h?E:Q)),a({title:"Item atualizado!",description:"Item do portfólio atualizado."}),E}catch(E){throw a({title:"Erro ao atualizar item",description:E.message,variant:"destructive"}),E}},x=async h=>{try{await Sa(h),R(o=>o.filter(E=>E.id!==h)),a({title:"Item removido!",description:"Item removido do portfólio."})}catch(o){throw a({title:"Erro ao remover item",description:o.message,variant:"destructive"}),o}},S=async(h={})=>{P(!0);try{const o=await Ge(h);return b(o),o}catch(o){console.error("Erro ao carregar trabalhos:",o),a({title:"Erro ao carregar trabalhos",description:o.message,variant:"destructive"})}finally{P(!1)}},z=async h=>{if(!t)throw new Error("Perfil não encontrado");P(!0);try{const o=await Ea({...h,posted_by:t.id});return b(E=>[o,...E]),a({title:"Trabalho publicado!",description:"Seu trabalho foi publicado com sucesso."}),o}catch(o){throw a({title:"Erro ao publicar trabalho",description:o.message,variant:"destructive"}),o}finally{P(!1)}},We=async(h,o)=>{try{const E=await Pa(h,o);return b(W=>W.map(Q=>Q.id===h?E:Q)),a({title:"Trabalho atualizado!",description:"Alterações salvas com sucesso."}),E}catch(E){throw a({title:"Erro ao atualizar trabalho",description:E.message,variant:"destructive"}),E}},Xe=async h=>{try{await He(h),b(o=>o.filter(E=>E.id!==h)),a({title:"Trabalho removido!",description:"Trabalho removido com sucesso."})}catch(o){throw a({title:"Erro ao remover trabalho",description:o.message,variant:"destructive"}),o}},Se=async()=>{if(t)try{const h=await Da(t.id);return i(h),h}catch(h){console.error("Erro ao carregar candidaturas:",h)}},Ke=async h=>{if(!t)throw new Error("Perfil não encontrado");P(!0);try{const o=await Aa({...h,freelancer_id:t.id});return i(E=>[o,...E]),a({title:"Candidatura enviada!",description:"Sua candidatura foi enviada com sucesso."}),o}catch(o){throw a({title:"Erro ao enviar candidatura",description:o.message,variant:"destructive"}),o}finally{P(!1)}},Ze=async(h,o)=>{try{const E=await Ye(h,o);return i(W=>W.map(Q=>Q.id===h?E:Q)),E}catch(E){throw a({title:"Erro ao atualizar candidatura",description:E.message,variant:"destructive"}),E}},ge=async()=>{if(t)try{const h=await Ta(t.id);return f(h),h}catch(h){console.error("Erro ao carregar favoritos:",h)}},ea=async h=>{if(!t)throw new Error("Perfil não encontrado");try{const o=await $a(t.id,h);return o?(await Ma(t.id,h),f(E=>E.filter(W=>W.job_id!==h)),a({title:"Removido dos favoritos",description:"Trabalho removido dos favoritos."})):(await qa(t.id,h),await ge(),a({title:"Adicionado aos favoritos",description:"Trabalho adicionado aos favoritos."})),!o}catch(o){throw a({title:"Erro ao favoritar",description:o.message,variant:"destructive"}),o}},fe=async()=>{if(t)try{const h=await Ia(t.id);return C(h),h}catch(h){console.error("Erro ao carregar conversas:",h)}},aa=async h=>{if(!t)throw new Error("Perfil não encontrado");try{const o=await Ra({...h,sender_id:t.id});return await fe(),o}catch(o){throw a({title:"Erro ao enviar mensagem",description:o.message,variant:"destructive"}),o}},sa=async(h,o="profiles/")=>{try{return await La(h,"freela-images",o)}catch(E){throw a({title:"Erro ao fazer upload",description:E.message,variant:"destructive"}),E}},ra=h=>u.some(o=>o.job_id===h),ta=h=>n.some(o=>o.job_id===h);N.useEffect(()=>{r?d():(_(null),R([]),i([]),f([]),C([]),F([]))},[r,d]),N.useEffect(()=>{t&&(Se(),ge(),fe())},[t]);const ia={profile:t,jobs:j,applications:u,conversations:v,favorites:n,notifications:c,portfolio:g,loading:p,profileLoading:$,createProfile:y,updateProfile:l,loadProfile:d,addPortfolioItem:J,updatePortfolioItem:L,deletePortfolioItem:x,loadJobs:S,createJob:z,updateJob:We,deleteJob:Xe,loadApplications:Se,createApplication:Ke,updateApplication:Ze,loadFavorites:ge,toggleFavorite:ea,loadConversations:fe,sendMessage:aa,uploadImage:sa,checkIfApplied:ra,checkIfFavorite:ta,categories:Ja,regions:za,paymentTypes:Va,urgencyLevels:Ba};return e.jsx(Qe.Provider,{value:ia,children:s})},Ua=({onAuthSuccess:s})=>{const{signIn:r,signUp:a}=ie(),{toast:t}=Te(),[_,j]=N.useState(!1),[b,u]=N.useState({email:"",password:"",name:"",phone:""}),i=f=>{u({...b,[f.target.name]:f.target.value})},v=async f=>{f.preventDefault(),j(!0);try{await r(b.email,b.password),t({title:"Login realizado!",description:"Bem-vindo ao FREELA!"}),s()}catch(c){t({title:"Erro no login",description:c.message,variant:"destructive"})}finally{j(!1)}},C=async f=>{f.preventDefault(),j(!0);try{await a(b.email,b.password,{name:b.name,phone:b.phone}),t({title:"Conta criada!",description:"Verifique seu email para confirmar a conta."}),s()}catch(c){t({title:"Erro no cadastro",description:c.message,variant:"destructive"})}finally{j(!1)}},n=[{icon:K,title:"Encontre Freelancers",description:"Fotógrafos, filmmakers, editores e mais profissionais do audiovisual"},{icon:re,title:"Trabalhos por Região",description:"Encontre oportunidades próximas a você ou ofereça seus serviços"},{icon:le,title:"Rede de Profissionais",description:"Conecte-se com outros profissionais e expanda sua rede de contatos"},{icon:ke,title:"Sistema de Avaliações",description:"Construa sua reputação com avaliações de clientes satisfeitos"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-purple-900 dark:to-blue-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-3 rounded-full",children:e.jsx(K,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent ml-4",children:"FREELA"})]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-4",children:"Encontre freela para seus trabalhos em tempo real"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"ou encontre trabalhos próximos a você em tempo real"})]}),e.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsx(D.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.2},className:"space-y-8",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Por que escolher o FREELA?"}),e.jsx("div",{className:"grid gap-6",children:n.map((f,c)=>e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+c*.1},className:"flex items-start space-x-4 p-4 bg-white/50 dark:bg-gray-800/50 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-2 rounded-lg",children:e.jsx(f.icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white",children:f.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:f.description})]})]},c))})]})}),e.jsx(D.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsxs(q,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-2xl",children:[e.jsx(V,{className:"text-center",children:e.jsx(Y,{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Entre ou Cadastre-se"})}),e.jsx(M,{children:e.jsxs(ua,{defaultValue:"login",className:"w-full",children:[e.jsxs(pa,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(Re,{value:"login",children:"Entrar"}),e.jsx(Re,{value:"register",children:"Cadastrar"})]}),e.jsx(Ie,{value:"login",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"email",name:"email",placeholder:"Email",value:b.email,onChange:i,className:"pl-10",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"password",name:"password",placeholder:"Senha",value:b.password,onChange:i,className:"pl-10",required:!0})]}),e.jsx(w,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",disabled:_,children:_?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:["Entrar ",e.jsx(be,{className:"ml-2 w-4 h-4"})]})})]})}),e.jsx(Ie,{value:"register",children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"text",name:"name",placeholder:"Nome completo",value:b.name,onChange:i,className:"pl-10",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"email",name:"email",placeholder:"Email",value:b.email,onChange:i,className:"pl-10",required:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"tel",name:"phone",placeholder:"Telefone (opcional)",value:b.phone,onChange:i,className:"pl-10"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(A,{type:"password",name:"password",placeholder:"Senha",value:b.password,onChange:i,className:"pl-10",required:!0,minLength:6})]}),e.jsx(w,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",disabled:_,children:_?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:["Cadastrar ",e.jsx(be,{className:"ml-2 w-4 h-4"})]})})]})})]})})]})})]}),e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-16 text-center",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-3xl mx-auto",children:[e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:"1000+"}),e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Freelancers Ativos"})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"500+"}),e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Trabalhos Publicados"})]}),e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 p-6 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:"98%"}),e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Satisfação dos Clientes"})]})]})})]})})},Ga=()=>{const{user:s}=ie(),{createProfile:r,categories:a,regions:t,loading:_}=H(),[j,b]=N.useState(1),[u,i]=N.useState({name:s?.user_metadata?.name||"",phone:s?.user_metadata?.phone||"",bio:"",categories:[],regions:[],hourly_rate:"",daily_rate:"",project_rate:"",instagram_url:"",website_url:""}),v=p=>{i({...u,[p.target.name]:p.target.value})},C=p=>{i(P=>({...P,categories:P.categories.includes(p)?P.categories.filter($=>$!==p):[...P.categories,p]}))},n=p=>{i(P=>({...P,regions:P.regions.includes(p)?P.regions.filter($=>$!==p):[...P.regions,p]}))},f=()=>{j<4&&b(j+1)},c=()=>{j>1&&b(j-1)},F=async()=>{try{const p=Object.fromEntries(Object.entries(u).filter(([P,$])=>Array.isArray($)?$.length>0:$!==""));p.hourly_rate&&(p.hourly_rate=parseFloat(p.hourly_rate)),p.daily_rate&&(p.daily_rate=parseFloat(p.daily_rate)),p.project_rate&&(p.project_rate=parseFloat(p.project_rate)),await r(p)}catch(p){console.error("Erro ao criar perfil:",p)}},g={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"},R=()=>{switch(j){case 1:return u.name.trim()!==""&&u.bio.trim()!=="";case 2:return u.categories.length>0;case 3:return u.regions.length>0;case 4:return!0;default:return!1}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-purple-900 dark:to-blue-900 py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(D.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-3 rounded-full",children:e.jsx(K,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent ml-4",children:"FREELA"})]}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"Crie seu perfil profissional"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Vamos configurar seu perfil para que você possa começar a encontrar trabalhos"})]}),e.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:[1,2,3,4].map(p=>e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${j>=p?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-400"}`,children:j>p?e.jsx(Pe,{className:"w-4 h-4"}):p},p))}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 rounded-full transition-all duration-300",style:{width:`${j/4*100}%`}})})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(q,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-2xl",children:[e.jsx(V,{children:e.jsxs(Y,{className:"text-center text-gray-800 dark:text-white",children:[j===1&&"Informações Básicas",j===2&&"Suas Especialidades",j===3&&"Regiões de Atendimento",j===4&&"Valores e Links"]})}),e.jsxs(M,{className:"space-y-6",children:[j===1&&e.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Nome Completo *"}),e.jsx(A,{name:"name",value:u.name,onChange:v,placeholder:"Seu nome completo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Telefone"}),e.jsx(A,{name:"phone",value:u.phone,onChange:v,placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Biografia Profissional *"}),e.jsx(te,{name:"bio",value:u.bio,onChange:v,placeholder:"Conte um pouco sobre sua experiência e especialidades...",rows:4,required:!0})]})]}),j===2&&e.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-4 text-gray-700 dark:text-gray-300",children:"Selecione suas especialidades *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.map(p=>e.jsx(k,{variant:u.categories.includes(p)?"default":"outline",className:`cursor-pointer p-3 text-center justify-center transition-all hover:scale-105 ${u.categories.includes(p)?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>C(p),children:g[p]||p},p))})]})}),j===3&&e.jsx(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-4 text-gray-700 dark:text-gray-300",children:"Selecione as regiões que você atende *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:t.map(p=>e.jsx(k,{variant:u.regions.includes(p)?"default":"outline",className:`cursor-pointer p-2 text-center justify-center transition-all ${u.regions.includes(p)?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>n(p),children:p},p))})]})}),j===4&&e.jsxs(D.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Valor por Hora (R$)"}),e.jsx(A,{name:"hourly_rate",type:"number",value:u.hourly_rate,onChange:v,placeholder:"50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Valor Diária (R$)"}),e.jsx(A,{name:"daily_rate",type:"number",value:u.daily_rate,onChange:v,placeholder:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Valor Projeto (R$)"}),e.jsx(A,{name:"project_rate",type:"number",value:u.project_rate,onChange:v,placeholder:"1500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Instagram"}),e.jsx(A,{name:"instagram_url",value:u.instagram_url,onChange:v,placeholder:"https://instagram.com/seuperfil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Site/Portfolio"}),e.jsx(A,{name:"website_url",value:u.website_url,onChange:v,placeholder:"https://seusite.com"})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[e.jsxs(w,{variant:"outline",onClick:c,disabled:j===1,className:"flex items-center",children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),"Voltar"]}),j<4?e.jsxs(w,{onClick:f,disabled:!R(),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 flex items-center",children:["Próximo",e.jsx(be,{className:"w-4 h-4 ml-2"})]}):e.jsxs(w,{onClick:F,disabled:_,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 flex items-center",children:[_?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}):e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Finalizar"]})]})]})]})})]})})},Ce=({isOpen:s,onClose:r,job:a=null,readOnly:t=!1})=>{const{createJob:_,updateJob:j,loading:b,categories:u,regions:i,paymentTypes:v,urgencyLevels:C,toggleFavorite:n,checkIfFavorite:f}=H(),[c,F]=N.useState({title:"",description:"",category:"",location:"",region:"",job_date:"",job_time:"",duration_hours:"",budget_min:"",budget_max:"",payment_type:"project",urgency:"normal",requirements:"",equipment_provided:!1,remote_work:!1,contact_preference:"platform"});N.useEffect(()=>{F(a?{title:a.title||"",description:a.description||"",category:a.category||"",location:a.location||"",region:a.region||"",job_date:a.job_date||"",job_time:a.job_time||"",duration_hours:a.duration_hours||"",budget_min:a.budget_min||"",budget_max:a.budget_max||"",payment_type:a.payment_type||"project",urgency:a.urgency||"normal",requirements:a.requirements||"",equipment_provided:a.equipment_provided||!1,remote_work:a.remote_work||!1,contact_preference:a.contact_preference||"platform"}:{title:"",description:"",category:"",location:"",region:"",job_date:"",job_time:"",duration_hours:"",budget_min:"",budget_max:"",payment_type:"project",urgency:"normal",requirements:"",equipment_provided:!1,remote_work:!1,contact_preference:"platform"})},[a,s]);const g=d=>{const{name:y,value:l,type:J,checked:L}=d.target;F(x=>({...x,[y]:J==="checkbox"?L:l}))},R=(d,y)=>{F(l=>({...l,[d]:y}))},p=async d=>{d.preventDefault();try{const y={...c,duration_hours:c.duration_hours?parseInt(c.duration_hours):null,budget_min:c.budget_min?parseFloat(c.budget_min):null,budget_max:c.budget_max?parseFloat(c.budget_max):null};a?await j(a.id,y):await _(y),r()}catch(y){console.error("Erro ao salvar trabalho:",y)}},P=d=>d?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(d):"A combinar",$=d=>d?ce(new Date(d),{addSuffix:!0,locale:oe}):"",m={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"};return e.jsx($e,{open:s,onOpenChange:r,children:e.jsxs(Le,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Je,{children:e.jsxs(ze,{className:"flex items-center justify-between",children:[t?"Detalhes do Trabalho":a?"Editar Trabalho":"Publicar Novo Trabalho",e.jsx(w,{variant:"ghost",size:"sm",onClick:r,className:"h-6 w-6 p-0",children:e.jsx(he,{className:"h-4 w-4"})})]})}),t&&a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Z,{className:"w-12 h-12",children:[e.jsx(ee,{src:a.posted_by_profile?.profile_image_url}),e.jsx(ae,{children:a.posted_by_profile?.name?.split(" ").map(d=>d[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),a.posted_by_profile?.name]}),a.posted_by_profile?.verified&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Verificado"}),e.jsx("span",{children:$(a.created_at)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>n(a.id),className:f(a.id)?"text-red-500":"text-gray-500",children:e.jsx(X,{className:`w-4 h-4 ${f(a.id)?"fill-current":""}`})}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),a.views_count||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),a.applications_count||0," candidatos"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Descrição"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:a.description})]}),a.requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Requisitos"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:a.requirements})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Categoria"}),e.jsx(k,{variant:"outline",children:m[a.category]||a.category})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Urgência"}),e.jsx(k,{variant:"outline",className:`${C.find(d=>d.value===a.urgency)?.color} text-white`,children:C.find(d=>d.value===a.urgency)?.label})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Localização"}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),a.location," - ",a.region]}),a.remote_work&&e.jsx(k,{variant:"outline",className:"mt-2 bg-green-100 text-green-800",children:"Trabalho Remoto"})]}),a.job_date&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Data e Horário"}),e.jsxs("div",{className:"flex items-center text-gray-600 space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),new Date(a.job_date).toLocaleDateString("pt-BR")]}),a.job_time&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),a.job_time]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Orçamento"}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),a.budget_min&&a.budget_max?`${P(a.budget_min)} - ${P(a.budget_max)}`:P(a.budget_min||a.budget_max)]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.find(d=>d.value===a.payment_type)?.label})]}),a.duration_hours&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Duração Estimada"}),e.jsxs("p",{className:"text-gray-600",children:[a.duration_hours," horas"]})]}),e.jsx("div",{className:"space-y-2",children:a.equipment_provided&&e.jsx(k,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"Equipamento fornecido"})})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Informações de Contato"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.posted_by_profile?.email&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`mailto:${a.posted_by_profile.email}`,className:"hover:text-blue-600",children:a.posted_by_profile.email})]}),a.posted_by_profile?.phone&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`tel:${a.posted_by_profile.phone}`,className:"hover:text-blue-600",children:a.posted_by_profile.phone})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Preferência: ",a.contact_preference==="platform"?"Pela plataforma":a.contact_preference==="whatsapp"?"WhatsApp":"Email"]})]})]})]}):e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Título do Trabalho *"}),e.jsx(A,{name:"title",value:c.title,onChange:g,placeholder:"Ex: Fotógrafo para casamento em São Paulo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categoria *"}),e.jsxs(B,{onValueChange:d=>R("category",d),value:c.category,children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Selecione a categoria"})}),e.jsx(G,{children:u.map(d=>e.jsx(T,{value:d,children:m[d]||d},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Descrição *"}),e.jsx(te,{name:"description",value:c.description,onChange:g,placeholder:"Descreva detalhadamente o trabalho...",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Requisitos"}),e.jsx(te,{name:"requirements",value:c.requirements,onChange:g,placeholder:"Liste os requisitos necessários...",rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Local *"}),e.jsx(A,{name:"location",value:c.location,onChange:g,placeholder:"Ex: São Paulo, SP",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região *"}),e.jsxs(B,{onValueChange:d=>R("region",d),value:c.region,children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Selecione"})}),e.jsx(G,{children:i.map(d=>e.jsx(T,{value:d,children:d},d))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Data do Trabalho"}),e.jsx(A,{type:"date",name:"job_date",value:c.job_date,onChange:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Horário"}),e.jsx(A,{type:"time",name:"job_time",value:c.job_time,onChange:g})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Duração (horas)"}),e.jsx(A,{type:"number",name:"duration_hours",value:c.duration_hours,onChange:g,placeholder:"Ex: 8"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Orçamento Mín. (R$)"}),e.jsx(A,{type:"number",name:"budget_min",value:c.budget_min,onChange:g,placeholder:"500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Orçamento Máx. (R$)"}),e.jsx(A,{type:"number",name:"budget_max",value:c.budget_max,onChange:g,placeholder:"1500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Pagamento"}),e.jsxs(B,{onValueChange:d=>R("payment_type",d),value:c.payment_type,children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsx(G,{children:v.map(d=>e.jsx(T,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Urgência"}),e.jsxs(B,{onValueChange:d=>R("urgency",d),value:c.urgency,children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsx(G,{children:C.map(d=>e.jsx(T,{value:d.value,children:d.label},d.value))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"equipment_provided",checked:c.equipment_provided,onChange:g,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Equipamento será fornecido"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",name:"remote_work",checked:c.remote_work,onChange:g,className:"rounded"}),e.jsx("span",{className:"text-sm",children:"Trabalho pode ser remoto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Preferência de Contato"}),e.jsxs(B,{onValueChange:d=>R("contact_preference",d),value:c.contact_preference,children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsxs(G,{children:[e.jsx(T,{value:"platform",children:"Pela plataforma"}),e.jsx(T,{value:"whatsapp",children:"WhatsApp"}),e.jsx(T,{value:"email",children:"Email"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(w,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),e.jsxs(w,{type:"submit",disabled:b,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[b?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}):null,a?"Atualizar":"Publicar"," Trabalho"]})]})]})]})})},Ha=({activeTab:s,onTabChange:r})=>{const{profile:a,notifications:t,loadJobs:_}=H(),{logout:j}=ie(),[b,u]=N.useState(!1),[i,v]=N.useState(!1),[C,n]=N.useState(""),f=g=>{g.preventDefault(),C.trim()&&(_({search:C.trim()}),r("feed"))},c=t?.filter(g=>!g.read_at).length||0,F=[{id:"feed",label:"Feed",icon:oa},{id:"my-jobs",label:"Meus Trabalhos",icon:Ve},{id:"applications",label:"Candidaturas",icon:je},{id:"messages",label:"Mensagens",icon:ue},{id:"favorites",label:"Favoritos",icon:X},{id:"profile",label:"Perfil",icon:xe}];return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 z-50",children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(D.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-2 rounded-lg",children:e.jsx(K,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"FREELA"})]}),e.jsx("form",{onSubmit:f,className:"hidden md:flex flex-1 max-w-md mx-8",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(A,{type:"text",placeholder:"Buscar trabalhos...",value:C,onChange:g=>n(g.target.value),className:"pl-10 pr-4"})]})}),e.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:F.map(g=>e.jsxs(w,{variant:s===g.id?"default":"ghost",size:"sm",onClick:()=>r(g.id),className:`relative ${s===g.id?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[e.jsx(g.icon,{className:"w-4 h-4 mr-2"}),g.label,g.id==="messages"&&c>0&&e.jsx(k,{className:"absolute -top-2 -right-2 px-1 min-w-[20px] h-5 text-xs bg-red-500 text-white",children:c})]},g.id))}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(w,{onClick:()=>v(!0),className:"hidden md:flex bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white",size:"sm",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Publicar Trabalho"]}),e.jsxs(Ae,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(w,{variant:"ghost",size:"sm",className:"relative",children:[e.jsx(ga,{className:"w-5 h-5"}),c>0&&e.jsx(k,{className:"absolute -top-1 -right-1 px-1 min-w-[18px] h-4 text-xs bg-red-500 text-white",children:c})]})}),e.jsxs(De,{align:"end",className:"w-80",children:[e.jsx("div",{className:"p-3 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Notificações"})}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t?.slice(0,5).map(g=>e.jsx(de,{className:"p-3 border-b",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:g.title}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:g.message})]})},g.id))||e.jsx(de,{className:"p-3 text-center text-gray-500",children:"Nenhuma notificação"})})]})]}),e.jsxs(Ae,{children:[e.jsx(Fe,{asChild:!0,children:e.jsx(w,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs(Z,{className:"h-8 w-8",children:[e.jsx(ee,{src:a?.profile_image_url,alt:a?.name}),e.jsx(ae,{children:a?.name?.split(" ").map(g=>g[0]).join("").toUpperCase()||"U"})]})})}),e.jsxs(De,{align:"end",className:"w-56",children:[e.jsxs(de,{onClick:()=>r("profile"),children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Meu Perfil"]}),e.jsx(ca,{}),e.jsxs(de,{onClick:j,className:"text-red-600",children:[e.jsx(da,{className:"mr-2 h-4 w-4"}),"Sair"]})]})]}),e.jsx(w,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>u(!b),children:b?e.jsx(he,{className:"w-5 h-5"}):e.jsx(va,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"md:hidden pb-3",children:e.jsx("form",{onSubmit:f,children:e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(A,{type:"text",placeholder:"Buscar trabalhos...",value:C,onChange:g=>n(g.target.value),className:"pl-10 pr-4"})]})})})]}),b&&e.jsx(D.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"lg:hidden border-t border-gray-200 dark:border-gray-700 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 space-y-2",children:[e.jsxs(w,{onClick:()=>{v(!0),u(!1)},className:"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white justify-start",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Publicar Trabalho"]}),F.map(g=>e.jsxs(w,{variant:s===g.id?"default":"ghost",className:`w-full justify-start relative ${s===g.id?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":""}`,onClick:()=>{r(g.id),u(!1)},children:[e.jsx(g.icon,{className:"w-4 h-4 mr-2"}),g.label,g.id==="messages"&&c>0&&e.jsx(k,{className:"ml-auto bg-red-500 text-white",children:c})]},g.id))]})})]}),e.jsx(Ce,{isOpen:i,onClose:()=>v(!1)})]})},Ya=({isOpen:s,onClose:r,job:a})=>{const{createApplication:t,loading:_,profile:j,portfolio:b}=H(),[u,i]=N.useState({message:"",proposed_rate:"",estimated_hours:"",portfolio_samples:[]}),v=c=>{const{name:F,value:g}=c.target;i(R=>({...R,[F]:g}))},C=c=>{i(F=>({...F,portfolio_samples:F.portfolio_samples.includes(c)?F.portfolio_samples.filter(g=>g!==c):[...F.portfolio_samples,c]}))},n=async c=>{if(c.preventDefault(),!!a)try{const F={job_id:a.id,message:u.message,proposed_rate:u.proposed_rate?parseFloat(u.proposed_rate):null,estimated_hours:u.estimated_hours?parseInt(u.estimated_hours):null,portfolio_samples:u.portfolio_samples};await t(F),i({message:"",proposed_rate:"",estimated_hours:"",portfolio_samples:[]}),r()}catch(F){console.error("Erro ao enviar candidatura:",F)}},f=c=>c?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(c):"A combinar";return a?e.jsx($e,{open:s,onOpenChange:r,children:e.jsxs(Le,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Je,{children:e.jsxs(ze,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-500"}),"Candidatar-se ao Trabalho"]}),e.jsx(w,{variant:"ghost",size:"sm",onClick:r,className:"h-6 w-6 p-0",children:e.jsx(he,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:a.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:a.location}),e.jsx("span",{children:"•"}),e.jsx("span",{children:a.budget_min&&a.budget_max?`${f(a.budget_min)} - ${f(a.budget_max)}`:f(a.budget_min||a.budget_max)}),a.duration_hours&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[a.duration_hours,"h estimadas"]})]})]})]}),e.jsxs("div",{className:"border-b pb-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Seu Perfil"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Z,{children:[e.jsx(ee,{src:j?.profile_image_url}),e.jsx(ae,{children:j?.name?.split(" ").map(c=>c[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j?.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ke,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{children:j?.rating?.toFixed(1)||"0.0"}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[j?.total_jobs||0," trabalhos"]}),j?.verified&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(k,{variant:"secondary",className:"text-xs",children:"Verificado"})]})]})]})]})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mensagem de Apresentação *"}),e.jsx(te,{name:"message",value:u.message,onChange:v,placeholder:"Apresente-se e explique por que você é o profissional ideal para este trabalho...",rows:5,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Destaque sua experiência relevante e diferenciais"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor Proposto (R$)"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(A,{type:"number",name:"proposed_rate",value:u.proposed_rate,onChange:v,placeholder:"1500",className:"pl-10"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Seu valor para este trabalho"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tempo Estimado (horas)"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(A,{type:"number",name:"estimated_hours",value:u.estimated_hours,onChange:v,placeholder:"8",className:"pl-10"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Quantas horas você levaria"})]})]}),b&&b.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-3",children:[e.jsx(Ve,{className:"w-4 h-4 inline mr-2"}),"Amostras do Portfólio (opcional)"]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:b.map(c=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${u.portfolio_samples.includes(c.image_url)?"border-purple-500 ring-2 ring-purple-200":"border-gray-200 hover:border-gray-300"}`,onClick:()=>C(c.image_url),children:[e.jsx("img",{src:c.image_url,alt:c.title,className:"w-full h-20 object-cover"}),u.portfolio_samples.includes(c.image_url)&&e.jsx("div",{className:"absolute inset-0 bg-purple-500 bg-opacity-50 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"})})})]},c.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Selecione até 4 imagens que demonstrem sua experiência para este tipo de trabalho"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[e.jsx(w,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),e.jsxs(w,{type:"submit",disabled:_||!u.message.trim(),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[_?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}):e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Enviar Candidatura"]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Dicas para uma boa candidatura:"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"• Seja específico sobre sua experiência relevante"}),e.jsx("li",{children:"• Demonstre que entendeu os requisitos do trabalho"}),e.jsx("li",{children:"• Inclua amostras do seu portfólio relacionadas ao projeto"}),e.jsx("li",{children:"• Seja realista com prazos e valores"}),e.jsx("li",{children:"• Mantenha um tom profissional e cordial"})]})]})]})]})}):null},Me=()=>{const{jobs:s,loading:r,loadJobs:a,toggleFavorite:t,checkIfFavorite:_,checkIfApplied:j,categories:b,regions:u,urgencyLevels:i}=H(),[v,C]=N.useState({category:"",region:"",remote_work:"",urgency:""}),[n,f]=N.useState(null),[c,F]=N.useState(!1),[g,R]=N.useState(!1);N.useEffect(()=>{a(v)},[v,a]);const p=(l,J)=>{C(L=>({...L,[l]:J==="all"?"":J}))},P=l=>{f(l),F(!0)},$=l=>{f(l),R(!0)},m=l=>l?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l):"A combinar",d=l=>l?ce(new Date(l),{addSuffix:!0,locale:oe}):"",y={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"};return r?e.jsx("div",{className:"space-y-6",children:[1,2,3].map(l=>e.jsxs(q,{className:"animate-pulse",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})]},l))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(q,{children:[e.jsx(V,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx(fa,{className:"w-5 h-5 mr-2"}),"Filtros"]})}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Categoria"}),e.jsxs(B,{onValueChange:l=>p("category",l),children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Todas as categorias"})}),e.jsxs(G,{children:[e.jsx(T,{value:"all",children:"Todas as categorias"}),b.map(l=>e.jsx(T,{value:l,children:y[l]||l},l))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Região"}),e.jsxs(B,{onValueChange:l=>p("region",l),children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Todas as regiões"})}),e.jsxs(G,{children:[e.jsx(T,{value:"all",children:"Todas as regiões"}),u.map(l=>e.jsx(T,{value:l,children:l},l))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Trabalho Remoto"}),e.jsxs(B,{onValueChange:l=>p("remote_work",l),children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Todos"})}),e.jsxs(G,{children:[e.jsx(T,{value:"all",children:"Todos"}),e.jsx(T,{value:"true",children:"Apenas remotos"}),e.jsx(T,{value:"false",children:"Apenas presenciais"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Urgência"}),e.jsxs(B,{onValueChange:l=>p("urgency",l),children:[e.jsx(O,{children:e.jsx(U,{placeholder:"Todas"})}),e.jsxs(G,{children:[e.jsx(T,{value:"all",children:"Todas"}),i.map(l=>e.jsx(T,{value:l.value,children:l.label},l.value))]})]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(q,{children:e.jsxs(M,{className:"text-center py-12",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nenhum trabalho encontrado"}),e.jsx("p",{className:"text-gray-500",children:"Tente ajustar os filtros ou aguarde novos trabalhos serem publicados."})]})}):s.map((l,J)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:J*.1},children:e.jsxs(q,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Z,{children:[e.jsx(ee,{src:l.posted_by_profile?.profile_image_url}),e.jsx(ae,{children:l.posted_by_profile?.name?.split(" ").map(L=>L[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:l.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsx("span",{children:l.posted_by_profile?.name}),l.posted_by_profile?.verified&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Verificado"}),e.jsx("span",{children:d(l.created_at)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l.urgency!=="normal"&&e.jsx(k,{variant:"outline",className:`${i.find(L=>L.value===l.urgency)?.color} text-white`,children:i.find(L=>L.value===l.urgency)?.label}),l.remote_work&&e.jsx(k,{variant:"outline",className:"bg-green-100 text-green-800",children:"Remoto"})]})]})}),e.jsxs(M,{children:[e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:l.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center text-gray-500",children:e.jsx(k,{variant:"outline",className:"mr-2",children:y[l.category]||l.category})}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),l.location]}),l.job_date&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),new Date(l.job_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),l.budget_min&&l.budget_max?`${m(l.budget_min)} - ${m(l.budget_max)}`:m(l.budget_min||l.budget_max)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),l.views_count||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),l.applications_count||0," candidatos"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),t(l.id)},className:_(l.id)?"text-red-500":"text-gray-500",children:e.jsx(X,{className:`w-4 h-4 ${_(l.id)?"fill-current":""}`})}),e.jsxs(w,{variant:"outline",size:"sm",onClick:()=>P(l),children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),"Ver detalhes"]}),!j(l.id)&&e.jsxs(w,{size:"sm",onClick:()=>$(l),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Candidatar"]}),j(l.id)&&e.jsx(k,{variant:"secondary",children:"Candidatura enviada"})]})]})]})]})},l.id))}),e.jsx(Ce,{isOpen:c,onClose:()=>F(!1),job:n,readOnly:!0}),e.jsx(Ya,{isOpen:g,onClose:()=>R(!1),job:n})]})},Qa=()=>{const{profile:s,portfolio:r,updateProfile:a,addPortfolioItem:t,deletePortfolioItem:_,uploadImage:j,loading:b,categories:u,regions:i}=H(),[v,C]=N.useState(!1),[n,f]=N.useState({}),[c,F]=N.useState(!1),[g,R]=N.useState(!1),p={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"},P=()=>{f({name:s.name||"",bio:s.bio||"",phone:s.phone||"",categories:s.categories||[],regions:s.regions||[],hourly_rate:s.hourly_rate||"",daily_rate:s.daily_rate||"",project_rate:s.project_rate||"",instagram_url:s.instagram_url||"",website_url:s.website_url||"",availability_status:s.availability_status||"available"}),C(!0)},$=async()=>{try{await a(n),C(!1)}catch(x){console.error("Erro ao salvar perfil:",x)}},m=()=>{C(!1),f({})},d=async x=>{const S=x.target.files[0];if(S){F(!0);try{const z=await j(S,"profiles/");await a({profile_image_url:z})}catch(z){console.error("Erro ao fazer upload da imagem:",z)}finally{F(!1)}}},y=async x=>{const S=x.target.files[0];if(S){R(!0);try{const z=await j(S,"portfolio/");await t({image_url:z,title:"Nova imagem",order_position:r.length})}catch(z){console.error("Erro ao fazer upload do portfólio:",z)}finally{R(!1)}}},l=x=>{f(S=>({...S,categories:S.categories.includes(x)?S.categories.filter(z=>z!==x):[...S.categories,x]}))},J=x=>{f(S=>({...S,regions:S.regions.includes(x)?S.regions.filter(z=>z!==x):[...S.regions,x]}))},L=x=>x?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x):"A combinar";return s?e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Z,{className:"w-24 h-24",children:[e.jsx(ee,{src:s.profile_image_url,alt:s.name}),e.jsx(ae,{className:"text-2xl",children:s.name?.split(" ").map(x=>x[0]).join("").toUpperCase()})]}),c?e.jsx("div",{className:"absolute bottom-0 right-0 bg-purple-500 text-white p-2 rounded-full",children:e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"})}):e.jsxs("label",{className:"absolute bottom-0 right-0 bg-purple-500 text-white p-2 rounded-full cursor-pointer hover:bg-purple-600 transition-colors",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.name}),!v&&e.jsxs(w,{onClick:P,variant:"outline",size:"sm",children:[e.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Editar Perfil"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ke,{className:"w-4 h-4 text-yellow-500 mr-1"}),s.rating?.toFixed(1)||"0.0"]}),e.jsxs("span",{children:[s.total_jobs||0," trabalhos"]}),s.verified&&e.jsx(k,{variant:"secondary",children:"Verificado"}),e.jsx(k,{variant:s.availability_status==="available"?"default":"secondary",className:s.availability_status==="available"?"bg-green-500":"",children:s.availability_status==="available"?"Disponível":s.availability_status==="busy"?"Ocupado":"Indisponível"})]}),e.jsx("p",{className:"text-gray-700",children:s.bio})]})]})})}),v&&e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"Editar Perfil"})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome"}),e.jsx(A,{value:n.name,onChange:x=>f(S=>({...S,name:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telefone"}),e.jsx(A,{value:n.phone,onChange:x=>f(S=>({...S,phone:x.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Biografia"}),e.jsx(te,{value:n.bio,onChange:x=>f(S=>({...S,bio:x.target.value})),rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status de Disponibilidade"}),e.jsxs(B,{value:n.availability_status,onValueChange:x=>f(S=>({...S,availability_status:x})),children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsxs(G,{children:[e.jsx(T,{value:"available",children:"Disponível"}),e.jsx(T,{value:"busy",children:"Ocupado"}),e.jsx(T,{value:"unavailable",children:"Indisponível"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Especialidades"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.map(x=>e.jsx(k,{variant:n.categories?.includes(x)?"default":"outline",className:"cursor-pointer text-center justify-center",onClick:()=>l(x),children:p[x]},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Regiões de Atendimento"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:i.map(x=>e.jsx(k,{variant:n.regions?.includes(x)?"default":"outline",className:"cursor-pointer text-center justify-center text-xs",onClick:()=>J(x),children:x},x))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valor/Hora (R$)"}),e.jsx(A,{type:"number",value:n.hourly_rate,onChange:x=>f(S=>({...S,hourly_rate:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Diária (R$)"}),e.jsx(A,{type:"number",value:n.daily_rate,onChange:x=>f(S=>({...S,daily_rate:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Projeto (R$)"}),e.jsx(A,{type:"number",value:n.project_rate,onChange:x=>f(S=>({...S,project_rate:x.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Instagram"}),e.jsx(A,{value:n.instagram_url,onChange:x=>f(S=>({...S,instagram_url:x.target.value})),placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Site/Portfolio"}),e.jsx(A,{value:n.website_url,onChange:x=>f(S=>({...S,website_url:x.target.value})),placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs(w,{onClick:m,variant:"outline",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),e.jsxs(w,{onClick:$,disabled:b,children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Salvar"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"Especialidades & Regiões"})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Especialidades"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.categories?.map(x=>e.jsx(k,{variant:"outline",children:p[x]||x},x))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Regiões de Atendimento"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.regions?.slice(0,5).map(x=>e.jsx(k,{variant:"outline",className:"text-xs",children:x},x)),s.regions?.length>5&&e.jsxs(k,{variant:"outline",className:"text-xs",children:["+",s.regions.length-5," mais"]})]})]})]})]}),e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"Valores & Contato"})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Por Hora"}),e.jsx("p",{className:"text-lg font-semibold",children:L(s.hourly_rate)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Diária"}),e.jsx("p",{className:"text-lg font-semibold",children:L(s.daily_rate)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Projeto"}),e.jsx("p",{className:"text-lg font-semibold",children:L(s.project_rate)})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.phone&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:text-blue-600",children:s.phone})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-600",children:s.email})]}),s.instagram_url&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ja,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:s.instagram_url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600",children:"Instagram"})]}),s.website_url&&e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),e.jsx("a",{href:s.website_url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600",children:"Website/Portfolio"})]})]})]})]})]}),e.jsxs(q,{children:[e.jsx(V,{children:e.jsxs(Y,{className:"flex items-center justify-between",children:["Portfolio",e.jsxs("label",{className:"cursor-pointer",children:[e.jsxs(w,{size:"sm",disabled:g,children:[g?e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Adicionar Imagem"]}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"hidden"})]})]})}),e.jsx(M,{children:r&&r.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.map(x=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:x.image_url,alt:x.title,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsx(w,{size:"sm",variant:"destructive",onClick:()=>_(x.id),children:e.jsx(Be,{className:"w-4 h-4"})})})]},x.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Nenhuma imagem no portfólio ainda."}),e.jsx("p",{className:"text-sm",children:"Adicione imagens para mostrar seu trabalho!"})]})})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{children:"Carregando perfil..."})})},Wa=()=>{const{profile:s,urgencyLevels:r}=H(),[a,t]=N.useState([]),[_,j]=N.useState(!0),[b,u]=N.useState(null),[i,v]=N.useState(!1),[C,n]=N.useState({}),f=async()=>{if(s){j(!0);try{const d=(await Ge({})).filter(l=>l.posted_by===s.id);t(d);const y={};for(const l of d)try{const J=await Fa(l.id);y[l.id]=J}catch(J){console.error(`Erro ao carregar candidaturas do trabalho ${l.id}:`,J),y[l.id]=[]}n(y)}catch(m){console.error("Erro ao carregar trabalhos:",m)}finally{j(!1)}}};N.useEffect(()=>{f()},[s]);const c=()=>{u(null),v(!0)},F=m=>{u(m),v(!0)},g=async m=>{if(confirm("Tem certeza que deseja excluir este trabalho?"))try{await He(m),t(d=>d.filter(y=>y.id!==m))}catch(d){console.error("Erro ao excluir trabalho:",d)}},R=async(m,d,y="")=>{try{await Ye(m,{status:d,response_message:y}),f()}catch(l){console.error("Erro ao atualizar candidatura:",l)}},p=m=>m?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m):"A combinar",P=m=>m?ce(new Date(m),{addSuffix:!0,locale:oe}):"",$={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"};return _?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(m=>e.jsx(q,{className:"animate-pulse",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},m))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Meus Trabalhos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie os trabalhos que você publicou"})]}),e.jsxs(w,{onClick:c,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Novo Trabalho"]})]}),a.length===0?e.jsx(q,{children:e.jsxs(M,{className:"text-center py-12",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nenhum trabalho publicado"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Publique seu primeiro trabalho para começar a receber candidaturas."}),e.jsxs(w,{onClick:c,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Publicar Trabalho"]})]})}):e.jsx("div",{className:"space-y-4",children:a.map((m,d)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},children:e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:m.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[e.jsx(k,{variant:"outline",children:$[m.category]||m.category}),m.urgency!=="normal"&&e.jsx(k,{variant:"outline",className:`${r.find(y=>y.value===m.urgency)?.color} text-white`,children:r.find(y=>y.value===m.urgency)?.label}),e.jsx(k,{variant:m.status==="open"?"default":"secondary",className:m.status==="open"?"bg-green-500":"",children:m.status==="open"?"Aberto":m.status==="in_progress"?"Em Andamento":m.status==="completed"?"Concluído":"Cancelado"}),e.jsx("span",{children:P(m.created_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>F(m),children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>g(m.id),className:"text-red-500 hover:text-red-700",children:e.jsx(Be,{className:"w-4 h-4"})})]})]})}),e.jsxs(M,{children:[e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:m.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),m.location]}),m.job_date&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),new Date(m.job_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),m.budget_min&&m.budget_max?`${p(m.budget_min)} - ${p(m.budget_max)}`:p(m.budget_min||m.budget_max)]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),C[m.id]?.length||0," candidatos"]})]}),C[m.id]&&C[m.id].length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-medium mb-3",children:["Candidaturas Recentes (",C[m.id].length,")"]}),e.jsxs("div",{className:"space-y-2",children:[C[m.id].slice(0,3).map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:y.freelancer?.name?.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:y.freelancer?.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[y.proposed_rate&&p(y.proposed_rate),y.estimated_hours&&` • ${y.estimated_hours}h`]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:y.status==="pending"?"outline":y.status==="accepted"?"default":"secondary",className:y.status==="accepted"?"bg-green-500":y.status==="rejected"?"bg-red-500 text-white":"",children:y.status==="pending"?"Pendente":y.status==="accepted"?"Aceita":y.status==="rejected"?"Rejeitada":"Retirada"}),y.status==="pending"&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(w,{size:"sm",variant:"outline",onClick:()=>R(y.id,"accepted"),className:"text-green-600 border-green-600 hover:bg-green-50",children:"Aceitar"}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>R(y.id,"rejected"),className:"text-red-600 border-red-600 hover:bg-red-50",children:"Rejeitar"})]})]})]},y.id)),C[m.id].length>3&&e.jsxs("p",{className:"text-sm text-gray-500 text-center pt-2",children:["+",C[m.id].length-3," candidaturas"]})]})]})]})]})},m.id))}),e.jsx(Ce,{isOpen:i,onClose:()=>{v(!1),u(null),f()},job:b})]})},Xa=()=>{const{applications:s,loadApplications:r,loading:a}=H();N.useEffect(()=>{r()},[r]);const t=i=>i?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i):"A combinar",_=i=>i?ce(new Date(i),{addSuffix:!0,locale:oe}):"",j=i=>{switch(i){case"pending":return e.jsx(we,{className:"w-4 h-4"});case"accepted":return e.jsx(ha,{className:"w-4 h-4"});case"rejected":return e.jsx(xa,{className:"w-4 h-4"});default:return e.jsx(ve,{className:"w-4 h-4"})}},b=i=>{switch(i){case"pending":return"bg-yellow-500";case"accepted":return"bg-green-500";case"rejected":return"bg-red-500";case"withdrawn":return"bg-gray-500";default:return"bg-blue-500"}},u=i=>{switch(i){case"pending":return"Pendente";case"accepted":return"Aceita";case"rejected":return"Rejeitada";case"withdrawn":return"Retirada";default:return i}};return a?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(i=>e.jsx(q,{className:"animate-pulse",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},i))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Minhas Candidaturas"}),e.jsx("p",{className:"text-gray-600",children:"Acompanhe o status das suas candidaturas"})]}),s.length===0?e.jsx(q,{children:e.jsxs(M,{className:"text-center py-12",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nenhuma candidatura enviada"}),e.jsx("p",{className:"text-gray-500",children:"Procure por trabalhos interessantes e envie suas candidaturas."})]})}):e.jsx("div",{className:"space-y-4",children:s.map((i,v)=>e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1},children:e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:i.job?.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-2",children:[e.jsxs("span",{children:["Candidatura enviada ",_(i.created_at)]}),e.jsxs(k,{variant:i.job?.status==="open"?"default":"secondary",className:i.job?.status==="open"?"bg-green-500":"",children:["Trabalho ",i.job?.status==="open"?"Aberto":i.job?.status==="in_progress"?"Em Andamento":i.job?.status==="completed"?"Concluído":"Cancelado"]})]})]}),e.jsx(k,{variant:"outline",className:`${b(i.status)} text-white`,children:e.jsxs("div",{className:"flex items-center space-x-1",children:[j(i.status),e.jsx("span",{children:u(i.status)})]})})]})}),e.jsxs(M,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),i.job?.location]}),i.job?.job_date&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),new Date(i.job.job_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),i.job?.budget_min&&i.job?.budget_max?`${t(i.job.budget_min)} - ${t(i.job.budget_max)}`:t(i.job?.budget_min||i.job?.budget_max)]}),e.jsxs("div",{className:"text-gray-500",children:["Status: ",u(i.job?.status)]})]}),e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Sua Proposta"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 text-sm",children:[i.proposed_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Valor Proposto:"}),e.jsx("span",{className:"ml-2",children:t(i.proposed_rate)})]}),i.estimated_hours&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tempo Estimado:"}),e.jsxs("span",{className:"ml-2",children:[i.estimated_hours," horas"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Mensagem:"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 whitespace-pre-wrap",children:i.message})]})]})]}),i.response_message&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Resposta do Cliente"}),e.jsx("div",{className:`p-3 rounded-lg ${i.status==="accepted"?"bg-green-50 border border-green-200":i.status==="rejected"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:i.response_message})})]}),i.portfolio_samples&&i.portfolio_samples.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Amostras Enviadas"}),e.jsxs("div",{className:"flex space-x-2",children:[i.portfolio_samples.slice(0,4).map((C,n)=>e.jsx("img",{src:C,alt:`Amostra ${n+1}`,className:"w-16 h-16 object-cover rounded-lg"},n)),i.portfolio_samples.length>4&&e.jsxs("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-xs text-gray-500",children:["+",i.portfolio_samples.length-4]})]})]})]})]})]})},i.id))})]})},Ka=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Mensagens"}),e.jsx("p",{className:"text-gray-600",children:"Sistema de mensagens em desenvolvimento"})]}),e.jsx(q,{children:e.jsxs(M,{className:"text-center py-12",children:[e.jsx(ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Sistema de Mensagens"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Em breve você poderá se comunicar diretamente com outros profissionais e clientes através da plataforma."}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg max-w-md mx-auto",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700 dark:text-blue-300",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Funcionalidade em desenvolvimento"})]})})]})})]}),Za=()=>{const{favorites:s,loadFavorites:r,toggleFavorite:a,checkIfApplied:t,urgencyLevels:_,loading:j}=H();N.useEffect(()=>{r()},[r]);const b=v=>v?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v):"A combinar",u=v=>v?ce(new Date(v),{addSuffix:!0,locale:oe}):"",i={fotografia:"Fotografia",filmmaker:"Filmmaker",storymaker:"Storymaker",editor_video:"Editor de Vídeo",editor_foto:"Editor de Foto",motion_design:"Motion Design",designer_grafico:"Designer Gráfico",social_media:"Social Media",drone:"Drone/Aéreo",livestream:"Livestream",producao:"Produção",assistente:"Assistente"};return j?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsx(q,{className:"animate-pulse",children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},v))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[e.jsx(X,{className:"w-6 h-6 mr-2 text-red-500"}),"Trabalhos Favoritos"]}),e.jsx("p",{className:"text-gray-600",children:"Trabalhos que você salvou para acompanhar"})]}),s.length===0?e.jsx(q,{children:e.jsxs(M,{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Nenhum trabalho favoritado"}),e.jsx("p",{className:"text-gray-500",children:"Explore os trabalhos disponíveis e favorite os que mais te interessam."})]})}):e.jsx("div",{className:"space-y-4",children:s.map((v,C)=>{const n=v.job;return n?e.jsx(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:C*.1},children:e.jsxs(q,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Z,{children:[e.jsx(ee,{src:n.posted_by_profile?.profile_image_url}),e.jsx(ae,{children:n.posted_by_profile?.name?.split(" ").map(f=>f[0]).join("").toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:n.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsx("span",{children:n.posted_by_profile?.name}),n.posted_by_profile?.verified&&e.jsx(k,{variant:"secondary",className:"text-xs",children:"Verificado"}),e.jsxs("span",{children:["Favoritado ",u(v.created_at)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.urgency!=="normal"&&e.jsx(k,{variant:"outline",className:`${_.find(f=>f.value===n.urgency)?.color} text-white`,children:_.find(f=>f.value===n.urgency)?.label}),n.remote_work&&e.jsx(k,{variant:"outline",className:"bg-green-100 text-green-800",children:"Remoto"}),e.jsx(k,{variant:n.status==="open"?"default":"secondary",className:n.status==="open"?"bg-green-500":"",children:n.status==="open"?"Aberto":n.status==="in_progress"?"Em Andamento":n.status==="completed"?"Concluído":"Cancelado"})]})]})}),e.jsxs(M,{children:[e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:n.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center text-gray-500",children:e.jsx(k,{variant:"outline",className:"mr-2",children:i[n.category]||n.category})}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(re,{className:"w-4 h-4 mr-1"}),n.location]}),n.job_date&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),new Date(n.job_date).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),n.budget_min&&n.budget_max?`${b(n.budget_min)} - ${b(n.budget_max)}`:b(n.budget_min||n.budget_max)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),n.views_count||0]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),n.applications_count||0," candidatos"]}),e.jsxs("span",{children:["Publicado ",u(n.created_at)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{variant:"ghost",size:"sm",onClick:()=>a(n.id),className:"text-red-500 hover:text-red-700",children:e.jsx(X,{className:"w-4 h-4 fill-current"})}),e.jsxs(w,{variant:"outline",size:"sm",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),"Ver detalhes"]}),n.status==="open"&&!t(n.id)&&e.jsxs(w,{size:"sm",className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Candidatar"]}),t(n.id)&&e.jsx(k,{variant:"secondary",children:"Candidatura enviada"}),n.status!=="open"&&e.jsx(k,{variant:"outline",className:"text-gray-500",children:n.status==="completed"?"Concluído":"Não disponível"})]})]})]})]})},v.id):null})})]})},es=()=>{const{profile:s,profileLoading:r,loadJobs:a}=H(),[t,_]=N.useState("feed");if(N.useEffect(()=>{a()},[a]),r)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full"})});if(!s)return e.jsx(Ga,{});const j=()=>{switch(t){case"feed":return e.jsx(Me,{});case"profile":return e.jsx(Qa,{});case"my-jobs":return e.jsx(Wa,{});case"applications":return e.jsx(Xa,{});case"messages":return e.jsx(Ka,{});case"favorites":return e.jsx(Za,{});default:return e.jsx(Me,{})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(Ha,{activeTab:t,onTabChange:_}),e.jsx("main",{className:"pt-16",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:j()})})]})},vs=()=>{const{user:s,loading:r}=ie(),[a,t]=N.useState(!1);return N.useEffect(()=>{!r&&!s?t(!0):s&&t(!1)},[s,r]),r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 dark:from-gray-900 dark:via-purple-900 dark:to-blue-900 flex items-center justify-center",children:e.jsx(D.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full"})}):a?e.jsx(Ua,{onAuthSuccess:()=>t(!1)}):e.jsx(Oa,{children:e.jsx(es,{})})};export{vs as default};
