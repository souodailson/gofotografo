import{a3 as _,aJ as w,u as S,r as u,ab as s,j as e,ag as A,m as D,B as c,I as H,J as l,at as k,q as B,t as T,v as E,x as I,C as O,aB as P}from"./index-4y5FCHHl.js";import{T as R,a as z,b as m,c as o,d as q,e as i}from"./table-9zKa98OY.js";import{B as F}from"./badge-DfvgCtvX.js";import{A as J}from"./AvailabilityModal-QL3fHCGl.js";import{A as L}from"./arrow-left-DkmDkyq6.js";import{P as $}from"./pen-square-CiA3dyIU.js";import{s as G}from"./startOfMonth-U3noRVTS.js";import{e as V}from"./endOfMonth-9pjN7R8H.js";import{p as f}from"./pt-BR-BZmCGEt5.js";import"./alert-dialog-DhXlLYQ6.js";import"./getDay-DudbGKwU.js";const re=({isMobile:K})=>{const{availabilitySlots:x,loading:g,getClientById:y}=_(),{openModal:h,closeModal:b,openModals:j}=w(),v=S(),[r,M]=u.useState(new Date),p=u.useMemo(()=>{const a=G(r),t=V(r);return x.filter(n=>{const d=s(n.start_time);return d>=a&&d<=t}).sort((n,d)=>s(n.start_time)-s(d.start_time))},[x,r]),N=a=>{const[t,n]=a.target.value.split("-");M(new Date(parseInt(t),parseInt(n)-1,1))},C=a=>{h("availability",{existingSlot:a,date:s(a.start_time)})};return g?e.jsx(A,{}):e.jsxs(e.Fragment,{children:[e.jsx(J,{isOpen:!!j.availability,onClose:()=>b("availability"),initialData:j.availability}),e.jsxs(D.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>v("/calendar"),children:e.jsx(L,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground titulo-gradiente",children:"Gerenciador de Disponibilidade"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Visualize e gerencie todos os seus horários da Agenda PRO."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{type:"month",value:l(r,"yyyy-MM"),onChange:N,className:"w-auto"}),e.jsxs(c,{onClick:()=>h("availability",{date:new Date}),children:[e.jsx(k,{className:"mr-2 h-4 w-4"})," Adicionar"]})]})]}),e.jsxs(B,{children:[e.jsx(T,{children:e.jsxs(E,{children:["Horários de ",l(r,"MMMM, yyyy",{locale:f})]})}),e.jsx(I,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(R,{children:[e.jsx(z,{children:e.jsxs(m,{children:[e.jsx(o,{children:"Data"}),e.jsx(o,{children:"Horário"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Agendado por"}),e.jsx(o,{className:"text-right",children:"Ações"})]})}),e.jsx(q,{children:p.length>0?p.map(a=>{const t=a.booked_by_client_id?y(a.booked_by_client_id):null;return e.jsxs(m,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l(s(a.start_time),"dd/MM/yyyy, EEEE",{locale:f})})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:`${l(s(a.start_time),"HH:mm")} - ${l(s(a.end_time),"HH:mm")}`})]})}),e.jsx(i,{children:e.jsx(F,{variant:a.is_booked?"destructive":"default",children:a.is_booked?"Agendado":"Disponível"})}),e.jsx(i,{children:t?t.name:"—"}),e.jsx(i,{className:"text-right",children:e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>C(a),children:e.jsx($,{className:"h-4 w-4"})})})]},a.id)}):e.jsx(m,{children:e.jsx(i,{colSpan:5,className:"text-center h-24",children:"Nenhum horário encontrado para este mês."})})})]})})})]})]})]})};export{re as default};
