import{e as y,a3 as k,aN as A,r as h,j as e,m as u,B as c,ax as p,K as E,N as R,O as T,P as v,T as M,aQ as _,D as N,aY as B}from"./index-BLSLQMBf.js";import{A as F,b as G,c as V,d as q,e as L,f as O,g as $,h as H}from"./alert-dialog-CyCTn1Rm.js";import{u as I}from"./useCardHoverEffect-BoO1WmHq.js";import{A as b}from"./archive-CepoKPcH.js";import{M as z}from"./more-vertical-NVbx7jmS.js";import{P as K}from"./pen-square-DjD69RmB.js";const Q=({pkg:s,onEdit:i,onDelete:o,onViewDetails:n})=>{const r=I();return e.jsxs(u.div,{ref:r,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl shadow-lg border border-border flex flex-col card-hover-effect",children:[e.jsxs("div",{className:"p-6 flex-grow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.name}),e.jsxs(E,{children:[e.jsx(R,{asChild:!0,children:e.jsx(c,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsxs(T,{align:"end",children:[e.jsxs(v,{onClick:()=>i(s),children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(v,{onClick:()=>o(s.id),className:"text-red-600 dark:text-red-400",children:[e.jsx(M,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:s.description||"Sem descrição"}),s.niche&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary dark:bg-customGreen/10 dark:text-customGreen",children:[e.jsx(_,{className:"w-3 h-3 mr-1.5"}),s.niche]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-4 h-4 mr-2 text-customGreen"}),e.jsxs("span",{children:["Preço (à vista/Pix): ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_cash_pix||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.price_card&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"w-4 h-4 mr-2 text-blue-500"}),e.jsxs("span",{children:["Preço (Cartão): ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.cost&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-2 text-orange-500"}),e.jsxs("span",{children:["Custo Estimado: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.cost||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-border bg-accent/30 dark:bg-accent/10 rounded-b-xl",children:e.jsx(c,{variant:"link",className:"text-customPurple dark:text-customGreen p-0 h-auto",onClick:()=>n(s),children:"Ver Detalhes"})})]},s.id)},ee=()=>{const{toast:s}=y(),{servicePackages:i,loading:o,deleteServicePackage:n,refreshData:r,user:g}=k(),{openModal:l}=A(),[D,d]=h.useState(!1),[j,m]=h.useState(null),t=i||[];h.useEffect(()=>{g&&!t.length&&r("service_packages")},[g,t.length,r]);const x=()=>{r("service_packages")},f=()=>{l("servicePackage",{servicePackage:null,onSaveSuccess:x})},w=a=>{l("servicePackage",{servicePackage:a,onSaveSuccess:x})},P=a=>{l("servicePackage",{servicePackage:a,onSaveSuccess:x})},C=a=>{m(a),d(!0)},S=async()=>{if(j){try{await n(j),s({title:"Pacote Removido",description:"O pacote de serviço foi removido com sucesso."}),r("service_packages")}catch(a){s({title:"Erro ao Remover",description:a.message,variant:"destructive"})}d(!1),m(null)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground titulo-gradiente",children:"Pacotes de Serviços"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Crie e gerencie seus pacotes e serviços fotográficos"})]}),e.jsxs(c,{onClick:f,className:"btn-custom-gradient text-white shadow-lg",children:[e.jsx(p,{className:"w-4 h-4 mr-2"})," Novo Pacote"]})]}),o&&(!t||t.length===0)?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(b,{className:"w-12 h-12 text-muted-foreground mx-auto animate-bounce mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando pacotes..."})]}):!t||t.length===0?e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx(b,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum pacote de serviço cadastrado"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Comece adicionando seus pacotes para facilitar a criação de orçamentos e trabalhos."}),e.jsxs(c,{onClick:f,className:"btn-custom-gradient text-white",children:[e.jsx(p,{className:"w-4 h-4 mr-2"})," Criar Primeiro Pacote"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>e.jsx(Q,{pkg:a,onEdit:w,onDelete:C,onViewDetails:P},a.id))}),e.jsx(F,{open:D,onOpenChange:d,children:e.jsxs(G,{children:[e.jsxs(V,{children:[e.jsx(q,{children:"Confirmar Exclusão"}),e.jsx(L,{children:"Tem certeza que deseja excluir este pacote de serviço? Esta ação não pode ser desfeita."})]}),e.jsxs(O,{children:[e.jsx($,{onClick:()=>m(null),children:"Cancelar"}),e.jsx(H,{onClick:S,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})};export{ee as default};
