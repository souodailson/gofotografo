import{c as ae,f as se,h as te,r as o,j as e,m as re,C as oe,t as b,v as y,w as g,x as S,y as j,B as i,aC as ie,b9 as ne,a8 as A,i as le,X as ce,I as _}from"./index-B959_7_o.js";import{T as de,a as pe,b as me,c as ue}from"./tabs-5JwcCaKq.js";import{T as he,a as xe,b as P,c as z,d as be,e as M}from"./table-BGo4pF6F.js";import{B as ye}from"./bar-chart-3-i6ZqdCjg.js";import{L as ge}from"./lightbulb-B8StSBJ3.js";import{M as je}from"./message-square-DK6t4m6u.js";import{M as ve}from"./map-pin-DE1Z08iO.js";import{U as ke}from"./upload-CdVbUmbv.js";import{F as fe}from"./file-spreadsheet-BlFo8TCQ.js";import{P as Ce}from"./pen-square-CcxMKlNU.js";const Ne=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Me=()=>{const{toast:l}=se(),{user:v}=te(),[n,R]=o.useState("spots"),[d,q]=o.useState([]),[k,m]=o.useState(!1),[T,u]=o.useState(!1),[f,C]=o.useState(null),[N,w]=o.useState(""),[L,V]=o.useState({name:"",category:"parque",region:"centro",description:"",address:"",price_level:2,phone:"",website:""}),[F,B]=o.useState({title:"",category:"whatsapp",message:"",tags:""}),[O,$]=o.useState({title:"",category:"casamento",description:"",season:"todas",style:"",tips:""}),[G,U]=o.useState({month:1,season_name:"",description:"",opportunities:"",tips:""}),[H,W]=o.useState({region:"",service_type:"",average_price:"",min_price:"",max_price:"",competition_level:"Médio"});o.useEffect(()=>{if(!v||v.email!=="admin@gofotografo.com"){window.location.href="/dashboard";return}},[v]);const D={spots:{title:"Locais (SPOT)",description:"Gerencie locais para ensaios fotográficos",icon:ve,tableName:"spots",fields:[{key:"name",label:"Nome",type:"text"},{key:"category",label:"Categoria",type:"select",options:["parque","igreja","praia","buffet","hotel","salao","sitio","urbano","historico","natureza"]},{key:"region",label:"Região",type:"select",options:["centro","zona-norte","zona-sul","zona-leste","zona-oeste","abc","interior","litoral"]},{key:"description",label:"Descrição",type:"textarea"},{key:"address",label:"Endereço",type:"text"},{key:"price_level",label:"Nível de Preço (1-5)",type:"number",min:1,max:5},{key:"phone",label:"Telefone",type:"text"},{key:"website",label:"Website",type:"url"}]},respostas:{title:"Respostas Rápidas",description:"Templates de respostas para WhatsApp, Email, etc.",icon:je,tableName:"quick_responses",fields:[{key:"title",label:"Título",type:"text"},{key:"category",label:"Categoria",type:"select",options:["whatsapp","email","instagram","facebook","telefone"]},{key:"message",label:"Mensagem",type:"textarea"},{key:"tags",label:"Tags (separadas por vírgula)",type:"text"}]},inspira:{title:"Ideias Criativas (INSPIRA)",description:"Central de ideias para ensaios fotográficos",icon:ge,tableName:"creative_ideas",fields:[{key:"title",label:"Título",type:"text"},{key:"category",label:"Categoria",type:"select",options:["casamento","ensaio","familia","gestante","newborn","infantil","formatura","corporativo"]},{key:"description",label:"Descrição",type:"textarea"},{key:"season",label:"Temporada",type:"select",options:["primavera","verao","outono","inverno","todas"]},{key:"style",label:"Estilo",type:"text"},{key:"tips",label:"Dicas e Props",type:"textarea"}]},season:{title:"Dados Sazonais",description:"Oportunidades e dicas por época do ano",icon:oe,tableName:"seasonal_data",fields:[{key:"month",label:"Mês (1-12)",type:"number",min:1,max:12},{key:"season_name",label:"Nome da Estação/Época",type:"text"},{key:"description",label:"Descrição",type:"textarea"},{key:"opportunities",label:"Oportunidades",type:"textarea"},{key:"tips",label:"Dicas e Estratégias",type:"textarea"}]},market:{title:"Dados de Mercado",description:"Preços e dados de mercado por região/serviço",icon:ye,tableName:"market_data",fields:[{key:"region",label:"Região",type:"text"},{key:"service_type",label:"Tipo de Serviço",type:"select",options:["casamento","ensaio","corporativo","evento","produto","gestante","newborn","familia"]},{key:"average_price",label:"Preço Médio (R$)",type:"number"},{key:"min_price",label:"Preço Mínimo (R$)",type:"number"},{key:"max_price",label:"Preço Máximo (R$)",type:"number"},{key:"competition_level",label:"Nível de Concorrência",type:"select",options:["Baixo","Médio","Alto"]}]}},X=D[n],J=a=>{try{const r=a.trim().split(`
`),t=r[0].split(",").map(c=>c.trim().toLowerCase()),s=[];for(let c=1;c<r.length;c++){const p=r[c].split(","),x={};t.forEach((Z,ee)=>{x[Z]=p[ee]?.trim()||""}),s.push(x)}return s}catch{throw new Error("Formato de CSV inválido")}},K=async()=>{if(!N.trim()){l({title:"Erro",description:"Cole os dados CSV para importar.",variant:"destructive"});return}try{m(!0);const a=J(N);console.log("Dados para importar:",a),l({title:"Importação realizada!",description:`${a.length} itens importados com sucesso.`}),w(""),h()}catch(a){l({title:"Erro na importação",description:a.message,variant:"destructive"})}finally{m(!1)}},Q=()=>{if(d.length===0){l({title:"Nenhum dado",description:"Não há dados para exportar.",variant:"destructive"});return}const a=X.fields.map(p=>p.key),r=[a.join(","),...d.map(p=>a.map(x=>p[x]||"").join(","))].join(`
`),t=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),c=URL.createObjectURL(t);s.setAttribute("href",c),s.setAttribute("download",`${n}_data.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),l({title:"Exportação realizada!",description:"Arquivo CSV baixado com sucesso."})},h=()=>{m(!0),setTimeout(()=>{q([...n==="spots"?[{id:1,name:"Parque Ibirapuera",category:"parque",region:"zona-sul",description:"Grande parque urbano com diversos cenários",address:"Av. Paulista, 1578",price_level:1,phone:"(11) 99999-9999",website:"https://parqueibirapuera.org"}]:[],...n==="respostas"?[{id:1,title:"Primeira resposta - WhatsApp",category:"whatsapp",message:"Olá! Obrigado pelo interesse nos nossos serviços.",tags:"contato, whatsapp, primeira"}]:[]]),m(!1)},500)};o.useEffect(()=>{h()},[n]);const I=()=>{switch(n){case"spots":return L;case"respostas":return F;case"inspira":return O;case"season":return G;case"market":return H;default:return{}}},E=a=>{switch(n){case"spots":V(a);break;case"respostas":B(a);break;case"inspira":$(a);break;case"season":U(a);break;case"market":W(a);break}},Y=a=>{const r=I()[a.key]||"",t=s=>{E({...I(),[a.key]:s})};switch(a.type){case"textarea":return e.jsx(A,{value:r,onChange:s=>t(s.target.value),rows:3});case"select":return e.jsx("select",{className:"w-full p-2 border rounded-lg bg-background",value:r,onChange:s=>t(s.target.value),children:a.options.map(s=>e.jsx("option",{value:s,children:s},s))});case"number":return e.jsx(_,{type:"number",value:r,onChange:s=>t(s.target.value),min:a.min,max:a.max});default:return e.jsx(_,{type:a.type,value:r,onChange:s=>t(s.target.value)})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 fixed inset-0 overflow-auto",children:e.jsxs("div",{className:"space-y-6 p-6 pb-20",children:[e.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-600 to-gray-600 bg-clip-text text-transparent flex items-center justify-center gap-3",children:[e.jsx(Ne,{className:"w-8 h-8 text-slate-600"}),"Painel Administrativo - Gestão de Dados"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gerencie dados para todas as funcionalidades do sistema"})]}),e.jsxs(de,{value:n,onValueChange:R,className:"w-full",children:[e.jsx(pe,{className:"grid w-full grid-cols-5 mb-6",children:Object.entries(D).map(([a,r])=>e.jsxs(me,{value:a,className:"flex items-center gap-2",children:[e.jsx(r.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:r.title.split(" ")[0]})]},a))}),Object.entries(D).map(([a,r])=>e.jsx(ue,{value:a,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(r.icon,{className:"w-5 h-5"}),r.title]}),e.jsx(S,{children:r.description})]}),e.jsx(j,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{onClick:()=>u(!T),children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]}),e.jsxs(i,{variant:"outline",onClick:Q,children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Exportar CSV"]}),e.jsxs(i,{variant:"outline",onClick:()=>document.getElementById(`import-${a}`).click(),children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),"Importar CSV"]})]})})]}),e.jsxs(b,{className:"border-dashed",children:[e.jsxs(y,{children:[e.jsx(g,{className:"text-lg",children:"Importação em Lote (CSV)"}),e.jsx(S,{children:"Cole aqui o conteúdo CSV para importar múltiplos itens de uma vez"})]}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{value:N,onChange:t=>w(t.target.value),placeholder:"Cole aqui o conteúdo CSV...",rows:6}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:K,disabled:k,children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),k?"Importando...":"Importar Dados"]}),e.jsx(i,{variant:"outline",onClick:()=>w(""),children:"Limpar"})]})]})})]}),T&&e.jsxs(b,{children:[e.jsx(y,{children:e.jsxs(g,{children:[f?"Editar":"Adicionar"," ",r.title]})}),e.jsxs(j,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.fields.map(t=>e.jsxs("div",{children:[e.jsx(le,{htmlFor:t.key,children:t.label}),Y(t)]},t.key))}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx(i,{onClick:()=>{l({title:f?"Item atualizado!":"Item criado!",description:"Operação realizada com sucesso."}),u(!1),C(null),h()},children:f?"Atualizar":"Salvar"}),e.jsx(i,{variant:"outline",onClick:()=>{u(!1),C(null)},children:"Cancelar"})]})]})]}),e.jsxs(b,{children:[e.jsxs(y,{children:[e.jsx(g,{children:"Dados Existentes"}),e.jsxs(S,{children:[d.length," itens encontrados"]})]}),e.jsx(j,{children:k?e.jsx("div",{className:"text-center py-8",children:"Carregando..."}):d.length>0?e.jsxs(he,{children:[e.jsx(xe,{children:e.jsxs(P,{children:[r.fields.slice(0,4).map(t=>e.jsx(z,{children:t.label},t.key)),e.jsx(z,{children:"Ações"})]})}),e.jsx(be,{children:d.map(t=>e.jsxs(P,{children:[r.fields.slice(0,4).map(s=>e.jsx(M,{children:s.type==="textarea"?(t[s.key]||"").substring(0,50)+"...":t[s.key]||"-"},s.key)),e.jsx(M,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{C(t),E(t),u(!0)},children:e.jsx(Ce,{className:"w-3 h-3"})}),e.jsx(i,{size:"sm",variant:"destructive",onClick:()=>{l({title:"Item removido!",description:"Item deletado com sucesso."}),h()},children:e.jsx(ce,{className:"w-3 h-3"})})]})})]},t.id))})]}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum item encontrado. Adicione alguns dados para começar."})})]})]})},a))]})]})})};export{Me as default};
