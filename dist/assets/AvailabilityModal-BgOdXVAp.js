import{a$ as xe,ak as O,b1 as D,cb as Ae,cc as Qe,cd as Re,ce as We,aV as J,cf as ye,cg as Fe,ch as Be,aX as V,b3 as be,b2 as Xe,ci as ne,cj as Ge,ck as ae,cl as ze,c as Ve,a3 as $e,e as Ze,r as j,J as Q,a_ as Z,ab as ie,j as a,Q as Ke,V as Ue,W as Je,X as Se,Y as et,h as X,C as tt,I as z,aF as st,B as R,T as oe,ax as rt,a2 as nt,l as K,p as at,s as U}from"./index-hGCyqJo1.js";import{A as ce,b as le,c as ue,d as de,e as he,f as we,g as fe,h as pe}from"./alert-dialog-w4HeuV8X.js";import{p as it}from"./pt-BR-D0UG9bzw.js";import{e as ot,g as ct}from"./getDay-D9Ii4q58.js";function lt(){return Object.assign({},xe())}function ut(r){let t=O(r).getDay();return t===0&&(t=7),t}function dt(r,e){const t=e instanceof Date?D(e,0):new e(0);return t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),t.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t}const ht=10;class ge{subPriority=0;validate(e,t){return!0}}class wt extends ge{constructor(e,t,s,n,o){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=n,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class ft extends ge{priority=ht;subPriority=-1;set(e,t){return t.timestampIsSet?e:D(e,dt(e,Date))}}class u{run(e,t,s,n){const o=this.parse(e,t,s,n);return o?{setter:new wt(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,s){return!0}}class pt extends u{priority=140;parse(e,t,s){switch(t){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,t,s){return t.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const m={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},k={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function x(r,e){return r&&{value:e(r.value),rest:r.rest}}function f(r,e){const t=e.match(r);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function M(r,e){const t=e.match(r);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const s=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,d=t[5]?parseInt(t[5],10):0;return{value:s*(n*Ae+o*Qe+d*Re),rest:e.slice(t[0].length)}}function Te(r){return f(m.anyDigitsSigned,r)}function p(r,e){switch(r){case 1:return f(m.singleDigit,e);case 2:return f(m.twoDigits,e);case 3:return f(m.threeDigits,e);case 4:return f(m.fourDigits,e);default:return f(new RegExp("^\\d{1,"+r+"}"),e)}}function $(r,e){switch(r){case 1:return f(m.singleDigitSigned,e);case 2:return f(m.twoDigitsSigned,e);case 3:return f(m.threeDigitsSigned,e);case 4:return f(m.fourDigitsSigned,e);default:return f(new RegExp("^-?\\d{1,"+r+"}"),e)}}function S(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function De(r,e){const t=e>0,s=t?e:1-e;let n;if(s<=50)n=r||100;else{const o=s+50,d=Math.trunc(o/100)*100,y=r>=o%100;n=r+d-(y?100:0)}return t?n:1-n}function ve(r){return r%400===0||r%4===0&&r%100!==0}class mt extends u{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,s){const n=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return x(p(4,e),n);case"yo":return x(s.ordinalNumber(e,{unit:"year"}),n);default:return x(p(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s){const n=e.getFullYear();if(s.isTwoDigitYear){const d=De(s.year,n);return e.setFullYear(d,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class xt extends u{priority=130;parse(e,t,s){const n=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return x(p(4,e),n);case"Yo":return x(s.ordinalNumber(e,{unit:"year"}),n);default:return x(p(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s,n){const o=We(e,n);if(s.isTwoDigitYear){const y=De(s.year,o);return e.setFullYear(y,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),J(e,n)}const d=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(d,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),J(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class yt extends u{priority=130;parse(e,t){return $(t==="R"?4:t.length,e)}set(e,t,s){const n=D(e,0);return n.setFullYear(s,0,4),n.setHours(0,0,0,0),ye(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class bt extends u{priority=130;parse(e,t){return $(t==="u"?4:t.length,e)}set(e,t,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class gt extends u{priority=120;parse(e,t,s){switch(t){case"Q":case"QQ":return p(t.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Tt extends u{priority=120;parse(e,t,s){switch(t){case"q":case"qq":return p(t.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Dt extends u{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,s){const n=o=>o-1;switch(t){case"M":return x(f(m.month,e),n);case"MM":return x(p(2,e),n);case"Mo":return x(s.ordinalNumber(e,{unit:"month"}),n);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class vt extends u{priority=110;parse(e,t,s){const n=o=>o-1;switch(t){case"L":return x(f(m.month,e),n);case"LL":return x(p(2,e),n);case"Lo":return x(s.ordinalNumber(e,{unit:"month"}),n);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function kt(r,e,t){const s=O(r),n=Fe(s,t)-e;return s.setDate(s.getDate()-n*7),s}class Mt extends u{priority=100;parse(e,t,s){switch(t){case"w":return f(m.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return p(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s,n){return J(kt(e,s,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function _t(r,e){const t=O(r),s=Be(t)-e;return t.setDate(t.getDate()-s*7),t}class Nt extends u{priority=100;parse(e,t,s){switch(t){case"I":return f(m.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return p(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s){return ye(_t(e,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Pt=[31,28,31,30,31,30,31,31,30,31,30,31],jt=[31,29,31,30,31,30,31,31,30,31,30,31];class Ht extends u{priority=90;subPriority=1;parse(e,t,s){switch(t){case"d":return f(m.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return p(t.length,e)}}validate(e,t){const s=e.getFullYear(),n=ve(s),o=e.getMonth();return n?t>=1&&t<=jt[o]:t>=1&&t<=Pt[o]}set(e,t,s){return e.setDate(s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class It extends u{priority=90;subpriority=1;parse(e,t,s){switch(t){case"D":case"DD":return f(m.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return p(t.length,e)}}validate(e,t){const s=e.getFullYear();return ve(s)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function ee(r,e,t){const s=xe(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,o=O(r),d=o.getDay(),H=(e%7+7)%7,g=7-n,_=e<0||e>6?e-(d+g)%7:(H+g)%7-(d+g)%7;return V(o,_)}class Ot extends u{priority=90;parse(e,t,s){switch(t){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,n){return e=ee(e,s,n),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Et extends u{priority=90;parse(e,t,s,n){const o=d=>{const y=Math.floor((d-1)/7)*7;return(d+n.weekStartsOn+6)%7+y};switch(t){case"e":case"ee":return x(p(t.length,e),o);case"eo":return x(s.ordinalNumber(e,{unit:"day"}),o);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,n){return e=ee(e,s,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Yt extends u{priority=90;parse(e,t,s,n){const o=d=>{const y=Math.floor((d-1)/7)*7;return(d+n.weekStartsOn+6)%7+y};switch(t){case"c":case"cc":return x(p(t.length,e),o);case"co":return x(s.ordinalNumber(e,{unit:"day"}),o);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,n){return e=ee(e,s,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function qt(r,e){const t=O(r),s=ut(t),n=e-s;return V(t,n)}class Ct extends u{priority=90;parse(e,t,s){const n=o=>o===0?7:o;switch(t){case"i":case"ii":return p(t.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return x(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return x(s.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return x(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return x(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,s){return e=qt(e,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Lt extends u{priority=80;parse(e,t,s){switch(t){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(S(s),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class At extends u{priority=80;parse(e,t,s){switch(t){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(S(s),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Qt extends u{priority=80;parse(e,t,s){switch(t){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(S(s),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Rt extends u{priority=70;parse(e,t,s){switch(t){case"h":return f(m.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return p(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,s){const n=e.getHours()>=12;return n&&s<12?e.setHours(s+12,0,0,0):!n&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Wt extends u{priority=70;parse(e,t,s){switch(t){case"H":return f(m.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return p(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,s){return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Ft extends u{priority=70;parse(e,t,s){switch(t){case"K":return f(m.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return p(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Bt extends u{priority=70;parse(e,t,s){switch(t){case"k":return f(m.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return p(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,s){const n=s<=24?s%24:s;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Xt extends u{priority=60;parse(e,t,s){switch(t){case"m":return f(m.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return p(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setMinutes(s,0,0),e}incompatibleTokens=["t","T"]}class Gt extends u{priority=50;parse(e,t,s){switch(t){case"s":return f(m.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return p(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setSeconds(s,0),e}incompatibleTokens=["t","T"]}class zt extends u{priority=30;parse(e,t){const s=n=>Math.trunc(n*Math.pow(10,-t.length+3));return x(p(t.length,e),s)}set(e,t,s){return e.setMilliseconds(s),e}incompatibleTokens=["t","T"]}class Vt extends u{priority=10;parse(e,t){switch(t){case"X":return M(k.basicOptionalMinutes,e);case"XX":return M(k.basic,e);case"XXXX":return M(k.basicOptionalSeconds,e);case"XXXXX":return M(k.extendedOptionalSeconds,e);case"XXX":default:return M(k.extended,e)}}set(e,t,s){return t.timestampIsSet?e:D(e,e.getTime()-be(e)-s)}incompatibleTokens=["t","T","x"]}class $t extends u{priority=10;parse(e,t){switch(t){case"x":return M(k.basicOptionalMinutes,e);case"xx":return M(k.basic,e);case"xxxx":return M(k.basicOptionalSeconds,e);case"xxxxx":return M(k.extendedOptionalSeconds,e);case"xxx":default:return M(k.extended,e)}}set(e,t,s){return t.timestampIsSet?e:D(e,e.getTime()-be(e)-s)}incompatibleTokens=["t","T","X"]}class Zt extends u{priority=40;parse(e){return Te(e)}set(e,t,s){return[D(e,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Kt extends u{priority=20;parse(e){return Te(e)}set(e,t,s){return[D(e,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const Ut={G:new pt,y:new mt,Y:new xt,R:new yt,u:new bt,Q:new gt,q:new Tt,M:new Dt,L:new vt,w:new Mt,I:new Nt,d:new Ht,D:new It,E:new Ot,e:new Et,c:new Yt,i:new Ct,a:new Lt,b:new At,B:new Qt,h:new Rt,H:new Wt,K:new Ft,k:new Bt,m:new Xt,s:new Gt,S:new zt,X:new Vt,x:new $t,t:new Zt,T:new Kt},Jt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,St=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,es=/^'([^]*?)'?$/,ts=/''/g,ss=/\S/,rs=/[a-zA-Z]/;function me(r,e,t,s){const n=lt(),o=n.locale??Xe,d=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,y=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,H={firstWeekContainsDate:d,weekStartsOn:y,locale:o},g=[new ft],_=e.match(St).map(l=>{const h=l[0];if(h in ne){const v=ne[h];return v(l,o.formatLong)}return l}).join("").match(Jt),N=[];for(let l of _){Ge(l)&&ae(l,e,r),ze(l)&&ae(l,e,r);const h=l[0],v=Ut[h];if(v){const{incompatibleTokens:q}=v;if(Array.isArray(q)){const G=N.find(T=>q.includes(T.token)||T.token===h);if(G)throw new RangeError(`The format string mustn't contain \`${G.fullToken}\` and \`${l}\` at the same time`)}else if(v.incompatibleTokens==="*"&&N.length>0)throw new RangeError(`The format string mustn't contain \`${l}\` and any other token at the same time`);N.push({token:h,fullToken:l});const B=v.run(r,l,o.match,H);if(!B)return D(t,NaN);g.push(B.setter),r=B.rest}else{if(h.match(rs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");if(l==="''"?l="'":h==="'"&&(l=ns(l)),r.indexOf(l)===0)r=r.slice(l.length);else return D(t,NaN)}}if(r.length>0&&ss.test(r))return D(t,NaN);const P=g.map(l=>l.priority).sort((l,h)=>h-l).filter((l,h,v)=>v.indexOf(l)===h).map(l=>g.filter(h=>h.priority===l).sort((h,v)=>v.subPriority-h.subPriority)).map(l=>l[0]);let b=O(t);if(isNaN(b.getTime()))return D(t,NaN);const E={};for(const l of P){if(!l.validate(b,H))return D(t,NaN);const h=l.set(b,E,H);Array.isArray(h)?(b=h[0],Object.assign(E,h[1])):b=h}return D(t,b)}function ns(r){return r.match(es)[1].replace(ts,"'")}function W(r,e){const t=O(r);return t.setHours(e),t}function F(r,e){const t=O(r);return t.setMinutes(e),t}const as=Ve("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),is=[{id:1,label:"Seg",name:"monday"},{id:2,label:"Ter",name:"tuesday"},{id:3,label:"Qua",name:"wednesday"},{id:4,label:"Qui",name:"thursday"},{id:5,label:"Sex",name:"friday"},{id:6,label:"Sáb",name:"saturday"},{id:0,label:"Dom",name:"sunday"}],ds=({isOpen:r,onClose:e,initialData:t})=>{const{user:s,refreshData:n,availabilitySlots:o}=$e(),{toast:d}=Ze(),[y,H]=j.useState(new Date),[g,_]=j.useState([{start:"09:00",end:"10:00"}]),[N,P]=j.useState(!1),[b,E]=j.useState({enabled:!1,days:[],until:Q(V(new Date,30),"yyyy-MM-dd")}),[l,h]=j.useState(!1),[v,q]=j.useState(!1),[B,G]=j.useState([]),T=t?.existingSlot,te=j.useCallback(()=>{const i=t?.date&&Z(new Date(t.date))?new Date(t.date):new Date;if(H(i),t?.existingSlot){const{start_time:c,end_time:w}=t.existingSlot;_([{start:Q(ie(c),"HH:mm"),end:Q(ie(w),"HH:mm"),id:t.existingSlot.id}])}else _([{start:t?.time||"09:00",end:"10:00"}]);E({enabled:!1,days:[],until:Q(V(new Date,30),"yyyy-MM-dd")})},[t]);j.useEffect(()=>{r&&te()},[r,te]);const se=(i,c,w)=>{_(C=>{const Y=[...C];return Y[i][c]=w,Y})},ke=()=>_([...g,{start:"10:00",end:"11:00"}]),Me=i=>_(g.filter((c,w)=>w!==i)),_e=i=>{E(c=>({...c,days:c.days.includes(i)?c.days.filter(w=>w!==i):[...c.days,i]}))},Ne=()=>{const i=[];if(!b.enabled||b.days.length===0)g.forEach(c=>{const[w,C]=c.start.split(":").map(Number),[Y,I]=c.end.split(":").map(Number),L=F(W(y,w),C),A=F(W(y,Y),I);i.push({user_id:s.id,start_time:L.toISOString(),end_time:A.toISOString()})});else{const c=me(b.until,"yyyy-MM-dd",new Date);if(!Z(c))return d({title:"Data inválida",description:"A data final da repetição é inválida.",variant:"destructive"}),[];ot({start:y,end:c}).filter(I=>b.days.includes(ct(I))).forEach(I=>{g.forEach(L=>{const[A,Ee]=L.start.split(":").map(Number),[Ye,qe]=L.end.split(":").map(Number),Ce=F(W(I,A),Ee),Le=F(W(I,Ye),qe);i.push({user_id:s.id,start_time:Ce.toISOString(),end_time:Le.toISOString()})})})}return i},Pe=i=>{const c=new Set(o.map(w=>new Date(w.start_time).getTime()));return i.some(w=>c.has(new Date(w.start_time).getTime()))},re=async i=>{P(!0);try{if(i.length===0){d({title:"Nenhum horário para salvar",description:"Verifique as configurações de repetição e os horários.",variant:"warning"});return}const{error:c}=await U.from("availability_slots").insert(i);if(c)throw c;d({title:"Disponibilidade salva!",description:`${i.length} horário(s) adicionado(s) à sua agenda.`}),await n("availability_slots"),e()}catch(c){d({title:"Erro ao salvar disponibilidade",description:c.message,variant:"destructive"})}finally{P(!1),q(!1)}},je=async()=>{if(!s)return;const i=Ne();if(i.length===0&&(!b.enabled||b.days.length>0)){P(!1);return}G(i),Pe(i)?q(!0):await re(i)},He=async()=>{if(!(!s||!T)){P(!0);try{const i=g[0],[c,w]=i.start.split(":").map(Number),[C,Y]=i.end.split(":").map(Number),I=F(W(y,c),w),L=F(W(y,C),Y),{error:A}=await U.from("availability_slots").update({start_time:I.toISOString(),end_time:L.toISOString()}).eq("id",i.id).eq("user_id",s.id);if(A)throw A;d({title:"Horário atualizado com sucesso!"}),await n("availability_slots"),e()}catch(i){d({title:"Erro ao atualizar horário",description:i.message,variant:"destructive"})}finally{P(!1)}}},Ie=async()=>{if(!(!s||!T||!t.existingSlot)){P(!0);try{const{error:i}=await U.from("availability_slots").delete().eq("id",t.existingSlot.id).eq("user_id",s.id);if(i)throw i;d({title:"Horário removido com sucesso!"}),await n("availability_slots"),h(!1),e()}catch(i){d({title:"Erro ao remover horário",description:i.message,variant:"destructive"})}finally{P(!1)}}},Oe=i=>{const c=i.target.value,w=me(c,"yyyy-MM-dd",new Date);Z(w)&&H(w)};return a.jsxs(a.Fragment,{children:[a.jsx(Ke,{open:r,onOpenChange:e,children:a.jsxs(Ue,{children:[a.jsxs(Je,{children:[a.jsx(Se,{children:T?"Editar Horário":"Adicionar Disponibilidade"}),a.jsx(et,{children:T?`Ajuste o horário de ${Q(y,"dd 'de' MMMM 'de' yyyy",{locale:it})}.`:"Defina os horários em que você está disponível."})]}),a.jsxs("div",{className:"space-y-4 py-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{children:[a.jsxs(X,{htmlFor:"date",className:"flex items-center gap-2 mb-2",children:[a.jsx(tt,{className:"w-4 h-4"})," Data"]}),a.jsx(z,{id:"date",type:"date",value:Q(y,"yyyy-MM-dd"),onChange:Oe,disabled:T})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(X,{className:"flex items-center gap-2 mb-2",children:[a.jsx(st,{className:"w-4 h-4"})," Horários"]}),g.map((i,c)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(z,{type:"time",value:i.start,onChange:w=>se(c,"start",w.target.value)}),a.jsx("span",{children:"até"}),a.jsx(z,{type:"time",value:i.end,onChange:w=>se(c,"end",w.target.value)}),!T&&a.jsx(R,{variant:"ghost",size:"icon",onClick:()=>Me(c),children:a.jsx(oe,{className:"w-4 h-4 text-destructive"})})]},c)),!T&&a.jsxs(R,{variant:"outline",size:"sm",onClick:ke,className:"w-full",children:[a.jsx(rt,{className:"w-4 h-4 mr-2"})," Adicionar horário"]})]}),!T&&a.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(X,{htmlFor:"repeat",className:"flex items-center gap-2",children:[a.jsx(as,{className:"w-4 h-4"})," Repetir"]}),a.jsx("input",{type:"checkbox",id:"repeat",className:"toggle-checkbox",checked:b.enabled,onChange:i=>E(c=>({...c,enabled:i.target.checked}))})]}),b.enabled&&a.jsxs("div",{className:"space-y-4 pl-4 border-l-2",children:[a.jsxs("div",{children:[a.jsx(X,{className:"mb-2 block",children:"Nos dias:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:is.map(i=>a.jsx(R,{variant:b.days.includes(i.id)?"default":"outline",size:"sm",onClick:()=>_e(i.id),className:"flex-1",children:i.label},i.id))})]}),a.jsxs("div",{children:[a.jsx(X,{htmlFor:"repeatUntil",className:"mb-2 block",children:"Até:"}),a.jsx(z,{id:"repeatUntil",type:"date",value:b.until,onChange:i=>E(c=>({...c,until:i.target.value}))})]})]})]})]}),a.jsxs(nt,{className:"flex-col sm:flex-row sm:justify-between",children:[T?a.jsxs(R,{variant:"destructive",disabled:N,onClick:()=>h(!0),children:[a.jsx(oe,{className:"w-4 h-4 mr-2"}),"Excluir"]}):a.jsx("div",{}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(R,{variant:"outline",onClick:e,children:"Cancelar"}),a.jsxs(R,{onClick:T?He:je,disabled:N,children:[N&&a.jsx(K,{className:"w-4 h-4 mr-2 animate-spin"}),T?"Salvar Alterações":"Salvar Disponibilidade"]})]})]})]})}),a.jsx(ce,{open:l,onOpenChange:h,children:a.jsxs(le,{children:[a.jsxs(ue,{children:[a.jsx(de,{children:"Tem certeza?"}),a.jsx(he,{children:"Esta ação não pode ser desfeita. Isso removerá permanentemente o horário disponível da sua agenda."})]}),a.jsxs(we,{children:[a.jsx(fe,{children:"Cancelar"}),a.jsx(pe,{onClick:Ie,className:"bg-destructive hover:bg-destructive/90",children:N?a.jsx(K,{className:"w-4 h-4 animate-spin"}):"Continuar"})]})]})}),a.jsx(ce,{open:v,onOpenChange:q,children:a.jsxs(le,{children:[a.jsxs(ue,{children:[a.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2",children:[a.jsx(at,{className:"h-6 w-6 text-yellow-500"}),a.jsx(de,{children:"Horário Duplicado"})]}),a.jsx(he,{children:"Você já possui um ou mais horários disponíveis para a mesma data e hora. Deseja criar uma vaga adicional mesmo assim?"})]}),a.jsxs(we,{children:[a.jsx(fe,{children:"Não, cancelar"}),a.jsx(pe,{onClick:()=>re(B),children:N?a.jsx(K,{className:"w-4 h-4 animate-spin"}):"Sim, criar vaga adicional"})]})]})})]})};export{ds as A};
