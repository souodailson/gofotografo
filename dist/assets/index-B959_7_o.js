const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-C0asI7-B.js","assets/defineProperty-C-ST8_Gu.js","assets/Dashboard-Cy3Ojmxa.js","assets/index-BkzoHSh8.js","assets/index-Chjiymov.js","assets/index-DcEOeknW.js","assets/skeleton-DGr2DvYe.js","assets/tooltip-Cwgo7U0h.js","assets/extends-CF3RwP-h.js","assets/target-0v8Xu6Ir.js","assets/trophy-C4AHTxGd.js","assets/eye-off-CVDThO4Q.js","assets/settings-Cakr_w_3.js","assets/useCardHoverEffect-OZDMdtp8.js","assets/LazyImage-w8qN2dVT.js","assets/receipt-D12oCdOp.js","assets/shield-check-CjVSLj8l.js","assets/trending-down-Ca0GvqbE.js","assets/trending-up-CJXHKgjy.js","assets/PieChart-C4-pnNYG.js","assets/alert-dialog-CMWSZjMP.js","assets/list-BWAYK6lC.js","assets/pie-chart-CuOhjEBx.js","assets/more-vertical-_AfS99pC.js","assets/pen-square-CcxMKlNU.js","assets/cake-BjucJzo4.js","assets/progress-CvQypriY.js","assets/isSameMonth-C4Oyy8q6.js","assets/subMonths-BcpZhqkJ.js","assets/grip-vertical-B8wuY_M6.js","assets/Clients-CsjIaY-s.js","assets/link-BuAO9sRO.js","assets/search-DecR3P-8.js","assets/filter-BPHGTg9p.js","assets/message-square-DK6t4m6u.js","assets/ClientDetail-KiR2tFa7.js","assets/tabs-5JwcCaKq.js","assets/plus-circle-B0lITbZK.js","assets/map-pin-DE1Z08iO.js","assets/heart-dbyQpRUf.js","assets/image-CjjvHyfl.js","assets/pen-line-BJQxJtfs.js","assets/upload-cloud-BQ_2h3Tg.js","assets/file-spreadsheet-BlFo8TCQ.js","assets/calendar-days-Ch_ciOqy.js","assets/Workflow-CI3xvUGn.js","assets/dnd.esm-CNSIsYfb.js","assets/tiny-invariant-CopsF_GD.js","assets/route-DgUpNPMr.js","assets/align-justify-pHCYe3KW.js","assets/chevron-up-ckAvg4TR.js","assets/archive-DxXold_A.js","assets/message-circle-1RwEbKRh.js","assets/palette-DYpEW6qD.js","assets/list-checks-Cw-iCUHK.js","assets/Financial-DYv4HZE5.js","assets/hourglass-COrApS9p.js","assets/subDays-_bF1dfTa.js","assets/endOfDay-JYFcGhf_.js","assets/startOfMonth-DEvSie1z.js","assets/endOfMonth-3DNm6jXm.js","assets/Calendar-zOD9pl5T.js","assets/googleCalendar-BZdMauPh.js","assets/FeatureRestrictionModal-BL67-6iV.js","assets/popover-CitvH7H0.js","assets/getDay-BSUxkliI.js","assets/constructNow-COCC0ODr.js","assets/external-link-BU0ovJ_C.js","assets/switch-wgn4gd4-.js","assets/copy-BXl6xJ0E.js","assets/AvailabilityModal-ByJqrr8w.js","assets/compass-C8QL0IWP.js","assets/Reports-D3BKSVim.js","assets/jspdf.plugin.autotable-DtM0_LT_.js","assets/bar-chart-3-i6ZqdCjg.js","assets/alert-circle-CbRmaHpq.js","assets/Settings-BFh48DUU.js","assets/globe-CF66p-wU.js","assets/shield-CP-XtGxN.js","assets/bell-oSlczNUx.js","assets/refresh-cw-BRVl3XNZ.js","assets/formatDistanceToNow-Zcqj8kTl.js","assets/life-buoy-hFAtqEiP.js","assets/lightbulb-B8StSBJ3.js","assets/AccountSettings-ZiULjjVf.js","assets/upload-CdVbUmbv.js","assets/ServicePackages-CUW3KVIz.js","assets/MySetup-BWbG226U.js","assets/type-CEpyDFf0.js","assets/Precifique-Ba04F0SA.js","assets/percent-B9rJ4Jot.js","assets/ReservaInteligente-B6vFUxnp.js","assets/more-horizontal-rRStGP3z.js","assets/Boards-CGhTxAzf.js","assets/file-plus-jxORu2LL.js","assets/useDebounce-DlCjF56H.js","assets/Boards-D-xltKOS.css","assets/BoardDetail-CwPfV1Xi.js","assets/check-square-B62HY2Cl.js","assets/square-Yty-hvSV.js","assets/share-2-BzF6Ks-n.js","assets/PlansPage-lkgnZIQN.js","assets/star-CA4LwDww.js","assets/zap-D3z7zAdb.js","assets/FormsPage-BJ9gmuqT.js","assets/user-plus-BKmpNAq4.js","assets/megaphone-CQ2MIIsd.js","assets/FormSuccessModal-BjibeRgW.js","assets/FormEditorPage-B1TCOEcL.js","assets/CampaignSubmissionsPage-l64uSLTe.js","assets/StudioPage-DTLekyMt.js","assets/heart-handshake-Cz6cK37r.js","assets/baby-DPRhZBY9.js","assets/ContractListPage-BC_TYlwZ.js","assets/table-BGo4pF6F.js","assets/ContractEditorPage-DEMbtRCL.js","assets/underline-DXQwgy9O.js","assets/ProposalEditorPage-BJlYeWYa.js","assets/EditorRulers-4JP48acx.js","assets/EditorCanvas-u08Q0126.js","assets/instagram-P835G8_n.js","assets/EditorCanvas-BxwK8EBg.css","assets/html2canvas.esm-BfxBtG_O.js","assets/ban-CuKnu2ih.js","assets/video-ThlXC_2j.js","assets/AvailabilityManagerPage-CA94zbph.js","assets/ReferralsPage-CVwSb-yF.js","assets/DataManagementPage-tkKK4qNS.js","assets/GoMovPage-hS4lhJ7Z.js","assets/calculator-BK-BNoTR.js","assets/car-DHEYQhrS.js","assets/InspiraPage-JJhPXN-n.js","assets/SeasonPage-Czao5x0l.js","assets/flower-DYh_g6B1.js","assets/sun-CZsDp_cG.js","assets/RespostasRapidasPage-B-PLx6B6.js","assets/SpotPage-DvYUhrEK.js","assets/RivalPage-UjdvHTVF.js","assets/MetasPage-DrMyuQWX.js","assets/activity-ClDi2R3z.js","assets/OpportunePage-Cg8_Daoe.js","assets/FindPageSimple-Cgg5U-8l.js","assets/FindPage--VLpaSF_.js","assets/LandingPage-BCcqevnS.js","assets/PrivacyPolicyPage-WFKEXTHS.js","assets/LoginPage-DjWdGsvH.js","assets/AuthLayout-BKaxNl4i.js","assets/log-in-B8Cq_sn1.js","assets/SignupPage-CjUwsq3C.js","assets/ForgotPasswordPage-4Zq-BKZe.js","assets/UpdatePasswordPage-Dnu_XGpb.js","assets/AdminLoginPage-Cc1uQ6vQ.js","assets/AdminLayout-xGZibkUw.js","assets/PublicBookingPage-C80m1eJ6.js","assets/PublicBoardPage-C0ikiXtL.js","assets/PublicPortfolioPage-CBKCwYdA.js","assets/BlogPostPage-CEZVhdc-.js","assets/ProposalEditorPage-DpgUH3w5.js","assets/CustomPageViewer-CB1foSiQ.js","assets/TutorialsPage-D6sEyDWj.js","assets/ProposalPublicView-OxaBvtUy.js"])))=>i.map(i=>d[i]);
var v5=n=>{throw TypeError(n)};var Db=(n,e,t)=>e.has(n)||v5("Cannot "+t);var Gc=(n,e,t)=>(Db(n,e,"read from private field"),t?t.call(n):e.get(n)),em=(n,e,t)=>e.has(n)?v5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),jg=(n,e,t,r)=>(Db(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),j0=(n,e,t)=>(Db(n,e,"access private method"),t);var y5=(n,e,t,r)=>({set _(i){jg(n,e,i,t)},get _(){return Gc(n,e,r)}});function uE(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function hj(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Fb={exports:{}},Mg={},Bb={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5;function fj(){if(b5)return $n;b5=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(se){return se===null||typeof se!="object"?null:(se=p&&se[p]||se["@@iterator"],typeof se=="function"?se:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function k(se,F,te){this.props=se,this.context=F,this.refs=x,this.updater=te||b}k.prototype.isReactComponent={},k.prototype.setState=function(se,F){if(typeof se!="object"&&typeof se!="function"&&se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,se,F,"setState")},k.prototype.forceUpdate=function(se){this.updater.enqueueForceUpdate(this,se,"forceUpdate")};function E(){}E.prototype=k.prototype;function T(se,F,te){this.props=se,this.context=F,this.refs=x,this.updater=te||b}var L=T.prototype=new E;L.constructor=T,_(L,k.prototype),L.isPureReactComponent=!0;var j=Array.isArray,B=Object.prototype.hasOwnProperty,W={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function q(se,F,te){var Q,ce={},pe=null,ge=null;if(F!=null)for(Q in F.ref!==void 0&&(ge=F.ref),F.key!==void 0&&(pe=""+F.key),F)B.call(F,Q)&&!U.hasOwnProperty(Q)&&(ce[Q]=F[Q]);var _e=arguments.length-2;if(_e===1)ce.children=te;else if(1<_e){for(var Te=Array(_e),Ge=0;Ge<_e;Ge++)Te[Ge]=arguments[Ge+2];ce.children=Te}if(se&&se.defaultProps)for(Q in _e=se.defaultProps,_e)ce[Q]===void 0&&(ce[Q]=_e[Q]);return{$$typeof:n,type:se,key:pe,ref:ge,props:ce,_owner:W.current}}function ie(se,F){return{$$typeof:n,type:se.type,key:F,ref:se.ref,props:se.props,_owner:se._owner}}function ve(se){return typeof se=="object"&&se!==null&&se.$$typeof===n}function $(se){var F={"=":"=0",":":"=2"};return"$"+se.replace(/[=:]/g,function(te){return F[te]})}var z=/\/+/g;function le(se,F){return typeof se=="object"&&se!==null&&se.key!=null?$(""+se.key):F.toString(36)}function ne(se,F,te,Q,ce){var pe=typeof se;(pe==="undefined"||pe==="boolean")&&(se=null);var ge=!1;if(se===null)ge=!0;else switch(pe){case"string":case"number":ge=!0;break;case"object":switch(se.$$typeof){case n:case e:ge=!0}}if(ge)return ge=se,ce=ce(ge),se=Q===""?"."+le(ge,0):Q,j(ce)?(te="",se!=null&&(te=se.replace(z,"$&/")+"/"),ne(ce,F,te,"",function(Ge){return Ge})):ce!=null&&(ve(ce)&&(ce=ie(ce,te+(!ce.key||ge&&ge.key===ce.key?"":(""+ce.key).replace(z,"$&/")+"/")+se)),F.push(ce)),1;if(ge=0,Q=Q===""?".":Q+":",j(se))for(var _e=0;_e<se.length;_e++){pe=se[_e];var Te=Q+le(pe,_e);ge+=ne(pe,F,te,Te,ce)}else if(Te=m(se),typeof Te=="function")for(se=Te.call(se),_e=0;!(pe=se.next()).done;)pe=pe.value,Te=Q+le(pe,_e++),ge+=ne(pe,F,te,Te,ce);else if(pe==="object")throw F=String(se),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(se).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return ge}function ee(se,F,te){if(se==null)return se;var Q=[],ce=0;return ne(se,Q,"","",function(pe){return F.call(te,pe,ce++)}),Q}function G(se){if(se._status===-1){var F=se._result;F=F(),F.then(function(te){(se._status===0||se._status===-1)&&(se._status=1,se._result=te)},function(te){(se._status===0||se._status===-1)&&(se._status=2,se._result=te)}),se._status===-1&&(se._status=0,se._result=F)}if(se._status===1)return se._result.default;throw se._result}var he={current:null},X={transition:null},fe={ReactCurrentDispatcher:he,ReactCurrentBatchConfig:X,ReactCurrentOwner:W};function ue(){throw Error("act(...) is not supported in production builds of React.")}return $n.Children={map:ee,forEach:function(se,F,te){ee(se,function(){F.apply(this,arguments)},te)},count:function(se){var F=0;return ee(se,function(){F++}),F},toArray:function(se){return ee(se,function(F){return F})||[]},only:function(se){if(!ve(se))throw Error("React.Children.only expected to receive a single React element child.");return se}},$n.Component=k,$n.Fragment=t,$n.Profiler=i,$n.PureComponent=T,$n.StrictMode=r,$n.Suspense=c,$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,$n.act=ue,$n.cloneElement=function(se,F,te){if(se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+se+".");var Q=_({},se.props),ce=se.key,pe=se.ref,ge=se._owner;if(F!=null){if(F.ref!==void 0&&(pe=F.ref,ge=W.current),F.key!==void 0&&(ce=""+F.key),se.type&&se.type.defaultProps)var _e=se.type.defaultProps;for(Te in F)B.call(F,Te)&&!U.hasOwnProperty(Te)&&(Q[Te]=F[Te]===void 0&&_e!==void 0?_e[Te]:F[Te])}var Te=arguments.length-2;if(Te===1)Q.children=te;else if(1<Te){_e=Array(Te);for(var Ge=0;Ge<Te;Ge++)_e[Ge]=arguments[Ge+2];Q.children=_e}return{$$typeof:n,type:se.type,key:ce,ref:pe,props:Q,_owner:ge}},$n.createContext=function(se){return se={$$typeof:o,_currentValue:se,_currentValue2:se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},se.Provider={$$typeof:s,_context:se},se.Consumer=se},$n.createElement=q,$n.createFactory=function(se){var F=q.bind(null,se);return F.type=se,F},$n.createRef=function(){return{current:null}},$n.forwardRef=function(se){return{$$typeof:a,render:se}},$n.isValidElement=ve,$n.lazy=function(se){return{$$typeof:h,_payload:{_status:-1,_result:se},_init:G}},$n.memo=function(se,F){return{$$typeof:u,type:se,compare:F===void 0?null:F}},$n.startTransition=function(se){var F=X.transition;X.transition={};try{se()}finally{X.transition=F}},$n.unstable_act=ue,$n.useCallback=function(se,F){return he.current.useCallback(se,F)},$n.useContext=function(se){return he.current.useContext(se)},$n.useDebugValue=function(){},$n.useDeferredValue=function(se){return he.current.useDeferredValue(se)},$n.useEffect=function(se,F){return he.current.useEffect(se,F)},$n.useId=function(){return he.current.useId()},$n.useImperativeHandle=function(se,F,te){return he.current.useImperativeHandle(se,F,te)},$n.useInsertionEffect=function(se,F){return he.current.useInsertionEffect(se,F)},$n.useLayoutEffect=function(se,F){return he.current.useLayoutEffect(se,F)},$n.useMemo=function(se,F){return he.current.useMemo(se,F)},$n.useReducer=function(se,F,te){return he.current.useReducer(se,F,te)},$n.useRef=function(se){return he.current.useRef(se)},$n.useState=function(se){return he.current.useState(se)},$n.useSyncExternalStore=function(se,F,te){return he.current.useSyncExternalStore(se,F,te)},$n.useTransition=function(){return he.current.useTransition()},$n.version="18.3.1",$n}var w5;function d1(){return w5||(w5=1,Bb.exports=fj()),Bb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x5;function pj(){if(x5)return Mg;x5=1;var n=d1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,u){var h,p={},m=null,b=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(b=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(p[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)p[h]===void 0&&(p[h]=c[h]);return{$$typeof:e,type:a,key:m,ref:b,props:p,_owner:i.current}}return Mg.Fragment=t,Mg.jsx=o,Mg.jsxs=o,Mg}var _5;function mj(){return _5||(_5=1,Fb.exports=pj()),Fb.exports}var y=mj(),N=d1();const vn=Bv(N),tx=uE({__proto__:null,default:vn},[N]);var M0={},zb={exports:{}},Xa={},Ub={exports:{}},$b={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function gj(){return S5||(S5=1,function(n){function e(X,fe){var ue=X.length;X.push(fe);e:for(;0<ue;){var se=ue-1>>>1,F=X[se];if(0<i(F,fe))X[se]=fe,X[ue]=F,ue=se;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var fe=X[0],ue=X.pop();if(ue!==fe){X[0]=ue;e:for(var se=0,F=X.length,te=F>>>1;se<te;){var Q=2*(se+1)-1,ce=X[Q],pe=Q+1,ge=X[pe];if(0>i(ce,ue))pe<F&&0>i(ge,ce)?(X[se]=ge,X[pe]=ue,se=pe):(X[se]=ce,X[Q]=ue,se=Q);else if(pe<F&&0>i(ge,ue))X[se]=ge,X[pe]=ue,se=pe;else break e}}return fe}function i(X,fe){var ue=X.sortIndex-fe.sortIndex;return ue!==0?ue:X.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,p=null,m=3,b=!1,_=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(X){for(var fe=t(u);fe!==null;){if(fe.callback===null)r(u);else if(fe.startTime<=X)r(u),fe.sortIndex=fe.expirationTime,e(c,fe);else break;fe=t(u)}}function j(X){if(x=!1,L(X),!_)if(t(c)!==null)_=!0,G(B);else{var fe=t(u);fe!==null&&he(j,fe.startTime-X)}}function B(X,fe){_=!1,x&&(x=!1,E(q),q=-1),b=!0;var ue=m;try{for(L(fe),p=t(c);p!==null&&(!(p.expirationTime>fe)||X&&!$());){var se=p.callback;if(typeof se=="function"){p.callback=null,m=p.priorityLevel;var F=se(p.expirationTime<=fe);fe=n.unstable_now(),typeof F=="function"?p.callback=F:p===t(c)&&r(c),L(fe)}else r(c);p=t(c)}if(p!==null)var te=!0;else{var Q=t(u);Q!==null&&he(j,Q.startTime-fe),te=!1}return te}finally{p=null,m=ue,b=!1}}var W=!1,U=null,q=-1,ie=5,ve=-1;function $(){return!(n.unstable_now()-ve<ie)}function z(){if(U!==null){var X=n.unstable_now();ve=X;var fe=!0;try{fe=U(!0,X)}finally{fe?le():(W=!1,U=null)}}else W=!1}var le;if(typeof T=="function")le=function(){T(z)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=z,le=function(){ee.postMessage(null)}}else le=function(){k(z,0)};function G(X){U=X,W||(W=!0,le())}function he(X,fe){q=k(function(){X(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){_||b||(_=!0,G(B))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(X){switch(m){case 1:case 2:case 3:var fe=3;break;default:fe=m}var ue=m;m=fe;try{return X()}finally{m=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,fe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=m;m=X;try{return fe()}finally{m=ue}},n.unstable_scheduleCallback=function(X,fe,ue){var se=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?se+ue:se):ue=se,X){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ue+F,X={id:h++,callback:fe,priorityLevel:X,startTime:ue,expirationTime:F,sortIndex:-1},ue>se?(X.sortIndex=ue,e(u,X),t(c)===null&&X===t(u)&&(x?(E(q),q=-1):x=!0,he(j,ue-se))):(X.sortIndex=F,e(c,X),_||b||(_=!0,G(B))),X},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(X){var fe=m;return function(){var ue=m;m=fe;try{return X.apply(this,arguments)}finally{m=ue}}}}($b)),$b}var A5;function vj(){return A5||(A5=1,Ub.exports=gj()),Ub.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5;function yj(){if(C5)return Xa;C5=1;var n=d1(),e=vj();function t(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(l,d){o(l,d),o(l+"Capture",d)}function o(l,d){for(i[l]=d,l=0;l<d.length;l++)r.add(d[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(l){return c.call(p,l)?!0:c.call(h,l)?!1:u.test(l)?p[l]=!0:(h[l]=!0,!1)}function b(l,d,v,S){if(v!==null&&v.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return S?!1:v!==null?!v.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,d,v,S){if(d===null||typeof d>"u"||b(l,d,v,S))return!0;if(S)return!1;if(v!==null)switch(v.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function x(l,d,v,S,R,M,Z){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=S,this.attributeNamespace=R,this.mustUseProperty=v,this.propertyName=l,this.type=d,this.sanitizeURL=M,this.removeEmptyString=Z}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){k[l]=new x(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];k[d]=new x(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){k[l]=new x(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){k[l]=new x(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){k[l]=new x(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){k[l]=new x(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){k[l]=new x(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){k[l]=new x(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){k[l]=new x(l,5,!1,l.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function T(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(E,T);k[d]=new x(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(E,T);k[d]=new x(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(E,T);k[d]=new x(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){k[l]=new x(l,1,!1,l.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){k[l]=new x(l,1,!1,l.toLowerCase(),null,!0,!0)});function L(l,d,v,S){var R=k.hasOwnProperty(d)?k[d]:null;(R!==null?R.type!==0:S||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(_(d,v,R,S)&&(v=null),S||R===null?m(d)&&(v===null?l.removeAttribute(d):l.setAttribute(d,""+v)):R.mustUseProperty?l[R.propertyName]=v===null?R.type===3?!1:"":v:(d=R.attributeName,S=R.attributeNamespace,v===null?l.removeAttribute(d):(R=R.type,v=R===3||R===4&&v===!0?"":""+v,S?l.setAttributeNS(S,d,v):l.setAttribute(d,v))))}var j=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),W=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),he=Symbol.for("react.offscreen"),X=Symbol.iterator;function fe(l){return l===null||typeof l!="object"?null:(l=X&&l[X]||l["@@iterator"],typeof l=="function"?l:null)}var ue=Object.assign,se;function F(l){if(se===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);se=d&&d[1]||""}return`
`+se+l}var te=!1;function Q(l,d){if(!l||te)return"";te=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(qe){var S=qe}Reflect.construct(l,[],d)}else{try{d.call()}catch(qe){S=qe}l.call(d.prototype)}else{try{throw Error()}catch(qe){S=qe}l()}}catch(qe){if(qe&&S&&typeof qe.stack=="string"){for(var R=qe.stack.split(`
`),M=S.stack.split(`
`),Z=R.length-1,be=M.length-1;1<=Z&&0<=be&&R[Z]!==M[be];)be--;for(;1<=Z&&0<=be;Z--,be--)if(R[Z]!==M[be]){if(Z!==1||be!==1)do if(Z--,be--,0>be||R[Z]!==M[be]){var ke=`
`+R[Z].replace(" at new "," at ");return l.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",l.displayName)),ke}while(1<=Z&&0<=be);break}}}finally{te=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?F(l):""}function ce(l){switch(l.tag){case 5:return F(l.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return l=Q(l.type,!1),l;case 11:return l=Q(l.type.render,!1),l;case 1:return l=Q(l.type,!0),l;default:return""}}function pe(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case U:return"Fragment";case W:return"Portal";case ie:return"Profiler";case q:return"StrictMode";case le:return"Suspense";case ne:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case $:return(l.displayName||"Context")+".Consumer";case ve:return(l._context.displayName||"Context")+".Provider";case z:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ee:return d=l.displayName||null,d!==null?d:pe(l.type)||"Memo";case G:d=l._payload,l=l._init;try{return pe(l(d))}catch{}}return null}function ge(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(d);case 8:return d===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function _e(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Te(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Ge(l){var d=Te(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),S=""+l[d];if(!l.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var R=v.get,M=v.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return R.call(this)},set:function(Z){S=""+Z,M.call(this,Z)}}),Object.defineProperty(l,d,{enumerable:v.enumerable}),{getValue:function(){return S},setValue:function(Z){S=""+Z},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Ye(l){l._valueTracker||(l._valueTracker=Ge(l))}function at(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var v=d.getValue(),S="";return l&&(S=Te(l)?l.checked?"true":"false":l.value),l=S,l!==v?(d.setValue(l),!0):!1}function ht(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ct(l,d){var v=d.checked;return ue({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??l._wrapperState.initialChecked})}function We(l,d){var v=d.defaultValue==null?"":d.defaultValue,S=d.checked!=null?d.checked:d.defaultChecked;v=_e(d.value!=null?d.value:v),l._wrapperState={initialChecked:S,initialValue:v,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function we(l,d){d=d.checked,d!=null&&L(l,"checked",d,!1)}function Mt(l,d){we(l,d);var v=_e(d.value),S=d.type;if(v!=null)S==="number"?(v===0&&l.value===""||l.value!=v)&&(l.value=""+v):l.value!==""+v&&(l.value=""+v);else if(S==="submit"||S==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?ut(l,d.type,v):d.hasOwnProperty("defaultValue")&&ut(l,d.type,_e(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function Rt(l,d,v){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var S=d.type;if(!(S!=="submit"&&S!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,v||d===l.value||(l.value=d),l.defaultValue=d}v=l.name,v!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,v!==""&&(l.name=v)}function ut(l,d,v){(d!=="number"||ht(l.ownerDocument)!==l)&&(v==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+v&&(l.defaultValue=""+v))}var mt=Array.isArray;function gt(l,d,v,S){if(l=l.options,d){d={};for(var R=0;R<v.length;R++)d["$"+v[R]]=!0;for(v=0;v<l.length;v++)R=d.hasOwnProperty("$"+l[v].value),l[v].selected!==R&&(l[v].selected=R),R&&S&&(l[v].defaultSelected=!0)}else{for(v=""+_e(v),d=null,R=0;R<l.length;R++){if(l[R].value===v){l[R].selected=!0,S&&(l[R].defaultSelected=!0);return}d!==null||l[R].disabled||(d=l[R])}d!==null&&(d.selected=!0)}}function bt(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return ue({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Ot(l,d){var v=d.value;if(v==null){if(v=d.children,d=d.defaultValue,v!=null){if(d!=null)throw Error(t(92));if(mt(v)){if(1<v.length)throw Error(t(93));v=v[0]}d=v}d==null&&(d=""),v=d}l._wrapperState={initialValue:_e(v)}}function Qt(l,d){var v=_e(d.value),S=_e(d.defaultValue);v!=null&&(v=""+v,v!==l.value&&(l.value=v),d.defaultValue==null&&l.defaultValue!==v&&(l.defaultValue=v)),S!=null&&(l.defaultValue=""+S)}function Xt(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function un(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?un(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Vt,St=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,v,S,R){MSApp.execUnsafeLocalFunction(function(){return l(d,v,S,R)})}:l}(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Vt=Vt||document.createElement("div"),Vt.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Vt.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function Pt(l,d){if(d){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=d;return}}l.textContent=d}var wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oi=["Webkit","ms","Moz","O"];Object.keys(wt).forEach(function(l){oi.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),wt[d]=wt[l]})});function Pn(l,d,v){return d==null||typeof d=="boolean"||d===""?"":v||typeof d!="number"||d===0||wt.hasOwnProperty(l)&&wt[l]?(""+d).trim():d+"px"}function Zi(l,d){l=l.style;for(var v in d)if(d.hasOwnProperty(v)){var S=v.indexOf("--")===0,R=Pn(v,d[v],S);v==="float"&&(v="cssFloat"),S?l.setProperty(v,R):l[v]=R}}var Jn=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ir(l,d){if(d){if(Jn[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function Ji(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function ea(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var vr=null,pi=null,Ri=null;function Sr(l){if(l=Oi(l)){if(typeof vr!="function")throw Error(t(280));var d=l.stateNode;d&&(d=xd(d),vr(l.stateNode,l.type,d))}}function nn(l){pi?Ri?Ri.push(l):Ri=[l]:pi=l}function qn(){if(pi){var l=pi,d=Ri;if(Ri=pi=null,Sr(l),d)for(l=0;l<d.length;l++)Sr(d[l])}}function Ra(l,d){return l(d)}function ei(){}var zs=!1;function lo(l,d,v){if(zs)return l(d,v);zs=!0;try{return Ra(l,d,v)}finally{zs=!1,(pi!==null||Ri!==null)&&(ei(),qn())}}function Wt(l,d){var v=l.stateNode;if(v===null)return null;var S=xd(v);if(S===null)return null;v=S[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(t(231,d,typeof v));return v}var Ii=!1;if(a)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Ii=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Ii=!1}function Si(l,d,v,S,R,M,Z,be,ke){var qe=Array.prototype.slice.call(arguments,3);try{d.apply(v,qe)}catch(ct){this.onError(ct)}}var Ar=!1,Cr=null,Ai=!1,Ia=null,ta={onError:function(l){Ar=!0,Cr=l}};function co(l,d,v,S,R,M,Z,be,ke){Ar=!1,Cr=null,Si.apply(ta,arguments)}function uo(l,d,v,S,R,M,Z,be,ke){if(co.apply(this,arguments),Ar){if(Ar){var qe=Cr;Ar=!1,Cr=null}else throw Error(t(198));Ai||(Ai=!0,Ia=qe)}}function mi(l){var d=l,v=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(v=d.return),l=d.return;while(l)}return d.tag===3?v:null}function Us(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function gs(l){if(mi(l)!==l)throw Error(t(188))}function na(l){var d=l.alternate;if(!d){if(d=mi(l),d===null)throw Error(t(188));return d!==l?null:l}for(var v=l,S=d;;){var R=v.return;if(R===null)break;var M=R.alternate;if(M===null){if(S=R.return,S!==null){v=S;continue}break}if(R.child===M.child){for(M=R.child;M;){if(M===v)return gs(R),l;if(M===S)return gs(R),d;M=M.sibling}throw Error(t(188))}if(v.return!==S.return)v=R,S=M;else{for(var Z=!1,be=R.child;be;){if(be===v){Z=!0,v=R,S=M;break}if(be===S){Z=!0,S=R,v=M;break}be=be.sibling}if(!Z){for(be=M.child;be;){if(be===v){Z=!0,v=M,S=R;break}if(be===S){Z=!0,S=M,v=R;break}be=be.sibling}if(!Z)throw Error(t(189))}}if(v.alternate!==S)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?l:d}function ol(l){return l=na(l),l!==null?$l(l):null}function $l(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=$l(l);if(d!==null)return d;l=l.sibling}return null}var al=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Ve=e.unstable_requestPaint,Ke=e.unstable_now,tt=e.unstable_getCurrentPriorityLevel,Tt=e.unstable_ImmediatePriority,Nn=e.unstable_UserBlockingPriority,Dr=e.unstable_NormalPriority,$s=e.unstable_LowPriority,ja=e.unstable_IdlePriority,ll=null,No=null;function au(l){if(No&&typeof No.onCommitFiberRoot=="function")try{No.onCommitFiberRoot(ll,l,void 0,(l.current.flags&128)===128)}catch{}}var ho=Math.clz32?Math.clz32:cd,Ur=Math.log,ld=Math.LN2;function cd(l){return l>>>=0,l===0?32:31-(Ur(l)/ld|0)|0}var cl=64,ql=4194304;function Vl(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ji(l,d){var v=l.pendingLanes;if(v===0)return 0;var S=0,R=l.suspendedLanes,M=l.pingedLanes,Z=v&268435455;if(Z!==0){var be=Z&~R;be!==0?S=Vl(be):(M&=Z,M!==0&&(S=Vl(M)))}else Z=v&~R,Z!==0?S=Vl(Z):M!==0&&(S=Vl(M));if(S===0)return 0;if(d!==0&&d!==S&&(d&R)===0&&(R=S&-S,M=d&-d,R>=M||R===16&&(M&4194240)!==0))return d;if((S&4)!==0&&(S|=v&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=S;0<d;)v=31-ho(d),R=1<<v,S|=l[v],d&=~R;return S}function Cc(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(l,d){for(var v=l.suspendedLanes,S=l.pingedLanes,R=l.expirationTimes,M=l.pendingLanes;0<M;){var Z=31-ho(M),be=1<<Z,ke=R[Z];ke===-1?((be&v)===0||(be&S)!==0)&&(R[Z]=Cc(be,d)):ke<=d&&(l.expiredLanes|=be),M&=~be}}function Wl(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function lu(){var l=cl;return cl<<=1,(cl&4194240)===0&&(cl=64),l}function Ec(l){for(var d=[],v=0;31>v;v++)d.push(l);return d}function Hl(l,d,v){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-ho(d),l[d]=v}function rh(l,d){var v=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<v;){var R=31-ho(v),M=1<<R;d[R]=0,S[R]=-1,l[R]=-1,v&=~M}}function Gl(l,d){var v=l.entangledLanes|=d;for(l=l.entanglements;v;){var S=31-ho(v),R=1<<S;R&d|l[S]&d&&(l[S]|=d),v&=~R}}var Vn=0;function ra(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var ud,cu,ih,ia,Yl,ul=!1,Kl=[],Fr=null,Ma=null,sa=null,Zt=new Map,kc=new Map,Oa=[],Da="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dd(l,d){switch(l){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":Zt.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":kc.delete(d.pointerId)}}function Fa(l,d,v,S,R,M){return l===null||l.nativeEvent!==M?(l={blockedOn:d,domEventName:v,eventSystemFlags:S,nativeEvent:M,targetContainers:[R]},d!==null&&(d=Oi(d),d!==null&&cu(d)),l):(l.eventSystemFlags|=S,d=l.targetContainers,R!==null&&d.indexOf(R)===-1&&d.push(R),l)}function uu(l,d,v,S,R){switch(d){case"focusin":return Fr=Fa(Fr,l,d,v,S,R),!0;case"dragenter":return Ma=Fa(Ma,l,d,v,S,R),!0;case"mouseover":return sa=Fa(sa,l,d,v,S,R),!0;case"pointerover":var M=R.pointerId;return Zt.set(M,Fa(Zt.get(M)||null,l,d,v,S,R)),!0;case"gotpointercapture":return M=R.pointerId,kc.set(M,Fa(kc.get(M)||null,l,d,v,S,R)),!0}return!1}function du(l){var d=ua(l.target);if(d!==null){var v=mi(d);if(v!==null){if(d=v.tag,d===13){if(d=Us(v),d!==null){l.blockedOn=d,Yl(l.priority,function(){ih(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function hu(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var v=Tc(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(v===null){v=l.nativeEvent;var S=new v.constructor(v.type,v);Un=S,v.target.dispatchEvent(S),Un=null}else return d=Oi(v),d!==null&&cu(d),l.blockedOn=v,!1;d.shift()}return!0}function sh(l,d,v){hu(l)&&v.delete(d)}function sf(){ul=!1,Fr!==null&&hu(Fr)&&(Fr=null),Ma!==null&&hu(Ma)&&(Ma=null),sa!==null&&hu(sa)&&(sa=null),Zt.forEach(sh),kc.forEach(sh)}function Wn(l,d){l.blockedOn===d&&(l.blockedOn=null,ul||(ul=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sf)))}function In(l){function d(R){return Wn(R,l)}if(0<Kl.length){Wn(Kl[0],l);for(var v=1;v<Kl.length;v++){var S=Kl[v];S.blockedOn===l&&(S.blockedOn=null)}}for(Fr!==null&&Wn(Fr,l),Ma!==null&&Wn(Ma,l),sa!==null&&Wn(sa,l),Zt.forEach(d),kc.forEach(d),v=0;v<Oa.length;v++)S=Oa[v],S.blockedOn===l&&(S.blockedOn=null);for(;0<Oa.length&&(v=Oa[0],v.blockedOn===null);)du(v),v.blockedOn===null&&Oa.shift()}var fo=j.ReactCurrentBatchConfig,fu=!0;function Pc(l,d,v,S){var R=Vn,M=fo.transition;fo.transition=null;try{Vn=1,Xl(l,d,v,S)}finally{Vn=R,fo.transition=M}}function hd(l,d,v,S){var R=Vn,M=fo.transition;fo.transition=null;try{Vn=4,Xl(l,d,v,S)}finally{Vn=R,fo.transition=M}}function Xl(l,d,v,S){if(fu){var R=Tc(l,d,v,S);if(R===null)yd(l,d,S,Nc,v),dd(l,S);else if(uu(R,l,d,v,S))S.stopPropagation();else if(dd(l,S),d&4&&-1<Da.indexOf(l)){for(;R!==null;){var M=Oi(R);if(M!==null&&ud(M),M=Tc(l,d,v,S),M===null&&yd(l,d,S,Nc,v),M===R)break;R=M}R!==null&&S.stopPropagation()}else yd(l,d,S,null,v)}}var Nc=null;function Tc(l,d,v,S){if(Nc=null,l=ea(S),l=ua(l),l!==null)if(d=mi(l),d===null)l=null;else if(v=d.tag,v===13){if(l=Us(d),l!==null)return l;l=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return Nc=l,null}function fd(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tt()){case Tt:return 1;case Nn:return 4;case Dr:case $s:return 16;case ja:return 536870912;default:return 16}default:return 16}}var fr=null,Vs=null,Ci=null;function pd(){if(Ci)return Ci;var l,d=Vs,v=d.length,S,R="value"in fr?fr.value:fr.textContent,M=R.length;for(l=0;l<v&&d[l]===R[l];l++);var Z=v-l;for(S=1;S<=Z&&d[v-S]===R[M-S];S++);return Ci=R.slice(l,1<S?1-S:void 0)}function po(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Er(){return!0}function Lc(){return!1}function ai(l){function d(v,S,R,M,Z){this._reactName=v,this._targetInst=R,this.type=S,this.nativeEvent=M,this.target=Z,this.currentTarget=null;for(var be in l)l.hasOwnProperty(be)&&(v=l[be],this[be]=v?v(M):M[be]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Er:Lc,this.isPropagationStopped=Lc,this}return ue(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),d}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hl=ai(dl),Zl=ue({},dl,{view:0,detail:0}),pu=ai(Zl),gi,mu,ti,Jl=ue({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ti&&(ti&&l.type==="mousemove"?(gi=l.screenX-ti.screenX,mu=l.screenY-ti.screenY):mu=gi=0,ti=l),gi)},movementY:function(l){return"movementY"in l?l.movementY:mu}}),Rc=ai(Jl),oa=ue({},Jl,{dataTransfer:0}),gu=ai(oa),Ql=ue({},Zl,{relatedTarget:0}),Yn=ai(Ql),To=ue({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=ai(To),md=ue({},dl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),P=ai(md),H=ue({},dl,{data:0}),ye=ai(H),Ae={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Me={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ot(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Xe[l])?!!d[l]:!1}function Et(){return ot}var Ht=ue({},Zl,{key:function(l){if(l.key){var d=Ae[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=po(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Me[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(l){return l.type==="keypress"?po(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?po(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),pn=ai(Ht),rn=ue({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=ai(rn),Mr=ue({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),$r=ai(Mr),qr=ue({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ei=ai(qr),ki=ue({},Jl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Lo=ai(ki),kr=[9,13,27,32],Ws=a&&"CompositionEvent"in window,Ro=null;a&&"documentMode"in document&&(Ro=document.documentMode);var vu=a&&"TextEvent"in window&&!Ro,Ic=a&&(!Ws||Ro&&8<Ro&&11>=Ro),jc=" ",yu=!1;function bu(l,d){switch(l){case"keyup":return kr.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mc(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Vr=!1;function aa(l,d){switch(l){case"compositionend":return Mc(d);case"keypress":return d.which!==32?null:(yu=!0,jc);case"textInput":return l=d.data,l===jc&&yu?null:l;default:return null}}function wu(l,d){if(Vr)return l==="compositionend"||!Ws&&bu(l,d)?(l=pd(),Ci=Vs=fr=null,Vr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ic&&d.locale!=="ko"?null:d.data;default:return null}}var xu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!xu[l.type]:d==="textarea"}function es(l,d,v,S){nn(S),d=lh(d,"onChange"),0<d.length&&(v=new hl("onChange","change",null,v,S),l.push({event:v,listeners:d}))}var Hs=null,Io=null;function oh(l){vd(l,0)}function vs(l){var d=yn(l);if(at(d))return l}function _u(l,d){if(l==="change")return d}var za=!1;if(a){var ts;if(a){var la="oninput"in document;if(!la){var tc=document.createElement("div");tc.setAttribute("oninput","return;"),la=typeof tc.oninput=="function"}ts=la}else ts=!1;za=ts&&(!document.documentMode||9<document.documentMode)}function ys(){Hs&&(Hs.detachEvent("onpropertychange",ns),Io=Hs=null)}function ns(l){if(l.propertyName==="value"&&vs(Io)){var d=[];es(d,Io,l,ea(l)),lo(oh,d)}}function nc(l,d,v){l==="focusin"?(ys(),Hs=d,Io=v,Hs.attachEvent("onpropertychange",ns)):l==="focusout"&&ys()}function fl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return vs(Io)}function Gs(l,d){if(l==="click")return vs(d)}function Re(l,d){if(l==="input"||l==="change")return vs(d)}function Ze(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Oe=typeof Object.is=="function"?Object.is:Ze;function At(l,d){if(Oe(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var v=Object.keys(l),S=Object.keys(d);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var R=v[S];if(!c.call(d,R)||!Oe(l[R],d[R]))return!1}return!0}function $t(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function gn(l,d){var v=$t(l);l=0;for(var S;v;){if(v.nodeType===3){if(S=l+v.textContent.length,l<=d&&S>=d)return{node:v,offset:d-l};l=S}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=$t(v)}}function Pr(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Pr(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Qn(){for(var l=window,d=ht();d instanceof l.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)l=d.contentWindow;else break;d=ht(l.document)}return d}function pl(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function Oc(l){var d=Qn(),v=l.focusedElem,S=l.selectionRange;if(d!==v&&v&&v.ownerDocument&&Pr(v.ownerDocument.documentElement,v)){if(S!==null&&pl(v)){if(d=S.start,l=S.end,l===void 0&&(l=d),"selectionStart"in v)v.selectionStart=d,v.selectionEnd=Math.min(l,v.value.length);else if(l=(d=v.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var R=v.textContent.length,M=Math.min(S.start,R);S=S.end===void 0?M:Math.min(S.end,R),!l.extend&&M>S&&(R=S,S=M,M=R),R=gn(v,M);var Z=gn(v,S);R&&Z&&(l.rangeCount!==1||l.anchorNode!==R.node||l.anchorOffset!==R.offset||l.focusNode!==Z.node||l.focusOffset!==Z.offset)&&(d=d.createRange(),d.setStart(R.node,R.offset),l.removeAllRanges(),M>S?(l.addRange(d),l.extend(Z.node,Z.offset)):(d.setEnd(Z.node,Z.offset),l.addRange(d)))}}for(d=[],l=v;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)l=d[v],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Pi=a&&"documentMode"in document&&11>=document.documentMode,rs=null,ml=null,bs=null,jo=!1;function Mo(l,d,v){var S=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;jo||rs==null||rs!==ht(S)||(S=rs,"selectionStart"in S&&pl(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),bs&&At(bs,S)||(bs=S,S=lh(ml,"onSelect"),0<S.length&&(d=new hl("onSelect","select",null,d,v),l.push({event:d,listeners:S}),d.target=rs)))}function jn(l,d){var v={};return v[l.toLowerCase()]=d.toLowerCase(),v["Webkit"+l]="webkit"+d,v["Moz"+l]="moz"+d,v}var Mi={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},ws={},sr={};a&&(sr=document.createElement("div").style,"AnimationEvent"in window||(delete Mi.animationend.animation,delete Mi.animationiteration.animation,delete Mi.animationstart.animation),"TransitionEvent"in window||delete Mi.transitionend.transition);function lr(l){if(ws[l])return ws[l];if(!Mi[l])return l;var d=Mi[l],v;for(v in d)if(d.hasOwnProperty(v)&&v in sr)return ws[l]=d[v];return l}var Wr=lr("animationend"),li=lr("animationiteration"),mo=lr("animationstart"),go=lr("transitionend"),Ua=new Map,Su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(l,d){Ua.set(l,d),s(d,[l])}for(var Dc=0;Dc<Su.length;Dc++){var is=Su[Dc],xs=is.toLowerCase(),gd=is[0].toUpperCase()+is.slice(1);vo(xs,"on"+gd)}vo(Wr,"onAnimationEnd"),vo(li,"onAnimationIteration"),vo(mo,"onAnimationStart"),vo("dblclick","onDoubleClick"),vo("focusin","onFocus"),vo("focusout","onBlur"),vo(go,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function ic(l,d,v){var S=l.type||"unknown-event";l.currentTarget=v,uo(S,d,void 0,l),l.currentTarget=null}function vd(l,d){d=(d&4)!==0;for(var v=0;v<l.length;v++){var S=l[v],R=S.event;S=S.listeners;e:{var M=void 0;if(d)for(var Z=S.length-1;0<=Z;Z--){var be=S[Z],ke=be.instance,qe=be.currentTarget;if(be=be.listener,ke!==M&&R.isPropagationStopped())break e;ic(R,be,qe),M=ke}else for(Z=0;Z<S.length;Z++){if(be=S[Z],ke=be.instance,qe=be.currentTarget,be=be.listener,ke!==M&&R.isPropagationStopped())break e;ic(R,be,qe),M=ke}}}if(Ai)throw l=Ia,Ai=!1,Ia=null,l}function pr(l,d){var v=d[Ss];v===void 0&&(v=d[Ss]=new Set);var S=l+"__bubble";v.has(S)||(Fc(d,l,2,!1),v.add(S))}function ah(l,d,v){var S=0;d&&(S|=4),Fc(v,l,S,d)}var gl="_reactListening"+Math.random().toString(36).slice(2);function $a(l){if(!l[gl]){l[gl]=!0,r.forEach(function(v){v!=="selectionchange"&&(rc.has(v)||ah(v,!1,l),ah(v,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[gl]||(d[gl]=!0,ah("selectionchange",!1,d))}}function Fc(l,d,v,S){switch(fd(d)){case 1:var R=Pc;break;case 4:R=hd;break;default:R=Xl}v=R.bind(null,d,v,l),R=void 0,!Ii||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(R=!0),S?R!==void 0?l.addEventListener(d,v,{capture:!0,passive:R}):l.addEventListener(d,v,!0):R!==void 0?l.addEventListener(d,v,{passive:R}):l.addEventListener(d,v,!1)}function yd(l,d,v,S,R){var M=S;if((d&1)===0&&(d&2)===0&&S!==null)e:for(;;){if(S===null)return;var Z=S.tag;if(Z===3||Z===4){var be=S.stateNode.containerInfo;if(be===R||be.nodeType===8&&be.parentNode===R)break;if(Z===4)for(Z=S.return;Z!==null;){var ke=Z.tag;if((ke===3||ke===4)&&(ke=Z.stateNode.containerInfo,ke===R||ke.nodeType===8&&ke.parentNode===R))return;Z=Z.return}for(;be!==null;){if(Z=ua(be),Z===null)return;if(ke=Z.tag,ke===5||ke===6){S=M=Z;continue e}be=be.parentNode}}S=S.return}lo(function(){var qe=M,ct=ea(v),pt=[];e:{var lt=Ua.get(l);if(lt!==void 0){var Nt=hl,Dt=l;switch(l){case"keypress":if(po(v)===0)break e;case"keydown":case"keyup":Nt=pn;break;case"focusin":Dt="focus",Nt=Yn;break;case"focusout":Dt="blur",Nt=Yn;break;case"beforeblur":case"afterblur":Nt=Yn;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=$r;break;case Wr:case li:case mo:Nt=Ba;break;case go:Nt=Ei;break;case"scroll":Nt=pu;break;case"wheel":Nt=Lo;break;case"copy":case"cut":case"paste":Nt=P;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Tn}var Ft=(d&4)!==0,yi=!Ft&&l==="scroll",ze=Ft?lt!==null?lt+"Capture":null:lt;Ft=[];for(var Le=qe,Ue;Le!==null;){Ue=Le;var vt=Ue.stateNode;if(Ue.tag===5&&vt!==null&&(Ue=vt,ze!==null&&(vt=Wt(Le,ze),vt!=null&&Ft.push(Au(Le,vt,Ue)))),yi)break;Le=Le.return}0<Ft.length&&(lt=new Nt(lt,Dt,null,v,ct),pt.push({event:lt,listeners:Ft}))}}if((d&7)===0){e:{if(lt=l==="mouseover"||l==="pointerover",Nt=l==="mouseout"||l==="pointerout",lt&&v!==Un&&(Dt=v.relatedTarget||v.fromElement)&&(ua(Dt)||Dt[ui]))break e;if((Nt||lt)&&(lt=ct.window===ct?ct:(lt=ct.ownerDocument)?lt.defaultView||lt.parentWindow:window,Nt?(Dt=v.relatedTarget||v.toElement,Nt=qe,Dt=Dt?ua(Dt):null,Dt!==null&&(yi=mi(Dt),Dt!==yi||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):(Nt=null,Dt=qe),Nt!==Dt)){if(Ft=Rc,vt="onMouseLeave",ze="onMouseEnter",Le="mouse",(l==="pointerout"||l==="pointerover")&&(Ft=Tn,vt="onPointerLeave",ze="onPointerEnter",Le="pointer"),yi=Nt==null?lt:yn(Nt),Ue=Dt==null?lt:yn(Dt),lt=new Ft(vt,Le+"leave",Nt,v,ct),lt.target=yi,lt.relatedTarget=Ue,vt=null,ua(ct)===qe&&(Ft=new Ft(ze,Le+"enter",Dt,v,ct),Ft.target=Ue,Ft.relatedTarget=yi,vt=Ft),yi=vt,Nt&&Dt)t:{for(Ft=Nt,ze=Dt,Le=0,Ue=Ft;Ue;Ue=Bc(Ue))Le++;for(Ue=0,vt=ze;vt;vt=Bc(vt))Ue++;for(;0<Le-Ue;)Ft=Bc(Ft),Le--;for(;0<Ue-Le;)ze=Bc(ze),Ue--;for(;Le--;){if(Ft===ze||ze!==null&&Ft===ze.alternate)break t;Ft=Bc(Ft),ze=Bc(ze)}Ft=null}else Ft=null;Nt!==null&&ci(pt,lt,Nt,Ft,!1),Dt!==null&&yi!==null&&ci(pt,yi,Dt,Ft,!0)}}e:{if(lt=qe?yn(qe):window,Nt=lt.nodeName&&lt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&lt.type==="file")var qt=_u;else if(ec(lt))if(za)qt=Re;else{qt=fl;var Jt=nc}else(Nt=lt.nodeName)&&Nt.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(qt=Gs);if(qt&&(qt=qt(l,qe))){es(pt,qt,v,ct);break e}Jt&&Jt(l,lt,qe),l==="focusout"&&(Jt=lt._wrapperState)&&Jt.controlled&&lt.type==="number"&&ut(lt,"number",lt.value)}switch(Jt=qe?yn(qe):window,l){case"focusin":(ec(Jt)||Jt.contentEditable==="true")&&(rs=Jt,ml=qe,bs=null);break;case"focusout":bs=ml=rs=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,Mo(pt,v,ct);break;case"selectionchange":if(Pi)break;case"keydown":case"keyup":Mo(pt,v,ct)}var Kt;if(Ws)e:{switch(l){case"compositionstart":var on="onCompositionStart";break e;case"compositionend":on="onCompositionEnd";break e;case"compositionupdate":on="onCompositionUpdate";break e}on=void 0}else Vr?bu(l,v)&&(on="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(on="onCompositionStart");on&&(Ic&&v.locale!=="ko"&&(Vr||on!=="onCompositionStart"?on==="onCompositionEnd"&&Vr&&(Kt=pd()):(fr=ct,Vs="value"in fr?fr.value:fr.textContent,Vr=!0)),Jt=lh(qe,on),0<Jt.length&&(on=new ye(on,l,null,v,ct),pt.push({event:on,listeners:Jt}),Kt?on.data=Kt:(Kt=Mc(v),Kt!==null&&(on.data=Kt)))),(Kt=vu?aa(l,v):wu(l,v))&&(qe=lh(qe,"onBeforeInput"),0<qe.length&&(ct=new ye("onBeforeInput","beforeinput",null,v,ct),pt.push({event:ct,listeners:qe}),ct.data=Kt))}vd(pt,d)})}function Au(l,d,v){return{instance:l,listener:d,currentTarget:v}}function lh(l,d){for(var v=d+"Capture",S=[];l!==null;){var R=l,M=R.stateNode;R.tag===5&&M!==null&&(R=M,M=Wt(l,v),M!=null&&S.unshift(Au(l,M,R)),M=Wt(l,d),M!=null&&S.push(Au(l,M,R))),l=l.return}return S}function Bc(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function ci(l,d,v,S,R){for(var M=d._reactName,Z=[];v!==null&&v!==S;){var be=v,ke=be.alternate,qe=be.stateNode;if(ke!==null&&ke===S)break;be.tag===5&&qe!==null&&(be=qe,R?(ke=Wt(v,M),ke!=null&&Z.unshift(Au(v,ke,be))):R||(ke=Wt(v,M),ke!=null&&Z.push(Au(v,ke,be)))),v=v.return}Z.length!==0&&l.push({event:d,listeners:Z})}var ss=/\r\n?/g,eg=/\u0000|\uFFFD/g;function bp(l){return(typeof l=="string"?l:""+l).replace(ss,`
`).replace(eg,"")}function bd(l,d,v){if(d=bp(d),bp(l)!==d&&v)throw Error(t(425))}function Cu(){}var zc=null,ca=null;function wd(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var sc=typeof setTimeout=="function"?setTimeout:void 0,Eu=typeof clearTimeout=="function"?clearTimeout:void 0,ku=typeof Promise=="function"?Promise:void 0,ch=typeof queueMicrotask=="function"?queueMicrotask:typeof ku<"u"?function(l){return ku.resolve(null).then(l).catch(Pu)}:sc;function Pu(l){setTimeout(function(){throw l})}function of(l,d){var v=d,S=0;do{var R=v.nextSibling;if(l.removeChild(v),R&&R.nodeType===8)if(v=R.data,v==="/$"){if(S===0){l.removeChild(R),In(d);return}S--}else v!=="$"&&v!=="$?"&&v!=="$!"||S++;v=R}while(v);In(d)}function _s(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function Do(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(d===0)return l;d--}else v==="/$"&&d++}l=l.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),qa="__reactFiber$"+Ys,vl="__reactProps$"+Ys,ui="__reactContainer$"+Ys,Ss="__reactEvents$"+Ys,oe="__reactListeners$"+Ys,Nu="__reactHandles$"+Ys;function ua(l){var d=l[qa];if(d)return d;for(var v=l.parentNode;v;){if(d=v[ui]||v[qa]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(l=Do(l);l!==null;){if(v=l[qa])return v;l=Do(l)}return d}l=v,v=l.parentNode}return null}function Oi(l){return l=l[qa]||l[ui],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function yn(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function xd(l){return l[vl]||null}var af=[],yl=-1;function Di(l){return{current:l}}function cr(l){0>yl||(l.current=af[yl],af[yl]=null,yl--)}function hr(l,d){yl++,af[yl]=l.current,l.current=d}var oc={},Fi=Di(oc),Ks=Di(!1),As=oc;function Tu(l,d){var v=l.type.contextTypes;if(!v)return oc;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var R={},M;for(M in v)R[M]=d[M];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=R),R}function Xs(l){return l=l.childContextTypes,l!=null}function uh(){cr(Ks),cr(Fi)}function wp(l,d,v){if(Fi.current!==oc)throw Error(t(168));hr(Fi,d),hr(Ks,v)}function lf(l,d,v){var S=l.stateNode;if(d=d.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var R in S)if(!(R in d))throw Error(t(108,ge(l)||"Unknown",R));return ue({},v,S)}function Cs(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||oc,As=Fi.current,hr(Fi,l),hr(Ks,Ks.current),!0}function xp(l,d,v){var S=l.stateNode;if(!S)throw Error(t(169));v?(l=lf(l,d,As),S.__reactInternalMemoizedMergedChildContext=l,cr(Ks),cr(Fi),hr(Fi,l)):cr(Ks),hr(Ks,v)}var bl=null,_d=!1,w=!1;function A(l){bl===null?bl=[l]:bl.push(l)}function I(l){_d=!0,A(l)}function D(){if(!w&&bl!==null){w=!0;var l=0,d=Vn;try{var v=bl;for(Vn=1;l<v.length;l++){var S=v[l];do S=S(!0);while(S!==null)}bl=null,_d=!1}catch(R){throw bl!==null&&(bl=bl.slice(l+1)),al(Tt,D),R}finally{Vn=d,w=!1}}return null}var V=[],K=0,J=null,re=0,ae=[],me=0,Ce=null,De=1,Fe="";function Ie(l,d){V[K++]=re,V[K++]=J,J=l,re=d}function nt(l,d,v){ae[me++]=De,ae[me++]=Fe,ae[me++]=Ce,Ce=l;var S=De;l=Fe;var R=32-ho(S)-1;S&=~(1<<R),v+=1;var M=32-ho(d)+R;if(30<M){var Z=R-R%5;M=(S&(1<<Z)-1).toString(32),S>>=Z,R-=Z,De=1<<32-ho(d)+R|v<<R|S,Fe=M+l}else De=1<<M|v<<R|S,Fe=l}function He(l){l.return!==null&&(Ie(l,1),nt(l,1,0))}function Ee(l){for(;l===J;)J=V[--K],V[K]=null,re=V[--K],V[K]=null;for(;l===Ce;)Ce=ae[--me],ae[me]=null,Fe=ae[--me],ae[me]=null,De=ae[--me],ae[me]=null}var Pe=null,Qe=null,Je=!1,et=null;function _t(l,d){var v=Ha(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=l,d=l.deletions,d===null?(l.deletions=[v],l.flags|=16):d.push(v)}function xt(l,d){switch(l.tag){case 5:var v=l.type;return d=d.nodeType!==1||v.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Pe=l,Qe=_s(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Pe=l,Qe=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(v=Ce!==null?{id:De,overflow:Fe}:null,l.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=Ha(18,null,null,0),v.stateNode=d,v.return=l,l.child=v,Pe=l,Qe=null,!0):!1;default:return!1}}function zt(l){return(l.mode&1)!==0&&(l.flags&128)===0}function yt(l){if(Je){var d=Qe;if(d){var v=d;if(!xt(l,d)){if(zt(l))throw Error(t(418));d=_s(v.nextSibling);var S=Pe;d&&xt(l,d)?_t(S,v):(l.flags=l.flags&-4097|2,Je=!1,Pe=l)}}else{if(zt(l))throw Error(t(418));l.flags=l.flags&-4097|2,Je=!1,Pe=l}}}function Kn(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Pe=l}function Hn(l){if(l!==Pe)return!1;if(!Je)return Kn(l),Je=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!wd(l.type,l.memoizedProps)),d&&(d=Qe)){if(zt(l))throw Fn(),Error(t(418));for(;d;)_t(l,d),d=_s(d.nextSibling)}if(Kn(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"){if(d===0){Qe=_s(l.nextSibling);break e}d--}else v!=="$"&&v!=="$!"&&v!=="$?"||d++}l=l.nextSibling}Qe=null}}else Qe=Pe?_s(l.stateNode.nextSibling):null;return!0}function Fn(){for(var l=Qe;l;)l=_s(l.nextSibling)}function dn(){Qe=Pe=null,Je=!1}function Mn(l){et===null?et=[l]:et.push(l)}var ur=j.ReactCurrentBatchConfig;function sn(l,d,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var S=v.stateNode}if(!S)throw Error(t(147,l));var R=S,M=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===M?d.ref:(d=function(Z){var be=R.refs;Z===null?delete be[M]:be[M]=Z},d._stringRef=M,d)}if(typeof l!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,l))}return l}function yr(l,d){throw l=Object.prototype.toString.call(d),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function Es(l){var d=l._init;return d(l._payload)}function Hr(l){function d(ze,Le){if(l){var Ue=ze.deletions;Ue===null?(ze.deletions=[Le],ze.flags|=16):Ue.push(Le)}}function v(ze,Le){if(!l)return null;for(;Le!==null;)d(ze,Le),Le=Le.sibling;return null}function S(ze,Le){for(ze=new Map;Le!==null;)Le.key!==null?ze.set(Le.key,Le):ze.set(Le.index,Le),Le=Le.sibling;return ze}function R(ze,Le){return ze=Ll(ze,Le),ze.index=0,ze.sibling=null,ze}function M(ze,Le,Ue){return ze.index=Ue,l?(Ue=ze.alternate,Ue!==null?(Ue=Ue.index,Ue<Le?(ze.flags|=2,Le):Ue):(ze.flags|=2,Le)):(ze.flags|=1048576,Le)}function Z(ze){return l&&ze.alternate===null&&(ze.flags|=2),ze}function be(ze,Le,Ue,vt){return Le===null||Le.tag!==6?(Le=Pg(Ue,ze.mode,vt),Le.return=ze,Le):(Le=R(Le,Ue),Le.return=ze,Le)}function ke(ze,Le,Ue,vt){var qt=Ue.type;return qt===U?ct(ze,Le,Ue.props.children,vt,Ue.key):Le!==null&&(Le.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===G&&Es(qt)===Le.type)?(vt=R(Le,Ue.props),vt.ref=sn(ze,Le,Ue),vt.return=ze,vt):(vt=Wp(Ue.type,Ue.key,Ue.props,null,ze.mode,vt),vt.ref=sn(ze,Le,Ue),vt.return=ze,vt)}function qe(ze,Le,Ue,vt){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Ue.containerInfo||Le.stateNode.implementation!==Ue.implementation?(Le=Ng(Ue,ze.mode,vt),Le.return=ze,Le):(Le=R(Le,Ue.children||[]),Le.return=ze,Le)}function ct(ze,Le,Ue,vt,qt){return Le===null||Le.tag!==7?(Le=Id(Ue,ze.mode,vt,qt),Le.return=ze,Le):(Le=R(Le,Ue),Le.return=ze,Le)}function pt(ze,Le,Ue){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=Pg(""+Le,ze.mode,Ue),Le.return=ze,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case B:return Ue=Wp(Le.type,Le.key,Le.props,null,ze.mode,Ue),Ue.ref=sn(ze,null,Le),Ue.return=ze,Ue;case W:return Le=Ng(Le,ze.mode,Ue),Le.return=ze,Le;case G:var vt=Le._init;return pt(ze,vt(Le._payload),Ue)}if(mt(Le)||fe(Le))return Le=Id(Le,ze.mode,Ue,null),Le.return=ze,Le;yr(ze,Le)}return null}function lt(ze,Le,Ue,vt){var qt=Le!==null?Le.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return qt!==null?null:be(ze,Le,""+Ue,vt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case B:return Ue.key===qt?ke(ze,Le,Ue,vt):null;case W:return Ue.key===qt?qe(ze,Le,Ue,vt):null;case G:return qt=Ue._init,lt(ze,Le,qt(Ue._payload),vt)}if(mt(Ue)||fe(Ue))return qt!==null?null:ct(ze,Le,Ue,vt,null);yr(ze,Ue)}return null}function Nt(ze,Le,Ue,vt,qt){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return ze=ze.get(Ue)||null,be(Le,ze,""+vt,qt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case B:return ze=ze.get(vt.key===null?Ue:vt.key)||null,ke(Le,ze,vt,qt);case W:return ze=ze.get(vt.key===null?Ue:vt.key)||null,qe(Le,ze,vt,qt);case G:var Jt=vt._init;return Nt(ze,Le,Ue,Jt(vt._payload),qt)}if(mt(vt)||fe(vt))return ze=ze.get(Ue)||null,ct(Le,ze,vt,qt,null);yr(Le,vt)}return null}function Dt(ze,Le,Ue,vt){for(var qt=null,Jt=null,Kt=Le,on=Le=0,us=null;Kt!==null&&on<Ue.length;on++){Kt.index>on?(us=Kt,Kt=null):us=Kt.sibling;var ar=lt(ze,Kt,Ue[on],vt);if(ar===null){Kt===null&&(Kt=us);break}l&&Kt&&ar.alternate===null&&d(ze,Kt),Le=M(ar,Le,on),Jt===null?qt=ar:Jt.sibling=ar,Jt=ar,Kt=us}if(on===Ue.length)return v(ze,Kt),Je&&Ie(ze,on),qt;if(Kt===null){for(;on<Ue.length;on++)Kt=pt(ze,Ue[on],vt),Kt!==null&&(Le=M(Kt,Le,on),Jt===null?qt=Kt:Jt.sibling=Kt,Jt=Kt);return Je&&Ie(ze,on),qt}for(Kt=S(ze,Kt);on<Ue.length;on++)us=Nt(Kt,ze,on,Ue[on],vt),us!==null&&(l&&us.alternate!==null&&Kt.delete(us.key===null?on:us.key),Le=M(us,Le,on),Jt===null?qt=us:Jt.sibling=us,Jt=us);return l&&Kt.forEach(function($u){return d(ze,$u)}),Je&&Ie(ze,on),qt}function Ft(ze,Le,Ue,vt){var qt=fe(Ue);if(typeof qt!="function")throw Error(t(150));if(Ue=qt.call(Ue),Ue==null)throw Error(t(151));for(var Jt=qt=null,Kt=Le,on=Le=0,us=null,ar=Ue.next();Kt!==null&&!ar.done;on++,ar=Ue.next()){Kt.index>on?(us=Kt,Kt=null):us=Kt.sibling;var $u=lt(ze,Kt,ar.value,vt);if($u===null){Kt===null&&(Kt=us);break}l&&Kt&&$u.alternate===null&&d(ze,Kt),Le=M($u,Le,on),Jt===null?qt=$u:Jt.sibling=$u,Jt=$u,Kt=us}if(ar.done)return v(ze,Kt),Je&&Ie(ze,on),qt;if(Kt===null){for(;!ar.done;on++,ar=Ue.next())ar=pt(ze,ar.value,vt),ar!==null&&(Le=M(ar,Le,on),Jt===null?qt=ar:Jt.sibling=ar,Jt=ar);return Je&&Ie(ze,on),qt}for(Kt=S(ze,Kt);!ar.done;on++,ar=Ue.next())ar=Nt(Kt,ze,on,ar.value,vt),ar!==null&&(l&&ar.alternate!==null&&Kt.delete(ar.key===null?on:ar.key),Le=M(ar,Le,on),Jt===null?qt=ar:Jt.sibling=ar,Jt=ar);return l&&Kt.forEach(function(Cb){return d(ze,Cb)}),Je&&Ie(ze,on),qt}function yi(ze,Le,Ue,vt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===U&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case B:e:{for(var qt=Ue.key,Jt=Le;Jt!==null;){if(Jt.key===qt){if(qt=Ue.type,qt===U){if(Jt.tag===7){v(ze,Jt.sibling),Le=R(Jt,Ue.props.children),Le.return=ze,ze=Le;break e}}else if(Jt.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===G&&Es(qt)===Jt.type){v(ze,Jt.sibling),Le=R(Jt,Ue.props),Le.ref=sn(ze,Jt,Ue),Le.return=ze,ze=Le;break e}v(ze,Jt);break}else d(ze,Jt);Jt=Jt.sibling}Ue.type===U?(Le=Id(Ue.props.children,ze.mode,vt,Ue.key),Le.return=ze,ze=Le):(vt=Wp(Ue.type,Ue.key,Ue.props,null,ze.mode,vt),vt.ref=sn(ze,Le,Ue),vt.return=ze,ze=vt)}return Z(ze);case W:e:{for(Jt=Ue.key;Le!==null;){if(Le.key===Jt)if(Le.tag===4&&Le.stateNode.containerInfo===Ue.containerInfo&&Le.stateNode.implementation===Ue.implementation){v(ze,Le.sibling),Le=R(Le,Ue.children||[]),Le.return=ze,ze=Le;break e}else{v(ze,Le);break}else d(ze,Le);Le=Le.sibling}Le=Ng(Ue,ze.mode,vt),Le.return=ze,ze=Le}return Z(ze);case G:return Jt=Ue._init,yi(ze,Le,Jt(Ue._payload),vt)}if(mt(Ue))return Dt(ze,Le,Ue,vt);if(fe(Ue))return Ft(ze,Le,Ue,vt);yr(ze,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"?(Ue=""+Ue,Le!==null&&Le.tag===6?(v(ze,Le.sibling),Le=R(Le,Ue),Le.return=ze,ze=Le):(v(ze,Le),Le=Pg(Ue,ze.mode,vt),Le.return=ze,ze=Le),Z(ze)):v(ze,Le)}return yi}var Bn=Hr(!0),Xn=Hr(!1),Bi=Di(null),Nr=null,Tr=null,Gr=null;function Br(){Gr=Tr=Nr=null}function ks(l){var d=Bi.current;cr(Bi),l._currentValue=d}function br(l,d,v){for(;l!==null;){var S=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,S!==null&&(S.childLanes|=d)):S!==null&&(S.childLanes&d)!==d&&(S.childLanes|=d),l===v)break;l=l.return}}function Lr(l,d){Nr=l,Gr=Tr=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&d)!==0&&(_o=!0),l.firstContext=null)}function di(l){var d=l._currentValue;if(Gr!==l)if(l={context:l,memoizedValue:d,next:null},Tr===null){if(Nr===null)throw Error(t(308));Tr=l,Nr.dependencies={lanes:0,firstContext:l}}else Tr=Tr.next=l;return d}var yo=null;function ac(l){yo===null?yo=[l]:yo.push(l)}function da(l,d,v,S){var R=d.interleaved;return R===null?(v.next=v,ac(d)):(v.next=R.next,R.next=v),d.interleaved=v,or(l,S)}function or(l,d){l.lanes|=d;var v=l.alternate;for(v!==null&&(v.lanes|=d),v=l,l=l.return;l!==null;)l.childLanes|=d,v=l.alternate,v!==null&&(v.childLanes|=d),v=l,l=l.return;return v.tag===3?v.stateNode:null}var Zs=!1;function Sd(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cf(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Fo(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function os(l,d,v){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(er&2)!==0){var R=S.pending;return R===null?d.next=d:(d.next=R.next,R.next=d),S.pending=d,or(l,v)}return R=S.interleaved,R===null?(d.next=d,ac(S)):(d.next=R.next,R.next=d),S.interleaved=d,or(l,v)}function Uc(l,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var S=d.lanes;S&=l.pendingLanes,v|=S,d.lanes=v,Gl(l,v)}}function Bo(l,d){var v=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var R=null,M=null;if(v=v.firstBaseUpdate,v!==null){do{var Z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};M===null?R=M=Z:M=M.next=Z,v=v.next}while(v!==null);M===null?R=M=d:M=M.next=d}else R=M=d;v={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:M,shared:S.shared,effects:S.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=d:l.next=d,v.lastBaseUpdate=d}function ha(l,d,v,S){var R=l.updateQueue;Zs=!1;var M=R.firstBaseUpdate,Z=R.lastBaseUpdate,be=R.shared.pending;if(be!==null){R.shared.pending=null;var ke=be,qe=ke.next;ke.next=null,Z===null?M=qe:Z.next=qe,Z=ke;var ct=l.alternate;ct!==null&&(ct=ct.updateQueue,be=ct.lastBaseUpdate,be!==Z&&(be===null?ct.firstBaseUpdate=qe:be.next=qe,ct.lastBaseUpdate=ke))}if(M!==null){var pt=R.baseState;Z=0,ct=qe=ke=null,be=M;do{var lt=be.lane,Nt=be.eventTime;if((S&lt)===lt){ct!==null&&(ct=ct.next={eventTime:Nt,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var Dt=l,Ft=be;switch(lt=d,Nt=v,Ft.tag){case 1:if(Dt=Ft.payload,typeof Dt=="function"){pt=Dt.call(Nt,pt,lt);break e}pt=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Ft.payload,lt=typeof Dt=="function"?Dt.call(Nt,pt,lt):Dt,lt==null)break e;pt=ue({},pt,lt);break e;case 2:Zs=!0}}be.callback!==null&&be.lane!==0&&(l.flags|=64,lt=R.effects,lt===null?R.effects=[be]:lt.push(be))}else Nt={eventTime:Nt,lane:lt,tag:be.tag,payload:be.payload,callback:be.callback,next:null},ct===null?(qe=ct=Nt,ke=pt):ct=ct.next=Nt,Z|=lt;if(be=be.next,be===null){if(be=R.shared.pending,be===null)break;lt=be,be=lt.next,lt.next=null,R.lastBaseUpdate=lt,R.shared.pending=null}}while(!0);if(ct===null&&(ke=pt),R.baseState=ke,R.firstBaseUpdate=qe,R.lastBaseUpdate=ct,d=R.shared.interleaved,d!==null){R=d;do Z|=R.lane,R=R.next;while(R!==d)}else M===null&&(R.shared.lanes=0);Du|=Z,l.lanes=Z,l.memoizedState=pt}}function lc(l,d,v){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var S=l[d],R=S.callback;if(R!==null){if(S.callback=null,S=v,typeof R!="function")throw Error(t(191,R));R.call(S)}}}var Lu={},bo=Di(Lu),Ru=Di(Lu),wl=Di(Lu);function fa(l){if(l===Lu)throw Error(t(174));return l}function Iu(l,d){switch(hr(wl,d),hr(Ru,l),hr(bo,Lu),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:$e(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=$e(d,l)}cr(bo),hr(bo,d)}function zo(){cr(bo),cr(Ru),cr(wl)}function uf(l){fa(wl.current);var d=fa(bo.current),v=$e(d,l.type);d!==v&&(hr(Ru,l),hr(bo,v))}function dh(l){Ru.current===l&&(cr(bo),cr(Ru))}var wr=Di(0);function Js(l){for(var d=l;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var df=[];function hh(){for(var l=0;l<df.length;l++)df[l]._workInProgressVersionPrimary=null;df.length=0}var Ad=j.ReactCurrentDispatcher,fh=j.ReactCurrentBatchConfig,pa=0,Or=null,Yr=null,Kr=null,cc=!1,xl=!1,uc=0,Cn=0;function vi(){throw Error(t(321))}function ph(l,d){if(d===null)return!1;for(var v=0;v<d.length&&v<l.length;v++)if(!Oe(l[v],d[v]))return!1;return!0}function _l(l,d,v,S,R,M){if(pa=M,Or=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ad.current=l===null||l.memoizedState===null?ob:Ap,l=v(S,R),xl){M=0;do{if(xl=!1,uc=0,25<=M)throw Error(t(301));M+=1,Kr=Yr=null,d.updateQueue=null,Ad.current=yh,l=v(S,R)}while(xl)}if(Ad.current=Sp,d=Yr!==null&&Yr.next!==null,pa=0,Kr=Yr=Or=null,cc=!1,d)throw Error(t(300));return l}function ma(){var l=uc!==0;return uc=0,l}function ga(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?Or.memoizedState=Kr=l:Kr=Kr.next=l,Kr}function wo(){if(Yr===null){var l=Or.alternate;l=l!==null?l.memoizedState:null}else l=Yr.next;var d=Kr===null?Or.memoizedState:Kr.next;if(d!==null)Kr=d,Yr=l;else{if(l===null)throw Error(t(310));Yr=l,l={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},Kr===null?Or.memoizedState=Kr=l:Kr=Kr.next=l}return Kr}function as(l,d){return typeof d=="function"?d(l):d}function mh(l){var d=wo(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var S=Yr,R=S.baseQueue,M=v.pending;if(M!==null){if(R!==null){var Z=R.next;R.next=M.next,M.next=Z}S.baseQueue=R=M,v.pending=null}if(R!==null){M=R.next,S=S.baseState;var be=Z=null,ke=null,qe=M;do{var ct=qe.lane;if((pa&ct)===ct)ke!==null&&(ke=ke.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),S=qe.hasEagerState?qe.eagerState:l(S,qe.action);else{var pt={lane:ct,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};ke===null?(be=ke=pt,Z=S):ke=ke.next=pt,Or.lanes|=ct,Du|=ct}qe=qe.next}while(qe!==null&&qe!==M);ke===null?Z=S:ke.next=be,Oe(S,d.memoizedState)||(_o=!0),d.memoizedState=S,d.baseState=Z,d.baseQueue=ke,v.lastRenderedState=S}if(l=v.interleaved,l!==null){R=l;do M=R.lane,Or.lanes|=M,Du|=M,R=R.next;while(R!==l)}else R===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function va(l){var d=wo(),v=d.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var S=v.dispatch,R=v.pending,M=d.memoizedState;if(R!==null){v.pending=null;var Z=R=R.next;do M=l(M,Z.action),Z=Z.next;while(Z!==R);Oe(M,d.memoizedState)||(_o=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),v.lastRenderedState=M}return[M,S]}function gh(){}function vh(l,d){var v=Or,S=wo(),R=d(),M=!Oe(S.memoizedState,R);if(M&&(S.memoizedState=R,_o=!0),S=S.queue,ba(Sl.bind(null,v,S,l),[l]),S.getSnapshot!==d||M||Kr!==null&&Kr.memoizedState.tag&1){if(v.flags|=2048,Qs(9,Ps.bind(null,v,S,R,d),void 0,null),cs===null)throw Error(t(349));(pa&30)!==0||hf(v,d,R)}return R}function hf(l,d,v){l.flags|=16384,l={getSnapshot:d,value:v},d=Or.updateQueue,d===null?(d={lastEffect:null,stores:null},Or.updateQueue=d,d.stores=[l]):(v=d.stores,v===null?d.stores=[l]:v.push(l))}function Ps(l,d,v,S){d.value=v,d.getSnapshot=S,dc(d)&&Cd(l)}function Sl(l,d,v){return v(function(){dc(d)&&Cd(l)})}function dc(l){var d=l.getSnapshot;l=l.value;try{var v=d();return!Oe(l,v)}catch{return!0}}function Cd(l){var d=or(l,1);d!==null&&Tl(d,l,1,-1)}function hc(l){var d=ga();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:l},d.queue=l,l=l.dispatch=s0.bind(null,Or,l),[d.memoizedState,l]}function Qs(l,d,v,S){return l={tag:l,create:d,destroy:v,deps:S,next:null},d=Or.updateQueue,d===null?(d={lastEffect:null,stores:null},Or.updateQueue=d,d.lastEffect=l.next=l):(v=d.lastEffect,v===null?d.lastEffect=l.next=l:(S=v.next,v.next=l,l.next=S,d.lastEffect=l)),l}function ya(){return wo().memoizedState}function Uo(l,d,v,S){var R=ga();Or.flags|=l,R.memoizedState=Qs(1|d,v,void 0,S===void 0?null:S)}function Al(l,d,v,S){var R=wo();S=S===void 0?null:S;var M=void 0;if(Yr!==null){var Z=Yr.memoizedState;if(M=Z.destroy,S!==null&&ph(S,Z.deps)){R.memoizedState=Qs(d,v,M,S);return}}Or.flags|=l,R.memoizedState=Qs(1|d,v,M,S)}function ju(l,d){return Uo(8390656,8,l,d)}function ba(l,d){return Al(2048,8,l,d)}function _p(l,d){return Al(4,2,l,d)}function wa(l,d){return Al(4,4,l,d)}function Ed(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function tg(l,d,v){return v=v!=null?v.concat([l]):null,Al(4,4,Ed.bind(null,d,l),v)}function ff(){}function t0(l,d){var v=wo();d=d===void 0?null:d;var S=v.memoizedState;return S!==null&&d!==null&&ph(d,S[1])?S[0]:(v.memoizedState=[l,d],l)}function n0(l,d){var v=wo();d=d===void 0?null:d;var S=v.memoizedState;return S!==null&&d!==null&&ph(d,S[1])?S[0]:(l=l(),v.memoizedState=[l,d],l)}function r0(l,d,v){return(pa&21)===0?(l.baseState&&(l.baseState=!1,_o=!0),l.memoizedState=v):(Oe(v,d)||(v=lu(),Or.lanes|=v,Du|=v,l.baseState=!0),d)}function i0(l,d){var v=Vn;Vn=v!==0&&4>v?v:4,l(!0);var S=fh.transition;fh.transition={};try{l(!1),d()}finally{Vn=v,fh.transition=S}}function ng(){return wo().memoizedState}function sb(l,d,v){var S=zu(l);if(v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},rg(l))xo(d,v);else if(v=da(l,d,v,S),v!==null){var R=Co();Tl(v,l,S,R),Cl(v,d,S)}}function s0(l,d,v){var S=zu(l),R={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(rg(l))xo(d,R);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var Z=d.lastRenderedState,be=M(Z,v);if(R.hasEagerState=!0,R.eagerState=be,Oe(be,Z)){var ke=d.interleaved;ke===null?(R.next=R,ac(d)):(R.next=ke.next,ke.next=R),d.interleaved=R;return}}catch{}finally{}v=da(l,d,R,S),v!==null&&(R=Co(),Tl(v,l,S,R),Cl(v,d,S))}}function rg(l){var d=l.alternate;return l===Or||d!==null&&d===Or}function xo(l,d){xl=cc=!0;var v=l.pending;v===null?d.next=d:(d.next=v.next,v.next=d),l.pending=d}function Cl(l,d,v){if((v&4194240)!==0){var S=d.lanes;S&=l.pendingLanes,v|=S,d.lanes=v,Gl(l,v)}}var Sp={readContext:di,useCallback:vi,useContext:vi,useEffect:vi,useImperativeHandle:vi,useInsertionEffect:vi,useLayoutEffect:vi,useMemo:vi,useReducer:vi,useRef:vi,useState:vi,useDebugValue:vi,useDeferredValue:vi,useTransition:vi,useMutableSource:vi,useSyncExternalStore:vi,useId:vi,unstable_isNewReconciler:!1},ob={readContext:di,useCallback:function(l,d){return ga().memoizedState=[l,d===void 0?null:d],l},useContext:di,useEffect:ju,useImperativeHandle:function(l,d,v){return v=v!=null?v.concat([l]):null,Uo(4194308,4,Ed.bind(null,d,l),v)},useLayoutEffect:function(l,d){return Uo(4194308,4,l,d)},useInsertionEffect:function(l,d){return Uo(4,2,l,d)},useMemo:function(l,d){var v=ga();return d=d===void 0?null:d,l=l(),v.memoizedState=[l,d],l},useReducer:function(l,d,v){var S=ga();return d=v!==void 0?v(d):d,S.memoizedState=S.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},S.queue=l,l=l.dispatch=sb.bind(null,Or,l),[S.memoizedState,l]},useRef:function(l){var d=ga();return l={current:l},d.memoizedState=l},useState:hc,useDebugValue:ff,useDeferredValue:function(l){return ga().memoizedState=l},useTransition:function(){var l=hc(!1),d=l[0];return l=i0.bind(null,l[1]),ga().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,v){var S=Or,R=ga();if(Je){if(v===void 0)throw Error(t(407));v=v()}else{if(v=d(),cs===null)throw Error(t(349));(pa&30)!==0||hf(S,d,v)}R.memoizedState=v;var M={value:v,getSnapshot:d};return R.queue=M,ju(Sl.bind(null,S,M,l),[l]),S.flags|=2048,Qs(9,Ps.bind(null,S,M,v,d),void 0,null),v},useId:function(){var l=ga(),d=cs.identifierPrefix;if(Je){var v=Fe,S=De;v=(S&~(1<<32-ho(S)-1)).toString(32)+v,d=":"+d+"R"+v,v=uc++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=Cn++,d=":"+d+"r"+v.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},Ap={readContext:di,useCallback:t0,useContext:di,useEffect:ba,useImperativeHandle:tg,useInsertionEffect:_p,useLayoutEffect:wa,useMemo:n0,useReducer:mh,useRef:ya,useState:function(){return mh(as)},useDebugValue:ff,useDeferredValue:function(l){var d=wo();return r0(d,Yr.memoizedState,l)},useTransition:function(){var l=mh(as)[0],d=wo().memoizedState;return[l,d]},useMutableSource:gh,useSyncExternalStore:vh,useId:ng,unstable_isNewReconciler:!1},yh={readContext:di,useCallback:t0,useContext:di,useEffect:ba,useImperativeHandle:tg,useInsertionEffect:_p,useLayoutEffect:wa,useMemo:n0,useReducer:va,useRef:ya,useState:function(){return va(as)},useDebugValue:ff,useDeferredValue:function(l){var d=wo();return Yr===null?d.memoizedState=l:r0(d,Yr.memoizedState,l)},useTransition:function(){var l=va(as)[0],d=wo().memoizedState;return[l,d]},useMutableSource:gh,useSyncExternalStore:vh,useId:ng,unstable_isNewReconciler:!1};function Va(l,d){if(l&&l.defaultProps){d=ue({},d),l=l.defaultProps;for(var v in l)d[v]===void 0&&(d[v]=l[v]);return d}return d}function Cp(l,d,v,S){d=l.memoizedState,v=v(S,d),v=v==null?d:ue({},d,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Ep={isMounted:function(l){return(l=l._reactInternals)?mi(l)===l:!1},enqueueSetState:function(l,d,v){l=l._reactInternals;var S=Co(),R=zu(l),M=Fo(S,R);M.payload=d,v!=null&&(M.callback=v),d=os(l,M,R),d!==null&&(Tl(d,l,R,S),Uc(d,l,R))},enqueueReplaceState:function(l,d,v){l=l._reactInternals;var S=Co(),R=zu(l),M=Fo(S,R);M.tag=1,M.payload=d,v!=null&&(M.callback=v),d=os(l,M,R),d!==null&&(Tl(d,l,R,S),Uc(d,l,R))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var v=Co(),S=zu(l),R=Fo(v,S);R.tag=2,d!=null&&(R.callback=d),d=os(l,R,S),d!==null&&(Tl(d,l,S,v),Uc(d,l,S))}};function ig(l,d,v,S,R,M,Z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,M,Z):d.prototype&&d.prototype.isPureReactComponent?!At(v,S)||!At(R,M):!0}function kd(l,d,v){var S=!1,R=oc,M=d.contextType;return typeof M=="object"&&M!==null?M=di(M):(R=Xs(d)?As:Fi.current,S=d.contextTypes,M=(S=S!=null)?Tu(l,R):oc),d=new d(v,M),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ep,l.stateNode=d,d._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=R,l.__reactInternalMemoizedMaskedChildContext=M),d}function bh(l,d,v,S){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,S),d.state!==l&&Ep.enqueueReplaceState(d,d.state,null)}function sg(l,d,v,S){var R=l.stateNode;R.props=v,R.state=l.memoizedState,R.refs={},Sd(l);var M=d.contextType;typeof M=="object"&&M!==null?R.context=di(M):(M=Xs(d)?As:Fi.current,R.context=Tu(l,M)),R.state=l.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(Cp(l,d,M,v),R.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(d=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),d!==R.state&&Ep.enqueueReplaceState(R,R.state,null),ha(l,v,R,S),R.state=l.memoizedState),typeof R.componentDidMount=="function"&&(l.flags|=4194308)}function Pd(l,d){try{var v="",S=d;do v+=ce(S),S=S.return;while(S);var R=v}catch(M){R=`
Error generating stack: `+M.message+`
`+M.stack}return{value:l,source:d,stack:R,digest:null}}function kp(l,d,v){return{value:l,source:null,stack:v??null,digest:d??null}}function wh(l,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var o0=typeof WeakMap=="function"?WeakMap:Map;function pf(l,d,v){v=Fo(-1,v),v.tag=3,v.payload={element:null};var S=d.value;return v.callback=function(){Fp||(Fp=!0,xg=S),wh(l,d)},v}function Pp(l,d,v){v=Fo(-1,v),v.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var R=d.value;v.payload=function(){return S(R)},v.callback=function(){wh(l,d)}}var M=l.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(v.callback=function(){wh(l,d),typeof S!="function"&&(Fu===null?Fu=new Set([this]):Fu.add(this));var Z=d.stack;this.componentDidCatch(d.value,{componentStack:Z!==null?Z:""})}),v}function mf(l,d,v){var S=l.pingCache;if(S===null){S=l.pingCache=new o0;var R=new Set;S.set(d,R)}else R=S.get(d),R===void 0&&(R=new Set,S.set(d,R));R.has(v)||(R.add(v),l=pb.bind(null,l,d,v),d.then(l,l))}function a0(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function og(l,d,v,S,R){return(l.mode&1)===0?(l===d?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=Fo(-1,1),d.tag=2,os(v,d,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=R,l)}var Np=j.ReactCurrentOwner,_o=!1;function Ns(l,d,v,S){d.child=l===null?Xn(d,null,v,S):Bn(d,l.child,v,S)}function l0(l,d,v,S,R){v=v.render;var M=d.ref;return Lr(d,R),S=_l(l,d,v,S,M,R),v=ma(),l!==null&&!_o?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~R,El(l,d,R)):(Je&&v&&He(d),d.flags|=1,Ns(l,d,S,R),d.child)}function ag(l,d,v,S,R){if(l===null){var M=v.type;return typeof M=="function"&&!Vp(M)&&M.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=M,fc(l,d,M,S,R)):(l=Wp(v.type,null,S,d,d.mode,R),l.ref=d.ref,l.return=d,d.child=l)}if(M=l.child,(l.lanes&R)===0){var Z=M.memoizedProps;if(v=v.compare,v=v!==null?v:At,v(Z,S)&&l.ref===d.ref)return El(l,d,R)}return d.flags|=1,l=Ll(M,S),l.ref=d.ref,l.return=d,d.child=l}function fc(l,d,v,S,R){if(l!==null){var M=l.memoizedProps;if(At(M,S)&&l.ref===d.ref)if(_o=!1,d.pendingProps=S=M,(l.lanes&R)!==0)(l.flags&131072)!==0&&(_o=!0);else return d.lanes=l.lanes,El(l,d,R)}return ug(l,d,v,S,R)}function lg(l,d,v){var S=d.pendingProps,R=S.children,M=l!==null?l.memoizedState:null;if(S.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(Ah,_a),_a|=v;else{if((v&1073741824)===0)return l=M!==null?M.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,hr(Ah,_a),_a|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=M!==null?M.baseLanes:v,hr(Ah,_a),_a|=S}else M!==null?(S=M.baseLanes|v,d.memoizedState=null):S=v,hr(Ah,_a),_a|=S;return Ns(l,d,R,v),d.child}function cg(l,d){var v=d.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function ug(l,d,v,S,R){var M=Xs(v)?As:Fi.current;return M=Tu(d,M),Lr(d,R),v=_l(l,d,v,S,M,R),S=ma(),l!==null&&!_o?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~R,El(l,d,R)):(Je&&S&&He(d),d.flags|=1,Ns(l,d,v,R),d.child)}function dg(l,d,v,S,R){if(Xs(v)){var M=!0;Cs(d)}else M=!1;if(Lr(d,R),d.stateNode===null)Lp(l,d),kd(d,v,S),sg(d,v,S,R),S=!0;else if(l===null){var Z=d.stateNode,be=d.memoizedProps;Z.props=be;var ke=Z.context,qe=v.contextType;typeof qe=="object"&&qe!==null?qe=di(qe):(qe=Xs(v)?As:Fi.current,qe=Tu(d,qe));var ct=v.getDerivedStateFromProps,pt=typeof ct=="function"||typeof Z.getSnapshotBeforeUpdate=="function";pt||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(be!==S||ke!==qe)&&bh(d,Z,S,qe),Zs=!1;var lt=d.memoizedState;Z.state=lt,ha(d,S,Z,R),ke=d.memoizedState,be!==S||lt!==ke||Ks.current||Zs?(typeof ct=="function"&&(Cp(d,v,ct,S),ke=d.memoizedState),(be=Zs||ig(d,v,be,S,lt,ke,qe))?(pt||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount()),typeof Z.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Z.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=S,d.memoizedState=ke),Z.props=S,Z.state=ke,Z.context=qe,S=be):(typeof Z.componentDidMount=="function"&&(d.flags|=4194308),S=!1)}else{Z=d.stateNode,cf(l,d),be=d.memoizedProps,qe=d.type===d.elementType?be:Va(d.type,be),Z.props=qe,pt=d.pendingProps,lt=Z.context,ke=v.contextType,typeof ke=="object"&&ke!==null?ke=di(ke):(ke=Xs(v)?As:Fi.current,ke=Tu(d,ke));var Nt=v.getDerivedStateFromProps;(ct=typeof Nt=="function"||typeof Z.getSnapshotBeforeUpdate=="function")||typeof Z.UNSAFE_componentWillReceiveProps!="function"&&typeof Z.componentWillReceiveProps!="function"||(be!==pt||lt!==ke)&&bh(d,Z,S,ke),Zs=!1,lt=d.memoizedState,Z.state=lt,ha(d,S,Z,R);var Dt=d.memoizedState;be!==pt||lt!==Dt||Ks.current||Zs?(typeof Nt=="function"&&(Cp(d,v,Nt,S),Dt=d.memoizedState),(qe=Zs||ig(d,v,qe,S,lt,Dt,ke)||!1)?(ct||typeof Z.UNSAFE_componentWillUpdate!="function"&&typeof Z.componentWillUpdate!="function"||(typeof Z.componentWillUpdate=="function"&&Z.componentWillUpdate(S,Dt,ke),typeof Z.UNSAFE_componentWillUpdate=="function"&&Z.UNSAFE_componentWillUpdate(S,Dt,ke)),typeof Z.componentDidUpdate=="function"&&(d.flags|=4),typeof Z.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Z.componentDidUpdate!="function"||be===l.memoizedProps&&lt===l.memoizedState||(d.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||be===l.memoizedProps&&lt===l.memoizedState||(d.flags|=1024),d.memoizedProps=S,d.memoizedState=Dt),Z.props=S,Z.state=Dt,Z.context=ke,S=qe):(typeof Z.componentDidUpdate!="function"||be===l.memoizedProps&&lt===l.memoizedState||(d.flags|=4),typeof Z.getSnapshotBeforeUpdate!="function"||be===l.memoizedProps&&lt===l.memoizedState||(d.flags|=1024),S=!1)}return hg(l,d,v,S,M,R)}function hg(l,d,v,S,R,M){cg(l,d);var Z=(d.flags&128)!==0;if(!S&&!Z)return R&&xp(d,v,!1),El(l,d,M);S=d.stateNode,Np.current=d;var be=Z&&typeof v.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,l!==null&&Z?(d.child=Bn(d,l.child,null,M),d.child=Bn(d,null,be,M)):Ns(l,d,be,M),d.memoizedState=S.state,R&&xp(d,v,!0),d.child}function c0(l){var d=l.stateNode;d.pendingContext?wp(l,d.pendingContext,d.pendingContext!==d.context):d.context&&wp(l,d.context,!1),Iu(l,d.containerInfo)}function pc(l,d,v,S,R){return dn(),Mn(R),d.flags|=256,Ns(l,d,v,S),d.child}var gf={dehydrated:null,treeContext:null,retryLane:0};function vf(l){return{baseLanes:l,cachePool:null,transitions:null}}function Tp(l,d,v){var S=d.pendingProps,R=wr.current,M=!1,Z=(d.flags&128)!==0,be;if((be=Z)||(be=l!==null&&l.memoizedState===null?!1:(R&2)!==0),be?(M=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(R|=1),hr(wr,R&1),l===null)return yt(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((d.mode&1)===0?d.lanes=1:l.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(Z=S.children,l=S.fallback,M?(S=d.mode,M=d.child,Z={mode:"hidden",children:Z},(S&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=Z):M=Hp(Z,S,0,null),l=Id(l,S,v,null),M.return=d,l.return=d,M.sibling=l,d.child=M,d.child.memoizedState=vf(v),d.memoizedState=gf,l):xh(d,Z));if(R=l.memoizedState,R!==null&&(be=R.dehydrated,be!==null))return en(l,d,Z,S,be,R,v);if(M){M=S.fallback,Z=d.mode,R=l.child,be=R.sibling;var ke={mode:"hidden",children:S.children};return(Z&1)===0&&d.child!==R?(S=d.child,S.childLanes=0,S.pendingProps=ke,d.deletions=null):(S=Ll(R,ke),S.subtreeFlags=R.subtreeFlags&14680064),be!==null?M=Ll(be,M):(M=Id(M,Z,v,null),M.flags|=2),M.return=d,S.return=d,S.sibling=M,d.child=S,S=M,M=d.child,Z=l.child.memoizedState,Z=Z===null?vf(v):{baseLanes:Z.baseLanes|v,cachePool:null,transitions:Z.transitions},M.memoizedState=Z,M.childLanes=l.childLanes&~v,d.memoizedState=gf,S}return M=l.child,l=M.sibling,S=Ll(M,{mode:"visible",children:S.children}),(d.mode&1)===0&&(S.lanes=v),S.return=d,S.sibling=null,l!==null&&(v=d.deletions,v===null?(d.deletions=[l],d.flags|=16):v.push(l)),d.child=S,d.memoizedState=null,S}function xh(l,d){return d=Hp({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function $c(l,d,v,S){return S!==null&&Mn(S),Bn(d,l.child,null,v),l=xh(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function en(l,d,v,S,R,M,Z){if(v)return d.flags&256?(d.flags&=-257,S=kp(Error(t(422))),$c(l,d,Z,S)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(M=S.fallback,R=d.mode,S=Hp({mode:"visible",children:S.children},R,0,null),M=Id(M,R,Z,null),M.flags|=2,S.return=d,M.return=d,S.sibling=M,d.child=S,(d.mode&1)!==0&&Bn(d,l.child,null,Z),d.child.memoizedState=vf(Z),d.memoizedState=gf,M);if((d.mode&1)===0)return $c(l,d,Z,null);if(R.data==="$!"){if(S=R.nextSibling&&R.nextSibling.dataset,S)var be=S.dgst;return S=be,M=Error(t(419)),S=kp(M,S,void 0),$c(l,d,Z,S)}if(be=(Z&l.childLanes)!==0,_o||be){if(S=cs,S!==null){switch(Z&-Z){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(S.suspendedLanes|Z))!==0?0:R,R!==0&&R!==M.retryLane&&(M.retryLane=R,or(l,R),Tl(S,l,R,-1))}return kg(),S=kp(Error(t(421))),$c(l,d,Z,S)}return R.data==="$?"?(d.flags|=128,d.child=l.child,d=mb.bind(null,l),R._reactRetry=d,null):(l=M.treeContext,Qe=_s(R.nextSibling),Pe=d,Je=!0,et=null,l!==null&&(ae[me++]=De,ae[me++]=Fe,ae[me++]=Ce,De=l.id,Fe=l.overflow,Ce=d),d=xh(d,S.children),d.flags|=4096,d)}function yf(l,d,v){l.lanes|=d;var S=l.alternate;S!==null&&(S.lanes|=d),br(l.return,d,v)}function bf(l,d,v,S,R){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:R}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=S,M.tail=v,M.tailMode=R)}function Mu(l,d,v){var S=d.pendingProps,R=S.revealOrder,M=S.tail;if(Ns(l,d,S.children,v),S=wr.current,(S&2)!==0)S=S&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&yf(l,v,d);else if(l.tag===19)yf(l,v,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(hr(wr,S),(d.mode&1)===0)d.memoizedState=null;else switch(R){case"forwards":for(v=d.child,R=null;v!==null;)l=v.alternate,l!==null&&Js(l)===null&&(R=v),v=v.sibling;v=R,v===null?(R=d.child,d.child=null):(R=v.sibling,v.sibling=null),bf(d,!1,R,v,M);break;case"backwards":for(v=null,R=d.child,d.child=null;R!==null;){if(l=R.alternate,l!==null&&Js(l)===null){d.child=R;break}l=R.sibling,R.sibling=v,v=R,R=l}bf(d,!0,v,null,M);break;case"together":bf(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Lp(l,d){(d.mode&1)===0&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function El(l,d,v){if(l!==null&&(d.dependencies=l.dependencies),Du|=d.lanes,(v&d.childLanes)===0)return null;if(l!==null&&d.child!==l.child)throw Error(t(153));if(d.child!==null){for(l=d.child,v=Ll(l,l.pendingProps),d.child=v,v.return=d;l.sibling!==null;)l=l.sibling,v=v.sibling=Ll(l,l.pendingProps),v.return=d;v.sibling=null}return d.child}function u0(l,d,v){switch(d.tag){case 3:c0(d),dn();break;case 5:uf(d);break;case 1:Xs(d.type)&&Cs(d);break;case 4:Iu(d,d.stateNode.containerInfo);break;case 10:var S=d.type._context,R=d.memoizedProps.value;hr(Bi,S._currentValue),S._currentValue=R;break;case 13:if(S=d.memoizedState,S!==null)return S.dehydrated!==null?(hr(wr,wr.current&1),d.flags|=128,null):(v&d.child.childLanes)!==0?Tp(l,d,v):(hr(wr,wr.current&1),l=El(l,d,v),l!==null?l.sibling:null);hr(wr,wr.current&1);break;case 19:if(S=(v&d.childLanes)!==0,(l.flags&128)!==0){if(S)return Mu(l,d,v);d.flags|=128}if(R=d.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),hr(wr,wr.current),S)break;return null;case 22:case 23:return d.lanes=0,lg(l,d,v)}return El(l,d,v)}var Ts,fg,d0,pg;Ts=function(l,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},fg=function(){},d0=function(l,d,v,S){var R=l.memoizedProps;if(R!==S){l=d.stateNode,fa(bo.current);var M=null;switch(v){case"input":R=Ct(l,R),S=Ct(l,S),M=[];break;case"select":R=ue({},R,{value:void 0}),S=ue({},S,{value:void 0}),M=[];break;case"textarea":R=bt(l,R),S=bt(l,S),M=[];break;default:typeof R.onClick!="function"&&typeof S.onClick=="function"&&(l.onclick=Cu)}ir(v,S);var Z;v=null;for(qe in R)if(!S.hasOwnProperty(qe)&&R.hasOwnProperty(qe)&&R[qe]!=null)if(qe==="style"){var be=R[qe];for(Z in be)be.hasOwnProperty(Z)&&(v||(v={}),v[Z]="")}else qe!=="dangerouslySetInnerHTML"&&qe!=="children"&&qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&qe!=="autoFocus"&&(i.hasOwnProperty(qe)?M||(M=[]):(M=M||[]).push(qe,null));for(qe in S){var ke=S[qe];if(be=R?.[qe],S.hasOwnProperty(qe)&&ke!==be&&(ke!=null||be!=null))if(qe==="style")if(be){for(Z in be)!be.hasOwnProperty(Z)||ke&&ke.hasOwnProperty(Z)||(v||(v={}),v[Z]="");for(Z in ke)ke.hasOwnProperty(Z)&&be[Z]!==ke[Z]&&(v||(v={}),v[Z]=ke[Z])}else v||(M||(M=[]),M.push(qe,v)),v=ke;else qe==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,be=be?be.__html:void 0,ke!=null&&be!==ke&&(M=M||[]).push(qe,ke)):qe==="children"?typeof ke!="string"&&typeof ke!="number"||(M=M||[]).push(qe,""+ke):qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&(i.hasOwnProperty(qe)?(ke!=null&&qe==="onScroll"&&pr("scroll",l),M||be===ke||(M=[])):(M=M||[]).push(qe,ke))}v&&(M=M||[]).push("style",v);var qe=M;(d.updateQueue=qe)&&(d.flags|=4)}},pg=function(l,d,v,S){v!==S&&(d.flags|=4)};function wf(l,d){if(!Je)switch(l.tailMode){case"hidden":d=l.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Ls(l){var d=l.alternate!==null&&l.alternate.child===l.child,v=0,S=0;if(d)for(var R=l.child;R!==null;)v|=R.lanes|R.childLanes,S|=R.subtreeFlags&14680064,S|=R.flags&14680064,R.return=l,R=R.sibling;else for(R=l.child;R!==null;)v|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=l,R=R.sibling;return l.subtreeFlags|=S,l.childLanes=v,d}function ab(l,d,v){var S=d.pendingProps;switch(Ee(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ls(d),null;case 1:return Xs(d.type)&&uh(),Ls(d),null;case 3:return S=d.stateNode,zo(),cr(Ks),cr(Fi),hh(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(l===null||l.child===null)&&(Hn(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,et!==null&&(Ag(et),et=null))),fg(l,d),Ls(d),null;case 5:dh(d);var R=fa(wl.current);if(v=d.type,l!==null&&d.stateNode!=null)d0(l,d,v,S,R),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!S){if(d.stateNode===null)throw Error(t(166));return Ls(d),null}if(l=fa(bo.current),Hn(d)){S=d.stateNode,v=d.type;var M=d.memoizedProps;switch(S[qa]=d,S[vl]=M,l=(d.mode&1)!==0,v){case"dialog":pr("cancel",S),pr("close",S);break;case"iframe":case"object":case"embed":pr("load",S);break;case"video":case"audio":for(R=0;R<Oo.length;R++)pr(Oo[R],S);break;case"source":pr("error",S);break;case"img":case"image":case"link":pr("error",S),pr("load",S);break;case"details":pr("toggle",S);break;case"input":We(S,M),pr("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!M.multiple},pr("invalid",S);break;case"textarea":Ot(S,M),pr("invalid",S)}ir(v,M),R=null;for(var Z in M)if(M.hasOwnProperty(Z)){var be=M[Z];Z==="children"?typeof be=="string"?S.textContent!==be&&(M.suppressHydrationWarning!==!0&&bd(S.textContent,be,l),R=["children",be]):typeof be=="number"&&S.textContent!==""+be&&(M.suppressHydrationWarning!==!0&&bd(S.textContent,be,l),R=["children",""+be]):i.hasOwnProperty(Z)&&be!=null&&Z==="onScroll"&&pr("scroll",S)}switch(v){case"input":Ye(S),Rt(S,M,!0);break;case"textarea":Ye(S),Xt(S);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(S.onclick=Cu)}S=R,d.updateQueue=S,S!==null&&(d.flags|=4)}else{Z=R.nodeType===9?R:R.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=un(v)),l==="http://www.w3.org/1999/xhtml"?v==="script"?(l=Z.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof S.is=="string"?l=Z.createElement(v,{is:S.is}):(l=Z.createElement(v),v==="select"&&(Z=l,S.multiple?Z.multiple=!0:S.size&&(Z.size=S.size))):l=Z.createElementNS(l,v),l[qa]=d,l[vl]=S,Ts(l,d,!1,!1),d.stateNode=l;e:{switch(Z=Ji(v,S),v){case"dialog":pr("cancel",l),pr("close",l),R=S;break;case"iframe":case"object":case"embed":pr("load",l),R=S;break;case"video":case"audio":for(R=0;R<Oo.length;R++)pr(Oo[R],l);R=S;break;case"source":pr("error",l),R=S;break;case"img":case"image":case"link":pr("error",l),pr("load",l),R=S;break;case"details":pr("toggle",l),R=S;break;case"input":We(l,S),R=Ct(l,S),pr("invalid",l);break;case"option":R=S;break;case"select":l._wrapperState={wasMultiple:!!S.multiple},R=ue({},S,{value:void 0}),pr("invalid",l);break;case"textarea":Ot(l,S),R=bt(l,S),pr("invalid",l);break;default:R=S}ir(v,R),be=R;for(M in be)if(be.hasOwnProperty(M)){var ke=be[M];M==="style"?Zi(l,ke):M==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&St(l,ke)):M==="children"?typeof ke=="string"?(v!=="textarea"||ke!=="")&&Pt(l,ke):typeof ke=="number"&&Pt(l,""+ke):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(i.hasOwnProperty(M)?ke!=null&&M==="onScroll"&&pr("scroll",l):ke!=null&&L(l,M,ke,Z))}switch(v){case"input":Ye(l),Rt(l,S,!1);break;case"textarea":Ye(l),Xt(l);break;case"option":S.value!=null&&l.setAttribute("value",""+_e(S.value));break;case"select":l.multiple=!!S.multiple,M=S.value,M!=null?gt(l,!!S.multiple,M,!1):S.defaultValue!=null&&gt(l,!!S.multiple,S.defaultValue,!0);break;default:typeof R.onClick=="function"&&(l.onclick=Cu)}switch(v){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ls(d),null;case 6:if(l&&d.stateNode!=null)pg(l,d,l.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(t(166));if(v=fa(wl.current),fa(bo.current),Hn(d)){if(S=d.stateNode,v=d.memoizedProps,S[qa]=d,(M=S.nodeValue!==v)&&(l=Pe,l!==null))switch(l.tag){case 3:bd(S.nodeValue,v,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&bd(S.nodeValue,v,(l.mode&1)!==0)}M&&(d.flags|=4)}else S=(v.nodeType===9?v:v.ownerDocument).createTextNode(S),S[qa]=d,d.stateNode=S}return Ls(d),null;case 13:if(cr(wr),S=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Je&&Qe!==null&&(d.mode&1)!==0&&(d.flags&128)===0)Fn(),dn(),d.flags|=98560,M=!1;else if(M=Hn(d),S!==null&&S.dehydrated!==null){if(l===null){if(!M)throw Error(t(318));if(M=d.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(t(317));M[qa]=d}else dn(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ls(d),M=!1}else et!==null&&(Ag(et),et=null),M=!0;if(!M)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=v,d):(S=S!==null,S!==(l!==null&&l.memoizedState!==null)&&S&&(d.child.flags|=8192,(d.mode&1)!==0&&(l===null||(wr.current&1)!==0?zi===0&&(zi=3):kg())),d.updateQueue!==null&&(d.flags|=4),Ls(d),null);case 4:return zo(),fg(l,d),l===null&&$a(d.stateNode.containerInfo),Ls(d),null;case 10:return ks(d.type._context),Ls(d),null;case 17:return Xs(d.type)&&uh(),Ls(d),null;case 19:if(cr(wr),M=d.memoizedState,M===null)return Ls(d),null;if(S=(d.flags&128)!==0,Z=M.rendering,Z===null)if(S)wf(M,!1);else{if(zi!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(Z=Js(l),Z!==null){for(d.flags|=128,wf(M,!1),S=Z.updateQueue,S!==null&&(d.updateQueue=S,d.flags|=4),d.subtreeFlags=0,S=v,v=d.child;v!==null;)M=v,l=S,M.flags&=14680066,Z=M.alternate,Z===null?(M.childLanes=0,M.lanes=l,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=Z.childLanes,M.lanes=Z.lanes,M.child=Z.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=Z.memoizedProps,M.memoizedState=Z.memoizedState,M.updateQueue=Z.updateQueue,M.type=Z.type,l=Z.dependencies,M.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),v=v.sibling;return hr(wr,wr.current&1|2),d.child}l=l.sibling}M.tail!==null&&Ke()>Nd&&(d.flags|=128,S=!0,wf(M,!1),d.lanes=4194304)}else{if(!S)if(l=Js(Z),l!==null){if(d.flags|=128,S=!0,v=l.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),wf(M,!0),M.tail===null&&M.tailMode==="hidden"&&!Z.alternate&&!Je)return Ls(d),null}else 2*Ke()-M.renderingStartTime>Nd&&v!==1073741824&&(d.flags|=128,S=!0,wf(M,!1),d.lanes=4194304);M.isBackwards?(Z.sibling=d.child,d.child=Z):(v=M.last,v!==null?v.sibling=Z:d.child=Z,M.last=Z)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=Ke(),d.sibling=null,v=wr.current,hr(wr,S?v&1|2:v&1),d):(Ls(d),null);case 22:case 23:return Eg(),S=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==S&&(d.flags|=8192),S&&(d.mode&1)!==0?(_a&1073741824)!==0&&(Ls(d),d.subtreeFlags&6&&(d.flags|=8192)):Ls(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function lb(l,d){switch(Ee(d),d.tag){case 1:return Xs(d.type)&&uh(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return zo(),cr(Ks),cr(Fi),hh(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 5:return dh(d),null;case 13:if(cr(wr),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(t(340));dn()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return cr(wr),null;case 4:return zo(),null;case 10:return ks(d.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var Rp=!1,Xr=!1,So=typeof WeakSet=="function"?WeakSet:Set,It=null;function _h(l,d){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){ni(l,d,S)}else v.current=null}function xf(l,d,v){try{v()}catch(S){ni(l,d,S)}}var h0=!1;function cb(l,d){if(zc=fu,l=Qn(),pl(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var S=v.getSelection&&v.getSelection();if(S&&S.rangeCount!==0){v=S.anchorNode;var R=S.anchorOffset,M=S.focusNode;S=S.focusOffset;try{v.nodeType,M.nodeType}catch{v=null;break e}var Z=0,be=-1,ke=-1,qe=0,ct=0,pt=l,lt=null;t:for(;;){for(var Nt;pt!==v||R!==0&&pt.nodeType!==3||(be=Z+R),pt!==M||S!==0&&pt.nodeType!==3||(ke=Z+S),pt.nodeType===3&&(Z+=pt.nodeValue.length),(Nt=pt.firstChild)!==null;)lt=pt,pt=Nt;for(;;){if(pt===l)break t;if(lt===v&&++qe===R&&(be=Z),lt===M&&++ct===S&&(ke=Z),(Nt=pt.nextSibling)!==null)break;pt=lt,lt=pt.parentNode}pt=Nt}v=be===-1||ke===-1?null:{start:be,end:ke}}else v=null}v=v||{start:0,end:0}}else v=null;for(ca={focusedElem:l,selectionRange:v},fu=!1,It=d;It!==null;)if(d=It,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,It=l;else for(;It!==null;){d=It;try{var Dt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var Ft=Dt.memoizedProps,yi=Dt.memoizedState,ze=d.stateNode,Le=ze.getSnapshotBeforeUpdate(d.elementType===d.type?Ft:Va(d.type,Ft),yi);ze.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:var Ue=d.stateNode.containerInfo;Ue.nodeType===1?Ue.textContent="":Ue.nodeType===9&&Ue.documentElement&&Ue.removeChild(Ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(vt){ni(d,d.return,vt)}if(l=d.sibling,l!==null){l.return=d.return,It=l;break}It=d.return}return Dt=h0,h0=!1,Dt}function qc(l,d,v){var S=d.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var R=S=S.next;do{if((R.tag&l)===l){var M=R.destroy;R.destroy=void 0,M!==void 0&&xf(d,v,M)}R=R.next}while(R!==S)}}function _f(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&l)===l){var S=v.create;v.destroy=S()}v=v.next}while(v!==d)}}function Ip(l){var d=l.ref;if(d!==null){var v=l.stateNode;switch(l.tag){case 5:l=v;break;default:l=v}typeof d=="function"?d(l):d.current=l}}function f0(l){var d=l.alternate;d!==null&&(l.alternate=null,f0(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[qa],delete d[vl],delete d[Ss],delete d[oe],delete d[Nu])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function p0(l){return l.tag===5||l.tag===3||l.tag===4}function m0(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||p0(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function mg(l,d,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,d?v.nodeType===8?v.parentNode.insertBefore(l,d):v.insertBefore(l,d):(v.nodeType===8?(d=v.parentNode,d.insertBefore(l,v)):(d=v,d.appendChild(l)),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=Cu));else if(S!==4&&(l=l.child,l!==null))for(mg(l,d,v),l=l.sibling;l!==null;)mg(l,d,v),l=l.sibling}function jp(l,d,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,d?v.insertBefore(l,d):v.appendChild(l);else if(S!==4&&(l=l.child,l!==null))for(jp(l,d,v),l=l.sibling;l!==null;)jp(l,d,v),l=l.sibling}var ls=null,kl=!1;function mc(l,d,v){for(v=v.child;v!==null;)gg(l,d,v),v=v.sibling}function gg(l,d,v){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(ll,v)}catch{}switch(v.tag){case 5:Xr||_h(v,d);case 6:var S=ls,R=kl;ls=null,mc(l,d,v),ls=S,kl=R,ls!==null&&(kl?(l=ls,v=v.stateNode,l.nodeType===8?l.parentNode.removeChild(v):l.removeChild(v)):ls.removeChild(v.stateNode));break;case 18:ls!==null&&(kl?(l=ls,v=v.stateNode,l.nodeType===8?of(l.parentNode,v):l.nodeType===1&&of(l,v),In(l)):of(ls,v.stateNode));break;case 4:S=ls,R=kl,ls=v.stateNode.containerInfo,kl=!0,mc(l,d,v),ls=S,kl=R;break;case 0:case 11:case 14:case 15:if(!Xr&&(S=v.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){R=S=S.next;do{var M=R,Z=M.destroy;M=M.tag,Z!==void 0&&((M&2)!==0||(M&4)!==0)&&xf(v,d,Z),R=R.next}while(R!==S)}mc(l,d,v);break;case 1:if(!Xr&&(_h(v,d),S=v.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=v.memoizedProps,S.state=v.memoizedState,S.componentWillUnmount()}catch(be){ni(v,d,be)}mc(l,d,v);break;case 21:mc(l,d,v);break;case 22:v.mode&1?(Xr=(S=Xr)||v.memoizedState!==null,mc(l,d,v),Xr=S):mc(l,d,v);break;default:mc(l,d,v)}}function Sh(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new So),d.forEach(function(S){var R=gb.bind(null,l,S);v.has(S)||(v.add(S),S.then(R,R))})}}function xa(l,d){var v=d.deletions;if(v!==null)for(var S=0;S<v.length;S++){var R=v[S];try{var M=l,Z=d,be=Z;e:for(;be!==null;){switch(be.tag){case 5:ls=be.stateNode,kl=!1;break e;case 3:ls=be.stateNode.containerInfo,kl=!0;break e;case 4:ls=be.stateNode.containerInfo,kl=!0;break e}be=be.return}if(ls===null)throw Error(t(160));gg(M,Z,R),ls=null,kl=!1;var ke=R.alternate;ke!==null&&(ke.return=null),R.return=null}catch(qe){ni(R,d,qe)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)vg(d,l),d=d.sibling}function vg(l,d){var v=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(xa(d,l),Pl(l),S&4){try{qc(3,l,l.return),_f(3,l)}catch(Ft){ni(l,l.return,Ft)}try{qc(5,l,l.return)}catch(Ft){ni(l,l.return,Ft)}}break;case 1:xa(d,l),Pl(l),S&512&&v!==null&&_h(v,v.return);break;case 5:if(xa(d,l),Pl(l),S&512&&v!==null&&_h(v,v.return),l.flags&32){var R=l.stateNode;try{Pt(R,"")}catch(Ft){ni(l,l.return,Ft)}}if(S&4&&(R=l.stateNode,R!=null)){var M=l.memoizedProps,Z=v!==null?v.memoizedProps:M,be=l.type,ke=l.updateQueue;if(l.updateQueue=null,ke!==null)try{be==="input"&&M.type==="radio"&&M.name!=null&&we(R,M),Ji(be,Z);var qe=Ji(be,M);for(Z=0;Z<ke.length;Z+=2){var ct=ke[Z],pt=ke[Z+1];ct==="style"?Zi(R,pt):ct==="dangerouslySetInnerHTML"?St(R,pt):ct==="children"?Pt(R,pt):L(R,ct,pt,qe)}switch(be){case"input":Mt(R,M);break;case"textarea":Qt(R,M);break;case"select":var lt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!M.multiple;var Nt=M.value;Nt!=null?gt(R,!!M.multiple,Nt,!1):lt!==!!M.multiple&&(M.defaultValue!=null?gt(R,!!M.multiple,M.defaultValue,!0):gt(R,!!M.multiple,M.multiple?[]:"",!1))}R[vl]=M}catch(Ft){ni(l,l.return,Ft)}}break;case 6:if(xa(d,l),Pl(l),S&4){if(l.stateNode===null)throw Error(t(162));R=l.stateNode,M=l.memoizedProps;try{R.nodeValue=M}catch(Ft){ni(l,l.return,Ft)}}break;case 3:if(xa(d,l),Pl(l),S&4&&v!==null&&v.memoizedState.isDehydrated)try{In(d.containerInfo)}catch(Ft){ni(l,l.return,Ft)}break;case 4:xa(d,l),Pl(l);break;case 13:xa(d,l),Pl(l),R=l.child,R.flags&8192&&(M=R.memoizedState!==null,R.stateNode.isHidden=M,!M||R.alternate!==null&&R.alternate.memoizedState!==null||(wg=Ke())),S&4&&Sh(l);break;case 22:if(ct=v!==null&&v.memoizedState!==null,l.mode&1?(Xr=(qe=Xr)||ct,xa(d,l),Xr=qe):xa(d,l),Pl(l),S&8192){if(qe=l.memoizedState!==null,(l.stateNode.isHidden=qe)&&!ct&&(l.mode&1)!==0)for(It=l,ct=l.child;ct!==null;){for(pt=It=ct;It!==null;){switch(lt=It,Nt=lt.child,lt.tag){case 0:case 11:case 14:case 15:qc(4,lt,lt.return);break;case 1:_h(lt,lt.return);var Dt=lt.stateNode;if(typeof Dt.componentWillUnmount=="function"){S=lt,v=lt.return;try{d=S,Dt.props=d.memoizedProps,Dt.state=d.memoizedState,Dt.componentWillUnmount()}catch(Ft){ni(S,v,Ft)}}break;case 5:_h(lt,lt.return);break;case 22:if(lt.memoizedState!==null){Ou(pt);continue}}Nt!==null?(Nt.return=lt,It=Nt):Ou(pt)}ct=ct.sibling}e:for(ct=null,pt=l;;){if(pt.tag===5){if(ct===null){ct=pt;try{R=pt.stateNode,qe?(M=R.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(be=pt.stateNode,ke=pt.memoizedProps.style,Z=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,be.style.display=Pn("display",Z))}catch(Ft){ni(l,l.return,Ft)}}}else if(pt.tag===6){if(ct===null)try{pt.stateNode.nodeValue=qe?"":pt.memoizedProps}catch(Ft){ni(l,l.return,Ft)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===l)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===l)break e;for(;pt.sibling===null;){if(pt.return===null||pt.return===l)break e;ct===pt&&(ct=null),pt=pt.return}ct===pt&&(ct=null),pt.sibling.return=pt.return,pt=pt.sibling}}break;case 19:xa(d,l),Pl(l),S&4&&Sh(l);break;case 21:break;default:xa(d,l),Pl(l)}}function Pl(l){var d=l.flags;if(d&2){try{e:{for(var v=l.return;v!==null;){if(p0(v)){var S=v;break e}v=v.return}throw Error(t(160))}switch(S.tag){case 5:var R=S.stateNode;S.flags&32&&(Pt(R,""),S.flags&=-33);var M=m0(l);jp(l,M,R);break;case 3:case 4:var Z=S.stateNode.containerInfo,be=m0(l);mg(l,be,Z);break;default:throw Error(t(161))}}catch(ke){ni(l,l.return,ke)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Mp(l,d,v){It=l,yg(l)}function yg(l,d,v){for(var S=(l.mode&1)!==0;It!==null;){var R=It,M=R.child;if(R.tag===22&&S){var Z=R.memoizedState!==null||Rp;if(!Z){var be=R.alternate,ke=be!==null&&be.memoizedState!==null||Xr;be=Rp;var qe=Xr;if(Rp=Z,(Xr=ke)&&!qe)for(It=R;It!==null;)Z=It,ke=Z.child,Z.tag===22&&Z.memoizedState!==null?g0(R):ke!==null?(ke.return=Z,It=ke):g0(R);for(;M!==null;)It=M,yg(M),M=M.sibling;It=R,Rp=be,Xr=qe}Nl(l)}else(R.subtreeFlags&8772)!==0&&M!==null?(M.return=R,It=M):Nl(l)}}function Nl(l){for(;It!==null;){var d=It;if((d.flags&8772)!==0){var v=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Xr||_f(5,d);break;case 1:var S=d.stateNode;if(d.flags&4&&!Xr)if(v===null)S.componentDidMount();else{var R=d.elementType===d.type?v.memoizedProps:Va(d.type,v.memoizedProps);S.componentDidUpdate(R,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var M=d.updateQueue;M!==null&&lc(d,M,S);break;case 3:var Z=d.updateQueue;if(Z!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=d.child.stateNode;break;case 1:v=d.child.stateNode}lc(d,Z,v)}break;case 5:var be=d.stateNode;if(v===null&&d.flags&4){v=be;var ke=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&v.focus();break;case"img":ke.src&&(v.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var qe=d.alternate;if(qe!==null){var ct=qe.memoizedState;if(ct!==null){var pt=ct.dehydrated;pt!==null&&In(pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Xr||d.flags&512&&Ip(d)}catch(lt){ni(d,d.return,lt)}}if(d===l){It=null;break}if(v=d.sibling,v!==null){v.return=d.return,It=v;break}It=d.return}}function Ou(l){for(;It!==null;){var d=It;if(d===l){It=null;break}var v=d.sibling;if(v!==null){v.return=d.return,It=v;break}It=d.return}}function g0(l){for(;It!==null;){var d=It;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{_f(4,d)}catch(ke){ni(d,v,ke)}break;case 1:var S=d.stateNode;if(typeof S.componentDidMount=="function"){var R=d.return;try{S.componentDidMount()}catch(ke){ni(d,R,ke)}}var M=d.return;try{Ip(d)}catch(ke){ni(d,M,ke)}break;case 5:var Z=d.return;try{Ip(d)}catch(ke){ni(d,Z,ke)}}}catch(ke){ni(d,d.return,ke)}if(d===l){It=null;break}var be=d.sibling;if(be!==null){be.return=d.return,It=be;break}It=d.return}}var v0=Math.ceil,Op=j.ReactCurrentDispatcher,bg=j.ReactCurrentOwner,Wa=j.ReactCurrentBatchConfig,er=0,cs=null,Ni=null,Rs=0,_a=0,Ah=Di(0),zi=0,Sf=null,Du=0,Af=0,Dp=0,Cf=null,$o=null,wg=0,Nd=1/0,Vc=null,Fp=!1,xg=null,Fu=null,Bp=!1,Bu=null,Ao=0,Ef=0,_g=null,zp=-1,kf=0;function Co(){return(er&6)!==0?Ke():zp!==-1?zp:zp=Ke()}function zu(l){return(l.mode&1)===0?1:(er&2)!==0&&Rs!==0?Rs&-Rs:ur.transition!==null?(kf===0&&(kf=lu()),kf):(l=Vn,l!==0||(l=window.event,l=l===void 0?16:fd(l.type)),l)}function Tl(l,d,v,S){if(50<Ef)throw Ef=0,_g=null,Error(t(185));Hl(l,v,S),((er&2)===0||l!==cs)&&(l===cs&&((er&2)===0&&(Af|=v),zi===4&&Uu(l,Rs)),qo(l,S),v===1&&er===0&&(d.mode&1)===0&&(Nd=Ke()+500,_d&&D()))}function qo(l,d){var v=l.callbackNode;qs(l,d);var S=ji(l,l===cs?Rs:0);if(S===0)v!==null&&Be(v),l.callbackNode=null,l.callbackPriority=0;else if(d=S&-S,l.callbackPriority!==d){if(v!=null&&Be(v),d===1)l.tag===0?I(y0.bind(null,l)):A(y0.bind(null,l)),ch(function(){(er&6)===0&&D()}),v=null;else{switch(ra(S)){case 1:v=Tt;break;case 4:v=Nn;break;case 16:v=Dr;break;case 536870912:v=ja;break;default:v=Dr}v=C0(v,Up.bind(null,l))}l.callbackPriority=d,l.callbackNode=v}}function Up(l,d){if(zp=-1,kf=0,(er&6)!==0)throw Error(t(327));var v=l.callbackNode;if(Ch()&&l.callbackNode!==v)return null;var S=ji(l,l===cs?Rs:0);if(S===0)return null;if((S&30)!==0||(S&l.expiredLanes)!==0||d)d=$p(l,S);else{d=S;var R=er;er|=2;var M=w0();(cs!==l||Rs!==d)&&(Vc=null,Nd=Ke()+500,Ld(l,d));do try{hb();break}catch(be){b0(l,be)}while(!0);Br(),Op.current=M,er=R,Ni!==null?d=0:(cs=null,Rs=0,d=zi)}if(d!==0){if(d===2&&(R=Wl(l),R!==0&&(S=R,d=Sg(l,R))),d===1)throw v=Sf,Ld(l,0),Uu(l,S),qo(l,Ke()),v;if(d===6)Uu(l,S);else{if(R=l.current.alternate,(S&30)===0&&!ub(R)&&(d=$p(l,S),d===2&&(M=Wl(l),M!==0&&(S=M,d=Sg(l,M))),d===1))throw v=Sf,Ld(l,0),Uu(l,S),qo(l,Ke()),v;switch(l.finishedWork=R,l.finishedLanes=S,d){case 0:case 1:throw Error(t(345));case 2:Rd(l,$o,Vc);break;case 3:if(Uu(l,S),(S&130023424)===S&&(d=wg+500-Ke(),10<d)){if(ji(l,0)!==0)break;if(R=l.suspendedLanes,(R&S)!==S){Co(),l.pingedLanes|=l.suspendedLanes&R;break}l.timeoutHandle=sc(Rd.bind(null,l,$o,Vc),d);break}Rd(l,$o,Vc);break;case 4:if(Uu(l,S),(S&4194240)===S)break;for(d=l.eventTimes,R=-1;0<S;){var Z=31-ho(S);M=1<<Z,Z=d[Z],Z>R&&(R=Z),S&=~M}if(S=R,S=Ke()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*v0(S/1960))-S,10<S){l.timeoutHandle=sc(Rd.bind(null,l,$o,Vc),S);break}Rd(l,$o,Vc);break;case 5:Rd(l,$o,Vc);break;default:throw Error(t(329))}}}return qo(l,Ke()),l.callbackNode===v?Up.bind(null,l):null}function Sg(l,d){var v=Cf;return l.current.memoizedState.isDehydrated&&(Ld(l,d).flags|=256),l=$p(l,d),l!==2&&(d=$o,$o=v,d!==null&&Ag(d)),l}function Ag(l){$o===null?$o=l:$o.push.apply($o,l)}function ub(l){for(var d=l;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var R=v[S],M=R.getSnapshot;R=R.value;try{if(!Oe(M(),R))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Uu(l,d){for(d&=~Dp,d&=~Af,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var v=31-ho(d),S=1<<v;l[v]=-1,d&=~S}}function y0(l){if((er&6)!==0)throw Error(t(327));Ch();var d=ji(l,0);if((d&1)===0)return qo(l,Ke()),null;var v=$p(l,d);if(l.tag!==0&&v===2){var S=Wl(l);S!==0&&(d=S,v=Sg(l,S))}if(v===1)throw v=Sf,Ld(l,0),Uu(l,d),qo(l,Ke()),v;if(v===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,Rd(l,$o,Vc),qo(l,Ke()),null}function Cg(l,d){var v=er;er|=1;try{return l(d)}finally{er=v,er===0&&(Nd=Ke()+500,_d&&D())}}function Td(l){Bu!==null&&Bu.tag===0&&(er&6)===0&&Ch();var d=er;er|=1;var v=Wa.transition,S=Vn;try{if(Wa.transition=null,Vn=1,l)return l()}finally{Vn=S,Wa.transition=v,er=d,(er&6)===0&&D()}}function Eg(){_a=Ah.current,cr(Ah)}function Ld(l,d){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==-1&&(l.timeoutHandle=-1,Eu(v)),Ni!==null)for(v=Ni.return;v!==null;){var S=v;switch(Ee(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&uh();break;case 3:zo(),cr(Ks),cr(Fi),hh();break;case 5:dh(S);break;case 4:zo();break;case 13:cr(wr);break;case 19:cr(wr);break;case 10:ks(S.type._context);break;case 22:case 23:Eg()}v=v.return}if(cs=l,Ni=l=Ll(l.current,null),Rs=_a=d,zi=0,Sf=null,Dp=Af=Du=0,$o=Cf=null,yo!==null){for(d=0;d<yo.length;d++)if(v=yo[d],S=v.interleaved,S!==null){v.interleaved=null;var R=S.next,M=v.pending;if(M!==null){var Z=M.next;M.next=R,S.next=Z}v.pending=S}yo=null}return l}function b0(l,d){do{var v=Ni;try{if(Br(),Ad.current=Sp,cc){for(var S=Or.memoizedState;S!==null;){var R=S.queue;R!==null&&(R.pending=null),S=S.next}cc=!1}if(pa=0,Kr=Yr=Or=null,xl=!1,uc=0,bg.current=null,v===null||v.return===null){zi=1,Sf=d,Ni=null;break}e:{var M=l,Z=v.return,be=v,ke=d;if(d=Rs,be.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var qe=ke,ct=be,pt=ct.tag;if((ct.mode&1)===0&&(pt===0||pt===11||pt===15)){var lt=ct.alternate;lt?(ct.updateQueue=lt.updateQueue,ct.memoizedState=lt.memoizedState,ct.lanes=lt.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var Nt=a0(Z);if(Nt!==null){Nt.flags&=-257,og(Nt,Z,be,M,d),Nt.mode&1&&mf(M,qe,d),d=Nt,ke=qe;var Dt=d.updateQueue;if(Dt===null){var Ft=new Set;Ft.add(ke),d.updateQueue=Ft}else Dt.add(ke);break e}else{if((d&1)===0){mf(M,qe,d),kg();break e}ke=Error(t(426))}}else if(Je&&be.mode&1){var yi=a0(Z);if(yi!==null){(yi.flags&65536)===0&&(yi.flags|=256),og(yi,Z,be,M,d),Mn(Pd(ke,be));break e}}M=ke=Pd(ke,be),zi!==4&&(zi=2),Cf===null?Cf=[M]:Cf.push(M),M=Z;do{switch(M.tag){case 3:M.flags|=65536,d&=-d,M.lanes|=d;var ze=pf(M,ke,d);Bo(M,ze);break e;case 1:be=ke;var Le=M.type,Ue=M.stateNode;if((M.flags&128)===0&&(typeof Le.getDerivedStateFromError=="function"||Ue!==null&&typeof Ue.componentDidCatch=="function"&&(Fu===null||!Fu.has(Ue)))){M.flags|=65536,d&=-d,M.lanes|=d;var vt=Pp(M,be,d);Bo(M,vt);break e}}M=M.return}while(M!==null)}_0(v)}catch(qt){d=qt,Ni===v&&v!==null&&(Ni=v=v.return);continue}break}while(!0)}function w0(){var l=Op.current;return Op.current=Sp,l===null?Sp:l}function kg(){(zi===0||zi===3||zi===2)&&(zi=4),cs===null||(Du&268435455)===0&&(Af&268435455)===0||Uu(cs,Rs)}function $p(l,d){var v=er;er|=2;var S=w0();(cs!==l||Rs!==d)&&(Vc=null,Ld(l,d));do try{db();break}catch(R){b0(l,R)}while(!0);if(Br(),er=v,Op.current=S,Ni!==null)throw Error(t(261));return cs=null,Rs=0,zi}function db(){for(;Ni!==null;)x0(Ni)}function hb(){for(;Ni!==null&&!Se();)x0(Ni)}function x0(l){var d=A0(l.alternate,l,_a);l.memoizedProps=l.pendingProps,d===null?_0(l):Ni=d,bg.current=null}function _0(l){var d=l;do{var v=d.alternate;if(l=d.return,(d.flags&32768)===0){if(v=ab(v,d,_a),v!==null){Ni=v;return}}else{if(v=lb(v,d),v!==null){v.flags&=32767,Ni=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{zi=6,Ni=null;return}}if(d=d.sibling,d!==null){Ni=d;return}Ni=d=l}while(d!==null);zi===0&&(zi=5)}function Rd(l,d,v){var S=Vn,R=Wa.transition;try{Wa.transition=null,Vn=1,fb(l,d,v,S)}finally{Wa.transition=R,Vn=S}return null}function fb(l,d,v,S){do Ch();while(Bu!==null);if((er&6)!==0)throw Error(t(327));v=l.finishedWork;var R=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var M=v.lanes|v.childLanes;if(rh(l,M),l===cs&&(Ni=cs=null,Rs=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||Bp||(Bp=!0,C0(Dr,function(){return Ch(),null})),M=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||M){M=Wa.transition,Wa.transition=null;var Z=Vn;Vn=1;var be=er;er|=4,bg.current=null,cb(l,v),vg(v,l),Oc(ca),fu=!!zc,ca=zc=null,l.current=v,Mp(v),Ve(),er=be,Vn=Z,Wa.transition=M}else l.current=v;if(Bp&&(Bp=!1,Bu=l,Ao=R),M=l.pendingLanes,M===0&&(Fu=null),au(v.stateNode),qo(l,Ke()),d!==null)for(S=l.onRecoverableError,v=0;v<d.length;v++)R=d[v],S(R.value,{componentStack:R.stack,digest:R.digest});if(Fp)throw Fp=!1,l=xg,xg=null,l;return(Ao&1)!==0&&l.tag!==0&&Ch(),M=l.pendingLanes,(M&1)!==0?l===_g?Ef++:(Ef=0,_g=l):Ef=0,D(),null}function Ch(){if(Bu!==null){var l=ra(Ao),d=Wa.transition,v=Vn;try{if(Wa.transition=null,Vn=16>l?16:l,Bu===null)var S=!1;else{if(l=Bu,Bu=null,Ao=0,(er&6)!==0)throw Error(t(331));var R=er;for(er|=4,It=l.current;It!==null;){var M=It,Z=M.child;if((It.flags&16)!==0){var be=M.deletions;if(be!==null){for(var ke=0;ke<be.length;ke++){var qe=be[ke];for(It=qe;It!==null;){var ct=It;switch(ct.tag){case 0:case 11:case 15:qc(8,ct,M)}var pt=ct.child;if(pt!==null)pt.return=ct,It=pt;else for(;It!==null;){ct=It;var lt=ct.sibling,Nt=ct.return;if(f0(ct),ct===qe){It=null;break}if(lt!==null){lt.return=Nt,It=lt;break}It=Nt}}}var Dt=M.alternate;if(Dt!==null){var Ft=Dt.child;if(Ft!==null){Dt.child=null;do{var yi=Ft.sibling;Ft.sibling=null,Ft=yi}while(Ft!==null)}}It=M}}if((M.subtreeFlags&2064)!==0&&Z!==null)Z.return=M,It=Z;else e:for(;It!==null;){if(M=It,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:qc(9,M,M.return)}var ze=M.sibling;if(ze!==null){ze.return=M.return,It=ze;break e}It=M.return}}var Le=l.current;for(It=Le;It!==null;){Z=It;var Ue=Z.child;if((Z.subtreeFlags&2064)!==0&&Ue!==null)Ue.return=Z,It=Ue;else e:for(Z=Le;It!==null;){if(be=It,(be.flags&2048)!==0)try{switch(be.tag){case 0:case 11:case 15:_f(9,be)}}catch(qt){ni(be,be.return,qt)}if(be===Z){It=null;break e}var vt=be.sibling;if(vt!==null){vt.return=be.return,It=vt;break e}It=be.return}}if(er=R,D(),No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(ll,l)}catch{}S=!0}return S}finally{Vn=v,Wa.transition=d}}return!1}function qp(l,d,v){d=Pd(v,d),d=pf(l,d,1),l=os(l,d,1),d=Co(),l!==null&&(Hl(l,1,d),qo(l,d))}function ni(l,d,v){if(l.tag===3)qp(l,l,v);else for(;d!==null;){if(d.tag===3){qp(d,l,v);break}else if(d.tag===1){var S=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Fu===null||!Fu.has(S))){l=Pd(v,l),l=Pp(d,l,1),d=os(d,l,1),l=Co(),d!==null&&(Hl(d,1,l),qo(d,l));break}}d=d.return}}function pb(l,d,v){var S=l.pingCache;S!==null&&S.delete(d),d=Co(),l.pingedLanes|=l.suspendedLanes&v,cs===l&&(Rs&v)===v&&(zi===4||zi===3&&(Rs&130023424)===Rs&&500>Ke()-wg?Ld(l,0):Dp|=v),qo(l,d)}function S0(l,d){d===0&&((l.mode&1)===0?d=1:(d=ql,ql<<=1,(ql&130023424)===0&&(ql=4194304)));var v=Co();l=or(l,d),l!==null&&(Hl(l,d,v),qo(l,v))}function mb(l){var d=l.memoizedState,v=0;d!==null&&(v=d.retryLane),S0(l,v)}function gb(l,d){var v=0;switch(l.tag){case 13:var S=l.stateNode,R=l.memoizedState;R!==null&&(v=R.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(t(314))}S!==null&&S.delete(d),S0(l,v)}var A0;A0=function(l,d,v){if(l!==null)if(l.memoizedProps!==d.pendingProps||Ks.current)_o=!0;else{if((l.lanes&v)===0&&(d.flags&128)===0)return _o=!1,u0(l,d,v);_o=(l.flags&131072)!==0}else _o=!1,Je&&(d.flags&1048576)!==0&&nt(d,re,d.index);switch(d.lanes=0,d.tag){case 2:var S=d.type;Lp(l,d),l=d.pendingProps;var R=Tu(d,Fi.current);Lr(d,v),R=_l(null,d,S,l,R,v);var M=ma();return d.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Xs(S)?(M=!0,Cs(d)):M=!1,d.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Sd(d),R.updater=Ep,d.stateNode=R,R._reactInternals=d,sg(d,S,l,v),d=hg(null,d,S,!0,M,v)):(d.tag=0,Je&&M&&He(d),Ns(null,d,R,v),d=d.child),d;case 16:S=d.elementType;e:{switch(Lp(l,d),l=d.pendingProps,R=S._init,S=R(S._payload),d.type=S,R=d.tag=yb(S),l=Va(S,l),R){case 0:d=ug(null,d,S,l,v);break e;case 1:d=dg(null,d,S,l,v);break e;case 11:d=l0(null,d,S,l,v);break e;case 14:d=ag(null,d,S,Va(S.type,l),v);break e}throw Error(t(306,S,""))}return d;case 0:return S=d.type,R=d.pendingProps,R=d.elementType===S?R:Va(S,R),ug(l,d,S,R,v);case 1:return S=d.type,R=d.pendingProps,R=d.elementType===S?R:Va(S,R),dg(l,d,S,R,v);case 3:e:{if(c0(d),l===null)throw Error(t(387));S=d.pendingProps,M=d.memoizedState,R=M.element,cf(l,d),ha(d,S,null,v);var Z=d.memoizedState;if(S=Z.element,M.isDehydrated)if(M={element:S,isDehydrated:!1,cache:Z.cache,pendingSuspenseBoundaries:Z.pendingSuspenseBoundaries,transitions:Z.transitions},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){R=Pd(Error(t(423)),d),d=pc(l,d,S,v,R);break e}else if(S!==R){R=Pd(Error(t(424)),d),d=pc(l,d,S,v,R);break e}else for(Qe=_s(d.stateNode.containerInfo.firstChild),Pe=d,Je=!0,et=null,v=Xn(d,null,S,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(dn(),S===R){d=El(l,d,v);break e}Ns(l,d,S,v)}d=d.child}return d;case 5:return uf(d),l===null&&yt(d),S=d.type,R=d.pendingProps,M=l!==null?l.memoizedProps:null,Z=R.children,wd(S,R)?Z=null:M!==null&&wd(S,M)&&(d.flags|=32),cg(l,d),Ns(l,d,Z,v),d.child;case 6:return l===null&&yt(d),null;case 13:return Tp(l,d,v);case 4:return Iu(d,d.stateNode.containerInfo),S=d.pendingProps,l===null?d.child=Bn(d,null,S,v):Ns(l,d,S,v),d.child;case 11:return S=d.type,R=d.pendingProps,R=d.elementType===S?R:Va(S,R),l0(l,d,S,R,v);case 7:return Ns(l,d,d.pendingProps,v),d.child;case 8:return Ns(l,d,d.pendingProps.children,v),d.child;case 12:return Ns(l,d,d.pendingProps.children,v),d.child;case 10:e:{if(S=d.type._context,R=d.pendingProps,M=d.memoizedProps,Z=R.value,hr(Bi,S._currentValue),S._currentValue=Z,M!==null)if(Oe(M.value,Z)){if(M.children===R.children&&!Ks.current){d=El(l,d,v);break e}}else for(M=d.child,M!==null&&(M.return=d);M!==null;){var be=M.dependencies;if(be!==null){Z=M.child;for(var ke=be.firstContext;ke!==null;){if(ke.context===S){if(M.tag===1){ke=Fo(-1,v&-v),ke.tag=2;var qe=M.updateQueue;if(qe!==null){qe=qe.shared;var ct=qe.pending;ct===null?ke.next=ke:(ke.next=ct.next,ct.next=ke),qe.pending=ke}}M.lanes|=v,ke=M.alternate,ke!==null&&(ke.lanes|=v),br(M.return,v,d),be.lanes|=v;break}ke=ke.next}}else if(M.tag===10)Z=M.type===d.type?null:M.child;else if(M.tag===18){if(Z=M.return,Z===null)throw Error(t(341));Z.lanes|=v,be=Z.alternate,be!==null&&(be.lanes|=v),br(Z,v,d),Z=M.sibling}else Z=M.child;if(Z!==null)Z.return=M;else for(Z=M;Z!==null;){if(Z===d){Z=null;break}if(M=Z.sibling,M!==null){M.return=Z.return,Z=M;break}Z=Z.return}M=Z}Ns(l,d,R.children,v),d=d.child}return d;case 9:return R=d.type,S=d.pendingProps.children,Lr(d,v),R=di(R),S=S(R),d.flags|=1,Ns(l,d,S,v),d.child;case 14:return S=d.type,R=Va(S,d.pendingProps),R=Va(S.type,R),ag(l,d,S,R,v);case 15:return fc(l,d,d.type,d.pendingProps,v);case 17:return S=d.type,R=d.pendingProps,R=d.elementType===S?R:Va(S,R),Lp(l,d),d.tag=1,Xs(S)?(l=!0,Cs(d)):l=!1,Lr(d,v),kd(d,S,R),sg(d,S,R,v),hg(null,d,S,!0,l,v);case 19:return Mu(l,d,v);case 22:return lg(l,d,v)}throw Error(t(156,d.tag))};function C0(l,d){return al(l,d)}function vb(l,d,v,S){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(l,d,v,S){return new vb(l,d,v,S)}function Vp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function yb(l){if(typeof l=="function")return Vp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===z)return 11;if(l===ee)return 14}return 2}function Ll(l,d){var v=l.alternate;return v===null?(v=Ha(l.tag,d,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=d,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,d=l.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function Wp(l,d,v,S,R,M){var Z=2;if(S=l,typeof l=="function")Vp(l)&&(Z=1);else if(typeof l=="string")Z=5;else e:switch(l){case U:return Id(v.children,R,M,d);case q:Z=8,R|=8;break;case ie:return l=Ha(12,v,d,R|2),l.elementType=ie,l.lanes=M,l;case le:return l=Ha(13,v,d,R),l.elementType=le,l.lanes=M,l;case ne:return l=Ha(19,v,d,R),l.elementType=ne,l.lanes=M,l;case he:return Hp(v,R,M,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case ve:Z=10;break e;case $:Z=9;break e;case z:Z=11;break e;case ee:Z=14;break e;case G:Z=16,S=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return d=Ha(Z,v,d,R),d.elementType=l,d.type=S,d.lanes=M,d}function Id(l,d,v,S){return l=Ha(7,l,S,d),l.lanes=v,l}function Hp(l,d,v,S){return l=Ha(22,l,S,d),l.elementType=he,l.lanes=v,l.stateNode={isHidden:!1},l}function Pg(l,d,v){return l=Ha(6,l,null,d),l.lanes=v,l}function Ng(l,d,v){return d=Ha(4,l.children!==null?l.children:[],l.key,d),d.lanes=v,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function bb(l,d,v,S,R){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ec(0),this.expirationTimes=Ec(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ec(0),this.identifierPrefix=S,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function Tg(l,d,v,S,R,M,Z,be,ke){return l=new bb(l,d,v,be,ke),d===1?(d=1,M===!0&&(d|=8)):d=0,M=Ha(3,null,null,d),l.current=M,M.stateNode=l,M.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(M),l}function wb(l,d,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:S==null?null:""+S,children:l,containerInfo:d,implementation:v}}function E0(l){if(!l)return oc;l=l._reactInternals;e:{if(mi(l)!==l||l.tag!==1)throw Error(t(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Xs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(l.tag===1){var v=l.type;if(Xs(v))return lf(l,v,d)}return d}function k0(l,d,v,S,R,M,Z,be,ke){return l=Tg(v,S,!0,l,R,M,Z,be,ke),l.context=E0(null),v=l.current,S=Co(),R=zu(v),M=Fo(S,R),M.callback=d??null,os(v,M,R),l.current.lanes=R,Hl(l,R,S),qo(l,S),l}function Gp(l,d,v,S){var R=d.current,M=Co(),Z=zu(R);return v=E0(v),d.context===null?d.context=v:d.pendingContext=v,d=Fo(M,Z),d.payload={element:l},S=S===void 0?null:S,S!==null&&(d.callback=S),l=os(R,d,Z),l!==null&&(Tl(l,R,Z,M),Uc(l,R,Z)),Z}function Yp(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function P0(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<d?v:d}}function Lg(l,d){P0(l,d),(l=l.alternate)&&P0(l,d)}function xb(){return null}var N0=typeof reportError=="function"?reportError:function(l){console.error(l)};function Kp(l){this._internalRoot=l}Pf.prototype.render=Kp.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(t(409));Gp(l,d,null,null)},Pf.prototype.unmount=Kp.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Td(function(){Gp(null,l,null,null)}),d[ui]=null}};function Pf(l){this._internalRoot=l}Pf.prototype.unstable_scheduleHydration=function(l){if(l){var d=ia();l={blockedOn:null,target:l,priority:d};for(var v=0;v<Oa.length&&d!==0&&d<Oa[v].priority;v++);Oa.splice(v,0,l),v===0&&du(l)}};function Rg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Xp(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function T0(){}function _b(l,d,v,S,R){if(R){if(typeof S=="function"){var M=S;S=function(){var qe=Yp(Z);M.call(qe)}}var Z=k0(d,S,l,0,null,!1,!1,"",T0);return l._reactRootContainer=Z,l[ui]=Z.current,$a(l.nodeType===8?l.parentNode:l),Td(),Z}for(;R=l.lastChild;)l.removeChild(R);if(typeof S=="function"){var be=S;S=function(){var qe=Yp(ke);be.call(qe)}}var ke=Tg(l,0,!1,null,null,!1,!1,"",T0);return l._reactRootContainer=ke,l[ui]=ke.current,$a(l.nodeType===8?l.parentNode:l),Td(function(){Gp(d,ke,v,S)}),ke}function jd(l,d,v,S,R){var M=v._reactRootContainer;if(M){var Z=M;if(typeof R=="function"){var be=R;R=function(){var ke=Yp(Z);be.call(ke)}}Gp(d,Z,l,R)}else Z=_b(v,d,l,R,S);return Yp(Z)}ud=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var v=Vl(d.pendingLanes);v!==0&&(Gl(d,v|1),qo(d,Ke()),(er&6)===0&&(Nd=Ke()+500,D()))}break;case 13:Td(function(){var S=or(l,1);if(S!==null){var R=Co();Tl(S,l,1,R)}}),Lg(l,1)}},cu=function(l){if(l.tag===13){var d=or(l,134217728);if(d!==null){var v=Co();Tl(d,l,134217728,v)}Lg(l,134217728)}},ih=function(l){if(l.tag===13){var d=zu(l),v=or(l,d);if(v!==null){var S=Co();Tl(v,l,d,S)}Lg(l,d)}},ia=function(){return Vn},Yl=function(l,d){var v=Vn;try{return Vn=l,d()}finally{Vn=v}},vr=function(l,d,v){switch(d){case"input":if(Mt(l,v),d=v.name,v.type==="radio"&&d!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<v.length;d++){var S=v[d];if(S!==l&&S.form===l.form){var R=xd(S);if(!R)throw Error(t(90));at(S),Mt(S,R)}}}break;case"textarea":Qt(l,v);break;case"select":d=v.value,d!=null&&gt(l,!!v.multiple,d,!1)}},Ra=Cg,ei=Td;var Sb={usingClientEntryPoint:!1,Events:[Oi,yn,xd,nn,qn,Cg]},Nf={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ab={bundleType:Nf.bundleType,version:Nf.version,rendererPackageName:Nf.rendererPackageName,rendererConfig:Nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=ol(l),l===null?null:l.stateNode},findFiberByHostInstance:Nf.findFiberByHostInstance||xb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zp.isDisabled&&Zp.supportsFiber)try{ll=Zp.inject(Ab),No=Zp}catch{}}return Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sb,Xa.createPortal=function(l,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rg(d))throw Error(t(200));return wb(l,d,null,v)},Xa.createRoot=function(l,d){if(!Rg(l))throw Error(t(299));var v=!1,S="",R=N0;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(R=d.onRecoverableError)),d=Tg(l,1,!1,null,null,v,!1,S,R),l[ui]=d.current,$a(l.nodeType===8?l.parentNode:l),new Kp(d)},Xa.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=ol(d),l=l===null?null:l.stateNode,l},Xa.flushSync=function(l){return Td(l)},Xa.hydrate=function(l,d,v){if(!Xp(d))throw Error(t(200));return jd(null,l,d,!0,v)},Xa.hydrateRoot=function(l,d,v){if(!Rg(l))throw Error(t(405));var S=v!=null&&v.hydratedSources||null,R=!1,M="",Z=N0;if(v!=null&&(v.unstable_strictMode===!0&&(R=!0),v.identifierPrefix!==void 0&&(M=v.identifierPrefix),v.onRecoverableError!==void 0&&(Z=v.onRecoverableError)),d=k0(d,null,l,1,v??null,R,!1,M,Z),l[ui]=d.current,$a(l),S)for(l=0;l<S.length;l++)v=S[l],R=v._getVersion,R=R(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,R]:d.mutableSourceEagerHydrationData.push(v,R);return new Pf(d)},Xa.render=function(l,d,v){if(!Xp(d))throw Error(t(200));return jd(null,l,d,!1,v)},Xa.unmountComponentAtNode=function(l){if(!Xp(l))throw Error(t(40));return l._reactRootContainer?(Td(function(){jd(null,null,l,!1,function(){l._reactRootContainer=null,l[ui]=null})}),!0):!1},Xa.unstable_batchedUpdates=Cg,Xa.unstable_renderSubtreeIntoContainer=function(l,d,v,S){if(!Xp(v))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return jd(l,d,v,!1,S)},Xa.version="18.3.1-next-f1338f8080-20240426",Xa}var E5;function dE(){if(E5)return zb.exports;E5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zb.exports=yj(),zb.exports}var k5;function bj(){if(k5)return M0;k5=1;var n=dE();return M0.createRoot=n.createRoot,M0.hydrateRoot=n.hydrateRoot,M0}var wj=bj();const xj=Bv(wj),_j="modulepreload",Sj=function(n){return"/"+n},P5={},Lt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=c(t.map(u=>{if(u=Sj(u),u in P5)return;P5[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":_j,h||(m.as="script"),m.crossOrigin="",m.href=u,a&&m.setAttribute("nonce",a),document.head.appendChild(m),h)return new Promise((b,_)=>{m.addEventListener("load",b),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var zv=dE();const Aj=Bv(zv);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yv.apply(this,arguments)}var Dh;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Dh||(Dh={}));const N5="popstate";function Cj(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Fy(i)}return kj(e,t,null,n)}function Yi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hE(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ej(){return Math.random().toString(36).substr(2,8)}function T5(n,e){return{usr:n.state,key:n.key,idx:e}}function zw(n,e,t,r){return t===void 0&&(t=null),yv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Gm(e):e,{state:t,key:e&&e.key||r||Ej()})}function Fy(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function kj(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Dh.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(yv({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=Dh.Pop;let k=h(),E=k==null?null:k-u;u=k,c&&c({action:a,location:x.location,delta:E})}function m(k,E){a=Dh.Push;let T=zw(x.location,k,E);u=h()+1;let L=T5(T,u),j=x.createHref(T);try{o.pushState(L,"",j)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(j)}s&&c&&c({action:a,location:x.location,delta:1})}function b(k,E){a=Dh.Replace;let T=zw(x.location,k,E);u=h();let L=T5(T,u),j=x.createHref(T);o.replaceState(L,"",j),s&&c&&c({action:a,location:x.location,delta:0})}function _(k){let E=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof k=="string"?k:Fy(k);return T=T.replace(/ $/,"%20"),Yi(E,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,E)}let x={get action(){return a},get location(){return n(i,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(N5,p),c=k,()=>{i.removeEventListener(N5,p),c=null}},createHref(k){return e(i,k)},createURL:_,encodeLocation(k){let E=_(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:b,go(k){return o.go(k)}};return x}var L5;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(L5||(L5={}));function Pj(n,e,t){return t===void 0&&(t="/"),Nj(n,e,t)}function Nj(n,e,t,r){let i=typeof e=="string"?Gm(e):e,s=nx(i.pathname||"/",t);if(s==null)return null;let o=fE(n);Tj(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=$j(s);a=Bj(o[c],u)}return a}function fE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Yi(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Bh([r,c.relativePath]),h=t.concat(c);s.children&&s.children.length>0&&(Yi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fE(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Dj(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of pE(s.path))i(s,o,c)}),e}function pE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=pE(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function Tj(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Fj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Lj=/^:[\w-]+$/,Rj=3,Ij=2,jj=1,Mj=10,Oj=-2,R5=n=>n==="*";function Dj(n,e){let t=n.split("/"),r=t.length;return t.some(R5)&&(r+=Oj),e&&(r+=Ij),t.filter(i=>!R5(i)).reduce((i,s)=>i+(Lj.test(s)?Rj:s===""?jj:Mj),r)}function Fj(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Bj(n,e,t){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=zj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Bh([s,p.pathname]),pathnameBase:Hj(Bh([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Bh([s,p.pathnameBase]))}return o}function zj(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Uj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:m,isOptional:b}=h;if(m==="*"){let x=a[p]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const _=a[p];return b&&!_?u[m]=void 0:u[m]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Uj(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),hE(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $j(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hE(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function nx(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function qj(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Gm(n):n;return{pathname:t?t.startsWith("/")?t:Vj(t,e):e,search:Gj(r),hash:Yj(i)}}function Vj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qb(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rx(n,e){let t=Wj(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function ix(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Gm(n):(i=yv({},n),Yi(!i.pathname||!i.pathname.includes("?"),qb("?","pathname","search",i)),Yi(!i.pathname||!i.pathname.includes("#"),qb("#","pathname","hash",i)),Yi(!i.search||!i.search.includes("#"),qb("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let c=qj(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Bh=n=>n.join("/").replace(/\/\/+/g,"/"),Hj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Gj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Yj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Kj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const mE=["post","put","patch","delete"];new Set(mE);const Xj=["get",...mE];new Set(Xj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bv(){return bv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bv.apply(this,arguments)}const sx=N.createContext(null),Zj=N.createContext(null),Jh=N.createContext(null),h1=N.createContext(null),nd=N.createContext({outlet:null,matches:[],isDataRoute:!1}),gE=N.createContext(null);function Jj(n,e){let{relative:t}=e===void 0?{}:e;Ym()||Yi(!1);let{basename:r,navigator:i}=N.useContext(Jh),{hash:s,pathname:o,search:a}=yE(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:Bh([r,o])),i.createHref({pathname:c,search:a,hash:s})}function Ym(){return N.useContext(h1)!=null}function ru(){return Ym()||Yi(!1),N.useContext(h1).location}function vE(n){N.useContext(Jh).static||N.useLayoutEffect(n)}function sp(){let{isDataRoute:n}=N.useContext(nd);return n?fM():Qj()}function Qj(){Ym()||Yi(!1);let n=N.useContext(sx),{basename:e,future:t,navigator:r}=N.useContext(Jh),{matches:i}=N.useContext(nd),{pathname:s}=ru(),o=JSON.stringify(rx(i,t.v7_relativeSplatPath)),a=N.useRef(!1);return vE(()=>{a.current=!0}),N.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=ix(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Bh([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,s,n])}const eM=N.createContext(null);function tM(n){let e=N.useContext(nd).outlet;return e&&N.createElement(eM.Provider,{value:n},e)}function ene(){let{matches:n}=N.useContext(nd),e=n[n.length-1];return e?e.params:{}}function yE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=N.useContext(Jh),{matches:i}=N.useContext(nd),{pathname:s}=ru(),o=JSON.stringify(rx(i,r.v7_relativeSplatPath));return N.useMemo(()=>ix(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function nM(n,e){return rM(n,e)}function rM(n,e,t,r){Ym()||Yi(!1);let{navigator:i}=N.useContext(Jh),{matches:s}=N.useContext(nd),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ru(),h;if(e){var p;let k=typeof e=="string"?Gm(e):e;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||Yi(!1),h=k}else h=u;let m=h.pathname||"/",b=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=Pj(n,{pathname:b}),x=lM(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:Bh([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Bh([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,t,r);return e&&x?N.createElement(h1.Provider,{value:{location:bv({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Dh.Pop}},x):x}function iM(){let n=hM(),e=Kj(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:i},t):null,null)}const sM=N.createElement(iM,null);class oM extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(nd.Provider,{value:this.props.routeContext},N.createElement(gE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aM(n){let{routeContext:e,match:t,children:r}=n,i=N.useContext(sx);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(nd.Provider,{value:e},r)}function lM(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(i=t)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);h>=0||Yi(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:b}=t,_=p.route.loader&&m[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let b,_=!1,x=null,k=null;t&&(b=a&&p.route.id?a[p.route.id]:void 0,x=p.route.errorElement||sM,c&&(u<0&&m===0?(pM("route-fallback"),_=!0,k=null):u===m&&(_=!0,k=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),T=()=>{let L;return b?L=x:_?L=k:p.route.Component?L=N.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=h,N.createElement(aM,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:L})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(oM,{location:t.location,revalidation:t.revalidation,component:x,error:b,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):T()},null)}var bE=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(bE||{}),wE=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(wE||{});function cM(n){let e=N.useContext(sx);return e||Yi(!1),e}function uM(n){let e=N.useContext(Zj);return e||Yi(!1),e}function dM(n){let e=N.useContext(nd);return e||Yi(!1),e}function xE(n){let e=dM(),t=e.matches[e.matches.length-1];return t.route.id||Yi(!1),t.route.id}function hM(){var n;let e=N.useContext(gE),t=uM(),r=xE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function fM(){let{router:n}=cM(bE.UseNavigateStable),e=xE(wE.UseNavigateStable),t=N.useRef(!1);return vE(()=>{t.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,bv({fromRouteId:e},s)))},[n,e])}const I5={};function pM(n,e,t){I5[n]||(I5[n]=!0)}function mM(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function wv(n){let{to:e,replace:t,state:r,relative:i}=n;Ym()||Yi(!1);let{future:s,static:o}=N.useContext(Jh),{matches:a}=N.useContext(nd),{pathname:c}=ru(),u=sp(),h=ix(e,rx(a,s.v7_relativeSplatPath),c,i==="path"),p=JSON.stringify(h);return N.useEffect(()=>u(JSON.parse(p),{replace:t,state:r,relative:i}),[u,p,i,t,r]),null}function ox(n){return tM(n.context)}function jt(n){Yi(!1)}function gM(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Dh.Pop,navigator:s,static:o=!1,future:a}=n;Ym()&&Yi(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:s,static:o,future:bv({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Gm(r));let{pathname:h="/",search:p="",hash:m="",state:b=null,key:_="default"}=r,x=N.useMemo(()=>{let k=nx(h,c);return k==null?null:{location:{pathname:k,search:p,hash:m,state:b,key:_},navigationType:i}},[c,h,p,m,b,_,i]);return x==null?null:N.createElement(Jh.Provider,{value:u},N.createElement(h1.Provider,{children:t,value:x}))}function _E(n){let{children:e,location:t}=n;return nM(Uw(e),t)}new Promise(()=>{});function Uw(n,e){e===void 0&&(e=[]);let t=[];return N.Children.forEach(n,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){t.push.apply(t,Uw(r.props.children,s));return}r.type!==jt&&Yi(!1),!r.props.index||!r.props.children||Yi(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uw(r.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $w(){return $w=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$w.apply(this,arguments)}function vM(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function yM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bM(n,e){return n.button===0&&(!e||e==="_self")&&!yM(n)}const wM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xM="6";try{window.__reactRouterVersion=xM}catch{}const _M="startTransition",j5=tx[_M];function SM(n){let{basename:e,children:t,future:r,window:i}=n,s=N.useRef();s.current==null&&(s.current=Cj({window:i,v5Compat:!0}));let o=s.current,[a,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=N.useCallback(p=>{u&&j5?j5(()=>c(p)):c(p)},[c,u]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>mM(r),[r]),N.createElement(gM,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}const AM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EM=N.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:p}=e,m=vM(e,wM),{basename:b}=N.useContext(Jh),_,x=!1;if(typeof u=="string"&&CM.test(u)&&(_=u,AM))try{let L=new URL(window.location.href),j=u.startsWith("//")?new URL(L.protocol+u):new URL(u),B=nx(j.pathname,b);j.origin===L.origin&&B!=null?u=B+j.search+j.hash:x=!0}catch{}let k=Jj(u,{relative:i}),E=kM(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:i,viewTransition:p});function T(L){r&&r(L),L.defaultPrevented||E(L)}return N.createElement("a",$w({},m,{href:_||k,onClick:x||s?r:T,ref:t,target:c}))});var M5;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(M5||(M5={}));var O5;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(O5||(O5={}));function kM(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,c=sp(),u=ru(),h=yE(n,{relative:o});return N.useCallback(p=>{if(bM(p,t)){p.preventDefault();let m=r!==void 0?r:Fy(u)===Fy(h);c(n,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,c,h,r,i,t,n,s,o,a])}const SE=N.createContext(),AE=()=>{const n=N.useContext(SE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},PM=({children:n})=>{const[e,t]=N.useState(()=>{try{const i=localStorage.getItem("go-fotografo-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(i){return console.error("Could not access localStorage to get theme.",i),"light"}});N.useEffect(()=>{try{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("go-fotografo-theme",e)}catch(i){console.error("Could not access localStorage to set theme.",i)}},[e]);const r=()=>{t(i=>i==="light"?"dark":"light")};return y.jsx(SE.Provider,{value:{theme:e,setTheme:t,toggleTheme:r},children:n})},NM=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Lt(async()=>{const{default:r}=await Promise.resolve().then(()=>Uv);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class ax extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class TM extends ax{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class LM extends ax{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class RM extends ax{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qw;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(qw||(qw={}));var IM=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};class jM{constructor(e,{headers:t={},customFetch:r,region:i=qw.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=NM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return IM(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(_=>{throw new TM(_)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new LM(h);if(!h.ok)throw new RM(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield h.json():m==="application/octet-stream"?b=yield h.blob():m==="text/event-stream"?b=h:m==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null}}catch(i){return{data:null,error:i}}})}}var to={},tm={},nm={},rm={},im={},sm={},MM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bm=MM();const OM=Bm.fetch,DM=Bm.fetch.bind(Bm),FM=Bm.Headers,BM=Bm.Request,zM=Bm.Response,Uv=Object.freeze(Object.defineProperty({__proto__:null,Headers:FM,Request:BM,Response:zM,default:DM,fetch:OM},Symbol.toStringTag,{value:"Module"})),UM=hj(Uv);var O0={},D5;function CE(){if(D5)return O0;D5=1,Object.defineProperty(O0,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return O0.default=n,O0}var F5;function EE(){if(F5)return sm;F5=1;var n=sm&&sm.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(sm,"__esModule",{value:!0});const e=n(UM),t=n(CE());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var h,p,m;let b=null,_=null,x=null,k=u.status,E=u.statusText;if(u.ok){if(this.method!=="HEAD"){const B=await u.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=B:_=JSON.parse(B))}const L=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");L&&j&&j.length>1&&(x=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,x=null,k=406,E="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const L=await u.text();try{b=JSON.parse(L),Array.isArray(b)&&u.status===404&&(_=[],b=null,k=200,E="OK")}catch{u.status===404&&L===""?(k=204,E="No Content"):b={message:L}}if(b&&this.isMaybeSingle&&(!((m=b?.details)===null||m===void 0)&&m.includes("0 rows"))&&(b=null,k=200,E="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:_,count:x,status:k,statusText:E}});return this.shouldThrowOnError||(c=c.catch(u=>{var h,p,m;return{error:{message:`${(h=u?.name)!==null&&h!==void 0?h:"FetchError"}: ${u?.message}`,details:`${(p=u?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(m=u?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,o)}returns(){return this}overrideTypes(){return this}}return sm.default=r,sm}var B5;function kE(){if(B5)return im;B5=1;var n=im&&im.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(im,"__esModule",{value:!0});const e=n(EE());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:u="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return im.default=t,im}var z5;function lx(){if(z5)return rm;z5=1;var n=rm&&rm.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rm,"__esModule",{value:!0});const e=n(kE());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return rm.default=t,rm}var U5;function PE(){if(U5)return nm;U5=1;var n=nm&&nm.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nm,"__esModule",{value:!0});const e=n(lx());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const u=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){const u="POST",h=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),c||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(i)){const p=i.reduce((m,b)=>m.concat(Object.keys(b)),[]);if(p.length>0){const m=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return nm.default=t,nm}var Og={},Dg={},$5;function $M(){return $5||($5=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.version=void 0,Dg.version="0.0.0-automated"),Dg}var q5;function qM(){if(q5)return Og;q5=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.DEFAULT_HEADERS=void 0;const n=$M();return Og.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Og}var V5;function VM(){if(V5)return tm;V5=1;var n=tm&&tm.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(tm,"__esModule",{value:!0});const e=n(PE()),t=n(lx()),r=qM();class i{constructor(o,{headers:a={},schema:c,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=c,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:u=!1,count:h}={}){let p;const m=new URL(`${this.url}/rpc/${o}`);let b;c||u?(p=c?"HEAD":"GET",Object.entries(a).filter(([x,k])=>k!==void 0).map(([x,k])=>[x,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([x,k])=>{m.searchParams.append(x,k)})):(p="POST",b=a);const _=Object.assign({},this.headers);return h&&(_.Prefer=`count=${h}`),new t.default({method:p,url:m,headers:_,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return tm.default=i,tm}var W5;function WM(){if(W5)return to;W5=1;var n=to&&to.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(to,"__esModule",{value:!0}),to.PostgrestError=to.PostgrestBuilder=to.PostgrestTransformBuilder=to.PostgrestFilterBuilder=to.PostgrestQueryBuilder=to.PostgrestClient=void 0;const e=n(VM());to.PostgrestClient=e.default;const t=n(PE());to.PostgrestQueryBuilder=t.default;const r=n(lx());to.PostgrestFilterBuilder=r.default;const i=n(kE());to.PostgrestTransformBuilder=i.default;const s=n(EE());to.PostgrestBuilder=s.default;const o=n(CE());return to.PostgrestError=o.default,to.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},to}var HM=WM();const GM=Bv(HM),{PostgrestClient:YM,PostgrestQueryBuilder:tne,PostgrestFilterBuilder:nne,PostgrestTransformBuilder:rne,PostgrestBuilder:ine,PostgrestError:sne}=GM;let Vw;typeof window>"u"?Vw=require("ws"):Vw=window.WebSocket;const KM="2.11.10",XM={"X-Client-Info":`realtime-js/${KM}`},ZM="1.0.0",NE=1e4,JM=1e3;var Em;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Em||(Em={}));var Aa;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Aa||(Aa={}));var eu;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(eu||(eu={}));var Ww;(function(n){n.websocket="websocket"})(Ww||(Ww={}));var Bf;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Bf||(Bf={}));class QM{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const c=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class TE{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Zr||(Zr={}));const H5=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=eO(o,n,e,i),s),{})},eO=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?LE(s,o):Hw(o)},LE=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return iO(e,t)}switch(n){case Zr.bool:return tO(e);case Zr.float4:case Zr.float8:case Zr.int2:case Zr.int4:case Zr.int8:case Zr.numeric:case Zr.oid:return nO(e);case Zr.json:case Zr.jsonb:return rO(e);case Zr.timestamp:return sO(e);case Zr.abstime:case Zr.date:case Zr.daterange:case Zr.int4range:case Zr.int8range:case Zr.money:case Zr.reltime:case Zr.text:case Zr.time:case Zr.timestamptz:case Zr.timetz:case Zr.tsrange:case Zr.tstzrange:return Hw(e);default:return Hw(e)}},Hw=n=>n,tO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},nO=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},rO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},iO=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>LE(e,a))}return n},sO=n=>typeof n=="string"?n.replace(" ","T"):n,RE=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Vb{constructor(e,t,r={},i=NE){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var G5;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(G5||(G5={}));class sv{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sv.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=sv.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=sv.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const p=s[u];if(p){const m=h.map(k=>k.presence_ref),b=p.map(k=>k.presence_ref),_=h.filter(k=>b.indexOf(k.presence_ref)<0),x=p.filter(k=>m.indexOf(k.presence_ref)<0);_.length>0&&(a[u]=_),x.length>0&&(c[u]=x)}else a[u]=h}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var u;const h=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),h.length>0){const p=e[a].map(b=>b.presence_ref),m=h.filter(b=>p.indexOf(b.presence_ref)<0);e[a].unshift(...m)}r(a,h,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const h=c.map(p=>p.presence_ref);u=u.filter(p=>h.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y5;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Y5||(Y5={}));var K5;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(K5||(K5={}));var Wd;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Wd||(Wd={}));class cx{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Aa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vb(this,eu.join,this.params,this.timeout),this.rejoinTimer=new TE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Aa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Aa.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Aa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Aa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(eu.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new sv(this),this.broadcastEndpointURL=RE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(h=>e?.(Wd.CHANNEL_ERROR,h)),this._onClose(()=>e?.(Wd.CLOSED));const c={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e?.(Wd.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(p=m?.length)!==null&&p!==void 0?p:0,_=[];for(let x=0;x<b;x++){const k=m[x],{filter:{event:E,schema:T,table:L,filter:j}}=k,B=h&&h[x];if(B&&B.event===E&&B.schema===T&&B.table===L&&B.filter===j)_.push(Object.assign(Object.assign({},k),{id:B.id}));else{this.unsubscribe(),this.state=Aa.errored,e?.(Wd.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(Wd.SUBSCRIBED);return}}).receive("error",h=>{this.state=Aa.errored,e?.(Wd.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(Wd.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Aa.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(eu.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new Vb(this,eu.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Vb(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:h}=eu;if(r&&[a,c,u,h].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var _,x,k;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((k=(x=b.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(b=>b.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(b=>{var _,x,k,E,T,L;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const j=b.id,B=(_=b.filter)===null||_===void 0?void 0:_.event;return j&&((x=t.ids)===null||x===void 0?void 0:x.includes(j))&&(B==="*"||B?.toLocaleLowerCase()===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const j=(T=(E=b?.filter)===null||E===void 0?void 0:E.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return j==="*"||j===((L=t?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof m=="object"&&"ids"in m){const _=m.data,{schema:x,table:k,commit_timestamp:E,type:T,errors:L}=_;m=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:E,eventType:T,new:{},old:{},errors:L}),this._getPayloadRecords(_))}b.callback(m,r)})}_isClosed(){return this.state===Aa.closed}_isJoined(){return this.state===Aa.joined}_isJoining(){return this.state===Aa.joining}_isLeaving(){return this.state===Aa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cx.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(eu.close,{},e)}_onError(e){this._on(eu.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Aa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=H5(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=H5(e.columns,e.old_record)),t}}const X5=()=>{},oO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aO{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=XM,this.params={},this.timeout=NE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=X5,this.ref=0,this.logger=X5,this.conn=null,this.sendBuffer=[],this.serializer=new QM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Lt(async()=>{const{default:c}=await Promise.resolve().then(()=>Uv);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Ww.websocket}`,this.httpEndpoint=RE(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new TE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Vw),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new lO(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ZM}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Em.connecting:return Bf.Connecting;case Em.open:return Bf.Open;case Em.closing:return Bf.Closing;default:return Bf.Closed}}isConnected(){return this.connectionState()===Bf.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cx(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(eu.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(JM,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(eu.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([oO],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class lO{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Em.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ux extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function no(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class cO extends ux{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Gw extends ux{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var uO=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const IE=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Lt(async()=>{const{default:r}=await Promise.resolve().then(()=>Uv);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},dO=()=>uO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Lt(()=>Promise.resolve().then(()=>Uv),void 0)).Response:Response}),Yw=n=>{if(Array.isArray(n))return n.map(t=>Yw(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Yw(r)}),e},hO=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var op=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const Wb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),fO=(n,e,t)=>op(void 0,void 0,void 0,function*(){const r=yield dO();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const s=n.status||500,o=i?.statusCode||s+"";e(new cO(Wb(i),s,o))}).catch(i=>{e(new Gw(Wb(i),i))}):e(new Gw(Wb(n),n))}),pO=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(hO(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function $v(n,e,t,r,i,s){return op(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,pO(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>fO(c,a,r))})})}function By(n,e,t,r){return op(this,void 0,void 0,function*(){return $v(n,"GET",e,t,r)})}function Hd(n,e,t,r,i){return op(this,void 0,void 0,function*(){return $v(n,"POST",e,r,i,t)})}function Kw(n,e,t,r,i){return op(this,void 0,void 0,function*(){return $v(n,"PUT",e,r,i,t)})}function mO(n,e,t,r){return op(this,void 0,void 0,function*(){return $v(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function jE(n,e,t,r,i){return op(this,void 0,void 0,function*(){return $v(n,"DELETE",e,r,i,t)})}var Za=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const gO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vO{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=IE(i)}uploadOrUpdate(e,t,r,i){return Za(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Z5),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),p=yield(e=="PUT"?Kw:Hd)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(no(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Za(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Za(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:Z5.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const p=yield Kw(this.fetch,a.toString(),c,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(c){if(no(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Za(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield Hd(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new ux("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(no(r))return{data:null,error:r};throw r}})}update(e,t,r){return Za(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Za(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(no(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Za(this,void 0,void 0,function*(){try{return{data:{path:(yield Hd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(no(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Za(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Hd(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(no(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Za(this,void 0,void 0,function*(){try{const i=yield Hd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(no(i))return{data:null,error:i};throw i}})}download(e,t){return Za(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield By(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(no(a))return{data:null,error:a};throw a}})}info(e){return Za(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield By(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Yw(r),error:null}}catch(r){if(no(r))return{data:null,error:r};throw r}})}exists(e){return Za(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield mO(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(no(r)&&r instanceof Gw){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Za(this,void 0,void 0,function*(){try{return{data:yield jE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(no(t))return{data:null,error:t};throw t}})}list(e,t,r){return Za(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},gO),t),{prefix:e||""});return{data:yield Hd(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(no(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const yO="2.7.3",bO={"X-Client-Info":`storage-js/${yO}`};var om=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};class wO{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},bO),t),this.fetch=IE(r)}listBuckets(){return om(this,void 0,void 0,function*(){try{return{data:yield By(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(no(e))return{data:null,error:e};throw e}})}getBucket(e){return om(this,void 0,void 0,function*(){try{return{data:yield By(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(no(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return om(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(no(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return om(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(no(r))return{data:null,error:r};throw r}})}emptyBucket(e){return om(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(no(t))return{data:null,error:t};throw t}})}deleteBucket(e){return om(this,void 0,void 0,function*(){try{return{data:yield jE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(no(t))return{data:null,error:t};throw t}})}}class xO extends wO{constructor(e,t={},r){super(e,t,r)}from(e){return new vO(this.url,this.headers,e,this.fetch)}}const _O="2.30.0",SO={"X-Client-Info":`supabase-js/${_O}`};var D0={exports:{}},J5;function AO(){return J5||(J5=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Oh<"u"&&Oh,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Oh<"u"&&Oh||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(ee){return ee&&DataView.prototype.isPrototypeOf(ee)}if(c.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(ee){return ee&&h.indexOf(Object.prototype.toString.call(ee))>-1};function m(ee){if(typeof ee!="string"&&(ee=String(ee)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(ee)||ee==="")throw new TypeError('Invalid character in header field name: "'+ee+'"');return ee.toLowerCase()}function b(ee){return typeof ee!="string"&&(ee=String(ee)),ee}function _(ee){var G={next:function(){var he=ee.shift();return{done:he===void 0,value:he}}};return c.iterable&&(G[Symbol.iterator]=function(){return G}),G}function x(ee){this.map={},ee instanceof x?ee.forEach(function(G,he){this.append(he,G)},this):Array.isArray(ee)?ee.forEach(function(G){if(G.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+G.length);this.append(G[0],G[1])},this):ee&&Object.getOwnPropertyNames(ee).forEach(function(G){this.append(G,ee[G])},this)}x.prototype.append=function(ee,G){ee=m(ee),G=b(G);var he=this.map[ee];this.map[ee]=he?he+", "+G:G},x.prototype.delete=function(ee){delete this.map[m(ee)]},x.prototype.get=function(ee){return ee=m(ee),this.has(ee)?this.map[ee]:null},x.prototype.has=function(ee){return this.map.hasOwnProperty(m(ee))},x.prototype.set=function(ee,G){this.map[m(ee)]=b(G)},x.prototype.forEach=function(ee,G){for(var he in this.map)this.map.hasOwnProperty(he)&&ee.call(G,this.map[he],he,this)},x.prototype.keys=function(){var ee=[];return this.forEach(function(G,he){ee.push(he)}),_(ee)},x.prototype.values=function(){var ee=[];return this.forEach(function(G){ee.push(G)}),_(ee)},x.prototype.entries=function(){var ee=[];return this.forEach(function(G,he){ee.push([he,G])}),_(ee)},c.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function k(ee){if(!ee._noBody){if(ee.bodyUsed)return Promise.reject(new TypeError("Already read"));ee.bodyUsed=!0}}function E(ee){return new Promise(function(G,he){ee.onload=function(){G(ee.result)},ee.onerror=function(){he(ee.error)}})}function T(ee){var G=new FileReader,he=E(G);return G.readAsArrayBuffer(ee),he}function L(ee){var G=new FileReader,he=E(G),X=/charset=([A-Za-z0-9_-]+)/.exec(ee.type),fe=X?X[1]:"utf-8";return G.readAsText(ee,fe),he}function j(ee){for(var G=new Uint8Array(ee),he=new Array(G.length),X=0;X<G.length;X++)he[X]=String.fromCharCode(G[X]);return he.join("")}function B(ee){if(ee.slice)return ee.slice(0);var G=new Uint8Array(ee.byteLength);return G.set(new Uint8Array(ee)),G.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(ee){this.bodyUsed=this.bodyUsed,this._bodyInit=ee,ee?typeof ee=="string"?this._bodyText=ee:c.blob&&Blob.prototype.isPrototypeOf(ee)?this._bodyBlob=ee:c.formData&&FormData.prototype.isPrototypeOf(ee)?this._bodyFormData=ee:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(ee)?this._bodyText=ee.toString():c.arrayBuffer&&c.blob&&u(ee)?(this._bodyArrayBuffer=B(ee.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ee)||p(ee))?this._bodyArrayBuffer=B(ee):this._bodyText=ee=Object.prototype.toString.call(ee):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof ee=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(ee)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var ee=k(this);if(ee)return ee;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var ee=k(this);return ee||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var ee=k(this);if(ee)return ee;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(ve)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(ee){var G=ee.toUpperCase();return U.indexOf(G)>-1?G:ee}function ie(ee,G){if(!(this instanceof ie))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');G=G||{};var he=G.body;if(ee instanceof ie){if(ee.bodyUsed)throw new TypeError("Already read");this.url=ee.url,this.credentials=ee.credentials,G.headers||(this.headers=new x(ee.headers)),this.method=ee.method,this.mode=ee.mode,this.signal=ee.signal,!he&&ee._bodyInit!=null&&(he=ee._bodyInit,ee.bodyUsed=!0)}else this.url=String(ee);if(this.credentials=G.credentials||this.credentials||"same-origin",(G.headers||!this.headers)&&(this.headers=new x(G.headers)),this.method=q(G.method||this.method||"GET"),this.mode=G.mode||this.mode||null,this.signal=G.signal||this.signal||function(){if("AbortController"in a){var ue=new AbortController;return ue.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&he)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(he),(this.method==="GET"||this.method==="HEAD")&&(G.cache==="no-store"||G.cache==="no-cache")){var X=/([?&])_=[^&]*/;if(X.test(this.url))this.url=this.url.replace(X,"$1_="+new Date().getTime());else{var fe=/\?/;this.url+=(fe.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ie.prototype.clone=function(){return new ie(this,{body:this._bodyInit})};function ve(ee){var G=new FormData;return ee.trim().split("&").forEach(function(he){if(he){var X=he.split("="),fe=X.shift().replace(/\+/g," "),ue=X.join("=").replace(/\+/g," ");G.append(decodeURIComponent(fe),decodeURIComponent(ue))}}),G}function $(ee){var G=new x,he=ee.replace(/\r?\n[\t ]+/g," ");return he.split("\r").map(function(X){return X.indexOf(`
`)===0?X.substr(1,X.length):X}).forEach(function(X){var fe=X.split(":"),ue=fe.shift().trim();if(ue){var se=fe.join(":").trim();try{G.append(ue,se)}catch(F){console.warn("Response "+F.message)}}}),G}W.call(ie.prototype);function z(ee,G){if(!(this instanceof z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(G||(G={}),this.type="default",this.status=G.status===void 0?200:G.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=G.statusText===void 0?"":""+G.statusText,this.headers=new x(G.headers),this.url=G.url||"",this._initBody(ee)}W.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},z.error=function(){var ee=new z(null,{status:200,statusText:""});return ee.ok=!1,ee.status=0,ee.type="error",ee};var le=[301,302,303,307,308];z.redirect=function(ee,G){if(le.indexOf(G)===-1)throw new RangeError("Invalid status code");return new z(null,{status:G,headers:{location:ee}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(G,he){this.message=G,this.name=he;var X=Error(G);this.stack=X.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ne(ee,G){return new Promise(function(he,X){var fe=new ie(ee,G);if(fe.signal&&fe.signal.aborted)return X(new o.DOMException("Aborted","AbortError"));var ue=new XMLHttpRequest;function se(){ue.abort()}ue.onload=function(){var Q={statusText:ue.statusText,headers:$(ue.getAllResponseHeaders()||"")};fe.url.indexOf("file://")===0&&(ue.status<200||ue.status>599)?Q.status=200:Q.status=ue.status,Q.url="responseURL"in ue?ue.responseURL:Q.headers.get("X-Request-URL");var ce="response"in ue?ue.response:ue.responseText;setTimeout(function(){he(new z(ce,Q))},0)},ue.onerror=function(){setTimeout(function(){X(new TypeError("Network request failed"))},0)},ue.ontimeout=function(){setTimeout(function(){X(new TypeError("Network request timed out"))},0)},ue.onabort=function(){setTimeout(function(){X(new o.DOMException("Aborted","AbortError"))},0)};function F(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(ue.open(fe.method,F(fe.url),!0),fe.credentials==="include"?ue.withCredentials=!0:fe.credentials==="omit"&&(ue.withCredentials=!1),"responseType"in ue&&(c.blob?ue.responseType="blob":c.arrayBuffer&&(ue.responseType="arraybuffer")),G&&typeof G.headers=="object"&&!(G.headers instanceof x||a.Headers&&G.headers instanceof a.Headers)){var te=[];Object.getOwnPropertyNames(G.headers).forEach(function(Q){te.push(m(Q)),ue.setRequestHeader(Q,b(G.headers[Q]))}),fe.headers.forEach(function(Q,ce){te.indexOf(ce)===-1&&ue.setRequestHeader(ce,Q)})}else fe.headers.forEach(function(Q,ce){ue.setRequestHeader(ce,Q)});fe.signal&&(fe.signal.addEventListener("abort",se),ue.onreadystatechange=function(){ue.readyState===4&&fe.signal.removeEventListener("abort",se)}),ue.send(typeof fe._bodyInit>"u"?null:fe._bodyInit)})}return ne.polyfill=!0,a.fetch||(a.fetch=ne,a.Headers=x,a.Request=ie,a.Response=z),o.Headers=x,o.Request=ie,o.Response=z,o.fetch=ne,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(D0,D0.exports)),D0.exports}var dx=AO();const ME=Bv(dx),CO=uE({__proto__:null,default:ME},[dx]);var EO=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const kO=n=>{let e;return n?e=n:typeof fetch>"u"?e=ME:e=fetch,(...t)=>e(...t)},PO=()=>typeof Headers>"u"?dx.Headers:Headers,NO=(n,e,t)=>{const r=kO(t),i=PO();return(s,o)=>EO(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};function TO(n){return n.replace(/\/$/,"")}function LO(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:c,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},u),s)}}function RO(n){return Math.round(Date.now()/1e3)+n}function IO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const qd=()=>typeof document<"u",Lf={tested:!1,writable:!1},_y=()=>{if(!qd())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lf.tested)return Lf.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Lf.tested=!0,Lf.writable=!0}catch{Lf.tested=!0,Lf.writable=!1}return Lf.writable};function Ja(n,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const OE=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await Lt(async()=>{const{fetch:r}=await Promise.resolve().then(()=>CO);return{fetch:r}},void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},jO=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Fg=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},F0=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Hb=async(n,e)=>{await n.removeItem(e)};function MO(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,c,u,h=0;for(n=n.replace("-","+").replace("_","/");h<n.length;)o=e.indexOf(n.charAt(h++)),a=e.indexOf(n.charAt(h++)),c=e.indexOf(n.charAt(h++)),u=e.indexOf(n.charAt(h++)),r=o<<2|a>>4,i=(a&15)<<4|c>>2,s=(c&3)<<6|u,t=t+String.fromCharCode(r),c!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class f1{constructor(){this.promise=new f1.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}f1.promiseConstructor=Promise;function Q5(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(MO(r))}function OO(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function DO(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function FO(n){return("0"+n.toString(16)).substr(-2)}function B0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,FO).join("")}async function BO(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function zO(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function z0(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await BO(n);return zO(e)}const UO="__stack_guard__",$O="__",qO=/__stack_guard__([a-zA-Z0-9_-]+)__/;let eS=!1,hx;function Xw(n){var e,t;hx();let r;try{throw new Error}catch(s){r=s}const i=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let s=0;s<i.length;s+=1){const a=i[s].match(qO);if(a&&a[1]===n)return!0}return!1}async function Zw(n,e){await hx();const t=`${UO}${n}${$O}`;return await{[t]:async()=>await e()}[t]()}hx=async()=>{eS||(eS=!0,await Zw("ENV_CHECK",async()=>{const n=Xw("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class fx extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function dr(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class VO extends fx{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function WO(n){return dr(n)&&n.name==="AuthApiError"}class DE extends fx{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Km extends fx{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class am extends Km{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Gb extends Km{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class U0 extends Km{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Fd extends Km{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yb extends Km{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jw extends Km{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function tS(n){return dr(n)&&n.name==="AuthRetryableFetchError"}var HO=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Jg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),GO=[502,503,504];async function nS(n){if(!jO(n))throw new Jw(Jg(n),0);if(GO.includes(n.status))throw new Jw(Jg(n),n.status);let e;try{e=await n.json()}catch(t){throw new DE(Jg(t),t)}throw new VO(Jg(e),n.status||500)}const YO=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function mr(n,e,t,r){var i;const s=Object.assign({},r?.headers);r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await KO(n,e,t+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function KO(n,e,t,r,i,s){const o=YO(e,r,i,s);let a;try{a=await n(t,o)}catch(c){throw console.error(c),new Jw(Jg(c),0)}if(a.ok||await nS(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await nS(c)}}function kh(n){var e;let t=null;QO(n)&&(t=Object.assign({},n),t.expires_at=RO(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function zf(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function XO(n){return{data:n,error:null}}function ZO(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=HO(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function JO(n){return n}function QO(n){return n.access_token&&n.refresh_token&&n.expires_in}var eD=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class tD{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=OE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await mr(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await mr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:zf})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=eD(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await mr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ZO,redirectTo:t?.redirectTo})}catch(t){if(dr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await mr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zf})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},h=await mr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:JO});if(h.error)throw h.error;const p=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(c=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(_=>{const x=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);u[`${k}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(dr(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await mr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zf})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await mr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:zf})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await mr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:zf})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await mr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(dr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await mr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}}}const nD="2.43.1",rD="http://localhost:9999",iD="supabase.auth.token",sD={"X-Client-Info":`gotrue-js/${nD}`},rS=10,iS={getItem:n=>_y()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{_y()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{_y()&&globalThis.localStorage.removeItem(n)}};function oD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}oD();const aD={url:rD,storageKey:iD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sD,flowType:"implicit",debug:!1},$0=30*1e3,sS=3;class xv{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=xv.nextInstanceID,xv.nextInstanceID+=1,this.instanceID>0&&qd()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},aD),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||iS,this.admin=new tD({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=OE(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===iS&&!_y()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),qd()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=Zw("_initialize",async()=>{try{const e=qd()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return dr(e)?{error:e}:{error:new DE("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:h,password:p,options:m}=e;let b=null,_=null;if(this.flowType==="pkce"){const x=B0();await Fg(this.storage,`${this.storageKey}-code-verifier`,x),b=await z0(x),_=x===b?"plain":"s256"}s=await mr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:p,data:(t=m?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:b,code_challenge_method:_},xform:kh})}else if("phone"in e){const{phone:h,password:p,options:m}=e;s=await mr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},channel:(i=m?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:kh})}else throw new U0("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await mr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:kh})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await mr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:kh})}else throw new U0("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gb}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(dr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await F0(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await mr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:kh});return await Hb(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Gb}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await mr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:kh}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Gb}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(dr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:c}=e;let u=null,h=null;if(this.flowType==="pkce"){const m=B0();await Fg(this.storage,`${this.storageKey}-code-verifier`,m),u=await z0(m),h=m===u?"plain":"s256"}const{error:p}=await mr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:h}=await mr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new U0("You must provide either an email or phone number.")}catch(a){if(dr(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:i,error:s}=await mr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:kh});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,a=i.user;return o?.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(dr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await mr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:XO})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new am;const{error:i}=await mr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(dr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await mr(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await mr(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new U0("You must provide either an email or phone number and a type")}catch(t){if(dr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await Zw("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!Xw("_useSession"))throw new Error("Please use #_useSession()");Xw("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const s=await F0(this.storage,this.storageKey);this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,i;if(!e){const{data:s,error:o}=t;if(o)throw o;e=(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0}return await mr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zf})})}catch(t){if(dr(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new am;const o=i.session,{data:a,error:c}=await mr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:o.access_token,xform:zf});if(c)throw c;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(dr(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Q5(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new am;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=Q5(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:c}=await this.getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(dr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new am;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(dr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!qd())throw new Fd("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Fd("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Yb("Not a valid PKCE flow url.");if(e){const k=Ja("code");if(!k)throw new Yb("No code detected.");const{data:E,error:T}=await this.exchangeCodeForSession(k);if(T)throw T;if(!E.session)throw new Yb("No session detected.");let L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:E.session,redirectType:null},error:null}}const t=Ja("error_description");if(t){const k=Ja("error_code");if(!k)throw new Fd("No error_code detected.");const E=Ja("error");throw E?new Fd(t,{error:E,code:k}):new Fd("No error detected.")}const r=Ja("provider_token"),i=Ja("provider_refresh_token"),s=Ja("access_token");if(!s)throw new Fd("No access_token detected.");const o=Ja("expires_in");if(!o)throw new Fd("No expires_in detected.");const a=Ja("refresh_token");if(!a)throw new Fd("No refresh_token detected.");const c=Ja("token_type");if(!c)throw new Fd("No token_type detected.");const h=Math.round(Date.now()/1e3)+parseInt(o),{data:p,error:m}=await this.getUser(s);if(m)throw m;const b=p.user,_={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:h,refresh_token:a,token_type:c,user:b},x=Ja("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:_,redirectType:x},error:null}}catch(t){if(dr(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return qd()&&(!!Ja("access_token")||!!Ja("error_description"))}async _isPKCEFlow(){const e=await F0(this.storage,`${this.storageKey}-code-verifier`);return!!Ja("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(WO(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Hb(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=IO(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=B0();await Fg(this.storage,`${this.storageKey}-code-verifier`,s),r=await z0(s),i=s===r?"plain":"s256"}try{return await mr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(dr(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await DO(async i=>(await OO(i*200),this._debug(t,"refreshing attempt",i),await mr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kh})),(i,s,o)=>o&&o.error&&tS(o.error)&&Date.now()+(i+1)*200-r<$0)}catch(r){if(this._debug(t,"error",r),dr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),qd()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await F0(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+rS;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${rS}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),tS(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new am;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new f1;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new am;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),dr(s)){const o={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Fg(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Hb(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qd()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$0);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/$0);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${$0}ms, refresh threshold is ${sS} ticks`),i<=sS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qd()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=B0();await Fg(this.storage,`${this.storageKey}-code-verifier`,i);const s=await z0(i),o=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t?.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await mr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(dr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:c}=await mr(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(!((i=a?.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(dr(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await mr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(dr(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await mr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(dr(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:h},error:null}})}}xv.nextInstanceID=0;class lD extends xv{constructor(e){super(e)}}var cD=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function c(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})};const uD={headers:SO},dD={schema:"public"},hD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fD={};class pD{constructor(e,t,r){var i,s,o,a,c,u,h,p;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const m=TO(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const b=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_={db:dD,realtime:fD,auth:Object.assign(Object.assign({},hD),{storageKey:b}),global:uD},x=LO(r??{},_);this.storageKey=(s=(i=x.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=x.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=x.auth)!==null&&c!==void 0?c:{},this.headers,(u=x.global)===null||u===void 0?void 0:u.fetch),this.fetch=NO(t,this._getAccessToken.bind(this),(h=x.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new YM(`${m}/rest/v1`,{headers:this.headers,schema:(p=x.db)===null||p===void 0?void 0:p.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new jM(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xO(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return cD(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lD({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:u})}_initRealtimeClient(e){return new aO(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mD=(n,e,t)=>new pD(n,e,t);function ft(n,e,t){function r(a,c){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(n),e(a,c);for(const h in o.prototype)h in a||Object.defineProperty(a,h,{value:o.prototype[h].bind(a)});a._zod.constr=o,a._zod.def=c}const i=t?.Parent??Object;class s extends i{}Object.defineProperty(s,"name",{value:n});function o(a){var c;const u=t?.Parent?new s:this;r(u,a),(c=u._zod).deferred??(c.deferred=[]);for(const h of u._zod.deferred)h();return u}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>t?.Parent&&a instanceof t.Parent?!0:a?._zod?.traits?.has(n)}),Object.defineProperty(o,"name",{value:n}),o}class _v extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const FE={};function Kf(n){return FE}function gD(n){const e=Object.values(n).filter(r=>typeof r=="number");return Object.entries(n).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function Qw(n,e){return typeof e=="bigint"?e.toString():e}function BE(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function px(n){return n==null}function mx(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}const oS=Symbol("evaluating");function Jr(n,e,t){let r;Object.defineProperty(n,e,{get(){if(r!==oS)return r===void 0&&(r=oS,r=t()),r},set(i){Object.defineProperty(n,e,{value:i})},configurable:!0})}function vD(n){return Object.create(Object.getPrototypeOf(n),Object.getOwnPropertyDescriptors(n))}function ap(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function Xm(...n){const e={};for(const t of n){const r=Object.getOwnPropertyDescriptors(t);Object.assign(e,r)}return Object.defineProperties({},e)}function aS(n){return JSON.stringify(n)}const zE="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function e2(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const yD=BE(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function zy(n){if(e2(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(e2(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function UE(n){return zy(n)?{...n}:n}const bD=new Set(["string","number","symbol"]);function p1(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lp(n,e,t){const r=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(r._zod.parent=n),r}function bn(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function wD(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}function xD(n,e){const t=n._zod.def,r=Xm(n._zod.def,{get shape(){const i={};for(const s in e){if(!(s in t.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&(i[s]=t.shape[s])}return ap(this,"shape",i),i},checks:[]});return lp(n,r)}function _D(n,e){const t=n._zod.def,r=Xm(n._zod.def,{get shape(){const i={...n._zod.def.shape};for(const s in e){if(!(s in t.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&delete i[s]}return ap(this,"shape",i),i},checks:[]});return lp(n,r)}function SD(n,e){if(!zy(e))throw new Error("Invalid input to extend: expected a plain object");const t=Xm(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return ap(this,"shape",r),r},checks:[]});return lp(n,t)}function AD(n,e){const t=Xm(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e._zod.def.shape};return ap(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return lp(n,t)}function CD(n,e,t){const r=Xm(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(t)for(const o in t){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=n?new n({type:"optional",innerType:i[o]}):i[o])}else for(const o in i)s[o]=n?new n({type:"optional",innerType:i[o]}):i[o];return ap(this,"shape",s),s},checks:[]});return lp(e,r)}function ED(n,e,t){const r=Xm(e._zod.def,{get shape(){const i=e._zod.def.shape,s={...i};if(t)for(const o in t){if(!(o in s))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(s[o]=new n({type:"nonoptional",innerType:i[o]}))}else for(const o in i)s[o]=new n({type:"nonoptional",innerType:i[o]});return ap(this,"shape",s),s},checks:[]});return lp(e,r)}function ov(n,e=0){for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function $E(n,e){return e.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(n),t})}function q0(n){return typeof n=="string"?n:n?.message}function Xf(n,e,t){const r={...n,path:n.path??[]};if(!n.message){const i=q0(n.inst?._zod.def?.error?.(n))??q0(e?.error?.(n))??q0(t.customError?.(n))??q0(t.localeError?.(n))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function gx(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Sv(...n){const[e,t,r]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:r}:{...e}}const qE=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Qw,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},VE=ft("$ZodError",qE),WE=ft("$ZodError",qE,{Parent:Error});function kD(n,e=t=>t.message){const t={},r=[];for(const i of n.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}function PD(n,e){const t=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>i({issues:a}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return i(n),r}const ND=n=>(e,t,r,i)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:t,issues:[]},s);if(o instanceof Promise)throw new _v;if(o.issues.length){const a=new(i?.Err??n)(o.issues.map(c=>Xf(c,s,Kf())));throw zE(a,i?.callee),a}return o.value},TD=n=>async(e,t,r,i)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:t,issues:[]},s);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(i?.Err??n)(o.issues.map(c=>Xf(c,s,Kf())));throw zE(a,i?.callee),a}return o.value},HE=n=>(e,t,r)=>{const i=r?{...r,async:!1}:{async:!1},s=e._zod.run({value:t,issues:[]},i);if(s instanceof Promise)throw new _v;return s.issues.length?{success:!1,error:new(n??VE)(s.issues.map(o=>Xf(o,i,Kf())))}:{success:!0,data:s.value}},LD=HE(WE),GE=n=>async(e,t,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let s=e._zod.run({value:t,issues:[]},i);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new n(s.issues.map(o=>Xf(o,i,Kf())))}:{success:!0,data:s.value}},RD=GE(WE),ID=/^[cC][^\s-]{8,}$/,jD=/^[0-9a-z]+$/,MD=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,OD=/^[0-9a-vA-V]{20}$/,DD=/^[A-Za-z0-9]{27}$/,FD=/^[a-zA-Z0-9_-]{21}$/,BD=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,zD=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,lS=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,UD=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,$D="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function qD(){return new RegExp($D,"u")}const VD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,WD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,HD=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,GD=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,YD=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,YE=/^[A-Za-z0-9_-]*$/,KD=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,XD=/^\+(?:[0-9]){6,14}[0-9]$/,KE="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ZD=new RegExp(`^${KE}$`);function XE(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function JD(n){return new RegExp(`^${XE(n)}$`)}function QD(n){const e=XE({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${t.join("|")})`;return new RegExp(`^${KE}T(?:${r})$`)}const e6=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},t6=/^[^A-Z]*$/,n6=/^[^a-z]*$/,rd=ft("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),r6=ft("$ZodCheckMaxLength",(n,e)=>{var t;rd.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!px(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),n._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const o=gx(i);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),i6=ft("$ZodCheckMinLength",(n,e)=>{var t;rd.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!px(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),n._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const o=gx(i);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:n,continue:!e.abort})}}),s6=ft("$ZodCheckLengthEquals",(n,e)=>{var t;rd.init(n,e),(t=n._zod.def).when??(t.when=r=>{const i=r.value;return!px(i)&&i.length!==void 0}),n._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),n._zod.check=r=>{const i=r.value,s=i.length;if(s===e.length)return;const o=gx(i),a=s>e.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:n,continue:!e.abort})}}),m1=ft("$ZodCheckStringFormat",(n,e)=>{var t,r;rd.init(n,e),n._zod.onattach.push(i=>{const s=i._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(r=n._zod).check??(r.check=()=>{})}),o6=ft("$ZodCheckRegex",(n,e)=>{m1.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),a6=ft("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=t6),m1.init(n,e)}),l6=ft("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=n6),m1.init(n,e)}),c6=ft("$ZodCheckIncludes",(n,e)=>{rd.init(n,e);const t=p1(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=r,n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),n._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:n,continue:!e.abort})}}),u6=ft("$ZodCheckStartsWith",(n,e)=>{rd.init(n,e);const t=new RegExp(`^${p1(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:n,continue:!e.abort})}}),d6=ft("$ZodCheckEndsWith",(n,e)=>{rd.init(n,e);const t=new RegExp(`.*${p1(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),n._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:n,continue:!e.abort})}}),h6=ft("$ZodCheckOverwrite",(n,e)=>{rd.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class f6{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),i=Math.min(...r.map(o=>o.length-o.trimStart().length)),s=r.map(o=>o.slice(i)).map(o=>" ".repeat(this.indent*2)+o);for(const o of s)this.content.push(o)}compile(){const e=Function,t=this?.args,i=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...t,i.join(`
`))}}const p6={major:4,minor:0,patch:17},Bs=ft("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=p6;const r=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&r.unshift(n);for(const i of r)for(const s of i._zod.onattach)s(n);if(r.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const i=(s,o,a)=>{let c=ov(s),u;for(const h of o){if(h._zod.def.when){if(!h._zod.def.when(s))continue}else if(c)continue;const p=s.issues.length,m=h._zod.check(s);if(m instanceof Promise&&a?.async===!1)throw new _v;if(u||m instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await m,s.issues.length!==p&&(c||(c=ov(s,p)))});else{if(s.issues.length===p)continue;c||(c=ov(s,p))}}return u?u.then(()=>s):s};n._zod.run=(s,o)=>{const a=n._zod.parse(s,o);if(a instanceof Promise){if(o.async===!1)throw new _v;return a.then(c=>i(c,r,o))}return i(a,r,o)}}n["~standard"]={validate:i=>{try{const s=LD(n,i);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return RD(n,i).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}}),vx=ft("$ZodString",(n,e)=>{Bs.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??e6(n._zod.bag),n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),fi=ft("$ZodStringFormat",(n,e)=>{m1.init(n,e),vx.init(n,e)}),m6=ft("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=zD),fi.init(n,e)}),g6=ft("$ZodUUID",(n,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=lS(r))}else e.pattern??(e.pattern=lS());fi.init(n,e)}),v6=ft("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=UD),fi.init(n,e)}),y6=ft("$ZodURL",(n,e)=>{fi.init(n,e),n._zod.check=t=>{try{const r=t.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:KD.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=i.href:t.value=r;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),b6=ft("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=qD()),fi.init(n,e)}),w6=ft("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=FD),fi.init(n,e)}),x6=ft("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=ID),fi.init(n,e)}),_6=ft("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=jD),fi.init(n,e)}),S6=ft("$ZodULID",(n,e)=>{e.pattern??(e.pattern=MD),fi.init(n,e)}),A6=ft("$ZodXID",(n,e)=>{e.pattern??(e.pattern=OD),fi.init(n,e)}),C6=ft("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=DD),fi.init(n,e)}),E6=ft("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=QD(e)),fi.init(n,e)}),k6=ft("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=ZD),fi.init(n,e)}),P6=ft("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=JD(e)),fi.init(n,e)}),N6=ft("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=BD),fi.init(n,e)}),T6=ft("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=VD),fi.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv4"})}),L6=ft("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=WD),fi.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),R6=ft("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=HD),fi.init(n,e)}),I6=ft("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=GD),fi.init(n,e),n._zod.check=t=>{const[r,i]=t.value.split("/");try{if(!i)throw new Error;const s=Number(i);if(`${s}`!==i)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function ZE(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const j6=ft("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=YD),fi.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{ZE(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function M6(n){if(!YE.test(n))return!1;const e=n.replace(/[-_]/g,r=>r==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return ZE(t)}const O6=ft("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=YE),fi.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{M6(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),D6=ft("$ZodE164",(n,e)=>{e.pattern??(e.pattern=XD),fi.init(n,e)});function F6(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[r]=t;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const B6=ft("$ZodJWT",(n,e)=>{fi.init(n,e),n._zod.check=t=>{F6(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),z6=ft("$ZodUnknown",(n,e)=>{Bs.init(n,e),n._zod.parse=t=>t}),U6=ft("$ZodNever",(n,e)=>{Bs.init(n,e),n._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function cS(n,e,t){n.issues.length&&e.issues.push(...$E(t,n.issues)),e.value[t]=n.value}const $6=ft("$ZodArray",(n,e)=>{Bs.init(n,e),n._zod.parse=(t,r)=>{const i=t.value;if(!Array.isArray(i))return t.issues.push({expected:"array",code:"invalid_type",input:i,inst:n}),t;t.value=Array(i.length);const s=[];for(let o=0;o<i.length;o++){const a=i[o],c=e.element._zod.run({value:a,issues:[]},r);c instanceof Promise?s.push(c.then(u=>cS(u,t,o))):cS(c,t,o)}return s.length?Promise.all(s).then(()=>t):t}});function V0(n,e,t,r){n.issues.length&&e.issues.push(...$E(t,n.issues)),n.value===void 0?t in r&&(e.value[t]=void 0):e.value[t]=n.value}const q6=ft("$ZodObject",(n,e)=>{Bs.init(n,e);const t=BE(()=>{const p=Object.keys(e.shape);for(const b of p)if(!e.shape[b]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${b}": expected a Zod schema`);const m=wD(e.shape);return{shape:e.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(m)}});Jr(n._zod,"propValues",()=>{const p=e.shape,m={};for(const b in p){const _=p[b]._zod;if(_.values){m[b]??(m[b]=new Set);for(const x of _.values)m[b].add(x)}}return m});const r=p=>{const m=new f6(["shape","payload","ctx"]),b=t.value,_=T=>{const L=aS(T);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};m.write("const input = payload.value;");const x=Object.create(null);let k=0;for(const T of b.keys)x[T]=`key_${k++}`;m.write("const newResult = {}");for(const T of b.keys){const L=x[T],j=aS(T);m.write(`const ${L} = ${_(T)};`),m.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${j}, ...iss.path] : [${j}]
          })));
        }
        
        if (${L}.value === undefined) {
          if (${j} in input) {
            newResult[${j}] = undefined;
          }
        } else {
          newResult[${j}] = ${L}.value;
        }
      `)}m.write("payload.value = newResult;"),m.write("return payload;");const E=m.compile();return(T,L)=>E(p,T,L)};let i;const s=e2,o=!FE.jitless,c=o&&yD.value,u=e.catchall;let h;n._zod.parse=(p,m)=>{h??(h=t.value);const b=p.value;if(!s(b))return p.issues.push({expected:"object",code:"invalid_type",input:b,inst:n}),p;const _=[];if(o&&c&&m?.async===!1&&m.jitless!==!0)i||(i=r(e.shape)),p=i(p,m);else{p.value={};const L=h.shape;for(const j of h.keys){const W=L[j]._zod.run({value:b[j],issues:[]},m);W instanceof Promise?_.push(W.then(U=>V0(U,p,j,b))):V0(W,p,j,b)}}if(!u)return _.length?Promise.all(_).then(()=>p):p;const x=[],k=h.keySet,E=u._zod,T=E.def.type;for(const L of Object.keys(b)){if(k.has(L))continue;if(T==="never"){x.push(L);continue}const j=E.run({value:b[L],issues:[]},m);j instanceof Promise?_.push(j.then(B=>V0(B,p,L,b))):V0(j,p,L,b)}return x.length&&p.issues.push({code:"unrecognized_keys",keys:x,input:b,inst:n}),_.length?Promise.all(_).then(()=>p):p}});function uS(n,e,t,r){for(const s of n)if(s.issues.length===0)return e.value=s.value,e;const i=n.filter(s=>!ov(s));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(s=>s.issues.map(o=>Xf(o,r,Kf())))}),e)}const V6=ft("$ZodUnion",(n,e)=>{Bs.init(n,e),Jr(n._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),Jr(n._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),Jr(n._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),Jr(n._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(s=>s._zod.pattern);return new RegExp(`^(${i.map(s=>mx(s.source)).join("|")})$`)}});const t=e.options.length===1,r=e.options[0]._zod.run;n._zod.parse=(i,s)=>{if(t)return r(i,s);let o=!1;const a=[];for(const c of e.options){const u=c._zod.run({value:i.value,issues:[]},s);if(u instanceof Promise)a.push(u),o=!0;else{if(u.issues.length===0)return u;a.push(u)}}return o?Promise.all(a).then(c=>uS(c,i,n,s)):uS(a,i,n,s)}}),W6=ft("$ZodIntersection",(n,e)=>{Bs.init(n,e),n._zod.parse=(t,r)=>{const i=t.value,s=e.left._zod.run({value:i,issues:[]},r),o=e.right._zod.run({value:i,issues:[]},r);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([c,u])=>dS(t,c,u)):dS(t,s,o)}});function t2(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(zy(n)&&zy(e)){const t=Object.keys(e),r=Object.keys(n).filter(s=>t.indexOf(s)!==-1),i={...n,...e};for(const s of r){const o=t2(n[s],e[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};i[s]=o.data}return{valid:!0,data:i}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<n.length;r++){const i=n[r],s=e[r],o=t2(i,s);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};t.push(o.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function dS(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),ov(n))return n;const r=t2(e.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return n.value=r.data,n}const H6=ft("$ZodEnum",(n,e)=>{Bs.init(n,e);const t=gD(e.entries),r=new Set(t);n._zod.values=r,n._zod.pattern=new RegExp(`^(${t.filter(i=>bD.has(typeof i)).map(i=>typeof i=="string"?p1(i):i.toString()).join("|")})$`),n._zod.parse=(i,s)=>{const o=i.value;return r.has(o)||i.issues.push({code:"invalid_value",values:t,input:o,inst:n}),i}}),G6=ft("$ZodTransform",(n,e)=>{Bs.init(n,e),n._zod.parse=(t,r)=>{const i=e.transform(t.value,t);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(o=>(t.value=o,t));if(i instanceof Promise)throw new _v;return t.value=i,t}});function hS(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const Y6=ft("$ZodOptional",(n,e)=>{Bs.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Jr(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Jr(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${mx(t.source)})?$`):void 0}),n._zod.parse=(t,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>hS(s,t.value)):hS(i,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,r)}}),K6=ft("$ZodNullable",(n,e)=>{Bs.init(n,e),Jr(n._zod,"optin",()=>e.innerType._zod.optin),Jr(n._zod,"optout",()=>e.innerType._zod.optout),Jr(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${mx(t.source)}|null)$`):void 0}),Jr(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,r)=>t.value===null?t:e.innerType._zod.run(t,r)}),X6=ft("$ZodDefault",(n,e)=>{Bs.init(n,e),n._zod.optin="optional",Jr(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(t.value===void 0)return t.value=e.defaultValue,t;const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>fS(s,e)):fS(i,e)}});function fS(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const Z6=ft("$ZodPrefault",(n,e)=>{Bs.init(n,e),n._zod.optin="optional",Jr(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>(t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,r))}),J6=ft("$ZodNonOptional",(n,e)=>{Bs.init(n,e),Jr(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>pS(s,n)):pS(i,n)}});function pS(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const Q6=ft("$ZodCatch",(n,e)=>{Bs.init(n,e),Jr(n._zod,"optin",()=>e.innerType._zod.optin),Jr(n._zod,"optout",()=>e.innerType._zod.optout),Jr(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(s=>(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(o=>Xf(o,r,Kf()))},input:t.value}),t.issues=[]),t)):(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(s=>Xf(s,r,Kf()))},input:t.value}),t.issues=[]),t)}}),eF=ft("$ZodPipe",(n,e)=>{Bs.init(n,e),Jr(n._zod,"values",()=>e.in._zod.values),Jr(n._zod,"optin",()=>e.in._zod.optin),Jr(n._zod,"optout",()=>e.out._zod.optout),Jr(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,r)=>{const i=e.in._zod.run(t,r);return i instanceof Promise?i.then(s=>mS(s,e,r)):mS(i,e,r)}});function mS(n,e,t){return n.issues.length?n:e.out._zod.run({value:n.value,issues:n.issues},t)}const tF=ft("$ZodReadonly",(n,e)=>{Bs.init(n,e),Jr(n._zod,"propValues",()=>e.innerType._zod.propValues),Jr(n._zod,"values",()=>e.innerType._zod.values),Jr(n._zod,"optin",()=>e.innerType._zod.optin),Jr(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,r)=>{const i=e.innerType._zod.run(t,r);return i instanceof Promise?i.then(gS):gS(i)}});function gS(n){return n.value=Object.freeze(n.value),n}const nF=ft("$ZodCustom",(n,e)=>{rd.init(n,e),Bs.init(n,e),n._zod.parse=(t,r)=>t,n._zod.check=t=>{const r=t.value,i=e.fn(r);if(i instanceof Promise)return i.then(s=>vS(s,t,r,n));vS(i,t,r,n)}});function vS(n,e,t,r){if(!n){const i={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Sv(i))}}class rF{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function iF(){return new rF}const W0=iF();function sF(n,e){return new n({type:"string",...bn(e)})}function oF(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...bn(e)})}function yS(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...bn(e)})}function aF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...bn(e)})}function lF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...bn(e)})}function cF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...bn(e)})}function uF(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...bn(e)})}function dF(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...bn(e)})}function hF(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...bn(e)})}function fF(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...bn(e)})}function pF(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...bn(e)})}function mF(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...bn(e)})}function gF(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...bn(e)})}function vF(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...bn(e)})}function yF(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...bn(e)})}function bF(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...bn(e)})}function wF(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...bn(e)})}function xF(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...bn(e)})}function _F(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...bn(e)})}function SF(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...bn(e)})}function AF(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...bn(e)})}function CF(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...bn(e)})}function EF(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...bn(e)})}function kF(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...bn(e)})}function PF(n,e){return new n({type:"string",format:"date",check:"string_format",...bn(e)})}function NF(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...bn(e)})}function TF(n,e){return new n({type:"string",format:"duration",check:"string_format",...bn(e)})}function LF(n){return new n({type:"unknown"})}function RF(n,e){return new n({type:"never",...bn(e)})}function JE(n,e){return new r6({check:"max_length",...bn(e),maximum:n})}function Uy(n,e){return new i6({check:"min_length",...bn(e),minimum:n})}function QE(n,e){return new s6({check:"length_equals",...bn(e),length:n})}function IF(n,e){return new o6({check:"string_format",format:"regex",...bn(e),pattern:n})}function jF(n){return new a6({check:"string_format",format:"lowercase",...bn(n)})}function MF(n){return new l6({check:"string_format",format:"uppercase",...bn(n)})}function OF(n,e){return new c6({check:"string_format",format:"includes",...bn(e),includes:n})}function DF(n,e){return new u6({check:"string_format",format:"starts_with",...bn(e),prefix:n})}function FF(n,e){return new d6({check:"string_format",format:"ends_with",...bn(e),suffix:n})}function qv(n){return new h6({check:"overwrite",tx:n})}function BF(n){return qv(e=>e.normalize(n))}function zF(){return qv(n=>n.trim())}function UF(){return qv(n=>n.toLowerCase())}function $F(){return qv(n=>n.toUpperCase())}function qF(n,e,t){return new n({type:"array",element:e,...bn(t)})}function VF(n,e,t){return new n({type:"custom",check:"custom",fn:e,...bn(t)})}function WF(n){const e=HF(t=>(t.addIssue=r=>{if(typeof r=="string")t.issues.push(Sv(r,t.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=t.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),t.issues.push(Sv(i))}},n(t.value,t)));return e}function HF(n,e){const t=new rd({check:"custom",...bn(e)});return t._zod.check=n,t}const GF=ft("ZodISODateTime",(n,e)=>{E6.init(n,e),_i.init(n,e)});function YF(n){return kF(GF,n)}const KF=ft("ZodISODate",(n,e)=>{k6.init(n,e),_i.init(n,e)});function XF(n){return PF(KF,n)}const ZF=ft("ZodISOTime",(n,e)=>{P6.init(n,e),_i.init(n,e)});function JF(n){return NF(ZF,n)}const QF=ft("ZodISODuration",(n,e)=>{N6.init(n,e),_i.init(n,e)});function e8(n){return TF(QF,n)}const t8=(n,e)=>{VE.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>PD(n,t)},flatten:{value:t=>kD(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Qw,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Qw,2)}},isEmpty:{get(){return n.issues.length===0}}})},g1=ft("ZodError",t8,{Parent:Error}),n8=ND(g1),r8=TD(g1),i8=HE(g1),s8=GE(g1),ao=ft("ZodType",(n,e)=>(Bs.init(n,e),n.def=e,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone({...e,checks:[...e.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),n.clone=(t,r)=>lp(n,t,r),n.brand=()=>n,n.register=(t,r)=>(t.add(n,r),n),n.parse=(t,r)=>n8(n,t,r,{callee:n.parse}),n.safeParse=(t,r)=>i8(n,t,r),n.parseAsync=async(t,r)=>r8(n,t,r,{callee:n.parseAsync}),n.safeParseAsync=async(t,r)=>s8(n,t,r),n.spa=n.safeParseAsync,n.refine=(t,r)=>n.check(K8(t,r)),n.superRefine=t=>n.check(X8(t)),n.overwrite=t=>n.check(qv(t)),n.optional=()=>_S(n),n.nullable=()=>SS(n),n.nullish=()=>_S(SS(n)),n.nonoptional=t=>$8(n,t),n.array=()=>P8(n),n.or=t=>R8([n,t]),n.and=t=>j8(n,t),n.transform=t=>AS(n,O8(t)),n.default=t=>B8(n,t),n.prefault=t=>U8(n,t),n.catch=t=>V8(n,t),n.pipe=t=>AS(n,t),n.readonly=()=>G8(n),n.describe=t=>{const r=n.clone();return W0.add(r,{description:t}),r},Object.defineProperty(n,"description",{get(){return W0.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return W0.get(n);const r=n.clone();return W0.add(r,t[0]),r},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),ek=ft("_ZodString",(n,e)=>{vx.init(n,e),ao.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...r)=>n.check(IF(...r)),n.includes=(...r)=>n.check(OF(...r)),n.startsWith=(...r)=>n.check(DF(...r)),n.endsWith=(...r)=>n.check(FF(...r)),n.min=(...r)=>n.check(Uy(...r)),n.max=(...r)=>n.check(JE(...r)),n.length=(...r)=>n.check(QE(...r)),n.nonempty=(...r)=>n.check(Uy(1,...r)),n.lowercase=r=>n.check(jF(r)),n.uppercase=r=>n.check(MF(r)),n.trim=()=>n.check(zF()),n.normalize=(...r)=>n.check(BF(...r)),n.toLowerCase=()=>n.check(UF()),n.toUpperCase=()=>n.check($F())}),o8=ft("ZodString",(n,e)=>{vx.init(n,e),ek.init(n,e),n.email=t=>n.check(oF(a8,t)),n.url=t=>n.check(dF(l8,t)),n.jwt=t=>n.check(EF(S8,t)),n.emoji=t=>n.check(hF(c8,t)),n.guid=t=>n.check(yS(wS,t)),n.uuid=t=>n.check(aF(H0,t)),n.uuidv4=t=>n.check(lF(H0,t)),n.uuidv6=t=>n.check(cF(H0,t)),n.uuidv7=t=>n.check(uF(H0,t)),n.nanoid=t=>n.check(fF(u8,t)),n.guid=t=>n.check(yS(wS,t)),n.cuid=t=>n.check(pF(d8,t)),n.cuid2=t=>n.check(mF(h8,t)),n.ulid=t=>n.check(gF(f8,t)),n.base64=t=>n.check(SF(w8,t)),n.base64url=t=>n.check(AF(x8,t)),n.xid=t=>n.check(vF(p8,t)),n.ksuid=t=>n.check(yF(m8,t)),n.ipv4=t=>n.check(bF(g8,t)),n.ipv6=t=>n.check(wF(v8,t)),n.cidrv4=t=>n.check(xF(y8,t)),n.cidrv6=t=>n.check(_F(b8,t)),n.e164=t=>n.check(CF(_8,t)),n.datetime=t=>n.check(YF(t)),n.date=t=>n.check(XF(t)),n.time=t=>n.check(JF(t)),n.duration=t=>n.check(e8(t))});function bS(n){return sF(o8,n)}const _i=ft("ZodStringFormat",(n,e)=>{fi.init(n,e),ek.init(n,e)}),a8=ft("ZodEmail",(n,e)=>{v6.init(n,e),_i.init(n,e)}),wS=ft("ZodGUID",(n,e)=>{m6.init(n,e),_i.init(n,e)}),H0=ft("ZodUUID",(n,e)=>{g6.init(n,e),_i.init(n,e)}),l8=ft("ZodURL",(n,e)=>{y6.init(n,e),_i.init(n,e)}),c8=ft("ZodEmoji",(n,e)=>{b6.init(n,e),_i.init(n,e)}),u8=ft("ZodNanoID",(n,e)=>{w6.init(n,e),_i.init(n,e)}),d8=ft("ZodCUID",(n,e)=>{x6.init(n,e),_i.init(n,e)}),h8=ft("ZodCUID2",(n,e)=>{_6.init(n,e),_i.init(n,e)}),f8=ft("ZodULID",(n,e)=>{S6.init(n,e),_i.init(n,e)}),p8=ft("ZodXID",(n,e)=>{A6.init(n,e),_i.init(n,e)}),m8=ft("ZodKSUID",(n,e)=>{C6.init(n,e),_i.init(n,e)}),g8=ft("ZodIPv4",(n,e)=>{T6.init(n,e),_i.init(n,e)}),v8=ft("ZodIPv6",(n,e)=>{L6.init(n,e),_i.init(n,e)}),y8=ft("ZodCIDRv4",(n,e)=>{R6.init(n,e),_i.init(n,e)}),b8=ft("ZodCIDRv6",(n,e)=>{I6.init(n,e),_i.init(n,e)}),w8=ft("ZodBase64",(n,e)=>{j6.init(n,e),_i.init(n,e)}),x8=ft("ZodBase64URL",(n,e)=>{O6.init(n,e),_i.init(n,e)}),_8=ft("ZodE164",(n,e)=>{D6.init(n,e),_i.init(n,e)}),S8=ft("ZodJWT",(n,e)=>{B6.init(n,e),_i.init(n,e)}),A8=ft("ZodUnknown",(n,e)=>{z6.init(n,e),ao.init(n,e)});function xS(){return LF(A8)}const C8=ft("ZodNever",(n,e)=>{U6.init(n,e),ao.init(n,e)});function E8(n){return RF(C8,n)}const k8=ft("ZodArray",(n,e)=>{$6.init(n,e),ao.init(n,e),n.element=e.element,n.min=(t,r)=>n.check(Uy(t,r)),n.nonempty=t=>n.check(Uy(1,t)),n.max=(t,r)=>n.check(JE(t,r)),n.length=(t,r)=>n.check(QE(t,r)),n.unwrap=()=>n.element});function P8(n,e){return qF(k8,n,e)}const N8=ft("ZodObject",(n,e)=>{q6.init(n,e),ao.init(n,e),Jr(n,"shape",()=>e.shape),n.keyof=()=>tk(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:xS()}),n.loose=()=>n.clone({...n._zod.def,catchall:xS()}),n.strict=()=>n.clone({...n._zod.def,catchall:E8()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>SD(n,t),n.merge=t=>AD(n,t),n.pick=t=>xD(n,t),n.omit=t=>_D(n,t),n.partial=(...t)=>CD(nk,n,t[0]),n.required=(...t)=>ED(rk,n,t[0])});function T8(n,e){const t={type:"object",get shape(){return ap(this,"shape",n?vD(n):{}),this.shape},...bn(e)};return new N8(t)}const L8=ft("ZodUnion",(n,e)=>{V6.init(n,e),ao.init(n,e),n.options=e.options});function R8(n,e){return new L8({type:"union",options:n,...bn(e)})}const I8=ft("ZodIntersection",(n,e)=>{W6.init(n,e),ao.init(n,e)});function j8(n,e){return new I8({type:"intersection",left:n,right:e})}const n2=ft("ZodEnum",(n,e)=>{H6.init(n,e),ao.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(r,i)=>{const s={};for(const o of r)if(t.has(o))s[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new n2({...e,checks:[],...bn(i),entries:s})},n.exclude=(r,i)=>{const s={...e.entries};for(const o of r)if(t.has(o))delete s[o];else throw new Error(`Key ${o} not found in enum`);return new n2({...e,checks:[],...bn(i),entries:s})}});function tk(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(r=>[r,r])):n;return new n2({type:"enum",entries:t,...bn(e)})}const M8=ft("ZodTransform",(n,e)=>{G6.init(n,e),ao.init(n,e),n._zod.parse=(t,r)=>{t.addIssue=s=>{if(typeof s=="string")t.issues.push(Sv(s,t.value,e));else{const o=s;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=t.value),o.inst??(o.inst=n),t.issues.push(Sv(o))}};const i=e.transform(t.value,t);return i instanceof Promise?i.then(s=>(t.value=s,t)):(t.value=i,t)}});function O8(n){return new M8({type:"transform",transform:n})}const nk=ft("ZodOptional",(n,e)=>{Y6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType});function _S(n){return new nk({type:"optional",innerType:n})}const D8=ft("ZodNullable",(n,e)=>{K6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType});function SS(n){return new D8({type:"nullable",innerType:n})}const F8=ft("ZodDefault",(n,e)=>{X6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function B8(n,e){return new F8({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():UE(e)}})}const z8=ft("ZodPrefault",(n,e)=>{Z6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType});function U8(n,e){return new z8({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():UE(e)}})}const rk=ft("ZodNonOptional",(n,e)=>{J6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType});function $8(n,e){return new rk({type:"nonoptional",innerType:n,...bn(e)})}const q8=ft("ZodCatch",(n,e)=>{Q6.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function V8(n,e){return new q8({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const W8=ft("ZodPipe",(n,e)=>{eF.init(n,e),ao.init(n,e),n.in=e.in,n.out=e.out});function AS(n,e){return new W8({type:"pipe",in:n,out:e})}const H8=ft("ZodReadonly",(n,e)=>{tF.init(n,e),ao.init(n,e),n.unwrap=()=>n._zod.def.innerType});function G8(n){return new H8({type:"readonly",innerType:n})}const Y8=ft("ZodCustom",(n,e)=>{nF.init(n,e),ao.init(n,e)});function K8(n,e={}){return VF(Y8,n,e)}function X8(n){return WF(n)}const Z8={},J8=T8({VITE_SUPABASE_URL:bS().url("URL do Supabase deve ser válida"),VITE_SUPABASE_ANON_KEY:bS().min(1,"Chave anônima do Supabase é obrigatória"),VITE_APP_ENV:tk(["development","staging","production"]).optional().default("development")}),G0={VITE_SUPABASE_URL:"https://rouvkvcngmsquebokdyg.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU"};let lm=null;const ik=()=>{if(lm)return lm;const n=typeof import.meta<"u"&&Z8,e=!n;let t={VITE_SUPABASE_URL:n?"https://rouvkvcngmsquebokdyg.supabase.co":void 0,VITE_SUPABASE_ANON_KEY:n?"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU":void 0,VITE_APP_ENV:"development"};e&&(!t.VITE_SUPABASE_URL||!t.VITE_SUPABASE_ANON_KEY)&&(n&&console.warn("⚠️ Usando configurações de fallback para desenvolvimento"),t.VITE_SUPABASE_URL=t.VITE_SUPABASE_URL||G0.VITE_SUPABASE_URL,t.VITE_SUPABASE_ANON_KEY=t.VITE_SUPABASE_ANON_KEY||G0.VITE_SUPABASE_ANON_KEY);try{return lm=J8.parse(t),lm}catch(r){if(n&&(console.error("❌ Erro na validação das variáveis de ambiente:"),console.error(r.errors||r.message)),e)return n&&console.warn("🔄 Aplicando configurações de fallback como último recurso..."),lm={VITE_SUPABASE_URL:G0.VITE_SUPABASE_URL,VITE_SUPABASE_ANON_KEY:G0.VITE_SUPABASE_ANON_KEY,VITE_APP_ENV:"development"},n&&console.log("✅ Configurações de fallback aplicadas com sucesso"),lm;throw new Error("Erro na configuração do ambiente. Verifique o console para detalhes.")}},r2=()=>{try{return ik().VITE_APP_ENV==="development"}catch{return!0}};let av=null;const sk=()=>{try{const n=ik();if(!n.VITE_SUPABASE_URL||!n.VITE_SUPABASE_ANON_KEY)throw new Error("Variáveis de ambiente do Supabase não encontradas.");return av=mD(n.VITE_SUPABASE_URL,n.VITE_SUPABASE_ANON_KEY,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),r2()&&console.log("✅ Supabase client inicializado com sucesso"),av}catch(n){throw console.error("❌ Erro ao inicializar Supabase client:",n.message),r2()&&console.error("Verifique se as variáveis VITE_SUPABASE_URL e VITE_SUPABASE_ANON_KEY estão definidas no arquivo .env"),av=null,n}};try{sk()}catch(n){if(r2())throw n;console.error("Supabase initialization failed:",n.message)}const Q8=()=>{if(!av)try{return sk()}catch{throw new Error("Não foi possível conectar ao banco de dados. Verifique sua configuração.")}return av},rt=Q8(),e7=1,CS=768;let Kb=0;function t7(){return Kb=(Kb+1)%Number.MAX_VALUE,Kb.toString()}const ps={state:{toasts:[],isMobileView:typeof window<"u"?window.innerWidth<CS:!1},listeners:[],getState:()=>ps.state,setState:n=>{typeof n=="function"?ps.state=n(ps.state):ps.state={...ps.state,...n},ps.listeners.forEach(e=>e(ps.state))},subscribe:n=>(ps.listeners.push(n),()=>{ps.listeners=ps.listeners.filter(e=>e!==n)}),updateMobileView:()=>{if(typeof window<"u"){const n=window.innerWidth<CS;n!==ps.state.isMobileView&&ps.setState(e=>({...e,isMobileView:n}))}}};typeof window<"u"&&(window.addEventListener("resize",ps.updateMobileView),ps.updateMobileView());const n7=({...n})=>{const{isMobileView:e}=ps.getState(),t=["Saldos Visíveis","Saldos Ocultos","Modo de Personalização Ativado","Card Adicionado","Card Removido","Projeto movido","Projeto Excluído","Projeto Arquivado","Projeto Restaurado","Coluna Adicionada","Coluna Removida"];if(n.title&&t.includes(n.title))return{id:null,dismiss:()=>{},update:()=>{}};const r=t7(),i=o=>ps.setState(a=>({...a,toasts:a.toasts.map(c=>c.id===r?{...c,...o}:c)})),s=()=>ps.setState(o=>({...o,toasts:o.toasts.filter(a=>a.id!==r)}));return ps.setState(o=>({...o,toasts:[{...n,id:r,dismiss:s},...o.toasts].slice(0,e7)})),{id:r,dismiss:s,update:i}};function Ta(){const[n,e]=N.useState(ps.getState());return N.useEffect(()=>ps.subscribe(r=>{e(r)}),[]),N.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:n7,toasts:n.toasts,isMobileView:n.isMobileView}}const lv=n=>{if(!n||!Array.isArray(n))return{transactions:[],totalRevenue:0,totalExpenses:0,operationalProfit:0,totalProLabore:0,netBalance:0,pendingPayments:0};const e=n.filter(a=>a.tipo==="ENTRADA"&&a.status==="PAGO").reduce((a,c)=>a+Number(c.valor),0),t=n.filter(a=>a.tipo==="SAIDA"&&a.status==="PAGO"&&a.category!=="Pró-labore").reduce((a,c)=>a+Number(c.valor),0),r=n.filter(a=>a.tipo==="SAIDA"&&a.status==="PAGO"&&a.category==="Pró-labore").reduce((a,c)=>a+Number(c.valor),0),i=e-t,s=i-r,o=n.filter(a=>a.tipo==="ENTRADA"&&a.status==="PENDENTE").reduce((a,c)=>a+Number(c.valor),0);return{transactions:n,totalRevenue:e,totalExpenses:t,operationalProfit:i,totalProLabore:r,netBalance:s,pendingPayments:o}},r7=async(n,e,t)=>{const r={...t,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete r.id,"client_id"in r&&(r.cliente_id=r.client_id,delete r.client_id),"fornecedor_id"in r&&delete r.fornecedor_id,"date"in r&&(r.data=r.date,delete r.date),"workflow_id"in r&&(r.trabalho_id=r.workflow_id,delete r.workflow_id);const{data:i,error:s}=await n.from("transacoes").insert([r]).select().single();if(s)throw s;return i},i7=async(n,e,t,r)=>{const i={...r,updated_at:new Date().toISOString()};"client_id"in i&&(i.cliente_id=i.client_id,delete i.client_id),"fornecedor_id"in i&&delete i.fornecedor_id,"date"in i&&(i.data=i.date,delete i.date),"workflow_id"in i&&(i.trabalho_id=i.workflow_id,delete i.workflow_id);const{data:s,error:o}=await n.from("transacoes").update(i).eq("id",t).eq("user_id",e).select().single();if(o)throw o;return s},s7=async(n,e,t)=>{const{error:r}=await n.from("transacoes").delete().eq("id",t).eq("user_id",e);if(r)throw r},o7=async(n,e)=>{const{data:t,error:r}=await n.from("transacoes").select("*").eq("trabalho_id",e);return r?[]:t},bm=(n,e,t)=>{console.error(`Erro em ${e}:`,n);const r=`Erro em ${e}: ${n.message}`;t&&t({title:"Erro de Sistema",description:r,variant:"destructive",duration:5e3})},Xo={profile_photo:null,logo:null,business_name:"",user_name:"",subdomain:"",notifications:{email:!0,push:!0},dashboard_layout:null,workflow_columns:[{id:"novo-lead",title:"Novos Leads",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"agendado",title:"Agendado",cardIds:[],color:"bg-teal-300 dark:bg-teal-700"},{id:"em-andamento",title:"Em Andamento",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"concluido",title:"Concluídos",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"}],address:"",photography_type:"",cnpj:"",cpf:"",phones:[],contact_email:"",website_social:{instagram:"",facebook:"",website:""},language:"pt-BR",currency:"BRL",timezone:"America/Sao_Paulo",date_format:"dd/MM/yyyy",automation:{},current_plan_id:"FREE",stripe_customer_id:null,stripe_subscription_id:null,plan_expires_at:null,plan_status:"FREE",trial_ends_at:null,hide_dashboard_balances:!1,took_initial_tour:!1,has_completed_tour:!1,show_greetings:!0,workflow_card_view_mode:"list",workflow_summary_expanded:!0,mobile_menu_items:["dashboard","workflow","clients","financial","calendar"],google_calendar_integrated:!1,google_tokens:null,feature_overrides:{},pix_key:null},Sy=[{id:"novo-lead",title:"Novos Leads",cardIds:[]},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[]},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[]},{id:"agendado",title:"Agendado",cardIds:[]},{id:"em-andamento",title:"Em Andamento",cardIds:[]},{id:"concluido",title:"Concluídos",cardIds:[]}],a7=async(n,e,t,r,i)=>{const{data:s,error:o}=await n.from("settings").select("*").eq("user_id",e).limit(1).maybeSingle();if(o&&o.code!=="PGRST116")throw o;const a={};if(s){for(const h in t)t.hasOwnProperty(h)&&(a[h]=t[h]);a.user_name=t.user_name||s.user_name||i,a.contact_email=t.contact_email||s.contact_email||n.auth.user&&n.auth.user().email||i}else{const h={...Xo,...r||{},...t};for(const p in Xo)h.hasOwnProperty(p)&&(a[p]=h[p]);if(a.user_id=e,a.user_name=h.user_name||i,a.contact_email=h.contact_email||n.auth.user&&n.auth.user().email||i,a.plan_status=h.plan_status||"TRIAL",a.plan_status==="TRIAL"&&!h.trial_ends_at){const p=new Date;p.setDate(p.getDate()+7),a.trial_ends_at=p.toISOString()}a.took_initial_tour=h.took_initial_tour||!1}s&&Object.keys(a).forEach(h=>{a[h]===void 0&&delete a[h]});let c,u;if(s&&s.id){if(Object.keys(a).length===0)return s;({data:c,error:u}=await n.from("settings").update({...a,updated_at:new Date().toISOString()}).eq("id",s.id).eq("user_id",e).select().single())}else({data:c,error:u}=await n.from("settings").insert([{...a,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single());if(u)throw u;return c},ok=N.createContext(),yx=()=>{const n=N.useContext(ok);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},Xb=n=>{if(!n)return!1;const e=n.message||"",t=e.includes("Invalid Refresh Token")||e.includes("Token not found")||e.includes("Session not found"),r=n.code==="400"&&n.error_code==="refresh_token_not_found";return t||r},ak=({children:n})=>{const{toast:e}=Ta(),[t,r]=N.useState(null),[i,s]=N.useState(null),[o,a]=N.useState(!0),[c,u]=N.useState(Xo),[h,p]=N.useState(!0),m=N.useCallback(async(E,T)=>{if(Xb(E)){e({title:"Sessão Expirada ou Inválida",description:"Sua sessão expirou. Por favor, faça login novamente para continuar.",variant:"destructive",duration:7e3}),rt&&await rt.auth.signOut().catch(L=>{}),r(null),s(null),u(Xo),a(!1),p(!1);return}bm(E,T,e)},[e]),b=N.useCallback(async E=>{if(!E||!rt){u(Xo),p(!1);return}p(!0);try{const{data:T,error:L}=await rt.from("settings").select("*").eq("user_id",E.id).single(),j=E.user_metadata?.full_name||E.email;if(L&&L.code!=="PGRST116"){if(await m(L,"buscar configurações"),Xb(L))return;u({...Xo,user_name:j,contact_email:E.email,user_id:E.id,profile_photo:E.user_metadata?.avatar_url||null,workflow_columns:Sy})}else if(T)u(B=>({...Xo,...B,...T,user_name:T.user_name||j,contact_email:T.contact_email||E.email,user_id:T.user_id||E.id,profile_photo:T.profile_photo||E.user_metadata?.avatar_url||null,workflow_columns:T.workflow_columns||Sy}));else{const B={...Xo,user_name:j,contact_email:E.email,user_id:E.id,profile_photo:E.user_metadata?.avatar_url||null,workflow_columns:Sy};u(B);const{data:W,error:U}=await rt.from("settings").insert([B]).select().single();if(U){if(await m(U,"criar configurações padrão"),Xb(U))return}else W&&u(q=>({...Xo,...q,...W}))}}catch(T){await m(T,"carregar configurações")}finally{p(!1)}},[m]);N.useEffect(()=>{if(a(!0),(async()=>{if(!rt){console.error("❌ Supabase client not initialized. Cannot get session."),a(!1),u(Xo),p(!1);return}const{data:{session:L},error:j}=await rt.auth.getSession();if(j){await m(j,"obter sessão de autenticação"),a(!1);return}const B=L?.user??null;s(L),r(B),B&&B.email_confirmed_at?await b(B):(u(Xo),p(!1),B&&!B.email_confirmed_at&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"})),a(!1)})(),!rt)return;const{data:T}=rt.auth.onAuthStateChange(async(L,j)=>{a(!0);const B=j?.user??null;s(j),r(B),L==="SIGNED_IN"&&B&&B.email_confirmed_at?await b(B):L==="SIGNED_OUT"?(u(Xo),p(!1)):L==="USER_UPDATED"&&B&&B.email_confirmed_at?u(W=>({...W,user_name:B.user_metadata?.full_name||W.user_name||B.email,profile_photo:B.user_metadata?.avatar_url||W.profile_photo})):!B&&L!=="SIGNED_OUT"&&(u(Xo),p(!1)),B&&!B.email_confirmed_at&&L!=="INITIAL_SESSION"&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"}),a(!1)});return()=>{T&&T.subscription&&T.subscription.unsubscribe()}},[m,b,e]);const k={user:t,session:i,settings:c,loadingAuth:o,loadingSettings:h,setSettings:async E=>{if(!t||!t.email_confirmed_at||!rt){await m({message:"Usuário não autenticado, email não confirmado ou Supabase não inicializado"},"salvar configurações");return}try{const T=t.user_metadata?.full_name||t.email,L=await a7(rt,t.id,E,c,T);if(L){u(B=>({...Xo,...B,...L}));let j={};if(E.user_name&&E.user_name!==(t.user_metadata?.full_name||"")&&(j.data={...j.data,full_name:E.user_name}),E.profile_photo&&E.profile_photo!==(t.user_metadata?.avatar_url||"")&&(j.data={...j.data,avatar_url:E.profile_photo}),Object.keys(j).length>0){const{data:B,error:W}=await rt.auth.updateUser(j);W?await m(W,"atualizar dados do usuário na autenticação"):B&&r(U=>({...U,user_metadata:B.user.user_metadata}))}}}catch(T){await m(T,"salvar configurações")}},logout:async()=>{try{if(!rt)return await m({message:"Supabase client not initialized"},"fazer logout"),!1;try{localStorage.clear(),sessionStorage.clear()}catch{}const{error:E}=await rt.auth.signOut();return E?(await m(E,"fazer logout"),!1):(r(null),s(null),u(Xo),e({title:"Logout realizado",description:"Você foi desconectado com sucesso.",duration:3e3}),!0)}catch(E){return await m(E,"fazer logout"),!1}},refreshSettings:()=>t?b(t):Promise.resolve()};return y.jsx(ok.Provider,{value:k,children:n})},l7=(n,e,t)=>{const[r,i]=N.useState({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],products:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!0,initialLoadCompleted:!1}),s=N.useCallback(u=>{i(h=>typeof u=="function"?u(h):{...h,...u})},[]),o=N.useCallback(()=>{i({clients:[],suppliers:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],products:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!1,initialLoadCompleted:!1})},[]),a=N.useCallback(async(u="all")=>{if(!n)return;const h={clients:()=>rt.from("clients").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),suppliers:()=>rt.from("suppliers").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),workflow_cards:()=>rt.from("workflow_cards").select("*").eq("user_id",n.id).order("order",{ascending:!0}),transacoes:()=>rt.from("transacoes").select("*").eq("user_id",n.id).order("data",{ascending:!1}),service_packages:()=>rt.from("service_packages").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),products:()=>rt.from("products").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),equipamentos:()=>rt.from("equipamentos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),manutencoes:()=>rt.from("manutencoes").select("*").eq("user_id",n.id).order("data_manutencao",{ascending:!1}),custos_fixos:()=>rt.from("custos_fixos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),servicos_precificados:()=>rt.from("servicos_precificados").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),metas_reserva:()=>rt.from("metas_reserva").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),availability_slots:()=>rt.from("availability_slots").select("*").eq("user_id",n.id),propostas:()=>rt.from("propostas").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1}),contratos:()=>rt.from("contratosgerados").select("*").eq("id_fotografo",n.id).order("data_geracao",{ascending:!1}),wallets:()=>rt.from("wallets").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),feature_flags:()=>rt.from("feature_flags").select("*"),referrals:()=>rt.from("referrals").select("*").eq("referrer_id",n.id),commissions:()=>rt.from("commissions").select("*").eq("referrer_id",n.id)},p=u==="all"?Object.keys(h):[u];try{const m=await Promise.all(p.map(async x=>{const k=h[x];if(typeof k=="function")try{return await k()}catch(E){return console.warn(`Erro ao carregar ${x}:`,E),E.code==="42P01"||E.message?.includes("does not exist")?{data:[],error:null}:{data:[],error:E}}else return console.warn(`fetchMap[${x}] não é uma função. Pulando.`),Promise.resolve({data:[],error:null})})),b=m.map((x,k)=>x.error?{key:p[k],error:x.error}:null).filter(Boolean);if(b.length>0){b.forEach(({key:x,error:k})=>bm(k,`carregar ${x}`,t));return}const _={};if(m.forEach((x,k)=>{switch(p[k]){case"clients":_.clients=x.data;break;case"suppliers":_.suppliers=x.data;break;case"workflow_cards":_.workflowCards=x.data;break;case"transacoes":_.financialData={...lv(x.data),transactions:x.data};break;case"service_packages":_.servicePackages=x.data;break;case"products":_.products=x.data;break;case"equipamentos":_.equipments=x.data;break;case"manutencoes":_.maintenances=x.data;break;case"custos_fixos":_.fixedCosts=x.data;break;case"servicos_precificados":_.pricedServices=x.data;break;case"metas_reserva":_.savingGoals=x.data;break;case"availability_slots":_.availabilitySlots=x.data;break;case"propostas":_.proposals=x.data;break;case"contratos":_.contratos=x.data;break;case"wallets":_.wallets=x.data;break;case"feature_flags":_.featureFlags=x.data.reduce((T,L)=>({...T,[L.nome_funcionalidade]:L.esta_ativa}),{});break;case"referrals":_.affiliateData={...r.affiliateData,referrals:x.data};break;case"commissions":_.affiliateData={...r.affiliateData,commissions:x.data};break}}),_.workflowCards){const x=(_.workflowCards||[]).filter(k=>k.status==="novo-lead"||k.status==="proposta-enviada").reduce((k,E)=>k+(Number(E.value)||0),0);_.financialData={..._.financialData||r.financialData,potentialLeadValue:x}}s(x=>({...x,..._}))}catch(m){bm(m,"refresh data",t)}},[n,t,r.financialData,r.affiliateData]),c=N.useCallback(async u=>{if(u){s({loadingData:!0});try{const h=async(G,he)=>{try{return await G}catch(X){return console.warn(`Erro ao carregar ${he}:`,X),X.code==="42P01"||X.message?.includes("does not exist")?{data:[],error:null}:{data:[],error:X}}},[p,m,b,_,x,k,E,T,L,j,B,W,U,q,ie,ve,$,z]=await Promise.all([h(rt.from("clients").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"clients"),h(rt.from("suppliers").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"suppliers"),h(rt.from("workflow_cards").select("*").eq("user_id",u.id).order("order",{ascending:!0}),"workflow_cards"),h(rt.from("transacoes").select("*").eq("user_id",u.id).order("data",{ascending:!1}),"transacoes"),h(rt.from("service_packages").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"service_packages"),h(rt.from("products").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"products"),h(rt.from("equipamentos").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"equipamentos"),h(rt.from("manutencoes").select("*").eq("user_id",u.id).order("data_manutencao",{ascending:!1}),"manutencoes"),h(rt.from("custos_fixos").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"custos_fixos"),h(rt.from("servicos_precificados").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"servicos_precificados"),h(rt.from("metas_reserva").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"metas_reserva"),h(rt.from("availability_slots").select("*").eq("user_id",u.id),"availability_slots"),h(rt.from("propostas").select("*").eq("user_id",u.id).order("updated_at",{ascending:!1}),"propostas"),h(rt.from("contratosgerados").select("*").eq("id_fotografo",u.id).order("data_geracao",{ascending:!1}),"contratos"),h(rt.from("wallets").select("*").eq("user_id",u.id).order("created_at",{ascending:!1}),"wallets"),h(rt.from("feature_flags").select("*"),"feature_flags"),h(rt.from("referrals").select("*").eq("referrer_id",u.id),"referrals"),h(rt.from("commissions").select("*").eq("referrer_id",u.id),"commissions")]),le=[p.error,m.error,b.error,_.error,x.error,E.error,T.error,L.error,j.error,B.error,W.error,U.error,q.error,ie.error,ve.error,$.error,z.error].filter(G=>G&&G.code!=="42P01"&&!G.message?.includes("does not exist"));if(le.length>0){le.forEach(G=>bm(G,"carregar dados iniciais",t)),s({loadingData:!1});return}const ne=lv(_.data),ee=(b.data||[]).filter(G=>G.status==="novo-lead"||G.status==="proposta-enviada").reduce((G,he)=>G+(Number(he.value)||0),0);s({clients:p.data,suppliers:m.data||[],workflowCards:b.data,financialData:{...ne,transactions:_.data,potentialLeadValue:ee},servicePackages:x.data,products:k.data||[],equipments:E.data,maintenances:T.data,fixedCosts:L.data,pricedServices:j.data,savingGoals:B.data,availabilitySlots:W.data,proposals:U.data,contratos:q.data,wallets:ie.data,featureFlags:ve.data.reduce((G,he)=>({...G,[he.nome_funcionalidade]:he.esta_ativa}),{}),affiliateData:{referrals:$.data,commissions:z.data},loadingData:!1,initialLoadCompleted:!0})}catch(h){bm(h,"carregar dados iniciais",t),s({loadingData:!1})}}},[t]);return{...r,setDataState:s,clearLocalData:o,loadInitialData:c,refreshData:a,setInitialLoadCompleted:u=>s({initialLoadCompleted:u})}},c7=async(n,e,t)=>{if(t.name){const{count:s,error:o}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(o)throw new Error(`Erro ao verificar cliente existente: ${o.message}`);if(s>0)throw new Error(`Um cliente com o nome "${t.name}" já existe.`)}const{data:r,error:i}=await n.from("clients").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(i)throw i;return r},u7=async(n,e,t,r)=>{if(r.name){const{count:o,error:a}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(a)throw new Error(`Erro ao verificar cliente existente: ${a.message}`);if(o>0)throw new Error(`Um cliente com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("clients").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},d7=async(n,e,t)=>{const{error:r}=await n.from("clients").delete().eq("id",t).eq("user_id",e);if(r)throw r},h7=(n,e,t,r,i,s)=>{const o=N.useCallback(async h=>{if(!n||!e())return i({message:"Usuário não autenticado ou trial expirado"},"adicionar cliente"),null;try{const p=await c7(rt,n.id,h),m=[p,...t];return r(m),s(m),p}catch(p){throw i(p,"adicionar cliente"),p}},[n,e,t,r,i,s]),a=N.useCallback(async(h,p)=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"atualizar cliente");return}try{const m=await u7(rt,n.id,h,p),b=t.map(_=>_.id===h?m:_);r(b),s(b)}catch(m){throw i(m,"atualizar cliente"),m}},[n,e,t,r,i,s]),c=N.useCallback(async h=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"remover cliente");return}try{await d7(rt,n.id,h);const p=t.filter(m=>m.id!==h);r(p),s(p)}catch(p){i(p,"remover cliente")}},[n,e,t,r,i,s]),u=N.useCallback(h=>t.find(p=>p.id===h),[t]);return{addClient:o,updateClient:a,deleteClient:c,getClientById:u}},f7=async(n,e,t)=>{if(t.name){const{count:s,error:o}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(o)throw new Error(`Erro ao verificar fornecedor existente: ${o.message}`);if(s>0)throw new Error(`Um fornecedor com o nome "${t.name}" já existe.`)}const{data:r,error:i}=await n.from("suppliers").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(i)throw i;return r},p7=async(n,e,t,r)=>{if(r.name){const{count:o,error:a}=await n.from("suppliers").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(a)throw new Error(`Erro ao verificar fornecedor existente: ${a.message}`);if(o>0)throw new Error(`Um fornecedor com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("suppliers").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},m7=async(n,e,t)=>{const{error:r}=await n.from("suppliers").delete().eq("id",t).eq("user_id",e);if(r)throw r},g7=(n,e,t,r,i)=>{const s=N.useCallback(async u=>{if(!n||!e())return i({message:"Usuário não autenticado ou trial expirado"},"adicionar fornecedor"),null;try{const h=await f7(rt,n.id,u),p=[h,...t];return r(p),h}catch(h){throw i(h,"adicionar fornecedor"),h}},[n,e,t,r,i]),o=N.useCallback(async(u,h)=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"atualizar fornecedor");return}try{const p=await p7(rt,n.id,u,h),m=t.map(b=>b.id===u?p:b);r(m)}catch(p){throw i(p,"atualizar fornecedor"),p}},[n,e,t,r,i]),a=N.useCallback(async u=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"remover fornecedor");return}try{await m7(rt,n.id,u);const h=t.filter(p=>p.id!==u);r(h)}catch(h){i(h,"remover fornecedor")}},[n,e,t,r,i]),c=N.useCallback(u=>t.find(h=>h.id===u),[t]);return{addSupplier:s,updateSupplier:o,deleteSupplier:a,getSupplierById:c}},v7=(n,e)=>({handleNewSubscription:N.useCallback(async(r,i)=>{if(!(!n?.id||!e?.referred_by))try{const{data:s,error:o}=await rt.from("settings").select("user_id").eq("referral_code",e.referred_by).single();if(o||!s){console.warn(`Referrer not found for code ${e.referred_by}. Cannot create referral record.`);return}const a=s.user_id,{data:c,error:u}=await rt.from("referrals").insert({referrer_id:a,referred_id:n.id,referred_email:n.email,referred_name:e.user_name,status:"subscribed",subscription_plan:r,subscription_date:new Date().toISOString()}).select().single();if(u)throw u;console.log(`Referral record created: ${c.id}`);const{data:h,error:p}=await rt.from("affiliate_settings").select("*").eq("id",1).single();if(p||!h||!h.is_active){console.log("Affiliate program is not active or settings not found. No commission will be generated.");return}const{data:m,error:b}=await rt.from("plans").select("price").eq("plan_id",r).single();if(b||!m){console.warn(`Plan details for ${r} not found. Cannot calculate commission.`);return}const _=m.price*h.commission_percentage/100,x=new Date;x.setDate(x.getDate()+h.payout_waiting_days);const{error:k}=await rt.from("commissions").insert({referral_id:c.id,referrer_id:a,amount:_,status:"pending",due_date:x.toISOString()});if(k)throw k;console.log(`Commission of ${_} created for referrer ${a}`)}catch(s){console.error("Error in handleNewSubscription for affiliate program:",s.message)}},[n,e])}),y7=async(n,e,t,r,i,s,o)=>{if(!i){const{data:m,error:b}=await n.from("workflow_cards").select("*").eq("id",t).single();if(b||!m)throw new Error(`Card com ID ${t} não encontrado para atualização, nem no estado local nem no banco de dados.`);i=m}let a=[...i.history||[]];const c={title:"Título",status:"Status",value:"Valor",date:"Data",time:"Hora",description:"Descrição",client_id:"Cliente",service_package_id:"Pacote de Serviço",payment_status:"Status do Pagamento",contract_status:"Status do Contrato"};for(const m in r)if(Object.prototype.hasOwnProperty.call(r,m)&&c[m]&&r[m]!==i[m]){let b=i[m]||"vazio",_=r[m]||"vazio";m==="status"&&(b=s(b),_=s(_)),m==="value"&&(b=`R$ ${Number(b).toFixed(2)}`,_=`R$ ${Number(_).toFixed(2)}`),b!==_&&a.push({action:`${c[m]} alterado de "${b}" para "${_}"`,date:new Date().toISOString(),user:o})}r.archived===!0&&i.archived===!1?a.push({action:"Card arquivado",date:new Date().toISOString(),user:o}):r.archived===!1&&i.archived===!0&&a.push({action:"Card desarquivado",date:new Date().toISOString(),user:o});const u={...r,client_id:r.client_id===""?null:r.client_id,service_package_id:r.service_package_id===""?null:r.service_package_id,history:a,subtasks:r.subtasks!==void 0?(r.subtasks||[]).map(m=>({id:m.id||Math.random().toString(36).substr(2,9),text:m.text,completed:m.completed})):(i.subtasks||[]).map(m=>({id:m.id||Math.random().toString(36).substr(2,9),text:m.text,completed:m.completed})),comments:r.comments!==void 0?r.comments:i.comments,contract_status:r.contract_status!==void 0?r.contract_status:i.contract_status,archived:r.archived!==void 0?r.archived:i.archived,time:r.time!==void 0?r.time:i.time,installments:r.installments!==void 0?r.installments:r.num_installments!==void 0?r.num_installments:i.installments,num_installments:r.num_installments!==void 0?r.num_installments:r.installments!==void 0?r.installments:i.num_installments,date:r.date!==void 0?r.date:i.date};delete u.createFinancialTransaction,Object.keys(u).forEach(m=>{u[m]===void 0&&delete u[m]});const{data:h,error:p}=await n.from("workflow_cards").update(u).eq("id",t).eq("user_id",e).select().single();if(p)throw p;return h},b7=async(n,e,t)=>{const{error:r}=await n.from("workflow_cards").delete().eq("id",t).eq("user_id",e);if(r)throw r},w7=async(n,e,t,r,i,s,o)=>{const a=Array.isArray(i)?i:[],c={id:Math.random().toString(36).substr(2,9),text:r,date:new Date().toISOString(),user:s,user_photo_url:o},u=[...a,c];let h=await n.from("workflow_cards").select("history").eq("id",t).eq("user_id",e).single();if(h.error)throw h.error;let p=h.data?.history||[];p.push({action:`Comentário adicionado: "${r.substring(0,30)}${r.length>30?"...":""}"`,date:new Date().toISOString(),user:s});const{data:m,error:b}=await n.from("workflow_cards").update({comments:u,history:p}).eq("id",t).eq("user_id",e).select().single();if(b)throw b;return m},x7=async(n,e,t)=>{if(!e)throw new Error("User ID is required to add a service package.");const{count:r,error:i}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(i)throw new Error(`Erro ao verificar pacote: ${i.message}`);if(r>0)throw new Error(`Um pacote com o nome "${t.name}" já existe.`);const s={...t,user_id:e},{data:o,error:a}=await n.from("service_packages").insert([s]).select().single();if(a)throw a;return o},_7=async(n,e,t,r)=>{if(!e)throw new Error("User ID is required to update a service package.");if(r.name){const{count:o,error:a}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(a)throw new Error(`Erro ao verificar pacote: ${a.message}`);if(o>0)throw new Error(`Um pacote com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("service_packages").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},S7=async(n,e,t)=>{if(!e)throw new Error("User ID is required to delete a service package.");const{error:r}=await n.from("service_packages").delete().eq("id",t).eq("user_id",e);if(r)throw r},A7=async(n,e,t)=>{const{data:r,error:i}=await n.from("products").insert([{...t,user_id:e}]).select().single();if(i)throw i;return r},C7=async(n,e,t,r)=>{const{data:i,error:s}=await n.from("products").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},E7=async(n,e,t)=>{const{error:r}=await n.from("products").delete().eq("id",t).eq("user_id",e);if(r)throw r},k7=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:r,error:i}=await n.from("orcamentos").select("*").eq("user_id",e).eq("client_id",t).order("data_envio",{ascending:!1});if(i)throw console.error("Erro ao buscar orçamentos:",i),i;return r||[]},P7=async(n,e)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:t,error:r}=await n.from("orcamentos").insert([e]).select().single();if(r)throw console.error("Erro ao adicionar orçamento:",r),r;return t},N7=async(n,e,t,r)=>{if(!n)throw new Error("Supabase client is not initialized.");const i={...t,updated_at:new Date().toISOString()},{data:s,error:o}=await n.from("orcamentos").update(i).eq("id",e).eq("user_id",r).select().single();if(o)throw console.error("Erro ao atualizar orçamento:",o),o;return s},T7=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{error:r}=await n.from("orcamentos").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Erro ao excluir orçamento:",r),r;return!0};function Sc(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function $h(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function L7(n,e){const t=Sc(n);return isNaN(e)?$h(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const lk=6048e5,R7=864e5,ck=6e4,uk=36e5,one=1e3,ane=43200,lne=1440;let I7={};function v1(){return I7}function Av(n,e){const t=v1(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Sc(n),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function $y(n){return Av(n,{weekStartsOn:1})}function dk(n){const e=Sc(n),t=e.getFullYear(),r=$h(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=$y(r),s=$h(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=$y(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function ES(n){const e=Sc(n);return e.setHours(0,0,0,0),e}function kS(n){const e=Sc(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function j7(n,e){const t=ES(n),r=ES(e),i=+t-kS(t),s=+r-kS(r);return Math.round((i-s)/R7)}function M7(n){const e=dk(n),t=$h(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),$y(t)}function O7(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function D7(n){if(!O7(n)&&typeof n!="number")return!1;const e=Sc(n);return!isNaN(Number(e))}function F7(n){const e=Sc(n),t=$h(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const B7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},z7=(n,e,t)=>{let r;const i=B7[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function km(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const U7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},q7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},V7={date:km({formats:U7,defaultWidth:"full"}),time:km({formats:$7,defaultWidth:"full"}),dateTime:km({formats:q7,defaultWidth:"full"})},W7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},H7=(n,e,t,r)=>W7[n];function Gu(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const G7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Y7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},X7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Z7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},J7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Q7=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},eB={ordinalNumber:Q7,era:Gu({values:G7,defaultWidth:"wide"}),quarter:Gu({values:Y7,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Gu({values:K7,defaultWidth:"wide"}),day:Gu({values:X7,defaultWidth:"wide"}),dayPeriod:Gu({values:Z7,defaultWidth:"wide",formattingValues:J7,defaultFormattingWidth:"wide"})};function Yu(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?nB(a,p=>p.test(o)):tB(a,p=>p.test(o));let u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function tB(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function nB(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function hk(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const rB=/^(\d+)(th|st|nd|rd)?/i,iB=/\d+/i,sB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oB={any:[/^b/i,/^(a|c)/i]},aB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lB={any:[/1/i,/2/i,/3/i,/4/i]},cB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hB={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mB={ordinalNumber:hk({matchPattern:rB,parsePattern:iB,valueCallback:n=>parseInt(n,10)}),era:Yu({matchPatterns:sB,defaultMatchWidth:"wide",parsePatterns:oB,defaultParseWidth:"any"}),quarter:Yu({matchPatterns:aB,defaultMatchWidth:"wide",parsePatterns:lB,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Yu({matchPatterns:cB,defaultMatchWidth:"wide",parsePatterns:uB,defaultParseWidth:"any"}),day:Yu({matchPatterns:dB,defaultMatchWidth:"wide",parsePatterns:hB,defaultParseWidth:"any"}),dayPeriod:Yu({matchPatterns:fB,defaultMatchWidth:"any",parsePatterns:pB,defaultParseWidth:"any"})},gB={code:"en-US",formatDistance:z7,formatLong:V7,formatRelative:H7,localize:eB,match:mB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vB(n){const e=Sc(n);return j7(e,F7(e))+1}function yB(n){const e=Sc(n),t=+$y(e)-+M7(e);return Math.round(t/lk)+1}function fk(n,e){const t=Sc(n),r=t.getFullYear(),i=v1(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=$h(n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Av(o,e),c=$h(n,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Av(c,e);return t.getTime()>=a.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function bB(n,e){const t=v1(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=fk(n,e),s=$h(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Av(s,e)}function wB(n,e){const t=Sc(n),r=+Av(t,e)-+bB(t,e);return Math.round(r/lk)+1}function Ir(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const Ph={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Ir(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ir(t+1,2)},d(n,e){return Ir(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ir(n.getHours()%12||12,e.length)},H(n,e){return Ir(n.getHours(),e.length)},m(n,e){return Ir(n.getMinutes(),e.length)},s(n,e){return Ir(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Ir(i,e.length)}},cm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Ph.y(n,e)},Y:function(n,e,t,r){const i=fk(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Ir(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Ir(s,e.length)},R:function(n,e){const t=dk(n);return Ir(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ir(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ir(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ir(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return Ph.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ir(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=wB(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Ir(i,e.length)},I:function(n,e,t){const r=yB(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Ir(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ph.d(n,e)},D:function(n,e,t){const r=vB(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Ir(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ir(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ir(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ir(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=cm.noon:r===0?i=cm.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=cm.evening:r>=12?i=cm.afternoon:r>=4?i=cm.morning:i=cm.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ph.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ph.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Ir(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Ir(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ph.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ph.s(n,e)},S:function(n,e){return Ph.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return TS(r);case"XXXX":case"XX":return jf(r);case"XXXXX":case"XXX":default:return jf(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return TS(r);case"xxxx":case"xx":return jf(r);case"xxxxx":case"xxx":default:return jf(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+NS(r,":");case"OOOO":default:return"GMT"+jf(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+NS(r,":");case"zzzz":default:return"GMT"+jf(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Ir(r,e.length)},T:function(n,e,t){const r=n.getTime();return Ir(r,e.length)}};function NS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Ir(s,2)}function TS(n,e){return n%60===0?(n>0?"-":"+")+Ir(Math.abs(n)/60,2):jf(n,e)}function jf(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Ir(Math.trunc(r/60),2),s=Ir(r%60,2);return t+i+e+s}const LS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pk=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},xB=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return LS(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",LS(r,e)).replace("{{time}}",pk(i,e))},_B={p:pk,P:xB},SB=/^D+$/,AB=/^Y+$/,CB=["D","DD","YY","YYYY"];function EB(n){return SB.test(n)}function kB(n){return AB.test(n)}function PB(n,e,t){const r=NB(n,e,t);if(console.warn(r),CB.includes(n))throw new RangeError(r)}function NB(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const TB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,RB=/^'([^]*?)'?$/,IB=/''/g,jB=/[a-zA-Z]/;function rl(n,e,t){const r=v1(),i=t?.locale??r.locale??gB,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Sc(n);if(!D7(a))throw new RangeError("Invalid time value");let c=e.match(LB).map(h=>{const p=h[0];if(p==="p"||p==="P"){const m=_B[p];return m(h,i.formatLong)}return h}).join("").match(TB).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:MB(h)};if(PS[p])return{isToken:!0,value:h};if(p.match(jB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!t?.useAdditionalWeekYearTokens&&kB(p)||!t?.useAdditionalDayOfYearTokens&&EB(p))&&PB(p,e,String(n));const m=PS[p[0]];return m(a,p,i.localize,u)}).join("")}function MB(n){const e=n.match(RB);return e?e[1].replace(IB,"'"):n}function mk(n,e){const r=BB(n);let i;if(r.date){const c=zB(r.date,2);i=UB(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let o=0,a;if(r.time&&(o=$B(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(a=qB(r.timezone),isNaN(a))return new Date(NaN)}else{const c=new Date(s+o),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(s+o+a)}const Y0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},OB=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DB=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,FB=/^([+-])(\d{2})(?::?(\d{2}))?$/;function BB(n){const e={},t=n.split(Y0.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Y0.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Y0.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=Y0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function zB(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function UB(n,e){if(e===null)return new Date(NaN);const t=n.match(OB);if(!t)return new Date(NaN);const r=!!t[4],i=Bg(t[1]),s=Bg(t[2])-1,o=Bg(t[3]),a=Bg(t[4]),c=Bg(t[5])-1;if(r)return YB(e,a,c)?VB(e,a,c):new Date(NaN);{const u=new Date(0);return!HB(e,s,o)||!GB(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function Bg(n){return n?parseInt(n):1}function $B(n){const e=n.match(DB);if(!e)return NaN;const t=Zb(e[1]),r=Zb(e[2]),i=Zb(e[3]);return KB(t,r,i)?t*uk+r*ck+i*1e3:NaN}function Zb(n){return n&&parseFloat(n.replace(",","."))||0}function qB(n){if(n==="Z")return 0;const e=n.match(FB);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return XB(r,i)?t*(r*uk+i*ck):NaN}function VB(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const WB=[31,null,31,30,31,30,31,31,30,31,30,31];function gk(n){return n%400===0||n%4===0&&n%100!==0}function HB(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(WB[e]||(gk(n)?29:28))}function GB(n,e){return e>=1&&e<=(gk(n)?366:365)}function YB(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function KB(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function XB(n,e){return e>=0&&e<=59}const vk=async(n,e,t=null)=>{let r=rt.from("equipamentos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_equipamento",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},ZB=async(n,e)=>{if(await vk(n,e.nome_equipamento))throw new Error(`Um equipamento com o nome "${e.nome_equipamento}" já existe.`);const{data:r,error:i}=await rt.from("equipamentos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},JB=async(n,e,t)=>{if(t.nome_equipamento&&await vk(n,t.nome_equipamento,e))throw new Error(`Um equipamento com o nome "${t.nome_equipamento}" já existe.`);const{data:r,error:i}=await rt.from("equipamentos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},QB=async(n,e)=>{const{error:t}=await rt.from("equipamentos").delete().eq("id",e).eq("user_id",n);if(t)throw t},ez=async(n,e)=>{const{data:t,error:r}=await rt.from("manutencoes").insert([{...e,user_id:n}]).select().single();if(r)throw r;return t},tz=async(n,e,t=null)=>{let r=rt.from("servicos_precificados").select("id",{count:"exact"}).eq("user_id",n).eq("nome_servico",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},nz=async(n,e)=>{if(await tz(n,e.nome_servico))throw new Error(`Um serviço com o nome "${e.nome_servico}" já existe.`);const{data:r,error:i}=await rt.from("servicos_precificados").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},yk=async(n,e,t=null)=>{let r=rt.from("custos_fixos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_custo",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},rz=async(n,e)=>{if(await yk(n,e.nome_custo))throw new Error(`Um custo com o nome "${e.nome_custo}" já existe.`);const{data:r,error:i}=await rt.from("custos_fixos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},iz=async(n,e,t)=>{if(t.nome_custo&&await yk(n,t.nome_custo,e))throw new Error(`Um custo com o nome "${t.nome_custo}" já existe.`);const{data:r,error:i}=await rt.from("custos_fixos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},sz=async(n,e)=>{const{error:t}=await rt.from("custos_fixos").delete().eq("id",e).eq("user_id",n);if(t)throw t},bk=async(n,e,t=null)=>{let r=rt.from("metas_reserva").select("id",{count:"exact"}).eq("user_id",n).eq("nome_meta",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},oz=async(n,e)=>{if(await bk(n,e.nome_meta))throw new Error(`Uma meta com o nome "${e.nome_meta}" já existe.`);const{data:r,error:i}=await rt.from("metas_reserva").insert([{...e,user_id:n,saldo_atual:0}]).select().single();if(i)throw i;return r},az=async(n,e,t)=>{if(t.nome_meta&&await bk(n,t.nome_meta,e))throw new Error(`Uma meta com o nome "${t.nome_meta}" já existe.`);const{data:r,error:i}=await rt.from("metas_reserva").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},lz=async(n,e)=>{const{error:t}=await rt.from("metas_reserva").delete().eq("id",e).eq("user_id",n);if(t)throw t},wk=(n,e=[])=>({saldo_geral:{id:"saldo_geral",title:"Saldo Geral",type:"stat",icon:"Landmark",color:"text-green-500",onClick:()=>n("financial",{type:"all",period:"all",isDashboardClick:!0}),defaultSize:{w:3,h:2}},pagamentos_receber:{id:"pagamentos_receber",title:"A Receber",type:"stat",icon:"TrendingUp",color:"text-blue-500",onClick:()=>n("financial",{type:"entrada",status:"pendente",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_pagar:{id:"despesas_pagar",title:"Contas a Pagar",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pendente",period:"future",isDashboardClick:!0}),defaultSize:{w:3,h:2}},awaiting_release:{id:"awaiting_release",title:"Aguardando Liberação",type:"stat",icon:"Wallet",color:"text-cyan-500",onClick:()=>n("financial",{status:"AGUARDANDO_LIBERACAO",isDashboardClick:!0}),defaultSize:{w:3,h:2}},imposto_estimado:{id:"imposto_estimado",title:"Imposto Estimado (Mês)",type:"stat",icon:"Receipt",color:"text-yellow-500",onClick:()=>n("precifique"),defaultSize:{w:3,h:2}},pro_labore:{id:"pro_labore",title:"Pró‑labore (Mês)",type:"stat",icon:"DollarSign",color:"text-indigo-500",onClick:()=>n("financial",{type:"saida",category:"Pró-labore",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_mes:{id:"despesas_mes",title:"Despesas (Mês)",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pago",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},lucro_mes:{id:"lucro_mes",title:"Lucro (Mês)",type:"stat",icon:"TrendingUp",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:3,h:2}},depreciacao_mensal:{id:"depreciacao_mensal",title:"Depreciação Mensal",type:"stat",icon:"TrendingDown",color:"text-gray-500",onClick:()=>n("my-setup"),defaultSize:{w:3,h:2}},clientes_ativos:{id:"clientes_ativos",title:"Clientes Ativos",type:"smallStat",icon:"Users",iconColor:"text-purple-500",onClick:()=>n("clients"),defaultSize:{w:2,h:2}},trabalhos_em_andamento:{id:"trabalhos_em_andamento",title:"Em Andamento",type:"smallStat",icon:"Briefcase",iconColor:"text-orange-500",onClick:()=>n("workflow",{status:"em-andamento"}),defaultSize:{w:2,h:2}},trabalhos_agendados:{id:"trabalhos_agendados",title:"Agendados (Mês)",type:"smallStat",icon:"Calendar",iconColor:"text-teal-500",onClick:()=>n("workflow",{status:"agendado"}),defaultSize:{w:2,h:2}},conversao_clientes:{id:"conversao_clientes",title:"Conversão de Clientes",type:"smallStat",icon:"Target",iconColor:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:2,h:2}},grafico_faturamento:{id:"grafico_faturamento",title:"Faturamento Anual",type:"chart",chartType:"bar",icon:"BarChart2",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},status_trabalhos:{id:"status_trabalhos",title:"Status dos Trabalhos",type:"chart",chartType:"pie",icon:"PieChart",color:"text-blue-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},ultimos_lancamentos:{id:"ultimos_lancamentos",title:"Últimos Lançamentos",type:"chart",chartType:"list",icon:"List",color:"text-gray-500",onClick:()=>n("financial"),defaultSize:{w:3,h:5}},lembretes:{id:"lembretes",title:"Lembretes e Tarefas",type:"reminders",icon:"BellRing",color:"text-yellow-500",onClick:()=>n("workflow"),defaultSize:{w:4,h:5}},metas_reserva:{id:"metas_reserva",title:"Resumo das Metas",type:"goals_summary",icon:"Target",color:"text-cyan-500",onClick:()=>n("reserva-inteligente"),defaultSize:{w:4,h:5}},...(e||[]).reduce((t,r)=>{const i=`wallet_${r.id}`;return t[i]={id:i,title:r.name||"Carteira",type:"stat",icon:"Wallet",iconUrl:r.icon_url||void 0,color:"text-blue-500",onClick:()=>n("financial",{walletId:r.id,isDashboardClick:!0}),defaultSize:{w:3,h:2}},t},{}),grafico_despesas_faturamento:{id:"grafico_despesas_faturamento",title:"Faturamento x Despesas",type:"chart",chartType:"bar",icon:"BarChart3",color:"text-purple-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_despesas_lucro:{id:"grafico_despesas_lucro",title:"Lucro x Despesas",type:"chart",chartType:"bar",icon:"BarChartBig",color:"text-orange-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_conversao_leads:{id:"grafico_conversao_leads",title:"Conversão de Leads",type:"chart",chartType:"pie",icon:"PieChart",color:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},grafico_inadimplentes:{id:"grafico_inadimplentes",title:"Clientes Inadimplentes",type:"chart",chartType:"pie",icon:"Users",color:"text-red-500",onClick:()=>n("clients",{status:"inadimplentes"}),defaultSize:{w:3,h:5}}}),zg=n=>{const t=[...[{i:"saldo_geral",x:0,y:0,w:3,h:2},{i:"pagamentos_receber",x:3,y:0,w:3,h:2},{i:"despesas_pagar",x:6,y:0,w:3,h:2},{i:"awaiting_release",x:9,y:0,w:3,h:2},{i:"grafico_faturamento",x:0,y:2,w:6,h:5},{i:"ultimos_lancamentos",x:6,y:2,w:3,h:5},{i:"status_trabalhos",x:9,y:2,w:3,h:5},{i:"lembretes",x:0,y:7,w:4,h:5},{i:"metas_reserva",x:4,y:7,w:4,h:5},{i:"clientes_ativos",x:8,y:7,w:2,h:2},{i:"trabalhos_em_andamento",x:10,y:7,w:2,h:2},{i:"trabalhos_agendados",x:8,y:9,w:2,h:2},{i:"conversao_clientes",x:10,y:9,w:2,h:2}]];let r=Math.max(...t.map(s=>(s.y||0)+(s.h||0)),0);return Object.keys(n).forEach(s=>{if(s.startsWith("wallet_")&&!t.some(o=>o.i===s)){const o=n[s];t.push({i:s,x:0,y:r,w:o.defaultSize?.w||3,h:o.defaultSize?.h||2}),r+=o.defaultSize?.h||2}}),[{id:"grafico_despesas_faturamento",x:0,y:r,w:6,h:5},{id:"grafico_despesas_lucro",x:6,y:r,w:6,h:5},{id:"grafico_conversao_leads",x:0,y:r+5,w:3,h:5},{id:"grafico_inadimplentes",x:3,y:r+5,w:3,h:5}].forEach(s=>{n[s.id]&&!t.some(o=>o.i===s.id)&&t.push({i:s.id,x:s.x,y:s.y,w:s.w,h:s.h})}),t},cz=(n,e)=>n.map(t=>{const r=e[t.i];let i={...t};return r.type==="stat"?(i.w=5,i.h=2):r.type==="smallStat"?(i.w=2,i.h=2):i.w=Math.min(10,t.w*1.5),i}),uz=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?6:5;break;case"reminders":case"goals_summary":s=6;break;default:s=4}const o={i:r.i,x:0,y:t,w:4,h:s};return t+=s,o})},dz=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?7:5;break;case"reminders":case"goals_summary":s=7;break;default:s=4}const o={i:r.i,x:0,y:t,w:2,h:s};return t+=s,o})},hz=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?8:6;break;case"reminders":case"goals_summary":s=8;break;default:s=5}const o={i:r.i,x:0,y:t,w:2,h:s};return t+=s,o})},fz=()=>{},Bd=wk(fz,[]);zg(Bd),cz(zg(Bd),Bd),uz(zg(Bd),Bd),dz(zg(Bd),Bd),hz(zg(Bd),Bd);const xk=N.createContext(),Po=()=>{const n=N.useContext(xk);if(!n)throw new Error("useData must be used within a DataProvider");return n},pz=({children:n})=>{const{toast:e}=Ta(),{user:t,session:r,settings:i,loadingAuth:s,setSettings:o,logout:a}=yx(),{clients:c,suppliers:u,workflowCards:h,financialData:p,servicePackages:m,products:b,equipments:_,maintenances:x,fixedCosts:k,pricedServices:E,savingGoals:T,pendingReserveAllocations:L,upcomingReminders:j,clientContracts:B,clientOrcamentos:W,availabilitySlots:U,proposals:q,blogPosts:ie,featureFlags:ve,affiliateData:$,loadingData:z,initialLoadCompleted:le,wallets:ne,contratos:ee,setDataState:G,clearLocalData:he,loadInitialData:X,refreshData:fe}=l7(t,i,e),[ue,se]=N.useState(null),[F,te]=N.useState(0),Q=N.useCallback((Be,Se)=>{bm(Be,Se,e)},[e]);N.useEffect(()=>{!s&&!t&&he()},[s,t,he]),N.useEffect(()=>{t&&!le&&X(t)},[t,le,X]);const ce=N.useCallback(Be=>{Be?.plan_status?(se(Be.plan_status),te(999)):(se("FREE"),te(999))},[]);N.useEffect(()=>{ce(i)},[i,ce]);const pe=N.useCallback(()=>!0,[]),ge=N.useCallback(Be=>{const Se={agendado:"Agendado","novo-lead":"Novo Lead","proposta-enviada":"Proposta Enviada","em-andamento":"Em Andamento",concluido:"Concluído"};return(i?.workflow_columns?.reduce((Ke,tt)=>({...Ke,[tt.id]:tt.title}),{})||{})[Be]||Se[Be]||Be},[i?.workflow_columns]),{addClient:_e,updateClient:Te,deleteClient:Ge,getClientById:Ye}=h7(t,pe,c,Be=>G(Se=>({...Se,clients:Be})),Q,Be=>G(Se=>({...Se,upcomingReminders:Be}))),{addSupplier:at,updateSupplier:ht,deleteSupplier:Ct,getSupplierById:We}=g7(t,pe,u,Be=>G(Se=>({...Se,suppliers:Be})),Q),{handleNewSubscription:we}=v7(t,i),Mt=Be=>(Be||[]).filter(Se=>Se.status==="novo-lead"||Se.status==="proposta-enviada").reduce((Se,Ve)=>Se+(Number(Ve.value)||0),0),Rt=N.useCallback(Be=>{if(i?.role==="ADMIN")return!0;const Se=i?.feature_overrides?.[Be];return typeof Se=="boolean"?Se:ve[Be]??!1},[ve,i]),ut=N.useCallback(Be=>{const Se=(ne||[]).find(tt=>tt.id===Be);return Se?(p?.transactions||[]).filter(tt=>{if(tt.wallet_id!==Be)return!1;if(tt.status==="PAGO")return!0;if(tt.status==="AGUARDANDO_LIBERACAO"&&tt.release_date)try{return new Date(tt.release_date)<=new Date}catch{return!1}return!1}).reduce((tt,Tt)=>{const Nn=Number(Tt.valor)||0;return Tt.tipo==="ENTRADA"?tt+Nn:Tt.tipo==="SAIDA"?tt-Nn:tt},Number(Se.initial_balance)||0):0},[ne,p?.transactions]),mt=N.useMemo(()=>wk(()=>{},ne),[ne]),gt=async Be=>{if(!t){Q({message:"Usuário não autenticado."},"deletar proposta");return}const{error:Se}=await rt.from("propostas").delete().eq("id",Be).eq("user_id",t.id);Se?Q(Se,"deletar proposta"):(e({title:"Proposta deletada com sucesso!"}),await fe("propostas"))},bt=async Be=>{if(!t||!pe()||!i)throw new Error("Pré-condição falhou para adicionar card.");try{const{data:Se,error:Ve}=await rt.functions.invoke("criar-agendamento",{body:JSON.stringify({cardData:Be,userName:i.user_name||t.email})});if(Ve)throw Ve;if(Se.error)throw new Error(Se.error);const{newCard:Ke}=Se;return G(tt=>{const Tt=[...tt.workflowCards,Ke].sort((Nn,Dr)=>(Nn.order||0)-(Dr.order||0));return{...tt,workflowCards:Tt,financialData:{...tt.financialData,potentialLeadValue:Mt(Tt)}}}),Ke}catch(Se){throw Q(Se,"criar agendamento"),Se}},Ot=async(Be,Se)=>{if(!t||!pe())return null;try{const Ve=h.find(tt=>tt.id===Be);if(!Ve)return await fe("workflow_cards"),null;const Ke=await y7(rt,t.id,Be,{...Se},Ve,ge,i.user_name||t.email);if(G(tt=>{const Tt=tt.workflowCards.map(Nn=>Nn.id===Be?Ke:Nn).sort((Nn,Dr)=>(Nn.order||0)-(Dr.order||0));return{...tt,workflowCards:Tt,financialData:{...tt.financialData,potentialLeadValue:Mt(Tt)}}}),Se.value!==void 0||Se.payment_type!==void 0||Se.entry_paid!==void 0){const tt=await o7(rt,Be),Tt=tt.length>0?tt[0]:null,Nn={descricao:Ke.title||"Lançamento",valor:Ke.value||0,data:Ke.first_installment_date||Ke.date||new Date().toISOString().split("T")[0],data_vencimento:Ke.first_installment_date||Ke.date,status:Ke.entry_paid?"PAGO":"PENDENTE",tipo:"ENTRADA",metodo_pagamento:Ke.payment_method||null,trabalho_id:Be,cliente_id:Ke.client_id};Tt?await $e(Tt.id,Nn):Ke.value>0&&await un(Nn),await fe("transacoes")}return Ke}catch(Ve){return Ve.message?.includes("PGRST204")?(await fe("workflow_cards"),null):(Q(Ve,"atualizar card"),null)}},Qt=async Be=>{if(!(!t||!pe()))try{await b7(rt,t.id,Be),G(Se=>{const Ve=Se.workflowCards.filter(Ke=>Ke.id!==Be);return{...Se,workflowCards:Ve,financialData:{...Se.financialData,potentialLeadValue:Mt(Ve)}}})}catch(Se){Q(Se,"remover card")}},Xt=async(Be,Se)=>{if(!t||!pe())return null;try{const Ve=h.find(tt=>tt.id===Be),Ke=await w7(rt,t.id,Be,Se,Ve?.comments,i.user_name||t.email,t.user_metadata?.avatar_url);return G(tt=>({...tt,workflowCards:tt.workflowCards.map(Tt=>Tt.id===Be?Ke:Tt)})),Ke}catch(Ve){throw Q(Ve,"adicionar comentário"),Ve}},un=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{let Se={...Be};if(Be.wallet_id&&Be.status==="PAGO"){const Ke=ne.find(tt=>tt.id===Be.wallet_id);if(Ke&&Ke.is_gateway&&Ke.gateway_config&&Be.tipo==="ENTRADA"){const tt=Ke.gateway_config.fee||0,Tt=Ke.gateway_config.release_days||0,Nn=parseFloat(Be.valor),Dr=Nn*tt/100,$s=Nn-Dr;Tt>1?Se={...Se,original_value:Nn,fee_value:Dr,valor:$s,status:"AGUARDANDO_LIBERACAO",release_date:rl(L7(new Date(Be.data),Tt),"yyyy-MM-dd")}:Se={...Se,original_value:Nn,fee_value:Dr,valor:$s,status:"PAGO",release_date:null}}}const Ve=await r7(rt,t.id,Se);return G(Ke=>{const tt=[Ve,...Ke.financialData.transactions];return{...Ke,financialData:{...lv(tt),transactions:tt,potentialLeadValue:Ke.financialData.potentialLeadValue}}}),Ve}catch(Se){throw Q(Se,"adicionar transação"),Se}},$e=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=p.transactions.find(tt=>tt.id===Be),Ke=await i7(rt,t.id,Be,Se);if(G(tt=>{const Tt=tt.financialData.transactions.map(Nn=>Nn.id===Be?Ke:Nn);return{...tt,financialData:{...lv(Tt),transactions:Tt,potentialLeadValue:tt.financialData.potentialLeadValue}}}),Ke.status==="PAGO"&&Ve?.status!=="PAGO"&&Ke.trabalho_id){const tt=h.find(Tt=>Tt.id===Ke.trabalho_id);if(tt?.service_package_id){const Tt=E.find(Nn=>Nn.id===tt.service_package_id);if(Tt?.reserva_financeira_percentual>0){const Nn=Ke.valor*Tt.reserva_financeira_percentual/100;G(Dr=>({...Dr,pendingReserveAllocations:[...Dr.pendingReserveAllocations,{transactionId:Ke.id,transactionValue:Ke.valor,serviceName:Tt.nome_servico,reserveAmount:Nn,pricedServiceId:Tt.id}]}))}}}return Ke}catch(Ve){throw Q(Ve,"atualizar transação"),Ve}},Vt=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{await s7(rt,t.id,Be),G(Se=>{const Ve=Se.financialData.transactions.filter(Ke=>Ke.id!==Be);return{...Se,financialData:{...lv(Ve),transactions:Ve,potentialLeadValue:Se.financialData.potentialLeadValue}}})}catch(Se){throw Q(Se,"remover transação"),Se}},St=async Be=>{if(!t)throw new Error("Usuário não autenticado");const{data:Se,error:Ve}=await rt.from("wallets").insert([{...Be,user_id:t.id}]).select().single();if(Ve)throw Ve;return await fe("wallets"),Se},Pt=async(Be,Se)=>{if(!t)throw new Error("Usuário não autenticado");const{data:Ve,error:Ke}=await rt.from("wallets").update(Se).eq("id",Be).eq("user_id",t.id).select().single();if(Ke)throw Ke;return await fe("wallets"),Ve},wt=async Be=>{if(!t)throw new Error("Usuário não autenticado");const{error:Se}=await rt.from("wallets").delete().eq("id",Be).eq("user_id",t.id);if(Se)throw Se;await fe("wallets")},oi=async()=>{if(!t)return!1;try{const{error:Be}=await rt.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!1})});if(Be)throw Be;he();const Se=t.user_metadata?.full_name||t.email,Ve={...Xo,user_id:t.id,user_name:Se,contact_email:t.email,profile_photo:t.user_metadata?.avatar_url||null,workflow_columns:Sy};return await o(Ve,!0),fe(),!0}catch(Be){return Q(Be,"excluir dados"),!1}},Pn=async()=>{if(!t)return!1;try{const{error:Be}=await rt.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!0})});if(Be)throw Be;return await rt.auth.signOut(),he(),!0}catch(Be){return Q(Be,"excluir conta"),!1}},Zi=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await x7(rt,t.id,Be);return G(Ve=>({...Ve,servicePackages:[Se,...Ve.servicePackages].sort((Ke,tt)=>new Date(tt.created_at)-new Date(Ke.created_at))})),Se}catch(Se){throw Q(Se,"adicionar pacote"),Se}},Jn=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await _7(rt,t.id,Be,Se);return G(Ke=>({...Ke,servicePackages:Ke.servicePackages.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"atualizar pacote"),Ve}},ir=async Be=>{if(!(!t||!pe()))try{await S7(rt,t.id,Be),G(Se=>({...Se,servicePackages:Se.servicePackages.filter(Ve=>Ve.id!==Be)}))}catch(Se){Q(Se,"remover pacote")}},Ji=Be=>m.find(Se=>Se.id===Be),Un=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await A7(rt,t.id,Be);return G(Ve=>({...Ve,products:[Se,...Ve.products].sort((Ke,tt)=>new Date(tt.created_at)-new Date(Ke.created_at))})),Se}catch(Se){throw Q(Se,"adicionar produto"),Se}},ea=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await C7(rt,t.id,Be,Se);return G(Ke=>({...Ke,products:Ke.products.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"atualizar produto"),Ve}},vr=async Be=>{if(!(!t||!pe()))try{await E7(rt,t.id,Be),G(Se=>({...Se,products:Se.products.filter(Ve=>Ve.id!==Be)}))}catch(Se){Q(Se,"remover produto")}},pi=Be=>b.find(Se=>Se.id===Be),Ri=Be=>p.transactions.find(Se=>Se.id===Be),Sr=Be=>h.find(Se=>Se.id===Be),nn=async Be=>{if(!t||!pe())return 0;let Se=0;const Ve=Be.filter(Ke=>!h.some(tt=>tt.google_event_id===Ke.id)).map(Ke=>{const tt=Ke.start?.date||(Ke.start?.dateTime?Ke.start.dateTime.split("T")[0]:null),Tt=Ke.start?.dateTime?rl(mk(Ke.start.dateTime),"HH:mm"):null;return tt?{title:Ke.summary||"Evento",description:Ke.description||"",date:tt,time:Tt,status:"agendado",google_event_id:Ke.id,user_id:t.id}:null}).filter(Boolean);if(Ve.length>0){const{data:Ke,error:tt}=await rt.from("workflow_cards").insert(Ve).select();tt?Q(tt,"importar eventos"):Ke&&(Se=Ke.length,G(Tt=>({...Tt,workflowCards:[...Tt.workflowCards,...Ke].sort((Nn,Dr)=>(Nn.order||0)-(Dr.order||0))})))}return Se},qn=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await ZB(t.id,Be);return G(Ve=>({...Ve,equipments:[Se,...Ve.equipments].sort((Ke,tt)=>new Date(tt.created_at)-new Date(Ke.created_at))})),Se}catch(Se){throw Q(Se,"add equipment"),Se}},Ra=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await JB(t.id,Be,Se);return G(Ke=>({...Ke,equipments:Ke.equipments.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"update equipment"),Ve}},ei=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{await QB(t.id,Be),G(Se=>({...Se,equipments:Se.equipments.filter(Ve=>Ve.id!==Be)}))}catch(Se){throw Q(Se,"delete equipment"),Se}},zs=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await ez(t.id,Be);return G(Ve=>({...Ve,maintenances:[Se,...Ve.maintenances].sort((Ke,tt)=>new Date(tt.data_manutencao)-new Date(Ke.data_manutencao))})),Se}catch(Se){throw Q(Se,"add maintenance"),Se}},lo=Be=>x.filter(Se=>Se.equipamento_id===Be).sort((Se,Ve)=>new Date(Ve.data_manutencao)-new Date(Se.data_manutencao)),Wt=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await rz(t.id,Be);return G(Ve=>({...Ve,fixedCosts:[Se,...Ve.fixedCosts].sort((Ke,tt)=>new Date(tt.created_at)-new Date(Ke.created_at))})),Se}catch(Se){throw Q(Se,"add fixed cost"),Se}},Ii=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await iz(t.id,Be,Se);return G(Ke=>({...Ke,fixedCosts:Ke.fixedCosts.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"update fixed cost"),Ve}},Qi=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{await sz(t.id,Be),G(Se=>({...Se,fixedCosts:Se.fixedCosts.filter(Ve=>Ve.id!==Be)}))}catch(Se){throw Q(Se,"delete fixed cost"),Se}},Si=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await nz(t.id,Be);return G(Ve=>({...Ve,pricedServices:[Se,...Ve.pricedServices].sort((Ke,tt)=>new Date(tt.created_at)-new Date(Ke.created_at))})),Se}catch(Se){throw Q(Se,"add priced service"),Se}},Ar=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await oz(t.id,Be);return await fe("metas_reserva"),Se}catch(Se){throw Q(Se,"add saving goal"),Se}},Cr=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await az(t.id,Be,Se);return G(Ke=>({...Ke,savingGoals:Ke.savingGoals.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"update saving goal"),Ve}},Ai=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{await lz(t.id,Be),G(Se=>({...Se,savingGoals:Se.savingGoals.filter(Ve=>Ve.id!==Be)}))}catch(Se){throw Q(Se,"delete saving goal"),Se}},Ia=async(Be,Se,Ve,Ke)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const tt=T.find($s=>$s.id===Be);if(!tt)throw new Error("Meta não encontrada.");let Tt;if(Ke==="deposit")Tt=Number(tt.saldo_atual)+Number(Se);else if(Ke==="withdraw"){if(Number(tt.saldo_atual)<Number(Se))throw new Error("Saldo insuficiente.");Tt=Number(tt.saldo_atual)-Number(Se)}else throw new Error("Tipo de transação inválido.");const{data:Nn,error:Dr}=await rt.from("metas_reserva").update({saldo_atual:Tt,updated_at:new Date().toISOString()}).eq("id",Be).eq("user_id",t.id).select().single();if(Dr)throw Dr;return Ke==="withdraw"&&await un({descricao:`Saque da meta: ${tt.nome_meta}${Ve?` - ${Ve}`:""}`,valor:Number(Se),tipo:"SAIDA",status:"PAGO",data:new Date().toISOString().split("T")[0],category:"Saque de Meta",user_id:t.id}),G($s=>({...$s,savingGoals:$s.savingGoals.map(ja=>ja.id===Be?Nn:ja).sort((ja,ll)=>new Date(ll.created_at)-new Date(ja.created_at))})),Nn}catch(tt){throw Q(tt,`Erro ao ${Ke==="deposit"?"depositar":"sacar"}`),tt}},ta=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{data:Ve,error:Ke}=await rt.functions.invoke("alocarReserva",{body:JSON.stringify({meta_id:Be,valor_alocar:Se,user_id:t.id})});if(Ke)throw Ke;if(Ve.error)throw new Error(Ve.error);return G(tt=>({...tt,savingGoals:tt.savingGoals.map(Tt=>Tt.id===Be?Ve:Tt).sort((Tt,Nn)=>new Date(Nn.created_at)-new Date(Tt.created_at))})),Ve}catch(Ve){throw Q(Ve,"alocar reserva"),Ve}},co=Be=>G(Se=>({...Se,pendingReserveAllocations:Se.pendingReserveAllocations.filter(Ve=>Ve.transactionId!==Be)})),uo=N.useCallback(async Be=>{if(!(!t||!Be))try{const{data:Se,error:Ve}=await rt.from("contratos_clientes").select("*").eq("user_id",t.id).eq("client_id",Be).order("created_at",{ascending:!1});if(Ve)throw Ve;G(Ke=>({...Ke,clientContracts:Se||[]}))}catch(Se){Q(Se,"buscar contratos")}},[t,Q]),mi=async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{data:Se,error:Ve}=await rt.from("contratos_clientes").insert([Be]).select().single();if(Ve)throw Ve;return G(Ke=>({...Ke,clientContracts:[Se,...Ke.clientContracts].sort((tt,Tt)=>new Date(Tt.created_at)-new Date(tt.created_at))})),Se}catch(Se){throw Q(Se,"add contrato"),Se}},Us=async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{error:Ve}=await rt.from("contratos_clientes").delete().eq("id",Be).eq("user_id",t.id);if(Ve)throw Ve;const{error:Ke}=await rt.storage.from("contracts").remove([Se]);Ke&&console.warn("Erro ao deletar do storage:",Ke.message),G(tt=>({...tt,clientContracts:tt.clientContracts.filter(Tt=>Tt.id!==Be)}))}catch(Ve){throw Q(Ve,"delete contrato"),Ve}},gs=N.useCallback(async Be=>{if(!(!t||!Be))try{const Se=await k7(rt,t.id,Be);G(Ve=>({...Ve,clientOrcamentos:Se}))}catch(Se){Q(Se,"buscar orçamentos")}},[t,Q]),al={clients:c,suppliers:u,workflowCards:h,financialData:p,settings:i,loading:z||s,servicePackages:m,products:b,user:t,session:r,loadingAuth:s,refreshData:fe,planStatus:ue,trialDaysRemaining:F,isUserActive:pe,equipments:_,maintenances:x,fixedCosts:k,pricedServices:E,savingGoals:T,pendingReserveAllocations:L,upcomingReminders:j,clientContracts:B,clientOrcamentos:W,availabilitySlots:U,proposals:q,blogPosts:ie,featureFlags:ve,isFeatureEnabled:Rt,affiliateData:$,wallets:ne,contratos:ee,getWalletBalance:ut,logout:a,addClient:_e,updateClient:Te,deleteClient:Ge,getClientById:Ye,addSupplier:at,updateSupplier:ht,deleteSupplier:Ct,getSupplierById:We,addWorkflowCard:bt,updateWorkflowCard:Ot,deleteWorkflowCard:Qt,addComment:Xt,getStatusLabel:ge,importGoogleEventsAsWorkflowCards:nn,getWorkflowCardById:Sr,addTransaction:un,updateTransaction:$e,deleteTransaction:Vt,getTransactionById:Ri,setSettings:o,addServicePackage:Zi,updateServicePackage:Jn,deleteServicePackage:ir,getServicePackageById:Ji,addProduct:Un,updateProduct:ea,deleteProduct:vr,getProductById:pi,addEquipment:qn,updateEquipment:Ra,deleteEquipment:ei,addMaintenance:zs,getEquipmentMaintenances:lo,addFixedCost:Wt,updateFixedCost:Ii,deleteFixedCost:Qi,addPricedService:Si,addSavingGoal:Ar,updateSavingGoal:Cr,deleteSavingGoal:Ai,updateSavingGoalBalance:Ia,allocateToSavingGoal:ta,dismissPendingAllocation:co,refreshClientContracts:uo,addClientContract:mi,deleteClientContract:Us,refreshClientOrcamentos:gs,addOrcamento:async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Se=await P7(rt,Be);return G(Ve=>({...Ve,clientOrcamentos:[Se,...Ve.clientOrcamentos].sort((Ke,tt)=>new Date(tt.data_envio)-new Date(Ke.data_envio))})),Se}catch(Se){throw Q(Se,"add orçamento"),Se}},updateOrcamento:async(Be,Se)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Ve=await N7(rt,Be,Se,t.id);return G(Ke=>({...Ke,clientOrcamentos:Ke.clientOrcamentos.map(tt=>tt.id===Be?Ve:tt).sort((tt,Tt)=>new Date(Tt.data_envio)-new Date(tt.data_envio))})),Ve}catch(Ve){throw Q(Ve,"update orçamento"),Ve}},deleteOrcamento:async Be=>{if(!t||!pe())throw new Error("Operação não permitida");try{await T7(rt,Be,t.id),G(Se=>({...Se,clientOrcamentos:Se.clientOrcamentos.filter(Ve=>Ve.id!==Be)}))}catch(Se){throw Q(Se,"delete orçamento"),Se}},deleteAllUserData:oi,deleteUserAccount:Pn,deleteProposal:gt,handleNewSubscription:we,addWallet:St,updateWallet:Pt,deleteWallet:wt,initialCardConfigMemo:mt};return y.jsx(xk.Provider,{value:al,children:n})},_k=N.createContext(),cp=()=>{const n=N.useContext(_k);if(!n)throw new Error("useModalState must be used within a ModalStateProvider");return n},mz=({children:n})=>{const[e,t]=N.useState({client:null,financial:null,financialWizard:null,workflow:null,servicePackage:null,product:null,equipment:null,maintenance:null,fixedCost:null,goal:null,goalTransaction:null,withdrawGoal:null,orcamento:null,formCreation:!1,formSuccess:null,bookingSettings:!1,availability:null}),r=N.useCallback((a,c={})=>{t(u=>({...u,[a]:{isOpen:!0,...c}}))},[]),i=N.useCallback(a=>{t(c=>({...c,[a]:null}))},[]),s=Object.values(e).some(a=>a?.isOpen),o={openModals:e,openModal:r,closeModal:i,isAnyModalOpen:s};return y.jsx(_k.Provider,{value:o,children:n})},gz=N.createContext(null),vz=()=>({browser:navigator.userAgent,platform:navigator.platform,screen_resolution:`${window.screen.width}x${window.screen.height}`,window_resolution:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language}),yz=({children:n})=>{const{user:e,settings:t}=yx(),r=ru(),i=N.useCallback(async s=>{try{const o={type:s.type||"error",route:r.pathname,message:typeof s.message=="object"?JSON.stringify(s.message,null,2):String(s.message),stack_trace:s.stack_trace,user_info:{id:e?.id||null,email:e?.email||null,name:t?.user_name||null},device_info:vz(),user_id:e?.id||null};await rt.functions.invoke("report-error",{body:JSON.stringify(o)})}catch(o){console.error("Failed to report error:",o)}},[e,t,r.pathname]);return N.useEffect(()=>{const s=console.error;console.error=(...c)=>{s.apply(console,c);const u=c.map(p=>{if(p instanceof Error)return p.message;try{return JSON.stringify(p)}catch{return String(p)}}).join(" "),h=c.find(p=>p instanceof Error)?.stack;i({type:"log",message:`CONSOLE_ERROR: ${u}`,stack_trace:h})};const o=c=>{i({message:c.message,stack_trace:c.error?.stack})},a=c=>{i({type:"unhandled_rejection",message:c.reason?.message||"Promise rejection with no message",stack_trace:c.reason?.stack})};return window.addEventListener("error",o),window.addEventListener("unhandledrejection",a),()=>{console.error=s,window.removeEventListener("error",o),window.removeEventListener("unhandledrejection",a)}},[i]),N.useEffect(()=>{const s=window.fetch;return window.fetch=async(...o)=>{const a=await s(...o);if(a.status>=400&&a.status<600){const c=o[0]instanceof Request?o[0].url:o[0];if(c.includes("/report-error"))return a;i({type:"network_error",message:`Fetch failed with status ${a.status} for URL: ${c}`,stack_trace:`Status: ${a.status}
URL: ${c}
Method: ${o[0]?.method||"GET"}`})}return a},()=>{window.fetch=s}},[i]),n},bz=({children:n})=>y.jsx(gz.Provider,{value:null,children:y.jsx(yz,{children:n})}),Sk=N.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),y1=N.createContext({}),b1=N.createContext(null),w1=typeof document<"u",bx=w1?N.useLayoutEffect:N.useEffect,Ak=N.createContext({strict:!1}),wx=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),wz="framerAppearId",Ck="data-"+wx(wz);function xz(n,e,t,r){const{visualElement:i}=N.useContext(y1),s=N.useContext(Ak),o=N.useContext(b1),a=N.useContext(Sk).reducedMotion,c=N.useRef();r=r||s.renderer,!c.current&&r&&(c.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(t,o)});const h=N.useRef(!!(t[Ck]&&!window.HandoffComplete));return bx(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function wm(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function _z(n,e,t){return N.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):wm(t)&&(t.current=r))},[e])}function Cv(n){return typeof n=="string"||Array.isArray(n)}function x1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const xx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_x=["initial",...xx];function _1(n){return x1(n.animate)||_x.some(e=>Cv(n[e]))}function Ek(n){return!!(_1(n)||n.variants)}function Sz(n,e){if(_1(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Cv(t)?t:void 0,animate:Cv(r)?r:void 0}}return n.inherit!==!1?e:{}}function Az(n){const{initial:e,animate:t}=Sz(n,N.useContext(y1));return N.useMemo(()=>({initial:e,animate:t}),[RS(e),RS(t)])}function RS(n){return Array.isArray(n)?n.join(" "):n}const IS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ev={};for(const n in IS)Ev[n]={isEnabled:e=>IS[n].some(t=>!!e[t])};function Cz(n){for(const e in n)Ev[e]={...Ev[e],...n[e]}}const Sx=N.createContext({}),kk=N.createContext({}),Ez=Symbol.for("motionComponentSymbol");function kz({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&Cz(n);function s(a,c){let u;const h={...N.useContext(Sk),...a,layoutId:Pz(a)},{isStatic:p}=h,m=Az(a),b=r(a,p);if(!p&&w1){m.visualElement=xz(i,b,h,e);const _=N.useContext(kk),x=N.useContext(Ak).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,x,n,_))}return N.createElement(y1.Provider,{value:m},u&&m.visualElement?N.createElement(u,{visualElement:m.visualElement,...h}):null,t(i,a,_z(b,m.visualElement,c),b,p,m.visualElement))}const o=N.forwardRef(s);return o[Ez]=i,o}function Pz({layoutId:n}){const e=N.useContext(Sx).id;return e&&n!==void 0?e+"-"+n:n}function Nz(n){function e(r,i={}){return kz(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const Tz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ax(n){return typeof n!="string"||n.includes("-")?!1:!!(Tz.indexOf(n)>-1||/[A-Z]/.test(n))}const qy={};function Lz(n){Object.assign(qy,n)}const Vv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],up=new Set(Vv);function Pk(n,{layout:e,layoutId:t}){return up.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!qy[n]||n==="opacity")}const il=n=>!!(n&&n.getVelocity),Rz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Iz=Vv.length;function jz(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<Iz;o++){const a=Vv[o];if(n[a]!==void 0){const c=Rz[a]||a;s+=`${c}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const Nk=n=>e=>typeof e=="string"&&e.startsWith(n),Tk=Nk("--"),i2=Nk("var(--"),Mz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Oz=(n,e)=>e&&typeof n=="number"?e.transform(n):n,qh=(n,e,t)=>Math.min(Math.max(t,n),e),dp={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},cv={...dp,transform:n=>qh(0,1,n)},K0={...dp,default:1},uv=n=>Math.round(n*1e5)/1e5,S1=/(-)?([\d]*\.?[\d])+/g,Lk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Dz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Wv(n){return typeof n=="string"}const Hv=n=>({test:e=>Wv(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Rh=Hv("deg"),Ju=Hv("%"),hn=Hv("px"),Fz=Hv("vh"),Bz=Hv("vw"),jS={...Ju,parse:n=>Ju.parse(n)/100,transform:n=>Ju.transform(n*100)},MS={...dp,transform:Math.round},Rk={borderWidth:hn,borderTopWidth:hn,borderRightWidth:hn,borderBottomWidth:hn,borderLeftWidth:hn,borderRadius:hn,radius:hn,borderTopLeftRadius:hn,borderTopRightRadius:hn,borderBottomRightRadius:hn,borderBottomLeftRadius:hn,width:hn,maxWidth:hn,height:hn,maxHeight:hn,size:hn,top:hn,right:hn,bottom:hn,left:hn,padding:hn,paddingTop:hn,paddingRight:hn,paddingBottom:hn,paddingLeft:hn,margin:hn,marginTop:hn,marginRight:hn,marginBottom:hn,marginLeft:hn,rotate:Rh,rotateX:Rh,rotateY:Rh,rotateZ:Rh,scale:K0,scaleX:K0,scaleY:K0,scaleZ:K0,skew:Rh,skewX:Rh,skewY:Rh,distance:hn,translateX:hn,translateY:hn,translateZ:hn,x:hn,y:hn,z:hn,perspective:hn,transformPerspective:hn,opacity:cv,originX:jS,originY:jS,originZ:hn,zIndex:MS,fillOpacity:cv,strokeOpacity:cv,numOctaves:MS};function Cx(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let c=!1,u=!1,h=!0;for(const p in e){const m=e[p];if(Tk(p)){s[p]=m;continue}const b=Rk[p],_=Oz(m,b);if(up.has(p)){if(c=!0,o[p]=_,!h)continue;m!==(b.default||0)&&(h=!1)}else p.startsWith("origin")?(u=!0,a[p]=_):i[p]=_}if(e.transform||(c||r?i.transform=jz(n.transform,t,h,r):i.transform&&(i.transform="none")),u){const{originX:p="50%",originY:m="50%",originZ:b=0}=a;i.transformOrigin=`${p} ${m} ${b}`}}const Ex=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ik(n,e,t){for(const r in e)!il(e[r])&&!Pk(r,t)&&(n[r]=e[r])}function zz({transformTemplate:n},e,t){return N.useMemo(()=>{const r=Ex();return Cx(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function Uz(n,e,t){const r=n.style||{},i={};return Ik(i,r,n),Object.assign(i,zz(n,e,t)),n.transformValues?n.transformValues(i):i}function $z(n,e,t){const r={},i=Uz(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const qz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vy(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||qz.has(n)}let jk=n=>!Vy(n);function Vz(n){n&&(jk=e=>e.startsWith("on")?!Vy(e):n(e))}try{Vz(require("@emotion/is-prop-valid").default)}catch{}function Wz(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(jk(i)||t===!0&&Vy(i)||!e&&!Vy(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function OS(n,e,t){return typeof n=="string"?n:hn.transform(e+t*n)}function Hz(n,e,t){const r=OS(e,n.x,n.width),i=OS(t,n.y,n.height);return`${r} ${i}`}const Gz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yz={offset:"strokeDashoffset",array:"strokeDasharray"};function Kz(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Gz:Yz;n[s.offset]=hn.transform(-r);const o=hn.transform(e),a=hn.transform(t);n[s.array]=`${o} ${a}`}function kx(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,p,m){if(Cx(n,u,h,m),p){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:_,dimensions:x}=n;b.transform&&(x&&(_.transform=b.transform),delete b.transform),x&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=Hz(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),o!==void 0&&Kz(b,o,a,c,!1)}const Mk=()=>({...Ex(),attrs:{}}),Px=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Xz(n,e,t,r){const i=N.useMemo(()=>{const s=Mk();return kx(s,e,{enableHardwareAcceleration:!1},Px(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};Ik(s,n.style,n),i.style={...s,...i.style}}return i}function Zz(n=!1){return(t,r,i,{latestValues:s},o)=>{const c=(Ax(t)?Xz:$z)(r,s,o,t),h={...Wz(r,typeof t=="string",n),...c,ref:i},{children:p}=r,m=N.useMemo(()=>il(p)?p.get():p,[p]);return N.createElement(t,{...h,children:m})}}function Ok(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const Dk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fk(n,e,t,r){Ok(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Dk.has(i)?i:wx(i),e.attrs[i])}function Nx(n,e){const{style:t}=n,r={};for(const i in t)(il(t[i])||e.style&&il(e.style[i])||Pk(i,n))&&(r[i]=t[i]);return r}function Bk(n,e){const t=Nx(n,e);for(const r in n)if(il(n[r])||il(e[r])){const i=Vv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function Tx(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function zk(n){const e=N.useRef(null);return e.current===null&&(e.current=n()),e.current}const Wy=n=>Array.isArray(n),Jz=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Qz=n=>Wy(n)?n[n.length-1]||0:n;function Ay(n){const e=il(n)?n.get():n;return Jz(e)?e.toValue():e}function e9({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:t9(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const Uk=n=>(e,t)=>{const r=N.useContext(y1),i=N.useContext(b1),s=()=>e9(n,e,r,i);return t?s():zk(s)};function t9(n,e,t,r){const i={},s=r(n,{});for(const m in s)i[m]=Ay(s[m]);let{initial:o,animate:a}=n;const c=_1(n),u=Ek(n);e&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const p=h?a:o;return p&&typeof p!="boolean"&&!x1(p)&&(Array.isArray(p)?p:[p]).forEach(b=>{const _=Tx(n,b);if(!_)return;const{transitionEnd:x,transition:k,...E}=_;for(const T in E){let L=E[T];if(Array.isArray(L)){const j=h?L.length-1:0;L=L[j]}L!==null&&(i[T]=L)}for(const T in x)i[T]=x[T]}),i}const Gi=n=>n;class DS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function n9(n){let e=new DS,t=new DS,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const p=h&&i,m=p?e:t;return u&&o.add(c),m.add(c)&&p&&i&&(r=e.order.length),c},cancel:c=>{t.remove(c),o.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(c),o.has(h)&&(a.schedule(h),n())}i=!1,s&&(s=!1,a.process(c))}};return a}const X0=["prepare","read","update","preRender","render","postRender"],r9=40;function i9(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=X0.reduce((p,m)=>(p[m]=n9(()=>t=!0),p),{}),o=p=>s[p].process(i),a=()=>{const p=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(p-i.timestamp,r9),1),i.timestamp=p,i.isProcessing=!0,X0.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(a))},c=()=>{t=!0,r=!0,i.isProcessing||n(a)};return{schedule:X0.reduce((p,m)=>{const b=s[m];return p[m]=(_,x=!1,k=!1)=>(t||c(),b.schedule(_,x,k)),p},{}),cancel:p=>X0.forEach(m=>s[m].cancel(p)),state:i,steps:s}}const{schedule:Qr,cancel:eh,state:Zo,steps:Jb}=i9(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gi,!0),s9={useVisualState:Uk({scrapeMotionValuesFromProps:Bk,createRenderState:Mk,onMount:(n,e,{renderState:t,latestValues:r})=>{Qr.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Qr.render(()=>{kx(t,r,{enableHardwareAcceleration:!1},Px(e.tagName),n.transformTemplate),Fk(e,t)})}})},o9={useVisualState:Uk({scrapeMotionValuesFromProps:Nx,createRenderState:Ex})};function a9(n,{forwardMotionProps:e=!1},t,r){return{...Ax(n)?s9:o9,preloadedFeatures:t,useRender:Zz(e),createVisualElement:r,Component:n}}function Yd(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const $k=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function A1(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const l9=n=>e=>$k(e)&&n(e,A1(e));function Xd(n,e,t,r){return Yd(n,e,l9(t),r)}const c9=(n,e)=>t=>e(n(t)),zh=(...n)=>n.reduce(c9);function qk(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const FS=qk("dragHorizontal"),BS=qk("dragVertical");function Vk(n){let e=!1;if(n==="y")e=BS();else if(n==="x")e=FS();else{const t=FS(),r=BS();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function Wk(){const n=Vk(!0);return n?(n(),!1):!0}class Qh{constructor(e){this.isMounted=!1,this.node=e}update(){}}function zS(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||Wk())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[r]&&Qr.update(()=>a[r](s,o))};return Xd(n.current,t,i,{passive:!n.getProps()[r]})}class u9 extends Qh{mount(){this.unmount=zh(zS(this.node,!0),zS(this.node,!1))}unmount(){}}class d9 extends Qh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zh(Yd(this.node.current,"focus",()=>this.onFocus()),Yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Hk=(n,e)=>e?n===e?!0:Hk(n,e.parentElement):!1;function Qb(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,A1(t))}class h9 extends Qh{constructor(){super(...arguments),this.removeStartListeners=Gi,this.removeEndListeners=Gi,this.removeAccessibleListeners=Gi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Xd(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:p}=this.node.getProps();Qr.update(()=>{!p&&!Hk(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Xd(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=zh(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Qb("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Qr.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Yd(this.node.current,"keyup",o),Qb("down",(a,c)=>{this.startPress(a,c)})},t=Yd(this.node.current,"keydown",e),r=()=>{this.isPressing&&Qb("cancel",(s,o)=>this.cancelPress(s,o))},i=Yd(this.node.current,"blur",r);this.removeAccessibleListeners=zh(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Qr.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Wk()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Qr.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Xd(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=zh(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const s2=new WeakMap,ew=new WeakMap,f9=n=>{const e=s2.get(n.target);e&&e(n)},p9=n=>{n.forEach(f9)};function m9({root:n,...e}){const t=n||document;ew.has(t)||ew.set(t,{});const r=ew.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(p9,{root:n,...e})),r[i]}function g9(n,e,t){const r=m9(e);return s2.set(n,t),r.observe(n),()=>{s2.delete(n),r.unobserve(n)}}const v9={some:0,all:1};class y9 extends Qh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:v9[i]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=u?h:p;m&&m(c)};return g9(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(b9(e,t))&&this.startObserver()}unmount(){}}function b9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const w9={inView:{Feature:y9},tap:{Feature:h9},focus:{Feature:d9},hover:{Feature:u9}};function Gk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function x9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function _9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function C1(n,e,t){const r=n.getProps();return Tx(r,e,t!==void 0?t:r.custom,x9(n),_9(n))}let Lx=Gi;const Gf=n=>n*1e3,Zd=n=>n/1e3,S9={current:!1},Yk=n=>Array.isArray(n)&&typeof n[0]=="number";function Kk(n){return!!(!n||typeof n=="string"&&Xk[n]||Yk(n)||Array.isArray(n)&&n.every(Kk))}const Qg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Xk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qg([0,.65,.55,1]),circOut:Qg([.55,0,1,.45]),backIn:Qg([.31,.01,.66,-.59]),backOut:Qg([.33,1.53,.69,.99])};function Zk(n){if(n)return Yk(n)?Qg(n):Array.isArray(n)?n.map(Zk):Xk[n]}function A9(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:t};c&&(u.offset=c);const h=Zk(a);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function C9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const Jk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,E9=1e-7,k9=12;function P9(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=Jk(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>E9&&++a<k9);return o}function Gv(n,e,t,r){if(n===e&&t===r)return Gi;const i=s=>P9(s,0,1,n,t);return s=>s===0||s===1?s:Jk(i(s),e,r)}const N9=Gv(.42,0,1,1),T9=Gv(0,0,.58,1),Qk=Gv(.42,0,.58,1),L9=n=>Array.isArray(n)&&typeof n[0]!="number",eP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,tP=n=>e=>1-n(1-e),Rx=n=>1-Math.sin(Math.acos(n)),nP=tP(Rx),R9=eP(Rx),rP=Gv(.33,1.53,.69,.99),Ix=tP(rP),I9=eP(Ix),j9=n=>(n*=2)<1?.5*Ix(n):.5*(2-Math.pow(2,-10*(n-1))),M9={linear:Gi,easeIn:N9,easeInOut:Qk,easeOut:T9,circIn:Rx,circInOut:R9,circOut:nP,backIn:Ix,backInOut:I9,backOut:rP,anticipate:j9},US=n=>{if(Array.isArray(n)){Lx(n.length===4);const[e,t,r,i]=n;return Gv(e,t,r,i)}else if(typeof n=="string")return M9[n];return n},jx=(n,e)=>t=>!!(Wv(t)&&Dz.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),iP=(n,e,t)=>r=>{if(!Wv(r))return r;const[i,s,o,a]=r.match(S1);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},O9=n=>qh(0,255,n),tw={...dp,transform:n=>Math.round(O9(n))},$f={test:jx("rgb","red"),parse:iP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+tw.transform(n)+", "+tw.transform(e)+", "+tw.transform(t)+", "+uv(cv.transform(r))+")"};function D9(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const o2={test:jx("#"),parse:D9,transform:$f.transform},xm={test:jx("hsl","hue"),parse:iP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ju.transform(uv(e))+", "+Ju.transform(uv(t))+", "+uv(cv.transform(r))+")"},Ea={test:n=>$f.test(n)||o2.test(n)||xm.test(n),parse:n=>$f.test(n)?$f.parse(n):xm.test(n)?xm.parse(n):o2.parse(n),transform:n=>Wv(n)?n:n.hasOwnProperty("red")?$f.transform(n):xm.transform(n)},xi=(n,e,t)=>-t*n+t*e+n;function nw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function F9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;i=nw(c,a,n+1/3),s=nw(c,a,n),o=nw(c,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const rw=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},B9=[o2,$f,xm],z9=n=>B9.find(e=>e.test(n));function $S(n){const e=z9(n);let t=e.parse(n);return e===xm&&(t=F9(t)),t}const sP=(n,e)=>{const t=$S(n),r=$S(e),i={...t};return s=>(i.red=rw(t.red,r.red,s),i.green=rw(t.green,r.green,s),i.blue=rw(t.blue,r.blue,s),i.alpha=xi(t.alpha,r.alpha,s),$f.transform(i))};function U9(n){var e,t;return isNaN(n)&&Wv(n)&&(((e=n.match(S1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Lk))===null||t===void 0?void 0:t.length)||0)>0}const oP={regex:Mz,countKey:"Vars",token:"${v}",parse:Gi},aP={regex:Lk,countKey:"Colors",token:"${c}",parse:Ea.parse},lP={regex:S1,countKey:"Numbers",token:"${n}",parse:dp.parse};function iw(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Hy(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&iw(t,oP),iw(t,aP),iw(t,lP),t}function cP(n){return Hy(n).values}function uP(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Hy(n),s=e.length;return o=>{let a=i;for(let c=0;c<s;c++)c<r?a=a.replace(oP.token,o[c]):c<r+t?a=a.replace(aP.token,Ea.transform(o[c])):a=a.replace(lP.token,uv(o[c]));return a}}const $9=n=>typeof n=="number"?0:n;function q9(n){const e=cP(n);return uP(n)(e.map($9))}const Vh={test:U9,parse:cP,createTransformer:uP,getAnimatableNone:q9},dP=(n,e)=>t=>`${t>0?e:n}`;function hP(n,e){return typeof n=="number"?t=>xi(n,e,t):Ea.test(n)?sP(n,e):n.startsWith("var(")?dP(n,e):pP(n,e)}const fP=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>hP(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},V9=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=hP(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},pP=(n,e)=>{const t=Vh.createTransformer(e),r=Hy(n),i=Hy(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?zh(fP(r.values,i.values),t):dP(n,e)},kv=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},qS=(n,e)=>t=>xi(n,e,t);function W9(n){return typeof n=="number"?qS:typeof n=="string"?Ea.test(n)?sP:pP:Array.isArray(n)?fP:typeof n=="object"?V9:qS}function H9(n,e,t){const r=[],i=t||W9(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||Gi:e;a=zh(c,a)}r.push(a)}return r}function mP(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(Lx(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=H9(e,r,i),a=o.length,c=u=>{let h=0;if(a>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const p=kv(n[h],n[h+1],u);return o[h](p)};return t?u=>c(qh(n[0],n[s-1],u)):c}function G9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=kv(0,e,r);n.push(xi(t,1,i))}}function Y9(n){const e=[0];return G9(e,n.length-1),e}function K9(n,e){return n.map(t=>t*e)}function X9(n,e){return n.map(()=>e||Qk).splice(0,n.length-1)}function Gy({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=L9(r)?r.map(US):US(r),s={done:!1,value:e[0]},o=K9(t&&t.length===e.length?t:Y9(e),n),a=mP(o,e,{ease:Array.isArray(i)?i:X9(e,i)});return{calculatedDuration:n,next:c=>(s.value=a(c),s.done=c>=n,s)}}function gP(n,e){return e?n*(1e3/e):0}const Z9=5;function vP(n,e,t){const r=Math.max(e-Z9,0);return gP(t-n(r),e-r)}const sw=.001,J9=.01,Q9=10,eU=.05,tU=1;function nU({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,o=1-e;o=qh(eU,tU,o),n=qh(J9,Q9,Zd(n)),o<1?(i=u=>{const h=u*o,p=h*n,m=h-t,b=a2(u,o),_=Math.exp(-p);return sw-m/b*_},s=u=>{const p=u*o*n,m=p*t+t,b=Math.pow(o,2)*Math.pow(u,2)*n,_=Math.exp(-p),x=a2(Math.pow(u,2),o);return(-i(u)+sw>0?-1:1)*((m-b)*_)/x}):(i=u=>{const h=Math.exp(-u*n),p=(u-t)*n+1;return-sw+h*p},s=u=>{const h=Math.exp(-u*n),p=(t-u)*(n*n);return h*p});const a=5/n,c=iU(i,s,a);if(n=Gf(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const rU=12;function iU(n,e,t){let r=t;for(let i=1;i<rU;i++)r=r-n(r)/e(r);return r}function a2(n,e){return n*Math.sqrt(1-e*e)}const sU=["duration","bounce"],oU=["stiffness","damping","mass"];function VS(n,e){return e.some(t=>n[t]!==void 0)}function aU(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!VS(n,oU)&&VS(n,sU)){const t=nU(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function yP({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:c,mass:u,duration:h,velocity:p,isResolvedFromDuration:m}=aU({...r,velocity:-Zd(r.velocity||0)}),b=p||0,_=c/(2*Math.sqrt(a*u)),x=s-i,k=Zd(Math.sqrt(a/u)),E=Math.abs(x)<5;t||(t=E?.01:2),e||(e=E?.005:.5);let T;if(_<1){const L=a2(k,_);T=j=>{const B=Math.exp(-_*k*j);return s-B*((b+_*k*x)/L*Math.sin(L*j)+x*Math.cos(L*j))}}else if(_===1)T=L=>s-Math.exp(-k*L)*(x+(b+k*x)*L);else{const L=k*Math.sqrt(_*_-1);T=j=>{const B=Math.exp(-_*k*j),W=Math.min(L*j,300);return s-B*((b+_*k*x)*Math.sinh(W)+L*x*Math.cosh(W))/L}}return{calculatedDuration:m&&h||null,next:L=>{const j=T(L);if(m)o.done=L>=h;else{let B=b;L!==0&&(_<1?B=vP(T,L,j):B=0);const W=Math.abs(B)<=t,U=Math.abs(s-j)<=e;o.done=W&&U}return o.value=o.done?s:j,o}}}function WS({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const p=n[0],m={done:!1,value:p},b=q=>a!==void 0&&q<a||c!==void 0&&q>c,_=q=>a===void 0?c:c===void 0||Math.abs(a-q)<Math.abs(c-q)?a:c;let x=t*e;const k=p+x,E=o===void 0?k:o(k);E!==k&&(x=E-p);const T=q=>-x*Math.exp(-q/r),L=q=>E+T(q),j=q=>{const ie=T(q),ve=L(q);m.done=Math.abs(ie)<=u,m.value=m.done?E:ve};let B,W;const U=q=>{b(m.value)&&(B=q,W=yP({keyframes:[m.value,_(m.value)],velocity:vP(L,q,m.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return U(0),{calculatedDuration:null,next:q=>{let ie=!1;return!W&&B===void 0&&(ie=!0,j(q),U(q)),B!==void 0&&q>B?W.next(q-B):(!ie&&j(q),m)}}}const lU=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Qr.update(e,!0),stop:()=>eh(e),now:()=>Zo.isProcessing?Zo.timestamp:performance.now()}},HS=2e4;function GS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<HS;)e+=t,r=n.next(e);return e>=HS?1/0:e}const cU={decay:WS,inertia:WS,tween:Gy,keyframes:Gy,spring:yP};function Yy({autoplay:n=!0,delay:e=0,driver:t=lU,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:p,...m}){let b=1,_=!1,x,k;const E=()=>{k=new Promise(se=>{x=se})};E();let T;const L=cU[i]||Gy;let j;L!==Gy&&typeof r[0]!="number"&&(j=mP([0,100],r,{clamp:!1}),r=[0,100]);const B=L({...m,keyframes:r});let W;a==="mirror"&&(W=L({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let U="idle",q=null,ie=null,ve=null;B.calculatedDuration===null&&s&&(B.calculatedDuration=GS(B));const{calculatedDuration:$}=B;let z=1/0,le=1/0;$!==null&&(z=$+o,le=z*(s+1)-o);let ne=0;const ee=se=>{if(ie===null)return;b>0&&(ie=Math.min(ie,se)),b<0&&(ie=Math.min(se-le/b,ie)),q!==null?ne=q:ne=Math.round(se-ie)*b;const F=ne-e*(b>=0?1:-1),te=b>=0?F<0:F>le;ne=Math.max(F,0),U==="finished"&&q===null&&(ne=le);let Q=ne,ce=B;if(s){const Te=Math.min(ne,le)/z;let Ge=Math.floor(Te),Ye=Te%1;!Ye&&Te>=1&&(Ye=1),Ye===1&&Ge--,Ge=Math.min(Ge,s+1),!!(Ge%2)&&(a==="reverse"?(Ye=1-Ye,o&&(Ye-=o/z)):a==="mirror"&&(ce=W)),Q=qh(0,1,Ye)*z}const pe=te?{done:!1,value:r[0]}:ce.next(Q);j&&(pe.value=j(pe.value));let{done:ge}=pe;!te&&$!==null&&(ge=b>=0?ne>=le:ne<=0);const _e=q===null&&(U==="finished"||U==="running"&&ge);return p&&p(pe.value),_e&&X(),pe},G=()=>{T&&T.stop(),T=void 0},he=()=>{U="idle",G(),x(),E(),ie=ve=null},X=()=>{U="finished",h&&h(),G(),x()},fe=()=>{if(_)return;T||(T=t(ee));const se=T.now();c&&c(),q!==null?ie=se-q:(!ie||U==="finished")&&(ie=se),U==="finished"&&E(),ve=ie,q=null,U="running",T.start()};n&&fe();const ue={then(se,F){return k.then(se,F)},get time(){return Zd(ne)},set time(se){se=Gf(se),ne=se,q!==null||!T||b===0?q=se:ie=T.now()-se/b},get duration(){const se=B.calculatedDuration===null?GS(B):B.calculatedDuration;return Zd(se)},get speed(){return b},set speed(se){se===b||!T||(b=se,ue.time=Zd(ne))},get state(){return U},play:fe,pause:()=>{U="paused",q=ne},stop:()=>{_=!0,U!=="idle"&&(U="idle",u&&u(),he())},cancel:()=>{ve!==null&&ee(ve),he()},complete:()=>{U="finished"},sample:se=>(ie=0,ee(se))};return ue}function uU(n){let e;return()=>(e===void 0&&(e=n()),e)}const dU=uU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Z0=10,fU=2e4,pU=(n,e)=>e.type==="spring"||n==="backgroundColor"||!Kk(e.ease);function mU(n,e,{onUpdate:t,onComplete:r,...i}){if(!(dU()&&hU.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(L=>{a=L})};h();let{keyframes:p,duration:m=300,ease:b,times:_}=i;if(pU(e,i)){const L=Yy({...i,repeat:0,delay:0});let j={done:!1,value:p[0]};const B=[];let W=0;for(;!j.done&&W<fU;)j=L.sample(W),B.push(j.value),W+=Z0;_=void 0,p=B,m=W-Z0,b="linear"}const x=A9(n.owner.current,e,p,{...i,duration:m,ease:b,times:_}),k=()=>{u=!1,x.cancel()},E=()=>{u=!0,Qr.update(k),a(),h()};return x.onfinish=()=>{u||(n.set(C9(p,i)),r&&r(),E())},{then(L,j){return c.then(L,j)},attachTimeline(L){return x.timeline=L,x.onfinish=null,Gi},get time(){return Zd(x.currentTime||0)},set time(L){x.currentTime=Gf(L)},get speed(){return x.playbackRate},set speed(L){x.playbackRate=L},get duration(){return Zd(m)},play:()=>{o||(x.play(),eh(k))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:L}=x;if(L){const j=Yy({...i,autoplay:!1});n.setWithVelocity(j.sample(L-Z0).value,j.sample(L).value,Z0)}E()},complete:()=>{u||x.finish()},cancel:E}}function gU({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Gi,pause:Gi,stop:Gi,then:s=>(s(),Promise.resolve()),cancel:Gi,complete:Gi});return e?Yy({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const vU={type:"spring",stiffness:500,damping:25,restSpeed:10},yU=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),bU={type:"keyframes",duration:.8},wU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},xU=(n,{keyframes:e})=>e.length>2?bU:up.has(n)?n.startsWith("scale")?yU(e[1]):vU:wU,l2=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vh.test(e)||e==="0")&&!e.startsWith("url(")),_U=new Set(["brightness","contrast","saturate","opacity"]);function SU(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(S1)||[];if(!r)return n;const i=t.replace(r,"");let s=_U.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const AU=/([a-z-]*)\(.*?\)/g,c2={...Vh,getAnimatableNone:n=>{const e=n.match(AU);return e?e.map(SU).join(" "):n}},CU={...Rk,color:Ea,backgroundColor:Ea,outlineColor:Ea,fill:Ea,stroke:Ea,borderColor:Ea,borderTopColor:Ea,borderRightColor:Ea,borderBottomColor:Ea,borderLeftColor:Ea,filter:c2,WebkitFilter:c2},Mx=n=>CU[n];function bP(n,e){let t=Mx(n);return t!==c2&&(t=Vh),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const wP=n=>/^0[^.\s]+$/.test(n);function EU(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||wP(n)}function kU(n,e,t,r){const i=l2(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let a;const c=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),EU(s[u])&&c.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];s[h]=bP(e,a)}return s}function PU({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Ox(n,e){return n[e]||n.default||n}const NU={skipAnimations:!1},Dx=(n,e,t,r={})=>i=>{const s=Ox(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Gf(o);const c=kU(e,n,t,s),u=c[0],h=c[c.length-1],p=l2(n,u),m=l2(n,h);let b={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:_=>{e.set(_),s.onUpdate&&s.onUpdate(_)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(PU(s)||(b={...b,...xU(n,b)}),b.duration&&(b.duration=Gf(b.duration)),b.repeatDelay&&(b.repeatDelay=Gf(b.repeatDelay)),!p||!m||S9.current||s.type===!1||NU.skipAnimations)return gU(b);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=mU(e,n,b);if(_)return _}return Yy(b)};function Ky(n){return!!(il(n)&&n.add)}const xP=n=>/^\-?\d*\.?\d+$/.test(n);function Fx(n,e){n.indexOf(e)===-1&&n.push(e)}function Bx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class zx{constructor(){this.subscriptions=[]}add(e){return Fx(this.subscriptions,e),()=>Bx(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const TU=n=>!isNaN(parseFloat(n));class LU{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Zo;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Qr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Qr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=TU(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zx);const r=this.events[e].add(t);return e==="change"?()=>{r(),Qr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?gP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zm(n,e){return new LU(n,e)}const _P=n=>e=>e.test(n),RU={test:n=>n==="auto",parse:n=>n},SP=[dp,hn,Ju,Rh,Bz,Fz,RU],Ug=n=>SP.find(_P(n)),IU=[...SP,Ea,Vh],jU=n=>IU.find(_P(n));function MU(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,zm(t))}function OU(n,e){const t=C1(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=Qz(s[o]);MU(n,o,a)}}function DU(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const c=s[a],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=t[c])!==null&&r!==void 0?r:n.readValue(c))!==null&&i!==void 0?i:e[c]),h!=null&&(typeof h=="string"&&(xP(h)||wP(h))?h=parseFloat(h):!jU(h)&&Vh.test(u)&&(h=bP(c,u)),n.addValue(c,zm(h,{owner:n})),t[c]===void 0&&(t[c]=h),h!==null&&n.setBaseTarget(c,h))}}function FU(n,e){return e?(e[n]||e.default||e).from:void 0}function BU(n,e,t){const r={};for(const i in n){const s=FU(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function zU({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function UU(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function AP(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const c=n.getValue("willChange");r&&(s=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const p in a){const m=n.getValue(p),b=a[p];if(!m||b===void 0||h&&zU(h,p))continue;const _={delay:t,elapsed:0,...Ox(s||{},p)};if(window.HandoffAppearAnimations){const E=n.getProps()[Ck];if(E){const T=window.HandoffAppearAnimations(E,p,m,Qr);T!==null&&(_.elapsed=T,_.isHandoff=!0)}}let x=!_.isHandoff&&!UU(m,b);if(_.type==="spring"&&(m.getVelocity()||_.velocity)&&(x=!1),m.animation&&(x=!1),x)continue;m.start(Dx(p,m,b,n.shouldReduceMotion&&up.has(p)?{type:!1}:_));const k=m.animation;Ky(c)&&(c.add(p),k.then(()=>c.remove(p))),u.push(k)}return o&&Promise.all(u).then(()=>{o&&OU(n,o)}),u}function u2(n,e,t={}){const r=C1(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(AP(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:p}=i;return $U(n,e,u+c,h,p,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function $U(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(n.variantChildren).sort(qU).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(u2(u,e,{...s,delay:t+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function qU(n,e){return n.sortNodePosition(e)}function VU(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>u2(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=u2(n,e,t);else{const i=typeof e=="function"?C1(n,e,t.custom):e;r=Promise.all(AP(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const WU=[...xx].reverse(),HU=xx.length;function GU(n){return e=>Promise.all(e.map(({animation:t,options:r})=>VU(n,t,r)))}function YU(n){let e=GU(n);const t=XU();let r=!0;const i=(c,u)=>{const h=C1(n,u);if(h){const{transition:p,transitionEnd:m,...b}=h;c={...c,...b,...m}}return c};function s(c){e=c(n)}function o(c,u){const h=n.getProps(),p=n.getVariantContext(!0)||{},m=[],b=new Set;let _={},x=1/0;for(let E=0;E<HU;E++){const T=WU[E],L=t[T],j=h[T]!==void 0?h[T]:p[T],B=Cv(j),W=T===u?L.isActive:null;W===!1&&(x=E);let U=j===p[T]&&j!==h[T]&&B;if(U&&r&&n.manuallyAnimateOnMount&&(U=!1),L.protectedKeys={..._},!L.isActive&&W===null||!j&&!L.prevProp||x1(j)||typeof j=="boolean")continue;let ie=KU(L.prevProp,j)||T===u&&L.isActive&&!U&&B||E>x&&B,ve=!1;const $=Array.isArray(j)?j:[j];let z=$.reduce(i,{});W===!1&&(z={});const{prevResolvedValues:le={}}=L,ne={...le,...z},ee=G=>{ie=!0,b.has(G)&&(ve=!0,b.delete(G)),L.needsAnimating[G]=!0};for(const G in ne){const he=z[G],X=le[G];if(_.hasOwnProperty(G))continue;let fe=!1;Wy(he)&&Wy(X)?fe=!Gk(he,X):fe=he!==X,fe?he!==void 0?ee(G):b.add(G):he!==void 0&&b.has(G)?ee(G):L.protectedKeys[G]=!0}L.prevProp=j,L.prevResolvedValues=z,L.isActive&&(_={..._,...z}),r&&n.blockInitialAnimation&&(ie=!1),ie&&(!U||ve)&&m.push(...$.map(G=>({animation:G,options:{type:T,...c}})))}if(b.size){const E={};b.forEach(T=>{const L=n.getBaseTarget(T);L!==void 0&&(E[T]=L)}),m.push({animation:E})}let k=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(m):Promise.resolve()}function a(c,u,h){var p;if(t[c].isActive===u)return Promise.resolve();(p=n.variantChildren)===null||p===void 0||p.forEach(b=>{var _;return(_=b.animationState)===null||_===void 0?void 0:_.setActive(c,u)}),t[c].isActive=u;const m=o(h,c);for(const b in t)t[b].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function KU(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Gk(e,n):!1}function Rf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XU(){return{animate:Rf(!0),whileInView:Rf(),whileHover:Rf(),whileTap:Rf(),whileDrag:Rf(),whileFocus:Rf(),exit:Rf()}}class ZU extends Qh{constructor(e){super(e),e.animationState||(e.animationState=YU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),x1(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let JU=0;class QU extends Qh{constructor(){super(...arguments),this.id=JU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const e$={animation:{Feature:ZU},exit:{Feature:QU}},YS=(n,e)=>Math.abs(n-e);function t$(n,e){const t=YS(n.x,e.x),r=YS(n.y,e.y);return Math.sqrt(t**2+r**2)}class CP{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=aw(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,b=t$(p.offset,{x:0,y:0})>=3;if(!m&&!b)return;const{point:_}=p,{timestamp:x}=Zo;this.history.push({..._,timestamp:x});const{onStart:k,onMove:E}=this.handlers;m||(k&&k(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=ow(m,this.transformPagePoint),Qr.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=aw(p.type==="pointercancel"?this.lastMoveEventInfo:ow(m,this.transformPagePoint),this.history);this.startEvent&&b&&b(p,k),_&&_(p,k)},!$k(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=A1(e),a=ow(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Zo;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,aw(a,this.history)),this.removeListeners=zh(Xd(this.contextWindow,"pointermove",this.handlePointerMove),Xd(this.contextWindow,"pointerup",this.handlePointerUp),Xd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eh(this.updatePoint)}}function ow(n,e){return e?{point:e(n.point)}:n}function KS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function aw({point:n},e){return{point:n,delta:KS(n,EP(e)),offset:KS(n,n$(e)),velocity:r$(e,.1)}}function n$(n){return n[0]}function EP(n){return n[n.length-1]}function r$(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=EP(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Gf(e)));)t--;if(!r)return{x:0,y:0};const s=Zd(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function zl(n){return n.max-n.min}function d2(n,e=0,t=.01){return Math.abs(n-e)<=t}function XS(n,e,t,r=.5){n.origin=r,n.originPoint=xi(e.min,e.max,n.origin),n.scale=zl(t)/zl(e),(d2(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=xi(t.min,t.max,n.origin)-n.originPoint,(d2(n.translate)||isNaN(n.translate))&&(n.translate=0)}function dv(n,e,t,r){XS(n.x,e.x,t.x,r?r.originX:void 0),XS(n.y,e.y,t.y,r?r.originY:void 0)}function ZS(n,e,t){n.min=t.min+e.min,n.max=n.min+zl(e)}function i$(n,e,t){ZS(n.x,e.x,t.x),ZS(n.y,e.y,t.y)}function JS(n,e,t){n.min=e.min-t.min,n.max=n.min+zl(e)}function hv(n,e,t){JS(n.x,e.x,t.x),JS(n.y,e.y,t.y)}function s$(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?xi(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?xi(t,n,r.max):Math.min(n,t)),n}function QS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function o$(n,{top:e,left:t,bottom:r,right:i}){return{x:QS(n.x,t,i),y:QS(n.y,e,r)}}function eA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function a$(n,e){return{x:eA(n.x,e.x),y:eA(n.y,e.y)}}function l$(n,e){let t=.5;const r=zl(n),i=zl(e);return i>r?t=kv(e.min,e.max-r,n.min):r>i&&(t=kv(n.min,n.max-i,e.min)),qh(0,1,t)}function c$(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const h2=.35;function u$(n=h2){return n===!1?n=0:n===!0&&(n=h2),{x:tA(n,"left","right"),y:tA(n,"top","bottom")}}function tA(n,e,t){return{min:nA(n,e),max:nA(n,t)}}function nA(n,e){return typeof n=="number"?n:n[e]||0}const rA=()=>({translate:0,scale:1,origin:0,originPoint:0}),_m=()=>({x:rA(),y:rA()}),iA=()=>({min:0,max:0}),fs=()=>({x:iA(),y:iA()});function bc(n){return[n("x"),n("y")]}function kP({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function d$({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function h$(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function lw(n){return n===void 0||n===1}function f2({scale:n,scaleX:e,scaleY:t}){return!lw(n)||!lw(e)||!lw(t)}function Mf(n){return f2(n)||PP(n)||n.z||n.rotate||n.rotateX||n.rotateY}function PP(n){return sA(n.x)||sA(n.y)}function sA(n){return n&&n!=="0%"}function Xy(n,e,t){const r=n-t,i=e*r;return t+i}function oA(n,e,t,r,i){return i!==void 0&&(n=Xy(n,i,r)),Xy(n,t,r)+e}function p2(n,e=0,t=1,r,i){n.min=oA(n.min,e,t,r,i),n.max=oA(n.max,e,t,r,i)}function NP(n,{x:e,y:t}){p2(n.x,e.translate,e.scale,e.originPoint),p2(n.y,t.translate,t.scale,t.originPoint)}function f$(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Sm(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,NP(n,o)),r&&Mf(s.latestValues)&&Sm(n,s.latestValues))}e.x=aA(e.x),e.y=aA(e.y)}function aA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function jh(n,e){n.min=n.min+e,n.max=n.max+e}function lA(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=xi(n.min,n.max,s);p2(n,e[t],e[r],o,e.scale)}const p$=["x","scaleX","originX"],m$=["y","scaleY","originY"];function Sm(n,e){lA(n.x,e,p$),lA(n.y,e,m$)}function TP(n,e){return kP(h$(n.getBoundingClientRect(),e))}function g$(n,e,t){const r=TP(n,t),{scroll:i}=e;return i&&(jh(r.x,i.offset.x),jh(r.y,i.offset.y)),r}const LP=({current:n})=>n?n.ownerDocument.defaultView:null,v$=new WeakMap;class y${constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fs(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(A1(h,"page").point)},s=(h,p)=>{const{drag:m,dragPropagation:b,onDragStart:_}=this.getProps();if(m&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Vk(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bc(k=>{let E=this.getAxisMotionValue(k).get()||0;if(Ju.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const L=T.layout.layoutBox[k];L&&(E=zl(L)*(parseFloat(E)/100))}}this.originPoint[k]=E}),_&&Qr.update(()=>_(h,p),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,p)=>{const{dragPropagation:m,dragDirectionLock:b,onDirectionLock:_,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:k}=p;if(b&&this.currentDirection===null){this.currentDirection=b$(k),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",p.point,k),this.updateAxis("y",p.point,k),this.visualElement.render(),x&&x(h,p)},a=(h,p)=>this.stop(h,p),c=()=>bc(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new CP(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:LP(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Qr.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!J0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=s$(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&wm(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=o$(i.layoutBox,t):this.constraints=!1,this.elastic=u$(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&bc(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=c$(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!wm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=g$(r,i.root,this.visualElement.getTransformPagePoint());let o=a$(i.layout.layoutBox,s);if(t){const a=t(d$(o));this.hasMutatedConstraints=!!a,a&&(o=kP(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=bc(h=>{if(!J0(h,t,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Dx(e,r,0,t))}stopAnimation(){bc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){bc(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){bc(t=>{const{drag:r}=this.getProps();if(!J0(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-xi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!wm(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bc(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();i[o]=l$({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bc(o=>{if(!J0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(xi(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;v$.set(this.visualElement,this);const e=this.visualElement.current,t=Xd(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();wm(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Yd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(bc(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=h2,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function J0(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function b$(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class w$ extends Qh{constructor(e){super(e),this.removeGroupControls=Gi,this.removeListeners=Gi,this.controls=new y$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gi}unmount(){this.removeGroupControls(),this.removeListeners()}}const cA=n=>(e,t)=>{n&&Qr.update(()=>n(e,t))};class x$ extends Qh{constructor(){super(...arguments),this.removePointerDownListener=Gi}onPointerDown(e){this.session=new CP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cA(e),onStart:cA(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Qr.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Xd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _$(){const n=N.useContext(b1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=N.useId();return N.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Cy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const $g={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(hn.test(n))n=parseFloat(n);else return n;const t=uA(n,e.target.x),r=uA(n,e.target.y);return`${t}% ${r}%`}},S$={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Vh.parse(n);if(i.length>5)return r;const s=Vh.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const u=xi(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class A$ extends vn.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Lz(C$),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Cy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Qr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RP(n){const[e,t]=_$(),r=N.useContext(Sx);return vn.createElement(A$,{...n,layoutGroup:r,switchLayoutGroup:N.useContext(kk),isPresent:e,safeToRemove:t})}const C$={borderRadius:{...$g,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$g,borderTopRightRadius:$g,borderBottomLeftRadius:$g,borderBottomRightRadius:$g,boxShadow:S$},IP=["TopLeft","TopRight","BottomLeft","BottomRight"],E$=IP.length,dA=n=>typeof n=="string"?parseFloat(n):n,hA=n=>typeof n=="number"||hn.test(n);function k$(n,e,t,r,i,s){i?(n.opacity=xi(0,t.opacity!==void 0?t.opacity:1,P$(r)),n.opacityExit=xi(e.opacity!==void 0?e.opacity:1,0,N$(r))):s&&(n.opacity=xi(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<E$;o++){const a=`border${IP[o]}Radius`;let c=fA(e,a),u=fA(t,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||hA(c)===hA(u)?(n[a]=Math.max(xi(dA(c),dA(u),r),0),(Ju.test(u)||Ju.test(c))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=xi(e.rotate||0,t.rotate||0,r))}function fA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const P$=jP(0,.5,nP),N$=jP(.5,.95,Gi);function jP(n,e,t){return r=>r<n?0:r>e?1:t(kv(n,e,r))}function pA(n,e){n.min=e.min,n.max=e.max}function vc(n,e){pA(n.x,e.x),pA(n.y,e.y)}function mA(n,e,t,r,i){return n-=e,n=Xy(n,1/t,r),i!==void 0&&(n=Xy(n,1/i,r)),n}function T$(n,e=0,t=1,r=.5,i,s=n,o=n){if(Ju.test(e)&&(e=parseFloat(e),e=xi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=xi(s.min,s.max,r);n===s&&(a-=e),n.min=mA(n.min,e,t,a,i),n.max=mA(n.max,e,t,a,i)}function gA(n,e,[t,r,i],s,o){T$(n,e[t],e[r],e[i],e.scale,s,o)}const L$=["x","scaleX","originX"],R$=["y","scaleY","originY"];function vA(n,e,t,r){gA(n.x,e,L$,t?t.x:void 0,r?r.x:void 0),gA(n.y,e,R$,t?t.y:void 0,r?r.y:void 0)}function yA(n){return n.translate===0&&n.scale===1}function MP(n){return yA(n.x)&&yA(n.y)}function I$(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function OP(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function bA(n){return zl(n.x)/zl(n.y)}class j${constructor(){this.members=[]}add(e){Fx(this.members,e),e.scheduleRender()}remove(e){if(Bx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wA(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:u,rotateY:h}=t;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const M$=(n,e)=>n.depth-e.depth;class O${constructor(){this.children=[],this.isDirty=!1}add(e){Fx(this.children,e),this.isDirty=!0}remove(e){Bx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(M$),this.isDirty=!1,this.children.forEach(e)}}function D$(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(eh(r),n(s-e))};return Qr.read(r,!0),()=>eh(r)}function F$(n){window.MotionDebug&&window.MotionDebug.record(n)}function B$(n){return n instanceof SVGElement&&n.tagName!=="svg"}function z$(n,e,t){const r=il(n)?n:zm(n);return r.start(Dx("",r,e,t)),r.animation}const xA=["","X","Y","Z"],U$={visibility:"hidden"},_A=1e3;let $$=0;const Of={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function DP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=$$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Of.totalNodes=Of.resolvedTargetDeltas=Of.recalculatedProjection=0,this.nodes.forEach(W$),this.nodes.forEach(X$),this.nodes.forEach(Z$),this.nodes.forEach(H$),F$(Of)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new O$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=B$(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),n){let p;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=D$(m,250),Cy.hasAnimatedSinceResize&&(Cy.hasAnimatedSinceResize=!1,this.nodes.forEach(AA))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:b,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||nq,{onLayoutAnimationStart:k,onLayoutAnimationComplete:E}=h.getProps(),T=!this.targetLayout||!OP(this.targetLayout,_)||b,L=!m&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||m&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,L);const j={...Ox(x,"layout"),onPlay:k,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else m||AA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,eh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SA);return}this.isUpdating||this.nodes.forEach(Y$),this.isUpdating=!1,this.nodes.forEach(K$),this.nodes.forEach(q$),this.nodes.forEach(V$),this.clearAllSnapshots();const a=performance.now();Zo.delta=qh(0,1e3/60,a-Zo.timestamp),Zo.timestamp=a,Zo.isProcessing=!0,Jb.update.process(Zo),Jb.preRender.process(Zo),Jb.render.process(Zo),Zo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(G$),this.sharedNodes.forEach(Q$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!MP(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Mf(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),rq(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return fs();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(jh(a.x,c.offset.x),jh(a.y,c.offset.y)),a}removeElementScroll(o){const a=fs();vc(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:p}=u;if(u!==this.root&&h&&p.layoutScroll){if(h.isRoot){vc(a,o);const{scroll:m}=this.root;m&&(jh(a.x,-m.offset.x),jh(a.y,-m.offset.y))}jh(a.x,h.offset.x),jh(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=fs();vc(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Sm(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Mf(h.latestValues)&&Sm(c,h.latestValues)}return Mf(this.latestValues)&&Sm(c,this.latestValues),c}removeTransform(o){const a=fs();vc(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Mf(u.latestValues))continue;f2(u.latestValues)&&u.updateSnapshot();const h=fs(),p=u.measurePageBox();vc(h,p),vA(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Mf(this.latestValues)&&vA(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Zo.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),hv(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),vc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fs(),this.targetWithTransforms=fs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):vc(this.target,this.layout.layoutBox),NP(this.target,this.targetDelta)):vc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fs(),this.relativeTargetOrigin=fs(),hv(this.relativeTargetOrigin,this.target,b.target),vc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Of.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||f2(this.parent.latestValues)||PP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Zo.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;vc(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,b=this.treeScale.y;f$(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=_m(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=_m(),this.projectionDeltaWithTransform=_m());const x=this.projectionTransform;dv(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=wA(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==m||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Of.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},p=_m();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=fs(),b=c?c.source:void 0,_=this.layout?this.layout.source:void 0,x=b!==_,k=this.getStack(),E=!k||k.members.length<=1,T=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(tq));this.animationProgress=0;let L;this.mixTargetDelta=j=>{const B=j/1e3;CA(p.x,o.x,B),CA(p.y,o.y,B),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hv(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eq(this.relativeTarget,this.relativeTargetOrigin,m,B),L&&I$(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=fs()),vc(L,this.relativeTarget)),x&&(this.animationValues=h,k$(h,u,this.latestValues,B,T,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(eh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qr.update(()=>{Cy.hasAnimatedSinceResize=!0,this.currentAnimation=z$(0,_A,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_A),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&FP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||fs();const p=zl(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const m=zl(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}vc(a,c),Sm(a,h),dv(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new j$),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<xA.length;h++){const p="rotate"+xA[h];c[p]&&(u[p]=c[p],o.setStaticValue(p,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return U$;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ay(o?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Ay(o?.pointerEvents)||""),this.hasProjected&&!Mf(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=wA(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:b,y:_}=this.projectionDelta;u.transformOrigin=`${b.origin*100}% ${_.origin*100}% 0`,p.animationValues?u.opacity=p===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in qy){if(m[x]===void 0)continue;const{correct:k,applyTo:E}=qy[x],T=u.transform==="none"?m[x]:k(m[x],p);if(E){const L=E.length;for(let j=0;j<L;j++)u[E[j]]=T}else u[x]=T}return this.options.layoutId&&(u.pointerEvents=p===this?Ay(o?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(SA),this.root.sharedNodes.clear()}}}function q$(n){n.updateLayout()}function V$(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?bc(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],b=zl(m);m.min=r[p].min,m.max=m.min+b}):FP(s,t.layoutBox,r)&&bc(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],b=zl(r[p]);m.max=m.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+b)});const a=_m();dv(a,r,t.layoutBox);const c=_m();o?dv(c,n.applyTransform(i,!0),t.measuredBox):dv(c,r,t.layoutBox);const u=!MP(a);let h=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:b}=p;if(m&&b){const _=fs();hv(_,t.layoutBox,m.layoutBox);const x=fs();hv(x,r,b.layoutBox),OP(_,x)||(h=!0),p.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=_,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function W$(n){Of.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function H$(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function G$(n){n.clearSnapshot()}function SA(n){n.clearMeasurements()}function Y$(n){n.isLayoutDirty=!1}function K$(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function AA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function X$(n){n.resolveTargetDelta()}function Z$(n){n.calcProjection()}function J$(n){n.resetRotation()}function Q$(n){n.removeLeadSnapshot()}function CA(n,e,t){n.translate=xi(e.translate,0,t),n.scale=xi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function EA(n,e,t,r){n.min=xi(e.min,t.min,r),n.max=xi(e.max,t.max,r)}function eq(n,e,t,r){EA(n.x,e.x,t.x,r),EA(n.y,e.y,t.y,r)}function tq(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const nq={duration:.45,ease:[.4,0,.1,1]},kA=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),PA=kA("applewebkit/")&&!kA("chrome/")?Math.round:Gi;function NA(n){n.min=PA(n.min),n.max=PA(n.max)}function rq(n){NA(n.x),NA(n.y)}function FP(n,e,t){return n==="position"||n==="preserve-aspect"&&!d2(bA(e),bA(t),.2)}const iq=DP({attachResizeListener:(n,e)=>Yd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cw={current:void 0},BP=DP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!cw.current){const n=new iq({});n.mount(window),n.setOptions({layoutScroll:!0}),cw.current=n}return cw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),sq={pan:{Feature:x$},drag:{Feature:w$,ProjectionNode:BP,MeasureLayout:RP}},oq=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aq(n){const e=oq.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function m2(n,e,t=1){const[r,i]=aq(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return xP(o)?parseFloat(o):o}else return i2(i)?m2(i,e,t+1):i}function lq(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!i2(s))return;const o=m2(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!i2(s))continue;const o=m2(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const cq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zP=n=>cq.has(n),uq=n=>Object.keys(n).some(zP),TA=n=>n===dp||n===hn,LA=(n,e)=>parseFloat(n.split(", ")[e]),RA=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return LA(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?LA(s[1],n):0}},dq=new Set(["x","y","z"]),hq=Vv.filter(n=>!dq.has(n));function fq(n){const e=[];return hq.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Um={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:RA(4,13),y:RA(5,14)};Um.translateX=Um.x;Um.translateY=Um.y;const pq=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=Um[u](r,s)}),e.render();const c=e.measureViewportBox();return t.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),n[u]=Um[u](c,s)}),n},mq=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(zP);let s=[],o=!1;const a=[];if(i.forEach(c=>{const u=n.getValue(c);if(!n.hasValue(c))return;let h=t[c],p=Ug(h);const m=e[c];let b;if(Wy(m)){const _=m.length,x=m[0]===null?1:0;h=m[x],p=Ug(h);for(let k=x;k<_&&m[k]!==null;k++)b?Lx(Ug(m[k])===b):b=Ug(m[k])}else b=Ug(m);if(p!==b)if(TA(p)&&TA(b)){const _=u.get();typeof _=="string"&&u.set(parseFloat(_)),typeof m=="string"?e[c]=parseFloat(m):Array.isArray(m)&&b===hn&&(e[c]=m.map(parseFloat))}else p?.transform&&b?.transform&&(h===0||m===0)?h===0?u.set(b.transform(h)):e[c]=p.transform(m):(o||(s=fq(n),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=pq(e,n,a);return s.length&&s.forEach(([h,p])=>{n.getValue(h).set(p)}),n.render(),w1&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function gq(n,e,t,r){return uq(e)?mq(n,e,t,r):{target:e,transitionEnd:r}}const vq=(n,e,t,r)=>{const i=lq(n,e,r);return e=i.target,r=i.transitionEnd,gq(n,e,t,r)},g2={current:null},UP={current:!1};function yq(){if(UP.current=!0,!!w1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>g2.current=n.matches;n.addListener(e),e()}else g2.current=!1}function bq(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(il(s))n.addValue(i,s),Ky(r)&&r.add(i);else if(il(o))n.addValue(i,zm(s,{owner:n})),Ky(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,zm(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const IA=new WeakMap,$P=Object.keys(Ev),wq=$P.length,jA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],xq=_x.length;class _q{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Qr.render(this.render,!1,!0);const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=_1(t),this.isVariantNode=Ek(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{});for(const p in h){const m=h[p];a[p]!==void 0&&il(m)&&(m.set(a[p],!1),Ky(u)&&u.add(p))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,IA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),UP.current||yq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:g2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){IA.delete(this.current),this.projection&&this.projection.unmount(),eh(this.notifyUpdate),eh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=up.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Qr.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,a;for(let c=0;c<wq;c++){const u=$P[c],{isEnabled:h,Feature:p,ProjectionNode:m,MeasureLayout:b}=Ev[u];m&&(o=m),h(t)&&(!this.features[u]&&p&&(this.features[u]=new p(this)),b&&(a=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:p,layoutScroll:m,layoutRoot:b}=t;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||p&&wm(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:m,layoutRoot:b})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<jA.length;r++){const i=jA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=bq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<xq;r++){const i=_x[r],s=this.props[i];(Cv(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=zm(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=Tx(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!il(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new zx),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class qP extends _q{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=BU(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){DU(this,r,o);const a=vq(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function Sq(n){return window.getComputedStyle(n)}class Aq extends qP{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(up.has(t)){const r=Mx(t);return r&&r.default||0}else{const r=Sq(e),i=(Tk(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return TP(e,t)}build(e,t,r,i){Cx(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Nx(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;il(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){Ok(e,t,r,i)}}class Cq extends qP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(up.has(t)){const r=Mx(t);return r&&r.default||0}return t=Dk.has(t)?t:wx(t),e.getAttribute(t)}measureInstanceViewportBox(){return fs()}scrapeMotionValuesFromProps(e,t){return Bk(e,t)}build(e,t,r,i){kx(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){Fk(e,t,r,i)}mount(e){this.isSVGTag=Px(e.tagName),super.mount(e)}}const Eq=(n,e)=>Ax(n)?new Cq(e,{enableHardwareAcceleration:!1}):new Aq(e,{enableHardwareAcceleration:!0}),kq={layout:{ProjectionNode:BP,MeasureLayout:RP}},Pq={...e$,...w9,...sq,...kq},Ki=Nz((n,e)=>a9(n,e,Pq,Eq));function VP(){const n=N.useRef(!1);return bx(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function Nq(){const n=VP(),[e,t]=N.useState(0),r=N.useCallback(()=>{n.current&&t(e+1)},[e]);return[N.useCallback(()=>Qr.postRender(r),[r]),e]}class Tq extends N.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Lq({children:n,isPresent:e}){const t=N.useId(),r=N.useRef(null),i=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:c}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),N.createElement(Tq,{isPresent:e,childRef:r,sizeRef:i},N.cloneElement(n,{ref:r}))}const uw=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=zk(Rq),c=N.useId(),u=N.useMemo(()=>({id:c,initial:e,isPresent:t,custom:i,onExitComplete:h=>{a.set(h,!0);for(const p of a.values())if(!p)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[t]);return N.useMemo(()=>{a.forEach((h,p)=>a.set(p,!1))},[t]),N.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),o==="popLayout"&&(n=N.createElement(Lq,{isPresent:t},n)),N.createElement(b1.Provider,{value:u},n)};function Rq(){return new Map}function Iq(n){return N.useEffect(()=>()=>n(),[])}const Df=n=>n.key||"";function jq(n,e){n.forEach(t=>{const r=Df(t);e.set(r,t)})}function Mq(n){const e=[];return N.Children.forEach(n,t=>{N.isValidElement(t)&&e.push(t)}),e}const ka=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=N.useContext(Sx).forceRender||Nq()[0],c=VP(),u=Mq(n);let h=u;const p=N.useRef(new Map).current,m=N.useRef(h),b=N.useRef(new Map).current,_=N.useRef(!0);if(bx(()=>{_.current=!1,jq(u,b),m.current=h}),Iq(()=>{_.current=!0,b.clear(),p.clear()}),_.current)return N.createElement(N.Fragment,null,h.map(T=>N.createElement(uw,{key:Df(T),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},T)));h=[...h];const x=m.current.map(Df),k=u.map(Df),E=x.length;for(let T=0;T<E;T++){const L=x[T];k.indexOf(L)===-1&&!p.has(L)&&p.set(L,void 0)}return o==="wait"&&p.size&&(h=[]),p.forEach((T,L)=>{if(k.indexOf(L)!==-1)return;const j=b.get(L);if(!j)return;const B=x.indexOf(L);let W=T;if(!W){const U=()=>{p.delete(L);const q=Array.from(b.keys()).filter(ie=>!k.includes(ie));if(q.forEach(ie=>b.delete(ie)),m.current=u.filter(ie=>{const ve=Df(ie);return ve===L||q.includes(ve)}),!p.size){if(c.current===!1)return;a(),r&&r()}};W=N.createElement(uw,{key:Df(j),isPresent:!1,onExitComplete:U,custom:e,presenceAffectsLayout:s,mode:o},j),p.set(L,W)}h.splice(B,0,W)}),h=h.map(T=>{const L=T.key;return p.has(L)?T:N.createElement(uw,{key:Df(T),isPresent:!0,presenceAffectsLayout:s,mode:o},T)}),N.createElement(N.Fragment,null,p.size?h:h.map(T=>N.cloneElement(T)))},Oq=({children:n})=>{const{user:e,loadingAuth:t,settings:r}=Po(),i=ru(),[s,o]=N.useState({loading:!0,enabled:!1,message:""});if(N.useEffect(()=>{t||(async()=>{if(!e){o({loading:!1,enabled:!1,message:""});return}try{const{data:u,error:h}=await rt.from("system_status").select("maintenance_mode_enabled, maintenance_message").eq("id",1).single();if(h){console.error("Erro ao verificar modo de manutenção:",h),o({loading:!1,enabled:!1,message:""});return}o({loading:!1,enabled:u.maintenance_mode_enabled,message:u.maintenance_message})}catch{o({loading:!1,enabled:!1,message:""})}})()},[t,e]),t||s.loading)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background dark:bg-background",children:y.jsx(Ki.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-customPurple dark:border-customGreen border-t-transparent rounded-full"})});const a=r?.role==="ADMIN";return s.enabled&&!a?y.jsx(wv,{to:"/manutencao",state:{message:s.message},replace:!0}):e?n:y.jsx(wv,{to:"/login",state:{from:i},replace:!0})};var Dq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fq=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tn=(n,e)=>{const t=N.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...c},u)=>N.createElement("svg",{ref:u,...Dq,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${Fq(n)}`,...c},[...e.map(([h,p])=>N.createElement(h,p)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},Bq=tn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zq=tn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),WP=tn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),HP=tn("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Uq=tn("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]),GP=tn("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),MA=tn("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),Pv=tn("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),fv=tn("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),YP=tn("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),$q=tn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),KP=tn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ux=tn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),XP=tn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qq=tn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ZP=tn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Vq=tn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),JP=tn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Wh=tn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),QP=tn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Wq=tn("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),Hq=tn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),$m=tn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),$x=tn("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),eN=tn("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Gq=tn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),E1=tn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Yq=tn("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Zf=tn("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Kq=tn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),tN=tn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),nN=tn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Q0=tn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Pm=tn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Xq=tn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),rN=tn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),qx=tn("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),Kd=tn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Zq=tn("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),OA=tn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Jq=tn("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),iN=tn("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),Ey=tn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Qq=tn("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),eV=tn("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Vx=tn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),sN=tn("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]),tV=tn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),oN=tn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),nV=tn("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),Nv=tn("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),rV=tn("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ef=tn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function aN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=aN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function lN(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=aN(n))&&(r&&(r+=" "),r+=e);return r}function iV(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=cN(e))&&(r&&(r+=" "),r+=t);return r}function cN(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=cN(n[r]))&&(t&&(t+=" "),t+=e);return t}var Wx="-";function sV(n){var e=aV(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var c=a.split(Wx);return c[0]===""&&c.length!==1&&c.shift(),uN(c,e)||oV(a)}function o(a,c){var u=t[a]||[];return c&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function uN(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?uN(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(Wx);return e.validators.find(function(o){var a=o.validator;return a(s)})?.classGroupId}}var DA=/^\[(.+)\]$/;function oV(n){if(DA.test(n)){var e=DA.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function aV(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=cV(Object.entries(n.classGroups),t);return i.forEach(function(s){var o=s[0],a=s[1];v2(a,r,o,e)}),r}function v2(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:FA(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(lV(i)){v2(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(o){var a=o[0],c=o[1];v2(c,FA(e,a),t,r)})})}function FA(n,e){var t=n;return e.split(Wx).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function lV(n){return n.isThemeGetter}function cV(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):o});return[r,s]}):n}function uV(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,o){t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):i(o,a)}}}var dN="!";function dV(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],c=0,u=0,h,p=0;p<o.length;p++){var m=o[p];if(c===0){if(m===r&&(t||o.slice(p,p+i)===e)){a.push(o.slice(u,p)),u=p+i;continue}if(m==="/"){h=p;continue}}m==="["?c++:m==="]"&&c--}var b=a.length===0?o:o.substring(u),_=b.startsWith(dN),x=_?b.substring(1):b,k=h&&h>u?h-u:void 0;return{modifiers:a,hasImportantModifier:_,baseClassName:x,maybePostfixModifierPosition:k}}}function hV(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function fV(n){return{cache:uV(n.cacheSize),splitModifiers:dV(n),...sV(n)}}var pV=/\s+/;function mV(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(pV).map(function(o){var a=t(o),c=a.modifiers,u=a.hasImportantModifier,h=a.baseClassName,p=a.maybePostfixModifierPosition,m=r(p?h.substring(0,p):h),b=!!p;if(!m){if(!p)return{isTailwindClass:!1,originalClassName:o};if(m=r(h),!m)return{isTailwindClass:!1,originalClassName:o};b=!1}var _=hV(c).join(":"),x=u?_+dN:_;return{isTailwindClass:!0,modifierId:x,classGroupId:m,originalClassName:o,hasPostfixModifier:b}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,h=a+c;return s.has(h)?!1:(s.add(h),i(c,u).forEach(function(p){return s.add(a+p)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function gV(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,o=a;function a(u){var h=e[0],p=e.slice(1),m=p.reduce(function(b,_){return _(b)},h());return r=fV(m),i=r.cache.get,s=r.cache.set,o=c,c(u)}function c(u){var h=i(u);if(h)return h;var p=mV(u,r);return s(u,p),p}return function(){return o(iV.apply(null,arguments))}}function ri(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var hN=/^\[(?:([a-z-]+):)?(.+)\]$/i,vV=/^\d+\/\d+$/,yV=new Set(["px","full","screen"]),bV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xV=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Yc(n){return qf(n)||yV.has(n)||vV.test(n)||y2(n)}function y2(n){return hp(n,"length",kV)}function _V(n){return hp(n,"size",fN)}function SV(n){return hp(n,"position",fN)}function AV(n){return hp(n,"url",PV)}function ey(n){return hp(n,"number",qf)}function qf(n){return!Number.isNaN(Number(n))}function CV(n){return n.endsWith("%")&&qf(n.slice(0,-1))}function qg(n){return BA(n)||hp(n,"number",BA)}function Zn(n){return hN.test(n)}function Vg(){return!0}function Nh(n){return bV.test(n)}function EV(n){return hp(n,"",NV)}function hp(n,e,t){var r=hN.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function kV(n){return wV.test(n)}function fN(){return!1}function PV(n){return n.startsWith("url(")}function BA(n){return Number.isInteger(Number(n))}function NV(n){return xV.test(n)}function TV(){var n=ri("colors"),e=ri("spacing"),t=ri("blur"),r=ri("brightness"),i=ri("borderColor"),s=ri("borderRadius"),o=ri("borderSpacing"),a=ri("borderWidth"),c=ri("contrast"),u=ri("grayscale"),h=ri("hueRotate"),p=ri("invert"),m=ri("gap"),b=ri("gradientColorStops"),_=ri("gradientColorStopPositions"),x=ri("inset"),k=ri("margin"),E=ri("opacity"),T=ri("padding"),L=ri("saturate"),j=ri("scale"),B=ri("sepia"),W=ri("skew"),U=ri("space"),q=ri("translate"),ie=function(){return["auto","contain","none"]},ve=function(){return["auto","hidden","clip","visible","scroll"]},$=function(){return["auto",Zn,e]},z=function(){return[Zn,e]},le=function(){return["",Yc]},ne=function(){return["auto",qf,Zn]},ee=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},G=function(){return["solid","dashed","dotted","double","none"]},he=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},X=function(){return["start","end","center","between","around","evenly","stretch"]},fe=function(){return["","0",Zn]},ue=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},se=function(){return[qf,ey]},F=function(){return[qf,Zn]};return{cacheSize:500,theme:{colors:[Vg],spacing:[Yc],blur:["none","",Nh,Zn],brightness:se(),borderColor:[n],borderRadius:["none","","full",Nh,Zn],borderSpacing:z(),borderWidth:le(),contrast:se(),grayscale:fe(),hueRotate:F(),invert:fe(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[CV,y2],inset:$(),margin:$(),opacity:se(),padding:z(),saturate:se(),scale:se(),sepia:fe(),skew:F(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Zn]}],container:["container"],columns:[{columns:[Nh]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ee(),[Zn])}],overflow:[{overflow:ve()}],"overflow-x":[{"overflow-x":ve()}],"overflow-y":[{"overflow-y":ve()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qg]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Zn]}],grow:[{grow:fe()}],shrink:[{shrink:fe()}],order:[{order:["first","last","none",qg]}],"grid-cols":[{"grid-cols":[Vg]}],"col-start-end":[{col:["auto",{span:["full",qg]},Zn]}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":[Vg]}],"row-start-end":[{row:["auto",{span:[qg]},Zn]}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Zn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Zn]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal"].concat(X())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(X(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(X(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[U]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[U]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Zn,e]}],"min-w":[{"min-w":["min","max","fit",Zn,Yc]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Nh]},Nh,Zn]}],h:[{h:[Zn,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Zn,Yc]}],"max-h":[{"max-h":[Zn,e,"min","max","fit"]}],"font-size":[{text:["base",Nh,y2]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ey]}],"font-family":[{font:[Vg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Zn]}],"line-clamp":[{"line-clamp":["none",qf,ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zn,Yc]}],"list-image":[{"list-image":["none",Zn]}],"list-style-type":[{list:["none","disc","decimal",Zn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(G(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Yc]}],"underline-offset":[{"underline-offset":["auto",Zn,Yc]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Zn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Zn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ee(),[SV])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_V]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},AV]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[].concat(G(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(G())}],"outline-offset":[{"outline-offset":[Zn,Yc]}],"outline-w":[{outline:[Yc]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Yc]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Nh,EV]}],"shadow-color":[{shadow:[Vg]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":he()}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Nh,Zn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[L]}],sepia:[{sepia:[B]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[L]}],"backdrop-sepia":[{"backdrop-sepia":[B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Zn]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Zn]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Zn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[qg,Zn]}],"translate-x":[{"translate-x":[q]}],"translate-y":[{"translate-y":[q]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Zn]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Zn]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Zn]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Yc,ey]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var LV=gV(TV),ev={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var RV=ev.exports,zA;function IV(){return zA||(zA=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",p=1,m=2,b=4,_=1,x=2,k=1,E=2,T=4,L=8,j=16,B=32,W=64,U=128,q=256,ie=512,ve=30,$="...",z=800,le=16,ne=1,ee=2,G=3,he=1/0,X=9007199254740991,fe=17976931348623157e292,ue=NaN,se=4294967295,F=se-1,te=se>>>1,Q=[["ary",U],["bind",k],["bindKey",E],["curry",L],["curryRight",j],["flip",ie],["partial",B],["partialRight",W],["rearg",q]],ce="[object Arguments]",pe="[object Array]",ge="[object AsyncFunction]",_e="[object Boolean]",Te="[object Date]",Ge="[object DOMException]",Ye="[object Error]",at="[object Function]",ht="[object GeneratorFunction]",Ct="[object Map]",We="[object Number]",we="[object Null]",Mt="[object Object]",Rt="[object Promise]",ut="[object Proxy]",mt="[object RegExp]",gt="[object Set]",bt="[object String]",Ot="[object Symbol]",Qt="[object Undefined]",Xt="[object WeakMap]",un="[object WeakSet]",$e="[object ArrayBuffer]",Vt="[object DataView]",St="[object Float32Array]",Pt="[object Float64Array]",wt="[object Int8Array]",oi="[object Int16Array]",Pn="[object Int32Array]",Zi="[object Uint8Array]",Jn="[object Uint8ClampedArray]",ir="[object Uint16Array]",Ji="[object Uint32Array]",Un=/\b__p \+= '';/g,ea=/\b(__p \+=) '' \+/g,vr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pi=/&(?:amp|lt|gt|quot|#39);/g,Ri=/[&<>"']/g,Sr=RegExp(pi.source),nn=RegExp(Ri.source),qn=/<%-([\s\S]+?)%>/g,Ra=/<%([\s\S]+?)%>/g,ei=/<%=([\s\S]+?)%>/g,zs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lo=/^\w*$/,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,Qi=RegExp(Ii.source),Si=/^\s+/,Ar=/\s/,Cr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ai=/\{\n\/\* \[wrapped with (.+)\] \*/,Ia=/,? & /,ta=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,co=/[()=,{}\[\]\/\s]/,uo=/\\(\\)?/g,mi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Us=/\w*$/,gs=/^[-+]0x[0-9a-f]+$/i,na=/^0b[01]+$/i,ol=/^\[object .+?Constructor\]$/,$l=/^0o[0-7]+$/i,al=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,Ve=/['\n\r\u2028\u2029\\]/g,Ke="\\ud800-\\udfff",tt="\\u0300-\\u036f",Tt="\\ufe20-\\ufe2f",Nn="\\u20d0-\\u20ff",Dr=tt+Tt+Nn,$s="\\u2700-\\u27bf",ja="a-z\\xdf-\\xf6\\xf8-\\xff",ll="\\xac\\xb1\\xd7\\xf7",No="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",au="\\u2000-\\u206f",ho=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ur="A-Z\\xc0-\\xd6\\xd8-\\xde",ld="\\ufe0e\\ufe0f",cd=ll+No+au+ho,cl="['’]",ql="["+Ke+"]",Vl="["+cd+"]",ji="["+Dr+"]",Cc="\\d+",qs="["+$s+"]",Wl="["+ja+"]",lu="[^"+Ke+cd+Cc+$s+ja+Ur+"]",Ec="\\ud83c[\\udffb-\\udfff]",Hl="(?:"+ji+"|"+Ec+")",rh="[^"+Ke+"]",Gl="(?:\\ud83c[\\udde6-\\uddff]){2}",Vn="[\\ud800-\\udbff][\\udc00-\\udfff]",ra="["+Ur+"]",ud="\\u200d",cu="(?:"+Wl+"|"+lu+")",ih="(?:"+ra+"|"+lu+")",ia="(?:"+cl+"(?:d|ll|m|re|s|t|ve))?",Yl="(?:"+cl+"(?:D|LL|M|RE|S|T|VE))?",ul=Hl+"?",Kl="["+ld+"]?",Fr="(?:"+ud+"(?:"+[rh,Gl,Vn].join("|")+")"+Kl+ul+")*",Ma="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Zt=Kl+ul+Fr,kc="(?:"+[qs,Gl,Vn].join("|")+")"+Zt,Oa="(?:"+[rh+ji+"?",ji,Gl,Vn,ql].join("|")+")",Da=RegExp(cl,"g"),dd=RegExp(ji,"g"),Fa=RegExp(Ec+"(?="+Ec+")|"+Oa+Zt,"g"),uu=RegExp([ra+"?"+Wl+"+"+ia+"(?="+[Vl,ra,"$"].join("|")+")",ih+"+"+Yl+"(?="+[Vl,ra+cu,"$"].join("|")+")",ra+"?"+cu+"+"+ia,ra+"+"+Yl,sa,Ma,Cc,kc].join("|"),"g"),du=RegExp("["+ud+Ke+Dr+ld+"]"),hu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sf=-1,Wn={};Wn[St]=Wn[Pt]=Wn[wt]=Wn[oi]=Wn[Pn]=Wn[Zi]=Wn[Jn]=Wn[ir]=Wn[Ji]=!0,Wn[ce]=Wn[pe]=Wn[$e]=Wn[_e]=Wn[Vt]=Wn[Te]=Wn[Ye]=Wn[at]=Wn[Ct]=Wn[We]=Wn[Mt]=Wn[mt]=Wn[gt]=Wn[bt]=Wn[Xt]=!1;var In={};In[ce]=In[pe]=In[$e]=In[Vt]=In[_e]=In[Te]=In[St]=In[Pt]=In[wt]=In[oi]=In[Pn]=In[Ct]=In[We]=In[Mt]=In[mt]=In[gt]=In[bt]=In[Ot]=In[Zi]=In[Jn]=In[ir]=In[Ji]=!0,In[Ye]=In[at]=In[Xt]=!1;var fo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},fu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xl=parseFloat,Nc=parseInt,Tc=typeof Oh=="object"&&Oh&&Oh.Object===Object&&Oh,fd=typeof self=="object"&&self&&self.Object===Object&&self,fr=Tc||fd||Function("return this")(),Vs=e&&!e.nodeType&&e,Ci=Vs&&!0&&n&&!n.nodeType&&n,pd=Ci&&Ci.exports===Vs,po=pd&&Tc.process,Er=function(){try{var Re=Ci&&Ci.require&&Ci.require("util").types;return Re||po&&po.binding&&po.binding("util")}catch{}}(),Lc=Er&&Er.isArrayBuffer,ai=Er&&Er.isDate,dl=Er&&Er.isMap,hl=Er&&Er.isRegExp,Zl=Er&&Er.isSet,pu=Er&&Er.isTypedArray;function gi(Re,Ze,Oe){switch(Oe.length){case 0:return Re.call(Ze);case 1:return Re.call(Ze,Oe[0]);case 2:return Re.call(Ze,Oe[0],Oe[1]);case 3:return Re.call(Ze,Oe[0],Oe[1],Oe[2])}return Re.apply(Ze,Oe)}function mu(Re,Ze,Oe,At){for(var $t=-1,gn=Re==null?0:Re.length;++$t<gn;){var Pr=Re[$t];Ze(At,Pr,Oe(Pr),Re)}return At}function ti(Re,Ze){for(var Oe=-1,At=Re==null?0:Re.length;++Oe<At&&Ze(Re[Oe],Oe,Re)!==!1;);return Re}function Jl(Re,Ze){for(var Oe=Re==null?0:Re.length;Oe--&&Ze(Re[Oe],Oe,Re)!==!1;);return Re}function Rc(Re,Ze){for(var Oe=-1,At=Re==null?0:Re.length;++Oe<At;)if(!Ze(Re[Oe],Oe,Re))return!1;return!0}function oa(Re,Ze){for(var Oe=-1,At=Re==null?0:Re.length,$t=0,gn=[];++Oe<At;){var Pr=Re[Oe];Ze(Pr,Oe,Re)&&(gn[$t++]=Pr)}return gn}function gu(Re,Ze){var Oe=Re==null?0:Re.length;return!!Oe&&ot(Re,Ze,0)>-1}function Ql(Re,Ze,Oe){for(var At=-1,$t=Re==null?0:Re.length;++At<$t;)if(Oe(Ze,Re[At]))return!0;return!1}function Yn(Re,Ze){for(var Oe=-1,At=Re==null?0:Re.length,$t=Array(At);++Oe<At;)$t[Oe]=Ze(Re[Oe],Oe,Re);return $t}function To(Re,Ze){for(var Oe=-1,At=Ze.length,$t=Re.length;++Oe<At;)Re[$t+Oe]=Ze[Oe];return Re}function Ba(Re,Ze,Oe,At){var $t=-1,gn=Re==null?0:Re.length;for(At&&gn&&(Oe=Re[++$t]);++$t<gn;)Oe=Ze(Oe,Re[$t],$t,Re);return Oe}function md(Re,Ze,Oe,At){var $t=Re==null?0:Re.length;for(At&&$t&&(Oe=Re[--$t]);$t--;)Oe=Ze(Oe,Re[$t],$t,Re);return Oe}function P(Re,Ze){for(var Oe=-1,At=Re==null?0:Re.length;++Oe<At;)if(Ze(Re[Oe],Oe,Re))return!0;return!1}var H=rn("length");function ye(Re){return Re.split("")}function Ae(Re){return Re.match(ta)||[]}function Me(Re,Ze,Oe){var At;return Oe(Re,function($t,gn,Pr){if(Ze($t,gn,Pr))return At=gn,!1}),At}function Xe(Re,Ze,Oe,At){for(var $t=Re.length,gn=Oe+(At?1:-1);At?gn--:++gn<$t;)if(Ze(Re[gn],gn,Re))return gn;return-1}function ot(Re,Ze,Oe){return Ze===Ze?vs(Re,Ze,Oe):Xe(Re,Ht,Oe)}function Et(Re,Ze,Oe,At){for(var $t=Oe-1,gn=Re.length;++$t<gn;)if(At(Re[$t],Ze))return $t;return-1}function Ht(Re){return Re!==Re}function pn(Re,Ze){var Oe=Re==null?0:Re.length;return Oe?qr(Re,Ze)/Oe:ue}function rn(Re){return function(Ze){return Ze==null?t:Ze[Re]}}function Tn(Re){return function(Ze){return Re==null?t:Re[Ze]}}function Mr(Re,Ze,Oe,At,$t){return $t(Re,function(gn,Pr,Qn){Oe=At?(At=!1,gn):Ze(Oe,gn,Pr,Qn)}),Oe}function $r(Re,Ze){var Oe=Re.length;for(Re.sort(Ze);Oe--;)Re[Oe]=Re[Oe].value;return Re}function qr(Re,Ze){for(var Oe,At=-1,$t=Re.length;++At<$t;){var gn=Ze(Re[At]);gn!==t&&(Oe=Oe===t?gn:Oe+gn)}return Oe}function Ei(Re,Ze){for(var Oe=-1,At=Array(Re);++Oe<Re;)At[Oe]=Ze(Oe);return At}function ki(Re,Ze){return Yn(Ze,function(Oe){return[Oe,Re[Oe]]})}function Lo(Re){return Re&&Re.slice(0,la(Re)+1).replace(Si,"")}function kr(Re){return function(Ze){return Re(Ze)}}function Ws(Re,Ze){return Yn(Ze,function(Oe){return Re[Oe]})}function Ro(Re,Ze){return Re.has(Ze)}function vu(Re,Ze){for(var Oe=-1,At=Re.length;++Oe<At&&ot(Ze,Re[Oe],0)>-1;);return Oe}function Ic(Re,Ze){for(var Oe=Re.length;Oe--&&ot(Ze,Re[Oe],0)>-1;);return Oe}function jc(Re,Ze){for(var Oe=Re.length,At=0;Oe--;)Re[Oe]===Ze&&++At;return At}var yu=Tn(fo),bu=Tn(fu);function Mc(Re){return"\\"+hd[Re]}function Vr(Re,Ze){return Re==null?t:Re[Ze]}function aa(Re){return du.test(Re)}function wu(Re){return hu.test(Re)}function xu(Re){for(var Ze,Oe=[];!(Ze=Re.next()).done;)Oe.push(Ze.value);return Oe}function ec(Re){var Ze=-1,Oe=Array(Re.size);return Re.forEach(function(At,$t){Oe[++Ze]=[$t,At]}),Oe}function es(Re,Ze){return function(Oe){return Re(Ze(Oe))}}function Hs(Re,Ze){for(var Oe=-1,At=Re.length,$t=0,gn=[];++Oe<At;){var Pr=Re[Oe];(Pr===Ze||Pr===h)&&(Re[Oe]=h,gn[$t++]=Oe)}return gn}function Io(Re){var Ze=-1,Oe=Array(Re.size);return Re.forEach(function(At){Oe[++Ze]=At}),Oe}function oh(Re){var Ze=-1,Oe=Array(Re.size);return Re.forEach(function(At){Oe[++Ze]=[At,At]}),Oe}function vs(Re,Ze,Oe){for(var At=Oe-1,$t=Re.length;++At<$t;)if(Re[At]===Ze)return At;return-1}function _u(Re,Ze,Oe){for(var At=Oe+1;At--;)if(Re[At]===Ze)return At;return At}function za(Re){return aa(Re)?ys(Re):H(Re)}function ts(Re){return aa(Re)?ns(Re):ye(Re)}function la(Re){for(var Ze=Re.length;Ze--&&Ar.test(Re.charAt(Ze)););return Ze}var tc=Tn(Pc);function ys(Re){for(var Ze=Fa.lastIndex=0;Fa.test(Re);)++Ze;return Ze}function ns(Re){return Re.match(Fa)||[]}function nc(Re){return Re.match(uu)||[]}var fl=function Re(Ze){Ze=Ze==null?fr:Gs.defaults(fr.Object(),Ze,Gs.pick(fr,sh));var Oe=Ze.Array,At=Ze.Date,$t=Ze.Error,gn=Ze.Function,Pr=Ze.Math,Qn=Ze.Object,pl=Ze.RegExp,Oc=Ze.String,Pi=Ze.TypeError,rs=Oe.prototype,ml=gn.prototype,bs=Qn.prototype,jo=Ze["__core-js_shared__"],Mo=ml.toString,jn=bs.hasOwnProperty,Mi=0,ws=function(){var f=/[^.]+$/.exec(jo&&jo.keys&&jo.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),sr=bs.toString,lr=Mo.call(Qn),Wr=fr._,li=pl("^"+Mo.call(jn).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mo=pd?Ze.Buffer:t,go=Ze.Symbol,Ua=Ze.Uint8Array,Su=mo?mo.allocUnsafe:t,vo=es(Qn.getPrototypeOf,Qn),Dc=Qn.create,is=bs.propertyIsEnumerable,xs=rs.splice,gd=go?go.isConcatSpreadable:t,Oo=go?go.iterator:t,rc=go?go.toStringTag:t,ic=function(){try{var f=Mu(Qn,"defineProperty");return f({},"",{}),f}catch{}}(),vd=Ze.clearTimeout!==fr.clearTimeout&&Ze.clearTimeout,pr=At&&At.now!==fr.Date.now&&At.now,ah=Ze.setTimeout!==fr.setTimeout&&Ze.setTimeout,gl=Pr.ceil,$a=Pr.floor,Fc=Qn.getOwnPropertySymbols,yd=mo?mo.isBuffer:t,Au=Ze.isFinite,lh=rs.join,Bc=es(Qn.keys,Qn),ci=Pr.max,ss=Pr.min,eg=At.now,bp=Ze.parseInt,bd=Pr.random,Cu=rs.reverse,zc=Mu(Ze,"DataView"),ca=Mu(Ze,"Map"),wd=Mu(Ze,"Promise"),sc=Mu(Ze,"Set"),Eu=Mu(Ze,"WeakMap"),ku=Mu(Qn,"create"),ch=Eu&&new Eu,Pu={},of=Ou(zc),_s=Ou(ca),Do=Ou(wd),Ys=Ou(sc),qa=Ou(Eu),vl=go?go.prototype:t,ui=vl?vl.valueOf:t,Ss=vl?vl.toString:t;function oe(f){if(Ti(f)&&!En(f)&&!(f instanceof yn)){if(f instanceof Oi)return f;if(jn.call(f,"__wrapped__"))return v0(f)}return new Oi(f)}var Nu=function(){function f(){}return function(g){if(!bi(g))return{};if(Dc)return Dc(g);f.prototype=g;var C=new f;return f.prototype=t,C}}();function ua(){}function Oi(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=t}oe.templateSettings={escape:qn,evaluate:Ra,interpolate:ei,variable:"",imports:{_:oe}},oe.prototype=ua.prototype,oe.prototype.constructor=oe,Oi.prototype=Nu(ua.prototype),Oi.prototype.constructor=Oi;function yn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function xd(){var f=new yn(this.__wrapped__);return f.__actions__=xo(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=xo(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=xo(this.__views__),f}function af(){if(this.__filtered__){var f=new yn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function yl(){var f=this.__wrapped__.value(),g=this.__dir__,C=En(f),O=g<0,Y=C?f.length:0,de=fg(0,Y,this.__views__),xe=de.start,Ne=de.end,je=Ne-xe,it=O?Ne:xe-1,st=this.__iteratees__,dt=st.length,kt=0,Gt=ss(je,this.__takeCount__);if(!C||!O&&Y==je&&Gt==je)return Qs(f,this.__actions__);var an=[];e:for(;je--&&kt<Gt;){it+=g;for(var On=-1,ln=f[it];++On<dt;){var Gn=st[On],tr=Gn.iteratee,Il=Gn.type,Sa=tr(ln);if(Il==ee)ln=Sa;else if(!Sa){if(Il==ne)continue e;break e}}an[kt++]=ln}return an}yn.prototype=Nu(ua.prototype),yn.prototype.constructor=yn;function Di(f){var g=-1,C=f==null?0:f.length;for(this.clear();++g<C;){var O=f[g];this.set(O[0],O[1])}}function cr(){this.__data__=ku?ku(null):{},this.size=0}function hr(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}function oc(f){var g=this.__data__;if(ku){var C=g[f];return C===c?t:C}return jn.call(g,f)?g[f]:t}function Fi(f){var g=this.__data__;return ku?g[f]!==t:jn.call(g,f)}function Ks(f,g){var C=this.__data__;return this.size+=this.has(f)?0:1,C[f]=ku&&g===t?c:g,this}Di.prototype.clear=cr,Di.prototype.delete=hr,Di.prototype.get=oc,Di.prototype.has=Fi,Di.prototype.set=Ks;function As(f){var g=-1,C=f==null?0:f.length;for(this.clear();++g<C;){var O=f[g];this.set(O[0],O[1])}}function Tu(){this.__data__=[],this.size=0}function Xs(f){var g=this.__data__,C=Pe(g,f);if(C<0)return!1;var O=g.length-1;return C==O?g.pop():xs.call(g,C,1),--this.size,!0}function uh(f){var g=this.__data__,C=Pe(g,f);return C<0?t:g[C][1]}function wp(f){return Pe(this.__data__,f)>-1}function lf(f,g){var C=this.__data__,O=Pe(C,f);return O<0?(++this.size,C.push([f,g])):C[O][1]=g,this}As.prototype.clear=Tu,As.prototype.delete=Xs,As.prototype.get=uh,As.prototype.has=wp,As.prototype.set=lf;function Cs(f){var g=-1,C=f==null?0:f.length;for(this.clear();++g<C;){var O=f[g];this.set(O[0],O[1])}}function xp(){this.size=0,this.__data__={hash:new Di,map:new(ca||As),string:new Di}}function bl(f){var g=yf(this,f).delete(f);return this.size-=g?1:0,g}function _d(f){return yf(this,f).get(f)}function w(f){return yf(this,f).has(f)}function A(f,g){var C=yf(this,f),O=C.size;return C.set(f,g),this.size+=C.size==O?0:1,this}Cs.prototype.clear=xp,Cs.prototype.delete=bl,Cs.prototype.get=_d,Cs.prototype.has=w,Cs.prototype.set=A;function I(f){var g=-1,C=f==null?0:f.length;for(this.__data__=new Cs;++g<C;)this.add(f[g])}function D(f){return this.__data__.set(f,c),this}function V(f){return this.__data__.has(f)}I.prototype.add=I.prototype.push=D,I.prototype.has=V;function K(f){var g=this.__data__=new As(f);this.size=g.size}function J(){this.__data__=new As,this.size=0}function re(f){var g=this.__data__,C=g.delete(f);return this.size=g.size,C}function ae(f){return this.__data__.get(f)}function me(f){return this.__data__.has(f)}function Ce(f,g){var C=this.__data__;if(C instanceof As){var O=C.__data__;if(!ca||O.length<i-1)return O.push([f,g]),this.size=++C.size,this;C=this.__data__=new Cs(O)}return C.set(f,g),this.size=C.size,this}K.prototype.clear=J,K.prototype.delete=re,K.prototype.get=ae,K.prototype.has=me,K.prototype.set=Ce;function De(f,g){var C=En(f),O=!C&&Tf(f),Y=!C&&!O&&Eh(f),de=!C&&!O&&!Y&&Jp(f),xe=C||O||Y||de,Ne=xe?Ei(f.length,Oc):[],je=Ne.length;for(var it in f)(g||jn.call(f,it))&&!(xe&&(it=="length"||Y&&(it=="offset"||it=="parent")||de&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||Xr(it,je)))&&Ne.push(it);return Ne}function Fe(f){var g=f.length;return g?f[cc(0,g-1)]:t}function Ie(f,g){return Mp(xo(f),zt(g,0,f.length))}function nt(f){return Mp(xo(f))}function He(f,g,C){(C!==t&&!Wc(f[g],C)||C===t&&!(g in f))&&_t(f,g,C)}function Ee(f,g,C){var O=f[g];(!(jn.call(f,g)&&Wc(O,C))||C===t&&!(g in f))&&_t(f,g,C)}function Pe(f,g){for(var C=f.length;C--;)if(Wc(f[C][0],g))return C;return-1}function Qe(f,g,C,O){return Mn(f,function(Y,de,xe){g(O,Y,C(Y),xe)}),O}function Je(f,g){return f&&Cl(g,eo(g),f)}function et(f,g){return f&&Cl(g,Ya(g),f)}function _t(f,g,C){g=="__proto__"&&ic?ic(f,g,{configurable:!0,enumerable:!0,value:C,writable:!0}):f[g]=C}function xt(f,g){for(var C=-1,O=g.length,Y=Oe(O),de=f==null;++C<O;)Y[C]=de?t:Pb(f,g[C]);return Y}function zt(f,g,C){return f===f&&(C!==t&&(f=f<=C?f:C),g!==t&&(f=f>=g?f:g)),f}function yt(f,g,C,O,Y,de){var xe,Ne=g&p,je=g&m,it=g&b;if(C&&(xe=Y?C(f,O,Y,de):C(f)),xe!==t)return xe;if(!bi(f))return f;var st=En(f);if(st){if(xe=wf(f),!Ne)return xo(f,xe)}else{var dt=Ts(f),kt=dt==at||dt==ht;if(Eh(f))return tg(f,Ne);if(dt==Mt||dt==ce||kt&&!Y){if(xe=je||kt?{}:Ls(f),!Ne)return je?ob(f,et(xe,f)):Sp(f,Je(xe,f))}else{if(!In[dt])return Y?f:{};xe=ab(f,dt,Ne)}}de||(de=new K);var Gt=de.get(f);if(Gt)return Gt;de.set(f,xe),n5(f)?f.forEach(function(ln){xe.add(yt(ln,g,C,ln,f,de))}):e5(f)&&f.forEach(function(ln,Gn){xe.set(Gn,yt(ln,g,C,Gn,f,de))});var an=it?je?vf:gf:je?Ya:eo,On=st?t:an(f);return ti(On||f,function(ln,Gn){On&&(Gn=ln,ln=f[Gn]),Ee(xe,Gn,yt(ln,g,C,Gn,f,de))}),xe}function Kn(f){var g=eo(f);return function(C){return Hn(C,f,g)}}function Hn(f,g,C){var O=C.length;if(f==null)return!O;for(f=Qn(f);O--;){var Y=C[O],de=g[Y],xe=f[Y];if(xe===t&&!(Y in f)||!de(xe))return!1}return!0}function Fn(f,g,C){if(typeof f!="function")throw new Pi(o);return Sh(function(){f.apply(t,C)},g)}function dn(f,g,C,O){var Y=-1,de=gu,xe=!0,Ne=f.length,je=[],it=g.length;if(!Ne)return je;C&&(g=Yn(g,kr(C))),O?(de=Ql,xe=!1):g.length>=i&&(de=Ro,xe=!1,g=new I(g));e:for(;++Y<Ne;){var st=f[Y],dt=C==null?st:C(st);if(st=O||st!==0?st:0,xe&&dt===dt){for(var kt=it;kt--;)if(g[kt]===dt)continue e;je.push(st)}else de(g,dt,O)||je.push(st)}return je}var Mn=Va(Nr),ur=Va(Tr,!0);function sn(f,g){var C=!0;return Mn(f,function(O,Y,de){return C=!!g(O,Y,de),C}),C}function yr(f,g,C){for(var O=-1,Y=f.length;++O<Y;){var de=f[O],xe=g(de);if(xe!=null&&(Ne===t?xe===xe&&!Rl(xe):C(xe,Ne)))var Ne=xe,je=de}return je}function Es(f,g,C,O){var Y=f.length;for(C=Ln(C),C<0&&(C=-C>Y?0:Y+C),O=O===t||O>Y?Y:Ln(O),O<0&&(O+=Y),O=C>O?0:i5(O);C<O;)f[C++]=g;return f}function Hr(f,g){var C=[];return Mn(f,function(O,Y,de){g(O,Y,de)&&C.push(O)}),C}function Bn(f,g,C,O,Y){var de=-1,xe=f.length;for(C||(C=Rp),Y||(Y=[]);++de<xe;){var Ne=f[de];g>0&&C(Ne)?g>1?Bn(Ne,g-1,C,O,Y):To(Y,Ne):O||(Y[Y.length]=Ne)}return Y}var Xn=Cp(),Bi=Cp(!0);function Nr(f,g){return f&&Xn(f,g,eo)}function Tr(f,g){return f&&Bi(f,g,eo)}function Gr(f,g){return oa(g,function(C){return Md(f[C])})}function Br(f,g){g=ba(g,f);for(var C=0,O=g.length;f!=null&&C<O;)f=f[Nl(g[C++])];return C&&C==O?f:t}function ks(f,g,C){var O=g(f);return En(f)?O:To(O,C(f))}function br(f){return f==null?f===t?Qt:we:rc&&rc in Qn(f)?Lp(f):mg(f)}function Lr(f,g){return f>g}function di(f,g){return f!=null&&jn.call(f,g)}function yo(f,g){return f!=null&&g in Qn(f)}function ac(f,g,C){return f>=ss(g,C)&&f<ci(g,C)}function da(f,g,C){for(var O=C?Ql:gu,Y=f[0].length,de=f.length,xe=de,Ne=Oe(de),je=1/0,it=[];xe--;){var st=f[xe];xe&&g&&(st=Yn(st,kr(g))),je=ss(st.length,je),Ne[xe]=!C&&(g||Y>=120&&st.length>=120)?new I(xe&&st):t}st=f[0];var dt=-1,kt=Ne[0];e:for(;++dt<Y&&it.length<je;){var Gt=st[dt],an=g?g(Gt):Gt;if(Gt=C||Gt!==0?Gt:0,!(kt?Ro(kt,an):O(it,an,C))){for(xe=de;--xe;){var On=Ne[xe];if(!(On?Ro(On,an):O(f[xe],an,C)))continue e}kt&&kt.push(an),it.push(Gt)}}return it}function or(f,g,C,O){return Nr(f,function(Y,de,xe){g(O,C(Y),de,xe)}),O}function Zs(f,g,C){g=ba(g,f),f=ls(f,g);var O=f==null?f:f[Nl(Ao(g))];return O==null?t:gi(O,f,C)}function Sd(f){return Ti(f)&&br(f)==ce}function cf(f){return Ti(f)&&br(f)==$e}function Fo(f){return Ti(f)&&br(f)==Te}function os(f,g,C,O,Y){return f===g?!0:f==null||g==null||!Ti(f)&&!Ti(g)?f!==f&&g!==g:Uc(f,g,C,O,os,Y)}function Uc(f,g,C,O,Y,de){var xe=En(f),Ne=En(g),je=xe?pe:Ts(f),it=Ne?pe:Ts(g);je=je==ce?Mt:je,it=it==ce?Mt:it;var st=je==Mt,dt=it==Mt,kt=je==it;if(kt&&Eh(f)){if(!Eh(g))return!1;xe=!0,st=!1}if(kt&&!st)return de||(de=new K),xe||Jp(f)?dg(f,g,C,O,Y,de):hg(f,g,je,C,O,Y,de);if(!(C&_)){var Gt=st&&jn.call(f,"__wrapped__"),an=dt&&jn.call(g,"__wrapped__");if(Gt||an){var On=Gt?f.value():f,ln=an?g.value():g;return de||(de=new K),Y(On,ln,C,O,de)}}return kt?(de||(de=new K),c0(f,g,C,O,Y,de)):!1}function Bo(f){return Ti(f)&&Ts(f)==Ct}function ha(f,g,C,O){var Y=C.length,de=Y,xe=!O;if(f==null)return!de;for(f=Qn(f);Y--;){var Ne=C[Y];if(xe&&Ne[2]?Ne[1]!==f[Ne[0]]:!(Ne[0]in f))return!1}for(;++Y<de;){Ne=C[Y];var je=Ne[0],it=f[je],st=Ne[1];if(xe&&Ne[2]){if(it===t&&!(je in f))return!1}else{var dt=new K;if(O)var kt=O(it,st,je,f,g,dt);if(!(kt===t?os(st,it,_|x,O,dt):kt))return!1}}return!0}function lc(f){if(!bi(f)||h0(f))return!1;var g=Md(f)?li:ol;return g.test(Ou(f))}function Lu(f){return Ti(f)&&br(f)==mt}function bo(f){return Ti(f)&&Ts(f)==gt}function Ru(f){return Ti(f)&&L0(f.length)&&!!Wn[br(f)]}function wl(f){return typeof f=="function"?f:f==null?Ka:typeof f=="object"?En(f)?wr(f[0],f[1]):dh(f):m5(f)}function fa(f){if(!qc(f))return Bc(f);var g=[];for(var C in Qn(f))jn.call(f,C)&&C!="constructor"&&g.push(C);return g}function Iu(f){if(!bi(f))return m0(f);var g=qc(f),C=[];for(var O in f)O=="constructor"&&(g||!jn.call(f,O))||C.push(O);return C}function zo(f,g){return f<g}function uf(f,g){var C=-1,O=Ga(f)?Oe(f.length):[];return Mn(f,function(Y,de,xe){O[++C]=g(Y,de,xe)}),O}function dh(f){var g=bf(f);return g.length==1&&g[0][2]?Ip(g[0][0],g[0][1]):function(C){return C===f||ha(C,f,g)}}function wr(f,g){return It(f)&&_f(g)?Ip(Nl(f),g):function(C){var O=Pb(C,f);return O===t&&O===g?Nb(C,f):os(g,O,_|x)}}function Js(f,g,C,O,Y){f!==g&&Xn(g,function(de,xe){if(Y||(Y=new K),bi(de))df(f,g,xe,C,Js,O,Y);else{var Ne=O?O(mc(f,xe),de,xe+"",f,g,Y):t;Ne===t&&(Ne=de),He(f,xe,Ne)}},Ya)}function df(f,g,C,O,Y,de,xe){var Ne=mc(f,C),je=mc(g,C),it=xe.get(je);if(it){He(f,C,it);return}var st=de?de(Ne,je,C+"",f,g,xe):t,dt=st===t;if(dt){var kt=En(je),Gt=!kt&&Eh(je),an=!kt&&!Gt&&Jp(je);st=je,kt||Gt||an?En(Ne)?st=Ne:Ui(Ne)?st=xo(Ne):Gt?(dt=!1,st=tg(je,!0)):an?(dt=!1,st=i0(je,!0)):st=[]:Ig(je)||Tf(je)?(st=Ne,Tf(Ne)?st=s5(Ne):(!bi(Ne)||Md(Ne))&&(st=Ls(je))):dt=!1}dt&&(xe.set(je,st),Y(st,je,O,de,xe),xe.delete(je)),He(f,C,st)}function hh(f,g){var C=f.length;if(C)return g+=g<0?C:0,Xr(g,C)?f[g]:t}function Ad(f,g,C){g.length?g=Yn(g,function(de){return En(de)?function(xe){return Br(xe,de.length===1?de[0]:de)}:de}):g=[Ka];var O=-1;g=Yn(g,kr(en()));var Y=uf(f,function(de,xe,Ne){var je=Yn(g,function(it){return it(de)});return{criteria:je,index:++O,value:de}});return $r(Y,function(de,xe){return sb(de,xe,C)})}function fh(f,g){return pa(f,g,function(C,O){return Nb(f,O)})}function pa(f,g,C){for(var O=-1,Y=g.length,de={};++O<Y;){var xe=g[O],Ne=Br(f,xe);C(Ne,xe)&&_l(de,ba(xe,f),Ne)}return de}function Or(f){return function(g){return Br(g,f)}}function Yr(f,g,C,O){var Y=O?Et:ot,de=-1,xe=g.length,Ne=f;for(f===g&&(g=xo(g)),C&&(Ne=Yn(f,kr(C)));++de<xe;)for(var je=0,it=g[de],st=C?C(it):it;(je=Y(Ne,st,je,O))>-1;)Ne!==f&&xs.call(Ne,je,1),xs.call(f,je,1);return f}function Kr(f,g){for(var C=f?g.length:0,O=C-1;C--;){var Y=g[C];if(C==O||Y!==de){var de=Y;Xr(Y)?xs.call(f,Y,1):dc(f,Y)}}return f}function cc(f,g){return f+$a(bd()*(g-f+1))}function xl(f,g,C,O){for(var Y=-1,de=ci(gl((g-f)/(C||1)),0),xe=Oe(de);de--;)xe[O?de:++Y]=f,f+=C;return xe}function uc(f,g){var C="";if(!f||g<1||g>X)return C;do g%2&&(C+=f),g=$a(g/2),g&&(f+=f);while(g);return C}function Cn(f,g){return xa(jp(f,g,Ka),f+"")}function vi(f){return Fe(Qp(f))}function ph(f,g){var C=Qp(f);return Mp(C,zt(g,0,C.length))}function _l(f,g,C,O){if(!bi(f))return f;g=ba(g,f);for(var Y=-1,de=g.length,xe=de-1,Ne=f;Ne!=null&&++Y<de;){var je=Nl(g[Y]),it=C;if(je==="__proto__"||je==="constructor"||je==="prototype")return f;if(Y!=xe){var st=Ne[je];it=O?O(st,je,Ne):t,it===t&&(it=bi(st)?st:Xr(g[Y+1])?[]:{})}Ee(Ne,je,it),Ne=Ne[je]}return f}var ma=ch?function(f,g){return ch.set(f,g),f}:Ka,ga=ic?function(f,g){return ic(f,"toString",{configurable:!0,enumerable:!1,value:Lb(g),writable:!0})}:Ka;function wo(f){return Mp(Qp(f))}function as(f,g,C){var O=-1,Y=f.length;g<0&&(g=-g>Y?0:Y+g),C=C>Y?Y:C,C<0&&(C+=Y),Y=g>C?0:C-g>>>0,g>>>=0;for(var de=Oe(Y);++O<Y;)de[O]=f[O+g];return de}function mh(f,g){var C;return Mn(f,function(O,Y,de){return C=g(O,Y,de),!C}),!!C}function va(f,g,C){var O=0,Y=f==null?O:f.length;if(typeof g=="number"&&g===g&&Y<=te){for(;O<Y;){var de=O+Y>>>1,xe=f[de];xe!==null&&!Rl(xe)&&(C?xe<=g:xe<g)?O=de+1:Y=de}return Y}return gh(f,g,Ka,C)}function gh(f,g,C,O){var Y=0,de=f==null?0:f.length;if(de===0)return 0;g=C(g);for(var xe=g!==g,Ne=g===null,je=Rl(g),it=g===t;Y<de;){var st=$a((Y+de)/2),dt=C(f[st]),kt=dt!==t,Gt=dt===null,an=dt===dt,On=Rl(dt);if(xe)var ln=O||an;else it?ln=an&&(O||kt):Ne?ln=an&&kt&&(O||!Gt):je?ln=an&&kt&&!Gt&&(O||!On):Gt||On?ln=!1:ln=O?dt<=g:dt<g;ln?Y=st+1:de=st}return ss(de,F)}function vh(f,g){for(var C=-1,O=f.length,Y=0,de=[];++C<O;){var xe=f[C],Ne=g?g(xe):xe;if(!C||!Wc(Ne,je)){var je=Ne;de[Y++]=xe===0?0:xe}}return de}function hf(f){return typeof f=="number"?f:Rl(f)?ue:+f}function Ps(f){if(typeof f=="string")return f;if(En(f))return Yn(f,Ps)+"";if(Rl(f))return Ss?Ss.call(f):"";var g=f+"";return g=="0"&&1/f==-he?"-0":g}function Sl(f,g,C){var O=-1,Y=gu,de=f.length,xe=!0,Ne=[],je=Ne;if(C)xe=!1,Y=Ql;else if(de>=i){var it=g?null:l0(f);if(it)return Io(it);xe=!1,Y=Ro,je=new I}else je=g?[]:Ne;e:for(;++O<de;){var st=f[O],dt=g?g(st):st;if(st=C||st!==0?st:0,xe&&dt===dt){for(var kt=je.length;kt--;)if(je[kt]===dt)continue e;g&&je.push(dt),Ne.push(st)}else Y(je,dt,C)||(je!==Ne&&je.push(dt),Ne.push(st))}return Ne}function dc(f,g){return g=ba(g,f),f=ls(f,g),f==null||delete f[Nl(Ao(g))]}function Cd(f,g,C,O){return _l(f,g,C(Br(f,g)),O)}function hc(f,g,C,O){for(var Y=f.length,de=O?Y:-1;(O?de--:++de<Y)&&g(f[de],de,f););return C?as(f,O?0:de,O?de+1:Y):as(f,O?de+1:0,O?Y:de)}function Qs(f,g){var C=f;return C instanceof yn&&(C=C.value()),Ba(g,function(O,Y){return Y.func.apply(Y.thisArg,To([O],Y.args))},C)}function ya(f,g,C){var O=f.length;if(O<2)return O?Sl(f[0]):[];for(var Y=-1,de=Oe(O);++Y<O;)for(var xe=f[Y],Ne=-1;++Ne<O;)Ne!=Y&&(de[Y]=dn(de[Y]||xe,f[Ne],g,C));return Sl(Bn(de,1),g,C)}function Uo(f,g,C){for(var O=-1,Y=f.length,de=g.length,xe={};++O<Y;){var Ne=O<de?g[O]:t;C(xe,f[O],Ne)}return xe}function Al(f){return Ui(f)?f:[]}function ju(f){return typeof f=="function"?f:Ka}function ba(f,g){return En(f)?f:It(f,g)?[f]:yg(xr(f))}var _p=Cn;function wa(f,g,C){var O=f.length;return C=C===t?O:C,!g&&C>=O?f:as(f,g,C)}var Ed=vd||function(f){return fr.clearTimeout(f)};function tg(f,g){if(g)return f.slice();var C=f.length,O=Su?Su(C):new f.constructor(C);return f.copy(O),O}function ff(f){var g=new f.constructor(f.byteLength);return new Ua(g).set(new Ua(f)),g}function t0(f,g){var C=g?ff(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.byteLength)}function n0(f){var g=new f.constructor(f.source,Us.exec(f));return g.lastIndex=f.lastIndex,g}function r0(f){return ui?Qn(ui.call(f)):{}}function i0(f,g){var C=g?ff(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.length)}function ng(f,g){if(f!==g){var C=f!==t,O=f===null,Y=f===f,de=Rl(f),xe=g!==t,Ne=g===null,je=g===g,it=Rl(g);if(!Ne&&!it&&!de&&f>g||de&&xe&&je&&!Ne&&!it||O&&xe&&je||!C&&je||!Y)return 1;if(!O&&!de&&!it&&f<g||it&&C&&Y&&!O&&!de||Ne&&C&&Y||!xe&&Y||!je)return-1}return 0}function sb(f,g,C){for(var O=-1,Y=f.criteria,de=g.criteria,xe=Y.length,Ne=C.length;++O<xe;){var je=ng(Y[O],de[O]);if(je){if(O>=Ne)return je;var it=C[O];return je*(it=="desc"?-1:1)}}return f.index-g.index}function s0(f,g,C,O){for(var Y=-1,de=f.length,xe=C.length,Ne=-1,je=g.length,it=ci(de-xe,0),st=Oe(je+it),dt=!O;++Ne<je;)st[Ne]=g[Ne];for(;++Y<xe;)(dt||Y<de)&&(st[C[Y]]=f[Y]);for(;it--;)st[Ne++]=f[Y++];return st}function rg(f,g,C,O){for(var Y=-1,de=f.length,xe=-1,Ne=C.length,je=-1,it=g.length,st=ci(de-Ne,0),dt=Oe(st+it),kt=!O;++Y<st;)dt[Y]=f[Y];for(var Gt=Y;++je<it;)dt[Gt+je]=g[je];for(;++xe<Ne;)(kt||Y<de)&&(dt[Gt+C[xe]]=f[Y++]);return dt}function xo(f,g){var C=-1,O=f.length;for(g||(g=Oe(O));++C<O;)g[C]=f[C];return g}function Cl(f,g,C,O){var Y=!C;C||(C={});for(var de=-1,xe=g.length;++de<xe;){var Ne=g[de],je=O?O(C[Ne],f[Ne],Ne,C,f):t;je===t&&(je=f[Ne]),Y?_t(C,Ne,je):Ee(C,Ne,je)}return C}function Sp(f,g){return Cl(f,El(f),g)}function ob(f,g){return Cl(f,u0(f),g)}function Ap(f,g){return function(C,O){var Y=En(C)?mu:Qe,de=g?g():{};return Y(C,f,en(O,2),de)}}function yh(f){return Cn(function(g,C){var O=-1,Y=C.length,de=Y>1?C[Y-1]:t,xe=Y>2?C[2]:t;for(de=f.length>3&&typeof de=="function"?(Y--,de):t,xe&&So(C[0],C[1],xe)&&(de=Y<3?t:de,Y=1),g=Qn(g);++O<Y;){var Ne=C[O];Ne&&f(g,Ne,O,de)}return g})}function Va(f,g){return function(C,O){if(C==null)return C;if(!Ga(C))return f(C,O);for(var Y=C.length,de=g?Y:-1,xe=Qn(C);(g?de--:++de<Y)&&O(xe[de],de,xe)!==!1;);return C}}function Cp(f){return function(g,C,O){for(var Y=-1,de=Qn(g),xe=O(g),Ne=xe.length;Ne--;){var je=xe[f?Ne:++Y];if(C(de[je],je,de)===!1)break}return g}}function Ep(f,g,C){var O=g&k,Y=bh(f);function de(){var xe=this&&this!==fr&&this instanceof de?Y:f;return xe.apply(O?C:this,arguments)}return de}function ig(f){return function(g){g=xr(g);var C=aa(g)?ts(g):t,O=C?C[0]:g.charAt(0),Y=C?wa(C,1).join(""):g.slice(1);return O[f]()+Y}}function kd(f){return function(g){return Ba(f5(h5(g).replace(Da,"")),f,"")}}function bh(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var C=Nu(f.prototype),O=f.apply(C,g);return bi(O)?O:C}}function sg(f,g,C){var O=bh(f);function Y(){for(var de=arguments.length,xe=Oe(de),Ne=de,je=$c(Y);Ne--;)xe[Ne]=arguments[Ne];var it=de<3&&xe[0]!==je&&xe[de-1]!==je?[]:Hs(xe,je);if(de-=it.length,de<C)return _o(f,g,wh,Y.placeholder,t,xe,it,t,t,C-de);var st=this&&this!==fr&&this instanceof Y?O:f;return gi(st,this,xe)}return Y}function Pd(f){return function(g,C,O){var Y=Qn(g);if(!Ga(g)){var de=en(C,3);g=eo(g),C=function(Ne){return de(Y[Ne],Ne,Y)}}var xe=f(g,C,O);return xe>-1?Y[de?g[xe]:xe]:t}}function kp(f){return pc(function(g){var C=g.length,O=C,Y=Oi.prototype.thru;for(f&&g.reverse();O--;){var de=g[O];if(typeof de!="function")throw new Pi(o);if(Y&&!xe&&xh(de)=="wrapper")var xe=new Oi([],!0)}for(O=xe?O:C;++O<C;){de=g[O];var Ne=xh(de),je=Ne=="wrapper"?Tp(de):t;je&&xf(je[0])&&je[1]==(U|L|B|q)&&!je[4].length&&je[9]==1?xe=xe[xh(je[0])].apply(xe,je[3]):xe=de.length==1&&xf(de)?xe[Ne]():xe.thru(de)}return function(){var it=arguments,st=it[0];if(xe&&it.length==1&&En(st))return xe.plant(st).value();for(var dt=0,kt=C?g[dt].apply(this,it):st;++dt<C;)kt=g[dt].call(this,kt);return kt}})}function wh(f,g,C,O,Y,de,xe,Ne,je,it){var st=g&U,dt=g&k,kt=g&E,Gt=g&(L|j),an=g&ie,On=kt?t:bh(f);function ln(){for(var Gn=arguments.length,tr=Oe(Gn),Il=Gn;Il--;)tr[Il]=arguments[Il];if(Gt)var Sa=$c(ln),jl=jc(tr,Sa);if(O&&(tr=s0(tr,O,Y,Gt)),de&&(tr=rg(tr,de,xe,Gt)),Gn-=jl,Gt&&Gn<it){var $i=Hs(tr,Sa);return _o(f,g,wh,ln.placeholder,C,tr,$i,Ne,je,it-Gn)}var Hc=dt?C:this,Dd=kt?Hc[f]:f;return Gn=tr.length,Ne?tr=kl(tr,Ne):an&&Gn>1&&tr.reverse(),st&&je<Gn&&(tr.length=je),this&&this!==fr&&this instanceof ln&&(Dd=On||bh(Dd)),Dd.apply(Hc,tr)}return ln}function o0(f,g){return function(C,O){return or(C,f,g(O),{})}}function pf(f,g){return function(C,O){var Y;if(C===t&&O===t)return g;if(C!==t&&(Y=C),O!==t){if(Y===t)return O;typeof C=="string"||typeof O=="string"?(C=Ps(C),O=Ps(O)):(C=hf(C),O=hf(O)),Y=f(C,O)}return Y}}function Pp(f){return pc(function(g){return g=Yn(g,kr(en())),Cn(function(C){var O=this;return f(g,function(Y){return gi(Y,O,C)})})})}function mf(f,g){g=g===t?" ":Ps(g);var C=g.length;if(C<2)return C?uc(g,f):g;var O=uc(g,gl(f/za(g)));return aa(g)?wa(ts(O),0,f).join(""):O.slice(0,f)}function a0(f,g,C,O){var Y=g&k,de=bh(f);function xe(){for(var Ne=-1,je=arguments.length,it=-1,st=O.length,dt=Oe(st+je),kt=this&&this!==fr&&this instanceof xe?de:f;++it<st;)dt[it]=O[it];for(;je--;)dt[it++]=arguments[++Ne];return gi(kt,Y?C:this,dt)}return xe}function og(f){return function(g,C,O){return O&&typeof O!="number"&&So(g,C,O)&&(C=O=t),g=Od(g),C===t?(C=g,g=0):C=Od(C),O=O===t?g<C?1:-1:Od(O),xl(g,C,O,f)}}function Np(f){return function(g,C){return typeof g=="string"&&typeof C=="string"||(g=gc(g),C=gc(C)),f(g,C)}}function _o(f,g,C,O,Y,de,xe,Ne,je,it){var st=g&L,dt=st?xe:t,kt=st?t:xe,Gt=st?de:t,an=st?t:de;g|=st?B:W,g&=~(st?W:B),g&T||(g&=-4);var On=[f,g,Y,Gt,dt,an,kt,Ne,je,it],ln=C.apply(t,On);return xf(f)&&gg(ln,On),ln.placeholder=O,vg(ln,f,g)}function Ns(f){var g=Pr[f];return function(C,O){if(C=gc(C),O=O==null?0:ss(Ln(O),292),O&&Au(C)){var Y=(xr(C)+"e").split("e"),de=g(Y[0]+"e"+(+Y[1]+O));return Y=(xr(de)+"e").split("e"),+(Y[0]+"e"+(+Y[1]-O))}return g(C)}}var l0=sc&&1/Io(new sc([,-0]))[1]==he?function(f){return new sc(f)}:jb;function ag(f){return function(g){var C=Ts(g);return C==Ct?ec(g):C==gt?oh(g):ki(g,f(g))}}function fc(f,g,C,O,Y,de,xe,Ne){var je=g&E;if(!je&&typeof f!="function")throw new Pi(o);var it=O?O.length:0;if(it||(g&=-97,O=Y=t),xe=xe===t?xe:ci(Ln(xe),0),Ne=Ne===t?Ne:Ln(Ne),it-=Y?Y.length:0,g&W){var st=O,dt=Y;O=Y=t}var kt=je?t:Tp(f),Gt=[f,g,C,O,Y,st,dt,de,xe,Ne];if(kt&&p0(Gt,kt),f=Gt[0],g=Gt[1],C=Gt[2],O=Gt[3],Y=Gt[4],Ne=Gt[9]=Gt[9]===t?je?0:f.length:ci(Gt[9]-it,0),!Ne&&g&(L|j)&&(g&=-25),!g||g==k)var an=Ep(f,g,C);else g==L||g==j?an=sg(f,g,Ne):(g==B||g==(k|B))&&!Y.length?an=a0(f,g,C,O):an=wh.apply(t,Gt);var On=kt?ma:gg;return vg(On(an,Gt),f,g)}function lg(f,g,C,O){return f===t||Wc(f,bs[C])&&!jn.call(O,C)?g:f}function cg(f,g,C,O,Y,de){return bi(f)&&bi(g)&&(de.set(g,f),Js(f,g,t,cg,de),de.delete(g)),f}function ug(f){return Ig(f)?t:f}function dg(f,g,C,O,Y,de){var xe=C&_,Ne=f.length,je=g.length;if(Ne!=je&&!(xe&&je>Ne))return!1;var it=de.get(f),st=de.get(g);if(it&&st)return it==g&&st==f;var dt=-1,kt=!0,Gt=C&x?new I:t;for(de.set(f,g),de.set(g,f);++dt<Ne;){var an=f[dt],On=g[dt];if(O)var ln=xe?O(On,an,dt,g,f,de):O(an,On,dt,f,g,de);if(ln!==t){if(ln)continue;kt=!1;break}if(Gt){if(!P(g,function(Gn,tr){if(!Ro(Gt,tr)&&(an===Gn||Y(an,Gn,C,O,de)))return Gt.push(tr)})){kt=!1;break}}else if(!(an===On||Y(an,On,C,O,de))){kt=!1;break}}return de.delete(f),de.delete(g),kt}function hg(f,g,C,O,Y,de,xe){switch(C){case Vt:if(f.byteLength!=g.byteLength||f.byteOffset!=g.byteOffset)return!1;f=f.buffer,g=g.buffer;case $e:return!(f.byteLength!=g.byteLength||!de(new Ua(f),new Ua(g)));case _e:case Te:case We:return Wc(+f,+g);case Ye:return f.name==g.name&&f.message==g.message;case mt:case bt:return f==g+"";case Ct:var Ne=ec;case gt:var je=O&_;if(Ne||(Ne=Io),f.size!=g.size&&!je)return!1;var it=xe.get(f);if(it)return it==g;O|=x,xe.set(f,g);var st=dg(Ne(f),Ne(g),O,Y,de,xe);return xe.delete(f),st;case Ot:if(ui)return ui.call(f)==ui.call(g)}return!1}function c0(f,g,C,O,Y,de){var xe=C&_,Ne=gf(f),je=Ne.length,it=gf(g),st=it.length;if(je!=st&&!xe)return!1;for(var dt=je;dt--;){var kt=Ne[dt];if(!(xe?kt in g:jn.call(g,kt)))return!1}var Gt=de.get(f),an=de.get(g);if(Gt&&an)return Gt==g&&an==f;var On=!0;de.set(f,g),de.set(g,f);for(var ln=xe;++dt<je;){kt=Ne[dt];var Gn=f[kt],tr=g[kt];if(O)var Il=xe?O(tr,Gn,kt,g,f,de):O(Gn,tr,kt,f,g,de);if(!(Il===t?Gn===tr||Y(Gn,tr,C,O,de):Il)){On=!1;break}ln||(ln=kt=="constructor")}if(On&&!ln){var Sa=f.constructor,jl=g.constructor;Sa!=jl&&"constructor"in f&&"constructor"in g&&!(typeof Sa=="function"&&Sa instanceof Sa&&typeof jl=="function"&&jl instanceof jl)&&(On=!1)}return de.delete(f),de.delete(g),On}function pc(f){return xa(jp(f,t,Dp),f+"")}function gf(f){return ks(f,eo,El)}function vf(f){return ks(f,Ya,u0)}var Tp=ch?function(f){return ch.get(f)}:jb;function xh(f){for(var g=f.name+"",C=Pu[g],O=jn.call(Pu,g)?C.length:0;O--;){var Y=C[O],de=Y.func;if(de==null||de==f)return Y.name}return g}function $c(f){var g=jn.call(oe,"placeholder")?oe:f;return g.placeholder}function en(){var f=oe.iteratee||Rb;return f=f===Rb?wl:f,arguments.length?f(arguments[0],arguments[1]):f}function yf(f,g){var C=f.__data__;return _h(g)?C[typeof g=="string"?"string":"hash"]:C.map}function bf(f){for(var g=eo(f),C=g.length;C--;){var O=g[C],Y=f[O];g[C]=[O,Y,_f(Y)]}return g}function Mu(f,g){var C=Vr(f,g);return lc(C)?C:t}function Lp(f){var g=jn.call(f,rc),C=f[rc];try{f[rc]=t;var O=!0}catch{}var Y=sr.call(f);return O&&(g?f[rc]=C:delete f[rc]),Y}var El=Fc?function(f){return f==null?[]:(f=Qn(f),oa(Fc(f),function(g){return is.call(f,g)}))}:Mb,u0=Fc?function(f){for(var g=[];f;)To(g,El(f)),f=vo(f);return g}:Mb,Ts=br;(zc&&Ts(new zc(new ArrayBuffer(1)))!=Vt||ca&&Ts(new ca)!=Ct||wd&&Ts(wd.resolve())!=Rt||sc&&Ts(new sc)!=gt||Eu&&Ts(new Eu)!=Xt)&&(Ts=function(f){var g=br(f),C=g==Mt?f.constructor:t,O=C?Ou(C):"";if(O)switch(O){case of:return Vt;case _s:return Ct;case Do:return Rt;case Ys:return gt;case qa:return Xt}return g});function fg(f,g,C){for(var O=-1,Y=C.length;++O<Y;){var de=C[O],xe=de.size;switch(de.type){case"drop":f+=xe;break;case"dropRight":g-=xe;break;case"take":g=ss(g,f+xe);break;case"takeRight":f=ci(f,g-xe);break}}return{start:f,end:g}}function d0(f){var g=f.match(Ai);return g?g[1].split(Ia):[]}function pg(f,g,C){g=ba(g,f);for(var O=-1,Y=g.length,de=!1;++O<Y;){var xe=Nl(g[O]);if(!(de=f!=null&&C(f,xe)))break;f=f[xe]}return de||++O!=Y?de:(Y=f==null?0:f.length,!!Y&&L0(Y)&&Xr(xe,Y)&&(En(f)||Tf(f)))}function wf(f){var g=f.length,C=new f.constructor(g);return g&&typeof f[0]=="string"&&jn.call(f,"index")&&(C.index=f.index,C.input=f.input),C}function Ls(f){return typeof f.constructor=="function"&&!qc(f)?Nu(vo(f)):{}}function ab(f,g,C){var O=f.constructor;switch(g){case $e:return ff(f);case _e:case Te:return new O(+f);case Vt:return t0(f,C);case St:case Pt:case wt:case oi:case Pn:case Zi:case Jn:case ir:case Ji:return i0(f,C);case Ct:return new O;case We:case bt:return new O(f);case mt:return n0(f);case gt:return new O;case Ot:return r0(f)}}function lb(f,g){var C=g.length;if(!C)return f;var O=C-1;return g[O]=(C>1?"& ":"")+g[O],g=g.join(C>2?", ":" "),f.replace(Cr,`{
/* [wrapped with `+g+`] */
`)}function Rp(f){return En(f)||Tf(f)||!!(gd&&f&&f[gd])}function Xr(f,g){var C=typeof f;return g=g??X,!!g&&(C=="number"||C!="symbol"&&al.test(f))&&f>-1&&f%1==0&&f<g}function So(f,g,C){if(!bi(C))return!1;var O=typeof g;return(O=="number"?Ga(C)&&Xr(g,C.length):O=="string"&&g in C)?Wc(C[g],f):!1}function It(f,g){if(En(f))return!1;var C=typeof f;return C=="number"||C=="symbol"||C=="boolean"||f==null||Rl(f)?!0:lo.test(f)||!zs.test(f)||g!=null&&f in Qn(g)}function _h(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}function xf(f){var g=xh(f),C=oe[g];if(typeof C!="function"||!(g in yn.prototype))return!1;if(f===C)return!0;var O=Tp(C);return!!O&&f===O[0]}function h0(f){return!!ws&&ws in f}var cb=jo?Md:Ob;function qc(f){var g=f&&f.constructor,C=typeof g=="function"&&g.prototype||bs;return f===C}function _f(f){return f===f&&!bi(f)}function Ip(f,g){return function(C){return C==null?!1:C[f]===g&&(g!==t||f in Qn(C))}}function f0(f){var g=Ue(f,function(O){return C.size===u&&C.clear(),O}),C=g.cache;return g}function p0(f,g){var C=f[1],O=g[1],Y=C|O,de=Y<(k|E|U),xe=O==U&&C==L||O==U&&C==q&&f[7].length<=g[8]||O==(U|q)&&g[7].length<=g[8]&&C==L;if(!(de||xe))return f;O&k&&(f[2]=g[2],Y|=C&k?0:T);var Ne=g[3];if(Ne){var je=f[3];f[3]=je?s0(je,Ne,g[4]):Ne,f[4]=je?Hs(f[3],h):g[4]}return Ne=g[5],Ne&&(je=f[5],f[5]=je?rg(je,Ne,g[6]):Ne,f[6]=je?Hs(f[5],h):g[6]),Ne=g[7],Ne&&(f[7]=Ne),O&U&&(f[8]=f[8]==null?g[8]:ss(f[8],g[8])),f[9]==null&&(f[9]=g[9]),f[0]=g[0],f[1]=Y,f}function m0(f){var g=[];if(f!=null)for(var C in Qn(f))g.push(C);return g}function mg(f){return sr.call(f)}function jp(f,g,C){return g=ci(g===t?f.length-1:g,0),function(){for(var O=arguments,Y=-1,de=ci(O.length-g,0),xe=Oe(de);++Y<de;)xe[Y]=O[g+Y];Y=-1;for(var Ne=Oe(g+1);++Y<g;)Ne[Y]=O[Y];return Ne[g]=C(xe),gi(f,this,Ne)}}function ls(f,g){return g.length<2?f:Br(f,as(g,0,-1))}function kl(f,g){for(var C=f.length,O=ss(g.length,C),Y=xo(f);O--;){var de=g[O];f[O]=Xr(de,C)?Y[de]:t}return f}function mc(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}var gg=Pl(ma),Sh=ah||function(f,g){return fr.setTimeout(f,g)},xa=Pl(ga);function vg(f,g,C){var O=g+"";return xa(f,lb(O,g0(d0(O),C)))}function Pl(f){var g=0,C=0;return function(){var O=eg(),Y=le-(O-C);if(C=O,Y>0){if(++g>=z)return arguments[0]}else g=0;return f.apply(t,arguments)}}function Mp(f,g){var C=-1,O=f.length,Y=O-1;for(g=g===t?O:g;++C<g;){var de=cc(C,Y),xe=f[de];f[de]=f[C],f[C]=xe}return f.length=g,f}var yg=f0(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace(Wt,function(C,O,Y,de){g.push(Y?de.replace(uo,"$1"):O||C)}),g});function Nl(f){if(typeof f=="string"||Rl(f))return f;var g=f+"";return g=="0"&&1/f==-he?"-0":g}function Ou(f){if(f!=null){try{return Mo.call(f)}catch{}try{return f+""}catch{}}return""}function g0(f,g){return ti(Q,function(C){var O="_."+C[0];g&C[1]&&!gu(f,O)&&f.push(O)}),f.sort()}function v0(f){if(f instanceof yn)return f.clone();var g=new Oi(f.__wrapped__,f.__chain__);return g.__actions__=xo(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}function Op(f,g,C){(C?So(f,g,C):g===t)?g=1:g=ci(Ln(g),0);var O=f==null?0:f.length;if(!O||g<1)return[];for(var Y=0,de=0,xe=Oe(gl(O/g));Y<O;)xe[de++]=as(f,Y,Y+=g);return xe}function bg(f){for(var g=-1,C=f==null?0:f.length,O=0,Y=[];++g<C;){var de=f[g];de&&(Y[O++]=de)}return Y}function Wa(){var f=arguments.length;if(!f)return[];for(var g=Oe(f-1),C=arguments[0],O=f;O--;)g[O-1]=arguments[O];return To(En(C)?xo(C):[C],Bn(g,1))}var er=Cn(function(f,g){return Ui(f)?dn(f,Bn(g,1,Ui,!0)):[]}),cs=Cn(function(f,g){var C=Ao(g);return Ui(C)&&(C=t),Ui(f)?dn(f,Bn(g,1,Ui,!0),en(C,2)):[]}),Ni=Cn(function(f,g){var C=Ao(g);return Ui(C)&&(C=t),Ui(f)?dn(f,Bn(g,1,Ui,!0),t,C):[]});function Rs(f,g,C){var O=f==null?0:f.length;return O?(g=C||g===t?1:Ln(g),as(f,g<0?0:g,O)):[]}function _a(f,g,C){var O=f==null?0:f.length;return O?(g=C||g===t?1:Ln(g),g=O-g,as(f,0,g<0?0:g)):[]}function Ah(f,g){return f&&f.length?hc(f,en(g,3),!0,!0):[]}function zi(f,g){return f&&f.length?hc(f,en(g,3),!0):[]}function Sf(f,g,C,O){var Y=f==null?0:f.length;return Y?(C&&typeof C!="number"&&So(f,g,C)&&(C=0,O=Y),Es(f,g,C,O)):[]}function Du(f,g,C){var O=f==null?0:f.length;if(!O)return-1;var Y=C==null?0:Ln(C);return Y<0&&(Y=ci(O+Y,0)),Xe(f,en(g,3),Y)}function Af(f,g,C){var O=f==null?0:f.length;if(!O)return-1;var Y=O-1;return C!==t&&(Y=Ln(C),Y=C<0?ci(O+Y,0):ss(Y,O-1)),Xe(f,en(g,3),Y,!0)}function Dp(f){var g=f==null?0:f.length;return g?Bn(f,1):[]}function Cf(f){var g=f==null?0:f.length;return g?Bn(f,he):[]}function $o(f,g){var C=f==null?0:f.length;return C?(g=g===t?1:Ln(g),Bn(f,g)):[]}function wg(f){for(var g=-1,C=f==null?0:f.length,O={};++g<C;){var Y=f[g];O[Y[0]]=Y[1]}return O}function Nd(f){return f&&f.length?f[0]:t}function Vc(f,g,C){var O=f==null?0:f.length;if(!O)return-1;var Y=C==null?0:Ln(C);return Y<0&&(Y=ci(O+Y,0)),ot(f,g,Y)}function Fp(f){var g=f==null?0:f.length;return g?as(f,0,-1):[]}var xg=Cn(function(f){var g=Yn(f,Al);return g.length&&g[0]===f[0]?da(g):[]}),Fu=Cn(function(f){var g=Ao(f),C=Yn(f,Al);return g===Ao(C)?g=t:C.pop(),C.length&&C[0]===f[0]?da(C,en(g,2)):[]}),Bp=Cn(function(f){var g=Ao(f),C=Yn(f,Al);return g=typeof g=="function"?g:t,g&&C.pop(),C.length&&C[0]===f[0]?da(C,t,g):[]});function Bu(f,g){return f==null?"":lh.call(f,g)}function Ao(f){var g=f==null?0:f.length;return g?f[g-1]:t}function Ef(f,g,C){var O=f==null?0:f.length;if(!O)return-1;var Y=O;return C!==t&&(Y=Ln(C),Y=Y<0?ci(O+Y,0):ss(Y,O-1)),g===g?_u(f,g,Y):Xe(f,Ht,Y,!0)}function _g(f,g){return f&&f.length?hh(f,Ln(g)):t}var zp=Cn(kf);function kf(f,g){return f&&f.length&&g&&g.length?Yr(f,g):f}function Co(f,g,C){return f&&f.length&&g&&g.length?Yr(f,g,en(C,2)):f}function zu(f,g,C){return f&&f.length&&g&&g.length?Yr(f,g,t,C):f}var Tl=pc(function(f,g){var C=f==null?0:f.length,O=xt(f,g);return Kr(f,Yn(g,function(Y){return Xr(Y,C)?+Y:Y}).sort(ng)),O});function qo(f,g){var C=[];if(!(f&&f.length))return C;var O=-1,Y=[],de=f.length;for(g=en(g,3);++O<de;){var xe=f[O];g(xe,O,f)&&(C.push(xe),Y.push(O))}return Kr(f,Y),C}function Up(f){return f==null?f:Cu.call(f)}function Sg(f,g,C){var O=f==null?0:f.length;return O?(C&&typeof C!="number"&&So(f,g,C)?(g=0,C=O):(g=g==null?0:Ln(g),C=C===t?O:Ln(C)),as(f,g,C)):[]}function Ag(f,g){return va(f,g)}function ub(f,g,C){return gh(f,g,en(C,2))}function Uu(f,g){var C=f==null?0:f.length;if(C){var O=va(f,g);if(O<C&&Wc(f[O],g))return O}return-1}function y0(f,g){return va(f,g,!0)}function Cg(f,g,C){return gh(f,g,en(C,2),!0)}function Td(f,g){var C=f==null?0:f.length;if(C){var O=va(f,g,!0)-1;if(Wc(f[O],g))return O}return-1}function Eg(f){return f&&f.length?vh(f):[]}function Ld(f,g){return f&&f.length?vh(f,en(g,2)):[]}function b0(f){var g=f==null?0:f.length;return g?as(f,1,g):[]}function w0(f,g,C){return f&&f.length?(g=C||g===t?1:Ln(g),as(f,0,g<0?0:g)):[]}function kg(f,g,C){var O=f==null?0:f.length;return O?(g=C||g===t?1:Ln(g),g=O-g,as(f,g<0?0:g,O)):[]}function $p(f,g){return f&&f.length?hc(f,en(g,3),!1,!0):[]}function db(f,g){return f&&f.length?hc(f,en(g,3)):[]}var hb=Cn(function(f){return Sl(Bn(f,1,Ui,!0))}),x0=Cn(function(f){var g=Ao(f);return Ui(g)&&(g=t),Sl(Bn(f,1,Ui,!0),en(g,2))}),_0=Cn(function(f){var g=Ao(f);return g=typeof g=="function"?g:t,Sl(Bn(f,1,Ui,!0),t,g)});function Rd(f){return f&&f.length?Sl(f):[]}function fb(f,g){return f&&f.length?Sl(f,en(g,2)):[]}function Ch(f,g){return g=typeof g=="function"?g:t,f&&f.length?Sl(f,t,g):[]}function qp(f){if(!(f&&f.length))return[];var g=0;return f=oa(f,function(C){if(Ui(C))return g=ci(C.length,g),!0}),Ei(g,function(C){return Yn(f,rn(C))})}function ni(f,g){if(!(f&&f.length))return[];var C=qp(f);return g==null?C:Yn(C,function(O){return gi(g,t,O)})}var pb=Cn(function(f,g){return Ui(f)?dn(f,g):[]}),S0=Cn(function(f){return ya(oa(f,Ui))}),mb=Cn(function(f){var g=Ao(f);return Ui(g)&&(g=t),ya(oa(f,Ui),en(g,2))}),gb=Cn(function(f){var g=Ao(f);return g=typeof g=="function"?g:t,ya(oa(f,Ui),t,g)}),A0=Cn(qp);function C0(f,g){return Uo(f||[],g||[],Ee)}function vb(f,g){return Uo(f||[],g||[],_l)}var Ha=Cn(function(f){var g=f.length,C=g>1?f[g-1]:t;return C=typeof C=="function"?(f.pop(),C):t,ni(f,C)});function Vp(f){var g=oe(f);return g.__chain__=!0,g}function yb(f,g){return g(f),f}function Ll(f,g){return g(f)}var Wp=pc(function(f){var g=f.length,C=g?f[0]:0,O=this.__wrapped__,Y=function(de){return xt(de,f)};return g>1||this.__actions__.length||!(O instanceof yn)||!Xr(C)?this.thru(Y):(O=O.slice(C,+C+(g?1:0)),O.__actions__.push({func:Ll,args:[Y],thisArg:t}),new Oi(O,this.__chain__).thru(function(de){return g&&!de.length&&de.push(t),de}))});function Id(){return Vp(this)}function Hp(){return new Oi(this.value(),this.__chain__)}function Pg(){this.__values__===t&&(this.__values__=r5(this.value()));var f=this.__index__>=this.__values__.length,g=f?t:this.__values__[this.__index__++];return{done:f,value:g}}function Ng(){return this}function bb(f){for(var g,C=this;C instanceof ua;){var O=v0(C);O.__index__=0,O.__values__=t,g?Y.__wrapped__=O:g=O;var Y=O;C=C.__wrapped__}return Y.__wrapped__=f,g}function Tg(){var f=this.__wrapped__;if(f instanceof yn){var g=f;return this.__actions__.length&&(g=new yn(this)),g=g.reverse(),g.__actions__.push({func:Ll,args:[Up],thisArg:t}),new Oi(g,this.__chain__)}return this.thru(Up)}function wb(){return Qs(this.__wrapped__,this.__actions__)}var E0=Ap(function(f,g,C){jn.call(f,C)?++f[C]:_t(f,C,1)});function k0(f,g,C){var O=En(f)?Rc:sn;return C&&So(f,g,C)&&(g=t),O(f,en(g,3))}function Gp(f,g){var C=En(f)?oa:Hr;return C(f,en(g,3))}var Yp=Pd(Du),P0=Pd(Af);function Lg(f,g){return Bn(jd(f,g),1)}function xb(f,g){return Bn(jd(f,g),he)}function N0(f,g,C){return C=C===t?1:Ln(C),Bn(jd(f,g),C)}function Kp(f,g){var C=En(f)?ti:Mn;return C(f,en(g,3))}function Pf(f,g){var C=En(f)?Jl:ur;return C(f,en(g,3))}var Rg=Ap(function(f,g,C){jn.call(f,C)?f[C].push(g):_t(f,C,[g])});function Xp(f,g,C,O){f=Ga(f)?f:Qp(f),C=C&&!O?Ln(C):0;var Y=f.length;return C<0&&(C=ci(Y+C,0)),R0(f)?C<=Y&&f.indexOf(g,C)>-1:!!Y&&ot(f,g,C)>-1}var T0=Cn(function(f,g,C){var O=-1,Y=typeof g=="function",de=Ga(f)?Oe(f.length):[];return Mn(f,function(xe){de[++O]=Y?gi(g,xe,C):Zs(xe,g,C)}),de}),_b=Ap(function(f,g,C){_t(f,C,g)});function jd(f,g){var C=En(f)?Yn:uf;return C(f,en(g,3))}function Sb(f,g,C,O){return f==null?[]:(En(g)||(g=g==null?[]:[g]),C=O?t:C,En(C)||(C=C==null?[]:[C]),Ad(f,g,C))}var Nf=Ap(function(f,g,C){f[C?0:1].push(g)},function(){return[[],[]]});function Ab(f,g,C){var O=En(f)?Ba:Mr,Y=arguments.length<3;return O(f,en(g,4),C,Y,Mn)}function Zp(f,g,C){var O=En(f)?md:Mr,Y=arguments.length<3;return O(f,en(g,4),C,Y,ur)}function l(f,g){var C=En(f)?oa:Hr;return C(f,vt(en(g,3)))}function d(f){var g=En(f)?Fe:vi;return g(f)}function v(f,g,C){(C?So(f,g,C):g===t)?g=1:g=Ln(g);var O=En(f)?Ie:ph;return O(f,g)}function S(f){var g=En(f)?nt:wo;return g(f)}function R(f){if(f==null)return 0;if(Ga(f))return R0(f)?za(f):f.length;var g=Ts(f);return g==Ct||g==gt?f.size:fa(f).length}function M(f,g,C){var O=En(f)?P:mh;return C&&So(f,g,C)&&(g=t),O(f,en(g,3))}var Z=Cn(function(f,g){if(f==null)return[];var C=g.length;return C>1&&So(f,g[0],g[1])?g=[]:C>2&&So(g[0],g[1],g[2])&&(g=[g[0]]),Ad(f,Bn(g,1),[])}),be=pr||function(){return fr.Date.now()};function ke(f,g){if(typeof g!="function")throw new Pi(o);return f=Ln(f),function(){if(--f<1)return g.apply(this,arguments)}}function qe(f,g,C){return g=C?t:g,g=f&&g==null?f.length:g,fc(f,U,t,t,t,t,g)}function ct(f,g){var C;if(typeof g!="function")throw new Pi(o);return f=Ln(f),function(){return--f>0&&(C=g.apply(this,arguments)),f<=1&&(g=t),C}}var pt=Cn(function(f,g,C){var O=k;if(C.length){var Y=Hs(C,$c(pt));O|=B}return fc(f,O,g,C,Y)}),lt=Cn(function(f,g,C){var O=k|E;if(C.length){var Y=Hs(C,$c(lt));O|=B}return fc(g,O,f,C,Y)});function Nt(f,g,C){g=C?t:g;var O=fc(f,L,t,t,t,t,t,g);return O.placeholder=Nt.placeholder,O}function Dt(f,g,C){g=C?t:g;var O=fc(f,j,t,t,t,t,t,g);return O.placeholder=Dt.placeholder,O}function Ft(f,g,C){var O,Y,de,xe,Ne,je,it=0,st=!1,dt=!1,kt=!0;if(typeof f!="function")throw new Pi(o);g=gc(g)||0,bi(C)&&(st=!!C.leading,dt="maxWait"in C,de=dt?ci(gc(C.maxWait)||0,g):de,kt="trailing"in C?!!C.trailing:kt);function Gt($i){var Hc=O,Dd=Y;return O=Y=t,it=$i,xe=f.apply(Dd,Hc),xe}function an($i){return it=$i,Ne=Sh(Gn,g),st?Gt($i):xe}function On($i){var Hc=$i-je,Dd=$i-it,g5=g-Hc;return dt?ss(g5,de-Dd):g5}function ln($i){var Hc=$i-je,Dd=$i-it;return je===t||Hc>=g||Hc<0||dt&&Dd>=de}function Gn(){var $i=be();if(ln($i))return tr($i);Ne=Sh(Gn,On($i))}function tr($i){return Ne=t,kt&&O?Gt($i):(O=Y=t,xe)}function Il(){Ne!==t&&Ed(Ne),it=0,O=je=Y=Ne=t}function Sa(){return Ne===t?xe:tr(be())}function jl(){var $i=be(),Hc=ln($i);if(O=arguments,Y=this,je=$i,Hc){if(Ne===t)return an(je);if(dt)return Ed(Ne),Ne=Sh(Gn,g),Gt(je)}return Ne===t&&(Ne=Sh(Gn,g)),xe}return jl.cancel=Il,jl.flush=Sa,jl}var yi=Cn(function(f,g){return Fn(f,1,g)}),ze=Cn(function(f,g,C){return Fn(f,gc(g)||0,C)});function Le(f){return fc(f,ie)}function Ue(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new Pi(o);var C=function(){var O=arguments,Y=g?g.apply(this,O):O[0],de=C.cache;if(de.has(Y))return de.get(Y);var xe=f.apply(this,O);return C.cache=de.set(Y,xe)||de,xe};return C.cache=new(Ue.Cache||Cs),C}Ue.Cache=Cs;function vt(f){if(typeof f!="function")throw new Pi(o);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}function qt(f){return ct(2,f)}var Jt=_p(function(f,g){g=g.length==1&&En(g[0])?Yn(g[0],kr(en())):Yn(Bn(g,1),kr(en()));var C=g.length;return Cn(function(O){for(var Y=-1,de=ss(O.length,C);++Y<de;)O[Y]=g[Y].call(this,O[Y]);return gi(f,this,O)})}),Kt=Cn(function(f,g){var C=Hs(g,$c(Kt));return fc(f,B,t,g,C)}),on=Cn(function(f,g){var C=Hs(g,$c(on));return fc(f,W,t,g,C)}),us=pc(function(f,g){return fc(f,q,t,t,t,g)});function ar(f,g){if(typeof f!="function")throw new Pi(o);return g=g===t?g:Ln(g),Cn(f,g)}function $u(f,g){if(typeof f!="function")throw new Pi(o);return g=g==null?0:ci(Ln(g),0),Cn(function(C){var O=C[g],Y=wa(C,0,g);return O&&To(Y,O),gi(f,this,Y)})}function Cb(f,g,C){var O=!0,Y=!0;if(typeof f!="function")throw new Pi(o);return bi(C)&&(O="leading"in C?!!C.leading:O,Y="trailing"in C?!!C.trailing:Y),Ft(f,g,{leading:O,maxWait:g,trailing:Y})}function qL(f){return qe(f,1)}function VL(f,g){return Kt(ju(g),f)}function WL(){if(!arguments.length)return[];var f=arguments[0];return En(f)?f:[f]}function HL(f){return yt(f,b)}function GL(f,g){return g=typeof g=="function"?g:t,yt(f,b,g)}function YL(f){return yt(f,p|b)}function KL(f,g){return g=typeof g=="function"?g:t,yt(f,p|b,g)}function XL(f,g){return g==null||Hn(f,g,eo(g))}function Wc(f,g){return f===g||f!==f&&g!==g}var ZL=Np(Lr),JL=Np(function(f,g){return f>=g}),Tf=Sd(function(){return arguments}())?Sd:function(f){return Ti(f)&&jn.call(f,"callee")&&!is.call(f,"callee")},En=Oe.isArray,QL=Lc?kr(Lc):cf;function Ga(f){return f!=null&&L0(f.length)&&!Md(f)}function Ui(f){return Ti(f)&&Ga(f)}function eR(f){return f===!0||f===!1||Ti(f)&&br(f)==_e}var Eh=yd||Ob,tR=ai?kr(ai):Fo;function nR(f){return Ti(f)&&f.nodeType===1&&!Ig(f)}function rR(f){if(f==null)return!0;if(Ga(f)&&(En(f)||typeof f=="string"||typeof f.splice=="function"||Eh(f)||Jp(f)||Tf(f)))return!f.length;var g=Ts(f);if(g==Ct||g==gt)return!f.size;if(qc(f))return!fa(f).length;for(var C in f)if(jn.call(f,C))return!1;return!0}function iR(f,g){return os(f,g)}function sR(f,g,C){C=typeof C=="function"?C:t;var O=C?C(f,g):t;return O===t?os(f,g,t,C):!!O}function Eb(f){if(!Ti(f))return!1;var g=br(f);return g==Ye||g==Ge||typeof f.message=="string"&&typeof f.name=="string"&&!Ig(f)}function oR(f){return typeof f=="number"&&Au(f)}function Md(f){if(!bi(f))return!1;var g=br(f);return g==at||g==ht||g==ge||g==ut}function Q_(f){return typeof f=="number"&&f==Ln(f)}function L0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=X}function bi(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function Ti(f){return f!=null&&typeof f=="object"}var e5=dl?kr(dl):Bo;function aR(f,g){return f===g||ha(f,g,bf(g))}function lR(f,g,C){return C=typeof C=="function"?C:t,ha(f,g,bf(g),C)}function cR(f){return t5(f)&&f!=+f}function uR(f){if(cb(f))throw new $t(s);return lc(f)}function dR(f){return f===null}function hR(f){return f==null}function t5(f){return typeof f=="number"||Ti(f)&&br(f)==We}function Ig(f){if(!Ti(f)||br(f)!=Mt)return!1;var g=vo(f);if(g===null)return!0;var C=jn.call(g,"constructor")&&g.constructor;return typeof C=="function"&&C instanceof C&&Mo.call(C)==lr}var kb=hl?kr(hl):Lu;function fR(f){return Q_(f)&&f>=-X&&f<=X}var n5=Zl?kr(Zl):bo;function R0(f){return typeof f=="string"||!En(f)&&Ti(f)&&br(f)==bt}function Rl(f){return typeof f=="symbol"||Ti(f)&&br(f)==Ot}var Jp=pu?kr(pu):Ru;function pR(f){return f===t}function mR(f){return Ti(f)&&Ts(f)==Xt}function gR(f){return Ti(f)&&br(f)==un}var vR=Np(zo),yR=Np(function(f,g){return f<=g});function r5(f){if(!f)return[];if(Ga(f))return R0(f)?ts(f):xo(f);if(Oo&&f[Oo])return xu(f[Oo]());var g=Ts(f),C=g==Ct?ec:g==gt?Io:Qp;return C(f)}function Od(f){if(!f)return f===0?f:0;if(f=gc(f),f===he||f===-he){var g=f<0?-1:1;return g*fe}return f===f?f:0}function Ln(f){var g=Od(f),C=g%1;return g===g?C?g-C:g:0}function i5(f){return f?zt(Ln(f),0,se):0}function gc(f){if(typeof f=="number")return f;if(Rl(f))return ue;if(bi(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=bi(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=Lo(f);var C=na.test(f);return C||$l.test(f)?Nc(f.slice(2),C?2:8):gs.test(f)?ue:+f}function s5(f){return Cl(f,Ya(f))}function bR(f){return f?zt(Ln(f),-X,X):f===0?f:0}function xr(f){return f==null?"":Ps(f)}var wR=yh(function(f,g){if(qc(g)||Ga(g)){Cl(g,eo(g),f);return}for(var C in g)jn.call(g,C)&&Ee(f,C,g[C])}),o5=yh(function(f,g){Cl(g,Ya(g),f)}),I0=yh(function(f,g,C,O){Cl(g,Ya(g),f,O)}),xR=yh(function(f,g,C,O){Cl(g,eo(g),f,O)}),_R=pc(xt);function SR(f,g){var C=Nu(f);return g==null?C:Je(C,g)}var AR=Cn(function(f,g){f=Qn(f);var C=-1,O=g.length,Y=O>2?g[2]:t;for(Y&&So(g[0],g[1],Y)&&(O=1);++C<O;)for(var de=g[C],xe=Ya(de),Ne=-1,je=xe.length;++Ne<je;){var it=xe[Ne],st=f[it];(st===t||Wc(st,bs[it])&&!jn.call(f,it))&&(f[it]=de[it])}return f}),CR=Cn(function(f){return f.push(t,cg),gi(a5,t,f)});function ER(f,g){return Me(f,en(g,3),Nr)}function kR(f,g){return Me(f,en(g,3),Tr)}function PR(f,g){return f==null?f:Xn(f,en(g,3),Ya)}function NR(f,g){return f==null?f:Bi(f,en(g,3),Ya)}function TR(f,g){return f&&Nr(f,en(g,3))}function LR(f,g){return f&&Tr(f,en(g,3))}function RR(f){return f==null?[]:Gr(f,eo(f))}function IR(f){return f==null?[]:Gr(f,Ya(f))}function Pb(f,g,C){var O=f==null?t:Br(f,g);return O===t?C:O}function jR(f,g){return f!=null&&pg(f,g,di)}function Nb(f,g){return f!=null&&pg(f,g,yo)}var MR=o0(function(f,g,C){g!=null&&typeof g.toString!="function"&&(g=sr.call(g)),f[g]=C},Lb(Ka)),OR=o0(function(f,g,C){g!=null&&typeof g.toString!="function"&&(g=sr.call(g)),jn.call(f,g)?f[g].push(C):f[g]=[C]},en),DR=Cn(Zs);function eo(f){return Ga(f)?De(f):fa(f)}function Ya(f){return Ga(f)?De(f,!0):Iu(f)}function FR(f,g){var C={};return g=en(g,3),Nr(f,function(O,Y,de){_t(C,g(O,Y,de),O)}),C}function BR(f,g){var C={};return g=en(g,3),Nr(f,function(O,Y,de){_t(C,Y,g(O,Y,de))}),C}var zR=yh(function(f,g,C){Js(f,g,C)}),a5=yh(function(f,g,C,O){Js(f,g,C,O)}),UR=pc(function(f,g){var C={};if(f==null)return C;var O=!1;g=Yn(g,function(de){return de=ba(de,f),O||(O=de.length>1),de}),Cl(f,vf(f),C),O&&(C=yt(C,p|m|b,ug));for(var Y=g.length;Y--;)dc(C,g[Y]);return C});function $R(f,g){return l5(f,vt(en(g)))}var qR=pc(function(f,g){return f==null?{}:fh(f,g)});function l5(f,g){if(f==null)return{};var C=Yn(vf(f),function(O){return[O]});return g=en(g),pa(f,C,function(O,Y){return g(O,Y[0])})}function VR(f,g,C){g=ba(g,f);var O=-1,Y=g.length;for(Y||(Y=1,f=t);++O<Y;){var de=f==null?t:f[Nl(g[O])];de===t&&(O=Y,de=C),f=Md(de)?de.call(f):de}return f}function WR(f,g,C){return f==null?f:_l(f,g,C)}function HR(f,g,C,O){return O=typeof O=="function"?O:t,f==null?f:_l(f,g,C,O)}var c5=ag(eo),u5=ag(Ya);function GR(f,g,C){var O=En(f),Y=O||Eh(f)||Jp(f);if(g=en(g,4),C==null){var de=f&&f.constructor;Y?C=O?new de:[]:bi(f)?C=Md(de)?Nu(vo(f)):{}:C={}}return(Y?ti:Nr)(f,function(xe,Ne,je){return g(C,xe,Ne,je)}),C}function YR(f,g){return f==null?!0:dc(f,g)}function KR(f,g,C){return f==null?f:Cd(f,g,ju(C))}function XR(f,g,C,O){return O=typeof O=="function"?O:t,f==null?f:Cd(f,g,ju(C),O)}function Qp(f){return f==null?[]:Ws(f,eo(f))}function ZR(f){return f==null?[]:Ws(f,Ya(f))}function JR(f,g,C){return C===t&&(C=g,g=t),C!==t&&(C=gc(C),C=C===C?C:0),g!==t&&(g=gc(g),g=g===g?g:0),zt(gc(f),g,C)}function QR(f,g,C){return g=Od(g),C===t?(C=g,g=0):C=Od(C),f=gc(f),ac(f,g,C)}function eI(f,g,C){if(C&&typeof C!="boolean"&&So(f,g,C)&&(g=C=t),C===t&&(typeof g=="boolean"?(C=g,g=t):typeof f=="boolean"&&(C=f,f=t)),f===t&&g===t?(f=0,g=1):(f=Od(f),g===t?(g=f,f=0):g=Od(g)),f>g){var O=f;f=g,g=O}if(C||f%1||g%1){var Y=bd();return ss(f+Y*(g-f+Xl("1e-"+((Y+"").length-1))),g)}return cc(f,g)}var tI=kd(function(f,g,C){return g=g.toLowerCase(),f+(C?d5(g):g)});function d5(f){return Tb(xr(f).toLowerCase())}function h5(f){return f=xr(f),f&&f.replace(Be,yu).replace(dd,"")}function nI(f,g,C){f=xr(f),g=Ps(g);var O=f.length;C=C===t?O:zt(Ln(C),0,O);var Y=C;return C-=g.length,C>=0&&f.slice(C,Y)==g}function rI(f){return f=xr(f),f&&nn.test(f)?f.replace(Ri,bu):f}function iI(f){return f=xr(f),f&&Qi.test(f)?f.replace(Ii,"\\$&"):f}var sI=kd(function(f,g,C){return f+(C?"-":"")+g.toLowerCase()}),oI=kd(function(f,g,C){return f+(C?" ":"")+g.toLowerCase()}),aI=ig("toLowerCase");function lI(f,g,C){f=xr(f),g=Ln(g);var O=g?za(f):0;if(!g||O>=g)return f;var Y=(g-O)/2;return mf($a(Y),C)+f+mf(gl(Y),C)}function cI(f,g,C){f=xr(f),g=Ln(g);var O=g?za(f):0;return g&&O<g?f+mf(g-O,C):f}function uI(f,g,C){f=xr(f),g=Ln(g);var O=g?za(f):0;return g&&O<g?mf(g-O,C)+f:f}function dI(f,g,C){return C||g==null?g=0:g&&(g=+g),bp(xr(f).replace(Si,""),g||0)}function hI(f,g,C){return(C?So(f,g,C):g===t)?g=1:g=Ln(g),uc(xr(f),g)}function fI(){var f=arguments,g=xr(f[0]);return f.length<3?g:g.replace(f[1],f[2])}var pI=kd(function(f,g,C){return f+(C?"_":"")+g.toLowerCase()});function mI(f,g,C){return C&&typeof C!="number"&&So(f,g,C)&&(g=C=t),C=C===t?se:C>>>0,C?(f=xr(f),f&&(typeof g=="string"||g!=null&&!kb(g))&&(g=Ps(g),!g&&aa(f))?wa(ts(f),0,C):f.split(g,C)):[]}var gI=kd(function(f,g,C){return f+(C?" ":"")+Tb(g)});function vI(f,g,C){return f=xr(f),C=C==null?0:zt(Ln(C),0,f.length),g=Ps(g),f.slice(C,C+g.length)==g}function yI(f,g,C){var O=oe.templateSettings;C&&So(f,g,C)&&(g=t),f=xr(f),g=I0({},g,O,lg);var Y=I0({},g.imports,O.imports,lg),de=eo(Y),xe=Ws(Y,de),Ne,je,it=0,st=g.interpolate||Se,dt="__p += '",kt=pl((g.escape||Se).source+"|"+st.source+"|"+(st===ei?mi:Se).source+"|"+(g.evaluate||Se).source+"|$","g"),Gt="//# sourceURL="+(jn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sf+"]")+`
`;f.replace(kt,function(ln,Gn,tr,Il,Sa,jl){return tr||(tr=Il),dt+=f.slice(it,jl).replace(Ve,Mc),Gn&&(Ne=!0,dt+=`' +
__e(`+Gn+`) +
'`),Sa&&(je=!0,dt+=`';
`+Sa+`;
__p += '`),tr&&(dt+=`' +
((__t = (`+tr+`)) == null ? '' : __t) +
'`),it=jl+ln.length,ln}),dt+=`';
`;var an=jn.call(g,"variable")&&g.variable;if(!an)dt=`with (obj) {
`+dt+`
}
`;else if(co.test(an))throw new $t(a);dt=(je?dt.replace(Un,""):dt).replace(ea,"$1").replace(vr,"$1;"),dt="function("+(an||"obj")+`) {
`+(an?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ne?", __e = _.escape":"")+(je?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+dt+`return __p
}`;var On=p5(function(){return gn(de,Gt+"return "+dt).apply(t,xe)});if(On.source=dt,Eb(On))throw On;return On}function bI(f){return xr(f).toLowerCase()}function wI(f){return xr(f).toUpperCase()}function xI(f,g,C){if(f=xr(f),f&&(C||g===t))return Lo(f);if(!f||!(g=Ps(g)))return f;var O=ts(f),Y=ts(g),de=vu(O,Y),xe=Ic(O,Y)+1;return wa(O,de,xe).join("")}function _I(f,g,C){if(f=xr(f),f&&(C||g===t))return f.slice(0,la(f)+1);if(!f||!(g=Ps(g)))return f;var O=ts(f),Y=Ic(O,ts(g))+1;return wa(O,0,Y).join("")}function SI(f,g,C){if(f=xr(f),f&&(C||g===t))return f.replace(Si,"");if(!f||!(g=Ps(g)))return f;var O=ts(f),Y=vu(O,ts(g));return wa(O,Y).join("")}function AI(f,g){var C=ve,O=$;if(bi(g)){var Y="separator"in g?g.separator:Y;C="length"in g?Ln(g.length):C,O="omission"in g?Ps(g.omission):O}f=xr(f);var de=f.length;if(aa(f)){var xe=ts(f);de=xe.length}if(C>=de)return f;var Ne=C-za(O);if(Ne<1)return O;var je=xe?wa(xe,0,Ne).join(""):f.slice(0,Ne);if(Y===t)return je+O;if(xe&&(Ne+=je.length-Ne),kb(Y)){if(f.slice(Ne).search(Y)){var it,st=je;for(Y.global||(Y=pl(Y.source,xr(Us.exec(Y))+"g")),Y.lastIndex=0;it=Y.exec(st);)var dt=it.index;je=je.slice(0,dt===t?Ne:dt)}}else if(f.indexOf(Ps(Y),Ne)!=Ne){var kt=je.lastIndexOf(Y);kt>-1&&(je=je.slice(0,kt))}return je+O}function CI(f){return f=xr(f),f&&Sr.test(f)?f.replace(pi,tc):f}var EI=kd(function(f,g,C){return f+(C?" ":"")+g.toUpperCase()}),Tb=ig("toUpperCase");function f5(f,g,C){return f=xr(f),g=C?t:g,g===t?wu(f)?nc(f):Ae(f):f.match(g)||[]}var p5=Cn(function(f,g){try{return gi(f,t,g)}catch(C){return Eb(C)?C:new $t(C)}}),kI=pc(function(f,g){return ti(g,function(C){C=Nl(C),_t(f,C,pt(f[C],f))}),f});function PI(f){var g=f==null?0:f.length,C=en();return f=g?Yn(f,function(O){if(typeof O[1]!="function")throw new Pi(o);return[C(O[0]),O[1]]}):[],Cn(function(O){for(var Y=-1;++Y<g;){var de=f[Y];if(gi(de[0],this,O))return gi(de[1],this,O)}})}function NI(f){return Kn(yt(f,p))}function Lb(f){return function(){return f}}function TI(f,g){return f==null||f!==f?g:f}var LI=kp(),RI=kp(!0);function Ka(f){return f}function Rb(f){return wl(typeof f=="function"?f:yt(f,p))}function II(f){return dh(yt(f,p))}function jI(f,g){return wr(f,yt(g,p))}var MI=Cn(function(f,g){return function(C){return Zs(C,f,g)}}),OI=Cn(function(f,g){return function(C){return Zs(f,C,g)}});function Ib(f,g,C){var O=eo(g),Y=Gr(g,O);C==null&&!(bi(g)&&(Y.length||!O.length))&&(C=g,g=f,f=this,Y=Gr(g,eo(g)));var de=!(bi(C)&&"chain"in C)||!!C.chain,xe=Md(f);return ti(Y,function(Ne){var je=g[Ne];f[Ne]=je,xe&&(f.prototype[Ne]=function(){var it=this.__chain__;if(de||it){var st=f(this.__wrapped__),dt=st.__actions__=xo(this.__actions__);return dt.push({func:je,args:arguments,thisArg:f}),st.__chain__=it,st}return je.apply(f,To([this.value()],arguments))})}),f}function DI(){return fr._===this&&(fr._=Wr),this}function jb(){}function FI(f){return f=Ln(f),Cn(function(g){return hh(g,f)})}var BI=Pp(Yn),zI=Pp(Rc),UI=Pp(P);function m5(f){return It(f)?rn(Nl(f)):Or(f)}function $I(f){return function(g){return f==null?t:Br(f,g)}}var qI=og(),VI=og(!0);function Mb(){return[]}function Ob(){return!1}function WI(){return{}}function HI(){return""}function GI(){return!0}function YI(f,g){if(f=Ln(f),f<1||f>X)return[];var C=se,O=ss(f,se);g=en(g),f-=se;for(var Y=Ei(O,g);++C<f;)g(C);return Y}function KI(f){return En(f)?Yn(f,Nl):Rl(f)?[f]:xo(yg(xr(f)))}function XI(f){var g=++Mi;return xr(f)+g}var ZI=pf(function(f,g){return f+g},0),JI=Ns("ceil"),QI=pf(function(f,g){return f/g},1),ej=Ns("floor");function tj(f){return f&&f.length?yr(f,Ka,Lr):t}function nj(f,g){return f&&f.length?yr(f,en(g,2),Lr):t}function rj(f){return pn(f,Ka)}function ij(f,g){return pn(f,en(g,2))}function sj(f){return f&&f.length?yr(f,Ka,zo):t}function oj(f,g){return f&&f.length?yr(f,en(g,2),zo):t}var aj=pf(function(f,g){return f*g},1),lj=Ns("round"),cj=pf(function(f,g){return f-g},0);function uj(f){return f&&f.length?qr(f,Ka):0}function dj(f,g){return f&&f.length?qr(f,en(g,2)):0}return oe.after=ke,oe.ary=qe,oe.assign=wR,oe.assignIn=o5,oe.assignInWith=I0,oe.assignWith=xR,oe.at=_R,oe.before=ct,oe.bind=pt,oe.bindAll=kI,oe.bindKey=lt,oe.castArray=WL,oe.chain=Vp,oe.chunk=Op,oe.compact=bg,oe.concat=Wa,oe.cond=PI,oe.conforms=NI,oe.constant=Lb,oe.countBy=E0,oe.create=SR,oe.curry=Nt,oe.curryRight=Dt,oe.debounce=Ft,oe.defaults=AR,oe.defaultsDeep=CR,oe.defer=yi,oe.delay=ze,oe.difference=er,oe.differenceBy=cs,oe.differenceWith=Ni,oe.drop=Rs,oe.dropRight=_a,oe.dropRightWhile=Ah,oe.dropWhile=zi,oe.fill=Sf,oe.filter=Gp,oe.flatMap=Lg,oe.flatMapDeep=xb,oe.flatMapDepth=N0,oe.flatten=Dp,oe.flattenDeep=Cf,oe.flattenDepth=$o,oe.flip=Le,oe.flow=LI,oe.flowRight=RI,oe.fromPairs=wg,oe.functions=RR,oe.functionsIn=IR,oe.groupBy=Rg,oe.initial=Fp,oe.intersection=xg,oe.intersectionBy=Fu,oe.intersectionWith=Bp,oe.invert=MR,oe.invertBy=OR,oe.invokeMap=T0,oe.iteratee=Rb,oe.keyBy=_b,oe.keys=eo,oe.keysIn=Ya,oe.map=jd,oe.mapKeys=FR,oe.mapValues=BR,oe.matches=II,oe.matchesProperty=jI,oe.memoize=Ue,oe.merge=zR,oe.mergeWith=a5,oe.method=MI,oe.methodOf=OI,oe.mixin=Ib,oe.negate=vt,oe.nthArg=FI,oe.omit=UR,oe.omitBy=$R,oe.once=qt,oe.orderBy=Sb,oe.over=BI,oe.overArgs=Jt,oe.overEvery=zI,oe.overSome=UI,oe.partial=Kt,oe.partialRight=on,oe.partition=Nf,oe.pick=qR,oe.pickBy=l5,oe.property=m5,oe.propertyOf=$I,oe.pull=zp,oe.pullAll=kf,oe.pullAllBy=Co,oe.pullAllWith=zu,oe.pullAt=Tl,oe.range=qI,oe.rangeRight=VI,oe.rearg=us,oe.reject=l,oe.remove=qo,oe.rest=ar,oe.reverse=Up,oe.sampleSize=v,oe.set=WR,oe.setWith=HR,oe.shuffle=S,oe.slice=Sg,oe.sortBy=Z,oe.sortedUniq=Eg,oe.sortedUniqBy=Ld,oe.split=mI,oe.spread=$u,oe.tail=b0,oe.take=w0,oe.takeRight=kg,oe.takeRightWhile=$p,oe.takeWhile=db,oe.tap=yb,oe.throttle=Cb,oe.thru=Ll,oe.toArray=r5,oe.toPairs=c5,oe.toPairsIn=u5,oe.toPath=KI,oe.toPlainObject=s5,oe.transform=GR,oe.unary=qL,oe.union=hb,oe.unionBy=x0,oe.unionWith=_0,oe.uniq=Rd,oe.uniqBy=fb,oe.uniqWith=Ch,oe.unset=YR,oe.unzip=qp,oe.unzipWith=ni,oe.update=KR,oe.updateWith=XR,oe.values=Qp,oe.valuesIn=ZR,oe.without=pb,oe.words=f5,oe.wrap=VL,oe.xor=S0,oe.xorBy=mb,oe.xorWith=gb,oe.zip=A0,oe.zipObject=C0,oe.zipObjectDeep=vb,oe.zipWith=Ha,oe.entries=c5,oe.entriesIn=u5,oe.extend=o5,oe.extendWith=I0,Ib(oe,oe),oe.add=ZI,oe.attempt=p5,oe.camelCase=tI,oe.capitalize=d5,oe.ceil=JI,oe.clamp=JR,oe.clone=HL,oe.cloneDeep=YL,oe.cloneDeepWith=KL,oe.cloneWith=GL,oe.conformsTo=XL,oe.deburr=h5,oe.defaultTo=TI,oe.divide=QI,oe.endsWith=nI,oe.eq=Wc,oe.escape=rI,oe.escapeRegExp=iI,oe.every=k0,oe.find=Yp,oe.findIndex=Du,oe.findKey=ER,oe.findLast=P0,oe.findLastIndex=Af,oe.findLastKey=kR,oe.floor=ej,oe.forEach=Kp,oe.forEachRight=Pf,oe.forIn=PR,oe.forInRight=NR,oe.forOwn=TR,oe.forOwnRight=LR,oe.get=Pb,oe.gt=ZL,oe.gte=JL,oe.has=jR,oe.hasIn=Nb,oe.head=Nd,oe.identity=Ka,oe.includes=Xp,oe.indexOf=Vc,oe.inRange=QR,oe.invoke=DR,oe.isArguments=Tf,oe.isArray=En,oe.isArrayBuffer=QL,oe.isArrayLike=Ga,oe.isArrayLikeObject=Ui,oe.isBoolean=eR,oe.isBuffer=Eh,oe.isDate=tR,oe.isElement=nR,oe.isEmpty=rR,oe.isEqual=iR,oe.isEqualWith=sR,oe.isError=Eb,oe.isFinite=oR,oe.isFunction=Md,oe.isInteger=Q_,oe.isLength=L0,oe.isMap=e5,oe.isMatch=aR,oe.isMatchWith=lR,oe.isNaN=cR,oe.isNative=uR,oe.isNil=hR,oe.isNull=dR,oe.isNumber=t5,oe.isObject=bi,oe.isObjectLike=Ti,oe.isPlainObject=Ig,oe.isRegExp=kb,oe.isSafeInteger=fR,oe.isSet=n5,oe.isString=R0,oe.isSymbol=Rl,oe.isTypedArray=Jp,oe.isUndefined=pR,oe.isWeakMap=mR,oe.isWeakSet=gR,oe.join=Bu,oe.kebabCase=sI,oe.last=Ao,oe.lastIndexOf=Ef,oe.lowerCase=oI,oe.lowerFirst=aI,oe.lt=vR,oe.lte=yR,oe.max=tj,oe.maxBy=nj,oe.mean=rj,oe.meanBy=ij,oe.min=sj,oe.minBy=oj,oe.stubArray=Mb,oe.stubFalse=Ob,oe.stubObject=WI,oe.stubString=HI,oe.stubTrue=GI,oe.multiply=aj,oe.nth=_g,oe.noConflict=DI,oe.noop=jb,oe.now=be,oe.pad=lI,oe.padEnd=cI,oe.padStart=uI,oe.parseInt=dI,oe.random=eI,oe.reduce=Ab,oe.reduceRight=Zp,oe.repeat=hI,oe.replace=fI,oe.result=VR,oe.round=lj,oe.runInContext=Re,oe.sample=d,oe.size=R,oe.snakeCase=pI,oe.some=M,oe.sortedIndex=Ag,oe.sortedIndexBy=ub,oe.sortedIndexOf=Uu,oe.sortedLastIndex=y0,oe.sortedLastIndexBy=Cg,oe.sortedLastIndexOf=Td,oe.startCase=gI,oe.startsWith=vI,oe.subtract=cj,oe.sum=uj,oe.sumBy=dj,oe.template=yI,oe.times=YI,oe.toFinite=Od,oe.toInteger=Ln,oe.toLength=i5,oe.toLower=bI,oe.toNumber=gc,oe.toSafeInteger=bR,oe.toString=xr,oe.toUpper=wI,oe.trim=xI,oe.trimEnd=_I,oe.trimStart=SI,oe.truncate=AI,oe.unescape=CI,oe.uniqueId=XI,oe.upperCase=EI,oe.upperFirst=Tb,oe.each=Kp,oe.eachRight=Pf,oe.first=Nd,Ib(oe,function(){var f={};return Nr(oe,function(g,C){jn.call(oe.prototype,C)||(f[C]=g)}),f}(),{chain:!1}),oe.VERSION=r,ti(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){oe[f].placeholder=oe}),ti(["drop","take"],function(f,g){yn.prototype[f]=function(C){C=C===t?1:ci(Ln(C),0);var O=this.__filtered__&&!g?new yn(this):this.clone();return O.__filtered__?O.__takeCount__=ss(C,O.__takeCount__):O.__views__.push({size:ss(C,se),type:f+(O.__dir__<0?"Right":"")}),O},yn.prototype[f+"Right"]=function(C){return this.reverse()[f](C).reverse()}}),ti(["filter","map","takeWhile"],function(f,g){var C=g+1,O=C==ne||C==G;yn.prototype[f]=function(Y){var de=this.clone();return de.__iteratees__.push({iteratee:en(Y,3),type:C}),de.__filtered__=de.__filtered__||O,de}}),ti(["head","last"],function(f,g){var C="take"+(g?"Right":"");yn.prototype[f]=function(){return this[C](1).value()[0]}}),ti(["initial","tail"],function(f,g){var C="drop"+(g?"":"Right");yn.prototype[f]=function(){return this.__filtered__?new yn(this):this[C](1)}}),yn.prototype.compact=function(){return this.filter(Ka)},yn.prototype.find=function(f){return this.filter(f).head()},yn.prototype.findLast=function(f){return this.reverse().find(f)},yn.prototype.invokeMap=Cn(function(f,g){return typeof f=="function"?new yn(this):this.map(function(C){return Zs(C,f,g)})}),yn.prototype.reject=function(f){return this.filter(vt(en(f)))},yn.prototype.slice=function(f,g){f=Ln(f);var C=this;return C.__filtered__&&(f>0||g<0)?new yn(C):(f<0?C=C.takeRight(-f):f&&(C=C.drop(f)),g!==t&&(g=Ln(g),C=g<0?C.dropRight(-g):C.take(g-f)),C)},yn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},yn.prototype.toArray=function(){return this.take(se)},Nr(yn.prototype,function(f,g){var C=/^(?:filter|find|map|reject)|While$/.test(g),O=/^(?:head|last)$/.test(g),Y=oe[O?"take"+(g=="last"?"Right":""):g],de=O||/^find/.test(g);Y&&(oe.prototype[g]=function(){var xe=this.__wrapped__,Ne=O?[1]:arguments,je=xe instanceof yn,it=Ne[0],st=je||En(xe),dt=function(Gn){var tr=Y.apply(oe,To([Gn],Ne));return O&&kt?tr[0]:tr};st&&C&&typeof it=="function"&&it.length!=1&&(je=st=!1);var kt=this.__chain__,Gt=!!this.__actions__.length,an=de&&!kt,On=je&&!Gt;if(!de&&st){xe=On?xe:new yn(this);var ln=f.apply(xe,Ne);return ln.__actions__.push({func:Ll,args:[dt],thisArg:t}),new Oi(ln,kt)}return an&&On?f.apply(this,Ne):(ln=this.thru(dt),an?O?ln.value()[0]:ln.value():ln)})}),ti(["pop","push","shift","sort","splice","unshift"],function(f){var g=rs[f],C=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",O=/^(?:pop|shift)$/.test(f);oe.prototype[f]=function(){var Y=arguments;if(O&&!this.__chain__){var de=this.value();return g.apply(En(de)?de:[],Y)}return this[C](function(xe){return g.apply(En(xe)?xe:[],Y)})}}),Nr(yn.prototype,function(f,g){var C=oe[g];if(C){var O=C.name+"";jn.call(Pu,O)||(Pu[O]=[]),Pu[O].push({name:g,func:C})}}),Pu[wh(t,E).name]=[{name:"wrapper",func:t}],yn.prototype.clone=xd,yn.prototype.reverse=af,yn.prototype.value=yl,oe.prototype.at=Wp,oe.prototype.chain=Id,oe.prototype.commit=Hp,oe.prototype.next=Pg,oe.prototype.plant=bb,oe.prototype.reverse=Tg,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=wb,oe.prototype.first=oe.prototype.head,Oo&&(oe.prototype[Oo]=Ng),oe},Gs=fl();Ci?((Ci.exports=Gs)._=Gs,Vs._=Gs):fr._=Gs}).call(RV)}(ev,ev.exports)),ev.exports}var une=IV();function kn(...n){return LV(lN(n))}function dne(n,e){const t={position:n.position,size:n.size,styles:n.styles,visible:n.visible!==!1};if(e==="desktop")return t;const r=n.layouts?.[e]||{};return{position:r.position||t.position,size:r.size||t.size,styles:{...t.styles,...r.styles||{}},visible:r.visible!==void 0?r.visible:t.visible}}function hne(n){return typeof n!="string"?(console.warn("sanitizeFilename expects a string argument"),`invalid_filename_${Date.now()}`):n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"")}function fne(n,e=!0){const t=Number(n);if(isNaN(t))return e?"R$ 0,00":"0,00";const r={style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2};return e?t.toLocaleString("pt-BR",r):t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function UA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function k1(...n){return e=>{let t=!1;const r=n.map(i=>{const s=UA(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():UA(n[i],null)}}}}function rr(...n){return N.useCallback(k1(...n),n)}function Jf(n){const e=MV(n),t=N.forwardRef((r,i)=>{const{children:s,...o}=r,a=N.Children.toArray(s),c=a.find(OV);if(c){const u=c.props.children,h=a.map(p=>p===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:p);return y.jsx(e,{...o,ref:i,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return y.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var jV=Jf("Slot");function MV(n){const e=N.forwardRef((t,r)=>{const{children:i,...s}=t;if(N.isValidElement(i)){const o=FV(i),a=DV(s,i.props);return i.type!==N.Fragment&&(a.ref=r?k1(r,o):o),N.cloneElement(i,a)}return N.Children.count(i)>1?N.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var pN=Symbol("radix.slottable");function pne(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=pN,e}function OV(n){return N.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===pN}function DV(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const c=s(...a);return i(...a),c}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function FV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const $A=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,qA=lN,Hx=(n,e)=>t=>{var r;if(e?.variants==null)return qA(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=t?.[u],p=s?.[u];if(h===null)return null;const m=$A(h)||$A(p);return i[u][m]}),a=t&&Object.entries(t).reduce((u,h)=>{let[p,m]=h;return m===void 0||(u[p]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:p,className:m,...b}=h;return Object.entries(b).every(_=>{let[x,k]=_;return Array.isArray(k)?k.includes({...s,...a}[x]):{...s,...a}[x]===k})?[...u,p,m]:u},[]);return qA(n,o,c,t?.class,t?.className)},BV=Hx("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-button-primary text-button-primary-foreground hover:bg-button-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),mn=vn.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?jV:"button";return y.jsx(o,{className:kn(BV({variant:e,size:t,className:n})),ref:s,...i})});mn.displayName="Button";const um=({icon:n,text:e,active:t,onClick:r,collapsed:i,isBottomIcon:s=!1,hideActiveIndicator:o=!1,customStyle:a="",activeStyle:c=""})=>y.jsxs("li",{className:kn(`
      relative flex items-center py-2 px-3 font-medium rounded-md cursor-pointer
      transition-colors group text-sm`,t?c||"bg-primary text-primary-foreground":`text-muted-foreground/80 dark:text-foreground/80 hover:bg-accent hover:text-accent-foreground ${s&&i?"py-2 justify-center":""}`,a),onClick:r,children:[y.jsx(n,{className:`w-4 h-4 ${i?"mx-auto":"mr-3"}`}),!i&&y.jsx("span",{className:"transition-opacity duration-300",children:e}),!i&&t&&!o&&y.jsx(Ki.div,{layoutId:"activeIndicator",className:"absolute -left-1 w-1 h-5 bg-button-primary-foreground rounded-r-md",initial:!1,animate:{opacity:1},transition:{type:"spring",stiffness:300,damping:30}}),i&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
        invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:e})]}),zV=({activeTab:n,setActiveTab:e,collapsed:t,setCollapsed:r})=>{const{user:i,logout:s,settings:o,isFeatureEnabled:a}=Po(),{theme:c}=AE(),u=sp(),h=async()=>{try{await s()&&u("/login",{replace:!0})}catch{}},p=[{id:"dashboard",text:"Dashboard",icon:Yq,path:"/dashboard",feature:null},{id:"workflow",text:"Trabalhos",icon:Pv,path:"/workflow",feature:null},{id:"clients",text:"Clientes",icon:oN,path:"/clients",feature:null},{id:"financial",text:"Financeiro",icon:Nv,path:"/financial",feature:null},{id:"calendar",text:"Agenda",icon:YP,path:"/calendar",feature:"agenda_pro"},{id:"reports",text:"Relatórios",icon:HP,path:"/reports",feature:"relatorios"},{id:"service-packages",text:"Pacotes",icon:Pv,path:"/service-packages",feature:"pacotes_servico"},{id:"my-setup",text:"Meu Setup",icon:eN,path:"/my-setup",feature:"meu_setup"},{id:"precifique",text:"Precifique",icon:Wh,path:"/precifique",feature:"precifique"},{id:"reserva-inteligente",text:"Reserva",icon:qx,path:"/reserva-inteligente",feature:"reserva_inteligente"}].filter(U=>!U.feature||a(U.feature)),m=o?.user_name||i?.user_metadata?.full_name||i?.email||"Usuário",b=o?.contact_email||i?.email||"Não informado",_=o?.profile_photo||i?.user_metadata?.avatar_url,x="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20escuro%20gofotografo.png",k="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png",E="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//favicon%20gofotografo.png",T=c==="dark"?x:k,L=E,j=()=>{e("account-settings"),u("/account-settings")},B=(U,q)=>{e(U),u(q),U==="quadros"&&!t?r(!0):U!=="quadros"&&t&&q.startsWith("/quadros")};return y.jsxs(Ki.nav,{initial:!1,animate:{width:t?"4rem":"16rem"},className:`
        h-screen bg-card border-r border-border 
        flex flex-col p-2 transition-width duration-300 ease-in-out fixed left-0 top-0 z-30 hidden md:flex
      `,children:[y.jsx("div",{className:"flex items-center justify-center h-16 pt-4 mb-4",children:y.jsx(EM,{to:"/dashboard",onClick:()=>B("dashboard","/dashboard"),children:y.jsx(ka,{mode:"wait",initial:!1,children:y.jsx(Ki.img,{src:t?L:T,alt:"Logotipo",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`transition-all duration-300 ${t?"h-8 w-auto":"h-9 w-auto"}`},t?"collapsed":"full")})})}),y.jsx("ul",{className:"flex-grow space-y-3 overflow-y-auto overflow-x-hidden scrollbar-thin",children:p.map(U=>y.jsx(um,{icon:U.icon,text:U.text,active:n===U.id,onClick:()=>B(U.id,U.path),collapsed:t,customStyle:U.customStyle},U.id))}),!1,y.jsx("div",{className:"border-t border-border/50 my-2"}),a("propostas_avancadas")&&y.jsx("div",{className:"mb-2",children:y.jsx(um,{icon:Wq,text:"GO.STUDIO",active:n==="studio",onClick:()=>B("studio","/studio"),collapsed:t})}),a("quadros")&&y.jsx("div",{className:"mb-2",children:y.jsx(um,{icon:sN,text:"Quadros",active:n==="quadros",onClick:()=>B("quadros","/quadros"),collapsed:t,hideActiveIndicator:!1})}),y.jsx("div",{className:"mb-2",children:y.jsx(um,{icon:$x,text:"Indique e Ganhe",active:n==="referrals",onClick:()=>B("referrals","/referrals"),collapsed:t,customStyle:"border border-green-500/50 text-green-400 hover:bg-green-500/10 rounded-md",activeStyle:"bg-green-500/10 text-green-400",hideActiveIndicator:!0})}),y.jsxs("div",{className:"mt-auto border-t border-border pt-2",children:[y.jsxs("div",{className:`
            flex items-center p-2 rounded-lg cursor-pointer
            ${t?"justify-center":"justify-start"}
            hover:bg-accent transition-colors group
          `,onClick:j,title:"Minha Conta",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-foreground border-2 border-button-primary-foreground overflow-hidden flex-shrink-0",children:_?y.jsx("img",{src:_,alt:m,className:"w-full h-full object-cover"}):m?.charAt(0).toUpperCase()}),!t&&y.jsxs("div",{className:"ml-2 overflow-hidden",children:[y.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:m}),y.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:b})]}),t&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
              invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:m})]}),y.jsxs("div",{className:`flex ${t?"flex-col items-center space-y-1":"items-center justify-around"} mt-1`,children:[y.jsx(um,{icon:iN,text:"Configurações",active:n==="settings",onClick:()=>B("settings","/settings"),collapsed:t,isBottomIcon:!0}),y.jsx(um,{icon:tN,text:"Sair",active:!1,onClick:h,collapsed:t,isBottomIcon:!0})]})]})]})};function Bt(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function UV(n,e){const t=N.createContext(e),r=s=>{const{children:o,...a}=s,c=N.useMemo(()=>a,Object.values(a));return y.jsx(t.Provider,{value:c,children:o})};r.displayName=n+"Provider";function i(s){const o=N.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function id(n,e=[]){let t=[];function r(s,o){const a=N.createContext(o),c=t.length;t=[...t,o];const u=p=>{const{scope:m,children:b,..._}=p,x=m?.[n]?.[c]||a,k=N.useMemo(()=>_,Object.values(_));return y.jsx(x.Provider,{value:k,children:b})};u.displayName=s+"Provider";function h(p,m){const b=m?.[n]?.[c]||a,_=N.useContext(b);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[u,h]}const i=()=>{const s=t.map(o=>N.createContext(o));return function(a){const c=a?.[n]||s;return N.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return i.scopeName=n,[r,$V(i,...e)]}function $V(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const p=c(s)[`__scope${u}`];return{...a,...p}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var ms=globalThis?.document?N.useLayoutEffect:()=>{},qV=tx[" useInsertionEffect ".trim().toString()]||ms;function qm({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=VV({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:i;{const h=N.useRef(n!==void 0);N.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const u=N.useCallback(h=>{if(a){const p=WV(h)?h(n):h;p!==n&&o.current?.(p)}else s(h)},[a,n,s,o]);return[c,u]}function VV({defaultProp:n,onChange:e}){const[t,r]=N.useState(n),i=N.useRef(t),s=N.useRef(e);return qV(()=>{s.current=e},[e]),N.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function WV(n){return typeof n=="function"}var HV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wn=HV.reduce((n,e)=>{const t=Jf(`Primitive.${e}`),r=N.forwardRef((i,s)=>{const{asChild:o,...a}=i,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(c,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function mN(n,e){n&&zv.flushSync(()=>n.dispatchEvent(e))}function Gx(n){const e=n+"CollectionProvider",[t,r]=id(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:k,children:E}=x,T=vn.useRef(null),L=vn.useRef(new Map).current;return y.jsx(i,{scope:k,itemMap:L,collectionRef:T,children:E})};o.displayName=e;const a=n+"CollectionSlot",c=Jf(a),u=vn.forwardRef((x,k)=>{const{scope:E,children:T}=x,L=s(a,E),j=rr(k,L.collectionRef);return y.jsx(c,{ref:j,children:T})});u.displayName=a;const h=n+"CollectionItemSlot",p="data-radix-collection-item",m=Jf(h),b=vn.forwardRef((x,k)=>{const{scope:E,children:T,...L}=x,j=vn.useRef(null),B=rr(k,j),W=s(h,E);return vn.useEffect(()=>(W.itemMap.set(j,{ref:j,...L}),()=>void W.itemMap.delete(j))),y.jsx(m,{[p]:"",ref:B,children:T})});b.displayName=h;function _(x){const k=s(n+"CollectionConsumer",x);return vn.useCallback(()=>{const T=k.collectionRef.current;if(!T)return[];const L=Array.from(T.querySelectorAll(`[${p}]`));return Array.from(k.itemMap.values()).sort((W,U)=>L.indexOf(W.ref.current)-L.indexOf(U.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:o,Slot:u,ItemSlot:b},_,r]}var GV=N.createContext(void 0);function P1(n){const e=N.useContext(GV);return n||e||"ltr"}function oo(n){const e=N.useRef(n);return N.useEffect(()=>{e.current=n}),N.useMemo(()=>(...t)=>e.current?.(...t),[])}function YV(n,e=globalThis?.document){const t=oo(n);N.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var KV="DismissableLayer",b2="dismissableLayer.update",XV="dismissableLayer.pointerDownOutside",ZV="dismissableLayer.focusOutside",VA,gN=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),N1=N.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=n,u=N.useContext(gN),[h,p]=N.useState(null),m=h?.ownerDocument??globalThis?.document,[,b]=N.useState({}),_=rr(e,U=>p(U)),x=Array.from(u.layers),[k]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=x.indexOf(k),T=h?x.indexOf(h):-1,L=u.layersWithOutsidePointerEventsDisabled.size>0,j=T>=E,B=eW(U=>{const q=U.target,ie=[...u.branches].some(ve=>ve.contains(q));!j||ie||(i?.(U),o?.(U),U.defaultPrevented||a?.())},m),W=tW(U=>{const q=U.target;[...u.branches].some(ve=>ve.contains(q))||(s?.(U),o?.(U),U.defaultPrevented||a?.())},m);return YV(U=>{T===u.layers.size-1&&(r?.(U),!U.defaultPrevented&&a&&(U.preventDefault(),a()))},m),N.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(VA=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),WA(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=VA)}},[h,m,t,u]),N.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),WA())},[h,u]),N.useEffect(()=>{const U=()=>b({});return document.addEventListener(b2,U),()=>document.removeEventListener(b2,U)},[]),y.jsx(wn.div,{...c,ref:_,style:{pointerEvents:L?j?"auto":"none":void 0,...n.style},onFocusCapture:Bt(n.onFocusCapture,W.onFocusCapture),onBlurCapture:Bt(n.onBlurCapture,W.onBlurCapture),onPointerDownCapture:Bt(n.onPointerDownCapture,B.onPointerDownCapture)})});N1.displayName=KV;var JV="DismissableLayerBranch",QV=N.forwardRef((n,e)=>{const t=N.useContext(gN),r=N.useRef(null),i=rr(e,r);return N.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),y.jsx(wn.div,{...n,ref:i})});QV.displayName=JV;function eW(n,e=globalThis?.document){const t=oo(n),r=N.useRef(!1),i=N.useRef(()=>{});return N.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){vN(XV,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function tW(n,e=globalThis?.document){const t=oo(n),r=N.useRef(!1);return N.useEffect(()=>{const i=s=>{s.target&&!r.current&&vN(ZV,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function WA(){const n=new CustomEvent(b2);document.dispatchEvent(n)}function vN(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?mN(i,s):i.dispatchEvent(s)}var dw=0;function Yx(){N.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??HA()),document.body.insertAdjacentElement("beforeend",n[1]??HA()),dw++,()=>{dw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),dw--}},[])}function HA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var hw="focusScope.autoFocusOnMount",fw="focusScope.autoFocusOnUnmount",GA={bubbles:!1,cancelable:!0},nW="FocusScope",T1=N.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=n,[a,c]=N.useState(null),u=oo(i),h=oo(s),p=N.useRef(null),m=rr(e,x=>c(x)),b=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let x=function(L){if(b.paused||!a)return;const j=L.target;a.contains(j)?p.current=j:Ih(p.current,{select:!0})},k=function(L){if(b.paused||!a)return;const j=L.relatedTarget;j!==null&&(a.contains(j)||Ih(p.current,{select:!0}))},E=function(L){if(document.activeElement===document.body)for(const B of L)B.removedNodes.length>0&&Ih(a)};document.addEventListener("focusin",x),document.addEventListener("focusout",k);const T=new MutationObserver(E);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",k),T.disconnect()}}},[r,a,b.paused]),N.useEffect(()=>{if(a){KA.add(b);const x=document.activeElement;if(!a.contains(x)){const E=new CustomEvent(hw,GA);a.addEventListener(hw,u),a.dispatchEvent(E),E.defaultPrevented||(rW(lW(yN(a)),{select:!0}),document.activeElement===x&&Ih(a))}return()=>{a.removeEventListener(hw,u),setTimeout(()=>{const E=new CustomEvent(fw,GA);a.addEventListener(fw,h),a.dispatchEvent(E),E.defaultPrevented||Ih(x??document.body,{select:!0}),a.removeEventListener(fw,h),KA.remove(b)},0)}}},[a,u,h,b]);const _=N.useCallback(x=>{if(!t&&!r||b.paused)return;const k=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,E=document.activeElement;if(k&&E){const T=x.currentTarget,[L,j]=iW(T);L&&j?!x.shiftKey&&E===j?(x.preventDefault(),t&&Ih(L,{select:!0})):x.shiftKey&&E===L&&(x.preventDefault(),t&&Ih(j,{select:!0})):E===T&&x.preventDefault()}},[t,r,b.paused]);return y.jsx(wn.div,{tabIndex:-1,...o,ref:m,onKeyDown:_})});T1.displayName=nW;function rW(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Ih(r,{select:e}),document.activeElement!==t)return}function iW(n){const e=yN(n),t=YA(e,n),r=YA(e.reverse(),n);return[t,r]}function yN(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function YA(n,e){for(const t of n)if(!sW(t,{upTo:e}))return t}function sW(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function oW(n){return n instanceof HTMLInputElement&&"select"in n}function Ih(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&oW(n)&&e&&n.select()}}var KA=aW();function aW(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=XA(n,e),n.unshift(e)},remove(e){n=XA(n,e),n[0]?.resume()}}}function XA(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function lW(n){return n.filter(e=>e.tagName!=="A")}var cW=tx[" useId ".trim().toString()]||(()=>{}),uW=0;function Jd(n){const[e,t]=N.useState(cW());return ms(()=>{t(r=>r??String(uW++))},[n]),e?`radix-${e}`:""}const dW=["top","right","bottom","left"],Hh=Math.min,Dl=Math.max,Zy=Math.round,ty=Math.floor,Qu=n=>({x:n,y:n}),hW={left:"right",right:"left",bottom:"top",top:"bottom"},fW={start:"end",end:"start"};function w2(n,e,t){return Dl(n,Hh(e,t))}function th(n,e){return typeof n=="function"?n(e):n}function nh(n){return n.split("-")[0]}function Zm(n){return n.split("-")[1]}function Kx(n){return n==="x"?"y":"x"}function Xx(n){return n==="y"?"height":"width"}function Xu(n){return["top","bottom"].includes(nh(n))?"y":"x"}function Zx(n){return Kx(Xu(n))}function pW(n,e,t){t===void 0&&(t=!1);const r=Zm(n),i=Zx(n),s=Xx(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Jy(o)),[o,Jy(o)]}function mW(n){const e=Jy(n);return[x2(n),e,x2(e)]}function x2(n){return n.replace(/start|end/g,e=>fW[e])}function gW(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function vW(n,e,t,r){const i=Zm(n);let s=gW(nh(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(x2)))),s}function Jy(n){return n.replace(/left|right|bottom|top/g,e=>hW[e])}function yW(n){return{top:0,right:0,bottom:0,left:0,...n}}function bN(n){return typeof n!="number"?yW(n):{top:n,right:n,bottom:n,left:n}}function Qy(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function ZA(n,e,t){let{reference:r,floating:i}=n;const s=Xu(e),o=Zx(e),a=Xx(o),c=nh(e),u=s==="y",h=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,m=r[a]/2-i[a]/2;let b;switch(c){case"top":b={x:h,y:r.y-i.height};break;case"bottom":b={x:h,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-i.width,y:p};break;default:b={x:r.x,y:r.y}}switch(Zm(e)){case"start":b[o]-=m*(t&&u?-1:1);break;case"end":b[o]+=m*(t&&u?-1:1);break}return b}const bW=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:h,y:p}=ZA(u,r,c),m=r,b={},_=0;for(let x=0;x<a.length;x++){const{name:k,fn:E}=a[x],{x:T,y:L,data:j,reset:B}=await E({x:h,y:p,initialPlacement:r,placement:m,strategy:i,middlewareData:b,rects:u,platform:o,elements:{reference:n,floating:e}});h=T??h,p=L??p,b={...b,[k]:{...b[k],...j}},B&&_<=50&&(_++,typeof B=="object"&&(B.placement&&(m=B.placement),B.rects&&(u=B.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):B.rects),{x:h,y:p}=ZA(u,m,c)),x=-1)}return{x:h,y:p,placement:m,strategy:i,middlewareData:b}};async function Tv(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:m=!1,padding:b=0}=th(e,n),_=bN(b),k=a[m?p==="floating"?"reference":"floating":p],E=Qy(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(k)))==null||t?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),T=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,L=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),j=await(s.isElement==null?void 0:s.isElement(L))?await(s.getScale==null?void 0:s.getScale(L))||{x:1,y:1}:{x:1,y:1},B=Qy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:L,strategy:c}):T);return{top:(E.top-B.top+_.top)/j.y,bottom:(B.bottom-E.bottom+_.bottom)/j.y,left:(E.left-B.left+_.left)/j.x,right:(B.right-E.right+_.right)/j.x}}const wW=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:h=0}=th(n,e)||{};if(u==null)return{};const p=bN(h),m={x:t,y:r},b=Zx(i),_=Xx(b),x=await o.getDimensions(u),k=b==="y",E=k?"top":"left",T=k?"bottom":"right",L=k?"clientHeight":"clientWidth",j=s.reference[_]+s.reference[b]-m[b]-s.floating[_],B=m[b]-s.reference[b],W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let U=W?W[L]:0;(!U||!await(o.isElement==null?void 0:o.isElement(W)))&&(U=a.floating[L]||s.floating[_]);const q=j/2-B/2,ie=U/2-x[_]/2-1,ve=Hh(p[E],ie),$=Hh(p[T],ie),z=ve,le=U-x[_]-$,ne=U/2-x[_]/2+q,ee=w2(z,ne,le),G=!c.arrow&&Zm(i)!=null&&ne!==ee&&s.reference[_]/2-(ne<z?ve:$)-x[_]/2<0,he=G?ne<z?ne-z:ne-le:0;return{[b]:m[b]+he,data:{[b]:ee,centerOffset:ne-ee-he,...G&&{alignmentOffset:he}},reset:G}}}),xW=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:x=!0,...k}=th(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const E=nh(i),T=Xu(a),L=nh(a)===a,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),B=m||(L||!x?[Jy(a)]:mW(a)),W=_!=="none";!m&&W&&B.push(...vW(a,x,_,j));const U=[a,...B],q=await Tv(e,k),ie=[];let ve=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&ie.push(q[E]),p){const ne=pW(i,o,j);ie.push(q[ne[0]],q[ne[1]])}if(ve=[...ve,{placement:i,overflows:ie}],!ie.every(ne=>ne<=0)){var $,z;const ne=((($=s.flip)==null?void 0:$.index)||0)+1,ee=U[ne];if(ee&&(!(p==="alignment"?T!==Xu(ee):!1)||ve.every(X=>X.overflows[0]>0&&Xu(X.placement)===T)))return{data:{index:ne,overflows:ve},reset:{placement:ee}};let G=(z=ve.filter(he=>he.overflows[0]<=0).sort((he,X)=>he.overflows[1]-X.overflows[1])[0])==null?void 0:z.placement;if(!G)switch(b){case"bestFit":{var le;const he=(le=ve.filter(X=>{if(W){const fe=Xu(X.placement);return fe===T||fe==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(fe=>fe>0).reduce((fe,ue)=>fe+ue,0)]).sort((X,fe)=>X[1]-fe[1])[0])==null?void 0:le[0];he&&(G=he);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function JA(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function QA(n){return dW.some(e=>n[e]>=0)}const _W=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=th(n,e);switch(r){case"referenceHidden":{const s=await Tv(e,{...i,elementContext:"reference"}),o=JA(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:QA(o)}}}case"escaped":{const s=await Tv(e,{...i,altBoundary:!0}),o=JA(s,t.floating);return{data:{escapedOffsets:o,escaped:QA(o)}}}default:return{}}}}};async function SW(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=nh(t),a=Zm(t),c=Xu(t)==="y",u=["left","top"].includes(o)?-1:1,h=s&&c?-1:1,p=th(e,n);let{mainAxis:m,crossAxis:b,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof _=="number"&&(b=a==="end"?_*-1:_),c?{x:b*h,y:m*u}:{x:m*u,y:b*h}}const AW=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await SW(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},CW=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:E,y:T}=k;return{x:E,y:T}}},...c}=th(n,e),u={x:t,y:r},h=await Tv(e,c),p=Xu(nh(i)),m=Kx(p);let b=u[m],_=u[p];if(s){const k=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=b+h[k],L=b-h[E];b=w2(T,b,L)}if(o){const k=p==="y"?"top":"left",E=p==="y"?"bottom":"right",T=_+h[k],L=_-h[E];_=w2(T,_,L)}const x=a.fn({...e,[m]:b,[p]:_});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[m]:s,[p]:o}}}}}},EW=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=th(n,e),h={x:t,y:r},p=Xu(i),m=Kx(p);let b=h[m],_=h[p];const x=th(a,e),k=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const L=m==="y"?"height":"width",j=s.reference[m]-s.floating[L]+k.mainAxis,B=s.reference[m]+s.reference[L]-k.mainAxis;b<j?b=j:b>B&&(b=B)}if(u){var E,T;const L=m==="y"?"width":"height",j=["top","left"].includes(nh(i)),B=s.reference[p]-s.floating[L]+(j&&((E=o.offset)==null?void 0:E[p])||0)+(j?0:k.crossAxis),W=s.reference[p]+s.reference[L]+(j?0:((T=o.offset)==null?void 0:T[p])||0)-(j?k.crossAxis:0);_<B?_=B:_>W&&(_=W)}return{[m]:b,[p]:_}}}},kW=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...u}=th(n,e),h=await Tv(e,u),p=nh(i),m=Zm(i),b=Xu(i)==="y",{width:_,height:x}=s.floating;let k,E;p==="top"||p==="bottom"?(k=p,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=p,k=m==="end"?"top":"bottom");const T=x-h.top-h.bottom,L=_-h.left-h.right,j=Hh(x-h[k],T),B=Hh(_-h[E],L),W=!e.middlewareData.shift;let U=j,q=B;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(q=L),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=T),W&&!m){const ve=Dl(h.left,0),$=Dl(h.right,0),z=Dl(h.top,0),le=Dl(h.bottom,0);b?q=_-2*(ve!==0||$!==0?ve+$:Dl(h.left,h.right)):U=x-2*(z!==0||le!==0?z+le:Dl(h.top,h.bottom))}await c({...e,availableWidth:q,availableHeight:U});const ie=await o.getDimensions(a.floating);return _!==ie.width||x!==ie.height?{reset:{rects:!0}}:{}}}};function L1(){return typeof window<"u"}function Jm(n){return wN(n)?(n.nodeName||"").toLowerCase():"#document"}function Bl(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function sd(n){var e;return(e=(wN(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function wN(n){return L1()?n instanceof Node||n instanceof Bl(n).Node:!1}function tu(n){return L1()?n instanceof Element||n instanceof Bl(n).Element:!1}function td(n){return L1()?n instanceof HTMLElement||n instanceof Bl(n).HTMLElement:!1}function eC(n){return!L1()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Bl(n).ShadowRoot}function Yv(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=nu(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function PW(n){return["table","td","th"].includes(Jm(n))}function R1(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Jx(n){const e=Qx(),t=tu(n)?nu(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function NW(n){let e=Gh(n);for(;td(e)&&!Vm(e);){if(Jx(e))return e;if(R1(e))return null;e=Gh(e)}return null}function Qx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vm(n){return["html","body","#document"].includes(Jm(n))}function nu(n){return Bl(n).getComputedStyle(n)}function I1(n){return tu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Gh(n){if(Jm(n)==="html")return n;const e=n.assignedSlot||n.parentNode||eC(n)&&n.host||sd(n);return eC(e)?e.host:e}function xN(n){const e=Gh(n);return Vm(e)?n.ownerDocument?n.ownerDocument.body:n.body:td(e)&&Yv(e)?e:xN(e)}function Lv(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=xN(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Bl(i);if(s){const a=_2(o);return e.concat(o,o.visualViewport||[],Yv(i)?i:[],a&&t?Lv(a):[])}return e.concat(i,Lv(i,[],t))}function _2(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function _N(n){const e=nu(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=td(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=Zy(t)!==s||Zy(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function e_(n){return tu(n)?n:n.contextElement}function Nm(n){const e=e_(n);if(!td(e))return Qu(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=_N(e);let o=(s?Zy(t.width):t.width)/r,a=(s?Zy(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const TW=Qu(0);function SN(n){const e=Bl(n);return!Qx()||!e.visualViewport?TW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function LW(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Bl(n)?!1:e}function Qf(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=e_(n);let o=Qu(1);e&&(r?tu(r)&&(o=Nm(r)):o=Nm(n));const a=LW(s,t,r)?SN(s):Qu(0);let c=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(s){const m=Bl(s),b=r&&tu(r)?Bl(r):r;let _=m,x=_2(_);for(;x&&r&&b!==_;){const k=Nm(x),E=x.getBoundingClientRect(),T=nu(x),L=E.left+(x.clientLeft+parseFloat(T.paddingLeft))*k.x,j=E.top+(x.clientTop+parseFloat(T.paddingTop))*k.y;c*=k.x,u*=k.y,h*=k.x,p*=k.y,c+=L,u+=j,_=Bl(x),x=_2(_)}}return Qy({width:h,height:p,x:c,y:u})}function t_(n,e){const t=I1(n).scrollLeft;return e?e.left+t:Qf(sd(n)).left+t}function AN(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:t_(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function RW(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=sd(r),a=e?R1(e.floating):!1;if(r===o||a&&s)return t;let c={scrollLeft:0,scrollTop:0},u=Qu(1);const h=Qu(0),p=td(r);if((p||!p&&!s)&&((Jm(r)!=="body"||Yv(o))&&(c=I1(r)),td(r))){const b=Qf(r);u=Nm(r),h.x=b.x+r.clientLeft,h.y=b.y+r.clientTop}const m=o&&!p&&!s?AN(o,c,!0):Qu(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:t.y*u.y-c.scrollTop*u.y+h.y+m.y}}function IW(n){return Array.from(n.getClientRects())}function jW(n){const e=sd(n),t=I1(n),r=n.ownerDocument.body,i=Dl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Dl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+t_(n);const a=-t.scrollTop;return nu(r).direction==="rtl"&&(o+=Dl(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function MW(n,e){const t=Bl(n),r=sd(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const u=Qx();(!u||u&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function OW(n,e){const t=Qf(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=td(n)?Nm(n):Qu(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:o,height:a,x:c,y:u}}function tC(n,e,t){let r;if(e==="viewport")r=MW(n,t);else if(e==="document")r=jW(sd(n));else if(tu(e))r=OW(e,t);else{const i=SN(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Qy(r)}function CN(n,e){const t=Gh(n);return t===e||!tu(t)||Vm(t)?!1:nu(t).position==="fixed"||CN(t,e)}function DW(n,e){const t=e.get(n);if(t)return t;let r=Lv(n,[],!1).filter(a=>tu(a)&&Jm(a)!=="body"),i=null;const s=nu(n).position==="fixed";let o=s?Gh(n):n;for(;tu(o)&&!Vm(o);){const a=nu(o),c=Jx(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Yv(o)&&!c&&CN(n,o))?r=r.filter(h=>h!==o):i=a,o=Gh(o)}return e.set(n,r),r}function FW(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?R1(e)?[]:DW(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,h)=>{const p=tC(e,h,i);return u.top=Dl(p.top,u.top),u.right=Hh(p.right,u.right),u.bottom=Hh(p.bottom,u.bottom),u.left=Dl(p.left,u.left),u},tC(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function BW(n){const{width:e,height:t}=_N(n);return{width:e,height:t}}function zW(n,e,t){const r=td(e),i=sd(e),s=t==="fixed",o=Qf(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=Qu(0);function u(){c.x=t_(i)}if(r||!r&&!s)if((Jm(e)!=="body"||Yv(i))&&(a=I1(e)),r){const b=Qf(e,!0,s,e);c.x=b.x+e.clientLeft,c.y=b.y+e.clientTop}else i&&u();s&&!r&&i&&u();const h=i&&!r&&!s?AN(i,a):Qu(0),p=o.left+a.scrollLeft-c.x-h.x,m=o.top+a.scrollTop-c.y-h.y;return{x:p,y:m,width:o.width,height:o.height}}function pw(n){return nu(n).position==="static"}function nC(n,e){if(!td(n)||nu(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return sd(n)===t&&(t=t.ownerDocument.body),t}function EN(n,e){const t=Bl(n);if(R1(n))return t;if(!td(n)){let i=Gh(n);for(;i&&!Vm(i);){if(tu(i)&&!pw(i))return i;i=Gh(i)}return t}let r=nC(n,e);for(;r&&PW(r)&&pw(r);)r=nC(r,e);return r&&Vm(r)&&pw(r)&&!Jx(r)?t:r||NW(n)||t}const UW=async function(n){const e=this.getOffsetParent||EN,t=this.getDimensions,r=await t(n.floating);return{reference:zW(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $W(n){return nu(n).direction==="rtl"}const qW={convertOffsetParentRelativeRectToViewportRelativeRect:RW,getDocumentElement:sd,getClippingRect:FW,getOffsetParent:EN,getElementRects:UW,getClientRects:IW,getDimensions:BW,getScale:Nm,isElement:tu,isRTL:$W};function kN(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function VW(n,e){let t=null,r;const i=sd(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const u=n.getBoundingClientRect(),{left:h,top:p,width:m,height:b}=u;if(a||e(),!m||!b)return;const _=ty(p),x=ty(i.clientWidth-(h+m)),k=ty(i.clientHeight-(p+b)),E=ty(h),L={rootMargin:-_+"px "+-x+"px "+-k+"px "+-E+"px",threshold:Dl(0,Hh(1,c))||1};let j=!0;function B(W){const U=W[0].intersectionRatio;if(U!==c){if(!j)return o();U?o(!1,U):r=setTimeout(()=>{o(!1,1e-7)},1e3)}U===1&&!kN(u,n.getBoundingClientRect())&&o(),j=!1}try{t=new IntersectionObserver(B,{...L,root:i.ownerDocument})}catch{t=new IntersectionObserver(B,L)}t.observe(n)}return o(!0),s}function WW(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=e_(n),h=i||s?[...u?Lv(u):[],...Lv(e)]:[];h.forEach(E=>{i&&E.addEventListener("scroll",t,{passive:!0}),s&&E.addEventListener("resize",t)});const p=u&&a?VW(u,t):null;let m=-1,b=null;o&&(b=new ResizeObserver(E=>{let[T]=E;T&&T.target===u&&b&&(b.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var L;(L=b)==null||L.observe(e)})),t()}),u&&!c&&b.observe(u),b.observe(e));let _,x=c?Qf(n):null;c&&k();function k(){const E=Qf(n);x&&!kN(x,E)&&t(),x=E,_=requestAnimationFrame(k)}return t(),()=>{var E;h.forEach(T=>{i&&T.removeEventListener("scroll",t),s&&T.removeEventListener("resize",t)}),p?.(),(E=b)==null||E.disconnect(),b=null,c&&cancelAnimationFrame(_)}}const HW=AW,GW=CW,YW=xW,KW=kW,XW=_W,rC=wW,ZW=EW,JW=(n,e,t)=>{const r=new Map,i={platform:qW,...t},s={...i.platform,_c:r};return bW(n,e,{...i,platform:s})};var QW=typeof document<"u",eH=function(){},ky=QW?N.useLayoutEffect:eH;function e1(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!e1(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!e1(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function PN(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function iC(n,e){const t=PN(n);return Math.round(e*t)/t}function mw(n){const e=N.useRef(n);return ky(()=>{e.current=n}),e}function tH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[h,p]=N.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,b]=N.useState(r);e1(m,r)||b(r);const[_,x]=N.useState(null),[k,E]=N.useState(null),T=N.useCallback(X=>{X!==W.current&&(W.current=X,x(X))},[]),L=N.useCallback(X=>{X!==U.current&&(U.current=X,E(X))},[]),j=s||_,B=o||k,W=N.useRef(null),U=N.useRef(null),q=N.useRef(h),ie=c!=null,ve=mw(c),$=mw(i),z=mw(u),le=N.useCallback(()=>{if(!W.current||!U.current)return;const X={placement:e,strategy:t,middleware:m};$.current&&(X.platform=$.current),JW(W.current,U.current,X).then(fe=>{const ue={...fe,isPositioned:z.current!==!1};ne.current&&!e1(q.current,ue)&&(q.current=ue,zv.flushSync(()=>{p(ue)}))})},[m,e,t,$,z]);ky(()=>{u===!1&&q.current.isPositioned&&(q.current.isPositioned=!1,p(X=>({...X,isPositioned:!1})))},[u]);const ne=N.useRef(!1);ky(()=>(ne.current=!0,()=>{ne.current=!1}),[]),ky(()=>{if(j&&(W.current=j),B&&(U.current=B),j&&B){if(ve.current)return ve.current(j,B,le);le()}},[j,B,le,ve,ie]);const ee=N.useMemo(()=>({reference:W,floating:U,setReference:T,setFloating:L}),[T,L]),G=N.useMemo(()=>({reference:j,floating:B}),[j,B]),he=N.useMemo(()=>{const X={position:t,left:0,top:0};if(!G.floating)return X;const fe=iC(G.floating,h.x),ue=iC(G.floating,h.y);return a?{...X,transform:"translate("+fe+"px, "+ue+"px)",...PN(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:fe,top:ue}},[t,a,G.floating,h.x,h.y]);return N.useMemo(()=>({...h,update:le,refs:ee,elements:G,floatingStyles:he}),[h,le,ee,G,he])}const nH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?rC({element:r.current,padding:i}).fn(t):{}:r?rC({element:r,padding:i}).fn(t):{}}}},rH=(n,e)=>({...HW(n),options:[n,e]}),iH=(n,e)=>({...GW(n),options:[n,e]}),sH=(n,e)=>({...ZW(n),options:[n,e]}),oH=(n,e)=>({...YW(n),options:[n,e]}),aH=(n,e)=>({...KW(n),options:[n,e]}),lH=(n,e)=>({...XW(n),options:[n,e]}),cH=(n,e)=>({...nH(n),options:[n,e]});var uH="Arrow",NN=N.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return y.jsx(wn.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});NN.displayName=uH;var dH=NN;function TN(n){const[e,t]=N.useState(void 0);return ms(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var n_="Popper",[LN,j1]=id(n_),[hH,RN]=LN(n_),IN=n=>{const{__scopePopper:e,children:t}=n,[r,i]=N.useState(null);return y.jsx(hH,{scope:e,anchor:r,onAnchorChange:i,children:t})};IN.displayName=n_;var jN="PopperAnchor",MN=N.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=RN(jN,t),o=N.useRef(null),a=rr(e,o);return N.useEffect(()=>{s.onAnchorChange(r?.current||o.current)}),r?null:y.jsx(wn.div,{...i,ref:a})});MN.displayName=jN;var r_="PopperContent",[fH,pH]=LN(r_),ON=N.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:m=!1,updatePositionStrategy:b="optimized",onPlaced:_,...x}=n,k=RN(r_,t),[E,T]=N.useState(null),L=rr(e,ge=>T(ge)),[j,B]=N.useState(null),W=TN(j),U=W?.width??0,q=W?.height??0,ie=r+(s!=="center"?"-"+s:""),ve=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},$=Array.isArray(u)?u:[u],z=$.length>0,le={padding:ve,boundary:$.filter(gH),altBoundary:z},{refs:ne,floatingStyles:ee,placement:G,isPositioned:he,middlewareData:X}=tH({strategy:"fixed",placement:ie,whileElementsMounted:(...ge)=>WW(...ge,{animationFrame:b==="always"}),elements:{reference:k.anchor},middleware:[rH({mainAxis:i+q,alignmentAxis:o}),c&&iH({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?sH():void 0,...le}),c&&oH({...le}),aH({...le,apply:({elements:ge,rects:_e,availableWidth:Te,availableHeight:Ge})=>{const{width:Ye,height:at}=_e.reference,ht=ge.floating.style;ht.setProperty("--radix-popper-available-width",`${Te}px`),ht.setProperty("--radix-popper-available-height",`${Ge}px`),ht.setProperty("--radix-popper-anchor-width",`${Ye}px`),ht.setProperty("--radix-popper-anchor-height",`${at}px`)}}),j&&cH({element:j,padding:a}),vH({arrowWidth:U,arrowHeight:q}),m&&lH({strategy:"referenceHidden",...le})]}),[fe,ue]=BN(G),se=oo(_);ms(()=>{he&&se?.()},[he,se]);const F=X.arrow?.x,te=X.arrow?.y,Q=X.arrow?.centerOffset!==0,[ce,pe]=N.useState();return ms(()=>{E&&pe(window.getComputedStyle(E).zIndex)},[E]),y.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:he?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[X.transformOrigin?.x,X.transformOrigin?.y].join(" "),...X.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(fH,{scope:t,placedSide:fe,onArrowChange:B,arrowX:F,arrowY:te,shouldHideArrow:Q,children:y.jsx(wn.div,{"data-side":fe,"data-align":ue,...x,ref:L,style:{...x.style,animation:he?void 0:"none"}})})})});ON.displayName=r_;var DN="PopperArrow",mH={top:"bottom",right:"left",bottom:"top",left:"right"},FN=N.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=pH(DN,r),o=mH[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(dH,{...i,ref:t,style:{...i.style,display:"block"}})})});FN.displayName=DN;function gH(n){return n!==null}var vH=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,h]=BN(t),p={start:"0%",center:"50%",end:"100%"}[h],m=(i.arrow?.x??0)+a/2,b=(i.arrow?.y??0)+c/2;let _="",x="";return u==="bottom"?(_=o?p:`${m}px`,x=`${-c}px`):u==="top"?(_=o?p:`${m}px`,x=`${r.floating.height+c}px`):u==="right"?(_=`${-c}px`,x=o?p:`${b}px`):u==="left"&&(_=`${r.floating.width+c}px`,x=o?p:`${b}px`),{data:{x:_,y:x}}}});function BN(n){const[e,t="center"]=n.split("-");return[e,t]}var zN=IN,UN=MN,$N=ON,qN=FN,yH="Portal",M1=N.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=N.useState(!1);ms(()=>s(!0),[]);const o=t||i&&globalThis?.document?.body;return o?Aj.createPortal(y.jsx(wn.div,{...r,ref:e}),o):null});M1.displayName=yH;function bH(n,e){return N.useReducer((t,r)=>e[t][r]??t,n)}var Ul=n=>{const{present:e,children:t}=n,r=wH(e),i=typeof t=="function"?t({present:r.isPresent}):N.Children.only(t),s=rr(r.ref,xH(i));return typeof t=="function"||r.isPresent?N.cloneElement(i,{ref:s}):null};Ul.displayName="Presence";function wH(n){const[e,t]=N.useState(),r=N.useRef(null),i=N.useRef(n),s=N.useRef("none"),o=n?"mounted":"unmounted",[a,c]=bH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=ny(r.current);s.current=a==="mounted"?u:"none"},[a]),ms(()=>{const u=r.current,h=i.current;if(h!==n){const m=s.current,b=ny(u);n?c("MOUNT"):b==="none"||u?.display==="none"?c("UNMOUNT"):c(h&&m!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,c]),ms(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,p=b=>{const x=ny(r.current).includes(b.animationName);if(b.target===e&&x&&(c("ANIMATION_END"),!i.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},m=b=>{b.target===e&&(s.current=ny(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function ny(n){return n?.animationName||"none"}function xH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var gw="rovingFocusGroup.onEntryFocus",_H={bubbles:!1,cancelable:!0},Kv="RovingFocusGroup",[S2,VN,SH]=Gx(Kv),[AH,WN]=id(Kv,[SH]),[CH,EH]=AH(Kv),HN=N.forwardRef((n,e)=>y.jsx(S2.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(S2.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(kH,{...n,ref:e})})}));HN.displayName=Kv;var kH=N.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...p}=n,m=N.useRef(null),b=rr(e,m),_=P1(s),[x,k]=qm({prop:o,defaultProp:a??null,onChange:c,caller:Kv}),[E,T]=N.useState(!1),L=oo(u),j=VN(t),B=N.useRef(!1),[W,U]=N.useState(0);return N.useEffect(()=>{const q=m.current;if(q)return q.addEventListener(gw,L),()=>q.removeEventListener(gw,L)},[L]),y.jsx(CH,{scope:t,orientation:r,dir:_,loop:i,currentTabStopId:x,onItemFocus:N.useCallback(q=>k(q),[k]),onItemShiftTab:N.useCallback(()=>T(!0),[]),onFocusableItemAdd:N.useCallback(()=>U(q=>q+1),[]),onFocusableItemRemove:N.useCallback(()=>U(q=>q-1),[]),children:y.jsx(wn.div,{tabIndex:E||W===0?-1:0,"data-orientation":r,...p,ref:b,style:{outline:"none",...n.style},onMouseDown:Bt(n.onMouseDown,()=>{B.current=!0}),onFocus:Bt(n.onFocus,q=>{const ie=!B.current;if(q.target===q.currentTarget&&ie&&!E){const ve=new CustomEvent(gw,_H);if(q.currentTarget.dispatchEvent(ve),!ve.defaultPrevented){const $=j().filter(G=>G.focusable),z=$.find(G=>G.active),le=$.find(G=>G.id===x),ee=[z,le,...$].filter(Boolean).map(G=>G.ref.current);KN(ee,h)}}B.current=!1}),onBlur:Bt(n.onBlur,()=>T(!1))})})}),GN="RovingFocusGroupItem",YN=N.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=n,c=Jd(),u=s||c,h=EH(GN,t),p=h.currentTabStopId===u,m=VN(t),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:x}=h;return N.useEffect(()=>{if(r)return b(),()=>_()},[r,b,_]),y.jsx(S2.ItemSlot,{scope:t,id:u,focusable:r,active:i,children:y.jsx(wn.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:Bt(n.onMouseDown,k=>{r?h.onItemFocus(u):k.preventDefault()}),onFocus:Bt(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:Bt(n.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){h.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const E=TH(k,h.orientation,h.dir);if(E!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let L=m().filter(j=>j.focusable).map(j=>j.ref.current);if(E==="last")L.reverse();else if(E==="prev"||E==="next"){E==="prev"&&L.reverse();const j=L.indexOf(k.currentTarget);L=h.loop?LH(L,j+1):L.slice(j+1)}setTimeout(()=>KN(L))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:x!=null}):o})})});YN.displayName=GN;var PH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function TH(n,e,t){const r=NH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return PH[r]}function KN(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function LH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var RH=HN,IH=YN,jH=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},dm=new WeakMap,ry=new WeakMap,iy={},vw=0,XN=function(n){return n&&(n.host||XN(n.parentNode))},MH=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=XN(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},OH=function(n,e,t,r){var i=MH(e,Array.isArray(n)?n:[n]);iy[t]||(iy[t]=new WeakMap);var s=iy[t],o=[],a=new Set,c=new Set(i),u=function(p){!p||a.has(p)||(a.add(p),u(p.parentNode))};i.forEach(u);var h=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(m){if(a.has(m))h(m);else try{var b=m.getAttribute(r),_=b!==null&&b!=="false",x=(dm.get(m)||0)+1,k=(s.get(m)||0)+1;dm.set(m,x),s.set(m,k),o.push(m),x===1&&_&&ry.set(m,!0),k===1&&m.setAttribute(t,"true"),_||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return h(e),a.clear(),vw++,function(){o.forEach(function(p){var m=dm.get(p)-1,b=s.get(p)-1;dm.set(p,m),s.set(p,b),m||(ry.has(p)||p.removeAttribute(r),ry.delete(p)),b||p.removeAttribute(t)}),vw--,vw||(dm=new WeakMap,dm=new WeakMap,ry=new WeakMap,iy={})}},i_=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=jH(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),OH(r,i,t,"aria-hidden")):function(){return null}},Ku=function(){return Ku=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ku.apply(this,arguments)};function ZN(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function DH(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Py="right-scroll-bar-position",Ny="width-before-scroll-bar",FH="with-scroll-bars-hidden",BH="--removed-body-scroll-bar-size";function yw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function zH(n,e){var t=N.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var UH=typeof window<"u"?N.useLayoutEffect:N.useEffect,sC=new WeakMap;function $H(n,e){var t=zH(null,function(r){return n.forEach(function(i){return yw(i,r)})});return UH(function(){var r=sC.get(t);if(r){var i=new Set(r),s=new Set(n),o=t.current;i.forEach(function(a){s.has(a)||yw(a,null)}),s.forEach(function(a){i.has(a)||yw(a,o)})}sC.set(t,n)},[n]),t}function qH(n){return n}function VH(n,e){e===void 0&&(e=qH);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var o=e(s,r);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){r=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var c=function(){var h=o;o=[],h.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),t={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),t}}}};return i}function WH(n){n===void 0&&(n={});var e=VH(null);return e.options=Ku({async:!0,ssr:!1},n),e}var JN=function(n){var e=n.sideCar,t=ZN(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Ku({},t))};JN.isSideCarExport=!0;function HH(n,e){return n.useMedium(e),JN}var QN=WH(),bw=function(){},O1=N.forwardRef(function(n,e){var t=N.useRef(null),r=N.useState({onScrollCapture:bw,onWheelCapture:bw,onTouchMoveCapture:bw}),i=r[0],s=r[1],o=n.forwardProps,a=n.children,c=n.className,u=n.removeScrollBar,h=n.enabled,p=n.shards,m=n.sideCar,b=n.noRelative,_=n.noIsolation,x=n.inert,k=n.allowPinchZoom,E=n.as,T=E===void 0?"div":E,L=n.gapMode,j=ZN(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=m,W=$H([t,e]),U=Ku(Ku({},j),i);return N.createElement(N.Fragment,null,h&&N.createElement(B,{sideCar:QN,removeScrollBar:u,shards:p,noRelative:b,noIsolation:_,inert:x,setCallbacks:s,allowPinchZoom:!!k,lockRef:t,gapMode:L}),o?N.cloneElement(N.Children.only(a),Ku(Ku({},U),{ref:W})):N.createElement(T,Ku({},U,{className:c,ref:W}),a))});O1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};O1.classNames={fullWidth:Ny,zeroRight:Py};var GH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YH(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=GH();return e&&n.setAttribute("nonce",e),n}function KH(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function XH(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var ZH=function(){var n=0,e=null;return{add:function(t){n==0&&(e=YH())&&(KH(e,t),XH(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},JH=function(){var n=ZH();return function(e,t){N.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},eT=function(){var n=JH(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},QH={left:0,top:0,right:0,gap:0},ww=function(n){return parseInt(n||"",10)||0},eG=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[ww(t),ww(r),ww(i)]},tG=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return QH;var e=eG(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},nG=eT(),Tm="data-scroll-locked",rG=function(n,e,t,r){var i=n.left,s=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(FH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Tm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Py,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ny,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Py," .").concat(Py,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ny," .").concat(Ny,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Tm,`] {
    `).concat(BH,": ").concat(a,`px;
  }
`)},oC=function(){var n=parseInt(document.body.getAttribute(Tm)||"0",10);return isFinite(n)?n:0},iG=function(){N.useEffect(function(){return document.body.setAttribute(Tm,(oC()+1).toString()),function(){var n=oC()-1;n<=0?document.body.removeAttribute(Tm):document.body.setAttribute(Tm,n.toString())}},[])},sG=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;iG();var s=N.useMemo(function(){return tG(i)},[i]);return N.createElement(nG,{styles:rG(s,!e,i,t?"":"!important")})},A2=!1;if(typeof window<"u")try{var sy=Object.defineProperty({},"passive",{get:function(){return A2=!0,!0}});window.addEventListener("test",sy,sy),window.removeEventListener("test",sy,sy)}catch{A2=!1}var hm=A2?{passive:!1}:!1,oG=function(n){return n.tagName==="TEXTAREA"},tT=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!oG(n)&&t[e]==="visible")},aG=function(n){return tT(n,"overflowY")},lG=function(n){return tT(n,"overflowX")},aC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=nT(n,r);if(i){var s=rT(n,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},cG=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},uG=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},nT=function(n,e){return n==="v"?aG(e):lG(e)},rT=function(n,e){return n==="v"?cG(e):uG(e)},dG=function(n,e){return n==="h"&&e==="rtl"?-1:1},hG=function(n,e,t,r,i){var s=dG(n,window.getComputedStyle(e).direction),o=s*r,a=t.target,c=e.contains(a),u=!1,h=o>0,p=0,m=0;do{if(!a)break;var b=rT(n,a),_=b[0],x=b[1],k=b[2],E=x-k-s*_;(_||E)&&nT(n,a)&&(p+=E,m+=_);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(p)<1||!h&&Math.abs(m)<1)&&(u=!0),u},oy=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},lC=function(n){return[n.deltaX,n.deltaY]},cC=function(n){return n&&"current"in n?n.current:n},fG=function(n,e){return n[0]===e[0]&&n[1]===e[1]},pG=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},mG=0,fm=[];function gG(n){var e=N.useRef([]),t=N.useRef([0,0]),r=N.useRef(),i=N.useState(mG++)[0],s=N.useState(eT)[0],o=N.useRef(n);N.useEffect(function(){o.current=n},[n]),N.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var x=DH([n.lockRef.current],(n.shards||[]).map(cC),!0).filter(Boolean);return x.forEach(function(k){return k.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var a=N.useCallback(function(x,k){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var E=oy(x),T=t.current,L="deltaX"in x?x.deltaX:T[0]-E[0],j="deltaY"in x?x.deltaY:T[1]-E[1],B,W=x.target,U=Math.abs(L)>Math.abs(j)?"h":"v";if("touches"in x&&U==="h"&&W.type==="range")return!1;var q=aC(U,W);if(!q)return!0;if(q?B=U:(B=U==="v"?"h":"v",q=aC(U,W)),!q)return!1;if(!r.current&&"changedTouches"in x&&(L||j)&&(r.current=B),!B)return!0;var ie=r.current||B;return hG(ie,k,x,ie==="h"?L:j)},[]),c=N.useCallback(function(x){var k=x;if(!(!fm.length||fm[fm.length-1]!==s)){var E="deltaY"in k?lC(k):oy(k),T=e.current.filter(function(B){return B.name===k.type&&(B.target===k.target||k.target===B.shadowParent)&&fG(B.delta,E)})[0];if(T&&T.should){k.cancelable&&k.preventDefault();return}if(!T){var L=(o.current.shards||[]).map(cC).filter(Boolean).filter(function(B){return B.contains(k.target)}),j=L.length>0?a(k,L[0]):!o.current.noIsolation;j&&k.cancelable&&k.preventDefault()}}},[]),u=N.useCallback(function(x,k,E,T){var L={name:x,delta:k,target:E,should:T,shadowParent:vG(E)};e.current.push(L),setTimeout(function(){e.current=e.current.filter(function(j){return j!==L})},1)},[]),h=N.useCallback(function(x){t.current=oy(x),r.current=void 0},[]),p=N.useCallback(function(x){u(x.type,lC(x),x.target,a(x,n.lockRef.current))},[]),m=N.useCallback(function(x){u(x.type,oy(x),x.target,a(x,n.lockRef.current))},[]);N.useEffect(function(){return fm.push(s),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:m}),document.addEventListener("wheel",c,hm),document.addEventListener("touchmove",c,hm),document.addEventListener("touchstart",h,hm),function(){fm=fm.filter(function(x){return x!==s}),document.removeEventListener("wheel",c,hm),document.removeEventListener("touchmove",c,hm),document.removeEventListener("touchstart",h,hm)}},[]);var b=n.removeScrollBar,_=n.inert;return N.createElement(N.Fragment,null,_?N.createElement(s,{styles:pG(i)}):null,b?N.createElement(sG,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function vG(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const yG=HH(QN,gG);var D1=N.forwardRef(function(n,e){return N.createElement(O1,Ku({},n,{ref:e,sideCar:yG}))});D1.classNames=O1.classNames;var C2=["Enter"," "],bG=["ArrowDown","PageUp","Home"],iT=["ArrowUp","PageDown","End"],wG=[...bG,...iT],xG={ltr:[...C2,"ArrowRight"],rtl:[...C2,"ArrowLeft"]},_G={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xv="Menu",[Rv,SG,AG]=Gx(Xv),[fp,sT]=id(Xv,[AG,j1,WN]),F1=j1(),oT=WN(),[CG,pp]=fp(Xv),[EG,Zv]=fp(Xv),aT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=n,a=F1(e),[c,u]=N.useState(null),h=N.useRef(!1),p=oo(s),m=P1(i);return N.useEffect(()=>{const b=()=>{h.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>h.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),y.jsx(zN,{...a,children:y.jsx(CG,{scope:e,open:t,onOpenChange:p,content:c,onContentChange:u,children:y.jsx(EG,{scope:e,onClose:N.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};aT.displayName=Xv;var kG="MenuAnchor",s_=N.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=F1(t);return y.jsx(UN,{...i,...r,ref:e})});s_.displayName=kG;var o_="MenuPortal",[PG,lT]=fp(o_,{forceMount:void 0}),cT=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=pp(o_,e);return y.jsx(PG,{scope:e,forceMount:t,children:y.jsx(Ul,{present:t||s.open,children:y.jsx(M1,{asChild:!0,container:i,children:r})})})};cT.displayName=o_;var xc="MenuContent",[NG,a_]=fp(xc),uT=N.forwardRef((n,e)=>{const t=lT(xc,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=pp(xc,n.__scopeMenu),o=Zv(xc,n.__scopeMenu);return y.jsx(Rv.Provider,{scope:n.__scopeMenu,children:y.jsx(Ul,{present:r||s.open,children:y.jsx(Rv.Slot,{scope:n.__scopeMenu,children:o.modal?y.jsx(TG,{...i,ref:e}):y.jsx(LG,{...i,ref:e})})})})}),TG=N.forwardRef((n,e)=>{const t=pp(xc,n.__scopeMenu),r=N.useRef(null),i=rr(e,r);return N.useEffect(()=>{const s=r.current;if(s)return i_(s)},[]),y.jsx(l_,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Bt(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),LG=N.forwardRef((n,e)=>{const t=pp(xc,n.__scopeMenu);return y.jsx(l_,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),RG=Jf("MenuContent.ScrollLock"),l_=N.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:m,onDismiss:b,disableOutsideScroll:_,...x}=n,k=pp(xc,t),E=Zv(xc,t),T=F1(t),L=oT(t),j=SG(t),[B,W]=N.useState(null),U=N.useRef(null),q=rr(e,U,k.onContentChange),ie=N.useRef(0),ve=N.useRef(""),$=N.useRef(0),z=N.useRef(null),le=N.useRef("right"),ne=N.useRef(0),ee=_?D1:N.Fragment,G=_?{as:RG,allowPinchZoom:!0}:void 0,he=fe=>{const ue=ve.current+fe,se=j().filter(ge=>!ge.disabled),F=document.activeElement,te=se.find(ge=>ge.ref.current===F)?.textValue,Q=se.map(ge=>ge.textValue),ce=VG(Q,ue,te),pe=se.find(ge=>ge.textValue===ce)?.ref.current;(function ge(_e){ve.current=_e,window.clearTimeout(ie.current),_e!==""&&(ie.current=window.setTimeout(()=>ge(""),1e3))})(ue),pe&&setTimeout(()=>pe.focus())};N.useEffect(()=>()=>window.clearTimeout(ie.current),[]),Yx();const X=N.useCallback(fe=>le.current===z.current?.side&&HG(fe,z.current?.area),[]);return y.jsx(NG,{scope:t,searchRef:ve,onItemEnter:N.useCallback(fe=>{X(fe)&&fe.preventDefault()},[X]),onItemLeave:N.useCallback(fe=>{X(fe)||(U.current?.focus(),W(null))},[X]),onTriggerLeave:N.useCallback(fe=>{X(fe)&&fe.preventDefault()},[X]),pointerGraceTimerRef:$,onPointerGraceIntentChange:N.useCallback(fe=>{z.current=fe},[]),children:y.jsx(ee,{...G,children:y.jsx(T1,{asChild:!0,trapped:i,onMountAutoFocus:Bt(s,fe=>{fe.preventDefault(),U.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(N1,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:m,onDismiss:b,children:y.jsx(RH,{asChild:!0,...L,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:B,onCurrentTabStopIdChange:W,onEntryFocus:Bt(c,fe=>{E.isUsingKeyboardRef.current||fe.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx($N,{role:"menu","aria-orientation":"vertical","data-state":ET(k.open),"data-radix-menu-content":"",dir:E.dir,...T,...x,ref:q,style:{outline:"none",...x.style},onKeyDown:Bt(x.onKeyDown,fe=>{const se=fe.target.closest("[data-radix-menu-content]")===fe.currentTarget,F=fe.ctrlKey||fe.altKey||fe.metaKey,te=fe.key.length===1;se&&(fe.key==="Tab"&&fe.preventDefault(),!F&&te&&he(fe.key));const Q=U.current;if(fe.target!==Q||!wG.includes(fe.key))return;fe.preventDefault();const pe=j().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);iT.includes(fe.key)&&pe.reverse(),$G(pe)}),onBlur:Bt(n.onBlur,fe=>{fe.currentTarget.contains(fe.target)||(window.clearTimeout(ie.current),ve.current="")}),onPointerMove:Bt(n.onPointerMove,Iv(fe=>{const ue=fe.target,se=ne.current!==fe.clientX;if(fe.currentTarget.contains(ue)&&se){const F=fe.clientX>ne.current?"right":"left";le.current=F,ne.current=fe.clientX}}))})})})})})})});uT.displayName=xc;var IG="MenuGroup",c_=N.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(wn.div,{role:"group",...r,ref:e})});c_.displayName=IG;var jG="MenuLabel",dT=N.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(wn.div,{...r,ref:e})});dT.displayName=jG;var t1="MenuItem",uC="menu.itemSelect",B1=N.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=N.useRef(null),o=Zv(t1,n.__scopeMenu),a=a_(t1,n.__scopeMenu),c=rr(e,s),u=N.useRef(!1),h=()=>{const p=s.current;if(!t&&p){const m=new CustomEvent(uC,{bubbles:!0,cancelable:!0});p.addEventListener(uC,b=>r?.(b),{once:!0}),mN(p,m),m.defaultPrevented?u.current=!1:o.onClose()}};return y.jsx(hT,{...i,ref:c,disabled:t,onClick:Bt(n.onClick,h),onPointerDown:p=>{n.onPointerDown?.(p),u.current=!0},onPointerUp:Bt(n.onPointerUp,p=>{u.current||p.currentTarget?.click()}),onKeyDown:Bt(n.onKeyDown,p=>{const m=a.searchRef.current!=="";t||m&&p.key===" "||C2.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});B1.displayName=t1;var hT=N.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,o=a_(t1,t),a=oT(t),c=N.useRef(null),u=rr(e,c),[h,p]=N.useState(!1),[m,b]=N.useState("");return N.useEffect(()=>{const _=c.current;_&&b((_.textContent??"").trim())},[s.children]),y.jsx(Rv.ItemSlot,{scope:t,disabled:r,textValue:i??m,children:y.jsx(IH,{asChild:!0,...a,focusable:!r,children:y.jsx(wn.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Bt(n.onPointerMove,Iv(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Bt(n.onPointerLeave,Iv(_=>o.onItemLeave(_))),onFocus:Bt(n.onFocus,()=>p(!0)),onBlur:Bt(n.onBlur,()=>p(!1))})})})}),MG="MenuCheckboxItem",fT=N.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return y.jsx(yT,{scope:n.__scopeMenu,checked:t,children:y.jsx(B1,{role:"menuitemcheckbox","aria-checked":n1(t)?"mixed":t,...i,ref:e,"data-state":d_(t),onSelect:Bt(i.onSelect,()=>r?.(n1(t)?!0:!t),{checkForDefaultPrevented:!1})})})});fT.displayName=MG;var pT="MenuRadioGroup",[OG,DG]=fp(pT,{value:void 0,onValueChange:()=>{}}),mT=N.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=oo(r);return y.jsx(OG,{scope:n.__scopeMenu,value:t,onValueChange:s,children:y.jsx(c_,{...i,ref:e})})});mT.displayName=pT;var gT="MenuRadioItem",vT=N.forwardRef((n,e)=>{const{value:t,...r}=n,i=DG(gT,n.__scopeMenu),s=t===i.value;return y.jsx(yT,{scope:n.__scopeMenu,checked:s,children:y.jsx(B1,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":d_(s),onSelect:Bt(r.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});vT.displayName=gT;var u_="MenuItemIndicator",[yT,FG]=fp(u_,{checked:!1}),bT=N.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=FG(u_,t);return y.jsx(Ul,{present:r||n1(s.checked)||s.checked===!0,children:y.jsx(wn.span,{...i,ref:e,"data-state":d_(s.checked)})})});bT.displayName=u_;var BG="MenuSeparator",wT=N.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(wn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});wT.displayName=BG;var zG="MenuArrow",xT=N.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=F1(t);return y.jsx(qN,{...i,...r,ref:e})});xT.displayName=zG;var UG="MenuSub",[mne,_T]=fp(UG),tv="MenuSubTrigger",ST=N.forwardRef((n,e)=>{const t=pp(tv,n.__scopeMenu),r=Zv(tv,n.__scopeMenu),i=_T(tv,n.__scopeMenu),s=a_(tv,n.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,u={__scopeMenu:n.__scopeMenu},h=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>h,[h]),N.useEffect(()=>{const p=a.current;return()=>{window.clearTimeout(p),c(null)}},[a,c]),y.jsx(s_,{asChild:!0,...u,children:y.jsx(hT,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":ET(t.open),...n,ref:k1(e,i.onTriggerChange),onClick:p=>{n.onClick?.(p),!(n.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Bt(n.onPointerMove,Iv(p=>{s.onItemEnter(p),!p.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:Bt(n.onPointerLeave,Iv(p=>{h();const m=t.content?.getBoundingClientRect();if(m){const b=t.content?.dataset.side,_=b==="right",x=_?-5:5,k=m[_?"left":"right"],E=m[_?"right":"left"];s.onPointerGraceIntentChange({area:[{x:p.clientX+x,y:p.clientY},{x:k,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:k,y:m.bottom}],side:b}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(p),p.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Bt(n.onKeyDown,p=>{const m=s.searchRef.current!=="";n.disabled||m&&p.key===" "||xG[r.dir].includes(p.key)&&(t.onOpenChange(!0),t.content?.focus(),p.preventDefault())})})})});ST.displayName=tv;var AT="MenuSubContent",CT=N.forwardRef((n,e)=>{const t=lT(xc,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=pp(xc,n.__scopeMenu),o=Zv(xc,n.__scopeMenu),a=_T(AT,n.__scopeMenu),c=N.useRef(null),u=rr(e,c);return y.jsx(Rv.Provider,{scope:n.__scopeMenu,children:y.jsx(Ul,{present:r||s.open,children:y.jsx(Rv.Slot,{scope:n.__scopeMenu,children:y.jsx(l_,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&c.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Bt(n.onFocusOutside,h=>{h.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Bt(n.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Bt(n.onKeyDown,h=>{const p=h.currentTarget.contains(h.target),m=_G[o.dir].includes(h.key);p&&m&&(s.onOpenChange(!1),a.trigger?.focus(),h.preventDefault())})})})})})});CT.displayName=AT;function ET(n){return n?"open":"closed"}function n1(n){return n==="indeterminate"}function d_(n){return n1(n)?"indeterminate":n?"checked":"unchecked"}function $G(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function qG(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function VG(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=qG(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function WG(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],c=e[o],u=a.x,h=a.y,p=c.x,m=c.y;h>r!=m>r&&t<(p-u)*(r-h)/(m-h)+u&&(i=!i)}return i}function HG(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return WG(t,e)}function Iv(n){return e=>e.pointerType==="mouse"?n(e):void 0}var GG=aT,YG=s_,KG=cT,XG=uT,ZG=c_,JG=dT,QG=B1,eY=fT,tY=mT,nY=vT,rY=bT,iY=wT,sY=xT,oY=ST,aY=CT,z1="DropdownMenu",[lY,gne]=id(z1,[sT]),La=sT(),[cY,kT]=lY(z1),PT=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=n,c=La(e),u=N.useRef(null),[h,p]=qm({prop:i,defaultProp:s??!1,onChange:o,caller:z1});return y.jsx(cY,{scope:e,triggerId:Jd(),triggerRef:u,contentId:Jd(),open:h,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(m=>!m),[p]),modal:a,children:y.jsx(GG,{...c,open:h,onOpenChange:p,dir:r,modal:a,children:t})})};PT.displayName=z1;var NT="DropdownMenuTrigger",TT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=kT(NT,t),o=La(t);return y.jsx(YG,{asChild:!0,...o,children:y.jsx(wn.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:k1(e,s.triggerRef),onPointerDown:Bt(n.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:Bt(n.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});TT.displayName=NT;var uY="DropdownMenuPortal",LT=n=>{const{__scopeDropdownMenu:e,...t}=n,r=La(e);return y.jsx(KG,{...r,...t})};LT.displayName=uY;var RT="DropdownMenuContent",IT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=kT(RT,t),s=La(t),o=N.useRef(!1);return y.jsx(XG,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Bt(n.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Bt(n.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!i.modal||h)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});IT.displayName=RT;var dY="DropdownMenuGroup",jT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(ZG,{...i,...r,ref:e})});jT.displayName=dY;var hY="DropdownMenuLabel",MT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(JG,{...i,...r,ref:e})});MT.displayName=hY;var fY="DropdownMenuItem",OT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(QG,{...i,...r,ref:e})});OT.displayName=fY;var pY="DropdownMenuCheckboxItem",DT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(eY,{...i,...r,ref:e})});DT.displayName=pY;var mY="DropdownMenuRadioGroup",gY=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(tY,{...i,...r,ref:e})});gY.displayName=mY;var vY="DropdownMenuRadioItem",FT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(nY,{...i,...r,ref:e})});FT.displayName=vY;var yY="DropdownMenuItemIndicator",BT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(rY,{...i,...r,ref:e})});BT.displayName=yY;var bY="DropdownMenuSeparator",zT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(iY,{...i,...r,ref:e})});zT.displayName=bY;var wY="DropdownMenuArrow",xY=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(sY,{...i,...r,ref:e})});xY.displayName=wY;var _Y="DropdownMenuSubTrigger",UT=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(oY,{...i,...r,ref:e})});UT.displayName=_Y;var SY="DropdownMenuSubContent",$T=N.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=La(t);return y.jsx(aY,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$T.displayName=SY;var AY=PT,CY=TT,EY=LT,qT=IT,kY=jT,VT=MT,WT=OT,HT=DT,GT=FT,YT=BT,KT=zT,XT=UT,ZT=$T;const JT=AY,QT=CY,dC=kY,PY=vn.forwardRef(({className:n,inset:e,children:t,...r},i)=>y.jsxs(XT,{ref:i,className:kn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,y.jsx(ZP,{className:"ml-auto h-4 w-4"})]}));PY.displayName=XT.displayName;const NY=vn.forwardRef(({className:n,...e},t)=>y.jsx(ZT,{ref:t,className:kn("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));NY.displayName=ZT.displayName;const h_=vn.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(EY,{children:y.jsx(qT,{ref:r,sideOffset:e,className:kn("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));h_.displayName=qT.displayName;const tl=vn.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(WT,{ref:r,className:kn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));tl.displayName=WT.displayName;const TY=vn.forwardRef(({className:n,children:e,checked:t,...r},i)=>y.jsxs(HT,{ref:i,className:kn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(YT,{children:y.jsx(Ux,{className:"h-4 w-4"})})}),e]}));TY.displayName=HT.displayName;const LY=vn.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(GT,{ref:r,className:kn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(YT,{children:y.jsx(Vq,{className:"h-2 w-2 fill-current"})})}),e]}));LY.displayName=GT.displayName;const E2=vn.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(VT,{ref:r,className:kn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));E2.displayName=VT.displayName;const Ty=vn.forwardRef(({className:n,...e},t)=>y.jsx(KT,{ref:t,className:kn("-mx-1 my-1 h-px bg-muted",n),...e}));Ty.displayName=KT.displayName;var xw={exports:{}},_w={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function RY(){if(hC)return _w;hC=1;var n=d1();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function a(p,m){var b=m(),_=r({inst:{value:b,getSnapshot:m}}),x=_[0].inst,k=_[1];return s(function(){x.value=b,x.getSnapshot=m,c(x)&&k({inst:x})},[p,b,m]),i(function(){return c(x)&&k({inst:x}),p(function(){c(x)&&k({inst:x})})},[p]),o(b),b}function c(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!t(p,b)}catch{return!0}}function u(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return _w.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,_w}var fC;function IY(){return fC||(fC=1,xw.exports=RY()),xw.exports}var jY=IY();function MY(){return jY.useSyncExternalStore(OY,()=>!0,()=>!1)}function OY(){return()=>{}}var f_="Avatar",[DY,vne]=id(f_),[FY,e3]=DY(f_),t3=N.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=N.useState("idle");return y.jsx(FY,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:y.jsx(wn.span,{...r,ref:e})})});t3.displayName=f_;var n3="AvatarImage",r3=N.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,o=e3(n3,t),a=BY(r,s),c=oo(u=>{i(u),o.onImageLoadingStatusChange(u)});return ms(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?y.jsx(wn.img,{...s,ref:e,src:r}):null});r3.displayName=n3;var i3="AvatarFallback",s3=N.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=e3(i3,t),[o,a]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?y.jsx(wn.span,{...i,ref:e}):null});s3.displayName=i3;function pC(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function BY(n,{referrerPolicy:e,crossOrigin:t}){const r=MY(),i=N.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=N.useState(()=>pC(s,n));return ms(()=>{a(pC(s,n))},[s,n]),ms(()=>{const c=p=>()=>{a(p)};if(!s)return;const u=c("loaded"),h=c("error");return s.addEventListener("load",u),s.addEventListener("error",h),e&&(s.referrerPolicy=e),typeof t=="string"&&(s.crossOrigin=t),()=>{s.removeEventListener("load",u),s.removeEventListener("error",h)}},[s,t,e]),o}var o3=t3,a3=r3,l3=s3;const jv=vn.forwardRef(({className:n,...e},t)=>y.jsx(o3,{ref:t,className:kn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));jv.displayName=o3.displayName;const Mv=vn.forwardRef(({className:n,...e},t)=>y.jsx(a3,{ref:t,className:kn("aspect-square h-full w-full object-cover",n),...e}));Mv.displayName=a3.displayName;const Ov=vn.forwardRef(({className:n,...e},t)=>y.jsx(l3,{ref:t,className:kn("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Ov.displayName=l3.displayName;const zY=({icon:n,active:e,onClick:t,label:r})=>y.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16
      ${e?"text-primary-foreground scale-110":"text-muted-foreground hover:text-foreground hover:scale-105"}`,style:e?{color:"hsl(var(--primary-foreground))"}:{},"aria-label":r,children:[y.jsx("div",{className:"relative w-6 h-6 mb-0.5 flex items-center justify-center",children:y.jsx(n,{className:`w-6 h-6 transition-all duration-200 ${e?"drop-shadow-md":""}`})}),y.jsx("span",{className:"text-[10px] font-medium transition-opacity duration-200 opacity-100",children:r})]}),c3=N.forwardRef(({activeTab:n,setActiveTab:e},t)=>{const{user:r,logout:i,settings:s,isFeatureEnabled:o}=Po(),a=sp(),{toast:c}=Ta(),u=k=>{e(k),a(`/${k}`)},h=async()=>{try{await i()&&a("/login",{replace:!0})}catch{}},p=()=>{window.handlePWAInstall?window.handlePWAInstall():c({title:"Instalação não disponível",description:"A funcionalidade de instalação não está pronta. Tente mais tarde.",variant:"destructive"})},m=s?.profile_photo||r?.user_metadata?.avatar_url,b=s?.user_name||r?.user_metadata?.full_name||"Usuário",_=k=>{const E=k.split(" ");return E.length===1?E[0].charAt(0).toUpperCase():`${E[0].charAt(0)}${E[E.length-1].charAt(0)}`.toUpperCase()},x=[{id:"dashboard",icon:Gq,label:"Início"},{id:"workflow",icon:Pv,label:"Trabalhos"},{id:"clients",icon:oN,label:"Clientes"},{id:"financial",icon:Nv,label:"Caixa"}];return y.jsxs(Ki.nav,{ref:t,initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:200,damping:30},className:"fixed bottom-0 left-0 right-0 bg-card/80 dark:bg-card/70 backdrop-blur-xl border-t border-border/70 shadow-top-lg z-[450] flex items-center justify-around px-1",style:{paddingTop:"0.5rem",paddingBottom:"calc(0.5rem + env(safe-area-inset-bottom))",height:"auto"},children:[x.map(k=>y.jsx(zY,{icon:k.icon,active:n===k.id,onClick:()=>u(k.id),label:k.label},k.id)),y.jsxs(JT,{children:[y.jsx(QT,{asChild:!0,children:y.jsxs("button",{className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16 text-muted-foreground hover:text-foreground hover:scale-105","aria-label":"Mais opções",children:[y.jsxs(jv,{className:"w-6 h-6 border-2 border-primary/70",children:[y.jsx(Mv,{src:m,alt:b}),y.jsx(Ov,{className:"bg-muted text-sm font-bold",children:_(b)})]}),y.jsx("span",{className:"text-[10px] font-medium opacity-100",children:"Menu"})]})}),y.jsxs(h_,{side:"top",align:"end",className:"mb-2 w-64 bg-popover/80 dark:bg-popover/70 backdrop-blur-md shadow-lg",style:{marginBottom:"calc(0.5rem + env(safe-area-inset-bottom))"},children:[y.jsx(E2,{className:"font-normal",children:y.jsxs("div",{className:"flex flex-col space-y-1",children:[y.jsx("p",{className:"text-sm font-medium leading-none",children:b}),y.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),y.jsx(Ty,{}),y.jsxs(dC,{children:[y.jsxs(tl,{onClick:()=>u("referrals"),className:"text-green-500 focus:bg-green-500/10 focus:text-green-500",children:[y.jsx($x,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Indique e Ganhe"})]}),o("agenda_pro")&&y.jsxs(tl,{onClick:()=>u("calendar"),children:[y.jsx(YP,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Agenda"})]}),o("quadros")&&y.jsxs(tl,{onClick:()=>u("quadros"),children:[y.jsx(sN,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Quadros"})]}),o("relatorios")&&y.jsxs(tl,{onClick:()=>u("reports"),children:[y.jsx(HP,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Relatórios"})]})]}),y.jsx(Ty,{}),y.jsxs(dC,{children:[y.jsx(E2,{children:"Ferramentas"}),o("precifique")&&y.jsxs(tl,{onClick:()=>u("precifique"),children:[y.jsx(Wh,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Precificar"})]}),o("reserva_inteligente")&&y.jsxs(tl,{onClick:()=>u("reserva-inteligente"),children:[y.jsx(qx,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Reserva Inteligente"})]}),o("meu_setup")&&y.jsxs(tl,{onClick:()=>u("my-setup"),children:[y.jsx(eN,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Meu Setup"})]})]}),y.jsx(Ty,{}),y.jsxs(tl,{onClick:p,children:[y.jsx(QP,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Baixar aplicativo"})]}),y.jsxs(tl,{onClick:()=>u("settings"),children:[y.jsx(iN,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Configurações"})]}),y.jsxs(tl,{onClick:h,className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[y.jsx(tN,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Sair"})]})]})]})]})});c3.displayName="BottomNavBar";const _r=()=>y.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:[y.jsx(Ki.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:y.jsx(Zf,{className:"h-12 w-12 text-primary animate-spin"})}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Carregando..."})]});function k2(n,[e,t]){return Math.min(t,Math.max(e,n))}function u3(n){const e=N.useRef({value:n,previous:n});return N.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var d3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),UY="VisuallyHidden",$Y=N.forwardRef((n,e)=>y.jsx(wn.span,{...n,ref:e,style:{...d3,...n.style}}));$Y.displayName=UY;var qY=[" ","Enter","ArrowUp","ArrowDown"],VY=[" ","Enter"],ep="Select",[U1,$1,WY]=Gx(ep),[Qm,yne]=id(ep,[WY,j1]),q1=j1(),[HY,tf]=Qm(ep),[GY,YY]=Qm(ep),h3=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:c,dir:u,name:h,autoComplete:p,disabled:m,required:b,form:_}=n,x=q1(e),[k,E]=N.useState(null),[T,L]=N.useState(null),[j,B]=N.useState(!1),W=P1(u),[U,q]=qm({prop:r,defaultProp:i??!1,onChange:s,caller:ep}),[ie,ve]=qm({prop:o,defaultProp:a,onChange:c,caller:ep}),$=N.useRef(null),z=k?_||!!k.closest("form"):!0,[le,ne]=N.useState(new Set),ee=Array.from(le).map(G=>G.props.value).join(";");return y.jsx(zN,{...x,children:y.jsxs(HY,{required:b,scope:e,trigger:k,onTriggerChange:E,valueNode:T,onValueNodeChange:L,valueNodeHasChildren:j,onValueNodeHasChildrenChange:B,contentId:Jd(),value:ie,onValueChange:ve,open:U,onOpenChange:q,dir:W,triggerPointerDownPosRef:$,disabled:m,children:[y.jsx(U1.Provider,{scope:e,children:y.jsx(GY,{scope:n.__scopeSelect,onNativeOptionAdd:N.useCallback(G=>{ne(he=>new Set(he).add(G))},[]),onNativeOptionRemove:N.useCallback(G=>{ne(he=>{const X=new Set(he);return X.delete(G),X})},[]),children:t})}),z?y.jsxs(j3,{"aria-hidden":!0,required:b,tabIndex:-1,name:h,autoComplete:p,value:ie,onChange:G=>ve(G.target.value),disabled:m,form:_,children:[ie===void 0?y.jsx("option",{value:""}):null,Array.from(le)]},ee):null]})})};h3.displayName=ep;var f3="SelectTrigger",p3=N.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=q1(t),o=tf(f3,t),a=o.disabled||r,c=rr(e,o.onTriggerChange),u=$1(t),h=N.useRef("touch"),[p,m,b]=O3(x=>{const k=u().filter(L=>!L.disabled),E=k.find(L=>L.value===o.value),T=D3(k,x,E);T!==void 0&&o.onValueChange(T.value)}),_=x=>{a||(o.onOpenChange(!0),b()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return y.jsx(UN,{asChild:!0,...s,children:y.jsx(wn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":M3(o.value)?"":void 0,...i,ref:c,onClick:Bt(i.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&_(x)}),onPointerDown:Bt(i.onPointerDown,x=>{h.current=x.pointerType;const k=x.target;k.hasPointerCapture(x.pointerId)&&k.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(_(x),x.preventDefault())}),onKeyDown:Bt(i.onKeyDown,x=>{const k=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(k&&x.key===" ")&&qY.includes(x.key)&&(_(),x.preventDefault())})})})});p3.displayName=f3;var m3="SelectValue",g3=N.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:o="",...a}=n,c=tf(m3,t),{onValueNodeHasChildrenChange:u}=c,h=s!==void 0,p=rr(e,c.onValueNodeChange);return ms(()=>{u(h)},[u,h]),y.jsx(wn.span,{...a,ref:p,style:{pointerEvents:"none"},children:M3(c.value)?y.jsx(y.Fragment,{children:o}):s})});g3.displayName=m3;var KY="SelectIcon",v3=N.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return y.jsx(wn.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});v3.displayName=KY;var XY="SelectPortal",y3=n=>y.jsx(M1,{asChild:!0,...n});y3.displayName=XY;var tp="SelectContent",b3=N.forwardRef((n,e)=>{const t=tf(tp,n.__scopeSelect),[r,i]=N.useState();if(ms(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?zv.createPortal(y.jsx(w3,{scope:n.__scopeSelect,children:y.jsx(U1.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),s):null}return y.jsx(x3,{...n,ref:e})});b3.displayName=tp;var Zc=10,[w3,nf]=Qm(tp),ZY="SelectContentImpl",JY=Jf("SelectContent.RemoveScroll"),x3=N.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:b,sticky:_,hideWhenDetached:x,avoidCollisions:k,...E}=n,T=tf(tp,t),[L,j]=N.useState(null),[B,W]=N.useState(null),U=rr(e,ge=>j(ge)),[q,ie]=N.useState(null),[ve,$]=N.useState(null),z=$1(t),[le,ne]=N.useState(!1),ee=N.useRef(!1);N.useEffect(()=>{if(L)return i_(L)},[L]),Yx();const G=N.useCallback(ge=>{const[_e,...Te]=z().map(at=>at.ref.current),[Ge]=Te.slice(-1),Ye=document.activeElement;for(const at of ge)if(at===Ye||(at?.scrollIntoView({block:"nearest"}),at===_e&&B&&(B.scrollTop=0),at===Ge&&B&&(B.scrollTop=B.scrollHeight),at?.focus(),document.activeElement!==Ye))return},[z,B]),he=N.useCallback(()=>G([q,L]),[G,q,L]);N.useEffect(()=>{le&&he()},[le,he]);const{onOpenChange:X,triggerPointerDownPosRef:fe}=T;N.useEffect(()=>{if(L){let ge={x:0,y:0};const _e=Ge=>{ge={x:Math.abs(Math.round(Ge.pageX)-(fe.current?.x??0)),y:Math.abs(Math.round(Ge.pageY)-(fe.current?.y??0))}},Te=Ge=>{ge.x<=10&&ge.y<=10?Ge.preventDefault():L.contains(Ge.target)||X(!1),document.removeEventListener("pointermove",_e),fe.current=null};return fe.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",Te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",Te,{capture:!0})}}},[L,X,fe]),N.useEffect(()=>{const ge=()=>X(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[X]);const[ue,se]=O3(ge=>{const _e=z().filter(Ye=>!Ye.disabled),Te=_e.find(Ye=>Ye.ref.current===document.activeElement),Ge=D3(_e,ge,Te);Ge&&setTimeout(()=>Ge.ref.current.focus())}),F=N.useCallback((ge,_e,Te)=>{const Ge=!ee.current&&!Te;(T.value!==void 0&&T.value===_e||Ge)&&(ie(ge),Ge&&(ee.current=!0))},[T.value]),te=N.useCallback(()=>L?.focus(),[L]),Q=N.useCallback((ge,_e,Te)=>{const Ge=!ee.current&&!Te;(T.value!==void 0&&T.value===_e||Ge)&&$(ge)},[T.value]),ce=r==="popper"?P2:_3,pe=ce===P2?{side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:p,collisionBoundary:m,collisionPadding:b,sticky:_,hideWhenDetached:x,avoidCollisions:k}:{};return y.jsx(w3,{scope:t,content:L,viewport:B,onViewportChange:W,itemRefCallback:F,selectedItem:q,onItemLeave:te,itemTextRefCallback:Q,focusSelectedItem:he,selectedItemText:ve,position:r,isPositioned:le,searchRef:ue,children:y.jsx(D1,{as:JY,allowPinchZoom:!0,children:y.jsx(T1,{asChild:!0,trapped:T.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:Bt(i,ge=>{T.trigger?.focus({preventScroll:!0}),ge.preventDefault()}),children:y.jsx(N1,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:y.jsx(ce,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ge=>ge.preventDefault(),...E,...pe,onPlaced:()=>ne(!0),ref:U,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Bt(E.onKeyDown,ge=>{const _e=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!_e&&ge.key.length===1&&se(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let Ge=z().filter(Ye=>!Ye.disabled).map(Ye=>Ye.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(Ge=Ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const Ye=ge.target,at=Ge.indexOf(Ye);Ge=Ge.slice(at+1)}setTimeout(()=>G(Ge)),ge.preventDefault()}})})})})})})});x3.displayName=ZY;var QY="SelectItemAlignedPosition",_3=N.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=tf(tp,t),o=nf(tp,t),[a,c]=N.useState(null),[u,h]=N.useState(null),p=rr(e,U=>h(U)),m=$1(t),b=N.useRef(!1),_=N.useRef(!0),{viewport:x,selectedItem:k,selectedItemText:E,focusSelectedItem:T}=o,L=N.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&u&&x&&k&&E){const U=s.trigger.getBoundingClientRect(),q=u.getBoundingClientRect(),ie=s.valueNode.getBoundingClientRect(),ve=E.getBoundingClientRect();if(s.dir!=="rtl"){const Ye=ve.left-q.left,at=ie.left-Ye,ht=U.left-at,Ct=U.width+ht,We=Math.max(Ct,q.width),we=window.innerWidth-Zc,Mt=k2(at,[Zc,Math.max(Zc,we-We)]);a.style.minWidth=Ct+"px",a.style.left=Mt+"px"}else{const Ye=q.right-ve.right,at=window.innerWidth-ie.right-Ye,ht=window.innerWidth-U.right-at,Ct=U.width+ht,We=Math.max(Ct,q.width),we=window.innerWidth-Zc,Mt=k2(at,[Zc,Math.max(Zc,we-We)]);a.style.minWidth=Ct+"px",a.style.right=Mt+"px"}const $=m(),z=window.innerHeight-Zc*2,le=x.scrollHeight,ne=window.getComputedStyle(u),ee=parseInt(ne.borderTopWidth,10),G=parseInt(ne.paddingTop,10),he=parseInt(ne.borderBottomWidth,10),X=parseInt(ne.paddingBottom,10),fe=ee+G+le+X+he,ue=Math.min(k.offsetHeight*5,fe),se=window.getComputedStyle(x),F=parseInt(se.paddingTop,10),te=parseInt(se.paddingBottom,10),Q=U.top+U.height/2-Zc,ce=z-Q,pe=k.offsetHeight/2,ge=k.offsetTop+pe,_e=ee+G+ge,Te=fe-_e;if(_e<=Q){const Ye=$.length>0&&k===$[$.length-1].ref.current;a.style.bottom="0px";const at=u.clientHeight-x.offsetTop-x.offsetHeight,ht=Math.max(ce,pe+(Ye?te:0)+at+he),Ct=_e+ht;a.style.height=Ct+"px"}else{const Ye=$.length>0&&k===$[0].ref.current;a.style.top="0px";const ht=Math.max(Q,ee+x.offsetTop+(Ye?F:0)+pe)+Te;a.style.height=ht+"px",x.scrollTop=_e-Q+x.offsetTop}a.style.margin=`${Zc}px 0`,a.style.minHeight=ue+"px",a.style.maxHeight=z+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[m,s.trigger,s.valueNode,a,u,x,k,E,s.dir,r]);ms(()=>L(),[L]);const[j,B]=N.useState();ms(()=>{u&&B(window.getComputedStyle(u).zIndex)},[u]);const W=N.useCallback(U=>{U&&_.current===!0&&(L(),T?.(),_.current=!1)},[L,T]);return y.jsx(tK,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:b,onScrollButtonChange:W,children:y.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:y.jsx(wn.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});_3.displayName=QY;var eK="SelectPopperPosition",P2=N.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Zc,...s}=n,o=q1(t);return y.jsx($N,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P2.displayName=eK;var[tK,p_]=Qm(tp,{}),N2="SelectViewport",S3=N.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=nf(N2,t),o=p_(N2,t),a=rr(e,s.onViewportChange),c=N.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(U1.Slot,{scope:t,children:y.jsx(wn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Bt(i.onScroll,u=>{const h=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:m}=o;if(m?.current&&p){const b=Math.abs(c.current-h.scrollTop);if(b>0){const _=window.innerHeight-Zc*2,x=parseFloat(p.style.minHeight),k=parseFloat(p.style.height),E=Math.max(x,k);if(E<_){const T=E+b,L=Math.min(_,T),j=T-L;p.style.height=L+"px",p.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,p.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});S3.displayName=N2;var A3="SelectGroup",[nK,rK]=Qm(A3),iK=N.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Jd();return y.jsx(nK,{scope:t,id:i,children:y.jsx(wn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});iK.displayName=A3;var C3="SelectLabel",E3=N.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=rK(C3,t);return y.jsx(wn.div,{id:i.id,...r,ref:e})});E3.displayName=C3;var r1="SelectItem",[sK,k3]=Qm(r1),P3=N.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...o}=n,a=tf(r1,t),c=nf(r1,t),u=a.value===r,[h,p]=N.useState(s??""),[m,b]=N.useState(!1),_=rr(e,T=>c.itemRefCallback?.(T,r,i)),x=Jd(),k=N.useRef("touch"),E=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(sK,{scope:t,value:r,disabled:i,textId:x,isSelected:u,onItemTextChange:N.useCallback(T=>{p(L=>L||(T?.textContent??"").trim())},[]),children:y.jsx(U1.ItemSlot,{scope:t,value:r,disabled:i,textValue:h,children:y.jsx(wn.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:_,onFocus:Bt(o.onFocus,()=>b(!0)),onBlur:Bt(o.onBlur,()=>b(!1)),onClick:Bt(o.onClick,()=>{k.current!=="mouse"&&E()}),onPointerUp:Bt(o.onPointerUp,()=>{k.current==="mouse"&&E()}),onPointerDown:Bt(o.onPointerDown,T=>{k.current=T.pointerType}),onPointerMove:Bt(o.onPointerMove,T=>{k.current=T.pointerType,i?c.onItemLeave?.():k.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(o.onPointerLeave,T=>{T.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Bt(o.onKeyDown,T=>{c.searchRef?.current!==""&&T.key===" "||(VY.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});P3.displayName=r1;var nv="SelectItemText",N3=N.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,o=tf(nv,t),a=nf(nv,t),c=k3(nv,t),u=YY(nv,t),[h,p]=N.useState(null),m=rr(e,E=>p(E),c.onItemTextChange,E=>a.itemTextRefCallback?.(E,c.value,c.disabled)),b=h?.textContent,_=N.useMemo(()=>y.jsx("option",{value:c.value,disabled:c.disabled,children:b},c.value),[c.disabled,c.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:k}=u;return ms(()=>(x(_),()=>k(_)),[x,k,_]),y.jsxs(y.Fragment,{children:[y.jsx(wn.span,{id:c.textId,...s,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zv.createPortal(s.children,o.valueNode):null]})});N3.displayName=nv;var T3="SelectItemIndicator",L3=N.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return k3(T3,t).isSelected?y.jsx(wn.span,{"aria-hidden":!0,...r,ref:e}):null});L3.displayName=T3;var T2="SelectScrollUpButton",oK=N.forwardRef((n,e)=>{const t=nf(T2,n.__scopeSelect),r=p_(T2,n.__scopeSelect),[i,s]=N.useState(!1),o=rr(e,r.onScrollButtonChange);return ms(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollTop>0;s(u)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?y.jsx(R3,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});oK.displayName=T2;var L2="SelectScrollDownButton",aK=N.forwardRef((n,e)=>{const t=nf(L2,n.__scopeSelect),r=p_(L2,n.__scopeSelect),[i,s]=N.useState(!1),o=rr(e,r.onScrollButtonChange);return ms(()=>{if(t.viewport&&t.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;s(h)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),i?y.jsx(R3,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});aK.displayName=L2;var R3=N.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=nf("SelectScrollButton",t),o=N.useRef(null),a=$1(t),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),ms(()=>{a().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),y.jsx(wn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Bt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Bt(i.onPointerMove,()=>{s.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Bt(i.onPointerLeave,()=>{c()})})}),lK="SelectSeparator",I3=N.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return y.jsx(wn.div,{"aria-hidden":!0,...r,ref:e})});I3.displayName=lK;var R2="SelectArrow",cK=N.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=q1(t),s=tf(R2,t),o=nf(R2,t);return s.open&&o.position==="popper"?y.jsx(qN,{...i,...r,ref:e}):null});cK.displayName=R2;var uK="SelectBubbleInput",j3=N.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=N.useRef(null),s=rr(r,i),o=u3(e);return N.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const p=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(p)}},[o,e]),y.jsx(wn.select,{...t,style:{...d3,...t.style},ref:s,defaultValue:e})});j3.displayName=uK;function M3(n){return n===""||n===void 0}function O3(n){const e=oo(n),t=N.useRef(""),r=N.useRef(0),i=N.useCallback(o=>{const a=t.current+o;e(a),function c(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),s=N.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function D3(n,e,t){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let o=dK(n,Math.max(s,0));i.length===1&&(o=o.filter(u=>u!==t));const c=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==t?c:void 0}function dK(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var hK=h3,F3=p3,fK=g3,pK=v3,mK=y3,B3=b3,gK=S3,z3=E3,U3=P3,vK=N3,yK=L3,$3=I3;const io=hK,so=fK,Ms=N.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(F3,{ref:r,className:kn("flex h-10 w-full items-center justify-between rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),...t,children:[e,y.jsx(pK,{asChild:!0,children:y.jsx(XP,{className:"h-4 w-4 opacity-50"})})]}));Ms.displayName=F3.displayName;const Os=N.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>y.jsx(mK,{children:y.jsx(B3,{ref:i,className:kn("relative z-[99999] min-w-[8rem] max-h-[300px] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-background dark:border-border",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:y.jsx(gK,{className:kn("p-1 max-h-[300px] overflow-auto",t==="popper"&&"h-auto w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Os.displayName=B3.displayName;const bK=N.forwardRef(({className:n,...e},t)=>y.jsx(z3,{ref:t,className:kn("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));bK.displayName=z3.displayName;const Dn=N.forwardRef(({className:n,children:e,...t},r)=>t.value===null||t.value===void 0||t.value===""?null:y.jsxs(U3,{ref:r,className:kn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-accent",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(yK,{children:y.jsx(Ux,{className:"h-4 w-4"})})}),y.jsx(vK,{children:e})]}));Dn.displayName=U3.displayName;const wK=N.forwardRef(({className:n,...e},t)=>y.jsx($3,{ref:t,className:kn("-mx-1 my-1 h-px bg-muted",n),...e}));wK.displayName=$3.displayName;const m_=vn.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:kn("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));m_.displayName="Card";const g_=vn.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:kn("flex flex-col space-y-1.5 p-6",n),...e}));g_.displayName="CardHeader";const v_=vn.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:kn("text-2xl font-semibold leading-none tracking-tight",n),...e}));v_.displayName="CardTitle";const y_=vn.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:kn("text-sm text-muted-foreground",n),...e}));y_.displayName="CardDescription";const q3=vn.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:kn("p-6 pt-0",n),...e}));q3.displayName="CardContent";const b_=vn.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:kn("flex items-center p-6 pt-0",n),...e}));b_.displayName="CardFooter";const xK=({allocation:n,savingGoals:e,onConfirm:t,onDismiss:r})=>{const[i,s]=N.useState(""),[o,a]=N.useState(!0);N.useEffect(()=>{if(e&&e.length>0){const m=e.find(b=>b.nome_meta.toLowerCase().includes("emergência")||b.nome_meta.toLowerCase().includes("reserva"));m?s(m.id):e[0]?.id?s(e[0].id):s("")}else s("")},[e]);const c=()=>{i&&(t(i),a(!1))},u=()=>{r(),a(!1)};if(!o||!n)return null;const h=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),p=e&&e.length>0;return y.jsx(Ki.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50,transition:{duration:.2}},className:"fixed bottom-4 right-4 z-[101] w-full max-w-md",children:y.jsxs(m_,{className:"shadow-2xl border-l-4 border-customPurple bg-card",children:[y.jsx(g_,{children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(qx,{className:"w-8 h-8 mr-3 text-customPurple"}),y.jsxs("div",{children:[y.jsx(v_,{className:"text-lg font-semibold text-foreground",children:"Alocar Reserva Financeira?"}),y.jsxs(y_,{className:"text-sm text-muted-foreground",children:["Pagamento de ",h(n.transactionValue),' recebido para "',n.serviceName,'".']})]})]})}),y.jsxs(q3,{className:"space-y-3",children:[y.jsxs("p",{className:"text-base text-foreground",children:["Sugerimos guardar ",y.jsx("strong",{className:"text-customGreen",children:h(n.reserveAmount)}),"."]}),p?y.jsxs("div",{children:[y.jsx("label",{htmlFor:"goalSelect",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Escolha a meta de destino:"}),y.jsxs(io,{value:i,onValueChange:s,disabled:!i,children:[y.jsx(Ms,{id:"goalSelect",className:"w-full bg-input border-border focus:border-customPurple",children:y.jsx(so,{placeholder:"Selecione uma meta..."})}),y.jsx(Os,{className:"max-h-60",children:e.filter(m=>m.id).map(m=>y.jsxs(Dn,{value:m.id,children:[m.icone&&y.jsx("span",{className:"mr-2",children:m.icone}),m.nome_meta," (",h(m.saldo_atual),")"]},m.id))})]})]}):y.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Nenhuma meta de reserva encontrada. Crie uma em "Reserva Inteligente" para alocar.'})]}),y.jsxs(b_,{className:"flex justify-end space-x-3 pt-4",children:[y.jsxs(mn,{variant:"outline",onClick:u,className:"text-muted-foreground hover:bg-accent",children:[y.jsx(rV,{className:"mr-2 h-4 w-4"})," Agora não"]}),y.jsxs(mn,{onClick:c,disabled:!i||!p,className:"bg-customGreen hover:bg-customGreen/90 text-white",children:[y.jsx(KP,{className:"mr-2 h-4 w-4"})," Confirmar"]})]})]})})},_K=n=>{const e=sp(),[t,r]=N.useState(n),[i,s]=N.useState({type:"all",period:"all"}),o=N.useCallback((a,c={type:"all",period:"all"})=>{s(c),r(a),e(`/${a}`,{replace:!0}),window.scrollTo(0,0)},[e]);return{activeTab:t,setActiveTab:o,initialFinancialFilter:i}},SK=()=>{const[n,e]=N.useState(window.innerWidth<768);return N.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),{isMobile:n}},Sw="gofotografo_trial_modal_shown_session",mC=[{element:"#dashboard-stat-card-netBalance",popover:{title:"Seu Saldo Geral",description:"Aqui você acompanha o valor total de todos os pagamentos que já recebeu de seus clientes.",side:"bottom",align:"start"}},{element:"#dashboard-stat-card-pendingToReceive",popover:{title:"Pagamentos a Receber",description:"Fique de olho nos valores que ainda entrarão no seu caixa. Essencial para seu planejamento!",side:"bottom",align:"start"}},{element:"#dashboard-chart-card-revenueExpensesChart",popover:{title:"Gráfico de Faturamento",description:"Acompanhe visualmente a performance do seu negócio com o gráfico de entradas e saídas.",side:"top",align:"start"}},{element:"#floating-action-button",popover:{title:"Menu de Navegação Rápida",description:"Clique aqui a qualquer momento para acessar as outras seções importantes, como Clientes, Trabalhos e Caixa.",side:"left",align:"start"}}],AK=n=>{const{user:e,settings:t,setSettings:r,trialDaysRemaining:i,planStatus:s,loadingAuth:o,loading:a}=Po(),{openModal:c,closeModal:u,openModals:h}=cp(),p=ru(),m=sp(),{toast:b}=Ta(),[_,x]=N.useState(!1),[k,E]=N.useState(!1),T=N.useCallback((q=[],ie={})=>{const ve=new URLSearchParams(p.search);q.forEach(z=>ve.delete(z)),Object.entries(ie).forEach(([z,le])=>{le!=null?ve.set(z,String(le)):ve.delete(z)});const $=ve.toString();m(`${p.pathname}${$?`?${$}`:""}`,{replace:!0})},[p.search,p.pathname,m]),L=N.useCallback(async()=>{if(e&&t&&t.has_completed_tour===!1)try{await r({...t,has_completed_tour:!0})}catch{b({title:"Erro",description:"Não foi possível salvar o status do tour.",variant:"destructive"})}},[e,t,r,b]),j=N.useCallback(()=>{if(typeof window.driver>"u"){b({title:"Erro no Tour",description:"Não foi possível iniciar o tour guiado.",variant:"destructive"}),L();return}const q=window.driver.js.driver,ie=q({showProgress:!0,nextBtnText:"Próximo →",prevBtnText:"← Anterior",doneBtnText:"Finalizar",steps:mC.map(ve=>({...ve,popover:{...ve.popover,onNextClick:()=>ie.moveNext(),onPrevClick:()=>ie.movePrevious(),onCloseClick:()=>{ie.destroy(),L()}}})),onDestroyStarted:()=>{const ve=ie.getActiveIndex?ie.getActiveIndex():-1,$=mC.length;(ve===-1||ve<$-1)&&L(),ie.destroy()},onHighlighted:ve=>{ve&&ve.node&&ve.node.scrollIntoView?ve.node.scrollIntoView({behavior:"smooth",block:"center"}):ve&&ve.target&&ve.target.scrollIntoView&&ve.target.scrollIntoView({behavior:"smooth",block:"center"})}});ie.drive()},[b,L]);return N.useEffect(()=>{new URLSearchParams(p.search).get("payment_status")==="success"&&(T(["payment_status","session_id"]),sessionStorage.removeItem(Sw))},[p,T]),N.useEffect(()=>{!o&&e&&s==="TRIAL"&&i>=0&&!sessionStorage.getItem(Sw)&&!h.trialInfoModal&&!n&&(x(!0),c("trialInfoModal"),sessionStorage.setItem(Sw,"true"))},[o,e,s,i,c,h,n]),N.useEffect(()=>{!o&&!a&&e&&t&&t.has_completed_tour===!1&&!h.trialInfoModal&&!h.welcomeTourModal&&!n&&(E(!0),c("welcomeTourModal"))},[o,a,e,t,c,h,n]),{showTrialInfoModal:_,handleCloseTrialInfoModal:()=>{x(!1),u("trialInfoModal")},showWelcomeTourModal:k,handleStartWelcomeTour:()=>{E(!1),u("welcomeTourModal"),j()},handleDeclineWelcomeTour:()=>{E(!1),u("welcomeTourModal"),L()},trialDaysRemainingFromHook:i}};let ay;const CK=new Uint8Array(16);function EK(){if(!ay&&(ay=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ay))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ay(CK)}const Eo=[];for(let n=0;n<256;++n)Eo.push((n+256).toString(16).slice(1));function kK(n,e=0){return Eo[n[e+0]]+Eo[n[e+1]]+Eo[n[e+2]]+Eo[n[e+3]]+"-"+Eo[n[e+4]]+Eo[n[e+5]]+"-"+Eo[n[e+6]]+Eo[n[e+7]]+"-"+Eo[n[e+8]]+Eo[n[e+9]]+"-"+Eo[n[e+10]]+Eo[n[e+11]]+Eo[n[e+12]]+Eo[n[e+13]]+Eo[n[e+14]]+Eo[n[e+15]]}const PK=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gC={randomUUID:PK};function NK(n,e,t){if(gC.randomUUID&&!n)return gC.randomUUID();n=n||{};const r=n.random||(n.rng||EK)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,kK(r)}const V3=()=>{const{user:n,addClient:e,updateClient:t,getClientById:r}=Po(),{toast:i}=Ta(),{openModals:s,closeModal:o}=cp(),{isOpen:a,clientId:c,returnTo:u,onSuccess:h}=s.client||{},p=c?r(c):null,[m,b]=N.useState(!1),[_,x]=N.useState(null),[k,E]=N.useState(null),T=N.useRef(null),L=N.useCallback(()=>({name:"",email:"",phone:"",client_type:"Pessoa Física",status:"Ativo",cpf:"",cnpj:"",profile_photo_url:null}),[]),[j,B]=N.useState(L()),W=p?`client_form_draft_${p.id}`:"client_form_draft_new";N.useEffect(()=>{if(a){const le=localStorage.getItem(W);if(le)B(JSON.parse(le)),E(JSON.parse(le).profile_photo_url);else if(p){const ne={name:p.name||"",email:p.email||"",phone:p.phone||"",client_type:p.client_type||"Pessoa Física",status:p.status||"Ativo",cpf:p.cpf||"",cnpj:p.cnpj||"",profile_photo_url:p.profile_photo_url||null};B(ne),E(ne.profile_photo_url)}else B(L()),E(null)}else x(null),E(null)},[p,a,W,L]),N.useEffect(()=>{a&&localStorage.setItem(W,JSON.stringify(j))},[j,a,W]);const U=le=>{const ne=le.target.files[0];ne&&(x(ne),E(URL.createObjectURL(ne)))},q=()=>{x(null),E(null),B(le=>({...le,profile_photo_url:null})),T.current&&(T.current.value="")},ie=()=>{localStorage.removeItem(W),o("client")},ve=le=>{if(!le)return"?";const ne=le.split(" ");return ne.length===1?ne[0].charAt(0).toUpperCase():`${ne[0].charAt(0)}${ne[ne.length-1].charAt(0)}`.toUpperCase()},$=async le=>{if(le.preventDefault(),!j.name.trim()){i({title:"Erro de Validação",description:"O nome do cliente é obrigatório.",variant:"destructive"});return}b(!0);const ne={...j};ne.client_type==="Pessoa Física"?ne.cnpj="":ne.cpf="";try{let ee=j.profile_photo_url;if(_){const he=_.name.split(".").pop(),X=`${j.name.replace(/\s+/g,"_")}-${NK()}.${he}`,fe=`public/${n.id}/client_photos/${X}`,{error:ue}=await rt.storage.from("user_assets").upload(fe,_,{cacheControl:"3600",upsert:!0});if(ue)throw ue;const{data:se}=rt.storage.from("user_assets").getPublicUrl(fe);ee=se.publicUrl}else j.profile_photo_url===null&&(ee=null);ne.profile_photo_url=ee;let G;p?(G=await t(p.id,ne),i({title:"Cliente atualizado",description:"Cliente foi atualizado com sucesso!"})):(G=await e(ne),i({title:"Cliente adicionado",description:"Novo cliente foi adicionado com sucesso!"})),u&&h&&(h(G||{...ne,id:p?.id}),i({title:"Sucesso!",description:"Cliente selecionado automaticamente no formulário financeiro."})),localStorage.removeItem(W),ie()}catch(ee){i({title:"Erro ao salvar",description:`Falha ao salvar cliente: ${ee.message}`,variant:"destructive"})}finally{b(!1)}},z=(le,ne)=>{B(ee=>{const G={...ee,[le]:ne};return le==="client_type"&&(G.cpf="",G.cnpj=""),G})};return a?y.jsx(ka,{children:a&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(Ki.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:p?"Editar Cliente":"Novo Cliente"}),y.jsx(mn,{variant:"ghost",size:"icon",onClick:ie,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:m,children:y.jsx(ef,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:$,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[y.jsxs(jv,{className:"w-24 h-24 text-3xl border-4 border-primary/20",children:[y.jsx(Mv,{src:k,alt:j.name}),y.jsx(Ov,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:ve(j.name)})]}),y.jsx("input",{type:"file",ref:T,onChange:U,accept:"image/png, image/jpeg",className:"hidden",disabled:m}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(mn,{type:"button",variant:"outline",size:"sm",onClick:()=>T.current?.click(),disabled:m,children:[y.jsx($q,{className:"w-4 h-4 mr-2"}),k?"Alterar Foto":"Adicionar Foto"]}),k&&y.jsxs(mn,{type:"button",variant:"destructive",size:"sm",onClick:q,disabled:m,children:[y.jsx(Vx,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(tV,{className:"w-4 h-4 inline mr-2"}),"Nome *"]}),y.jsx("input",{type:"text",value:j.name,onChange:le=>z("name",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do cliente",required:!0,disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fv,{className:"w-4 h-4 inline mr-2"}),"Tipo de Cliente"]}),y.jsxs("select",{value:j.client_type,onChange:le=>z("client_type",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:m,children:[y.jsx("option",{value:"Pessoa Física",children:"Pessoa Física"}),y.jsx("option",{value:"Pessoa Jurídica",children:"Pessoa Jurídica"})]})]}),j.client_type==="Pessoa Física"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(nV,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:j.cpf,onChange:le=>z("cpf",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:m})]}),j.client_type==="Pessoa Jurídica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fv,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:j.cnpj,onChange:le=>z("cnpj",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(nN,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:j.email,onChange:le=>z("email",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:m})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(rN,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:j.phone,onChange:le=>z("phone",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:m})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsxs("select",{value:j.status,onChange:le=>z("status",le.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:m,children:[y.jsx("option",{value:"Ativo",children:"Ativo"}),y.jsx("option",{value:"Inativo",children:"Inativo"})]})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(mn,{type:"button",variant:"outline",onClick:ie,className:"flex-1",disabled:m,children:"Cancelar"}),y.jsx(mn,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:m,children:m?y.jsx(Zf,{className:"w-4 h-4 animate-spin"}):p?"Atualizar":"Adicionar"})]})]})]})})}):null},TK=[{value:"equipamentos",label:"Equipamentos Fotográficos",icon:"📷"},{value:"software",label:"Software/Licenças",icon:"💻"},{value:"servicos",label:"Serviços Gerais",icon:"🛠️"},{value:"marketing",label:"Marketing/Publicidade",icon:"📢"},{value:"educacao",label:"Educação/Cursos",icon:"📚"},{value:"transporte",label:"Transporte/Logística",icon:"🚗"},{value:"alimentacao",label:"Alimentação/Hospedagem",icon:"🍽️"},{value:"estudio",label:"Estúdio/Locação",icon:"🏠"},{value:"freelancer",label:"Freelancer/Assistente",icon:"👤"},{value:"juridico",label:"Jurídico/Contabilidade",icon:"⚖️"},{value:"manutencao",label:"Manutenção/Reparo",icon:"🔧"},{value:"material",label:"Material de Escritório",icon:"📝"},{value:"tecnologia",label:"Tecnologia/Internet",icon:"🌐"},{value:"seguro",label:"Seguros",icon:"🛡️"},{value:"outros",label:"Outros",icon:"💼"}],LK=[{value:"pessoa_fisica",label:"Pessoa Física"},{value:"pessoa_juridica",label:"Pessoa Jurídica"},{value:"mei",label:"MEI"}],RK=[{value:"ativo",label:"Ativo"},{value:"inativo",label:"Inativo"},{value:"bloqueado",label:"Bloqueado"}],IK=()=>{const{addSupplier:n,updateSupplier:e,getSupplierById:t}=Po(),{toast:r}=Ta(),{openModals:i,closeModal:s}=cp(),{isOpen:o,supplierId:a,returnTo:c,onSuccess:u}=i.supplier||{},h=a?t(a):null,[p,m]=N.useState(!1),b=N.useCallback(()=>({name:"",email:"",phone:"",supplier_type:"pessoa_juridica",category:"",status:"ativo",cpf:"",cnpj:"",notes:""}),[]),[_,x]=N.useState(b()),k=h?`supplier_form_draft_${h.id}`:"supplier_form_draft_new";N.useEffect(()=>{if(o){const j=localStorage.getItem(k);if(j)x(JSON.parse(j));else if(h){const B={name:h.name||"",email:h.email||"",phone:h.phone||"",supplier_type:h.supplier_type||"pessoa_juridica",category:h.category||"",status:h.status||"ativo",cpf:h.cpf||"",cnpj:h.cnpj||"",notes:h.notes||""};x(B)}else x(b())}},[h,o,k,b]),N.useEffect(()=>{o&&localStorage.setItem(k,JSON.stringify(_))},[_,o,k]);const E=()=>{localStorage.removeItem(k),s("supplier")},T=async j=>{if(j.preventDefault(),!_.name.trim()){r({title:"Erro de Validação",description:"O nome do fornecedor é obrigatório.",variant:"destructive"});return}m(!0);const B={..._};B.supplier_type==="pessoa_fisica"||B.supplier_type==="mei"?B.cnpj="":B.cpf="";try{let W;h?(W=await e(h.id,B),r({title:"Fornecedor atualizado",description:"Fornecedor foi atualizado com sucesso!"})):(W=await n(B),r({title:"Fornecedor adicionado",description:"Novo fornecedor foi adicionado com sucesso!"})),c&&u&&(u(W||{...B,id:h?.id}),r({title:"Sucesso!",description:"Fornecedor selecionado automaticamente no formulário financeiro."})),localStorage.removeItem(k),E()}catch(W){r({title:"Erro ao salvar",description:`Falha ao salvar fornecedor: ${W.message}`,variant:"destructive"})}finally{m(!1)}},L=(j,B)=>{x(W=>{const U={...W,[j]:B};return j==="supplier_type"&&(U.cpf="",U.cnpj=""),U})};return o?y.jsx(ka,{children:o&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[4100]",children:y.jsxs(Ki.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[4101]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:h?"Editar Fornecedor":"Novo Fornecedor"}),y.jsx(mn,{variant:"ghost",size:"icon",onClick:E,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:p,children:y.jsx(ef,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:T,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsx("div",{className:"flex flex-col items-center space-y-3",children:y.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:y.jsx(Pv,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fv,{className:"w-4 h-4 inline mr-2"}),"Nome do Fornecedor *"]}),y.jsx("input",{type:"text",value:_.name,onChange:j=>L("name",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do fornecedor",required:!0,disabled:p})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fv,{className:"w-4 h-4 inline mr-2"}),"Tipo de Fornecedor"]}),y.jsx("select",{value:_.supplier_type,onChange:j=>L("supplier_type",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:p,children:LK.map(j=>y.jsx("option",{value:j.value,children:j.label},j.value))})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(Pv,{className:"w-4 h-4 inline mr-2"}),"Categoria"]}),y.jsxs("select",{value:_.category,onChange:j=>L("category",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:p,children:[y.jsx("option",{value:"",children:"Selecione uma categoria"}),TK.map(j=>y.jsxs("option",{value:j.value,children:[j.icon," ",j.label]},j.value))]})]}),(_.supplier_type==="pessoa_fisica"||_.supplier_type==="mei")&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx($m,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:_.cpf,onChange:j=>L("cpf",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:p})]}),_.supplier_type==="pessoa_juridica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(fv,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:_.cnpj,onChange:j=>L("cnpj",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:p})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(nN,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:_.email,onChange:j=>L("email",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:p})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(rN,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:_.phone,onChange:j=>L("phone",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:p})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx($m,{className:"w-4 h-4 inline mr-2"}),"Observações (Opcional)"]}),y.jsx("textarea",{value:_.notes,onChange:j=>L("notes",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent h-20 resize-none",placeholder:"Observações sobre o fornecedor...",disabled:p})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsx("select",{value:_.status,onChange:j=>L("status",j.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:p,children:RK.map(j=>y.jsx("option",{value:j.value,children:j.label},j.value))})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(mn,{type:"button",variant:"outline",onClick:E,className:"flex-1",disabled:p,children:"Cancelar"}),y.jsx(mn,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:p,children:p?y.jsx(Zf,{className:"w-4 h-4 animate-spin"}):h?"Atualizar":"Adicionar"})]})]})]})})}):null},Ds=N.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:kn("flex h-10 w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:r,...t}));Ds.displayName="Input";var jK="Label",W3=N.forwardRef((n,e)=>y.jsx(wn.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));W3.displayName=jK;var H3=W3;const MK=Hx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gr=vn.forwardRef(({className:n,...e},t)=>y.jsx(H3,{ref:t,className:kn(MK(),n),...e}));gr.displayName=H3.displayName;var V1="Dialog",[G3,bne]=id(V1),[OK,iu]=G3(V1),Y3=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=n,a=N.useRef(null),c=N.useRef(null),[u,h]=qm({prop:r,defaultProp:i??!1,onChange:s,caller:V1});return y.jsx(OK,{scope:e,triggerRef:a,contentRef:c,contentId:Jd(),titleId:Jd(),descriptionId:Jd(),open:u,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(p=>!p),[h]),modal:o,children:t})};Y3.displayName=V1;var K3="DialogTrigger",X3=N.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=iu(K3,t),s=rr(e,i.triggerRef);return y.jsx(wn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":__(i.open),...r,ref:s,onClick:Bt(n.onClick,i.onOpenToggle)})});X3.displayName=K3;var w_="DialogPortal",[DK,Z3]=G3(w_,{forceMount:void 0}),J3=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=iu(w_,e);return y.jsx(DK,{scope:e,forceMount:t,children:N.Children.map(r,o=>y.jsx(Ul,{present:t||s.open,children:y.jsx(M1,{asChild:!0,container:i,children:o})}))})};J3.displayName=w_;var i1="DialogOverlay",Q3=N.forwardRef((n,e)=>{const t=Z3(i1,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=iu(i1,n.__scopeDialog);return s.modal?y.jsx(Ul,{present:r||s.open,children:y.jsx(BK,{...i,ref:e})}):null});Q3.displayName=i1;var FK=Jf("DialogOverlay.RemoveScroll"),BK=N.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=iu(i1,t);return y.jsx(D1,{as:FK,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(wn.div,{"data-state":__(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),np="DialogContent",e4=N.forwardRef((n,e)=>{const t=Z3(np,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=iu(np,n.__scopeDialog);return y.jsx(Ul,{present:r||s.open,children:s.modal?y.jsx(zK,{...i,ref:e}):y.jsx(UK,{...i,ref:e})})});e4.displayName=np;var zK=N.forwardRef((n,e)=>{const t=iu(np,n.__scopeDialog),r=N.useRef(null),i=rr(e,t.contentRef,r);return N.useEffect(()=>{const s=r.current;if(s)return i_(s)},[]),y.jsx(t4,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Bt(n.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Bt(n.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Bt(n.onFocusOutside,s=>s.preventDefault())})}),UK=N.forwardRef((n,e)=>{const t=iu(np,n.__scopeDialog),r=N.useRef(!1),i=N.useRef(!1);return y.jsx(t4,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),t4=N.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=n,a=iu(np,t),c=N.useRef(null),u=rr(e,c);return Yx(),y.jsxs(y.Fragment,{children:[y.jsx(T1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(N1,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":__(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx($K,{titleId:a.titleId}),y.jsx(VK,{contentRef:c,descriptionId:a.descriptionId})]})]})}),x_="DialogTitle",n4=N.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=iu(x_,t);return y.jsx(wn.h2,{id:i.titleId,...r,ref:e})});n4.displayName=x_;var r4="DialogDescription",i4=N.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=iu(r4,t);return y.jsx(wn.p,{id:i.descriptionId,...r,ref:e})});i4.displayName=r4;var s4="DialogClose",o4=N.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=iu(s4,t);return y.jsx(wn.button,{type:"button",...r,ref:e,onClick:Bt(n.onClick,()=>i.onOpenChange(!1))})});o4.displayName=s4;function __(n){return n?"open":"closed"}var a4="DialogTitleWarning",[wne,l4]=UV(a4,{contentName:np,titleName:x_,docsSlug:"dialog"}),$K=({titleId:n})=>{const e=l4(a4),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},qK="DialogDescriptionWarning",VK=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${l4(qK).contentName}}.`;return N.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},WK=Y3,xne=X3,HK=J3,c4=Q3,u4=e4,d4=n4,h4=i4,f4=o4;const p4=WK,GK=HK,_ne=f4,m4=vn.forwardRef(({className:n,...e},t)=>y.jsx(c4,{ref:t,className:kn("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));m4.displayName=c4.displayName;const S_=vn.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(GK,{children:[y.jsx(m4,{}),y.jsxs(u4,{ref:r,className:kn("fixed left-[50%] top-[50%] z-[51] grid w-full max-w-lg max-h-[85vh] translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/50 bg-background/70 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-xl overflow-hidden",n),...t,children:[y.jsx("div",{className:"overflow-auto max-h-full",children:e}),y.jsxs(f4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground z-50",children:[y.jsx(ef,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));S_.displayName=u4.displayName;const A_=({className:n,...e})=>y.jsx("div",{className:kn("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});A_.displayName="DialogHeader";const YK=({className:n,...e})=>y.jsx("div",{className:kn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});YK.displayName="DialogFooter";const C_=vn.forwardRef(({className:n,...e},t)=>y.jsx(d4,{ref:t,className:kn("text-lg font-semibold leading-none tracking-tight",n),...e}));C_.displayName=d4.displayName;const E_=vn.forwardRef(({className:n,...e},t)=>y.jsx(h4,{ref:t,className:kn("text-sm text-muted-foreground",n),...e}));E_.displayName=h4.displayName;function jr(n){"@babel/helpers - typeof";return jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(n)}var Jo=Uint8Array,Fl=Uint16Array,k_=Int32Array,W1=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),H1=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I2=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g4=function(n,e){for(var t=new Fl(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new k_(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},v4=g4(W1,2),y4=v4.b,j2=v4.r;y4[28]=258,j2[258]=28;var b4=g4(H1,0),KK=b4.b,vC=b4.r,M2=new Fl(32768);for(var ii=0;ii<32768;++ii){var Th=(ii&43690)>>1|(ii&21845)<<1;Th=(Th&52428)>>2|(Th&13107)<<2,Th=(Th&61680)>>4|(Th&3855)<<4,M2[ii]=((Th&65280)>>8|(Th&255)<<8)>>1}var ed=function(n,e,t){for(var r=n.length,i=0,s=new Fl(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new Fl(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Fl(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,m=p|(1<<h)-1;p<=m;++p)a[M2[p]>>c]=u}else for(a=new Fl(r),i=0;i<r;++i)n[i]&&(a[i]=M2[o[n[i]-1]++]>>15-n[i]);return a},Yh=new Jo(288);for(var ii=0;ii<144;++ii)Yh[ii]=8;for(var ii=144;ii<256;++ii)Yh[ii]=9;for(var ii=256;ii<280;++ii)Yh[ii]=7;for(var ii=280;ii<288;++ii)Yh[ii]=8;var Dv=new Jo(32);for(var ii=0;ii<32;++ii)Dv[ii]=5;var XK=ed(Yh,9,0),ZK=ed(Yh,9,1),JK=ed(Dv,5,0),QK=ed(Dv,5,1),Aw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Kc=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Cw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},P_=function(n){return(n+7)/8|0},w4=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Jo(n.subarray(e,t))},eX=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Jc=function(n,e,t){var r=new Error(e||eX[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Jc),!t)throw r;return r},tX=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Jo(0);var o=!t,a=o||e.i!=2,c=e.i;o&&(t=new Jo(i*3));var u=function(Ye){var at=t.length;if(Ye>at){var ht=new Jo(Math.max(at*2,Ye));ht.set(t),t=ht}},h=e.f||0,p=e.p||0,m=e.b||0,b=e.l,_=e.d,x=e.m,k=e.n,E=i*8;do{if(!b){h=Kc(n,p,1);var T=Kc(n,p+1,3);if(p+=3,T)if(T==1)b=ZK,_=QK,x=9,k=5;else if(T==2){var W=Kc(n,p,31)+257,U=Kc(n,p+10,15)+4,q=W+Kc(n,p+5,31)+1;p+=14;for(var ie=new Jo(q),ve=new Jo(19),$=0;$<U;++$)ve[I2[$]]=Kc(n,p+$*3,7);p+=U*3;for(var z=Aw(ve),le=(1<<z)-1,ne=ed(ve,z,1),$=0;$<q;){var ee=ne[Kc(n,p,le)];p+=ee&15;var L=ee>>4;if(L<16)ie[$++]=L;else{var G=0,he=0;for(L==16?(he=3+Kc(n,p,3),p+=2,G=ie[$-1]):L==17?(he=3+Kc(n,p,7),p+=3):L==18&&(he=11+Kc(n,p,127),p+=7);he--;)ie[$++]=G}}var X=ie.subarray(0,W),fe=ie.subarray(W);x=Aw(X),k=Aw(fe),b=ed(X,x,1),_=ed(fe,k,1)}else Jc(1);else{var L=P_(p)+4,j=n[L-4]|n[L-3]<<8,B=L+j;if(B>i){c&&Jc(0);break}a&&u(m+j),t.set(n.subarray(L,B),m),e.b=m+=j,e.p=p=B*8,e.f=h;continue}if(p>E){c&&Jc(0);break}}a&&u(m+131072);for(var ue=(1<<x)-1,se=(1<<k)-1,F=p;;F=p){var G=b[Cw(n,p)&ue],te=G>>4;if(p+=G&15,p>E){c&&Jc(0);break}if(G||Jc(2),te<256)t[m++]=te;else if(te==256){F=p,b=null;break}else{var Q=te-254;if(te>264){var $=te-257,ce=W1[$];Q=Kc(n,p,(1<<ce)-1)+y4[$],p+=ce}var pe=_[Cw(n,p)&se],ge=pe>>4;pe||Jc(3),p+=pe&15;var fe=KK[ge];if(ge>3){var ce=H1[ge];fe+=Cw(n,p)&(1<<ce)-1,p+=ce}if(p>E){c&&Jc(0);break}a&&u(m+131072);var _e=m+Q;if(m<fe){var Te=s-fe,Ge=Math.min(fe,_e);for(Te+m<0&&Jc(3);m<Ge;++m)t[m]=r[Te+m]}for(;m<_e;++m)t[m]=t[m-fe]}}e.l=b,e.p=F,e.b=m,e.f=h,b&&(h=1,e.m=x,e.d=_,e.n=k)}while(!h);return m!=t.length&&o?w4(t,0,m):t.subarray(0,m)},zd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Wg=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Ew=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:_4,l:0};if(i==1){var o=new Jo(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(B,W){return B.f-W.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],u=0,h=1,p=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};h!=i-1;)a=t[t[u].f<t[p].f?u++:p++],c=t[u!=h&&t[u].f<t[p].f?u++:p++],t[h++]={s:-1,f:a.f+c.f,l:a,r:c};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var b=new Fl(m+1),_=O2(t[h-1],b,0);if(_>e){var r=0,x=0,k=_-e,E=1<<k;for(s.sort(function(W,U){return b[U.s]-b[W.s]||W.f-U.f});r<i;++r){var T=s[r].s;if(b[T]>e)x+=E-(1<<_-b[T]),b[T]=e;else break}for(x>>=k;x>0;){var L=s[r].s;b[L]<e?x-=1<<e-b[L]++-1:++r}for(;r>=0&&x;--r){var j=s[r].s;b[j]==e&&(--b[j],++x)}_=e}return{t:new Jo(b),l:_}},O2=function(n,e,t){return n.s==-1?Math.max(O2(n.l,e,t+1),O2(n.r,e,t+1)):e[n.s]=t},yC=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Fl(++e),r=0,i=n[0],s=1,o=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},Hg=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},x4=function(n,e,t){var r=t.length,i=P_(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},bC=function(n,e,t,r,i,s,o,a,c,u,h){zd(e,h++,t),++i[256];for(var p=Ew(i,15),m=p.t,b=p.l,_=Ew(s,15),x=_.t,k=_.l,E=yC(m),T=E.c,L=E.n,j=yC(x),B=j.c,W=j.n,U=new Fl(19),q=0;q<T.length;++q)++U[T[q]&31];for(var q=0;q<B.length;++q)++U[B[q]&31];for(var ie=Ew(U,7),ve=ie.t,$=ie.l,z=19;z>4&&!ve[I2[z-1]];--z);var le=u+5<<3,ne=Hg(i,Yh)+Hg(s,Dv)+o,ee=Hg(i,m)+Hg(s,x)+o+14+3*z+Hg(U,ve)+2*U[16]+3*U[17]+7*U[18];if(c>=0&&le<=ne&&le<=ee)return x4(e,h,n.subarray(c,c+u));var G,he,X,fe;if(zd(e,h,1+(ee<ne)),h+=2,ee<ne){G=ed(m,b,0),he=m,X=ed(x,k,0),fe=x;var ue=ed(ve,$,0);zd(e,h,L-257),zd(e,h+5,W-1),zd(e,h+10,z-4),h+=14;for(var q=0;q<z;++q)zd(e,h+3*q,ve[I2[q]]);h+=3*z;for(var se=[T,B],F=0;F<2;++F)for(var te=se[F],q=0;q<te.length;++q){var Q=te[q]&31;zd(e,h,ue[Q]),h+=ve[Q],Q>15&&(zd(e,h,te[q]>>5&127),h+=te[q]>>12)}}else G=XK,he=Yh,X=JK,fe=Dv;for(var q=0;q<a;++q){var ce=r[q];if(ce>255){var Q=ce>>18&31;Wg(e,h,G[Q+257]),h+=he[Q+257],Q>7&&(zd(e,h,ce>>23&31),h+=W1[Q]);var pe=ce&31;Wg(e,h,X[pe]),h+=fe[pe],pe>3&&(Wg(e,h,ce>>5&8191),h+=H1[pe])}else Wg(e,h,G[ce]),h+=he[ce]}return Wg(e,h,G[256]),h+he[256]},nX=new k_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_4=new Jo(0),rX=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Jo(r+o+5*(1+Math.ceil(o/7e3))+i),c=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(c[0]=s.r>>3);for(var p=nX[e-1],m=p>>13,b=p&8191,_=(1<<t)-1,x=s.p||new Fl(32768),k=s.h||new Fl(_+1),E=Math.ceil(t/3),T=2*E,L=function(Ct){return(n[Ct]^n[Ct+1]<<E^n[Ct+2]<<T)&_},j=new k_(25e3),B=new Fl(288),W=new Fl(32),U=0,q=0,ie=s.i||0,ve=0,$=s.w||0,z=0;ie+2<o;++ie){var le=L(ie),ne=ie&32767,ee=k[le];if(x[ne]=ee,k[le]=ne,$<=ie){var G=o-ie;if((U>7e3||ve>24576)&&(G>423||!u)){h=bC(n,c,0,j,B,W,q,ve,z,ie-z,h),ve=U=q=0,z=ie;for(var he=0;he<286;++he)B[he]=0;for(var he=0;he<30;++he)W[he]=0}var X=2,fe=0,ue=b,se=ne-ee&32767;if(G>2&&le==L(ie-se))for(var F=Math.min(m,G)-1,te=Math.min(32767,ie),Q=Math.min(258,G);se<=te&&--ue&&ne!=ee;){if(n[ie+X]==n[ie+X-se]){for(var ce=0;ce<Q&&n[ie+ce]==n[ie+ce-se];++ce);if(ce>X){if(X=ce,fe=se,ce>F)break;for(var pe=Math.min(se,ce-2),ge=0,he=0;he<pe;++he){var _e=ie-se+he&32767,Te=x[_e],Ge=_e-Te&32767;Ge>ge&&(ge=Ge,ee=_e)}}}ne=ee,ee=x[ne],se+=ne-ee&32767}if(fe){j[ve++]=268435456|j2[X]<<18|vC[fe];var Ye=j2[X]&31,at=vC[fe]&31;q+=W1[Ye]+H1[at],++B[257+Ye],++W[at],$=ie+X,++U}else j[ve++]=n[ie],++B[n[ie]]}}for(ie=Math.max(ie,$);ie<o;++ie)j[ve++]=n[ie],++B[n[ie]];h=bC(n,c,u,j,B,W,q,ve,z,ie-z,h),u||(s.r=h&7|c[h/8|0]<<3,h-=7,s.h=k,s.p=x,s.i=ie,s.w=$)}else{for(var ie=s.w||0;ie<o+u;ie+=65535){var ht=ie+65535;ht>=o&&(c[h/8|0]=u,ht=o),h=x4(c,h+1,n.subarray(ie,ht))}s.i=o}return w4(a,0,r+P_(h)+i)},S4=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},iX=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Jo(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return rX(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},A4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},sX=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=S4();i.p(e.dictionary),A4(n,2,i.d())}},oX=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Jc(6,"invalid zlib data"),(n[1]>>5&1)==1&&Jc(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function D2(n,e){e||(e={});var t=S4();t.p(n);var r=iX(n,e,e.dictionary?6:2,4);return sX(r,e),A4(r,r.length-4,t.d()),r}function aX(n,e){return tX(n.subarray(oX(n),-4),{i:2},e,e)}var lX=typeof TextDecoder<"u"&&new TextDecoder,cX=0;try{lX.decode(_4,{stream:!0}),cX=1}catch{}var fn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function kw(){fn.console&&typeof fn.console.log=="function"&&fn.console.log.apply(fn.console,arguments)}var zr={log:kw,warn:function(n){fn.console&&(typeof fn.console.warn=="function"?fn.console.warn.apply(fn.console,arguments):kw.call(null,arguments))},error:function(n){fn.console&&(typeof fn.console.error=="function"?fn.console.error.apply(fn.console,arguments):kw(n))}};function Pw(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Ff(r.response,e,t)},r.onerror=function(){zr.error("could not download file")},r.send()}function wC(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ly(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var pv,F2,Ff=fn.saveAs||((typeof window>"u"?"undefined":jr(window))!=="object"||window!==fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=fn.URL||fn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?wC(i.href)?Pw(n,e,t):ly(i,i.target="_blank"):ly(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){ly(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(wC(n))Pw(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){ly(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:jr(s)!=="object"&&(zr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Pw(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(fn.HTMLElement)||fn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":jr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(n)}else{var c=fn.URL||fn.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function C4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+a+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Nw(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Vo(t,r,i,s,e[0],7,-680876936),s=Vo(s,t,r,i,e[1],12,-389564586),i=Vo(i,s,t,r,e[2],17,606105819),r=Vo(r,i,s,t,e[3],22,-1044525330),t=Vo(t,r,i,s,e[4],7,-176418897),s=Vo(s,t,r,i,e[5],12,1200080426),i=Vo(i,s,t,r,e[6],17,-1473231341),r=Vo(r,i,s,t,e[7],22,-45705983),t=Vo(t,r,i,s,e[8],7,1770035416),s=Vo(s,t,r,i,e[9],12,-1958414417),i=Vo(i,s,t,r,e[10],17,-42063),r=Vo(r,i,s,t,e[11],22,-1990404162),t=Vo(t,r,i,s,e[12],7,1804603682),s=Vo(s,t,r,i,e[13],12,-40341101),i=Vo(i,s,t,r,e[14],17,-1502002290),t=Wo(t,r=Vo(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Wo(s,t,r,i,e[6],9,-1069501632),i=Wo(i,s,t,r,e[11],14,643717713),r=Wo(r,i,s,t,e[0],20,-373897302),t=Wo(t,r,i,s,e[5],5,-701558691),s=Wo(s,t,r,i,e[10],9,38016083),i=Wo(i,s,t,r,e[15],14,-660478335),r=Wo(r,i,s,t,e[4],20,-405537848),t=Wo(t,r,i,s,e[9],5,568446438),s=Wo(s,t,r,i,e[14],9,-1019803690),i=Wo(i,s,t,r,e[3],14,-187363961),r=Wo(r,i,s,t,e[8],20,1163531501),t=Wo(t,r,i,s,e[13],5,-1444681467),s=Wo(s,t,r,i,e[2],9,-51403784),i=Wo(i,s,t,r,e[7],14,1735328473),t=Ho(t,r=Wo(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ho(s,t,r,i,e[8],11,-2022574463),i=Ho(i,s,t,r,e[11],16,1839030562),r=Ho(r,i,s,t,e[14],23,-35309556),t=Ho(t,r,i,s,e[1],4,-1530992060),s=Ho(s,t,r,i,e[4],11,1272893353),i=Ho(i,s,t,r,e[7],16,-155497632),r=Ho(r,i,s,t,e[10],23,-1094730640),t=Ho(t,r,i,s,e[13],4,681279174),s=Ho(s,t,r,i,e[0],11,-358537222),i=Ho(i,s,t,r,e[3],16,-722521979),r=Ho(r,i,s,t,e[6],23,76029189),t=Ho(t,r,i,s,e[9],4,-640364487),s=Ho(s,t,r,i,e[12],11,-421815835),i=Ho(i,s,t,r,e[15],16,530742520),t=Go(t,r=Ho(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Go(s,t,r,i,e[7],10,1126891415),i=Go(i,s,t,r,e[14],15,-1416354905),r=Go(r,i,s,t,e[5],21,-57434055),t=Go(t,r,i,s,e[12],6,1700485571),s=Go(s,t,r,i,e[3],10,-1894986606),i=Go(i,s,t,r,e[10],15,-1051523),r=Go(r,i,s,t,e[1],21,-2054922799),t=Go(t,r,i,s,e[8],6,1873313359),s=Go(s,t,r,i,e[15],10,-30611744),i=Go(i,s,t,r,e[6],15,-1560198380),r=Go(r,i,s,t,e[13],21,1309151649),t=Go(t,r,i,s,e[4],6,-145523070),s=Go(s,t,r,i,e[11],10,-1120210379),i=Go(i,s,t,r,e[2],15,718787259),r=Go(r,i,s,t,e[9],21,-343485551),n[0]=Fh(t,n[0]),n[1]=Fh(r,n[1]),n[2]=Fh(i,n[2]),n[3]=Fh(s,n[3])}function G1(n,e,t,r,i,s){return e=Fh(Fh(e,n),Fh(r,s)),Fh(e<<i|e>>>32-i,t)}function Vo(n,e,t,r,i,s,o){return G1(e&t|~e&r,n,e,i,s,o)}function Wo(n,e,t,r,i,s,o){return G1(e&r|t&~r,n,e,i,s,o)}function Ho(n,e,t,r,i,s,o){return G1(e^t^r,n,e,i,s,o)}function Go(n,e,t,r,i,s,o){return G1(t^(e|~r),n,e,i,s,o)}function E4(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Nw(r,uX(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Nw(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Nw(r,i),r}function uX(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}pv=fn.atob.bind(fn),F2=fn.btoa.bind(fn);var xC="0123456789abcdef".split("");function dX(n){for(var e="",t=0;t<4;t++)e+=xC[n>>8*t+4&15]+xC[n>>8*t&15];return e}function hX(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function B2(n){return E4(n).map(hX).join("")}var fX=function(n){for(var e=0;e<n.length;e++)n[e]=dX(n[e]);return n.join("")}(E4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fh(n,e){if(fX){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function z2(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var u=0;for(c=0;c<256;c++){var h=a[c];u=(u+h+o.charCodeAt(c))%256,a[c]=a[u],a[u]=h}t=n,r=a}else a=r;var p=e.length,m=0,b=0,_="";for(c=0;c<p;c++)b=(b+(h=a[m=(m+1)%256]))%256,a[m]=a[b],a[b]=h,o=a[(a[m]+a[b])%256],_+=String.fromCharCode(e.charCodeAt(c)^o);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _C={print:4,modify:8,copy:16,"annot-forms":32};function gm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(_C.perm!==void 0)throw new Error("Invalid permission: "+a);i+=_C[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=B2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=z2(this.encryptionKey,this.padding)}function vm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function SC(n){if(jr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){fn.console&&zr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function s1(n){if(!(this instanceof s1))return new s1(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function k4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Uf(n,e,t,r,i){if(!(this instanceof Uf))return new Uf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,k4.call(this,r,i)}function Am(n,e,t,r,i){if(!(this instanceof Am))return new Am(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,k4.call(this,r,i)}function cn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,c=16,u="S",h=null;jr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,m={},b={internal:{},__private__:{}};b.__private__.PubSub=SC;var _="1.3",x=b.__private__.getPdfVersion=function(){return _};b.__private__.setPdfVersion=function(P){_=P};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var E=b.__private__.getPageFormat=function(P){return k[P]};i=i||"a4";var T={COMPAT:"compat",ADVANCED:"advanced"},L=T.COMPAT;function j(){this.saveGraphicsState(),we(new Wt(wt,0,0,-wt,0,Ba()*wt).toString()+" cm"),this.setFontSize(this.getFontSize()/wt),u="n",L=T.ADVANCED}function B(){this.restoreGraphicsState(),u="S",L=T.COMPAT}var W=b.__private__.combineFontStyleAndFontWeight=function(P,H){if(P=="bold"&&H=="normal"||P=="bold"&&H==400||P=="normal"&&H=="italic"||P=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(P=H==400||H==="normal"?P==="italic"?"italic":"normal":H!=700&&H!=="bold"||P!=="normal"?(H==700?"bold":H)+""+P:"bold"),P};b.advancedAPI=function(P){var H=L===T.COMPAT;return H&&j.call(this),typeof P!="function"||(P(this),H&&B.call(this)),this},b.compatAPI=function(P){var H=L===T.ADVANCED;return H&&B.call(this),typeof P!="function"||(P(this),H&&j.call(this)),this},b.isAdvancedAPI=function(){return L===T.ADVANCED};var U,q=function(P){if(L!==T.ADVANCED)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ie=b.roundToPrecision=b.__private__.roundToPrecision=function(P,H){var ye=e||H;if(isNaN(P)||isNaN(ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(ye).replace(/0+$/,"")};U=b.hpf=b.__private__.hpf=typeof c=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(P,c)}:c==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return ie(P,16)};var ve=b.f2=b.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return ie(P,2)},$=b.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return ie(P,3)},z=b.scale=b.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return L===T.COMPAT?P*wt:L===T.ADVANCED?P:void 0},le=function(P){return L===T.COMPAT?Ba()-P:L===T.ADVANCED?P:void 0},ne=function(P){return z(le(P))};b.__private__.setPrecision=b.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(e=parseInt(P,10))};var ee,G="00000000000000000000000000000000",he=b.__private__.getFileId=function(){return G},X=b.__private__.setFileId=function(P){return G=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Fr=new gm(h.userPermissions,h.userPassword,h.ownerPassword,G)),G};b.setFileId=function(P){return X(P),this},b.getFileId=function(){return he()};var fe=b.__private__.convertDateToPDFDate=function(P){var H=P.getTimezoneOffset(),ye=H<0?"+":"-",Ae=Math.floor(Math.abs(H/60)),Me=Math.abs(H%60),Xe=[ye,Q(Ae),"'",Q(Me),"'"].join("");return["D:",P.getFullYear(),Q(P.getMonth()+1),Q(P.getDate()),Q(P.getHours()),Q(P.getMinutes()),Q(P.getSeconds()),Xe].join("")},ue=b.__private__.convertPDFDateToDate=function(P){var H=parseInt(P.substr(2,4),10),ye=parseInt(P.substr(6,2),10)-1,Ae=parseInt(P.substr(8,2),10),Me=parseInt(P.substr(10,2),10),Xe=parseInt(P.substr(12,2),10),ot=parseInt(P.substr(14,2),10);return new Date(H,ye,Ae,Me,Xe,ot,0)},se=b.__private__.setCreationDate=function(P){var H;if(P===void 0&&(P=new Date),P instanceof Date)H=fe(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=P}return ee=H},F=b.__private__.getCreationDate=function(P){var H=ee;return P==="jsDate"&&(H=ue(ee)),H};b.setCreationDate=function(P){return se(P),this},b.getCreationDate=function(P){return F(P)};var te,Q=b.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},ce=b.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},pe=0,ge=[],_e=[],Te=0,Ge=[],Ye=[],at=!1,ht=_e,Ct=function(){pe=0,Te=0,_e=[],ge=[],Ge=[],ta=Cr(),co=Cr()};b.__private__.setCustomOutputDestination=function(P){at=!0,ht=P};var We=function(P){at||(ht=P)};b.__private__.resetCustomOutputDestination=function(){at=!1,ht=_e};var we=b.__private__.out=function(P){return P=P.toString(),Te+=P.length+1,ht.push(P),ht},Mt=b.__private__.write=function(P){return we(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},Rt=b.__private__.getArrayBuffer=function(P){for(var H=P.length,ye=new ArrayBuffer(H),Ae=new Uint8Array(ye);H--;)Ae[H]=P.charCodeAt(H);return ye},ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return ut};var mt=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(P){return mt=L===T.ADVANCED?P/wt:P,this};var gt,bt=b.__private__.getFontSize=b.getFontSize=function(){return L===T.COMPAT?mt:mt*wt},Ot=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(P){return Ot=P,this},b.__private__.getR2L=b.getR2L=function(){return Ot};var Qt,Xt=b.__private__.setZoomMode=function(P){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))gt=P;else if(isNaN(P)){if(H.indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');gt=P}else gt=parseInt(P,10)};b.__private__.getZoomMode=function(){return gt};var un,$e=b.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');Qt=P};b.__private__.getPageMode=function(){return Qt};var Vt=b.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');un=P};b.__private__.getLayoutMode=function(){return un},b.__private__.setDisplayMode=b.setDisplayMode=function(P,H,ye){return Xt(P),Vt(H),$e(ye),this};var St={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(P){if(Object.keys(St).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return St[P]},b.__private__.getDocumentProperties=function(){return St},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(P){for(var H in St)St.hasOwnProperty(H)&&P[H]&&(St[H]=P[H]);return this},b.__private__.setDocumentProperty=function(P,H){if(Object.keys(St).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return St[P]=H};var Pt,wt,oi,Pn,Zi,Jn={},ir={},Ji=[],Un={},ea={},vr={},pi={},Ri=null,Sr=0,nn=[],qn=new SC(b),Ra=n.hotfixes||[],ei={},zs={},lo=[],Wt=function P(H,ye,Ae,Me,Xe,ot){if(!(this instanceof P))return new P(H,ye,Ae,Me,Xe,ot);isNaN(H)&&(H=1),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=1),isNaN(Xe)&&(Xe=0),isNaN(ot)&&(ot=0),this._matrix=[H,ye,Ae,Me,Xe,ot]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(P)},Wt.prototype.multiply=function(P){var H=P.sx*this.sx+P.shy*this.shx,ye=P.sx*this.shy+P.shy*this.sy,Ae=P.shx*this.sx+P.sy*this.shx,Me=P.shx*this.shy+P.sy*this.sy,Xe=P.tx*this.sx+P.ty*this.shx+this.tx,ot=P.tx*this.shy+P.ty*this.sy+this.ty;return new Wt(H,ye,Ae,Me,Xe,ot)},Wt.prototype.decompose=function(){var P=this.sx,H=this.shy,ye=this.shx,Ae=this.sy,Me=this.tx,Xe=this.ty,ot=Math.sqrt(P*P+H*H),Et=(P/=ot)*ye+(H/=ot)*Ae;ye-=P*Et,Ae-=H*Et;var Ht=Math.sqrt(ye*ye+Ae*Ae);return Et/=Ht,P*(Ae/=Ht)<H*(ye/=Ht)&&(P=-P,H=-H,Et=-Et,ot=-ot),{scale:new Wt(ot,0,0,Ht,0,0),translate:new Wt(1,0,0,1,Me,Xe),rotate:new Wt(P,H,-H,P,0,0),skew:new Wt(1,0,Et,1,0,0)}},Wt.prototype.toString=function(P){return this.join(" ")},Wt.prototype.inversed=function(){var P=this.sx,H=this.shy,ye=this.shx,Ae=this.sy,Me=this.tx,Xe=this.ty,ot=1/(P*Ae-H*ye),Et=Ae*ot,Ht=-H*ot,pn=-ye*ot,rn=P*ot;return new Wt(Et,Ht,pn,rn,-Et*Me-pn*Xe,-Ht*Me-rn*Xe)},Wt.prototype.applyToPoint=function(P){var H=P.x*this.sx+P.y*this.shx+this.tx,ye=P.x*this.shy+P.y*this.sy+this.ty;return new ti(H,ye)},Wt.prototype.applyToRectangle=function(P){var H=this.applyToPoint(P),ye=this.applyToPoint(new ti(P.x+P.w,P.y+P.h));return new Jl(H.x,H.y,ye.x-H.x,ye.y-H.y)},Wt.prototype.clone=function(){var P=this.sx,H=this.shy,ye=this.shx,Ae=this.sy,Me=this.tx,Xe=this.ty;return new Wt(P,H,ye,Ae,Me,Xe)},b.Matrix=Wt;var Ii=b.matrixMult=function(P,H){return H.multiply(P)},Qi=new Wt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Qi;var Si=function(P,H){if(!ea[P]){var ye=(H instanceof Uf?"Sh":"P")+(Object.keys(Un).length+1).toString(10);H.id=ye,ea[P]=ye,Un[ye]=H,qn.publish("addPattern",H)}};b.ShadingPattern=Uf,b.TilingPattern=Am,b.addShadingPattern=function(P,H){return q("addShadingPattern()"),Si(P,H),this},b.beginTilingPattern=function(P){q("beginTilingPattern()"),oa(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},b.endTilingPattern=function(P,H){q("endTilingPattern()"),H.stream=Ye[te].join(`
`),Si(P,H),qn.publish("endTilingPattern",H),lo.pop().restore()};var Ar=b.__private__.newObject=function(){var P=Cr();return Ai(P,!0),P},Cr=b.__private__.newObjectDeferred=function(){return pe++,ge[pe]=function(){return Te},pe},Ai=function(P,H){return H=typeof H=="boolean"&&H,ge[P]=Te,H&&we(P+" 0 obj"),P},Ia=b.__private__.newAdditionalObject=function(){var P={objId:Cr(),content:""};return Ge.push(P),P},ta=Cr(),co=Cr(),uo=b.__private__.decodeColorString=function(P){var H=P.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var ye=parseFloat(H[0]);H=[ye,ye,ye,"r"]}for(var Ae="#",Me=0;Me<3;Me++)Ae+=("0"+Math.floor(255*parseFloat(H[Me])).toString(16)).slice(-2);return Ae},mi=b.__private__.encodeColorString=function(P){var H;typeof P=="string"&&(P={ch1:P});var ye=P.ch1,Ae=P.ch2,Me=P.ch3,Xe=P.ch4,ot=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ye=="string"&&ye.charAt(0)!=="#"){var Et=new C4(ye);if(Et.ok)ye=Et.toHex();else if(!/^\d*\.?\d*$/.test(ye))throw new Error('Invalid color "'+ye+'" passed to jsPDF.encodeColorString.')}if(typeof ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ye)&&(ye="#"+ye[1]+ye[1]+ye[2]+ye[2]+ye[3]+ye[3]),typeof ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ye)){var Ht=parseInt(ye.substr(1),16);ye=Ht>>16&255,Ae=Ht>>8&255,Me=255&Ht}if(Ae===void 0||Xe===void 0&&ye===Ae&&Ae===Me)if(typeof ye=="string")H=ye+" "+ot[0];else switch(P.precision){case 2:H=ve(ye/255)+" "+ot[0];break;case 3:default:H=$(ye/255)+" "+ot[0]}else if(Xe===void 0||jr(Xe)==="object"){if(Xe&&!isNaN(Xe.a)&&Xe.a===0)return H=["1.","1.","1.",ot[1]].join(" ");if(typeof ye=="string")H=[ye,Ae,Me,ot[1]].join(" ");else switch(P.precision){case 2:H=[ve(ye/255),ve(Ae/255),ve(Me/255),ot[1]].join(" ");break;default:case 3:H=[$(ye/255),$(Ae/255),$(Me/255),ot[1]].join(" ")}}else if(typeof ye=="string")H=[ye,Ae,Me,Xe,ot[2]].join(" ");else switch(P.precision){case 2:H=[ve(ye),ve(Ae),ve(Me),ve(Xe),ot[2]].join(" ");break;case 3:default:H=[$(ye),$(Ae),$(Me),$(Xe),ot[2]].join(" ")}return H},Us=b.__private__.getFilters=function(){return o},gs=b.__private__.putStream=function(P){var H=(P=P||{}).data||"",ye=P.filters||Us(),Ae=P.alreadyAppliedFilters||[],Me=P.addLength1||!1,Xe=H.length,ot=P.objectId,Et=function(Ei){return Ei};if(h!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Et=Fr.encryptor(ot,0));var Ht={};ye===!0&&(ye=["FlateEncode"]);var pn=P.additionalKeyValues||[],rn=(Ht=cn.API.processDataByFilters!==void 0?cn.API.processDataByFilters(H,ye):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(Ht.data.length!==0&&(pn.push({key:"Length",value:Ht.data.length}),Me===!0&&pn.push({key:"Length1",value:Xe})),rn.length!=0)if(rn.split("/").length-1==1)pn.push({key:"Filter",value:rn});else{pn.push({key:"Filter",value:"["+rn+"]"});for(var Tn=0;Tn<pn.length;Tn+=1)if(pn[Tn].key==="DecodeParms"){for(var Mr=[],$r=0;$r<Ht.reverseChain.split("/").length-1;$r+=1)Mr.push("null");Mr.push(pn[Tn].value),pn[Tn].value="["+Mr.join(" ")+"]"}}we("<<");for(var qr=0;qr<pn.length;qr++)we("/"+pn[qr].key+" "+pn[qr].value);we(">>"),Ht.data.length!==0&&(we("stream"),we(Et(Ht.data)),we("endstream"))},na=b.__private__.putPage=function(P){var H=P.number,ye=P.data,Ae=P.objId,Me=P.contentsObjId;Ai(Ae,!0),we("<</Type /Page"),we("/Parent "+P.rootDictionaryObjId+" 0 R"),we("/Resources "+P.resourceDictionaryObjId+" 0 R"),we("/MediaBox ["+parseFloat(U(P.mediaBox.bottomLeftX))+" "+parseFloat(U(P.mediaBox.bottomLeftY))+" "+U(P.mediaBox.topRightX)+" "+U(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&we("/CropBox ["+U(P.cropBox.bottomLeftX)+" "+U(P.cropBox.bottomLeftY)+" "+U(P.cropBox.topRightX)+" "+U(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&we("/BleedBox ["+U(P.bleedBox.bottomLeftX)+" "+U(P.bleedBox.bottomLeftY)+" "+U(P.bleedBox.topRightX)+" "+U(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&we("/TrimBox ["+U(P.trimBox.bottomLeftX)+" "+U(P.trimBox.bottomLeftY)+" "+U(P.trimBox.topRightX)+" "+U(P.trimBox.topRightY)+"]"),P.artBox!==null&&we("/ArtBox ["+U(P.artBox.bottomLeftX)+" "+U(P.artBox.bottomLeftY)+" "+U(P.artBox.topRightX)+" "+U(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&we("/UserUnit "+P.userUnit),qn.publish("putPage",{objId:Ae,pageContext:nn[H],pageNumber:H,page:ye}),we("/Contents "+Me+" 0 R"),we(">>"),we("endobj");var Xe=ye.join(`
`);return L===T.ADVANCED&&(Xe+=`
Q`),Ai(Me,!0),gs({data:Xe,filters:Us(),objectId:Me}),we("endobj"),Ae},ol=b.__private__.putPages=function(){var P,H,ye=[];for(P=1;P<=Sr;P++)nn[P].objId=Cr(),nn[P].contentsObjId=Cr();for(P=1;P<=Sr;P++)ye.push(na({number:P,data:Ye[P],objId:nn[P].objId,contentsObjId:nn[P].contentsObjId,mediaBox:nn[P].mediaBox,cropBox:nn[P].cropBox,bleedBox:nn[P].bleedBox,trimBox:nn[P].trimBox,artBox:nn[P].artBox,userUnit:nn[P].userUnit,rootDictionaryObjId:ta,resourceDictionaryObjId:co}));Ai(ta,!0),we("<</Type /Pages");var Ae="/Kids [";for(H=0;H<Sr;H++)Ae+=ye[H]+" 0 R ";we(Ae+"]"),we("/Count "+Sr),we(">>"),we("endobj"),qn.publish("postPutPages")},$l=function(P){qn.publish("putFont",{font:P,out:we,newObject:Ar,putStream:gs}),P.isAlreadyPutted!==!0&&(P.objectNumber=Ar(),we("<<"),we("/Type /Font"),we("/BaseFont /"+vm(P.postScriptName)),we("/Subtype /Type1"),typeof P.encoding=="string"&&we("/Encoding /"+P.encoding),we("/FirstChar 32"),we("/LastChar 255"),we(">>"),we("endobj"))},al=function(){for(var P in Jn)Jn.hasOwnProperty(P)&&(p===!1||p===!0&&m.hasOwnProperty(P))&&$l(Jn[P])},Be=function(P){P.objectNumber=Ar();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[U(P.x),U(P.y),U(P.x+P.width),U(P.y+P.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var ye=P.pages[1].join(`
`);gs({data:ye,additionalKeyValues:H,objectId:P.objectNumber}),we("endobj")},Se=function(){for(var P in ei)ei.hasOwnProperty(P)&&Be(ei[P])},Ve=function(P,H){var ye,Ae=[],Me=1/(H-1);for(ye=0;ye<1;ye+=Me)Ae.push(ye);if(Ae.push(1),P[0].offset!=0){var Xe={offset:0,color:P[0].color};P.unshift(Xe)}if(P[P.length-1].offset!=1){var ot={offset:1,color:P[P.length-1].color};P.push(ot)}for(var Et="",Ht=0,pn=0;pn<Ae.length;pn++){for(ye=Ae[pn];ye>P[Ht+1].offset;)Ht++;var rn=P[Ht].offset,Tn=(ye-rn)/(P[Ht+1].offset-rn),Mr=P[Ht].color,$r=P[Ht+1].color;Et+=ce(Math.round((1-Tn)*Mr[0]+Tn*$r[0]).toString(16))+ce(Math.round((1-Tn)*Mr[1]+Tn*$r[1]).toString(16))+ce(Math.round((1-Tn)*Mr[2]+Tn*$r[2]).toString(16))}return Et.trim()},Ke=function(P,H){H||(H=21);var ye=Ar(),Ae=Ve(P.colors,H),Me=[];Me.push({key:"FunctionType",value:"0"}),Me.push({key:"Domain",value:"[0.0 1.0]"}),Me.push({key:"Size",value:"["+H+"]"}),Me.push({key:"BitsPerSample",value:"8"}),Me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gs({data:Ae,additionalKeyValues:Me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ye}),we("endobj"),P.objectNumber=Ar(),we("<< /ShadingType "+P.type),we("/ColorSpace /DeviceRGB");var Xe="/Coords ["+U(parseFloat(P.coords[0]))+" "+U(parseFloat(P.coords[1]))+" ";P.type===2?Xe+=U(parseFloat(P.coords[2]))+" "+U(parseFloat(P.coords[3])):Xe+=U(parseFloat(P.coords[2]))+" "+U(parseFloat(P.coords[3]))+" "+U(parseFloat(P.coords[4]))+" "+U(parseFloat(P.coords[5])),we(Xe+="]"),P.matrix&&we("/Matrix ["+P.matrix.toString()+"]"),we("/Function "+ye+" 0 R"),we("/Extend [true true]"),we(">>"),we("endobj")},tt=function(P,H){var ye=Cr(),Ae=Ar();H.push({resourcesOid:ye,objectOid:Ae}),P.objectNumber=Ae;var Me=[];Me.push({key:"Type",value:"/Pattern"}),Me.push({key:"PatternType",value:"1"}),Me.push({key:"PaintType",value:"1"}),Me.push({key:"TilingType",value:"1"}),Me.push({key:"BBox",value:"["+P.boundingBox.map(U).join(" ")+"]"}),Me.push({key:"XStep",value:U(P.xStep)}),Me.push({key:"YStep",value:U(P.yStep)}),Me.push({key:"Resources",value:ye+" 0 R"}),P.matrix&&Me.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),gs({data:P.stream,additionalKeyValues:Me,objectId:P.objectNumber}),we("endobj")},Tt=function(P){var H;for(H in Un)Un.hasOwnProperty(H)&&(Un[H]instanceof Uf?Ke(Un[H]):Un[H]instanceof Am&&tt(Un[H],P))},Nn=function(P){for(var H in P.objectNumber=Ar(),we("<<"),P)switch(H){case"opacity":we("/ca "+ve(P[H]));break;case"stroke-opacity":we("/CA "+ve(P[H]))}we(">>"),we("endobj")},Dr=function(){var P;for(P in vr)vr.hasOwnProperty(P)&&Nn(vr[P])},$s=function(){for(var P in we("/XObject <<"),ei)ei.hasOwnProperty(P)&&ei[P].objectNumber>=0&&we("/"+P+" "+ei[P].objectNumber+" 0 R");qn.publish("putXobjectDict"),we(">>")},ja=function(){Fr.oid=Ar(),we("<<"),we("/Filter /Standard"),we("/V "+Fr.v),we("/R "+Fr.r),we("/U <"+Fr.toHexString(Fr.U)+">"),we("/O <"+Fr.toHexString(Fr.O)+">"),we("/P "+Fr.P),we(">>"),we("endobj")},ll=function(){for(var P in we("/Font <<"),Jn)Jn.hasOwnProperty(P)&&(p===!1||p===!0&&m.hasOwnProperty(P))&&we("/"+P+" "+Jn[P].objectNumber+" 0 R");we(">>")},No=function(){if(Object.keys(Un).length>0){for(var P in we("/Shading <<"),Un)Un.hasOwnProperty(P)&&Un[P]instanceof Uf&&Un[P].objectNumber>=0&&we("/"+P+" "+Un[P].objectNumber+" 0 R");qn.publish("putShadingPatternDict"),we(">>")}},au=function(P){if(Object.keys(Un).length>0){for(var H in we("/Pattern <<"),Un)Un.hasOwnProperty(H)&&Un[H]instanceof b.TilingPattern&&Un[H].objectNumber>=0&&Un[H].objectNumber<P&&we("/"+H+" "+Un[H].objectNumber+" 0 R");qn.publish("putTilingPatternDict"),we(">>")}},ho=function(){if(Object.keys(vr).length>0){var P;for(P in we("/ExtGState <<"),vr)vr.hasOwnProperty(P)&&vr[P].objectNumber>=0&&we("/"+P+" "+vr[P].objectNumber+" 0 R");qn.publish("putGStateDict"),we(">>")}},Ur=function(P){Ai(P.resourcesOid,!0),we("<<"),we("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ll(),No(),au(P.objectOid),ho(),$s(),we(">>"),we("endobj")},ld=function(){var P=[];al(),Dr(),Se(),Tt(P),qn.publish("putResources"),P.forEach(Ur),Ur({resourcesOid:co,objectOid:Number.MAX_SAFE_INTEGER}),qn.publish("postPutResources")},cd=function(){qn.publish("putAdditionalObjects");for(var P=0;P<Ge.length;P++){var H=Ge[P];Ai(H.objId,!0),we(H.content),we("endobj")}qn.publish("postPutAdditionalObjects")},cl=function(P){ir[P.fontName]=ir[P.fontName]||{},ir[P.fontName][P.fontStyle]=P.id},ql=function(P,H,ye,Ae,Me){var Xe={id:"F"+(Object.keys(Jn).length+1).toString(10),postScriptName:P,fontName:H,fontStyle:ye,encoding:Ae,isStandardFont:Me||!1,metadata:{}};return qn.publish("addFont",{font:Xe,instance:this}),Jn[Xe.id]=Xe,cl(Xe),Xe.id},Vl=function(P){for(var H=0,ye=ut.length;H<ye;H++){var Ae=ql.call(this,P[H][0],P[H][1],P[H][2],ut[H][3],!0);p===!1&&(m[Ae]=!0);var Me=P[H][0].split("-");cl({id:Ae,fontName:Me[0],fontStyle:Me[1]||""})}qn.publish("addFonts",{fonts:Jn,dictionary:ir})},ji=function(P){return P.foo=function(){try{return P.apply(this,arguments)}catch(Ae){var H=Ae.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var ye="Error in function "+H.split(`
`)[0].split("<")[0]+": "+Ae.message;if(!fn.console)throw new Error(ye);fn.console.error(ye,Ae),fn.alert&&alert(ye)}},P.foo.bar=P,P.foo},Cc=function(P,H){var ye,Ae,Me,Xe,ot,Et,Ht,pn,rn;if(Me=(H=H||{}).sourceEncoding||"Unicode",ot=H.outputEncoding,(H.autoencode||ot)&&Jn[Pt].metadata&&Jn[Pt].metadata[Me]&&Jn[Pt].metadata[Me].encoding&&(Xe=Jn[Pt].metadata[Me].encoding,!ot&&Jn[Pt].encoding&&(ot=Jn[Pt].encoding),!ot&&Xe.codePages&&(ot=Xe.codePages[0]),typeof ot=="string"&&(ot=Xe[ot]),ot)){for(Ht=!1,Et=[],ye=0,Ae=P.length;ye<Ae;ye++)(pn=ot[P.charCodeAt(ye)])?Et.push(String.fromCharCode(pn)):Et.push(P[ye]),Et[ye].charCodeAt(0)>>8&&(Ht=!0);P=Et.join("")}for(ye=P.length;Ht===void 0&&ye!==0;)P.charCodeAt(ye-1)>>8&&(Ht=!0),ye--;if(!Ht)return P;for(Et=H.noBOM?[]:[254,255],ye=0,Ae=P.length;ye<Ae;ye++){if((rn=(pn=P.charCodeAt(ye))>>8)>>8)throw new Error("Character at position "+ye+" of string '"+P+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Et.push(rn),Et.push(pn-(rn<<8))}return String.fromCharCode.apply(void 0,Et)},qs=b.__private__.pdfEscape=b.pdfEscape=function(P,H){return Cc(P,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wl=b.__private__.beginPage=function(P){Ye[++Sr]=[],nn[Sr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},Hl(Sr),We(Ye[te])},lu=function(P,H){var ye,Ae,Me;switch(t=H||t,typeof P=="string"&&(ye=E(P.toLowerCase()),Array.isArray(ye)&&(Ae=ye[0],Me=ye[1])),Array.isArray(P)&&(Ae=P[0]*wt,Me=P[1]*wt),isNaN(Ae)&&(Ae=i[0],Me=i[1]),(Ae>14400||Me>14400)&&(zr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),Me=Math.min(14400,Me)),i=[Ae,Me],t.substr(0,1)){case"l":Me>Ae&&(i=[Me,Ae]);break;case"p":Ae>Me&&(i=[Me,Ae])}Wl(i),Nc(hd),we(Er),pu!==0&&we(pu+" J"),gi!==0&&we(gi+" j"),qn.publish("addPage",{pageNumber:Sr})},Ec=function(P){P>0&&P<=Sr&&(Ye.splice(P,1),nn.splice(P,1),Sr--,te>Sr&&(te=Sr),this.setPage(te))},Hl=function(P){P>0&&P<=Sr&&(te=P)},rh=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ye.length-1},Gl=function(P,H,ye){var Ae,Me=void 0;return ye=ye||{},P=P!==void 0?P:Jn[Pt].fontName,H=H!==void 0?H:Jn[Pt].fontStyle,Ae=P.toLowerCase(),ir[Ae]!==void 0&&ir[Ae][H]!==void 0?Me=ir[Ae][H]:ir[P]!==void 0&&ir[P][H]!==void 0?Me=ir[P][H]:ye.disableWarning===!1&&zr.warn("Unable to look up font label for font '"+P+"', '"+H+"'. Refer to getFontList() for available fonts."),Me||ye.noFallback||(Me=ir.times[H])==null&&(Me=ir.times.normal),Me},Vn=b.__private__.putInfo=function(){var P=Ar(),H=function(Ae){return Ae};for(var ye in h!==null&&(H=Fr.encryptor(P,0)),we("<<"),we("/Producer ("+qs(H("jsPDF "+cn.version))+")"),St)St.hasOwnProperty(ye)&&St[ye]&&we("/"+ye.substr(0,1).toUpperCase()+ye.substr(1)+" ("+qs(H(St[ye]))+")");we("/CreationDate ("+qs(H(ee))+")"),we(">>"),we("endobj")},ra=b.__private__.putCatalog=function(P){var H=(P=P||{}).rootDictionaryObjId||ta;switch(Ar(),we("<<"),we("/Type /Catalog"),we("/Pages "+H+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":we("/OpenAction [3 0 R /FitH null]");break;case"fullheight":we("/OpenAction [3 0 R /FitV null]");break;case"fullpage":we("/OpenAction [3 0 R /Fit]");break;case"original":we("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ye=""+gt;ye.substr(ye.length-1)==="%"&&(gt=parseInt(gt)/100),typeof gt=="number"&&we("/OpenAction [3 0 R /XYZ null null "+ve(gt)+"]")}switch(un||(un="continuous"),un){case"continuous":we("/PageLayout /OneColumn");break;case"single":we("/PageLayout /SinglePage");break;case"two":case"twoleft":we("/PageLayout /TwoColumnLeft");break;case"tworight":we("/PageLayout /TwoColumnRight")}Qt&&we("/PageMode /"+Qt),qn.publish("putCatalog"),we(">>"),we("endobj")},ud=b.__private__.putTrailer=function(){we("trailer"),we("<<"),we("/Size "+(pe+1)),we("/Root "+pe+" 0 R"),we("/Info "+(pe-1)+" 0 R"),h!==null&&we("/Encrypt "+Fr.oid+" 0 R"),we("/ID [ <"+G+"> <"+G+"> ]"),we(">>")},cu=b.__private__.putHeader=function(){we("%PDF-"+_),we("%ºß¬à")},ih=b.__private__.putXRef=function(){var P="0000000000";we("xref"),we("0 "+(pe+1)),we("0000000000 65535 f ");for(var H=1;H<=pe;H++)typeof ge[H]=="function"?we((P+ge[H]()).slice(-10)+" 00000 n "):ge[H]!==void 0?we((P+ge[H]).slice(-10)+" 00000 n "):we("0000000000 00000 n ")},ia=b.__private__.buildDocument=function(){Ct(),We(_e),qn.publish("buildDocument"),cu(),ol(),cd(),ld(),h!==null&&ja(),Vn(),ra();var P=Te;return ih(),ud(),we("startxref"),we(""+P),we("%%EOF"),We(Ye[te]),_e.join(`
`)},Yl=b.__private__.getBlob=function(P){return new Blob([Rt(P)],{type:"application/pdf"})},ul=b.output=b.__private__.output=ji(function(P,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",P){case void 0:return ia();case"save":b.save(H.filename);break;case"arraybuffer":return Rt(ia());case"blob":return Yl(ia());case"bloburi":case"bloburl":if(fn.URL!==void 0&&typeof fn.URL.createObjectURL=="function")return fn.URL&&fn.URL.createObjectURL(Yl(ia()))||void 0;zr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ye="",Ae=ia();try{ye=F2(Ae)}catch{ye=F2(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+H.filename+";base64,"+ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Me=H.pdfObjectUrl,Xe="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Me+'"'+Xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",Et=fn.open();return Et!==null&&Et.document.write(ot),Et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',pn=fn.open();if(pn!==null){pn.document.write(Ht);var rn=this;pn.document.documentElement.querySelector("#pdfViewer").onload=function(){pn.document.title=H.filename,pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rn.output("bloburl"))}}return pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Mr=fn.open();if(Mr!==null&&(Mr.document.write(Tn),Mr.document.title=H.filename),Mr||typeof safari>"u")return Mr;break;case"datauri":case"dataurl":return fn.document.location.href=this.output("datauristring",H);default:return null}}),Kl=function(P){return Array.isArray(Ra)===!0&&Ra.indexOf(P)>-1};switch(r){case"pt":wt=1;break;case"mm":wt=72/25.4;break;case"cm":wt=72/2.54;break;case"in":wt=72;break;case"px":wt=Kl("px_scaling")==1?.75:96/72;break;case"pc":case"em":wt=12;break;case"ex":wt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);wt=r}var Fr=null;se(),X();var Ma=function(P){return h!==null?Fr.encryptor(P,0):function(H){return H}},sa=b.__private__.getPageInfo=b.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nn[P].objId,pageNumber:P,pageContext:nn[P]}},Zt=b.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in nn)if(nn[H].objId===P)break;return sa(H)},kc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:nn[te].objId,pageNumber:te,pageContext:nn[te]}};b.addPage=function(){return lu.apply(this,arguments),this},b.setPage=function(){return Hl.apply(this,arguments),We.call(this,Ye[te]),this},b.insertPage=function(P){return this.addPage(),this.movePage(te,P),this},b.movePage=function(P,H){var ye,Ae;if(P>H){ye=Ye[P],Ae=nn[P];for(var Me=P;Me>H;Me--)Ye[Me]=Ye[Me-1],nn[Me]=nn[Me-1];Ye[H]=ye,nn[H]=Ae,this.setPage(H)}else if(P<H){ye=Ye[P],Ae=nn[P];for(var Xe=P;Xe<H;Xe++)Ye[Xe]=Ye[Xe+1],nn[Xe]=nn[Xe+1];Ye[H]=ye,nn[H]=Ae,this.setPage(H)}return this},b.deletePage=function(){return Ec.apply(this,arguments),this},b.__private__.text=b.text=function(P,H,ye,Ae,Me){var Xe,ot,Et,Ht,pn,rn,Tn,Mr,$r,qr=(Ae=Ae||{}).scope||this;if(typeof P=="number"&&typeof H=="number"&&(typeof ye=="string"||Array.isArray(ye))){var Ei=ye;ye=H,H=P,P=Ei}if(arguments[3]instanceof Wt?(q("The transform parameter of text() with a Matrix value"),$r=Me):(Et=arguments[4],Ht=arguments[5],jr(Tn=arguments[3])==="object"&&Tn!==null||(typeof Et=="string"&&(Ht=Et,Et=null),typeof Tn=="string"&&(Ht=Tn,Tn=null),typeof Tn=="number"&&(Et=Tn,Tn=null),Ae={flags:Tn,angle:Et,align:Ht})),isNaN(H)||isNaN(ye)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return qr;var ki="",Lo=!1,kr=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:Pc,Ws=qr.internal.scaleFactor;function Ro(sr){return sr=sr.split("	").join(Array(Ae.TabLen||9).join(" ")),qs(sr,Tn)}function vu(sr){for(var lr,Wr=sr.concat(),li=[],mo=Wr.length;mo--;)typeof(lr=Wr.shift())=="string"?li.push(lr):Array.isArray(sr)&&(lr.length===1||lr[1]===void 0&&lr[2]===void 0)?li.push(lr[0]):li.push([lr[0],lr[1],lr[2]]);return li}function Ic(sr,lr){var Wr;if(typeof sr=="string")Wr=lr(sr)[0];else if(Array.isArray(sr)){for(var li,mo,go=sr.concat(),Ua=[],Su=go.length;Su--;)typeof(li=go.shift())=="string"?Ua.push(lr(li)[0]):Array.isArray(li)&&typeof li[0]=="string"&&(mo=lr(li[0],li[1],li[2]),Ua.push([mo[0],mo[1],mo[2]]));Wr=Ua}return Wr}var jc=!1,yu=!0;if(typeof P=="string")jc=!0;else if(Array.isArray(P)){var bu=P.concat();ot=[];for(var Mc,Vr=bu.length;Vr--;)(typeof(Mc=bu.shift())!="string"||Array.isArray(Mc)&&typeof Mc[0]!="string")&&(yu=!1);jc=yu}if(jc===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var aa=mt/qr.internal.scaleFactor,wu=aa*(kr-1);switch(Ae.baseline){case"bottom":ye-=wu;break;case"top":ye+=aa-wu;break;case"hanging":ye+=aa-2*wu;break;case"middle":ye+=aa/2-wu}if((rn=Ae.maxWidth||0)>0&&(typeof P=="string"?P=qr.splitTextToSize(P,rn):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(sr,lr){return sr.concat(qr.splitTextToSize(lr,rn))},[]))),Xe={text:P,x:H,y:ye,options:Ae,mutex:{pdfEscape:qs,activeFontKey:Pt,fonts:Jn,activeFontSize:mt}},qn.publish("preProcessText",Xe),P=Xe.text,Et=(Ae=Xe.options).angle,!($r instanceof Wt)&&Et&&typeof Et=="number"){Et*=Math.PI/180,Ae.rotationDirection===0&&(Et=-Et),L===T.ADVANCED&&(Et=-Et);var xu=Math.cos(Et),ec=Math.sin(Et);$r=new Wt(xu,ec,-ec,xu,0,0)}else Et&&Et instanceof Wt&&($r=Et);L!==T.ADVANCED||$r||($r=Qi),(pn=Ae.charSpace||hl)!==void 0&&(ki+=U(z(pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mr=Ae.horizontalScale)!==void 0&&(ki+=U(100*Mr)+` Tz
`),Ae.lang;var es=-1,Hs=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,Io=qr.internal.getCurrentPageInfo().pageContext;switch(Hs){case 0:case!1:case"fill":es=0;break;case 1:case!0:case"stroke":es=1;break;case 2:case"fillThenStroke":es=2;break;case 3:case"invisible":es=3;break;case 4:case"fillAndAddForClipping":es=4;break;case 5:case"strokeAndAddPathForClipping":es=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":es=6;break;case 7:case"addToPathForClipping":es=7}var oh=Io.usedRenderingMode!==void 0?Io.usedRenderingMode:-1;es!==-1?ki+=es+` Tr
`:oh!==-1&&(ki+=`0 Tr
`),es!==-1&&(Io.usedRenderingMode=es),Ht=Ae.align||"left";var vs,_u=mt*kr,za=qr.internal.pageSize.getWidth(),ts=Jn[Pt];pn=Ae.charSpace||hl,rn=Ae.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var la=[],tc=function(sr){return qr.getStringUnitWidth(sr,{font:ts,charSpace:pn,fontSize:mt,doKerning:!1})*mt/Ws};if(Object.prototype.toString.call(P)==="[object Array]"){var ys;ot=vu(P),Ht!=="left"&&(vs=ot.map(tc));var ns,nc=0;if(Ht==="right"){H-=vs[0],P=[],Vr=ot.length;for(var fl=0;fl<Vr;fl++)fl===0?(ns=Vs(H),ys=Ci(ye)):(ns=z(nc-vs[fl]),ys=-_u),P.push([ot[fl],ns,ys]),nc=vs[fl]}else if(Ht==="center"){H-=vs[0]/2,P=[],Vr=ot.length;for(var Gs=0;Gs<Vr;Gs++)Gs===0?(ns=Vs(H),ys=Ci(ye)):(ns=z((nc-vs[Gs])/2),ys=-_u),P.push([ot[Gs],ns,ys]),nc=vs[Gs]}else if(Ht==="left"){P=[],Vr=ot.length;for(var Re=0;Re<Vr;Re++)P.push(ot[Re])}else if(Ht==="justify"&&ts.encoding==="Identity-H"){P=[],Vr=ot.length,rn=rn!==0?rn:za;for(var Ze=0,Oe=0;Oe<Vr;Oe++)if(ys=Oe===0?Ci(ye):-_u,ns=Oe===0?Vs(H):Ze,Oe<Vr-1){var At=z((rn-vs[Oe])/(ot[Oe].split(" ").length-1)),$t=ot[Oe].split(" ");P.push([$t[0]+" ",ns,ys]),Ze=0;for(var gn=1;gn<$t.length;gn++){var Pr=(tc($t[gn-1]+" "+$t[gn])-tc($t[gn]))*Ws+At;gn==$t.length-1?P.push([$t[gn],Pr,0]):P.push([$t[gn]+" ",Pr,0]),Ze-=Pr}}else P.push([ot[Oe],ns,ys]);P.push(["",Ze,0])}else{if(Ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(P=[],Vr=ot.length,rn=rn!==0?rn:za,Oe=0;Oe<Vr;Oe++)ys=Oe===0?Ci(ye):-_u,ns=Oe===0?Vs(H):0,Oe<Vr-1?la.push(U(z((rn-vs[Oe])/(ot[Oe].split(" ").length-1)))):la.push(0),P.push([ot[Oe],ns,ys])}}var Qn=typeof Ae.R2L=="boolean"?Ae.R2L:Ot;Qn===!0&&(P=Ic(P,function(sr,lr,Wr){return[sr.split("").reverse().join(""),lr,Wr]})),Xe={text:P,x:H,y:ye,options:Ae,mutex:{pdfEscape:qs,activeFontKey:Pt,fonts:Jn,activeFontSize:mt}},qn.publish("postProcessText",Xe),P=Xe.text,Lo=Xe.mutex.isHex||!1;var pl=Jn[Pt].encoding;pl!=="WinAnsiEncoding"&&pl!=="StandardEncoding"||(P=Ic(P,function(sr,lr,Wr){return[Ro(sr),lr,Wr]})),ot=vu(P),P=[];for(var Oc,Pi,rs,ml=0,bs=1,jo=Array.isArray(ot[0])?bs:ml,Mo="",jn=function(sr,lr,Wr){var li="";return Wr instanceof Wt?(Wr=typeof Ae.angle=="number"?Ii(Wr,new Wt(1,0,0,1,sr,lr)):Ii(new Wt(1,0,0,1,sr,lr),Wr),L===T.ADVANCED&&(Wr=Ii(new Wt(1,0,0,-1,0,0),Wr)),li=Wr.join(" ")+` Tm
`):li=U(sr)+" "+U(lr)+` Td
`,li},Mi=0;Mi<ot.length;Mi++){switch(Mo="",jo){case bs:rs=(Lo?"<":"(")+ot[Mi][0]+(Lo?">":")"),Oc=parseFloat(ot[Mi][1]),Pi=parseFloat(ot[Mi][2]);break;case ml:rs=(Lo?"<":"(")+ot[Mi]+(Lo?">":")"),Oc=Vs(H),Pi=Ci(ye)}la!==void 0&&la[Mi]!==void 0&&(Mo=la[Mi]+` Tw
`),Mi===0?P.push(Mo+jn(Oc,Pi,$r)+rs):jo===ml?P.push(Mo+rs):jo===bs&&P.push(Mo+jn(Oc,Pi,$r)+rs)}P=jo===ml?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var ws=`BT
/`;return ws+=Pt+" "+mt+` Tf
`,ws+=U(mt*kr)+` TL
`,ws+=ai+`
`,ws+=ki,ws+=P,we(ws+="ET"),m[Pt]=!0,qr};var Oa=b.__private__.clip=b.clip=function(P){return we(P==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Oa("evenodd")},b.__private__.discardPath=b.discardPath=function(){return we("n"),this};var Da=b.__private__.isValidStyle=function(P){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(H=!0),H};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(P){return Da(P)&&(u=P),this};var dd=b.__private__.getStyle=b.getStyle=function(P){var H=u;switch(P){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=P}return H},Fa=b.close=function(){return we("h"),this};b.stroke=function(){return we("S"),this},b.fill=function(P){return uu("f",P),this},b.fillEvenOdd=function(P){return uu("f*",P),this},b.fillStroke=function(P){return uu("B",P),this},b.fillStrokeEvenOdd=function(P){return uu("B*",P),this};var uu=function(P,H){jr(H)==="object"?sh(H,P):we(P)},du=function(P){P===null||L===T.ADVANCED&&P===void 0||(P=dd(P),we(P))};function hu(P,H,ye,Ae,Me){var Xe=new Am(H||this.boundingBox,ye||this.xStep,Ae||this.yStep,this.gState,Me||this.matrix);Xe.stream=this.stream;var ot=P+"$$"+this.cloneIndex+++"$$";return Si(ot,Xe),Xe}var sh=function(P,H){var ye=ea[P.key],Ae=Un[ye];if(Ae instanceof Uf)we("q"),we(sf(H)),Ae.gState&&b.setGState(Ae.gState),we(P.matrix.toString()+" cm"),we("/"+ye+" sh"),we("Q");else if(Ae instanceof Am){var Me=new Wt(1,0,0,-1,0,Ba());P.matrix&&(Me=Me.multiply(P.matrix||Qi),ye=hu.call(Ae,P.key,P.boundingBox,P.xStep,P.yStep,Me).id),we("q"),we("/Pattern cs"),we("/"+ye+" scn"),Ae.gState&&b.setGState(Ae.gState),we(H),we("Q")}},sf=function(P){switch(P){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Wn=b.moveTo=function(P,H){return we(U(z(P))+" "+U(ne(H))+" m"),this},In=b.lineTo=function(P,H){return we(U(z(P))+" "+U(ne(H))+" l"),this},fo=b.curveTo=function(P,H,ye,Ae,Me,Xe){return we([U(z(P)),U(ne(H)),U(z(ye)),U(ne(Ae)),U(z(Me)),U(ne(Xe)),"c"].join(" ")),this};b.__private__.line=b.line=function(P,H,ye,Ae,Me){if(isNaN(P)||isNaN(H)||isNaN(ye)||isNaN(Ae)||!Da(Me))throw new Error("Invalid arguments passed to jsPDF.line");return L===T.COMPAT?this.lines([[ye-P,Ae-H]],P,H,[1,1],Me||"S"):this.lines([[ye-P,Ae-H]],P,H,[1,1]).stroke()},b.__private__.lines=b.lines=function(P,H,ye,Ae,Me,Xe){var ot,Et,Ht,pn,rn,Tn,Mr,$r,qr,Ei,ki,Lo;if(typeof P=="number"&&(Lo=ye,ye=H,H=P,P=Lo),Ae=Ae||[1,1],Xe=Xe||!1,isNaN(H)||isNaN(ye)||!Array.isArray(P)||!Array.isArray(Ae)||!Da(Me)||typeof Xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wn(H,ye),ot=Ae[0],Et=Ae[1],pn=P.length,Ei=H,ki=ye,Ht=0;Ht<pn;Ht++)(rn=P[Ht]).length===2?(Ei=rn[0]*ot+Ei,ki=rn[1]*Et+ki,In(Ei,ki)):(Tn=rn[0]*ot+Ei,Mr=rn[1]*Et+ki,$r=rn[2]*ot+Ei,qr=rn[3]*Et+ki,Ei=rn[4]*ot+Ei,ki=rn[5]*Et+ki,fo(Tn,Mr,$r,qr,Ei,ki));return Xe&&Fa(),du(Me),this},b.path=function(P){for(var H=0;H<P.length;H++){var ye=P[H],Ae=ye.c;switch(ye.op){case"m":Wn(Ae[0],Ae[1]);break;case"l":In(Ae[0],Ae[1]);break;case"c":fo.apply(this,Ae);break;case"h":Fa()}}return this},b.__private__.rect=b.rect=function(P,H,ye,Ae,Me){if(isNaN(P)||isNaN(H)||isNaN(ye)||isNaN(Ae)||!Da(Me))throw new Error("Invalid arguments passed to jsPDF.rect");return L===T.COMPAT&&(Ae=-Ae),we([U(z(P)),U(ne(H)),U(z(ye)),U(z(Ae)),"re"].join(" ")),du(Me),this},b.__private__.triangle=b.triangle=function(P,H,ye,Ae,Me,Xe,ot){if(isNaN(P)||isNaN(H)||isNaN(ye)||isNaN(Ae)||isNaN(Me)||isNaN(Xe)||!Da(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ye-P,Ae-H],[Me-ye,Xe-Ae],[P-Me,H-Xe]],P,H,[1,1],ot,!0),this},b.__private__.roundedRect=b.roundedRect=function(P,H,ye,Ae,Me,Xe,ot){if(isNaN(P)||isNaN(H)||isNaN(ye)||isNaN(Ae)||isNaN(Me)||isNaN(Xe)||!Da(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Et=4/3*(Math.SQRT2-1);return Me=Math.min(Me,.5*ye),Xe=Math.min(Xe,.5*Ae),this.lines([[ye-2*Me,0],[Me*Et,0,Me,Xe-Xe*Et,Me,Xe],[0,Ae-2*Xe],[0,Xe*Et,-Me*Et,Xe,-Me,Xe],[2*Me-ye,0],[-Me*Et,0,-Me,-Xe*Et,-Me,-Xe],[0,2*Xe-Ae],[0,-Xe*Et,Me*Et,-Xe,Me,-Xe]],P+Me,H,[1,1],ot,!0),this},b.__private__.ellipse=b.ellipse=function(P,H,ye,Ae,Me){if(isNaN(P)||isNaN(H)||isNaN(ye)||isNaN(Ae)||!Da(Me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xe=4/3*(Math.SQRT2-1)*ye,ot=4/3*(Math.SQRT2-1)*Ae;return Wn(P+ye,H),fo(P+ye,H-ot,P+Xe,H-Ae,P,H-Ae),fo(P-Xe,H-Ae,P-ye,H-ot,P-ye,H),fo(P-ye,H+ot,P-Xe,H+Ae,P,H+Ae),fo(P+Xe,H+Ae,P+ye,H+ot,P+ye,H),du(Me),this},b.__private__.circle=b.circle=function(P,H,ye,Ae){if(isNaN(P)||isNaN(H)||isNaN(ye)||!Da(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,H,ye,ye,Ae)},b.setFont=function(P,H,ye){return ye&&(H=W(H,ye)),Pt=Gl(P,H,{disableWarning:!1}),this};var fu=b.__private__.getFont=b.getFont=function(){return Jn[Gl.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var P,H,ye={};for(P in ir)if(ir.hasOwnProperty(P))for(H in ye[P]=[],ir[P])ir[P].hasOwnProperty(H)&&ye[P].push(H);return ye},b.addFont=function(P,H,ye,Ae,Me){var Xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xe.indexOf(arguments[3])!==-1?Me=arguments[3]:arguments[3]&&Xe.indexOf(arguments[3])==-1&&(ye=W(ye,Ae)),Me=Me||"Identity-H",ql.call(this,P,H,ye,Me)};var Pc,hd=n.lineWidth||.200025,Xl=b.__private__.getLineWidth=b.getLineWidth=function(){return hd},Nc=b.__private__.setLineWidth=b.setLineWidth=function(P){return hd=P,we(U(z(P))+" w"),this};b.__private__.setLineDash=cn.API.setLineDash=cn.API.setLineDashPattern=function(P,H){if(P=P||[],H=H||0,isNaN(H)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(ye){return U(z(ye))}).join(" "),H=U(z(H)),we("["+P+"] "+H+" d"),this};var Tc=b.__private__.getLineHeight=b.getLineHeight=function(){return mt*Pc};b.__private__.getLineHeight=b.getLineHeight=function(){return mt*Pc};var fd=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(Pc=P),this},fr=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Pc};fd(n.lineHeight);var Vs=b.__private__.getHorizontalCoordinate=function(P){return z(P)},Ci=b.__private__.getVerticalCoordinate=function(P){return L===T.ADVANCED?P:nn[te].mediaBox.topRightY-nn[te].mediaBox.bottomLeftY-z(P)},pd=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(P){return U(Vs(P))},po=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(P){return U(Ci(P))},Er=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return uo(Er)},b.__private__.setStrokeColor=b.setDrawColor=function(P,H,ye,Ae){return Er=mi({ch1:P,ch2:H,ch3:ye,ch4:Ae,pdfColorType:"draw",precision:2}),we(Er),this};var Lc=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return uo(Lc)},b.__private__.setFillColor=b.setFillColor=function(P,H,ye,Ae){return Lc=mi({ch1:P,ch2:H,ch3:ye,ch4:Ae,pdfColorType:"fill",precision:2}),we(Lc),this};var ai=n.textColor||"0 g",dl=b.__private__.getTextColor=b.getTextColor=function(){return uo(ai)};b.__private__.setTextColor=b.setTextColor=function(P,H,ye,Ae){return ai=mi({ch1:P,ch2:H,ch3:ye,ch4:Ae,pdfColorType:"text",precision:3}),this};var hl=n.charSpace,Zl=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(hl||0)};b.__private__.setCharSpace=b.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hl=P,this};var pu=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(P){var H=b.CapJoinStyles[P];if(H===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pu=H,we(H+" J"),this};var gi=0;b.__private__.setLineJoin=b.setLineJoin=function(P){var H=b.CapJoinStyles[P];if(H===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gi=H,we(H+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return we(U(z(P))+" M"),this},b.GState=s1,b.setGState=function(P){(P=typeof P=="string"?vr[pi[P]]:mu(null,P)).equals(Ri)||(we("/"+P.id+" gs"),Ri=P)};var mu=function(P,H){if(!P||!pi[P]){var ye=!1;for(var Ae in vr)if(vr.hasOwnProperty(Ae)&&vr[Ae].equals(H)){ye=!0;break}if(ye)H=vr[Ae];else{var Me="GS"+(Object.keys(vr).length+1).toString(10);vr[Me]=H,H.id=Me}return P&&(pi[P]=H.id),qn.publish("addGState",H),H}};b.addGState=function(P,H){return mu(P,H),this},b.saveGraphicsState=function(){return we("q"),Ji.push({key:Pt,size:mt,color:ai}),this},b.restoreGraphicsState=function(){we("Q");var P=Ji.pop();return Pt=P.key,mt=P.size,ai=P.color,Ri=null,this},b.setCurrentTransformationMatrix=function(P){return we(P.toString()+" cm"),this},b.comment=function(P){return we("#"+P),this};var ti=function(P,H){var ye=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ye},set:function(Xe){isNaN(Xe)||(ye=parseFloat(Xe))}});var Ae=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(Xe){isNaN(Xe)||(Ae=parseFloat(Xe))}});var Me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Me},set:function(Xe){Me=Xe.toString()}}),this},Jl=function(P,H,ye,Ae){ti.call(this,P,H),this.type="rect";var Me=ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Me},set:function(ot){isNaN(ot)||(Me=parseFloat(ot))}});var Xe=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xe},set:function(ot){isNaN(ot)||(Xe=parseFloat(ot))}}),this},Rc=function(){this.page=Sr,this.currentPage=te,this.pages=Ye.slice(0),this.pagesContext=nn.slice(0),this.x=oi,this.y=Pn,this.matrix=Zi,this.width=Yn(te),this.height=Ba(te),this.outputDestination=ht,this.id="",this.objectNumber=-1};Rc.prototype.restore=function(){Sr=this.page,te=this.currentPage,nn=this.pagesContext,Ye=this.pages,oi=this.x,Pn=this.y,Zi=this.matrix,To(te,this.width),md(te,this.height),ht=this.outputDestination};var oa=function(P,H,ye,Ae,Me){lo.push(new Rc),Sr=te=0,Ye=[],oi=P,Pn=H,Zi=Me,Wl([ye,Ae])},gu=function(P){if(zs[P])lo.pop().restore();else{var H=new Rc,ye="Xo"+(Object.keys(ei).length+1).toString(10);H.id=ye,zs[P]=ye,ei[ye]=H,qn.publish("addFormObject",H),lo.pop().restore()}};for(var Ql in b.beginFormObject=function(P,H,ye,Ae,Me){return oa(P,H,ye,Ae,Me),this},b.endFormObject=function(P){return gu(P),this},b.doFormObject=function(P,H){var ye=ei[zs[P]];return we("q"),we(H.toString()+" cm"),we("/"+ye.id+" Do"),we("Q"),this},b.getFormObject=function(P){var H=ei[zs[P]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},b.save=function(P,H){return P=P||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Ff(Yl(ia()),P),typeof Ff.unload=="function"&&fn.setTimeout&&setTimeout(Ff.unload,911),this):new Promise(function(ye,Ae){try{var Me=Ff(Yl(ia()),P);typeof Ff.unload=="function"&&fn.setTimeout&&setTimeout(Ff.unload,911),ye(Me)}catch(Xe){Ae(Xe.message)}})},cn.API)cn.API.hasOwnProperty(Ql)&&(Ql==="events"&&cn.API.events.length?function(P,H){var ye,Ae,Me;for(Me=H.length-1;Me!==-1;Me--)ye=H[Me][0],Ae=H[Me][1],P.subscribe.apply(P,[ye].concat(typeof Ae=="function"?[Ae]:Ae))}(qn,cn.API.events):b[Ql]=cn.API[Ql]);var Yn=b.getPageWidth=function(P){return(nn[P=P||te].mediaBox.topRightX-nn[P].mediaBox.bottomLeftX)/wt},To=b.setPageWidth=function(P,H){nn[P].mediaBox.topRightX=H*wt+nn[P].mediaBox.bottomLeftX},Ba=b.getPageHeight=function(P){return(nn[P=P||te].mediaBox.topRightY-nn[P].mediaBox.bottomLeftY)/wt},md=b.setPageHeight=function(P,H){nn[P].mediaBox.topRightY=H*wt+nn[P].mediaBox.bottomLeftY};return b.internal={pdfEscape:qs,getStyle:dd,getFont:fu,getFontSize:bt,getCharSpace:Zl,getTextColor:dl,getLineHeight:Tc,getLineHeightFactor:fr,getLineWidth:Xl,write:Mt,getHorizontalCoordinate:Vs,getVerticalCoordinate:Ci,getCoordinateString:pd,getVerticalCoordinateString:po,collections:{},newObject:Ar,newAdditionalObject:Ia,newObjectDeferred:Cr,newObjectDeferredBegin:Ai,getFilters:Us,putStream:gs,events:qn,scaleFactor:wt,pageSize:{getWidth:function(){return Yn(te)},setWidth:function(P){To(te,P)},getHeight:function(){return Ba(te)},setHeight:function(P){md(te,P)}},encryptionOptions:h,encryption:Fr,getEncryptor:Ma,output:ul,getNumberOfPages:rh,pages:Ye,out:we,f2:ve,f3:$,getPageInfo:sa,getPageInfoByObjId:Zt,getCurrentPageInfo:kc,getPDFVersion:x,Point:ti,Rectangle:Jl,Matrix:Wt,hasHotfix:Kl},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Yn(te)},set:function(P){To(te,P)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ba(te)},set:function(P){md(te,P)},enumerable:!0,configurable:!0}),Vl.call(b,ut),Pt="F1",lu(i,t),qn.publish("initialized"),b}gm.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},gm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},gm.prototype.processOwnerPassword=function(n,e){return z2(B2(e).substr(0,5),n)},gm.prototype.encryptor=function(n,e){var t=B2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return z2(t,r)}},s1.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||jr(n)!==jr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},cn.API={events:[]},cn.version="3.0.1";var Li=cn.API,N_=1,mp=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(n){return n.toFixed(2)},Lh=function(n){return n.toFixed(5)};Li.__acroform__={};var sl=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},AC=function(n){return n*N_},Wu=function(n){var e=new N4,t=Ut.internal.getHeight(n)||0,r=Ut.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Sn(r)),Number(Sn(t))],e},pX=Li.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},mX=Li.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},gX=Li.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Vi=Li.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gX(n,e-1)},Wi=Li.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pX(n,e-1)},Hi=Li.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mX(n,e-1)},vX=Li.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+a)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(s)||0,[Number(Sn(c.lowerLeft_X)),Number(Sn(c.lowerLeft_Y)),Number(Sn(c.upperRight_X)),Number(Sn(c.upperRight_Y))]},yX=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=U2(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Sn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Wu(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},U2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=t,o=Ut.internal.getHeight(n)||0;o=o<0?-o:o;var a=Ut.internal.getWidth(n)||0;a=a<0?-a:a;var c=function($,z,le){if($+1<i.length){var ne=z+" "+i[$+1][0];return cy(ne,n,le).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,p=cy("3",n,s).height,m=n.multiline?o-s:(o-p)/2,b=m+=2,_=0,x=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+cy(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var E="",T=0,L=0;L<i.length;L++)if(i.hasOwnProperty(L)){var j=!1;if(i[L].length!==1&&k!==i[L].length-1){if((p+2)*(T+2)+2>o)continue e;E+=i[L][k],j=!0,x=L,L--}else{E=(E+=i[L][k]+" ").substr(E.length-1)==" "?E.substr(0,E.length-1):E;var B=parseInt(L),W=c(B,E,s),U=L>=i.length-1;if(W&&!U){E+=" ",k=0;continue}if(W||U){if(U)x=B;else if(n.multiline&&(p+2)*(T+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(T+2)+2>o)continue e;x=B}}for(var q="",ie=_;ie<=x;ie++){var ve=i[ie];if(n.multiline){if(ie===x){q+=ve[k]+" ",k=(k+1)%ve.length;continue}if(ie===_){q+=ve[ve.length-1]+" ";continue}}q+=ve[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,h=cy(q,n,s).width,n.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=Sn(u)+" "+Sn(b)+` Td
`,e+="("+mp(q)+`) Tj
`,e+=-Sn(u)+` 0 Td
`,b=-(s+2),h=0,_=j?x:x+1,T++,E=""}break}return r.text=e,r.fontSize=s,r},cy=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},bX={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wX=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},xX=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),jr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},_X=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(su.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(bX)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");N_=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new T4,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&wX(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],c=[],u=a.Rect;if(a.Rect&&(a.Rect=vX(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ut.createDefaultAppearanceStream(a),jr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=yX(a);c.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var b=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var o in b)if(b.hasOwnProperty(o)){var _=b[o];typeof _=="function"&&(_=_.call(i,a)),p+="/"+o+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=b)=="function"&&(_=_.call(i,a)),p+="/"+o+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}s&&xX(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},P4=Li.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),jr(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+mp(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Tw=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+mp(r(n))+")"},Zu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Zu.prototype.toString=function(){return this.objId+" 0 R"},Zu.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Zu.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:P4(i,this.objId,this.scope)}):i instanceof Zu?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var N4=function(){Zu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};sl(N4,Zu);var T4=function(){Zu.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+mp(t(n))+")"}},set:function(t){n=t}})};sl(T4,Zu);var su=function n(){Zu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute F supplied.');e=E}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vi(e,3)},set:function(E){E?this.F=Wi(e,3):this.F=Hi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(E){if(isNaN(E))throw new Error('Invalid value "'+E+'" for attribute Ff supplied.');t=E}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(E){r=E!==void 0?E:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(E){r[0]=E}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(E){r[1]=E}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(E){r[2]=E}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(E){r[3]=E}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(E){switch(E){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=E;break;default:throw new Error('Invalid value "'+E+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof o1)return;s="FieldObject"+n.FieldNum++}var E=function(T){return T};return this.scope&&(E=this.scope.internal.getEncryptor(this.objId)),"("+mp(E(s))+")"},set:function(E){s=E.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(E){s=E}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(E){o=E}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(E){a=E}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(E){c=E}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/N_:u},set:function(E){u=E}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(E){h=E}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof o1||this instanceof Yf))return Tw(p,this.objId,this.scope)},set:function(E){E=E.toString(),p=E}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ro?m:Tw(m,this.objId,this.scope)},set:function(E){E=E.toString(),m=this instanceof ro?E:E.substr(0,1)==="("?pm(E.substr(1,E.length-2)):pm(E)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ro?pm(m.substr(1,m.length-1)):m},set:function(E){E=E.toString(),m=this instanceof ro?"/"+E:E}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(E){this.V=E}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof ro?b:Tw(b,this.objId,this.scope)},set:function(E){E=E.toString(),b=this instanceof ro?E:E.substr(0,1)==="("?pm(E.substr(1,E.length-2)):pm(E)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ro?pm(b.substr(1,b.length-1)):b},set:function(E){E=E.toString(),b=this instanceof ro?"/"+E:E}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(E){E=!!E,x=E}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(E){_=E}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,1)},set:function(E){E?this.Ff=Wi(this.Ff,1):this.Ff=Hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,2)},set:function(E){E?this.Ff=Wi(this.Ff,2):this.Ff=Hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,3)},set:function(E){E?this.Ff=Wi(this.Ff,3):this.Ff=Hi(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(E){if([0,1,2].indexOf(E)===-1)throw new Error('Invalid value "'+E+'" for attribute Q supplied.');k=E}}),Object.defineProperty(this,"textAlign",{get:function(){var E;switch(k){case 0:default:E="left";break;case 1:E="center";break;case 2:E="right"}return E},configurable:!0,enumerable:!0,set:function(E){switch(E){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};sl(su,Zu);var Lm=function(){su.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return P4(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var c,u=[];c=o.exec(s);)u.push(c[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,18)},set:function(t){t?this.Ff=Wi(this.Ff,18):this.Ff=Hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Wi(this.Ff,19):this.Ff=Hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,20)},set:function(t){t?(this.Ff=Wi(this.Ff,20),e.sort()):this.Ff=Hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,22)},set:function(t){t?this.Ff=Wi(this.Ff,22):this.Ff=Hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,23)},set:function(t){t?this.Ff=Wi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,27)},set:function(t){t?this.Ff=Wi(this.Ff,27):this.Ff=Hi(this.Ff,27)}}),this.hasAppearanceStream=!1};sl(Lm,su);var Rm=function(){Lm.call(this),this.fontName="helvetica",this.combo=!1};sl(Rm,Lm);var Im=function(){Rm.call(this),this.combo=!0};sl(Im,Rm);var Ly=function(){Im.call(this),this.edit=!0};sl(Ly,Im);var ro=function(){su.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,15)},set:function(t){t?this.Ff=Wi(this.Ff,15):this.Ff=Hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,16)},set:function(t){t?this.Ff=Wi(this.Ff,16):this.Ff=Hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,17)},set:function(t){t?this.Ff=Wi(this.Ff,17):this.Ff=Hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,26)},set:function(t){t?this.Ff=Wi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+mp(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){jr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};sl(ro,su);var Ry=function(){ro.call(this),this.pushButton=!0};sl(Ry,ro);var jm=function(){ro.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};sl(jm,ro);var o1=function(){var n,e;su.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+mp(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){jr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ut.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sl(o1,su),jm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},jm.prototype.createOption=function(n){var e=new o1;return e.Parent=this,e.optionName=n,this.Kids.push(e),SX.call(this.scope,e),e};var Iy=function(){ro.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ut.CheckBox.createAppearanceStream()};sl(Iy,ro);var Yf=function(){su.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,13)},set:function(e){e?this.Ff=Wi(this.Ff,13):this.Ff=Hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,21)},set:function(e){e?this.Ff=Wi(this.Ff,21):this.Ff=Hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,23)},set:function(e){e?this.Ff=Wi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,24)},set:function(e){e?this.Ff=Wi(this.Ff,24):this.Ff=Hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,25)},set:function(e){e?this.Ff=Wi(this.Ff,25):this.Ff=Hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,26)},set:function(e){e?this.Ff=Wi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sl(Yf,su);var jy=function(){Yf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vi(this.Ff,14)},set:function(n){n?this.Ff=Wi(this.Ff,14):this.Ff=Hi(this.Ff,14)}}),this.password=!0};sl(jy,Yf);var Ut={CheckBox:{createAppearanceStream:function(){return{N:{On:Ut.CheckBox.YesNormal},D:{On:Ut.CheckBox.YesPushDown,Off:Ut.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=U2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Sn(Ut.internal.getWidth(n))+" "+Sn(Ut.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Sn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Wu(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ut.internal.getHeight(n),o=Ut.internal.getWidth(n),a=U2(n,n.caption);return i.push("1 g"),i.push("0 0 "+Sn(o)+" "+Sn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Sn(o-1)+" "+Sn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Sn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Sn(Ut.internal.getWidth(n))+" "+Sn(Ut.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ut.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ut.RadioButton.Circle.YesNormal,e.D[n]=Ut.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Wu(n);e.scope=n.scope;var t=[],r=Ut.internal.getWidth(n)<=Ut.internal.getHeight(n)?Ut.internal.getWidth(n)/4:Ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ut.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Lh(Ut.internal.getWidth(n)/2)+" "+Lh(Ut.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=[],r=Ut.internal.getWidth(n)<=Ut.internal.getHeight(n)?Ut.internal.getWidth(n)/4:Ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ut.internal.Bezier_C).toFixed(5)),o=Number((r*Ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Lh(Ut.internal.getWidth(n)/2)+" "+Lh(Ut.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Lh(Ut.internal.getWidth(n)/2)+" "+Lh(Ut.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=[],r=Ut.internal.getWidth(n)<=Ut.internal.getHeight(n)?Ut.internal.getWidth(n)/4:Ut.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Lh(Ut.internal.getWidth(n)/2)+" "+Lh(Ut.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ut.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ut.RadioButton.Cross.YesNormal,e.D[n]=Ut.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Wu(n);e.scope=n.scope;var t=[],r=Ut.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Sn(Ut.internal.getWidth(n)-2)+" "+Sn(Ut.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),t.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),t.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),t.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=Ut.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(Ut.internal.getWidth(n))+" "+Sn(Ut.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(Ut.internal.getWidth(n)-2)+" "+Sn(Ut.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(t.x1.x)+" "+Sn(t.x1.y)+" m"),r.push(Sn(t.x2.x)+" "+Sn(t.x2.y)+" l"),r.push(Sn(t.x4.x)+" "+Sn(t.x4.y)+" m"),r.push(Sn(t.x3.x)+" "+Sn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Wu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Sn(Ut.internal.getWidth(n))+" "+Sn(Ut.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ut.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ut.internal.getWidth(n),t=Ut.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ut.internal.getWidth=function(n){var e=0;return jr(n)==="object"&&(e=AC(n.Rect[2])),e},Ut.internal.getHeight=function(n){var e=0;return jr(n)==="object"&&(e=AC(n.Rect[3])),e};var SX=Li.addField=function(n){if(_X(this,n),!(n instanceof su))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Li.AcroFormChoiceField=Lm,Li.AcroFormListBox=Rm,Li.AcroFormComboBox=Im,Li.AcroFormEditBox=Ly,Li.AcroFormButton=ro,Li.AcroFormPushButton=Ry,Li.AcroFormRadioButton=jm,Li.AcroFormCheckBox=Iy,Li.AcroFormTextField=Yf,Li.AcroFormPasswordField=jy,Li.AcroFormAppearance=Ut,Li.AcroForm={ChoiceField:Lm,ListBox:Rm,ComboBox:Im,EditBox:Ly,Button:ro,PushButton:Ry,RadioButton:jm,CheckBox:Iy,TextField:Yf,PasswordField:jy,Appearance:Ut},cn.AcroForm={ChoiceField:Lm,ListBox:Rm,ComboBox:Im,EditBox:Ly,Button:ro,PushButton:Ry,RadioButton:jm,CheckBox:Iy,TextField:Yf,PasswordField:jy,Appearance:Ut};cn.AcroForm;function L4(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function($,z){var le,ne,ee,G,he,X=e;if((z=z||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(W($))for(he in t)for(ee=t[he],le=0;le<ee.length;le+=1){for(G=!0,ne=0;ne<ee[le].length;ne+=1)if(ee[le][ne]!==void 0&&ee[le][ne]!==$[ne]){G=!1;break}if(G===!0){X=he;break}}else for(he in t)for(ee=t[he],le=0;le<ee.length;le+=1){for(G=!0,ne=0;ne<ee[le].length;ne+=1)if(ee[le][ne]!==void 0&&ee[le][ne]!==$.charCodeAt(ne)){G=!1;break}if(G===!0){X=he;break}}return X===e&&z!==e&&(X=z),X},i=function $(z){for(var le=this.internal.write,ne=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:z.width}),G.push({key:"Height",value:z.height}),z.colorSpace===k.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===k.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var he="",X=0,fe=z.transparency.length;X<fe;X++)he+=z.transparency[X]+" "+z.transparency[X]+" ";G.push({key:"Mask",value:"["+he+"]"})}z.sMask!==void 0&&G.push({key:"SMask",value:z.objectId+1+" 0 R"});var ue=z.filter!==void 0?["/"+z.filter]:void 0;if(ne({data:z.data,additionalKeyValues:G,alreadyAppliedFilters:ue,objectId:z.objectId}),le("endobj"),"sMask"in z&&z.sMask!==void 0){var se="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,F={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:se,data:z.sMask};"filter"in z&&(F.filter=z.filter),$.call(this,F)}if(z.colorSpace===k.INDEXED){var te=this.internal.newObject();ne({data:q(new Uint8Array(z.palette)),objectId:te}),le("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var z in $)i.call(this,$[z])},o=function(){var $,z=this.internal.collections.addImage_images,le=this.internal.write;for(var ne in z)le("/I"+($=z[ne]).index,$.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var $=this.internal.collections.addImage_images;return a.call(this),$},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function($){return typeof n["process"+$.toUpperCase()]=="function"},p=function($){return jr($)==="object"&&$.nodeType===1},m=function($,z){if($.nodeName==="IMG"&&$.hasAttribute("src")){var le=""+$.getAttribute("src");if(le.indexOf("data:image/")===0)return pv(unescape(le).split("base64,").pop());var ne=n.loadFile(le,!0);if(ne!==void 0)return ne}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var ee;switch(z){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return pv($.toDataURL(ee,1).split("base64,").pop())}},b=function($){var z=this.internal.collections.addImage_images;if(z){for(var le in z)if($===z[le].alias)return z[le]}},_=function($,z,le){return $||z||($=-96,z=-96),$<0&&($=-1*le.width*72/$/this.internal.scaleFactor),z<0&&(z=-1*le.height*72/z/this.internal.scaleFactor),$===0&&($=z*le.width/le.height),z===0&&(z=$*le.height/le.width),[$,z]},x=function($,z,le,ne,ee,G){var he=_.call(this,le,ne,ee),X=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,ue=c.call(this);if(le=he[0],ne=he[1],ue[ee.index]=ee,G){G*=Math.PI/180;var se=Math.cos(G),F=Math.sin(G),te=function(ce){return ce.toFixed(4)},Q=[te(se),te(F),te(-1*F),te(se),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,X($),fe(z+ne),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([X(le),"0","0",X(ne),"0","0","cm"].join(" "))):this.internal.write([X(le),"0","0",X(ne),X($),fe(z+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=n.__addimage__.sHashCode=function($){var z,le,ne=0;if(typeof $=="string")for(le=$.length,z=0;z<le;z++)ne=(ne<<5)-ne+$.charCodeAt(z),ne|=0;else if(W($))for(le=$.byteLength/2,z=0;z<le;z++)ne=(ne<<5)-ne+$[z],ne|=0;return ne},L=n.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var z=!0;return $.length===0&&(z=!1),$.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(z=!1),z},j=n.__addimage__.extractImageFromDataUrl=function($){if($==null||!($=$.trim()).startsWith("data:"))return null;var z=$.indexOf(",");return z<0?null:$.substring(0,z).trim().endsWith("base64")?$.substring(z+1):null},B=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function($){return B()&&$ instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function($){return B()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},U=n.__addimage__.binaryStringToUint8Array=function($){for(var z=$.length,le=new Uint8Array(z),ne=0;ne<z;ne++)le[ne]=$.charCodeAt(ne);return le},q=n.__addimage__.arrayBufferToBinaryString=function($){for(var z="",le=W($)?$:new Uint8Array($),ne=0;ne<le.length;ne+=8192)z+=String.fromCharCode.apply(null,le.subarray(ne,ne+8192));return z};n.addImage=function(){var $,z,le,ne,ee,G,he,X,fe;if(typeof arguments[1]=="number"?(z=e,le=arguments[1],ne=arguments[2],ee=arguments[3],G=arguments[4],he=arguments[5],X=arguments[6],fe=arguments[7]):(z=arguments[1],le=arguments[2],ne=arguments[3],ee=arguments[4],G=arguments[5],he=arguments[6],X=arguments[7],fe=arguments[8]),jr($=arguments[0])==="object"&&!p($)&&"imageData"in $){var ue=$;$=ue.imageData,z=ue.format||z||e,le=ue.x||le||0,ne=ue.y||ne||0,ee=ue.w||ue.width||ee,G=ue.h||ue.height||G,he=ue.alias||he,X=ue.compression||X,fe=ue.rotation||ue.angle||fe}var se=this.internal.getFilters();if(X===void 0&&se.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(le)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=ie.call(this,$,z,he,X);return x.call(this,le,ne,ee,G,F,fe),this};var ie=function($,z,le,ne){var ee,G,he;if(typeof $=="string"&&r($)===e){$=unescape($);var X=ve($,!1);(X!==""||(X=n.loadFile($,!0))!==void 0)&&($=X)}if(p($)&&($=m($,z)),z=r($,z),!h(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((he=le)==null||he.length===0)&&(le=function(fe){return typeof fe=="string"||W(fe)?T(fe):W(fe.data)?T(fe.data):null}($)),(ee=b.call(this,le))||(B()&&($ instanceof Uint8Array||z==="RGBA"||(G=$,$=U($))),ee=this["process"+z.toUpperCase()]($,u.call(this),le,function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in n.image_compression?fe:E.NONE}(ne),G)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},ve=n.__addimage__.convertBase64ToBinaryString=function($,z){z=typeof z!="boolean"||z;var le,ne="";if(typeof $=="string"){var ee;le=(ee=j($))!==null&&ee!==void 0?ee:$;try{ne=pv(le)}catch(G){if(z)throw L(le)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};n.getImageProperties=function($){var z,le,ne="";if(p($)&&($=m($)),typeof $=="string"&&r($)===e&&((ne=ve($,!1))===""&&(ne=n.loadFile($)||""),$=ne),le=r($),!h(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(!B()||$ instanceof Uint8Array||($=U($)),!(z=this["process"+le.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=le,z}})(cn.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};cn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,h=!1,p=0;p<u.length&&!h;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var b=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),E=this.internal.getEncryptor(x.objId),T=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+b(E(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+b(E(T))+") >>",x.content=s;var L=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+L,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(x.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+b(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var B=this.annotations._nameMap[r.options.name];r.options.pageNumber=B.page,r.options.top=B.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+b(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var W=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(t,a).length;o=Math.ceil(u*h)}else a=c,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,a,o,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(cn.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=n.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(x){var k=0,E=t,T="",L=0;for(k=0;k<x.length;k+=1)E[x.charCodeAt(k)]!==void 0?(L++,typeof(E=E[x.charCodeAt(k)])=="number"&&(T+=String.fromCharCode(E),E=t,L=0),k===x.length-1&&(E=t,T+=x.charAt(k-(L-1)),k-=L-1,L=0)):(E=t,T+=x.charAt(k-L),k-=L,L=0);return T};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(x,k,E){return o(x)?s(x)===!1?-1:!u(x)||!o(k)&&!o(E)||!o(E)&&a(k)||a(x)&&!o(k)||a(x)&&c(k)||a(x)&&a(k)?0:h(x)&&o(k)&&!a(k)&&o(E)&&u(E)?3:a(x)||!o(E)?1:2:-1},b=function(x){var k=0,E=0,T=0,L="",j="",B="",W=(x=x||"").split("\\s+"),U=[];for(k=0;k<W.length;k+=1){for(U.push(""),E=0;E<W[k].length;E+=1)L=W[k][E],j=W[k][E-1],B=W[k][E+1],o(L)?(T=m(L,j,B),U[k]+=T!==-1?String.fromCharCode(e[L.charCodeAt(0)][T]):L):U[k]+=L;U[k]=p(U[k])}return U.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var x,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,E=[];if(Array.isArray(k)){var T=0;for(E=[],T=0;T<k.length;T+=1)Array.isArray(k[T])?E.push([b(k[T][0]),k[T][1],k[T][2]]):E.push([b(k[T])]);x=E}else x=b(k);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",_])}(cn.API),cn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(cn.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(x){b=x}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(x){_=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,b=0,_=0,x=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var E=u.maxWidth;E>0?typeof c=="string"?c=this.splitTextToSize(c,E):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,j){return L.concat(k.splitTextToSize(j,E))},[])):c=Array.isArray(c)?c:[c];for(var T=0;T<c.length;T++)b<(x=this.getStringUnitWidth(c[T],{font:p})*h)&&(b=x);return b!==0&&(_=c.length),{w:b/=m,h:Math.max((_*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,b&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,h,p,m){if(r.call(this),!h)throw new Error("No data for PDF table.");var b,_,x,k,E=[],T=[],L=[],j={},B={},W=[],U=[],q=(m=m||{}).autoSize||!1,ie=m.printHeaders!==!1,ve=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,$=m.margins||Object.assign({width:this.getPageWidth()},e),z=typeof m.padding=="number"?m.padding:3,le=m.headerBackgroundColor||"#c8c8c8",ne=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ie,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=ve,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=le,this.internal.__cell__.headerTextColor=ne,this.setFontSize(ve),p==null)T=E=Object.keys(h[0]),L=E.map(function(){return"left"});else if(Array.isArray(p)&&jr(p[0])==="object")for(E=p.map(function(ue){return ue.name}),T=p.map(function(ue){return ue.prompt||ue.name||""}),L=p.map(function(ue){return ue.align||"left"}),b=0;b<p.length;b+=1)B[p[b].name]=p[b].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(T=E=p,L=E.map(function(){return"left"}));if(q||Array.isArray(p)&&typeof p[0]=="string")for(b=0;b<E.length;b+=1){for(j[k=E[b]]=h.map(function(ue){return ue[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(T[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=j[k],this.setFont(void 0,"normal"),x=0;x<_.length;x+=1)W.push(this.getTextDimensions(_[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[k]=Math.max.apply(null,W)+z+z,W=[]}if(ie){var ee={};for(b=0;b<E.length;b+=1)ee[E[b]]={},ee[E[b]].text=T[b],ee[E[b]].align=L[b];var G=a.call(this,ee,B);U=E.map(function(ue){return new s(c,u,B[ue],G,ee[ue].text,void 0,ee[ue].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var he=p.reduce(function(ue,se){return ue[se.name]=se.align,ue},{});for(b=0;b<h.length;b+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:b,data:h[b]},this);var X=a.call(this,h[b],B);for(x=0;x<E.length;x+=1){var fe=h[b][E[x]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:b,col:x,data:fe},this),o.call(this,new s(c,u,B[E[x]],X,fe,b+2,he[E[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var a=function(c,u){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(b){var _=c[b];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,u[b]-h-h)},this).map(function(b){return this.getLineHeightFactor()*b.length*p/m+h+h},this).reduce(function(b,_){return Math.max(b,_)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){h=this.internal.__cell__.tableHeaderRow[b].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,m.push(h)),h.lineNumber=c;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(_)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(cn.API);var R4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},I4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$2=L4(I4),j4=[100,200,300,400,500,600,700,800,900],AX=L4(j4);function q2(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return R4[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof $2[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function CC(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var CX={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},EC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kC(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function EX(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},CX,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=q2(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+kC(s)+"' and default family '"+r+"'.");if(o=function(c,u){if(u[c])return u[c];var h=$2[c],p=h<=$2.normal?-1:1,m=CC(u,I4,h,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var h=R4[c],p=0;p<h.length;++p)if(u[h[p]])return u[h[p]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var h=AX[c],p=CC(u,j4,h,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+kC(s)+"'.");return o}function PC(n){return n.trimLeft()}function kX(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function PX(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var uy,NC,TC,Lw=["times"];(function(n){var e,t,r,i,s,o,a,c,u,h=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,u=new h}]);var p=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=F;Object.defineProperty(this,"pdf",{get:function(){return te}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(We){Q=!!We}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(We){ce=!!We}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(We){isNaN(We)||(pe=We)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(We){isNaN(We)||(ge=We)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(We){var we;typeof We=="number"?we=[We,We,We,We]:((we=new Array(4))[0]=We[0],we[1]=We.length>=2?We[1]:we[0],we[2]=We.length>=3?We[2]:we[0],we[3]=We.length>=4?We[3]:we[1]),u.margin=we}});var _e=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _e},set:function(We){_e=We}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(We){Te=We}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(We){Ge=We}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(We){We instanceof h&&(u=We)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(We){u.path=We}});var Ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ye},set:function(We){Ye=We}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(We){var we;we=m(We),this.ctx.fillStyle=we.style,this.ctx.isFillTransparent=we.a===0,this.ctx.fillOpacity=we.a,this.pdf.setFillColor(we.r,we.g,we.b,{a:we.a}),this.pdf.setTextColor(we.r,we.g,we.b,{a:we.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(We){var we=m(We);this.ctx.strokeStyle=we.style,this.ctx.isStrokeTransparent=we.a===0,this.ctx.strokeOpacity=we.a,we.a===0?this.pdf.setDrawColor(255,255,255):(we.a,this.pdf.setDrawColor(we.r,we.g,we.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(We){["butt","round","square"].indexOf(We)!==-1&&(this.ctx.lineCap=We,this.pdf.setLineCap(We))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(We){isNaN(We)||(this.ctx.lineWidth=We,this.pdf.setLineWidth(We))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(We){["bevel","round","miter"].indexOf(We)!==-1&&(this.ctx.lineJoin=We,this.pdf.setLineJoin(We))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(We){isNaN(We)||(this.ctx.miterLimit=We,this.pdf.setMiterLimit(We))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(We){this.ctx.textBaseline=We}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(We){["right","end","center","left","start"].indexOf(We)!==-1&&(this.ctx.textAlign=We)}});var at=null;function ht(We,we){if(at===null){var Mt=function(Rt){var ut=[];return Object.keys(Rt).forEach(function(mt){Rt[mt].forEach(function(gt){var bt=null;switch(gt){case"bold":bt={family:mt,weight:"bold"};break;case"italic":bt={family:mt,style:"italic"};break;case"bolditalic":bt={family:mt,weight:"bold",style:"italic"};break;case"":case"normal":bt={family:mt}}bt!==null&&(bt.ref={name:mt,style:gt},ut.push(bt))})}),ut}(We.getFontList());at=function(Rt){for(var ut={},mt=0;mt<Rt.length;++mt){var gt=q2(Rt[mt]),bt=gt.family,Ot=gt.stretch,Qt=gt.style,Xt=gt.weight;ut[bt]=ut[bt]||{},ut[bt][Ot]=ut[bt][Ot]||{},ut[bt][Ot][Qt]=ut[bt][Ot][Qt]||{},ut[bt][Ot][Qt][Xt]=gt}return ut}(Mt.concat(we))}return at}var Ct=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ct},set:function(We){at=null,Ct=We}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(We){var we;if(this.ctx.font=We,(we=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(We))!==null){var Mt=we[1];we[2];var Rt=we[3],ut=we[4];we[5];var mt=we[6],gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ut)[2];ut=Math.floor(gt==="px"?parseFloat(ut)*this.pdf.internal.scaleFactor:gt==="em"?parseFloat(ut)*this.pdf.getFontSize():parseFloat(ut)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ut);var bt=function(St){var Pt,wt,oi=[],Pn=St.trim();if(Pn==="")return Lw;if(Pn in EC)return[EC[Pn]];for(;Pn!=="";){switch(wt=null,Pt=(Pn=PC(Pn)).charAt(0)){case'"':case"'":wt=kX(Pn.substring(1),Pt);break;default:wt=PX(Pn)}if(wt===null||(oi.push(wt[0]),(Pn=PC(wt[1]))!==""&&Pn.charAt(0)!==","))return Lw;Pn=Pn.replace(/^,/,"")}return oi}(mt);if(this.fontFaces){var Ot=EX(ht(this.pdf,this.fontFaces),bt.map(function(St){return{family:St,stretch:"normal",weight:Rt,style:Mt}}));this.pdf.setFont(Ot.ref.name,Ot.ref.style)}else{var Qt="";(Rt==="bold"||parseInt(Rt,10)>=700||Mt==="bold")&&(Qt="bold"),Mt==="italic"&&(Qt+="italic"),Qt.length===0&&(Qt="normal");for(var Xt="",un={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$e=0;$e<bt.length;$e++){if(this.pdf.internal.getFont(bt[$e],Qt,{noFallback:!0,disableWarning:!0})!==void 0){Xt=bt[$e];break}if(Qt==="bolditalic"&&this.pdf.internal.getFont(bt[$e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xt=bt[$e],Qt="bold";else if(this.pdf.internal.getFont(bt[$e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xt=bt[$e],Qt="normal";break}}if(Xt===""){for(var Vt=0;Vt<bt.length;Vt++)if(un[bt[Vt]]){Xt=un[bt[Vt]];break}}Xt=Xt===""?"Times":Xt,this.pdf.setFont(Xt,Qt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(We){this.ctx.globalCompositeOperation=We}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(We){this.ctx.globalAlpha=We}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(We){this.ctx.lineDashOffset=We,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(We){this.ctx.lineDash=We,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(We){this.ctx.ignoreClearRect=!!We}})};p.prototype.setLineDash=function(F){this.lineDash=F},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){j.call(this,"fill",!1)},p.prototype.stroke=function(){j.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(F,te){if(isNaN(F)||isNaN(te))throw zr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o(F,te));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(F,te)},p.prototype.closePath=function(){var F=new o(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&jr(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){F=new o(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},p.prototype.lineTo=function(F,te){if(isNaN(F)||isNaN(te))throw zr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o(F,te));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},p.prototype.quadraticCurveTo=function(F,te,Q,ce){if(isNaN(Q)||isNaN(ce)||isNaN(F)||isNaN(te))throw zr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new o(Q,ce)),ge=this.ctx.transform.applyToPoint(new o(F,te));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},p.prototype.bezierCurveTo=function(F,te,Q,ce,pe,ge){if(isNaN(pe)||isNaN(ge)||isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce))throw zr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _e=this.ctx.transform.applyToPoint(new o(pe,ge)),Te=this.ctx.transform.applyToPoint(new o(F,te)),Ge=this.ctx.transform.applyToPoint(new o(Q,ce));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:Ge.x,y2:Ge.y,x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},p.prototype.arc=function(F,te,Q,ce,pe,ge){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce)||isNaN(pe))throw zr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var _e=this.ctx.transform.applyToPoint(new o(F,te));F=_e.x,te=_e.y;var Te=this.ctx.transform.applyToPoint(new o(0,Q)),Ge=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(Te.x-Ge.x,2)+Math.pow(Te.y-Ge.y,2))}Math.abs(pe-ce)>=2*Math.PI&&(ce=0,pe=2*Math.PI),this.path.push({type:"arc",x:F,y:te,radius:Q,startAngle:ce,endAngle:pe,counterclockwise:ge})},p.prototype.arcTo=function(F,te,Q,ce,pe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(F,te,Q,ce){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce))throw zr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,te),this.lineTo(F+Q,te),this.lineTo(F+Q,te+ce),this.lineTo(F,te+ce),this.lineTo(F,te),this.lineTo(F+Q,te),this.lineTo(F,te)},p.prototype.fillRect=function(F,te,Q,ce){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce))throw zr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,te,Q,ce),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},p.prototype.strokeRect=function(F,te,Q,ce){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce))throw zr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(F,te,Q,ce),this.stroke())},p.prototype.clearRect=function(F,te,Q,ce){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce))throw zr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,te,Q,ce))},p.prototype.save=function(F){F=typeof F!="boolean"||F;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},p.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(te),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(F){var te,Q,ce,pe;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))te=0,Q=0,ce=0,pe=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ge!==null)te=parseInt(ge[1]),Q=parseInt(ge[2]),ce=parseInt(ge[3]),pe=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)te=parseInt(ge[1]),Q=parseInt(ge[2]),ce=parseInt(ge[3]),pe=parseFloat(ge[4]);else{if(pe=1,typeof F=="string"&&F.charAt(0)!=="#"){var _e=new C4(F);F=_e.ok?_e.toHex():"#000000"}F.length===4?(te=F.substring(1,2),te+=te,Q=F.substring(2,3),Q+=Q,ce=F.substring(3,4),ce+=ce):(te=F.substring(1,3),Q=F.substring(3,5),ce=F.substring(5,7)),te=parseInt(te,16),Q=parseInt(Q,16),ce=parseInt(ce,16)}}return{r:te,g:Q,b:ce,a:pe,style:F}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(F,te,Q,ce){if(isNaN(te)||isNaN(Q)||typeof F!="string")throw zr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!b.call(this)){var pe=X(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;z.call(this,{text:F,x:te,y:Q,scale:ge,angle:pe,align:this.textAlign,maxWidth:ce})}},p.prototype.strokeText=function(F,te,Q,ce){if(isNaN(te)||isNaN(Q)||typeof F!="string")throw zr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ce=isNaN(ce)?void 0:ce;var pe=X(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;z.call(this,{text:F,x:te,y:Q,scale:ge,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ce})}},p.prototype.measureText=function(F){if(typeof F!="string")throw zr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,Q=this.pdf.internal.scaleFactor,ce=te.internal.getFontSize(),pe=te.getStringUnitWidth(F)*ce/te.internal.scaleFactor,ge=function(_e){var Te=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Te}}),this};return new ge({width:pe*=Math.round(96*Q/72*1e4)/1e4})},p.prototype.scale=function(F,te){if(isNaN(F)||isNaN(te))throw zr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new c(F,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.rotate=function(F){if(isNaN(F))throw zr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},p.prototype.translate=function(F,te){if(isNaN(F)||isNaN(te))throw zr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new c(1,0,0,1,F,te);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.transform=function(F,te,Q,ce,pe,ge){if(isNaN(F)||isNaN(te)||isNaN(Q)||isNaN(ce)||isNaN(pe)||isNaN(ge))throw zr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _e=new c(F,te,Q,ce,pe,ge);this.ctx.transform=this.ctx.transform.multiply(_e)},p.prototype.setTransform=function(F,te,Q,ce,pe,ge){F=isNaN(F)?1:F,te=isNaN(te)?0:te,Q=isNaN(Q)?0:Q,ce=isNaN(ce)?1:ce,pe=isNaN(pe)?0:pe,ge=isNaN(ge)?0:ge,this.ctx.transform=new c(F,te,Q,ce,pe,ge)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(F,te,Q,ce,pe,ge,_e,Te,Ge){var Ye=this.pdf.getImageProperties(F),at=1,ht=1,Ct=1,We=1;ce!==void 0&&Te!==void 0&&(Ct=Te/ce,We=Ge/pe,at=Ye.width/ce*Te/ce,ht=Ye.height/pe*Ge/pe),ge===void 0&&(ge=te,_e=Q,te=0,Q=0),ce!==void 0&&Te===void 0&&(Te=ce,Ge=pe),ce===void 0&&Te===void 0&&(Te=Ye.width,Ge=Ye.height);for(var we,Mt=this.ctx.transform.decompose(),Rt=X(Mt.rotate.shx),ut=new c,mt=(ut=(ut=(ut=ut.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale)).applyToRectangle(new a(ge-te*Ct,_e-Q*We,ce*at,pe*ht)),gt=k.call(this,mt),bt=[],Ot=0;Ot<gt.length;Ot+=1)bt.indexOf(gt[Ot])===-1&&bt.push(gt[Ot]);if(L(bt),this.autoPaging)for(var Qt=bt[0],Xt=bt[bt.length-1],un=Qt;un<Xt+1;un++){this.pdf.setPage(un);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=un===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=un===1?0:St+(un-2)*Pt;if(this.ctx.clip_path.length!==0){var oi=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(we,this.posX+this.margin[3],-wt+Vt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=oi}var Pn=JSON.parse(JSON.stringify(mt));Pn=T([Pn],this.posX+this.margin[3],-wt+Vt+this.ctx.prevPageLastElemOffset)[0];var Zi=(un>Qt||un<Xt)&&x.call(this);Zi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Pt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Pn.x,Pn.y,Pn.w,Pn.h,null,null,Rt),Zi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,Rt)};var k=function(F,te,Q){var ce=[];te=te||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ce.push(Math.floor((F.y+pe)/Q)+1);break;case"arc":ce.push(Math.floor((F.y+pe-F.radius)/Q)+1),ce.push(Math.floor((F.y+pe+F.radius)/Q)+1);break;case"qct":var ge=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ce.push(Math.floor((ge.y+pe)/Q)+1),ce.push(Math.floor((ge.y+ge.h+pe)/Q)+1);break;case"bct":var _e=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ce.push(Math.floor((_e.y+pe)/Q)+1),ce.push(Math.floor((_e.y+_e.h+pe)/Q)+1);break;case"rect":ce.push(Math.floor((F.y+pe)/Q)+1),ce.push(Math.floor((F.y+F.h+pe)/Q)+1)}for(var Te=0;Te<ce.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<ce[Te];)E.call(this);return ce},E=function(){var F=this.fillStyle,te=this.strokeStyle,Q=this.font,ce=this.lineCap,pe=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=te,this.font=Q,this.lineCap=ce,this.lineWidth=pe,this.lineJoin=ge},T=function(F,te,Q){for(var ce=0;ce<F.length;ce++)switch(F[ce].type){case"bct":F[ce].x2+=te,F[ce].y2+=Q;case"qct":F[ce].x1+=te,F[ce].y1+=Q;case"mt":case"lt":case"arc":default:F[ce].x+=te,F[ce].y+=Q}return F},L=function(F){return F.sort(function(te,Q){return te-Q})},j=function(F,te){for(var Q,ce,pe=this.fillStyle,ge=this.strokeStyle,_e=this.lineCap,Te=this.lineWidth,Ge=Math.abs(Te*this.ctx.transform.scaleX),Ye=this.lineJoin,at=JSON.parse(JSON.stringify(this.path)),ht=JSON.parse(JSON.stringify(this.path)),Ct=[],We=0;We<ht.length;We++)if(ht[We].x!==void 0)for(var we=k.call(this,ht[We]),Mt=0;Mt<we.length;Mt+=1)Ct.indexOf(we[Mt])===-1&&Ct.push(we[Mt]);for(var Rt=0;Rt<Ct.length;Rt++)for(;this.pdf.internal.getNumberOfPages()<Ct[Rt];)E.call(this);if(L(Ct),this.autoPaging)for(var ut=Ct[0],mt=Ct[Ct.length-1],gt=ut;gt<mt+1;gt++){this.pdf.setPage(gt),this.fillStyle=pe,this.strokeStyle=ge,this.lineCap=_e,this.lineWidth=Ge,this.lineJoin=Ye;var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=gt===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],un=gt===1?0:Qt+(gt-2)*Xt;if(this.ctx.clip_path.length!==0){var $e=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Q,this.posX+this.margin[3],-un+Ot+this.ctx.prevPageLastElemOffset),B.call(this,F,!0),this.path=$e}if(ce=JSON.parse(JSON.stringify(at)),this.path=T(ce,this.posX+this.margin[3],-un+Ot+this.ctx.prevPageLastElemOffset),te===!1||gt===0){var Vt=(gt>ut||gt<mt)&&x.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,Xt,null).clip().discardPath()),B.call(this,F,te),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=Ge,B.call(this,F,te),this.lineWidth=Te;this.path=at},B=function(F,te){if((F!=="stroke"||te||!_.call(this))&&(F==="stroke"||te||!b.call(this))){for(var Q,ce,pe=[],ge=this.path,_e=0;_e<ge.length;_e++){var Te=ge[_e];switch(Te.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:Te,deltas:[],abs:[]});break;case"lt":var Ge=pe.length;if(ge[_e-1]&&!isNaN(ge[_e-1].x)&&(Q=[Te.x-ge[_e-1].x,Te.y-ge[_e-1].y],Ge>0)){for(;Ge>=0;Ge--)if(pe[Ge-1].close!==!0&&pe[Ge-1].begin!==!0){pe[Ge-1].deltas.push(Q),pe[Ge-1].abs.push(Te);break}}break;case"bct":Q=[Te.x1-ge[_e-1].x,Te.y1-ge[_e-1].y,Te.x2-ge[_e-1].x,Te.y2-ge[_e-1].y,Te.x-ge[_e-1].x,Te.y-ge[_e-1].y],pe[pe.length-1].deltas.push(Q);break;case"qct":var Ye=ge[_e-1].x+2/3*(Te.x1-ge[_e-1].x),at=ge[_e-1].y+2/3*(Te.y1-ge[_e-1].y),ht=Te.x+2/3*(Te.x1-Te.x),Ct=Te.y+2/3*(Te.y1-Te.y),We=Te.x,we=Te.y;Q=[Ye-ge[_e-1].x,at-ge[_e-1].y,ht-ge[_e-1].x,Ct-ge[_e-1].y,We-ge[_e-1].x,we-ge[_e-1].y],pe[pe.length-1].deltas.push(Q);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(Te)}}ce=te?null:F==="stroke"?"stroke":"fill";for(var Mt=!1,Rt=0;Rt<pe.length;Rt++)if(pe[Rt].arc)for(var ut=pe[Rt].abs,mt=0;mt<ut.length;mt++){var gt=ut[mt];gt.type==="arc"?q.call(this,gt.x,gt.y,gt.radius,gt.startAngle,gt.endAngle,gt.counterclockwise,void 0,te,!Mt):le.call(this,gt.x,gt.y),Mt=!0}else if(pe[Rt].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(pe[Rt].begin!==!0){var bt=pe[Rt].start.x,Ot=pe[Rt].start.y;ne.call(this,pe[Rt].deltas,bt,Ot),Mt=!0}ce&&ie.call(this,ce),te&&ve.call(this)}},W=function(F){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Q;case"top":return F+te-Q;case"hanging":return F+te-2*Q;case"middle":return F+te/2-Q;case"ideographic":return F;case"alphabetic":default:return F}},U=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(te,Q){this.colorStops.push([te,Q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(F,te,Q,ce,pe,ge,_e,Te,Ge){for(var Ye=G.call(this,Q,ce,pe,ge),at=0;at<Ye.length;at++){var ht=Ye[at];at===0&&(Ge?$.call(this,ht.x1+F,ht.y1+te):le.call(this,ht.x1+F,ht.y1+te)),ee.call(this,F,te,ht.x2,ht.y2,ht.x3,ht.y3,ht.x4,ht.y4)}Te?ve.call(this):ie.call(this,_e)},ie=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ve=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(F,te){this.pdf.internal.out(t(F)+" "+r(te)+" m")},z=function(F){var te;switch(F.align){case"right":case"end":te="right";break;case"center":te="center";break;case"left":case"start":default:te="left"}var Q=this.pdf.getTextDimensions(F.text),ce=W.call(this,F.y),pe=U.call(this,ce)-Q.h,ge=this.ctx.transform.applyToPoint(new o(F.x,ce)),_e=this.ctx.transform.decompose(),Te=new c;Te=(Te=(Te=Te.multiply(_e.translate)).multiply(_e.skew)).multiply(_e.scale);for(var Ge,Ye,at,ht=this.ctx.transform.applyToRectangle(new a(F.x,ce,Q.w,Q.h)),Ct=Te.applyToRectangle(new a(F.x,pe,Q.w,Q.h)),We=k.call(this,Ct),we=[],Mt=0;Mt<We.length;Mt+=1)we.indexOf(We[Mt])===-1&&we.push(We[Mt]);if(L(we),this.autoPaging)for(var Rt=we[0],ut=we[we.length-1],mt=Rt;mt<ut+1;mt++){this.pdf.setPage(mt);var gt=mt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[2],Qt=Ot-this.margin[0],Xt=this.pdf.internal.pageSize.width-this.margin[1],un=Xt-this.margin[3],$e=mt===1?0:bt+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var Vt=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ge,this.posX+this.margin[3],-1*$e+gt),B.call(this,"fill",!0),this.path=Vt}var St=T([JSON.parse(JSON.stringify(Ct))],this.posX+this.margin[3],-$e+gt+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*F.scale),at=this.lineWidth,this.lineWidth=at*F.scale);var Pt=this.autoPaging!=="text";if(Pt||St.y+St.h<=Ot){if(Pt||St.y>=gt&&St.x<=Xt){var wt=Pt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Xt-St.x)[0],oi=T([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-$e+gt+this.ctx.prevPageLastElemOffset)[0],Pn=Pt&&(mt>Rt||mt<ut)&&x.call(this);Pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],un,Qt,null).clip().discardPath()),this.pdf.text(wt,oi.x,oi.y,{angle:F.angle,align:te,renderingMode:F.renderingMode}),Pn&&this.pdf.restoreGraphicsState()}}else St.y<Ot&&(this.ctx.prevPageLastElemOffset+=Ot-St.y);F.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=at)}else F.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*F.scale),at=this.lineWidth,this.lineWidth=at*F.scale),this.pdf.text(F.text,ge.x+this.posX,ge.y+this.posY,{angle:F.angle,align:te,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=at)},le=function(F,te,Q,ce){Q=Q||0,ce=ce||0,this.pdf.internal.out(t(F+Q)+" "+r(te+ce)+" l")},ne=function(F,te,Q){return this.pdf.lines(F,te,Q,null,null)},ee=function(F,te,Q,ce,pe,ge,_e,Te){this.pdf.internal.out([e(i(Q+F)),e(s(ce+te)),e(i(pe+F)),e(s(ge+te)),e(i(_e+F)),e(s(Te+te)),"c"].join(" "))},G=function(F,te,Q,ce){for(var pe=2*Math.PI,ge=Math.PI/2;te>Q;)te-=pe;var _e=Math.abs(Q-te);_e<pe&&ce&&(_e=pe-_e);for(var Te=[],Ge=ce?-1:1,Ye=te;_e>1e-5;){var at=Ye+Ge*Math.min(_e,ge);Te.push(he.call(this,F,Ye,at)),_e-=Math.abs(at-Ye),Ye=at}return Te},he=function(F,te,Q){var ce=(Q-te)/2,pe=F*Math.cos(ce),ge=F*Math.sin(ce),_e=pe,Te=-ge,Ge=_e*_e+Te*Te,Ye=Ge+_e*pe+Te*ge,at=4/3*(Math.sqrt(2*Ge*Ye)-Ye)/(_e*ge-Te*pe),ht=_e-at*Te,Ct=Te+at*_e,We=ht,we=-Ct,Mt=ce+te,Rt=Math.cos(Mt),ut=Math.sin(Mt);return{x1:F*Math.cos(te),y1:F*Math.sin(te),x2:ht*Rt-Ct*ut,y2:ht*ut+Ct*Rt,x3:We*Rt-we*ut,y3:We*ut+we*Rt,x4:F*Math.cos(Q),y4:F*Math.sin(Q)}},X=function(F){return 180*F/Math.PI},fe=function(F,te,Q,ce,pe,ge){var _e=F+.5*(Q-F),Te=te+.5*(ce-te),Ge=pe+.5*(Q-pe),Ye=ge+.5*(ce-ge),at=Math.min(F,pe,_e,Ge),ht=Math.max(F,pe,_e,Ge),Ct=Math.min(te,ge,Te,Ye),We=Math.max(te,ge,Te,Ye);return new a(at,Ct,ht-at,We-Ct)},ue=function(F,te,Q,ce,pe,ge,_e,Te){var Ge,Ye,at,ht,Ct,We,we,Mt,Rt,ut,mt,gt,bt,Ot,Qt=Q-F,Xt=ce-te,un=pe-Q,$e=ge-ce,Vt=_e-pe,St=Te-ge;for(Ye=0;Ye<41;Ye++)Rt=(we=(at=F+(Ge=Ye/40)*Qt)+Ge*((Ct=Q+Ge*un)-at))+Ge*(Ct+Ge*(pe+Ge*Vt-Ct)-we),ut=(Mt=(ht=te+Ge*Xt)+Ge*((We=ce+Ge*$e)-ht))+Ge*(We+Ge*(ge+Ge*St-We)-Mt),Ye==0?(mt=Rt,gt=ut,bt=Rt,Ot=ut):(mt=Math.min(mt,Rt),gt=Math.min(gt,ut),bt=Math.max(bt,Rt),Ot=Math.max(Ot,ut));return new a(Math.round(mt),Math.round(gt),Math.round(bt-mt),Math.round(Ot-gt))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,te,Q=(F=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:te}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(cn.API),function(n){var e=function(s){var o,a,c,u,h,p,m,b,_,x;for(a=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(h=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(h=((h=((h=((h=(h-(x=h%85))/85)-(_=h%85))/85)-(b=h%85))/85)-(m=h%85))/85)%85,a.push(p+33,m+33,b+33,_+33,x+33)):a.push(122);return function(k,E){for(var T=E;T>0;T--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,c,u,h,p=String,m="length",b=255,_="charCodeAt",x="slice",k="replace";for(s[x](-2),s=s[x](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],u=0,h=(s+=o="uuuuu"[x](s[m]%5||5))[m];h>u;u+=5)a=52200625*(s[_](u)-33)+614125*(s[_](u+1)-33)+7225*(s[_](u+2)-33)+85*(s[_](u+3)-33)+(s[_](u+4)-33),c.push(b&a>>24,b&a>>16,b&a>>8,b&a);return function(E,T){for(var L=T;L>0;L--)E.pop()}(c,o[m]),p.fromCharCode.apply(p,c)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",c=0;c<s.length;c+=2)a+=String.fromCharCode("0x"+(s[c]+s[c+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=D2(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(cn.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(c,u,h){var p=new XMLHttpRequest,m=0,b=function(_){var x=_.length,k=[],E=String.fromCharCode;for(m=0;m<x;m+=1)k.push(E(255&_.charCodeAt(m)));return k.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?h(b(this.responseText)):h(void 0)}),p.send(null),u&&p.status===200)return b(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(cn.API),function(n){function e(){return(fn.html2canvas?Promise.resolve(fn.html2canvas):Lt(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(fn.DOMPurify?Promise.resolve(fn.DOMPurify):Lt(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=jr(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var c=document.createElement(o);for(var u in a.className&&(c.className=a.className),a.innerHTML&&a.dompurify&&(c.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)c.style[u]=a.style[u];return c},s=function o(a){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function c(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)h!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(c(m,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,a(this.prop.container,c)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var c=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var b=u[m],_=b.src.find(function(x){return x.format==="truetype"});_&&c.addFont(_.url,b.ref.name,b.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||cn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,c,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,c,u){return this.setProgress(o?this.progress.val+o:null,a||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var c=this;return this.thenCore(o,a,function(u,h){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,h).then(function(p){return c.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=c.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(c){a=a.thenCore(c)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,cn.getPageSize=function(o,a,c){if(jr(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,c=u.format||c}a=a||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var b,_=0,x=0;if(m.hasOwnProperty(p))_=m[p][1]/h,x=m[p][0]/h;else try{_=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",x>_&&(b=x,x=_,_=b);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>x&&(b=x,x=_,_=b)}return{width:x,height:_,unit:a,k:h,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(q2):null;var c=new s(a);return a.worker?c:c.from(o).doCallback()}}(cn.API),cn.API.addJS=function(n){return TC=n,this.internal.events.subscribe("postPutResources",function(){uy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(uy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),NC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+TC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){uy!==void 0&&NC!==void 0&&this.internal.out("/Names <</JavaScript "+uy+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var p=t.internal.newObject();h.push(p);var m=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(cn.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var c,u=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(p){for(var m,b=256*p.charCodeAt(4)+p.charCodeAt(5),_=p.length,x={width:0,height:0,numcomponents:1},k=4;k<_;k+=2){if(k+=b,e.indexOf(p.charCodeAt(k+1))!==-1){m=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),x={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:m,numcomponents:p.charCodeAt(k+9)};break}b=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return x}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(cn.API);var mm,dy,LC,RC,IC,NX=function(){var n,e,t;function r(s){var o,a,c,u,h,p,m,b,_,x,k,E,T,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),_=(function(){var j,B;for(B=[],j=0;j<4;++j)B.push(String.fromCharCode(this.data[this.pos++]));return B}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*h/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,o-=4),s=p?.data||this.imgData,E=0;0<=o?E<o:E>o;0<=o?++E:--E)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(T=0;0<=x?T<x:T>x;0<=x?++T:--T)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(k=this.read(o)).indexOf(0),b=String.fromCharCode.apply(String,k.slice(0,m)),this.text[b]=String.fromCharCode.apply(String,k.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,m,b,_){var x,k,E,T,L,j,B,W,U,q,ie,ve,$,z,le,ne,ee,G,he,X,fe,ue=Math.ceil((u.width-p)/b),se=Math.ceil((u.height-m)/_),F=u.width==ue&&u.height==se;for(z=o*ue,ve=F?a:new Uint8Array(z*se),j=s.length,$=0,k=0;$<se&&c<j;){switch(s[c++]){case 0:for(T=ee=0;ee<z;T=ee+=1)ve[k++]=s[c++];break;case 1:for(T=G=0;G<z;T=G+=1)x=s[c++],L=T<o?0:ve[k-o],ve[k++]=(x+L)%256;break;case 2:for(T=he=0;he<z;T=he+=1)x=s[c++],E=(T-T%o)/o,le=$&&ve[($-1)*z+E*o+T%o],ve[k++]=(le+x)%256;break;case 3:for(T=X=0;X<z;T=X+=1)x=s[c++],E=(T-T%o)/o,L=T<o?0:ve[k-o],le=$&&ve[($-1)*z+E*o+T%o],ve[k++]=(x+Math.floor((L+le)/2))%256;break;case 4:for(T=fe=0;fe<z;T=fe+=1)x=s[c++],E=(T-T%o)/o,L=T<o?0:ve[k-o],$===0?le=ne=0:(le=ve[($-1)*z+E*o+T%o],ne=E&&ve[($-1)*z+(E-1)*o+T%o]),B=L+le-ne,W=Math.abs(B-L),q=Math.abs(B-le),ie=Math.abs(B-ne),U=W<=q&&W<=ie?L:q<=ie?le:ne,ve[k++]=(x+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!F){var te=((m+$*_)*u.width+p)*o,Q=$*z;for(T=0;T<ue;T+=1){for(var ce=0;ce<o;ce+=1)a[te++]=ve[Q++];te+=(b-1)*o}}$++}}return s=aX(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,c,u,h,p,m,b;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),c=0,s=0,o=p=0,m=a.length;p<m;o=p+=3)u[c++]=a[o],u[c++]=a[o+1],u[c++]=a[o+2],u[c++]=(b=h[s++])!=null?b:255;return u},r.prototype.copyToImageData=function(s,o){var a,c,u,h,p,m,b,_,x,k,E;if(c=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(E=this._decodedPalette)!=null?E:this._decodedPalette=this.decodePalette(),c=4,a=!0),_=(u=s.data||s).length,p=x||o,h=m=0,c===1)for(;h<_;)b=x?4*o[h/4]:m,k=p[b++],u[h++]=k,u[h++]=k,u[h++]=k,u[h++]=a?p[b++]:255,m=b;else for(;h<_;)b=x?4*o[h/4]:m,u[h++]=p[b++],u[h++]=p[b++],u[h++]=p[b++],u[h++]=a?p[b++]:255,m=b},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(fn)==="[object Window]"){try{e=fn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,c,u,h,p,m,b;if(this.animation){for(b=[],a=h=0,p=(m=this.animation.frames).length;h<p;a=++h)o=m[a],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,b.push(o.image=n(c));return b}},r.prototype.renderFrame=function(s,o){var a,c,u;return a=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),u?.disposeOp===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,c,u,h,p,m=this;return a=0,p=this.animation,u=p.numFrames,c=p.frames,h=p.numPlays,(o=function(){var b,_;if(b=a++%u,_=c[b],m.renderFrame(s,b),u>1&&a/u<h)return m.animation._timeout=setTimeout(o,_.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function TX(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,c=null;s&&(a=e,c=o,e+=3*o);var u=!0,h=[],p=0,m=null,b=0,_=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];p=n[e++]|n[e++]<<8,m=n[e++],(1&x)==0&&(m=null),b=x>>2&7,e++;break;case 254:for(;;){if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,E=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,j=n[e++],B=j>>6&1,W=1<<(7&j)+1,U=a,q=c,ie=!1;j>>7&&(ie=!0,U=e,q=W,e+=3*W);var ve=e;for(e++;;){var $;if(!(($=n[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}h.push({x:k,y:E,width:T,height:L,has_local_palette:ie,palette_offset:U,palette_size:q,data_offset:ve,data_length:e-ve,transparent_index:m,interlaced:!!B,delay:p,disposal:b});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return _},this.frameInfo=function(z){if(z<0||z>=h.length)throw new Error("Frame index out of range.");return h[z]},this.decodeAndBlitFrameBGRA=function(z,le){var ne=this.frameInfo(z),ee=ne.width*ne.height,G=new Uint8Array(ee);jC(n,ne.data_offset,G,ee);var he=ne.palette_offset,X=ne.transparent_index;X===null&&(X=256);var fe=ne.width,ue=t-fe,se=fe,F=4*(ne.y*t+ne.x),te=4*((ne.y+ne.height)*t+ne.x),Q=F,ce=4*ue;ne.interlaced===!0&&(ce+=4*t*7);for(var pe=8,ge=0,_e=G.length;ge<_e;++ge){var Te=G[ge];if(se===0&&(se=fe,(Q+=ce)>=te&&(ce=4*ue+4*t*(pe-1),Q=F+(fe+ue)*(pe<<1),pe>>=1)),Te===X)Q+=4;else{var Ge=n[he+3*Te],Ye=n[he+3*Te+1],at=n[he+3*Te+2];le[Q++]=at,le[Q++]=Ye,le[Q++]=Ge,le[Q++]=255}--se}},this.decodeAndBlitFrameRGBA=function(z,le){var ne=this.frameInfo(z),ee=ne.width*ne.height,G=new Uint8Array(ee);jC(n,ne.data_offset,G,ee);var he=ne.palette_offset,X=ne.transparent_index;X===null&&(X=256);var fe=ne.width,ue=t-fe,se=fe,F=4*(ne.y*t+ne.x),te=4*((ne.y+ne.height)*t+ne.x),Q=F,ce=4*ue;ne.interlaced===!0&&(ce+=4*t*7);for(var pe=8,ge=0,_e=G.length;ge<_e;++ge){var Te=G[ge];if(se===0&&(se=fe,(Q+=ce)>=te&&(ce=4*ue+4*t*(pe-1),Q=F+(fe+ue)*(pe<<1),pe>>=1)),Te===X)Q+=4;else{var Ge=n[he+3*Te],Ye=n[he+3*Te+1],at=n[he+3*Te+2];le[Q++]=Ge,le[Q++]=Ye,le[Q++]=at,le[Q++]=255}--se}}}function jC(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,c=i+1,u=(1<<c)-1,h=0,p=0,m=0,b=n[e++],_=new Int32Array(4096),x=null;;){for(;h<16&&b!==0;)p|=n[e++]<<h,h+=8,b===1?b=n[e++]:--b;if(h<c)break;var k=p&u;if(p>>=c,h-=c,k!==s){if(k===o)break;for(var E=k<a?k:x,T=0,L=E;L>s;)L=_[L]>>8,++T;var j=L;if(m+T+(E!==k?1:0)>r)return void zr.log("Warning, gif stream longer than expected.");t[m++]=j;var B=m+=T;for(E!==k&&(t[m++]=j),L=E;T--;)L=_[L],t[--B]=255&L,L>>=8;x!==null&&a<4096&&(_[a++]=x<<8|j,a>=u+1&&c<12&&(++c,u=u<<1|1)),x=k}else a=o+1,u=(1<<(c=i+1))-1,x=null}return m!==r&&zr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rw(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),c=new Array(64),u=new Array(64),h=new Array(64),p=new Array(65535),m=new Array(65535),b=new Array(64),_=new Array(64),x=[],k=0,E=7,T=new Array(64),L=new Array(64),j=new Array(64),B=new Array(256),W=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ie=[0,1,2,3,4,5,6,7,8,9,10,11],ve=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],le=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(F,te){for(var Q=0,ce=0,pe=new Array,ge=1;ge<=16;ge++){for(var _e=1;_e<=F[ge];_e++)pe[te[ce]]=[],pe[te[ce]][0]=Q,pe[te[ce]][1]=ge,ce++,Q++;Q*=2}return pe}function he(F){for(var te=F[0],Q=F[1]-1;Q>=0;)te&1<<Q&&(k|=1<<E),Q--,--E<0&&(k==255?(X(255),X(0)):X(k),E=7,k=0)}function X(F){x.push(F)}function fe(F){X(F>>8&255),X(255&F)}function ue(F,te,Q,ce,pe){for(var ge,_e=pe[0],Te=pe[240],Ge=function(ut,mt){var gt,bt,Ot,Qt,Xt,un,$e,Vt,St,Pt,wt=0;for(St=0;St<8;++St){gt=ut[wt],bt=ut[wt+1],Ot=ut[wt+2],Qt=ut[wt+3],Xt=ut[wt+4],un=ut[wt+5],$e=ut[wt+6];var oi=gt+(Vt=ut[wt+7]),Pn=gt-Vt,Zi=bt+$e,Jn=bt-$e,ir=Ot+un,Ji=Ot-un,Un=Qt+Xt,ea=Qt-Xt,vr=oi+Un,pi=oi-Un,Ri=Zi+ir,Sr=Zi-ir;ut[wt]=vr+Ri,ut[wt+4]=vr-Ri;var nn=.707106781*(Sr+pi);ut[wt+2]=pi+nn,ut[wt+6]=pi-nn;var qn=.382683433*((vr=ea+Ji)-(Sr=Jn+Pn)),Ra=.5411961*vr+qn,ei=1.306562965*Sr+qn,zs=.707106781*(Ri=Ji+Jn),lo=Pn+zs,Wt=Pn-zs;ut[wt+5]=Wt+Ra,ut[wt+3]=Wt-Ra,ut[wt+1]=lo+ei,ut[wt+7]=lo-ei,wt+=8}for(wt=0,St=0;St<8;++St){gt=ut[wt],bt=ut[wt+8],Ot=ut[wt+16],Qt=ut[wt+24],Xt=ut[wt+32],un=ut[wt+40],$e=ut[wt+48];var Ii=gt+(Vt=ut[wt+56]),Qi=gt-Vt,Si=bt+$e,Ar=bt-$e,Cr=Ot+un,Ai=Ot-un,Ia=Qt+Xt,ta=Qt-Xt,co=Ii+Ia,uo=Ii-Ia,mi=Si+Cr,Us=Si-Cr;ut[wt]=co+mi,ut[wt+32]=co-mi;var gs=.707106781*(Us+uo);ut[wt+16]=uo+gs,ut[wt+48]=uo-gs;var na=.382683433*((co=ta+Ai)-(Us=Ar+Qi)),ol=.5411961*co+na,$l=1.306562965*Us+na,al=.707106781*(mi=Ai+Ar),Be=Qi+al,Se=Qi-al;ut[wt+40]=Se+ol,ut[wt+24]=Se-ol,ut[wt+8]=Be+$l,ut[wt+56]=Be-$l,wt++}for(St=0;St<64;++St)Pt=ut[St]*mt[St],b[St]=Pt>0?Pt+.5|0:Pt-.5|0;return b}(F,te),Ye=0;Ye<64;++Ye)_[U[Ye]]=Ge[Ye];var at=_[0]-Q;Q=_[0],at==0?he(ce[0]):(he(ce[m[ge=32767+at]]),he(p[ge]));for(var ht=63;ht>0&&_[ht]==0;)ht--;if(ht==0)return he(_e),Q;for(var Ct,We=1;We<=ht;){for(var we=We;_[We]==0&&We<=ht;)++We;var Mt=We-we;if(Mt>=16){Ct=Mt>>4;for(var Rt=1;Rt<=Ct;++Rt)he(Te);Mt&=15}ge=32767+_[We],he(pe[(Mt<<4)+m[ge]]),he(p[ge]),We++}return ht!=63&&he(_e),Q}function se(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(te){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var pe=o((Q[ce]*te+50)/100);pe=Math.min(Math.max(pe,1),255),a[U[ce]]=pe}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_e=0;_e<64;_e++){var Te=o((ge[_e]*te+50)/100);Te=Math.min(Math.max(Te,1),255),c[U[_e]]=Te}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ye=0,at=0;at<8;at++)for(var ht=0;ht<8;ht++)u[Ye]=1/(a[U[Ye]]*Ge[at]*Ge[ht]*8),h[Ye]=1/(c[U[Ye]]*Ge[at]*Ge[ht]*8),Ye++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,te){te&&se(te),x=new Array,k=0,E=7,fe(65496),fe(65504),fe(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),fe(1),fe(1),X(0),X(0),function(){fe(65499),fe(132),X(0);for(var bt=0;bt<64;bt++)X(a[bt]);X(1);for(var Ot=0;Ot<64;Ot++)X(c[Ot])}(),function(bt,Ot){fe(65472),fe(17),X(8),fe(Ot),fe(bt),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(F.width,F.height),function(){fe(65476),fe(418),X(0);for(var bt=0;bt<16;bt++)X(q[bt+1]);for(var Ot=0;Ot<=11;Ot++)X(ie[Ot]);X(16);for(var Qt=0;Qt<16;Qt++)X(ve[Qt+1]);for(var Xt=0;Xt<=161;Xt++)X($[Xt]);X(1);for(var un=0;un<16;un++)X(z[un+1]);for(var $e=0;$e<=11;$e++)X(le[$e]);X(17);for(var Vt=0;Vt<16;Vt++)X(ne[Vt+1]);for(var St=0;St<=161;St++)X(ee[St])}(),fe(65498),fe(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var Q=0,ce=0,pe=0;k=0,E=7,this.encode.displayName="_encode_";for(var ge,_e,Te,Ge,Ye,at,ht,Ct,We,we=F.data,Mt=F.width,Rt=F.height,ut=4*Mt,mt=0;mt<Rt;){for(ge=0;ge<ut;){for(Ye=ut*mt+ge,ht=-1,Ct=0,We=0;We<64;We++)at=Ye+(Ct=We>>3)*ut+(ht=4*(7&We)),mt+Ct>=Rt&&(at-=ut*(mt+1+Ct-Rt)),ge+ht>=ut&&(at-=ge+ht-ut+4),_e=we[at++],Te=we[at++],Ge=we[at++],T[We]=(W[_e]+W[Te+256>>0]+W[Ge+512>>0]>>16)-128,L[We]=(W[_e+768>>0]+W[Te+1024>>0]+W[Ge+1280>>0]>>16)-128,j[We]=(W[_e+1280>>0]+W[Te+1536>>0]+W[Ge+1792>>0]>>16)-128;Q=ue(T,u,Q,e,r),ce=ue(L,h,ce,t,i),pe=ue(j,h,pe,t,i),ge+=32}mt+=8}if(E>=0){var gt=[];gt[1]=E+1,gt[0]=(1<<E+1)-1,he(gt)}return fe(65497),new Uint8Array(x)},n=n||50,function(){for(var F=String.fromCharCode,te=0;te<256;te++)B[te]=F(te)}(),e=G(q,ie),t=G(z,le),r=G(ve,$),i=G(ne,ee),function(){for(var F=1,te=2,Q=1;Q<=15;Q++){for(var ce=F;ce<te;ce++)m[32767+ce]=Q,p[32767+ce]=[],p[32767+ce][1]=Q,p[32767+ce][0]=ce;for(var pe=-(te-1);pe<=-F;pe++)m[32767+pe]=Q,p[32767+pe]=[],p[32767+pe][1]=Q,p[32767+pe][0]=te-1+pe;F<<=1,te<<=1}}(),function(){for(var F=0;F<256;F++)W[F]=19595*F,W[F+256>>0]=38470*F,W[F+512>>0]=7471*F+32768,W[F+768>>0]=-11059*F,W[F+1024>>0]=-21709*F,W[F+1280>>0]=32768*F+8421375,W[F+1536>>0]=-27439*F,W[F+1792>>0]=-5329*F}(),se(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MC(n){function e(q){if(!q)throw Error("assert :P")}function t(q,ie,ve){for(var $=0;4>$;$++)if(q[ie+$]!=ve.charCodeAt($))return!0;return!1}function r(q,ie,ve,$,z){for(var le=0;le<z;le++)q[ie+le]=ve[$+le]}function i(q,ie,ve,$){for(var z=0;z<$;z++)q[ie+z]=ve}function s(q){return new Int32Array(q)}function o(q,ie){for(var ve=[],$=0;$<q;$++)ve.push(new ie);return ve}function a(q,ie){var ve=[];return function $(z,le,ne){for(var ee=ne[le],G=0;G<ee&&(z.push(ne.length>le+1?[]:new ie),!(ne.length<le+1));G++)$(z[G],le+1,ne)}(ve,0,q),ve}var c=function(){var q=this;function ie(w,A){for(var I=1<<A-1>>>0;w&I;)I>>>=1;return I?(w&I-1)+I:w}function ve(w,A,I,D,V){e(!(D%I));do w[A+(D-=I)]=V;while(0<D)}function $(w,A,I,D,V){if(e(2328>=V),512>=V)var K=s(512);else if((K=s(V))==null)return 0;return function(J,re,ae,me,Ce,De){var Fe,Ie,nt=re,He=1<<ae,Ee=s(16),Pe=s(16);for(e(Ce!=0),e(me!=null),e(J!=null),e(0<ae),Ie=0;Ie<Ce;++Ie){if(15<me[Ie])return 0;++Ee[me[Ie]]}if(Ee[0]==Ce)return 0;for(Pe[1]=0,Fe=1;15>Fe;++Fe){if(Ee[Fe]>1<<Fe)return 0;Pe[Fe+1]=Pe[Fe]+Ee[Fe]}for(Ie=0;Ie<Ce;++Ie)Fe=me[Ie],0<me[Ie]&&(De[Pe[Fe]++]=Ie);if(Pe[15]==1)return(me=new z).g=0,me.value=De[0],ve(J,nt,1,He,me),He;var Qe,Je=-1,et=He-1,_t=0,xt=1,zt=1,yt=1<<ae;for(Ie=0,Fe=1,Ce=2;Fe<=ae;++Fe,Ce<<=1){if(xt+=zt<<=1,0>(zt-=Ee[Fe]))return 0;for(;0<Ee[Fe];--Ee[Fe])(me=new z).g=Fe,me.value=De[Ie++],ve(J,nt+_t,Ce,yt,me),_t=ie(_t,Fe)}for(Fe=ae+1,Ce=2;15>=Fe;++Fe,Ce<<=1){if(xt+=zt<<=1,0>(zt-=Ee[Fe]))return 0;for(;0<Ee[Fe];--Ee[Fe]){if(me=new z,(_t&et)!=Je){for(nt+=yt,Qe=1<<(Je=Fe)-ae;15>Je&&!(0>=(Qe-=Ee[Je]));)++Je,Qe<<=1;He+=yt=1<<(Qe=Je-ae),J[re+(Je=_t&et)].g=Qe+ae,J[re+Je].value=nt-re-Je}me.g=Fe-ae,me.value=De[Ie++],ve(J,nt+(_t>>ae),Ce,yt,me),_t=ie(_t,Fe)}}return xt!=2*Pe[15]-1?0:He}(w,A,I,D,V,K)}function z(){this.value=this.g=0}function le(){this.value=this.g=0}function ne(){this.G=o(5,z),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Vr,le)}function ee(w,A,I,D){e(w!=null),e(A!=null),e(2147483648>D),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=A,w.pa=I,w.Jd=A,w.Yc=I+D,w.Zc=4<=D?I+D-4+1:I,ge(w)}function G(w,A){for(var I=0;0<A--;)I|=Te(w,128)<<A;return I}function he(w,A){var I=G(w,A);return _e(w)?-I:I}function X(w,A,I,D){var V,K=0;for(e(w!=null),e(A!=null),e(4294967288>D),w.Sb=D,w.Ra=0,w.u=0,w.h=0,4<D&&(D=4),V=0;V<D;++V)K+=A[I+V]<<8*V;w.Ra=K,w.bb=D,w.oa=A,w.pa=I}function fe(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<xu-8>>>0,++w.bb,w.u-=8;Q(w)&&(w.h=1,w.u=0)}function ue(w,A){if(e(0<=A),!w.h&&A<=wu){var I=te(w)&aa[A];return w.u+=A,fe(w),I}return w.h=1,w.u=0}function se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function te(w){return w.Ra>>>(w.u&xu-1)>>>0}function Q(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>xu}function ce(w,A){w.u=A,w.h=Q(w)}function pe(w){w.u>=ec&&(e(w.u>=ec),fe(w))}function ge(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function _e(w){return G(w,1)}function Te(w,A){var I=w.Ca;0>w.b&&ge(w);var D=w.b,V=I*A>>>8,K=(w.I>>>D>V)+0;for(K?(I-=V,w.I-=V+1<<D>>>0):I=V+1,D=I,V=0;256<=D;)V+=8,D>>=8;return D=7^V+es[D],w.b-=D,w.Ca=(I<<D)-1,K}function Ge(w,A,I){w[A+0]=I>>24&255,w[A+1]=I>>16&255,w[A+2]=I>>8&255,w[A+3]=I>>0&255}function Ye(w,A){return w[A+0]<<0|w[A+1]<<8}function at(w,A){return Ye(w,A)|w[A+2]<<16}function ht(w,A){return Ye(w,A)|Ye(w,A+2)<<16}function Ct(w,A){var I=1<<A;return e(w!=null),e(0<A),w.X=s(I),w.X==null?0:(w.Mb=32-A,w.Xa=A,1)}function We(w,A){e(w!=null),e(A!=null),e(w.Xa==A.Xa),r(A.X,0,w.X,0,1<<A.Xa)}function we(){this.X=[],this.Xa=this.Mb=0}function Mt(w,A,I,D){e(I!=null),e(D!=null);var V=I[0],K=D[0];return V==0&&(V=(w*K+A/2)/A),K==0&&(K=(A*V+w/2)/w),0>=V||0>=K?0:(I[0]=V,D[0]=K,1)}function Rt(w,A){return w+(1<<A)-1>>>A}function ut(w,A){return((4278255360&w)+(4278255360&A)>>>0&4278255360)+((16711935&w)+(16711935&A)>>>0&16711935)>>>0}function mt(w,A){q[A]=function(I,D,V,K,J,re,ae){var me;for(me=0;me<J;++me){var Ce=q[w](re[ae+me-1],V,K+me);re[ae+me]=ut(I[D+me],Ce)}}}function gt(){this.ud=this.hd=this.jd=0}function bt(w,A){return((4278124286&(w^A))>>>1)+(w&A)>>>0}function Ot(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Qt(w,A){return Ot(w+(w-A+.5>>1))}function Xt(w,A,I){return Math.abs(A-I)-Math.abs(w-I)}function un(w,A,I,D,V,K,J){for(D=K[J-1],I=0;I<V;++I)K[J+I]=D=ut(w[A+I],D)}function $e(w,A,I,D,V){var K;for(K=0;K<I;++K){var J=w[A+K],re=J>>8&255,ae=16711935&(ae=(ae=16711935&J)+((re<<16)+re));D[V+K]=(4278255360&J)+ae>>>0}}function Vt(w,A){A.jd=w>>0&255,A.hd=w>>8&255,A.ud=w>>16&255}function St(w,A,I,D,V,K){var J;for(J=0;J<D;++J){var re=A[I+J],ae=re>>>8,me=re,Ce=255&(Ce=(Ce=re>>>16)+((w.jd<<24>>24)*(ae<<24>>24)>>>5));me=255&(me=(me=me+((w.hd<<24>>24)*(ae<<24>>24)>>>5))+((w.ud<<24>>24)*(Ce<<24>>24)>>>5)),V[K+J]=(4278255360&re)+(Ce<<16)+me}}function Pt(w,A,I,D,V){q[A]=function(K,J,re,ae,me,Ce,De,Fe,Ie){for(ae=De;ae<Fe;++ae)for(De=0;De<Ie;++De)me[Ce++]=V(re[D(K[J++])])},q[w]=function(K,J,re,ae,me,Ce,De){var Fe=8>>K.b,Ie=K.Ea,nt=K.K[0],He=K.w;if(8>Fe)for(K=(1<<K.b)-1,He=(1<<Fe)-1;J<re;++J){var Ee,Pe=0;for(Ee=0;Ee<Ie;++Ee)Ee&K||(Pe=D(ae[me++])),Ce[De++]=V(nt[Pe&He]),Pe>>=Fe}else q["VP8LMapColor"+I](ae,me,nt,He,Ce,De,J,re,Ie)}}function wt(w,A,I,D,V){for(I=A+I;A<I;){var K=w[A++];D[V++]=K>>16&255,D[V++]=K>>8&255,D[V++]=K>>0&255}}function oi(w,A,I,D,V){for(I=A+I;A<I;){var K=w[A++];D[V++]=K>>16&255,D[V++]=K>>8&255,D[V++]=K>>0&255,D[V++]=K>>24&255}}function Pn(w,A,I,D,V){for(I=A+I;A<I;){var K=(J=w[A++])>>16&240|J>>12&15,J=J>>0&240|J>>28&15;D[V++]=K,D[V++]=J}}function Zi(w,A,I,D,V){for(I=A+I;A<I;){var K=(J=w[A++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;D[V++]=K,D[V++]=J}}function Jn(w,A,I,D,V){for(I=A+I;A<I;){var K=w[A++];D[V++]=K>>0&255,D[V++]=K>>8&255,D[V++]=K>>16&255}}function ir(w,A,I,D,V,K){if(K==0)for(I=A+I;A<I;)Ge(D,((K=w[A++])[0]>>24|K[1]>>8&65280|K[2]<<8&16711680|K[3]<<24)>>>0),V+=32;else r(D,V,w,A,I)}function Ji(w,A){q[A][0]=q[w+"0"],q[A][1]=q[w+"1"],q[A][2]=q[w+"2"],q[A][3]=q[w+"3"],q[A][4]=q[w+"4"],q[A][5]=q[w+"5"],q[A][6]=q[w+"6"],q[A][7]=q[w+"7"],q[A][8]=q[w+"8"],q[A][9]=q[w+"9"],q[A][10]=q[w+"10"],q[A][11]=q[w+"11"],q[A][12]=q[w+"12"],q[A][13]=q[w+"13"],q[A][14]=q[w+"0"],q[A][15]=q[w+"0"]}function Un(w){return w==gl||w==$a||w==Fc||w==yd}function ea(){this.eb=[],this.size=this.A=this.fb=0}function vr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function pi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ea,this.f.kb=new vr,this.sd=null}function Ri(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Sr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function qn(w,A){var I=w.T,D=A.ba.f.RGBA,V=D.eb,K=D.fb+w.ka*D.A,J=Ss[A.ba.S],re=w.y,ae=w.O,me=w.f,Ce=w.N,De=w.ea,Fe=w.W,Ie=A.cc,nt=A.dc,He=A.Mc,Ee=A.Nc,Pe=w.ka,Qe=w.ka+w.T,Je=w.U,et=Je+1>>1;for(Pe==0?J(re,ae,null,null,me,Ce,De,Fe,me,Ce,De,Fe,V,K,null,null,Je):(J(A.ec,A.fc,re,ae,Ie,nt,He,Ee,me,Ce,De,Fe,V,K-D.A,V,K,Je),++I);Pe+2<Qe;Pe+=2)Ie=me,nt=Ce,He=De,Ee=Fe,Ce+=w.Rc,Fe+=w.Rc,K+=2*D.A,J(re,(ae+=2*w.fa)-w.fa,re,ae,Ie,nt,He,Ee,me,Ce,De,Fe,V,K-D.A,V,K,Je);return ae+=w.fa,w.j+Qe<w.o?(r(A.ec,A.fc,re,ae,Je),r(A.cc,A.dc,me,Ce,et),r(A.Mc,A.Nc,De,Fe,et),I--):1&Qe||J(re,ae,null,null,me,Ce,De,Fe,me,Ce,De,Fe,V,K+D.A,null,null,Je),I}function Ra(w,A,I){var D=w.F,V=[w.J];if(D!=null){var K=w.U,J=A.ba.S,re=J==vd||J==Fc;A=A.ba.f.RGBA;var ae=[0],me=w.ka;ae[0]=w.T,w.Kb&&(me==0?--ae[0]:(--me,V[0]-=w.width),w.j+w.ka+w.T==w.o&&(ae[0]=w.o-w.j-me));var Ce=A.eb;me=A.fb+me*A.A,w=lr(D,V[0],w.width,K,ae,Ce,me+(re?0:3),A.A),e(I==ae),w&&Un(J)&&ws(Ce,me,re,K,ae,A.A)}return 0}function ei(w){var A=w.ma,I=A.ba.S,D=11>I,V=I==Oo||I==ic||I==vd||I==pr||I==12||Un(I);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!yu(A.Oa,w,V?11:12))return 0;if(V&&Un(I)&&ot(),w.da)alert("todo:use_scaling");else{if(D){if(A.Ib=nn,w.Kb){if(I=w.U+1>>1,A.memory=s(w.U+2*I),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+w.U,A.Mc=A.cc,A.Nc=A.dc+I,A.Ib=qn,ot()}}else alert("todo:EmitYUV");V&&(A.Jb=Ra,D&&Me())}if(D&&!Fi){for(w=0;256>w;++w)Ks[w]=89858*(w-128)+Di>>yl,Xs[w]=-22014*(w-128)+Di,Tu[w]=-45773*(w-128),As[w]=113618*(w-128)+Di>>yl;for(w=cr;w<hr;++w)A=76283*(w-16)+Di>>yl,uh[w-cr]=kr(A,255),wp[w-cr]=kr(A+8>>4,15);Fi=1}return 1}function zs(w){var A=w.ma,I=w.U,D=w.T;return e(!(1&w.ka)),0>=I||0>=D?0:(I=A.Ib(w,A),A.Jb!=null&&A.Jb(w,A,I),A.Dc+=I,1)}function lo(w){w.ma.memory=null}function Wt(w,A,I,D){return ue(w,8)!=47?0:(A[0]=ue(w,14)+1,I[0]=ue(w,14)+1,D[0]=ue(w,1),ue(w,3)!=0?0:!w.h)}function Ii(w,A){if(4>w)return w+1;var I=w-2>>1;return(2+(1&w)<<I)+ue(A,I)+1}function Qi(w,A){return 120<A?A-120:1<=(I=((I=eg[A-1])>>4)*w+(8-(15&I)))?I:1;var I}function Si(w,A,I){var D=te(I),V=w[A+=255&D].g-8;return 0<V&&(ce(I,I.u+8),D=te(I),A+=w[A].value,A+=D&(1<<V)-1),ce(I,I.u+w[A].g),w[A].value}function Ar(w,A,I){return I.g+=w.g,I.value+=w.value<<A>>>0,e(8>=I.g),w.g}function Cr(w,A,I){var D=w.xc;return e((A=D==0?0:w.vc[w.md*(I>>D)+(A>>D)])<w.Wb),w.Ya[A]}function Ai(w,A,I,D){var V=w.ab,K=w.c*A,J=w.C;A=J+A;var re=I,ae=D;for(D=w.Ta,I=w.Ua;0<V--;){var me=w.gc[V],Ce=J,De=A,Fe=re,Ie=ae,nt=(ae=D,re=I,me.Ea);switch(e(Ce<De),e(De<=me.nc),me.hc){case 2:oh(Fe,Ie,(De-Ce)*nt,ae,re);break;case 0:var He=Ce,Ee=De,Pe=ae,Qe=re,Je=(yt=me).Ea;He==0&&(Hs(Fe,Ie,null,null,1,Pe,Qe),un(Fe,Ie+1,0,0,Je-1,Pe,Qe+1),Ie+=Je,Qe+=Je,++He);for(var et=1<<yt.b,_t=et-1,xt=Rt(Je,yt.b),zt=yt.K,yt=yt.w+(He>>yt.b)*xt;He<Ee;){var Kn=zt,Hn=yt,Fn=1;for(Io(Fe,Ie,Pe,Qe-Je,1,Pe,Qe);Fn<Je;){var dn=(Fn&~_t)+et;dn>Je&&(dn=Je),(0,la[Kn[Hn++]>>8&15])(Fe,Ie+ +Fn,Pe,Qe+Fn-Je,dn-Fn,Pe,Qe+Fn),Fn=dn}Ie+=Je,Qe+=Je,++He&_t||(yt+=xt)}De!=me.nc&&r(ae,re-nt,ae,re+(De-Ce-1)*nt,nt);break;case 1:for(nt=Fe,Ee=Ie,Je=(Fe=me.Ea)-(Qe=Fe&~(Pe=(Ie=1<<me.b)-1)),He=Rt(Fe,me.b),et=me.K,me=me.w+(Ce>>me.b)*He;Ce<De;){for(_t=et,xt=me,zt=new gt,yt=Ee+Qe,Kn=Ee+Fe;Ee<yt;)Vt(_t[xt++],zt),tc(zt,nt,Ee,Ie,ae,re),Ee+=Ie,re+=Ie;Ee<Kn&&(Vt(_t[xt++],zt),tc(zt,nt,Ee,Je,ae,re),Ee+=Je,re+=Je),++Ce&Pe||(me+=He)}break;case 3:if(Fe==ae&&Ie==re&&0<me.b){for(Ee=ae,Fe=nt=re+(De-Ce)*nt-(Qe=(De-Ce)*Rt(me.Ea,me.b)),Ie=ae,Pe=re,He=[],Qe=(Je=Qe)-1;0<=Qe;--Qe)He[Qe]=Ie[Pe+Qe];for(Qe=Je-1;0<=Qe;--Qe)Ee[Fe+Qe]=He[Qe];vs(me,Ce,De,ae,nt,ae,re)}else vs(me,Ce,De,Fe,Ie,ae,re)}re=D,ae=I}ae!=I&&r(D,I,re,ae,K)}function Ia(w,A){var I=w.V,D=w.Ba+w.c*w.C,V=A-w.C;if(e(A<=w.l.o),e(16>=V),0<V){var K=w.l,J=w.Ta,re=w.Ua,ae=K.width;if(Ai(w,V,I,D),V=re=[re],e((I=w.C)<(D=A)),e(K.v<K.va),D>K.o&&(D=K.o),I<K.j){var me=K.j-I;I=K.j,V[0]+=me*ae}if(I>=D?I=0:(V[0]+=4*K.v,K.ka=I-K.j,K.U=K.va-K.v,K.T=D-I,I=1),I){if(re=re[0],11>(I=w.ca).S){var Ce=I.f.RGBA,De=(D=I.S,V=K.U,K=K.T,me=Ce.eb,Ce.A),Fe=K;for(Ce=Ce.fb+w.Ma*Ce.A;0<Fe--;){var Ie=J,nt=re,He=V,Ee=me,Pe=Ce;switch(D){case gd:ys(Ie,nt,He,Ee,Pe);break;case Oo:ns(Ie,nt,He,Ee,Pe);break;case gl:ns(Ie,nt,He,Ee,Pe),ws(Ee,Pe,0,He,1,0);break;case rc:Gs(Ie,nt,He,Ee,Pe);break;case ic:ir(Ie,nt,He,Ee,Pe,1);break;case $a:ir(Ie,nt,He,Ee,Pe,1),ws(Ee,Pe,0,He,1,0);break;case vd:ir(Ie,nt,He,Ee,Pe,0);break;case Fc:ir(Ie,nt,He,Ee,Pe,0),ws(Ee,Pe,1,He,1,0);break;case pr:nc(Ie,nt,He,Ee,Pe);break;case yd:nc(Ie,nt,He,Ee,Pe),sr(Ee,Pe,He,1,0);break;case ah:fl(Ie,nt,He,Ee,Pe);break;default:e(0)}re+=ae,Ce+=De}w.Ma+=K}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=I.height)}}w.C=A,e(w.C<=w.i)}function ta(w){var A;if(0<w.ua)return 0;for(A=0;A<w.Wb;++A){var I=w.Ya[A].G,D=w.Ya[A].H;if(0<I[1][D[1]+0].g||0<I[2][D[2]+0].g||0<I[3][D[3]+0].g)return 0}return 1}function co(w,A,I,D,V,K){if(w.Z!=0){var J=w.qd,re=w.rd;for(e(ui[w.Z]!=null);A<I;++A)ui[w.Z](J,re,D,V,D,V,K),J=D,re=V,V+=K;w.qd=J,w.rd=re}}function uo(w,A){var I=w.l.ma,D=I.Z==0||I.Z==1?w.l.j:w.C;if(D=w.C<D?D:w.C,e(A<=w.l.o),A>D){var V=w.l.width,K=I.ca,J=I.tb+V*D,re=w.V,ae=w.Ba+w.c*D,me=w.gc;e(w.ab==1),e(me[0].hc==3),za(me[0],D,A,re,ae,K,J),co(I,D,A,K,J,V)}w.C=w.Ma=A}function mi(w,A,I,D,V,K,J){var re=w.$/D,ae=w.$%D,me=w.m,Ce=w.s,De=I+w.$,Fe=De;V=I+D*V;var Ie=I+D*K,nt=280+Ce.ua,He=w.Pb?re:16777216,Ee=0<Ce.ua?Ce.Wa:null,Pe=Ce.wc,Qe=De<Ie?Cr(Ce,ae,re):null;e(w.C<K),e(Ie<=V);var Je=!1;e:for(;;){for(;Je||De<Ie;){var et=0;if(re>=He){var _t=De-I;e((He=w).Pb),He.wd=He.m,He.xd=_t,0<He.s.ua&&We(He.s.Wa,He.s.vb),He=re+bd}if(ae&Pe||(Qe=Cr(Ce,ae,re)),e(Qe!=null),Qe.Qb&&(A[De]=Qe.qb,Je=!0),!Je)if(pe(me),Qe.jc){et=me,_t=A;var xt=De,zt=Qe.pd[te(et)&Vr-1];e(Qe.jc),256>zt.g?(ce(et,et.u+zt.g),_t[xt]=zt.value,et=0):(ce(et,et.u+zt.g-256),e(256<=zt.value),et=zt.value),et==0&&(Je=!0)}else et=Si(Qe.G[0],Qe.H[0],me);if(me.h)break;if(Je||256>et){if(!Je)if(Qe.nd)A[De]=(Qe.qb|et<<8)>>>0;else{if(pe(me),Je=Si(Qe.G[1],Qe.H[1],me),pe(me),_t=Si(Qe.G[2],Qe.H[2],me),xt=Si(Qe.G[3],Qe.H[3],me),me.h)break;A[De]=(xt<<24|Je<<16|et<<8|_t)>>>0}if(Je=!1,++De,++ae>=D&&(ae=0,++re,J!=null&&re<=K&&!(re%16)&&J(w,re),Ee!=null))for(;Fe<De;)et=A[Fe++],Ee.X[(506832829*et&4294967295)>>>Ee.Mb]=et}else if(280>et){if(et=Ii(et-256,me),_t=Si(Qe.G[4],Qe.H[4],me),pe(me),_t=Qi(D,_t=Ii(_t,me)),me.h)break;if(De-I<_t||V-De<et)break e;for(xt=0;xt<et;++xt)A[De+xt]=A[De+xt-_t];for(De+=et,ae+=et;ae>=D;)ae-=D,++re,J!=null&&re<=K&&!(re%16)&&J(w,re);if(e(De<=V),ae&Pe&&(Qe=Cr(Ce,ae,re)),Ee!=null)for(;Fe<De;)et=A[Fe++],Ee.X[(506832829*et&4294967295)>>>Ee.Mb]=et}else{if(!(et<nt))break e;for(Je=et-280,e(Ee!=null);Fe<De;)et=A[Fe++],Ee.X[(506832829*et&4294967295)>>>Ee.Mb]=et;et=De,e(!(Je>>>(_t=Ee).Xa)),A[et]=_t.X[Je],Je=!0}Je||e(me.h==Q(me))}if(w.Pb&&me.h&&De<V)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&We(w.s.vb,w.s.Wa);else{if(me.h)break e;J?.(w,re>K?K:re),w.a=0,w.$=De-I}return 1}return w.a=3,0}function Us(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var A=w.Wa;A!=null&&(A.X=null),w.vb=null,e(w!=null)}function gs(){var w=new gu;return w==null?null:(w.a=0,w.xb=vl,Ji("Predictor","VP8LPredictors"),Ji("Predictor","VP8LPredictors_C"),Ji("PredictorAdd","VP8LPredictorsAdd"),Ji("PredictorAdd","VP8LPredictorsAdd_C"),oh=$e,tc=St,ys=wt,ns=oi,nc=Pn,fl=Zi,Gs=Jn,q.VP8LMapColor32b=_u,q.VP8LMapColor8b=ts,w)}function na(w,A,I,D,V){var K=1,J=[w],re=[A],ae=D.m,me=D.s,Ce=null,De=0;e:for(;;){if(I)for(;K&&ue(ae,1);){var Fe=J,Ie=re,nt=D,He=1,Ee=nt.m,Pe=nt.gc[nt.ab],Qe=ue(Ee,2);if(nt.Oc&1<<Qe)K=0;else{switch(nt.Oc|=1<<Qe,Pe.hc=Qe,Pe.Ea=Fe[0],Pe.nc=Ie[0],Pe.K=[null],++nt.ab,e(4>=nt.ab),Qe){case 0:case 1:Pe.b=ue(Ee,3)+2,He=na(Rt(Pe.Ea,Pe.b),Rt(Pe.nc,Pe.b),0,nt,Pe.K),Pe.K=Pe.K[0];break;case 3:var Je,et=ue(Ee,8)+1,_t=16<et?0:4<et?1:2<et?2:3;if(Fe[0]=Rt(Pe.Ea,_t),Pe.b=_t,Je=He=na(et,1,0,nt,Pe.K)){var xt,zt=et,yt=Pe,Kn=1<<(8>>yt.b),Hn=s(Kn);if(Hn==null)Je=0;else{var Fn=yt.K[0],dn=yt.w;for(Hn[0]=yt.K[0][0],xt=1;xt<1*zt;++xt)Hn[xt]=ut(Fn[dn+xt],Hn[xt-1]);for(;xt<4*Kn;++xt)Hn[xt]=0;yt.K[0]=null,yt.K[0]=Hn,Je=1}}He=Je;break;case 2:break;default:e(0)}K=He}}if(J=J[0],re=re[0],K&&ue(ae,1)&&!(K=1<=(De=ue(ae,4))&&11>=De)){D.a=3;break e}var Mn;if(Mn=K)t:{var ur,sn,yr,Es=D,Hr=J,Bn=re,Xn=De,Bi=I,Nr=Es.m,Tr=Es.s,Gr=[null],Br=1,ks=0,br=bp[Xn];n:for(;;){if(Bi&&ue(Nr,1)){var Lr=ue(Nr,3)+2,di=Rt(Hr,Lr),yo=Rt(Bn,Lr),ac=di*yo;if(!na(di,yo,0,Es,Gr))break n;for(Gr=Gr[0],Tr.xc=Lr,ur=0;ur<ac;++ur){var da=Gr[ur]>>8&65535;Gr[ur]=da,da>=Br&&(Br=da+1)}}if(Nr.h)break n;for(sn=0;5>sn;++sn){var or=Bc[sn];!sn&&0<Xn&&(or+=1<<Xn),ks<or&&(ks=or)}var Zs=o(Br*br,z),Sd=Br,cf=o(Sd,ne);if(cf==null)var Fo=null;else e(65536>=Sd),Fo=cf;var os=s(ks);if(Fo==null||os==null||Zs==null){Es.a=1;break n}var Uc=Zs;for(ur=yr=0;ur<Br;++ur){var Bo=Fo[ur],ha=Bo.G,lc=Bo.H,Lu=0,bo=1,Ru=0;for(sn=0;5>sn;++sn){or=Bc[sn],ha[sn]=Uc,lc[sn]=yr,!sn&&0<Xn&&(or+=1<<Xn);i:{var wl,fa=or,Iu=Es,zo=os,uf=Uc,dh=yr,wr=0,Js=Iu.m,df=ue(Js,1);if(i(zo,0,0,fa),df){var hh=ue(Js,1)+1,Ad=ue(Js,1),fh=ue(Js,Ad==0?1:8);zo[fh]=1,hh==2&&(zo[fh=ue(Js,8)]=1);var pa=1}else{var Or=s(19),Yr=ue(Js,4)+4;if(19<Yr){Iu.a=3;var Kr=0;break i}for(wl=0;wl<Yr;++wl)Or[ss[wl]]=ue(Js,3);var cc=void 0,xl=void 0,uc=Iu,Cn=Or,vi=fa,ph=zo,_l=0,ma=uc.m,ga=8,wo=o(128,z);r:for(;$(wo,0,7,Cn,19);){if(ue(ma,1)){var as=2+2*ue(ma,3);if((cc=2+ue(ma,as))>vi)break r}else cc=vi;for(xl=0;xl<vi&&cc--;){pe(ma);var mh=wo[0+(127&te(ma))];ce(ma,ma.u+mh.g);var va=mh.value;if(16>va)ph[xl++]=va,va!=0&&(ga=va);else{var gh=va==16,vh=va-16,hf=lh[vh],Ps=ue(ma,Au[vh])+hf;if(xl+Ps>vi)break r;for(var Sl=gh?ga:0;0<Ps--;)ph[xl++]=Sl}}_l=1;break r}_l||(uc.a=3),pa=_l}(pa=pa&&!Js.h)&&(wr=$(uf,dh,8,zo,fa)),pa&&wr!=0?Kr=wr:(Iu.a=3,Kr=0)}if(Kr==0)break n;if(bo&&ci[sn]==1&&(bo=Uc[yr].g==0),Lu+=Uc[yr].g,yr+=Kr,3>=sn){var dc,Cd=os[0];for(dc=1;dc<or;++dc)os[dc]>Cd&&(Cd=os[dc]);Ru+=Cd}}if(Bo.nd=bo,Bo.Qb=0,bo&&(Bo.qb=(ha[3][lc[3]+0].value<<24|ha[1][lc[1]+0].value<<16|ha[2][lc[2]+0].value)>>>0,Lu==0&&256>ha[0][lc[0]+0].value&&(Bo.Qb=1,Bo.qb+=ha[0][lc[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>Ru,Bo.jc){var hc,Qs=Bo;for(hc=0;hc<Vr;++hc){var ya=hc,Uo=Qs.pd[ya],Al=Qs.G[0][Qs.H[0]+ya];256<=Al.value?(Uo.g=Al.g+256,Uo.value=Al.value):(Uo.g=0,Uo.value=0,ya>>=Ar(Al,8,Uo),ya>>=Ar(Qs.G[1][Qs.H[1]+ya],16,Uo),ya>>=Ar(Qs.G[2][Qs.H[2]+ya],0,Uo),Ar(Qs.G[3][Qs.H[3]+ya],24,Uo))}}}Tr.vc=Gr,Tr.Wb=Br,Tr.Ya=Fo,Tr.yc=Zs,Mn=1;break t}Mn=0}if(!(K=Mn)){D.a=3;break e}if(0<De){if(me.ua=1<<De,!Ct(me.Wa,De)){D.a=1,K=0;break e}}else me.ua=0;var ju=D,ba=J,_p=re,wa=ju.s,Ed=wa.xc;if(ju.c=ba,ju.i=_p,wa.md=Rt(ba,Ed),wa.wc=Ed==0?-1:(1<<Ed)-1,I){D.xb=qa;break e}if((Ce=s(J*re))==null){D.a=1,K=0;break e}K=(K=mi(D,Ce,0,J,re,re,null))&&!ae.h;break e}return K?(V!=null?V[0]=Ce:(e(Ce==null),e(I)),D.$=0,I||Us(me)):Us(me),K}function ol(w,A){var I=w.c*w.i,D=I+A+16*A;return e(w.c<=A),w.V=s(D),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+I+A,1)}function $l(w,A){var I=w.C,D=A-I,V=w.V,K=w.Ba+w.c*I;for(e(A<=w.l.o);0<D;){var J=16<D?16:D,re=w.l.ma,ae=w.l.width,me=ae*J,Ce=re.ca,De=re.tb+ae*I,Fe=w.Ta,Ie=w.Ua;Ai(w,J,V,K),Wr(Fe,Ie,Ce,De,me),co(re,I,I+J,Ce,De,ae),D-=J,V+=J*w.c,I+=J}e(I==A),w.C=w.Ma=A}function al(){this.ub=this.yd=this.td=this.Rb=0}function Be(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Se(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ve(){this.Yb=function(){var w=[];return function A(I,D,V){for(var K=V[D],J=0;J<K&&(I.push(V.length>D+1?[]:0),!(V.length<D+1));J++)A(I[J],D+1,V)}(w,0,[3,11]),w}()}function Ke(){this.jb=s(3),this.Wc=a([4,8],Ve),this.Xc=a([4,17],Ve)}function tt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Tt(){this.ld=this.La=this.dd=this.tc=0}function Nn(){this.Na=this.la=0}function Dr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $s(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ja(){this.uc=this.M=this.Nb=0,this.wa=Array(new Tt),this.Y=0,this.ya=Array(new $s),this.aa=0,this.l=new au}function ll(){this.y=s(16),this.f=s(8),this.ea=s(8)}function No(){this.cb=this.a=0,this.sc="",this.m=new se,this.Od=new al,this.Kc=new Be,this.ed=new tt,this.Qa=new Se,this.Ic=this.$c=this.Aa=0,this.D=new ja,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,se),this.ia=0,this.pb=o(4,Dr),this.Pa=new Ke,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ll),this.Hd=0,this.rb=Array(new Nn),this.sb=0,this.wa=Array(new Tt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $s),this.L=this.aa=0,this.gd=a([4,2],Tt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function au(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ho(){var w=new No;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,ca||(ca=cl)),w}function Ur(w,A,I){return w.a==0&&(w.a=A,w.sc=I,w.cb=0),0}function ld(w,A,I){return 3<=I&&w[A+0]==157&&w[A+1]==1&&w[A+2]==42}function cd(w,A){if(w==null)return 0;if(w.a=0,w.sc="OK",A==null)return Ur(w,2,"null VP8Io passed to VP8GetHeaders()");var I=A.data,D=A.w,V=A.ha;if(4>V)return Ur(w,7,"Truncated header.");var K=I[D+0]|I[D+1]<<8|I[D+2]<<16,J=w.Od;if(J.Rb=!(1&K),J.td=K>>1&7,J.yd=K>>4&1,J.ub=K>>5,3<J.td)return Ur(w,3,"Incorrect keyframe parameters.");if(!J.yd)return Ur(w,4,"Frame not displayable.");D+=3,V-=3;var re=w.Kc;if(J.Rb){if(7>V)return Ur(w,7,"cannot parse picture header");if(!ld(I,D,V))return Ur(w,3,"Bad code word");re.c=16383&(I[D+4]<<8|I[D+3]),re.Td=I[D+4]>>6,re.i=16383&(I[D+6]<<8|I[D+5]),re.Ud=I[D+6]>>6,D+=7,V-=7,w.za=re.c+15>>4,w.Ub=re.i+15>>4,A.width=re.c,A.height=re.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((K=w.Pa).jb,0,255,K.jb.length),e((K=w.Qa)!=null),K.Cb=0,K.Bb=0,K.Fb=1,i(K.Zb,0,0,K.Zb.length),i(K.Lb,0,0,K.Lb)}if(J.ub>V)return Ur(w,7,"bad partition length");ee(K=w.m,I,D,J.ub),D+=J.ub,V-=J.ub,J.Rb&&(re.Ld=_e(K),re.Kd=_e(K)),re=w.Qa;var ae,me=w.Pa;if(e(K!=null),e(re!=null),re.Cb=_e(K),re.Cb){if(re.Bb=_e(K),_e(K)){for(re.Fb=_e(K),ae=0;4>ae;++ae)re.Zb[ae]=_e(K)?he(K,7):0;for(ae=0;4>ae;++ae)re.Lb[ae]=_e(K)?he(K,6):0}if(re.Bb)for(ae=0;3>ae;++ae)me.jb[ae]=_e(K)?G(K,8):255}else re.Bb=0;if(K.Ka)return Ur(w,3,"cannot parse segment header");if((re=w.ed).zd=_e(K),re.Tb=G(K,6),re.wb=G(K,3),re.Pc=_e(K),re.Pc&&_e(K)){for(me=0;4>me;++me)_e(K)&&(re.vd[me]=he(K,6));for(me=0;4>me;++me)_e(K)&&(re.od[me]=he(K,6))}if(w.L=re.Tb==0?0:re.zd?1:2,K.Ka)return Ur(w,3,"cannot parse filter header");var Ce=V;if(V=ae=D,D=ae+Ce,re=Ce,w.Xb=(1<<G(w.m,2))-1,Ce<3*(me=w.Xb))I=7;else{for(ae+=3*me,re-=3*me,Ce=0;Ce<me;++Ce){var De=I[V+0]|I[V+1]<<8|I[V+2]<<16;De>re&&(De=re),ee(w.Jc[+Ce],I,ae,De),ae+=De,re-=De,V+=3}ee(w.Jc[+me],I,ae,re),I=ae<D?0:5}if(I!=0)return Ur(w,I,"cannot parse partitions");for(I=G(ae=w.m,7),V=_e(ae)?he(ae,4):0,D=_e(ae)?he(ae,4):0,re=_e(ae)?he(ae,4):0,me=_e(ae)?he(ae,4):0,ae=_e(ae)?he(ae,4):0,Ce=w.Qa,De=0;4>De;++De){if(Ce.Cb){var Fe=Ce.Zb[De];Ce.Fb||(Fe+=I)}else{if(0<De){w.pb[De]=w.pb[0];continue}Fe=I}var Ie=w.pb[De];Ie.Sc[0]=Cu[kr(Fe+V,127)],Ie.Sc[1]=zc[kr(Fe+0,127)],Ie.Eb[0]=2*Cu[kr(Fe+D,127)],Ie.Eb[1]=101581*zc[kr(Fe+re,127)]>>16,8>Ie.Eb[1]&&(Ie.Eb[1]=8),Ie.Qc[0]=Cu[kr(Fe+me,117)],Ie.Qc[1]=zc[kr(Fe+ae,127)],Ie.lc=Fe+ae}if(!J.Rb)return Ur(w,4,"Not a key frame.");for(_e(K),J=w.Pa,I=0;4>I;++I){for(V=0;8>V;++V)for(D=0;3>D;++D)for(re=0;11>re;++re)me=Te(K,Pu[I][V][D][re])?G(K,8):ku[I][V][D][re],J.Wc[I][V].Yb[D][re]=me;for(V=0;17>V;++V)J.Xc[I][V]=J.Wc[I][of[V]]}return w.kc=_e(K),w.kc&&(w.Bd=G(K,8)),w.cb=1}function cl(w,A,I,D,V,K,J){var re=A[V].Yb[I];for(I=0;16>V;++V){if(!Te(w,re[I+0]))return V;for(;!Te(w,re[I+1]);)if(re=A[++V].Yb[0],I=0,V==16)return 16;var ae=A[V+1].Yb;if(Te(w,re[I+2])){var me=w,Ce=0;if(Te(me,(Fe=re)[(De=I)+3]))if(Te(me,Fe[De+6])){for(re=0,De=2*(Ce=Te(me,Fe[De+8]))+(Fe=Te(me,Fe[De+9+Ce])),Ce=0,Fe=wd[De];Fe[re];++re)Ce+=Ce+Te(me,Fe[re]);Ce+=3+(8<<De)}else Te(me,Fe[De+7])?(Ce=7+2*Te(me,165),Ce+=Te(me,145)):Ce=5+Te(me,159);else Ce=Te(me,Fe[De+4])?3+Te(me,Fe[De+5]):2;re=ae[2]}else Ce=1,re=ae[1];ae=J+sc[V],0>(me=w).b&&ge(me);var De,Fe=me.b,Ie=(De=me.Ca>>1)-(me.I>>Fe)>>31;--me.b,me.Ca+=Ie,me.Ca|=1,me.I-=(De+1&Ie)<<Fe,K[ae]=((Ce^Ie)-Ie)*D[(0<V)+0]}return 16}function ql(w){var A=w.rb[w.sb-1];A.la=0,A.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Vl(w,A){if(w==null)return 0;if(A==null)return Ur(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!cd(w,A))return 0;if(e(w.cb),A.ac==null||A.ac(A)){A.ob&&(w.L=0);var I=Cs[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=A.v-I>>4,w.zb=A.j-I>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=A.o+15+I>>4,w.Hb=A.va+15+I>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var D=w.ed;for(I=0;4>I;++I){var V;if(w.Qa.Cb){var K=w.Qa.Lb[I];w.Qa.Fb||(K+=D.Tb)}else K=D.Tb;for(V=0;1>=V;++V){var J=w.gd[I][V],re=K;if(D.Pc&&(re+=D.vd[0],V&&(re+=D.od[0])),0<(re=0>re?0:63<re?63:re)){var ae=re;0<D.wb&&(ae=4<D.wb?ae>>2:ae>>1)>9-D.wb&&(ae=9-D.wb),1>ae&&(ae=1),J.dd=ae,J.tc=2*re+ae,J.ld=40<=re?2:15<=re?1:0}else J.tc=0;J.La=V}}}I=0}else Ur(w,6,"Frame setup failed"),I=w.a;if(I=I==0){if(I){w.$c=0,0<w.Aa||(w.Ic=bl);e:{I=w.Ic,D=4*(ae=w.za);var me=32*ae,Ce=ae+1,De=0<w.L?ae*(0<w.Aa?2:1):0,Fe=(w.Aa==2?2:1)*ae;if((J=D+832+(V=3*(16*I+Cs[w.L])/2*me)+(K=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=J)I=0;else{if(J>w.Vb){if(w.Vb=0,w.Ec=s(J),w.Fc=0,w.Ec==null){I=Ur(w,1,"no memory during frame initialization.");break e}w.Vb=J}J=w.Ec,re=w.Fc,w.Ac=J,w.Bc=re,re+=D,w.Gd=o(me,ll),w.Hd=0,w.rb=o(Ce+1,Nn),w.sb=1,w.wa=De?o(De,Tt):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=ae),e(!0),w.oc=J,w.pc=re,re+=832,w.ya=o(Fe,$s),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=ae),w.R=16*ae,w.B=8*ae,ae=(me=Cs[w.L])*w.R,me=me/2*w.B,w.sa=J,w.ta=re+ae,w.qa=w.sa,w.ra=w.ta+16*I*w.R+me,w.Ha=w.qa,w.Ia=w.ra+8*I*w.B+me,w.$c=0,re+=V,w.mb=K?J:null,w.nb=K?re:null,e(re+K<=w.Fc+w.Vb),ql(w),i(w.Ac,w.Bc,0,D),I=1}}if(I){if(A.ka=0,A.y=w.sa,A.O=w.ta,A.f=w.qa,A.N=w.ra,A.ea=w.Ha,A.Vd=w.Ia,A.fa=w.R,A.Rc=w.B,A.F=null,A.J=0,!Su){for(I=-255;255>=I;++I)li[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)mo[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)go[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)Ua[255+I]=0>I?0:255<I?255:I;Su=1}Re=Vn,Ze=Ec,At=Hl,$t=rh,gn=Gl,Oe=lu,Pr=Lc,Qn=ai,pl=Zl,Oc=pu,Pi=dl,rs=hl,ml=gi,bs=mu,jo=fr,Mo=Vs,jn=Ci,Mi=pd,Do[0]=Da,Do[1]=ud,Do[2]=kc,Do[3]=Oa,Do[4]=dd,Do[5]=uu,Do[6]=Fa,Do[7]=du,Do[8]=sh,Do[9]=hu,_s[0]=Kl,_s[1]=ih,_s[2]=ia,_s[3]=Yl,_s[4]=Fr,_s[5]=Ma,_s[6]=sa,Ys[0]=fo,Ys[1]=cu,Ys[2]=sf,Ys[3]=Wn,Ys[4]=Pc,Ys[5]=fu,Ys[6]=hd,I=1}else I=0}I&&(I=function(Ie,nt){for(Ie.M=0;Ie.M<Ie.Va;++Ie.M){var He,Ee=Ie.Jc[Ie.M&Ie.Xb],Pe=Ie.m,Qe=Ie;for(He=0;He<Qe.za;++He){var Je=Pe,et=Qe,_t=et.Ac,xt=et.Bc+4*He,zt=et.zc,yt=et.ya[et.aa+He];if(et.Qa.Bb?yt.$b=Te(Je,et.Pa.jb[0])?2+Te(Je,et.Pa.jb[2]):Te(Je,et.Pa.jb[1]):yt.$b=0,et.kc&&(yt.Ad=Te(Je,et.Bd)),yt.Za=!Te(Je,145)+0,yt.Za){var Kn=yt.Ob,Hn=0;for(et=0;4>et;++et){var Fn,dn=zt[0+et];for(Fn=0;4>Fn;++Fn){dn=ch[_t[xt+Fn]][dn];for(var Mn=Eu[Te(Je,dn[0])];0<Mn;)Mn=Eu[2*Mn+Te(Je,dn[Mn])];dn=-Mn,_t[xt+Fn]=dn}r(Kn,Hn,_t,xt,4),Hn+=4,zt[0+et]=dn}}else dn=Te(Je,156)?Te(Je,128)?1:3:Te(Je,163)?2:0,yt.Ob[0]=dn,i(_t,xt,dn,4),i(zt,0,dn,4);yt.Dd=Te(Je,142)?Te(Je,114)?Te(Je,183)?1:3:2:0}if(Qe.m.Ka)return Ur(Ie,7,"Premature end-of-partition0 encountered.");for(;Ie.ja<Ie.za;++Ie.ja){if(Qe=Ee,Je=(Pe=Ie).rb[Pe.sb-1],_t=Pe.rb[Pe.sb+Pe.ja],He=Pe.ya[Pe.aa+Pe.ja],xt=Pe.kc?He.Ad:0)Je.la=_t.la=0,He.Za||(Je.Na=_t.Na=0),He.Hc=0,He.Gc=0,He.ia=0;else{var ur,sn;if(Je=_t,_t=Qe,xt=Pe.Pa.Xc,zt=Pe.ya[Pe.aa+Pe.ja],yt=Pe.pb[zt.$b],et=zt.ad,Kn=0,Hn=Pe.rb[Pe.sb-1],dn=Fn=0,i(et,Kn,0,384),zt.Za)var yr=0,Es=xt[3];else{Mn=s(16);var Hr=Je.Na+Hn.Na;if(Hr=ca(_t,xt[1],Hr,yt.Eb,0,Mn,0),Je.Na=Hn.Na=(0<Hr)+0,1<Hr)Re(Mn,0,et,Kn);else{var Bn=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)et[Kn+Mn]=Bn}yr=1,Es=xt[0]}var Xn=15&Je.la,Bi=15&Hn.la;for(Mn=0;4>Mn;++Mn){var Nr=1&Bi;for(Bn=sn=0;4>Bn;++Bn)Xn=Xn>>1|(Nr=(Hr=ca(_t,Es,Hr=Nr+(1&Xn),yt.Sc,yr,et,Kn))>yr)<<7,sn=sn<<2|(3<Hr?3:1<Hr?2:et[Kn+0]!=0),Kn+=16;Xn>>=4,Bi=Bi>>1|Nr<<7,Fn=(Fn<<8|sn)>>>0}for(Es=Xn,yr=Bi>>4,ur=0;4>ur;ur+=2){for(sn=0,Xn=Je.la>>4+ur,Bi=Hn.la>>4+ur,Mn=0;2>Mn;++Mn){for(Nr=1&Bi,Bn=0;2>Bn;++Bn)Hr=Nr+(1&Xn),Xn=Xn>>1|(Nr=0<(Hr=ca(_t,xt[2],Hr,yt.Qc,0,et,Kn)))<<3,sn=sn<<2|(3<Hr?3:1<Hr?2:et[Kn+0]!=0),Kn+=16;Xn>>=2,Bi=Bi>>1|Nr<<5}dn|=sn<<4*ur,Es|=Xn<<4<<ur,yr|=(240&Bi)<<ur}Je.la=Es,Hn.la=yr,zt.Hc=Fn,zt.Gc=dn,zt.ia=43690&dn?0:yt.ia,xt=!(Fn|dn)}if(0<Pe.L&&(Pe.wa[Pe.Y+Pe.ja]=Pe.gd[He.$b][He.Za],Pe.wa[Pe.Y+Pe.ja].La|=!xt),Qe.Ka)return Ur(Ie,7,"Premature end-of-file encountered.")}if(ql(Ie),Pe=nt,Qe=1,He=(Ee=Ie).D,Je=0<Ee.L&&Ee.M>=Ee.zb&&Ee.M<=Ee.Va,Ee.Aa==0)e:{if(He.M=Ee.M,He.uc=Je,Ic(Ee,He),Qe=1,He=(sn=Ee.D).Nb,Je=(dn=Cs[Ee.L])*Ee.R,_t=dn/2*Ee.B,Mn=16*He*Ee.R,Bn=8*He*Ee.B,xt=Ee.sa,zt=Ee.ta-Je+Mn,yt=Ee.qa,et=Ee.ra-_t+Bn,Kn=Ee.Ha,Hn=Ee.Ia-_t+Bn,Bi=(Xn=sn.M)==0,Fn=Xn>=Ee.Va-1,Ee.Aa==2&&Ic(Ee,sn),sn.uc)for(Nr=(Hr=Ee).D.M,e(Hr.D.uc),sn=Hr.yb;sn<Hr.Hb;++sn){yr=sn,Es=Nr;var Tr=(Gr=(or=Hr).D).Nb;ur=or.R;var Gr=Gr.wa[Gr.Y+yr],Br=or.sa,ks=or.ta+16*Tr*ur+16*yr,br=Gr.dd,Lr=Gr.tc;if(Lr!=0)if(e(3<=Lr),or.L==1)0<yr&&Mo(Br,ks,ur,Lr+4),Gr.La&&Mi(Br,ks,ur,Lr),0<Es&&jo(Br,ks,ur,Lr+4),Gr.La&&jn(Br,ks,ur,Lr);else{var di=or.B,yo=or.qa,ac=or.ra+8*Tr*di+8*yr,da=or.Ha,or=or.Ia+8*Tr*di+8*yr;Tr=Gr.ld,0<yr&&(Qn(Br,ks,ur,Lr+4,br,Tr),Oc(yo,ac,da,or,di,Lr+4,br,Tr)),Gr.La&&(rs(Br,ks,ur,Lr,br,Tr),bs(yo,ac,da,or,di,Lr,br,Tr)),0<Es&&(Pr(Br,ks,ur,Lr+4,br,Tr),pl(yo,ac,da,or,di,Lr+4,br,Tr)),Gr.La&&(Pi(Br,ks,ur,Lr,br,Tr),ml(yo,ac,da,or,di,Lr,br,Tr))}}if(Ee.ia&&alert("todo:DitherRow"),Pe.put!=null){if(sn=16*Xn,Xn=16*(Xn+1),Bi?(Pe.y=Ee.sa,Pe.O=Ee.ta+Mn,Pe.f=Ee.qa,Pe.N=Ee.ra+Bn,Pe.ea=Ee.Ha,Pe.W=Ee.Ia+Bn):(sn-=dn,Pe.y=xt,Pe.O=zt,Pe.f=yt,Pe.N=et,Pe.ea=Kn,Pe.W=Hn),Fn||(Xn-=dn),Xn>Pe.o&&(Xn=Pe.o),Pe.F=null,Pe.J=null,Ee.Fa!=null&&0<Ee.Fa.length&&sn<Xn&&(Pe.J=md(Ee,Pe,sn,Xn-sn),Pe.F=Ee.mb,Pe.F==null&&Pe.F.length==0)){Qe=Ur(Ee,3,"Could not decode alpha data.");break e}sn<Pe.j&&(dn=Pe.j-sn,sn=Pe.j,e(!(1&dn)),Pe.O+=Ee.R*dn,Pe.N+=Ee.B*(dn>>1),Pe.W+=Ee.B*(dn>>1),Pe.F!=null&&(Pe.J+=Pe.width*dn)),sn<Xn&&(Pe.O+=Pe.v,Pe.N+=Pe.v>>1,Pe.W+=Pe.v>>1,Pe.F!=null&&(Pe.J+=Pe.v),Pe.ka=sn-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=Xn-sn,Qe=Pe.put(Pe))}He+1!=Ee.Ic||Fn||(r(Ee.sa,Ee.ta-Je,xt,zt+16*Ee.R,Je),r(Ee.qa,Ee.ra-_t,yt,et+8*Ee.B,_t),r(Ee.Ha,Ee.Ia-_t,Kn,Hn+8*Ee.B,_t))}if(!Qe)return Ur(Ie,6,"Output aborted.")}return 1}(w,A)),A.bc!=null&&A.bc(A),I&=1}return I?(w.cb=0,I):0}function ji(w,A,I,D,V){V=w[A+I+32*D]+(V>>3),w[A+I+32*D]=-256&V?0>V?0:255:V}function Cc(w,A,I,D,V,K){ji(w,A,0,I,D+V),ji(w,A,1,I,D+K),ji(w,A,2,I,D-K),ji(w,A,3,I,D-V)}function qs(w){return(20091*w>>16)+w}function Wl(w,A,I,D){var V,K=0,J=s(16);for(V=0;4>V;++V){var re=w[A+0]+w[A+8],ae=w[A+0]-w[A+8],me=(35468*w[A+4]>>16)-qs(w[A+12]),Ce=qs(w[A+4])+(35468*w[A+12]>>16);J[K+0]=re+Ce,J[K+1]=ae+me,J[K+2]=ae-me,J[K+3]=re-Ce,K+=4,A++}for(V=K=0;4>V;++V)re=(w=J[K+0]+4)+J[K+8],ae=w-J[K+8],me=(35468*J[K+4]>>16)-qs(J[K+12]),ji(I,D,0,0,re+(Ce=qs(J[K+4])+(35468*J[K+12]>>16))),ji(I,D,1,0,ae+me),ji(I,D,2,0,ae-me),ji(I,D,3,0,re-Ce),K++,D+=32}function lu(w,A,I,D){var V=w[A+0]+4,K=35468*w[A+4]>>16,J=qs(w[A+4]),re=35468*w[A+1]>>16;Cc(I,D,0,V+J,w=qs(w[A+1]),re),Cc(I,D,1,V+K,w,re),Cc(I,D,2,V-K,w,re),Cc(I,D,3,V-J,w,re)}function Ec(w,A,I,D,V){Wl(w,A,I,D),V&&Wl(w,A+16,I,D+4)}function Hl(w,A,I,D){Ze(w,A+0,I,D,1),Ze(w,A+32,I,D+128,1)}function rh(w,A,I,D){var V;for(w=w[A+0]+4,V=0;4>V;++V)for(A=0;4>A;++A)ji(I,D,A,V,w)}function Gl(w,A,I,D){w[A+0]&&$t(w,A+0,I,D),w[A+16]&&$t(w,A+16,I,D+4),w[A+32]&&$t(w,A+32,I,D+128),w[A+48]&&$t(w,A+48,I,D+128+4)}function Vn(w,A,I,D){var V,K=s(16);for(V=0;4>V;++V){var J=w[A+0+V]+w[A+12+V],re=w[A+4+V]+w[A+8+V],ae=w[A+4+V]-w[A+8+V],me=w[A+0+V]-w[A+12+V];K[0+V]=J+re,K[8+V]=J-re,K[4+V]=me+ae,K[12+V]=me-ae}for(V=0;4>V;++V)J=(w=K[0+4*V]+3)+K[3+4*V],re=K[1+4*V]+K[2+4*V],ae=K[1+4*V]-K[2+4*V],me=w-K[3+4*V],I[D+0]=J+re>>3,I[D+16]=me+ae>>3,I[D+32]=J-re>>3,I[D+48]=me-ae>>3,D+=64}function ra(w,A,I){var D,V=A-32,K=is,J=255-w[V-1];for(D=0;D<I;++D){var re,ae=K,me=J+w[A-1];for(re=0;re<I;++re)w[A+re]=ae[me+w[V+re]];A+=32}}function ud(w,A){ra(w,A,4)}function cu(w,A){ra(w,A,8)}function ih(w,A){ra(w,A,16)}function ia(w,A){var I;for(I=0;16>I;++I)r(w,A+32*I,w,A-32,16)}function Yl(w,A){var I;for(I=16;0<I;--I)i(w,A,w[A-1],16),A+=32}function ul(w,A,I){var D;for(D=0;16>D;++D)i(A,I+32*D,w,16)}function Kl(w,A){var I,D=16;for(I=0;16>I;++I)D+=w[A-1+32*I]+w[A+I-32];ul(D>>5,w,A)}function Fr(w,A){var I,D=8;for(I=0;16>I;++I)D+=w[A-1+32*I];ul(D>>4,w,A)}function Ma(w,A){var I,D=8;for(I=0;16>I;++I)D+=w[A+I-32];ul(D>>4,w,A)}function sa(w,A){ul(128,w,A)}function Zt(w,A,I){return w+2*A+I+2>>2}function kc(w,A){var I,D=A-32;for(D=new Uint8Array([Zt(w[D-1],w[D+0],w[D+1]),Zt(w[D+0],w[D+1],w[D+2]),Zt(w[D+1],w[D+2],w[D+3]),Zt(w[D+2],w[D+3],w[D+4])]),I=0;4>I;++I)r(w,A+32*I,D,0,D.length)}function Oa(w,A){var I=w[A-1],D=w[A-1+32],V=w[A-1+64],K=w[A-1+96];Ge(w,A+0,16843009*Zt(w[A-1-32],I,D)),Ge(w,A+32,16843009*Zt(I,D,V)),Ge(w,A+64,16843009*Zt(D,V,K)),Ge(w,A+96,16843009*Zt(V,K,K))}function Da(w,A){var I,D=4;for(I=0;4>I;++I)D+=w[A+I-32]+w[A-1+32*I];for(D>>=3,I=0;4>I;++I)i(w,A+32*I,D,4)}function dd(w,A){var I=w[A-1+0],D=w[A-1+32],V=w[A-1+64],K=w[A-1-32],J=w[A+0-32],re=w[A+1-32],ae=w[A+2-32],me=w[A+3-32];w[A+0+96]=Zt(D,V,w[A-1+96]),w[A+1+96]=w[A+0+64]=Zt(I,D,V),w[A+2+96]=w[A+1+64]=w[A+0+32]=Zt(K,I,D),w[A+3+96]=w[A+2+64]=w[A+1+32]=w[A+0+0]=Zt(J,K,I),w[A+3+64]=w[A+2+32]=w[A+1+0]=Zt(re,J,K),w[A+3+32]=w[A+2+0]=Zt(ae,re,J),w[A+3+0]=Zt(me,ae,re)}function Fa(w,A){var I=w[A+1-32],D=w[A+2-32],V=w[A+3-32],K=w[A+4-32],J=w[A+5-32],re=w[A+6-32],ae=w[A+7-32];w[A+0+0]=Zt(w[A+0-32],I,D),w[A+1+0]=w[A+0+32]=Zt(I,D,V),w[A+2+0]=w[A+1+32]=w[A+0+64]=Zt(D,V,K),w[A+3+0]=w[A+2+32]=w[A+1+64]=w[A+0+96]=Zt(V,K,J),w[A+3+32]=w[A+2+64]=w[A+1+96]=Zt(K,J,re),w[A+3+64]=w[A+2+96]=Zt(J,re,ae),w[A+3+96]=Zt(re,ae,ae)}function uu(w,A){var I=w[A-1+0],D=w[A-1+32],V=w[A-1+64],K=w[A-1-32],J=w[A+0-32],re=w[A+1-32],ae=w[A+2-32],me=w[A+3-32];w[A+0+0]=w[A+1+64]=K+J+1>>1,w[A+1+0]=w[A+2+64]=J+re+1>>1,w[A+2+0]=w[A+3+64]=re+ae+1>>1,w[A+3+0]=ae+me+1>>1,w[A+0+96]=Zt(V,D,I),w[A+0+64]=Zt(D,I,K),w[A+0+32]=w[A+1+96]=Zt(I,K,J),w[A+1+32]=w[A+2+96]=Zt(K,J,re),w[A+2+32]=w[A+3+96]=Zt(J,re,ae),w[A+3+32]=Zt(re,ae,me)}function du(w,A){var I=w[A+0-32],D=w[A+1-32],V=w[A+2-32],K=w[A+3-32],J=w[A+4-32],re=w[A+5-32],ae=w[A+6-32],me=w[A+7-32];w[A+0+0]=I+D+1>>1,w[A+1+0]=w[A+0+64]=D+V+1>>1,w[A+2+0]=w[A+1+64]=V+K+1>>1,w[A+3+0]=w[A+2+64]=K+J+1>>1,w[A+0+32]=Zt(I,D,V),w[A+1+32]=w[A+0+96]=Zt(D,V,K),w[A+2+32]=w[A+1+96]=Zt(V,K,J),w[A+3+32]=w[A+2+96]=Zt(K,J,re),w[A+3+64]=Zt(J,re,ae),w[A+3+96]=Zt(re,ae,me)}function hu(w,A){var I=w[A-1+0],D=w[A-1+32],V=w[A-1+64],K=w[A-1+96];w[A+0+0]=I+D+1>>1,w[A+2+0]=w[A+0+32]=D+V+1>>1,w[A+2+32]=w[A+0+64]=V+K+1>>1,w[A+1+0]=Zt(I,D,V),w[A+3+0]=w[A+1+32]=Zt(D,V,K),w[A+3+32]=w[A+1+64]=Zt(V,K,K),w[A+3+64]=w[A+2+64]=w[A+0+96]=w[A+1+96]=w[A+2+96]=w[A+3+96]=K}function sh(w,A){var I=w[A-1+0],D=w[A-1+32],V=w[A-1+64],K=w[A-1+96],J=w[A-1-32],re=w[A+0-32],ae=w[A+1-32],me=w[A+2-32];w[A+0+0]=w[A+2+32]=I+J+1>>1,w[A+0+32]=w[A+2+64]=D+I+1>>1,w[A+0+64]=w[A+2+96]=V+D+1>>1,w[A+0+96]=K+V+1>>1,w[A+3+0]=Zt(re,ae,me),w[A+2+0]=Zt(J,re,ae),w[A+1+0]=w[A+3+32]=Zt(I,J,re),w[A+1+32]=w[A+3+64]=Zt(D,I,J),w[A+1+64]=w[A+3+96]=Zt(V,D,I),w[A+1+96]=Zt(K,V,D)}function sf(w,A){var I;for(I=0;8>I;++I)r(w,A+32*I,w,A-32,8)}function Wn(w,A){var I;for(I=0;8>I;++I)i(w,A,w[A-1],8),A+=32}function In(w,A,I){var D;for(D=0;8>D;++D)i(A,I+32*D,w,8)}function fo(w,A){var I,D=8;for(I=0;8>I;++I)D+=w[A+I-32]+w[A-1+32*I];In(D>>4,w,A)}function fu(w,A){var I,D=4;for(I=0;8>I;++I)D+=w[A+I-32];In(D>>3,w,A)}function Pc(w,A){var I,D=4;for(I=0;8>I;++I)D+=w[A-1+32*I];In(D>>3,w,A)}function hd(w,A){In(128,w,A)}function Xl(w,A,I){var D=w[A-I],V=w[A+0],K=3*(V-D)+vo[1020+w[A-2*I]-w[A+I]],J=Dc[112+(K+4>>3)];w[A-I]=is[255+D+Dc[112+(K+3>>3)]],w[A+0]=is[255+V-J]}function Nc(w,A,I,D){var V=w[A+0],K=w[A+I];return xs[255+w[A-2*I]-w[A-I]]>D||xs[255+K-V]>D}function Tc(w,A,I,D){return 4*xs[255+w[A-I]-w[A+0]]+xs[255+w[A-2*I]-w[A+I]]<=D}function fd(w,A,I,D,V){var K=w[A-3*I],J=w[A-2*I],re=w[A-I],ae=w[A+0],me=w[A+I],Ce=w[A+2*I],De=w[A+3*I];return 4*xs[255+re-ae]+xs[255+J-me]>D?0:xs[255+w[A-4*I]-K]<=V&&xs[255+K-J]<=V&&xs[255+J-re]<=V&&xs[255+De-Ce]<=V&&xs[255+Ce-me]<=V&&xs[255+me-ae]<=V}function fr(w,A,I,D){var V=2*D+1;for(D=0;16>D;++D)Tc(w,A+D,I,V)&&Xl(w,A+D,I)}function Vs(w,A,I,D){var V=2*D+1;for(D=0;16>D;++D)Tc(w,A+D*I,1,V)&&Xl(w,A+D*I,1)}function Ci(w,A,I,D){var V;for(V=3;0<V;--V)fr(w,A+=4*I,I,D)}function pd(w,A,I,D){var V;for(V=3;0<V;--V)Vs(w,A+=4,I,D)}function po(w,A,I,D,V,K,J,re){for(K=2*K+1;0<V--;){if(fd(w,A,I,K,J))if(Nc(w,A,I,re))Xl(w,A,I);else{var ae=w,me=A,Ce=I,De=ae[me-2*Ce],Fe=ae[me-Ce],Ie=ae[me+0],nt=ae[me+Ce],He=ae[me+2*Ce],Ee=27*(Qe=vo[1020+3*(Ie-Fe)+vo[1020+De-nt]])+63>>7,Pe=18*Qe+63>>7,Qe=9*Qe+63>>7;ae[me-3*Ce]=is[255+ae[me-3*Ce]+Qe],ae[me-2*Ce]=is[255+De+Pe],ae[me-Ce]=is[255+Fe+Ee],ae[me+0]=is[255+Ie-Ee],ae[me+Ce]=is[255+nt-Pe],ae[me+2*Ce]=is[255+He-Qe]}A+=D}}function Er(w,A,I,D,V,K,J,re){for(K=2*K+1;0<V--;){if(fd(w,A,I,K,J))if(Nc(w,A,I,re))Xl(w,A,I);else{var ae=w,me=A,Ce=I,De=ae[me-Ce],Fe=ae[me+0],Ie=ae[me+Ce],nt=Dc[112+((He=3*(Fe-De))+4>>3)],He=Dc[112+(He+3>>3)],Ee=nt+1>>1;ae[me-2*Ce]=is[255+ae[me-2*Ce]+Ee],ae[me-Ce]=is[255+De+He],ae[me+0]=is[255+Fe-nt],ae[me+Ce]=is[255+Ie-Ee]}A+=D}}function Lc(w,A,I,D,V,K){po(w,A,I,1,16,D,V,K)}function ai(w,A,I,D,V,K){po(w,A,1,I,16,D,V,K)}function dl(w,A,I,D,V,K){var J;for(J=3;0<J;--J)Er(w,A+=4*I,I,1,16,D,V,K)}function hl(w,A,I,D,V,K){var J;for(J=3;0<J;--J)Er(w,A+=4,1,I,16,D,V,K)}function Zl(w,A,I,D,V,K,J,re){po(w,A,V,1,8,K,J,re),po(I,D,V,1,8,K,J,re)}function pu(w,A,I,D,V,K,J,re){po(w,A,1,V,8,K,J,re),po(I,D,1,V,8,K,J,re)}function gi(w,A,I,D,V,K,J,re){Er(w,A+4*V,V,1,8,K,J,re),Er(I,D+4*V,V,1,8,K,J,re)}function mu(w,A,I,D,V,K,J,re){Er(w,A+4,1,V,8,K,J,re),Er(I,D+4,1,V,8,K,J,re)}function ti(){this.ba=new pi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Sr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function oa(){this.ua=0,this.Wa=new we,this.vb=new we,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ne,this.yc=new z}function gu(){this.xb=this.a=0,this.l=new au,this.ca=new pi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new oa,this.ab=0,this.gc=o(4,Rc),this.Oc=0}function Ql(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new au,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yn(w,A,I,D,V,K,J){for(w=w==null?0:w[A+0],A=0;A<J;++A)V[K+A]=w+I[D+A]&255,w=V[K+A]}function To(w,A,I,D,V,K,J){var re;if(w==null)Yn(null,null,I,D,V,K,J);else for(re=0;re<J;++re)V[K+re]=w[A+re]+I[D+re]&255}function Ba(w,A,I,D,V,K,J){if(w==null)Yn(null,null,I,D,V,K,J);else{var re,ae=w[A+0],me=ae,Ce=ae;for(re=0;re<J;++re)me=Ce+(ae=w[A+re])-me,Ce=I[D+re]+(-256&me?0>me?0:255:me)&255,me=ae,V[K+re]=Ce}}function md(w,A,I,D){var V=A.width,K=A.o;if(e(w!=null&&A!=null),0>I||0>=D||I+D>K)return null;if(!w.Cc){if(w.ga==null){var J;if(w.ga=new Ql,(J=w.ga==null)||(J=A.width*A.o,e(w.Gb.length==0),w.Gb=s(J),w.Uc=0,w.Gb==null?J=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,J=1),J=!J),!J){J=w.ga;var re=w.Fa,ae=w.P,me=w.qc,Ce=w.mb,De=w.nb,Fe=ae+1,Ie=me-1,nt=J.l;if(e(re!=null&&Ce!=null&&A!=null),ui[0]=null,ui[1]=Yn,ui[2]=To,ui[3]=Ba,J.ca=Ce,J.tb=De,J.c=A.width,J.i=A.height,e(0<J.c&&0<J.i),1>=me)A=0;else if(J.$a=re[ae+0]>>0&3,J.Z=re[ae+0]>>2&3,J.Lc=re[ae+0]>>4&3,ae=re[ae+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||ae)A=0;else if(nt.put=zs,nt.ac=ei,nt.bc=lo,nt.ma=J,nt.width=A.width,nt.height=A.height,nt.Da=A.Da,nt.v=A.v,nt.va=A.va,nt.j=A.j,nt.o=A.o,J.$a)e:{e(J.$a==1),A=gs();t:for(;;){if(A==null){A=0;break e}if(e(J!=null),J.mc=A,A.c=J.c,A.i=J.i,A.l=J.l,A.l.ma=J,A.l.width=J.c,A.l.height=J.i,A.a=0,X(A.m,re,Fe,Ie),!na(J.c,J.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&ta(A.s)?(J.ic=1,re=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(re),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(J.ic=0,A=ol(A,J.c)),!A))break t;A=1;break e}J.mc=null,A=0}else A=Ie>=J.c*J.i;J=!A}if(J)return null;w.ga.Lc!=1?w.Ga=0:D=K-I}e(w.ga!=null),e(I+D<=K);e:{if(A=(re=w.ga).c,K=re.l.o,re.$a==0){if(Fe=w.rc,Ie=w.Vc,nt=w.Fa,ae=w.P+1+I*A,me=w.mb,Ce=w.nb+I*A,e(ae<=w.P+w.qc),re.Z!=0)for(e(ui[re.Z]!=null),J=0;J<D;++J)ui[re.Z](Fe,Ie,nt,ae,me,Ce,A),Fe=me,Ie=Ce,Ce+=A,ae+=A;else for(J=0;J<D;++J)r(me,Ce,nt,ae,A),Fe=me,Ie=Ce,Ce+=A,ae+=A;w.rc=Fe,w.Vc=Ie}else{if(e(re.mc!=null),A=I+D,e((J=re.mc)!=null),e(A<=J.i),J.C>=A)A=1;else if(re.ic||Me(),re.ic){re=J.V,Fe=J.Ba,Ie=J.c;var He=J.i,Ee=(nt=1,ae=J.$/Ie,me=J.$%Ie,Ce=J.m,De=J.s,J.$),Pe=Ie*He,Qe=Ie*A,Je=De.wc,et=Ee<Qe?Cr(De,me,ae):null;e(Ee<=Pe),e(A<=He),e(ta(De));t:for(;;){for(;!Ce.h&&Ee<Qe;){if(me&Je||(et=Cr(De,me,ae)),e(et!=null),pe(Ce),256>(He=Si(et.G[0],et.H[0],Ce)))re[Fe+Ee]=He,++Ee,++me>=Ie&&(me=0,++ae<=A&&!(ae%16)&&uo(J,ae));else{if(!(280>He)){nt=0;break t}He=Ii(He-256,Ce);var _t,xt=Si(et.G[4],et.H[4],Ce);if(pe(Ce),!(Ee>=(xt=Qi(Ie,xt=Ii(xt,Ce)))&&Pe-Ee>=He)){nt=0;break t}for(_t=0;_t<He;++_t)re[Fe+Ee+_t]=re[Fe+Ee+_t-xt];for(Ee+=He,me+=He;me>=Ie;)me-=Ie,++ae<=A&&!(ae%16)&&uo(J,ae);Ee<Qe&&me&Je&&(et=Cr(De,me,ae))}e(Ce.h==Q(Ce))}uo(J,ae>A?A:ae);break t}!nt||Ce.h&&Ee<Pe?(nt=0,J.a=Ce.h?5:3):J.$=Ee,A=nt}else A=mi(J,J.V,J.Ba,J.c,J.i,A,$l);if(!A){D=0;break e}}I+D>=K&&(w.Cc=1),D=1}if(!D)return null;if(w.Cc&&((D=w.ga)!=null&&(D.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+I*V}function P(w,A,I,D,V,K){for(;0<V--;){var J,re=w,ae=A+(I?1:0),me=w,Ce=A+(I?0:3);for(J=0;J<D;++J){var De=me[Ce+4*J];De!=255&&(De*=32897,re[ae+4*J+0]=re[ae+4*J+0]*De>>23,re[ae+4*J+1]=re[ae+4*J+1]*De>>23,re[ae+4*J+2]=re[ae+4*J+2]*De>>23)}A+=K}}function H(w,A,I,D,V){for(;0<D--;){var K;for(K=0;K<I;++K){var J=w[A+2*K+0],re=15&(me=w[A+2*K+1]),ae=4369*re,me=(240&me|me>>4)*ae>>16;w[A+2*K+0]=(240&J|J>>4)*ae>>16&240|(15&J|J<<4)*ae>>16>>4&15,w[A+2*K+1]=240&me|re}A+=V}}function ye(w,A,I,D,V,K,J,re){var ae,me,Ce=255;for(me=0;me<V;++me){for(ae=0;ae<D;++ae){var De=w[A+ae];K[J+4*ae]=De,Ce&=De}A+=I,J+=re}return Ce!=255}function Ae(w,A,I,D,V){var K;for(K=0;K<V;++K)I[D+K]=w[A+K]>>8}function Me(){ws=P,sr=H,lr=ye,Wr=Ae}function Xe(w,A,I){q[w]=function(D,V,K,J,re,ae,me,Ce,De,Fe,Ie,nt,He,Ee,Pe,Qe,Je){var et,_t=Je-1>>1,xt=re[ae+0]|me[Ce+0]<<16,zt=De[Fe+0]|Ie[nt+0]<<16;e(D!=null);var yt=3*xt+zt+131074>>2;for(A(D[V+0],255&yt,yt>>16,He,Ee),K!=null&&(yt=3*zt+xt+131074>>2,A(K[J+0],255&yt,yt>>16,Pe,Qe)),et=1;et<=_t;++et){var Kn=re[ae+et]|me[Ce+et]<<16,Hn=De[Fe+et]|Ie[nt+et]<<16,Fn=xt+Kn+zt+Hn+524296,dn=Fn+2*(Kn+zt)>>3;yt=dn+xt>>1,xt=(Fn=Fn+2*(xt+Hn)>>3)+Kn>>1,A(D[V+2*et-1],255&yt,yt>>16,He,Ee+(2*et-1)*I),A(D[V+2*et-0],255&xt,xt>>16,He,Ee+(2*et-0)*I),K!=null&&(yt=Fn+zt>>1,xt=dn+Hn>>1,A(K[J+2*et-1],255&yt,yt>>16,Pe,Qe+(2*et-1)*I),A(K[J+2*et+0],255&xt,xt>>16,Pe,Qe+(2*et+0)*I)),xt=Kn,zt=Hn}1&Je||(yt=3*xt+zt+131074>>2,A(D[V+Je-1],255&yt,yt>>16,He,Ee+(Je-1)*I),K!=null&&(yt=3*zt+xt+131074>>2,A(K[J+Je-1],255&yt,yt>>16,Pe,Qe+(Je-1)*I)))}}function ot(){Ss[gd]=oe,Ss[Oo]=ua,Ss[rc]=Nu,Ss[ic]=Oi,Ss[vd]=yn,Ss[pr]=xd,Ss[ah]=af,Ss[gl]=ua,Ss[$a]=Oi,Ss[Fc]=yn,Ss[yd]=xd}function Et(w){return w&-16384?0>w?0:255:w>>oc}function Ht(w,A){return Et((19077*w>>8)+(26149*A>>8)-14234)}function pn(w,A,I){return Et((19077*w>>8)-(6419*A>>8)-(13320*I>>8)+8708)}function rn(w,A){return Et((19077*w>>8)+(33050*A>>8)-17685)}function Tn(w,A,I,D,V){D[V+0]=Ht(w,I),D[V+1]=pn(w,A,I),D[V+2]=rn(w,A)}function Mr(w,A,I,D,V){D[V+0]=rn(w,A),D[V+1]=pn(w,A,I),D[V+2]=Ht(w,I)}function $r(w,A,I,D,V){var K=pn(w,A,I);A=K<<3&224|rn(w,A)>>3,D[V+0]=248&Ht(w,I)|K>>5,D[V+1]=A}function qr(w,A,I,D,V){var K=240&rn(w,A)|15;D[V+0]=240&Ht(w,I)|pn(w,A,I)>>4,D[V+1]=K}function Ei(w,A,I,D,V){D[V+0]=255,Tn(w,A,I,D,V+1)}function ki(w,A,I,D,V){Mr(w,A,I,D,V),D[V+3]=255}function Lo(w,A,I,D,V){Tn(w,A,I,D,V),D[V+3]=255}function kr(w,A){return 0>w?0:w>A?A:w}function Ws(w,A,I){q[w]=function(D,V,K,J,re,ae,me,Ce,De){for(var Fe=Ce+(-2&De)*I;Ce!=Fe;)A(D[V+0],K[J+0],re[ae+0],me,Ce),A(D[V+1],K[J+0],re[ae+0],me,Ce+I),V+=2,++J,++ae,Ce+=2*I;1&De&&A(D[V+0],K[J+0],re[ae+0],me,Ce)}}function Ro(w,A,I){return I==0?w==0?A==0?6:5:A==0?4:0:I}function vu(w,A,I,D,V){switch(w>>>30){case 3:Ze(A,I,D,V,0);break;case 2:Oe(A,I,D,V);break;case 1:$t(A,I,D,V)}}function Ic(w,A){var I,D,V=A.M,K=A.Nb,J=w.oc,re=w.pc+40,ae=w.oc,me=w.pc+584,Ce=w.oc,De=w.pc+600;for(I=0;16>I;++I)J[re+32*I-1]=129;for(I=0;8>I;++I)ae[me+32*I-1]=129,Ce[De+32*I-1]=129;for(0<V?J[re-1-32]=ae[me-1-32]=Ce[De-1-32]=129:(i(J,re-32-1,127,21),i(ae,me-32-1,127,9),i(Ce,De-32-1,127,9)),D=0;D<w.za;++D){var Fe=A.ya[A.aa+D];if(0<D){for(I=-1;16>I;++I)r(J,re+32*I-4,J,re+32*I+12,4);for(I=-1;8>I;++I)r(ae,me+32*I-4,ae,me+32*I+4,4),r(Ce,De+32*I-4,Ce,De+32*I+4,4)}var Ie=w.Gd,nt=w.Hd+D,He=Fe.ad,Ee=Fe.Hc;if(0<V&&(r(J,re-32,Ie[nt].y,0,16),r(ae,me-32,Ie[nt].f,0,8),r(Ce,De-32,Ie[nt].ea,0,8)),Fe.Za){var Pe=J,Qe=re-32+16;for(0<V&&(D>=w.za-1?i(Pe,Qe,Ie[nt].y[15],4):r(Pe,Qe,Ie[nt+1].y,0,4)),I=0;4>I;I++)Pe[Qe+128+I]=Pe[Qe+256+I]=Pe[Qe+384+I]=Pe[Qe+0+I];for(I=0;16>I;++I,Ee<<=2)Pe=J,Qe=re+lf[I],Do[Fe.Ob[I]](Pe,Qe),vu(Ee,He,16*+I,Pe,Qe)}else if(Pe=Ro(D,V,Fe.Ob[0]),_s[Pe](J,re),Ee!=0)for(I=0;16>I;++I,Ee<<=2)vu(Ee,He,16*+I,J,re+lf[I]);for(I=Fe.Gc,Pe=Ro(D,V,Fe.Dd),Ys[Pe](ae,me),Ys[Pe](Ce,De),Ee=He,Pe=ae,Qe=me,255&(Fe=I>>0)&&(170&Fe?At(Ee,256,Pe,Qe):gn(Ee,256,Pe,Qe)),Fe=Ce,Ee=De,255&(I>>=8)&&(170&I?At(He,320,Fe,Ee):gn(He,320,Fe,Ee)),V<w.Ub-1&&(r(Ie[nt].y,0,J,re+480,16),r(Ie[nt].f,0,ae,me+224,8),r(Ie[nt].ea,0,Ce,De+224,8)),I=8*K*w.B,Ie=w.sa,nt=w.ta+16*D+16*K*w.R,He=w.qa,Fe=w.ra+8*D+I,Ee=w.Ha,Pe=w.Ia+8*D+I,I=0;16>I;++I)r(Ie,nt+I*w.R,J,re+32*I,16);for(I=0;8>I;++I)r(He,Fe+I*w.B,ae,me+32*I,8),r(Ee,Pe+I*w.B,Ce,De+32*I,8)}}function jc(w,A,I,D,V,K,J,re,ae){var me=[0],Ce=[0],De=0,Fe=ae!=null?ae.kd:0,Ie=ae??new Jl;if(w==null||12>I)return 7;Ie.data=w,Ie.w=A,Ie.ha=I,A=[A],I=[I],Ie.gb=[Ie.gb];e:{var nt=A,He=I,Ee=Ie.gb;if(e(w!=null),e(He!=null),e(Ee!=null),Ee[0]=0,12<=He[0]&&!t(w,nt[0],"RIFF")){if(t(w,nt[0]+8,"WEBP")){Ee=3;break e}var Pe=ht(w,nt[0]+4);if(12>Pe||4294967286<Pe){Ee=3;break e}if(Fe&&Pe>He[0]-8){Ee=7;break e}Ee[0]=Pe,nt[0]+=12,He[0]-=12}Ee=0}if(Ee!=0)return Ee;for(Pe=0<Ie.gb[0],I=I[0];;){e:{var Qe=w;He=A,Ee=I;var Je=me,et=Ce,_t=nt=[0];if((yt=De=[De])[0]=0,8>Ee[0])Ee=7;else{if(!t(Qe,He[0],"VP8X")){if(ht(Qe,He[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var xt=ht(Qe,He[0]+8),zt=1+at(Qe,He[0]+12);if(2147483648<=zt*(Qe=1+at(Qe,He[0]+15))){Ee=3;break e}_t!=null&&(_t[0]=xt),Je!=null&&(Je[0]=zt),et!=null&&(et[0]=Qe),He[0]+=18,Ee[0]-=18,yt[0]=1}Ee=0}}if(De=De[0],nt=nt[0],Ee!=0)return Ee;if(He=!!(2&nt),!Pe&&De)return 3;if(K!=null&&(K[0]=!!(16&nt)),J!=null&&(J[0]=He),re!=null&&(re[0]=0),J=me[0],nt=Ce[0],De&&He&&ae==null){Ee=0;break}if(4>I){Ee=7;break}if(Pe&&De||!Pe&&!De&&!t(w,A[0],"ALPH")){I=[I],Ie.na=[Ie.na],Ie.P=[Ie.P],Ie.Sa=[Ie.Sa];e:{xt=w,Ee=A,Pe=I;var yt=Ie.gb;Je=Ie.na,et=Ie.P,_t=Ie.Sa,zt=22,e(xt!=null),e(Pe!=null),Qe=Ee[0];var Kn=Pe[0];for(e(Je!=null),e(_t!=null),Je[0]=null,et[0]=null,_t[0]=0;;){if(Ee[0]=Qe,Pe[0]=Kn,8>Kn){Ee=7;break e}var Hn=ht(xt,Qe+4);if(4294967286<Hn){Ee=3;break e}var Fn=8+Hn+1&-2;if(zt+=Fn,0<yt&&zt>yt){Ee=3;break e}if(!t(xt,Qe,"VP8 ")||!t(xt,Qe,"VP8L")){Ee=0;break e}if(Kn[0]<Fn){Ee=7;break e}t(xt,Qe,"ALPH")||(Je[0]=xt,et[0]=Qe+8,_t[0]=Hn),Qe+=Fn,Kn-=Fn}}if(I=I[0],Ie.na=Ie.na[0],Ie.P=Ie.P[0],Ie.Sa=Ie.Sa[0],Ee!=0)break}I=[I],Ie.Ja=[Ie.Ja],Ie.xa=[Ie.xa];e:if(yt=w,Ee=A,Pe=I,Je=Ie.gb[0],et=Ie.Ja,_t=Ie.xa,xt=Ee[0],Qe=!t(yt,xt,"VP8 "),zt=!t(yt,xt,"VP8L"),e(yt!=null),e(Pe!=null),e(et!=null),e(_t!=null),8>Pe[0])Ee=7;else{if(Qe||zt){if(yt=ht(yt,xt+4),12<=Je&&yt>Je-12){Ee=3;break e}if(Fe&&yt>Pe[0]-8){Ee=7;break e}et[0]=yt,Ee[0]+=8,Pe[0]-=8,_t[0]=zt}else _t[0]=5<=Pe[0]&&yt[xt+0]==47&&!(yt[xt+4]>>5),et[0]=Pe[0];Ee=0}if(I=I[0],Ie.Ja=Ie.Ja[0],Ie.xa=Ie.xa[0],A=A[0],Ee!=0)break;if(4294967286<Ie.Ja)return 3;if(re==null||He||(re[0]=Ie.xa?2:1),J=[J],nt=[nt],Ie.xa){if(5>I){Ee=7;break}re=J,Fe=nt,He=K,w==null||5>I?w=0:5<=I&&w[A+0]==47&&!(w[A+4]>>5)?(Pe=[0],yt=[0],Je=[0],X(et=new F,w,A,I),Wt(et,Pe,yt,Je)?(re!=null&&(re[0]=Pe[0]),Fe!=null&&(Fe[0]=yt[0]),He!=null&&(He[0]=Je[0]),w=1):w=0):w=0}else{if(10>I){Ee=7;break}re=nt,w==null||10>I||!ld(w,A+3,I-3)?w=0:(Fe=w[A+0]|w[A+1]<<8|w[A+2]<<16,He=16383&(w[A+7]<<8|w[A+6]),w=16383&(w[A+9]<<8|w[A+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=Ie.Ja||!He||!w?w=0:(J&&(J[0]=He),re&&(re[0]=w),w=1))}if(!w||(J=J[0],nt=nt[0],De&&(me[0]!=J||Ce[0]!=nt)))return 3;ae!=null&&(ae[0]=Ie,ae.offset=A-ae.w,e(4294967286>A-ae.w),e(ae.offset==ae.ha-I));break}return Ee==0||Ee==7&&De&&ae==null?(K!=null&&(K[0]|=Ie.na!=null&&0<Ie.na.length),D!=null&&(D[0]=J),V!=null&&(V[0]=nt),0):Ee}function yu(w,A,I){var D=A.width,V=A.height,K=0,J=0,re=D,ae=V;if(A.Da=w!=null&&0<w.Da,A.Da&&(re=w.cd,ae=w.bd,K=w.v,J=w.j,11>I||(K&=-2,J&=-2),0>K||0>J||0>=re||0>=ae||K+re>D||J+ae>V))return 0;if(A.v=K,A.j=J,A.va=K+re,A.o=J+ae,A.U=re,A.T=ae,A.da=w!=null&&0<w.da,A.da){if(!Mt(re,ae,I=[w.ib],K=[w.hb]))return 0;A.ib=I[0],A.hb=K[0]}return A.ob=w!=null&&w.ob,A.Kb=w==null||!w.Sd,A.da&&(A.ob=A.ib<3*D/4&&A.hb<3*V/4,A.Kb=0),1}function bu(w){if(w==null)return 2;if(11>w.S){var A=w.f.RGBA;A.fb+=(w.height-1)*A.A,A.A=-A.A}else A=w.f.kb,w=w.height,A.O+=(w-1)*A.fa,A.fa=-A.fa,A.N+=(w-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(w-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(w-1)*A.lb,A.lb=-A.lb);return 0}function Mc(w,A,I,D){if(D==null||0>=w||0>=A)return 2;if(I!=null){if(I.Da){var V=I.cd,K=I.bd,J=-2&I.v,re=-2&I.j;if(0>J||0>re||0>=V||0>=K||J+V>w||re+K>A)return 2;w=V,A=K}if(I.da){if(!Mt(w,A,V=[I.ib],K=[I.hb]))return 2;w=V[0],A=K[0]}}D.width=w,D.height=A;e:{var ae=D.width,me=D.height;if(w=D.S,0>=ae||0>=me||!(w>=gd&&13>w))w=2;else{if(0>=D.Rd&&D.sd==null){J=K=V=A=0;var Ce=(re=ae*_d[w])*me;if(11>w||(K=(me+1)/2*(A=(ae+1)/2),w==12&&(J=(V=ae)*me)),(me=s(Ce+2*K+J))==null){w=1;break e}D.sd=me,11>w?((ae=D.f.RGBA).eb=me,ae.fb=0,ae.A=re,ae.size=Ce):((ae=D.f.kb).y=me,ae.O=0,ae.fa=re,ae.Fd=Ce,ae.f=me,ae.N=0+Ce,ae.Ab=A,ae.Cd=K,ae.ea=me,ae.W=0+Ce+K,ae.Db=A,ae.Ed=K,w==12&&(ae.F=me,ae.J=0+Ce+2*K),ae.Tc=J,ae.lb=V)}if(A=1,V=D.S,K=D.width,J=D.height,V>=gd&&13>V)if(11>V)w=D.f.RGBA,A&=(re=Math.abs(w.A))*(J-1)+K<=w.size,A&=re>=K*_d[V],A&=w.eb!=null;else{w=D.f.kb,re=(K+1)/2,Ce=(J+1)/2,ae=Math.abs(w.fa),me=Math.abs(w.Ab);var De=Math.abs(w.Db),Fe=Math.abs(w.lb),Ie=Fe*(J-1)+K;A&=ae*(J-1)+K<=w.Fd,A&=me*(Ce-1)+re<=w.Cd,A=(A&=De*(Ce-1)+re<=w.Ed)&ae>=K&me>=re&De>=re,A&=w.y!=null,A&=w.f!=null,A&=w.ea!=null,V==12&&(A&=Fe>=K,A&=Ie<=w.Tc,A&=w.F!=null)}else A=0;w=A?0:2}}return w!=0||I!=null&&I.fd&&(w=bu(D)),w}var Vr=64,aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wu=24,xu=32,ec=8,es=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];mt("Predictor0","PredictorAdd0"),q.Predictor0=function(){return 4278190080},q.Predictor1=function(w){return w},q.Predictor2=function(w,A,I){return A[I+0]},q.Predictor3=function(w,A,I){return A[I+1]},q.Predictor4=function(w,A,I){return A[I-1]},q.Predictor5=function(w,A,I){return bt(bt(w,A[I+1]),A[I+0])},q.Predictor6=function(w,A,I){return bt(w,A[I-1])},q.Predictor7=function(w,A,I){return bt(w,A[I+0])},q.Predictor8=function(w,A,I){return bt(A[I-1],A[I+0])},q.Predictor9=function(w,A,I){return bt(A[I+0],A[I+1])},q.Predictor10=function(w,A,I){return bt(bt(w,A[I-1]),bt(A[I+0],A[I+1]))},q.Predictor11=function(w,A,I){var D=A[I+0];return 0>=Xt(D>>24&255,w>>24&255,(A=A[I-1])>>24&255)+Xt(D>>16&255,w>>16&255,A>>16&255)+Xt(D>>8&255,w>>8&255,A>>8&255)+Xt(255&D,255&w,255&A)?D:w},q.Predictor12=function(w,A,I){var D=A[I+0];return(Ot((w>>24&255)+(D>>24&255)-((A=A[I-1])>>24&255))<<24|Ot((w>>16&255)+(D>>16&255)-(A>>16&255))<<16|Ot((w>>8&255)+(D>>8&255)-(A>>8&255))<<8|Ot((255&w)+(255&D)-(255&A)))>>>0},q.Predictor13=function(w,A,I){var D=A[I-1];return(Qt((w=bt(w,A[I+0]))>>24&255,D>>24&255)<<24|Qt(w>>16&255,D>>16&255)<<16|Qt(w>>8&255,D>>8&255)<<8|Qt(w>>0&255,D>>0&255))>>>0};var Hs=q.PredictorAdd0;q.PredictorAdd1=un,mt("Predictor2","PredictorAdd2"),mt("Predictor3","PredictorAdd3"),mt("Predictor4","PredictorAdd4"),mt("Predictor5","PredictorAdd5"),mt("Predictor6","PredictorAdd6"),mt("Predictor7","PredictorAdd7"),mt("Predictor8","PredictorAdd8"),mt("Predictor9","PredictorAdd9"),mt("Predictor10","PredictorAdd10"),mt("Predictor11","PredictorAdd11"),mt("Predictor12","PredictorAdd12"),mt("Predictor13","PredictorAdd13");var Io=q.PredictorAdd2;Pt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),Pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var oh,vs=q.ColorIndexInverseTransform,_u=q.MapARGB,za=q.VP8LColorIndexInverseTransformAlpha,ts=q.MapAlpha,la=q.VP8LPredictorsAdd=[];la.length=16,(q.VP8LPredictors=[]).length=16,(q.VP8LPredictorsAdd_C=[]).length=16,(q.VP8LPredictors_C=[]).length=16;var tc,ys,ns,nc,fl,Gs,Re,Ze,Oe,At,$t,gn,Pr,Qn,pl,Oc,Pi,rs,ml,bs,jo,Mo,jn,Mi,ws,sr,lr,Wr,li=s(511),mo=s(2041),go=s(225),Ua=s(767),Su=0,vo=mo,Dc=go,is=Ua,xs=li,gd=0,Oo=1,rc=2,ic=3,vd=4,pr=5,ah=6,gl=7,$a=8,Fc=9,yd=10,Au=[2,3,7],lh=[3,3,11],Bc=[280,256,256,256,40],ci=[0,1,1,1,0],ss=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bd=8,Cu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ca=null,wd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Eu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ku=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ch=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Pu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],of=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_s=[],Do=[],Ys=[],qa=1,vl=2,ui=[],Ss=[];Xe("UpsampleRgbLinePair",Tn,3),Xe("UpsampleBgrLinePair",Mr,3),Xe("UpsampleRgbaLinePair",Lo,4),Xe("UpsampleBgraLinePair",ki,4),Xe("UpsampleArgbLinePair",Ei,4),Xe("UpsampleRgba4444LinePair",qr,2),Xe("UpsampleRgb565LinePair",$r,2);var oe=q.UpsampleRgbLinePair,Nu=q.UpsampleBgrLinePair,ua=q.UpsampleRgbaLinePair,Oi=q.UpsampleBgraLinePair,yn=q.UpsampleArgbLinePair,xd=q.UpsampleRgba4444LinePair,af=q.UpsampleRgb565LinePair,yl=16,Di=1<<yl-1,cr=-227,hr=482,oc=6,Fi=0,Ks=s(256),As=s(256),Tu=s(256),Xs=s(256),uh=s(hr-cr),wp=s(hr-cr);Ws("YuvToRgbRow",Tn,3),Ws("YuvToBgrRow",Mr,3),Ws("YuvToRgbaRow",Lo,4),Ws("YuvToBgraRow",ki,4),Ws("YuvToArgbRow",Ei,4),Ws("YuvToRgba4444Row",qr,2),Ws("YuvToRgb565Row",$r,2);var lf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cs=[0,2,8],xp=[8,7,6,4,4,2,2,2,1,1,1,1],bl=1;this.WebPDecodeRGBA=function(w,A,I,D,V){var K=Oo,J=new ti,re=new pi;J.ba=re,re.S=K,re.width=[re.width],re.height=[re.height];var ae=re.width,me=re.height,Ce=new Ri;if(Ce==null||w==null)var De=2;else e(Ce!=null),De=jc(w,A,I,Ce.width,Ce.height,Ce.Pd,Ce.Qd,Ce.format,null);if(De!=0?ae=0:(ae!=null&&(ae[0]=Ce.width[0]),me!=null&&(me[0]=Ce.height[0]),ae=1),ae){re.width=re.width[0],re.height=re.height[0],D!=null&&(D[0]=re.width),V!=null&&(V[0]=re.height);e:{if(D=new au,(V=new Jl).data=w,V.w=A,V.ha=I,V.kd=1,A=[0],e(V!=null),((w=jc(V.data,V.w,V.ha,null,null,null,A,null,V))==0||w==7)&&A[0]&&(w=4),(A=w)==0){if(e(J!=null),D.data=V.data,D.w=V.w+V.offset,D.ha=V.ha-V.offset,D.put=zs,D.ac=ei,D.bc=lo,D.ma=J,V.xa){if((w=gs())==null){J=1;break e}if(function(Fe,Ie){var nt=[0],He=[0],Ee=[0];t:for(;;){if(Fe==null)return 0;if(Ie==null)return Fe.a=2,0;if(Fe.l=Ie,Fe.a=0,X(Fe.m,Ie.data,Ie.w,Ie.ha),!Wt(Fe.m,nt,He,Ee)){Fe.a=3;break t}if(Fe.xb=vl,Ie.width=nt[0],Ie.height=He[0],!na(nt[0],He[0],1,Fe,null))break t;return 1}return e(Fe.a!=0),0}(w,D)){if(D=(A=Mc(D.width,D.height,J.Oa,J.ba))==0){t:{D=w;n:for(;;){if(D==null){D=0;break t}if(e(D.s.yc!=null),e(D.s.Ya!=null),e(0<D.s.Wb),e((I=D.l)!=null),e((V=I.ma)!=null),D.xb!=0){if(D.ca=V.ba,D.tb=V.tb,e(D.ca!=null),!yu(V.Oa,I,ic)){D.a=2;break n}if(!ol(D,I.width)||I.da)break n;if((I.da||Un(D.ca.S))&&Me(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&Me()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!Ct(D.s.vb,D.s.Wa.Xa)){D.a=1;break n}D.xb=0}if(!mi(D,D.V,D.Ba,D.c,D.i,I.o,Ia))break n;V.Dc=D.Ma,D=1;break t}e(D.a!=0),D=0}D=!D}D&&(A=w.a)}else A=w.a}else{if((w=new ho)==null){J=1;break e}if(w.Fa=V.na,w.P=V.P,w.qc=V.Sa,cd(w,D)){if((A=Mc(D.width,D.height,J.Oa,J.ba))==0){if(w.Aa=0,I=J.Oa,e((V=w)!=null),I!=null){if(0<(ae=0>(ae=I.Md)?0:100<ae?255:255*ae/100)){for(me=Ce=0;4>me;++me)12>(De=V.pb[me]).lc&&(De.ia=ae*xp[0>De.lc?0:De.lc]>>3),Ce|=De.ia;Ce&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=I.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}Vl(w,D)||(A=w.a)}}else A=w.a}A==0&&J.Oa!=null&&J.Oa.fd&&(A=bu(J.ba))}J=A}K=J!=0?null:11>K?re.f.RGBA.eb:re.f.kb.y}else K=null;return K};var _d=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(q,ie){for(var ve="",$=0;$<4;$++)ve+=String.fromCharCode(q[ie++]);return ve}function h(q,ie){return(q[ie+0]<<0|q[ie+1]<<8|q[ie+2]<<16)>>>0}function p(q,ie){return(q[ie+0]<<0|q[ie+1]<<8|q[ie+2]<<16|q[ie+3]<<24)>>>0}new c;var m=[0],b=[0],_=[],x=new c,k=n,E=function(q,ie){var ve={},$=0,z=!1,le=0,ne=0;if(ve.frames=[],!function(te,Q,ce,pe){for(var ge=0;ge<pe;ge++)if(te[Q+ge]!=ce.charCodeAt(ge))return!0;return!1}(q,ie,"RIFF",4)){for(p(q,ie+=4),ie+=8;ie<q.length;){var ee=u(q,ie),G=p(q,ie+=4);ie+=4;var he=G+(1&G);switch(ee){case"VP8 ":case"VP8L":ve.frames[$]===void 0&&(ve.frames[$]={}),(ue=ve.frames[$]).src_off=z?ne:ie-8,ue.src_size=le+G+8,$++,z&&(z=!1,le=0,ne=0);break;case"VP8X":(ue=ve.header={}).feature_flags=q[ie];var X=ie+4;ue.canvas_width=1+h(q,X),X+=3,ue.canvas_height=1+h(q,X),X+=3;break;case"ALPH":z=!0,le=he+8,ne=ie-8;break;case"ANIM":(ue=ve.header).bgcolor=p(q,ie),X=ie+4,ue.loop_count=(se=q)[(F=X)+0]<<0|se[F+1]<<8,X+=2;break;case"ANMF":var fe,ue;(ue=ve.frames[$]={}).offset_x=2*h(q,ie),ie+=3,ue.offset_y=2*h(q,ie),ie+=3,ue.width=1+h(q,ie),ie+=3,ue.height=1+h(q,ie),ie+=3,ue.duration=h(q,ie),ie+=3,fe=q[ie++],ue.dispose=1&fe,ue.blend=fe>>1&1}ee!="ANMF"&&(ie+=he)}var se,F;return ve}}(k,0);E.response=k,E.rgbaoutput=!0,E.dataurl=!1;var T=E.header?E.header:null,L=E.frames?E.frames:null;if(T){T.loop_counter=T.loop_count,m=[T.canvas_height],b=[T.canvas_width];for(var j=0;j<L.length&&L[j].blend!=0;j++);}var B=L[0],W=x.WebPDecodeRGBA(k,B.src_off,B.src_size,b,m);B.rgba=W,B.imgwidth=b[0],B.imgheight=m[0];for(var U=0;U<b[0]*m[0]*4;U++)_[U]=W[U];return this.width=b,this.height=m,this.data=_,this}(function(n){var e=function(){return typeof D2=="function"},t=function(m,b,_,x){var k=4,E=o;switch(x){case n.image_compression.FAST:k=1,E=s;break;case n.image_compression.MEDIUM:k=6,E=a;break;case n.image_compression.SLOW:k=9,E=c}m=r(m,b,_,E);var T=D2(m,{level:k});return n.__addimage__.arrayBufferToBinaryString(T)},r=function(m,b,_,x){for(var k,E,T,L=m.length/b,j=new Uint8Array(m.length+L),B=h(),W=0;W<L;W+=1){if(T=W*b,k=m.subarray(T,T+b),x)j.set(x(k,_,E),T+W);else{for(var U,q=B.length,ie=[];U<q;U+=1)ie[U]=B[U](k,_,E);var ve=p(ie.concat());j.set(ie[ve],T+W)}E=k}return j},i=function(m){var b=Array.apply([],m);return b.unshift(0),b},s=function(m,b){var _,x=[],k=m.length;x[0]=1;for(var E=0;E<k;E+=1)_=m[E-b]||0,x[E+1]=m[E]-_+256&255;return x},o=function(m,b,_){var x,k=[],E=m.length;k[0]=2;for(var T=0;T<E;T+=1)x=_&&_[T]||0,k[T+1]=m[T]-x+256&255;return k},a=function(m,b,_){var x,k,E=[],T=m.length;E[0]=3;for(var L=0;L<T;L+=1)x=m[L-b]||0,k=_&&_[L]||0,E[L+1]=m[L]+256-(x+k>>>1)&255;return E},c=function(m,b,_){var x,k,E,T,L=[],j=m.length;L[0]=4;for(var B=0;B<j;B+=1)x=m[B-b]||0,k=_&&_[B]||0,E=_&&_[B-b]||0,T=u(x,k,E),L[B+1]=m[B]-T+256&255;return L},u=function(m,b,_){if(m===b&&b===_)return m;var x=Math.abs(b-_),k=Math.abs(m-_),E=Math.abs(m+b-_-_);return x<=k&&x<=E?m:k<=E?b:_},h=function(){return[i,s,o,a,c]},p=function(m){var b=m.map(function(_){return _.reduce(function(x,k){return x+Math.abs(k)},0)});return b.indexOf(Math.min.apply(null,b))};n.processPNG=function(m,b,_,x){var k,E,T,L,j,B,W,U,q,ie,ve,$,z,le,ne,ee=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(T=new NX(m)).imgData,E=T.bits,k=T.colorSpace,j=T.colors,[4,6].indexOf(T.colorType)!==-1){if(T.bits===8){q=(U=T.pixelBitlength==32?new Uint32Array(T.decodePixels().buffer):T.pixelBitlength==16?new Uint16Array(T.decodePixels().buffer):new Uint8Array(T.decodePixels().buffer)).length,ve=new Uint8Array(q*T.colors),ie=new Uint8Array(q);var he,X=T.pixelBitlength-T.bits;for(le=0,ne=0;le<q;le++){for(z=U[le],he=0;he<X;)ve[ne++]=z>>>he&255,he+=T.bits;ie[le]=z>>>he&255}}if(T.bits===16){q=(U=new Uint32Array(T.decodePixels().buffer)).length,ve=new Uint8Array(q*(32/T.pixelBitlength)*T.colors),ie=new Uint8Array(q*(32/T.pixelBitlength)),$=T.colors>1,le=0,ne=0;for(var fe=0;le<q;)z=U[le++],ve[ne++]=z>>>0&255,$&&(ve[ne++]=z>>>16&255,z=U[le++],ve[ne++]=z>>>0&255),ie[fe++]=z>>>16&255;E=8}x!==n.image_compression.NONE&&e()?(m=t(ve,T.width*T.colors,T.colors,x),W=t(ie,T.width,1,x)):(m=ve,W=ie,ee=void 0)}if(T.colorType===3&&(k=this.color_spaces.INDEXED,B=T.palette,T.transparency.indexed)){var ue=T.transparency.indexed,se=0;for(le=0,q=ue.length;le<q;++le)se+=ue[le];if((se/=255)===q-1&&ue.indexOf(0)!==-1)L=[ue.indexOf(0)];else if(se!==q){for(U=T.decodePixels(),ie=new Uint8Array(U.length),le=0,q=U.length;le<q;le++)ie[le]=ue[U[le]];W=t(ie,T.width,1)}}var F=function(te){var Q;switch(te){case n.image_compression.FAST:Q=11;break;case n.image_compression.MEDIUM:Q=13;break;case n.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(x);return ee===this.decode.FLATE_DECODE&&(G="/Predictor "+F+" "),G+="/Colors "+j+" /BitsPerComponent "+E+" /Columns "+T.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:_,data:m,index:b,filter:ee,decodeParameters:G,transparency:L,palette:B,sMask:W,predictor:F,width:T.width,height:T.height,bitsPerComponent:E,colorSpace:k}}}})(cn.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new TX(e),o=s.width,a=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:a},h=new Rw(100).encode(u,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(cn.API),Xc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){zr.log("bit decode error:"+t)}},Xc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=c.blue,this.data[o+4*a+1]=c.green,this.data[o+4*a+2]=c.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Xc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,c=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Xc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Xc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=c,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=n}},Xc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=c,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},Xc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Xc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Xc.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Xc(e,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Rw(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(cn.API),MC.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new MC(e),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Rw(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(cn.API),cn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,c=0,u=0;u<i;u+=4){var h=r[u],p=r[u+1],m=r[u+2],b=r[u+3];s[a++]=h,s[a++]=p,s[a++]=m,o[c++]=b}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},cn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mm=cn.API,dy=mm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,b=n.length,_=0,x=a[0]||c,k=[];for(t=0;t<b;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=p&&jr(u[r])==="object"&&!isNaN(parseInt(u[r][_],10))?u[r][_]/h:0,k.push((a[r]||x)/c+m)),_=r;return k},LC=mm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return mm.processArabic&&(n=mm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:dy.apply(this,arguments).reduce(function(s,o){return s+o},0)},RC=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var c=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(c,s)),a=0,c=s),a+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},IC=function(n,e,t){t||(t={});var r,i,s,o,a,c,u,h=[],p=[h],m=t.textIndent||0,b=0,_=0,x=n.split(" "),k=dy.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var E=Array(c).join(" "),T=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?T=T.concat(j.map(function(B,W){return(W&&B.length?`
`:"")+B})):T.push(j[0])}),x=T,c=LC.apply(this,[E,t])}for(s=0,o=x.length;s<o;s++){var L=0;if(r=x[s],c&&r[0]==`
`&&(r=r.substr(1),L=1),m+b+(_=(i=dy.apply(this,[r,t])).reduce(function(j,B){return j+B},0))>e||L){if(_>e){for(a=RC.apply(this,[r,i,e-(m+b),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);_=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(j,B){return j+B},0)}else h=[r];p.push(h),m=_+c,b=k}else h.push(r),m+=b+_,b=k}return u=c?function(j,B){return(B?E:"")+j.join(" ")}:function(j){return j.join(" ")},p.map(u)},mm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,c,u=[];for(a=0,c=r.length;a<c;a++)u=u.concat(IC.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var m,b,_,x,k=["{"];for(var E in p){if(m=p[E],isNaN(parseInt(E,10))?b="'"+E+"'":(E=parseInt(E,10),b=(b=s(E).slice(2)).slice(0,-1)+r[b.slice(-1)]),typeof m=="number")m<0?(_=s(m).slice(3),x="-"):(_=s(m).slice(2),x=""),_=x+_.slice(0,-1)+r[_.slice(-1)];else{if(jr(m)!=="object")throw new Error("Don't know what to do with value type "+jr(m)+".");_=o(m)}k.push(b+_)}return k.push("}"),k.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,b,_,x,k={},E=1,T=k,L=[],j="",B="",W=p.length-1,U=1;U<W;U+=1)(x=p[U])=="'"?m?(_=m.join(""),m=void 0):m=[]:m?m.push(x):x=="{"?(L.push([T,_]),T={},_=void 0):x=="}"?((b=L.pop())[0][b[1]]=T,_=void 0,T=b[0]):x=="-"?E=-1:_===void 0?t.hasOwnProperty(x)?(j+=t[x],_=parseInt(j,16)*E,E=1,j=""):j+=x:t.hasOwnProperty(x)?(B+=t[x],T[_]=parseInt(B,16)*E,E=1,_=void 0,B=""):B+=x;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var m=p.font,b=h.Unicode[m.postScriptName];b&&(m.metadata.Unicode={},m.metadata.Unicode.widths=b.widths,m.metadata.Unicode.kerning=b.kerning);var _=u.Unicode[m.postScriptName];_&&(m.metadata.Unicode.encoding=_,m.encoding=_.codePages[0])}])}(cn.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(pv(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(cn),function(n){function e(){return(fn.canvg?Promise.resolve(fn.canvg):Lt(()=>import("./index.es-C0asI7-B.js"),__vite__mapDeps([0,1]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}cn.API.addSvgAsImage=function(t,r,i,s,o,a,c,u){if(isNaN(r)||isNaN(i))throw zr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw zr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return e().then(function(_){return _.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(m)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,c,u)})}}(),cn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},cn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),c=[],u=0,h=0,p=0;function m(_,x){var k,E=!1;for(k=0;k<_.length;k+=1)_[k]===x&&(E=!0);return E}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=a.length;for(p=0;p<b;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(jr(n)==="object"){for(i in n)if(s=n[i],m(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&m(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,x=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?x.push("/"+_+" /"+t[_].value):x.push("/"+_+" "+t[_].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(cn.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],p=0,m=s.length;p<m;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,c,u,h,p,m;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,m=(a=Object.keys(s).sort(function(b,_){return b-_})).length;p<m;p++)o=a[p],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),b="",_=0;_<m.length;_++)b+=String.fromCharCode(m[_]);var x=u();h({data:b,addLength1:!0,objectId:x}),c("endobj");var k=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var E=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+vm(a.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var T=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+vm(a.fontName)),c("/FontDescriptor "+E+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+vm(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+T+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",b=0;b<p.length;b++)m+=String.fromCharCode(p[b]);var _=u();h({data:m,addLength1:!0,objectId:_}),c("endobj");var x=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var k=u();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+_+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+vm(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=u();for(var E=0;E<a.metadata.hmtx.widths.length;E++)a.metadata.hmtx.widths[E]=parseInt(a.metadata.hmtx.widths[E]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+vm(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",c=s.x,u=s.y,h=s.options||{},p=s.mutex||{},m=p.pdfEscape,b=p.activeFontKey,_=p.fonts,x=b,k="",E=0,T="",L=_[x].encoding;if(_[x].encoding!=="Identity-H")return{text:a,x:c,y:u,options:h,mutex:p};for(T=a,x=b,Array.isArray(a)&&(T=a[0]),E=0;E<T.length;E+=1)_[x].metadata.hasOwnProperty("cmap")&&(o=_[x].metadata.cmap.unicode.codeMap[T[E].charCodeAt(0)]),o||T[E].charCodeAt(0)<256&&_[x].metadata.hasOwnProperty("Unicode")?k+=T[E]:k+="";var j="";return parseInt(x.slice(1))<14||L==="WinAnsiEncoding"?j=m(k,x).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(j=t(k,_[x])),p.isHex=!0,{text:j,x:c,y:u,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},c,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},c,{text:o})).text}])}(cn),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(cn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,c,u,h,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],E=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,L=0;this.__bidiEngine__={};var j=function($){var z=$.charCodeAt(),le=z>>8,ne=x[le];return ne!==void 0?p[256*ne+(255&z)]:le===252||le===253?"AL":E.test(le)?"L":le===8?"R":"N"},B=function($){for(var z,le=0;le<$.length;le++){if((z=j($.charAt(le)))==="L")return!1;if(z==="R")return!0}return!1},W=function($,z,le,ne){var ee,G,he,X,fe=z[ne];switch(fe){case"L":case"R":T=!1;break;case"N":case"AN":break;case"EN":T&&(fe="AN");break;case"AL":T=!0,fe="R";break;case"WS":fe="N";break;case"CS":ne<1||ne+1>=z.length||(ee=le[ne-1])!=="EN"&&ee!=="AN"||(G=z[ne+1])!=="EN"&&G!=="AN"?fe="N":T&&(G="AN"),fe=G===ee?G:"N";break;case"ES":fe=(ee=ne>0?le[ne-1]:"B")==="EN"&&ne+1<z.length&&z[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&le[ne-1]==="EN"){fe="EN";break}if(T){fe="N";break}for(he=ne+1,X=z.length;he<X&&z[he]==="ET";)he++;fe=he<X&&z[he]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=z.length,he=ne+1;he<X&&z[he]==="NSM";)he++;if(he<X){var ue=$[ne],se=ue>=1425&&ue<=2303||ue===64286;if(ee=z[he],se&&(ee==="R"||ee==="AL")){fe="R";break}}}fe=ne<1||(ee=z[ne-1])==="B"?"N":le[ne-1];break;case"B":T=!1,i=!0,fe=L;break;case"S":s=!0,fe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"BN":fe="N"}return fe},U=function($,z,le){var ne=$.split("");return le&&q(ne,le,{hiLevel:L}),ne.reverse(),z&&z.reverse(),ne.join("")},q=function($,z,le){var ne,ee,G,he,X,fe=-1,ue=$.length,se=0,F=[],te=L?b:m,Q=[];for(T=!1,i=!1,s=!1,ee=0;ee<ue;ee++)Q[ee]=j($[ee]);for(G=0;G<ue;G++){if(X=se,F[G]=W($,Q,F,G),ne=240&(se=te[X][_[F[G]]]),se&=15,z[G]=he=te[se][5],ne>0)if(ne===16){for(ee=fe;ee<G;ee++)z[ee]=1;fe=-1}else fe=-1;if(te[se][6])fe===-1&&(fe=G);else if(fe>-1){for(ee=fe;ee<G;ee++)z[ee]=he;fe=-1}Q[G]==="B"&&(z[G]=0),le.hiLevel|=he}s&&function(ce,pe,ge){for(var _e=0;_e<ge;_e++)if(ce[_e]==="S"){pe[_e]=L;for(var Te=_e-1;Te>=0&&ce[Te]==="WS";Te--)pe[Te]=L}}(Q,z,ue)},ie=function($,z,le,ne,ee){if(!(ee.hiLevel<$)){if($===1&&L===1&&!i)return z.reverse(),void(le&&le.reverse());for(var G,he,X,fe,ue=z.length,se=0;se<ue;){if(ne[se]>=$){for(X=se+1;X<ue&&ne[X]>=$;)X++;for(fe=se,he=X-1;fe<he;fe++,he--)G=z[fe],z[fe]=z[he],z[he]=G,le&&(G=le[fe],le[fe]=le[he],le[he]=G);se=X}se++}}},ve=function($,z,le){var ne=$.split(""),ee={hiLevel:L};return le||(le=[]),q(ne,le,ee),function(G,he,X){if(X.hiLevel!==0&&h)for(var fe,ue=0;ue<G.length;ue++)he[ue]===1&&(fe=k.indexOf(G[ue]))>=0&&(G[ue]=k[fe+1])}(ne,le,ee),ie(2,ne,z,le,ee),ie(1,ne,z,le,ee),ne.join("")};return this.__bidiEngine__.doBidiReorder=function($,z,le){if(function(ee,G){if(G)for(var he=0;he<ee.length;he++)G[he]=he;a===void 0&&(a=B(ee)),u===void 0&&(u=B(ee))}($,z),o||!c||u)if(o&&c&&a^u)L=a?1:0,$=U($,z,le);else if(!o&&c&&u)L=a?1:0,$=ve($,z,le),$=U($,z);else if(!o||a||c||u){if(o&&!c&&a^u)$=U($,z),a?(L=0,$=ve($,z,le)):(L=1,$=ve($,z,le),$=U($,z));else if(o&&a&&!c&&u)L=1,$=ve($,z,le),$=U($,z);else if(!o&&!c&&a^u){var ne=h;a?(L=1,$=ve($,z,le),L=0,h=!1,$=ve($,z,le),h=ne):(L=0,$=ve($,z,le),$=U($,z),L=1,h=!1,$=ve($,z,le),h=ne,$=U($,z))}}else L=0,$=ve($,z,le);else L=a?1:0,$=ve($,z,le);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,c=$.isOutputVisual,a=$.isInputRtl,u=$.isOutputRtl,h=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(cn),cn.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Kh(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new WX(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new LX(this.contents),this.head=new IX(this),this.name=new FX(this),this.cmap=new M4(this),this.toUnicode={},this.hhea=new jX(this),this.maxp=new BX(this),this.hmtx=new zX(this),this.post=new OX(this),this.os2=new MX(this),this.loca=new VX(this),this.glyf=new UX(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,c,u;for(u=[],o=0,a=(c=this.bbox).length;o<a;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ou,Kh=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),LX=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,c,u,h,p,m,b,_,x;for(x in b=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(b)/c),o=Math.floor(p/c),h=16*b-p,(i=new Kh).writeInt(this.scalarType),i.writeShort(b),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*b,u=i.pos+s,a=null,_=[],t)for(m=t[x],i.writeString(x),i.writeInt(n(m)),i.writeInt(u),i.writeInt(m.length),_=_.concat(m),x==="head"&&(a=u),u+=m.length;u%4;)_.push(0),u++;return i.write(_),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=O4.call(t);t.length%4;)t.push(0);for(s=new Kh(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),RX={}.hasOwnProperty,od=function(n,e){for(var t in e)RX.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ou=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var IX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Kh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),OC=function(){function n(e,t){var r,i,s,o,a,c,u,h,p,m,b,_,x,k,E,T,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(b=e.readUInt16(),m=b/2,e.pos+=6,s=function(){var j,B;for(B=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)B.push(e.readUInt16());return B}(),e.pos+=2,x=function(){var j,B;for(B=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)B.push(e.readUInt16());return B}(),u=function(){var j,B;for(B=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)B.push(e.readUInt16());return B}(),h=function(){var j,B;for(B=[],c=j=0;0<=m?j<m:j>m;c=0<=m?++j:--j)B.push(e.readUInt16());return B}(),i=(this.length-e.pos+this.offset)/2,a=function(){var j,B;for(B=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)B.push(e.readUInt16());return B}(),c=E=0,L=s.length;E<L;c=++E)for(k=s[c],r=T=_=x[c];_<=k?T<=k:T>=k;r=_<=k?++T:--T)h[c]===0?o=r+u[c]:(o=a[h[c]/2+(r-_)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,c,u,h,p,m,b,_,x,k,E,T,L,j,B,W,U,q,ie,ve,$,z,le,ne,ee,G,he,X,fe,ue,se,F,te,Q,ce,pe,ge,_e,Te,Ge,Ye,at;switch(ne=new Kh,o=Object.keys(e).sort(function(ht,Ct){return ht-Ct}),t){case"macroman":for(x=0,k=function(){var ht=[];for(_=0;_<256;++_)ht.push(0);return ht}(),T={0:0},s={},ee=0,fe=o.length;ee<fe;ee++)T[Te=e[i=o[ee]]]==null&&(T[Te]=++x),s[i]={old:e[i],new:T[e[i]]},k[i]=T[e[i]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(k),{charMap:s,subtable:ne.data,maxGlyphID:x+1};case"unicode":for(z=[],p=[],L=0,T={},r={},E=u=null,G=0,ue=o.length;G<ue;G++)T[B=e[i=o[G]]]==null&&(T[B]=++L),r[i]={old:B,new:T[B]},a=T[B]-i,E!=null&&a===u||(E&&p.push(E),z.push(i),u=a),E=i;for(E&&p.push(E),p.push(65535),z.push(65535),ve=2*(ie=z.length),q=2*Math.pow(Math.log(ie)/Math.LN2,2),m=Math.log(q/2)/Math.LN2,U=2*ie-q,c=[],W=[],b=[],_=he=0,se=z.length;he<se;_=++he){if($=z[_],h=p[_],$===65535){c.push(0),W.push(0);break}if($-(le=r[$].new)>=32768)for(c.push(0),W.push(2*(b.length+ie-_)),i=X=$;$<=h?X<=h:X>=h;i=$<=h?++X:--X)b.push(r[i].new);else c.push(le-$),W.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*ie+2*b.length),ne.writeUInt16(0),ne.writeUInt16(ve),ne.writeUInt16(q),ne.writeUInt16(m),ne.writeUInt16(U),ge=0,F=p.length;ge<F;ge++)i=p[ge],ne.writeUInt16(i);for(ne.writeUInt16(0),_e=0,te=z.length;_e<te;_e++)i=z[_e],ne.writeUInt16(i);for(Ge=0,Q=c.length;Ge<Q;Ge++)a=c[Ge],ne.writeUInt16(a);for(Ye=0,ce=W.length;Ye<ce;Ye++)j=W[Ye],ne.writeUInt16(j);for(at=0,pe=b.length;at<pe;at++)x=b[at],ne.writeUInt16(x);return{charMap:r,subtable:ne.data,maxGlyphID:L+1}}},n}(),M4=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new OC(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=OC.encode(t,r),(s=new Kh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),jX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),MX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),OX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,c,u;for(u=[],o=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;o=0<=c?++a:--a)u.push(t.readUInt32());return u}).call(this)}},e}(),DX=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,c,u,h,p,m,b;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},o=p=0,m=i.length;p<m;o=++p)s=i[o],t.pos=s.offset,h=t.readString(s.length),a=new DX(h,s),u[b=s.nameID]==null&&(u[b]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),BX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),zX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,m,b;for(b=[],h=0,p=(m=this.metrics).length;h<p;h++)o=m[h],b.push(o.advance);return b}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),O4=[].slice,UX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,c,u,h,p,m;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(c=new Kh(r.read(s))).readShort(),h=c.readShort(),m=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[t]=a===-1?new qX(c,h,m,u,p):new $X(c,a,h,m,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,c,u;for(a=[],o=[],c=0,u=r.length;c<u;c++)s=t[r[c]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),$X=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),qX=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Kh(O4.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),VX=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return od(e,ou),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var c=this.offsets[a],u=this.offsets[a+1]-c;u>0&&(s+=u)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),WX=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,c;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,c,u,h,p,m,b,_,x,k,E;for(i in r=M4.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),b={0:0},E=r.charMap)b[(c=E[i]).old]=c.new;for(_ in m=r.maxGlyphID,o)_ in b||(b[_]=m++);return h=function(T){var L,j;for(L in j={},T)j[T[L]]=L;return j}(b),p=Object.keys(h).sort(function(T,L){return T-L}),x=function(){var T,L,j;for(j=[],T=0,L=p.length;T<L;T++)a=p[T],j.push(h[a]);return j}(),s=this.font.glyf.encode(o,x,b),u=this.font.loca.encode(s.offsets,x),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n}();cn.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,c,u;for(u=[],a=0,c=t.length;a<c;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();const HX={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 mês",other:"cerca de {{count}} meses"},xMonths:{one:"1 mês",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},GX=(n,e,t)=>{let r;const i=HX[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",String(e)),t?.addSuffix?t.comparison&&t.comparison>0?"em "+r:"há "+r:r},YX={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},KX={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},XX={full:"{{date}} 'às' {{time}}",long:"{{date}} 'às' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZX={date:km({formats:YX,defaultWidth:"full"}),time:km({formats:KX,defaultWidth:"full"}),dateTime:km({formats:XX,defaultWidth:"full"})},JX={lastWeek:n=>{const e=n.getDay();return"'"+(e===0||e===6?"último":"última")+"' eeee 'às' p"},yesterday:"'ontem às' p",today:"'hoje às' p",tomorrow:"'amanhã às' p",nextWeek:"eeee 'às' p",other:"P"},QX=(n,e,t,r)=>{const i=JX[n];return typeof i=="function"?i(e):i},eZ={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tZ={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},nZ={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},rZ={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],wide:["domingo","segunda-feira","terça-feira","quarta-feira","quinta-feira","sexta-feira","sábado"]},iZ={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manhã",afternoon:"tarde",evening:"tarde",night:"noite"}},sZ={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manhã",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},oZ=(n,e)=>{const t=Number(n);return e?.unit==="week"?t+"ª":t+"º"},aZ={ordinalNumber:oZ,era:Gu({values:eZ,defaultWidth:"wide"}),quarter:Gu({values:tZ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Gu({values:nZ,defaultWidth:"wide"}),day:Gu({values:rZ,defaultWidth:"wide"}),dayPeriod:Gu({values:iZ,defaultWidth:"wide",formattingValues:sZ,defaultFormattingWidth:"wide"})},lZ=/^(\d+)[ºªo]?/i,cZ=/\d+/i,uZ={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},dZ={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},hZ={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},fZ={any:[/1/i,/2/i,/3/i,/4/i]},pZ={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},mZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},gZ={narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},vZ={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},yZ={narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},bZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},wZ={ordinalNumber:hk({matchPattern:lZ,parsePattern:cZ,valueCallback:n=>parseInt(n,10)}),era:Yu({matchPatterns:uZ,defaultMatchWidth:"wide",parsePatterns:dZ,defaultParseWidth:"any"}),quarter:Yu({matchPatterns:hZ,defaultMatchWidth:"wide",parsePatterns:fZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Yu({matchPatterns:pZ,defaultMatchWidth:"wide",parsePatterns:mZ,defaultParseWidth:"any"}),day:Yu({matchPatterns:gZ,defaultMatchWidth:"wide",parsePatterns:vZ,defaultParseWidth:"any"}),dayPeriod:Yu({matchPatterns:yZ,defaultMatchWidth:"any",parsePatterns:bZ,defaultParseWidth:"any"})},xZ={code:"pt-BR",formatDistance:GX,formatLong:ZX,formatRelative:QX,localize:aZ,match:wZ,options:{weekStartsOn:0,firstWeekContainsDate:1}},hy=async(n,e)=>{const t=new cn,r=t.internal.pageSize.width,i=t.internal.pageSize.height,s="#242c2b",o="#333333",a="#666666",u=(L=>{const j=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(L);return j?{r:parseInt(j[1],16),g:parseInt(j[2],16),b:parseInt(j[3],16)}:null})(s);t.setFillColor(u.r,u.g,u.b),t.rect(0,0,r,50,"F");let h=0;if(e?.logo)try{h=15}catch(L){console.warn("Não foi possível carregar o logo:",L)}t.setTextColor(255,255,255),t.setFontSize(24),t.setFont("helvetica","bold"),t.text("COMPROVANTE",r/2,25,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),t.text(n.type==="entrada"?"DE RECEBIMENTO":"DE PAGAMENTO",r/2,35,{align:"center"}),t.setTextColor(o);let p=70;t.setFontSize(16),t.setFont("helvetica","bold"),t.setTextColor(o),t.text(e?.business_name||e?.user_name||"Empresa",20,p),p+=10,t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(a),e?.cnpj&&(t.text(`CNPJ: ${e.cnpj}`,20,p),p+=6),e?.contact_email&&(t.text(`Email: ${e.contact_email}`,20,p),p+=6),e?.contact_phone&&(t.text(`Telefone: ${e.contact_phone}`,20,p),p+=6),e?.address&&(t.text(`Endereço: ${e.address}`,20,p),p+=6);let m=70;t.setFontSize(9),t.setTextColor(a);const b=rl(new Date,"dd/MM/yyyy 'às' HH:mm");t.text(`Emitido em: ${b}`,r-20,m,{align:"right"}),m+=8,t.text(`Nº: ${String(n.id).padStart(6,"0")}`,r-20,m,{align:"right"}),m+=8,t.text(`Operação: ${n.type==="entrada"?"Recebimento":"Pagamento"}`,r-20,m,{align:"right"}),p+=10,t.setDrawColor(200,200,200),t.line(20,p,r-20,p),p+=20,t.setFillColor(248,249,250),t.roundedRect(20,p,r-40,100,5,5,"F"),t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(o);const _=n.type==="entrada"?"Recebimento":"Pagamento";t.text(_,30,p+15),t.setFontSize(28),t.setFont("helvetica","bold"),t.setTextColor(n.type==="entrada"?"#00AA00":"#FF6B6B");const x=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.valor);t.text(x,30,p+35),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(a),t.text("Status: Processado",30,p+45);const k=rl(new Date(n.data),"dd 'de' MMMM 'de' yyyy 'às' HH:mm",{locale:xZ});t.text(k,30,p+55),t.setFontSize(9),t.setTextColor(a),n.type==="entrada"&&n.client?t.text(`Cliente: ${n.client.name}`,30,p+70):n.type==="saida"&&n.supplier&&t.text(`Fornecedor: ${n.supplier.name}`,30,p+70),t.setFontSize(8),t.setFont("helvetica","italic"),t.setTextColor("#FF6B6B"),t.text("* Este comprovante não possui valor fiscal",30,p+85),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(a),t.text(`ID: ${n.id}`,r-30,p+15,{align:"right"}),p+=120,t.setFillColor(255,255,255),t.roundedRect(20,p,r-40,80,5,5,"F"),t.setDrawColor(230,230,230),t.roundedRect(20,p,r-40,80,5,5,"S"),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(o),t.text("Detalhes da Transação",30,p+15),t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(a);let E=p+25;n.descricao&&(t.text(`Descrição: ${n.descricao}`,30,E),E+=10),n.category&&(t.text(`Categoria: ${n.category}`,30,E),E+=10),n.metodo_pagamento&&(t.text(`Método de Pagamento: ${n.metodo_pagamento}`,30,E),E+=10),n.status&&(t.text(`Status: ${n.status}`,30,E),E+=10),n.wallet&&n.wallet.name&&(t.text(`Carteira: ${n.wallet.name}`,30,E),E+=10),p+=90,p=i-60,t.setDrawColor(200,200,200),t.line(20,p,r-20,p),p+=10,t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(u.r,u.g,u.b),t.text("GO.FOTÓGRAFO",r/2,p,{align:"center"}),t.setFontSize(8),t.setFont("helvetica","normal"),t.setTextColor(a),t.text("Plataforma completa para fotógrafos profissionais",r/2,p+8,{align:"center"}),p+=20,t.setFontSize(8),t.text("Este comprovante foi gerado automaticamente pela plataforma GO.FOTÓGRAFO",r/2,p,{align:"center"}),t.text(`Gerado em ${rl(new Date,"dd/MM/yyyy 'às' HH:mm")}`,r/2,p+8,{align:"center"});const T=btoa(`${n.id}-${n.valor}-${n.data}`).substring(0,8).toUpperCase();return t.text(`Código de verificação: ${T}`,r/2,p+16,{align:"center"}),t},fy={generate:hy,downloadPDF:async(n,e)=>{const t=await hy(n,e),r=`comprovante_${n.id}_${rl(new Date,"ddMMyyyy_HHmm")}.pdf`;t.save(r)},openPDF:async(n,e)=>{const r=(await hy(n,e)).output("blob"),i=URL.createObjectURL(r);window.open(i,"_blank")},printPDF:async(n,e)=>{const r=(await hy(n,e)).output("blob"),i=URL.createObjectURL(r),s=window.open(i,"_blank");s.onload=()=>{s.print()}}},D4=({transaction:n,size:e="sm",variant:t="outline",className:r="",showDropdown:i=!0})=>{const{settings:s}=Po(),{toast:o}=Ta(),[a,c]=N.useState(!1),u=async(h="download")=>{if(!n){o({title:"Erro",description:"Dados da transação não encontrados",variant:"destructive"});return}c(!0);try{switch(h){case"download":await fy.downloadPDF(n,s),o({title:"Comprovante baixado!",description:"O arquivo PDF foi baixado com sucesso"});break;case"view":await fy.openPDF(n,s);break;case"print":await fy.printPDF(n,s),o({title:"Enviado para impressão",description:"Verifique sua impressora"});break;default:await fy.downloadPDF(n,s)}}catch(p){console.error("Erro ao gerar comprovante:",p),o({title:"Erro ao gerar comprovante",description:"Tente novamente em alguns instantes",variant:"destructive"})}finally{c(!1)}};return i?y.jsxs(JT,{children:[y.jsx(QT,{asChild:!0,children:y.jsxs(mn,{size:e,variant:t,className:r,disabled:a,children:[y.jsx($m,{className:"w-4 h-4 mr-2"}),a?"Gerando...":"Comprovante",y.jsx(XP,{className:"w-4 h-4 ml-1"})]})}),y.jsxs(h_,{align:"end",children:[y.jsxs(tl,{onClick:()=>u("download"),children:[y.jsx(QP,{className:"w-4 h-4 mr-2"}),"Baixar PDF"]}),y.jsxs(tl,{onClick:()=>u("view"),children:[y.jsx(Hq,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),y.jsxs(tl,{onClick:()=>u("print"),children:[y.jsx(Zq,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]})]}):y.jsxs(mn,{size:e,variant:t,className:r,onClick:()=>u("download"),disabled:a,children:[y.jsx($m,{className:"w-4 h-4 mr-2"}),a?"Gerando...":"Comprovante"]})},_Z={ENTRADA:[{value:"sessao_fotos",label:"Sessão de Fotos",icon:"📸"},{value:"evento",label:"Evento/Casamento",icon:"💒"},{value:"ensaio",label:"Ensaio",icon:"🌟"},{value:"album",label:"Álbum/Produto",icon:"📚"},{value:"edicao",label:"Edição de Fotos",icon:"✨"},{value:"consultoria",label:"Consultoria",icon:"💡"},{value:"curso",label:"Curso/Workshop",icon:"🎓"},{value:"licenciamento",label:"Licenciamento de Imagem",icon:"📄"},{value:"book",label:"Book Fotográfico",icon:"📖"},{value:"corporativo",label:"Evento Corporativo",icon:"🏢"},{value:"newborn",label:"Newborn",icon:"👶"},{value:"gestante",label:"Ensaio Gestante",icon:"🤱"},{value:"familia",label:"Ensaio Família",icon:"👨‍👩‍👧‍👦"},{value:"formatura",label:"Formatura",icon:"🎓"},{value:"aniversario",label:"Aniversário",icon:"🎂"},{value:"outros",label:"Outros",icon:"📷"}],SAIDA:[{value:"equipamento",label:"Equipamento Fotográfico",icon:"📹"},{value:"lente",label:"Lentes",icon:"🔍"},{value:"iluminacao",label:"Iluminação",icon:"💡"},{value:"tripé",label:"Tripés/Suportes",icon:"🏗️"},{value:"software",label:"Software/Licenças",icon:"💻"},{value:"marketing",label:"Marketing/Publicidade",icon:"📢"},{value:"site",label:"Site/Hospedagem",icon:"🌐"},{value:"curso_capacitacao",label:"Cursos/Capacitação",icon:"📚"},{value:"transporte",label:"Transporte/Combustível",icon:"🚗"},{value:"alimentacao",label:"Alimentação",icon:"🍽️"},{value:"estudio",label:"Aluguel Estúdio",icon:"🏠"},{value:"cenario",label:"Cenários/Props",icon:"🎭"},{value:"assistente",label:"Assistente/Freelancer",icon:"👤"},{value:"contador",label:"Contador/Contabilidade",icon:"📊"},{value:"seguro",label:"Seguro Equipamentos",icon:"🛡️"},{value:"manutencao",label:"Manutenção Equipamentos",icon:"🔧"},{value:"material",label:"Material Escritório",icon:"📝"},{value:"backup",label:"Backup/Armazenamento",icon:"💾"},{value:"juridico",label:"Jurídico/Advocacia",icon:"⚖️"},{value:"outros",label:"Outros",icon:"💸"}]},F4=[{value:"pix",label:"PIX",icon:"🔄"},{value:"cartao_credito",label:"Cartão de Crédito",icon:"💳"},{value:"cartao_debito",label:"Cartão de Débito",icon:"💳"},{value:"dinheiro",label:"Dinheiro",icon:"💵"},{value:"cheque",label:"Cheque",icon:"📄"},{value:"ted",label:"TED",icon:"🏦"},{value:"doc",label:"DOC",icon:"🏦"},{value:"deposito",label:"Depósito Bancário",icon:"🏧"},{value:"boleto",label:"Boleto",icon:"📊"},{value:"outros",label:"Outros",icon:"💰"}],Sne=[{value:"all",label:"Todos os períodos"},{value:"today",label:"Hoje"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mês"},{value:"last_7_days",label:"Últimos 7 dias"},{value:"last_30_days",label:"Últimos 30 dias"},{value:"last_90_days",label:"Últimos 90 dias"},{value:"last_year",label:"Último ano"},{value:"current_year",label:"Este ano"},{value:"custom",label:"Período personalizado"}],SZ=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:i})=>{const{clients:s,suppliers:o=[],addTransaction:a,updateTransaction:c,wallets:u}=Po(),{toast:h}=Ta(),{openModal:p}=cp(),[m,b]=N.useState(""),[_,x]=N.useState(""),[k,E]=N.useState(rl(new Date,"yyyy-MM-dd")),[T,L]=N.useState("PENDENTE"),[j,B]=N.useState(""),[W,U]=N.useState(""),[q,ie]=N.useState(""),[ve,$]=N.useState(""),[z,le]=N.useState(""),[ne,ee]=N.useState(!1),[G,he]=N.useState(null),X=N.useCallback(()=>{b(""),x(""),E(rl(new Date,"yyyy-MM-dd")),L("PENDENTE"),B(""),U(""),ie(""),$(""),le("")},[]);N.useEffect(()=>{n&&(r?(b(r.descricao||""),x(r.valor||""),E(r.data?rl(new Date(r.data),"yyyy-MM-dd"):rl(new Date,"yyyy-MM-dd")),L(r.status||"PENDENTE"),B(r.cliente_id||""),U(r.fornecedor_id||r.supplier_id||""),ie(r.category||""),$(r.metodo_pagamento||""),le(r.wallet_id||"")):X())},[r,n,X]);const fe=async ce=>{if(ce.preventDefault(),t==="ENTRADA"&&T==="PAGO"&&!z){h({title:"Erro de Validação",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}ee(!0);const pe={descricao:m,valor:parseFloat(_),data:k,tipo:t.toUpperCase(),status:T,cliente_id:t.toUpperCase()==="ENTRADA"&&j||null,fornecedor_id:t.toUpperCase()==="SAIDA"&&W||null,category:q,metodo_pagamento:ve,wallet_id:z||null};try{let ge;r?.id?(ge=await c(r.id,pe),h({title:"Sucesso!",description:"Lançamento atualizado."}),he({...pe,id:r.id})):(ge=await a(pe),h({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`}),he({...pe,id:ge?.id||Date.now()})),i&&i(),e()}catch(ge){h({title:"Erro",description:`Não foi possível salvar: ${ge.message}`,variant:"destructive"})}finally{ee(!1)}},ue=u?.filter(ce=>ce&&ce.id&&ce.name)||[],se=s?.filter(ce=>ce&&ce.id&&ce.name)||[],F=o?.filter(ce=>ce&&ce.id&&ce.name)||[],te=()=>{p("client",{returnTo:"financial",onSuccess:ce=>{B(ce.id)}})},Q=()=>{p("supplier",{returnTo:"financial",onSuccess:ce=>{U(ce.id)}})};return y.jsx(ka,{children:n&&y.jsx(p4,{open:n,onOpenChange:e,children:y.jsx(S_,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col z-[4000]",children:y.jsxs(Ki.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex flex-col h-full",children:[y.jsxs(A_,{className:"flex-shrink-0",children:[y.jsxs(C_,{children:[r?.id?"Editar":"Novo"," Lançamento: ",t==="entrada"?"Entrada":"Saída"]}),y.jsx(E_,{children:"Preencha os detalhes abaixo."})]}),y.jsx("div",{className:"flex-1 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-muted-foreground/30",children:y.jsxs("form",{onSubmit:fe,className:"space-y-4 py-4",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"descricao",children:"Descrição"}),y.jsx(Ds,{id:"descricao",value:m,onChange:ce=>b(ce.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"valor",children:"Valor (R$)"}),y.jsx(Ds,{id:"valor",type:"number",value:_,onChange:ce=>x(ce.target.value),required:!0,step:"0.01"})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"data",children:"Data"}),y.jsx(Ds,{id:"data",type:"date",value:k,onChange:ce=>E(ce.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"status",children:"Status"}),y.jsxs(io,{value:T,onValueChange:L,children:[y.jsx(Ms,{children:y.jsx(so,{})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"PENDENTE",children:"Pendente"}),y.jsx(Dn,{value:"PAGO",children:"Pago"}),y.jsx(Dn,{value:"ATRASADO",children:"Atrasado"}),y.jsx(Dn,{value:"CANCELADO",children:"Cancelado"})]})]})]}),t==="entrada"?y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(gr,{htmlFor:"cliente",children:"Cliente (Opcional)"}),y.jsxs(mn,{type:"button",variant:"outline",size:"sm",onClick:te,className:"h-8 px-3 text-xs",children:[y.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Novo Cliente"]})]}),y.jsxs(io,{value:j||"",onValueChange:B,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um cliente"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Nenhum"}),se.map(ce=>y.jsx(Dn,{value:ce.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ce.name}),ce.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ce.email})]})},ce.id))]})]})]}):y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(gr,{htmlFor:"fornecedor",children:"Fornecedor (Opcional)"}),y.jsxs(mn,{type:"button",variant:"outline",size:"sm",onClick:Q,className:"h-8 px-3 text-xs",children:[y.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Novo Fornecedor"]})]}),y.jsxs(io,{value:W||"",onValueChange:U,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um fornecedor"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Nenhum"}),F.map(ce=>y.jsx(Dn,{value:ce.id,children:y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"font-medium",children:ce.name}),ce.email&&y.jsx("span",{className:"text-xs text-muted-foreground",children:ce.email}),ce.category&&y.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:ce.category.replace("_"," ")})]})},ce.id))]})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"categoria",children:"Categoria (Opcional)"}),y.jsxs(io,{value:q,onValueChange:ie,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione uma categoria"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Sem categoria"}),(_Z[t.toUpperCase()]||[]).map(ce=>y.jsx(Dn,{value:ce.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ce.icon}),ce.label]})},ce.value))]})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"metodoPagamento",children:"Método de Pagamento (Opcional)"}),y.jsxs(io,{value:ve,onValueChange:$,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um método"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Não especificado"}),F4.map(ce=>y.jsx(Dn,{value:ce.value,children:y.jsxs("div",{className:"flex items-center",children:[y.jsx("span",{className:"mr-2",children:ce.icon}),ce.label]})},ce.value))]})]})]}),y.jsxs("div",{children:[y.jsxs(gr,{htmlFor:"wallet",className:"flex items-center",children:[y.jsx(Nv,{className:"w-4 h-4 mr-2"}),"Carteira ",t==="ENTRADA"&&T==="PAGO"?"*":"(Opcional)"]}),ue.length>0?y.jsxs(io,{value:z||"",onValueChange:le,required:t==="ENTRADA"&&T==="PAGO",children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione uma carteira"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Nenhuma"}),ue.map(ce=>y.jsx(Dn,{value:ce.id,children:y.jsxs("div",{className:"flex items-center",children:[ce.icon_url&&y.jsx("img",{src:ce.icon_url,alt:ce.name,className:"w-4 h-4 mr-2 object-contain"}),ce.name]})},ce.id))]})]}):y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}),y.jsxs("div",{className:"flex justify-between items-center pt-4 flex-shrink-0",children:[G&&y.jsx(D4,{transaction:{...G,type:G.tipo==="ENTRADA"?"entrada":"saida"},size:"sm",variant:"outline"}),y.jsxs("div",{className:`flex space-x-2 ${G?"":"ml-auto"}`,children:[y.jsx(mn,{type:"button",variant:"ghost",onClick:e,disabled:ne,children:"Cancelar"}),y.jsx(mn,{type:"submit",disabled:ne,children:ne?"Salvando...":"Salvar"})]})]})]})})]})})})})},AZ=Hx("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-yellow-500 text-white"}},defaultVariants:{variant:"default"}});function CZ({className:n,variant:e,...t}){return y.jsx("div",{className:kn(AZ({variant:e}),n),...t})}const ds={SIMPLE:"simple",PRODUCTS:"products",SERVICES:"services",MIXED:"mixed"},Rr={TYPE_SELECTION:"type",ITEMS_SELECTION:"items",TRANSACTION_DETAILS:"details",CONFIRMATION:"confirmation"},EZ=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:i})=>{const{clients:s,suppliers:o=[],products:a=[],servicePackages:c=[],addTransaction:u,updateTransaction:h,wallets:p}=Po(),{toast:m}=Ta(),{openModal:b}=cp(),[_,x]=N.useState(Rr.TYPE_SELECTION),[k,E]=N.useState(ds.SIMPLE),[T,L]=N.useState([]),[j,B]=N.useState([]),[W,U]=N.useState(""),[q,ie]=N.useState(""),[ve,$]=N.useState(rl(new Date,"yyyy-MM-dd")),[z,le]=N.useState("PENDENTE"),[ne,ee]=N.useState(""),[G,he]=N.useState(""),[X,fe]=N.useState(""),[ue,se]=N.useState(""),[F,te]=N.useState(""),[Q,ce]=N.useState(""),[pe,ge]=N.useState(!1),[_e,Te]=N.useState(null),Ge=N.useCallback(()=>{x(Rr.TYPE_SELECTION),E(ds.SIMPLE),L([]),B([]),U(""),ie(""),$(rl(new Date,"yyyy-MM-dd")),le("PENDENTE"),ee(""),he(""),fe(""),se(""),te(""),ce("")},[]);N.useEffect(()=>{n&&!r&&Ge()},[n,r,Ge]);const Ye=()=>{let $e=0;T.forEach(St=>{const Pt=ue==="PIX"||ue==="Dinheiro"?"price_pix":"price_card",wt=St.product[Pt]||St.product.price_pix||0;$e+=wt*St.quantity}),j.forEach(St=>{const Pt=ue==="PIX"||ue==="Dinheiro"?"price_cash_pix":"price_card",wt=St.service[Pt]||St.service.price_cash_pix||0;$e+=wt*St.quantity});const Vt=parseFloat(Q)||0;return Math.max(0,$e-Vt)};N.useEffect(()=>{if(k!==ds.SIMPLE){const $e=Ye();ie($e.toString())}},[T,j,ue,Q,k]);const at=$e=>{const Vt=T.findIndex(St=>St.product.id===$e.id);if(Vt>=0){const St=[...T];St[Vt].quantity+=1,L(St)}else L([...T,{product:$e,quantity:1}])},ht=$e=>{L(T.filter(Vt=>Vt.product.id!==$e))},Ct=($e,Vt)=>{if(Vt<=0){ht($e);return}const St=T.map(Pt=>Pt.product.id===$e?{...Pt,quantity:Vt}:Pt);L(St)},We=$e=>{const Vt=j.findIndex(St=>St.service.id===$e.id);if(Vt>=0){const St=[...j];St[Vt].quantity+=1,B(St)}else B([...j,{service:$e,quantity:1}])},we=$e=>{B(j.filter(Vt=>Vt.service.id!==$e))},Mt=($e,Vt)=>{if(Vt<=0){we($e);return}const St=j.map(Pt=>Pt.service.id===$e?{...Pt,quantity:Vt}:Pt);B(St)},Rt=()=>{switch(_){case Rr.TYPE_SELECTION:k===ds.SIMPLE?x(Rr.TRANSACTION_DETAILS):x(Rr.ITEMS_SELECTION);break;case Rr.ITEMS_SELECTION:x(Rr.TRANSACTION_DETAILS);break;case Rr.TRANSACTION_DETAILS:x(Rr.CONFIRMATION);break}},ut=()=>{switch(_){case Rr.ITEMS_SELECTION:x(Rr.TYPE_SELECTION);break;case Rr.TRANSACTION_DETAILS:k===ds.SIMPLE?x(Rr.TYPE_SELECTION):x(Rr.ITEMS_SELECTION);break;case Rr.CONFIRMATION:x(Rr.TRANSACTION_DETAILS);break}},mt=()=>{switch(_){case Rr.TYPE_SELECTION:return k!==null;case Rr.ITEMS_SELECTION:return T.length>0||j.length>0;case Rr.TRANSACTION_DETAILS:return W&&q&&ve;default:return!0}},gt=async()=>{if(t==="ENTRADA"&&z==="PAGO"&&!F){m({title:"Erro de Validação",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}ge(!0);let $e="";T.length>0&&($e+="Produtos: "+T.map(Pt=>`${Pt.product.name} (${Pt.quantity}x)`).join(", ")),j.length>0&&($e&&($e+=" | "),$e+="Serviços: "+j.map(Pt=>`${Pt.service.name} (${Pt.quantity}x)`).join(", "));const St={descricao:$e?`${W} - ${$e}`:W,valor:parseFloat(q),data:ve,tipo:t.toUpperCase(),status:z,cliente_id:t.toUpperCase()==="ENTRADA"&&ne||null,fornecedor_id:t.toUpperCase()==="SAIDA"&&G||null,category:X,metodo_pagamento:ue,wallet_id:F||null,transaction_type:k,items:{products:T,services:j,discount:parseFloat(Q)||0}};try{let Pt;r?.id?(Pt=await h(r.id,St),m({title:"Sucesso!",description:"Lançamento atualizado."})):(Pt=await u(St),m({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`})),Te({...St,id:Pt?.id||Date.now()}),i&&i(),e()}catch(Pt){m({title:"Erro",description:`Não foi possível salvar: ${Pt.message}`,variant:"destructive"})}finally{ge(!1)}},bt=p?.filter($e=>$e&&$e.id&&$e.name)||[],Ot=s?.filter($e=>$e&&$e.id&&$e.name)||[];o?.filter($e=>$e&&$e.id&&$e.name);const Qt=a?.filter($e=>$e&&$e.id&&$e.name&&$e.active)||[],Xt=c?.filter($e=>$e&&$e.id&&$e.name)||[],un=()=>{switch(_){case Rr.TYPE_SELECTION:return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tipo de Lançamento"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha o tipo de lançamento que você deseja fazer"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("button",{onClick:()=>E(ds.SIMPLE),className:`p-4 border-2 rounded-lg text-left transition-colors ${k===ds.SIMPLE?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[y.jsx(Wh,{className:"w-6 h-6 mb-2 text-primary"}),y.jsx("h4",{className:"font-semibold",children:"Lançamento Simples"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Entrada ou saída manual sem produtos específicos"})]}),y.jsxs("button",{onClick:()=>E(ds.PRODUCTS),className:`p-4 border-2 rounded-lg text-left transition-colors ${k===ds.PRODUCTS?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[y.jsx(Ey,{className:"w-6 h-6 mb-2 text-blue-500"}),y.jsx("h4",{className:"font-semibold",children:"Venda de Produtos"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Venda de fotos, álbuns, quadros e outros produtos"})]}),y.jsxs("button",{onClick:()=>E(ds.SERVICES),className:`p-4 border-2 rounded-lg text-left transition-colors ${k===ds.SERVICES?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[y.jsx(Pm,{className:"w-6 h-6 mb-2 text-green-500"}),y.jsx("h4",{className:"font-semibold",children:"Pacotes de Serviços"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Venda de pacotes fotográficos cadastrados"})]}),y.jsxs("button",{onClick:()=>E(ds.MIXED),className:`p-4 border-2 rounded-lg text-left transition-colors ${k===ds.MIXED?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[y.jsxs("div",{className:"flex items-center mb-2",children:[y.jsx(Pm,{className:"w-5 h-5 mr-1 text-green-500"}),y.jsx(Ey,{className:"w-5 h-5 text-blue-500"})]}),y.jsx("h4",{className:"font-semibold",children:"Produtos + Serviços"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Combinação de produtos e serviços"})]})]})]});case Rr.ITEMS_SELECTION:return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selecionar Itens"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha os produtos e/ou serviços para este lançamento"})]}),(k===ds.PRODUCTS||k===ds.MIXED)&&y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[y.jsx(Ey,{className:"w-4 h-4 mr-2"}),"Produtos Disponíveis"]}),T.length>0&&y.jsxs("div",{className:"mb-4 p-3 bg-accent/50 rounded-lg",children:[y.jsx("h5",{className:"font-medium mb-2",children:"Produtos Selecionados:"}),T.map($e=>y.jsxs("div",{className:"flex items-center justify-between py-1",children:[y.jsx("span",{className:"text-sm",children:$e.product.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(mn,{variant:"outline",size:"sm",onClick:()=>Ct($e.product.id,$e.quantity-1),children:y.jsx(Q0,{className:"w-3 h-3"})}),y.jsx("span",{className:"text-sm w-8 text-center",children:$e.quantity}),y.jsx(mn,{variant:"outline",size:"sm",onClick:()=>Ct($e.product.id,$e.quantity+1),children:y.jsx(Kd,{className:"w-3 h-3"})}),y.jsx(mn,{variant:"destructive",size:"sm",onClick:()=>ht($e.product.id),children:y.jsx(Q0,{className:"w-3 h-3"})})]})]},$e.product.id))]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-40 overflow-y-auto",children:Qt.map($e=>y.jsx("button",{onClick:()=>at($e),className:"p-3 border rounded-lg text-left hover:bg-accent transition-colors",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h5",{className:"font-medium",children:$e.name}),y.jsx("p",{className:"text-xs text-muted-foreground",children:$e.category}),y.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["R$ ",Number($e.price_pix||0).toFixed(2)]})]}),y.jsx(Kd,{className:"w-4 h-4 text-primary"})]})},$e.id))})]}),(k===ds.SERVICES||k===ds.MIXED)&&y.jsxs("div",{children:[y.jsxs("h4",{className:"font-semibold mb-3 flex items-center",children:[y.jsx(Pm,{className:"w-4 h-4 mr-2"}),"Pacotes de Serviços"]}),j.length>0&&y.jsxs("div",{className:"mb-4 p-3 bg-accent/50 rounded-lg",children:[y.jsx("h5",{className:"font-medium mb-2",children:"Serviços Selecionados:"}),j.map($e=>y.jsxs("div",{className:"flex items-center justify-between py-1",children:[y.jsx("span",{className:"text-sm",children:$e.service.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(mn,{variant:"outline",size:"sm",onClick:()=>Mt($e.service.id,$e.quantity-1),children:y.jsx(Q0,{className:"w-3 h-3"})}),y.jsx("span",{className:"text-sm w-8 text-center",children:$e.quantity}),y.jsx(mn,{variant:"outline",size:"sm",onClick:()=>Mt($e.service.id,$e.quantity+1),children:y.jsx(Kd,{className:"w-3 h-3"})}),y.jsx(mn,{variant:"destructive",size:"sm",onClick:()=>we($e.service.id),children:y.jsx(Q0,{className:"w-3 h-3"})})]})]},$e.service.id))]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-40 overflow-y-auto",children:Xt.map($e=>y.jsx("button",{onClick:()=>We($e),className:"p-3 border rounded-lg text-left hover:bg-accent transition-colors",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h5",{className:"font-medium",children:$e.name}),y.jsx("p",{className:"text-xs text-muted-foreground",children:$e.niche}),y.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["R$ ",Number($e.price_cash_pix||0).toFixed(2)]})]}),y.jsx(Kd,{className:"w-4 h-4 text-primary"})]})},$e.id))})]})]});case Rr.TRANSACTION_DETAILS:return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"text-center mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Detalhes da Transação"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete as informações do lançamento"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"descricao",children:"Descrição *"}),y.jsx(Ds,{id:"descricao",value:W,onChange:$e=>U($e.target.value),placeholder:"Descrição do lançamento",required:!0})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"data",children:"Data *"}),y.jsx(Ds,{id:"data",type:"date",value:ve,onChange:$e=>$($e.target.value),required:!0})]}),k===ds.SIMPLE&&y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"valor",children:"Valor (R$) *"}),y.jsx(Ds,{id:"valor",type:"number",value:q,onChange:$e=>ie($e.target.value),step:"0.01",required:!0})]}),k!==ds.SIMPLE&&y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"desconto",children:"Desconto (R$)"}),y.jsx(Ds,{id:"desconto",type:"number",value:Q,onChange:$e=>ce($e.target.value),step:"0.01",placeholder:"0.00"})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"status",children:"Status"}),y.jsxs(io,{value:z,onValueChange:le,children:[y.jsx(Ms,{children:y.jsx(so,{})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"PENDENTE",children:"Pendente"}),y.jsx(Dn,{value:"PAGO",children:"Pago"}),y.jsx(Dn,{value:"ATRASADO",children:"Atrasado"}),y.jsx(Dn,{value:"CANCELADO",children:"Cancelado"})]})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"metodoPagamento",children:"Método de Pagamento"}),y.jsxs(io,{value:ue,onValueChange:se,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um método"})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"",children:"Não especificado"}),F4.map($e=>y.jsx(Dn,{value:$e.value,children:$e.label},$e.value))]})]})]}),t==="entrada"&&y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"cliente",children:"Cliente"}),y.jsxs(io,{value:ne,onValueChange:ee,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um cliente"})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"",children:"Nenhum"}),Ot.map($e=>y.jsx(Dn,{value:$e.id,children:$e.name},$e.id))]})]})]}),bt.length>0&&y.jsxs("div",{children:[y.jsxs(gr,{htmlFor:"wallet",children:["Carteira ",t==="ENTRADA"&&z==="PAGO"?"*":"(Opcional)"]}),y.jsxs(io,{value:F,onValueChange:te,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione uma carteira"})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"",children:"Nenhuma"}),bt.map($e=>y.jsx(Dn,{value:$e.id,children:$e.name},$e.id))]})]})]})]}),k!==ds.SIMPLE&&y.jsxs("div",{className:"mt-4 p-4 bg-accent/50 rounded-lg",children:[y.jsx("h4",{className:"font-semibold mb-2",children:"Resumo do Pedido"}),y.jsxs("div",{className:"space-y-1 text-sm",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"Subtotal:"}),y.jsxs("span",{children:["R$ ",(Ye()+(parseFloat(Q)||0)).toFixed(2)]})]}),Q&&y.jsxs("div",{className:"flex justify-between text-orange-600",children:[y.jsx("span",{children:"Desconto:"}),y.jsxs("span",{children:["- R$ ",parseFloat(Q).toFixed(2)]})]}),y.jsx("div",{className:"my-2 h-px bg-border"}),y.jsxs("div",{className:"flex justify-between font-semibold",children:[y.jsx("span",{children:"Total:"}),y.jsxs("span",{children:["R$ ",Ye().toFixed(2)]})]})]})]})]});case Rr.CONFIRMATION:return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"text-center",children:[y.jsx(KP,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),y.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Confirmar Lançamento"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Revise as informações antes de salvar"})]}),y.jsxs("div",{className:"bg-accent/50 rounded-lg p-4 space-y-3",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Tipo:"}),y.jsx("p",{children:t==="entrada"?"Entrada":"Saída"})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Valor:"}),y.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["R$ ",parseFloat(q).toFixed(2)]})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Descrição:"}),y.jsx("p",{children:W})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Data:"}),y.jsx("p",{children:rl(new Date(ve),"dd/MM/yyyy")})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Status:"}),y.jsx(CZ,{variant:z==="PAGO"?"default":"secondary",children:z})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-medium",children:"Método:"}),y.jsx("p",{children:ue||"Não especificado"})]})]}),(T.length>0||j.length>0)&&y.jsxs("div",{className:"mt-4",children:[y.jsx("span",{className:"font-medium",children:"Itens:"}),y.jsxs("div",{className:"mt-2 space-y-1",children:[T.map($e=>y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsxs("span",{children:[$e.product.name," x",$e.quantity]}),y.jsxs("span",{children:["R$ ",($e.product.price_pix*$e.quantity).toFixed(2)]})]},$e.product.id)),j.map($e=>y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsxs("span",{children:[$e.service.name," x",$e.quantity]}),y.jsxs("span",{children:["R$ ",($e.service.price_cash_pix*$e.quantity).toFixed(2)]})]},$e.service.id))]})]})]})]});default:return null}};return y.jsx(ka,{children:n&&y.jsx(p4,{open:n,onOpenChange:e,children:y.jsxs(S_,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[y.jsxs(A_,{children:[y.jsxs(C_,{children:[r?.id?"Editar":"Novo"," Lançamento: ",t==="entrada"?"Entrada":"Saída"]}),y.jsxs(E_,{children:[_===Rr.TYPE_SELECTION&&"Escolha o tipo de lançamento",_===Rr.ITEMS_SELECTION&&"Selecione os produtos e/ou serviços",_===Rr.TRANSACTION_DETAILS&&"Complete os detalhes da transação",_===Rr.CONFIRMATION&&"Revise e confirme as informações"]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsx(Ki.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:un()},_)}),y.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[y.jsx("div",{className:"flex space-x-2",children:_!==Rr.TYPE_SELECTION&&y.jsxs(mn,{variant:"outline",onClick:ut,disabled:pe,children:[y.jsx(zq,{className:"w-4 h-4 mr-2"}),"Voltar"]})}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(mn,{variant:"ghost",onClick:e,disabled:pe,children:"Cancelar"}),_!==Rr.CONFIRMATION?y.jsxs(mn,{onClick:Rt,disabled:!mt()||pe,children:["Próximo",y.jsx(WP,{className:"w-4 h-4 ml-2"})]}):y.jsx(mn,{onClick:gt,disabled:pe,className:"btn-custom-gradient",children:pe?"Salvando...":"Finalizar Lançamento"})]})]}),_e&&y.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-green-800 text-sm",children:"Lançamento salvo com sucesso!"}),y.jsx(D4,{transaction:{..._e,type:_e.tipo==="ENTRADA"?"entrada":"saida"},size:"sm",variant:"outline"})]})})]})})})},B4=vn.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:kn("flex min-h-[80px] w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:t,...e}));B4.displayName="Textarea";const py=({label:n,selectedWallet:e,onWalletChange:t,wallets:r,required:i=!1})=>{const s=r?.filter(o=>o&&o.id&&o.name)||[];return s.length===0?y.jsxs("div",{className:"space-y-1",children:[y.jsxs(gr,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Nv,{className:"w-4 h-4 mr-2"}),n]}),y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs(gr,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(Nv,{className:"w-4 h-4 mr-2"}),n," ",i&&"*"]}),y.jsxs(io,{value:e||"",onValueChange:t,required:i,children:[y.jsx(Ms,{id:`wallet-selector-${n.replace(/\s+/g,"-")}`,children:y.jsx(so,{placeholder:"Selecione uma carteira"})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"",children:"Nenhuma"}),s.map(o=>y.jsx(Dn,{value:o.id,children:y.jsxs("div",{className:"flex items-center",children:[o.icon_url&&y.jsx("img",{src:o.icon_url,alt:o.name,className:"w-4 h-4 mr-2 object-contain"}),o.name]})},o.id))]})]})]})},kZ=({card:n,onSave:e,onCancel:t,isSaving:r})=>{const{clients:i,servicePackages:s,settings:o,wallets:a}=Po(),{toast:c}=Ta(),[u,h]=N.useState({title:"",client_id:"",status:"agendado",value:"",description:"",date:"",time:"",service_package_id:"",payment_type:"SOMENTE_AGENDADO",entry_value:"",installments:"",payment_method:"",main_wallet_id:"",entry_wallet_id:""});N.useEffect(()=>{h(n?{title:n.title||"",client_id:n.client_id||"",status:n.status||"agendado",value:n.value||"",description:n.description||"",date:n.date?rl(mk(n.date),"yyyy-MM-dd"):"",time:n.time||"",service_package_id:n.service_package_id||"",payment_type:n.payment_type||"SOMENTE_AGENDADO",entry_value:n.entry_value||"",installments:n.installments||"",payment_method:n.payment_method||"",main_wallet_id:n.main_wallet_id||"",entry_wallet_id:n.entry_wallet_id||""}:E=>({...E,status:o?.workflow_columns?.[0]?.id||"agendado"}))},[n,o]);const p=E=>{const{name:T,value:L}=E.target;h(j=>({...j,[T]:L}))},m=(E,T)=>{h(L=>({...L,[E]:T}))},b=E=>{if(E.preventDefault(),u.payment_type!=="SOMENTE_AGENDADO"){if(u.payment_type==="integral"&&!u.main_wallet_id){c({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o pagamento integral.",variant:"destructive"});return}if(u.payment_type==="parcial"&&(!u.entry_wallet_id||!u.main_wallet_id)){c({title:"Campos obrigatórios",description:"Por favor, selecione as carteiras para a entrada e para o restante.",variant:"destructive"});return}if((u.payment_type==="parcelado_pix"||u.payment_type==="parcelado_cartao")&&!u.main_wallet_id){c({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o parcelamento.",variant:"destructive"});return}}e(u)},_=o?.workflow_columns?.filter(E=>E&&E.id&&E.title)||[],x=i?.filter(E=>E&&E.id&&E.name)||[],k=s?.filter(E=>E&&E.id&&E.name)||[];return y.jsxs("form",{onSubmit:b,id:"workflow-form",className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"title",children:"Título do Trabalho"}),y.jsx(Ds,{id:"title",name:"title",value:u.title,onChange:p,required:!0})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"client_id",children:"Cliente"}),y.jsxs(io,{name:"client_id",value:u.client_id||"",onValueChange:E=>m("client_id",E),children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um cliente"})}),y.jsx(Os,{className:"max-h-60",children:x.map(E=>y.jsx(Dn,{value:E.id,children:E.name},E.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"date",children:"Data"}),y.jsx(Ds,{id:"date",name:"date",type:"date",value:u.date,onChange:p})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"time",children:"Hora"}),y.jsx(Ds,{id:"time",name:"time",type:"time",value:u.time,onChange:p})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"status",children:"Status"}),y.jsxs(io,{name:"status",value:u.status,onValueChange:E=>m("status",E),children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um status"})}),y.jsx(Os,{className:"max-h-60",children:_.map(E=>y.jsx(Dn,{value:E.id,children:E.title},E.id))})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"service_package_id",children:"Pacote de Serviço (Opcional)"}),y.jsxs(io,{name:"service_package_id",value:u.service_package_id||"",onValueChange:E=>m("service_package_id",E),children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um pacote"})}),y.jsxs(Os,{className:"max-h-60",children:[y.jsx(Dn,{value:"",children:"Nenhum"}),k.map(E=>y.jsx(Dn,{value:E.id,children:E.name},E.id))]})]})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"description",children:"Descrição"}),y.jsx(B4,{id:"description",name:"description",value:u.description,onChange:p})]}),y.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[y.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[y.jsx(Wh,{className:"w-5 h-5 mr-2"})," Detalhes Financeiros"]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"value",children:"Valor Total do Trabalho"}),y.jsx(Ds,{id:"value",name:"value",type:"number",step:"0.01",value:u.value,onChange:p,placeholder:"Ex: 1500.00"})]}),y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"payment_type",children:"Forma de Pagamento"}),y.jsxs(io,{name:"payment_type",value:u.payment_type,onValueChange:E=>m("payment_type",E),children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione a forma de pagamento"})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"SOMENTE_AGENDADO",children:"Apenas Agendamento"}),y.jsx(Dn,{value:"integral",children:"Pagamento Integral"}),y.jsx(Dn,{value:"parcial",children:"Pagamento Parcial (Entrada + Restante)"}),y.jsx(Dn,{value:"parcelado_pix",children:"Parcelado no PIX"}),y.jsx(Dn,{value:"parcelado_cartao",children:"Parcelado no Cartão"})]})]})]}),u.payment_type==="integral"&&y.jsx(py,{label:"Carteira para Recebimento",selectedWallet:u.main_wallet_id,onWalletChange:E=>m("main_wallet_id",E),wallets:a,required:!0}),u.payment_type==="parcial"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"entry_value",children:"Valor da Entrada"}),y.jsx(Ds,{id:"entry_value",name:"entry_value",type:"number",step:"0.01",value:u.entry_value,onChange:p,placeholder:"Ex: 500.00"})]}),y.jsx(py,{label:"Carteira da Entrada",selectedWallet:u.entry_wallet_id,onWalletChange:E=>m("entry_wallet_id",E),wallets:a,required:!0}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(py,{label:"Carteira do Restante",selectedWallet:u.main_wallet_id,onWalletChange:E=>m("main_wallet_id",E),wallets:a,required:!0})})]}),(u.payment_type==="parcelado_pix"||u.payment_type==="parcelado_cartao")&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(gr,{htmlFor:"installments",children:"Número de Parcelas"}),y.jsx(Ds,{id:"installments",name:"installments",type:"number",step:"1",value:u.installments,onChange:p,placeholder:"Ex: 6"})]}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(py,{label:"Carteira para Recebimento",selectedWallet:u.main_wallet_id,onWalletChange:E=>m("main_wallet_id",E),wallets:a,required:!0})})]})]})]})};var Y1="Checkbox",[PZ,Ane]=id(Y1),[NZ,T_]=PZ(Y1);function TZ(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:p}=n,[m,b]=qm({prop:t,defaultProp:i??!1,onChange:c,caller:Y1}),[_,x]=N.useState(null),[k,E]=N.useState(null),T=N.useRef(!1),L=_?!!o||!!_.closest("form"):!0,j={checked:m,disabled:s,setChecked:b,control:_,setControl:x,name:a,form:o,value:h,hasConsumerStoppedPropagationRef:T,required:u,defaultChecked:Uh(i)?!1:i,isFormControl:L,bubbleInput:k,setBubbleInput:E};return y.jsx(NZ,{scope:e,...j,children:LZ(p)?p(j):r})}var z4="CheckboxTrigger",U4=N.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:s,value:o,disabled:a,checked:c,required:u,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:m,isFormControl:b,bubbleInput:_}=T_(z4,n),x=rr(i,h),k=N.useRef(c);return N.useEffect(()=>{const E=s?.form;if(E){const T=()=>p(k.current);return E.addEventListener("reset",T),()=>E.removeEventListener("reset",T)}},[s,p]),y.jsx(wn.button,{type:"button",role:"checkbox","aria-checked":Uh(c)?"mixed":c,"aria-required":u,"data-state":H4(c),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:x,onKeyDown:Bt(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Bt(t,E=>{p(T=>Uh(T)?!0:!T),_&&b&&(m.current=E.isPropagationStopped(),m.current||E.stopPropagation())})})});U4.displayName=z4;var L_=N.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:c,onCheckedChange:u,form:h,...p}=n;return y.jsx(TZ,{__scopeCheckbox:t,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:u,name:r,form:h,value:c,internal_do_not_use_render:({isFormControl:m})=>y.jsxs(y.Fragment,{children:[y.jsx(U4,{...p,ref:e,__scopeCheckbox:t}),m&&y.jsx(W4,{__scopeCheckbox:t})]})})});L_.displayName=Y1;var $4="CheckboxIndicator",q4=N.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=T_($4,t);return y.jsx(Ul,{present:r||Uh(s.checked)||s.checked===!0,children:y.jsx(wn.span,{"data-state":H4(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});q4.displayName=$4;var V4="CheckboxBubbleInput",W4=N.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:c,name:u,value:h,form:p,bubbleInput:m,setBubbleInput:b}=T_(V4,n),_=rr(t,b),x=u3(s),k=TN(r);N.useEffect(()=>{const T=m;if(!T)return;const L=window.HTMLInputElement.prototype,B=Object.getOwnPropertyDescriptor(L,"checked").set,W=!i.current;if(x!==s&&B){const U=new Event("click",{bubbles:W});T.indeterminate=Uh(s),B.call(T,Uh(s)?!1:s),T.dispatchEvent(U)}},[m,x,s,i]);const E=N.useRef(Uh(s)?!1:s);return y.jsx(wn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:c,name:u,value:h,form:p,...e,tabIndex:-1,ref:_,style:{...e.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});W4.displayName=V4;function LZ(n){return typeof n=="function"}function Uh(n){return n==="indeterminate"}function H4(n){return Uh(n)?"indeterminate":n?"checked":"unchecked"}const G4=N.forwardRef(({className:n,...e},t)=>y.jsx(L_,{ref:t,className:kn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(q4,{className:kn("flex items-center justify-center text-current"),children:y.jsx(Ux,{className:"h-4 w-4"})})}));G4.displayName=L_.displayName;const RZ=({subtasks:n,onAddSubtask:e,onToggleSubtask:t,onDeleteSubtask:r,cardExists:i})=>{const[s,o]=N.useState(""),a=()=>{s.trim()&&(e(s),o(""))};return i?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(Ds,{type:"text",placeholder:"Nova subtarefa...",value:s,onChange:c=>o(c.target.value),onKeyPress:c=>{c.key==="Enter"&&a()},className:"flex-grow"}),y.jsxs(mn,{onClick:a,children:[y.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),y.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[(n||[]).map(c=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-700 rounded-md group",children:[y.jsxs("label",{className:"flex items-center space-x-2 text-sm text-slate-700 dark:text-slate-300 cursor-pointer",children:[y.jsx(G4,{checked:c.completed,onCheckedChange:()=>t(c.id)}),y.jsx("span",{className:c.completed?"line-through text-slate-500 dark:text-slate-400":"",children:c.text})]}),y.jsx(mn,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100",onClick:()=>r(c.id),children:y.jsx(Vx,{size:14,className:"text-red-500"})})]},c.id||c.text)),(n||[]).length===0&&y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhuma subtarefa adicionada."})]})]}):y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(E1,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou gerenciar subtarefas."]})},IZ=({comments:n,onAddComment:e,cardExists:t,onAfterComment:r})=>{const[i,s]=N.useState(""),{settings:o}=Po(),a=async()=>{i.trim()&&(await e(i),s(""),r&&r())};if(!t)return y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(E1,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou ver comentários."]});const c=u=>{if(!u)return"?";const h=u.split(" ");return h.length>1?`${h[0][0]}${h[h.length-1][0]}`.toUpperCase():u.substring(0,2).toUpperCase()};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin p-1",children:n&&n.length>0?n.slice().sort((u,h)=>new Date(u.date)-new Date(h.date)).map(u=>y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs(jv,{className:"h-8 w-8",children:[y.jsx(Mv,{src:u.user_photo_url,alt:u.user}),y.jsx(Ov,{children:c(u.user)})]}),y.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:u.user}),y.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(u.date).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),y.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:u.text})]})]},u.id||u.date)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum comentário ainda."})}),y.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 flex items-start space-x-3",children:[y.jsxs(jv,{className:"h-8 w-8 mt-1",children:[y.jsx(Mv,{src:o?.profile_photo,alt:o?.user_name}),y.jsx(Ov,{children:c(o?.user_name)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx(Ds,{type:"text",value:i,onChange:u=>s(u.target.value),className:"flex-1",placeholder:"Adicionar comentário...",onKeyPress:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),a())}}),y.jsxs(mn,{onClick:a,size:"sm",className:"mt-2",children:[y.jsx(Jq,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]})},jZ=({history:n})=>y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:n&&n.length>0?n.slice().reverse().map((e,t)=>y.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg shadow-sm",children:[y.jsx("div",{className:"mt-1 w-2.5 h-2.5 bg-orange-300 rounded-full flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:e.action}),y.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(e.date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),e.user&&` • ${e.user}`]})]}),y.jsx(JP,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]},t)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum histórico disponível."})}),MZ=({activeTab:n,setActiveTab:e,cardId:t,subtasksCount:r,commentsCount:i})=>{const s=[{id:"details",label:"Detalhes"},{id:"subtasks",label:`Subtarefas (${r||0})`}];return t&&(s.push({id:"comments",label:`Comentários (${i||0})`}),s.push({id:"history",label:"Histórico"})),y.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:s.map(o=>y.jsx("button",{onClick:()=>e(o.id),className:`px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap ${n===o.id?"text-neutral-600 border-b-2 border-neutral-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:o.label},o.id))})},Gg=({label:n,children:e,className:t})=>y.jsxs("div",{className:t,children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:n}),e]}),OZ=({initialData:n,onSave:e,onCancel:t,onOpenClientModal:r,isSaving:i})=>{const{clients:s,servicePackages:o}=Po(),[a,c]=N.useState(n||{}),u=m=>{const{name:b,value:_}=m.target;c(x=>({...x,[b]:_}))},h=(m,b)=>{let _={...a,[m]:b};if(m==="client_id"||m==="service_package_id"){const x=m==="client_id"?s.find(T=>T.id===b):s.find(T=>T.id===_.client_id),k=m==="service_package_id"?o.find(T=>T.id===b):o.find(T=>T.id===_.service_package_id);let E="";x&&k?E=`${x.name} - ${k.name}`:x?E=x.name:k&&(E=k.name),_.title||(_.title=E),m==="service_package_id"&&k&&(_.value=k.price_cash_pix||k.price_card||"")}c(_)},p=m=>{m.preventDefault(),e(a)};return y.jsxs("form",{id:"quick-create-form",onSubmit:p,className:"space-y-4",children:[y.jsx(Gg,{label:"Título do Trabalho*",children:y.jsx(Ds,{name:"title",value:a.title||"",onChange:u,placeholder:"Ex: Ensaio de Casamento de [Cliente]",required:!0,disabled:i})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(Gg,{label:"Data",children:y.jsx(Ds,{name:"date",type:"date",value:a.date||"",onChange:u,disabled:i})}),y.jsx(Gg,{label:"Valor Total (R$)",children:y.jsx(Ds,{name:"value",type:"number",value:a.value||"",onChange:u,placeholder:"0,00",step:"0.01",min:"0",disabled:i})})]}),y.jsx(Gg,{label:"Cliente Vinculado",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs(io,{name:"client_id",value:a.client_id||"",onValueChange:m=>h("client_id",m),disabled:i,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um cliente..."})}),y.jsx(Os,{className:"max-h-60",children:(s||[]).map(m=>y.jsx(Dn,{value:m.id,children:m.name},m.id))})]}),y.jsx(mn,{type:"button",variant:"outline",onClick:r,disabled:i,children:y.jsx(Kd,{className:"w-4 h-4"})})]})}),y.jsx(Gg,{label:"Pacote de Serviços",children:y.jsxs(io,{name:"service_package_id",value:a.service_package_id||"",onValueChange:m=>h("service_package_id",m),disabled:i,children:[y.jsx(Ms,{children:y.jsx(so,{placeholder:"Selecione um pacote..."})}),y.jsxs(Os,{children:[y.jsx(Dn,{value:"",children:"Nenhum"}),(o||[]).map(m=>y.jsxs(Dn,{value:m.id,children:[m.name," - R$ ",Number(m.price_cash_pix||m.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]},m.id))]})]})})]})},DC=[{text:"Confirmar detalhes do evento com o cliente",completed:!1},{text:"Verificar e preparar equipamento fotográfico",completed:!1},{text:"Scout do local (se aplicável)",completed:!1},{text:"Definir cronograma do dia do evento/ensaio",completed:!1},{text:"Realizar o evento/ensaio fotográfico",completed:!1},{text:"Fazer backup de todas as fotos e vídeos",completed:!1},{text:"Selecionar as melhores fotos (curadoria)",completed:!1},{text:"Edição e tratamento das imagens selecionadas",completed:!1},{text:"Preparar galeria online ou prévia para o cliente",completed:!1},{text:"Enviar prévia para aprovação do cliente",completed:!1},{text:"Realizar ajustes finais (se necessário)",completed:!1},{text:"Preparar e exportar arquivos finais em alta resolução",completed:!1},{text:"Entregar o material final ao cliente",completed:!1},{text:"Enviar nota fiscal (se aplicável)",completed:!1},{text:"Solicitar feedback/depoimento do cliente",completed:!1},{text:"Arquivar projeto e materiais",completed:!1}],DZ=()=>{const{clients:n,servicePackages:e,addWorkflowCard:t,updateWorkflowCard:r,getClientById:i,getServicePackageById:s,addComment:o,refreshData:a,user:c,settings:u,getWorkflowCardById:h}=Po(),{toast:p}=Ta(),{openModals:m,closeModal:b,openModal:_}=cp(),{isOpen:x,cardId:k,initialStatus:E,initialData:T}=m.workflow||{},L=k?h(k):null,j=N.useCallback(()=>{const ue=u?.workflow_columns?.[0]?.id||"novo-lead";return{title:"",client_id:"",service_package_id:"",description:"",date:"",time:"",value:"",tags:[],status:E||ue,contract_url:"",contract_name:"",contract_status:"pending",comments:[],history:[],subtasks:DC.map(F=>({...F,id:Math.random().toString(36).substr(2,9)})),order:0,archived:!1,sync_google_calendar:!1,payment_type:"SOMENTE_AGENDADO",payment_method:"",entry_value:"",installments:"",num_installments:"",card_processing_days:"",entry_paid:!1,first_installment_date:"",createFinancialTransaction:!0,main_wallet_id:"",entry_wallet_id:"",...T}},[u,E,T]),[B,W]=N.useState(j()),[U,q]=N.useState("details"),[ie,ve]=N.useState(!1),[$,z]=N.useState("quick"),le=L?`workflow_form_draft_${L.id}`:`workflow_form_draft_new_${E||"default"}`;N.useEffect(()=>{if(x){z(L?"full":"quick");const ue=localStorage.getItem(le);let se=j();L&&(se={...j(),...L,client_id:L.client_id||"",service_package_id:L.service_package_id||"",value:L.value!==void 0&&L.value!==null?String(L.value):"",entry_value:L.entry_value!==void 0&&L.entry_value!==null?String(L.entry_value):"",installments:L.installments!==void 0&&L.installments!==null?String(L.installments):"",num_installments:L.num_installments!==void 0&&L.num_installments!==null?String(L.num_installments):"",card_processing_days:L.card_processing_days!==void 0&&L.card_processing_days!==null?String(L.card_processing_days):"",subtasks:L.subtasks&&L.subtasks.length>0?L.subtasks.map(te=>({...te,id:te.id||Math.random().toString(36).substr(2,9)})):DC.map(te=>({...te,id:Math.random().toString(36).substr(2,9)}))});const F=ue?{...se,...JSON.parse(ue)}:se;W(F),q("details")}},[L,x,j,le]),N.useEffect(()=>{x&&localStorage.setItem(le,JSON.stringify(B))},[B,x,le]);const ne=()=>{localStorage.removeItem(le),b("workflow")},ee=async ue=>{ve(!0);const se=ue.title.trim()||"Novo Trabalho",F=ue.date||null,te=(ue.payment_type==="ENTRADA_PARCELAS"||ue.payment_type==="PIX_PARCELADO"||ue.payment_type==="CARTAO_PARCELADO")&&parseInt(ue.installments||ue.num_installments,10)||null;let Q=ue.status;L||(Q=E||(ue.date?"agendado":u?.workflow_columns?.[0]?.id||"novo-lead"));const ce={...B,...ue,user_id:c.id,title:se,date:F,client_id:ue.client_id||null,service_package_id:ue.service_package_id||null,first_installment_date:ue.first_installment_date||null,value:parseFloat(ue.value)||null,entry_value:parseFloat(ue.entry_value)||null,history:[{action:"Criado",date:new Date().toISOString(),user:u.user_name||c.email}],status:Q,installments:te,num_installments:te,card_processing_days:(ue.payment_type==="CARTAO_CREDITO"||ue.payment_type==="CARTAO_PARCELADO")&&parseInt(ue.card_processing_days,10)||null,entry_paid:ue.payment_type==="ENTRADA_PARCELAS"||ue.payment_type==="INTEGRAL"?ue.entry_paid:!1,subtasks:B.subtasks.map(pe=>({text:pe.text,completed:pe.completed,id:pe.id||Math.random().toString(36).substr(2,9)})),main_wallet_id:ue.main_wallet_id||null,entry_wallet_id:ue.entry_wallet_id||null};try{L&&L.id?(await r(L.id,ce),p({title:"Sucesso!",description:`Card "${se}" atualizado.`})):(await t(ce),p({title:"Sucesso!",description:`Agendamento "${se}" criado.`})),localStorage.removeItem(le),await a(),ne()}catch(pe){p({title:"Erro ao Salvar",description:pe.message||"Não foi possível salvar.",variant:"destructive",duration:7e3,action:pe.message.includes("required fields")||pe.message.includes("obrigatórios")?y.jsx(mn,{variant:"outline",size:"sm",onClick:()=>{z("full"),q("details")},children:"Verificar Campos"}):void 0})}finally{ve(!1)}},G=async ue=>{if(!(!L||!L.id))try{const se=await o(L.id,ue);W(F=>({...F,comments:se.comments,history:se.history})),p({title:"Comentário Adicionado"})}catch(se){p({title:"Erro",description:se.message,variant:"destructive"})}},he=ue=>W(se=>({...se,subtasks:[...se.subtasks||[],{id:Math.random().toString(36).substr(2,9),text:ue,completed:!1}]})),X=ue=>W(se=>({...se,subtasks:(se.subtasks||[]).map(F=>F.id===ue?{...F,completed:!F.completed}:F)})),fe=ue=>W(se=>({...se,subtasks:(se.subtasks||[]).filter(F=>F.id!==ue)}));return x?y.jsxs(ka,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(Ki.div,{initial:{opacity:0,y:50,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.98},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-2xl w-full max-w-3xl shadow-2xl flex flex-col max-h-[95vh] z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:L?"Editar Agendamento":"Novo Agendamento"}),y.jsx(mn,{variant:"ghost",size:"icon",onClick:ne,className:"w-9 h-9 rounded-full",disabled:ie,children:y.jsx(ef,{className:"w-5 h-5"})})]}),$==="full"&&y.jsx(MZ,{activeTab:U,setActiveTab:q,cardId:L?.id,subtasksCount:B.subtasks?.length,commentsCount:B.comments?.length}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 scrollbar-thin",children:[$==="quick"&&y.jsx(OZ,{initialData:B,onSave:ee,onCancel:ne,onOpenClientModal:()=>_("client",{}),isSaving:ie}),$==="full"&&U==="details"&&y.jsx(kZ,{card:B,onSave:ee,onCancel:ne,isSaving:ie}),$==="full"&&U==="subtasks"&&y.jsx(RZ,{subtasks:B.subtasks,onAddSubtask:he,onToggleSubtask:X,onDeleteSubtask:fe,cardExists:!!L?.id}),$==="full"&&U==="comments"&&y.jsx(IZ,{comments:B.comments,onAddComment:G,cardExists:!!L?.id,onAfterComment:()=>q("comments")}),$==="full"&&U==="history"&&L?.id&&y.jsx(jZ,{history:B.history})]}),$==="quick"?y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsxs(mn,{type:"button",variant:"ghost",onClick:()=>z("full"),disabled:ie,children:["Mais Opções ",y.jsx(WP,{className:"w-4 h-4 ml-2"})]}),y.jsxs("div",{children:[y.jsx(mn,{type:"button",variant:"outline",onClick:ne,disabled:ie,className:"mr-2",children:"Cancelar"}),y.jsxs(mn,{type:"submit",form:"quick-create-form",className:"btn-custom-gradient text-white",disabled:ie,children:[ie?y.jsx(Zf,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(OA,{className:"w-4 h-4 mr-2"}),ie?"Salvando...":L?"Salvar":"Criar"]})]})]}):y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-end space-x-3 bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsx(mn,{type:"button",variant:"outline",onClick:ne,disabled:ie,className:"mr-auto",children:"Cancelar"}),y.jsxs(mn,{type:"submit",form:"workflow-form",className:"btn-custom-gradient text-white",disabled:ie,children:[ie?y.jsx(Zf,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(OA,{className:"w-4 h-4 mr-2"}),ie?"Salvando...":L?"Salvar Alterações":"Salvar Agendamento"]})]})]},"workflow-modal-content")},"workflow-modal-backdrop"),y.jsx(V3,{})]}):null},FZ=["Casamento","Gestante","Newborn","Família","Infantil","Debutante (15 anos)","Formatura","Empresarial/Corporativo","Produtos","Gastronomia","Moda","Esportivo","Eventos Sociais","Imobiliário","Pets","Sensual/Boudoir","Outro"],Y4="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",BZ=({isOpen:n,onClose:e,servicePackage:t,onSaveSuccess:r})=>{const{toast:i}=Ta(),{addServicePackage:s,updateServicePackage:o,user:a}=Po(),[c,u]=N.useState(!1),h=N.useCallback(()=>({name:"",description:"",niche:"",price_cash_pix:"",price_card:"",cost:"",items_included:[{name:"",quantity:1}],payment_options:[],details:"",user_id:a?.id||null}),[a]),[p,m]=N.useState(h()),b=t?`service_package_form_draft_${t.id}`:"service_package_form_draft_new";N.useEffect(()=>{if(n){const W=localStorage.getItem(b);if(W){const U=JSON.parse(W);m({...U,user_id:U.user_id||a?.id})}else m(t?{name:t.name||"",description:t.description||"",niche:t.niche||"",price_cash_pix:t.price_cash_pix!==void 0?String(t.price_cash_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost:t.cost!==void 0?String(t.cost):"",items_included:t.items_included&&t.items_included.length>0?t.items_included:[{name:"",quantity:1}],payment_options:t.payment_options||[],details:t.details||"",user_id:t.user_id||a?.id}:h())}},[t,n,b,h,a]),N.useEffect(()=>{n&&localStorage.setItem(b,JSON.stringify(p))},[p,n,b]);const _=()=>{localStorage.removeItem(b),e()},x=(W,U)=>{m(q=>({...q,[W]:U}))},k=(W,U,q)=>{const ie=[...p.items_included];ie[W][U]=U==="quantity"?parseInt(q,10)||1:q,m(ve=>({...ve,items_included:ie}))},E=()=>{m(W=>({...W,items_included:[...W.items_included,{name:"",quantity:1}]}))},T=W=>{const U=p.items_included.filter((q,ie)=>ie!==W);U.length===0?m(q=>({...q,items_included:[{name:"",quantity:1}]})):m(q=>({...q,items_included:U}))},L=W=>{m(U=>{const q=U.payment_options||[];return q.includes(W)?{...U,payment_options:q.filter(ie=>ie!==W)}:{...U,payment_options:[...q,W]}})},j=async W=>{if(W.preventDefault(),!a){i({title:"Erro de Autenticação",description:"Usuário não está autenticado.",variant:"destructive"});return}if(!p.name||!p.price_cash_pix||!p.niche){i({title:"Erro de Validação",description:"Nome do pacote, Nicho e Preço (à vista/Pix) são obrigatórios.",variant:"destructive"});return}u(!0);const U={...p,price_cash_pix:parseFloat(p.price_cash_pix)||0,price_card:p.price_card?parseFloat(p.price_card):null,cost:p.cost?parseFloat(p.cost):null,items_included:p.items_included.filter(q=>q.name.trim()!==""),user_id:a.id};try{t&&t.id?await o(t.id,U):await s(U),i({title:"Pacote Salvo",description:`O pacote "${p.name}" foi salvo com sucesso!`}),localStorage.removeItem(b),r&&r(),e()}catch(q){i({title:"Erro ao Salvar Pacote",description:q.message,variant:"destructive"})}finally{u(!1)}},B=["Entrada + Parcelamento","Parcelamento Integral Cartão","À vista com Desconto"];return y.jsx(ka,{children:n&&y.jsx(Ki.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",id:"novo-pacote-backdrop-id",onClick:_,children:y.jsxs(Ki.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",id:"novo-pacote-modal-id",onClick:W=>W.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Pacote de Serviço":"Novo Pacote de Serviço"}),y.jsx(mn,{variant:"ghost",size:"icon",onClick:_,className:"w-8 h-8",disabled:c,children:y.jsx(ef,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:j,className:"space-y-4",children:[y.jsxs(Yg,{title:"Informações Básicas",children:[y.jsx(If,{icon:Pm,label:"Nome do Pacote *",htmlFor:"pkg-name",children:y.jsx("input",{id:"pkg-name",type:"text",value:p.name,onChange:W=>x("name",W.target.value),placeholder:"Ex: Ensaio Casal Completo",required:!0,disabled:c})}),y.jsx(If,{icon:eV,label:"Nicho do Serviço *",htmlFor:"pkg-niche",children:y.jsxs("select",{id:"pkg-niche",value:p.niche,onChange:W=>x("niche",W.target.value),required:!0,className:Y4,disabled:c,children:[y.jsx("option",{value:"",children:"Selecione um nicho"}),FZ.map(W=>y.jsx("option",{value:W,children:W},W))]})}),y.jsx(If,{icon:$m,label:"Descrição",htmlFor:"pkg-desc",children:y.jsx("textarea",{id:"pkg-desc",value:p.description,onChange:W=>x("description",W.target.value),placeholder:"Detalhes sobre o pacote...",rows:"3",disabled:c})})]}),y.jsxs(Yg,{title:"Precificação",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(If,{icon:Wh,label:"Preço (À vista/Pix) *",htmlFor:"pkg-price-cash",children:y.jsx("input",{id:"pkg-price-cash",type:"number",value:p.price_cash_pix,onChange:W=>x("price_cash_pix",W.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:c})}),y.jsx(If,{icon:Wh,label:"Preço (Cartão)",htmlFor:"pkg-price-card",children:y.jsx("input",{id:"pkg-price-card",type:"number",value:p.price_card,onChange:W=>x("price_card",W.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:c})})]}),y.jsx(If,{icon:E1,label:"Custo Estimado do Pacote",htmlFor:"pkg-cost",children:y.jsx("input",{id:"pkg-cost",type:"number",value:p.cost,onChange:W=>x("cost",W.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:c})})]}),y.jsxs(Yg,{title:"Itens Inclusos",children:[p.items_included.map((W,U)=>y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("input",{type:"text",value:W.name,onChange:q=>k(U,"name",q.target.value),placeholder:"Nome do item",className:"flex-grow px-3 py-2 border border-border rounded-lg bg-background/70",disabled:c}),y.jsx("input",{type:"number",value:W.quantity,onChange:q=>k(U,"quantity",q.target.value),placeholder:"Qtd",min:"1",className:"w-20 px-3 py-2 border border-border rounded-lg bg-background/70",disabled:c}),y.jsx(mn,{type:"button",variant:"ghost",size:"icon",onClick:()=>T(U),className:"text-red-500",disabled:c,children:y.jsx(Vx,{className:"w-4 h-4"})})]},U)),y.jsxs(mn,{type:"button",variant:"outline",onClick:E,className:"mt-2",disabled:c,children:[y.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]})]}),y.jsx(Yg,{title:"Opções de Pagamento",children:y.jsx("div",{className:"space-y-2",children:B.map(W=>y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:(p.payment_options||[]).includes(W),onChange:()=>L(W),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:c}),y.jsx("span",{className:"text-muted-foreground",children:W})]},W))})}),y.jsx(Yg,{title:"Detalhes Adicionais",children:y.jsx(If,{icon:Xq,label:"Observações/Termos",htmlFor:"pkg-details",children:y.jsx("textarea",{id:"pkg-details",value:p.details,onChange:W=>x("details",W.target.value),placeholder:"Informações extras, termos e condições...",rows:"4",disabled:c})})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(mn,{type:"button",variant:"outline",onClick:_,className:"flex-1",disabled:c,children:"Cancelar"}),y.jsx(mn,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:c,children:c?y.jsx(Zf,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alterações":"Criar Pacote"})]})]})]})})})},Yg=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),If=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),vn.Children.map(r,i=>i.type==="select"?vn.cloneElement(i,{className:`${i.props.className||""} ${Y4}`}):vn.cloneElement(i,{className:`${i.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),zZ=["Fotos Avulsas","Álbuns de Fotos","Quadros","Canvas","Acrílico","Metal Print","Photobook","Calendários","Cards/Cartões","Blocos","Imãs","Buttons/Bottons","Adesivos","Porta-retratos","Molduras","Pen Drive","CD/DVD","Galeria Online","Sessão Fotográfica","Outros"],V2="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",UZ=({isOpen:n,onClose:e,product:t,onSaveSuccess:r})=>{const{toast:i}=Ta(),{addProduct:s,updateProduct:o,user:a}=Po(),[c,u]=N.useState(!1),h=N.useCallback(()=>({name:"",description:"",code:"",category:"",price_pix:"",price_card:"",cost_price:"",stock_quantity:"",min_stock:"",unit:"un",active:!0,user_id:a?.id||null}),[a]),[p,m]=N.useState(h()),b=t?`product_form_draft_${t.id}`:"product_form_draft_new";N.useEffect(()=>{if(n){const L=localStorage.getItem(b);if(L){const j=JSON.parse(L);m({...j,user_id:j.user_id||a?.id})}else m(t?{name:t.name||"",description:t.description||"",code:t.code||"",category:t.category||"",price_pix:t.price_pix!==void 0?String(t.price_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost_price:t.cost_price!==void 0?String(t.cost_price):"",stock_quantity:t.stock_quantity!==void 0?String(t.stock_quantity):"",min_stock:t.min_stock!==void 0?String(t.min_stock):"",unit:t.unit||"un",active:t.active!==void 0?t.active:!0,user_id:t.user_id||a?.id}:h())}},[t,n,b,h,a]),N.useEffect(()=>{n&&localStorage.setItem(b,JSON.stringify(p))},[p,n,b]);const _=()=>{localStorage.removeItem(b),e()},x=(L,j)=>{m(B=>({...B,[L]:j}))},k=()=>{const L=p.category?p.category.substring(0,3).toUpperCase():"PRD",j=Date.now().toString().slice(-6),B=Math.floor(Math.random()*100).toString().padStart(2,"0"),W=`${L}${j}${B}`;x("code",W)},E=async L=>{if(L.preventDefault(),!a){i({title:"Erro de Autenticação",description:"Usuário não está autenticado.",variant:"destructive"});return}if(!p.name||!p.price_pix||!p.category){i({title:"Erro de Validação",description:"Nome, Categoria e Preço PIX são obrigatórios.",variant:"destructive"});return}u(!0);const j={...p,price_pix:parseFloat(p.price_pix)||0,price_card:p.price_card?parseFloat(p.price_card):null,cost_price:p.cost_price?parseFloat(p.cost_price):null,stock_quantity:p.stock_quantity?parseInt(p.stock_quantity):null,min_stock:p.min_stock?parseInt(p.min_stock):null,user_id:a.id};try{t&&t.id?await o(t.id,j):await s(j),i({title:"Produto Salvo",description:`O produto "${p.name}" foi salvo com sucesso!`}),localStorage.removeItem(b),r&&r(),e()}catch(B){i({title:"Erro ao Salvar Produto",description:B.message,variant:"destructive"})}finally{u(!1)}},T=[{value:"un",label:"Unidade"},{value:"pç",label:"Peça"},{value:"kit",label:"Kit"},{value:"par",label:"Par"},{value:"cx",label:"Caixa"},{value:"pct",label:"Pacote"}];return y.jsx(ka,{children:n&&y.jsx(Ki.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:_,children:y.jsxs(Ki.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",onClick:L=>L.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Produto":"Novo Produto"}),y.jsx(mn,{variant:"ghost",size:"icon",onClick:_,className:"w-8 h-8",disabled:c,children:y.jsx(ef,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:E,className:"space-y-4",children:[y.jsxs(my,{title:"Informações Básicas",children:[y.jsx(qu,{icon:Ey,label:"Nome do Produto *",htmlFor:"product-name",children:y.jsx("input",{id:"product-name",type:"text",value:p.name,onChange:L=>x("name",L.target.value),placeholder:"Ex: Foto 10x15, Álbum Premium, Quadro 30x40",required:!0,disabled:c})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(qu,{icon:Pm,label:"Categoria *",htmlFor:"product-category",children:y.jsxs("select",{id:"product-category",value:p.category,onChange:L=>x("category",L.target.value),required:!0,className:V2,disabled:c,children:[y.jsx("option",{value:"",children:"Selecione uma categoria"}),zZ.map(L=>y.jsx("option",{value:L,children:L},L))]})}),y.jsx(qu,{icon:Uq,label:"Código do Produto",htmlFor:"product-code",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{id:"product-code",type:"text",value:p.code,onChange:L=>x("code",L.target.value),placeholder:"Ex: FOT001, ALB002",disabled:c,className:"flex-1"}),y.jsx(mn,{type:"button",variant:"outline",onClick:k,disabled:c,className:"px-3",children:"Gerar"})]})})]}),y.jsx(qu,{icon:$m,label:"Descrição",htmlFor:"product-desc",children:y.jsx("textarea",{id:"product-desc",value:p.description,onChange:L=>x("description",L.target.value),placeholder:"Detalhes sobre o produto, acabamento, tamanhos...",rows:"3",disabled:c})})]}),y.jsx(my,{title:"Precificação",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsx(qu,{icon:Wh,label:"Preço PIX *",htmlFor:"product-price-pix",children:y.jsx("input",{id:"product-price-pix",type:"number",value:p.price_pix,onChange:L=>x("price_pix",L.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:c})}),y.jsx(qu,{icon:Wh,label:"Preço Cartão",htmlFor:"product-price-card",children:y.jsx("input",{id:"product-price-card",type:"number",value:p.price_card,onChange:L=>x("price_card",L.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:c})}),y.jsx(qu,{icon:E1,label:"Preço de Custo",htmlFor:"product-cost",children:y.jsx("input",{id:"product-cost",type:"number",value:p.cost_price,onChange:L=>x("cost_price",L.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:c})})]})}),y.jsx(my,{title:"Controle de Estoque",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsx(qu,{icon:MA,label:"Quantidade em Estoque",htmlFor:"product-stock",children:y.jsx("input",{id:"product-stock",type:"number",value:p.stock_quantity,onChange:L=>x("stock_quantity",L.target.value),placeholder:"0",min:"0",disabled:c})}),y.jsx(qu,{icon:MA,label:"Estoque Mínimo",htmlFor:"product-min-stock",children:y.jsx("input",{id:"product-min-stock",type:"number",value:p.min_stock,onChange:L=>x("min_stock",L.target.value),placeholder:"0",min:"0",disabled:c})}),y.jsx(qu,{icon:Pm,label:"Unidade",htmlFor:"product-unit",children:y.jsx("select",{id:"product-unit",value:p.unit,onChange:L=>x("unit",L.target.value),className:V2,disabled:c,children:T.map(L=>y.jsx("option",{value:L.value,children:L.label},L.value))})})]})}),y.jsx(my,{title:"Status",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("input",{type:"checkbox",id:"product-active",checked:p.active,onChange:L=>x("active",L.target.checked),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:c}),y.jsx("label",{htmlFor:"product-active",className:"text-sm text-muted-foreground",children:"Produto ativo (disponível para vendas)"})]})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(mn,{type:"button",variant:"outline",onClick:_,className:"flex-1",disabled:c,children:"Cancelar"}),y.jsx(mn,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:c,children:c?y.jsx(Zf,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alterações":"Criar Produto"})]})]})]})})})},my=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),qu=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),vn.Children.map(r,i=>i.type==="select"||i.props?.className?.includes?.("grid")?vn.cloneElement(i,{className:`${i.props.className||""} ${V2}`}):vn.cloneElement(i,{className:`${i.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),$Z=()=>{const[n,e]=N.useState(null),[t,r]=N.useState(!1);N.useEffect(()=>{(async()=>{try{const{data:u,error:h}=await rt.from("anuncios").select("*").eq("esta_ativo",!0).order("created_at",{ascending:!1}).limit(1);if(h)throw h;if(u&&u.length>0){const p=u[0],m=localStorage.getItem(`anuncio_closed_${p.id}`),b=p.cooldown_reaparicao_minutos||60;if(m){const _=b*60*1e3;if(Date.now()-parseInt(m,10)<_)return}e(p),r(!0)}}catch(u){console.error("Erro ao buscar anúncio:",u)}})()},[]),N.useEffect(()=>{if(t&&n&&n.duracao_exibicao_segundos>0){const c=setTimeout(()=>{i()},n.duracao_exibicao_segundos*1e3);return()=>clearTimeout(c)}},[t,n]);const i=()=>{r(!1),n&&localStorage.setItem(`anuncio_closed_${n.id}`,Date.now().toString())},s=c=>{c&&(window.open(c,"_blank","noopener,noreferrer"),i())};if(!n)return null;const o={"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end",center:"items-center justify-center","bottom-left":"items-end justify-start","bottom-center":"items-end justify-center","bottom-right":"items-end justify-end"},a={small:"max-w-sm",medium:"max-w-md",large:"max-w-lg"};return y.jsx(ka,{children:t&&y.jsx(Ki.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:kn("fixed inset-0 z-[9999] flex p-4 bg-black/30 backdrop-blur-sm",o[n.posicao_anuncio]||o.center),onClick:i,children:y.jsx(Ki.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:c=>c.stopPropagation(),children:y.jsxs(m_,{className:kn("shadow-2xl w-full",a[n.tamanho_anuncio]||a.medium),children:[y.jsxs("button",{onClick:i,className:"absolute top-2 right-2 p-1 rounded-full bg-background/50 hover:bg-background/80 transition-colors z-10",children:[y.jsx(ef,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Fechar"})]}),n.imagem_url&&y.jsx("div",{className:"cursor-pointer",onClick:()=>s(n.link_imagem),children:y.jsx("img",{src:n.imagem_url,alt:n.titulo_anuncio,className:"w-full h-auto object-cover rounded-t-lg"})}),y.jsxs(g_,{children:[y.jsx(v_,{children:n.titulo_anuncio}),n.conteudo_anuncio&&y.jsx(y_,{children:n.conteudo_anuncio})]}),n.link_botao&&y.jsx(b_,{children:y.jsx(mn,{className:"w-full",onClick:()=>s(n.link_botao),children:"Saiba Mais"})})]})})})})},Qa=({featureName:n,children:e})=>{const{isFeatureEnabled:t}=Po();return t(n)?e:y.jsxs(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center p-8 bg-card rounded-xl",children:[y.jsx(Kq,{className:"w-16 h-16 text-destructive mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade não está habilitada para sua conta no momento."}),y.jsx("p",{className:"text-muted-foreground mt-1",children:"Por favor, contate o administrador do sistema para mais informações."})]})},qZ=N.lazy(()=>Lt(()=>import("./Dashboard-Cy3Ojmxa.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]))),VZ=N.lazy(()=>Lt(()=>import("./Clients-CsjIaY-s.js"),__vite__mapDeps([30,13,31,32,33,24,34]))),WZ=N.lazy(()=>Lt(()=>import("./ClientDetail-KiR2tFa7.js"),__vite__mapDeps([35,36,37,38,39,40,31,41,20,42,43,23,44]))),HZ=N.lazy(()=>Lt(()=>import("./Workflow-CI3xvUGn.js"),__vite__mapDeps([45,46,1,8,47,34,38,48,21,49,50,18,51,32,20,13,7,23,24,31,52,53,11,44,54]))),GZ=N.lazy(()=>Lt(()=>import("./Financial-DYv4HZE5.js"),__vite__mapDeps([55,18,17,12,33,14,20,7,8,56,23,24,57,58,59,60,37,32]))),YZ=N.lazy(()=>Lt(()=>import("./Calendar-zOD9pl5T.js"),__vite__mapDeps([61,62,63,20,32,54,12,28,57,64,65,66,59,60,27,38,67,68,8,69,70,44,71]))),KZ=N.lazy(()=>Lt(()=>import("./Reports-D3BKSVim.js"),__vite__mapDeps([72,19,73,63,20,7,8,59,28,60,33,18,22,74,75]))),XZ=N.lazy(()=>Lt(()=>import("./Settings-BFh48DUU.js"),__vite__mapDeps([76,62,68,8,77,34,20,7,63,78,79,53,37,80,81,66,58,60,50,82,83,12]))),ZZ=N.lazy(()=>Lt(()=>import("./AccountSettings-ZiULjjVf.js"),__vite__mapDeps([84,38,20,53,85]))),JZ=N.lazy(()=>Lt(()=>import("./ServicePackages-CUW3KVIz.js"),__vite__mapDeps([86,36,20,13,23,24]))),QZ=N.lazy(()=>Lt(()=>import("./MySetup-BWbG226U.js"),__vite__mapDeps([87,36,88,44,78,18,20,37,17,24,16]))),eJ=N.lazy(()=>Lt(()=>import("./Precifique-Ba04F0SA.js"),__vite__mapDeps([89,20,15,37,56,24,75,18,9,90,41]))),tJ=N.lazy(()=>Lt(()=>import("./ReservaInteligente-B6vFUxnp.js"),__vite__mapDeps([91,26,20,41,37,9,75,92]))),nJ=N.lazy(()=>Lt(()=>import("./Boards-CGhTxAzf.js"),__vite__mapDeps([93,3,4,5,24,94,20,95,29,96]))),rJ=N.lazy(()=>Lt(()=>import("./BoardDetail-CwPfV1Xi.js"),__vite__mapDeps([97,46,1,8,47,21,34,53,98,99,51,92,20,7,100,69,85]))),iJ=N.lazy(()=>Lt(()=>import("./PlansPage-lkgnZIQN.js"),__vite__mapDeps([101,102,16,90,103]))),sJ=N.lazy(()=>Lt(()=>import("./FormsPage-BJ9gmuqT.js"),__vite__mapDeps([104,20,13,105,106,34,94,107,100,69,24]))),oJ=N.lazy(()=>Lt(()=>import("./FormEditorPage-B1TCOEcL.js"),__vite__mapDeps([108,46,1,8,47,107,100,69,42,29]))),aJ=N.lazy(()=>Lt(()=>import("./CampaignSubmissionsPage-l64uSLTe.js"),__vite__mapDeps([109,73,105]))),lJ=N.lazy(()=>Lt(()=>import("./StudioPage-DTLekyMt.js"),__vite__mapDeps([110,83,20,100,24,81,66,58,60,94,32,111,112,25,53]))),cJ=N.lazy(()=>Lt(()=>import("./ContractListPage-BC_TYlwZ.js"),__vite__mapDeps([113,114,37,92,24,80,94,32,111,112,25]))),FC=N.lazy(()=>Lt(()=>import("./ContractEditorPage-DEMbtRCL.js"),__vite__mapDeps([115,95,64,116,21,31,53,77]))),BC=N.lazy(()=>Lt(()=>import("./ProposalEditorPage-BJlYeWYa.js"),__vite__mapDeps([117,118,119,5,4,34,31,40,120,8,47,95,99,121,46,1,122,36,20,37,85,68,64,123,7,50,29,11,88,12,69,116,124,102,100,53,49,21]))),uJ=N.lazy(()=>Lt(()=>import("./BlogPage-DYbuNhQY.js"),[])),dJ=N.lazy(()=>Lt(()=>import("./AvailabilityManagerPage-CA94zbph.js"),__vite__mapDeps([125,114,70,20,65,24,59,60]))),hJ=N.lazy(()=>Lt(()=>import("./ReferralsPage-CVwSb-yF.js"),__vite__mapDeps([126,36,114,31,69,74]))),fJ=N.lazy(()=>Lt(()=>import("./DataManagementPage-tkKK4qNS.js"),__vite__mapDeps([127,36,114,74,83,34,38,85,43,24]))),pJ=N.lazy(()=>Lt(()=>import("./GoMovPage-hS4lhJ7Z.js"),__vite__mapDeps([128,48,129,38,130,75]))),mJ=N.lazy(()=>Lt(()=>import("./InspiraPage-JJhPXN-n.js"),__vite__mapDeps([131,36,83,32,39,112,102,69]))),gJ=N.lazy(()=>Lt(()=>import("./SeasonPage-Czao5x0l.js"),__vite__mapDeps([132,18,100,69,102,39,133,134]))),vJ=N.lazy(()=>Lt(()=>import("./RespostasRapidasPage-B-PLx6B6.js"),__vite__mapDeps([135,36,34,32,69,24]))),yJ=N.lazy(()=>Lt(()=>import("./SpotPage-DvYUhrEK.js"),__vite__mapDeps([136,36,38,32,102,53,124,133,130,39,77,24,100]))),bJ=N.lazy(()=>Lt(()=>import("./RivalPage-UjdvHTVF.js"),__vite__mapDeps([137,36,26,9,32,102,18,83,74]))),wJ=N.lazy(()=>Lt(()=>import("./MetasPage-DrMyuQWX.js"),__vite__mapDeps([138,26,9,129,74,139,22,18,10,103]))),xJ=N.lazy(()=>Lt(()=>import("./OpportunePage-Cg8_Daoe.js"),__vite__mapDeps([140,36,71,32,38,103,9,102,18])));N.lazy(()=>Lt(()=>import("./FindPageSimple-Cgg5U-8l.js"),__vite__mapDeps([141,38,102])));const _J=N.lazy(()=>Lt(()=>import("./FindPage--VLpaSF_.js"),__vite__mapDeps([142,36,38,102,39,81,66,58,60,32,37,52,79,33,75,67,24,120,77]))),zC="gofotografo_last_active_tab",UC="gofotografo_sidebar_collapsed",SJ=({children:n})=>{const e=ru(),{toast:t}=Ta(),{settings:r,loadingAuth:i,setSettings:s,pendingReserveAllocations:o,allocateToSavingGoal:a,dismissPendingAllocation:c,savingGoals:u,refreshData:h,isFeatureEnabled:p}=Po(),{theme:m}=AE(),{isAnyModalOpen:b,openModals:_,closeModal:x}=cp(),[k,E]=N.useState({}),T=()=>{const F=e.pathname;return F.startsWith("/clients/")?"clients":F.startsWith("/quadros")?"quadros":F.startsWith("/forms")||F.startsWith("/campaigns")?"clients":F.startsWith("/studio")||F.startsWith("/contracts")?"studio":F.startsWith("/blog")?"blog":F.startsWith("/availability-manager")?"calendar":F.startsWith("/referrals")?"referrals":F.substring(1)||"dashboard"},{activeTab:L,setActiveTab:j,initialFinancialFilter:B}=_K(localStorage.getItem(zC)||T()),{isMobile:W}=SK();AK(b);const[U,q]=N.useState(()=>{const F=localStorage.getItem(UC);return F!==null?JSON.parse(F):!0}),[ie,ve]=N.useState(!0);if(N.useEffect(()=>{localStorage.setItem(UC,JSON.stringify(U)),window.dispatchEvent(new Event("resize"))},[U]),N.useEffect(()=>{const F=T();F!==L&&j(F),e.pathname.startsWith("/quadros/")||E({})},[e.pathname]),N.useEffect(()=>{localStorage.setItem(zC,L)},[L]),i)return y.jsx(_r,{});const $=e.pathname.startsWith("/quadros/"),z=e.pathname==="/quadros",ne=["/rival","/metas","/respostas","/spot","/gomov","/season","/opportune","/inspira"].includes(e.pathname),ee=_.financial,G=_.financialWizard,he=_.servicePackage,X=_.product,se=m==="dark"?"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png":"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20claro%20go.fotografo%20cor%20.png";return y.jsxs("div",{className:`flex flex-col bg-background text-foreground ${W?"":"min-h-screen"}`,children:[y.jsx($Z,{}),o.map((F,te)=>y.jsx(xK,{allocation:F,savingGoals:u,onConfirm:async Q=>{try{await a(Q,F.reserveAmount),t({title:"Sucesso!",description:`R$ ${F.reserveAmount.toFixed(2)} alocados para a meta.`}),c(F.transactionId)}catch(ce){t({title:"Erro ao alocar",description:ce.message,variant:"destructive"})}},onDismiss:()=>c(F.transactionId)},F.transactionId+te)),y.jsxs("div",{className:`flex ${W?"flex-col":"h-screen"}`,children:[!W&&y.jsxs("div",{className:"relative",children:[y.jsx(zV,{activeTab:L,setActiveTab:j,collapsed:U,setCollapsed:q}),y.jsx("button",{onClick:()=>q(!U),className:`
                absolute top-1/2 -translate-y-1/2 
                h-12 w-6 bg-card border border-border rounded-r-lg 
                flex items-center justify-center text-muted-foreground hover:bg-accent 
                transition-all duration-300 ease-in-out z-40
                ${U?"left-16":"left-64"}
              `,title:U?"Expandir menu":"Recolher menu",children:U?y.jsx(ZP,{className:"w-4 h-4"}):y.jsx(qq,{className:"w-4 h-4"})})]}),W&&y.jsx(ka,{children:ie&&y.jsx(Ki.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"mobile-header fixed top-0 left-0 right-0 bg-card/60 dark:bg-card/50 backdrop-blur-xl border-b border-border z-[450] flex items-center justify-center px-4 shadow-sm",children:y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("img",{alt:"Logo GO.FOTÓGRAFO",className:"h-10 w-auto object-contain",src:se})})})}),y.jsx("main",{id:"main-app-container",className:kn("main-content-container flex-1 transition-all duration-300 ease-in-out",W?`p-4 pb-24 ${ie?"pt-20":"pt-4"}`:ne?`${U?"ml-16":"ml-64"}`:`p-6 sm:p-8 ${U?"ml-16":"ml-64"}`,"overflow-y-auto",$&&"fundo-quadro-ativo p-0 sm:p-0",z&&"pagina-quadros"),style:k,children:y.jsx("div",{className:kn("h-auto min-h-full",!$&&!ne&&"dashboard-page-container"),children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(ka,{mode:"wait",children:y.jsx(Ki.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:y.jsxs(_E,{children:[y.jsx(jt,{path:"/dashboard",element:y.jsx(qZ,{setActiveTab:j,isMobile:W})}),y.jsx(jt,{path:"/clients",element:y.jsx(VZ,{isMobile:W})}),y.jsx(jt,{path:"/clients/:clientId",element:y.jsx(WZ,{isMobile:W})}),y.jsx(jt,{path:"/workflow",element:y.jsx(HZ,{isMobile:W})}),y.jsx(jt,{path:"/financial",element:y.jsx(GZ,{isMobile:W,initialFilter:B})}),y.jsx(jt,{path:"/calendar",element:y.jsx(Qa,{featureName:"agenda_pro",children:y.jsx(YZ,{isMobile:W,setActiveTab:j})})}),y.jsx(jt,{path:"/reports",element:y.jsx(Qa,{featureName:"relatorios",children:y.jsx(KZ,{})})}),y.jsx(jt,{path:"/service-packages",element:y.jsx(Qa,{featureName:"pacotes_servico",children:y.jsx(JZ,{isMobile:W})})}),y.jsx(jt,{path:"/my-setup",element:y.jsx(Qa,{featureName:"meu_setup",children:y.jsx(QZ,{isMobile:W})})}),y.jsx(jt,{path:"/precifique",element:y.jsx(Qa,{featureName:"precifique",children:y.jsx(eJ,{isMobile:W})})}),y.jsx(jt,{path:"/reserva-inteligente",element:y.jsx(Qa,{featureName:"reserva_inteligente",children:y.jsx(tJ,{isMobile:W})})}),y.jsx(jt,{path:"/quadros",element:y.jsx(Qa,{featureName:"quadros",children:y.jsx(nJ,{setSidebarCollapsed:q})})}),y.jsx(jt,{path:"/quadros/:boardId",element:y.jsx(Qa,{featureName:"quadros",children:y.jsx(rJ,{setPageStyle:E})})}),y.jsx(jt,{path:"/forms",element:y.jsx(Qa,{featureName:"formularios_captacao",children:y.jsx(sJ,{})})}),y.jsx(jt,{path:"/forms/edit/:formId",element:y.jsx(Qa,{featureName:"formularios_captacao",children:y.jsx(oJ,{})})}),y.jsx(jt,{path:"/campaigns/:formId",element:y.jsx(Qa,{featureName:"formularios_captacao",children:y.jsx(aJ,{})})}),y.jsxs(jt,{path:"/studio/*",element:y.jsx(Qa,{featureName:"propostas_avancadas",children:y.jsx(ox,{})}),children:[y.jsx(jt,{index:!0,element:y.jsx(lJ,{})}),y.jsx(jt,{path:"proposals/new",element:y.jsx(BC,{})}),y.jsx(jt,{path:"proposals/edit/:proposalId",element:y.jsx(BC,{})}),y.jsx(jt,{path:"contracts/new",element:y.jsx(FC,{mode:"new"})}),y.jsx(jt,{path:"contracts/edit/:contractId",element:y.jsx(FC,{mode:"edit"})})]}),y.jsx(jt,{path:"/contracts",element:y.jsx(Qa,{featureName:"contratos",children:y.jsx(cJ,{})})}),y.jsx(jt,{path:"/availability-manager",element:y.jsx(Qa,{featureName:"agenda_pro",children:y.jsx(dJ,{isMobile:W})})}),y.jsx(jt,{path:"/referrals",element:y.jsx(hJ,{})}),y.jsx(jt,{path:"/gomov",element:y.jsx(pJ,{})}),y.jsx(jt,{path:"/inspira",element:y.jsx(mJ,{})}),y.jsx(jt,{path:"/season",element:y.jsx(gJ,{})}),y.jsx(jt,{path:"/respostas-rapidas",element:y.jsx(vJ,{})}),y.jsx(jt,{path:"/spot",element:y.jsx(yJ,{})}),y.jsx(jt,{path:"/rival",element:y.jsx(bJ,{})}),y.jsx(jt,{path:"/metas",element:y.jsx(wJ,{})}),y.jsx(jt,{path:"/opportune",element:y.jsx(xJ,{})}),y.jsx(jt,{path:"/control-access",element:y.jsx(fJ,{})}),y.jsx(jt,{path:"/find",element:y.jsx(_J,{})}),y.jsx(jt,{path:"/settings",element:y.jsx(XZ,{isMobile:W})}),y.jsx(jt,{path:"/account-settings",element:y.jsx(ZZ,{isMobile:W})}),y.jsx(jt,{path:"/plans",element:y.jsx(iJ,{setActiveTab:j})}),y.jsx(jt,{path:"/blog",element:y.jsx(uJ,{})}),y.jsx(jt,{path:"/",element:y.jsx(wv,{to:"/dashboard",replace:!0})}),y.jsx(jt,{path:"*",element:y.jsx(wv,{to:"/dashboard",replace:!0})})]})},e.pathname+"-inner")})})})},e.pathname),W&&y.jsx(c3,{activeTab:L,setActiveTab:j})]}),y.jsx(V3,{}),y.jsx(IK,{}),y.jsx(DZ,{}),y.jsx(ka,{children:ee?.isOpen&&y.jsx(SZ,{isOpen:ee.isOpen,onClose:()=>x("financial"),type:ee.type,transactionData:ee.transaction,onSaveSuccess:async()=>await h()})}),y.jsx(ka,{children:G?.isOpen&&y.jsx(EZ,{isOpen:G.isOpen,onClose:()=>x("financialWizard"),type:G.type,transactionData:G.transaction,onSaveSuccess:async()=>await h()})}),y.jsx(ka,{children:he?.isOpen&&y.jsx(BZ,{isOpen:he.isOpen,onClose:()=>x("servicePackage"),servicePackage:he.servicePackage,onSaveSuccess:async()=>await h()})}),y.jsx(ka,{children:X?.isOpen&&y.jsx(UZ,{isOpen:X.isOpen,onClose:()=>x("product"),product:X.product,onSaveSuccess:async()=>await h()})})]})};function AJ({children:n}){const[e,t]=N.useState(null),r=ru();return N.useEffect(()=>{let i=!0;return(async()=>{try{const{data:s,error:o}=await rt.auth.getUser();if(!i)return;if(o||!s?.user){t(!1);return}const a=!!s.user.app_metadata?.is_admin;t(a)}catch{t(!1)}})(),()=>{i=!1}},[]),e===null?y.jsx(_r,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(wv,{to:"/login",replace:!0,state:{from:r}})}const CJ=()=>{const{toast:n}=Ta(),e=()=>{let t;const r=s=>{s.preventDefault(),t=s,i()},i=()=>{t?(t.prompt(),t.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User accepted the install prompt"),n({title:"Aplicativo Instalado!",description:"O GO.FOTÓGRAFO foi adicionado à sua tela inicial."})):console.log("User dismissed the install prompt"),t=null})):n({title:"Já é um App ou não suportado",description:"O aplicativo já pode estar instalado ou seu navegador não suporta esta ação. Tente 'Adicionar à Tela de Início' no menu do seu navegador.",variant:"default",duration:7e3})};return window.addEventListener("beforeinstallprompt",r),window.deferredPrompt?(t=window.deferredPrompt,i()):n({title:"Instalação",description:"Para instalar, use a opção 'Adicionar à Tela de Início' do seu navegador.",variant:"default",duration:7e3}),()=>{window.removeEventListener("beforeinstallprompt",r)}};return vn.useEffect(()=>{window.handlePWAInstall=e;const t=r=>{r.preventDefault(),window.deferredPrompt=r};return window.addEventListener("beforeinstallprompt",t),()=>{delete window.handlePWAInstall,window.removeEventListener("beforeinstallprompt",t)}},[]),null};function EJ(){const{user:n}=yx(),e=N.useRef(null);return N.useEffect(()=>{if(e.current&&(clearInterval(e.current),e.current=null),!n)return;const t=24e4,r=async()=>{try{const{error:i}=await rt.from("settings").select("user_id",{count:"exact",head:!0}).eq("user_id",n.id).limit(1);i&&console.warn("KeepAlive: ping falhou:",i.message)}catch(i){console.warn("KeepAlive: erro no ping:",i)}};return r(),e.current=setInterval(r,t),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[n?.id]),null}class K4 extends vn.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI crash capturado:",e,t)}render(){return this.state.hasError?y.jsx("div",{className:"p-6 text-sm",children:"Algo deu errado ao renderizar este conteúdo."}):this.props.children}}function kJ(n,e){return N.useReducer((t,r)=>e[t][r]??t,n)}var R_="ScrollArea",[X4,Cne]=id(R_),[PJ,Ac]=X4(R_),Z4=N.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=n,[a,c]=N.useState(null),[u,h]=N.useState(null),[p,m]=N.useState(null),[b,_]=N.useState(null),[x,k]=N.useState(null),[E,T]=N.useState(0),[L,j]=N.useState(0),[B,W]=N.useState(!1),[U,q]=N.useState(!1),ie=rr(e,$=>c($)),ve=P1(i);return y.jsx(PJ,{scope:t,type:r,dir:ve,scrollHideDelay:s,scrollArea:a,viewport:u,onViewportChange:h,content:p,onContentChange:m,scrollbarX:b,onScrollbarXChange:_,scrollbarXEnabled:B,onScrollbarXEnabledChange:W,scrollbarY:x,onScrollbarYChange:k,scrollbarYEnabled:U,onScrollbarYEnabledChange:q,onCornerWidthChange:T,onCornerHeightChange:j,children:y.jsx(wn.div,{dir:ve,...o,ref:ie,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":L+"px",...n.style}})})});Z4.displayName=R_;var J4="ScrollAreaViewport",Q4=N.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:i,...s}=n,o=Ac(J4,t),a=N.useRef(null),c=rr(e,a,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),y.jsx(wn.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Q4.displayName=J4;var ad="ScrollAreaScrollbar",I_=N.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Ac(ad,n.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=n.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?y.jsx(NJ,{...r,ref:e,forceMount:t}):i.type==="scroll"?y.jsx(TJ,{...r,ref:e,forceMount:t}):i.type==="auto"?y.jsx(eL,{...r,ref:e,forceMount:t}):i.type==="always"?y.jsx(j_,{...r,ref:e}):null});I_.displayName=ad;var NJ=N.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Ac(ad,n.__scopeScrollArea),[s,o]=N.useState(!1);return N.useEffect(()=>{const a=i.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",h)}}},[i.scrollArea,i.scrollHideDelay]),y.jsx(Ul,{present:t||s,children:y.jsx(eL,{"data-state":s?"visible":"hidden",...r,ref:e})})}),TJ=N.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=Ac(ad,n.__scopeScrollArea),s=n.orientation==="horizontal",o=X1(()=>c("SCROLL_END"),100),[a,c]=kJ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,i.scrollHideDelay,c]),N.useEffect(()=>{const u=i.viewport,h=s?"scrollLeft":"scrollTop";if(u){let p=u[h];const m=()=>{const b=u[h];p!==b&&(c("SCROLL"),o()),p=b};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,s,c,o]),y.jsx(Ul,{present:t||a!=="hidden",children:y.jsx(j_,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Bt(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Bt(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),eL=N.forwardRef((n,e)=>{const t=Ac(ad,n.__scopeScrollArea),{forceMount:r,...i}=n,[s,o]=N.useState(!1),a=n.orientation==="horizontal",c=X1(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?u:h)}},10);return Wm(t.viewport,c),Wm(t.content,c),y.jsx(Ul,{present:r||s,children:y.jsx(j_,{"data-state":s?"visible":"hidden",...i,ref:e})})}),j_=N.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,i=Ac(ad,n.__scopeScrollArea),s=N.useRef(null),o=N.useRef(0),[a,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=sL(a.viewport,a.content),h={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>s.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function p(m,b){return OJ(m,o.current,a,b)}return t==="horizontal"?y.jsx(LJ,{...h,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const m=i.viewport.scrollLeft,b=$C(m,a,i.dir);s.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=p(m,i.dir))}}):t==="vertical"?y.jsx(RJ,{...h,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const m=i.viewport.scrollTop,b=$C(m,a);s.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=p(m))}}):null}),LJ=N.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=Ac(ad,n.__scopeScrollArea),[o,a]=N.useState(),c=N.useRef(null),u=rr(e,c,s.onScrollbarXChange);return N.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),y.jsx(nL,{"data-orientation":"horizontal",...i,ref:u,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":K1(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(s.viewport){const m=s.viewport.scrollLeft+h.deltaX;n.onWheelScroll(m),aL(m,p)&&h.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:l1(o.paddingLeft),paddingEnd:l1(o.paddingRight)}})}})}),RJ=N.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=Ac(ad,n.__scopeScrollArea),[o,a]=N.useState(),c=N.useRef(null),u=rr(e,c,s.onScrollbarYChange);return N.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),y.jsx(nL,{"data-orientation":"vertical",...i,ref:u,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":K1(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(s.viewport){const m=s.viewport.scrollTop+h.deltaY;n.onWheelScroll(m),aL(m,p)&&h.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:l1(o.paddingTop),paddingEnd:l1(o.paddingBottom)}})}})}),[IJ,tL]=X4(ad),nL=N.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:p,...m}=n,b=Ac(ad,t),[_,x]=N.useState(null),k=rr(e,ie=>x(ie)),E=N.useRef(null),T=N.useRef(""),L=b.viewport,j=r.content-r.viewport,B=oo(h),W=oo(c),U=X1(p,10);function q(ie){if(E.current){const ve=ie.clientX-E.current.left,$=ie.clientY-E.current.top;u({x:ve,y:$})}}return N.useEffect(()=>{const ie=ve=>{const $=ve.target;_?.contains($)&&B(ve,j)};return document.addEventListener("wheel",ie,{passive:!1}),()=>document.removeEventListener("wheel",ie,{passive:!1})},[L,_,j,B]),N.useEffect(W,[r,W]),Wm(_,U),Wm(b.content,U),y.jsx(IJ,{scope:t,scrollbar:_,hasThumb:i,onThumbChange:oo(s),onThumbPointerUp:oo(o),onThumbPositionChange:W,onThumbPointerDown:oo(a),children:y.jsx(wn.div,{...m,ref:k,style:{position:"absolute",...m.style},onPointerDown:Bt(n.onPointerDown,ie=>{ie.button===0&&(ie.target.setPointerCapture(ie.pointerId),E.current=_.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),q(ie))}),onPointerMove:Bt(n.onPointerMove,q),onPointerUp:Bt(n.onPointerUp,ie=>{const ve=ie.target;ve.hasPointerCapture(ie.pointerId)&&ve.releasePointerCapture(ie.pointerId),document.body.style.webkitUserSelect=T.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),a1="ScrollAreaThumb",rL=N.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=tL(a1,n.__scopeScrollArea);return y.jsx(Ul,{present:t||i.hasThumb,children:y.jsx(jJ,{ref:e,...r})})}),jJ=N.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...i}=n,s=Ac(a1,t),o=tL(a1,t),{onThumbPositionChange:a}=o,c=rr(e,p=>o.onThumbChange(p)),u=N.useRef(void 0),h=X1(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const p=s.viewport;if(p){const m=()=>{if(h(),!u.current){const b=DJ(p,a);u.current=b,a()}};return a(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[s.viewport,h,a]),y.jsx(wn.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Bt(n.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),_=p.clientX-b.left,x=p.clientY-b.top;o.onThumbPointerDown({x:_,y:x})}),onPointerUp:Bt(n.onPointerUp,o.onThumbPointerUp)})});rL.displayName=a1;var M_="ScrollAreaCorner",iL=N.forwardRef((n,e)=>{const t=Ac(M_,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?y.jsx(MJ,{...n,ref:e}):null});iL.displayName=M_;var MJ=N.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,i=Ac(M_,t),[s,o]=N.useState(0),[a,c]=N.useState(0),u=!!(s&&a);return Wm(i.scrollbarX,()=>{const h=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(h),c(h)}),Wm(i.scrollbarY,()=>{const h=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(h),o(h)}),u?y.jsx(wn.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function l1(n){return n?parseInt(n,10):0}function sL(n,e){const t=n/e;return isNaN(t)?0:t}function K1(n){const e=sL(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function OJ(n,e,t,r="ltr"){const i=K1(t),s=i/2,o=e||s,a=i-o,c=t.scrollbar.paddingStart+o,u=t.scrollbar.size-t.scrollbar.paddingEnd-a,h=t.content-t.viewport,p=r==="ltr"?[0,h]:[h*-1,0];return oL([c,u],p)(n)}function $C(n,e,t="ltr"){const r=K1(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,c=t==="ltr"?[0,o]:[o*-1,0],u=k2(n,c);return oL([0,o],[0,a])(u)}function oL(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function aL(n,e){return n>0&&n<e}var DJ=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function i(){const s={left:n.scrollLeft,top:n.scrollTop},o=t.left!==s.left,a=t.top!==s.top;(o||a)&&e(),t=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function X1(n,e){const t=oo(n),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Wm(n,e){const t=oo(e);ms(()=>{let r=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(r),i.unobserve(n)}}},[n,t])}var lL=Z4,FJ=Q4,BJ=rL,zJ=iL;const cL=N.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(lL,{ref:r,className:kn("relative overflow-hidden",n),...t,children:[y.jsx(FJ,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(uL,{}),y.jsx(zJ,{})]}));cL.displayName=lL.displayName;const uL=N.forwardRef(({className:n,orientation:e="vertical",...t},r)=>y.jsx(I_,{ref:r,orientation:e,className:kn("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:y.jsx(BJ,{className:"relative flex-1 rounded-full bg-border"})}));uL.displayName=I_.displayName;const UJ=({reminder:n,onDismiss:e,onFollowUp:t})=>{const r=()=>{if(n.icon)return n.icon;switch(n.reminderType||n.type){case"payment_overdue":case"expense_overdue":return Bq;case"payment_due":case"expense_due":return JP;case"birthday":return $x;case"task_due":return Qq;default:return GP}},i=()=>{const a=n.reminderType||n.type;return a?.includes("overdue")?"bg-red-500":a?.includes("due")?"bg-yellow-500":a==="birthday"?"bg-pink-500":"bg-primary"},s=r(),o=i();return y.jsxs("div",{className:"flex items-start space-x-3 p-4 border-b border-border/20 last:border-0 hover:bg-muted/30 transition-all duration-200",children:[y.jsx("div",{className:`p-2.5 rounded-full text-white shadow-md ${o}`,children:y.jsx(s,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold mb-1 text-foreground leading-tight",children:n.title}),y.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),n.date&&y.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[n.clientPhone&&y.jsx("button",{onClick:()=>t(n),className:"p-2 hover:bg-green-50 hover:text-green-600 rounded-full transition-all duration-200",title:"Entrar em contato via WhatsApp",children:y.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/16566/16566143.png",alt:"WhatsApp",className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>e(n.id),className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-full transition-all duration-200",title:"Dispensar notificação",children:y.jsx(ef,{className:"w-3 h-3"})})]})]})},$J=({reminders:n,onDismiss:e,onDismissAll:t,onFollowUp:r})=>{if(!n||n.length===0)return null;const i=n.length>=3,s=i?"fixed inset-0 z-50 flex items-center justify-center":"fixed bottom-6 right-6 z-50";return y.jsxs("div",{className:s,children:[i&&y.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),y.jsxs("div",{className:`relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl ${i?"w-full max-w-md m-6 max-h-[70vh]":"w-96 max-h-[80vh] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.3),_0_10px_10px_-5px_rgba(0,0,0,0.2)]"}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/30",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(GP,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"font-semibold text-lg",children:n.length===1?"Notificação":`${n.length} Notificações`})]}),y.jsx("button",{onClick:t,className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-muted",children:"Limpar todas"})]}),y.jsx(cL,{className:i?"max-h-[55vh]":"max-h-80",children:n.map(o=>y.jsx(UJ,{reminder:o,onDismiss:e,onFollowUp:r},o.id))})]})]})},qJ=()=>{const[n,e]=vn.useState([]),t=vn.useRef({}),r=vn.useCallback(o=>{const a=Date.now(),c=t.current[o.id]||0;a-c>300*1e3&&(e(u=>[...u,o]),t.current[o.id]=a)},[]),i=o=>{e(a=>a.filter(c=>c.id!==o))},s=()=>{e([])};return vn.useEffect(()=>{const o=a=>{a.detail&&r(a.detail)};return window.addEventListener("addNotification",o),()=>{window.removeEventListener("addNotification",o)}},[r]),n.length===0?null:y.jsx($J,{reminders:n,onDismiss:i,onDismissAll:s,onFollowUp:o=>window.dispatchEvent(new CustomEvent("openFollowUp",{detail:o}))})},VJ=({children:n})=>{const[e,t]=N.useState(!0),[r,i]=N.useState(null),s=sp();return N.useEffect(()=>{(async()=>{const c=window.location.hostname.split(".");if(c.length>=3&&c[1]==="gofotografo"&&c[2]==="com"){const u=c[0];if(["www","api","admin","app","mail","ftp"].includes(u)){t(!1);return}try{const{data:p,error:m}=await rt.from("users_settings").select(`
              *,
              users (
                id,
                email,
                created_at
              )
            `).eq("subdomain",u).single();if(m&&m.code!=="PGRST116")throw m;if(p)i(p),s(`/portfolio/${p.users.id}`,{replace:!0});else{window.location.href="https://gofotografo.com";return}}catch(p){console.error("Erro ao verificar subdomínio:",p),window.location.href="https://gofotografo.com";return}}t(!1)})()},[s]),e?y.jsx(_r,{}):n},WJ=N.lazy(()=>Lt(()=>import("./LandingPage-BCcqevnS.js"),__vite__mapDeps([143,9,16,39]))),HJ=N.lazy(()=>Lt(()=>import("./PrivacyPolicyPage-WFKEXTHS.js"),__vite__mapDeps([144,16]))),GJ=N.lazy(()=>Lt(()=>import("./LoginPage-DjWdGsvH.js"),__vite__mapDeps([145,146,134,75,147]))),YJ=N.lazy(()=>Lt(()=>import("./SignupPage-CjUwsq3C.js"),__vite__mapDeps([148,146,134,11]))),KJ=N.lazy(()=>Lt(()=>import("./ForgotPasswordPage-4Zq-BKZe.js"),__vite__mapDeps([149,146,134]))),XJ=N.lazy(()=>Lt(()=>import("./UpdatePasswordPage-Dnu_XGpb.js"),__vite__mapDeps([150,146,134]))),ZJ=N.lazy(()=>Lt(()=>import("./AdminLoginPage-Cc1uQ6vQ.js"),__vite__mapDeps([151,75,147]))),JJ=N.lazy(()=>Lt(()=>import("./AdminLayout-xGZibkUw.js"),__vite__mapDeps([152,6,81,66,58,60,46,1,8,47,4,105,139,114,92,24,123,68,36,82,83,20,37,69,77,11,33,50,34,29,106,53,12]))),QJ=N.lazy(()=>Lt(()=>import("./PublicFormPage-vC0uH3Ga.js"),[])),eQ=N.lazy(()=>Lt(()=>import("./PublicBookingPage-C80m1eJ6.js"),__vite__mapDeps([153,69,120,77,28,59,60,65]))),tQ=N.lazy(()=>Lt(()=>import("./PublicBoardPage-C0ikiXtL.js"),__vite__mapDeps([154,46,1,8,47,34,98,99]))),nQ=N.lazy(()=>Lt(()=>import("./PublicPortfolioPage-CBKCwYdA.js"),__vite__mapDeps([155,38,77]))),rQ=N.lazy(()=>Lt(()=>import("./AssinafyWebhookPage-BErMsIu1.js"),[])),iQ=N.lazy(()=>Lt(()=>import("./MaintenancePage-DBlADdJm.js"),[])),sQ=N.lazy(()=>Lt(()=>import("./BlogPage-DYbuNhQY.js"),[])),oQ=N.lazy(()=>Lt(()=>import("./BlogPostPage-CEZVhdc-.js"),__vite__mapDeps([156,100]))),qC=N.lazy(()=>Lt(()=>import("./ProposalEditorPage-DpgUH3w5.js"),__vite__mapDeps([157,118,119,5,4,34,31,40,120,8,47,95,99,121,46,1,122,36,20,37,85,68,64,123,7,50,29,11,88,12,69,116,124,102,100,53,49,21,67]))),Iw=N.lazy(()=>Lt(()=>import("./CustomPageViewer-CB1foSiQ.js"),__vite__mapDeps([158,38]))),aQ=N.lazy(()=>Lt(()=>import("./TutorialsPage-D6sEyDWj.js"),__vite__mapDeps([159,32]))),lQ=N.lazy(()=>Lt(()=>import("./ProposalPublicView-OxaBvtUy.js"),__vite__mapDeps([160,119,5,4,34,31,40,120,8,47,95,99,121])));N.lazy(()=>Lt(()=>import("./StudioPage-DTLekyMt.js"),__vite__mapDeps([110,83,20,100,24,81,66,58,60,94,32,111,112,25,53])));const VC=N.lazy(()=>Lt(()=>import("./ContractEditorPage-DEMbtRCL.js"),__vite__mapDeps([115,95,64,116,21,31,53,77]))),gy=({children:n})=>y.jsx(y.Fragment,{children:n}),cQ=()=>{const n=ru(),e=n.pathname.startsWith("/studio/proposals/edit/")||n.pathname==="/studio/proposals/new";return y.jsx(Oq,{children:y.jsx(SJ,{hideSidebar:e,children:y.jsx(ox,{})})})},uQ=()=>y.jsxs(_E,{children:[y.jsx(jt,{path:"/lp",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(WJ,{})})}),y.jsx(jt,{path:"/politica-de-privacidade-e-dados",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(HJ,{})})}),y.jsx(jt,{path:"/login",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(GJ,{})})}),y.jsx(jt,{path:"/signup",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(YJ,{})})}),y.jsx(jt,{path:"/forgot-password",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(KJ,{})})}),y.jsx(jt,{path:"/update-password",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(XJ,{})})}),y.jsx(jt,{path:"/f/:formId",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(QJ,{})})}),y.jsx(jt,{path:"/agendar/:bookingLinkId",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(eQ,{})})}),y.jsx(jt,{path:"/public/board/:shareId",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(tQ,{})})}),y.jsx(jt,{path:"/portfolio/:userId",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(nQ,{})})}),y.jsx(jt,{path:"/p/:slug",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(lQ,{})})}),y.jsx(jt,{path:"/webhooks/assinafy",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(rQ,{})})}),y.jsx(jt,{path:"/manutencao",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(iQ,{})})}),y.jsx(jt,{path:"/blog",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(sQ,{})})}),y.jsx(jt,{path:"/blog/:slug",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(oQ,{})})}),y.jsx(jt,{path:"/control-acess/login",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(ZJ,{})})}),y.jsx(jt,{path:"/control-acess/*",element:y.jsx(AJ,{children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(JJ,{})})})}),y.jsx(jt,{path:"/sobre",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(Iw,{slug:"sobre"})})}),y.jsx(jt,{path:"/fale-conosco",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(Iw,{slug:"fale-conosco"})})}),y.jsx(jt,{path:"/tutoriais",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(aQ,{})})}),y.jsx(jt,{path:"/tutoriais/:slug",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(Iw,{isTutorial:!0})})}),y.jsx(jt,{path:"/studio/proposals/new",element:y.jsx(gy,{children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(qC,{})})})}),y.jsx(jt,{path:"/studio/proposals/edit/:proposalId",element:y.jsx(gy,{children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(qC,{})})})}),y.jsx(jt,{path:"/studio/contracts/new",element:y.jsx(gy,{children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(VC,{mode:"new"})})})}),y.jsx(jt,{path:"/studio/contracts/edit/:contractId",element:y.jsx(gy,{children:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(VC,{mode:"edit"})})})}),y.jsx(jt,{path:"/*",element:y.jsx(cQ,{}),children:y.jsx(jt,{path:"*",element:y.jsx(N.Suspense,{fallback:y.jsx(_r,{}),children:y.jsx(ox,{})})})})]});function dQ(){return y.jsxs(SM,{children:[y.jsx(PM,{children:y.jsx(ak,{children:y.jsx(pz,{children:y.jsx(mz,{children:y.jsx(bz,{children:y.jsx(K4,{children:y.jsxs(VJ,{children:[y.jsx(EJ,{}),y.jsx(CJ,{}),y.jsx(uQ,{})]})})})})})})}),y.jsx(qJ,{})]})}var mv={};mv.d=(n,e)=>{for(var t in e)mv.o(e,t)&&!mv.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};mv.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var An=globalThis.pdfjsLib={};mv.d(An,{AbortException:()=>vp,AnnotationEditorLayer:()=>Gd,AnnotationEditorParamsType:()=>_n,AnnotationEditorType:()=>Rn,AnnotationEditorUIManager:()=>Xh,AnnotationLayer:()=>cte,AnnotationMode:()=>Mh,ColorPicker:()=>wc,DOMSVGFactory:()=>X_,DrawLayer:()=>Ko,FeatureTest:()=>Na,GlobalWorkerOptions:()=>vv,ImageKind:()=>My,InvalidPDFException:()=>hL,MissingPDFException:()=>gp,OPS:()=>Qc,OutputScale:()=>Y2,PDFDataRangeTransport:()=>TL,PDFDateString:()=>pL,PDFWorker:()=>Om,PasswordResponses:()=>mQ,PermissionFlag:()=>pQ,PixelsPerInch:()=>Hm,RenderingCancelledException:()=>F_,TextLayer:()=>Ca,UnexpectedResponseException:()=>eb,Util:()=>Yt,VerbosityLevel:()=>Z1,XfaLayer:()=>RL,build:()=>qee,createValidAbsoluteUrl:()=>bQ,fetchData:()=>nb,getDocument:()=>jee,getFilenameFromUrl:()=>PQ,getPdfFilenameFromUrl:()=>NQ,getXfaPageViewport:()=>TQ,isDataScheme:()=>rb,isPdfFile:()=>B_,noContextMenu:()=>_c,normalizeUnicode:()=>CQ,setLayerDimensions:()=>rp,shadow:()=>nr,version:()=>$ee});const Qo=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),dL=[1,0,0,1,0,0],W2=[.001,0,0,.001,0,0],hQ=1e7,jw=1.35,Ol={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},fQ="pdfjs_internal_editor_",Rn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},_n={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},pQ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yo={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},My={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Is={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Kg={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Z1={ERRORS:0,WARNINGS:1,INFOS:5},Qc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},mQ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let J1=Z1.WARNINGS;function gQ(n){Number.isInteger(n)&&(J1=n)}function vQ(){return J1}function Q1(n){J1>=Z1.INFOS&&console.log(`Info: ${n}`)}function zn(n){J1>=Z1.WARNINGS&&console.log(`Warning: ${n}`)}function si(n){throw new Error(n)}function Fs(n,e){n||si(e)}function yQ(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function bQ(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=AQ(n)}catch{}const r=e?new URL(n,e):new URL(n);if(yQ(r))return r}catch{}return null}function nr(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const rf=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class H2 extends rf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class G2 extends rf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class hL extends rf{constructor(e){super(e,"InvalidPDFException")}}class gp extends rf{constructor(e){super(e,"MissingPDFException")}}class eb extends rf{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class wQ extends rf{constructor(e){super(e,"FormatError")}}class vp extends rf{constructor(e){super(e,"AbortException")}}function fL(n){(typeof n!="object"||n?.length===void 0)&&si("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function tb(n){typeof n!="string"&&si("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function xQ(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function O_(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function _Q(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function SQ(){try{return new Function(""),!0}catch{return!1}}class Na{static get isLittleEndian(){return nr(this,"isLittleEndian",_Q())}static get isEvalSupported(){return nr(this,"isEvalSupported",SQ())}static get isOffscreenCanvasSupported(){return nr(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?nr(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):nr(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return nr(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Mw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Yt{static makeHexColor(e,t,r){return`#${Mw[e]}${Mw[t]}${Mw[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,c=Math.sqrt((r+o)**2-4*(r*o-s*i))/2,u=a+c||1,h=a-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static#e(e,t,r,i,s,o,a,c,u,h){if(u<=0||u>=1)return;const p=1-u,m=u*u,b=m*u,_=p*(p*(p*e+3*u*t)+3*m*r)+b*i,x=p*(p*(p*s+3*u*o)+3*m*a)+b*c;h[0]=Math.min(h[0],_),h[1]=Math.min(h[1],x),h[2]=Math.max(h[2],_),h[3]=Math.max(h[3],x)}static#t(e,t,r,i,s,o,a,c,u,h,p,m){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&this.#e(e,t,r,i,s,o,a,c,-p/h,m);return}const b=h**2-4*p*u;if(b<0)return;const _=Math.sqrt(b),x=2*u;this.#e(e,t,r,i,s,o,a,c,(-h+_)/x,m),this.#e(e,t,r,i,s,o,a,c,(-h-_)/x,m)}static bezierBoundingBox(e,t,r,i,s,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],this.#t(e,r,s,a,t,i,o,c,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),u),this.#t(e,r,s,a,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u),u}}function AQ(n){return decodeURIComponent(escape(n))}let Ow=null,WC=null;function CQ(n){return Ow||(Ow=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,WC=new Map([["ﬅ","ſt"]])),n.replaceAll(Ow,(e,t,r)=>t?t.normalize("NFKC"):WC.get(r))}function EQ(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return fL(n)}const D_="pdfjs_internal_id_",Ud={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function kQ(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(fL(n))}const Vd="http://www.w3.org/2000/svg";class Hm{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function nb(n,e="text"){if(rv(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Jv{constructor({viewBox:e,scale:t,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=i,this.offsetY=s;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,h,p,m;switch(r%=360,r<0&&(r+=360),r){case 180:u=-1,h=0,p=0,m=1;break;case 90:u=0,h=1,p=1,m=0;break;case 270:u=0,h=-1,p=-1,m=0;break;case 0:u=1,h=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let b,_,x,k;u===0?(b=Math.abs(c-e[1])*t+i,_=Math.abs(a-e[0])*t+s,x=(e[3]-e[1])*t,k=(e[2]-e[0])*t):(b=Math.abs(a-e[0])*t+i,_=Math.abs(c-e[1])*t+s,x=(e[2]-e[0])*t,k=(e[3]-e[1])*t),this.transform=[u*t,h*t,p*t,m*t,b-u*t*a-p*t*c,_-h*t*a-m*t*c],this.width=x,this.height=k}get rawDims(){const{viewBox:e}=this;return nr(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Jv({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return Yt.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Yt.applyTransform([e[0],e[1]],this.transform),r=Yt.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return Yt.applyInverseTransform([e,t],this.transform)}}class F_ extends rf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function rb(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function B_(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function PQ(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function NQ(n,e="document.pdf"){if(typeof n!="string")return e;if(rb(n))return zn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class HC{started=Object.create(null);times=[];time(e){e in this.started&&zn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||zn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function rv(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function _c(n){n.preventDefault()}function GC(n){console.log("Deprecated API usage: "+n)}class pL{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(o+=h,a+=p):u==="+"&&(o-=h,a-=p),new Date(Date.UTC(r,i,s,o,a,c))}}function TQ(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new Jv({viewBox:s,scale:e,rotation:t})}function z_(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(zn(`Not a valid color format: "${n}"`),[0,0,0])}function LQ(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,z_(r))}e.remove()}function wi(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function $d(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function rp(n,e,t=!1,r=!0){if(e instanceof Jv){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=Na.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${s}px`,h=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,p=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=p):(o.width=p,o.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Y2{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class gv{#e=null;#t=null;#n;#i=null;#s=null;static#r=null;constructor(e){this.#n=e,gv.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",_c,{signal:t}),e.addEventListener("pointerdown",gv.#l,{signal:t});const r=this.#i=document.createElement("div");r.className="buttons",e.append(r);const i=this.#n.toolbarPosition;if(i){const{style:s}=e,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_c,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",gv.#r[e]),this.#a(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#i.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#a(t),this.#i.prepend(t,this.#o),this.#s=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class RQ{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",_c,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#s(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]}show(e,t,r){const[i,s]=this.#s(t,r),{style:o}=this.#t||=this.#i();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",_c,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function c1(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function IQ(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}class jQ{#e=0;get id(){return`${fQ}${this.#e++}`}}class U_{#e=EQ();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return nr(this,"_isSVGFittingCanvas",s)}async#i(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await nb(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=U_._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,h)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},o.onload=async()=>{const p=r.svgUrl=o.result;a.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=o.onerror=h});o.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){console.error(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return this.#i(`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,t){const r=await t;return this.#i(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class MQ{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),this.#t)return;const c={cmd:e,undo:t,post:r,type:s};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(c);return}if(o&&this.#e[this.#i].type===s){a&&(c.undo=this.#e[this.#i].undo),this.#e[this.#i]=c;return}const u=this.#i+1;u===this.#n?this.#e.splice(0,1):(this.#i=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(c)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class Qv{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Na.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class $_{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return LQ(e),nr(this,"_colors",e)}convert(e){const t=z_(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return $_._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Yt.makeHexColor(...t):e}}class Xh{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#s=null;#r=null;#l=null;#c=new MQ;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#v=!1;#g=!1;#m=null;#y=null;#w=null;#E=null;#S=!1;#A=null;#M=new jQ;#k=!1;#x=!1;#C=null;#P=null;#N=null;#R=null;#_=Rn.NONE;#b=new Set;#I=null;#j=null;#O=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#D=null;#F=null;#U=null;#T=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Xh.prototype,t=o=>o.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return nr(this,"_keyboardManager",new Qv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#F.contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,r,i,s,o,a,c,u,h,p){const m=this._signal=this.#e.signal;this.#F=e,this.#U=t,this.#s=r,this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:m}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),i._on("setpreference",this.onSetPreference.bind(this),{signal:m}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:m}),this.#ee(),this.#ie(),this.#G(),this.#r=s.annotationStorage,this.#m=s.filterFactory,this.#j=o,this.#E=a||null,this.#f=c,this.#v=u,this.#g=h,this.#R=p||null,this.viewParameters={realScale:Hm.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#T?.resolve(),this.#T=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#c.destroy(),this.#s?.destroy(),this.#A?.hide(),this.#A=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#D&&(clearTimeout(this.#D),this.#D=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#R}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#g}get hcmFilter(){return nr(this,"hcmFilter",this.#j?this.#m.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return nr(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return nr(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return nr(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#N=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#g=t;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#i.values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+a)return r}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Hm.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#V({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#H(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#i.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}=t,a=t.toString(),u=this.#V(t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const p=this.#H(u),m=this.#_===Rn.NONE,b=()=>{p?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(Rn.HIGHLIGHT,b);return}b()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#V(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#A||=new RQ(this),this.#A.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Q(){const e=document.getSelection();if(!e||e.isCollapsed){this.#I&&(this.#A?.hide(),this.#I=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#I)return;const i=this.#V(e).closest(".textLayer");if(!i){this.#I&&(this.#A?.hide(),this.#I=null,this.#L({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#I=t,this.#L({hasSelectedText:!0}),!(this.#_!==Rn.HIGHLIGHT&&this.#_!==Rn.NONE)&&(this.#_===Rn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#_===Rn.HIGHLIGHT?this.#H(i):null;s?.toggleDrawing();const o=new AbortController,a=this.combinedSignal(o),c=u=>{u.type==="pointerup"&&u.button!==0||(o.abort(),s?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}}#W(e=""){this.#_===Rn.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#J()}#ee(){document.addEventListener("selectionchange",this.#Q.bind(this),{signal:this._signal})}#te(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#b)if(t.div.contains(e)){this.#P=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,t]=this.#P;this.#P=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#G(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#C?.abort(),this.#C=null}#Y(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#K(){this.#u?.abort(),this.#u=null}#ie(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#G(),this.#Y()}removeEditListeners(){this.#re(),this.#K()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#b){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of this.#h)if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){zn(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const c of r){const u=await i.deserialize(c);if(!u)return;s.push(u)}const o=()=>{for(const c of s)this.#X(c);this.#Z(s)},a=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){zn(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Rn.NONE&&!this.isEditorHandlingKeyboard&&Xh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#L(e){Object.entries(e).some(([r,i])=>this.#$[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,e)}),this.#_===Rn.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[_n.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#Y(),this.#L({isEditing:this.#_!==Rn.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#K(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#i.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#_!==e&&!(this.#T&&(await this.#T.promise,!this.#T))){if(this.#T=Promise.withResolvers(),this.#_=e,e===Rn.NONE){this.setEditingState(!1),this.#oe(),this.#T.resolve();return}this.setEditingState(!0),await this.#se(),this.unselectAll();for(const i of this.#i.values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#T.resolve();return}for(const i of this.#n.values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();this.#T.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case _n.CREATE:this.currentLayer.addNewEditor();return;case _n.HIGHLIGHT_DEFAULT_COLOR:this.#N?.updateColor(t);break;case _n.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#O||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#b)r.updateParams(e,t);for(const r of this.#h)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const s of this.#n.values())s.editorType===e&&s.show(t);(this.#O?.get(_n.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[_n.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#x!==e){this.#x=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#se(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#i.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#b);return e}updateUI(e){this.#ae===e&&this.#z(e.propertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#b)t!==e&&t.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#L({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()})}redo(){this.#c.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(e){this.#c.add(e),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}#q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#b],t=()=>{for(const i of e)i.remove()},r=()=>{for(const i of e)this.#X(i)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Z(e){for(const t of this.#b)t.unselect();this.#b.clear();for(const t of e)t.isEmpty()||(this.#b.add(t),t.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#Z(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==Rn.NONE))&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=e,this.#B[1]+=t;const[i,s]=this.#B,o=[...this.#b],a=1e3;this.#D&&clearTimeout(this.#D),this.#D=setTimeout(()=>{this.#D=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const c of o)this.#n.has(c.id)&&c.translateInPage(i,s)},undo:()=>{for(const c of o)this.#n.has(c.id)&&c.translateInPage(-i,-s)},mustExec:!1})},a);for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const e of this.#b)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const e=this.#o;this.#o=null;let t=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,t||=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex;if(!t)return!1;const r=(i,s,o,a)=>{if(this.#n.has(i.id)){const c=this.#i.get(a);c?i._setParentAndPosition(c,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#o)for(const r of this.#o.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}get imageManager(){return nr(this,"imageManager",new U_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,h,p,m)=>({x:(h-i)/o,y:1-(u+p-r)/s,width:m/o,height:p/s});break;case"180":a=(u,h,p,m)=>({x:1-(u+p-r)/s,y:1-(h+m-i)/o,width:p/s,height:m/o});break;case"270":a=(u,h,p,m)=>({x:1-(h+m-i)/o,y:(u-r)/s,width:m/o,height:p/s});break;default:a=(u,h,p,m)=>({x:(u-r)/s,y:(h-i)/o,width:p/s,height:m/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const p=t.getRangeAt(u);if(!p.collapsed)for(const{x:m,y:b,width:_,height:x}of p.getClientRects())_===0||x===0||c.push(a(m,b,_,x))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#r.getRawValue(t);r&&(this.#_===Rn.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class Hu{#e=null;#t=!1;#n=null;#i=null;#s=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,Hu.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Hu._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#i=document.createElement("span");e.append(t),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",Hu.#h.missing),t.setAttribute("data-l10n-id",Hu.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",_c,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#l=!0,i(s))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}async setGuessedText(e){this.#e===null&&(this.#a=e,this.#d=await Hu._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#a===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(this.#a=r,this.#d=i),!(this.#e===e&&this.#t===t)&&(s||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#c?.remove(),this.#c=null}async#f(){const e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Hu.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",Hu.#h[`${this.#p}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const i=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:s})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class xn{#e=null;#t=null;#n=null;#i=!1;#s=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#v=0;#g=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#w=xn._zIndex++;static _borderLineWidth=-1;static _colorManager=new $_;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=xn.prototype._resizeWithKeyboard,t=Xh.TRANSLATE_SMALL,r=Xh.TRANSLATE_BIG;return nr(this,"_resizerKeyboardManager",new Qv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],xn.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return nr(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new OQ({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(xn._l10n??=e,xn._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),xn._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);xn._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){si("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#O(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}#E([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,i]=this.parentDimensions;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,c]=this.getBaseTranslation();s+=a,o+=c,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=xn,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:i,y:s,width:o,height:a}=this;if(o*=t,a*=r,i*=t,s*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-o,i)),s=Math.max(0,Math.min(r-a,s));break;case 90:i=Math.max(0,Math.min(t-a,i)),s=Math.min(r,Math.max(o,s));break;case 180:i=Math.min(t,Math.max(o,i)),s=Math.min(r,Math.max(a,s));break;case 270:i=Math.min(t,Math.max(a,i)),s=Math.max(0,Math.min(r-o,s));break}this.x=i/=t,this.y=s/=r;const[c,u]=this.getBaseTranslation();i+=c,s+=u;const{style:h}=this.div;h.left=`${(100*i).toFixed(2)}%`,h.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return xn.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return xn.#S(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!this.#s&&t.endsWith("%");if(i&&s)return;const[o,a]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!this.#s&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#r.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),i.addEventListener("contextmenu",_c,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#r)}#k(e,t){t.preventDefault();const{isMac:r}=Na.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#C.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",_c,{signal:o});const a=this.x,c=this.y,u=this.width,h=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const b=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=p,this.div.style.cursor=m,this.#x(a,c,u,h)};window.addEventListener("pointerup",b,{signal:o}),window.addEventListener("blur",b,{signal:o})}#x(e,t,r,i){const s=this.x,o=this.y,a=this.width,c=this.height;s===e&&o===t&&a===r&&c===i||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=s,this.y=o;const[u,h]=this.parentDimensions;this.setDims(u*a,h*c),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=i,this.x=e,this.y=t;const[u,h]=this.parentDimensions;this.setDims(u*r,h*i),this.fixAndSetPosition()},mustExec:!0})}#C(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,c=this.height,u=xn.MIN_SIZE/r,h=xn.MIN_SIZE/i,p=he=>Math.round(he*1e4)/1e4,m=this.#A(this.rotation),b=(he,X)=>[m[0]*he+m[2]*X,m[1]*he+m[3]*X],_=this.#A(360-this.rotation),x=(he,X)=>[_[0]*he+_[2]*X,_[1]*he+_[3]*X];let k,E,T=!1,L=!1;switch(e){case"topLeft":T=!0,k=(he,X)=>[0,0],E=(he,X)=>[he,X];break;case"topMiddle":k=(he,X)=>[he/2,0],E=(he,X)=>[he/2,X];break;case"topRight":T=!0,k=(he,X)=>[he,0],E=(he,X)=>[0,X];break;case"middleRight":L=!0,k=(he,X)=>[he,X/2],E=(he,X)=>[0,X/2];break;case"bottomRight":T=!0,k=(he,X)=>[he,X],E=(he,X)=>[0,0];break;case"bottomMiddle":k=(he,X)=>[he/2,X],E=(he,X)=>[he/2,0];break;case"bottomLeft":T=!0,k=(he,X)=>[0,X],E=(he,X)=>[he,0];break;case"middleLeft":L=!0,k=(he,X)=>[0,X/2],E=(he,X)=>[he,X/2];break}const j=k(a,c),B=E(a,c);let W=b(...B);const U=p(s+W[0]),q=p(o+W[1]);let ie=1,ve=1,[$,z]=this.screenToPageTranslation(t.movementX,t.movementY);if([$,z]=x($/r,z/i),T){const he=Math.hypot(a,c);ie=ve=Math.max(Math.min(Math.hypot(B[0]-j[0]-$,B[1]-j[1]-z)/he,1/a,1/c),u/a,h/c)}else L?ie=Math.max(u,Math.min(1,Math.abs(B[0]-j[0]-$)))/a:ve=Math.max(h,Math.min(1,Math.abs(B[1]-j[1]-z)))/c;const le=p(a*ie),ne=p(c*ve);W=b(...E(le,ne));const ee=U-W[0],G=q-W[1];this.width=le,this.height=ne,this.x=ee,this.y=G,this.setDims(r*le,i*ne),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new gv(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Hu.initialize(xn._l10n),this.#n=new Hu(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#R();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),c1(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Na.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#N(e);return}this.#P(e)}get isSelected(){return this._uiManager.isSelected(this)}#P(e){const{isMac:t}=Na.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#N(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,i=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#v=e.clientX,this.#g=e.clientY;const o=a=>{const{clientX:c,clientY:u}=a,[h,p]=this.screenToPageTranslation(c-this.#v,u-this.#g);this.#v=c,this.#g=u,this._uiManager.dragSelectedEditors(h,p)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:i})}const s=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#P(e)};window.addEventListener("pointerup",s,{signal:i}),window.addEventListener("blur",s,{signal:i})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/i,h=t/i,p=this.x*s,m=this.y*o,b=this.width*s,_=this.height*o;switch(r){case 0:return[p+u+a,o-m-h-_+c,p+u+b+a,o-m-h+c];case 90:return[p+h+a,o-m+u+c,p+h+_+a,o-m+u+b+c];case 180:return[p-u-b+a,o-m+h+c,p-u+a,o-m+h+_+c];case 270:return[p-h-_+a,o-m-u-b+c,p-h+a,o-m-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,c=o-i;switch(this.rotation){case 0:return[r,t-o,a,c];case 90:return[r,t-i,c,a];case 180:return[s,t-i,a,c];case 270:return[s,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#R(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#R()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){si("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;const[s,o]=i.pageDimensions,[a,c,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=c/o,i.width=u/s,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#O(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#r.classList.remove("hidden"),c1(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const o=this.#_.bind(this),a=this.#b.bind(this),c=this._uiManager._signal;for(const u of this.#t){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",this.#I.bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",xn._l10nResizer[h])}}const r=this.#t[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)this.#r.append(this.#r.firstChild);else if(s>i)for(let a=0;a<s-i;a++)this.#r.firstChild.before(this.#r.lastChild);let o=0;for(const a of t){const u=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",xn._l10nResizer[u])}}this.#j(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#_(e){xn._resizerKeyboardManager.exec(this,e)}#b(e){this.#p&&e.relatedTarget?.parentNode!==this.#r&&this.#O()}#I(e){this.#u=this.#p?e:""}#j(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#C(this.#u,{movementX:e,movementY:t})}#O(){if(this.#p=!1,this.#j(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#l;this.#x(e,t,r,i),this.#l=null}}_stopResizingWithKeyboard(){this.#O(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#s=!0;const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let i=this.#m.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},xn._telemetryTimeout),this.#m.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class OQ extends xn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YC=3285377520,yc=4294901760,Vu=65535;class mL{constructor(e){this.h1=e?e&4294967295:YC,this.h2=e?e&4294967295:YC}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,k=e.length;x<k;x++){const E=e.charCodeAt(x);E<=255?t[r++]=E:(t[r++]=E>>>8,t[r++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,c=0,u=this.h1,h=this.h2;const p=3432918353,m=461845907,b=p&Vu,_=m&Vu;for(let x=0;x<i;x++)x&1?(a=o[x],a=a*p&yc|a*b&Vu,a=a<<15|a>>>17,a=a*m&yc|a*_&Vu,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[x],c=c*p&yc|c*b&Vu,c=c<<15|c>>>17,c=c*m&yc|c*_&Vu,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*p&yc|a*b&Vu,a=a<<15|a>>>17,a=a*m&yc|a*_&Vu,i&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&yc|e*36045&Vu,t=t*4283543511&yc|((t<<16|e>>>16)*2950163797&yc)>>>16,e^=t>>>1,e=e*444984403&yc|e*60499&Vu,t=t*3301882366&yc|((t<<16|e>>>16)*3120437893&yc)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const K2=Object.freeze({map:null,hash:"",transfer:void 0});class q_{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof xn)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,this.#n.set(e,t);i&&this.#i(),t instanceof xn&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?O_(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new gL(this)}get serializable(){if(this.#n.size===0)return K2;const e=new Map,t=new mL,r=[],i=Object.create(null);let s=!1;for(const[o,a]of this.#n){const c=a instanceof xn?a.serialize(!1,i):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),s||=!!c.bitmap)}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:K2}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof xn))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const o=e[s]||=new Map;for(const[a,c]of Object.entries(i)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof xn)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class gL extends q_{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){si("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return nr(this,"modifiedIds",{ids:new Set,hash:""})}}class DQ{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(Fs(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,o=new FontFace(r,i,s);this.addNativeFontFace(o);try{await o.load(),this.#e.add(r),t?.(e)}catch{zn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}si("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw zn(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return nr(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Qo||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),nr(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Fs(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return nr(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(j,B){return j.charCodeAt(B)<<24|j.charCodeAt(B+1)<<16|j.charCodeAt(B+2)<<8|j.charCodeAt(B+3)&255}function i(j,B,W,U){const q=j.substring(0,B),ie=j.substring(B+W);return q+U+ie}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function h(j,B){if(++u>30){zn("Load test font never loaded."),B();return}if(c.font="30px "+j,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(h.bind(null,j,B))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=i(m,976,p.length,p);const _=16,x=1482184792;let k=r(m,_);for(s=0,o=p.length-3;s<o;s+=4)k=k-x+r(p,s)|0;s<p.length&&(k=k-x+r(p+"XXX",s)|0),m=i(m,_,4,xQ(k));const E=`url(data:font/opentype;base64,${btoa(m)});`,T=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(T);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const j of[e.loadedName,p]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=j,L.append(B)}this._document.body.append(L),h(p,()=>{L.remove(),t.complete()})}}class FQ{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${kQ(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(s){zn(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(s,o){};const i=[];for(let s=0,o=r.length;s<o;)switch(r[s++]){case Ud.BEZIER_CURVE_TO:{const[a,c,u,h,p,m]=r.slice(s,s+6);i.push(b=>b.bezierCurveTo(a,c,u,h,p,m)),s+=6}break;case Ud.MOVE_TO:{const[a,c]=r.slice(s,s+2);i.push(u=>u.moveTo(a,c)),s+=2}break;case Ud.LINE_TO:{const[a,c]=r.slice(s,s+2);i.push(u=>u.lineTo(a,c)),s+=2}break;case Ud.QUADRATIC_CURVE_TO:{const[a,c,u,h]=r.slice(s,s+4);i.push(p=>p.quadraticCurveTo(a,c,u,h)),s+=4}break;case Ud.RESTORE:i.push(a=>a.restore());break;case Ud.SAVE:i.push(a=>a.save());break;case Ud.SCALE:Fs(i.length===2,"Scale command is only valid at the third position.");break;case Ud.TRANSFORM:{const[a,c,u,h,p,m]=r.slice(s,s+6);i.push(b=>b.transform(a,c,u,h,p,m)),s+=6}break;case Ud.TRANSLATE:{const[a,c]=r.slice(s,s+2);i.push(u=>u.translate(a,c)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){i[0](o),i[1](o),o.scale(a,-a);for(let c=2,u=i.length;c<u;c++)i[c](o)}}}class vL{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){si("Abstract method `_createCanvas` called.")}}class BQ extends vL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class yL{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){si("Abstract method `_fetch` called.")}}class bL extends yL{async _fetch(e){const t=await nb(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):tb(t)}}class wL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}class zQ extends wL{#e;#t;#n;#i;#s;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#s=t}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(Vd,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#s.createElementNS(Vd,"defs"),e.append(r),r.append(this.#n),this.#s.body.append(e)}return this.#n}#d(e){if(e.length===1){const c=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=c[p]/255;const h=u.join(",");return[h,h,h]}const[t,r,i]=e,s=new Array(256),o=new Array(256),a=new Array(256);for(let c=0;c<256;c++)s[c]=t[c]/255,o[c]=r[c]/255,a[c]=i[c]/255;return[s.join(","),o.join(","),a.join(",")]}#o(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(rb(t)?zn('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,i,s]=this.#d(e),o=e.length===1?r:`${r}${i}${s}`;if(t=this.#c.get(o),t)return this.#c.set(e,t),t;const a=`g_${this.#i}_transfer_map_${this.#l++}`,c=this.#o(a);this.#c.set(e,c),this.#c.set(o,c);const u=this.#f(a);return this.#g(r,i,s,u),c}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let s=this.#u.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#u.set(i,s)),!e||!t))return s.url;const o=this.#y(e);e=Yt.makeHexColor(...o);const a=this.#y(t);if(t=Yt.makeHexColor(...a),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;const c=new Array(256);for(let b=0;b<=255;b++){const _=b/255;c[b]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const u=c.join(","),h=`g_${this.#i}_hcm_filter`,p=s.filter=this.#f(h);this.#g(u,u,u,p),this.#p(p);const m=(b,_)=>{const x=o[b]/255,k=a[b]/255,E=new Array(_+1);for(let T=0;T<=_;T++)E[T]=x+T/_*(k-x);return E.join(",")};return this.#g(m(0,5),m(1,5),m(2,5),p),s.url=this.#o(h),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),i=`alpha_${r}`;if(t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);const a=this.#f(s);return this.#m(r,a),o}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#d([e]),i=`luminosity_${r}`):i="luminosity",t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(i,o);const a=this.#f(s);return this.#h(a),e&&this.#m(r,a),o}addHighlightHCMFilter(e,t,r,i,s){const o=`${t}-${r}-${i}-${s}`;let a=this.#u.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(e,a)),!t||!r))return a.url;const[c,u]=[t,r].map(this.#y.bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[m,b]=[i,s].map(this.#y.bind(this));p<h&&([h,p,m,b]=[p,h,b,m]),this.#a.style.color="";const _=(E,T,L)=>{const j=new Array(256),B=(p-h)/L,W=E/255,U=(T-E)/(255*L);let q=0;for(let ie=0;ie<=L;ie++){const ve=Math.round(h+ie*B),$=W+ie*U;for(let z=q;z<=ve;z++)j[z]=$;q=ve+1}for(let ie=q;ie<256;ie++)j[ie]=j[q-1];return j.join(",")},x=`g_${this.#i}_hcm_${e}_filter`,k=a.filter=this.#f(x);return this.#p(k),this.#g(_(m[0],b[0],5),_(m[1],b[1],5),_(m[2],b[2],5),k),a.url=this.#o(x),a.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#s.createElementNS(Vd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#s.createElementNS(Vd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#s.createElementNS(Vd,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#v(e,t,r){const i=this.#s.createElementNS(Vd,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#g(e,t,r,i){const s=this.#s.createElementNS(Vd,"feComponentTransfer");i.append(s),this.#v(s,"feFuncR",e),this.#v(s,"feFuncG",t),this.#v(s,"feFuncB",r)}#m(e,t){const r=this.#s.createElementNS(Vd,"feComponentTransfer");t.append(r),this.#v(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,z_(getComputedStyle(this.#a).getPropertyValue("color"))}}class xL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){si("Abstract method `_fetch` called.")}}class _L extends xL{async _fetch(e){const t=await nb(e,"arraybuffer");return new Uint8Array(t)}}if(Qo){var X2=Promise.withResolvers(),Z2=null;(async()=>{const e=await Lt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Lt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Lt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Lt(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:r,url:i,canvas:s,path2d:o}))})().then(e=>{Z2=e,X2.resolve()},e=>{zn(`loadPackages: ${e}`),Z2=new Map,X2.resolve()})}class Zh{static get promise(){return X2.promise}static get(e){return Z2?.get(e)}}async function SL(n){const t=await Zh.get("fs").promises.readFile(n);return new Uint8Array(t)}class UQ extends wL{}class $Q extends vL{_createCanvas(e,t){return Zh.get("canvas").createCanvas(e,t)}}class qQ extends yL{async _fetch(e){return SL(e)}}class VQ extends xL{async _fetch(e){return SL(e)}}const Pa={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function J2(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class V_{getPattern(){si("Abstract method `getPattern` called.")}}class WQ extends V_{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Pa.STROKE||i===Pa.FILL){const o=t.current.getClippedPathBoundingBox(i,wi(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),r=Yt.transform(r,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),J2(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(r);s.setTransform(p)}else J2(e,this._bbox),s=this._createGradient(e);return s}}function Dw(n,e,t,r,i,s,o,a){const c=e.coords,u=e.colors,h=n.data,p=n.width*4;let m;c[t+1]>c[r+1]&&(m=t,t=r,r=m,m=s,s=o,o=m),c[r+1]>c[i+1]&&(m=r,r=i,i=m,m=o,o=a,a=m),c[t+1]>c[r+1]&&(m=t,t=r,r=m,m=s,s=o,o=m);const b=(c[t]+e.offsetX)*e.scaleX,_=(c[t+1]+e.offsetY)*e.scaleY,x=(c[r]+e.offsetX)*e.scaleX,k=(c[r+1]+e.offsetY)*e.scaleY,E=(c[i]+e.offsetX)*e.scaleX,T=(c[i+1]+e.offsetY)*e.scaleY;if(_>=T)return;const L=u[s],j=u[s+1],B=u[s+2],W=u[o],U=u[o+1],q=u[o+2],ie=u[a],ve=u[a+1],$=u[a+2],z=Math.round(_),le=Math.round(T);let ne,ee,G,he,X,fe,ue,se;for(let F=z;F<=le;F++){if(F<k){const ge=F<_?0:(_-F)/(_-k);ne=b-(b-x)*ge,ee=L-(L-W)*ge,G=j-(j-U)*ge,he=B-(B-q)*ge}else{let ge;F>T?ge=1:k===T?ge=0:ge=(k-F)/(k-T),ne=x-(x-E)*ge,ee=W-(W-ie)*ge,G=U-(U-ve)*ge,he=q-(q-$)*ge}let te;F<_?te=0:F>T?te=1:te=(_-F)/(_-T),X=b-(b-E)*te,fe=L-(L-ie)*te,ue=j-(j-ve)*te,se=B-(B-$)*te;const Q=Math.round(Math.min(ne,X)),ce=Math.round(Math.max(ne,X));let pe=p*F+Q*4;for(let ge=Q;ge<=ce;ge++)te=(ne-ge)/(ne-X),te<0?te=0:te>1&&(te=1),h[pe++]=ee-(ee-fe)*te|0,h[pe++]=G-(G-ue)*te|0,h[pe++]=he-(he-se)*te|0,h[pe++]=255}}function HQ(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(s=0;s<c;s++){let h=s*a;for(let p=0;p<u;p++,h++)Dw(n,t,r[h],r[h+1],r[h+a],i[h],i[h+1],i[h+a]),Dw(n,t,r[h+a+1],r[h+1],r[h+a],i[h+a+1],i[h+1],i[h+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)Dw(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class GQ extends V_{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),b=u/p,_=h/m,x={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/b,scaleY:1/_},k=p+4,E=m+4,T=r.getCanvas("mesh",k,E),L=T.context,j=L.createImageData(p,m);if(t){const W=j.data;for(let U=0,q=W.length;U<q;U+=4)W[U]=t[0],W[U+1]=t[1],W[U+2]=t[2],W[U+3]=255}for(const W of this._figures)HQ(j,W,x);return L.putImageData(j,2,2),{canvas:T.canvas,offsetX:a-2*b,offsetY:c-2*_,scaleX:b,scaleY:_}}getPattern(e,t,r,i){J2(e,this._bbox);let s;if(i===Pa.SHADING)s=Yt.singularValueDecompose2dScale(wi(e));else if(s=Yt.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=Yt.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,i===Pa.SHADING?null:this._background,t.cachedCanvases);return i!==Pa.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class YQ extends V_{getPattern(){return"hotpink"}}function KQ(n){switch(n[0]){case"RadialAxial":return new WQ(n);case"Mesh":return new GQ(n);case"Dummy":return new YQ}throw new Error(`Unknown IR type: ${n[0]}`)}const KC={COLORED:1,UNCOLORED:2};class W_{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Q1("TilingType: "+s);const h=t[0],p=t[1],m=t[2],b=t[3],_=m-h,x=b-p,k=Yt.singularValueDecompose2dScale(this.matrix),E=Yt.singularValueDecompose2dScale(this.baseTransform),T=k[0]*E[0],L=k[1]*E[1];let j=_,B=x,W=!1,U=!1;const q=Math.ceil(c*T),ie=Math.ceil(u*L),ve=Math.ceil(_*T),$=Math.ceil(x*L);q>=ve?j=c:W=!0,ie>=$?B=u:U=!0;const z=this.getSizeAndScale(j,this.ctx.canvas.width,T),le=this.getSizeAndScale(B,this.ctx.canvas.height,L),ne=e.cachedCanvases.getCanvas("pattern",z.size,le.size),ee=ne.context,G=a.createCanvasGraphics(ee);if(G.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(G,i,o),ee.translate(-z.scale*h,-le.scale*p),G.transform(z.scale,0,0,le.scale,0,0),ee.save(),this.clipBbox(G,h,p,m,b),G.baseTransform=wi(G.ctx),G.executeOperatorList(r),G.endDrawing(),ee.restore(),W||U){const he=ne.canvas;W&&(j=c),U&&(B=u);const X=this.getSizeAndScale(j,this.ctx.canvas.width,T),fe=this.getSizeAndScale(B,this.ctx.canvas.height,L),ue=X.size,se=fe.size,F=e.cachedCanvases.getCanvas("pattern-workaround",ue,se),te=F.context,Q=W?Math.floor(_/c):0,ce=U?Math.floor(x/u):0;for(let pe=0;pe<=Q;pe++)for(let ge=0;ge<=ce;ge++)te.drawImage(he,ue*pe,se*ge,ue,se,0,0,ue,se);return{canvas:F.canvas,scaleX:X.scale,scaleY:fe.scale,offsetX:h,offsetY:p}}return{canvas:ne.canvas,scaleX:z.scale,scaleY:le.scale,offsetX:h,offsetY:p}}getSizeAndScale(e,t,r){const i=Math.max(W_.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,a=s-r;e.ctx.rect(t,r,o,a),e.current.updateRectMinMax(wi(e.ctx),[t,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case KC.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case KC.UNCOLORED:const a=Yt.makeHexColor(r[0],r[1],r[2]);i.fillStyle=a,i.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new wQ(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==Pa.SHADING&&(s=Yt.transform(s,t.baseTransform),this.matrix&&(s=Yt.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}}function XQ({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Na.isLittleEndian?4278190080:255,[c,u]=o?[s,a]:[a,s],h=r>>3,p=r&7,m=n.length;t=new Uint32Array(t.buffer);let b=0;for(let _=0;_<i;_++){for(const k=e+h;e<k;e++){const E=e<m?n[e]:255;t[b++]=E&128?u:c,t[b++]=E&64?u:c,t[b++]=E&32?u:c,t[b++]=E&16?u:c,t[b++]=E&8?u:c,t[b++]=E&4?u:c,t[b++]=E&2?u:c,t[b++]=E&1?u:c}if(p===0)continue;const x=e<m?n[e++]:255;for(let k=0;k<p;k++)t[b++]=x&1<<7-k?u:c}return{srcPos:e,destPos:b}}const XC=16,ZC=100,ZQ=15,JC=10,QC=1e3,nl=16;function JQ(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,o,a,c){e.transform(r,i,s,o,a,c),this.__originalTransform(r,i,s,o,a,c)},n.setTransform=function(r,i,s,o,a,c){e.setTransform(r,i,s,o,a,c),this.__originalSetTransform(r,i,s,o,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class QQ{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function vy(n,e,t,r,i,s,o,a,c,u){const[h,p,m,b,_,x]=wi(n);if(p===0&&m===0){const T=o*h+_,L=Math.round(T),j=a*b+x,B=Math.round(j),W=(o+c)*h+_,U=Math.abs(Math.round(W)-L)||1,q=(a+u)*b+x,ie=Math.abs(Math.round(q)-B)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(b),L,B),n.drawImage(e,t,r,i,s,0,0,U,ie),n.setTransform(h,p,m,b,_,x),[U,ie]}if(h===0&&b===0){const T=a*m+_,L=Math.round(T),j=o*p+x,B=Math.round(j),W=(a+u)*m+_,U=Math.abs(Math.round(W)-L)||1,q=(o+c)*p+x,ie=Math.abs(Math.round(q)-B)||1;return n.setTransform(0,Math.sign(p),Math.sign(m),0,L,B),n.drawImage(e,t,r,i,s,0,0,ie,U),n.setTransform(h,p,m,b,_,x),[ie,U]}n.drawImage(e,t,r,i,s,o,a,c,u);const k=Math.hypot(h,p),E=Math.hypot(m,b);return[k*c,E*u]}function eee(n){const{width:e,height:t}=n;if(e>QC||t>QC)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,c,u;const h=e+7&-8;let p=new Uint8Array(h*t),m=0;for(const E of n.data){let T=128;for(;T>0;)p[m++]=E&T?0:255,T>>=1}let b=0;for(m=0,p[m]!==0&&(o[0]=1,++b),c=1;c<e;c++)p[m]!==p[m+1]&&(o[c]=p[m]?2:1,++b),m++;for(p[m]!==0&&(o[c]=2,++b),a=1;a<t;a++){m=a*h,u=a*s,p[m-h]!==p[m]&&(o[u]=p[m]?1:8,++b);let E=(p[m]?4:0)+(p[m-h]?8:0);for(c=1;c<e;c++)E=(E>>2)+(p[m+1]?4:0)+(p[m-h+1]?8:0),i[E]&&(o[u+c]=i[E],++b),m++;if(p[m-h]!==p[m]&&(o[u+c]=p[m]?2:4,++b),b>r)return null}for(m=h*(t-1),u=a*s,p[m]!==0&&(o[u]=8,++b),c=1;c<e;c++)p[m]!==p[m+1]&&(o[u+c]=p[m]?4:8,++b),m++;if(p[m]!==0&&(o[u+c]=4,++b),b>r)return null;const _=new Int32Array([0,s,-1,0,-s,0,0,0,1]),x=new Path2D;for(a=0;b&&a<=t;a++){let E=a*s;const T=E+e;for(;E<T&&!o[E];)E++;if(E===T)continue;x.moveTo(E%s,a);const L=E;let j=o[E];do{const B=_[j];do E+=B;while(!o[E]);const W=o[E];W!==5&&W!==10?(j=W,o[E]=0):(j=W&51*j>>4,o[E]&=j>>2|j<<2),x.lineTo(E%s,E/s|0),o[E]||--b}while(L!==E);--a}return p=null,o=null,function(E){E.save(),E.scale(1/e,-1/t),E.translate(0,-t),E.fill(x),E.beginPath(),E.restore()}}class eE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=dL,this.textMatrixScale=1,this.fontMatrix=W2,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Yo.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=Yt.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=Yt.applyTransform(t,e),i=Yt.applyTransform(t.slice(2),e),s=Yt.applyTransform([t[0],t[3]],e),o=Yt.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],o[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],o[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],o[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],o[1])}updateScalingPathMinMax(e,t){Yt.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,o,a,c,u,h){const p=Yt.bezierBoundingBox(t,r,i,s,o,a,c,u,h);h||this.updateRectMinMax(e,p)}getPathBoundingBox(e=Pa.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Pa.STROKE){t||si("Stroke bounding box must include transform.");const i=Yt.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=o,r[2]+=s,r[3]+=o}return r}updateClipFromPath(){const e=Yt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Pa.FILL,t=null){return Yt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function tE(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%nl,s=(t-i)/nl,o=i===0?s:s+1,a=n.createImageData(r,nl);let c=0,u;const h=e.data,p=a.data;let m,b,_,x;if(e.kind===My.GRAYSCALE_1BPP){const k=h.byteLength,E=new Uint32Array(p.buffer,0,p.byteLength>>2),T=E.length,L=r+7>>3,j=4294967295,B=Na.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(_=m<s?nl:i,u=0,b=0;b<_;b++){const W=k-c;let U=0;const q=W>L?r:W*8-7,ie=q&-8;let ve=0,$=0;for(;U<ie;U+=8)$=h[c++],E[u++]=$&128?j:B,E[u++]=$&64?j:B,E[u++]=$&32?j:B,E[u++]=$&16?j:B,E[u++]=$&8?j:B,E[u++]=$&4?j:B,E[u++]=$&2?j:B,E[u++]=$&1?j:B;for(;U<q;U++)ve===0&&($=h[c++],ve=128),E[u++]=$&ve?j:B,ve>>=1}for(;u<T;)E[u++]=0;n.putImageData(a,0,m*nl)}}else if(e.kind===My.RGBA_32BPP){for(b=0,x=r*nl*4,m=0;m<s;m++)p.set(h.subarray(c,c+x)),c+=x,n.putImageData(a,0,b),b+=nl;m<o&&(x=r*i*4,p.set(h.subarray(c,c+x)),n.putImageData(a,0,b))}else if(e.kind===My.RGB_24BPP)for(_=nl,x=r*_,m=0;m<o;m++){for(m>=s&&(_=i,x=r*_),u=0,b=x;b--;)p[u++]=h[c++],p[u++]=h[c++],p[u++]=h[c++],p[u++]=255;n.putImageData(a,0,m*nl)}else throw new Error(`bad image kind: ${e.kind}`)}function nE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%nl,s=(t-i)/nl,o=i===0?s:s+1,a=n.createImageData(r,nl);let c=0;const u=e.data,h=a.data;for(let p=0;p<o;p++){const m=p<s?nl:i;({srcPos:c}=XQ({src:u,srcPos:c,dest:h,width:r,height:m,nonBlackColor:0})),n.putImageData(a,0,p*nl)}}function Xg(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function yy(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Qo){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function rE(n,e){if(e)return!0;const t=Yt.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Hm.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const tee=["butt","round","square"],nee=["miter","round","bevel"],ree={},iE={};class Mm{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},c,u){this.ctx=e,this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new QQ(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...wi(this.compositeCtx))}this.ctx.save(),yy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=wi(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,o=e.fnArray;let a=t||0;const c=s.length;if(c===a)return a;const u=c-a>JC&&typeof r=="function",h=u?Date.now()+ZQ:0;let p=0;const m=this.commonObjs,b=this.objs;let _;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(_=o[a],_!==Qc.dependency)this[_].apply(this,s[a]);else for(const x of s[a]){const k=x.startsWith("g_")?m:b;if(!k.has(x))return k.get(x,r),a}if(a++,a===c)return a;if(u&&++p>JC){if(Date.now()>h)return r(),a;p=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,c=i,u="prescale1",h,p;for(;s>2&&a>1||o>2&&c>1;){let m=a,b=c;s>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/m),o>2&&c>1&&(b=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/b),h=this.cachedCanvases.getCanvas(u,m,b),p=h.context,p.clearRect(0,0,m,b),p.drawImage(e,0,0,a,c,0,0,m,b),e=h.canvas,a=m,c=b,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,o=this.current.patternFill,a=wi(t);let c,u,h,p;if((e.bitmap||e.data)&&e.count>1){const q=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),s]),c=this._cachedBitmapsMap.get(q),c||(c=new Map,this._cachedBitmapsMap.set(q,c));const ie=c.get(u);if(ie&&!o){const ve=Math.round(Math.min(a[0],a[2])+a[4]),$=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:ie,offsetX:ve,offsetY:$}}h=ie}h||(p=this.cachedCanvases.getCanvas("maskCanvas",r,i),nE(p.context,e));let m=Yt.transform(a,[1/r,0,0,-1/i,0,0]);m=Yt.transform(m,[1,0,0,1,0,-i]);const[b,_,x,k]=Yt.getAxialAlignedBoundingBox([0,0,r,i],m),E=Math.round(x-b)||1,T=Math.round(k-_)||1,L=this.cachedCanvases.getCanvas("fillCanvas",E,T),j=L.context,B=b,W=_;j.translate(-B,-W),j.transform(...m),h||(h=this._scaleImage(p.canvas,$d(j)),h=h.img,c&&o&&c.set(u,h)),j.imageSmoothingEnabled=rE(wi(j),e.interpolate),vy(j,h,0,0,h.width,h.height,0,0,r,i),j.globalCompositeOperation="source-in";const U=Yt.transform($d(j),[1,0,0,1,-B,-W]);return j.fillStyle=o?s.getPattern(t,this,U,Pa.FILL):s,j.fillRect(0,0,r,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,L.canvas)),{canvas:L.canvas,offsetX:Math.round(B),offsetY:Math.round(W)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tee[e]}setLineJoin(e){this.ctx.lineJoin=nee[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...wi(this.suspendedCtx)),Xg(this.suspendedCtx,s),JQ(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,r,a,c,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,c,u,h,p){let m=e.canvas,b=c-h,_=u-p;if(o){const k=Yt.makeHexColor(...o);if(b<0||_<0||b+r>m.width||_+i>m.height){const E=this.cachedCanvases.getCanvas("maskExtension",r,i),T=E.context;T.drawImage(m,-b,-_),T.globalCompositeOperation="destination-atop",T.fillStyle=k,T.fillRect(0,0,r,i),T.globalCompositeOperation="source-over",m=E.canvas,b=_=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,_,r,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=k,e.fillRect(b,_,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const x=new Path2D;x.rect(c,u,r,i),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(m,b,_,r,i,c,u,r,i),t.restore()}save(){this.inSMaskMode?(Xg(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Xg(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,o){this.ctx.transform(e,t,r,i,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,s=this.current;let o=s.x,a=s.y,c,u;const h=wi(i),p=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,m=p?r.slice(0):null;for(let b=0,_=0,x=e.length;b<x;b++)switch(e[b]|0){case Qc.rectangle:o=t[_++],a=t[_++];const k=t[_++],E=t[_++],T=o+k,L=a+E;i.moveTo(o,a),k===0||E===0?i.lineTo(T,L):(i.lineTo(T,a),i.lineTo(T,L),i.lineTo(o,L)),p||s.updateRectMinMax(h,[o,a,T,L]),i.closePath();break;case Qc.moveTo:o=t[_++],a=t[_++],i.moveTo(o,a),p||s.updatePathMinMax(h,o,a);break;case Qc.lineTo:o=t[_++],a=t[_++],i.lineTo(o,a),p||s.updatePathMinMax(h,o,a);break;case Qc.curveTo:c=o,u=a,o=t[_+4],a=t[_+5],i.bezierCurveTo(t[_],t[_+1],t[_+2],t[_+3],o,a),s.updateCurvePathMinMax(h,c,u,t[_],t[_+1],t[_+2],t[_+3],o,a,m),_+=6;break;case Qc.curveTo2:c=o,u=a,i.bezierCurveTo(o,a,t[_],t[_+1],t[_+2],t[_+3]),s.updateCurvePathMinMax(h,c,u,o,a,t[_],t[_+1],t[_+2],t[_+3],m),o=t[_+2],a=t[_+3],_+=4;break;case Qc.curveTo3:c=o,u=a,o=t[_+2],a=t[_+3],i.bezierCurveTo(t[_],t[_+1],o,a,o,a),s.updateCurvePathMinMax(h,c,u,t[_],t[_+1],o,a,o,a,m),_+=4;break;case Qc.closePath:i.closePath();break}p&&s.updateScalingPathMinMax(h,m),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,$d(t),Pa.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,$d(t),Pa.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ree}eoClip(){this.pendingClip=iE}beginText(){this.current.textMatrix=dL,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||W2,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&zn("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const c=r.italic?"italic":"normal";let u=t;t<XC?u=XC:t>ZC&&(u=ZC),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,o){this.current.textMatrix=[e,t,r,i,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){const s=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,h=c&Yo.FILL_STROKE_MASK,p=!!(c&Yo.ADD_TO_PATH_FLAG),m=o.patternFill&&!a.missingFile;let b;(a.disableFontFace||p||m)&&(b=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||m?(s.save(),s.translate(t,r),s.beginPath(),b(s,u),i&&s.setTransform(...i),(h===Yo.FILL||h===Yo.FILL_STROKE)&&s.fill(),(h===Yo.STROKE||h===Yo.FILL_STROKE)&&s.stroke(),s.restore()):((h===Yo.FILL||h===Yo.FILL_STROKE)&&s.fillText(e,t,r),(h===Yo.STROKE||h===Yo.FILL_STROKE)&&s.strokeText(e,t,r)),p&&(this.pendingTextPaths||=[]).push({transform:wi(s),x:t,y:r,fontSize:u,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return nr(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,p=e.length,m=r.vertical,b=m?1:-1,_=r.defaultVMetrics,x=i*t.fontMatrix[0],k=t.textRenderingMode===Yo.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(h,-1):s.scale(h,1);let E;if(t.patternFill){s.save();const W=t.fillColor.getPattern(s,this,$d(s),Pa.FILL);E=wi(s),s.restore(),s.fillStyle=W}let T=t.lineWidth;const L=t.textMatrixScale;if(L===0||T===0){const W=t.textRenderingMode&Yo.FILL_STROKE_MASK;(W===Yo.STROKE||W===Yo.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=L;if(o!==1&&(s.scale(o,o),T/=o),s.lineWidth=T,r.isInvalidPDFjsFont){const W=[];let U=0;for(const q of e)W.push(q.unicode),U+=q.width;s.fillText(W.join(""),0,0),t.x+=U*x*h,s.restore(),this.compose();return}let j=0,B;for(B=0;B<p;++B){const W=e[B];if(typeof W=="number"){j+=b*W*i/1e3;continue}let U=!1;const q=(W.isSpace?c:0)+a,ie=W.fontChar,ve=W.accent;let $,z,le=W.width;if(m){const ee=W.vmetric||_,G=-(W.vmetric?ee[1]:le*.5)*x,he=ee[2]*x;le=ee?-ee[0]:le,$=G/o,z=(j+he)/o}else $=j/o,z=0;if(r.remeasure&&le>0){const ee=s.measureText(ie).width*1e3/i*o;if(le<ee&&this.isFontSubpixelAAEnabled){const G=le/ee;U=!0,s.save(),s.scale(G,1),$/=G}else le!==ee&&($+=(le-ee)/2e3*i/o)}if(this.contentVisible&&(W.isInFont||r.missingFile)){if(k&&!ve)s.fillText(ie,$,z);else if(this.paintChar(ie,$,z,E),ve){const ee=$+i*ve.offset.x/o,G=z-i*ve.offset.y/o;this.paintChar(ve.fontChar,ee,G,E)}}const ne=m?le*x-q*u:le*x+q*u;j+=ne,U&&s.restore()}m?t.y-=j:t.x+=j*h,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,o=r.fontDirection,a=i.vertical?1:-1,c=r.charSpacing,u=r.wordSpacing,h=r.textHScale*o,p=r.fontMatrix||W2,m=e.length,b=r.textRenderingMode===Yo.INVISIBLE;let _,x,k,E;if(!(b||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(h,o),_=0;_<m;++_){if(x=e[_],typeof x=="number"){E=a*x*s/1e3,this.ctx.translate(E,0),r.x+=E*h;continue}const T=(x.isSpace?u:0)+c,L=i.charProcOperatorList[x.operatorListId];if(!L){zn(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(s,s),t.transform(...p),this.executeOperatorList(L),this.restore()),k=Yt.applyTransform([x.width,0],p)[0]*s+T,t.translate(k,0),r.x+=k*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,o){this.ctx.rect(r,i,s-r,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||wi(this.ctx),s={createCanvasGraphics:o=>new Mm(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new W_(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=Yt.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=Yt.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=KQ(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,$d(t),Pa.SHADING);const i=$d(t);if(i){const{width:s,height:o}=t.canvas,[a,c,u,h]=Yt.getAxialAlignedBoundingBox([0,0,s,o],i);this.ctx.fillRect(a,c,u-a,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){si("Should not call beginInlineImage")}beginImageData(){si("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=wi(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(wi(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Q1("TODO: Support non-isolated groups."),e.knockout&&zn("Knockout groups not supported.");const r=wi(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Yt.getAxialAlignedBoundingBox(e.bbox,wi(t));const s=[0,0,t.canvas.width,t.canvas.height];i=Yt.intersect(i,s)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(h,c,u),m=p.context;m.translate(-o,-a),m.transform(...r),e.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Xg(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=wi(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=Yt.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(this.#e(),yy(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=Yt.singularValueDecompose2dScale(wi(this.ctx)),{viewportScale:h}=this,p=Math.ceil(o*this.outputScaleX*h),m=Math.ceil(a*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),yy(this.ctx)}else yy(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new eE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=eee(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),o=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=wi(a);a.transform(t,r,i,s,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,p=o.length;h<p;h+=2){const m=Yt.transform(c,[t,r,i,s,o[h],o[h+1]]),[b,_]=Yt.applyTransform([0,0],m);a.drawImage(u.canvas,b,_)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:o,width:a,height:c,transform:u}=s,h=this.cachedCanvases.getCanvas("maskCanvas",a,c),p=h.context;p.save();const m=this.getObject(o,s);nE(p,m),p.globalCompositeOperation="source-in",p.fillStyle=i?r.getPattern(p,this,$d(t),Pa.FILL):r,p.fillRect(0,0,a,c),p.restore(),t.save(),t.transform(...u),t.scale(1,-1),vy(t,h.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){zn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){zn("Dependent image isn't ready yet");return}const o=s.width,a=s.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[t,0,0,r,i[u],i[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!Qo){const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,r).context;tE(c,e),s=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(s,$d(i));i.imageSmoothingEnabled=rE(wi(i),e.interpolate),vy(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,o).context;tE(c,e),i=this.applyTransferMapsToCanvas(c)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),vy(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===iE?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=wi(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const c=Math.abs(t),u=Math.abs(s);if(c===u)if(e===0)o=a=1/c;else{const h=c*e;o=a=h<1?1/h:1}else if(e===0)o=1/c,a=1/u;else{const h=c*e,p=u*e;o=h<1?1/h:1,a=p<1?1/p:1}}else{const c=Math.abs(t*s-r*i),u=Math.hypot(t,r),h=Math.hypot(i,s);if(e===0)o=h/c,a=u/c;else{const p=e*c;o=h>p?h/p:1,a=u>p?u/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,s),o.length>0){const a=Math.max(i,s);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Qc)Mm.prototype[n]!==void 0&&(Mm.prototype[Qc[n]]=Mm.prototype[n]);class vv{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const by={DATA:1,ERROR:2},hs={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ml(n){switch(n instanceof Error||typeof n=="object"&&n!==null||si('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new vp(n.message);case"MissingPDFException":return new gp(n.message);case"PasswordException":return new H2(n.message,n.code);case"UnexpectedResponseException":return new eb(n.message,n.status);case"UnknownErrorException":return new G2(n.message,n.details);default:return new G2(n.message,n.toString())}}class iv{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===by.DATA)i.resolve(e.data);else if(e.callback===by.ERROR)i.reject(Ml(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:by.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:by.ERROR,callbackId:e.callbackId,reason:Ml(o)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,c.postMessage({sourceName:o,targetName:a,stream:hs.PULL,streamId:s,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Fs(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:hs.CANCEL,streamId:s,reason:Ml(u)}),h.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,h=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:hs.ENQUEUE,streamId:t,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:hs.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Fs(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:hs.ERROR,streamId:t,reason:Ml(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hs.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:r,targetName:i,stream:hs.START_COMPLETE,streamId:t,reason:Ml(u)})})}#i(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case hs.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ml(e.reason));break;case hs.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ml(e.reason));break;case hs.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:hs.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){c(a.onPull?.())}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hs.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:hs.PULL_COMPLETE,streamId:t,reason:Ml(c)})});break;case hs.ENQUEUE:if(Fs(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case hs.CLOSE:if(Fs(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#s(o,t);break;case hs.ERROR:Fs(o,"error should have stream controller"),o.controller.error(Ml(e.reason)),this.#s(o,t);break;case hs.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ml(e.reason)),this.#s(o,t);break;case hs.CANCEL:if(!a)break;new Promise(function(c){c(a.onCancel?.(Ml(e.reason)))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:hs.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:hs.CANCEL_COMPLETE,streamId:t,reason:Ml(c)})}),a.sinkCapability.reject(Ml(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class iee{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return O_(this.#e)}has(e){return this.#e.has(e)}}const ym=Symbol("INTERNAL");class see{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(e&Ol.DISPLAY),this.#t=!!(e&Ol.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==ym&&si("Internal method `_setVisible` called."),this.#n=r,this.#i=t}}class oee{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=Ol.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const r of e.groups)this.#t.set(r.id,new see(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(ym,!1);for(const r of e.on)this.#t.get(r)._setVisible(ym,!0);for(const r of e.off)this.#t.get(r)._setVisible(ym,!1);this.#n=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=this.#s(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return zn(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Q1("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(zn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return zn(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return zn(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return zn(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return zn(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return zn(`Unknown optional content policy ${e.policy}.`),!0}return zn(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){zn(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&this.#t.get(o)?._setVisible(ym,!1,!0);i._setVisible(ym,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?O_(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new mL;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class aee{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Fs(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});Fs(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Fs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new lee(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new cee(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class lee{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=B_(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cee{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uee(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=a(t);return h=unescape(h),h=c(h),h=u(h),s(h)}if(t=o(n),t){const h=u(t);return s(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=a(t);return h=u(h),s(h)}function r(h,p){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(h,p){if(h){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(h,{fatal:!0}),b=tb(p);p=m.decode(b),e=!1}catch{}}return p}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const p=[];let m;const b=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=b.exec(h))!==null;){let[,x,k,E]=m;if(x=parseInt(x,10),x in p){if(x===0)break;continue}p[x]=[k,E]}const _=[];for(let x=0;x<p.length&&x in p;++x){let[k,E]=p[x];E=a(E),k&&(E=unescape(E),x===0&&(E=c(E))),_.push(E)}return _.join("")}function a(h){if(h.startsWith('"')){const p=h.slice(1).split('\\"');for(let m=0;m<p.length;++m){const b=p[m].indexOf('"');b!==-1&&(p[m]=p[m].slice(0,b),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}h=p.join('"')}return h}function c(h){const p=h.indexOf("'");if(p===-1)return h;const m=h.slice(0,p),_=h.slice(p+1).replace(/^[^']*'/,"");return i(m,_)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,b,_){if(b==="q"||b==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,k){return String.fromCharCode(parseInt(k,16))}),i(m,_);try{_=atob(_)}catch{}return i(m,_)})}return""}function H_(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function G_({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Y_(n){const e=n.get("Content-Disposition");if(e){let t=uee(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(B_(t))return t}return null}function ib(n,e){return n===404||n===0&&e.startsWith("file:")?new gp('Missing PDF "'+e+'".'):new eb(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function AL(n){return n===200||n===206}function CL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(zn(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class sE{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=H_(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Fs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new hee(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class dee{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,CL(r,this._withCredentials,this._abortController)).then(s=>{if(!AL(s.status))throw ib(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:c}=G_({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=Y_(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vp("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:EL(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class hee{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,CL(s,this._withCredentials,this._abortController)).then(a=>{if(!AL(a.status))throw ib(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:EL(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Fw=200,Bw=206;function fee(n){const e=n.response;return typeof e!="string"?e:tb(e).buffer}class pee{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=H_(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const i={begin:e,end:t};for(const s in r)i[s]=r[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Bw):i.expectedStatus=Fw,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError?.(i.status);return}const s=i.status||Fw;if(!(s===Fw&&r.expectedStatus===Bw)&&s!==r.expectedStatus){r.onError?.(i.status);return}const a=fee(i);if(s===Bw){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);r.onDone({begin:parseInt(u[1],10),chunk:a})}else a?r.onDone({begin:0,chunk:a}):r.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class mee{constructor(e){this._source=e,this._manager=new pee(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Fs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gee(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new vee(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class gee{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...c]=o.split(": ");return[a,c.join(": ")]})),{allowRangeRequests:i,suggestedLength:s}=G_({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Y_(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ib(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vee{constructor(e,t,r){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=ib(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yee=/^[a-z][a-z0-9\-+.]+:/i;function bee(n){if(yee.test(n))return new URL(n);const e=Zh.get("url");return new URL(e.pathToFileURL(n))}function kL(n,e,t){return n.protocol==="http:"?Zh.get("http").request(n,{headers:e},t):Zh.get("https").request(n,{headers:e},t)}class wee{constructor(e){this.source=e,this.url=bee(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=H_(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Fs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new See(this):new xee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new Aee(this,e,t):new _ee(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class PL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vp("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class NL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class xee extends PL{constructor(e){super(e);const t=Object.fromEntries(e.headers),r=i=>{if(i.statusCode===404){const c=new gp(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=G_({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=Y_(s)};this._request=kL(this._url,t,r),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class _ee extends NL{constructor(e,t,r){super(e);const i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${r-1}`;const s=o=>{if(o.statusCode===404){const a=new gp(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=kL(this._url,i,s),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class See extends PL{constructor(e){super(e);const t=Zh.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new gp(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class Aee extends NL{constructor(e,t,r){super(e);const i=Zh.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}}const Cee=1e5,el=30,Eee=.8;class Ca{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#v=[];#g=new WeakMap;#m=null;static#y=new Map;static#w=new Map;static#E=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;this.#m=[1,0,0,-1,-o,a+s],this.#c=i,this.#l=s,Ca.#N(),rp(t,r),this.#e.promise.finally(()=>{Ca.#A.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Na.platform;return nr(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#h,t.styles),this.#M(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),Ca.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#d&&(t?.(),this.#d=i,rp(this.#a,{rotation:i})),r!==this.#o){t?.(),this.#o=r;const s={div:null,properties:null,ctx:Ca.#C(this.#s)};for(const o of this.#v)s.properties=this.#g.get(o),s.div=o,this.#x(s)}}cancel(){const e=new vp("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#v}get textContentItemsStr(){return this.#p}#M(e){if(this.#n)return;this.#r.ctx??=Ca.#C(this.#s);const t=this.#v,r=this.#p;for(const i of e){if(t.length>Cee){zn("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#k(i)}}#k(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#v.push(t);const i=Yt.transform(this.#m,e.transform);let s=Math.atan2(i[1],i[0]);const o=this.#h[e.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#i&&o.fontSubstitution||o.fontFamily;a=Ca.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),u=c*Ca.#R(a,this.#s);let h,p;s===0?(h=i[4],p=i[5]-u):(h=i[4]+u*Math.sin(s),p=i[5]-u*Math.cos(s));const m="calc(var(--scale-factor)*",b=t.style;this.#t===this.#a?(b.left=`${(100*h/this.#c).toFixed(2)}%`,b.top=`${(100*p/this.#l).toFixed(2)}%`):(b.left=`${m}${h.toFixed(2)}px)`,b.top=`${m}${p.toFixed(2)}px)`),b.fontSize=`${m}${(Ca.#S*c).toFixed(2)}px)`,b.fontFamily=a,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let _=!1;if(e.str.length>1)_=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);x!==k&&Math.max(x,k)/Math.min(x,k)>1.5&&(_=!0)}if(_&&(r.canvasWidth=o.vertical?e.height:e.width),this.#g.set(t,r),this.#r.div=t,this.#r.properties=r,this.#x(this.#r),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#x(e){const{div:t,properties:r,ctx:i}=e,{style:s}=t;let o="";if(Ca.#S>1&&(o=`scale(${1/Ca.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:a}=s,{canvasWidth:c,fontSize:u}=r;Ca.#P(i,u*this.#o,a);const{width:h}=i.measureText(t.textContent);h>0&&(o=`scaleX(${c*this.#o/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#w.values())e.remove();this.#w.clear()}}static#C(e=null){let t=this.#w.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#P(e,t,r){const i=this.#E.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#N(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#R(e,t){const r=this.#y.get(e);if(r)return r;const i=this.#C(t);i.canvas.width=i.canvas.height=el,this.#P(i,el,e);const s=i.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const h=o/(o+a);return this.#y.set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,el,el),i.strokeText("g",0,0);let c=i.getImageData(0,0,el,el).data;a=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){a=Math.ceil(h/4/el);break}i.clearRect(0,0,el,el),i.strokeText("A",0,el),c=i.getImageData(0,0,el,el).data,o=0;for(let h=0,p=c.length;h<p;h+=4)if(c[h]>0){o=el-Math.floor(h/4/el);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+a):Eee;return this.#y.set(e,u),u}}class Fv{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(Fv.shouldBuildText(a))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const kee=65536,Pee=100,Nee=5e3,Tee=Qo?$Q:BQ,Lee=Qo?qQ:bL,Ree=Qo?UQ:zQ,Iee=Qo?VQ:_L;function jee(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new K_,{docId:t}=e,r=n.url?Mee(n.url):null,i=n.data?Oee(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof TL?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:kee;let h=n.worker instanceof Om?n.worker:null;const p=n.verbosity,m=typeof n.docBaseUrl=="string"&&!rb(n.docBaseUrl)?n.docBaseUrl:null,b=typeof n.cMapUrl=="string"?n.cMapUrl:null,_=n.cMapPacked!==!1,x=n.CMapReaderFactory||Lee,k=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,E=n.StandardFontDataFactory||Iee,T=n.stopAtErrors!==!0,L=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,j=n.isEvalSupported!==!1,B=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Qo,W=typeof n.isChrome=="boolean"?n.isChrome:!Na.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,U=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,q=typeof n.disableFontFace=="boolean"?n.disableFontFace:Qo,ie=n.fontExtraProperties===!0,ve=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,z=n.disableRange===!0,le=n.disableStream===!0,ne=n.disableAutoFetch===!0,ee=n.pdfBug===!0,G=n.CanvasFactory||Tee,he=n.FilterFactory||Ree,X=n.enableHWA===!0,fe=c?c.length:n.length??NaN,ue=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Qo&&!q,se=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===bL&&E===_L&&b&&k&&rv(b,document.baseURI)&&rv(k,document.baseURI);n.canvasFactory&&GC("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&GC("`filterFactory`-instance option, please use `FilterFactory` instead.");const F=null;gQ(p);const te={canvasFactory:new G({ownerDocument:$,enableHWA:X}),filterFactory:new he({docId:t,ownerDocument:$}),cMapReaderFactory:se?null:new x({baseUrl:b,isCompressed:_}),standardFontDataFactory:se?null:new E({baseUrl:k})};if(!h){const pe={verbosity:p,port:vv.workerPort};h=pe.port?Om.fromPort(pe):new Om(pe),e._worker=h}const Q={docId:t,apiVersion:"4.8.69",data:i,password:a,disableAutoFetch:ne,rangeChunkSize:u,length:fe,docBaseUrl:m,enableXfa:ve,evaluatorOptions:{maxImageSize:L,disableFontFace:q,ignoreErrors:T,isEvalSupported:j,isOffscreenCanvasSupported:B,isChrome:W,canvasMaxAreaInBytes:U,fontExtraProperties:ie,useSystemFonts:ue,cMapUrl:se?b:null,standardFontDataUrl:se?k:null}},ce={disableFontFace:q,fontExtraProperties:ie,ownerDocument:$,pdfBug:ee,styleElement:F,loadingParams:{disableAutoFetch:ne,enableXfa:ve}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const pe=h.messageHandler.sendWithPromise("GetDocRequest",Q,i?[i.buffer]:null);let ge;if(c)ge=new aee(c,{disableRange:z,disableStream:le});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let _e;Qo?_e=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&rv(r)?sE:wee:_e=rv(r)?sE:mee,ge=new _e({url:r,length:fe,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:z,disableStream:le})}return pe.then(_e=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Te=new iv(t,_e,h.port),Ge=new zee(Te,e,ge,ce,te);e._transport=Ge,Te.send("Ready",null)})}).catch(e._capability.reject),e}function Mee(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Qo&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Oee(n){if(Qo&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return tb(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function oE(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class K_{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${K_.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class TL{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){si("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Dee{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return nr(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Fee{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new HC:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new LL,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new Jv({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return nr(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=Mh.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:p=!1}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(r,i,h,p),{renderingIntent:b,cacheKey:_}=m;this.#t=!1,this.#i(),a||=this._transport.getOptionalContentConfig(b);let x=this._intentStates.get(_);x||(x=Object.create(null),this._intentStates.set(_,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const k=!!(b&Ol.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const E=j=>{x.renderTasks.delete(T),(this._maybeCleanupAfterRender||k)&&(this.#t=!0),this.#n(!k),j?(T.capability.reject(j),this._abortOperatorList({intentState:x,reason:j instanceof Error?j:new Error(j)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new Cm({callback:E,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:u});(x.renderTasks||=new Set).add(T);const L=T.task;return Promise.all([x.displayReadyCapability.promise,a]).then(([j,B])=>{if(this.destroyed){E();return}if(this._stats?.time("Rendering"),!(B.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:j,optionalContentConfig:B}),T.operatorListChanged()}).catch(E),L}getOperatorList({intent:e="display",annotationMode:t=Mh.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Fv.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??=c.lang,Object.assign(a.styles,c.styles),a.items.push(...c.items),s()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new HC),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},Nee),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:p,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),h())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();this.#n(!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof F_){let i=Pee;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new vp(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class Bee{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:s}=r;if(s.aborted){zn("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var u1,Wf,Hf,Dm,Oy,Fm,Dy;const hi=class hi{constructor({name:e=null,port:t=null,verbosity:r=vQ()}={}){em(this,Dm);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Gc(hi,Hf)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Gc(hi,Hf)||jg(hi,Hf,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Qo?Promise.all([Zh.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new iv("main","worker",e),this._messageHandler.on("ready",function(){}),j0(this,Dm,Oy).call(this)}_initialize(){if(Gc(hi,Wf)||Gc(hi,Fm,Dy)){this._setupFakeWorker();return}let{workerSrc:e}=hi;try{hi._isSameOrigin(window.location.href,e)||(e=hi._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new iv("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,j0(this,Dm,Oy).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{Q1("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Gc(hi,Wf)||(zn("Setting up fake worker."),jg(hi,Wf,!0)),hi._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Bee;this._port=t;const r=`fake${y5(hi,u1)._++}`,i=new iv(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new iv(r,r+"_worker",t),j0(this,Dm,Oy).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Gc(hi,Hf)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=Gc(this,Hf)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new hi(e)}static get workerSrc(){if(vv.workerSrc)return vv.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return nr(this,"_setupFakeWorkerGlobal",(async()=>Gc(this,Fm,Dy)?Gc(this,Fm,Dy):(await import(this.workerSrc)).WorkerMessageHandler)())}};u1=new WeakMap,Wf=new WeakMap,Hf=new WeakMap,Dm=new WeakSet,Oy=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Fm=new WeakSet,Dy=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},em(hi,Fm),em(hi,u1,0),em(hi,Wf,!1),em(hi,Hf),Qo&&(jg(hi,Wf,!0),vv.workerSrc||="./pdf.worker.mjs"),hi._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(t,r);return r.origin===i.origin},hi._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Om=hi;class zee{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#s=null;constructor(e,t,r,i,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new LL,this.fontLoader=new DQ({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return nr(this,"annotationStorage",new q_)}getRenderingIntent(e,t=Mh.ENABLE,r=null,i=!1,s=!1){let o=Ol.DISPLAY,a=K2;switch(e){case"any":o=Ol.ANY;break;case"display":break;case"print":o=Ol.PRINT;break;default:zn(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Ol.PRINT&&r instanceof gL?r:this.annotationStorage;switch(t){case Mh.DISABLE:o+=Ol.ANNOTATIONS_DISABLE;break;case Mh.ENABLE:break;case Mh.ENABLE_FORMS:o+=Ol.ANNOTATIONS_FORMS;break;case Mh.ENABLE_STORAGE:o+=Ol.ANNOTATIONS_STORAGE,a=c.serializable;break;default:zn(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Ol.IS_EDITING),s&&(o+=Ol.OPLIST);const{ids:u,hash:h}=c.modifiedIds,p=[o,a.hash,h];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ca.cleanup(),this._networkStream?.cancelAllRequests(new vp("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Fs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}Fs(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{Fs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}Fs(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Dee(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new H2(r.message,r.code);break;case"InvalidPDFException":i=new hL(r.message);break;case"MissingPDFException":i=new gp(r.message);break;case"UnexpectedResponseException":i=new eb(r.message,r.status);break;case"UnknownErrorException":i=new G2(r.message,r.details);break;default:si("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",r=>{if(this.#s=Promise.withResolvers(),t.onPassword){const i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{t.onPassword(i,r.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new H2(r.message,r.code));return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:o,fontExtraProperties:a,pdfBug:c}=this._params;if("error"in s){const m=s.error;zn(`Error during font loading: ${m}`),this.commonObjs.resolve(r,m);break}const u=c&&globalThis.FontInspector?.enabled?(m,b)=>globalThis.FontInspector.fontAdded(m,b):null,h=new FQ(s,{disableFontFace:o,inspectFont:u});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!a&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"CopyLocalImage":const{imageRef:p}=s;Fs(p,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,b]of m.objs)if(b?.ref===p)return b.dataLen?(this.commonObjs.resolve(r,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{if(this.destroyed)return;const a=this.#t.get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":a.objs.resolve(r,o),o?.dataLen>hQ&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&zn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const o=new Fee(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,i),i}getPageIndex(e){return oE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new oee(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new iee(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ca.cleanup()}}cachedPageNumber(e){if(!oE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}}const wy=Symbol("INITIAL_DATA");class LL{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:wy}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===wy)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==wy}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==wy&&(yield[e,t])}}}class Uee{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Cm{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:p=!1,pageColors:m=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Uee(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Cm.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Cm.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:o}=this.params;this.gfx=new Mm(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Cm.#t.delete(this._canvas),this.callback(e||new F_(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Cm.#t.delete(this._canvas),this.callback())))}}const $ee="4.8.69",qee="3634dab10";function aE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Zg(n){return Math.max(0,Math.min(255,255*n))}class lE{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zg(e),[e,e,e]}static G_HTML([e]){const t=aE(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Zg)}static RGB_HTML(e){return`#${e.map(aE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Zg(1-Math.min(1,e+i)),Zg(1-Math.min(1,r+i)),Zg(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class Vee{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){si("Abstract method `_createSVG` called.")}}class X_ extends Vee{_createSVG(e){return document.createElementNS(Vd,e)}}class RL{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),a&&Fv.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,m,b]=h.at(-1);if(m+1===p.children.length){h.pop();continue}const _=p.children[++h.at(-1)[1]];if(_===null)continue;const{name:x}=_;if(x==="#text"){const E=document.createTextNode(_.value);u.push(E),b.append(E);continue}const k=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,x):document.createElement(x);if(b.append(k),_.attributes&&this.setAttributes({html:k,element:_,storage:t,intent:s,linkService:r}),_.children?.length>0)h.push([_,-1,k]);else if(_.value){const E=document.createTextNode(_.value);a&&Fv.shouldBuildText(x)&&u.push(E),k.append(E)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const e0=1e3,Wee=9,ip=new WeakSet;function Qd(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class Hee{static create(e){switch(e.data.annotationType){case Is.LINK:return new IL(e);case Is.TEXT:return new Gee(e);case Is.WIDGET:switch(e.data.fieldType){case"Tx":return new Yee(e);case"Btn":return e.data.radioButton?new jL(e):e.data.checkBox?new Xee(e):new Zee(e);case"Ch":return new Jee(e);case"Sig":return new Kee(e)}return new yp(e);case Is.POPUP:return new Q2(e);case Is.FREETEXT:return new ML(e);case Is.LINE:return new ete(e);case Is.SQUARE:return new tte(e);case Is.CIRCLE:return new nte(e);case Is.POLYLINE:return new OL(e);case Is.CARET:return new ite(e);case Is.INK:return new Z_(e);case Is.POLYGON:return new rte(e);case Is.HIGHLIGHT:return new DL(e);case Is.UNDERLINE:return new ste(e);case Is.SQUIGGLY:return new ote(e);case Is.STRIKEOUT:return new ate(e);case Is.STAMP:return new FL(e);case Is.FILEATTACHMENT:return new lte(e);default:return new Xi(e)}}}class Xi{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Xi._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:c}}}}=this;r?.splice(0,4,...e);const{width:u,height:h}=Qd(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*u/s}%`,t.height=`${100*h/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof yp||(s.tabIndex=e0);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Q2){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,s),s}const{width:a,height:c}=Qd(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,k=t.borderStyle.verticalCornerRadius;if(x>0||k>0){const T=`calc(${x}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;o.borderRadius=T}else if(this instanceof jL){const T=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=T}switch(t.borderStyle.style){case Kg.SOLID:o.borderStyle="solid";break;case Kg.DASHED:o.borderStyle="dashed";break;case Kg.BEVELED:zn("Unimplemented border style: beveled");break;case Kg.INSET:zn("Unimplemented border style: inset");break;case Kg.UNDERLINE:o.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(this.#t=!0,o.borderColor=Yt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const u=Yt.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:p,pageX:m,pageY:b}=i.rawDims;o.left=`${100*(u[0]-m)/h}%`,o.top=`${100*(u[1]-b)/p}%`;const{rotation:_}=t;return t.hasOwnCanvas||_===0?(o.width=`${100*a/h}%`,o.height=`${100*c/p}%`):this.setRotation(_,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=Qd(this.data.rect);let a,c;e%180===0?(a=100*s/r,c=100*o/i):(a=100*o/r,c=100*s/i),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=lE[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:lE[`${o}_rgb`](a)})};return nr(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,k,E,T]=e.subarray(2,6);if(i===x&&s===k&&t===E&&r===T)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:x,borderWidth:k}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const c=i-t,u=s-r,{svgFactory:h}=this,p=h.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const m=h.createElement("defs");p.append(m);const b=h.createElement("clipPath"),_=`clippath_${this.data.id}`;b.setAttribute("id",_),b.setAttribute("clipPathUnits","objectBoundingBox"),m.append(b);for(let x=2,k=e.length;x<k;x+=8){const E=e[x],T=e[x+1],L=e[x+2],j=e[x+3],B=h.createElement("rect"),W=(L-t)/c,U=(s-T)/u,q=(E-L)/c,ie=(T-j)/u;B.setAttribute("x",W),B.setAttribute("y",U),B.setAttribute("width",q),B.setAttribute("height",ie),b.append(B),a?.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${U}" width="${q}" height="${ie}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:e}=this,t=this.#n=new Q2({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){si("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!ip.has(u)){zn(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&ip.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class IL extends Xi{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){zn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:s,include:o}=t,a=[];if(i.length!==0||s.length!==0){const h=new Set(s);for(const p of i){const m=this._fieldObjects[p]||[];for(const{id:b}of m)h.add(b)}for(const p of Object.values(this._fieldObjects))for(const m of p)h.has(m.id)===o&&a.push(m)}else for(const h of Object.values(this._fieldObjects))a.push(...h);const c=this.annotationStorage,u=[];for(const h of a){const{id:p}=h;switch(u.push(p),h.type){case"text":{const b=h.defaultValue||"";c.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=h.defaultValue===h.exportValues;c.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=h.defaultValue||"";c.setValue(p,{value:b});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!ip.has(m)){zn(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class Gee extends Xi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class yp extends Xi{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Na.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(e,t,r,i){for(const[s,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Yt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Wee,s=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(jw*i))||1,p=u/h;o=Math.min(i,c(p/jw))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(u/jw))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=Yt.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Yee extends yp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let s=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",a??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),ip.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=e0,this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",h=>{e.setValue(t,{value:h.target.value}),this.setPropertyOnSiblings(r,"value",h.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue??"";r.value=c.userValue=p,c.formattedValue=null});let u=h=>{const{formattedValue:p}=c;p!=null&&(h.target.value=p),h.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",p=>{if(c.focused)return;const{target:m}=p;c.userValue&&(m.value=c.userValue),c.lastCommittedValue=m.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(b){c.userValue=b.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),b.target.value=c.userValue},formattedValue(b){const{formattedValue:_}=b.detail;c.formattedValue=_,_!=null&&b.target!==document.activeElement&&(b.target.value=_),e.setValue(t,{formattedValue:_})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:_}=b.detail,{target:x}=b;if(_===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",_);let k=c.userValue;!k||k.length<=_||(k=k.slice(0,_),x.value=c.userValue=k,e.setValue(t,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),r.addEventListener("keydown",p=>{c.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(c.commitKey=3),m===-1)return;const{value:b}=p.target;c.lastCommittedValue!==b&&(c.lastCommittedValue=b,c.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const h=u;u=null,r.addEventListener("blur",p=>{if(!c.focused||!p.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{value:m}=p.target;c.userValue=m,c.lastCommittedValue!==m&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:c.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}),h(p)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",p=>{c.lastCommittedValue=null;const{data:m,target:b}=p,{value:_,selectionStart:x,selectionEnd:k}=b;let E=x,T=k;switch(p.inputType){case"deleteWordBackward":{const L=_.substring(0,x).match(/\w*[^\w]*$/);L&&(E-=L[0].length);break}case"deleteWordForward":{const L=_.substring(x).match(/^[^\w]*\w*/);L&&(T+=L[0].length);break}case"deleteContentBackward":x===k&&(E-=1);break;case"deleteContentForward":x===k&&(T+=1);break}p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:m||"",willCommit:!1,selStart:E,selEnd:T}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(u&&r.addEventListener("blur",u),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Kee extends yp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Xee extends yp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return ip.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=e0,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(r,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jL extends yp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(ip.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=e0,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const h=o===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const m=h&&p.id===r;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Zee extends IL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Jee extends yp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");ip.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=e0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue;for(const m of i.options)m.selected=m.value===p});for(const h of this.data.options){const p=document.createElement("option");p.textContent=h.displayValue,p.value=h.exportValue,r.value.includes(h.exportValue)&&(p.setAttribute("selected",!0),s=!1),i.append(p)}let o=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=h=>{const p=h?"value":"textContent",{options:m,multiple:b}=i;return b?Array.prototype.filter.call(m,_=>_.selected).map(_=>_[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let c=a(!1);const u=h=>{const p=h.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const p={value(m){o?.();const b=m.detail.value,_=new Set(Array.isArray(b)?b:[b]);for(const x of i.options)x.selected=_.has(x.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(m){i.multiple=!0},remove(m){const b=i.options,_=m.detail.remove;b[_].selected=!1,i.remove(_),b.length>0&&Array.prototype.findIndex.call(b,k=>k.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},clear(m){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(m){const{index:b,displayValue:_,exportValue:x}=m.detail.insert,k=i.children[b],E=document.createElement("option");E.textContent=_,E.value=x,k?k.before(E):i.append(E),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},items(m){const{items:b}=m.detail;for(;i.length!==0;)i.remove(0);for(const _ of b){const{displayValue:x,exportValue:k}=_,E=document.createElement("option");E.textContent=x,E.value=k,i.append(E)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},indices(m){const b=new Set(m.detail.indices);for(const _ of m.target.options)_.selected=b.has(_.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,h)}),i.addEventListener("input",h=>{const p=a(!0),m=a(!1);e.setValue(t,{value:p}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Q2 extends Xi{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Xi._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Qee({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${D_}${r}`).join(",")),this.container}}class Qee{#e=this.#M.bind(this);#t=this.#P.bind(this);#n=this.#C.bind(this);#i=this.#x.bind(this);#s=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#v=null;#g=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:c,rect:u,parentRect:h,open:p}){this.#r=e,this.#g=i,this.#l=o,this.#v=a,this.#a=c,this.#s=t,this.#f=u,this.#d=h,this.#u=r,this.#c=pL.toDateObject(s),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",this.#i),m.addEventListener("mouseenter",this.#n),m.addEventListener("mouseleave",this.#t),m.classList.add("popupTriggerArea");for(const m of r)m.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,p&&this.#x()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#s){const s=e.style.outlineColor=Yt.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=Yt.makeHexColor(...this.#s.map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#c){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}const i=this.#w;if(i)RL.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#r.append(e)}get#w(){const e=this.#v,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#v.html||null}get#E(){return this.#w?.attributes?.style?.fontSize||0}get#S(){return this.#w?.attributes?.style?.color||null}#A(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#S,fontSize:this.#E?`calc(${this.#E}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){const a=i[s];r.append(document.createTextNode(a)),s<o-1&&r.append(document.createElement("br"))}return r}#M(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#x()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#v},e&&(this.#p=null),t&&(this.#v=this.#A(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#v}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#k(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#a;let o=!!this.#d,a=o?this.#d:this.#f;for(const _ of this.#u)if(!a||Yt.intersect(_.data.rect,a)!==null){a=_.data.rect,o=!0;break}const c=Yt.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),h=o?a[2]-a[0]+5:0,p=c[0]+h,m=c[1];this.#p=[100*(p-i)/t,100*(m-s)/r];const{style:b}=this.#r;b.left=`${this.#p[0]}%`,b.top=`${this.#p[1]}%`}#x(){this.#o=!this.#o,this.#o?(this.#C(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#e)):(this.#P(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#e))}#C(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#P(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#r.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#C(),this.#y=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class ML extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Rn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class ete extends Xi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=Qd(e.rect),i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tte extends Xi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=Qd(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",r-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class nte extends Xi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=Qd(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",r/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class OL extends Xi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;const{width:s,height:o}=Qd(e),a=this.svgFactory.create(s,o,!0);let c=[];for(let h=0,p=t.length;h<p;h+=2){const m=t[h]-e[0],b=e[3]-t[h+1];c.push(`${m},${b}`)}c=c.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",c),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class rte extends OL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ite extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Z_ extends Xi{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Rn.HIGHLIGHT:Rn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:i}}=this,{width:s,height:o}=Qd(e),a=this.svgFactory.create(s,o,!0);for(const c of t){let u=[];for(let p=0,m=c.length;p<m;p+=2){const b=c[p]-e[0],_=e[3]-c[p+1];u.push(`${b},${_}`)}u=u.join(" ");const h=this.svgFactory.createElement(this.svgElementName);this.#e.push(h),h.setAttribute("points",u),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),a.append(h)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class DL extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Rn.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class ste extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ote extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ate extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class FL extends Xi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Rn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class lte extends Xi{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=Na.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class cte{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=r,this.#i=a||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#s(e,t){const r=e.firstChild||e,i=r.id=`${D_}${t}`,s=await this.#i?.getAriaAttributes(i);if(s)for(const[o,a]of s)r.setAttribute(o,a);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;rp(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new X_,annotationStorage:e.annotationStorage||new q_,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const a=o.annotationType===Is.POPUP;if(a){const h=i.get(o.id);if(!h)continue;s.elements=h}else{const{width:h,height:p}=Qd(o.rect);if(h<=0||p<=0)continue}s.data=o;const c=Hee.create(s);if(!c.isRenderable)continue;if(!a&&o.popupRef){const h=i.get(o.popupRef);h?h.push(c):i.set(o.popupRef,[c])}const u=c.render();o.hidden&&(u.style.visibility="hidden"),await this.#s(u,o.id),c._isEditable&&(this.#n.set(c.data.id,c),this._annotationEditorUIManager?.renderAnnotationElement(c))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,rp(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const xy=/\r\n?|\n/g;class js extends xn{#e;#t="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=js.prototype,t=s=>s.isEmpty(),r=Xh.TRANSLATE_SMALL,i=Xh.TRANSLATE_BIG;return nr(this,"_keyboardManager",new Qv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Rn.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||js._defaultColor||xn._defaultLineColor,this.#s=e.fontSize||js._defaultFontSize}static initialize(e,t){xn.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case _n.FREETEXT_SIZE:js._defaultFontSize=t;break;case _n.FREETEXT_COLOR:js._defaultColor=t;break}}updateParams(e,t){switch(e){case _n.FREETEXT_SIZE:this.#r(t);break;case _n.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[_n.FREETEXT_SIZE,js._defaultFontSize],[_n.FREETEXT_COLOR,js._defaultColor||xn._defaultLineColor]]}get propertiesToUpdate(){return[[_n.FREETEXT_SIZE,this.#s],[_n.FREETEXT_COLOR,this.#e]]}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#u()},r=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-js._internalPadding*e,-(js._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Rn.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(js.#a(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=i=>{if(this.#t=i,!i){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){js._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),c1(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,c]=this.getInitialTranslation();[a,c]=this.pageTranslationToScreen(a,c);const[u,h]=this.pageDimensions,[p,m]=this.pageTranslation;let b,_;switch(this.rotation){case 0:b=e+(o[0]-p)/u,_=t+this.height-(o[1]-m)/h;break;case 90:b=e+(o[0]-p)/u,_=t-(o[1]-m)/h,[a,c]=[c,-a];break;case 180:b=e-this.width+(o[0]-p)/u,_=t-(o[1]-m)/h,[a,c]=[-a,-c];break;case 270:b=e+(o[0]-p-this.height*h)/u,_=t+(o[1]-m-this.width*u)/h,[a,c]=[-c,a];break}this.setAt(b*i,_*s,a,c)}else this.setAt(e*i,t*s,this.width*i,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(xy,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=js.#h(t.getData("text")||"").replaceAll(xy,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:a,startOffset:c}=o,u=[],h=[];if(a.nodeType===Node.TEXT_NODE){const b=a.parentElement;if(h.push(a.nodeValue.slice(c).replaceAll(xy,"")),b!==this.editorDiv){let _=u;for(const x of this.editorDiv.childNodes){if(x===b){_=h;continue}_.push(js.#a(x))}}u.push(a.nodeValue.slice(0,c).replaceAll(xy,""))}else if(a===this.editorDiv){let b=u,_=0;for(const x of this.editorDiv.childNodes)_++===c&&(b=h),b.push(js.#a(x))}this.#t=`${u.join(`
`)}${i}${h.join(`
`)}`,this.#d();const p=new Range;let m=u.reduce((b,_)=>b+_.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const _=b.nodeValue.length;if(m<=_){p.setStart(b,m),p.setEnd(b,m);break}m-=_}s.removeAllRanges(),s.addRange(p)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll(" "," ")}static#h(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof ML){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:c,rotation:u,id:h,popupRef:p},textContent:m,textPosition:b,parent:{page:{pageNumber:_}}}=e;if(!m||m.length===0)return null;i=e={annotationType:Rn.FREETEXT,color:Array.from(a),fontSize:o,value:m.join(`
`),position:b,pageIndex:_-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:p}}const s=await super.deserialize(e,t,r);return s.#s=e.fontSize,s.#e=Yt.makeHexColor(...e.color),s.#t=js.#h(e.value),s.annotationElementId=e.id||null,s._initialData=i,s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=js._internalPadding*this.parentScale,r=this.getRect(t,t),i=xn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:Rn.FREETEXT,color:i,fontSize:this.#s,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){const{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((o,a)=>o!==i[a])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const s of this.#t.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}const i=js._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class BL{toSVGPath(){si("Abstract method `toSVGPath` must be implemented.")}get box(){si("Abstract getter `box` must be implemented.")}serialize(e,t){si("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){si("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){si("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Vf{#e;#t=[];#n;#i;#s=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#v=Vf.#p+Vf.#f;constructor({x:e,y:t},r,i,s,o,a=0){this.#e=r,this.#o=s*i,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#a=Vf.#p*i,this.#u=Vf.#v*i,this.#d=i,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[r,i,s,o]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/s,(this.#c+(e[1]-t[1])/2-i)/o,(this.#l+(t[0]-e[0])/2-r)/s,(this.#c+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,i,s,o]=this.#e;let[a,c,u,h]=this.#r.subarray(8,12);const p=e-u,m=t-h,b=Math.hypot(p,m);if(b<this.#u)return!1;const _=b-this.#a,x=_/b,k=x*p,E=x*m;let T=a,L=c;a=u,c=h,u+=k,h+=E,this.#h?.push(e,t);const j=-E/_,B=k/_,W=j*this.#o,U=B*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([u+W,h+U],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([u-W,h-U],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([a+W,c+U],2),this.#s.push(NaN,NaN,NaN,NaN,(a+W-r)/s,(c+U-i)/o),this.#r.set([a-W,c-U],14),this.#t.push(NaN,NaN,NaN,NaN,(a-W-r)/s,(c-U-i)/o)),this.#r.set([T,L,a,c,u,h],6),!this.isEmpty()):(this.#r.set([T,L,a,c,u,h],6),Math.abs(Math.atan2(L-c,T-a)-Math.atan2(E,k))<Math.PI/2?([a,c,u,h]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((a+u)/2-r)/s,((c+h)/2-i)/o),[a,c,T,L]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((T+a)/2-r)/s,((L+c)/2-i)/o),!0):([T,L,a,c,u,h]=this.#r.subarray(0,6),this.#s.push(((T+5*a)/6-r)/s,((L+5*c)/6-i)/o,((5*a+u)/6-r)/s,((5*c+h)/6-i)/o,((a+u)/2-r)/s,((c+h)/2-i)/o),[u,h,a,c,T,L]=this.#r.subarray(12,18),this.#t.push(((T+5*a)/6-r)/s,((L+5*c)/6-i)/o,((5*a+u)/6-r)/s,((5*c+h)/6-i)/o,((a+u)/2-r)/s,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#w(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(r),r.join(" ")}#m(){const[e,t,r,i]=this.#e,[s,o,a,c]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-t)/i} L${(this.#r[4]-e)/r} ${(this.#r[5]-t)/i} L${s} ${o} L${a} ${c} L${(this.#r[16]-e)/r} ${(this.#r[17]-t)/i} L${(this.#r[14]-e)/r} ${(this.#r[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#w(e){const[t,r,i,s]=this.#e,o=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[c,u,h,p]=this.#g();e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${c} ${u} L${h} ${p} L${(a[0]-t)/i} ${(a[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,o){return new zL(e,t,r,i,s,o)}getOutlines(){const e=this.#s,t=this.#t,r=this.#r,[i,s,o,a]=this.#e,c=new Float64Array((this.#h?.length??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(this.#h[p]-i)/o,c[p+1]=(this.#h[p+1]-s)/a;if(c[c.length-2]=(this.#l-i)/o,c[c.length-1]=(this.#c-s)/a,isNaN(r[6])&&!this.isEmpty())return this.#E(c);const u=new Float64Array(this.#s.length+24+this.#t.length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}h=this.#A(u,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[p+m],u[h+1]=t[p+m+1],h+=2}return this.#S(u,h),this.newFreeDrawOutline(u,c,this.#e,this.#d,this.#n,this.#i)}#E(e){const t=this.#r,[r,i,s,o]=this.#e,[a,c,u,h]=this.#g(),p=new Float64Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(p,e,this.#e,this.#d,this.#n,this.#i)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#A(e,t){const r=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,o,a,c]=this.#e,[u,h,p,m]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/c],t),t+=24}}class zL extends BL{#e;#t=null;#n;#i;#s;#r;#l;constructor(e,t,r,i,s,o){super(),this.#l=e,this.#s=t,this.#e=r,this.#r=i,this.#n=s,this.#i=o,this.#a(o);const{x:a,y:c,width:u,height:h}=this.#t;for(let p=0,m=e.length;p<m;p+=2)e[p]=(e[p]-a)/u,e[p+1]=(e[p+1]-c)/h;for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-a)/u,t[p+1]=(t[p+1]-c)/h}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){const o=r-e,a=i-t;let c,u;switch(s){case 0:c=this.#c(this.#l,e,i,o,-a),u=this.#c(this.#s,e,i,o,-a);break;case 90:c=this.#u(this.#l,e,t,o,a),u=this.#u(this.#s,e,t,o,a);break;case 180:c=this.#c(this.#l,r,t,-o,a),u=this.#c(this.#s,r,t,-o,a);break;case 270:c=this.#u(this.#l,r,i,-o,-a),u=this.#u(this.#s,r,i,-o,-a);break}return{outline:Array.from(c),points:[Array.from(u)]}}#c(e,t,r,i,s){const o=new Float64Array(e.length);for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*i,o[a+1]=r+e[a+1]*s;return o}#u(e,t,r,i,s){const o=new Float64Array(e.length);for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*i,o[a+1]=r+e[a]*s;return o}#a(e){const t=this.#l;let r=t[4],i=t[5],s=r,o=i,a=r,c=i,u=r,h=i;const p=e?Math.max:Math.min;for(let k=6,E=t.length;k<E;k+=6){if(isNaN(t[k]))s=Math.min(s,t[k+4]),o=Math.min(o,t[k+5]),a=Math.max(a,t[k+4]),c=Math.max(c,t[k+5]),h<t[k+5]?(u=t[k+4],h=t[k+5]):h===t[k+5]&&(u=p(u,t[k+4]));else{const T=Yt.bezierBoundingBox(r,i,...t.slice(k,k+6));s=Math.min(s,T[0]),o=Math.min(o,T[1]),a=Math.max(a,T[2]),c=Math.max(c,T[3]),h<T[3]?(u=T[2],h=T[3]):h===T[3]&&(u=p(u,T[2]))}r=t[k+4],i=t[k+5]}const m=s-this.#n,b=o-this.#n,_=a-s+2*this.#n,x=c-o+2*this.#n;this.#t={x:m,y:b,width:_,height:x,lastPoint:[u,h]}}get box(){return this.#t}newOutliner(e,t,r,i,s,o=0){return new Vf(e,t,r,i,s,o)}getNewOutline(e,t){const{x:r,y:i,width:s,height:o}=this.#t,[a,c,u,h]=this.#e,p=s*u,m=o*h,b=r*u+a,_=i*h+c,x=this.newOutliner({x:this.#s[0]*p+b,y:this.#s[1]*m+_},this.#e,this.#r,e,this.#i,t??this.#n);for(let k=2;k<this.#s.length;k+=2)x.add({x:this.#s[k]*p+b,y:this.#s[k+1]*m+_});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class cE{#e;#t=[];#n=[];constructor(e,t=0,r=0,i=!0){let s=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:k,y:E,width:T,height:L}of e){const j=Math.floor((k-t)/u)*u,B=Math.ceil((k+T+t)/u)*u,W=Math.floor((E-t)/u)*u,U=Math.ceil((E+L+t)/u)*u,q=[j,W,U,!0],ie=[B,W,U,!1];this.#t.push(q,ie),s=Math.min(s,j),o=Math.max(o,B),a=Math.min(a,W),c=Math.max(c,U)}const h=o-s+2*r,p=c-a+2*r,m=s-r,b=a-r,_=this.#t.at(i?-1:-2),x=[_[0],_[2]];for(const k of this.#t){const[E,T,L]=k;k[0]=(E-m)/h,k[1]=(T-b)/p,k[2]=(L-b)/p}this.#e={x:m,y:b,width:h,height:p,lastPoint:x}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#r(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,c,u,h,p]=o;r.delete(o);let m=a,b=c;for(s=[a,u],i.push(s);;){let _;if(r.has(h))_=h;else if(r.has(p))_=p;else break;r.delete(_),[a,c,u,h,p]=_,m!==a&&(s.push(m,b,a,b===c?c:u),m=a),b=b===c?u:c}s.push(m,b)}return new ute(i,this.#e)}#s(e){const t=this.#n;let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1}#r([,e,t]){const r=this.#s(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#s(e);for(let i=r;i<this.#n.length;i++){const[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=this.#n[i];if(s!==e)break;if(s===e&&o===t){this.#n.splice(i,1);return}}}#c(e){const[t,r,i]=e,s=[[t,r,i]],o=this.#s(i);for(let a=0;a<o;a++){const[c,u]=this.#n[a];for(let h=0,p=s.length;h<p;h++){const[,m,b]=s[h];if(!(u<=m||b<=c)){if(m>=c){if(b>u)s[h][1]=u;else{if(p===1)return[];s.splice(h,1),h--,p--}continue}s[h][2]=c,b>u&&s.push([t,u,b])}}}return s}}class ute extends BL{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){const o=t[s],a=t[s+1];o===r?(e.push(`V${a}`),i=a):a===i&&(e.push(`H${o}`),r=o)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){const o=[],a=r-e,c=i-t;for(const u of this.#t){const h=new Array(u.length);for(let p=0;p<u.length;p+=2)h[p]=e+u[p]*a,h[p+1]=i-u[p+1]*c;o.push(h)}return o}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class ex extends Vf{newFreeDrawOutline(e,t,r,i,s,o){return new dte(e,t,r,i,s,o)}get classNamesForDrawing(){return["highlight","free"]}}class dte extends zL{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,i,s,o=0){return new ex(e,t,r,i,s,o)}}class wc{#e=null;#t=null;#n;#i=null;#s=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return nr(this,"_keyboardManager",new Qv([[["Escape","mac+Escape"],wc.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wc.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wc.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wc.prototype._moveToPrevious],[["Home","mac+Home"],wc.prototype._moveToBeginning],[["End","mac+End"],wc.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#d=_n.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#d=_n.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",wc.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#v.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",_c,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of this.#a.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",wc.#o[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#p.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#v(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#v(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#v(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#v(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#v(e);return}this.#i.lastChild?.focus()}#f(e){wc._keyboardManager.exec(this,e)}#v(e){if(this.#m){this.hideDropdown();return}if(this.#s=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const t=this.#i=this.#h();this.#e.append(t)}#g(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#a.highlightColors.values();for(const r of this.#i.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class qi extends xn{#e=null;#t=0;#n;#i=null;#s=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#v="";#g;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Rn.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=qi.prototype;return nr(this,"_keyboardManager",new Qv([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||qi._defaultColor,this.#g=e.thickness||qi._defaultThickness,this.#p=e.opacity||qi._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#v=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#w(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new cE(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;const t=new cE(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:r}=this.#r.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#w({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;const i=1.5;if(this.#r=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#d=t,this.#i=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){const h=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,qi.#x(this.#a.box,(h-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,qi.#x(this.#r.box,h))}const{x:s,y:o,width:a,height:c}=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=c;break;case 90:{const[h,p]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*p/h,this.height=c*h/p;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=c;break;case 270:{const[h,p]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*p/h,this.height=c*h/p;break}}const{lastPoint:u}=this.#r.box;this.#h=[(u[0]-s)/a,(u[1]-o)/c]}static initialize(e,t){xn.initialize(e,t),qi._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case _n.HIGHLIGHT_DEFAULT_COLOR:qi._defaultColor=t;break;case _n.HIGHLIGHT_THICKNESS:qi._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case _n.HIGHLIGHT_COLOR:this.#E(t);break;case _n.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[_n.HIGHLIGHT_DEFAULT_COLOR,qi._defaultColor],[_n.HIGHLIGHT_THICKNESS,qi._defaultThickness]]}get propertiesToUpdate(){return[[_n.HIGHLIGHT_COLOR,this.color||qi._defaultColor],[_n.HIGHLIGHT_THICKNESS,this.#g||qi._defaultThickness],[_n.HIGHLIGHT_FREE,this.#o]]}#E(e){const t=(s,o)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#s?.updateColor(s),this.#p=o,this.parent?.drawLayer.changeOpacity(this.#d,o)},r=this.color,i=this.#p;this.addCommands({cmd:t.bind(this,e,qi._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,r=i=>{this.#g=i,this.#A(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#s=new wc({editor:this}),e.addColorPicker(this.#s)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#M(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#M():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#o)return;this.#w({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#M(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#i))}static#x({x:e,y:t,width:r,height:i},s){switch(s){case 90:return{x:1-t-i,y:e,width:i,height:r};case 180:return{x:1-e-r,y:1-t-i,width:r,height:i};case 270:return{x:t,y:1-e-r,width:i,height:r}}return{x:e,y:t,width:r,height:i}}rotate(e){const{drawLayer:t}=this.parent;let r;this.#o?(e=(e-this.rotation+360)%360,r=qi.#x(this.#a.box,e)):r=qi.#x(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,qi.#x(this.#r.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#v&&(e.setAttribute("aria-label",this.#v),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),c1(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#C(e){qi._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#P(!0);break;case 1:case 3:this.#P(!1);break}}#P(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#P(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#N(){return this.#o?this.rotation:0}#R(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8);let a=0;for(const{x:c,y:u,width:h,height:p}of s){const m=c*e+r,b=(1-u-p)*t+i;o[a]=o[a+4]=m,o[a+1]=o[a+3]=b,o[a+2]=o[a+6]=m+h*e,o[a+5]=o[a+7]=b+p*t,a+=8}return o}#_(e){return this.#a.serialize(e,this.#N())}static startHighlighting(e,t,{target:r,x:i,y:s}){const{x:o,y:a,width:c,height:u}=r.getBoundingClientRect(),h=new AbortController,p=e.combinedSignal(h),m=_=>{_.preventDefault(),_.stopPropagation()},b=_=>{h.abort(),this.#I(e,_)};window.addEventListener("blur",b,{signal:p}),window.addEventListener("pointerup",b,{signal:p}),window.addEventListener("pointerdown",m,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",_c,{signal:p}),r.addEventListener("pointermove",this.#b.bind(this,e),{signal:p}),this._freeHighlight=new ex({x:i,y:s},[o,a,c,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#b(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#I(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof DL){const{data:{quadPoints:_,rect:x,rotation:k,id:E,color:T,opacity:L,popupRef:j},parent:{page:{pageNumber:B}}}=e;i=e={annotationType:Rn.HIGHLIGHT,color:Array.from(T),opacity:L,quadPoints:_,boxes:null,pageIndex:B-1,rect:x.slice(0),rotation:k,id:E,deleted:!1,popupRef:j}}else if(e instanceof Z_){const{data:{inkLists:_,rect:x,rotation:k,id:E,color:T,borderStyle:{rawWidth:L},popupRef:j},parent:{page:{pageNumber:B}}}=e;i=e={annotationType:Rn.HIGHLIGHT,color:Array.from(T),thickness:L,inkLists:_,boxes:null,pageIndex:B-1,rect:x.slice(0),rotation:k,id:E,deleted:!1,popupRef:j}}const{color:s,quadPoints:o,inkLists:a,opacity:c}=e,u=await super.deserialize(e,t,r);u.color=Yt.makeHexColor(...s),u.#p=c||1,a&&(u.#g=e.thickness),u.annotationElementId=e.id||null,u._initialData=i;const[h,p]=u.pageDimensions,[m,b]=u.pageTranslation;if(o){const _=u.#n=[];for(let x=0;x<o.length;x+=8)_.push({x:(o[x]-m)/h,y:1-(o[x+1]-b)/p,width:(o[x+2]-o[x])/h,height:(o[x+1]-o[x+5])/p});u.#y(),u.#k(),u.rotate(u.rotation)}else if(a){u.#o=!0;const _=a[0],x={x:_[0]-m,y:p-(_[1]-b)},k=new ex(x,[0,0,h,p],1,u.#g/2,!0,.001);for(let L=0,j=_.length;L<j;L+=2)x.x=_[L]-m,x.y=p-(_[L+1]-b),k.add(x);const{id:E,clipPathId:T}=t.drawLayer.draw(k,u.color,u._defaultOpacity,!0);u.#w({highlightOutlines:k.getOutlines(),highlightId:E,clipPathId:T}),u.#k()}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=xn._colorManager.convert(this.color),i={annotationType:Rn.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#g,quadPoints:this.#R(),outlines:this.#_(t),pageIndex:this.pageIndex,rect:t,rotation:this.#N(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#j(i)?null:(i.id=this.annotationElementId,i)}#j(e){const{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class ko extends xn{#e=0;#t=0;#n=null;#i=new Path2D;#s=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=Rn.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){xn.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case _n.INK_THICKNESS:ko._defaultThickness=t;break;case _n.INK_COLOR:ko._defaultColor=t;break;case _n.INK_OPACITY:ko._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case _n.INK_THICKNESS:this.#p(t);break;case _n.INK_COLOR:this.#f(t);break;case _n.INK_OPACITY:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[_n.INK_THICKNESS,ko._defaultThickness],[_n.INK_COLOR,ko._defaultColor||xn._defaultLineColor],[_n.INK_OPACITY,Math.round(ko._defaultOpacity*100)]]}get propertiesToUpdate(){return[[_n.INK_THICKNESS,this.thickness||ko._defaultThickness],[_n.INK_COLOR,this.color||ko._defaultColor||xn._defaultLineColor],[_n.INK_OPACITY,Math.round(100*(this.opacity??ko._defaultOpacity))]]}#p(e){const t=i=>{this.thickness=i,this.#T()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=i=>{this.color=i,this.#x()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(e){const t=i=>{this.opacity=i,this.#x()};e/=100;const r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_n.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#R(),this.#_()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#T()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,r=this.width*e,i=this.height*t;this.setDimensions(r,i)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#C())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#P())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#g(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:i,parentScale:s,scaleFactor:o}=this;e.lineWidth=i*s/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${IQ(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",_c,{signal:this._uiManager._signal}),this.#P(),this.#r=new AbortController;const r=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#b(),this.thickness||=ko._defaultThickness,this.color||=ko._defaultColor||xn._defaultLineColor,this.opacity??=ko._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#A(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#w(e,t){const[r,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===i)return;const s=this.currentPath;let o=this.#i;if(s.push([e,t]),this.#l=!0,s.length<=2){o.moveTo(...s[0]),o.lineTo(e,t);return}s.length===3&&(this.#i=o=new Path2D,o.moveTo(...s[0])),this.#M(o,...s.at(-3),...s.at(-2),e,t)}#E(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#w(e,t),this.#E();let r;if(this.currentPath.length!==1)r=this.#k();else{const c=[e,t];r=[[c,c.slice(),c.slice(),c]]}const i=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D;const o=()=>{this.allRawPaths.push(s),this.paths.push(r),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},a=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#R(),this.#_()),this.#T())};this.addCommands({cmd:o,undo:a,mustExec:!0})}#A(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(o=>o[0]),i=t.map(o=>o[1]);Math.min(...r)-e,Math.max(...r)+e,Math.min(...i)-e,Math.max(...i)+e;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)s.stroke(o);s.stroke(this.#i),s.restore()}#M(e,t,r,i,s,o,a){const c=(t+i)/2,u=(r+s)/2,h=(i+o)/2,p=(s+a)/2;e.bezierCurveTo(c+2*(i-c)/3,u+2*(s-u)/3,h+2*(i-h)/3,p+2*(s-p)/3,h,p)}#k(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[i,s]=e[0];for(r=1;r<e.length-2;r++){const[m,b]=e[r],[_,x]=e[r+1],k=(m+_)/2,E=(b+x)/2,T=[i+2*(m-i)/3,s+2*(b-s)/3],L=[k+2*(m-k)/3,E+2*(b-E)/3];t.push([[i,s],T,L,[k,E]]),[i,s]=[k,E]}const[o,a]=e[r],[c,u]=e[r+1],h=[i+2*(o-i)/3,s+2*(a-s)/3],p=[c+2*(o-c)/3,u+2*(a-u)/3];return t.push([[i,s],h,p,[c,u]]),t}#x(){if(this.isEmpty()){this.#j();return}this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#j();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#T(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#C(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#P(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#w(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#N(e)}canvasPointerleave(e){this.#N(e)}#N(e){this.#r?.abort(),this.#r=null,this.#C(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",_c)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#R(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#_(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,i,s,o]=this.#g();if(this.setAt(r,i,0,0),this.setDims(s,o),this.#R(),this.width){const[a,c]=this.parentDimensions;this.setAspectRatio(this.width*a,this.height*c),this.setAt(e*a,t*c,this.width*a,this.height*c),this.#c=!0,this.#b(),this.setDims(this.width*a,this.height*c),this.#x(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#_(),this.div}#b(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#j()}setDimensions(e,t){const r=Math.round(e),i=Math.round(t);if(this.#d===r&&this.#o===i)return;this.#d=r,this.#o=i,this.canvas.style.visibility="hidden";const[s,o]=this.parentDimensions;this.width=e/s,this.height=t/o,this.fixAndSetPosition(),this.#s&&this.#I(e,t),this.#b(),this.#x(),this.canvas.style.visibility="visible",this.fixDims()}#I(e,t){const r=this.#U(),i=(e-r)/this.#t,s=(t-r)/this.#e;this.scaleFactor=Math.min(i,s)}#j(){const e=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#O(e){const t=new Path2D;for(let r=0,i=e.length;r<i;r++){const[s,o,a,c]=e[r];r===0&&t.moveTo(...s),t.bezierCurveTo(o[0],o[1],a[0],a[1],c[0],c[1])}return t}static#$(e,t,r){const[i,s,o,a]=t;switch(r){case 0:for(let c=0,u=e.length;c<u;c+=2)e[c]+=i,e[c+1]=a-e[c+1];break;case 90:for(let c=0,u=e.length;c<u;c+=2){const h=e[c];e[c]=e[c+1]+i,e[c+1]=h+s}break;case 180:for(let c=0,u=e.length;c<u;c+=2)e[c]=o-e[c],e[c+1]+=s;break;case 270:for(let c=0,u=e.length;c<u;c+=2){const h=e[c];e[c]=o-e[c+1],e[c+1]=a-h}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,r){const[i,s,o,a]=t;switch(r){case 0:for(let c=0,u=e.length;c<u;c+=2)e[c]-=i,e[c+1]=a-e[c+1];break;case 90:for(let c=0,u=e.length;c<u;c+=2){const h=e[c];e[c]=e[c+1]-s,e[c+1]=h-i}break;case 180:for(let c=0,u=e.length;c<u;c+=2)e[c]=o-e[c],e[c+1]-=s;break;case 270:for(let c=0,u=e.length;c<u;c+=2){const h=e[c];e[c]=a-e[c+1],e[c+1]=o-h}break;default:throw new Error("Invalid rotation")}return e}#D(e,t,r,i){const s=[],o=this.thickness/2,a=e*t+o,c=e*r+o;for(const u of this.paths){const h=[],p=[];for(let m=0,b=u.length;m<b;m++){const[_,x,k,E]=u[m];if(_[0]===E[0]&&_[1]===E[1]&&b===1){const ve=e*_[0]+a,$=e*_[1]+c;h.push(ve,$),p.push(ve,$);break}const T=e*_[0]+a,L=e*_[1]+c,j=e*x[0]+a,B=e*x[1]+c,W=e*k[0]+a,U=e*k[1]+c,q=e*E[0]+a,ie=e*E[1]+c;m===0&&(h.push(T,L),p.push(T,L)),h.push(j,B,W,U,q,ie),p.push(j,B),m===b-1&&p.push(q,ie)}s.push({bezier:ko.#$(h,i,this.rotation),points:ko.#$(p,i,this.rotation)})}return s}#F(){let e=1/0,t=-1/0,r=1/0,i=-1/0;for(const s of this.paths)for(const[o,a,c,u]of s){const h=Yt.bezierBoundingBox(...o,...a,...c,...u);e=Math.min(e,h[0]),r=Math.min(r,h[1]),t=Math.max(t,h[2]),i=Math.max(i,h[3])}return[e,r,t,i]}#U(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#T(e=!1){if(this.isEmpty())return;if(!this.#s){this.#x();return}const t=this.#F(),r=this.#U();this.#t=Math.max(xn.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(xn.MIN_SIZE,t[3]-t[1]);const i=Math.ceil(r+this.#t*this.scaleFactor),s=Math.ceil(r+this.#e*this.scaleFactor),[o,a]=this.parentDimensions;this.width=i/o,this.height=s/a,this.setAspectRatio(i,s);const c=this.translationX,u=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#b(),this.#x(),this.#d=i,this.#o=s,this.setDims(i,s);const h=e?r/this.scaleFactor/2:0;this.translate(c-this.translationX-h,u-this.translationY-h)}static async deserialize(e,t,r){if(e instanceof Z_)return null;const i=await super.deserialize(e,t,r);i.thickness=e.thickness,i.color=Yt.makeHexColor(...e.color),i.opacity=e.opacity;const[s,o]=i.pageDimensions,a=i.width*s,c=i.height*o,u=i.parentScale,h=e.thickness/2;i.#s=!0,i.#d=Math.round(a),i.#o=Math.round(c);const{paths:p,rect:m,rotation:b}=e;for(let{bezier:x}of p){x=ko.#B(x,m,b);const k=[];i.paths.push(k);let E=u*(x[0]-h),T=u*(x[1]-h);for(let j=2,B=x.length;j<B;j+=6){const W=u*(x[j]-h),U=u*(x[j+1]-h),q=u*(x[j+2]-h),ie=u*(x[j+3]-h),ve=u*(x[j+4]-h),$=u*(x[j+5]-h);k.push([[E,T],[W,U],[q,ie],[ve,$]]),E=ve,T=$}const L=this.#O(k);i.bezierPath2D.push(L)}const _=i.#F();return i.#t=Math.max(xn.MIN_SIZE,_[2]-_[0]),i.#e=Math.max(xn.MIN_SIZE,_[3]-_[1]),i.#I(a,c),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=xn._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Rn.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#D(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class J_ extends xn{#e=null;#t=null;#n=null;#i=null;#s=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=Rn.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#s=e.bitmapFile}static initialize(e,t){xn.initialize(e,t)}static get supportedTypes(){return nr(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return nr(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(Rn.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:o}=e||this.copyCanvas(null,null,!0).imageData,a=await r.guess({name:"altText",request:{data:i,width:s,height:o,channels:i.length/(s*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const c=a.output;return await this.setGuessedAltText(c),t&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#o(i)).finally(()=>this.#h());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#o(i)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=J_.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>o*i||r>o*s){const h=Math.min(o*i/t,o*s/r);t*=h,r*=h}const[a,c]=this.parentDimensions;this.setDims(t*a/i,r*c/s),this._uiManager.enableWaiting(!1);const u=this.#l=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#w(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&u.setAttribute("aria-label",this.#r)}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:s}=this.#e,o=new Y2;let a=this.#e,c=i,u=s,h=null;if(t){if(i>t||s>t){const W=Math.min(t/i,t/s);c=Math.floor(i*W),u=Math.floor(s*W)}h=document.createElement("canvas");const m=h.width=Math.ceil(c*o.sx),b=h.height=Math.ceil(u*o.sy);this.#a||(a=this.#g(m,b));const _=h.getContext("2d");_.filter=this._uiManager.hcmFilter;let x="white",k="#cfcfd8";this._uiManager.hcmFilter!=="none"?k="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",k="#42414d");const E=15,T=E*o.sx,L=E*o.sy,j=new OffscreenCanvas(T*2,L*2),B=j.getContext("2d");B.fillStyle=x,B.fillRect(0,0,T*2,L*2),B.fillStyle=k,B.fillRect(0,0,T,L),B.fillRect(T,L,T,L),_.fillStyle=_.createPattern(j,"repeat"),_.fillRect(0,0,m,b),_.drawImage(a,0,0,a.width,a.height,0,0,m,b)}let p=null;if(r){let m,b;if(o.symmetric&&a.width<e&&a.height<e)m=a.width,b=a.height;else if(a=this.#e,i>e||s>e){const k=Math.min(e/i,e/s);m=Math.floor(i*k),b=Math.floor(s*k),this.#a||(a=this.#g(m,b))}const x=new OffscreenCanvas(m,b).getContext("2d",{willReadFrequently:!0});x.drawImage(a,0,0,a.width,a.height,0,0,m,b),p={width:m,height:b,data:x.getImageData(0,0,m,b).data}}return{canvas:h,width:c,height:u,imageData:p}}#v(e,t){const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const s=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},s)}#g(e,t){const{width:r,height:i}=this.#e;let s=r,o=i,a=this.#e;for(;s>2*e||o>2*t;){const c=s,u=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(s,o);h.getContext("2d").drawImage(a,0,0,c,u,0,0,s,o),a=h.transferToImageBitmap()}return a}#m(e,t){const r=new Y2,i=Math.ceil(e*r.sx),s=Math.ceil(t*r.sy),o=this.#l;if(!o||o.width===i&&o.height===s)return;o.width=i,o.height=s;const a=this.#a?this.#e:this.#g(i,s),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(a,0,0,a.width,a.height,0,0,i,s)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Hm.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*Hm.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}#w(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,r){let i=null;if(e instanceof FL){const{data:{rect:_,rotation:x,id:k,structParent:E,popupRef:T},container:L,parent:{page:{pageNumber:j}}}=e,B=L.querySelector("canvas"),W=r.imageManager.getFromCanvas(L.id,B);B.remove();const U=(await t._structTree.getAriaAttributes(`${D_}${k}`))?.get("aria-label")||"";i=e={annotationType:Rn.STAMP,bitmapId:W.id,bitmap:W.bitmap,pageIndex:j-1,rect:_.slice(0),rotation:x,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:E,popupRef:T}}const s=await super.deserialize(e,t,r),{rect:o,bitmap:a,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:p}=e;u&&r.imageManager.isValidId(u)?(s.#t=u,a&&(s.#e=a)):s.#i=c,s.#a=h;const[m,b]=s.pageDimensions;return s.width=(o[2]-o[0])/m,s.height=(o[3]-o[1])/b,s.annotationElementId=e.id||null,p&&(s.altTextData=p),s._initialData=i,s.#d=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Rn.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const a=this.#E(r);if(a.isSame)return null;a.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const o=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#y(!1))}return r}#E(e){const{rect:t,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=e.rect.every((c,u)=>Math.abs(c-t[u])<1),o=e.pageIndex===r,a=(e.accessibilityData?.alt||"")===i;return{isSame:s&&o&&a,isSameAltText:a}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class Gd{#e;#t=!1;#n=null;#i=null;#s=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([js,ko,J_,qi].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:h}){const p=[...Gd.#h.values()];if(!Gd._initialized){Gd._initialized=!0;for(const m of p)m.initialize(h,e)}e.registerEditorTypes(p),this.#o=e,this.pageIndex=t,this.div=r,this.#e=s,this.#n=o,this.viewport=u,this.#a=c,this.drawLayer=a,this._structTree=i,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===Rn.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case Rn.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Rn.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Rn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of Gd.#h.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==Rn.INK)return;if(!e){for(const r of this.#r.values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n)return;const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of this.#r.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const s of i){const{id:o}=s.data;if(this.#o.isDeletedAnnotationElement(o))continue;let a=t.get(o);if(a){a.resetAnnotationElement(s),a.show(!1),s.show();continue}a=e.get(o),a&&(this.#o.addChangedExistingAnnotation(a),a.renderAnnotationElement(s)&&a.show(!1)),s.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of Gd.#h.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#a.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#a.div.contains(t)){const{isMac:r}=Na.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),qi.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),xn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return Gd.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){const t=this.#f;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:r,offsetY:i}=this.#g(),s=this.getNextId(),o=this.#v({parent:this,id:s,x:r,y:i,uiManager:this.#o,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await Gd.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...r});return s&&this.add(s),s}#g(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+i),u=(s+a)/2-e,h=(o+c)/2-t,[p,m]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:p,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=Na.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===Rn.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===Rn.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Na.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(e,t,r){const i=this.#o.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,rp(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,rp(this.div,{rotation:r}),t!==r)for(const i of this.#r.values())i.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class Ko{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return nr(this,"_svgFactory",new X_)}static#s(e,{x:t=0,y:r=0,width:i=1,height:s=1}={}){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`}#r(e){const t=Ko._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),Ko.#s(t,e),t}#l(e,t){const r=Ko._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Ko._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}draw(e,t,r,i=!1){const s=this.#t++,o=this.#r(e.box);o.classList.add(...e.classNamesForDrawing);const a=Ko._svgFactory.createElement("defs");o.append(a);const c=Ko._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),i&&this.#i.set(s,c);const h=this.#l(a,u),p=Ko._svgFactory.createElement("use");return o.append(p),o.setAttribute("fill",t),o.setAttribute("fill-opacity",r),p.setAttribute("href",`#${u}`),this.#n.set(s,o),{id:s,clipPathId:`url(#${h})`}}drawOutline(e){const t=this.#t++,r=this.#r(e.box);r.classList.add(...e.classNamesForOutlining);const i=Ko._svgFactory.createElement("defs");r.append(i);const s=Ko._svgFactory.createElement("path");i.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const h=Ko._svgFactory.createElement("mask");i.append(h),a=`mask_p${this.pageIndex}_${t}`,h.setAttribute("id",a),h.setAttribute("maskUnits","objectBoundingBox");const p=Ko._svgFactory.createElement("rect");h.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Ko._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=Ko._svgFactory.createElement("use");r.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return r.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){Ko.#s(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var hte=An.AbortException,fte=An.AnnotationEditorLayer,pte=An.AnnotationEditorParamsType,mte=An.AnnotationEditorType,gte=An.AnnotationEditorUIManager,vte=An.AnnotationLayer,yte=An.AnnotationMode,bte=An.ColorPicker,wte=An.DOMSVGFactory,xte=An.DrawLayer,_te=An.FeatureTest,UL=An.GlobalWorkerOptions,Ste=An.ImageKind,Ate=An.InvalidPDFException,Cte=An.MissingPDFException,Ete=An.OPS,kte=An.OutputScale,Pte=An.PDFDataRangeTransport,Nte=An.PDFDateString,Tte=An.PDFWorker,Lte=An.PasswordResponses,Rte=An.PermissionFlag,Ite=An.PixelsPerInch,jte=An.RenderingCancelledException,Mte=An.TextLayer,Ote=An.UnexpectedResponseException,Dte=An.Util,Fte=An.VerbosityLevel,Bte=An.XfaLayer,zte=An.build,Ute=An.createValidAbsoluteUrl,$te=An.fetchData,qte=An.getDocument,Vte=An.getFilenameFromUrl,Wte=An.getPdfFilenameFromUrl,Hte=An.getXfaPageViewport,Gte=An.isDataScheme,Yte=An.isPdfFile,Kte=An.noContextMenu,Xte=An.normalizeUnicode,Zte=An.setLayerDimensions,Jte=An.shadow,$L=An.version;const Ene=Object.freeze(Object.defineProperty({__proto__:null,AbortException:hte,AnnotationEditorLayer:fte,AnnotationEditorParamsType:pte,AnnotationEditorType:mte,AnnotationEditorUIManager:gte,AnnotationLayer:vte,AnnotationMode:yte,ColorPicker:bte,DOMSVGFactory:wte,DrawLayer:xte,FeatureTest:_te,GlobalWorkerOptions:UL,ImageKind:Ste,InvalidPDFException:Ate,MissingPDFException:Cte,OPS:Ete,OutputScale:kte,PDFDataRangeTransport:Pte,PDFDateString:Nte,PDFWorker:Tte,PasswordResponses:Lte,PermissionFlag:Rte,PixelsPerInch:Ite,RenderingCancelledException:jte,TextLayer:Mte,UnexpectedResponseException:Ote,Util:Dte,VerbosityLevel:Fte,XfaLayer:Bte,build:zte,createValidAbsoluteUrl:Ute,fetchData:$te,getDocument:qte,getFilenameFromUrl:Vte,getPdfFilenameFromUrl:Wte,getXfaPageViewport:Hte,isDataScheme:Gte,isPdfFile:Yte,noContextMenu:Kte,normalizeUnicode:Xte,setLayerDimensions:Zte,shadow:Jte,version:$L},Symbol.toStringTag,{value:"Module"}));UL.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${$L}/pdf.worker.min.mjs`;xj.createRoot(document.getElementById("root")).render(y.jsx(vn.StrictMode,{children:y.jsx(K4,{children:y.jsx(ak,{children:y.jsx(dQ,{})})})}));export{C_ as $,WP as A,mn as B,YP as C,Wh as D,Hq as E,Mv as F,Ov as G,xZ as H,Ds as I,Oh as J,Bv as K,Kq as L,nN as M,lN as N,CZ as O,rl as P,JT as Q,vn as R,Qq as S,QT as T,oN as U,h_ as V,tl as W,Vx as X,p4 as Y,S_ as Z,A_ as _,KP as a,D4 as a$,E_ as a0,io as a1,Ms as a2,so as a3,Os as a4,Dn as a5,YK as a6,Po as a7,B4 as a8,cL as a9,Wq as aA,Aj as aB,Kd as aC,ef as aD,Nv as aE,Pv as aF,HP as aG,GP as aH,$x as aI,fne as aJ,JP as aK,wk as aL,une as aM,zg as aN,hz as aO,dz as aP,uz as aQ,cz as aR,cp as aS,Xq as aT,OA as aU,eV as aV,j7 as aW,LV as aX,Ty as aY,Sy as aZ,Sne as a_,kn as aa,tV as ab,rV as ac,_ne as ad,NK as ae,mk as af,XP as ag,Ux as ah,$m as ai,ene as aj,_r as ak,Yq as al,_E as am,jt as an,Sc as ao,ES as ap,rN as aq,fv as ar,sN as as,$q as at,$L as au,UL as av,xj as aw,dQ as ax,b_ as ay,hne as az,SK as b,Jf as b$,F7 as b0,Av as b1,E1 as b2,L7 as b3,qq as b4,ZP as b5,D7 as b6,v1 as b7,cn as b8,QP as b9,c4 as bA,BV as bB,d1 as bC,IY as bD,zv as bE,jY as bF,jr as bG,qte as bH,Pm as bI,Vq as bJ,Q0 as bK,Gx as bL,k2 as bM,TN as bN,u3 as bO,Ene as bP,yte as bQ,Mte as bR,vte as bS,tx as bT,dne as bU,j1 as bV,zN as bW,UN as bX,M1 as bY,i_ as bZ,D1 as b_,$h as ba,P1 as bb,qm as bc,id as bd,Jd as be,wn as bf,WN as bg,RH as bh,IH as bi,Bt as bj,Ul as bk,gB as bl,kS as bm,lne as bn,ane as bo,bne as bp,WK as bq,xne as br,HK as bs,rr as bt,wne as bu,u4 as bv,pne as bw,d4 as bx,h4 as by,f4 as bz,tn as c,Yx as c0,T1 as c1,N1 as c2,$N as c3,qN as c4,tH as c5,rH as c6,iH as c7,oH as c8,aH as c9,cH as ca,lH as cb,sH as cc,WW as cd,hj as ce,dE as cf,uk as cg,ck as ch,one as ci,fk as cj,$y as ck,wB as cl,yB as cm,_B as cn,kB as co,PB as cp,EB as cq,Ey as cr,MA as cs,eN as ct,qx as cu,E2 as cv,Gq as cw,tN as cx,AE as d,zq as e,Ta as f,ru as g,yx as h,gr as i,y as j,G4 as k,EM as l,Ki as m,Zf as n,Jq as o,ka as p,Bq as q,N as r,rt as s,m_ as t,sp as u,g_ as v,v_ as w,y_ as x,q3 as y,jv as z};
