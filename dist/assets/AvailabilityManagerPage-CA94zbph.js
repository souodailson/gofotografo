import{a7 as w,aS as _,u as S,r as p,af as s,j as e,ak as H,m as k,B as c,e as A,I as D,P as l,aC as T,t as E,v as B,w as I,y as O,C as P,aK as R,O as z,H as y}from"./index-B959_7_o.js";import{T as F,a as L,b as m,c as o,d as $,e as i}from"./table-BGo4pF6F.js";import{A as q}from"./AvailabilityModal-ByJqrr8w.js";import{P as G}from"./pen-square-CcxMKlNU.js";import{s as K}from"./startOfMonth-DEvSie1z.js";import{e as V}from"./endOfMonth-3DNm6jXm.js";import"./alert-dialog-CMWSZjMP.js";import"./getDay-BSUxkliI.js";const se=({isMobile:J})=>{const{availabilitySlots:x,loading:g,getClientById:f}=w(),{openModal:h,closeModal:v,openModals:j}=_(),b=S(),[n,M]=p.useState(new Date),u=p.useMemo(()=>{const a=K(n),t=V(n);return x.filter(r=>{const d=s(r.start_time);return d>=a&&d<=t}).sort((r,d)=>s(r.start_time)-s(d.start_time))},[x,n]),N=a=>{const[t,r]=a.target.value.split("-");M(new Date(parseInt(t),parseInt(r)-1,1))},C=a=>{h("availability",{existingSlot:a,date:s(a.start_time)})};return g?e.jsx(H,{}):e.jsxs(e.Fragment,{children:[e.jsx(q,{isOpen:!!j.availability,onClose:()=>v("availability"),initialData:j.availability}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"container mx-auto p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>b("/calendar"),children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground titulo-gradiente",children:"Gerenciador de Disponibilidade"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Visualize e gerencie todos os seus horários da Agenda PRO."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{type:"month",value:l(n,"yyyy-MM"),onChange:N,className:"w-auto"}),e.jsxs(c,{onClick:()=>h("availability",{date:new Date}),children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," Adicionar"]})]})]}),e.jsxs(E,{children:[e.jsx(B,{children:e.jsxs(I,{children:["Horários de ",l(n,"MMMM, yyyy",{locale:y})]})}),e.jsx(O,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(F,{children:[e.jsx(L,{children:e.jsxs(m,{children:[e.jsx(o,{children:"Data"}),e.jsx(o,{children:"Horário"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Agendado por"}),e.jsx(o,{className:"text-right",children:"Ações"})]})}),e.jsx($,{children:u.length>0?u.map(a=>{const t=a.booked_by_client_id?f(a.booked_by_client_id):null;return e.jsxs(m,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l(s(a.start_time),"dd/MM/yyyy, EEEE",{locale:y})})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:`${l(s(a.start_time),"HH:mm")} - ${l(s(a.end_time),"HH:mm")}`})]})}),e.jsx(i,{children:e.jsx(z,{variant:a.is_booked?"destructive":"default",children:a.is_booked?"Agendado":"Disponível"})}),e.jsx(i,{children:t?t.name:"—"}),e.jsx(i,{className:"text-right",children:e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>C(a),children:e.jsx(G,{className:"h-4 w-4"})})})]},a.id)}):e.jsx(m,{children:e.jsx(i,{colSpan:5,className:"text-center h-24",children:"Nenhum horário encontrado para este mês."})})})]})})})]})]})]})};export{se as default};
