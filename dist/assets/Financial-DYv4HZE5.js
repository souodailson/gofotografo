import{ao as Ke,c as Pe,D as Fe,j as e,a1 as Z,a2 as K,a3 as F,a4 as ee,a_ as ge,a5 as $,m as G,C as ea,R as Ne,a$ as aa,Q as sa,T as ta,B as L,V as ra,W as ve,X as Le,af as I,P as H,H as V,a7 as ae,f as fe,r as p,b0 as we,ap as O,b1 as ke,b2 as Re,ab as na,Y as oa,Z as la,_ as ca,$ as da,a0 as ia,i as Y,I as J,k as ma,aE as ua,p as Ae,t as xa,v as pa,w as ha,y as ga,aJ as fa,aS as ya,b as ba,aC as _e,q as ja}from"./index-B959_7_o.js";import{T as ye}from"./trending-up-CJXHKgjy.js";import{T as be}from"./trending-down-Ca0GvqbE.js";import{S as Na}from"./settings-Cakr_w_3.js";import{F as va}from"./filter-BPHGTg9p.js";import{L as wa,a as ka}from"./LazyImage-w8qN2dVT.js";import{A as Be,b as Ie,c as Me,d as Oe,e as ze,f as Ge,g as Ve,h as Ye}from"./alert-dialog-CMWSZjMP.js";import{T as Aa,a as _a,b as Da,c as Sa}from"./tooltip-Cwgo7U0h.js";import{H as Ca}from"./hourglass-COrApS9p.js";import{M as Ea}from"./more-vertical-_AfS99pC.js";import{P as qe}from"./pen-square-CcxMKlNU.js";import{s as q,e as De}from"./subDays-_bF1dfTa.js";import{e as z}from"./endOfDay-JYFcGhf_.js";import{s as Se}from"./startOfMonth-DEvSie1z.js";import{e as Ce}from"./endOfMonth-3DNm6jXm.js";import{P as Ta}from"./plus-circle-B0lITbZK.js";import{S as Pa}from"./search-DecR3P-8.js";import"./extends-CF3RwP-h.js";function Ee(a){const n=Ke(a),x=n.getFullYear();return n.setFullYear(x+1,0,0),n.setHours(23,59,59,999),n}const La=Pe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ra=Pe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ba=({title:a,value:n,icon:x,color:r,bgColor:h,delay:o})=>e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o},className:`${h} bg-card rounded-xl p-6 shadow-lg border border-border card-hover`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:n})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${r} flex items-center justify-center`,children:e.jsx(x,{className:"w-6 h-6 text-white"})})]})}),Ia=({summary:a,summaryPeriod:n,onSummaryPeriodChange:x})=>{const r=[{title:"Faturamento Total (Pago)",value:`R$ ${(a.totalRevenue||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:ye,color:"from-green-500 to-emerald-600",bgColor:"dark:bg-green-900/10"},{title:"Despesas Totais (Pagas)",value:`R$ ${(a.totalExpenses||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:be,color:"from-red-500 to-pink-600",bgColor:"dark:bg-red-900/10"},{title:"Lucro Líquido (Pago)",value:`R$ ${(a.netBalance||0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:Fe,color:(a.netBalance||0)>=0?"from-blue-500 to-cyan-600":"from-red-500 to-pink-600",bgColor:(a.netBalance||0)>=0?"dark:bg-blue-900/10":"dark:bg-red-900/10"}],h=()=>{const o=ge.find(d=>d.value===n);return o?o.label.toLowerCase():"todos os períodos"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Resumo Financeiro"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dados baseados em: ",h()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(Z,{value:n,onValueChange:x,children:[e.jsx(K,{className:"w-48",children:e.jsx(F,{placeholder:"Período dos cards"})}),e.jsx(ee,{className:"max-h-60",children:ge.map(o=>e.jsx($,{value:o.value,children:o.label},o.value))})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:r.map((o,d)=>e.jsx(Ba,{...o,delay:d*.1},o.title))})]})},Te="w-full md:w-auto px-3 py-2 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",Ma=({filterType:a,setFilterType:n,filterPeriod:x,setFilterPeriod:r})=>{const h=d=>{n(d==="ALL"?"ALL":d)},o=d=>{r(d==="all-periods"?"all":d)};return e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(va,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("select",{value:a,onChange:d=>h(d.target.value),className:Te,children:[e.jsx("option",{value:"ALL",children:"Todos os tipos"}),e.jsx("option",{value:"ENTRADA",children:"Entradas"}),e.jsx("option",{value:"SAIDA",children:"Saídas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ea,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("select",{value:x,onChange:d=>o(d.target.value),className:Te,children:ge.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]})})},Oa=({transactions:a,onEdit:n,onDelete:x,isMobile:r})=>{const[h,o]=Ne.useState(!1),[d,A]=Ne.useState(null),v=s=>{A(s),o(!0)},C=()=>{d&&x(d),o(!1),A(null)},f=()=>{o(!1),A(null)},E=s=>{if(!s)return"N/A";try{const u=I(s);return isNaN(u.getTime())?"Data inválida":r?H(u,"dd/MM/yy",{locale:V}):H(u,"dd/MM/yyyy",{locale:V})}catch(u){return console.error("Error formatting date:",s,u),"Data inválida"}};return e.jsxs(e.Fragment,{children:[e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-card rounded-xl shadow-lg border border-border",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Últimos Lançamentos"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-accent/50 dark:bg-accent/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Descrição"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider ${r?"hidden":"table-cell"}`,children:"Carteira"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider ${r?"hidden":"table-cell"}`,children:"Pagamento"}),e.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r?5:7,className:"px-6 py-8 text-center text-muted-foreground",children:"Nenhum lançamento encontrado."})}):a.map(s=>e.jsxs("tr",{className:`
                      ${s.tipo==="ENTRADA"?"bg-green-500/5 dark:bg-green-500/10":"bg-red-500/5 dark:bg-red-500/10"}
                      hover:bg-accent/50 dark:hover:bg-accent/30
                    `,children:[e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-foreground",children:E(s.data_recebimento||s.release_date||s.data_vencimento||s.created_at)}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-foreground truncate max-w-[100px] sm:max-w-xs",title:s.descricao,children:s.descricao}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-muted-foreground ${r?"hidden":"table-cell"}`,children:s.wallet?e.jsxs("div",{className:"flex items-center",children:[s.wallet.icon_url&&e.jsx(wa,{src:s.wallet.icon_url,alt:s.wallet.name,className:"w-4 h-4 mr-2 object-contain"}),e.jsx("span",{className:"truncate",children:s.wallet.name})]}):"N/A"}),e.jsxs("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsxs("span",{className:s.tipo==="ENTRADA"?"text-customGreen":"text-red-500",children:[s.tipo==="SAIDA"?"- R$ ":"+ R$ ",Number(s.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),s.original_value&&e.jsx(Aa,{children:e.jsxs(_a,{children:[e.jsx(Da,{asChild:!0,children:e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground cursor-help",children:["(de ",Number(s.original_value).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),")"]})}),e.jsx(Sa,{children:e.jsxs("p",{children:["Taxa de R$ ",Number(s.fee_value).toLocaleString("pt-BR",{minimumFractionDigits:2})," descontada"]})})]})})]}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${s.status==="PAGO"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":s.status==="PENDENTE"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":s.status==="AGUARDANDO_LIBERACAO"?"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100":s.status==="CANCELADO"?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"}`,children:[s.status==="AGUARDANDO_LIBERACAO"&&e.jsx(Ca,{className:"w-3 h-3 mr-1"}),s.status.replace(/_/g," ")]})}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-muted-foreground ${r?"hidden":"table-cell"}`,children:s.metodo_pagamento||"N/A"}),e.jsx("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(aa,{transaction:{...s,type:s.tipo==="ENTRADA"?"entrada":"saida"},size:"sm",showDropdown:!1}),e.jsxs(sa,{children:[e.jsx(ta,{asChild:!0,children:e.jsx(L,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Ea,{className:"h-4 w-4"})})}),e.jsxs(ra,{align:"end",children:[e.jsxs(ve,{onClick:()=>n(s),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(ve,{onClick:()=>v(s.id),className:"text-red-600 dark:text-red-400 hover:!text-red-600 dark:hover:!text-red-400",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})]})})]},s.id))})]})})]}),e.jsx(Be,{open:h,onOpenChange:o,children:e.jsxs(Ie,{children:[e.jsxs(Me,{children:[e.jsx(Oe,{children:"Confirmar Exclusão"}),e.jsx(ze,{children:"Tem certeza que deseja excluir este lançamento? Esta ação não pode ser desfeita."})]}),e.jsxs(Ge,{children:[e.jsx(Ve,{onClick:f,children:"Cancelar"}),e.jsx(Ye,{onClick:C,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},za=({data:a})=>e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Resumo de Meses Anteriores (Últimos 3 meses)"})}),e.jsx("div",{className:"space-y-4",children:a.length>0?a.map((n,x)=>{const r=n.revenue+n.expenses,h=r>0?n.revenue/r*100:0,o=r>0?n.expenses/r*100:0;return e.jsxs(G.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"p-4 bg-background/50 rounded-lg border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("p",{className:"font-semibold text-foreground",children:n.monthYear}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.transactions," transações"]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-green-600 dark:text-green-400",children:[e.jsx(ye,{size:16,className:"mr-1"}),"Receitas: R$ ",Number(n.revenue).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[e.jsx(be,{size:16,className:"mr-1"}),"Despesas: R$ ",Number(n.expenses).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),r>0&&e.jsxs("div",{className:"w-full bg-muted rounded-full h-2.5",children:[e.jsx("div",{className:"bg-green-500 h-2.5 rounded-l-full",style:{width:`${h}%`,display:"inline-block"},title:`Receitas: ${h.toFixed(1)}%`}),e.jsx("div",{className:"bg-red-500 h-2.5 rounded-r-full",style:{width:`${o}%`,display:"inline-block",marginLeft:h>0&&o>0?"-1px":"0"},title:`Despesas: ${o.toFixed(1)}%`})]})]},n.monthYear)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhum dado para os últimos 3 meses."})})]}),Ga=a=>{const{financialData:n,deleteTransaction:x,workflowCards:r,getClientById:h,wallets:o}=ae(),{toast:d}=fe(),[A,v]=p.useState(!1),[C,f]=p.useState("entrada"),[E,s]=p.useState(null),[u,w]=p.useState(""),[S,T]=p.useState(()=>a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?"SAIDA":a.type==="entrada"&&a.status==="pendente"?"ALL":a.type==="entrada"&&a.status==="pago"?"ENTRADA":a.type==="saida"&&a.status==="pago"?"SAIDA":a.type?.toUpperCase()||"ALL":"ALL"),[R,P]=p.useState(()=>a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?"all":a.period||"all":"all"),[B,M]=p.useState("month"),[k,D]=p.useState(()=>a&&a.isDashboardClick?a.type==="entrada"&&a.status==="pendente":!1);p.useEffect(()=>{a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?(T("SAIDA"),P("all"),D(!1)):a.type==="entrada"&&a.status==="pendente"?(D(!0),T("ALL"),P("all")):a.type==="entrada"&&a.status==="pago"?(D(!1),T("ENTRADA"),P("all")):a.type==="saida"&&a.status==="pago"?(D(!1),T("SAIDA"),P("all")):(T(a.type?.toUpperCase()||"ALL"),P(a.period||"all"),D(!1)):(!a||Object.keys(a).length===0)&&(D(!1),T("ALL"),P("all"))},[a]);const W=p.useMemo(()=>{if(!n||!n.transactions)return{totalRevenue:0,totalExpenses:0,netBalance:0};let c=n.transactions;B!=="all"&&(c=n.transactions.filter(N=>{const y=N.status==="PAGO"&&N.data_recebimento?N.data_recebimento:N.data_vencimento||N.created_at;if(!y)return!1;const m=I(y),g=new Date;switch(B){case"today":const U=O(g),se=z(g);return m>=U&&m<=se;case"week":const te=ke(g,{locale:V}),re=De(g,{locale:V});return m>=te&&m<=re;case"month":const ne=Se(g),oe=Ce(g);return m>=ne&&m<=oe;case"last_7_days":const le=O(q(g,6)),ce=z(g);return m>=le&&m<=ce;case"last_30_days":const de=O(q(g,29)),ie=z(g);return m>=de&&m<=ie;case"last_90_days":const me=O(q(g,89)),ue=z(g);return m>=me&&m<=ue;case"last_year":const xe=O(q(g,364)),pe=z(g);return m>=xe&&m<=pe;case"current_year":const he=we(g),Ze=Ee(g);return m>=he&&m<=Ze;default:return!0}}));const t=c.filter(N=>N.tipo==="ENTRADA"&&N.status==="PAGO").reduce((N,y)=>N+Number(y.valor),0),l=c.filter(N=>N.tipo==="SAIDA"&&N.status==="PAGO").reduce((N,y)=>N+Number(y.valor),0),b=t-l;return{totalRevenue:t,totalExpenses:l,netBalance:b}},[n.transactions,B]),i=p.useMemo(()=>{let c=n.transactions.map(t=>({...t,wallet:o.find(l=>l.id===t.wallet_id)}));if(u){const t=u.toLowerCase();c=c.filter(l=>l.descricao.toLowerCase().includes(t)||l.valor.toString().includes(t))}return c.filter(t=>{let l=S==="ALL"||t.tipo===S;a?.isDashboardClick&&(a.type==="saida"&&a.status==="pendente"&&a.period==="future"&&S==="SAIDA"?l=l&&t.status==="PENDENTE":(a.type==="entrada"&&a.status==="pago"&&S==="ENTRADA"||a.type==="saida"&&a.status==="pago"&&S==="SAIDA")&&(l=l&&t.status==="PAGO"));let b=!0;if(R!=="all"){const N=t.status==="PAGO"&&t.data_recebimento?t.data_recebimento:t.data_vencimento||t.created_at;if(!N)return!1;const y=I(N),m=new Date;switch(R){case"today":const g=O(m),U=z(m);b=y>=g&&y<=U;break;case"week":const se=ke(m,{locale:V}),te=De(m,{locale:V});b=y>=se&&y<=te;break;case"month":const re=Se(m),ne=Ce(m);b=y>=re&&y<=ne;break;case"last_7_days":const oe=O(q(m,6)),le=z(m);b=y>=oe&&y<=le;break;case"last_30_days":const ce=O(q(m,29)),de=z(m);b=y>=ce&&y<=de;break;case"last_90_days":const ie=O(q(m,89)),me=z(m);b=y>=ie&&y<=me;break;case"last_year":const ue=O(q(m,364)),xe=z(m);b=y>=ue&&y<=xe;break;case"current_year":const pe=we(m),he=Ee(m);b=y>=pe&&y<=he;break}}return l&&b}).sort((t,l)=>I(l.created_at).getTime()-I(t.created_at).getTime())},[n.transactions,S,R,a,u,o]),_=p.useMemo(()=>{const c=new Date;switch(!0){case S==="SAIDA":return i.filter(t=>t.tipo==="SAIDA"&&t.status==="PENDENTE"&&(!t.data_vencimento||I(t.data_vencimento)>=c));case(a?.isDashboardClick&&a.type==="saida"&&a.status==="pendente"):return i.filter(t=>t.tipo==="SAIDA"&&t.status==="PENDENTE");default:return i}},[i,S,a]),j=p.useMemo(()=>{const c=new Date;return n.transactions.filter(t=>t.status==="PENDENTE"&&t.data_vencimento&&I(t.data_vencimento)<c).map(t=>({...t,wallet:o.find(l=>l.id===t.wallet_id)}))},[n.transactions,o]),We=p.useMemo(()=>{const c=new Date,t={};return n.transactions.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE"&&l.cliente_id&&l.data_vencimento&&I(l.data_vencimento)<c).forEach(l=>{t[l.cliente_id]||(t[l.cliente_id]=[]),t[l.cliente_id].push({...l,wallet:o.find(b=>b.id===l.wallet_id)})}),Object.values(t).flat()},[n.transactions,o]),Ue=c=>{f(c),s(null),v(!0)},$e=c=>{f(c.tipo),s(c),v(!0)},Je=async c=>{try{await x(c),d({title:"Lançamento Removido",description:"O lançamento financeiro foi removido com sucesso."})}catch(t){d({title:"Erro ao remover",description:t.message,variant:"destructive"})}},He=()=>{v(!1),s(null)},je=c=>["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"].indexOf(c.toLowerCase()),Qe=p.useMemo(()=>{const c={};return n.transactions.forEach(t=>{const l=I(t.data_recebimento||t.created_at),b=H(l,"MMMM/yyyy",{locale:V});c[b]||(c[b]={revenue:0,expenses:0,transactions:0}),t.tipo==="ENTRADA"&&t.status==="PAGO"&&(c[b].revenue+=Number(t.valor)),t.tipo==="SAIDA"&&t.status==="PAGO"&&(c[b].expenses+=Number(t.valor)),c[b].transactions++}),Object.entries(c).map(([t,l])=>({monthYear:t,...l})).sort((t,l)=>{const[b,N]=t.monthYear.split("/"),[y,m]=l.monthYear.split("/");return new Date(m,je(y))-new Date(N,je(b))}).slice(0,3)},[n.transactions]),Xe=p.useMemo(()=>r.map(c=>{const t=n.transactions.filter(g=>g.trabalho_id===c.id&&g.tipo==="ENTRADA"),l=t.filter(g=>g.status==="PAGO").reduce((g,U)=>g+Number(U.valor),0);let b=t.filter(g=>g.status==="PENDENTE").reduce((g,U)=>g+Number(U.valor),0),N=Number(c.value)||0,y=0;N>l&&(y=N-l);const m=b>0?b:y;return{...c,pending_amount:m,client:c.client_id?h(c.client_id):null}}).filter(c=>c.pending_amount>0&&c.status!=="concluido"&&!c.archived),[r,n.transactions,h]);return{financialSummary:W,summaryPeriod:B,setSummaryPeriod:M,filteredTransactions:i,getFilteredTransactionsByListType:_,overdueTransactions:j,defaultDebtorTransactions:We,isModalOpen:A,transactionType:C,editingTransaction:E,filterType:S,setFilterType:T,filterPeriod:R,setFilterPeriod:P,handleAddTransaction:Ue,handleEditTransaction:$e,handleDeleteTransaction:Je,closeModal:He,pastMonthsSummaryData:Qe,showPaymentsToReceive:k,setShowPaymentsToReceive:D,pendingToReceiveWorkflowCards:Xe,searchTerm:u,setSearchTerm:w}},Va=({cards:a})=>{const{getClientById:n,getServicePackageById:x}=ae();return!a||a.length===0?e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-6 bg-card rounded-xl shadow-lg border border-border text-center",children:[e.jsx(Re,{size:48,className:"mx-auto text-primary mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"Nenhum Pagamento a Receber"}),e.jsx("p",{className:"text-muted-foreground",children:"Não há trabalhos ou transações com valores pendentes no momento."})]}):e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl shadow-lg border border-border",children:[e.jsxs("div",{className:"p-6 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pagamentos a Receber"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Trabalhos e transações com valores pendentes de clientes."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-accent/50 dark:bg-accent/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Trabalho / Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Data Evento/Vencimento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Pacote/Descrição"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Valor Pendente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status Contrato/Lanç."})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:a.map(r=>{const h=!!r.title,o=r.client_id?n(r.client_id):null,d=h&&r.service_package_id?x(r.service_package_id):null,A=h?r.title:r.descricao,v=h?r.date?H(I(r.date),"dd/MM/yyyy",{locale:V}):"N/A":r.data_vencimento?H(I(r.data_vencimento),"dd/MM/yyyy",{locale:V}):"N/A",C=h?d?d.name:"N/A":r.descricao,f=h?r.value||0:r.valor||0,E=h?r.pending_amount||0:r.valor||0,s=h?r.contract_status==="signed"?"Assinado":r.contract_status==="sent"?"Enviado":"Pendente":r.status,u=h?r.contract_status==="signed"?"bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100":r.contract_status==="sent"?"bg-blue-100 text-blue-800 dark:bg-blue-700 dark:text-blue-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":r.status==="PENDENTE"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100";return e.jsxs("tr",{className:"hover:bg-accent/50 dark:hover:bg-accent/30",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:A}),o&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[e.jsx(na,{size:12,className:"mr-1"}),o.name]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:v}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:C}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:["R$ ",Number(f).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-orange-600 dark:text-orange-400",children:["R$ ",Number(E).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full capitalize ${u}`,children:s})})]},r.id)})})]})})]})},Q={bank:[{name:"Nubank",url:"https://play-lh.googleusercontent.com/NPkx0aiwABB31gBw_CuZO9Rwukhir-BwemxfNlAVjT6smwk6QgUbb3XrmsSSClfzk0dY"},{name:"Banco do Brasil",url:"https://play-lh.googleusercontent.com/1-aNhsSPNqiVluwNGZar_7F5PbQ4u1zteuJ1jumnArhe8bfYHHaVwu4aVOF5-NAmLaA"},{name:"Bradesco",url:"https://play-lh.googleusercontent.com/ReQEaxm44OuduIlJEVO_-xs9iZXSyRNdzGKrONYoLSgAdOzyhPKTb1xuuoPXK6tABm0"},{name:"Itaú",url:"https://play-lh.googleusercontent.com/gRcutACE4XkEHmxcbUdOehxpTbp_LjmwJ6qIEbqfD34oh9feTNhTnlDgf97HEZ9eGKY"},{name:"Caixa Econômica",url:"https://play-lh.googleusercontent.com/ubV0x2kGJIEe10shxuFnH9Cy21OgHARwVUZ89nyE0YOZN9c25ov_dyHdk1rMgbPvoDI"},{name:"Santander",url:"https://play-lh.googleusercontent.com/g_QDzrOlw8Belx8qb47fUu0MPL6AVFzDdbOz_NJZYQDNLveHYxwiUoe09Wvkxf-_548q=w240-h480-rw"},{name:"Inter",url:"https://play-lh.googleusercontent.com/dLVmnD6SlKMWO8_iiw5Cepca0zqmJq3zMaAfXXp6kJfrVBgctX2qTClAOCuaCLn-XmQ=w240-h480-rw"},{name:"C6 Bank",url:"https://play-lh.googleusercontent.com/qYXhGgBxFLr5xgnv0AGhqW9v7tyedb_i5AVoebI6pow5pWPNZH1qEHnslmSHNkVpB-g"},{name:"Neon",url:"https://play-lh.googleusercontent.com/pZ1aEI_Jdk4XAI5E9CpxEgJBT_8URFmOqfMQSjvwzcwFr7gLI1M0Blodm9Xei8hcK9rG=w240-h480-rw"},{name:"Original",url:"https://media.licdn.com/dms/image/v2/C4E0BAQFbBkg4ksroTw/company-logo_200_200/company-logo_200_200/0/1630641770300/bancooriginal_logo?e=2147483647&v=beta&t=A2TQReLKV9Uj75AzEN6_ezfhKEb_Ir3a82Y34UKu8BA"},{name:"Sicoob",url:"https://play-lh.googleusercontent.com/GY-KNYDw_GFuEBK4C_iVXBqFX2VpIW3cJ5Yb-7BkWv363sNO19z8s_0rS0BQ40AXzms"},{name:"Sicredi",url:"https://play-lh.googleusercontent.com/yTaFNMenVIz0MW_Msc9IbUxVbBpTF49aOcI__Z2ppoK7a8Un_MWIqzZ92U2-VUXTNA"},{name:"Next",url:"https://play-lh.googleusercontent.com/H10aAKl4vs91sow3buRJk85cEN58T7onVyNqVQPnWnEpRQmelArjGLdUx05imRQePjCD"},{name:"Digio",url:"https://play-lh.googleusercontent.com/x3cmvHcj6dBUQZ-AJXz6PnmKwCe6PNqyPK9yKW7JIP9kUlOS08g40VmtxatJJkXfFg"},{name:"PagBank",url:"https://play-lh.googleusercontent.com/O9GpqGB-9aE8Qt79JM1VXoVA5rRQjLb4LVk7yVwd2cuWeAi0ML6uVbc7aXZEOeyYwg"},{name:"Will Bank",url:"https://play-lh.googleusercontent.com/fazUU0h6BiMpjSxgq1son0-VRhBhkimr6kzCLw6T1Y3ZGZj1Nrnvi-ETM2je3-miRQ"},{name:"BS2",url:"https://play-lh.googleusercontent.com/tlOQ2LtLwJsAPw1p_S5Lz3S6e-EbkxgIcaNkuqv6URJA9-CkhOlZzIrTdfi-oEdZK9nn"},{name:"Banco Personalizado",url:"https://cdn-icons-png.flaticon.com/512/3638/3638616.png"}],gateway:[{name:"PicPay",url:"https://play-lh.googleusercontent.com/pTvc9kCumx_24eJDwGUpvcBwljcIBkrsL3qHwhBW2NalMQ-XxTtHRV9YAJanBxkV0Rw"},{name:"Mercado Pago",url:"https://play-lh.googleusercontent.com/6a7KGB_J06Lwct1F2kuwK_GbNm4E8Vkl0MJqzjcddpGjCIsTMOg2nJ3WW-dGCr883FI=w240-h480-rw"},{name:"PagSeguro",url:"https://assets.pagseguro.com.br/registration-fe/5.10.1/_next/static/media/pag-bank-banner.3e81dc45.png"},{name:"SumUp",url:"https://play-lh.googleusercontent.com/QmvpebjqnqTtUuTSDEt8zBmLf87-FpVU1uvuMP2zazqyYoEHZlZUB7QZ4j_klH3igQ"},{name:"Stone",url:"https://images.seeklogo.com/logo-png/36/1/stone-pagamentos-logo-png_seeklogo-364485.png"},{name:"PayPal",url:"https://play-lh.googleusercontent.com/iQ8f5plIFy9rrY46Q2TNRwq_8nCvh9LZVwytqMBpOEcfnIU3vTkICQ6L1-RInWS93oQg"},{name:"Stripe",url:"https://play-lh.googleusercontent.com/2PS6w7uBztfuMys5fgodNkTwTOE6bLVB2cJYbu5GHlARAK36FzO5bUfMDP9cEJk__cE"},{name:"Asaas",url:"https://play-lh.googleusercontent.com/Rze4nR-Mol9j-dj4LDaPH4lWZG_PENIljWnH_hu78uYpMd9AFenlr84sGlYQTT2xBA"},{name:"Gerencianet",url:"https://play-lh.googleusercontent.com/2M3YecvH6Nv-yWp43Ekal7RyJPXuwinvC8pUln_ophYqWimQEeviw-yOR7DbLOf2U6I"},{name:"Pagar.me",url:"https://play-lh.googleusercontent.com/_zZlN3sJsEXGEicuECbyCcEuaV9gf2ZJtqz0r5UtBd59-G93hNNiKZEgBwqiBFgflH6T=w240-h480-rw"},{name:"Cielo",url:"https://play-lh.googleusercontent.com/BukKjSZwbGxLLSOkuzNztYXGV2KpEecAWO7TvFdC8-cVGWv_kzJ4I_J5lKwexQlEky4"},{name:"Rede",url:"https://cdn6.aptoide.com/imgs/7/1/8/7184445ac1374f5a1e87a50d56c2b6db_icon.png"},{name:"GetNet",url:"https://play-lh.googleusercontent.com/4tGSaBYJh7I_11w3T8laid5Y62e7jgJIyOeDiJkRPH9s6HJi6XRk_Rqz4vsu1gq_Qg"}],cash:[{name:"Dinheiro",url:"https://cdn-icons-png.flaticon.com/512/5451/5451648.png"}]},X={"Mercado Pago":[{name:"Recebimento na hora",fee:4.99,release_days:0},{name:"Recebimento em 14 dias",fee:3.79,release_days:14},{name:"Recebimento em 30 dias",fee:3.03,release_days:30}],PagSeguro:[{name:"Recebimento na hora",fee:4.99,release_days:0},{name:"Recebimento em 14 dias",fee:3.89,release_days:14},{name:"Recebimento em 30 dias",fee:3.19,release_days:30}],PicPay:[{name:"Padrão",fee:3.99,release_days:30}],PayPal:[{name:"Padrão",fee:4.79,release_days:1}],SumUp:[{name:"Recebimento em 1 dia útil",fee:4.6,release_days:1},{name:"Recebimento em 30 dias",fee:3.6,release_days:30}],Stone:[{name:"Recebimento imediato",fee:5.49,release_days:0},{name:"Recebimento em 30 dias",fee:3.89,release_days:30}],Stripe:[{name:"Padrão",fee:4.9,release_days:7}],Asaas:[{name:"Recebimento parcelado",fee:4,release_days:30}],Gerencianet:[{name:"Padrão",fee:3.89,release_days:2}],"Pagar.me":[{name:"Padrão",fee:3.79,release_days:30}],Cielo:[{name:"Padrão",fee:3.29,release_days:30}],Rede:[{name:"Padrão",fee:3.09,release_days:30}],GetNet:[{name:"Padrão",fee:3.19,release_days:30}]},Ya=({isOpen:a,onClose:n,walletData:x})=>{const{addWallet:r,updateWallet:h}=ae(),{toast:o}=fe(),[d,A]=p.useState(""),[v,C]=p.useState("bank"),[f,E]=p.useState(""),[s,u]=p.useState(""),[w,S]=p.useState(!1),[T,R]=p.useState({fee:"",release_days:""}),[P,B]=p.useState(!1),[M,k]=p.useState("custom");p.useEffect(()=>{x?(A(x.name),C(x.type),E(x.icon_url),u(x.initial_balance||""),S(x.is_gateway||!1),R(x.gateway_config||{fee:"",release_days:""})):(A(""),C("bank"),E(Q.bank[0]?.url||""),u(""),S(!1),R({fee:"",release_days:""})),k("custom")},[x,a]),p.useEffect(()=>{if(a&&!x){const i=Q[v]?.[0]?.url||"";E(i)}},[v,a,x]),p.useEffect(()=>{if(M&&M!=="custom"){const[i,_]=M.split("_"),j=X[i]?.[_];j&&R({fee:j.fee,release_days:j.release_days})}},[M]);const D=async i=>{i.preventDefault(),B(!0);const _={name:d,type:v,icon_url:f,initial_balance:parseFloat(s)||0,is_gateway:w,gateway_config:w?{fee:parseFloat(T.fee)||0,release_days:parseInt(T.release_days,10)||0}:null};try{x?(await h(x.id,_),o({title:"Carteira atualizada!",description:"As informações da carteira foram salvas."})):(await r(_),o({title:"Carteira criada!",description:"Sua nova carteira está pronta para uso."})),n()}catch(j){o({title:"Erro ao salvar",description:j.message,variant:"destructive"})}finally{B(!1)}},W=X[Object.keys(X).find(i=>d.toLowerCase().includes(i.toLowerCase()))]||[];return e.jsx(oa,{open:a,onOpenChange:n,children:e.jsxs(la,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(ca,{children:[e.jsx(da,{children:x?"Editar Carteira":"Nova Carteira"}),e.jsx(ia,{children:x?"Atualize as informações da sua carteira.":"Crie uma nova carteira para organizar suas finanças."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-name",children:"Nome da Carteira"}),e.jsx(J,{id:"wallet-name",value:d,onChange:i=>A(i.target.value),placeholder:"Ex: Conta Principal",required:!0})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-type",children:"Tipo"}),e.jsxs(Z,{value:v,onValueChange:C,children:[e.jsx(K,{children:e.jsx(F,{placeholder:"Selecione o tipo"})}),e.jsxs(ee,{children:[e.jsx($,{value:"bank",children:"Banco"}),e.jsx($,{value:"gateway",children:"Gateway de Pagamento"}),e.jsx($,{value:"cash",children:"Dinheiro (Caixa Físico)"})]})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"wallet-icon",children:"Ícone"}),e.jsxs(Z,{value:f,onValueChange:E,children:[e.jsx(K,{children:e.jsx(F,{children:f?e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:f,alt:"ícone selecionado",className:"w-5 h-5 mr-2 object-contain"}),e.jsx("span",{children:Q[v]?.find(i=>i.url===f)?.name||"Ícone"})]}):"Selecione um ícone"})}),e.jsx(ee,{className:"max-h-60",children:Q[v]?.map(i=>e.jsx($,{value:i.url,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:i.url,alt:i.name,className:"w-5 h-5 mr-2 object-contain"}),e.jsx("span",{children:i.name})]})},i.name))})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"initial-balance",children:"Saldo Inicial (Opcional)"}),e.jsx(J,{id:"initial-balance",type:"number",step:"0.01",value:s,onChange:i=>u(i.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(ma,{id:"is-gateway",checked:w,onCheckedChange:S}),e.jsx(Y,{htmlFor:"is-gateway",className:"font-medium",children:"É um Gateway de Pagamento?"})]}),w&&e.jsxs("div",{className:"p-4 border rounded-lg space-y-4 bg-accent/50",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Configuração do Gateway"}),W.length>0&&e.jsxs("div",{children:[e.jsxs(Y,{htmlFor:"gateway-suggestion",children:["Sugestões para ",Object.keys(X).find(i=>d.toLowerCase().includes(i.toLowerCase()))]}),e.jsxs(Z,{value:M,onValueChange:k,children:[e.jsx(K,{children:e.jsx(F,{placeholder:"Usar sugestão..."})}),e.jsxs(ee,{children:[e.jsx($,{value:"custom",children:"Personalizado"}),W.map((i,_)=>e.jsxs($,{value:`${d}_${_}`,children:[i.name," (",i.fee,"% em ",i.release_days,"d)"]},`${d}_${_}`))]})]})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"gateway-fee",children:"Taxa (%)"}),e.jsx(J,{id:"gateway-fee",type:"number",step:"0.01",value:T.fee,onChange:i=>R(_=>({..._,fee:i.target.value})),placeholder:"Ex: 4.99",required:!0})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"gateway-release",children:"Prazo de Liberação (dias)"}),e.jsx(J,{id:"gateway-release",type:"number",step:"1",value:T.release_days,onChange:i=>R(_=>({..._,release_days:i.target.value})),placeholder:"Ex: 14",required:!0})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-start",children:[e.jsx(Re,{className:"w-4 h-4 mr-2 mt-0.5 shrink-0"}),e.jsx("span",{children:"Ao usar esta carteira em um lançamento, a taxa será descontada e o valor líquido agendado para a data de liberação."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(L,{type:"button",variant:"ghost",onClick:n,disabled:P,children:"Cancelar"}),e.jsx(L,{type:"submit",disabled:P,children:P?"Salvando...":"Salvar"})]})]})]})})},qa=()=>{const{wallets:a,getWalletBalance:n,deleteWallet:x}=ae(),[r,h]=p.useState(!1),[o,d]=p.useState(null),[A,v]=p.useState(null),{toast:C}=fe(),f=()=>{d(null),h(!0)},E=u=>{d(u),h(!0)},s=async()=>{if(A)try{await x(A.id),C({title:"Carteira removida!",description:`A carteira "${A.name}" foi removida com sucesso.`})}catch(u){C({title:"Erro ao remover",description:u.message,variant:"destructive"})}finally{v(null)}};return e.jsxs(e.Fragment,{children:[e.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Minhas Carteiras"}),e.jsxs(L,{onClick:f,children:[e.jsx(Ta,{className:"w-4 h-4 mr-2"}),"Nova Carteira"]})]}),a.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ua,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),e.jsx("p",{children:"Nenhuma carteira encontrada."}),e.jsx("p",{className:"text-sm",children:"Crie sua primeira carteira para organizar suas finanças."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(Ae,{children:a.map(u=>e.jsx(G.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:260,damping:20},children:e.jsxs(xa,{className:"h-full group relative",children:[e.jsxs(pa,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs(ha,{className:"text-sm font-medium flex items-center",children:[u.icon_url?e.jsx("img",{src:u.icon_url,alt:u.name,className:"w-5 h-5 mr-2 object-contain"}):e.jsx(ka,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"truncate",title:u.name,children:u.name})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(L,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>E(u),children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive",onClick:()=>v(u),children:e.jsx(Le,{className:"w-4 h-4"})})]})]}),e.jsxs(ga,{children:[e.jsx("div",{className:"text-2xl font-bold",children:fa(n(u.id))}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:u.type})]})]})},u.id))})})]}),e.jsx(Ae,{children:r&&e.jsx(Ya,{isOpen:r,onClose:()=>h(!1),walletData:o})}),e.jsx(Be,{open:!!A,onOpenChange:u=>!u&&v(null),children:e.jsxs(Ie,{children:[e.jsxs(Me,{children:[e.jsx(Oe,{children:"Confirmar Exclusão"}),e.jsxs(ze,{children:['Tem certeza que deseja excluir a carteira "',A?.name,'"? Os lançamentos associados a ela não serão excluídos, mas perderão o vínculo.']})]}),e.jsxs(Ge,{children:[e.jsx(Ve,{onClick:()=>v(null),children:"Cancelar"}),e.jsx(Ye,{onClick:s,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},cs=({initialFilter:a,isMobile:n})=>{const{financialSummary:x,summaryPeriod:r,setSummaryPeriod:h,filteredTransactions:o,getFilteredTransactionsByListType:d,overdueTransactions:A,defaultDebtorTransactions:v,filterType:C,setFilterType:f,filterPeriod:E,setFilterPeriod:s,pastMonthsSummaryData:u,setShowPaymentsToReceive:w,pendingToReceiveWorkflowCards:S,handleDeleteTransaction:T,searchTerm:R,setSearchTerm:P}=Ga(a),{openModal:B}=ya(),{isMobile:M}=ba();p.useEffect(()=>{a&&a.isDashboardClick?a.type==="saida"&&a.status==="pendente"&&a.period==="future"?(D("pagar"),f("SAIDA"),s("all"),w(!1)):a.type==="entrada"&&a.status==="pendente"?(D("receber"),w(!0),f("ALL"),s("all")):a.type==="entrada"&&a.status==="pago"?(D("geral"),w(!1),f("ENTRADA"),s("all")):a.type==="saida"&&a.status==="pago"?(D("geral"),w(!1),f("SAIDA"),s("all")):(D("geral"),f(a.type?.toUpperCase()||"ALL"),s(a.period||"all"),w(!1)):(!a||Object.keys(a).length===0)&&(D("geral"),w(!1),f("ALL"),s("all"))},[a,f,s,w]);const[k,D]=p.useState("geral"),W=j=>{w(!1),j==="entrada"?B("financialWizard",{type:j,transaction:null}):B("financial",{type:j,transaction:null})},i=j=>{w(!1),B("financial",{type:j.tipo,transaction:j})},_=j=>{D(j),j==="geral"?(w(!1),f("ALL"),s("all")):j==="pagar"?(w(!1),f("SAIDA"),s("all")):j==="receber"?(w(!0),f("ALL"),s("all")):j==="atrasadas"?(w(!1),f("ALL"),s("all")):j==="inadimplentes"&&(w(!1),f("ENTRADA"),s("all"))};return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs(G.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:M?"hidden":"",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground titulo-gradiente",children:"Gestão Financeira"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm sm:text-base",children:"Controle suas receitas, despesas e carteiras."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto",children:[e.jsxs(L,{onClick:()=>W("entrada"),variant:"success",className:"text-white shadow-lg w-full sm:w-auto",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Nova Entrada"}),e.jsx("span",{className:"sm:hidden",children:"Entrada"})]}),e.jsxs(L,{onClick:()=>W("saida"),className:"bg-red-500 hover:bg-red-600 text-white shadow-lg w-full sm:w-auto",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Nova Saída"}),e.jsx("span",{className:"sm:hidden",children:"Saída"})]})]})]}),e.jsx(Ia,{summary:x,summaryPeriod:r,onSummaryPeriodChange:h}),e.jsx(qa,{}),e.jsx(za,{data:u}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mb-4",children:[e.jsxs(L,{variant:k==="geral"?"default":"outline",onClick:()=>_("geral"),className:`${k==="geral"?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg border-blue-600":"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-blue-50 dark:hover:bg-blue-950 hover:border-blue-400 dark:hover:border-blue-500"} w-full sm:w-auto transition-all duration-200`,children:[e.jsx(La,{className:"w-4 h-4 mr-2"})," Lançamentos Gerais"]}),e.jsxs(L,{variant:k==="pagar"?"default":"outline",onClick:()=>_("pagar"),className:`${k==="pagar"?"bg-red-500 hover:bg-red-600 text-white shadow-lg border-red-500":"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-red-50 dark:hover:bg-red-950 hover:border-red-400 dark:hover:border-red-500"} w-full sm:w-auto transition-all duration-200`,children:[e.jsx(be,{className:"w-4 h-4 mr-2"})," Contas a Pagar"]}),e.jsxs(L,{variant:k==="receber"?"default":"outline",onClick:()=>_("receber"),className:`${k==="receber"?"bg-green-500 hover:bg-green-600 text-white shadow-lg border-green-500":"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-green-50 dark:hover:bg-green-950 hover:border-green-400 dark:hover:border-green-500"} w-full sm:w-auto transition-all duration-200`,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Contas a Receber"]}),e.jsxs(L,{variant:k==="atrasadas"?"default":"outline",onClick:()=>_("atrasadas"),className:`${k==="atrasadas"?"bg-orange-500 hover:bg-orange-600 text-white shadow-lg border-orange-500":"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-orange-50 dark:hover:bg-orange-950 hover:border-orange-400 dark:hover:border-orange-500"} w-full sm:w-auto transition-all duration-200`,children:[e.jsx(ja,{className:"w-4 h-4 mr-2"})," Contas Atrasadas"]}),e.jsxs(L,{variant:k==="inadimplentes"?"default":"outline",onClick:()=>_("inadimplentes"),className:`${k==="inadimplentes"?"bg-red-700 hover:bg-red-800 text-white shadow-lg border-red-700":"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-red-50 dark:hover:bg-red-950 hover:border-red-400 dark:hover:border-red-500"} w-full sm:w-auto transition-all duration-200`,children:[e.jsx(Ra,{className:"w-4 h-4 mr-2"})," Inadimplentes"]})]}),k!=="receber"&&e.jsxs("div",{className:"bg-card rounded-xl p-4 sm:p-6 shadow-lg border border-border",children:[e.jsxs("div",{className:"flex-1 relative mb-4",children:[e.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(J,{type:"text",placeholder:"Buscar por descrição ou valor...",value:R,onChange:j=>P(j.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background focus:ring-primary focus:border-primary"})]}),e.jsx(Ma,{filterType:C,setFilterType:f,filterPeriod:E,setFilterPeriod:s})]}),k==="receber"?e.jsx(Va,{cards:S}):e.jsx(Oa,{transactions:k==="pagar"?d:k==="atrasadas"?A:k==="inadimplentes"?v:o,onEdit:i,onDelete:T,isMobile:M})]})};export{cs as default};
