import{c as V,f as $,u as T,j as e,m as C,aA as de,B as g,A as me,o as ue,a7 as z,q as xe,E as F,X as pe,O as _,H as he,Y as E,Z as I,_ as L,$ as G,a0 as H,ai as fe,r as j,I as R,a9 as U,t as Y,v as W,w as Z,y as X,at as P,S as ge,s as D}from"./index-DHBNVHsv.js";import{L as je}from"./lightbulb-B1EcMlsQ.js";import{A as ve,a as we,b as be,c as Ne,d as Ce,e as ye,f as ke,g as Te,h as De}from"./alert-dialog-CA3sahhm.js";import{S as _e}from"./share-2-YgEUnj0u.js";import{P as Pe}from"./pen-square-BkMXMyrY.js";import{f as Se}from"./formatDistanceToNow-B9rgzkoT.js";import{F as Ae}from"./file-plus-D5b-ayUz.js";import{S as J}from"./search-DbNcPKSo.js";import{H as S,G as A,B as k}from"./heart-handshake-Ba4m_KAX.js";import{B as M}from"./baby-DWVw8W7p.js";import{C as O}from"./cake-Ci3ZQGjc.js";import{P as Me}from"./palette-BFstn63C.js";import"./constructNow-DKKJTFER.js";import"./endOfDay-B9Vn3X1G.js";import"./endOfMonth-FRBqcOZp.js";const B=V("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]),Oe=V("SquareStack",[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]]),Be={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.1,duration:.5,ease:"easeOut"}})},y=({icon:s,title:i,description:n,buttonText:d,onClick:l,custom:o,comingSoon:x,disabled:h})=>e.jsxs(C.div,{variants:Be,custom:o,className:"relative group bg-card/50 dark:bg-card/40 backdrop-blur-sm border border-border/20 rounded-2xl p-6 flex flex-col text-center items-center hover:border-primary/50 transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-2xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center h-full",children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full mb-4 group-hover:scale-110 transition-transform",children:s}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-foreground",children:i}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 flex-grow",children:n}),e.jsxs(g,{onClick:l,className:"w-full mt-auto",disabled:x||h,children:[x?"Em Breve":d,!x&&!h&&e.jsx(me,{className:"w-4 h-4 ml-2"})]})]})]}),Ee=({onNewProposal:s,onNewContract:i,onViewTemplates:n,loadingTemplates:d})=>{$();const l=T();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight text-foreground",children:"GO.STUDIO"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Seu centro de criação para propostas e contratos profissionais."})]}),e.jsxs(C.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[e.jsx(y,{icon:e.jsx(de,{className:"w-8 h-8 text-primary"}),title:"Nova Proposta",description:"Crie propostas visuais e interativas para encantar seus clientes.",buttonText:"Começar a criar",onClick:s,custom:0}),e.jsx(y,{icon:e.jsx(B,{className:"w-8 h-8 text-primary"}),title:"Novo Contrato",description:"Gere contratos seguros e com validade jurídica em minutos.",buttonText:"Criar contrato",onClick:i,custom:1}),e.jsx(y,{icon:e.jsx(Oe,{className:"w-8 h-8 text-primary"}),title:"Templates",description:"Use modelos prontos para agilizar a criação de propostas e contratos.",buttonText:d?"Carregando...":"Ver modelos",onClick:n,custom:2,disabled:d}),e.jsx(y,{icon:e.jsx(je,{className:"w-8 h-8 text-yellow-600"}),title:"INSPIRA",description:"Central de ideias criativas para seus ensaios fotográficos.",buttonText:"Explorar Ideias",onClick:()=>l("/inspira"),custom:3})]})]})},Ie={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.1,duration:.5,ease:"easeOut"}})},N={default:"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//fundo%20liquid%20gofotografo%20wihtout%20grain%20-%20vertical.jpg",casamento:"https://plus.unsplash.com/premium_photo-1675003662150-2569448d2b3b?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",gestante:"https://images.unsplash.com/photo-1542286322-b1241fe63a5f?q=80&w=808&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",aniversario:"https://images.unsplash.com/photo-1642005950606-dfa0b6f29d43?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",ensaio:"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//fundo%20liquid%20gofotografo%20wihtout%20grain%20-%20vertical.jpg",corporativo:"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//fundo%20liquid%20gofotografo%20wihtout%20grain%20-%20vertical.jpg"},Le=({proposal:s,onShare:i,onDelete:n,onEdit:d})=>{const l=T(),{getClientById:o}=z(),x=s.client_id?o(s.client_id):null,u=(()=>{if(s.thumbnail_url)return s.thumbnail_url;const c=x?.tags?.find(t=>N[t.toLowerCase()]);if(c)return N[c.toLowerCase()];const a=Object.keys(N).find(t=>s.nome_da_proposta.toLowerCase().includes(t));return a?N[a]:N.default})(),p=!s.thumbnail_url,v=c=>{c.stopPropagation(),d(s.id)},f=(c,a)=>{c.stopPropagation(),a()};return e.jsxs(C.div,{variants:Ie,className:"relative aspect-[3/4] w-72 flex-shrink-0 overflow-hidden rounded-2xl shadow-lg group cursor-pointer",onClick:v,children:[e.jsx("img",{src:u,alt:s.nome_da_proposta,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),p&&e.jsxs("div",{className:"absolute top-3 left-3 bg-black/50 text-white text-xs px-2 py-1 rounded-full flex items-center gap-1 z-10",children:[e.jsx(xe,{className:"h-3 w-3"}),"Capa ilustrativa"]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[e.jsx("h3",{className:"text-xl font-bold truncate",children:s.nome_da_proposta}),e.jsx("p",{className:"text-sm text-white/80 truncate",children:x?`Cliente: ${x.name}`:"Sem cliente vinculado"}),e.jsxs("div",{className:"mt-4 flex justify-end items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"text-white/80 hover:bg-white/20 hover:text-white rounded-full",onClick:c=>f(c,()=>i(s.id)),children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"text-white/80 hover:bg-white/20 hover:text-white rounded-full",onClick:c=>f(c,()=>l(`/studio/proposals/view/${s.id}`)),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"text-white/80 hover:bg-white/20 hover:text-white rounded-full",onClick:c=>f(c,()=>d(s.id)),children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsxs(ve,{children:[e.jsx(we,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-red-400 hover:bg-red-500/20 hover:text-red-300 rounded-full",onClick:c=>f(c,()=>{}),children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs(be,{onClick:c=>c.stopPropagation(),children:[e.jsxs(Ne,{children:[e.jsx(Ce,{children:"Você tem certeza?"}),e.jsx(ye,{children:"Esta ação não pode ser desfeita. Isso excluirá permanentemente a proposta."})]}),e.jsxs(ke,{children:[e.jsx(Te,{children:"Cancelar"}),e.jsx(De,{onClick:()=>n(s.id),children:"Excluir"})]})]})]})]})]})]})},Ge=({proposals:s,onShare:i,onDelete:n,onEdit:d})=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(ue,{className:"w-6 h-6 mr-3 text-primary"})," Propostas Recentes"]}),s.length>0?e.jsx("div",{className:"flex space-x-6 overflow-x-auto pb-4 -mx-6 px-6",children:s.map(l=>e.jsx(Le,{proposal:l,onShare:i,onDelete:n,onEdit:d},l.id))}):e.jsx("p",{className:"text-muted-foreground p-4 text-center border-dashed border rounded-lg",children:"Nenhuma proposta recente."})]}),He={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.1,duration:.5,ease:"easeOut"}})},qe=({icon:s,title:i,subtitle:n,date:d,statusVariant:l,statusText:o,onClick:x})=>e.jsxs(C.div,{variants:He,className:"bg-card/50 dark:bg-card/40 backdrop-blur-sm border border-border/20 rounded-lg p-3 flex items-center gap-3 hover:bg-muted/30 cursor-pointer transition-colors",onClick:x,children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"font-semibold truncate text-sm",children:i}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:Se(new Date(d),{addSuffix:!0,locale:he})}),e.jsx(_,{variant:l,className:"mt-1 text-xs",children:o})]})]}),Ve=({contracts:s,getClientById:i})=>{const n=T(),d=o=>{switch(o?.toLowerCase()){case"assinado":return"success";case"pendente":return"warning";case"recusado":return"destructive";case"draft":return"outline";default:return"secondary"}},l=o=>{n(`/contracts/editor/${o.id}`)};return e.jsxs("div",{className:"mt-12",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center",children:[e.jsx(B,{className:"w-6 h-6 mr-3 text-primary"})," Contratos Recentes"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.length>0?s.map(o=>e.jsx(qe,{icon:e.jsx(B,{className:"w-5 h-5 text-primary"}),title:o.titulo_contrato,subtitle:`Cliente: ${i(o.id_cliente)?.name||"N/A"}`,date:o.data_geracao,statusVariant:d(o.status_assinatura),statusText:o.status_assinatura||"Rascunho",onClick:()=>l(o)},o.id)):e.jsx("p",{className:"text-muted-foreground p-4 text-center border-dashed border rounded-lg md:col-span-2",children:"Nenhum contrato recente."})})]})},$e=({isOpen:s,onOpenChange:i,onAction:n})=>e.jsx(E,{open:s,onOpenChange:i,children:e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsx(G,{children:"Novo Contrato"}),e.jsx(H,{children:"Gere contratos seguros e com validade jurídica em minutos."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[e.jsxs(g,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>n("blank"),children:[e.jsx(Ae,{className:"w-8 h-8"}),e.jsx("span",{children:"Criar em Branco"})]}),e.jsxs(g,{variant:"outline",className:"h-24 flex flex-col gap-2",onClick:()=>n("template"),children:[e.jsx(fe,{className:"w-8 h-8"}),e.jsx("span",{children:"Usar um Modelo"})]})]})]})}),ze=({isOpen:s,onOpenChange:i,templates:n,onUseTemplate:d})=>{const[l,o]=j.useState(""),x=u=>{const p=u.toLowerCase();return p.includes("casamento")||p.includes("noivos")?e.jsx(S,{className:"w-5 h-5 text-primary flex-shrink-0"}):p.includes("formatura")?e.jsx(A,{className:"w-5 h-5 text-primary flex-shrink-0"}):p.includes("parto")||p.includes("nascimento")||p.includes("newborn")?e.jsx(M,{className:"w-5 h-5 text-primary flex-shrink-0"}):p.includes("aniversário")||p.includes("festa")?e.jsx(O,{className:"w-5 h-5 text-primary flex-shrink-0"}):p.includes("ensaio")?e.jsx(P,{className:"w-5 h-5 text-primary flex-shrink-0"}):e.jsx(k,{className:"w-5 h-5 text-primary flex-shrink-0"})},h=n.filter(u=>u.nome_modelo.toLowerCase().includes(l.toLowerCase()));return e.jsx(E,{open:s,onOpenChange:i,children:e.jsxs(I,{className:"sm:max-w-3xl h-[80vh] flex flex-col",children:[e.jsxs(L,{children:[e.jsx(G,{children:"Galeria de Modelos de Contrato"}),e.jsx(H,{children:"Escolha um modelo para começar. Você poderá editá-lo completamente."})]}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"Buscar por nome ou nicho...",className:"pl-9",value:l,onChange:u=>o(u.target.value)})]}),e.jsx(U,{className:"flex-grow pr-4 -mr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 py-4",children:h.map(u=>e.jsxs(Y,{className:"cursor-pointer hover:shadow-lg hover:border-primary transition-all duration-200 flex flex-col",onClick:()=>d(u),children:[e.jsx(W,{className:"pb-2",children:e.jsxs(Z,{className:"text-base flex items-start gap-2",children:[x(u.nome_modelo),e.jsx("span",{className:"flex-1",children:u.nome_modelo})]})}),e.jsx(X,{className:"flex-grow",children:e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:u.description||"Este modelo não possui uma descrição."})})]},u.id))})})]})})},Fe=({isOpen:s,onOpenChange:i,templates:n,onUseTemplate:d})=>{const[l,o]=j.useState(""),[x,h]=j.useState("all"),u=[{id:"all",label:"Todos",icon:k},{id:"casamento",label:"Casamento",icon:S},{id:"formatura",label:"Formatura",icon:A},{id:"newborn",label:"Newborn",icon:M},{id:"aniversario",label:"Aniversário",icon:O},{id:"ensaio",label:"Ensaio",icon:P}],p=a=>{const t=a.toLowerCase();return t.includes("casamento")||t.includes("noivos")?e.jsx(S,{className:"w-5 h-5 text-rose-500 flex-shrink-0"}):t.includes("formatura")?e.jsx(A,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}):t.includes("parto")||t.includes("nascimento")||t.includes("newborn")?e.jsx(M,{className:"w-5 h-5 text-pink-500 flex-shrink-0"}):t.includes("aniversário")||t.includes("festa")?e.jsx(O,{className:"w-5 h-5 text-yellow-500 flex-shrink-0"}):t.includes("ensaio")?e.jsx(P,{className:"w-5 h-5 text-purple-500 flex-shrink-0"}):e.jsx(k,{className:"w-5 h-5 text-primary flex-shrink-0"})},v=a=>{const t=a.toLowerCase();return t.includes("casamento")||t.includes("noivos")?"casamento":t.includes("formatura")?"formatura":t.includes("parto")||t.includes("nascimento")||t.includes("newborn")?"newborn":t.includes("aniversário")||t.includes("festa")?"aniversario":t.includes("ensaio")?"ensaio":"outros"},f=n.filter(a=>{const t=a.nome?.toLowerCase().includes(l.toLowerCase())||a.descricao?.toLowerCase().includes(l.toLowerCase()),w=x==="all"||v(a.nome)===x;return t&&w}),c=(a,t)=>{t.stopPropagation(),console.log("Preview template:",a)};return e.jsx(E,{open:s,onOpenChange:i,children:e.jsxs(I,{className:"sm:max-w-6xl h-[90vh] flex flex-col",children:[e.jsxs(L,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-primary"}),"Galeria de Templates de Propostas"]}),e.jsx(H,{children:"Escolha um template profissional para começar sua proposta. Você poderá personalizar completamente."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"Buscar templates por nome ou descrição...",className:"pl-9",value:l,onChange:a=>o(a.target.value)})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(a=>{const t=a.icon;return e.jsxs(g,{variant:x===a.id?"default":"outline",size:"sm",onClick:()=>h(a.id),className:"flex items-center gap-1",children:[e.jsx(t,{className:"w-4 h-4"}),a.label]},a.id)})})]}),e.jsx(U,{className:"flex-grow pr-4 -mr-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 py-4",children:f.length===0?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(k,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Nenhum template encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tente ajustar os filtros ou busque por outros termos."})]}):f.map(a=>e.jsxs(Y,{className:"cursor-pointer hover:shadow-lg hover:border-primary hover:scale-105 transition-all duration-300 flex flex-col group relative overflow-hidden",onClick:()=>d(a),children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx(_,{variant:"secondary",className:"text-xs bg-black/70 text-white",children:v(a.nome)==="outros"?"Geral":u.find(t=>t.id===v(a.nome))?.label})}),e.jsx(g,{size:"sm",variant:"secondary",className:"absolute top-2 right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity w-8 h-8 p-0",onClick:t=>c(a,t),children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("div",{className:"h-32 bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center relative overflow-hidden",children:a.preview_image?e.jsx("img",{src:a.preview_image,alt:`Preview do template ${a.nome}`,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"w-8 h-8 text-primary/50 mx-auto mb-2"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Preview"})]})}),e.jsx(W,{className:"pb-2",children:e.jsxs(Z,{className:"text-sm flex items-start gap-2",children:[p(a.nome),e.jsx("span",{className:"flex-1 line-clamp-2",children:a.nome})]})}),e.jsxs(X,{className:"flex-grow",children:[e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:a.descricao||"Este template não possui uma descrição."}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-2 border-t border-border/50",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Por GO.FOTÓGRAFO"}),e.jsx(_,{variant:"outline",className:"text-xs",children:"Profissional"})]})]})]},a.id))})}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(g,{variant:"outline",onClick:()=>i(!1),children:"Fechar"})})]})})},is=()=>{const s=T(),{user:i,proposals:n,contratos:d,getClientById:l,refreshData:o,deleteProposal:x}=z(),{toast:h}=$(),[u,p]=j.useState(!1),[v,f]=j.useState(!1),[c,a]=j.useState([]),[t,w]=j.useState(!1),[K,Q]=j.useState([]),[ee,q]=j.useState(!1),se=async()=>{q(!0);try{const{data:r,error:m}=await D.from("templates_propostas").select("*").eq("published",!0).order("created_at",{ascending:!1});if(m)throw m;r&&r.length>0?(Q(r),w(!0)):h({title:"Nenhum template encontrado",description:"Não há templates de proposta publicados no momento."})}catch(r){h({title:"Erro ao carregar templates",description:r.message,variant:"destructive"})}finally{q(!1)}},ae=async r=>{try{s("/studio/proposals/new",{state:{templateData:r,fromTemplate:!0}}),w(!1)}catch(m){h({title:"Erro ao usar template",description:m.message,variant:"destructive"})}},te=async r=>{if(p(!1),r==="blank")s("/studio/contracts/new");else if(r==="template")try{const{data:m,error:b}=await D.from("modeloscontrato").select("*").or("status.eq.publico",`user_id.eq.${i.id}`);if(b)throw b;a(m),f(!0)}catch(m){h({title:"Erro",description:`Não foi possível carregar os modelos de contrato: ${m.message}`,variant:"destructive"})}},re=async r=>{f(!1);try{const{data:m,error:b}=await D.from("contratosgerados").insert({id_fotografo:i.id,id_modelo:r.id,titulo_contrato:`${r.nome_modelo} (Cópia)`,conteudo_final:r.conteudo_template,status_assinatura:"draft"}).select("id").single();if(b)throw b;await o("contratos"),s(`/studio/contracts/edit/${m.id}`)}catch(m){h({title:"Erro ao criar contrato do modelo",description:m.message,variant:"destructive"})}},oe=r=>{const m=`${window.location.origin}/studio/view/${r}`;navigator.clipboard.writeText(m),h({title:"Link Copiado!",description:"O link da proposta foi copiado para a área de transferência."})},ie=async r=>{try{await x(r),h({title:"Proposta Excluída",description:"A proposta foi removida com sucesso."})}catch{h({title:"Erro ao Excluir",description:"Não foi possível remover a proposta.",variant:"destructive"})}},le=r=>{s(`/studio/proposals/edit/${r}`)},ne=n.sort((r,m)=>new Date(m.updated_at)-new Date(r.updated_at)),ce=(d||[]).sort((r,m)=>new Date(m.data_geracao)-new Date(r.data_geracao)).slice(0,4);return e.jsxs(C.div,{initial:"hidden",animate:"visible",className:"p-4 sm:p-6",children:[e.jsx(Ee,{onNewProposal:()=>s("/studio/proposals/new"),onNewContract:()=>p(!0),onViewTemplates:se,loadingTemplates:ee}),e.jsx(Ge,{proposals:ne,onShare:oe,onDelete:ie,onEdit:le}),e.jsx(Ve,{contracts:ce,getClientById:l}),e.jsx($e,{isOpen:u,onOpenChange:p,onAction:te}),e.jsx(ze,{isOpen:v,onOpenChange:f,templates:c,onUseTemplate:re}),e.jsx(Fe,{isOpen:t,onOpenChange:w,templates:K,onUseTemplate:ae})]})};export{is as default};
