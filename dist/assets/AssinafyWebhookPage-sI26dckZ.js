import{g as l,u as p,r as h,j as i,s as d}from"./index-DHBNVHsv.js";const x=()=>{const e=l(),t=p();return h.useEffect(()=>{const u=async s=>{if(!s||!s.id||!s.status)return;const{id:a,status:o,file_url:r}=s,{data:n,error:f}=await d.from("contratosgerados").select("id").eq("id_assinatura_assinafy",a).single();if(f||!n)return;const c={status_assinatura:o.toLowerCase()};o.toLowerCase()==="assinado"&&r&&(c.link_documento_final_assinafy=r);const{error:y}=await d.from("contratosgerados").update(c).eq("id",n.id)};(async()=>{const s=new URLSearchParams(e.search).get("payload");if(s)try{const a=JSON.parse(decodeURIComponent(s));await u(a)}catch{}t("/contracts",{replace:!0})})()},[e,t]),i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx("p",{children:"Processando webhook..."})})};export{x as default};
