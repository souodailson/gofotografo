import{f as Y,a7 as Z,aS as ee,r as j,j as e,m as o,bI as P,cr as p,B as t,aC as g,Q as _,T as A,V,W as N,X as q,aV as se,D as f,b2 as B,cs as T}from"./index-B959_7_o.js";import{T as ae,a as te,b as R,c as E}from"./tabs-5JwcCaKq.js";import{A as re,b as ce,c as ie,d as oe,e as le,f as ne,g as de,h as me}from"./alert-dialog-CMWSZjMP.js";import{u as G}from"./useCardHoverEffect-OZDMdtp8.js";import{M}from"./more-vertical-_AfS99pC.js";import{P as F}from"./pen-square-CcxMKlNU.js";const xe=({pkg:s,onEdit:m,onDelete:x,onViewDetails:l})=>{const h=G();return e.jsxs(o.div,{ref:h,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl shadow-lg border border-border flex flex-col card-hover-effect",children:[e.jsxs("div",{className:"p-6 flex-grow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.name}),e.jsxs(_,{children:[e.jsx(A,{asChild:!0,children:e.jsx(t,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(N,{onClick:()=>m(s),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(N,{onClick:()=>x(s.id),className:"text-red-600 dark:text-red-400",children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:s.description||"Sem descrição"}),s.niche&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary dark:bg-customGreen/10 dark:text-customGreen",children:[e.jsx(se,{className:"w-3 h-3 mr-1.5"}),s.niche]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-customGreen"}),e.jsxs("span",{children:["Preço (à vista/Pix): ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_cash_pix||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.price_card&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-blue-500"}),e.jsxs("span",{children:["Preço (Cartão): ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.cost&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-2 text-orange-500"}),e.jsxs("span",{children:["Custo Estimado: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.cost||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-border bg-accent/30 dark:bg-accent/10 rounded-b-xl",children:e.jsx(t,{variant:"link",className:"text-customPurple dark:text-customGreen p-0 h-auto",onClick:()=>l(s),children:"Ver Detalhes"})})]},s.id)},he=({product:s,onEdit:m,onDelete:x,onViewDetails:l})=>{const h=G();return e.jsxs(o.div,{ref:h,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card rounded-xl shadow-lg border border-border flex flex-col card-hover-effect",children:[e.jsxs("div",{className:"p-6 flex-grow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"w-5 h-5 mr-2 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s.name})]}),e.jsxs(_,{children:[e.jsx(A,{asChild:!0,children:e.jsx(t,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsxs(N,{onClick:()=>m(s),children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Editar"]}),e.jsxs(N,{onClick:()=>x(s.id),className:"text-red-600 dark:text-red-400",children:[e.jsx(q,{className:"mr-2 h-4 w-4"})," Excluir"]})]})]})]}),s.code&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Código: ",s.code]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description||"Sem descrição"}),s.category&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/10 text-blue-500",children:[e.jsx(T,{className:"w-3 h-3 mr-1.5"}),s.category]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-customGreen"}),e.jsxs("span",{children:["Preço PIX: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_pix||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.price_card&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-4 h-4 mr-2 text-blue-500"}),e.jsxs("span",{children:["Preço Cartão: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.cost_price&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-2 text-orange-500"}),e.jsxs("span",{children:["Custo: ",e.jsxs("span",{className:"font-semibold",children:["R$ ",Number(s.cost_price||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),s.stock_quantity!==void 0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-2 text-purple-500"}),e.jsxs("span",{children:["Estoque: ",e.jsxs("span",{className:"font-semibold",children:[s.stock_quantity," un."]})]})]})]})]}),e.jsx("div",{className:"p-4 border-t border-border bg-accent/30 dark:bg-accent/10 rounded-b-xl",children:e.jsx(t,{variant:"link",className:"text-customPurple dark:text-customGreen p-0 h-auto",onClick:()=>l(s),children:"Ver Detalhes"})})]},s.id)},be=()=>{const{toast:s}=Y(),{servicePackages:m,products:x=[],loading:l,deleteServicePackage:h,deleteProduct:L,refreshData:r,user:C}=Z(),{openModal:n}=ee(),[$,b]=j.useState(!1),[v,w]=j.useState(null),[y,I]=j.useState("package"),[O,H]=j.useState("packages"),c=m||[],i=x||[];j.useEffect(()=>{C&&(c.length||r("service_packages"),i.length||r("products"))},[C,c.length,i.length,r]);const d=()=>{r("service_packages"),r("products")},D=()=>{n("servicePackage",{servicePackage:null,onSaveSuccess:d})},X=a=>{n("servicePackage",{servicePackage:a,onSaveSuccess:d})},z=a=>{n("servicePackage",{servicePackage:a,onSaveSuccess:d})},S=()=>{n("product",{product:null,onSaveSuccess:d})},Q=a=>{n("product",{product:a,onSaveSuccess:d})},W=a=>{n("product",{product:a,onSaveSuccess:d})},k=(a,u)=>{w(a),I(u),b(!0)},J=async()=>{if(v){try{y==="package"?(await h(v),s({title:"Pacote Removido",description:"O pacote de serviço foi removido com sucesso."}),r("service_packages")):y==="product"&&(await L(v),s({title:"Produto Removido",description:"O produto foi removido com sucesso."}),r("products"))}catch(a){s({title:"Erro ao Remover",description:a.message,variant:"destructive"})}b(!1),w(null)}},K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Pacotes de Serviços"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Crie e gerencie seus pacotes e serviços fotográficos"})]}),e.jsxs(t,{onClick:D,className:"btn-custom-gradient text-white shadow-lg",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Novo Pacote"]})]}),l&&(!c||c.length===0)?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(P,{className:"w-12 h-12 text-muted-foreground mx-auto animate-bounce mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando pacotes..."})]}):!c||c.length===0?e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx(P,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum pacote de serviço cadastrado"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Comece adicionando seus pacotes para facilitar a criação de orçamentos e trabalhos."}),e.jsxs(t,{onClick:D,className:"btn-custom-gradient text-white",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Criar Primeiro Pacote"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(a=>e.jsx(xe,{pkg:a,onEdit:X,onDelete:u=>k(u,"package"),onViewDetails:z},a.id))})]}),U=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Produtos"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie seus produtos, preços, estoque e vendas"})]}),e.jsxs(t,{onClick:S,className:"btn-custom-gradient text-white shadow-lg",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Novo Produto"]})]}),l&&(!i||i.length===0)?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(p,{className:"w-12 h-12 text-muted-foreground mx-auto animate-bounce mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando produtos..."})]}):!i||i.length===0?e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-card rounded-xl p-6 shadow-lg border border-border",children:[e.jsx(p,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Nenhum produto cadastrado"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Comece adicionando produtos como fotos, álbuns, quadros e outros itens que você vende."}),e.jsxs(t,{onClick:S,className:"btn-custom-gradient text-white",children:[e.jsx(g,{className:"w-4 h-4 mr-2"})," Criar Primeiro Produto"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>e.jsx(he,{product:a,onEdit:Q,onDelete:u=>k(u,"product"),onViewDetails:W},a.id))})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground titulo-gradiente",children:"Serviços & Produtos"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie seus pacotes de serviços e produtos para vendas"})]}),e.jsxs(ae,{value:O,onValueChange:H,className:"w-full",children:[e.jsxs(te,{className:"grid w-full grid-cols-2",children:[e.jsxs(R,{value:"packages",className:"flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Pacotes de Serviços"]}),e.jsxs(R,{value:"products",className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Produtos"]})]}),e.jsx(E,{value:"packages",className:"mt-6",children:K()}),e.jsx(E,{value:"products",className:"mt-6",children:U()})]}),e.jsx(re,{open:$,onOpenChange:b,children:e.jsxs(ce,{children:[e.jsxs(ie,{children:[e.jsx(oe,{children:"Confirmar Exclusão"}),e.jsxs(le,{children:["Tem certeza que deseja excluir este ",y==="package"?"pacote de serviço":"produto","? Esta ação não pode ser desfeita."]})]}),e.jsxs(ne,{children:[e.jsx(de,{onClick:()=>w(null),children:"Cancelar"}),e.jsx(me,{onClick:J,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})};export{be as default};
