const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CZu8vtmH.js","assets/index-DvrUJLnK.js","assets/index-Chjiymov.js","assets/index-Ckv8lBbR.js","assets/tooltip-BAD5Ckmu.js","assets/extends-CF3RwP-h.js","assets/eye-off-sHV3HPEs.js","assets/eye-CfqWemCX.js","assets/settings-P5e9icY8.js","assets/useCardHoverEffect-DKzSnrPs.js","assets/skeleton-C83s1zEF.js","assets/receipt-39BEb2bQ.js","assets/landmark-BQXObLsj.js","assets/shield-check-BMISnV7K.js","assets/trending-down-NtxIf83G.js","assets/trending-up-BJSObxL3.js","assets/target-CWRCOCQU.js","assets/PieChart-Bds7sYAV.js","assets/alert-dialog-hDGwXEgF.js","assets/list-Cpm9BPxT.js","assets/more-vertical-DMnNLOHl.js","assets/pen-square-C4elkEd7.js","assets/pt-BR-C50z7HhP.js","assets/cake-CMcLZUMQ.js","assets/progress-ooMd08ih.js","assets/badge-KM9UVn0z.js","assets/isSameMonth-hajuOE_0.js","assets/subMonths-COIlGjPe.js","assets/grip-vertical-pdTWLIU4.js","assets/Clients-C4sPZ27Q.js","assets/link-C6X5O9Jp.js","assets/search-ll04-Ojb.js","assets/filter-DPj7xC5q.js","assets/message-square-D6d1hZth.js","assets/ClientDetail-ZyCJmxA9.js","assets/tabs-6-86FGCZ.js","assets/plus-circle-BoDQGLs0.js","assets/map-pin-BgjgYSPM.js","assets/heart-C6c15NbK.js","assets/image-Us0o2qdW.js","assets/pen-line-BoZWGv6p.js","assets/upload-cloud-CU98l7QX.js","assets/calendar-days-ip_tn8Yq.js","assets/arrow-left-DLEVZzMa.js","assets/Workflow-DfW4GVxQ.js","assets/dnd.esm-M7r1rSi_.js","assets/defineProperty-DbXIQDXj.js","assets/typeof-QjJsDpFa.js","assets/tiny-invariant-CopsF_GD.js","assets/align-justify-DUvnd9au.js","assets/chevron-up-cBjIRsvR.js","assets/archive-CW1s9bDe.js","assets/palette-Dvv5toOE.js","assets/list-checks-DObYa5yf.js","assets/Financial-Biro83yb.js","assets/hourglass-56vM54L1.js","assets/startOfMonth-C9rb0JtR.js","assets/endOfMonth-CkKyWX8I.js","assets/endOfWeek-DV5mvmrT.js","assets/endOfDay-lcpQLoRB.js","assets/Calendar-J7Rv1kWl.js","assets/googleCalendar-uu7t9BIm.js","assets/FeatureRestrictionModal-Cu-AtXTB.js","assets/popover-D9gFMjqE.js","assets/getDay-DyNTa3cC.js","assets/constructNow-Do6eGdrA.js","assets/external-link-DPzoWSPL.js","assets/switch-CBSqAWLD.js","assets/copy-DiSivjUN.js","assets/AvailabilityModal-7HAgyd7u.js","assets/Reports-C5dV6v4J.js","assets/jspdf.es.min-Bn2sV0ZI.js","assets/jspdf.plugin.autotable-DtM0_LT_.js","assets/bar-chart-3-CVXrikAG.js","assets/alert-circle-BfZwFJPk.js","assets/Settings-t_-7WTEq.js","assets/globe-BZ4iZAge.js","assets/shield-CMkZ-NHz.js","assets/refresh-cw-Cuv4k_ey.js","assets/formatDistanceToNow-CSfivs7G.js","assets/lightbulb-pOz5ANFn.js","assets/AccountSettings-CAaR26zO.js","assets/upload-BKGHHoqN.js","assets/ServicePackages-DLGRSUIs.js","assets/MySetup-CrxtTfBK.js","assets/type-BVwtiabu.js","assets/Precifique-zC27CIbU.js","assets/percent-CRZRFqD_.js","assets/ReservaInteligente-DRiFzRtw.js","assets/more-horizontal-CoouWYr9.js","assets/Boards-VhYYsBmv.js","assets/file-plus-bPJQQAao.js","assets/useDebounce-BKbyUDNQ.js","assets/BoardDetail-C5Cxshe8.js","assets/square-Rvd6Ax2h.js","assets/PlansPage-CCRsMruD.js","assets/star-gKsqib06.js","assets/FormsPage-CiazOaU2.js","assets/user-plus-G1xSGOar.js","assets/megaphone-QMsRQccm.js","assets/FormSuccessModal-D37GfARw.js","assets/share-2-CwbnTK0-.js","assets/FormEditorPage-CKI2qD6o.js","assets/CampaignSubmissionsPage-B4IjTdY_.js","assets/StudioPage-BwZa69Tm.js","assets/heart-handshake-D5PCWFsu.js","assets/ContractListPage-69wNlyTT.js","assets/table-HEy1qyUX.js","assets/ContractEditorPage-CZTQewI3.js","assets/underline-GwlJvuYb.js","assets/ProposalEditorPage-Bw1TwC7i.js","assets/EditorRulers-Ced9eo7V.js","assets/EditorCanvas-UTMJW6XL.js","assets/instagram-CW58Ipme.js","assets/EditorCanvas-BxwK8EBg.css","assets/html2canvas.esm-BfxBtG_O.js","assets/ban-A1XmwBn5.js","assets/BlogPage-CfUQQCu8.js","assets/AvailabilityManagerPage-DgCa4k62.js","assets/ReferralsPage-BAAyqBC_.js","assets/LandingPage-Dh-msZTO.js","assets/PrivacyPolicyPage-IsNZWy-h.js","assets/LoginPage-BhrHNd5S.js","assets/AuthLayout-Bx7gvYM7.js","assets/log-in-CYC5EWaH.js","assets/SignupPage-DJoxEG-h.js","assets/ForgotPasswordPage-BBKqQRWX.js","assets/UpdatePasswordPage-BtJy02LO.js","assets/AdminLoginPage-Dh04nsGS.js","assets/AdminLayout-BLY_RYnw.js","assets/PublicBookingPage-78jGupIW.js","assets/BlogPostPage-gXMgKBlj.js","assets/ProposalEditorPage-4usAH0He.js","assets/CustomPageViewer-2Zr3xwsz.js","assets/TutorialsPage-Cw1XBKHR.js","assets/ProposalPublicView-DWIZrZWP.js"])))=>i.map(i=>d[i]);
var jx=n=>{throw TypeError(n)};var j0=(n,e,t)=>e.has(n)||jx("Cannot "+t);var Es=(n,e,t)=>(j0(n,e,"read from private field"),t?t.call(n):e.get(n)),Gd=(n,e,t)=>e.has(n)?jx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),np=(n,e,t,r)=>(j0(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),$g=(n,e,t)=>(j0(n,e,"access private method"),t);var Fx=(n,e,t,r)=>({set _(i){np(n,e,i,t)},get _(){return Es(n,e,r)}});function G1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function eO(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var F0={exports:{}},rp={},B0={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function tO(){if(Bx)return gt;Bx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=g&&F[g]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(F,ie,pe){this.props=F,this.context=ie,this.refs=x,this.updater=pe||b}E.prototype.isReactComponent={},E.prototype.setState=function(F,ie){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ie,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function P(){}P.prototype=E.prototype;function M(F,ie,pe){this.props=F,this.context=ie,this.refs=x,this.updater=pe||b}var R=M.prototype=new P;R.constructor=M,S(R,E.prototype),R.isPureReactComponent=!0;var O=Array.isArray,L=Object.prototype.hasOwnProperty,B={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function W(F,ie,pe){var Te,De={},Pe=null,ve=null;if(ie!=null)for(Te in ie.ref!==void 0&&(ve=ie.ref),ie.key!==void 0&&(Pe=""+ie.key),ie)L.call(ie,Te)&&!$.hasOwnProperty(Te)&&(De[Te]=ie[Te]);var Oe=arguments.length-2;if(Oe===1)De.children=pe;else if(1<Oe){for(var He=Array(Oe),Ye=0;Ye<Oe;Ye++)He[Ye]=arguments[Ye+2];De.children=He}if(F&&F.defaultProps)for(Te in Oe=F.defaultProps,Oe)De[Te]===void 0&&(De[Te]=Oe[Te]);return{$$typeof:n,type:F,key:Pe,ref:ve,props:De,_owner:B.current}}function Y(F,ie){return{$$typeof:n,type:F.type,key:ie,ref:F.ref,props:F.props,_owner:F._owner}}function ae(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function se(F){var ie={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(pe){return ie[pe]})}var le=/\/+/g;function ce(F,ie){return typeof F=="object"&&F!==null&&F.key!=null?se(""+F.key):ie.toString(36)}function me(F,ie,pe,Te,De){var Pe=typeof F;(Pe==="undefined"||Pe==="boolean")&&(F=null);var ve=!1;if(F===null)ve=!0;else switch(Pe){case"string":case"number":ve=!0;break;case"object":switch(F.$$typeof){case n:case e:ve=!0}}if(ve)return ve=F,De=De(ve),F=Te===""?"."+ce(ve,0):Te,O(De)?(pe="",F!=null&&(pe=F.replace(le,"$&/")+"/"),me(De,ie,pe,"",function(Ye){return Ye})):De!=null&&(ae(De)&&(De=Y(De,pe+(!De.key||ve&&ve.key===De.key?"":(""+De.key).replace(le,"$&/")+"/")+F)),ie.push(De)),1;if(ve=0,Te=Te===""?".":Te+":",O(F))for(var Oe=0;Oe<F.length;Oe++){Pe=F[Oe];var He=Te+ce(Pe,Oe);ve+=me(Pe,ie,pe,He,De)}else if(He=v(F),typeof He=="function")for(F=He.call(F),Oe=0;!(Pe=F.next()).done;)Pe=Pe.value,He=Te+ce(Pe,Oe++),ve+=me(Pe,ie,pe,He,De);else if(Pe==="object")throw ie=String(F),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return ve}function q(F,ie,pe){if(F==null)return F;var Te=[],De=0;return me(F,Te,"","",function(Pe){return ie.call(pe,Pe,De++)}),Te}function z(F){if(F._status===-1){var ie=F._result;ie=ie(),ie.then(function(pe){(F._status===0||F._status===-1)&&(F._status=1,F._result=pe)},function(pe){(F._status===0||F._status===-1)&&(F._status=2,F._result=pe)}),F._status===-1&&(F._status=0,F._result=ie)}if(F._status===1)return F._result.default;throw F._result}var te={current:null},V={transition:null},ne={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:V,ReactCurrentOwner:B};function J(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:q,forEach:function(F,ie,pe){q(F,function(){ie.apply(this,arguments)},pe)},count:function(F){var ie=0;return q(F,function(){ie++}),ie},toArray:function(F){return q(F,function(ie){return ie})||[]},only:function(F){if(!ae(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},gt.Component=E,gt.Fragment=t,gt.Profiler=i,gt.PureComponent=M,gt.StrictMode=r,gt.Suspense=d,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,gt.act=J,gt.cloneElement=function(F,ie,pe){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Te=S({},F.props),De=F.key,Pe=F.ref,ve=F._owner;if(ie!=null){if(ie.ref!==void 0&&(Pe=ie.ref,ve=B.current),ie.key!==void 0&&(De=""+ie.key),F.type&&F.type.defaultProps)var Oe=F.type.defaultProps;for(He in ie)L.call(ie,He)&&!$.hasOwnProperty(He)&&(Te[He]=ie[He]===void 0&&Oe!==void 0?Oe[He]:ie[He])}var He=arguments.length-2;if(He===1)Te.children=pe;else if(1<He){Oe=Array(He);for(var Ye=0;Ye<He;Ye++)Oe[Ye]=arguments[Ye+2];Te.children=Oe}return{$$typeof:n,type:F.type,key:De,ref:Pe,props:Te,_owner:ve}},gt.createContext=function(F){return F={$$typeof:a,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:s,_context:F},F.Consumer=F},gt.createElement=W,gt.createFactory=function(F){var ie=W.bind(null,F);return ie.type=F,ie},gt.createRef=function(){return{current:null}},gt.forwardRef=function(F){return{$$typeof:l,render:F}},gt.isValidElement=ae,gt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:z}},gt.memo=function(F,ie){return{$$typeof:h,type:F,compare:ie===void 0?null:ie}},gt.startTransition=function(F){var ie=V.transition;V.transition={};try{F()}finally{V.transition=ie}},gt.unstable_act=J,gt.useCallback=function(F,ie){return te.current.useCallback(F,ie)},gt.useContext=function(F){return te.current.useContext(F)},gt.useDebugValue=function(){},gt.useDeferredValue=function(F){return te.current.useDeferredValue(F)},gt.useEffect=function(F,ie){return te.current.useEffect(F,ie)},gt.useId=function(){return te.current.useId()},gt.useImperativeHandle=function(F,ie,pe){return te.current.useImperativeHandle(F,ie,pe)},gt.useInsertionEffect=function(F,ie){return te.current.useInsertionEffect(F,ie)},gt.useLayoutEffect=function(F,ie){return te.current.useLayoutEffect(F,ie)},gt.useMemo=function(F,ie){return te.current.useMemo(F,ie)},gt.useReducer=function(F,ie,pe){return te.current.useReducer(F,ie,pe)},gt.useRef=function(F){return te.current.useRef(F)},gt.useState=function(F){return te.current.useState(F)},gt.useSyncExternalStore=function(F,ie,pe){return te.current.useSyncExternalStore(F,ie,pe)},gt.useTransition=function(){return te.current.useTransition()},gt.version="18.3.1",gt}var $x;function Yv(){return $x||($x=1,B0.exports=tO()),B0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function nO(){if(Ux)return rp;Ux=1;var n=Yv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,d,h){var f,g={},v=null,b=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(b=d.ref);for(f in d)r.call(d,f)&&!s.hasOwnProperty(f)&&(g[f]=d[f]);if(l&&l.defaultProps)for(f in d=l.defaultProps,d)g[f]===void 0&&(g[f]=d[f]);return{$$typeof:e,type:l,key:v,ref:b,props:g,_owner:i.current}}return rp.Fragment=t,rp.jsx=a,rp.jsxs=a,rp}var Vx;function rO(){return Vx||(Vx=1,F0.exports=nO()),F0.exports}var y=rO(),C=Yv();const ot=tm(C),I_=G1({__proto__:null,default:ot},[C]);var Ug={},$0={exports:{}},ti={},U0={exports:{}},V0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function iO(){return zx||(zx=1,function(n){function e(V,ne){var J=V.length;V.push(ne);e:for(;0<J;){var F=J-1>>>1,ie=V[F];if(0<i(ie,ne))V[F]=ne,V[J]=ie,J=F;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var ne=V[0],J=V.pop();if(J!==ne){V[0]=J;e:for(var F=0,ie=V.length,pe=ie>>>1;F<pe;){var Te=2*(F+1)-1,De=V[Te],Pe=Te+1,ve=V[Pe];if(0>i(De,J))Pe<ie&&0>i(ve,De)?(V[F]=ve,V[Pe]=J,F=Pe):(V[F]=De,V[Te]=J,F=Te);else if(Pe<ie&&0>i(ve,J))V[F]=ve,V[Pe]=J,F=Pe;else break e}}return ne}function i(V,ne){var J=V.sortIndex-ne.sortIndex;return J!==0?J:V.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var d=[],h=[],f=1,g=null,v=3,b=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(V){for(var ne=t(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=V)r(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=t(h)}}function O(V){if(x=!1,R(V),!S)if(t(d)!==null)S=!0,z(L);else{var ne=t(h);ne!==null&&te(O,ne.startTime-V)}}function L(V,ne){S=!1,x&&(x=!1,P(W),W=-1),b=!0;var J=v;try{for(R(ne),g=t(d);g!==null&&(!(g.expirationTime>ne)||V&&!se());){var F=g.callback;if(typeof F=="function"){g.callback=null,v=g.priorityLevel;var ie=F(g.expirationTime<=ne);ne=n.unstable_now(),typeof ie=="function"?g.callback=ie:g===t(d)&&r(d),R(ne)}else r(d);g=t(d)}if(g!==null)var pe=!0;else{var Te=t(h);Te!==null&&te(O,Te.startTime-ne),pe=!1}return pe}finally{g=null,v=J,b=!1}}var B=!1,$=null,W=-1,Y=5,ae=-1;function se(){return!(n.unstable_now()-ae<Y)}function le(){if($!==null){var V=n.unstable_now();ae=V;var ne=!0;try{ne=$(!0,V)}finally{ne?ce():(B=!1,$=null)}}else B=!1}var ce;if(typeof M=="function")ce=function(){M(le)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,q=me.port2;me.port1.onmessage=le,ce=function(){q.postMessage(null)}}else ce=function(){E(le,0)};function z(V){$=V,B||(B=!0,ce())}function te(V,ne){W=E(function(){V(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,z(L))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(V){switch(v){case 1:case 2:case 3:var ne=3;break;default:ne=v}var J=v;v=ne;try{return V()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,ne){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=v;v=V;try{return ne()}finally{v=J}},n.unstable_scheduleCallback=function(V,ne,J){var F=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?F+J:F):J=F,V){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=J+ie,V={id:f++,callback:ne,priorityLevel:V,startTime:J,expirationTime:ie,sortIndex:-1},J>F?(V.sortIndex=J,e(h,V),t(d)===null&&V===t(h)&&(x?(P(W),W=-1):x=!0,te(O,J-F))):(V.sortIndex=ie,e(d,V),S||b||(S=!0,z(L))),V},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(V){var ne=v;return function(){var J=v;v=ne;try{return V.apply(this,arguments)}finally{v=J}}}}(V0)),V0}var Hx;function sO(){return Hx||(Hx=1,U0.exports=iO()),U0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function oO(){if(Wx)return ti;Wx=1;var n=Yv(),e=sO();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(i[o]=c,o=0;o<c.length;o++)r.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function v(o){return d.call(g,o)?!0:d.call(f,o)?!1:h.test(o)?g[o]=!0:(f[o]=!0,!1)}function b(o,c,m,w){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,c,m,w){if(c===null||typeof c>"u"||b(o,c,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(o,c,m,w,A,k,D){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=w,this.attributeNamespace=A,this.mustUseProperty=m,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=D}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){E[o]=new x(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];E[c]=new x(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){E[o]=new x(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){E[o]=new x(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){E[o]=new x(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){E[o]=new x(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){E[o]=new x(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){E[o]=new x(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){E[o]=new x(o,5,!1,o.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(P,M);E[c]=new x(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!1,!1)}),E.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){E[o]=new x(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,c,m,w){var A=E.hasOwnProperty(c)?E[c]:null;(A!==null?A.type!==0:w||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(S(c,m,A,w)&&(m=null),w||A===null?v(c)&&(m===null?o.removeAttribute(c):o.setAttribute(c,""+m)):A.mustUseProperty?o[A.propertyName]=m===null?A.type===3?!1:"":m:(c=A.attributeName,w=A.attributeNamespace,m===null?o.removeAttribute(c):(A=A.type,m=A===3||A===4&&m===!0?"":""+m,w?o.setAttributeNS(w,c,m):o.setAttribute(c,m))))}var O=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),B=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),se=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),V=Symbol.iterator;function ne(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,F;function ie(o){if(F===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);F=c&&c[1]||""}return`
`+F+o}var pe=!1;function Te(o,c){if(!o||pe)return"";pe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(de){var w=de}Reflect.construct(o,[],c)}else{try{c.call()}catch(de){w=de}o.call(c.prototype)}else{try{throw Error()}catch(de){w=de}o()}}catch(de){if(de&&w&&typeof de.stack=="string"){for(var A=de.stack.split(`
`),k=w.stack.split(`
`),D=A.length-1,U=k.length-1;1<=D&&0<=U&&A[D]!==k[U];)U--;for(;1<=D&&0<=U;D--,U--)if(A[D]!==k[U]){if(D!==1||U!==1)do if(D--,U--,0>U||A[D]!==k[U]){var G=`
`+A[D].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=D&&0<=U);break}}}finally{pe=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?ie(o):""}function De(o){switch(o.tag){case 5:return ie(o.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return o=Te(o.type,!1),o;case 11:return o=Te(o.type.render,!1),o;case 1:return o=Te(o.type,!0),o;default:return""}}function Pe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case $:return"Fragment";case B:return"Portal";case Y:return"Profiler";case W:return"StrictMode";case ce:return"Suspense";case me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case se:return(o.displayName||"Context")+".Consumer";case ae:return(o._context.displayName||"Context")+".Provider";case le:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case q:return c=o.displayName||null,c!==null?c:Pe(o.type)||"Memo";case z:c=o._payload,o=o._init;try{return Pe(o(c))}catch{}}return null}function ve(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(c);case 8:return c===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Oe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function He(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ye(o){var c=He(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),w=""+o[c];if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,k=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return A.call(this)},set:function(D){w=""+D,k.call(this,D)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(D){w=""+D},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function st(o){o._valueTracker||(o._valueTracker=Ye(o))}function Rt(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),w="";return o&&(w=He(o)?o.checked?"true":"false":o.value),o=w,o!==m?(c.setValue(o),!0):!1}function cn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Yt(o,c){var m=c.checked;return J({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??o._wrapperState.initialChecked})}function Fr(o,c){var m=c.defaultValue==null?"":c.defaultValue,w=c.checked!=null?c.checked:c.defaultChecked;m=Oe(c.value!=null?c.value:m),o._wrapperState={initialChecked:w,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Bs(o,c){c=c.checked,c!=null&&R(o,"checked",c,!1)}function Mn(o,c){Bs(o,c);var m=Oe(c.value),w=c.type;if(m!=null)w==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(w==="submit"||w==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Co(o,c.type,m):c.hasOwnProperty("defaultValue")&&Co(o,c.type,Oe(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Ll(o,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var w=c.type;if(!(w!=="submit"&&w!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,m||c===o.value||(o.value=c),o.defaultValue=c}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function Co(o,c,m){(c!=="number"||cn(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var Br=Array.isArray;function Sn(o,c,m,w){if(o=o.options,c){c={};for(var A=0;A<m.length;A++)c["$"+m[A]]=!0;for(m=0;m<o.length;m++)A=c.hasOwnProperty("$"+o[m].value),o[m].selected!==A&&(o[m].selected=A),A&&w&&(o[m].defaultSelected=!0)}else{for(m=""+Oe(m),c=null,A=0;A<o.length;A++){if(o[A].value===m){o[A].selected=!0,w&&(o[A].defaultSelected=!0);return}c!==null||o[A].disabled||(c=o[A])}c!==null&&(c.selected=!0)}}function rs(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Eo(o,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(t(92));if(Br(m)){if(1<m.length)throw Error(t(93));m=m[0]}c=m}c==null&&(c=""),m=c}o._wrapperState={initialValue:Oe(m)}}function mu(o,c){var m=Oe(c.value),w=Oe(c.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),c.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),w!=null&&(o.defaultValue=""+w)}function $s(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function gu(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function is(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?gu(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var li,Aa=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,w,A){MSApp.execUnsafeLocalFunction(function(){return o(c,m,w,A)})}:o}(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(li=li||document.createElement("div"),li.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=li.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function ss(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jl=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(o){jl.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),os[c]=os[o]})});function Ca(o,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||os.hasOwnProperty(o)&&os[o]?(""+c).trim():c+"px"}function Ea(o,c){o=o.style;for(var m in c)if(c.hasOwnProperty(m)){var w=m.indexOf("--")===0,A=Ca(m,c[m],w);m==="float"&&(m="cssFloat"),w?o.setProperty(m,A):o[m]=A}}var Fl=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ko(o,c){if(c){if(Fl[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function To(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function $l(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ul=null,as=null,ls=null;function vu(o){if(o=zn(o)){if(typeof Ul!="function")throw Error(t(280));var c=o.stateNode;c&&(c=Ju(c),Ul(o.stateNode,o.type,c))}}function yu(o){as?ls?ls.push(o):ls=[o]:as=o}function wu(){if(as){var o=as,c=ls;if(ls=as=null,vu(o),c)for(o=0;o<c.length;o++)vu(c[o])}}function _u(o,c){return o(c)}function Vl(){}var zl=!1;function bu(o,c,m){if(zl)return o(c,m);zl=!0;try{return _u(o,c,m)}finally{zl=!1,(as!==null||ls!==null)&&(Vl(),wu())}}function Po(o,c){var m=o.stateNode;if(m===null)return null;var w=Ju(m);if(w===null)return null;m=w[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(t(231,c,typeof m));return m}var Ro=!1;if(l)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Ro=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Ro=!1}function xu(o,c,m,w,A,k,D,U,G){var de=Array.prototype.slice.call(arguments,3);try{c.apply(m,de)}catch(Ae){this.onError(Ae)}}var ka=!1,Hl=null,Ta=!1,he=null,Q={onError:function(o){ka=!0,Hl=o}};function fe(o,c,m,w,A,k,D,U,G){ka=!1,Hl=null,xu.apply(Q,arguments)}function be(o,c,m,w,A,k,D,U,G){if(fe.apply(this,arguments),ka){if(ka){var de=Hl;ka=!1,Hl=null}else throw Error(t(198));Ta||(Ta=!0,he=de)}}function ye(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function Be(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Et(o){if(ye(o)!==o)throw Error(t(188))}function In(o){var c=o.alternate;if(!c){if(c=ye(o),c===null)throw Error(t(188));return c!==o?null:o}for(var m=o,w=c;;){var A=m.return;if(A===null)break;var k=A.alternate;if(k===null){if(w=A.return,w!==null){m=w;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===m)return Et(A),o;if(k===w)return Et(A),c;k=k.sibling}throw Error(t(188))}if(m.return!==w.return)m=A,w=k;else{for(var D=!1,U=A.child;U;){if(U===m){D=!0,m=A,w=k;break}if(U===w){D=!0,w=A,m=k;break}U=U.sibling}if(!D){for(U=k.child;U;){if(U===m){D=!0,m=k,w=A;break}if(U===w){D=!0,w=k,m=A;break}U=U.sibling}if(!D)throw Error(t(189))}}if(m.alternate!==w)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?o:c}function Pi(o){return o=In(o),o!==null?Io(o):null}function Io(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Io(o);if(c!==null)return c;o=o.sibling}return null}var Su=e.unstable_scheduleCallback,gm=e.unstable_cancelCallback,Au=e.unstable_shouldYield,jy=e.unstable_requestPaint,zt=e.unstable_now,Fy=e.unstable_getCurrentPriorityLevel,Nh=e.unstable_ImmediatePriority,vm=e.unstable_UserBlockingPriority,Wl=e.unstable_NormalPriority,ym=e.unstable_LowPriority,Lh=e.unstable_IdlePriority,Cu=null,Ri=null;function By(o){if(Ri&&typeof Ri.onCommitFiberRoot=="function")try{Ri.onCommitFiberRoot(Cu,o,void 0,(o.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:bm,wm=Math.log,_m=Math.LN2;function bm(o){return o>>>=0,o===0?32:31-(wm(o)/_m|0)|0}var Pa=64,Eu=4194304;function Ra(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Do(o,c){var m=o.pendingLanes;if(m===0)return 0;var w=0,A=o.suspendedLanes,k=o.pingedLanes,D=m&268435455;if(D!==0){var U=D&~A;U!==0?w=Ra(U):(k&=D,k!==0&&(w=Ra(k)))}else D=m&~A,D!==0?w=Ra(D):k!==0&&(w=Ra(k));if(w===0)return 0;if(c!==0&&c!==w&&(c&A)===0&&(A=w&-w,k=c&-c,A>=k||A===16&&(k&4194240)!==0))return c;if((w&4)!==0&&(w|=m&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=w;0<c;)m=31-ci(c),A=1<<m,w|=o[m],c&=~A;return w}function xm(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $y(o,c){for(var m=o.suspendedLanes,w=o.pingedLanes,A=o.expirationTimes,k=o.pendingLanes;0<k;){var D=31-ci(k),U=1<<D,G=A[D];G===-1?((U&m)===0||(U&w)!==0)&&(A[D]=xm(U,c)):G<=c&&(o.expiredLanes|=U),k&=~U}}function ku(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function jh(){var o=Pa;return Pa<<=1,(Pa&4194240)===0&&(Pa=64),o}function ql(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function Gl(o,c,m){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ci(c),o[c]=m}function Sm(o,c){var m=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var w=o.eventTimes;for(o=o.expirationTimes;0<m;){var A=31-ci(m),k=1<<A;c[A]=0,w[A]=-1,o[A]=-1,m&=~k}}function Kl(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var w=31-ci(m),A=1<<w;A&c|o[w]&c&&(o[w]|=c),m&=~A}}var kt=0;function Oo(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Fh,Tu,Am,Bh,$h,Pu=!1,Yl=[],Us=null,Vs=null,zs=null,Ma=new Map,Xl=new Map,Hs=[],Uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cm(o,c){switch(o){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Ma.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(c.pointerId)}}function No(o,c,m,w,A,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:m,eventSystemFlags:w,nativeEvent:k,targetContainers:[A]},c!==null&&(c=zn(c),c!==null&&Tu(c)),o):(o.eventSystemFlags|=w,c=o.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),o)}function Vy(o,c,m,w,A){switch(c){case"focusin":return Us=No(Us,o,c,m,w,A),!0;case"dragenter":return Vs=No(Vs,o,c,m,w,A),!0;case"mouseover":return zs=No(zs,o,c,m,w,A),!0;case"pointerover":var k=A.pointerId;return Ma.set(k,No(Ma.get(k)||null,o,c,m,w,A)),!0;case"gotpointercapture":return k=A.pointerId,Xl.set(k,No(Xl.get(k)||null,o,c,m,w,A)),!0}return!1}function Em(o){var c=Oi(o.target);if(c!==null){var m=ye(c);if(m!==null){if(c=m.tag,c===13){if(c=Be(m),c!==null){o.blockedOn=c,$h(o.priority,function(){Am(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ru(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=Du(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var w=new m.constructor(m.type,m);Bl=w,m.target.dispatchEvent(w),Bl=null}else return c=zn(m),c!==null&&Tu(c),o.blockedOn=m,!1;c.shift()}return!0}function km(o,c,m){Ru(o)&&m.delete(c)}function zy(){Pu=!1,Us!==null&&Ru(Us)&&(Us=null),Vs!==null&&Ru(Vs)&&(Vs=null),zs!==null&&Ru(zs)&&(zs=null),Ma.forEach(km),Xl.forEach(km)}function Mt(o,c){o.blockedOn===c&&(o.blockedOn=null,Pu||(Pu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zy)))}function Pt(o){function c(A){return Mt(A,o)}if(0<Yl.length){Mt(Yl[0],o);for(var m=1;m<Yl.length;m++){var w=Yl[m];w.blockedOn===o&&(w.blockedOn=null)}}for(Us!==null&&Mt(Us,o),Vs!==null&&Mt(Vs,o),zs!==null&&Mt(zs,o),Ma.forEach(c),Xl.forEach(c),m=0;m<Hs.length;m++)w=Hs[m],w.blockedOn===o&&(w.blockedOn=null);for(;0<Hs.length&&(m=Hs[0],m.blockedOn===null);)Em(m),m.blockedOn===null&&Hs.shift()}var Ia=O.ReactCurrentBatchConfig,Mu=!0;function Hy(o,c,m,w){var A=kt,k=Ia.transition;Ia.transition=null;try{kt=1,Uh(o,c,m,w)}finally{kt=A,Ia.transition=k}}function Wy(o,c,m,w){var A=kt,k=Ia.transition;Ia.transition=null;try{kt=4,Uh(o,c,m,w)}finally{kt=A,Ia.transition=k}}function Uh(o,c,m,w){if(Mu){var A=Du(o,c,m,w);if(A===null)sf(o,c,w,Iu,m),Cm(o,w);else if(Vy(A,o,c,m,w))w.stopPropagation();else if(Cm(o,w),c&4&&-1<Uy.indexOf(o)){for(;A!==null;){var k=zn(A);if(k!==null&&Fh(k),k=Du(o,c,m,w),k===null&&sf(o,c,w,Iu,m),k===A)break;A=k}A!==null&&w.stopPropagation()}else sf(o,c,w,null,m)}}var Iu=null;function Du(o,c,m,w){if(Iu=null,o=$l(w),o=Oi(o),o!==null)if(c=ye(o),c===null)o=null;else if(m=c.tag,m===13){if(o=Be(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Iu=o,null}function Tm(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fy()){case Nh:return 1;case vm:return 4;case Wl:case ym:return 16;case Lh:return 536870912;default:return 16}default:return 16}}var Ht=null,Ql=null,Mi=null;function Vh(){if(Mi)return Mi;var o,c=Ql,m=c.length,w,A="value"in Ht?Ht.value:Ht.textContent,k=A.length;for(o=0;o<m&&c[o]===A[o];o++);var D=m-o;for(w=1;w<=D&&c[m-w]===A[k-w];w++);return Mi=A.slice(o,1<w?1-w:void 0)}function Da(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Zn(){return!0}function zh(){return!1}function dr(o){function c(m,w,A,k,D){this._reactName=m,this._targetInst=A,this.type=w,this.nativeEvent=k,this.target=D,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(m=o[U],this[U]=m?m(k):k[U]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Zn:zh,this.isPropagationStopped=zh,this}return J(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),c}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=dr(Lo),Oa=J({},Lo,{view:0,detail:0}),Pm=dr(Oa),er,Hh,Un,Nu=J({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Un&&(Un&&o.type==="mousemove"?(er=o.screenX-Un.screenX,Hh=o.screenY-Un.screenY):Hh=er=0,Un=o),er)},movementY:function(o){return"movementY"in o?o.movementY:Hh}}),Wh=dr(Nu),Ws=J({},Nu,{dataTransfer:0}),Lu=dr(Ws),qh=J({},Oa,{relatedTarget:0}),Lt=dr(qh),qs=J({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gh=dr(qs),qy=J({},Lo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Kh=dr(qy),Gy=J({},Lo,{data:0}),Rm=dr(Gy),Ky={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Na(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=ju[o])?!!c[o]:!1}function Yh(){return Na}var Im=J({},Oa,{key:function(o){if(o.key){var c=Ky[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Da(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Mm[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yh,charCode:function(o){return o.type==="keypress"?Da(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Da(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Dm=dr(Im),Xh=J({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fu=dr(Xh),Om=J({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yh}),Yy=dr(Om),Qh=J({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jh=dr(Qh),Xy=J({},Nu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=dr(Xy),Ar=[9,13,27,32],Jl=l&&"CompositionEvent"in window,cs=null;l&&"documentMode"in document&&(cs=document.documentMode);var Lm=l&&"TextEvent"in window&&!cs,Zh=l&&(!Jl||cs&&8<cs&&11>=cs),jm=" ",Fm=!1;function Bm(o,c){switch(o){case"keyup":return Ar.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var La=!1;function ja(o,c){switch(o){case"compositionend":return $m(c);case"keypress":return c.which!==32?null:(Fm=!0,jm);case"textInput":return o=c.data,o===jm&&Fm?null:o;default:return null}}function Qy(o,c){if(La)return o==="compositionend"||!Jl&&Bm(o,c)?(o=Vh(),Mi=Ql=Ht=null,La=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Zh&&c.locale!=="ko"?null:c.data;default:return null}}var Jy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bu(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Jy[o.type]:c==="textarea"}function ef(o,c,m,w){yu(w),c=Ku(c,"onChange"),0<c.length&&(m=new Ou("onChange","change",null,m,w),o.push({event:m,listeners:c}))}var $r=null,Gs=null;function Zy(o){Gm(o,0)}function $u(o){var c=lt(o);if(Rt(c))return o}function e0(o,c){if(o==="change")return c}var jo=!1;if(l){var Cr;if(l){var Uu="oninput"in document;if(!Uu){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),Uu=typeof Um.oninput=="function"}Cr=Uu}else Cr=!1;jo=Cr&&(!document.documentMode||9<document.documentMode)}function Vm(){$r&&($r.detachEvent("onpropertychange",zm),Gs=$r=null)}function zm(o){if(o.propertyName==="value"&&$u(Gs)){var c=[];ef(c,Gs,o,$l(o)),bu(Zy,c)}}function t0(o,c,m){o==="focusin"?(Vm(),$r=c,Gs=m,$r.attachEvent("onpropertychange",zm)):o==="focusout"&&Vm()}function n0(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $u(Gs)}function Fa(o,c){if(o==="click")return $u(c)}function Z(o,c){if(o==="input"||o==="change")return $u(c)}function ge(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ue=typeof Object.is=="function"?Object.is:ge;function Me(o,c){if(ue(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),w=Object.keys(c);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var A=m[w];if(!d.call(c,A)||!ue(o[A],c[A]))return!1}return!0}function et(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function St(o,c){var m=et(o);o=0;for(var w;m;){if(m.nodeType===3){if(w=o+m.textContent.length,o<=c&&w>=c)return{node:m,offset:c-o};o=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=et(m)}}function un(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?un(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Dt(){for(var o=window,c=cn();c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=cn(o.document)}return c}function Zl(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function r0(o){var c=Dt(),m=o.focusedElem,w=o.selectionRange;if(c!==m&&m&&m.ownerDocument&&un(m.ownerDocument.documentElement,m)){if(w!==null&&Zl(m)){if(c=w.start,o=w.end,o===void 0&&(o=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(o,m.value.length);else if(o=(c=m.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var A=m.textContent.length,k=Math.min(w.start,A);w=w.end===void 0?k:Math.min(w.end,A),!o.extend&&k>w&&(A=w,w=k,k=A),A=St(m,k);var D=St(m,w);A&&D&&(o.rangeCount!==1||o.anchorNode!==A.node||o.anchorOffset!==A.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(c=c.createRange(),c.setStart(A.node,A.offset),o.removeAllRanges(),k>w?(o.addRange(c),o.extend(D.node,D.offset)):(c.setEnd(D.node,D.offset),o.addRange(c)))}}for(c=[],o=m;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)o=c[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Ur=l&&"documentMode"in document&&11>=document.documentMode,us=null,tf=null,Ii=null,Ba=!1;function ec(o,c,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ba||us==null||us!==cn(w)||(w=us,"selectionStart"in w&&Zl(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ii&&Me(Ii,w)||(Ii=w,w=Ku(tf,"onSelect"),0<w.length&&(c=new Ou("onSelect","select",null,c,m),o.push({event:c,listeners:w}),c.target=us)))}function At(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var $a={animationend:At("Animation","AnimationEnd"),animationiteration:At("Animation","AnimationIteration"),animationstart:At("Animation","AnimationStart"),transitionend:At("Transition","TransitionEnd")},Vu={},tc={};l&&(tc=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function zu(o){if(Vu[o])return Vu[o];if(!$a[o])return o;var c=$a[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in tc)return Vu[o]=c[m];return o}var Hm=zu("animationend"),Wm=zu("animationiteration"),nc=zu("animationstart"),ds=zu("transitionend"),rc=new Map,nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(o,c){rc.set(o,c),s(c,[o])}for(var Hu=0;Hu<nf.length;Hu++){var Wu=nf[Hu],qu=Wu.toLowerCase(),qm=Wu[0].toUpperCase()+Wu.slice(1);ui(qu,"on"+qm)}ui(Hm,"onAnimationEnd"),ui(Wm,"onAnimationIteration"),ui(nc,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(ds,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fo=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function ic(o,c,m){var w=o.type||"unknown-event";o.currentTarget=m,be(w,c,void 0,o),o.currentTarget=null}function Gm(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var w=o[m],A=w.event;w=w.listeners;e:{var k=void 0;if(c)for(var D=w.length-1;0<=D;D--){var U=w[D],G=U.instance,de=U.currentTarget;if(U=U.listener,G!==k&&A.isPropagationStopped())break e;ic(A,U,de),k=G}else for(D=0;D<w.length;D++){if(U=w[D],G=U.instance,de=U.currentTarget,U=U.listener,G!==k&&A.isPropagationStopped())break e;ic(A,U,de),k=G}}}if(Ta)throw o=he,Ta=!1,he=null,o}function Ft(o,c){var m=c[Qu];m===void 0&&(m=c[Qu]=new Set);var w=o+"__bubble";m.has(w)||(Gu(c,o,2,!1),m.add(w))}function rf(o,c,m){var w=0;c&&(w|=4),Gu(m,o,w,c)}var Bo="_reactListening"+Math.random().toString(36).slice(2);function Ks(o){if(!o[Bo]){o[Bo]=!0,r.forEach(function(m){m!=="selectionchange"&&(Fo.has(m)||rf(m,!1,o),rf(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Bo]||(c[Bo]=!0,rf("selectionchange",!1,c))}}function Gu(o,c,m,w){switch(Tm(c)){case 1:var A=Hy;break;case 4:A=Wy;break;default:A=Uh}m=A.bind(null,c,m,o),A=void 0,!Ro||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),w?A!==void 0?o.addEventListener(c,m,{capture:!0,passive:A}):o.addEventListener(c,m,!0):A!==void 0?o.addEventListener(c,m,{passive:A}):o.addEventListener(c,m,!1)}function sf(o,c,m,w,A){var k=w;if((c&1)===0&&(c&2)===0&&w!==null)e:for(;;){if(w===null)return;var D=w.tag;if(D===3||D===4){var U=w.stateNode.containerInfo;if(U===A||U.nodeType===8&&U.parentNode===A)break;if(D===4)for(D=w.return;D!==null;){var G=D.tag;if((G===3||G===4)&&(G=D.stateNode.containerInfo,G===A||G.nodeType===8&&G.parentNode===A))return;D=D.return}for(;U!==null;){if(D=Oi(U),D===null)return;if(G=D.tag,G===5||G===6){w=k=D;continue e}U=U.parentNode}}w=w.return}bu(function(){var de=k,Ae=$l(m),Ee=[];e:{var xe=rc.get(o);if(xe!==void 0){var Ie=Ou,Le=o;switch(o){case"keypress":if(Da(m)===0)break e;case"keydown":case"keyup":Ie=Dm;break;case"focusin":Le="focus",Ie=Lt;break;case"focusout":Le="blur",Ie=Lt;break;case"beforeblur":case"afterblur":Ie=Lt;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Yy;break;case Hm:case Wm:case nc:Ie=Gh;break;case ds:Ie=Jh;break;case"scroll":Ie=Pm;break;case"wheel":Ie=Nm;break;case"copy":case"cut":case"paste":Ie=Kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Fu}var je=(c&4)!==0,sn=!je&&o==="scroll",re=je?xe!==null?xe+"Capture":null:xe;je=[];for(var X=de,oe;X!==null;){oe=X;var ke=oe.stateNode;if(oe.tag===5&&ke!==null&&(oe=ke,re!==null&&(ke=Po(X,re),ke!=null&&je.push(Ua(X,ke,oe)))),sn)break;X=X.return}0<je.length&&(xe=new Ie(xe,Le,null,m,Ae),Ee.push({event:xe,listeners:je}))}}if((c&7)===0){e:{if(xe=o==="mouseover"||o==="pointerover",Ie=o==="mouseout"||o==="pointerout",xe&&m!==Bl&&(Le=m.relatedTarget||m.fromElement)&&(Oi(Le)||Le[Er]))break e;if((Ie||xe)&&(xe=Ae.window===Ae?Ae:(xe=Ae.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ie?(Le=m.relatedTarget||m.toElement,Ie=de,Le=Le?Oi(Le):null,Le!==null&&(sn=ye(Le),Le!==sn||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Ie=null,Le=de),Ie!==Le)){if(je=Wh,ke="onMouseLeave",re="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(je=Fu,ke="onPointerLeave",re="onPointerEnter",X="pointer"),sn=Ie==null?xe:lt(Ie),oe=Le==null?xe:lt(Le),xe=new je(ke,X+"leave",Ie,m,Ae),xe.target=sn,xe.relatedTarget=oe,ke=null,Oi(Ae)===de&&(je=new je(re,X+"enter",Le,m,Ae),je.target=oe,je.relatedTarget=sn,ke=je),sn=ke,Ie&&Le)t:{for(je=Ie,re=Le,X=0,oe=je;oe;oe=Va(oe))X++;for(oe=0,ke=re;ke;ke=Va(ke))oe++;for(;0<X-oe;)je=Va(je),X--;for(;0<oe-X;)re=Va(re),oe--;for(;X--;){if(je===re||re!==null&&je===re.alternate)break t;je=Va(je),re=Va(re)}je=null}else je=null;Ie!==null&&dn(Ee,xe,Ie,je,!1),Le!==null&&sn!==null&&dn(Ee,sn,Le,je,!0)}}e:{if(xe=de?lt(de):window,Ie=xe.nodeName&&xe.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&xe.type==="file")var $e=e0;else if(Bu(xe))if(jo)$e=Z;else{$e=n0;var Ge=t0}else(Ie=xe.nodeName)&&Ie.toLowerCase()==="input"&&(xe.type==="checkbox"||xe.type==="radio")&&($e=Fa);if($e&&($e=$e(o,de))){ef(Ee,$e,m,Ae);break e}Ge&&Ge(o,xe,de),o==="focusout"&&(Ge=xe._wrapperState)&&Ge.controlled&&xe.type==="number"&&Co(xe,"number",xe.value)}switch(Ge=de?lt(de):window,o){case"focusin":(Bu(Ge)||Ge.contentEditable==="true")&&(us=Ge,tf=de,Ii=null);break;case"focusout":Ii=tf=us=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,ec(Ee,m,Ae);break;case"selectionchange":if(Ur)break;case"keydown":case"keyup":ec(Ee,m,Ae)}var We;if(Jl)e:{switch(o){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else La?Bm(o,m)&&(Xe="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Xe="onCompositionStart");Xe&&(Zh&&m.locale!=="ko"&&(La||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&La&&(We=Vh()):(Ht=Ae,Ql="value"in Ht?Ht.value:Ht.textContent,La=!0)),Ge=Ku(de,Xe),0<Ge.length&&(Xe=new Rm(Xe,o,null,m,Ae),Ee.push({event:Xe,listeners:Ge}),We?Xe.data=We:(We=$m(m),We!==null&&(Xe.data=We)))),(We=Lm?ja(o,m):Qy(o,m))&&(de=Ku(de,"onBeforeInput"),0<de.length&&(Ae=new Rm("onBeforeInput","beforeinput",null,m,Ae),Ee.push({event:Ae,listeners:de}),Ae.data=We))}Gm(Ee,c)})}function Ua(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Ku(o,c){for(var m=c+"Capture",w=[];o!==null;){var A=o,k=A.stateNode;A.tag===5&&k!==null&&(A=k,k=Po(o,m),k!=null&&w.unshift(Ua(o,k,A)),k=Po(o,c),k!=null&&w.push(Ua(o,k,A))),o=o.return}return w}function Va(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function dn(o,c,m,w,A){for(var k=c._reactName,D=[];m!==null&&m!==w;){var U=m,G=U.alternate,de=U.stateNode;if(G!==null&&G===w)break;U.tag===5&&de!==null&&(U=de,A?(G=Po(m,k),G!=null&&D.unshift(Ua(m,G,U))):A||(G=Po(m,k),G!=null&&D.push(Ua(m,G,U)))),m=m.return}D.length!==0&&o.push({event:c,listeners:D})}var Vn=/\r\n?/g,i0=/\u0000|\uFFFD/g;function Km(o){return(typeof o=="string"?o:""+o).replace(Vn,`
`).replace(i0,"")}function sc(o,c,m){if(c=Km(c),Km(o)!==c&&m)throw Error(t(425))}function Yu(){}var oc=null,$o=null;function ac(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ys=typeof setTimeout=="function"?setTimeout:void 0,lc=typeof clearTimeout=="function"?clearTimeout:void 0,za=typeof Promise=="function"?Promise:void 0,Xu=typeof queueMicrotask=="function"?queueMicrotask:typeof za<"u"?function(o){return za.resolve(null).then(o).catch(Ha)}:Ys;function Ha(o){setTimeout(function(){throw o})}function of(o,c){var m=c,w=0;do{var A=m.nextSibling;if(o.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(w===0){o.removeChild(A),Pt(c);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=A}while(m);Pt(c)}function Xs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Ym(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Di="__reactFiber$"+Wa,Qs="__reactProps$"+Wa,Er="__reactContainer$"+Wa,Qu="__reactEvents$"+Wa,N="__reactListeners$"+Wa,qa="__reactHandles$"+Wa;function Oi(o){var c=o[Di];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Er]||m[Di]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=Ym(o);o!==null;){if(m=o[Di])return m;o=Ym(o)}return c}o=m,m=o.parentNode}return null}function zn(o){return o=o[Di]||o[Er],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function lt(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Ju(o){return o[Qs]||null}var af=[],Ga=-1;function hr(o){return{current:o}}function Bt(o){0>Ga||(o.current=af[Ga],af[Ga]=null,Ga--)}function jt(o,c){Ga++,af[Ga]=o.current,o.current=c}var Js={},Hn=hr(Js),fr=hr(!1),tr=Js;function Ka(o,c){var m=o.type.contextTypes;if(!m)return Js;var w=o.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===c)return w.__reactInternalMemoizedMaskedChildContext;var A={},k;for(k in m)A[k]=c[k];return w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=A),A}function pr(o){return o=o.childContextTypes,o!=null}function Zu(){Bt(fr),Bt(Hn)}function Xm(o,c,m){if(Hn.current!==Js)throw Error(t(168));jt(Hn,c),jt(fr,m)}function Qm(o,c,m){var w=o.stateNode;if(c=c.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var A in w)if(!(A in c))throw Error(t(108,ve(o)||"Unknown",A));return J({},m,w)}function Vr(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Js,tr=Hn.current,jt(Hn,o),jt(fr,fr.current),!0}function Jm(o,c,m){var w=o.stateNode;if(!w)throw Error(t(169));m?(o=Qm(o,c,tr),w.__reactInternalMemoizedMergedChildContext=o,Bt(fr),Bt(Hn),jt(Hn,o)):Bt(fr),jt(fr,m)}var fs=null,ed=!1,lf=!1;function Zm(o){fs===null?fs=[o]:fs.push(o)}function Uo(o){ed=!0,Zm(o)}function Zs(){if(!lf&&fs!==null){lf=!0;var o=0,c=kt;try{var m=fs;for(kt=1;o<m.length;o++){var w=m[o];do w=w(!0);while(w!==null)}fs=null,ed=!1}catch(A){throw fs!==null&&(fs=fs.slice(o+1)),Su(Nh,Zs),A}finally{kt=c,lf=!1}}return null}var Ya=[],Wn=0,td=null,nd=0,zr=[],Hr=0,Vo=null,Ni=1,Li="";function zo(o,c){Ya[Wn++]=nd,Ya[Wn++]=td,td=o,nd=c}function eg(o,c,m){zr[Hr++]=Ni,zr[Hr++]=Li,zr[Hr++]=Vo,Vo=o;var w=Ni;o=Li;var A=32-ci(w)-1;w&=~(1<<A),m+=1;var k=32-ci(c)+A;if(30<k){var D=A-A%5;k=(w&(1<<D)-1).toString(32),w>>=D,A-=D,Ni=1<<32-ci(c)+A|m<<A|w,Li=k+o}else Ni=1<<k|m<<A|w,Li=o}function cc(o){o.return!==null&&(zo(o,1),eg(o,1,0))}function Ho(o){for(;o===td;)td=Ya[--Wn],Ya[Wn]=null,nd=Ya[--Wn],Ya[Wn]=null;for(;o===Vo;)Vo=zr[--Hr],zr[Hr]=null,Li=zr[--Hr],zr[Hr]=null,Ni=zr[--Hr],zr[Hr]=null}var qn=null,kr=null,$t=!1,di=null;function ji(o,c){var m=Qr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=o,c=o.deletions,c===null?(o.deletions=[m],o.flags|=16):c.push(m)}function rd(o,c){switch(o.tag){case 5:var m=o.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,qn=o,kr=Xs(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,qn=o,kr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Vo!==null?{id:Ni,overflow:Li}:null,o.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=Qr(18,null,null,0),m.stateNode=c,m.return=o,o.child=m,qn=o,kr=null,!0):!1;default:return!1}}function ps(o){return(o.mode&1)!==0&&(o.flags&128)===0}function mr(o){if($t){var c=kr;if(c){var m=c;if(!rd(o,c)){if(ps(o))throw Error(t(418));c=Xs(m.nextSibling);var w=qn;c&&rd(o,c)?ji(w,m):(o.flags=o.flags&-4097|2,$t=!1,qn=o)}}else{if(ps(o))throw Error(t(418));o.flags=o.flags&-4097|2,$t=!1,qn=o}}}function tg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;qn=o}function uc(o){if(o!==qn)return!1;if(!$t)return tg(o),$t=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!ac(o.type,o.memoizedProps)),c&&(c=kr)){if(ps(o))throw cf(),Error(t(418));for(;c;)ji(o,c),c=Xs(c.nextSibling)}if(tg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(c===0){kr=Xs(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}o=o.nextSibling}kr=null}}else kr=qn?Xs(o.stateNode.nextSibling):null;return!0}function cf(){for(var o=kr;o;)o=Xs(o.nextSibling)}function Fi(){kr=qn=null,$t=!1}function Bi(o){di===null?di=[o]:di.push(o)}var ng=O.ReactCurrentBatchConfig;function dc(o,c,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var w=m.stateNode}if(!w)throw Error(t(147,o));var A=w,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(D){var U=A.refs;D===null?delete U[k]:U[k]=D},c._stringRef=k,c)}if(typeof o!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,o))}return o}function Wo(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function rg(o){var c=o._init;return c(o._payload)}function uf(o){function c(re,X){if(o){var oe=re.deletions;oe===null?(re.deletions=[X],re.flags|=16):oe.push(X)}}function m(re,X){if(!o)return null;for(;X!==null;)c(re,X),X=X.sibling;return null}function w(re,X){for(re=new Map;X!==null;)X.key!==null?re.set(X.key,X):re.set(X.index,X),X=X.sibling;return re}function A(re,X){return re=yi(re,X),re.index=0,re.sibling=null,re}function k(re,X,oe){return re.index=oe,o?(oe=re.alternate,oe!==null?(oe=oe.index,oe<X?(re.flags|=2,X):oe):(re.flags|=2,X)):(re.flags|=1048576,X)}function D(re){return o&&re.alternate===null&&(re.flags|=2),re}function U(re,X,oe,ke){return X===null||X.tag!==6?(X=Xf(oe,re.mode,ke),X.return=re,X):(X=A(X,oe),X.return=re,X)}function G(re,X,oe,ke){var $e=oe.type;return $e===$?Ae(re,X,oe.props.children,ke,oe.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===z&&rg($e)===X.type)?(ke=A(X,oe.props),ke.ref=dc(re,X,oe),ke.return=re,ke):(ke=Fd(oe.type,oe.key,oe.props,null,re.mode,ke),ke.ref=dc(re,X,oe),ke.return=re,ke)}function de(re,X,oe,ke){return X===null||X.tag!==4||X.stateNode.containerInfo!==oe.containerInfo||X.stateNode.implementation!==oe.implementation?(X=Qf(oe,re.mode,ke),X.return=re,X):(X=A(X,oe.children||[]),X.return=re,X)}function Ae(re,X,oe,ke,$e){return X===null||X.tag!==7?(X=na(oe,re.mode,ke,$e),X.return=re,X):(X=A(X,oe),X.return=re,X)}function Ee(re,X,oe){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Xf(""+X,re.mode,oe),X.return=re,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case L:return oe=Fd(X.type,X.key,X.props,null,re.mode,oe),oe.ref=dc(re,null,X),oe.return=re,oe;case B:return X=Qf(X,re.mode,oe),X.return=re,X;case z:var ke=X._init;return Ee(re,ke(X._payload),oe)}if(Br(X)||ne(X))return X=na(X,re.mode,oe,null),X.return=re,X;Wo(re,X)}return null}function xe(re,X,oe,ke){var $e=X!==null?X.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $e!==null?null:U(re,X,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case L:return oe.key===$e?G(re,X,oe,ke):null;case B:return oe.key===$e?de(re,X,oe,ke):null;case z:return $e=oe._init,xe(re,X,$e(oe._payload),ke)}if(Br(oe)||ne(oe))return $e!==null?null:Ae(re,X,oe,ke,null);Wo(re,oe)}return null}function Ie(re,X,oe,ke,$e){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return re=re.get(oe)||null,U(X,re,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case L:return re=re.get(ke.key===null?oe:ke.key)||null,G(X,re,ke,$e);case B:return re=re.get(ke.key===null?oe:ke.key)||null,de(X,re,ke,$e);case z:var Ge=ke._init;return Ie(re,X,oe,Ge(ke._payload),$e)}if(Br(ke)||ne(ke))return re=re.get(oe)||null,Ae(X,re,ke,$e,null);Wo(X,ke)}return null}function Le(re,X,oe,ke){for(var $e=null,Ge=null,We=X,Xe=X=0,En=null;We!==null&&Xe<oe.length;Xe++){We.index>Xe?(En=We,We=null):En=We.sibling;var Ct=xe(re,We,oe[Xe],ke);if(Ct===null){We===null&&(We=En);break}o&&We&&Ct.alternate===null&&c(re,We),X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct,We=En}if(Xe===oe.length)return m(re,We),$t&&zo(re,Xe),$e;if(We===null){for(;Xe<oe.length;Xe++)We=Ee(re,oe[Xe],ke),We!==null&&(X=k(We,X,Xe),Ge===null?$e=We:Ge.sibling=We,Ge=We);return $t&&zo(re,Xe),$e}for(We=w(re,We);Xe<oe.length;Xe++)En=Ie(We,re,Xe,oe[Xe],ke),En!==null&&(o&&En.alternate!==null&&We.delete(En.key===null?Xe:En.key),X=k(En,X,Xe),Ge===null?$e=En:Ge.sibling=En,Ge=En);return o&&We.forEach(function(ho){return c(re,ho)}),$t&&zo(re,Xe),$e}function je(re,X,oe,ke){var $e=ne(oe);if(typeof $e!="function")throw Error(t(150));if(oe=$e.call(oe),oe==null)throw Error(t(151));for(var Ge=$e=null,We=X,Xe=X=0,En=null,Ct=oe.next();We!==null&&!Ct.done;Xe++,Ct=oe.next()){We.index>Xe?(En=We,We=null):En=We.sibling;var ho=xe(re,We,Ct.value,ke);if(ho===null){We===null&&(We=En);break}o&&We&&ho.alternate===null&&c(re,We),X=k(ho,X,Xe),Ge===null?$e=ho:Ge.sibling=ho,Ge=ho,We=En}if(Ct.done)return m(re,We),$t&&zo(re,Xe),$e;if(We===null){for(;!Ct.done;Xe++,Ct=oe.next())Ct=Ee(re,Ct.value,ke),Ct!==null&&(X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return $t&&zo(re,Xe),$e}for(We=w(re,We);!Ct.done;Xe++,Ct=oe.next())Ct=Ie(We,re,Xe,Ct.value,ke),Ct!==null&&(o&&Ct.alternate!==null&&We.delete(Ct.key===null?Xe:Ct.key),X=k(Ct,X,Xe),Ge===null?$e=Ct:Ge.sibling=Ct,Ge=Ct);return o&&We.forEach(function(C0){return c(re,C0)}),$t&&zo(re,Xe),$e}function sn(re,X,oe,ke){if(typeof oe=="object"&&oe!==null&&oe.type===$&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case L:e:{for(var $e=oe.key,Ge=X;Ge!==null;){if(Ge.key===$e){if($e=oe.type,$e===$){if(Ge.tag===7){m(re,Ge.sibling),X=A(Ge,oe.props.children),X.return=re,re=X;break e}}else if(Ge.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===z&&rg($e)===Ge.type){m(re,Ge.sibling),X=A(Ge,oe.props),X.ref=dc(re,Ge,oe),X.return=re,re=X;break e}m(re,Ge);break}else c(re,Ge);Ge=Ge.sibling}oe.type===$?(X=na(oe.props.children,re.mode,ke,oe.key),X.return=re,re=X):(ke=Fd(oe.type,oe.key,oe.props,null,re.mode,ke),ke.ref=dc(re,X,oe),ke.return=re,re=ke)}return D(re);case B:e:{for(Ge=oe.key;X!==null;){if(X.key===Ge)if(X.tag===4&&X.stateNode.containerInfo===oe.containerInfo&&X.stateNode.implementation===oe.implementation){m(re,X.sibling),X=A(X,oe.children||[]),X.return=re,re=X;break e}else{m(re,X);break}else c(re,X);X=X.sibling}X=Qf(oe,re.mode,ke),X.return=re,re=X}return D(re);case z:return Ge=oe._init,sn(re,X,Ge(oe._payload),ke)}if(Br(oe))return Le(re,X,oe,ke);if(ne(oe))return je(re,X,oe,ke);Wo(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,X!==null&&X.tag===6?(m(re,X.sibling),X=A(X,oe),X.return=re,re=X):(m(re,X),X=Xf(oe,re.mode,ke),X.return=re,re=X),D(re)):m(re,X)}return sn}var en=uf(!0),id=uf(!1),hc=hr(null),Tr=null,eo=null,Xa=null;function ms(){Xa=eo=Tr=null}function sd(o){var c=hc.current;Bt(hc),o._currentValue=c}function Dn(o,c,m){for(;o!==null;){var w=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,w!==null&&(w.childLanes|=c)):w!==null&&(w.childLanes&c)!==c&&(w.childLanes|=c),o===m)break;o=o.return}}function to(o,c){Tr=o,Xa=eo=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(rr=!0),o.firstContext=null)}function Wr(o){var c=o._currentValue;if(Xa!==o)if(o={context:o,memoizedValue:c,next:null},eo===null){if(Tr===null)throw Error(t(308));eo=o,Tr.dependencies={lanes:0,firstContext:o}}else eo=eo.next=o;return c}var qo=null;function df(o){qo===null?qo=[o]:qo.push(o)}function od(o,c,m,w){var A=c.interleaved;return A===null?(m.next=m,df(c)):(m.next=A.next,A.next=m),c.interleaved=m,gs(o,w)}function gs(o,c){o.lanes|=c;var m=o.alternate;for(m!==null&&(m.lanes|=c),m=o,o=o.return;o!==null;)o.childLanes|=c,m=o.alternate,m!==null&&(m.childLanes|=c),m=o,o=o.return;return m.tag===3?m.stateNode:null}var qr=!1;function ad(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function vs(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Gr(o,c,m){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(wt&2)!==0){var A=w.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),w.pending=c,gs(o,m)}return A=w.interleaved,A===null?(c.next=c,df(w)):(c.next=A.next,A.next=c),w.interleaved=c,gs(o,m)}function ld(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Kl(o,m)}}function sg(o,c){var m=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var A=null,k=null;if(m=m.firstBaseUpdate,m!==null){do{var D={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};k===null?A=k=D:k=k.next=D,m=m.next}while(m!==null);k===null?A=k=c:k=k.next=c}else A=k=c;m={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:w.shared,effects:w.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function Qa(o,c,m,w){var A=o.updateQueue;qr=!1;var k=A.firstBaseUpdate,D=A.lastBaseUpdate,U=A.shared.pending;if(U!==null){A.shared.pending=null;var G=U,de=G.next;G.next=null,D===null?k=de:D.next=de,D=G;var Ae=o.alternate;Ae!==null&&(Ae=Ae.updateQueue,U=Ae.lastBaseUpdate,U!==D&&(U===null?Ae.firstBaseUpdate=de:U.next=de,Ae.lastBaseUpdate=G))}if(k!==null){var Ee=A.baseState;D=0,Ae=de=G=null,U=k;do{var xe=U.lane,Ie=U.eventTime;if((w&xe)===xe){Ae!==null&&(Ae=Ae.next={eventTime:Ie,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Le=o,je=U;switch(xe=c,Ie=m,je.tag){case 1:if(Le=je.payload,typeof Le=="function"){Ee=Le.call(Ie,Ee,xe);break e}Ee=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=je.payload,xe=typeof Le=="function"?Le.call(Ie,Ee,xe):Le,xe==null)break e;Ee=J({},Ee,xe);break e;case 2:qr=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,xe=A.effects,xe===null?A.effects=[U]:xe.push(U))}else Ie={eventTime:Ie,lane:xe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ae===null?(de=Ae=Ie,G=Ee):Ae=Ae.next=Ie,D|=xe;if(U=U.next,U===null){if(U=A.shared.pending,U===null)break;xe=U,U=xe.next,xe.next=null,A.lastBaseUpdate=xe,A.shared.pending=null}}while(!0);if(Ae===null&&(G=Ee),A.baseState=G,A.firstBaseUpdate=de,A.lastBaseUpdate=Ae,c=A.shared.interleaved,c!==null){A=c;do D|=A.lane,A=A.next;while(A!==c)}else k===null&&(A.shared.lanes=0);oo|=D,o.lanes=D,o.memoizedState=Ee}}function hf(o,c,m){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var w=o[c],A=w.callback;if(A!==null){if(w.callback=null,w=m,typeof A!="function")throw Error(t(191,A));A.call(w)}}}var fc={},$i=hr(fc),pc=hr(fc),Ja=hr(fc);function ys(o){if(o===fc)throw Error(t(174));return o}function ff(o,c){switch(jt(Ja,c),jt(pc,o),jt($i,fc),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:is(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=is(c,o)}Bt($i),jt($i,c)}function no(){Bt($i),Bt(pc),Bt(Ja)}function pf(o){ys(Ja.current);var c=ys($i.current),m=is(c,o.type);c!==m&&(jt(pc,o),jt($i,m))}function cd(o){pc.current===o&&(Bt($i),Bt(pc))}var Wt=hr(0);function Go(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var mf=[];function ud(){for(var o=0;o<mf.length;o++)mf[o]._workInProgressVersionPrimary=null;mf.length=0}var mc=O.ReactCurrentDispatcher,gf=O.ReactCurrentBatchConfig,ro=0,Xt=null,rn=null,mn=null,Za=!1,gc=!1,Ko=0,dt=0;function Gn(){throw Error(t(321))}function vf(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!ue(o[m],c[m]))return!1;return!0}function Yo(o,c,m,w,A,k){if(ro=k,Xt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,mc.current=o===null||o.memoizedState===null?o0:vd,o=m(w,A),gc){k=0;do{if(gc=!1,Ko=0,25<=k)throw Error(t(301));k+=1,mn=rn=null,c.updateQueue=null,mc.current=rl,o=m(w,A)}while(gc)}if(mc.current=gd,c=rn!==null&&rn.next!==null,ro=0,mn=rn=Xt=null,Za=!1,c)throw Error(t(300));return o}function dd(){var o=Ko!==0;return Ko=0,o}function Ui(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Xt.memoizedState=mn=o:mn=mn.next=o,mn}function Kr(){if(rn===null){var o=Xt.alternate;o=o!==null?o.memoizedState:null}else o=rn.next;var c=mn===null?Xt.memoizedState:mn.next;if(c!==null)mn=c,rn=o;else{if(o===null)throw Error(t(310));rn=o,o={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},mn===null?Xt.memoizedState=mn=o:mn=mn.next=o}return mn}function Kn(o,c){return typeof c=="function"?c(o):c}function yf(o){var c=Kr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=rn,A=w.baseQueue,k=m.pending;if(k!==null){if(A!==null){var D=A.next;A.next=k.next,k.next=D}w.baseQueue=A=k,m.pending=null}if(A!==null){k=A.next,w=w.baseState;var U=D=null,G=null,de=k;do{var Ae=de.lane;if((ro&Ae)===Ae)G!==null&&(G=G.next={lane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),w=de.hasEagerState?de.eagerState:o(w,de.action);else{var Ee={lane:Ae,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null};G===null?(U=G=Ee,D=w):G=G.next=Ee,Xt.lanes|=Ae,oo|=Ae}de=de.next}while(de!==null&&de!==k);G===null?D=w:G.next=U,ue(w,c.memoizedState)||(rr=!0),c.memoizedState=w,c.baseState=D,c.baseQueue=G,m.lastRenderedState=w}if(o=m.interleaved,o!==null){A=o;do k=A.lane,Xt.lanes|=k,oo|=k,A=A.next;while(A!==o)}else A===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function el(o){var c=Kr(),m=c.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var w=m.dispatch,A=m.pending,k=c.memoizedState;if(A!==null){m.pending=null;var D=A=A.next;do k=o(k,D.action),D=D.next;while(D!==A);ue(k,c.memoizedState)||(rr=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),m.lastRenderedState=k}return[k,w]}function hd(){}function wf(o,c){var m=Xt,w=Kr(),A=c(),k=!ue(w.memoizedState,A);if(k&&(w.memoizedState=A,rr=!0),w=w.queue,Vi(ws.bind(null,m,w,o),[o]),w.getSnapshot!==c||k||mn!==null&&mn.memoizedState.tag&1){if(m.flags|=2048,tl(9,gr.bind(null,m,w,A,c),void 0,null),Cn===null)throw Error(t(349));(ro&30)!==0||_f(m,c,A)}return A}function _f(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function gr(o,c,m,w){c.value=m,c.getSnapshot=w,fd(c)&&bf(o)}function ws(o,c,m){return m(function(){fd(c)&&bf(o)})}function fd(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!ue(o,m)}catch{return!0}}function bf(o){var c=gs(o,1);c!==null&&vi(c,o,1,-1)}function vc(o){var c=Ui();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:o},c.queue=o,o=o.dispatch=dg.bind(null,Xt,o),[c.memoizedState,o]}function tl(o,c,m,w){return o={tag:o,create:c,destroy:m,deps:w,next:null},c=Xt.updateQueue,c===null?(c={lastEffect:null,stores:null},Xt.updateQueue=c,c.lastEffect=o.next=o):(m=c.lastEffect,m===null?c.lastEffect=o.next=o:(w=m.next,m.next=o,o.next=w,c.lastEffect=o)),o}function pd(){return Kr().memoizedState}function yc(o,c,m,w){var A=Ui();Xt.flags|=o,A.memoizedState=tl(1|c,m,void 0,w===void 0?null:w)}function nl(o,c,m,w){var A=Kr();w=w===void 0?null:w;var k=void 0;if(rn!==null){var D=rn.memoizedState;if(k=D.destroy,w!==null&&vf(w,D.deps)){A.memoizedState=tl(c,m,k,w);return}}Xt.flags|=o,A.memoizedState=tl(1|c,m,k,w)}function md(o,c){return yc(8390656,8,o,c)}function Vi(o,c){return nl(2048,8,o,c)}function og(o,c){return nl(4,2,o,c)}function _s(o,c){return nl(4,4,o,c)}function xf(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Sf(o,c,m){return m=m!=null?m.concat([o]):null,nl(4,4,xf.bind(null,c,o),m)}function wc(){}function ag(o,c){var m=Kr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&vf(c,w[1])?w[0]:(m.memoizedState=[o,c],o)}function lg(o,c){var m=Kr();c=c===void 0?null:c;var w=m.memoizedState;return w!==null&&c!==null&&vf(c,w[1])?w[0]:(o=o(),m.memoizedState=[o,c],o)}function cg(o,c,m){return(ro&21)===0?(o.baseState&&(o.baseState=!1,rr=!0),o.memoizedState=m):(ue(m,c)||(m=jh(),Xt.lanes|=m,oo|=m,o.baseState=!0),c)}function ug(o,c){var m=kt;kt=m!==0&&4>m?m:4,o(!0);var w=gf.transition;gf.transition={};try{o(!1),c()}finally{kt=m,gf.transition=w}}function Af(){return Kr().memoizedState}function s0(o,c,m){var w=co(o);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},Cf(o))nr(c,m);else if(m=od(o,c,m,w),m!==null){var A=or();vi(m,o,w,A),hi(m,c,w)}}function dg(o,c,m){var w=co(o),A={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(Cf(o))nr(c,A);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var D=c.lastRenderedState,U=k(D,m);if(A.hasEagerState=!0,A.eagerState=U,ue(U,D)){var G=c.interleaved;G===null?(A.next=A,df(c)):(A.next=G.next,G.next=A),c.interleaved=A;return}}catch{}finally{}m=od(o,c,A,w),m!==null&&(A=or(),vi(m,o,w,A),hi(m,c,w))}}function Cf(o){var c=o.alternate;return o===Xt||c!==null&&c===Xt}function nr(o,c){gc=Za=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function hi(o,c,m){if((m&4194240)!==0){var w=c.lanes;w&=o.pendingLanes,m|=w,c.lanes=m,Kl(o,m)}}var gd={readContext:Wr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},o0={readContext:Wr,useCallback:function(o,c){return Ui().memoizedState=[o,c===void 0?null:c],o},useContext:Wr,useEffect:md,useImperativeHandle:function(o,c,m){return m=m!=null?m.concat([o]):null,yc(4194308,4,xf.bind(null,c,o),m)},useLayoutEffect:function(o,c){return yc(4194308,4,o,c)},useInsertionEffect:function(o,c){return yc(4,2,o,c)},useMemo:function(o,c){var m=Ui();return c=c===void 0?null:c,o=o(),m.memoizedState=[o,c],o},useReducer:function(o,c,m){var w=Ui();return c=m!==void 0?m(c):c,w.memoizedState=w.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},w.queue=o,o=o.dispatch=s0.bind(null,Xt,o),[w.memoizedState,o]},useRef:function(o){var c=Ui();return o={current:o},c.memoizedState=o},useState:vc,useDebugValue:wc,useDeferredValue:function(o){return Ui().memoizedState=o},useTransition:function(){var o=vc(!1),c=o[0];return o=ug.bind(null,o[1]),Ui().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,m){var w=Xt,A=Ui();if($t){if(m===void 0)throw Error(t(407));m=m()}else{if(m=c(),Cn===null)throw Error(t(349));(ro&30)!==0||_f(w,c,m)}A.memoizedState=m;var k={value:m,getSnapshot:c};return A.queue=k,md(ws.bind(null,w,k,o),[o]),w.flags|=2048,tl(9,gr.bind(null,w,k,m,c),void 0,null),m},useId:function(){var o=Ui(),c=Cn.identifierPrefix;if($t){var m=Li,w=Ni;m=(w&~(1<<32-ci(w)-1)).toString(32)+m,c=":"+c+"R"+m,m=Ko++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=dt++,c=":"+c+"r"+m.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},vd={readContext:Wr,useCallback:ag,useContext:Wr,useEffect:Vi,useImperativeHandle:Sf,useInsertionEffect:og,useLayoutEffect:_s,useMemo:lg,useReducer:yf,useRef:pd,useState:function(){return yf(Kn)},useDebugValue:wc,useDeferredValue:function(o){var c=Kr();return cg(c,rn.memoizedState,o)},useTransition:function(){var o=yf(Kn)[0],c=Kr().memoizedState;return[o,c]},useMutableSource:hd,useSyncExternalStore:wf,useId:Af,unstable_isNewReconciler:!1},rl={readContext:Wr,useCallback:ag,useContext:Wr,useEffect:Vi,useImperativeHandle:Sf,useInsertionEffect:og,useLayoutEffect:_s,useMemo:lg,useReducer:el,useRef:pd,useState:function(){return el(Kn)},useDebugValue:wc,useDeferredValue:function(o){var c=Kr();return rn===null?c.memoizedState=o:cg(c,rn.memoizedState,o)},useTransition:function(){var o=el(Kn)[0],c=Kr().memoizedState;return[o,c]},useMutableSource:hd,useSyncExternalStore:wf,useId:Af,unstable_isNewReconciler:!1};function Yr(o,c){if(o&&o.defaultProps){c=J({},c),o=o.defaultProps;for(var m in o)c[m]===void 0&&(c[m]=o[m]);return c}return c}function yd(o,c,m,w){c=o.memoizedState,m=m(w,c),m=m==null?c:J({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var wd={isMounted:function(o){return(o=o._reactInternals)?ye(o)===o:!1},enqueueSetState:function(o,c,m){o=o._reactInternals;var w=or(),A=co(o),k=vs(w,A);k.payload=c,m!=null&&(k.callback=m),c=Gr(o,k,A),c!==null&&(vi(c,o,A,w),ld(c,o,A))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var w=or(),A=co(o),k=vs(w,A);k.tag=1,k.payload=c,m!=null&&(k.callback=m),c=Gr(o,k,A),c!==null&&(vi(c,o,A,w),ld(c,o,A))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=or(),w=co(o),A=vs(m,w);A.tag=2,c!=null&&(A.callback=c),c=Gr(o,A,w),c!==null&&(vi(c,o,w,m),ld(c,o,w))}};function Ef(o,c,m,w,A,k,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,k,D):c.prototype&&c.prototype.isPureReactComponent?!Me(m,w)||!Me(A,k):!0}function Xo(o,c,m){var w=!1,A=Js,k=c.contextType;return typeof k=="object"&&k!==null?k=Wr(k):(A=pr(c)?tr:Hn.current,w=c.contextTypes,k=(w=w!=null)?Ka(o,A):Js),c=new c(m,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=wd,o.stateNode=c,c._reactInternals=o,w&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=A,o.__reactInternalMemoizedMaskedChildContext=k),c}function il(o,c,m,w){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,w),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,w),c.state!==o&&wd.enqueueReplaceState(c,c.state,null)}function kf(o,c,m,w){var A=o.stateNode;A.props=m,A.state=o.memoizedState,A.refs={},ad(o);var k=c.contextType;typeof k=="object"&&k!==null?A.context=Wr(k):(k=pr(c)?tr:Hn.current,A.context=Ka(o,k)),A.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(yd(o,c,k,m),A.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(c=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),c!==A.state&&wd.enqueueReplaceState(A,A.state,null),Qa(o,m,A,w),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308)}function Qo(o,c){try{var m="",w=c;do m+=De(w),w=w.return;while(w);var A=m}catch(k){A=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:A,digest:null}}function _d(o,c,m){return{value:o,source:null,stack:m??null,digest:c??null}}function sl(o,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var hg=typeof WeakMap=="function"?WeakMap:Map;function _c(o,c,m){m=vs(-1,m),m.tag=3,m.payload={element:null};var w=c.value;return m.callback=function(){Md||(Md=!0,zf=w),sl(o,c)},m}function bd(o,c,m){m=vs(-1,m),m.tag=3;var w=o.type.getDerivedStateFromError;if(typeof w=="function"){var A=c.value;m.payload=function(){return w(A)},m.callback=function(){sl(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(m.callback=function(){sl(o,c),typeof w!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})}),m}function bc(o,c,m){var w=o.pingCache;if(w===null){w=o.pingCache=new hg;var A=new Set;w.set(c,A)}else A=w.get(c),A===void 0&&(A=new Set,w.set(c,A));A.has(m)||(A.add(m),o=p0.bind(null,o,c,m),c.then(o,o))}function fg(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function Tf(o,c,m,w,A){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=vs(-1,1),c.tag=2,Gr(m,c,1))),m.lanes|=1),o):(o.flags|=65536,o.lanes=A,o)}var xd=O.ReactCurrentOwner,rr=!1;function On(o,c,m,w){c.child=o===null?id(c,null,m,w):en(c,o.child,m,w)}function pg(o,c,m,w,A){m=m.render;var k=c.ref;return to(c,A),w=Yo(o,c,m,w,k,A),m=dd(),o!==null&&!rr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~A,fi(o,c,A)):($t&&m&&cc(c),c.flags|=1,On(o,c,w,A),c.child)}function Pf(o,c,m,w,A){if(o===null){var k=m.type;return typeof k=="function"&&!jd(k)&&k.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=k,zi(o,c,k,w,A)):(o=Fd(m.type,null,w,c,c.mode,A),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&A)===0){var D=k.memoizedProps;if(m=m.compare,m=m!==null?m:Me,m(D,w)&&o.ref===c.ref)return fi(o,c,A)}return c.flags|=1,o=yi(k,w),o.ref=c.ref,o.return=c,c.child=o}function zi(o,c,m,w,A){if(o!==null){var k=o.memoizedProps;if(Me(k,w)&&o.ref===c.ref)if(rr=!1,c.pendingProps=w=k,(o.lanes&A)!==0)(o.flags&131072)!==0&&(rr=!0);else return c.lanes=o.lanes,fi(o,c,A)}return If(o,c,m,w,A)}function Rf(o,c,m){var w=c.pendingProps,A=w.children,k=o!==null?o.memoizedState:null;if(w.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(cl,Rr),Rr|=m;else{if((m&1073741824)===0)return o=k!==null?k.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,jt(cl,Rr),Rr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=k!==null?k.baseLanes:m,jt(cl,Rr),Rr|=w}else k!==null?(w=k.baseLanes|m,c.memoizedState=null):w=m,jt(cl,Rr),Rr|=w;return On(o,c,A,m),c.child}function Mf(o,c){var m=c.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function If(o,c,m,w,A){var k=pr(m)?tr:Hn.current;return k=Ka(c,k),to(c,A),m=Yo(o,c,m,w,k,A),w=dd(),o!==null&&!rr?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~A,fi(o,c,A)):($t&&w&&cc(c),c.flags|=1,On(o,c,m,A),c.child)}function Df(o,c,m,w,A){if(pr(m)){var k=!0;Vr(c)}else k=!1;if(to(c,A),c.stateNode===null)Ad(o,c),Xo(c,m,w),kf(c,m,w,A),w=!0;else if(o===null){var D=c.stateNode,U=c.memoizedProps;D.props=U;var G=D.context,de=m.contextType;typeof de=="object"&&de!==null?de=Wr(de):(de=pr(m)?tr:Hn.current,de=Ka(c,de));var Ae=m.getDerivedStateFromProps,Ee=typeof Ae=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ee||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(U!==w||G!==de)&&il(c,D,w,de),qr=!1;var xe=c.memoizedState;D.state=xe,Qa(c,w,D,A),G=c.memoizedState,U!==w||xe!==G||fr.current||qr?(typeof Ae=="function"&&(yd(c,m,Ae,w),G=c.memoizedState),(U=qr||Ef(c,m,U,w,xe,G,de))?(Ee||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=w,c.memoizedState=G),D.props=w,D.state=G,D.context=de,w=U):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),w=!1)}else{D=c.stateNode,ig(o,c),U=c.memoizedProps,de=c.type===c.elementType?U:Yr(c.type,U),D.props=de,Ee=c.pendingProps,xe=D.context,G=m.contextType,typeof G=="object"&&G!==null?G=Wr(G):(G=pr(m)?tr:Hn.current,G=Ka(c,G));var Ie=m.getDerivedStateFromProps;(Ae=typeof Ie=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(U!==Ee||xe!==G)&&il(c,D,w,G),qr=!1,xe=c.memoizedState,D.state=xe,Qa(c,w,D,A);var Le=c.memoizedState;U!==Ee||xe!==Le||fr.current||qr?(typeof Ie=="function"&&(yd(c,m,Ie,w),Le=c.memoizedState),(de=qr||Ef(c,m,de,w,xe,Le,G)||!1)?(Ae||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(w,Le,G),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(w,Le,G)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=1024),c.memoizedProps=w,c.memoizedState=Le),D.props=w,D.state=Le,D.context=G,w=de):(typeof D.componentDidUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&xe===o.memoizedState||(c.flags|=1024),w=!1)}return Of(o,c,m,w,k,A)}function Of(o,c,m,w,A,k){Mf(o,c);var D=(c.flags&128)!==0;if(!w&&!D)return A&&Jm(c,m,!1),fi(o,c,k);w=c.stateNode,xd.current=c;var U=D&&typeof m.getDerivedStateFromError!="function"?null:w.render();return c.flags|=1,o!==null&&D?(c.child=en(c,o.child,null,k),c.child=en(c,null,U,k)):On(o,c,U,k),c.memoizedState=w.state,A&&Jm(c,m,!0),c.child}function mg(o){var c=o.stateNode;c.pendingContext?Xm(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Xm(o,c.context,!1),ff(o,c.containerInfo)}function Hi(o,c,m,w,A){return Fi(),Bi(A),c.flags|=256,On(o,c,m,w),c.child}var xc={dehydrated:null,treeContext:null,retryLane:0};function Sc(o){return{baseLanes:o,cachePool:null,transitions:null}}function Sd(o,c,m){var w=c.pendingProps,A=Wt.current,k=!1,D=(c.flags&128)!==0,U;if((U=D)||(U=o!==null&&o.memoizedState===null?!1:(A&2)!==0),U?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(A|=1),jt(Wt,A&1),o===null)return mr(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(D=w.children,o=w.fallback,k?(w=c.mode,k=c.child,D={mode:"hidden",children:D},(w&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=D):k=Bd(D,w,0,null),o=na(o,w,m,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=Sc(m),c.memoizedState=xc,o):ol(c,D));if(A=o.memoizedState,A!==null&&(U=A.dehydrated,U!==null))return Ke(o,c,D,w,U,A,m);if(k){k=w.fallback,D=c.mode,A=o.child,U=A.sibling;var G={mode:"hidden",children:w.children};return(D&1)===0&&c.child!==A?(w=c.child,w.childLanes=0,w.pendingProps=G,c.deletions=null):(w=yi(A,G),w.subtreeFlags=A.subtreeFlags&14680064),U!==null?k=yi(U,k):(k=na(k,D,m,null),k.flags|=2),k.return=c,w.return=c,w.sibling=k,c.child=w,w=k,k=c.child,D=o.child.memoizedState,D=D===null?Sc(m):{baseLanes:D.baseLanes|m,cachePool:null,transitions:D.transitions},k.memoizedState=D,k.childLanes=o.childLanes&~m,c.memoizedState=xc,w}return k=o.child,o=k.sibling,w=yi(k,{mode:"visible",children:w.children}),(c.mode&1)===0&&(w.lanes=m),w.return=c,w.sibling=null,o!==null&&(m=c.deletions,m===null?(c.deletions=[o],c.flags|=16):m.push(o)),c.child=w,c.memoizedState=null,w}function ol(o,c){return c=Bd({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function bs(o,c,m,w){return w!==null&&Bi(w),en(c,o.child,null,m),o=ol(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Ke(o,c,m,w,A,k,D){if(m)return c.flags&256?(c.flags&=-257,w=_d(Error(t(422))),bs(o,c,D,w)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=w.fallback,A=c.mode,w=Bd({mode:"visible",children:w.children},A,0,null),k=na(k,A,D,null),k.flags|=2,w.return=c,k.return=c,w.sibling=k,c.child=w,(c.mode&1)!==0&&en(c,o.child,null,D),c.child.memoizedState=Sc(D),c.memoizedState=xc,k);if((c.mode&1)===0)return bs(o,c,D,null);if(A.data==="$!"){if(w=A.nextSibling&&A.nextSibling.dataset,w)var U=w.dgst;return w=U,k=Error(t(419)),w=_d(k,w,void 0),bs(o,c,D,w)}if(U=(D&o.childLanes)!==0,rr||U){if(w=Cn,w!==null){switch(D&-D){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(w.suspendedLanes|D))!==0?0:A,A!==0&&A!==k.retryLane&&(k.retryLane=A,gs(o,A),vi(w,o,A,-1))}return Yf(),w=_d(Error(t(421))),bs(o,c,D,w)}return A.data==="$?"?(c.flags|=128,c.child=o.child,c=m0.bind(null,o),A._reactRetry=c,null):(o=k.treeContext,kr=Xs(A.nextSibling),qn=c,$t=!0,di=null,o!==null&&(zr[Hr++]=Ni,zr[Hr++]=Li,zr[Hr++]=Vo,Ni=o.id,Li=o.overflow,Vo=c),c=ol(c,w.children),c.flags|=4096,c)}function Ac(o,c,m){o.lanes|=c;var w=o.alternate;w!==null&&(w.lanes|=c),Dn(o.return,c,m)}function Cc(o,c,m,w,A){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:A}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=w,k.tail=m,k.tailMode=A)}function io(o,c,m){var w=c.pendingProps,A=w.revealOrder,k=w.tail;if(On(o,c,w.children,m),w=Wt.current,(w&2)!==0)w=w&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Ac(o,m,c);else if(o.tag===19)Ac(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}w&=1}if(jt(Wt,w),(c.mode&1)===0)c.memoizedState=null;else switch(A){case"forwards":for(m=c.child,A=null;m!==null;)o=m.alternate,o!==null&&Go(o)===null&&(A=m),m=m.sibling;m=A,m===null?(A=c.child,c.child=null):(A=m.sibling,m.sibling=null),Cc(c,!1,A,m,k);break;case"backwards":for(m=null,A=c.child,c.child=null;A!==null;){if(o=A.alternate,o!==null&&Go(o)===null){c.child=A;break}o=A.sibling,A.sibling=m,m=A,A=o}Cc(c,!0,m,null,k);break;case"together":Cc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ad(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function fi(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),oo|=c.lanes,(m&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,m=yi(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=yi(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function gg(o,c,m){switch(c.tag){case 3:mg(c),Fi();break;case 5:pf(c);break;case 1:pr(c.type)&&Vr(c);break;case 4:ff(c,c.stateNode.containerInfo);break;case 10:var w=c.type._context,A=c.memoizedProps.value;jt(hc,w._currentValue),w._currentValue=A;break;case 13:if(w=c.memoizedState,w!==null)return w.dehydrated!==null?(jt(Wt,Wt.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?Sd(o,c,m):(jt(Wt,Wt.current&1),o=fi(o,c,m),o!==null?o.sibling:null);jt(Wt,Wt.current&1);break;case 19:if(w=(m&c.childLanes)!==0,(o.flags&128)!==0){if(w)return io(o,c,m);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),jt(Wt,Wt.current),w)break;return null;case 22:case 23:return c.lanes=0,Rf(o,c,m)}return fi(o,c,m)}var Nn,Nf,vg,Lf;Nn=function(o,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Nf=function(){},vg=function(o,c,m,w){var A=o.memoizedProps;if(A!==w){o=c.stateNode,ys($i.current);var k=null;switch(m){case"input":A=Yt(o,A),w=Yt(o,w),k=[];break;case"select":A=J({},A,{value:void 0}),w=J({},w,{value:void 0}),k=[];break;case"textarea":A=rs(o,A),w=rs(o,w),k=[];break;default:typeof A.onClick!="function"&&typeof w.onClick=="function"&&(o.onclick=Yu)}ko(m,w);var D;m=null;for(de in A)if(!w.hasOwnProperty(de)&&A.hasOwnProperty(de)&&A[de]!=null)if(de==="style"){var U=A[de];for(D in U)U.hasOwnProperty(D)&&(m||(m={}),m[D]="")}else de!=="dangerouslySetInnerHTML"&&de!=="children"&&de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&de!=="autoFocus"&&(i.hasOwnProperty(de)?k||(k=[]):(k=k||[]).push(de,null));for(de in w){var G=w[de];if(U=A?.[de],w.hasOwnProperty(de)&&G!==U&&(G!=null||U!=null))if(de==="style")if(U){for(D in U)!U.hasOwnProperty(D)||G&&G.hasOwnProperty(D)||(m||(m={}),m[D]="");for(D in G)G.hasOwnProperty(D)&&U[D]!==G[D]&&(m||(m={}),m[D]=G[D])}else m||(k||(k=[]),k.push(de,m)),m=G;else de==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,U=U?U.__html:void 0,G!=null&&U!==G&&(k=k||[]).push(de,G)):de==="children"?typeof G!="string"&&typeof G!="number"||(k=k||[]).push(de,""+G):de!=="suppressContentEditableWarning"&&de!=="suppressHydrationWarning"&&(i.hasOwnProperty(de)?(G!=null&&de==="onScroll"&&Ft("scroll",o),k||U===G||(k=[])):(k=k||[]).push(de,G))}m&&(k=k||[]).push("style",m);var de=k;(c.updateQueue=de)&&(c.flags|=4)}},Lf=function(o,c,m,w){m!==w&&(c.flags|=4)};function Ec(o,c){if(!$t)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function Ln(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,w=0;if(c)for(var A=o.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags&14680064,w|=A.flags&14680064,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=w,o.childLanes=m,c}function a0(o,c,m){var w=c.pendingProps;switch(Ho(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(c),null;case 1:return pr(c.type)&&Zu(),Ln(c),null;case 3:return w=c.stateNode,no(),Bt(fr),Bt(Hn),ud(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(o===null||o.child===null)&&(uc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,di!==null&&(qf(di),di=null))),Nf(o,c),Ln(c),null;case 5:cd(c);var A=ys(Ja.current);if(m=c.type,o!==null&&c.stateNode!=null)vg(o,c,m,w,A),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!w){if(c.stateNode===null)throw Error(t(166));return Ln(c),null}if(o=ys($i.current),uc(c)){w=c.stateNode,m=c.type;var k=c.memoizedProps;switch(w[Di]=c,w[Qs]=k,o=(c.mode&1)!==0,m){case"dialog":Ft("cancel",w),Ft("close",w);break;case"iframe":case"object":case"embed":Ft("load",w);break;case"video":case"audio":for(A=0;A<hs.length;A++)Ft(hs[A],w);break;case"source":Ft("error",w);break;case"img":case"image":case"link":Ft("error",w),Ft("load",w);break;case"details":Ft("toggle",w);break;case"input":Fr(w,k),Ft("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!k.multiple},Ft("invalid",w);break;case"textarea":Eo(w,k),Ft("invalid",w)}ko(m,k),A=null;for(var D in k)if(k.hasOwnProperty(D)){var U=k[D];D==="children"?typeof U=="string"?w.textContent!==U&&(k.suppressHydrationWarning!==!0&&sc(w.textContent,U,o),A=["children",U]):typeof U=="number"&&w.textContent!==""+U&&(k.suppressHydrationWarning!==!0&&sc(w.textContent,U,o),A=["children",""+U]):i.hasOwnProperty(D)&&U!=null&&D==="onScroll"&&Ft("scroll",w)}switch(m){case"input":st(w),Ll(w,k,!0);break;case"textarea":st(w),$s(w);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(w.onclick=Yu)}w=A,c.updateQueue=w,w!==null&&(c.flags|=4)}else{D=A.nodeType===9?A:A.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=gu(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof w.is=="string"?o=D.createElement(m,{is:w.is}):(o=D.createElement(m),m==="select"&&(D=o,w.multiple?D.multiple=!0:w.size&&(D.size=w.size))):o=D.createElementNS(o,m),o[Di]=c,o[Qs]=w,Nn(o,c,!1,!1),c.stateNode=o;e:{switch(D=To(m,w),m){case"dialog":Ft("cancel",o),Ft("close",o),A=w;break;case"iframe":case"object":case"embed":Ft("load",o),A=w;break;case"video":case"audio":for(A=0;A<hs.length;A++)Ft(hs[A],o);A=w;break;case"source":Ft("error",o),A=w;break;case"img":case"image":case"link":Ft("error",o),Ft("load",o),A=w;break;case"details":Ft("toggle",o),A=w;break;case"input":Fr(o,w),A=Yt(o,w),Ft("invalid",o);break;case"option":A=w;break;case"select":o._wrapperState={wasMultiple:!!w.multiple},A=J({},w,{value:void 0}),Ft("invalid",o);break;case"textarea":Eo(o,w),A=rs(o,w),Ft("invalid",o);break;default:A=w}ko(m,A),U=A;for(k in U)if(U.hasOwnProperty(k)){var G=U[k];k==="style"?Ea(o,G):k==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Aa(o,G)):k==="children"?typeof G=="string"?(m!=="textarea"||G!=="")&&ss(o,G):typeof G=="number"&&ss(o,""+G):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?G!=null&&k==="onScroll"&&Ft("scroll",o):G!=null&&R(o,k,G,D))}switch(m){case"input":st(o),Ll(o,w,!1);break;case"textarea":st(o),$s(o);break;case"option":w.value!=null&&o.setAttribute("value",""+Oe(w.value));break;case"select":o.multiple=!!w.multiple,k=w.value,k!=null?Sn(o,!!w.multiple,k,!1):w.defaultValue!=null&&Sn(o,!!w.multiple,w.defaultValue,!0);break;default:typeof A.onClick=="function"&&(o.onclick=Yu)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ln(c),null;case 6:if(o&&c.stateNode!=null)Lf(o,c,o.memoizedProps,w);else{if(typeof w!="string"&&c.stateNode===null)throw Error(t(166));if(m=ys(Ja.current),ys($i.current),uc(c)){if(w=c.stateNode,m=c.memoizedProps,w[Di]=c,(k=w.nodeValue!==m)&&(o=qn,o!==null))switch(o.tag){case 3:sc(w.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&sc(w.nodeValue,m,(o.mode&1)!==0)}k&&(c.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[Di]=c,c.stateNode=w}return Ln(c),null;case 13:if(Bt(Wt),w=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if($t&&kr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)cf(),Fi(),c.flags|=98560,k=!1;else if(k=uc(c),w!==null&&w.dehydrated!==null){if(o===null){if(!k)throw Error(t(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Di]=c}else Fi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ln(c),k=!1}else di!==null&&(qf(di),di=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(w=w!==null,w!==(o!==null&&o.memoizedState!==null)&&w&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Wt.current&1)!==0?gn===0&&(gn=3):Yf())),c.updateQueue!==null&&(c.flags|=4),Ln(c),null);case 4:return no(),Nf(o,c),o===null&&Ks(c.stateNode.containerInfo),Ln(c),null;case 10:return sd(c.type._context),Ln(c),null;case 17:return pr(c.type)&&Zu(),Ln(c),null;case 19:if(Bt(Wt),k=c.memoizedState,k===null)return Ln(c),null;if(w=(c.flags&128)!==0,D=k.rendering,D===null)if(w)Ec(k,!1);else{if(gn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(D=Go(o),D!==null){for(c.flags|=128,Ec(k,!1),w=D.updateQueue,w!==null&&(c.updateQueue=w,c.flags|=4),c.subtreeFlags=0,w=m,m=c.child;m!==null;)k=m,o=w,k.flags&=14680066,D=k.alternate,D===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=D.childLanes,k.lanes=D.lanes,k.child=D.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=D.memoizedProps,k.memoizedState=D.memoizedState,k.updateQueue=D.updateQueue,k.type=D.type,o=D.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return jt(Wt,Wt.current&1|2),c.child}o=o.sibling}k.tail!==null&&zt()>Jo&&(c.flags|=128,w=!0,Ec(k,!1),c.lanes=4194304)}else{if(!w)if(o=Go(D),o!==null){if(c.flags|=128,w=!0,m=o.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),Ec(k,!0),k.tail===null&&k.tailMode==="hidden"&&!D.alternate&&!$t)return Ln(c),null}else 2*zt()-k.renderingStartTime>Jo&&m!==1073741824&&(c.flags|=128,w=!0,Ec(k,!1),c.lanes=4194304);k.isBackwards?(D.sibling=c.child,c.child=D):(m=k.last,m!==null?m.sibling=D:c.child=D,k.last=D)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=zt(),c.sibling=null,m=Wt.current,jt(Wt,w?m&1|2:m&1),c):(Ln(c),null);case 22:case 23:return Kf(),w=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==w&&(c.flags|=8192),w&&(c.mode&1)!==0?(Rr&1073741824)!==0&&(Ln(c),c.subtreeFlags&6&&(c.flags|=8192)):Ln(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function l0(o,c){switch(Ho(c),c.tag){case 1:return pr(c.type)&&Zu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return no(),Bt(fr),Bt(Hn),ud(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return cd(c),null;case 13:if(Bt(Wt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Fi()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Bt(Wt),null;case 4:return no(),null;case 10:return sd(c.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var Cd=!1,qt=!1,ir=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function al(o,c){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Qt(o,c,w)}else m.current=null}function kc(o,c,m){try{m()}catch(w){Qt(o,c,w)}}var yg=!1;function c0(o,c){if(oc=Mu,o=Dt(),Zl(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var A=w.anchorOffset,k=w.focusNode;w=w.focusOffset;try{m.nodeType,k.nodeType}catch{m=null;break e}var D=0,U=-1,G=-1,de=0,Ae=0,Ee=o,xe=null;t:for(;;){for(var Ie;Ee!==m||A!==0&&Ee.nodeType!==3||(U=D+A),Ee!==k||w!==0&&Ee.nodeType!==3||(G=D+w),Ee.nodeType===3&&(D+=Ee.nodeValue.length),(Ie=Ee.firstChild)!==null;)xe=Ee,Ee=Ie;for(;;){if(Ee===o)break t;if(xe===m&&++de===A&&(U=D),xe===k&&++Ae===w&&(G=D),(Ie=Ee.nextSibling)!==null)break;Ee=xe,xe=Ee.parentNode}Ee=Ie}m=U===-1||G===-1?null:{start:U,end:G}}else m=null}m=m||{start:0,end:0}}else m=null;for($o={focusedElem:o,selectionRange:m},Mu=!1,Ne=c;Ne!==null;)if(c=Ne,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ne=o;else for(;Ne!==null;){c=Ne;try{var Le=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var je=Le.memoizedProps,sn=Le.memoizedState,re=c.stateNode,X=re.getSnapshotBeforeUpdate(c.elementType===c.type?je:Yr(c.type,je),sn);re.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var oe=c.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ke){Qt(c,c.return,ke)}if(o=c.sibling,o!==null){o.return=c.return,Ne=o;break}Ne=c.return}return Le=yg,yg=!1,Le}function xs(o,c,m){var w=c.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&o)===o){var k=A.destroy;A.destroy=void 0,k!==void 0&&kc(c,m,k)}A=A.next}while(A!==w)}}function Tc(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&o)===o){var w=m.create;m.destroy=w()}m=m.next}while(m!==c)}}function Ed(o){var c=o.ref;if(c!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof c=="function"?c(o):c.current=o}}function wg(o){var c=o.alternate;c!==null&&(o.alternate=null,wg(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Di],delete c[Qs],delete c[Qu],delete c[N],delete c[qa])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function _g(o){return o.tag===5||o.tag===3||o.tag===4}function bg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||_g(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function jf(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(o,c):m.insertBefore(o,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(o,m)):(c=m,c.appendChild(o)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Yu));else if(w!==4&&(o=o.child,o!==null))for(jf(o,c,m),o=o.sibling;o!==null;)jf(o,c,m),o=o.sibling}function kd(o,c,m){var w=o.tag;if(w===5||w===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(w!==4&&(o=o.child,o!==null))for(kd(o,c,m),o=o.sibling;o!==null;)kd(o,c,m),o=o.sibling}var An=null,pi=!1;function Wi(o,c,m){for(m=m.child;m!==null;)Ff(o,c,m),m=m.sibling}function Ff(o,c,m){if(Ri&&typeof Ri.onCommitFiberUnmount=="function")try{Ri.onCommitFiberUnmount(Cu,m)}catch{}switch(m.tag){case 5:qt||al(m,c);case 6:var w=An,A=pi;An=null,Wi(o,c,m),An=w,pi=A,An!==null&&(pi?(o=An,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):An.removeChild(m.stateNode));break;case 18:An!==null&&(pi?(o=An,m=m.stateNode,o.nodeType===8?of(o.parentNode,m):o.nodeType===1&&of(o,m),Pt(o)):of(An,m.stateNode));break;case 4:w=An,A=pi,An=m.stateNode.containerInfo,pi=!0,Wi(o,c,m),An=w,pi=A;break;case 0:case 11:case 14:case 15:if(!qt&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){A=w=w.next;do{var k=A,D=k.destroy;k=k.tag,D!==void 0&&((k&2)!==0||(k&4)!==0)&&kc(m,c,D),A=A.next}while(A!==w)}Wi(o,c,m);break;case 1:if(!qt&&(al(m,c),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(U){Qt(m,c,U)}Wi(o,c,m);break;case 21:Wi(o,c,m);break;case 22:m.mode&1?(qt=(w=qt)||m.memoizedState!==null,Wi(o,c,m),qt=w):Wi(o,c,m);break;default:Wi(o,c,m)}}function ll(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new ir),c.forEach(function(w){var A=g0.bind(null,o,w);m.has(w)||(m.add(w),w.then(A,A))})}}function Pr(o,c){var m=c.deletions;if(m!==null)for(var w=0;w<m.length;w++){var A=m[w];try{var k=o,D=c,U=D;e:for(;U!==null;){switch(U.tag){case 5:An=U.stateNode,pi=!1;break e;case 3:An=U.stateNode.containerInfo,pi=!0;break e;case 4:An=U.stateNode.containerInfo,pi=!0;break e}U=U.return}if(An===null)throw Error(t(160));Ff(k,D,A),An=null,pi=!1;var G=A.alternate;G!==null&&(G.return=null),A.return=null}catch(de){Qt(A,c,de)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Bf(c,o),c=c.sibling}function Bf(o,c){var m=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Pr(c,o),mi(o),w&4){try{xs(3,o,o.return),Tc(3,o)}catch(je){Qt(o,o.return,je)}try{xs(5,o,o.return)}catch(je){Qt(o,o.return,je)}}break;case 1:Pr(c,o),mi(o),w&512&&m!==null&&al(m,m.return);break;case 5:if(Pr(c,o),mi(o),w&512&&m!==null&&al(m,m.return),o.flags&32){var A=o.stateNode;try{ss(A,"")}catch(je){Qt(o,o.return,je)}}if(w&4&&(A=o.stateNode,A!=null)){var k=o.memoizedProps,D=m!==null?m.memoizedProps:k,U=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{U==="input"&&k.type==="radio"&&k.name!=null&&Bs(A,k),To(U,D);var de=To(U,k);for(D=0;D<G.length;D+=2){var Ae=G[D],Ee=G[D+1];Ae==="style"?Ea(A,Ee):Ae==="dangerouslySetInnerHTML"?Aa(A,Ee):Ae==="children"?ss(A,Ee):R(A,Ae,Ee,de)}switch(U){case"input":Mn(A,k);break;case"textarea":mu(A,k);break;case"select":var xe=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!k.multiple;var Ie=k.value;Ie!=null?Sn(A,!!k.multiple,Ie,!1):xe!==!!k.multiple&&(k.defaultValue!=null?Sn(A,!!k.multiple,k.defaultValue,!0):Sn(A,!!k.multiple,k.multiple?[]:"",!1))}A[Qs]=k}catch(je){Qt(o,o.return,je)}}break;case 6:if(Pr(c,o),mi(o),w&4){if(o.stateNode===null)throw Error(t(162));A=o.stateNode,k=o.memoizedProps;try{A.nodeValue=k}catch(je){Qt(o,o.return,je)}}break;case 3:if(Pr(c,o),mi(o),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Pt(c.containerInfo)}catch(je){Qt(o,o.return,je)}break;case 4:Pr(c,o),mi(o);break;case 13:Pr(c,o),mi(o),A=o.child,A.flags&8192&&(k=A.memoizedState!==null,A.stateNode.isHidden=k,!k||A.alternate!==null&&A.alternate.memoizedState!==null||(Vf=zt())),w&4&&ll(o);break;case 22:if(Ae=m!==null&&m.memoizedState!==null,o.mode&1?(qt=(de=qt)||Ae,Pr(c,o),qt=de):Pr(c,o),mi(o),w&8192){if(de=o.memoizedState!==null,(o.stateNode.isHidden=de)&&!Ae&&(o.mode&1)!==0)for(Ne=o,Ae=o.child;Ae!==null;){for(Ee=Ne=Ae;Ne!==null;){switch(xe=Ne,Ie=xe.child,xe.tag){case 0:case 11:case 14:case 15:xs(4,xe,xe.return);break;case 1:al(xe,xe.return);var Le=xe.stateNode;if(typeof Le.componentWillUnmount=="function"){w=xe,m=xe.return;try{c=w,Le.props=c.memoizedProps,Le.state=c.memoizedState,Le.componentWillUnmount()}catch(je){Qt(w,m,je)}}break;case 5:al(xe,xe.return);break;case 22:if(xe.memoizedState!==null){so(Ee);continue}}Ie!==null?(Ie.return=xe,Ne=Ie):so(Ee)}Ae=Ae.sibling}e:for(Ae=null,Ee=o;;){if(Ee.tag===5){if(Ae===null){Ae=Ee;try{A=Ee.stateNode,de?(k=A.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(U=Ee.stateNode,G=Ee.memoizedProps.style,D=G!=null&&G.hasOwnProperty("display")?G.display:null,U.style.display=Ca("display",D))}catch(je){Qt(o,o.return,je)}}}else if(Ee.tag===6){if(Ae===null)try{Ee.stateNode.nodeValue=de?"":Ee.memoizedProps}catch(je){Qt(o,o.return,je)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===o)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===o)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===o)break e;Ae===Ee&&(Ae=null),Ee=Ee.return}Ae===Ee&&(Ae=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:Pr(c,o),mi(o),w&4&&ll(o);break;case 21:break;default:Pr(c,o),mi(o)}}function mi(o){var c=o.flags;if(c&2){try{e:{for(var m=o.return;m!==null;){if(_g(m)){var w=m;break e}m=m.return}throw Error(t(160))}switch(w.tag){case 5:var A=w.stateNode;w.flags&32&&(ss(A,""),w.flags&=-33);var k=bg(o);kd(o,k,A);break;case 3:case 4:var D=w.stateNode.containerInfo,U=bg(o);jf(o,U,D);break;default:throw Error(t(161))}}catch(G){Qt(o,o.return,G)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Td(o,c,m){Ne=o,$f(o)}function $f(o,c,m){for(var w=(o.mode&1)!==0;Ne!==null;){var A=Ne,k=A.child;if(A.tag===22&&w){var D=A.memoizedState!==null||Cd;if(!D){var U=A.alternate,G=U!==null&&U.memoizedState!==null||qt;U=Cd;var de=qt;if(Cd=D,(qt=G)&&!de)for(Ne=A;Ne!==null;)D=Ne,G=D.child,D.tag===22&&D.memoizedState!==null?xg(A):G!==null?(G.return=D,Ne=G):xg(A);for(;k!==null;)Ne=k,$f(k),k=k.sibling;Ne=A,Cd=U,qt=de}gi(o)}else(A.subtreeFlags&8772)!==0&&k!==null?(k.return=A,Ne=k):gi(o)}}function gi(o){for(;Ne!==null;){var c=Ne;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:qt||Tc(5,c);break;case 1:var w=c.stateNode;if(c.flags&4&&!qt)if(m===null)w.componentDidMount();else{var A=c.elementType===c.type?m.memoizedProps:Yr(c.type,m.memoizedProps);w.componentDidUpdate(A,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&hf(c,k,w);break;case 3:var D=c.updateQueue;if(D!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}hf(c,D,m)}break;case 5:var U=c.stateNode;if(m===null&&c.flags&4){m=U;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&m.focus();break;case"img":G.src&&(m.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var de=c.alternate;if(de!==null){var Ae=de.memoizedState;if(Ae!==null){var Ee=Ae.dehydrated;Ee!==null&&Pt(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qt||c.flags&512&&Ed(c)}catch(xe){Qt(c,c.return,xe)}}if(c===o){Ne=null;break}if(m=c.sibling,m!==null){m.return=c.return,Ne=m;break}Ne=c.return}}function so(o){for(;Ne!==null;){var c=Ne;if(c===o){Ne=null;break}var m=c.sibling;if(m!==null){m.return=c.return,Ne=m;break}Ne=c.return}}function xg(o){for(;Ne!==null;){var c=Ne;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Tc(4,c)}catch(G){Qt(c,m,G)}break;case 1:var w=c.stateNode;if(typeof w.componentDidMount=="function"){var A=c.return;try{w.componentDidMount()}catch(G){Qt(c,A,G)}}var k=c.return;try{Ed(c)}catch(G){Qt(c,k,G)}break;case 5:var D=c.return;try{Ed(c)}catch(G){Qt(c,D,G)}}}catch(G){Qt(c,c.return,G)}if(c===o){Ne=null;break}var U=c.sibling;if(U!==null){U.return=c.return,Ne=U;break}Ne=c.return}}var Sg=Math.ceil,Pd=O.ReactCurrentDispatcher,Uf=O.ReactCurrentOwner,Xr=O.ReactCurrentBatchConfig,wt=0,Cn=null,hn=null,jn=0,Rr=0,cl=hr(0),gn=0,Pc=null,oo=0,Rc=0,Rd=0,Mc=null,vr=null,Vf=0,Jo=1/0,Ss=null,Md=!1,zf=null,ao=null,Id=!1,lo=null,sr=0,Ic=0,Hf=null,Dd=-1,Dc=0;function or(){return(wt&6)!==0?zt():Dd!==-1?Dd:Dd=zt()}function co(o){return(o.mode&1)===0?1:(wt&2)!==0&&jn!==0?jn&-jn:ng.transition!==null?(Dc===0&&(Dc=jh()),Dc):(o=kt,o!==0||(o=window.event,o=o===void 0?16:Tm(o.type)),o)}function vi(o,c,m,w){if(50<Ic)throw Ic=0,Hf=null,Error(t(185));Gl(o,m,w),((wt&2)===0||o!==Cn)&&(o===Cn&&((wt&2)===0&&(Rc|=m),gn===4&&uo(o,jn)),yr(o,w),m===1&&wt===0&&(c.mode&1)===0&&(Jo=zt()+500,ed&&Zs()))}function yr(o,c){var m=o.callbackNode;$y(o,c);var w=Do(o,o===Cn?jn:0);if(w===0)m!==null&&gm(m),o.callbackNode=null,o.callbackPriority=0;else if(c=w&-w,o.callbackPriority!==c){if(m!=null&&gm(m),c===1)o.tag===0?Uo(Ag.bind(null,o)):Zm(Ag.bind(null,o)),Xu(function(){(wt&6)===0&&Zs()}),m=null;else{switch(Oo(w)){case 1:m=Nh;break;case 4:m=vm;break;case 16:m=Wl;break;case 536870912:m=Lh;break;default:m=Wl}m=Mg(m,Od.bind(null,o))}o.callbackPriority=c,o.callbackNode=m}}function Od(o,c){if(Dd=-1,Dc=0,(wt&6)!==0)throw Error(t(327));var m=o.callbackNode;if(ul()&&o.callbackNode!==m)return null;var w=Do(o,o===Cn?jn:0);if(w===0)return null;if((w&30)!==0||(w&o.expiredLanes)!==0||c)c=Nd(o,w);else{c=w;var A=wt;wt|=2;var k=Eg();(Cn!==o||jn!==c)&&(Ss=null,Jo=zt()+500,ea(o,c));do try{h0();break}catch(U){Cg(o,U)}while(!0);ms(),Pd.current=k,wt=A,hn!==null?c=0:(Cn=null,jn=0,c=gn)}if(c!==0){if(c===2&&(A=ku(o),A!==0&&(w=A,c=Wf(o,A))),c===1)throw m=Pc,ea(o,0),uo(o,w),yr(o,zt()),m;if(c===6)uo(o,w);else{if(A=o.current.alternate,(w&30)===0&&!u0(A)&&(c=Nd(o,w),c===2&&(k=ku(o),k!==0&&(w=k,c=Wf(o,k))),c===1))throw m=Pc,ea(o,0),uo(o,w),yr(o,zt()),m;switch(o.finishedWork=A,o.finishedLanes=w,c){case 0:case 1:throw Error(t(345));case 2:ta(o,vr,Ss);break;case 3:if(uo(o,w),(w&130023424)===w&&(c=Vf+500-zt(),10<c)){if(Do(o,0)!==0)break;if(A=o.suspendedLanes,(A&w)!==w){or(),o.pingedLanes|=o.suspendedLanes&A;break}o.timeoutHandle=Ys(ta.bind(null,o,vr,Ss),c);break}ta(o,vr,Ss);break;case 4:if(uo(o,w),(w&4194240)===w)break;for(c=o.eventTimes,A=-1;0<w;){var D=31-ci(w);k=1<<D,D=c[D],D>A&&(A=D),w&=~k}if(w=A,w=zt()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*Sg(w/1960))-w,10<w){o.timeoutHandle=Ys(ta.bind(null,o,vr,Ss),w);break}ta(o,vr,Ss);break;case 5:ta(o,vr,Ss);break;default:throw Error(t(329))}}}return yr(o,zt()),o.callbackNode===m?Od.bind(null,o):null}function Wf(o,c){var m=Mc;return o.current.memoizedState.isDehydrated&&(ea(o,c).flags|=256),o=Nd(o,c),o!==2&&(c=vr,vr=m,c!==null&&qf(c)),o}function qf(o){vr===null?vr=o:vr.push.apply(vr,o)}function u0(o){for(var c=o;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var A=m[w],k=A.getSnapshot;A=A.value;try{if(!ue(k(),A))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function uo(o,c){for(c&=~Rd,c&=~Rc,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var m=31-ci(c),w=1<<m;o[m]=-1,c&=~w}}function Ag(o){if((wt&6)!==0)throw Error(t(327));ul();var c=Do(o,0);if((c&1)===0)return yr(o,zt()),null;var m=Nd(o,c);if(o.tag!==0&&m===2){var w=ku(o);w!==0&&(c=w,m=Wf(o,w))}if(m===1)throw m=Pc,ea(o,0),uo(o,c),yr(o,zt()),m;if(m===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ta(o,vr,Ss),yr(o,zt()),null}function Gf(o,c){var m=wt;wt|=1;try{return o(c)}finally{wt=m,wt===0&&(Jo=zt()+500,ed&&Zs())}}function Zo(o){lo!==null&&lo.tag===0&&(wt&6)===0&&ul();var c=wt;wt|=1;var m=Xr.transition,w=kt;try{if(Xr.transition=null,kt=1,o)return o()}finally{kt=w,Xr.transition=m,wt=c,(wt&6)===0&&Zs()}}function Kf(){Rr=cl.current,Bt(cl)}function ea(o,c){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,lc(m)),hn!==null)for(m=hn.return;m!==null;){var w=m;switch(Ho(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Zu();break;case 3:no(),Bt(fr),Bt(Hn),ud();break;case 5:cd(w);break;case 4:no();break;case 13:Bt(Wt);break;case 19:Bt(Wt);break;case 10:sd(w.type._context);break;case 22:case 23:Kf()}m=m.return}if(Cn=o,hn=o=yi(o.current,null),jn=Rr=c,gn=0,Pc=null,Rd=Rc=oo=0,vr=Mc=null,qo!==null){for(c=0;c<qo.length;c++)if(m=qo[c],w=m.interleaved,w!==null){m.interleaved=null;var A=w.next,k=m.pending;if(k!==null){var D=k.next;k.next=A,w.next=D}m.pending=w}qo=null}return o}function Cg(o,c){do{var m=hn;try{if(ms(),mc.current=gd,Za){for(var w=Xt.memoizedState;w!==null;){var A=w.queue;A!==null&&(A.pending=null),w=w.next}Za=!1}if(ro=0,mn=rn=Xt=null,gc=!1,Ko=0,Uf.current=null,m===null||m.return===null){gn=1,Pc=c,hn=null;break}e:{var k=o,D=m.return,U=m,G=c;if(c=jn,U.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var de=G,Ae=U,Ee=Ae.tag;if((Ae.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var xe=Ae.alternate;xe?(Ae.updateQueue=xe.updateQueue,Ae.memoizedState=xe.memoizedState,Ae.lanes=xe.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ie=fg(D);if(Ie!==null){Ie.flags&=-257,Tf(Ie,D,U,k,c),Ie.mode&1&&bc(k,de,c),c=Ie,G=de;var Le=c.updateQueue;if(Le===null){var je=new Set;je.add(G),c.updateQueue=je}else Le.add(G);break e}else{if((c&1)===0){bc(k,de,c),Yf();break e}G=Error(t(426))}}else if($t&&U.mode&1){var sn=fg(D);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),Tf(sn,D,U,k,c),Bi(Qo(G,U));break e}}k=G=Qo(G,U),gn!==4&&(gn=2),Mc===null?Mc=[k]:Mc.push(k),k=D;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var re=_c(k,G,c);sg(k,re);break e;case 1:U=G;var X=k.type,oe=k.stateNode;if((k.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(ao===null||!ao.has(oe)))){k.flags|=65536,c&=-c,k.lanes|=c;var ke=bd(k,U,c);sg(k,ke);break e}}k=k.return}while(k!==null)}Tg(m)}catch($e){c=$e,hn===m&&m!==null&&(hn=m=m.return);continue}break}while(!0)}function Eg(){var o=Pd.current;return Pd.current=gd,o===null?gd:o}function Yf(){(gn===0||gn===3||gn===2)&&(gn=4),Cn===null||(oo&268435455)===0&&(Rc&268435455)===0||uo(Cn,jn)}function Nd(o,c){var m=wt;wt|=2;var w=Eg();(Cn!==o||jn!==c)&&(Ss=null,ea(o,c));do try{d0();break}catch(A){Cg(o,A)}while(!0);if(ms(),wt=m,Pd.current=w,hn!==null)throw Error(t(261));return Cn=null,jn=0,gn}function d0(){for(;hn!==null;)kg(hn)}function h0(){for(;hn!==null&&!Au();)kg(hn)}function kg(o){var c=Rg(o.alternate,o,Rr);o.memoizedProps=o.pendingProps,c===null?Tg(o):hn=c,Uf.current=null}function Tg(o){var c=o;do{var m=c.alternate;if(o=c.return,(c.flags&32768)===0){if(m=a0(m,c,Rr),m!==null){hn=m;return}}else{if(m=l0(m,c),m!==null){m.flags&=32767,hn=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{gn=6,hn=null;return}}if(c=c.sibling,c!==null){hn=c;return}hn=c=o}while(c!==null);gn===0&&(gn=5)}function ta(o,c,m){var w=kt,A=Xr.transition;try{Xr.transition=null,kt=1,f0(o,c,m,w)}finally{Xr.transition=A,kt=w}return null}function f0(o,c,m,w){do ul();while(lo!==null);if((wt&6)!==0)throw Error(t(327));m=o.finishedWork;var A=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var k=m.lanes|m.childLanes;if(Sm(o,k),o===Cn&&(hn=Cn=null,jn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Id||(Id=!0,Mg(Wl,function(){return ul(),null})),k=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||k){k=Xr.transition,Xr.transition=null;var D=kt;kt=1;var U=wt;wt|=4,Uf.current=null,c0(o,m),Bf(m,o),r0($o),Mu=!!oc,$o=oc=null,o.current=m,Td(m),jy(),wt=U,kt=D,Xr.transition=k}else o.current=m;if(Id&&(Id=!1,lo=o,sr=A),k=o.pendingLanes,k===0&&(ao=null),By(m.stateNode),yr(o,zt()),c!==null)for(w=o.onRecoverableError,m=0;m<c.length;m++)A=c[m],w(A.value,{componentStack:A.stack,digest:A.digest});if(Md)throw Md=!1,o=zf,zf=null,o;return(sr&1)!==0&&o.tag!==0&&ul(),k=o.pendingLanes,(k&1)!==0?o===Hf?Ic++:(Ic=0,Hf=o):Ic=0,Zs(),null}function ul(){if(lo!==null){var o=Oo(sr),c=Xr.transition,m=kt;try{if(Xr.transition=null,kt=16>o?16:o,lo===null)var w=!1;else{if(o=lo,lo=null,sr=0,(wt&6)!==0)throw Error(t(331));var A=wt;for(wt|=4,Ne=o.current;Ne!==null;){var k=Ne,D=k.child;if((Ne.flags&16)!==0){var U=k.deletions;if(U!==null){for(var G=0;G<U.length;G++){var de=U[G];for(Ne=de;Ne!==null;){var Ae=Ne;switch(Ae.tag){case 0:case 11:case 15:xs(8,Ae,k)}var Ee=Ae.child;if(Ee!==null)Ee.return=Ae,Ne=Ee;else for(;Ne!==null;){Ae=Ne;var xe=Ae.sibling,Ie=Ae.return;if(wg(Ae),Ae===de){Ne=null;break}if(xe!==null){xe.return=Ie,Ne=xe;break}Ne=Ie}}}var Le=k.alternate;if(Le!==null){var je=Le.child;if(je!==null){Le.child=null;do{var sn=je.sibling;je.sibling=null,je=sn}while(je!==null)}}Ne=k}}if((k.subtreeFlags&2064)!==0&&D!==null)D.return=k,Ne=D;else e:for(;Ne!==null;){if(k=Ne,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:xs(9,k,k.return)}var re=k.sibling;if(re!==null){re.return=k.return,Ne=re;break e}Ne=k.return}}var X=o.current;for(Ne=X;Ne!==null;){D=Ne;var oe=D.child;if((D.subtreeFlags&2064)!==0&&oe!==null)oe.return=D,Ne=oe;else e:for(D=X;Ne!==null;){if(U=Ne,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Tc(9,U)}}catch($e){Qt(U,U.return,$e)}if(U===D){Ne=null;break e}var ke=U.sibling;if(ke!==null){ke.return=U.return,Ne=ke;break e}Ne=U.return}}if(wt=A,Zs(),Ri&&typeof Ri.onPostCommitFiberRoot=="function")try{Ri.onPostCommitFiberRoot(Cu,o)}catch{}w=!0}return w}finally{kt=m,Xr.transition=c}}return!1}function Ld(o,c,m){c=Qo(m,c),c=_c(o,c,1),o=Gr(o,c,1),c=or(),o!==null&&(Gl(o,1,c),yr(o,c))}function Qt(o,c,m){if(o.tag===3)Ld(o,o,m);else for(;c!==null;){if(c.tag===3){Ld(c,o,m);break}else if(c.tag===1){var w=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ao===null||!ao.has(w))){o=Qo(m,o),o=bd(c,o,1),c=Gr(c,o,1),o=or(),c!==null&&(Gl(c,1,o),yr(c,o));break}}c=c.return}}function p0(o,c,m){var w=o.pingCache;w!==null&&w.delete(c),c=or(),o.pingedLanes|=o.suspendedLanes&m,Cn===o&&(jn&m)===m&&(gn===4||gn===3&&(jn&130023424)===jn&&500>zt()-Vf?ea(o,0):Rd|=m),yr(o,c)}function Pg(o,c){c===0&&((o.mode&1)===0?c=1:(c=Eu,Eu<<=1,(Eu&130023424)===0&&(Eu=4194304)));var m=or();o=gs(o,c),o!==null&&(Gl(o,c,m),yr(o,m))}function m0(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),Pg(o,m)}function g0(o,c){var m=0;switch(o.tag){case 13:var w=o.stateNode,A=o.memoizedState;A!==null&&(m=A.retryLane);break;case 19:w=o.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(c),Pg(o,m)}var Rg;Rg=function(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps||fr.current)rr=!0;else{if((o.lanes&m)===0&&(c.flags&128)===0)return rr=!1,gg(o,c,m);rr=(o.flags&131072)!==0}else rr=!1,$t&&(c.flags&1048576)!==0&&eg(c,nd,c.index);switch(c.lanes=0,c.tag){case 2:var w=c.type;Ad(o,c),o=c.pendingProps;var A=Ka(c,Hn.current);to(c,m),A=Yo(null,c,w,o,A,m);var k=dd();return c.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,pr(w)?(k=!0,Vr(c)):k=!1,c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,ad(c),A.updater=wd,c.stateNode=A,A._reactInternals=c,kf(c,w,o,m),c=Of(null,c,w,!0,k,m)):(c.tag=0,$t&&k&&cc(c),On(null,c,A,m),c=c.child),c;case 16:w=c.elementType;e:{switch(Ad(o,c),o=c.pendingProps,A=w._init,w=A(w._payload),c.type=w,A=c.tag=y0(w),o=Yr(w,o),A){case 0:c=If(null,c,w,o,m);break e;case 1:c=Df(null,c,w,o,m);break e;case 11:c=pg(null,c,w,o,m);break e;case 14:c=Pf(null,c,w,Yr(w.type,o),m);break e}throw Error(t(306,w,""))}return c;case 0:return w=c.type,A=c.pendingProps,A=c.elementType===w?A:Yr(w,A),If(o,c,w,A,m);case 1:return w=c.type,A=c.pendingProps,A=c.elementType===w?A:Yr(w,A),Df(o,c,w,A,m);case 3:e:{if(mg(c),o===null)throw Error(t(387));w=c.pendingProps,k=c.memoizedState,A=k.element,ig(o,c),Qa(c,w,null,m);var D=c.memoizedState;if(w=D.element,k.isDehydrated)if(k={element:w,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){A=Qo(Error(t(423)),c),c=Hi(o,c,w,m,A);break e}else if(w!==A){A=Qo(Error(t(424)),c),c=Hi(o,c,w,m,A);break e}else for(kr=Xs(c.stateNode.containerInfo.firstChild),qn=c,$t=!0,di=null,m=id(c,null,w,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Fi(),w===A){c=fi(o,c,m);break e}On(o,c,w,m)}c=c.child}return c;case 5:return pf(c),o===null&&mr(c),w=c.type,A=c.pendingProps,k=o!==null?o.memoizedProps:null,D=A.children,ac(w,A)?D=null:k!==null&&ac(w,k)&&(c.flags|=32),Mf(o,c),On(o,c,D,m),c.child;case 6:return o===null&&mr(c),null;case 13:return Sd(o,c,m);case 4:return ff(c,c.stateNode.containerInfo),w=c.pendingProps,o===null?c.child=en(c,null,w,m):On(o,c,w,m),c.child;case 11:return w=c.type,A=c.pendingProps,A=c.elementType===w?A:Yr(w,A),pg(o,c,w,A,m);case 7:return On(o,c,c.pendingProps,m),c.child;case 8:return On(o,c,c.pendingProps.children,m),c.child;case 12:return On(o,c,c.pendingProps.children,m),c.child;case 10:e:{if(w=c.type._context,A=c.pendingProps,k=c.memoizedProps,D=A.value,jt(hc,w._currentValue),w._currentValue=D,k!==null)if(ue(k.value,D)){if(k.children===A.children&&!fr.current){c=fi(o,c,m);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var U=k.dependencies;if(U!==null){D=k.child;for(var G=U.firstContext;G!==null;){if(G.context===w){if(k.tag===1){G=vs(-1,m&-m),G.tag=2;var de=k.updateQueue;if(de!==null){de=de.shared;var Ae=de.pending;Ae===null?G.next=G:(G.next=Ae.next,Ae.next=G),de.pending=G}}k.lanes|=m,G=k.alternate,G!==null&&(G.lanes|=m),Dn(k.return,m,c),U.lanes|=m;break}G=G.next}}else if(k.tag===10)D=k.type===c.type?null:k.child;else if(k.tag===18){if(D=k.return,D===null)throw Error(t(341));D.lanes|=m,U=D.alternate,U!==null&&(U.lanes|=m),Dn(D,m,c),D=k.sibling}else D=k.child;if(D!==null)D.return=k;else for(D=k;D!==null;){if(D===c){D=null;break}if(k=D.sibling,k!==null){k.return=D.return,D=k;break}D=D.return}k=D}On(o,c,A.children,m),c=c.child}return c;case 9:return A=c.type,w=c.pendingProps.children,to(c,m),A=Wr(A),w=w(A),c.flags|=1,On(o,c,w,m),c.child;case 14:return w=c.type,A=Yr(w,c.pendingProps),A=Yr(w.type,A),Pf(o,c,w,A,m);case 15:return zi(o,c,c.type,c.pendingProps,m);case 17:return w=c.type,A=c.pendingProps,A=c.elementType===w?A:Yr(w,A),Ad(o,c),c.tag=1,pr(w)?(o=!0,Vr(c)):o=!1,to(c,m),Xo(c,w,A),kf(c,w,A,m),Of(null,c,w,!0,o,m);case 19:return io(o,c,m);case 22:return Rf(o,c,m)}throw Error(t(156,c.tag))};function Mg(o,c){return Su(o,c)}function v0(o,c,m,w){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(o,c,m,w){return new v0(o,c,m,w)}function jd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function y0(o){if(typeof o=="function")return jd(o)?1:0;if(o!=null){if(o=o.$$typeof,o===le)return 11;if(o===q)return 14}return 2}function yi(o,c){var m=o.alternate;return m===null?(m=Qr(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function Fd(o,c,m,w,A,k){var D=2;if(w=o,typeof o=="function")jd(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case $:return na(m.children,A,k,c);case W:D=8,A|=8;break;case Y:return o=Qr(12,m,c,A|2),o.elementType=Y,o.lanes=k,o;case ce:return o=Qr(13,m,c,A),o.elementType=ce,o.lanes=k,o;case me:return o=Qr(19,m,c,A),o.elementType=me,o.lanes=k,o;case te:return Bd(m,A,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ae:D=10;break e;case se:D=9;break e;case le:D=11;break e;case q:D=14;break e;case z:D=16,w=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=Qr(D,m,c,A),c.elementType=o,c.type=w,c.lanes=k,c}function na(o,c,m,w){return o=Qr(7,o,w,c),o.lanes=m,o}function Bd(o,c,m,w){return o=Qr(22,o,w,c),o.elementType=te,o.lanes=m,o.stateNode={isHidden:!1},o}function Xf(o,c,m){return o=Qr(6,o,null,c),o.lanes=m,o}function Qf(o,c,m){return c=Qr(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function w0(o,c,m,w,A){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=w,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function Jf(o,c,m,w,A,k,D,U,G){return o=new w0(o,c,m,U,G),c===1?(c=1,k===!0&&(c|=8)):c=0,k=Qr(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},ad(k),o}function _0(o,c,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:w==null?null:""+w,children:o,containerInfo:c,implementation:m}}function Ig(o){if(!o)return Js;o=o._reactInternals;e:{if(ye(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(pr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var m=o.type;if(pr(m))return Qm(o,m,c)}return c}function Dg(o,c,m,w,A,k,D,U,G){return o=Jf(m,w,!0,o,A,k,D,U,G),o.context=Ig(null),m=o.current,w=or(),A=co(m),k=vs(w,A),k.callback=c??null,Gr(m,k,A),o.current.lanes=A,Gl(o,A,w),yr(o,w),o}function $d(o,c,m,w){var A=c.current,k=or(),D=co(A);return m=Ig(m),c.context===null?c.context=m:c.pendingContext=m,c=vs(k,D),c.payload={element:o},w=w===void 0?null:w,w!==null&&(c.callback=w),o=Gr(A,c,D),o!==null&&(vi(o,A,D,k),ld(o,A,D)),D}function Ud(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Og(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function Zf(o,c){Og(o,c),(o=o.alternate)&&Og(o,c)}function b0(){return null}var Ng=typeof reportError=="function"?reportError:function(o){console.error(o)};function Vd(o){this._internalRoot=o}Oc.prototype.render=Vd.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));$d(o,c,null,null)},Oc.prototype.unmount=Vd.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Zo(function(){$d(null,o,null,null)}),c[Er]=null}};function Oc(o){this._internalRoot=o}Oc.prototype.unstable_scheduleHydration=function(o){if(o){var c=Bh();o={blockedOn:null,target:o,priority:c};for(var m=0;m<Hs.length&&c!==0&&c<Hs[m].priority;m++);Hs.splice(m,0,o),m===0&&Em(o)}};function ep(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function zd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Lg(){}function x0(o,c,m,w,A){if(A){if(typeof w=="function"){var k=w;w=function(){var de=Ud(D);k.call(de)}}var D=Dg(c,w,o,0,null,!1,!1,"",Lg);return o._reactRootContainer=D,o[Er]=D.current,Ks(o.nodeType===8?o.parentNode:o),Zo(),D}for(;A=o.lastChild;)o.removeChild(A);if(typeof w=="function"){var U=w;w=function(){var de=Ud(G);U.call(de)}}var G=Jf(o,0,!1,null,null,!1,!1,"",Lg);return o._reactRootContainer=G,o[Er]=G.current,Ks(o.nodeType===8?o.parentNode:o),Zo(function(){$d(c,G,m,w)}),G}function ra(o,c,m,w,A){var k=m._reactRootContainer;if(k){var D=k;if(typeof A=="function"){var U=A;A=function(){var G=Ud(D);U.call(G)}}$d(c,D,o,A)}else D=x0(m,c,o,A,w);return Ud(D)}Fh=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var m=Ra(c.pendingLanes);m!==0&&(Kl(c,m|1),yr(c,zt()),(wt&6)===0&&(Jo=zt()+500,Zs()))}break;case 13:Zo(function(){var w=gs(o,1);if(w!==null){var A=or();vi(w,o,1,A)}}),Zf(o,1)}},Tu=function(o){if(o.tag===13){var c=gs(o,134217728);if(c!==null){var m=or();vi(c,o,134217728,m)}Zf(o,134217728)}},Am=function(o){if(o.tag===13){var c=co(o),m=gs(o,c);if(m!==null){var w=or();vi(m,o,c,w)}Zf(o,c)}},Bh=function(){return kt},$h=function(o,c){var m=kt;try{return kt=o,c()}finally{kt=m}},Ul=function(o,c,m){switch(c){case"input":if(Mn(o,m),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var w=m[c];if(w!==o&&w.form===o.form){var A=Ju(w);if(!A)throw Error(t(90));Rt(w),Mn(w,A)}}}break;case"textarea":mu(o,m);break;case"select":c=m.value,c!=null&&Sn(o,!!m.multiple,c,!1)}},_u=Gf,Vl=Zo;var S0={usingClientEntryPoint:!1,Events:[zn,lt,Ju,yu,wu,Gf]},Nc={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A0={bundleType:Nc.bundleType,version:Nc.version,rendererPackageName:Nc.rendererPackageName,rendererConfig:Nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Pi(o),o===null?null:o.stateNode},findFiberByHostInstance:Nc.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Cu=Hd.inject(A0),Ri=Hd}catch{}}return ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S0,ti.createPortal=function(o,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(c))throw Error(t(200));return _0(o,c,null,m)},ti.createRoot=function(o,c){if(!ep(o))throw Error(t(299));var m=!1,w="",A=Ng;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),c=Jf(o,1,!1,null,null,m,!1,w,A),o[Er]=c.current,Ks(o.nodeType===8?o.parentNode:o),new Vd(c)},ti.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Pi(c),o=o===null?null:o.stateNode,o},ti.flushSync=function(o){return Zo(o)},ti.hydrate=function(o,c,m){if(!zd(c))throw Error(t(200));return ra(null,o,c,!0,m)},ti.hydrateRoot=function(o,c,m){if(!ep(o))throw Error(t(405));var w=m!=null&&m.hydratedSources||null,A=!1,k="",D=Ng;if(m!=null&&(m.unstable_strictMode===!0&&(A=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(D=m.onRecoverableError)),c=Dg(c,null,o,1,m??null,A,!1,k,D),o[Er]=c.current,Ks(o),w)for(o=0;o<w.length;o++)m=w[o],A=m._getVersion,A=A(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,A]:c.mutableSourceEagerHydrationData.push(m,A);return new Oc(c)},ti.render=function(o,c,m){if(!zd(c))throw Error(t(200));return ra(null,o,c,!1,m)},ti.unmountComponentAtNode=function(o){if(!zd(o))throw Error(t(40));return o._reactRootContainer?(Zo(function(){ra(null,null,o,!1,function(){o._reactRootContainer=null,o[Er]=null})}),!0):!1},ti.unstable_batchedUpdates=Gf,ti.unstable_renderSubtreeIntoContainer=function(o,c,m,w){if(!zd(m))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return ra(o,c,m,!1,w)},ti.version="18.3.1-next-f1338f8080-20240426",ti}var qx;function K1(){if(qx)return $0.exports;qx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$0.exports=oO(),$0.exports}var Gx;function aO(){if(Gx)return Ug;Gx=1;var n=K1();return Ug.createRoot=n.createRoot,Ug.hydrateRoot=n.hydrateRoot,Ug}var lO=aO();const cO=tm(lO),uO="modulepreload",dO=function(n){return"/"+n},Kx={},qe=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=d(t.map(h=>{if(h=dO(h),h in Kx)return;Kx[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":uO,f||(v.as="script"),v.crossOrigin="",v.href=h,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((b,S)=>{v.addEventListener("load",b),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var nm=K1();const hO=tm(nm);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lp(){return Lp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lp.apply(this,arguments)}var _l;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_l||(_l={}));const Yx="popstate";function fO(n){n===void 0&&(n={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return Iw("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Ev(i)}return mO(e,t,null,n)}function bn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Y1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pO(){return Math.random().toString(36).substr(2,8)}function Xx(n,e){return{usr:n.state,key:n.key,idx:e}}function Iw(n,e,t,r){return t===void 0&&(t=null),Lp({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?kh(e):e,{state:t,key:e&&e.key||r||pO()})}function Ev(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function kh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function mO(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=_l.Pop,d=null,h=f();h==null&&(h=0,a.replaceState(Lp({},a.state,{idx:h}),""));function f(){return(a.state||{idx:null}).idx}function g(){l=_l.Pop;let E=f(),P=E==null?null:E-h;h=E,d&&d({action:l,location:x.location,delta:P})}function v(E,P){l=_l.Push;let M=Iw(x.location,E,P);h=f()+1;let R=Xx(M,h),O=x.createHref(M);try{a.pushState(R,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(O)}s&&d&&d({action:l,location:x.location,delta:1})}function b(E,P){l=_l.Replace;let M=Iw(x.location,E,P);h=f();let R=Xx(M,h),O=x.createHref(M);a.replaceState(R,"",O),s&&d&&d({action:l,location:x.location,delta:0})}function S(E){let P=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof E=="string"?E:Ev(E);return M=M.replace(/ $/,"%20"),bn(P,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,P)}let x={get action(){return l},get location(){return n(i,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Yx,g),d=E,()=>{i.removeEventListener(Yx,g),d=null}},createHref(E){return e(i,E)},createURL:S,encodeLocation(E){let P=S(E);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:b,go(E){return a.go(E)}};return x}var Qx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Qx||(Qx={}));function gO(n,e,t){return t===void 0&&(t="/"),vO(n,e,t)}function vO(n,e,t,r){let i=typeof e=="string"?kh(e):e,s=D_(i.pathname||"/",t);if(s==null)return null;let a=X1(n);yO(a);let l=null;for(let d=0;l==null&&d<a.length;++d){let h=RO(s);l=kO(a[d],h)}return l}function X1(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,l)=>{let d={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};d.relativePath.startsWith("/")&&(bn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=bl([r,d.relativePath]),f=t.concat(d);s.children&&s.children.length>0&&(bn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),X1(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:CO(h,s.index),routesMeta:f})};return n.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let d of Q1(s.path))i(s,a,d)}),e}function Q1(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Q1(r.join("/")),l=[];return l.push(...a.map(d=>d===""?s:[s,d].join("/"))),i&&l.push(...a),l.map(d=>n.startsWith("/")&&d===""?"/":d)}function yO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wO=/^:[\w-]+$/,_O=3,bO=2,xO=1,SO=10,AO=-2,Jx=n=>n==="*";function CO(n,e){let t=n.split("/"),r=t.length;return t.some(Jx)&&(r+=AO),e&&(r+=bO),t.filter(i=>!Jx(i)).reduce((i,s)=>i+(wO.test(s)?_O:s===""?xO:SO),r)}function EO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function kO(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",g=TO({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),v=d.route;if(!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:bl([s,g.pathname]),pathnameBase:OO(bl([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=bl([s,g.pathnameBase]))}return a}function TO(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,g)=>{let{paramName:v,isOptional:b}=f;if(v==="*"){let x=l[g]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[g];return b&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:n}}function PO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Y1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Y1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function D_(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function MO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?kh(n):n;return{pathname:t?t.startsWith("/")?t:IO(t,e):e,search:NO(r),hash:LO(i)}}function IO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function z0(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function O_(n,e){let t=DO(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function N_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=kh(n):(i=Lp({},n),bn(!i.pathname||!i.pathname.includes("?"),z0("?","pathname","search",i)),bn(!i.pathname||!i.pathname.includes("#"),z0("#","pathname","hash",i)),bn(!i.search||!i.search.includes("#"),z0("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}l=g>=0?e[g]:"/"}let d=MO(i,l),h=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const bl=n=>n.join("/").replace(/\/\/+/g,"/"),OO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const J1=["post","put","patch","delete"];new Set(J1);const FO=["get",...J1];new Set(FO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jp(){return jp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jp.apply(this,arguments)}const L_=C.createContext(null),BO=C.createContext(null),Ml=C.createContext(null),Xv=C.createContext(null),bo=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Z1=C.createContext(null);function $O(n,e){let{relative:t}=e===void 0?{}:e;Th()||bn(!1);let{basename:r,navigator:i}=C.useContext(Ml),{hash:s,pathname:a,search:l}=tC(n,{relative:t}),d=a;return r!=="/"&&(d=a==="/"?r:bl([r,a])),i.createHref({pathname:d,search:l,hash:s})}function Th(){return C.useContext(Xv)!=null}function Ls(){return Th()||bn(!1),C.useContext(Xv).location}function eC(n){C.useContext(Ml).static||C.useLayoutEffect(n)}function Ph(){let{isDataRoute:n}=C.useContext(bo);return n?tN():UO()}function UO(){Th()||bn(!1);let n=C.useContext(L_),{basename:e,future:t,navigator:r}=C.useContext(Ml),{matches:i}=C.useContext(bo),{pathname:s}=Ls(),a=JSON.stringify(O_(i,t.v7_relativeSplatPath)),l=C.useRef(!1);return eC(()=>{l.current=!0}),C.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let g=N_(h,JSON.parse(a),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:bl([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,a,s,n])}const VO=C.createContext(null);function zO(n){let e=C.useContext(bo).outlet;return e&&C.createElement(VO.Provider,{value:n},e)}function d9(){let{matches:n}=C.useContext(bo),e=n[n.length-1];return e?e.params:{}}function tC(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=C.useContext(Ml),{matches:i}=C.useContext(bo),{pathname:s}=Ls(),a=JSON.stringify(O_(i,r.v7_relativeSplatPath));return C.useMemo(()=>N_(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function HO(n,e){return WO(n,e)}function WO(n,e,t,r){Th()||bn(!1);let{navigator:i}=C.useContext(Ml),{matches:s}=C.useContext(bo),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let h=Ls(),f;if(e){var g;let E=typeof e=="string"?kh(e):e;d==="/"||(g=E.pathname)!=null&&g.startsWith(d)||bn(!1),f=E}else f=h;let v=f.pathname||"/",b=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=gO(n,{pathname:b}),x=XO(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:bl([d,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:bl([d,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,t,r);return e&&x?C.createElement(Xv.Provider,{value:{location:jp({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_l.Pop}},x):x}function qO(){let n=eN(),e=jO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,null)}const GO=C.createElement(qO,null);class KO extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?C.createElement(bo.Provider,{value:this.props.routeContext},C.createElement(Z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YO(n){let{routeContext:e,match:t,children:r}=n,i=C.useContext(L_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(bo.Provider,{value:e},r)}function XO(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(i=t)==null?void 0:i.errors;if(l!=null){let f=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);f>=0||bn(!1),a=a.slice(0,Math.min(a.length,f+1))}let d=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:v,errors:b}=t,S=g.route.loader&&v[g.route.id]===void 0&&(!b||b[g.route.id]===void 0);if(g.route.lazy||S){d=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,g,v)=>{let b,S=!1,x=null,E=null;t&&(b=l&&g.route.id?l[g.route.id]:void 0,x=g.route.errorElement||GO,d&&(h<0&&v===0?(nN("route-fallback"),S=!0,E=null):h===v&&(S=!0,E=g.route.hydrateFallbackElement||null)));let P=e.concat(a.slice(0,v+1)),M=()=>{let R;return b?R=x:S?R=E:g.route.Component?R=C.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=f,C.createElement(YO,{match:g,routeContext:{outlet:f,matches:P,isDataRoute:t!=null},children:R})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?C.createElement(KO,{location:t.location,revalidation:t.revalidation,component:x,error:b,children:M(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):M()},null)}var nC=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(nC||{}),rC=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(rC||{});function QO(n){let e=C.useContext(L_);return e||bn(!1),e}function JO(n){let e=C.useContext(BO);return e||bn(!1),e}function ZO(n){let e=C.useContext(bo);return e||bn(!1),e}function iC(n){let e=ZO(),t=e.matches[e.matches.length-1];return t.route.id||bn(!1),t.route.id}function eN(){var n;let e=C.useContext(Z1),t=JO(),r=iC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function tN(){let{router:n}=QO(nC.UseNavigateStable),e=iC(rC.UseNavigateStable),t=C.useRef(!1);return eC(()=>{t.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,jp({fromRouteId:e},s)))},[n,e])}const Zx={};function nN(n,e,t){Zx[n]||(Zx[n]=!0)}function rN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Fp(n){let{to:e,replace:t,state:r,relative:i}=n;Th()||bn(!1);let{future:s,static:a}=C.useContext(Ml),{matches:l}=C.useContext(bo),{pathname:d}=Ls(),h=Ph(),f=N_(e,O_(l,s.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(f);return C.useEffect(()=>h(JSON.parse(g),{replace:t,state:r,relative:i}),[h,g,i,t,r]),null}function j_(n){return zO(n.context)}function Ve(n){bn(!1)}function iN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=_l.Pop,navigator:s,static:a=!1,future:l}=n;Th()&&bn(!1);let d=e.replace(/^\/*/,"/"),h=C.useMemo(()=>({basename:d,navigator:s,static:a,future:jp({v7_relativeSplatPath:!1},l)}),[d,l,s,a]);typeof r=="string"&&(r=kh(r));let{pathname:f="/",search:g="",hash:v="",state:b=null,key:S="default"}=r,x=C.useMemo(()=>{let E=D_(f,d);return E==null?null:{location:{pathname:E,search:g,hash:v,state:b,key:S},navigationType:i}},[d,f,g,v,b,S,i]);return x==null?null:C.createElement(Ml.Provider,{value:h},C.createElement(Xv.Provider,{children:t,value:x}))}function sC(n){let{children:e,location:t}=n;return HO(Dw(e),t)}new Promise(()=>{});function Dw(n,e){e===void 0&&(e=[]);let t=[];return C.Children.forEach(n,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){t.push.apply(t,Dw(r.props.children,s));return}r.type!==Ve&&bn(!1),!r.props.index||!r.props.children||bn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Dw(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ow(){return Ow=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ow.apply(this,arguments)}function sN(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function oN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aN(n,e){return n.button===0&&(!e||e==="_self")&&!oN(n)}const lN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cN="6";try{window.__reactRouterVersion=cN}catch{}const uN="startTransition",eS=I_[uN];function dN(n){let{basename:e,children:t,future:r,window:i}=n,s=C.useRef();s.current==null&&(s.current=fO({window:i,v5Compat:!0}));let a=s.current,[l,d]=C.useState({action:a.action,location:a.location}),{v7_startTransition:h}=r||{},f=C.useCallback(g=>{h&&eS?eS(()=>d(g)):d(g)},[d,h]);return C.useLayoutEffect(()=>a.listen(f),[a,f]),C.useEffect(()=>rN(r),[r]),C.createElement(iN,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:r})}const hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=C.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:d,to:h,preventScrollReset:f,viewTransition:g}=e,v=sN(e,lN),{basename:b}=C.useContext(Ml),S,x=!1;if(typeof h=="string"&&fN.test(h)&&(S=h,hN))try{let R=new URL(window.location.href),O=h.startsWith("//")?new URL(R.protocol+h):new URL(h),L=D_(O.pathname,b);O.origin===R.origin&&L!=null?h=L+O.search+O.hash:x=!0}catch{}let E=$O(h,{relative:i}),P=mN(h,{replace:a,state:l,target:d,preventScrollReset:f,relative:i,viewTransition:g});function M(R){r&&r(R),R.defaultPrevented||P(R)}return C.createElement("a",Ow({},v,{href:S||E,onClick:x||s?r:M,ref:t,target:d}))});var tS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(tS||(tS={}));var nS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(nS||(nS={}));function mN(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=e===void 0?{}:e,d=Ph(),h=Ls(),f=tC(n,{relative:a});return C.useCallback(g=>{if(aN(g,t)){g.preventDefault();let v=r!==void 0?r:Ev(h)===Ev(f);d(n,{replace:v,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[h,d,f,r,i,t,n,s,a,l])}const oC=C.createContext(),aC=()=>{const n=C.useContext(oC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},gN=({children:n})=>{const[e,t]=C.useState(()=>{try{const i=localStorage.getItem("go-fotografo-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}catch(i){return console.error("Could not access localStorage to get theme.",i),"light"}});C.useEffect(()=>{try{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),localStorage.setItem("go-fotografo-theme",e)}catch(i){console.error("Could not access localStorage to set theme.",i)}},[e]);const r=()=>{t(i=>i==="light"?"dark":"light")};return y.jsx(oC.Provider,{value:{theme:e,setTheme:t,toggleTheme:r},children:n})},vN=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>rm);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class F_ extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class yN extends F_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wN extends F_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _N extends F_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nw;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Nw||(Nw={}));var bN=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class xN{constructor(e,{headers:t={},customFetch:r,region:i=Nw.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=vN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return bN(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let l={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let h;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:h}).catch(S=>{throw new yN(S)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new wN(f);if(!f.ok)throw new _N(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return v==="application/json"?b=yield f.json():v==="application/octet-stream"?b=yield f.blob():v==="text/event-stream"?b=f:v==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null}}catch(i){return{data:null,error:i}}})}}var Xn={},Kd={},Yd={},Xd={},Qd={},Jd={},SN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_h=SN();const AN=_h.fetch,CN=_h.fetch.bind(_h),EN=_h.Headers,kN=_h.Request,TN=_h.Response,rm=Object.freeze(Object.defineProperty({__proto__:null,Headers:EN,Request:kN,Response:TN,default:CN,fetch:AN},Symbol.toStringTag,{value:"Module"})),PN=eO(rm);var Vg={},rS;function lC(){if(rS)return Vg;rS=1,Object.defineProperty(Vg,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Vg.default=n,Vg}var iS;function cC(){if(iS)return Jd;iS=1;var n=Jd&&Jd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Jd,"__esModule",{value:!0});const e=n(PN),t=n(lC());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=Object.assign({},this.headers),this.headers[s]=a,this}then(s,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,g,v;let b=null,S=null,x=null,E=h.status,P=h.statusText;if(h.ok){if(this.method!=="HEAD"){const L=await h.text();L===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=L:S=JSON.parse(L))}const R=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),O=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");R&&O&&O.length>1&&(x=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,x=null,E=406,P="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const R=await h.text();try{b=JSON.parse(R),Array.isArray(b)&&h.status===404&&(S=[],b=null,E=200,P="OK")}catch{h.status===404&&R===""?(E=204,P="No Content"):b={message:R}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,E=200,P="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:S,count:x,status:E,statusText:P}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,g,v;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(g=h?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(v=h?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(s,a)}returns(){return this}overrideTypes(){return this}}return Jd.default=r,Jd}var sS;function uC(){if(sS)return Qd;sS=1;var n=Qd&&Qd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qd,"__esModule",{value:!0});const e=n(cC());class t extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:l=a}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[i?"analyze":null,s?"verbose":null,a?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${v}"; options=${g};`,h==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Qd.default=t,Qd}var oS;function B_(){if(oS)return Xd;oS=1;var n=Xd&&Xd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xd,"__esModule",{value:!0});const e=n(uC());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const a=Array.from(new Set(s)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:a,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${d}fts${h}.${s}`),this}match(i){return Object.entries(i).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(i,s,a){return this.url.searchParams.append(i,`not.${s}.${a}`),this}or(i,{foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,s,a){return this.url.searchParams.append(i,`${s}.${a}`),this}}return Xd.default=t,Xd}var aS;function dC(){if(aS)return Yd;aS=1;var n=Yd&&Yd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yd,"__esModule",{value:!0});const e=n(B_());class t{constructor(i,{headers:s={},schema:a,fetch:l}){this.url=i,this.headers=s,this.schema=a,this.fetch=l}select(i,{head:s=!1,count:a}={}){const l=s?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!d?"":(f==='"'&&(d=!d),f)).join("");return this.url.searchParams.set("select",h),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:a=!0}={}){const l="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),s&&d.push(`count=${s}`),a||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(i)){const h=i.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:l,defaultToNull:d=!0}={}){const h="POST",f=[`resolution=${a?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&f.push(this.headers.Prefer),l&&f.push(`count=${l}`),d||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const g=i.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(g.length>0){const v=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const a="PATCH",l=[];return this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),this.headers.Prefer=l.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",a=[];return i&&a.push(`count=${i}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Yd.default=t,Yd}var ip={},sp={},lS;function RN(){return lS||(lS=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.version=void 0,sp.version="0.0.0-automated"),sp}var cS;function MN(){if(cS)return ip;cS=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.DEFAULT_HEADERS=void 0;const n=RN();return ip.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},ip}var uS;function IN(){if(uS)return Kd;uS=1;var n=Kd&&Kd.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Kd,"__esModule",{value:!0});const e=n(dC()),t=n(B_()),r=MN();class i{constructor(a,{headers:l={},schema:d,fetch:h}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),l),this.schemaName=d,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:d=!1,get:h=!1,count:f}={}){let g;const v=new URL(`${this.url}/rpc/${a}`);let b;d||h?(g=d?"HEAD":"GET",Object.entries(l).filter(([x,E])=>E!==void 0).map(([x,E])=>[x,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([x,E])=>{v.searchParams.append(x,E)})):(g="POST",b=l);const S=Object.assign({},this.headers);return f&&(S.Prefer=`count=${f}`),new t.default({method:g,url:v,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Kd.default=i,Kd}var dS;function DN(){if(dS)return Xn;dS=1;var n=Xn&&Xn.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.PostgrestError=Xn.PostgrestBuilder=Xn.PostgrestTransformBuilder=Xn.PostgrestFilterBuilder=Xn.PostgrestQueryBuilder=Xn.PostgrestClient=void 0;const e=n(IN());Xn.PostgrestClient=e.default;const t=n(dC());Xn.PostgrestQueryBuilder=t.default;const r=n(B_());Xn.PostgrestFilterBuilder=r.default;const i=n(uC());Xn.PostgrestTransformBuilder=i.default;const s=n(cC());Xn.PostgrestBuilder=s.default;const a=n(lC());return Xn.PostgrestError=a.default,Xn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:a.default},Xn}var ON=DN();const NN=tm(ON),{PostgrestClient:LN,PostgrestQueryBuilder:h9,PostgrestFilterBuilder:f9,PostgrestTransformBuilder:p9,PostgrestBuilder:m9,PostgrestError:g9}=NN;let Lw;typeof window>"u"?Lw=require("ws"):Lw=window.WebSocket;const jN="2.11.10",FN={"X-Client-Info":`realtime-js/${jN}`},BN="1.0.0",hC=1e4,$N=1e3;var fh;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(fh||(fh={}));var Ir;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ir||(Ir={}));var Ms;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ms||(Ms={}));var jw;(function(n){n.websocket="websocket"})(jw||(jw={}));var Hc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Hc||(Hc={}));class UN{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+s));a=a+s;const h=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:d,payload:h}}}class fC{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Gt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Gt||(Gt={}));const hS=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=VN(a,n,e,i),s),{})},VN=(n,e,t,r)=>{const i=e.find(l=>l.name===n),s=i?.type,a=t[n];return s&&!r.includes(s)?pC(s,a):Fw(a)},pC=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return qN(e,t)}switch(n){case Gt.bool:return zN(e);case Gt.float4:case Gt.float8:case Gt.int2:case Gt.int4:case Gt.int8:case Gt.numeric:case Gt.oid:return HN(e);case Gt.json:case Gt.jsonb:return WN(e);case Gt.timestamp:return GN(e);case Gt.abstime:case Gt.date:case Gt.daterange:case Gt.int4range:case Gt.int8range:case Gt.money:case Gt.reltime:case Gt.text:case Gt.time:case Gt.timestamptz:case Gt.timetz:case Gt.tsrange:case Gt.tstzrange:return Fw(e);default:return Fw(e)}},Fw=n=>n,zN=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},HN=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},WN=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},qN=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>pC(e,l))}return n},GN=n=>typeof n=="string"?n.replace(" ","T"):n,mC=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class H0{constructor(e,t,r={},i=hC){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(fS||(fS={}));class kp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kp.syncState(this.state,i,s,a),this.pendingDiffs.forEach(d=>{this.state=kp.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=kp.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),l={},d={};return this.map(s,(h,f)=>{a[h]||(d[h]=f)}),this.map(a,(h,f)=>{const g=s[h];if(g){const v=f.map(E=>E.presence_ref),b=g.map(E=>E.presence_ref),S=f.filter(E=>b.indexOf(E.presence_ref)<0),x=g.filter(E=>v.indexOf(E.presence_ref)<0);S.length>0&&(l[h]=S),x.length>0&&(d[h]=x)}else l[h]=f}),this.syncDiff(s,{joins:l,leaves:d},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,d)=>{var h;const f=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(d),f.length>0){const g=e[l].map(b=>b.presence_ref),v=f.filter(b=>g.indexOf(b.presence_ref)<0);e[l].unshift(...v)}r(l,f,d)}),this.map(a,(l,d)=>{let h=e[l];if(!h)return;const f=d.map(g=>g.presence_ref);h=h.filter(g=>f.indexOf(g.presence_ref)<0),e[l]=h,i(l,h,d),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(pS||(pS={}));var mS;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(mS||(mS={}));var fa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class $_{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new H0(this,Ms.join,this.params,this.timeout),this.rejoinTimer=new fC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ir.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ms.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new kp(this),this.broadcastEndpointURL=mC(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:l}}=this.params;this._onError(f=>e?.(fa.CHANNEL_ERROR,f)),this._onClose(()=>e?.(fa.CLOSED));const d={},h={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e?.(fa.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(g=v?.length)!==null&&g!==void 0?g:0,S=[];for(let x=0;x<b;x++){const E=v[x],{filter:{event:P,schema:M,table:R,filter:O}}=E,L=f&&f[x];if(L&&L.event===P&&L.schema===M&&L.table===R&&L.filter===O)S.push(Object.assign(Object.assign({},E),{id:L.id}));else{this.unsubscribe(),this.state=Ir.errored,e?.(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(fa.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ir.errored,e?.(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ir.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ms.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const i=new H0(this,Ms.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new H0(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:l,error:d,leave:h,join:f}=Ms;if(r&&[l,d,h,f].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var S,x,E;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(x=b.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(b=>b.callback(v,r)):(s=this.bindings[a])===null||s===void 0||s.filter(b=>{var S,x,E,P,M,R;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in b){const O=b.id,L=(S=b.filter)===null||S===void 0?void 0:S.event;return O&&((x=t.ids)===null||x===void 0?void 0:x.includes(O))&&(L==="*"||L?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const O=(M=(P=b?.filter)===null||P===void 0?void 0:P.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return O==="*"||O===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===a}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:E,commit_timestamp:P,type:M,errors:R}=S;v=Object.assign(Object.assign({},{schema:x,table:E,commit_timestamp:P,eventType:M,new:{},old:{},errors:R}),this._getPayloadRecords(S))}b.callback(v,r)})}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&$_.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ms.close,{},e)}_onError(e){this._on(Ms.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=hS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=hS(e.columns,e.old_record)),t}}const gS=()=>{},KN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YN{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=FN,this.params={},this.timeout=hC,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gS,this.ref=0,this.logger=gS,this.conn=null,this.sendBuffer=[],this.serializer=new UN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>qe(async()=>{const{default:d}=await Promise.resolve().then(()=>rm);return{default:d}},void 0).then(({default:d})=>d(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${e}/${jw.websocket}`,this.httpEndpoint=mC(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,a)=>a(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fC(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Lw),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new XN(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:BN}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case fh.connecting:return Hc.Connecting;case fh.open:return Hc.Open;case fh.closing:return Hc.Closing;default:return Hc.Closed}}isConnected(){return this.connectionState()===Hc.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new $_(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Ms.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close($N,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:a}=t;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ms.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([KN],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class XN{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=fh.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class U_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class QN extends U_{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bw extends U_{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var JN=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const gC=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:r}=await Promise.resolve().then(()=>rm);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ZN=()=>JN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>rm),void 0)).Response:Response}),$w=n=>{if(Array.isArray(n))return n.map(t=>$w(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=$w(r)}),e},eL=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var ou=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const W0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),tL=(n,e,t)=>ou(void 0,void 0,void 0,function*(){const r=yield ZN();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{const s=n.status||500,a=i?.statusCode||s+"";e(new QN(W0(i),s,a))}).catch(i=>{e(new Bw(W0(i),i))}):e(new Bw(W0(n),n))}),nL=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"||!r?i:(eL(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t))};function im(n,e,t,r,i,s){return ou(this,void 0,void 0,function*(){return new Promise((a,l)=>{n(t,nL(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r?.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>tL(d,l,r))})})}function kv(n,e,t,r){return ou(this,void 0,void 0,function*(){return im(n,"GET",e,t,r)})}function pa(n,e,t,r,i){return ou(this,void 0,void 0,function*(){return im(n,"POST",e,r,i,t)})}function Uw(n,e,t,r,i){return ou(this,void 0,void 0,function*(){return im(n,"PUT",e,r,i,t)})}function rL(n,e,t,r){return ou(this,void 0,void 0,function*(){return im(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function vC(n,e,t,r,i){return ou(this,void 0,void 0,function*(){return im(n,"DELETE",e,r,i,t)})}var ni=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const iL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sL{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=gC(i)}uploadOrUpdate(e,t,r,i){return ni(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},vS),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),g=yield(e=="PUT"?Uw:pa)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:h,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(Qn(s))return{data:null,error:s};throw s}})}upload(e,t,r){return ni(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return ni(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:vS.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const g=yield Uw(this.fetch,l.toString(),d,{headers:f});return{data:{path:s,fullPath:g.Key},error:null}}catch(d){if(Qn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return ni(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield pa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new U_("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}update(e,t,r){return ni(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ni(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}copy(e,t,r){return ni(this,void 0,void 0,function*(){try{return{data:{path:(yield pa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return ni(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield pa(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return ni(this,void 0,void 0,function*(){try{const i=yield pa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}download(e,t){return ni(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),a=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield kv(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Qn(l))return{data:null,error:l};throw l}})}info(e){return ni(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield kv(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$w(r),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}exists(e){return ni(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield rL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Qn(r)&&r instanceof Bw){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const l=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&i.push(d);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${h}`)}}}remove(e){return ni(this,void 0,void 0,function*(){try{return{data:yield vC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}list(e,t,r){return ni(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},iL),t),{prefix:e||""});return{data:yield pa(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Qn(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const oL="2.7.3",aL={"X-Client-Info":`storage-js/${oL}`};var Zd=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};class lL{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},aL),t),this.fetch=gC(r)}listBuckets(){return Zd(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Qn(e))return{data:null,error:e};throw e}})}getBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Zd(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Zd(this,void 0,void 0,function*(){try{return{data:yield Uw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Qn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield pa(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Zd(this,void 0,void 0,function*(){try{return{data:yield vC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Qn(t))return{data:null,error:t};throw t}})}}class cL extends lL{constructor(e,t={},r){super(e,t,r)}from(e){return new sL(this.url,this.headers,e,this.fetch)}}const uL="2.30.0",dL={"X-Client-Info":`supabase-js/${uL}`};var zg={exports:{}},yS;function hL(){return yS||(yS=1,function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof wl<"u"&&wl,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var l=typeof s<"u"&&s||typeof self<"u"&&self||typeof wl<"u"&&wl||{},d={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function h(q){return q&&DataView.prototype.isPrototypeOf(q)}if(d.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(q){return q&&f.indexOf(Object.prototype.toString.call(q))>-1};function v(q){if(typeof q!="string"&&(q=String(q)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(q)||q==="")throw new TypeError('Invalid character in header field name: "'+q+'"');return q.toLowerCase()}function b(q){return typeof q!="string"&&(q=String(q)),q}function S(q){var z={next:function(){var te=q.shift();return{done:te===void 0,value:te}}};return d.iterable&&(z[Symbol.iterator]=function(){return z}),z}function x(q){this.map={},q instanceof x?q.forEach(function(z,te){this.append(te,z)},this):Array.isArray(q)?q.forEach(function(z){if(z.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+z.length);this.append(z[0],z[1])},this):q&&Object.getOwnPropertyNames(q).forEach(function(z){this.append(z,q[z])},this)}x.prototype.append=function(q,z){q=v(q),z=b(z);var te=this.map[q];this.map[q]=te?te+", "+z:z},x.prototype.delete=function(q){delete this.map[v(q)]},x.prototype.get=function(q){return q=v(q),this.has(q)?this.map[q]:null},x.prototype.has=function(q){return this.map.hasOwnProperty(v(q))},x.prototype.set=function(q,z){this.map[v(q)]=b(z)},x.prototype.forEach=function(q,z){for(var te in this.map)this.map.hasOwnProperty(te)&&q.call(z,this.map[te],te,this)},x.prototype.keys=function(){var q=[];return this.forEach(function(z,te){q.push(te)}),S(q)},x.prototype.values=function(){var q=[];return this.forEach(function(z){q.push(z)}),S(q)},x.prototype.entries=function(){var q=[];return this.forEach(function(z,te){q.push([te,z])}),S(q)},d.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function E(q){if(!q._noBody){if(q.bodyUsed)return Promise.reject(new TypeError("Already read"));q.bodyUsed=!0}}function P(q){return new Promise(function(z,te){q.onload=function(){z(q.result)},q.onerror=function(){te(q.error)}})}function M(q){var z=new FileReader,te=P(z);return z.readAsArrayBuffer(q),te}function R(q){var z=new FileReader,te=P(z),V=/charset=([A-Za-z0-9_-]+)/.exec(q.type),ne=V?V[1]:"utf-8";return z.readAsText(q,ne),te}function O(q){for(var z=new Uint8Array(q),te=new Array(z.length),V=0;V<z.length;V++)te[V]=String.fromCharCode(z[V]);return te.join("")}function L(q){if(q.slice)return q.slice(0);var z=new Uint8Array(q.byteLength);return z.set(new Uint8Array(q)),z.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(q){this.bodyUsed=this.bodyUsed,this._bodyInit=q,q?typeof q=="string"?this._bodyText=q:d.blob&&Blob.prototype.isPrototypeOf(q)?this._bodyBlob=q:d.formData&&FormData.prototype.isPrototypeOf(q)?this._bodyFormData=q:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)?this._bodyText=q.toString():d.arrayBuffer&&d.blob&&h(q)?(this._bodyArrayBuffer=L(q.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(q)||g(q))?this._bodyArrayBuffer=L(q):this._bodyText=q=Object.prototype.toString.call(q):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof q=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(q)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var q=E(this);if(q)return q;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var q=E(this);return q||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(d.blob)return this.blob().then(M);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var q=E(this);if(q)return q;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(O(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(ae)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function W(q){var z=q.toUpperCase();return $.indexOf(z)>-1?z:q}function Y(q,z){if(!(this instanceof Y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');z=z||{};var te=z.body;if(q instanceof Y){if(q.bodyUsed)throw new TypeError("Already read");this.url=q.url,this.credentials=q.credentials,z.headers||(this.headers=new x(q.headers)),this.method=q.method,this.mode=q.mode,this.signal=q.signal,!te&&q._bodyInit!=null&&(te=q._bodyInit,q.bodyUsed=!0)}else this.url=String(q);if(this.credentials=z.credentials||this.credentials||"same-origin",(z.headers||!this.headers)&&(this.headers=new x(z.headers)),this.method=W(z.method||this.method||"GET"),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal||function(){if("AbortController"in l){var J=new AbortController;return J.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&te)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(te),(this.method==="GET"||this.method==="HEAD")&&(z.cache==="no-store"||z.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var ne=/\?/;this.url+=(ne.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function ae(q){var z=new FormData;return q.trim().split("&").forEach(function(te){if(te){var V=te.split("="),ne=V.shift().replace(/\+/g," "),J=V.join("=").replace(/\+/g," ");z.append(decodeURIComponent(ne),decodeURIComponent(J))}}),z}function se(q){var z=new x,te=q.replace(/\r?\n[\t ]+/g," ");return te.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var ne=V.split(":"),J=ne.shift().trim();if(J){var F=ne.join(":").trim();try{z.append(J,F)}catch(ie){console.warn("Response "+ie.message)}}}),z}B.call(Y.prototype);function le(q,z){if(!(this instanceof le))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=z.statusText===void 0?"":""+z.statusText,this.headers=new x(z.headers),this.url=z.url||"",this._initBody(q)}B.call(le.prototype),le.prototype.clone=function(){return new le(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},le.error=function(){var q=new le(null,{status:200,statusText:""});return q.ok=!1,q.status=0,q.type="error",q};var ce=[301,302,303,307,308];le.redirect=function(q,z){if(ce.indexOf(z)===-1)throw new RangeError("Invalid status code");return new le(null,{status:z,headers:{location:q}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(z,te){this.message=z,this.name=te;var V=Error(z);this.stack=V.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function me(q,z){return new Promise(function(te,V){var ne=new Y(q,z);if(ne.signal&&ne.signal.aborted)return V(new a.DOMException("Aborted","AbortError"));var J=new XMLHttpRequest;function F(){J.abort()}J.onload=function(){var Te={statusText:J.statusText,headers:se(J.getAllResponseHeaders()||"")};ne.url.indexOf("file://")===0&&(J.status<200||J.status>599)?Te.status=200:Te.status=J.status,Te.url="responseURL"in J?J.responseURL:Te.headers.get("X-Request-URL");var De="response"in J?J.response:J.responseText;setTimeout(function(){te(new le(De,Te))},0)},J.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},J.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},J.onabort=function(){setTimeout(function(){V(new a.DOMException("Aborted","AbortError"))},0)};function ie(Te){try{return Te===""&&l.location.href?l.location.href:Te}catch{return Te}}if(J.open(ne.method,ie(ne.url),!0),ne.credentials==="include"?J.withCredentials=!0:ne.credentials==="omit"&&(J.withCredentials=!1),"responseType"in J&&(d.blob?J.responseType="blob":d.arrayBuffer&&(J.responseType="arraybuffer")),z&&typeof z.headers=="object"&&!(z.headers instanceof x||l.Headers&&z.headers instanceof l.Headers)){var pe=[];Object.getOwnPropertyNames(z.headers).forEach(function(Te){pe.push(v(Te)),J.setRequestHeader(Te,b(z.headers[Te]))}),ne.headers.forEach(function(Te,De){pe.indexOf(De)===-1&&J.setRequestHeader(De,Te)})}else ne.headers.forEach(function(Te,De){J.setRequestHeader(De,Te)});ne.signal&&(ne.signal.addEventListener("abort",F),J.onreadystatechange=function(){J.readyState===4&&ne.signal.removeEventListener("abort",F)}),J.send(typeof ne._bodyInit>"u"?null:ne._bodyInit)})}return me.polyfill=!0,l.fetch||(l.fetch=me,l.Headers=x,l.Request=Y,l.Response=le),a.Headers=x,a.Request=Y,a.Response=le,a.fetch=me,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e}(zg,zg.exports)),zg.exports}var V_=hL();const yC=tm(V_),fL=G1({__proto__:null,default:yC},[V_]);var pL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const mL=n=>{let e;return n?e=n:typeof fetch>"u"?e=yC:e=fetch,(...t)=>e(...t)},gL=()=>typeof Headers>"u"?V_.Headers:Headers,vL=(n,e,t)=>{const r=mL(t),i=gL();return(s,a)=>pL(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:n;let h=new i(a?.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},a),{headers:h}))})};function yL(n){return n.replace(/\/$/,"")}function wL(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:a,auth:l,realtime:d,global:h}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign({},h),s)}}function _L(n){return Math.round(Date.now()/1e3)+n}function bL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const da=()=>typeof document<"u",jc={tested:!1,writable:!1},mv=()=>{if(!da())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jc.tested)return jc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),jc.tested=!0,jc.writable=!0}catch{jc.tested=!0,jc.writable=!1}return jc.writable};function ri(n,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const wC=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await qe(async()=>{const{fetch:r}=await Promise.resolve().then(()=>fL);return{fetch:r}},void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},xL=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",op=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Hg=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},q0=async(n,e)=>{await n.removeItem(e)};function SL(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,a,l,d,h,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)a=e.indexOf(n.charAt(f++)),l=e.indexOf(n.charAt(f++)),d=e.indexOf(n.charAt(f++)),h=e.indexOf(n.charAt(f++)),r=a<<2|l>>4,i=(l&15)<<4|d>>2,s=(d&3)<<6|h,t=t+String.fromCharCode(r),d!=64&&i!=0&&(t=t+String.fromCharCode(i)),h!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Qv{constructor(){this.promise=new Qv.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qv.promiseConstructor=Promise;function wS(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(SL(r))}function AL(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function CL(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function EL(n){return("0"+n.toString(16)).substr(-2)}function Wg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,EL).join("")}async function kL(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function TL(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qg(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await kL(n);return TL(e)}const PL="__stack_guard__",RL="__",ML=/__stack_guard__([a-zA-Z0-9_-]+)__/;let _S=!1,z_;function Vw(n){var e,t;z_();let r;try{throw new Error}catch(s){r=s}const i=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let s=0;s<i.length;s+=1){const l=i[s].match(ML);if(l&&l[1]===n)return!0}return!1}async function zw(n,e){await z_();const t=`${PL}${n}${RL}`;return await{[t]:async()=>await e()}[t]()}z_=async()=>{_S||(_S=!0,await zw("ENV_CHECK",async()=>{const n=Vw("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class H_ extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Tt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class IL extends H_{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function DL(n){return Tt(n)&&n.name==="AuthApiError"}class _C extends H_{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Rh extends H_{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class eh extends Rh{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class G0 extends Rh{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Gg extends Rh{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class aa extends Rh{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class K0 extends Rh{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hw extends Rh{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function bS(n){return Tt(n)&&n.name==="AuthRetryableFetchError"}var OL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const _p=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),NL=[502,503,504];async function xS(n){if(!xL(n))throw new Hw(_p(n),0);if(NL.includes(n.status))throw new Hw(_p(n),n.status);let e;try{e=await n.json()}catch(t){throw new _C(_p(t),t)}throw new IL(_p(e),n.status||500)}const LL=(n,e,t,r)=>{const i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function It(n,e,t,r){var i;const s=Object.assign({},r?.headers);r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await jL(n,e,t+l,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function jL(n,e,t,r,i,s){const a=LL(e,r,i,s);let l;try{l=await n(t,a)}catch(d){throw console.error(d),new Hw(_p(d),0)}if(l.ok||await xS(l),r?.noResolveJson)return l;try{return await l.json()}catch(d){await xS(d)}}function hl(n){var e;let t=null;UL(n)&&(t=Object.assign({},n),t.expires_at=_L(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Wc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function FL(n){return{data:n,error:null}}function BL(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=OL(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},a);return{data:{properties:l,user:d},error:null}}function $L(n){return n}function UL(n){return n.access_token&&n.refresh_token&&n.expires_in}var VL=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class zL{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=wC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=VL(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:BL,redirectTo:t?.redirectTo})}catch(t){if(Tt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,l,d;try{const h={nextPage:null,lastPage:0,total:0},f=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:$L});if(f.error)throw f.error;const g=await f.json(),v=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,b=(d=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);h[`${E}Page`]=x}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(Tt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wc})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Wc})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Tt(t))return{data:null,error:t};throw t}}}const HL="2.43.1",WL="http://localhost:9999",qL="supabase.auth.token",GL={"X-Client-Info":`gotrue-js/${HL}`},SS=10,AS={getItem:n=>mv()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{mv()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{mv()&&globalThis.localStorage.removeItem(n)}};function KL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}KL();const YL={url:WL,storageKey:qL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GL,flowType:"implicit",debug:!1},Kg=30*1e3,CS=3;class Bp{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Bp.nextInstanceID,Bp.nextInstanceID+=1,this.instanceID>0&&da()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},YL),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||AS,this.admin=new zL({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=wC(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===AS&&!mv()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),da()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=zw("_initialize",async()=>{try{const e=da()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Tt(e)?{error:e}:{error:new _C("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:f,password:g,options:v}=e;let b=null,S=null;if(this.flowType==="pkce"){const x=Wg();await op(this.storage,`${this.storageKey}-code-verifier`,x),b=await qg(x),S=x===b?"plain":"s256"}s=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:f,password:g,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},xform:hl})}else if("phone"in e){const{phone:f,password:g,options:v}=e;s=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:g,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:hl})}else throw new Gg("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};const d=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(Tt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:a,options:l}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hl})}else if("phone"in e){const{phone:s,password:a,options:l}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:hl})}else throw new Gg("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new G0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Hg(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:hl});return await q0(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new G0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,l=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:hl}),{data:d,error:h}=l;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new G0}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if(await this._removeSession(),"email"in e){const{email:l,options:d}=e;let h=null,f=null;if(this.flowType==="pkce"){const v=Wg();await op(this.storage,`${this.storageKey}-code-verifier`,v),h=await qg(v),f=v===h?"plain":"s256"}const{error:g}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:l,options:d}=e,{data:h,error:f}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new Gg("You must provide either an email or phone number.")}catch(l){if(Tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:i,error:s}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:hl});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,l=i.user;return a?.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(Tt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:FL})}catch(s){if(Tt(s))return{data:null,error:s};throw s}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new eh;const{error:i}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Tt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await It(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:l}=await It(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Gg("You must provide either an email or phone number and a type")}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await zw("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!Vw("_useSession"))throw new Error("Please use #_useSession()");Vw("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const s=await Hg(this.storage,this.storageKey);this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,i;if(!e){const{data:s,error:a}=t;if(a)throw a;e=(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0}return await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wc})})}catch(t){if(Tt(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new eh;const a=i.session,{data:l,error:d}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:a.access_token,xform:Wc});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Tt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return wS(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new eh;const t=Date.now()/1e3;let r=t,i=!0,s=null;const a=wS(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:d}=await this.getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Tt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new eh;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Tt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!da())throw new aa("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new aa("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new K0("Not a valid PKCE flow url.");if(e){const E=ri("code");if(!E)throw new K0("No code detected.");const{data:P,error:M}=await this.exchangeCodeForSession(E);if(M)throw M;if(!P.session)throw new K0("No session detected.");let R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:P.session,redirectType:null},error:null}}const t=ri("error_description");if(t){const E=ri("error_code");if(!E)throw new aa("No error_code detected.");const P=ri("error");throw P?new aa(t,{error:P,code:E}):new aa("No error detected.")}const r=ri("provider_token"),i=ri("provider_refresh_token"),s=ri("access_token");if(!s)throw new aa("No access_token detected.");const a=ri("expires_in");if(!a)throw new aa("No expires_in detected.");const l=ri("refresh_token");if(!l)throw new aa("No refresh_token detected.");const d=ri("token_type");if(!d)throw new aa("No token_type detected.");const f=Math.round(Date.now()/1e3)+parseInt(a),{data:g,error:v}=await this.getUser(s);if(v)throw v;const b=g.user,S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(a),expires_at:f,refresh_token:l,token_type:d,user:b},x=ri("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:S,redirectType:x},error:null}}catch(t){if(Tt(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return da()&&(!!ri("access_token")||!!ri("error_description"))}async _isPKCEFlow(){const e=await Hg(this.storage,`${this.storageKey}-code-verifier`);return!!ri("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(DL(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await q0(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=bL(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=Wg();await op(this.storage,`${this.storageKey}-code-verifier`,s),r=await qg(s),i=s===r?"plain":"s256"}try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Tt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await CL(async i=>(await AL(i*200),this._debug(t,"refreshing attempt",i),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hl})),(i,s,a)=>a&&a.error&&bS(a.error)&&Date.now()+(i+1)*200-r<Kg)}catch(r){if(this._debug(t,"error",r),Tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),da()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Hg(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+SS;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${SS}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),bS(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new eh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qv;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new eh;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),Tt(s)){const a={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),op(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await q0(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&da()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Kg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kg}ms, refresh threshold is ${CS} ticks`),i<=CS&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!da()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=Wg();await op(this.storage,`${this.storageKey}-code-verifier`,i);const s=await qg(i),a=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",a);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(t?.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const{data:l,error:d}=await It(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(!((i=l?.totp)===null||i===void 0)&&i.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:l}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Tt(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(i.access_token);let l=null;a.aal&&(l=a.aal);let d=l;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}})}}Bp.nextInstanceID=0;class XL extends Bp{constructor(e){super(e)}}var QL=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(f){try{h(r.next(f))}catch(g){a(g)}}function d(f){try{h(r.throw(f))}catch(g){a(g)}}function h(f){f.done?s(f.value):i(f.value).then(l,d)}h((r=r.apply(n,e||[])).next())})};const JL={headers:dL},ZL={schema:"public"},e2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t2={};class n2{constructor(e,t,r){var i,s,a,l,d,h,f,g;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const v=yL(e);this.realtimeUrl=`${v}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${v}/auth/v1`,this.storageUrl=`${v}/storage/v1`,this.functionsUrl=`${v}/functions/v1`;const b=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,S={db:ZL,realtime:t2,auth:Object.assign(Object.assign({},e2),{storageKey:b}),global:JL},x=wL(r??{},S);this.storageKey=(s=(i=x.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=(a=x.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,(h=x.global)===null||h===void 0?void 0:h.fetch),this.fetch=vL(t,this._getAccessToken.bind(this),(f=x.global)===null||f===void 0?void 0:f.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},x.realtime)),this.rest=new LN(`${v}/rest/v1`,{headers:this.headers,schema:(g=x.db)===null||g===void 0?void 0:g.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new xN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new cL(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return QL(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a,debug:l},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XL({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:a,debug:l,fetch:h})}_initRealtimeClient(e){return new YN(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r2=(n,e,t)=>new n2(n,e,t),i2="cdn.gofotografo.com.br",s2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvdXZrdmNuZ21zcXVlYm9rZHlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4NDM3MzIsImV4cCI6MjA2NTQxOTczMn0.SL-ZXxdXUdEQvdn9nws2uOVZksSwduixVqfsmE0NGHU",ES=i2,kS=s2;let Ww;try{Ww=r2(ES,kS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}catch(n){console.error("Erro criando o Supabase client:",n),Ww=null}const Se=Ww,o2=1,TS=768;let Y0=0;function a2(){return Y0=(Y0+1)%Number.MAX_VALUE,Y0.toString()}const Pn={state:{toasts:[],isMobileView:typeof window<"u"?window.innerWidth<TS:!1},listeners:[],getState:()=>Pn.state,setState:n=>{typeof n=="function"?Pn.state=n(Pn.state):Pn.state={...Pn.state,...n},Pn.listeners.forEach(e=>e(Pn.state))},subscribe:n=>(Pn.listeners.push(n),()=>{Pn.listeners=Pn.listeners.filter(e=>e!==n)}),updateMobileView:()=>{if(typeof window<"u"){const n=window.innerWidth<TS;n!==Pn.state.isMobileView&&Pn.setState(e=>({...e,isMobileView:n}))}}};typeof window<"u"&&(window.addEventListener("resize",Pn.updateMobileView),Pn.updateMobileView());const l2=({...n})=>{const{isMobileView:e}=Pn.getState(),t=["Saldos Visíveis","Saldos Ocultos","Modo de Personalização Ativado","Card Adicionado","Card Removido","Projeto movido","Projeto Excluído","Projeto Arquivado","Projeto Restaurado","Coluna Adicionada","Coluna Removida"];if(n.title&&t.includes(n.title))return{id:null,dismiss:()=>{},update:()=>{}};const r=a2(),i=a=>Pn.setState(l=>({...l,toasts:l.toasts.map(d=>d.id===r?{...d,...a}:d)})),s=()=>Pn.setState(a=>({...a,toasts:a.toasts.filter(l=>l.id!==r)}));return Pn.setState(a=>({...a,toasts:[{...n,id:r,dismiss:s},...a.toasts].slice(0,o2)})),{id:r,dismiss:s,update:i}};function js(){const[n,e]=C.useState(Pn.getState());return C.useEffect(()=>Pn.subscribe(r=>{e(r)}),[]),C.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(i)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:l2,toasts:n.toasts,isMobileView:n.isMobileView}}const Tp=n=>{if(!n||!Array.isArray(n))return{transactions:[],totalRevenue:0,totalExpenses:0,operationalProfit:0,totalProLabore:0,netBalance:0,pendingPayments:0};const e=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PAGO").reduce((l,d)=>l+Number(d.valor),0),t=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category!=="Pró-labore").reduce((l,d)=>l+Number(d.valor),0),r=n.filter(l=>l.tipo==="SAIDA"&&l.status==="PAGO"&&l.category==="Pró-labore").reduce((l,d)=>l+Number(d.valor),0),i=e-t,s=i-r,a=n.filter(l=>l.tipo==="ENTRADA"&&l.status==="PENDENTE").reduce((l,d)=>l+Number(d.valor),0);return{transactions:n,totalRevenue:e,totalExpenses:t,operationalProfit:i,totalProLabore:r,netBalance:s,pendingPayments:a}},c2=async(n,e,t)=>{const r={...t,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};delete r.id,"client_id"in r&&(r.cliente_id=r.client_id,delete r.client_id),"date"in r&&(r.data=r.date,delete r.date),"workflow_id"in r&&(r.trabalho_id=r.workflow_id,delete r.workflow_id);const{data:i,error:s}=await n.from("transacoes").insert([r]).select().single();if(s)throw s;return i},u2=async(n,e,t,r)=>{const i={...r,updated_at:new Date().toISOString()};"client_id"in i&&(i.cliente_id=i.client_id,delete i.client_id),"date"in i&&(i.data=i.date,delete i.date),"workflow_id"in i&&(i.trabalho_id=i.workflow_id,delete i.workflow_id);const{data:s,error:a}=await n.from("transacoes").update(i).eq("id",t).eq("user_id",e).select().single();if(a)throw a;return s},d2=async(n,e,t)=>{const{error:r}=await n.from("transacoes").delete().eq("id",t).eq("user_id",e);if(r)throw r},h2=async(n,e)=>{const{data:t,error:r}=await n.from("transacoes").select("*").eq("trabalho_id",e);return r?(console.error("Erro ao buscar transações por workflow_id:",r),[]):t},ah=(n,e,t)=>{console.error(`Erro em ${e}:`,n);const r=`Erro em ${e}: ${n.message}`;t&&t({title:"Erro de Sistema",description:r,variant:"destructive",duration:5e3})},br={profile_photo:null,logo:null,business_name:"",user_name:"",subdomain:"",notifications:{email:!0,push:!0},dashboard_layout:null,workflow_columns:[{id:"novo-lead",title:"Novos Leads",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"agendado",title:"Agendado",cardIds:[],color:"bg-teal-300 dark:bg-teal-700"},{id:"em-andamento",title:"Em Andamento",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"},{id:"concluido",title:"Concluídos",cardIds:[],color:"bg-slate-200 dark:bg-slate-700"}],address:"",photography_type:"",cnpj:"",cpf:"",phones:[],contact_email:"",website_social:{instagram:"",facebook:"",website:""},language:"pt-BR",currency:"BRL",timezone:"America/Sao_Paulo",date_format:"dd/MM/yyyy",automation:{},current_plan_id:"FREE",stripe_customer_id:null,stripe_subscription_id:null,plan_expires_at:null,plan_status:"FREE",trial_ends_at:null,hide_dashboard_balances:!1,took_initial_tour:!1,has_completed_tour:!1,show_greetings:!0,workflow_card_view_mode:"list",workflow_summary_expanded:!0,mobile_menu_items:["dashboard","workflow","clients","financial","calendar"],google_calendar_integrated:!1,google_tokens:null,feature_overrides:{},pix_key:null},gv=[{id:"novo-lead",title:"Novos Leads",cardIds:[]},{id:"proposta-enviada",title:"Propostas Enviadas",cardIds:[]},{id:"negocio-fechado",title:"Negócios Fechados",cardIds:[]},{id:"agendado",title:"Agendado",cardIds:[]},{id:"em-andamento",title:"Em Andamento",cardIds:[]},{id:"concluido",title:"Concluídos",cardIds:[]}],f2=async(n,e,t,r,i)=>{const{data:s,error:a}=await n.from("settings").select("*").eq("user_id",e).limit(1).maybeSingle();if(a&&a.code!=="PGRST116")throw a;const l={};if(s){for(const f in t)t.hasOwnProperty(f)&&(l[f]=t[f]);l.user_name=t.user_name||s.user_name||i,l.contact_email=t.contact_email||s.contact_email||n.auth.user&&n.auth.user().email||i}else{const f={...br,...r||{},...t};for(const g in br)f.hasOwnProperty(g)&&(l[g]=f[g]);if(l.user_id=e,l.user_name=f.user_name||i,l.contact_email=f.contact_email||n.auth.user&&n.auth.user().email||i,l.plan_status=f.plan_status||"TRIAL",l.plan_status==="TRIAL"&&!f.trial_ends_at){const g=new Date;g.setDate(g.getDate()+7),l.trial_ends_at=g.toISOString()}l.took_initial_tour=f.took_initial_tour||!1}s&&Object.keys(l).forEach(f=>{l[f]===void 0&&delete l[f]});let d,h;if(s&&s.id){if(Object.keys(l).length===0)return s;({data:d,error:h}=await n.from("settings").update({...l,updated_at:new Date().toISOString()}).eq("id",s.id).eq("user_id",e).select().single())}else({data:d,error:h}=await n.from("settings").insert([{...l,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single());if(h)throw h;return d},bC=C.createContext(),W_=()=>{const n=C.useContext(bC);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},X0=n=>{if(!n)return!1;const e=n.message||"",t=e.includes("Invalid Refresh Token")||e.includes("Token not found")||e.includes("Session not found"),r=n.code==="400"&&n.error_code==="refresh_token_not_found";return t||r},xC=({children:n})=>{const{toast:e}=js(),[t,r]=C.useState(null),[i,s]=C.useState(null),[a,l]=C.useState(!0),[d,h]=C.useState(br),[f,g]=C.useState(!0),v=C.useCallback(async(P,M)=>{if(X0(P)){e({title:"Sessão Expirada ou Inválida",description:"Sua sessão expirou. Por favor, faça login novamente para continuar.",variant:"destructive",duration:7e3}),Se&&await Se.auth.signOut().catch(R=>{console.error("Erro durante o signOut forçado:",R)}),r(null),s(null),h(br),l(!1),g(!1);return}ah(P,M,e)},[e]),b=C.useCallback(async P=>{if(!P||!Se){h(br),g(!1);return}g(!0);try{const{data:M,error:R}=await Se.from("settings").select("*").eq("user_id",P.id).single(),O=P.user_metadata?.full_name||P.email;if(R&&R.code!=="PGRST116"){if(await v(R,"buscar configurações"),X0(R))return;h({...br,user_name:O,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:gv})}else if(M)h(L=>({...br,...L,...M,user_name:M.user_name||O,contact_email:M.contact_email||P.email,user_id:M.user_id||P.id,profile_photo:M.profile_photo||P.user_metadata?.avatar_url||null,workflow_columns:M.workflow_columns||gv}));else{const L={...br,user_name:O,contact_email:P.email,user_id:P.id,profile_photo:P.user_metadata?.avatar_url||null,workflow_columns:gv};h(L);const{data:B,error:$}=await Se.from("settings").insert([L]).select().single();if($){if(await v($,"criar configurações padrão"),X0($))return}else B&&h(W=>({...br,...W,...B}))}}catch(M){await v(M,"carregar configurações")}finally{g(!1)}},[v]);C.useEffect(()=>{if(l(!0),(async()=>{if(!Se){console.error("Supabase client not initialized. Cannot get session."),l(!1),h(br),g(!1);return}const{data:{session:R},error:O}=await Se.auth.getSession();if(O){console.error("Error getting session:",O),await v(O,"obter sessão de autenticação"),l(!1);return}const L=R?.user??null;s(R),r(L),L&&L.email_confirmed_at?await b(L):(h(br),g(!1),L&&!L.email_confirmed_at&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"})),l(!1)})(),!Se){console.error("Supabase client not initialized. Cannot set auth listener.");return}const{data:M}=Se.auth.onAuthStateChange(async(R,O)=>{l(!0);const L=O?.user??null;s(O),r(L),R==="SIGNED_IN"&&L&&L.email_confirmed_at?await b(L):R==="SIGNED_OUT"?(h(br),g(!1)):R==="USER_UPDATED"&&L&&L.email_confirmed_at?h(B=>({...B,user_name:L.user_metadata?.full_name||B.user_name||L.email,profile_photo:L.user_metadata?.avatar_url||B.profile_photo})):!L&&R!=="SIGNED_OUT"&&(h(br),g(!1)),L&&!L.email_confirmed_at&&R!=="INITIAL_SESSION"&&e({title:"Email não confirmado",description:"Por favor, confirme seu email para continuar.",variant:"destructive"}),l(!1)});return()=>{M&&M.subscription&&M.subscription.unsubscribe()}},[v,b,e]);const E={user:t,session:i,settings:d,loadingAuth:a,loadingSettings:f,setSettings:async P=>{if(!t||!t.email_confirmed_at||!Se){await v({message:"Usuário não autenticado, email não confirmado ou Supabase não inicializado"},"salvar configurações");return}try{const M=t.user_metadata?.full_name||t.email,R=await f2(Se,t.id,P,d,M);if(R){h(L=>({...br,...L,...R}));let O={};if(P.user_name&&P.user_name!==(t.user_metadata?.full_name||"")&&(O.data={...O.data,full_name:P.user_name}),P.profile_photo&&P.profile_photo!==(t.user_metadata?.avatar_url||"")&&(O.data={...O.data,avatar_url:P.profile_photo}),Object.keys(O).length>0){const{data:L,error:B}=await Se.auth.updateUser(O);B?await v(B,"atualizar dados do usuário na autenticação"):L&&r($=>({...$,user_metadata:L.user.user_metadata}))}}}catch(M){await v(M,"salvar configurações")}},logout:async()=>{if(!Se){await v({message:"Supabase client not initialized"},"fazer logout");return}const{error:P}=await Se.auth.signOut();P?await v(P,"fazer logout"):(r(null),s(null),h(br))},refreshSettings:()=>t?b(t):Promise.resolve()};return y.jsx(bC.Provider,{value:E,children:n})},p2=(n,e,t)=>{const[r,i]=C.useState({clients:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!0,initialLoadCompleted:!1}),s=C.useCallback(h=>{i(f=>typeof h=="function"?h(f):{...f,...h})},[]),a=C.useCallback(()=>{i({clients:[],workflowCards:[],financialData:{transactions:[],income:0,expenses:0,balance:0,potentialLeadValue:0},servicePackages:[],equipments:[],maintenances:[],fixedCosts:[],pricedServices:[],savingGoals:[],pendingReserveAllocations:[],upcomingReminders:[],clientContracts:[],clientOrcamentos:[],availabilitySlots:[],proposals:[],contratos:[],blogPosts:[],featureFlags:{},affiliateData:{referrals:[],commissions:[]},wallets:[],loadingData:!1,initialLoadCompleted:!1})},[]),l=C.useCallback(async(h="all")=>{if(!n)return;const f={clients:()=>Se.from("clients").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),workflow_cards:()=>Se.from("workflow_cards").select("*").eq("user_id",n.id).order("order",{ascending:!0}),transacoes:()=>Se.from("transacoes").select("*").eq("user_id",n.id).order("data",{ascending:!1}),service_packages:()=>Se.from("service_packages").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),equipamentos:()=>Se.from("equipamentos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),manutencoes:()=>Se.from("manutencoes").select("*").eq("user_id",n.id).order("data_manutencao",{ascending:!1}),custos_fixos:()=>Se.from("custos_fixos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),servicos_precificados:()=>Se.from("servicos_precificados").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),metas_reserva:()=>Se.from("metas_reserva").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),availability_slots:()=>Se.from("availability_slots").select("*").eq("user_id",n.id),propostas:()=>Se.from("propostas").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1}),contratos:()=>Se.from("contratosgerados").select("*").eq("id_fotografo",n.id).order("data_geracao",{ascending:!1}),wallets:()=>Se.from("wallets").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}),feature_flags:()=>Se.from("feature_flags").select("*"),referrals:()=>Se.from("referrals").select("*").eq("referrer_id",n.id),commissions:()=>Se.from("commissions").select("*").eq("referrer_id",n.id)},g=h==="all"?Object.keys(f):[h];try{const v=await Promise.all(g.map(x=>{const E=f[x];return typeof E=="function"?E():(console.warn(`fetchMap[${x}] não é uma função. Pulando.`),Promise.resolve({data:[],error:null}))})),b=v.map((x,E)=>x.error?{key:g[E],error:x.error}:null).filter(Boolean);if(b.length>0){b.forEach(({key:x,error:E})=>ah(E,`carregar ${x}`,t));return}const S={};if(v.forEach((x,E)=>{switch(g[E]){case"clients":S.clients=x.data;break;case"workflow_cards":S.workflowCards=x.data;break;case"transacoes":S.financialData={...Tp(x.data),transactions:x.data};break;case"service_packages":S.servicePackages=x.data;break;case"equipamentos":S.equipments=x.data;break;case"manutencoes":S.maintenances=x.data;break;case"custos_fixos":S.fixedCosts=x.data;break;case"servicos_precificados":S.pricedServices=x.data;break;case"metas_reserva":S.savingGoals=x.data;break;case"availability_slots":S.availabilitySlots=x.data;break;case"propostas":S.proposals=x.data;break;case"contratos":S.contratos=x.data;break;case"wallets":S.wallets=x.data;break;case"feature_flags":S.featureFlags=x.data.reduce((M,R)=>({...M,[R.nome_funcionalidade]:R.esta_ativa}),{});break;case"referrals":S.affiliateData={...r.affiliateData,referrals:x.data};break;case"commissions":S.affiliateData={...r.affiliateData,commissions:x.data};break}}),S.workflowCards){const x=(S.workflowCards||[]).filter(E=>E.status==="novo-lead"||E.status==="proposta-enviada").reduce((E,P)=>E+(Number(P.value)||0),0);S.financialData={...S.financialData||r.financialData,potentialLeadValue:x}}s(x=>({...x,...S}))}catch(v){ah(v,"refresh data",t)}},[n,t,r.financialData,r.affiliateData]),d=C.useCallback(async h=>{if(h){s({loadingData:!0});try{const[f,g,v,b,S,x,E,P,M,R,O,L,B,$,W,Y]=await Promise.all([Se.from("clients").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("workflow_cards").select("*").eq("user_id",h.id).order("order",{ascending:!0}),Se.from("transacoes").select("*").eq("user_id",h.id).order("data",{ascending:!1}),Se.from("service_packages").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("equipamentos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("manutencoes").select("*").eq("user_id",h.id).order("data_manutencao",{ascending:!1}),Se.from("custos_fixos").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("servicos_precificados").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("metas_reserva").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("availability_slots").select("*").eq("user_id",h.id),Se.from("propostas").select("*").eq("user_id",h.id).order("updated_at",{ascending:!1}),Se.from("contratosgerados").select("*").eq("id_fotografo",h.id).order("data_geracao",{ascending:!1}),Se.from("wallets").select("*").eq("user_id",h.id).order("created_at",{ascending:!1}),Se.from("feature_flags").select("*"),Se.from("referrals").select("*").eq("referrer_id",h.id),Se.from("commissions").select("*").eq("referrer_id",h.id)]),ae=[f.error,g.error,v.error,b.error,S.error,x.error,E.error,P.error,M.error,R.error,O.error,L.error,B.error,$.error,W.error,Y.error].filter(Boolean);if(ae.length>0){ae.forEach(ce=>ah(ce,"carregar dados iniciais",t)),s({loadingData:!1});return}const se=Tp(v.data),le=(g.data||[]).filter(ce=>ce.status==="novo-lead"||ce.status==="proposta-enviada").reduce((ce,me)=>ce+(Number(me.value)||0),0);s({clients:f.data,workflowCards:g.data,financialData:{...se,transactions:v.data,potentialLeadValue:le},servicePackages:b.data,equipments:S.data,maintenances:x.data,fixedCosts:E.data,pricedServices:P.data,savingGoals:M.data,availabilitySlots:R.data,proposals:O.data,contratos:L.data,wallets:B.data,featureFlags:$.data.reduce((ce,me)=>({...ce,[me.nome_funcionalidade]:me.esta_ativa}),{}),affiliateData:{referrals:W.data,commissions:Y.data},loadingData:!1,initialLoadCompleted:!0})}catch(f){ah(f,"carregar dados iniciais",t),s({loadingData:!1})}}},[t]);return{...r,setDataState:s,clearLocalData:a,loadInitialData:d,refreshData:l,setInitialLoadCompleted:h=>s({initialLoadCompleted:h})}},m2=async(n,e,t)=>{if(t.name){const{count:s,error:a}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(a)throw new Error(`Erro ao verificar cliente existente: ${a.message}`);if(s>0)throw new Error(`Um cliente com o nome "${t.name}" já existe.`)}const{data:r,error:i}=await n.from("clients").insert([{...t,user_id:e,created_at:new Date().toISOString()}]).select().single();if(i)throw i;return r},g2=async(n,e,t,r)=>{if(r.name){const{count:a,error:l}=await n.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar cliente existente: ${l.message}`);if(a>0)throw new Error(`Um cliente com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("clients").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},v2=async(n,e,t)=>{const{error:r}=await n.from("clients").delete().eq("id",t).eq("user_id",e);if(r)throw r},y2=(n,e,t,r,i,s)=>{const a=C.useCallback(async f=>{if(!n||!e())return i({message:"Usuário não autenticado ou trial expirado"},"adicionar cliente"),null;try{const g=await m2(Se,n.id,f),v=[g,...t];return r(v),s(v),g}catch(g){throw i(g,"adicionar cliente"),g}},[n,e,t,r,i,s]),l=C.useCallback(async(f,g)=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"atualizar cliente");return}try{const v=await g2(Se,n.id,f,g),b=t.map(S=>S.id===f?v:S);r(b),s(b)}catch(v){throw i(v,"atualizar cliente"),v}},[n,e,t,r,i,s]),d=C.useCallback(async f=>{if(!n||!e()){i({message:"Usuário não autenticado ou trial expirado"},"remover cliente");return}try{await v2(Se,n.id,f);const g=t.filter(v=>v.id!==f);r(g),s(g)}catch(g){i(g,"remover cliente")}},[n,e,t,r,i,s]),h=C.useCallback(f=>t.find(g=>g.id===f),[t]);return{addClient:a,updateClient:l,deleteClient:d,getClientById:h}},w2=(n,e)=>({handleNewSubscription:C.useCallback(async(r,i)=>{if(!(!n?.id||!e?.referred_by))try{const{data:s,error:a}=await Se.from("settings").select("user_id").eq("referral_code",e.referred_by).single();if(a||!s){console.warn(`Referrer not found for code ${e.referred_by}. Cannot create referral record.`);return}const l=s.user_id,{data:d,error:h}=await Se.from("referrals").insert({referrer_id:l,referred_id:n.id,referred_email:n.email,referred_name:e.user_name,status:"subscribed",subscription_plan:r,subscription_date:new Date().toISOString()}).select().single();if(h)throw h;console.log(`Referral record created: ${d.id}`);const{data:f,error:g}=await Se.from("affiliate_settings").select("*").eq("id",1).single();if(g||!f||!f.is_active){console.log("Affiliate program is not active or settings not found. No commission will be generated.");return}const{data:v,error:b}=await Se.from("plans").select("price").eq("plan_id",r).single();if(b||!v){console.warn(`Plan details for ${r} not found. Cannot calculate commission.`);return}const S=v.price*f.commission_percentage/100,x=new Date;x.setDate(x.getDate()+f.payout_waiting_days);const{error:E}=await Se.from("commissions").insert({referral_id:d.id,referrer_id:l,amount:S,status:"pending",due_date:x.toISOString()});if(E)throw E;console.log(`Commission of ${S} created for referrer ${l}`)}catch(s){console.error("Error in handleNewSubscription for affiliate program:",s.message)}},[n,e])}),_2=async(n,e,t,r,i,s,a)=>{if(!i){console.warn(`Tentativa de atualizar card ${t} que não foi encontrado no estado local.`);const{data:v,error:b}=await n.from("workflow_cards").select("*").eq("id",t).single();if(b||!v)throw new Error(`Card com ID ${t} não encontrado para atualização, nem no estado local nem no banco de dados.`);i=v}let l=[...i.history||[]];const d={title:"Título",status:"Status",value:"Valor",date:"Data",time:"Hora",description:"Descrição",client_id:"Cliente",service_package_id:"Pacote de Serviço",payment_status:"Status do Pagamento",contract_status:"Status do Contrato"};for(const v in r)if(Object.prototype.hasOwnProperty.call(r,v)&&d[v]&&r[v]!==i[v]){let b=i[v]||"vazio",S=r[v]||"vazio";v==="status"&&(b=s(b),S=s(S)),v==="value"&&(b=`R$ ${Number(b).toFixed(2)}`,S=`R$ ${Number(S).toFixed(2)}`),b!==S&&l.push({action:`${d[v]} alterado de "${b}" para "${S}"`,date:new Date().toISOString(),user:a})}r.archived===!0&&i.archived===!1?l.push({action:"Card arquivado",date:new Date().toISOString(),user:a}):r.archived===!1&&i.archived===!0&&l.push({action:"Card desarquivado",date:new Date().toISOString(),user:a});const h={...r,client_id:r.client_id===""?null:r.client_id,service_package_id:r.service_package_id===""?null:r.service_package_id,history:l,subtasks:r.subtasks!==void 0?(r.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})):(i.subtasks||[]).map(v=>({id:v.id||Math.random().toString(36).substr(2,9),text:v.text,completed:v.completed})),comments:r.comments!==void 0?r.comments:i.comments,contract_status:r.contract_status!==void 0?r.contract_status:i.contract_status,archived:r.archived!==void 0?r.archived:i.archived,time:r.time!==void 0?r.time:i.time,installments:r.installments!==void 0?r.installments:r.num_installments!==void 0?r.num_installments:i.installments,num_installments:r.num_installments!==void 0?r.num_installments:r.installments!==void 0?r.installments:i.num_installments,date:r.date!==void 0?r.date:i.date};delete h.createFinancialTransaction,Object.keys(h).forEach(v=>{h[v]===void 0&&delete h[v]});const{data:f,error:g}=await n.from("workflow_cards").update(h).eq("id",t).eq("user_id",e).select().single();if(g)throw g;return f},b2=async(n,e,t)=>{const{error:r}=await n.from("workflow_cards").delete().eq("id",t).eq("user_id",e);if(r)throw r},x2=async(n,e,t,r,i,s,a)=>{const l=Array.isArray(i)?i:[],d={id:Math.random().toString(36).substr(2,9),text:r,date:new Date().toISOString(),user:s,user_photo_url:a},h=[...l,d];let f=await n.from("workflow_cards").select("history").eq("id",t).eq("user_id",e).single();if(f.error)throw f.error;let g=f.data?.history||[];g.push({action:`Comentário adicionado: "${r.substring(0,30)}${r.length>30?"...":""}"`,date:new Date().toISOString(),user:s});const{data:v,error:b}=await n.from("workflow_cards").update({comments:h,history:g}).eq("id",t).eq("user_id",e).select().single();if(b)throw b;return v},S2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to add a service package.");const{count:r,error:i}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",t.name);if(i)throw new Error(`Erro ao verificar pacote: ${i.message}`);if(r>0)throw new Error(`Um pacote com o nome "${t.name}" já existe.`);const s={...t,user_id:e},{data:a,error:l}=await n.from("service_packages").insert([s]).select().single();if(l)throw l;return a},A2=async(n,e,t,r)=>{if(!e)throw new Error("User ID is required to update a service package.");if(r.name){const{count:a,error:l}=await n.from("service_packages").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("name",r.name).neq("id",t);if(l)throw new Error(`Erro ao verificar pacote: ${l.message}`);if(a>0)throw new Error(`Um pacote com o nome "${r.name}" já existe.`)}const{data:i,error:s}=await n.from("service_packages").update(r).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return i},C2=async(n,e,t)=>{if(!e)throw new Error("User ID is required to delete a service package.");const{error:r}=await n.from("service_packages").delete().eq("id",t).eq("user_id",e);if(r)throw r},E2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:r,error:i}=await n.from("orcamentos").select("*").eq("user_id",e).eq("client_id",t).order("data_envio",{ascending:!1});if(i)throw console.error("Erro ao buscar orçamentos:",i),i;return r||[]},k2=async(n,e)=>{if(!n)throw new Error("Supabase client is not initialized.");const{data:t,error:r}=await n.from("orcamentos").insert([e]).select().single();if(r)throw console.error("Erro ao adicionar orçamento:",r),r;return t},T2=async(n,e,t,r)=>{if(!n)throw new Error("Supabase client is not initialized.");const i={...t,updated_at:new Date().toISOString()},{data:s,error:a}=await n.from("orcamentos").update(i).eq("id",e).eq("user_id",r).select().single();if(a)throw console.error("Erro ao atualizar orçamento:",a),a;return s},P2=async(n,e,t)=>{if(!n)throw new Error("Supabase client is not initialized.");const{error:r}=await n.from("orcamentos").delete().eq("id",e).eq("user_id",t);if(r)throw console.error("Erro ao excluir orçamento:",r),r;return!0};function ts(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Al(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function R2(n,e){const t=ts(n);return isNaN(e)?Al(n,NaN):(e&&t.setDate(t.getDate()+e),t)}const SC=6048e5,M2=864e5,AC=6e4,CC=36e5,v9=1e3,y9=43200,w9=1440;let I2={};function Jv(){return I2}function $p(n,e){const t=Jv(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ts(n),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Tv(n){return $p(n,{weekStartsOn:1})}function EC(n){const e=ts(n),t=e.getFullYear(),r=Al(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Tv(r),s=Al(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const a=Tv(s);return e.getTime()>=i.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function PS(n){const e=ts(n);return e.setHours(0,0,0,0),e}function RS(n){const e=ts(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function D2(n,e){const t=PS(n),r=PS(e),i=+t-RS(t),s=+r-RS(r);return Math.round((i-s)/M2)}function O2(n){const e=EC(n),t=Al(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Tv(t)}function N2(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function L2(n){if(!N2(n)&&typeof n!="number")return!1;const e=ts(n);return!isNaN(Number(e))}function j2(n){const e=ts(n),t=Al(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const F2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},B2=(n,e,t)=>{let r;const i=F2[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Q0(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const $2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},V2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},z2={date:Q0({formats:$2,defaultWidth:"full"}),time:Q0({formats:U2,defaultWidth:"full"}),dateTime:Q0({formats:V2,defaultWidth:"full"})},H2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},W2=(n,e,t,r)=>H2[n];function ap(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t?.width?String(t.width):a;i=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t?.width?String(t.width):n.defaultWidth;i=n.values[l]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const q2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},K2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Y2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},X2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Q2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J2=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Z2={ordinalNumber:J2,era:ap({values:q2,defaultWidth:"wide"}),quarter:ap({values:G2,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ap({values:K2,defaultWidth:"wide"}),day:ap({values:Y2,defaultWidth:"wide"}),dayPeriod:ap({values:X2,defaultWidth:"wide",formattingValues:Q2,defaultFormattingWidth:"wide"})};function lp(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],l=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],d=Array.isArray(l)?tj(l,g=>g.test(a)):ej(l,g=>g.test(a));let h;h=n.valueCallback?n.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(a.length);return{value:h,rest:f}}}function ej(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function tj(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function nj(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(i.length);return{value:a,rest:l}}}const rj=/^(\d+)(th|st|nd|rd)?/i,ij=/\d+/i,sj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oj={any:[/^b/i,/^(a|c)/i]},aj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lj={any:[/1/i,/2/i,/3/i,/4/i]},cj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mj={ordinalNumber:nj({matchPattern:rj,parsePattern:ij,valueCallback:n=>parseInt(n,10)}),era:lp({matchPatterns:sj,defaultMatchWidth:"wide",parsePatterns:oj,defaultParseWidth:"any"}),quarter:lp({matchPatterns:aj,defaultMatchWidth:"wide",parsePatterns:lj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:lp({matchPatterns:cj,defaultMatchWidth:"wide",parsePatterns:uj,defaultParseWidth:"any"}),day:lp({matchPatterns:dj,defaultMatchWidth:"wide",parsePatterns:hj,defaultParseWidth:"any"}),dayPeriod:lp({matchPatterns:fj,defaultMatchWidth:"any",parsePatterns:pj,defaultParseWidth:"any"})},gj={code:"en-US",formatDistance:B2,formatLong:z2,formatRelative:W2,localize:Z2,match:mj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vj(n){const e=ts(n);return D2(e,j2(e))+1}function yj(n){const e=ts(n),t=+Tv(e)-+O2(e);return Math.round(t/SC)+1}function kC(n,e){const t=ts(n),r=t.getFullYear(),i=Jv(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=Al(n,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const l=$p(a,e),d=Al(n,0);d.setFullYear(r,0,s),d.setHours(0,0,0,0);const h=$p(d,e);return t.getTime()>=l.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function wj(n,e){const t=Jv(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=kC(n,e),s=Al(n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),$p(s,e)}function _j(n,e){const t=ts(n),r=+$p(t,e)-+wj(t,e);return Math.round(r/SC)+1}function Nt(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const fl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Nt(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Nt(t+1,2)},d(n,e){return Nt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Nt(n.getHours()%12||12,e.length)},H(n,e){return Nt(n.getHours(),e.length)},m(n,e){return Nt(n.getMinutes(),e.length)},s(n,e){return Nt(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Nt(i,e.length)}},th={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return fl.y(n,e)},Y:function(n,e,t,r){const i=kC(n,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Nt(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Nt(s,e.length)},R:function(n,e){const t=EC(n);return Nt(t,e.length)},u:function(n,e){const t=n.getFullYear();return Nt(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Nt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Nt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return fl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Nt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=_j(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Nt(i,e.length)},I:function(n,e,t){const r=yj(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Nt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):fl.d(n,e)},D:function(n,e,t){const r=vj(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Nt(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Nt(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Nt(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Nt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=th.noon:r===0?i=th.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=th.evening:r>=12?i=th.afternoon:r>=4?i=th.morning:i=th.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return fl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):fl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Nt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Nt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):fl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):fl.s(n,e)},S:function(n,e){return fl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return DS(r);case"XXXX":case"XX":return $c(r);case"XXXXX":case"XXX":default:return $c(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return DS(r);case"xxxx":case"xx":return $c(r);case"xxxxx":case"xxx":default:return $c(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+IS(r,":");case"OOOO":default:return"GMT"+$c(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+IS(r,":");case"zzzz":default:return"GMT"+$c(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Nt(r,e.length)},T:function(n,e,t){const r=n.getTime();return Nt(r,e.length)}};function IS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Nt(s,2)}function DS(n,e){return n%60===0?(n>0?"-":"+")+Nt(Math.abs(n)/60,2):$c(n,e)}function $c(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Nt(Math.trunc(r/60),2),s=Nt(r%60,2);return t+i+e+s}const OS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},TC=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bj=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return OS(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",OS(r,e)).replace("{{time}}",TC(i,e))},xj={p:TC,P:bj},Sj=/^D+$/,Aj=/^Y+$/,Cj=["D","DD","YY","YYYY"];function Ej(n){return Sj.test(n)}function kj(n){return Aj.test(n)}function Tj(n,e,t){const r=Pj(n,e,t);if(console.warn(r),Cj.includes(n))throw new RangeError(r)}function Pj(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Rj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ij=/^'([^]*?)'?$/,Dj=/''/g,Oj=/[a-zA-Z]/;function qc(n,e,t){const r=Jv(),i=t?.locale??r.locale??gj,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=ts(n);if(!L2(l))throw new RangeError("Invalid time value");let d=e.match(Mj).map(f=>{const g=f[0];if(g==="p"||g==="P"){const v=xj[g];return v(f,i.formatLong)}return f}).join("").match(Rj).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const g=f[0];if(g==="'")return{isToken:!1,value:Nj(f)};if(MS[g])return{isToken:!0,value:f};if(g.match(Oj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(d=i.localize.preprocessor(l,d));const h={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return d.map(f=>{if(!f.isToken)return f.value;const g=f.value;(!t?.useAdditionalWeekYearTokens&&kj(g)||!t?.useAdditionalDayOfYearTokens&&Ej(g))&&Tj(g,e,String(n));const v=MS[g[0]];return v(l,g,i.localize,h)}).join("")}function Nj(n){const e=n.match(Ij);return e?e[1].replace(Dj,"'"):n}function PC(n,e){const r=Bj(n);let i;if(r.date){const d=$j(r.date,2);i=Uj(d.restDateString,d.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,l;if(r.time&&(a=Vj(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(l=zj(r.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(s+a),h=new Date(0);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return new Date(s+a+l)}const Yg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Lj=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,jj=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Fj=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bj(n){const e={},t=n.split(Yg.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Yg.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Yg.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=Yg.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function $j(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function Uj(n,e){if(e===null)return new Date(NaN);const t=n.match(Lj);if(!t)return new Date(NaN);const r=!!t[4],i=cp(t[1]),s=cp(t[2])-1,a=cp(t[3]),l=cp(t[4]),d=cp(t[5])-1;if(r)return Kj(e,l,d)?Hj(e,l,d):new Date(NaN);{const h=new Date(0);return!qj(e,s,a)||!Gj(e,i)?new Date(NaN):(h.setUTCFullYear(e,s,Math.max(i,a)),h)}}function cp(n){return n?parseInt(n):1}function Vj(n){const e=n.match(jj);if(!e)return NaN;const t=J0(e[1]),r=J0(e[2]),i=J0(e[3]);return Yj(t,r,i)?t*CC+r*AC+i*1e3:NaN}function J0(n){return n&&parseFloat(n.replace(",","."))||0}function zj(n){if(n==="Z")return 0;const e=n.match(Fj);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Xj(r,i)?t*(r*CC+i*AC):NaN}function Hj(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Wj=[31,null,31,30,31,30,31,31,30,31,30,31];function RC(n){return n%400===0||n%4===0&&n%100!==0}function qj(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Wj[e]||(RC(n)?29:28))}function Gj(n,e){return e>=1&&e<=(RC(n)?366:365)}function Kj(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Yj(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Xj(n,e){return e>=0&&e<=59}const MC=async(n,e,t=null)=>{let r=Se.from("equipamentos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_equipamento",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},Qj=async(n,e)=>{if(await MC(n,e.nome_equipamento))throw new Error(`Um equipamento com o nome "${e.nome_equipamento}" já existe.`);const{data:r,error:i}=await Se.from("equipamentos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},Jj=async(n,e,t)=>{if(t.nome_equipamento&&await MC(n,t.nome_equipamento,e))throw new Error(`Um equipamento com o nome "${t.nome_equipamento}" já existe.`);const{data:r,error:i}=await Se.from("equipamentos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},Zj=async(n,e)=>{const{error:t}=await Se.from("equipamentos").delete().eq("id",e).eq("user_id",n);if(t)throw t},eF=async(n,e)=>{const{data:t,error:r}=await Se.from("manutencoes").insert([{...e,user_id:n}]).select().single();if(r)throw r;return t},tF=async(n,e,t=null)=>{let r=Se.from("servicos_precificados").select("id",{count:"exact"}).eq("user_id",n).eq("nome_servico",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},nF=async(n,e)=>{if(await tF(n,e.nome_servico))throw new Error(`Um serviço com o nome "${e.nome_servico}" já existe.`);const{data:r,error:i}=await Se.from("servicos_precificados").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},IC=async(n,e,t=null)=>{let r=Se.from("custos_fixos").select("id",{count:"exact"}).eq("user_id",n).eq("nome_custo",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},rF=async(n,e)=>{if(await IC(n,e.nome_custo))throw new Error(`Um custo com o nome "${e.nome_custo}" já existe.`);const{data:r,error:i}=await Se.from("custos_fixos").insert([{...e,user_id:n}]).select().single();if(i)throw i;return r},iF=async(n,e,t)=>{if(t.nome_custo&&await IC(n,t.nome_custo,e))throw new Error(`Um custo com o nome "${t.nome_custo}" já existe.`);const{data:r,error:i}=await Se.from("custos_fixos").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},sF=async(n,e)=>{const{error:t}=await Se.from("custos_fixos").delete().eq("id",e).eq("user_id",n);if(t)throw t},DC=async(n,e,t=null)=>{let r=Se.from("metas_reserva").select("id",{count:"exact"}).eq("user_id",n).eq("nome_meta",e);t&&(r=r.neq("id",t));const{count:i,error:s}=await r;if(s)throw s;return i>0},oF=async(n,e)=>{if(await DC(n,e.nome_meta))throw new Error(`Uma meta com o nome "${e.nome_meta}" já existe.`);const{data:r,error:i}=await Se.from("metas_reserva").insert([{...e,user_id:n,saldo_atual:0}]).select().single();if(i)throw i;return r},aF=async(n,e,t)=>{if(t.nome_meta&&await DC(n,t.nome_meta,e))throw new Error(`Uma meta com o nome "${t.nome_meta}" já existe.`);const{data:r,error:i}=await Se.from("metas_reserva").update(t).eq("id",e).eq("user_id",n).select().single();if(i)throw i;return r},lF=async(n,e)=>{const{error:t}=await Se.from("metas_reserva").delete().eq("id",e).eq("user_id",n);if(t)throw t},OC=(n,e=[])=>({saldo_geral:{id:"saldo_geral",title:"Saldo Geral",type:"stat",icon:"Landmark",color:"text-green-500",onClick:()=>n("financial",{type:"all",period:"all",isDashboardClick:!0}),defaultSize:{w:3,h:2}},pagamentos_receber:{id:"pagamentos_receber",title:"A Receber",type:"stat",icon:"TrendingUp",color:"text-blue-500",onClick:()=>n("financial",{type:"entrada",status:"pendente",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_pagar:{id:"despesas_pagar",title:"Contas a Pagar",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pendente",period:"future",isDashboardClick:!0}),defaultSize:{w:3,h:2}},awaiting_release:{id:"awaiting_release",title:"Aguardando Liberação",type:"stat",icon:"Wallet",color:"text-cyan-500",onClick:()=>n("financial",{status:"AGUARDANDO_LIBERACAO",isDashboardClick:!0}),defaultSize:{w:3,h:2}},imposto_estimado:{id:"imposto_estimado",title:"Imposto Estimado (Mês)",type:"stat",icon:"Receipt",color:"text-yellow-500",onClick:()=>n("precifique"),defaultSize:{w:3,h:2}},pro_labore:{id:"pro_labore",title:"Pró‑labore (Mês)",type:"stat",icon:"DollarSign",color:"text-indigo-500",onClick:()=>n("financial",{type:"saida",category:"Pró-labore",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},despesas_mes:{id:"despesas_mes",title:"Despesas (Mês)",type:"stat",icon:"TrendingDown",color:"text-red-500",onClick:()=>n("financial",{type:"saida",status:"pago",period:"current_month",isDashboardClick:!0}),defaultSize:{w:3,h:2}},lucro_mes:{id:"lucro_mes",title:"Lucro (Mês)",type:"stat",icon:"TrendingUp",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:3,h:2}},depreciacao_mensal:{id:"depreciacao_mensal",title:"Depreciação Mensal",type:"stat",icon:"TrendingDown",color:"text-gray-500",onClick:()=>n("my-setup"),defaultSize:{w:3,h:2}},clientes_ativos:{id:"clientes_ativos",title:"Clientes Ativos",type:"smallStat",icon:"Users",iconColor:"text-purple-500",onClick:()=>n("clients"),defaultSize:{w:2,h:2}},trabalhos_em_andamento:{id:"trabalhos_em_andamento",title:"Em Andamento",type:"smallStat",icon:"Briefcase",iconColor:"text-orange-500",onClick:()=>n("workflow",{status:"em-andamento"}),defaultSize:{w:2,h:2}},trabalhos_agendados:{id:"trabalhos_agendados",title:"Agendados (Mês)",type:"smallStat",icon:"Calendar",iconColor:"text-teal-500",onClick:()=>n("workflow",{status:"agendado"}),defaultSize:{w:2,h:2}},conversao_clientes:{id:"conversao_clientes",title:"Conversão de Clientes",type:"smallStat",icon:"Target",iconColor:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:2,h:2}},grafico_faturamento:{id:"grafico_faturamento",title:"Faturamento Anual",type:"chart",chartType:"bar",icon:"BarChart2",color:"text-green-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},status_trabalhos:{id:"status_trabalhos",title:"Status dos Trabalhos",type:"chart",chartType:"pie",icon:"PieChart",color:"text-blue-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},ultimos_lancamentos:{id:"ultimos_lancamentos",title:"Últimos Lançamentos",type:"chart",chartType:"list",icon:"List",color:"text-gray-500",onClick:()=>n("financial"),defaultSize:{w:3,h:5}},lembretes:{id:"lembretes",title:"Lembretes e Tarefas",type:"reminders",icon:"BellRing",color:"text-yellow-500",onClick:()=>n("workflow"),defaultSize:{w:4,h:5}},metas_reserva:{id:"metas_reserva",title:"Resumo das Metas",type:"goals_summary",icon:"Target",color:"text-cyan-500",onClick:()=>n("reserva-inteligente"),defaultSize:{w:4,h:5}},...(e||[]).reduce((t,r)=>{const i=`wallet_${r.id}`;return t[i]={id:i,title:r.name||"Carteira",type:"stat",icon:"Wallet",iconUrl:r.icon_url||void 0,color:"text-blue-500",onClick:()=>n("financial",{walletId:r.id,isDashboardClick:!0}),defaultSize:{w:3,h:2}},t},{}),grafico_despesas_faturamento:{id:"grafico_despesas_faturamento",title:"Faturamento x Despesas",type:"chart",chartType:"bar",icon:"BarChart3",color:"text-purple-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_despesas_lucro:{id:"grafico_despesas_lucro",title:"Lucro x Despesas",type:"chart",chartType:"bar",icon:"BarChartBig",color:"text-orange-500",onClick:()=>n("reports"),defaultSize:{w:6,h:5}},grafico_conversao_leads:{id:"grafico_conversao_leads",title:"Conversão de Leads",type:"chart",chartType:"pie",icon:"PieChart",color:"text-pink-500",onClick:()=>n("workflow"),defaultSize:{w:3,h:5}},grafico_inadimplentes:{id:"grafico_inadimplentes",title:"Clientes Inadimplentes",type:"chart",chartType:"pie",icon:"Users",color:"text-red-500",onClick:()=>n("clients",{status:"inadimplentes"}),defaultSize:{w:3,h:5}}}),up=n=>{const t=[...[{i:"saldo_geral",x:0,y:0,w:3,h:2},{i:"pagamentos_receber",x:3,y:0,w:3,h:2},{i:"despesas_pagar",x:6,y:0,w:3,h:2},{i:"awaiting_release",x:9,y:0,w:3,h:2},{i:"grafico_faturamento",x:0,y:2,w:6,h:5},{i:"ultimos_lancamentos",x:6,y:2,w:3,h:5},{i:"status_trabalhos",x:9,y:2,w:3,h:5},{i:"lembretes",x:0,y:7,w:4,h:5},{i:"metas_reserva",x:4,y:7,w:4,h:5},{i:"clientes_ativos",x:8,y:7,w:2,h:2},{i:"trabalhos_em_andamento",x:10,y:7,w:2,h:2},{i:"trabalhos_agendados",x:8,y:9,w:2,h:2},{i:"conversao_clientes",x:10,y:9,w:2,h:2}]];let r=Math.max(...t.map(s=>(s.y||0)+(s.h||0)),0);return Object.keys(n).forEach(s=>{if(s.startsWith("wallet_")&&!t.some(a=>a.i===s)){const a=n[s];t.push({i:s,x:0,y:r,w:a.defaultSize?.w||3,h:a.defaultSize?.h||2}),r+=a.defaultSize?.h||2}}),[{id:"grafico_despesas_faturamento",x:0,y:r,w:6,h:5},{id:"grafico_despesas_lucro",x:6,y:r,w:6,h:5},{id:"grafico_conversao_leads",x:0,y:r+5,w:3,h:5},{id:"grafico_inadimplentes",x:3,y:r+5,w:3,h:5}].forEach(s=>{n[s.id]&&!t.some(a=>a.i===s.id)&&t.push({i:s.id,x:s.x,y:s.y,w:s.w,h:s.h})}),t},cF=(n,e)=>n.map(t=>{const r=e[t.i];let i={...t};return r.type==="stat"?(i.w=5,i.h=2):r.type==="smallStat"?(i.w=2,i.h=2):i.w=Math.min(10,t.w*1.5),i}),uF=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?6:5;break;case"reminders":case"goals_summary":s=6;break;default:s=4}const a={i:r.i,x:0,y:t,w:4,h:s};return t+=s,a})},dF=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?7:5;break;case"reminders":case"goals_summary":s=7;break;default:s=4}const a={i:r.i,x:0,y:t,w:2,h:s};return t+=s,a})},hF=(n,e)=>{let t=0;return n.map(r=>{const i=e[r.i];let s;switch(i.type){case"stat":case"smallStat":s=2;break;case"chart":s=i.chartType==="list"?8:6;break;case"reminders":case"goals_summary":s=8;break;default:s=5}const a={i:r.i,x:0,y:t,w:2,h:s};return t+=s,a})},fF=()=>{},la=OC(fF,[]);up(la),cF(up(la),la),uF(up(la),la),dF(up(la),la),hF(up(la),la);const NC=C.createContext(),ki=()=>{const n=C.useContext(NC);if(!n)throw new Error("useData must be used within a DataProvider");return n},pF=({children:n})=>{const{toast:e}=js(),{user:t,session:r,settings:i,loadingAuth:s,setSettings:a}=W_(),{clients:l,workflowCards:d,financialData:h,servicePackages:f,equipments:g,maintenances:v,fixedCosts:b,pricedServices:S,savingGoals:x,pendingReserveAllocations:E,upcomingReminders:P,clientContracts:M,clientOrcamentos:R,availabilitySlots:O,proposals:L,blogPosts:B,featureFlags:$,affiliateData:W,loadingData:Y,initialLoadCompleted:ae,wallets:se,contratos:le,setDataState:ce,clearLocalData:me,loadInitialData:q,refreshData:z}=p2(t,i,e),[te,V]=C.useState(null),[ne,J]=C.useState(0),F=C.useCallback((he,Q)=>{ah(he,Q,e)},[e]);C.useEffect(()=>{!s&&!t&&me()},[s,t,me]),C.useEffect(()=>{t&&!ae&&q(t)},[t,ae,q]);const ie=C.useCallback(he=>{he?.plan_status?(V(he.plan_status),J(999)):(V("FREE"),J(999))},[]);C.useEffect(()=>{ie(i)},[i,ie]);const pe=C.useCallback(()=>!0,[]),Te=C.useCallback(he=>{const Q={agendado:"Agendado","novo-lead":"Novo Lead","proposta-enviada":"Proposta Enviada","em-andamento":"Em Andamento",concluido:"Concluído"};return(i?.workflow_columns?.reduce((be,ye)=>({...be,[ye.id]:ye.title}),{})||{})[he]||Q[he]||he},[i?.workflow_columns]),{addClient:De,updateClient:Pe,deleteClient:ve,getClientById:Oe}=y2(t,pe,l,he=>ce(Q=>({...Q,clients:he})),F,he=>ce(Q=>({...Q,upcomingReminders:he}))),{handleNewSubscription:He}=w2(t,i),Ye=he=>(he||[]).filter(Q=>Q.status==="novo-lead"||Q.status==="proposta-enviada").reduce((Q,fe)=>Q+(Number(fe.value)||0),0),st=C.useCallback(he=>{if(i?.role==="ADMIN")return!0;const Q=i?.feature_overrides?.[he];return typeof Q=="boolean"?Q:$[he]??!1},[$,i]),Rt=C.useCallback(he=>{const Q=(se||[]).find(ye=>ye.id===he);return Q?(h?.transactions||[]).filter(ye=>ye.wallet_id===he&&(ye.status==="PAGO"||ye.status==="AGUARDANDO_LIBERACAO"&&new Date(ye.release_date)<=new Date)).reduce((ye,Be)=>Be.tipo==="ENTRADA"?ye+Number(Be.valor):Be.tipo==="SAIDA"?ye-Number(Be.valor):ye,Number(Q.initial_balance)||0):0},[se,h?.transactions]),cn=C.useMemo(()=>OC(()=>{},se),[se]),Yt=async he=>{if(!t){F({message:"Usuário não autenticado."},"deletar proposta");return}const{error:Q}=await Se.from("propostas").delete().eq("id",he).eq("user_id",t.id);Q?F(Q,"deletar proposta"):(e({title:"Proposta deletada com sucesso!"}),await z("propostas"))},Fr=async he=>{if(!t||!pe()||!i)throw new Error("Pré-condição falhou para adicionar card.");try{const{data:Q,error:fe}=await Se.functions.invoke("criar-agendamento",{body:JSON.stringify({cardData:he,userName:i.user_name||t.email})});if(fe)throw fe;if(Q.error)throw new Error(Q.error);const{newCard:be}=Q;return ce(ye=>{const Be=[...ye.workflowCards,be].sort((Et,In)=>(Et.order||0)-(In.order||0));return{...ye,workflowCards:Be,financialData:{...ye.financialData,potentialLeadValue:Ye(Be)}}}),be}catch(Q){throw F(Q,"criar agendamento"),Q}},Bs=async(he,Q)=>{if(!t||!pe())return null;try{const fe=d.find(ye=>ye.id===he);if(!fe)return await z("workflow_cards"),null;const be=await _2(Se,t.id,he,{...Q},fe,Te,i.user_name||t.email);if(ce(ye=>{const Be=ye.workflowCards.map(Et=>Et.id===he?be:Et).sort((Et,In)=>(Et.order||0)-(In.order||0));return{...ye,workflowCards:Be,financialData:{...ye.financialData,potentialLeadValue:Ye(Be)}}}),Q.value!==void 0||Q.payment_type!==void 0||Q.entry_paid!==void 0){const ye=await h2(Se,he),Be=ye.length>0?ye[0]:null,Et={descricao:be.title||"Lançamento",valor:be.value||0,data:be.first_installment_date||be.date||new Date().toISOString().split("T")[0],data_vencimento:be.first_installment_date||be.date,status:be.entry_paid?"PAGO":"PENDENTE",tipo:"ENTRADA",metodo_pagamento:be.payment_method||null,trabalho_id:he,cliente_id:be.client_id};Be?await Br(Be.id,Et):be.value>0&&await Co(Et),await z("transacoes")}return be}catch(fe){return fe.message?.includes("PGRST204")?(await z("workflow_cards"),null):(F(fe,"atualizar card"),null)}},Mn=async he=>{if(!(!t||!pe()))try{await b2(Se,t.id,he),ce(Q=>{const fe=Q.workflowCards.filter(be=>be.id!==he);return{...Q,workflowCards:fe,financialData:{...Q.financialData,potentialLeadValue:Ye(fe)}}})}catch(Q){F(Q,"remover card")}},Ll=async(he,Q)=>{if(!t||!pe())return null;try{const fe=d.find(ye=>ye.id===he),be=await x2(Se,t.id,he,Q,fe?.comments,i.user_name||t.email,t.user_metadata?.avatar_url);return ce(ye=>({...ye,workflowCards:ye.workflowCards.map(Be=>Be.id===he?be:Be)})),be}catch(fe){throw F(fe,"adicionar comentário"),fe}},Co=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{let Q={...he};if(he.wallet_id&&he.status==="PAGO"){const be=se.find(ye=>ye.id===he.wallet_id);if(be&&be.is_gateway&&be.gateway_config&&he.tipo==="ENTRADA"){const ye=be.gateway_config.fee||0,Be=be.gateway_config.release_days||0,Et=parseFloat(he.valor),In=Et*ye/100,Pi=Et-In;Be>1?Q={...Q,original_value:Et,fee_value:In,valor:Pi,status:"AGUARDANDO_LIBERACAO",release_date:qc(R2(new Date(he.data),Be),"yyyy-MM-dd")}:Q={...Q,original_value:Et,fee_value:In,valor:Pi,status:"PAGO",release_date:null}}}const fe=await c2(Se,t.id,Q);return ce(be=>{const ye=[fe,...be.financialData.transactions];return{...be,financialData:{...Tp(ye),transactions:ye,potentialLeadValue:be.financialData.potentialLeadValue}}}),fe}catch(Q){throw F(Q,"adicionar transação"),Q}},Br=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=h.transactions.find(ye=>ye.id===he),be=await u2(Se,t.id,he,Q);if(ce(ye=>{const Be=ye.financialData.transactions.map(Et=>Et.id===he?be:Et);return{...ye,financialData:{...Tp(Be),transactions:Be,potentialLeadValue:ye.financialData.potentialLeadValue}}}),be.status==="PAGO"&&fe?.status!=="PAGO"&&be.trabalho_id){const ye=d.find(Be=>Be.id===be.trabalho_id);if(ye?.service_package_id){const Be=S.find(Et=>Et.id===ye.service_package_id);if(Be?.reserva_financeira_percentual>0){const Et=be.valor*Be.reserva_financeira_percentual/100;ce(In=>({...In,pendingReserveAllocations:[...In.pendingReserveAllocations,{transactionId:be.id,transactionValue:be.valor,serviceName:Be.nome_servico,reserveAmount:Et,pricedServiceId:Be.id}]}))}}}return be}catch(fe){throw F(fe,"atualizar transação"),fe}},Sn=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{await d2(Se,t.id,he),ce(Q=>{const fe=Q.financialData.transactions.filter(be=>be.id!==he);return{...Q,financialData:{...Tp(fe),transactions:fe,potentialLeadValue:Q.financialData.potentialLeadValue}}})}catch(Q){throw F(Q,"remover transação"),Q}},rs=async he=>{if(!t)throw new Error("Usuário não autenticado");const{data:Q,error:fe}=await Se.from("wallets").insert([{...he,user_id:t.id}]).select().single();if(fe)throw fe;return await z("wallets"),Q},Eo=async(he,Q)=>{if(!t)throw new Error("Usuário não autenticado");const{data:fe,error:be}=await Se.from("wallets").update(Q).eq("id",he).eq("user_id",t.id).select().single();if(be)throw be;return await z("wallets"),fe},mu=async he=>{if(!t)throw new Error("Usuário não autenticado");const{error:Q}=await Se.from("wallets").delete().eq("id",he).eq("user_id",t.id);if(Q)throw Q;await z("wallets")},$s=async()=>{if(!t)return!1;try{const{error:he}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!1})});if(he)throw he;me();const Q=t.user_metadata?.full_name||t.email,fe={...br,user_id:t.id,user_name:Q,contact_email:t.email,profile_photo:t.user_metadata?.avatar_url||null,workflow_columns:gv};return await a(fe,!0),z(),!0}catch(he){return F(he,"excluir dados"),!1}},gu=async()=>{if(!t)return!1;try{const{error:he}=await Se.functions.invoke("delete-user-account",{body:JSON.stringify({user_id:t.id,full_delete:!0})});if(he)throw he;return await Se.auth.signOut(),me(),!0}catch(he){return F(he,"excluir conta"),!1}},is=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await S2(Se,t.id,he);return ce(fe=>({...fe,servicePackages:[Q,...fe.servicePackages].sort((be,ye)=>new Date(ye.created_at)-new Date(be.created_at))})),Q}catch(Q){throw F(Q,"adicionar pacote"),Q}},li=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=await A2(Se,t.id,he,Q);return ce(be=>({...be,servicePackages:be.servicePackages.map(ye=>ye.id===he?fe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),fe}catch(fe){throw F(fe,"atualizar pacote"),fe}},Aa=async he=>{if(!(!t||!pe()))try{await C2(Se,t.id,he),ce(Q=>({...Q,servicePackages:Q.servicePackages.filter(fe=>fe.id!==he)}))}catch(Q){F(Q,"remover pacote")}},ss=he=>f.find(Q=>Q.id===he),os=he=>h.transactions.find(Q=>Q.id===he),jl=he=>d.find(Q=>Q.id===he),Ca=async he=>{if(!t||!pe())return 0;let Q=0;const fe=he.filter(be=>!d.some(ye=>ye.google_event_id===be.id)).map(be=>{const ye=be.start?.date||(be.start?.dateTime?be.start.dateTime.split("T")[0]:null),Be=be.start?.dateTime?qc(PC(be.start.dateTime),"HH:mm"):null;return ye?{title:be.summary||"Evento",description:be.description||"",date:ye,time:Be,status:"agendado",google_event_id:be.id,user_id:t.id}:null}).filter(Boolean);if(fe.length>0){const{data:be,error:ye}=await Se.from("workflow_cards").insert(fe).select();ye?F(ye,"importar eventos"):be&&(Q=be.length,ce(Be=>({...Be,workflowCards:[...Be.workflowCards,...be].sort((Et,In)=>(Et.order||0)-(In.order||0))})))}return Q},Ea=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await Qj(t.id,he);return ce(fe=>({...fe,equipments:[Q,...fe.equipments].sort((be,ye)=>new Date(ye.created_at)-new Date(be.created_at))})),Q}catch(Q){throw F(Q,"add equipment"),Q}},Fl=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=await Jj(t.id,he,Q);return ce(be=>({...be,equipments:be.equipments.map(ye=>ye.id===he?fe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),fe}catch(fe){throw F(fe,"update equipment"),fe}},ko=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{await Zj(t.id,he),ce(Q=>({...Q,equipments:Q.equipments.filter(fe=>fe.id!==he)}))}catch(Q){throw F(Q,"delete equipment"),Q}},To=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await eF(t.id,he);return ce(fe=>({...fe,maintenances:[Q,...fe.maintenances].sort((be,ye)=>new Date(ye.data_manutencao)-new Date(be.data_manutencao))})),Q}catch(Q){throw F(Q,"add maintenance"),Q}},Bl=he=>v.filter(Q=>Q.equipamento_id===he).sort((Q,fe)=>new Date(fe.data_manutencao)-new Date(Q.data_manutencao)),$l=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await rF(t.id,he);return ce(fe=>({...fe,fixedCosts:[Q,...fe.fixedCosts].sort((be,ye)=>new Date(ye.created_at)-new Date(be.created_at))})),Q}catch(Q){throw F(Q,"add fixed cost"),Q}},Ul=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=await iF(t.id,he,Q);return ce(be=>({...be,fixedCosts:be.fixedCosts.map(ye=>ye.id===he?fe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),fe}catch(fe){throw F(fe,"update fixed cost"),fe}},as=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{await sF(t.id,he),ce(Q=>({...Q,fixedCosts:Q.fixedCosts.filter(fe=>fe.id!==he)}))}catch(Q){throw F(Q,"delete fixed cost"),Q}},ls=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await nF(t.id,he);return ce(fe=>({...fe,pricedServices:[Q,...fe.pricedServices].sort((be,ye)=>new Date(ye.created_at)-new Date(be.created_at))})),Q}catch(Q){throw F(Q,"add priced service"),Q}},vu=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await oF(t.id,he);return await z("metas_reserva"),Q}catch(Q){throw F(Q,"add saving goal"),Q}},yu=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=await aF(t.id,he,Q);return ce(be=>({...be,savingGoals:be.savingGoals.map(ye=>ye.id===he?fe:ye).sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),fe}catch(fe){throw F(fe,"update saving goal"),fe}},wu=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{await lF(t.id,he),ce(Q=>({...Q,savingGoals:Q.savingGoals.filter(fe=>fe.id!==he)}))}catch(Q){throw F(Q,"delete saving goal"),Q}},_u=async(he,Q,fe,be)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const ye=x.find(Pi=>Pi.id===he);if(!ye)throw new Error("Meta não encontrada.");let Be;if(be==="deposit")Be=Number(ye.saldo_atual)+Number(Q);else if(be==="withdraw"){if(Number(ye.saldo_atual)<Number(Q))throw new Error("Saldo insuficiente.");Be=Number(ye.saldo_atual)-Number(Q)}else throw new Error("Tipo de transação inválido.");const{data:Et,error:In}=await Se.from("metas_reserva").update({saldo_atual:Be,updated_at:new Date().toISOString()}).eq("id",he).eq("user_id",t.id).select().single();if(In)throw In;return be==="withdraw"&&await Co({descricao:`Saque da meta: ${ye.nome_meta}${fe?` - ${fe}`:""}`,valor:Number(Q),tipo:"SAIDA",status:"PAGO",data:new Date().toISOString().split("T")[0],category:"Saque de Meta",user_id:t.id}),ce(Pi=>({...Pi,savingGoals:Pi.savingGoals.map(Io=>Io.id===he?Et:Io).sort((Io,Su)=>new Date(Su.created_at)-new Date(Io.created_at))})),Et}catch(ye){throw F(ye,`Erro ao ${be==="deposit"?"depositar":"sacar"}`),ye}},Vl=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{data:fe,error:be}=await Se.functions.invoke("alocarReserva",{body:JSON.stringify({meta_id:he,valor_alocar:Q,user_id:t.id})});if(be)throw be;if(fe.error)throw new Error(fe.error);return ce(ye=>({...ye,savingGoals:ye.savingGoals.map(Be=>Be.id===he?fe:Be).sort((Be,Et)=>new Date(Et.created_at)-new Date(Be.created_at))})),fe}catch(fe){throw F(fe,"alocar reserva"),fe}},zl=he=>ce(Q=>({...Q,pendingReserveAllocations:Q.pendingReserveAllocations.filter(fe=>fe.transactionId!==he)})),bu=C.useCallback(async he=>{if(!(!t||!he))try{const{data:Q,error:fe}=await Se.from("contratos_clientes").select("*").eq("user_id",t.id).eq("client_id",he).order("created_at",{ascending:!1});if(fe)throw fe;ce(be=>({...be,clientContracts:Q||[]}))}catch(Q){F(Q,"buscar contratos")}},[t,F]),Po=async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{data:Q,error:fe}=await Se.from("contratos_clientes").insert([he]).select().single();if(fe)throw fe;return ce(be=>({...be,clientContracts:[Q,...be.clientContracts].sort((ye,Be)=>new Date(Be.created_at)-new Date(ye.created_at))})),Q}catch(Q){throw F(Q,"add contrato"),Q}},Ro=async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const{error:fe}=await Se.from("contratos_clientes").delete().eq("id",he).eq("user_id",t.id);if(fe)throw fe;const{error:be}=await Se.storage.from("contracts").remove([Q]);be&&console.warn("Erro ao deletar do storage:",be.message),ce(ye=>({...ye,clientContracts:ye.clientContracts.filter(Be=>Be.id!==he)}))}catch(fe){throw F(fe,"delete contrato"),fe}},Mo=C.useCallback(async he=>{if(!(!t||!he))try{const Q=await E2(Se,t.id,he);ce(fe=>({...fe,clientOrcamentos:Q}))}catch(Q){F(Q,"buscar orçamentos")}},[t,F]),Ta={clients:l,workflowCards:d,financialData:h,settings:i,loading:Y||s,servicePackages:f,user:t,session:r,loadingAuth:s,refreshData:z,planStatus:te,trialDaysRemaining:ne,isUserActive:pe,equipments:g,maintenances:v,fixedCosts:b,pricedServices:S,savingGoals:x,pendingReserveAllocations:E,upcomingReminders:P,clientContracts:M,clientOrcamentos:R,availabilitySlots:O,proposals:L,blogPosts:B,featureFlags:$,isFeatureEnabled:st,affiliateData:W,wallets:se,contratos:le,getWalletBalance:Rt,addClient:De,updateClient:Pe,deleteClient:ve,getClientById:Oe,addWorkflowCard:Fr,updateWorkflowCard:Bs,deleteWorkflowCard:Mn,addComment:Ll,getStatusLabel:Te,importGoogleEventsAsWorkflowCards:Ca,getWorkflowCardById:jl,addTransaction:Co,updateTransaction:Br,deleteTransaction:Sn,getTransactionById:os,setSettings:a,addServicePackage:is,updateServicePackage:li,deleteServicePackage:Aa,getServicePackageById:ss,addEquipment:Ea,updateEquipment:Fl,deleteEquipment:ko,addMaintenance:To,getEquipmentMaintenances:Bl,addFixedCost:$l,updateFixedCost:Ul,deleteFixedCost:as,addPricedService:ls,addSavingGoal:vu,updateSavingGoal:yu,deleteSavingGoal:wu,updateSavingGoalBalance:_u,allocateToSavingGoal:Vl,dismissPendingAllocation:zl,refreshClientContracts:bu,addClientContract:Po,deleteClientContract:Ro,refreshClientOrcamentos:Mo,addOrcamento:async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{const Q=await k2(Se,he);return ce(fe=>({...fe,clientOrcamentos:[Q,...fe.clientOrcamentos].sort((be,ye)=>new Date(ye.data_envio)-new Date(be.data_envio))})),Q}catch(Q){throw F(Q,"add orçamento"),Q}},updateOrcamento:async(he,Q)=>{if(!t||!pe())throw new Error("Operação não permitida");try{const fe=await T2(Se,he,Q,t.id);return ce(be=>({...be,clientOrcamentos:be.clientOrcamentos.map(ye=>ye.id===he?fe:ye).sort((ye,Be)=>new Date(Be.data_envio)-new Date(ye.data_envio))})),fe}catch(fe){throw F(fe,"update orçamento"),fe}},deleteOrcamento:async he=>{if(!t||!pe())throw new Error("Operação não permitida");try{await P2(Se,he,t.id),ce(Q=>({...Q,clientOrcamentos:Q.clientOrcamentos.filter(fe=>fe.id!==he)}))}catch(Q){throw F(Q,"delete orçamento"),Q}},deleteAllUserData:$s,deleteUserAccount:gu,deleteProposal:Yt,handleNewSubscription:He,addWallet:rs,updateWallet:Eo,deleteWallet:mu,initialCardConfigMemo:cn};return y.jsx(NC.Provider,{value:Ta,children:n})},LC=C.createContext(),Zv=()=>{const n=C.useContext(LC);if(!n)throw new Error("useModalState must be used within a ModalStateProvider");return n},mF=({children:n})=>{const[e,t]=C.useState({client:null,financial:null,workflow:null,servicePackage:null,equipment:null,maintenance:null,fixedCost:null,goal:null,goalTransaction:null,withdrawGoal:null,orcamento:null,formCreation:!1,formSuccess:null,bookingSettings:!1,availability:null}),r=C.useCallback((l,d={})=>{t(h=>({...h,[l]:{isOpen:!0,...d}}))},[]),i=C.useCallback(l=>{t(d=>({...d,[l]:null}))},[]),s=Object.values(e).some(l=>l?.isOpen),a={openModals:e,openModal:r,closeModal:i,isAnyModalOpen:s};return y.jsx(LC.Provider,{value:a,children:n})},gF=C.createContext(null),vF=()=>({browser:navigator.userAgent,platform:navigator.platform,screen_resolution:`${window.screen.width}x${window.screen.height}`,window_resolution:`${window.innerWidth}x${window.innerHeight}`,language:navigator.language}),yF=({children:n})=>{const{user:e,settings:t}=W_(),r=Ls(),i=C.useCallback(async s=>{try{const a={type:s.type||"error",route:r.pathname,message:typeof s.message=="object"?JSON.stringify(s.message,null,2):String(s.message),stack_trace:s.stack_trace,user_info:{id:e?.id||null,email:e?.email||null,name:t?.user_name||null},device_info:vF(),user_id:e?.id||null};await Se.functions.invoke("report-error",{body:JSON.stringify(a)})}catch(a){console.error("Failed to report error:",a)}},[e,t,r.pathname]);return C.useEffect(()=>{const s=console.error;console.error=(...d)=>{s.apply(console,d);const h=d.map(g=>{if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return String(g)}}).join(" "),f=d.find(g=>g instanceof Error)?.stack;i({type:"log",message:`CONSOLE_ERROR: ${h}`,stack_trace:f})};const a=d=>{i({message:d.message,stack_trace:d.error?.stack})},l=d=>{i({type:"unhandled_rejection",message:d.reason?.message||"Promise rejection with no message",stack_trace:d.reason?.stack})};return window.addEventListener("error",a),window.addEventListener("unhandledrejection",l),()=>{console.error=s,window.removeEventListener("error",a),window.removeEventListener("unhandledrejection",l)}},[i]),C.useEffect(()=>{const s=window.fetch;return window.fetch=async(...a)=>{const l=await s(...a);if(l.status>=400&&l.status<600){const d=a[0]instanceof Request?a[0].url:a[0];if(d.includes("/report-error"))return l;i({type:"network_error",message:`Fetch failed with status ${l.status} for URL: ${d}`,stack_trace:`Status: ${l.status}
URL: ${d}
Method: ${a[0]?.method||"GET"}`})}return l},()=>{window.fetch=s}},[i]),n},wF=({children:n})=>y.jsx(gF.Provider,{value:null,children:y.jsx(yF,{children:n})}),jC=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),ey=C.createContext({}),ty=C.createContext(null),ny=typeof document<"u",q_=ny?C.useLayoutEffect:C.useEffect,FC=C.createContext({strict:!1}),G_=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_F="framerAppearId",BC="data-"+G_(_F);function bF(n,e,t,r){const{visualElement:i}=C.useContext(ey),s=C.useContext(FC),a=C.useContext(ty),l=C.useContext(jC).reducedMotion,d=C.useRef();r=r||s.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:i,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=d.current;C.useInsertionEffect(()=>{h&&h.update(t,a)});const f=C.useRef(!!(t[BC]&&!window.HandoffComplete));return q_(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),C.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function lh(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function xF(n,e,t){return C.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):lh(t)&&(t.current=r))},[e])}function Up(n){return typeof n=="string"||Array.isArray(n)}function ry(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const K_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Y_=["initial",...K_];function iy(n){return ry(n.animate)||Y_.some(e=>Up(n[e]))}function $C(n){return!!(iy(n)||n.variants)}function SF(n,e){if(iy(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Up(t)?t:void 0,animate:Up(r)?r:void 0}}return n.inherit!==!1?e:{}}function AF(n){const{initial:e,animate:t}=SF(n,C.useContext(ey));return C.useMemo(()=>({initial:e,animate:t}),[NS(e),NS(t)])}function NS(n){return Array.isArray(n)?n.join(" "):n}const LS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vp={};for(const n in LS)Vp[n]={isEnabled:e=>LS[n].some(t=>!!e[t])};function CF(n){for(const e in n)Vp[e]={...Vp[e],...n[e]}}const X_=C.createContext({}),UC=C.createContext({}),EF=Symbol.for("motionComponentSymbol");function kF({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&CF(n);function s(l,d){let h;const f={...C.useContext(jC),...l,layoutId:TF(l)},{isStatic:g}=f,v=AF(l),b=r(l,g);if(!g&&ny){v.visualElement=bF(i,b,f,e);const S=C.useContext(UC),x=C.useContext(FC).strict;v.visualElement&&(h=v.visualElement.loadFeatures(f,x,n,S))}return C.createElement(ey.Provider,{value:v},h&&v.visualElement?C.createElement(h,{visualElement:v.visualElement,...f}):null,t(i,l,xF(b,v.visualElement,d),b,g,v.visualElement))}const a=C.forwardRef(s);return a[EF]=i,a}function TF({layoutId:n}){const e=C.useContext(X_).id;return e&&n!==void 0?e+"-"+n:n}function PF(n){function e(r,i={}){return kF(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const RF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Q_(n){return typeof n!="string"||n.includes("-")?!1:!!(RF.indexOf(n)>-1||/[A-Z]/.test(n))}const Pv={};function MF(n){Object.assign(Pv,n)}const sm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],au=new Set(sm);function VC(n,{layout:e,layoutId:t}){return au.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Pv[n]||n==="opacity")}const ai=n=>!!(n&&n.getVelocity),IF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DF=sm.length;function OF(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let a=0;a<DF;a++){const l=sm[a];if(n[l]!==void 0){const d=IF[l]||l;s+=`${d}(${n[l]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const zC=n=>e=>typeof e=="string"&&e.startsWith(n),HC=zC("--"),qw=zC("var(--"),NF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,LF=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Cl=(n,e,t)=>Math.min(Math.max(t,n),e),lu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Pp={...lu,transform:n=>Cl(0,1,n)},Xg={...lu,default:1},Rp=n=>Math.round(n*1e5)/1e5,sy=/(-)?([\d]*\.?[\d])+/g,WC=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,jF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function om(n){return typeof n=="string"}const am=n=>({test:e=>om(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ml=am("deg"),yo=am("%"),Ze=am("px"),FF=am("vh"),BF=am("vw"),jS={...yo,parse:n=>yo.parse(n)/100,transform:n=>yo.transform(n*100)},FS={...lu,transform:Math.round},qC={borderWidth:Ze,borderTopWidth:Ze,borderRightWidth:Ze,borderBottomWidth:Ze,borderLeftWidth:Ze,borderRadius:Ze,radius:Ze,borderTopLeftRadius:Ze,borderTopRightRadius:Ze,borderBottomRightRadius:Ze,borderBottomLeftRadius:Ze,width:Ze,maxWidth:Ze,height:Ze,maxHeight:Ze,size:Ze,top:Ze,right:Ze,bottom:Ze,left:Ze,padding:Ze,paddingTop:Ze,paddingRight:Ze,paddingBottom:Ze,paddingLeft:Ze,margin:Ze,marginTop:Ze,marginRight:Ze,marginBottom:Ze,marginLeft:Ze,rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:Xg,scaleX:Xg,scaleY:Xg,scaleZ:Xg,skew:ml,skewX:ml,skewY:ml,distance:Ze,translateX:Ze,translateY:Ze,translateZ:Ze,x:Ze,y:Ze,z:Ze,perspective:Ze,transformPerspective:Ze,opacity:Pp,originX:jS,originY:jS,originZ:Ze,zIndex:FS,fillOpacity:Pp,strokeOpacity:Pp,numOctaves:FS};function J_(n,e,t,r){const{style:i,vars:s,transform:a,transformOrigin:l}=n;let d=!1,h=!1,f=!0;for(const g in e){const v=e[g];if(HC(g)){s[g]=v;continue}const b=qC[g],S=LF(v,b);if(au.has(g)){if(d=!0,a[g]=S,!f)continue;v!==(b.default||0)&&(f=!1)}else g.startsWith("origin")?(h=!0,l[g]=S):i[g]=S}if(e.transform||(d||r?i.transform=OF(n.transform,t,f,r):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:v="50%",originZ:b=0}=l;i.transformOrigin=`${g} ${v} ${b}`}}const Z_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GC(n,e,t){for(const r in e)!ai(e[r])&&!VC(r,t)&&(n[r]=e[r])}function $F({transformTemplate:n},e,t){return C.useMemo(()=>{const r=Z_();return J_(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function UF(n,e,t){const r=n.style||{},i={};return GC(i,r,n),Object.assign(i,$F(n,e,t)),n.transformValues?n.transformValues(i):i}function VF(n,e,t){const r={},i=UF(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const zF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||zF.has(n)}let KC=n=>!Rv(n);function HF(n){n&&(KC=e=>e.startsWith("on")?!Rv(e):n(e))}try{HF(require("@emotion/is-prop-valid").default)}catch{}function WF(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(KC(i)||t===!0&&Rv(i)||!e&&!Rv(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function BS(n,e,t){return typeof n=="string"?n:Ze.transform(e+t*n)}function qF(n,e,t){const r=BS(e,n.x,n.width),i=BS(t,n.y,n.height);return`${r} ${i}`}const GF={offset:"stroke-dashoffset",array:"stroke-dasharray"},KF={offset:"strokeDashoffset",array:"strokeDasharray"};function YF(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?GF:KF;n[s.offset]=Ze.transform(-r);const a=Ze.transform(e),l=Ze.transform(t);n[s.array]=`${a} ${l}`}function eb(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:l=1,pathOffset:d=0,...h},f,g,v){if(J_(n,h,f,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:b,style:S,dimensions:x}=n;b.transform&&(x&&(S.transform=b.transform),delete b.transform),x&&(i!==void 0||s!==void 0||S.transform)&&(S.transformOrigin=qF(x,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(b.x=e),t!==void 0&&(b.y=t),r!==void 0&&(b.scale=r),a!==void 0&&YF(b,a,l,d,!1)}const YC=()=>({...Z_(),attrs:{}}),tb=n=>typeof n=="string"&&n.toLowerCase()==="svg";function XF(n,e,t,r){const i=C.useMemo(()=>{const s=YC();return eb(s,e,{enableHardwareAcceleration:!1},tb(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};GC(s,n.style,n),i.style={...s,...i.style}}return i}function QF(n=!1){return(t,r,i,{latestValues:s},a)=>{const d=(Q_(t)?XF:VF)(r,s,a,t),f={...WF(r,typeof t=="string",n),...d,ref:i},{children:g}=r,v=C.useMemo(()=>ai(g)?g.get():g,[g]);return C.createElement(t,{...f,children:v})}}function XC(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const QC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JC(n,e,t,r){XC(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(QC.has(i)?i:G_(i),e.attrs[i])}function nb(n,e){const{style:t}=n,r={};for(const i in t)(ai(t[i])||e.style&&ai(e.style[i])||VC(i,n))&&(r[i]=t[i]);return r}function ZC(n,e){const t=nb(n,e);for(const r in n)if(ai(n[r])||ai(e[r])){const i=sm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function rb(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function eE(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const Mv=n=>Array.isArray(n),JF=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),ZF=n=>Mv(n)?n[n.length-1]||0:n;function vv(n){const e=ai(n)?n.get():n;return JF(e)?e.toValue():e}function eB({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const a={latestValues:tB(r,i,s,n),renderState:e()};return t&&(a.mount=l=>t(r,l,a)),a}const tE=n=>(e,t)=>{const r=C.useContext(ey),i=C.useContext(ty),s=()=>eB(n,e,r,i);return t?s():eE(s)};function tB(n,e,t,r){const i={},s=r(n,{});for(const v in s)i[v]=vv(s[v]);let{initial:a,animate:l}=n;const d=iy(n),h=$C(n);e&&h&&!d&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const g=f?l:a;return g&&typeof g!="boolean"&&!ry(g)&&(Array.isArray(g)?g:[g]).forEach(b=>{const S=rb(n,b);if(!S)return;const{transitionEnd:x,transition:E,...P}=S;for(const M in P){let R=P[M];if(Array.isArray(R)){const O=f?R.length-1:0;R=R[O]}R!==null&&(i[M]=R)}for(const M in x)i[M]=x[M]}),i}const _n=n=>n;class $S{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function nB(n){let e=new $S,t=new $S,r=0,i=!1,s=!1;const a=new WeakSet,l={schedule:(d,h=!1,f=!1)=>{const g=f&&i,v=g?e:t;return h&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{t.remove(d),a.delete(d)},process:d=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let h=0;h<r;h++){const f=e.order[h];f(d),a.has(f)&&(l.schedule(f),n())}i=!1,s&&(s=!1,l.process(d))}};return l}const Qg=["prepare","read","update","preRender","render","postRender"],rB=40;function iB(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Qg.reduce((g,v)=>(g[v]=nB(()=>t=!0),g),{}),a=g=>s[g].process(i),l=()=>{const g=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,rB),1),i.timestamp=g,i.isProcessing=!0,Qg.forEach(a),i.isProcessing=!1,t&&e&&(r=!1,n(l))},d=()=>{t=!0,r=!0,i.isProcessing||n(l)};return{schedule:Qg.reduce((g,v)=>{const b=s[v];return g[v]=(S,x=!1,E=!1)=>(t||d(),b.schedule(S,x,E)),g},{}),cancel:g=>Qg.forEach(v=>s[v].cancel(g)),state:i,steps:s}}const{schedule:Kt,cancel:ba,state:xr,steps:Z0}=iB(typeof requestAnimationFrame<"u"?requestAnimationFrame:_n,!0),sB={useVisualState:tE({scrapeMotionValuesFromProps:ZC,createRenderState:YC,onMount:(n,e,{renderState:t,latestValues:r})=>{Kt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Kt.render(()=>{eb(t,r,{enableHardwareAcceleration:!1},tb(e.tagName),n.transformTemplate),JC(e,t)})}})},oB={useVisualState:tE({scrapeMotionValuesFromProps:nb,createRenderState:Z_})};function aB(n,{forwardMotionProps:e=!1},t,r){return{...Q_(n)?sB:oB,preloadedFeatures:t,useRender:QF(e),createVisualElement:r,Component:n}}function ga(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const nE=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function oy(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const lB=n=>e=>nE(e)&&n(e,oy(e));function va(n,e,t,r){return ga(n,e,lB(t),r)}const cB=(n,e)=>t=>e(n(t)),xl=(...n)=>n.reduce(cB);function rE(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const US=rE("dragHorizontal"),VS=rE("dragVertical");function iE(n){let e=!1;if(n==="y")e=VS();else if(n==="x")e=US();else{const t=US(),r=VS();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function sE(){const n=iE(!0);return n?(n(),!1):!0}class Il{constructor(e){this.isMounted=!1,this.node=e}update(){}}function zS(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||sE())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&Kt.update(()=>l[r](s,a))};return va(n.current,t,i,{passive:!n.getProps()[r]})}class uB extends Il{mount(){this.unmount=xl(zS(this.node,!0),zS(this.node,!1))}unmount(){}}class dB extends Il{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xl(ga(this.node.current,"focus",()=>this.onFocus()),ga(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const oE=(n,e)=>e?n===e?!0:oE(n,e.parentElement):!1;function ew(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,oy(t))}class hB extends Il{constructor(){super(...arguments),this.removeStartListeners=_n,this.removeEndListeners=_n,this.removeAccessibleListeners=_n,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=va(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:g}=this.node.getProps();Kt.update(()=>{!g&&!oE(this.node.current,l.target)?f&&f(l,d):h&&h(l,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=va(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=xl(s,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||ew("up",(d,h)=>{const{onTap:f}=this.node.getProps();f&&Kt.update(()=>f(d,h))})};this.removeEndListeners(),this.removeEndListeners=ga(this.node.current,"keyup",a),ew("down",(l,d)=>{this.startPress(l,d)})},t=ga(this.node.current,"keydown",e),r=()=>{this.isPressing&&ew("cancel",(s,a)=>this.cancelPress(s,a))},i=ga(this.node.current,"blur",r);this.removeAccessibleListeners=xl(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Kt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sE()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Kt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=va(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ga(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xl(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Gw=new WeakMap,tw=new WeakMap,fB=n=>{const e=Gw.get(n.target);e&&e(n)},pB=n=>{n.forEach(fB)};function mB({root:n,...e}){const t=n||document;tw.has(t)||tw.set(t,{});const r=tw.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(pB,{root:n,...e})),r[i]}function gB(n,e,t){const r=mB(e);return Gw.set(n,t),r.observe(n),()=>{Gw.delete(n),r.unobserve(n)}}const vB={some:0,all:1};class yB extends Il{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:vB[i]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:g}=this.node.getProps(),v=h?f:g;v&&v(d)};return gB(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(wB(e,t))&&this.startObserver()}unmount(){}}function wB({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _B={inView:{Feature:yB},tap:{Feature:hB},focus:{Feature:dB},hover:{Feature:uB}};function aE(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function bB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function xB(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function ay(n,e,t){const r=n.getProps();return rb(r,e,t!==void 0?t:r.custom,bB(n),xB(n))}let ib=_n;const Jc=n=>n*1e3,ya=n=>n/1e3,SB={current:!1},lE=n=>Array.isArray(n)&&typeof n[0]=="number";function cE(n){return!!(!n||typeof n=="string"&&uE[n]||lE(n)||Array.isArray(n)&&n.every(cE))}const bp=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,uE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bp([0,.65,.55,1]),circOut:bp([.55,0,1,.45]),backIn:bp([.31,.01,.66,-.59]),backOut:bp([.33,1.53,.69,.99])};function dE(n){if(n)return lE(n)?bp(n):Array.isArray(n)?n.map(dE):uE[n]}function AB(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:l,times:d}={}){const h={[e]:t};d&&(h.offset=d);const f=dE(l);return Array.isArray(f)&&(h.easing=f),n.animate(h,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function CB(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const hE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,EB=1e-7,kB=12;function TB(n,e,t,r,i){let s,a,l=0;do a=e+(t-e)/2,s=hE(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>EB&&++l<kB);return a}function lm(n,e,t,r){if(n===e&&t===r)return _n;const i=s=>TB(s,0,1,n,t);return s=>s===0||s===1?s:hE(i(s),e,r)}const PB=lm(.42,0,1,1),RB=lm(0,0,.58,1),fE=lm(.42,0,.58,1),MB=n=>Array.isArray(n)&&typeof n[0]!="number",pE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,mE=n=>e=>1-n(1-e),sb=n=>1-Math.sin(Math.acos(n)),gE=mE(sb),IB=pE(sb),vE=lm(.33,1.53,.69,.99),ob=mE(vE),DB=pE(ob),OB=n=>(n*=2)<1?.5*ob(n):.5*(2-Math.pow(2,-10*(n-1))),NB={linear:_n,easeIn:PB,easeInOut:fE,easeOut:RB,circIn:sb,circInOut:IB,circOut:gE,backIn:ob,backInOut:DB,backOut:vE,anticipate:OB},HS=n=>{if(Array.isArray(n)){ib(n.length===4);const[e,t,r,i]=n;return lm(e,t,r,i)}else if(typeof n=="string")return NB[n];return n},ab=(n,e)=>t=>!!(om(t)&&jF.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),yE=(n,e,t)=>r=>{if(!om(r))return r;const[i,s,a,l]=r.match(sy);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},LB=n=>Cl(0,255,n),nw={...lu,transform:n=>Math.round(LB(n))},Gc={test:ab("rgb","red"),parse:yE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+nw.transform(n)+", "+nw.transform(e)+", "+nw.transform(t)+", "+Rp(Pp.transform(r))+")"};function jB(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Kw={test:ab("#"),parse:jB,transform:Gc.transform},ch={test:ab("hsl","hue"),parse:yE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+yo.transform(Rp(e))+", "+yo.transform(Rp(t))+", "+Rp(Pp.transform(r))+")"},Or={test:n=>Gc.test(n)||Kw.test(n)||ch.test(n),parse:n=>Gc.test(n)?Gc.parse(n):ch.test(n)?ch.parse(n):Kw.parse(n),transform:n=>om(n)?n:n.hasOwnProperty("red")?Gc.transform(n):ch.transform(n)},ln=(n,e,t)=>-t*n+t*e+n;function rw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function FB({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;i=rw(d,l,n+1/3),s=rw(d,l,n),a=rw(d,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const iw=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},BB=[Kw,Gc,ch],$B=n=>BB.find(e=>e.test(n));function WS(n){const e=$B(n);let t=e.parse(n);return e===ch&&(t=FB(t)),t}const wE=(n,e)=>{const t=WS(n),r=WS(e),i={...t};return s=>(i.red=iw(t.red,r.red,s),i.green=iw(t.green,r.green,s),i.blue=iw(t.blue,r.blue,s),i.alpha=ln(t.alpha,r.alpha,s),Gc.transform(i))};function UB(n){var e,t;return isNaN(n)&&om(n)&&(((e=n.match(sy))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(WC))===null||t===void 0?void 0:t.length)||0)>0}const _E={regex:NF,countKey:"Vars",token:"${v}",parse:_n},bE={regex:WC,countKey:"Colors",token:"${c}",parse:Or.parse},xE={regex:sy,countKey:"Numbers",token:"${n}",parse:lu.parse};function sw(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Iv(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&sw(t,_E),sw(t,bE),sw(t,xE),t}function SE(n){return Iv(n).values}function AE(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Iv(n),s=e.length;return a=>{let l=i;for(let d=0;d<s;d++)d<r?l=l.replace(_E.token,a[d]):d<r+t?l=l.replace(bE.token,Or.transform(a[d])):l=l.replace(xE.token,Rp(a[d]));return l}}const VB=n=>typeof n=="number"?0:n;function zB(n){const e=SE(n);return AE(n)(e.map(VB))}const El={test:UB,parse:SE,createTransformer:AE,getAnimatableNone:zB},CE=(n,e)=>t=>`${t>0?e:n}`;function EE(n,e){return typeof n=="number"?t=>ln(n,e,t):Or.test(n)?wE(n,e):n.startsWith("var(")?CE(n,e):TE(n,e)}const kE=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,a)=>EE(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}},HB=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=EE(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},TE=(n,e)=>{const t=El.createTransformer(e),r=Iv(n),i=Iv(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?xl(kE(r.values,i.values),t):CE(n,e)},zp=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},qS=(n,e)=>t=>ln(n,e,t);function WB(n){return typeof n=="number"?qS:typeof n=="string"?Or.test(n)?wE:TE:Array.isArray(n)?kE:typeof n=="object"?HB:qS}function qB(n,e,t){const r=[],i=t||WB(n[0]),s=n.length-1;for(let a=0;a<s;a++){let l=i(n[a],n[a+1]);if(e){const d=Array.isArray(e)?e[a]||_n:e;l=xl(d,l)}r.push(l)}return r}function PE(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(ib(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=qB(e,r,i),l=a.length,d=h=>{let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=zp(n[f],n[f+1],h);return a[f](g)};return t?h=>d(Cl(n[0],n[s-1],h)):d}function GB(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=zp(0,e,r);n.push(ln(t,1,i))}}function KB(n){const e=[0];return GB(e,n.length-1),e}function YB(n,e){return n.map(t=>t*e)}function XB(n,e){return n.map(()=>e||fE).splice(0,n.length-1)}function Dv({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=MB(r)?r.map(HS):HS(r),s={done:!1,value:e[0]},a=YB(t&&t.length===e.length?t:KB(e),n),l=PE(a,e,{ease:Array.isArray(i)?i:XB(e,i)});return{calculatedDuration:n,next:d=>(s.value=l(d),s.done=d>=n,s)}}function RE(n,e){return e?n*(1e3/e):0}const QB=5;function ME(n,e,t){const r=Math.max(e-QB,0);return RE(t-n(r),e-r)}const ow=.001,JB=.01,ZB=10,e$=.05,t$=1;function n$({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,a=1-e;a=Cl(e$,t$,a),n=Cl(JB,ZB,ya(n)),a<1?(i=h=>{const f=h*a,g=f*n,v=f-t,b=Yw(h,a),S=Math.exp(-g);return ow-v/b*S},s=h=>{const g=h*a*n,v=g*t+t,b=Math.pow(a,2)*Math.pow(h,2)*n,S=Math.exp(-g),x=Yw(Math.pow(h,2),a);return(-i(h)+ow>0?-1:1)*((v-b)*S)/x}):(i=h=>{const f=Math.exp(-h*n),g=(h-t)*n+1;return-ow+f*g},s=h=>{const f=Math.exp(-h*n),g=(t-h)*(n*n);return f*g});const l=5/n,d=i$(i,s,l);if(n=Jc(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:n}}}const r$=12;function i$(n,e,t){let r=t;for(let i=1;i<r$;i++)r=r-n(r)/e(r);return r}function Yw(n,e){return n*Math.sqrt(1-e*e)}const s$=["duration","bounce"],o$=["stiffness","damping","mass"];function GS(n,e){return e.some(t=>n[t]!==void 0)}function a$(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!GS(n,o$)&&GS(n,s$)){const t=n$(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function IE({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],a={done:!1,value:i},{stiffness:l,damping:d,mass:h,duration:f,velocity:g,isResolvedFromDuration:v}=a$({...r,velocity:-ya(r.velocity||0)}),b=g||0,S=d/(2*Math.sqrt(l*h)),x=s-i,E=ya(Math.sqrt(l/h)),P=Math.abs(x)<5;t||(t=P?.01:2),e||(e=P?.005:.5);let M;if(S<1){const R=Yw(E,S);M=O=>{const L=Math.exp(-S*E*O);return s-L*((b+S*E*x)/R*Math.sin(R*O)+x*Math.cos(R*O))}}else if(S===1)M=R=>s-Math.exp(-E*R)*(x+(b+E*x)*R);else{const R=E*Math.sqrt(S*S-1);M=O=>{const L=Math.exp(-S*E*O),B=Math.min(R*O,300);return s-L*((b+S*E*x)*Math.sinh(B)+R*x*Math.cosh(B))/R}}return{calculatedDuration:v&&f||null,next:R=>{const O=M(R);if(v)a.done=R>=f;else{let L=b;R!==0&&(S<1?L=ME(M,R,O):L=0);const B=Math.abs(L)<=t,$=Math.abs(s-O)<=e;a.done=B&&$}return a.value=a.done?s:O,a}}}function KS({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:d,restDelta:h=.5,restSpeed:f}){const g=n[0],v={done:!1,value:g},b=W=>l!==void 0&&W<l||d!==void 0&&W>d,S=W=>l===void 0?d:d===void 0||Math.abs(l-W)<Math.abs(d-W)?l:d;let x=t*e;const E=g+x,P=a===void 0?E:a(E);P!==E&&(x=P-g);const M=W=>-x*Math.exp(-W/r),R=W=>P+M(W),O=W=>{const Y=M(W),ae=R(W);v.done=Math.abs(Y)<=h,v.value=v.done?P:ae};let L,B;const $=W=>{b(v.value)&&(L=W,B=IE({keyframes:[v.value,S(v.value)],velocity:ME(R,W,v.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return $(0),{calculatedDuration:null,next:W=>{let Y=!1;return!B&&L===void 0&&(Y=!0,O(W),$(W)),L!==void 0&&W>L?B.next(W-L):(!Y&&O(W),v)}}}const l$=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Kt.update(e,!0),stop:()=>ba(e),now:()=>xr.isProcessing?xr.timestamp:performance.now()}},YS=2e4;function XS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<YS;)e+=t,r=n.next(e);return e>=YS?1/0:e}const c$={decay:KS,inertia:KS,tween:Dv,keyframes:Dv,spring:IE};function Ov({autoplay:n=!0,delay:e=0,driver:t=l$,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",onPlay:d,onStop:h,onComplete:f,onUpdate:g,...v}){let b=1,S=!1,x,E;const P=()=>{E=new Promise(F=>{x=F})};P();let M;const R=c$[i]||Dv;let O;R!==Dv&&typeof r[0]!="number"&&(O=PE([0,100],r,{clamp:!1}),r=[0,100]);const L=R({...v,keyframes:r});let B;l==="mirror"&&(B=R({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let $="idle",W=null,Y=null,ae=null;L.calculatedDuration===null&&s&&(L.calculatedDuration=XS(L));const{calculatedDuration:se}=L;let le=1/0,ce=1/0;se!==null&&(le=se+a,ce=le*(s+1)-a);let me=0;const q=F=>{if(Y===null)return;b>0&&(Y=Math.min(Y,F)),b<0&&(Y=Math.min(F-ce/b,Y)),W!==null?me=W:me=Math.round(F-Y)*b;const ie=me-e*(b>=0?1:-1),pe=b>=0?ie<0:ie>ce;me=Math.max(ie,0),$==="finished"&&W===null&&(me=ce);let Te=me,De=L;if(s){const He=Math.min(me,ce)/le;let Ye=Math.floor(He),st=He%1;!st&&He>=1&&(st=1),st===1&&Ye--,Ye=Math.min(Ye,s+1),!!(Ye%2)&&(l==="reverse"?(st=1-st,a&&(st-=a/le)):l==="mirror"&&(De=B)),Te=Cl(0,1,st)*le}const Pe=pe?{done:!1,value:r[0]}:De.next(Te);O&&(Pe.value=O(Pe.value));let{done:ve}=Pe;!pe&&se!==null&&(ve=b>=0?me>=ce:me<=0);const Oe=W===null&&($==="finished"||$==="running"&&ve);return g&&g(Pe.value),Oe&&V(),Pe},z=()=>{M&&M.stop(),M=void 0},te=()=>{$="idle",z(),x(),P(),Y=ae=null},V=()=>{$="finished",f&&f(),z(),x()},ne=()=>{if(S)return;M||(M=t(q));const F=M.now();d&&d(),W!==null?Y=F-W:(!Y||$==="finished")&&(Y=F),$==="finished"&&P(),ae=Y,W=null,$="running",M.start()};n&&ne();const J={then(F,ie){return E.then(F,ie)},get time(){return ya(me)},set time(F){F=Jc(F),me=F,W!==null||!M||b===0?W=F:Y=M.now()-F/b},get duration(){const F=L.calculatedDuration===null?XS(L):L.calculatedDuration;return ya(F)},get speed(){return b},set speed(F){F===b||!M||(b=F,J.time=ya(me))},get state(){return $},play:ne,pause:()=>{$="paused",W=me},stop:()=>{S=!0,$!=="idle"&&($="idle",h&&h(),te())},cancel:()=>{ae!==null&&q(ae),te()},complete:()=>{$="finished"},sample:F=>(Y=0,q(F))};return J}function u$(n){let e;return()=>(e===void 0&&(e=n()),e)}const d$=u$(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),h$=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Jg=10,f$=2e4,p$=(n,e)=>e.type==="spring"||n==="backgroundColor"||!cE(e.ease);function m$(n,e,{onUpdate:t,onComplete:r,...i}){if(!(d$()&&h$.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,l,d,h=!1;const f=()=>{d=new Promise(R=>{l=R})};f();let{keyframes:g,duration:v=300,ease:b,times:S}=i;if(p$(e,i)){const R=Ov({...i,repeat:0,delay:0});let O={done:!1,value:g[0]};const L=[];let B=0;for(;!O.done&&B<f$;)O=R.sample(B),L.push(O.value),B+=Jg;S=void 0,g=L,v=B-Jg,b="linear"}const x=AB(n.owner.current,e,g,{...i,duration:v,ease:b,times:S}),E=()=>{h=!1,x.cancel()},P=()=>{h=!0,Kt.update(E),l(),f()};return x.onfinish=()=>{h||(n.set(CB(g,i)),r&&r(),P())},{then(R,O){return d.then(R,O)},attachTimeline(R){return x.timeline=R,x.onfinish=null,_n},get time(){return ya(x.currentTime||0)},set time(R){x.currentTime=Jc(R)},get speed(){return x.playbackRate},set speed(R){x.playbackRate=R},get duration(){return ya(v)},play:()=>{a||(x.play(),ba(E))},pause:()=>x.pause(),stop:()=>{if(a=!0,x.playState==="idle")return;const{currentTime:R}=x;if(R){const O=Ov({...i,autoplay:!1});n.setWithVelocity(O.sample(R-Jg).value,O.sample(R).value,Jg)}P()},complete:()=>{h||x.finish()},cancel:P}}function g$({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_n,pause:_n,stop:_n,then:s=>(s(),Promise.resolve()),cancel:_n,complete:_n});return e?Ov({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const v$={type:"spring",stiffness:500,damping:25,restSpeed:10},y$=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),w$={type:"keyframes",duration:.8},_$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},b$=(n,{keyframes:e})=>e.length>2?w$:au.has(n)?n.startsWith("scale")?y$(e[1]):v$:_$,Xw=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(El.test(e)||e==="0")&&!e.startsWith("url(")),x$=new Set(["brightness","contrast","saturate","opacity"]);function S$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(sy)||[];if(!r)return n;const i=t.replace(r,"");let s=x$.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const A$=/([a-z-]*)\(.*?\)/g,Qw={...El,getAnimatableNone:n=>{const e=n.match(A$);return e?e.map(S$).join(" "):n}},C$={...qC,color:Or,backgroundColor:Or,outlineColor:Or,fill:Or,stroke:Or,borderColor:Or,borderTopColor:Or,borderRightColor:Or,borderBottomColor:Or,borderLeftColor:Or,filter:Qw,WebkitFilter:Qw},lb=n=>C$[n];function DE(n,e){let t=lb(n);return t!==Qw&&(t=El),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const OE=n=>/^0[^.\s]+$/.test(n);function E$(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||OE(n)}function k$(n,e,t,r){const i=Xw(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const a=r.from!==void 0?r.from:n.get();let l;const d=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?a:s[h-1]),E$(s[h])&&d.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(l=s[h]);if(i&&d.length&&l)for(let h=0;h<d.length;h++){const f=d[h];s[f]=DE(e,l)}return s}function T$({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}function cb(n,e){return n[e]||n.default||n}const P$={skipAnimations:!1},ub=(n,e,t,r={})=>i=>{const s=cb(r,n)||{},a=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Jc(a);const d=k$(e,n,t,s),h=d[0],f=d[d.length-1],g=Xw(n,h),v=Xw(n,f);let b={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-l,onUpdate:S=>{e.set(S),s.onUpdate&&s.onUpdate(S)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(T$(s)||(b={...b,...b$(n,b)}),b.duration&&(b.duration=Jc(b.duration)),b.repeatDelay&&(b.repeatDelay=Jc(b.repeatDelay)),!g||!v||SB.current||s.type===!1||P$.skipAnimations)return g$(b);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const S=m$(e,n,b);if(S)return S}return Ov(b)};function Nv(n){return!!(ai(n)&&n.add)}const NE=n=>/^\-?\d*\.?\d+$/.test(n);function db(n,e){n.indexOf(e)===-1&&n.push(e)}function hb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class fb{constructor(){this.subscriptions=[]}add(e){return db(this.subscriptions,e),()=>hb(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const R$=n=>!isNaN(parseFloat(n));class M${constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=xr;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,Kt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Kt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=R$(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new fb);const r=this.events[e].add(t);return e==="change"?()=>{r(),Kt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?RE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bh(n,e){return new M$(n,e)}const LE=n=>e=>e.test(n),I$={test:n=>n==="auto",parse:n=>n},jE=[lu,Ze,yo,ml,BF,FF,I$],dp=n=>jE.find(LE(n)),D$=[...jE,Or,El],O$=n=>D$.find(LE(n));function N$(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bh(t))}function L$(n,e){const t=ay(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const a in s){const l=ZF(s[a]);N$(n,a,l)}}function j$(n,e,t){var r,i;const s=Object.keys(e).filter(l=>!n.hasValue(l)),a=s.length;if(a)for(let l=0;l<a;l++){const d=s[l],h=e[d];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(i=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&i!==void 0?i:e[d]),f!=null&&(typeof f=="string"&&(NE(f)||OE(f))?f=parseFloat(f):!O$(f)&&El.test(h)&&(f=DE(d,h)),n.addValue(d,bh(f,{owner:n})),t[d]===void 0&&(t[d]=f),f!==null&&n.setBaseTarget(d,f))}}function F$(n,e){return e?(e[n]||e.default||e).from:void 0}function B$(n,e,t){const r={};for(const i in n){const s=F$(i,e);if(s!==void 0)r[i]=s;else{const a=t.getValue(i);a&&(r[i]=a.get())}}return r}function $$({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function U$(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function FE(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...l}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(s=r);const h=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const g in l){const v=n.getValue(g),b=l[g];if(!v||b===void 0||f&&$$(f,g))continue;const S={delay:t,elapsed:0,...cb(s||{},g)};if(window.HandoffAppearAnimations){const P=n.getProps()[BC];if(P){const M=window.HandoffAppearAnimations(P,g,v,Kt);M!==null&&(S.elapsed=M,S.isHandoff=!0)}}let x=!S.isHandoff&&!U$(v,b);if(S.type==="spring"&&(v.getVelocity()||S.velocity)&&(x=!1),v.animation&&(x=!1),x)continue;v.start(ub(g,v,b,n.shouldReduceMotion&&au.has(g)?{type:!1}:S));const E=v.animation;Nv(d)&&(d.add(g),E.then(()=>d.remove(g))),h.push(E)}return a&&Promise.all(h).then(()=>{a&&L$(n,a)}),h}function Jw(n,e,t={}){const r=ay(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(FE(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=i;return V$(n,e,h+d,f,g,t)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(t.delay)])}function V$(n,e,t=0,r=0,i=1,s){const a=[],l=(n.variantChildren.size-1)*r,d=i===1?(h=0)=>h*r:(h=0)=>l-h*r;return Array.from(n.variantChildren).sort(z$).forEach((h,f)=>{h.notify("AnimationStart",e),a.push(Jw(h,e,{...s,delay:t+d(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function z$(n,e){return n.sortNodePosition(e)}function H$(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Jw(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=Jw(n,e,t);else{const i=typeof e=="function"?ay(n,e,t.custom):e;r=Promise.all(FE(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const W$=[...K_].reverse(),q$=K_.length;function G$(n){return e=>Promise.all(e.map(({animation:t,options:r})=>H$(n,t,r)))}function K$(n){let e=G$(n);const t=X$();let r=!0;const i=(d,h)=>{const f=ay(n,h);if(f){const{transition:g,transitionEnd:v,...b}=f;d={...d,...b,...v}}return d};function s(d){e=d(n)}function a(d,h){const f=n.getProps(),g=n.getVariantContext(!0)||{},v=[],b=new Set;let S={},x=1/0;for(let P=0;P<q$;P++){const M=W$[P],R=t[M],O=f[M]!==void 0?f[M]:g[M],L=Up(O),B=M===h?R.isActive:null;B===!1&&(x=P);let $=O===g[M]&&O!==f[M]&&L;if($&&r&&n.manuallyAnimateOnMount&&($=!1),R.protectedKeys={...S},!R.isActive&&B===null||!O&&!R.prevProp||ry(O)||typeof O=="boolean")continue;let Y=Y$(R.prevProp,O)||M===h&&R.isActive&&!$&&L||P>x&&L,ae=!1;const se=Array.isArray(O)?O:[O];let le=se.reduce(i,{});B===!1&&(le={});const{prevResolvedValues:ce={}}=R,me={...ce,...le},q=z=>{Y=!0,b.has(z)&&(ae=!0,b.delete(z)),R.needsAnimating[z]=!0};for(const z in me){const te=le[z],V=ce[z];if(S.hasOwnProperty(z))continue;let ne=!1;Mv(te)&&Mv(V)?ne=!aE(te,V):ne=te!==V,ne?te!==void 0?q(z):b.add(z):te!==void 0&&b.has(z)?q(z):R.protectedKeys[z]=!0}R.prevProp=O,R.prevResolvedValues=le,R.isActive&&(S={...S,...le}),r&&n.blockInitialAnimation&&(Y=!1),Y&&(!$||ae)&&v.push(...se.map(z=>({animation:z,options:{type:M,...d}})))}if(b.size){const P={};b.forEach(M=>{const R=n.getBaseTarget(M);R!==void 0&&(P[M]=R)}),v.push({animation:P})}let E=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(v):Promise.resolve()}function l(d,h,f){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(b=>{var S;return(S=b.animationState)===null||S===void 0?void 0:S.setActive(d,h)}),t[d].isActive=h;const v=a(f,d);for(const b in t)t[b].protectedKeys={};return v}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>t}}function Y$(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!aE(e,n):!1}function Fc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function X$(){return{animate:Fc(!0),whileInView:Fc(),whileHover:Fc(),whileTap:Fc(),whileDrag:Fc(),whileFocus:Fc(),exit:Fc()}}class Q$ extends Il{constructor(e){super(e),e.animationState||(e.animationState=K$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ry(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let J$=0;class Z$ extends Il{constructor(){super(...arguments),this.id=J$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const e3={animation:{Feature:Q$},exit:{Feature:Z$}},QS=(n,e)=>Math.abs(n-e);function t3(n,e){const t=QS(n.x,e.x),r=QS(n.y,e.y);return Math.sqrt(t**2+r**2)}class BE{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=lw(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=t3(g.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:S}=g,{timestamp:x}=xr;this.history.push({...S,timestamp:x});const{onStart:E,onMove:P}=this.handlers;v||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=aw(v,this.transformPagePoint),Kt.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=lw(g.type==="pointercancel"?this.lastMoveEventInfo:aw(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,E),S&&S(g,E)},!nE(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=oy(e),l=aw(a,this.transformPagePoint),{point:d}=l,{timestamp:h}=xr;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,lw(l,this.history)),this.removeListeners=xl(va(this.contextWindow,"pointermove",this.handlePointerMove),va(this.contextWindow,"pointerup",this.handlePointerUp),va(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ba(this.updatePoint)}}function aw(n,e){return e?{point:e(n.point)}:n}function JS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lw({point:n},e){return{point:n,delta:JS(n,$E(e)),offset:JS(n,n3(e)),velocity:r3(e,.1)}}function n3(n){return n[0]}function $E(n){return n[n.length-1]}function r3(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=$E(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Jc(e)));)t--;if(!r)return{x:0,y:0};const s=ya(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ei(n){return n.max-n.min}function Zw(n,e=0,t=.01){return Math.abs(n-e)<=t}function ZS(n,e,t,r=.5){n.origin=r,n.originPoint=ln(e.min,e.max,n.origin),n.scale=Ei(t)/Ei(e),(Zw(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ln(t.min,t.max,n.origin)-n.originPoint,(Zw(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Mp(n,e,t,r){ZS(n.x,e.x,t.x,r?r.originX:void 0),ZS(n.y,e.y,t.y,r?r.originY:void 0)}function eA(n,e,t){n.min=t.min+e.min,n.max=n.min+Ei(e)}function i3(n,e,t){eA(n.x,e.x,t.x),eA(n.y,e.y,t.y)}function tA(n,e,t){n.min=e.min-t.min,n.max=n.min+Ei(e)}function Ip(n,e,t){tA(n.x,e.x,t.x),tA(n.y,e.y,t.y)}function s3(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?ln(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?ln(t,n,r.max):Math.min(n,t)),n}function nA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function o3(n,{top:e,left:t,bottom:r,right:i}){return{x:nA(n.x,t,i),y:nA(n.y,e,r)}}function rA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function a3(n,e){return{x:rA(n.x,e.x),y:rA(n.y,e.y)}}function l3(n,e){let t=.5;const r=Ei(n),i=Ei(e);return i>r?t=zp(e.min,e.max-r,n.min):r>i&&(t=zp(n.min,n.max-i,e.min)),Cl(0,1,t)}function c3(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const e_=.35;function u3(n=e_){return n===!1?n=0:n===!0&&(n=e_),{x:iA(n,"left","right"),y:iA(n,"top","bottom")}}function iA(n,e,t){return{min:sA(n,e),max:sA(n,t)}}function sA(n,e){return typeof n=="number"?n:n[e]||0}const oA=()=>({translate:0,scale:1,origin:0,originPoint:0}),uh=()=>({x:oA(),y:oA()}),aA=()=>({min:0,max:0}),Tn=()=>({x:aA(),y:aA()});function Yi(n){return[n("x"),n("y")]}function UE({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function d3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function h3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function cw(n){return n===void 0||n===1}function t_({scale:n,scaleX:e,scaleY:t}){return!cw(n)||!cw(e)||!cw(t)}function Uc(n){return t_(n)||VE(n)||n.z||n.rotate||n.rotateX||n.rotateY}function VE(n){return lA(n.x)||lA(n.y)}function lA(n){return n&&n!=="0%"}function Lv(n,e,t){const r=n-t,i=e*r;return t+i}function cA(n,e,t,r,i){return i!==void 0&&(n=Lv(n,i,r)),Lv(n,t,r)+e}function n_(n,e=0,t=1,r,i){n.min=cA(n.min,e,t,r,i),n.max=cA(n.max,e,t,r,i)}function zE(n,{x:e,y:t}){n_(n.x,e.translate,e.scale,e.originPoint),n_(n.y,t.translate,t.scale,t.originPoint)}function f3(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=t[l],a=s.projectionDelta;const d=s.instance;d&&d.style&&d.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&dh(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,zE(n,a)),r&&Uc(s.latestValues)&&dh(n,s.latestValues))}e.x=uA(e.x),e.y=uA(e.y)}function uA(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function vl(n,e){n.min=n.min+e,n.max=n.max+e}function dA(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,a=ln(n.min,n.max,s);n_(n,e[t],e[r],a,e.scale)}const p3=["x","scaleX","originX"],m3=["y","scaleY","originY"];function dh(n,e){dA(n.x,e,p3),dA(n.y,e,m3)}function HE(n,e){return UE(h3(n.getBoundingClientRect(),e))}function g3(n,e,t){const r=HE(n,t),{scroll:i}=e;return i&&(vl(r.x,i.offset.x),vl(r.y,i.offset.y)),r}const WE=({current:n})=>n?n.ownerDocument.defaultView:null,v3=new WeakMap;class y3{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oy(f,"page").point)},s=(f,g)=>{const{drag:v,dragPropagation:b,onDragStart:S}=this.getProps();if(v&&!b&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=iE(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yi(E=>{let P=this.getAxisMotionValue(E).get()||0;if(yo.test(P)){const{projection:M}=this.visualElement;if(M&&M.layout){const R=M.layout.layoutBox[E];R&&(P=Ei(R)*(parseFloat(P)/100))}}this.originPoint[E]=P}),S&&Kt.update(()=>S(f,g),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(f,g)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:S,onDrag:x}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:E}=g;if(b&&this.currentDirection===null){this.currentDirection=w3(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),x&&x(f,g)},l=(f,g)=>this.stop(f,g),d=()=>Yi(f=>{var g;return this.getAnimationState(f)==="paused"&&((g=this.getAxisMotionValue(f).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new BE(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:WE(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Kt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Zg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=s3(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&lh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=o3(i.layoutBox,t):this.constraints=!1,this.elastic=u3(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Yi(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=c3(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!lh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=g3(r,i.root,this.visualElement.getTransformPagePoint());let a=a3(i.layout.layoutBox,s);if(t){const l=t(d3(a));this.hasMutatedConstraints=!!l,l&&(a=UE(l))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=Yi(f=>{if(!Zg(f,t,this.currentDirection))return;let g=d&&d[f]||{};a&&(g={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,S={type:"inertia",velocity:r?e[f]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(f,S)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(ub(e,r,0,t))}stopAnimation(){Yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Yi(t=>{const{drag:r}=this.getProps();if(!Zg(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[t];s.set(e[t]-ln(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!lh(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Yi(a=>{const l=this.getAxisMotionValue(a);if(l){const d=l.get();i[a]=l3({min:d,max:d},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yi(a=>{if(!Zg(a,e,null))return;const l=this.getAxisMotionValue(a),{min:d,max:h}=this.constraints[a];l.set(ln(d,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;v3.set(this.visualElement,this);const e=this.visualElement.current,t=va(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();lh(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=ga(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Yi(f=>{const g=this.getAxisMotionValue(f);g&&(this.originPoint[f]+=d[f].translate,g.set(g.get()+d[f].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=e_,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function Zg(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function w3(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class _3 extends Il{constructor(e){super(e),this.removeGroupControls=_n,this.removeListeners=_n,this.controls=new y3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_n}unmount(){this.removeGroupControls(),this.removeListeners()}}const hA=n=>(e,t)=>{n&&Kt.update(()=>n(e,t))};class b3 extends Il{constructor(){super(...arguments),this.removePointerDownListener=_n}onPointerDown(e){this.session=new BE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hA(e),onStart:hA(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Kt.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=va(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function x3(){const n=C.useContext(ty);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=C.useId();return C.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const yv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const hp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ze.test(n))n=parseFloat(n);else return n;const t=fA(n,e.target.x),r=fA(n,e.target.y);return`${t}% ${r}%`}},S3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=El.parse(n);if(i.length>5)return r;const s=El.createTransformer(n),a=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;i[0+a]/=l,i[1+a]/=d;const h=ln(l,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class A3 extends ot.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;MF(C3),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),yv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Kt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qE(n){const[e,t]=x3(),r=C.useContext(X_);return ot.createElement(A3,{...n,layoutGroup:r,switchLayoutGroup:C.useContext(UC),isPresent:e,safeToRemove:t})}const C3={borderRadius:{...hp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hp,borderTopRightRadius:hp,borderBottomLeftRadius:hp,borderBottomRightRadius:hp,boxShadow:S3},GE=["TopLeft","TopRight","BottomLeft","BottomRight"],E3=GE.length,pA=n=>typeof n=="string"?parseFloat(n):n,mA=n=>typeof n=="number"||Ze.test(n);function k3(n,e,t,r,i,s){i?(n.opacity=ln(0,t.opacity!==void 0?t.opacity:1,T3(r)),n.opacityExit=ln(e.opacity!==void 0?e.opacity:1,0,P3(r))):s&&(n.opacity=ln(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<E3;a++){const l=`border${GE[a]}Radius`;let d=gA(e,l),h=gA(t,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||mA(d)===mA(h)?(n[l]=Math.max(ln(pA(d),pA(h),r),0),(yo.test(h)||yo.test(d))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=ln(e.rotate||0,t.rotate||0,r))}function gA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const T3=KE(0,.5,gE),P3=KE(.5,.95,_n);function KE(n,e,t){return r=>r<n?0:r>e?1:t(zp(n,e,r))}function vA(n,e){n.min=e.min,n.max=e.max}function Gi(n,e){vA(n.x,e.x),vA(n.y,e.y)}function yA(n,e,t,r,i){return n-=e,n=Lv(n,1/t,r),i!==void 0&&(n=Lv(n,1/i,r)),n}function R3(n,e=0,t=1,r=.5,i,s=n,a=n){if(yo.test(e)&&(e=parseFloat(e),e=ln(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=ln(s.min,s.max,r);n===s&&(l-=e),n.min=yA(n.min,e,t,l,i),n.max=yA(n.max,e,t,l,i)}function wA(n,e,[t,r,i],s,a){R3(n,e[t],e[r],e[i],e.scale,s,a)}const M3=["x","scaleX","originX"],I3=["y","scaleY","originY"];function _A(n,e,t,r){wA(n.x,e,M3,t?t.x:void 0,r?r.x:void 0),wA(n.y,e,I3,t?t.y:void 0,r?r.y:void 0)}function bA(n){return n.translate===0&&n.scale===1}function YE(n){return bA(n.x)&&bA(n.y)}function D3(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function XE(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function xA(n){return Ei(n.x)/Ei(n.y)}class O3{constructor(){this.members=[]}add(e){db(this.members,e),e.scheduleRender()}remove(e){if(hb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SA(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:h,rotateY:f}=t;d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const N3=(n,e)=>n.depth-e.depth;class L3{constructor(){this.children=[],this.isDirty=!1}add(e){db(this.children,e),this.isDirty=!0}remove(e){hb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(N3),this.isDirty=!1,this.children.forEach(e)}}function j3(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ba(r),n(s-e))};return Kt.read(r,!0),()=>ba(r)}function F3(n){window.MotionDebug&&window.MotionDebug.record(n)}function B3(n){return n instanceof SVGElement&&n.tagName!=="svg"}function $3(n,e,t){const r=ai(n)?n:bh(n);return r.start(ub("",r,e,t)),r.animation}const AA=["","X","Y","Z"],U3={visibility:"hidden"},CA=1e3;let V3=0;const Vc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function QE({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e?.()){this.id=V3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vc.totalNodes=Vc.resolvedTargetDeltas=Vc.recalculatedProjection=0,this.nodes.forEach(W3),this.nodes.forEach(X3),this.nodes.forEach(Q3),this.nodes.forEach(q3),F3(Vc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new L3)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new fb),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const d=this.eventHandlers.get(a);d&&d.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=B3(a),this.instance=a;const{layoutId:d,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||d)&&(this.isLayoutDirty=!0),n){let g;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=j3(v,250),yv.hasAnimatedSinceResize&&(yv.hasAnimatedSinceResize=!1,this.nodes.forEach(kA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||h)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||nU,{onLayoutAnimationStart:E,onLayoutAnimationComplete:P}=f.getProps(),M=!this.targetLayout||!XE(this.targetLayout,S)||b,R=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,R);const O={...cb(x,"layout"),onPlay:E,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else v||kA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J3),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const g=this.path[f];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EA);return}this.isUpdating||this.nodes.forEach(K3),this.isUpdating=!1,this.nodes.forEach(Y3),this.nodes.forEach(z3),this.nodes.forEach(H3),this.clearAllSnapshots();const l=performance.now();xr.delta=Cl(0,1e3/60,l-xr.timestamp),xr.timestamp=l,xr.isProcessing=!0,Z0.update.process(xr),Z0.preRender.process(xr),Z0.render.process(xr),xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(G3),this.sharedNodes.forEach(Z3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!YE(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(l||Uc(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return a&&(d=this.removeTransform(d)),rU(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Tn();const l=a.measureViewportBox(),{scroll:d}=this.root;return d&&(vl(l.x,d.offset.x),vl(l.y,d.offset.y)),l}removeElementScroll(a){const l=Tn();Gi(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:g}=h;if(h!==this.root&&f&&g.layoutScroll){if(f.isRoot){Gi(l,a);const{scroll:v}=this.root;v&&(vl(l.x,-v.offset.x),vl(l.y,-v.offset.y))}vl(l.x,f.offset.x),vl(l.y,f.offset.y)}}return l}applyTransform(a,l=!1){const d=Tn();Gi(d,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&dh(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Uc(f.latestValues)&&dh(d,f.latestValues)}return Uc(this.latestValues)&&dh(d,this.latestValues),d}removeTransform(a){const l=Tn();Gi(l,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Uc(h.latestValues))continue;t_(h.latestValues)&&h.updateSnapshot();const f=Tn(),g=h.measurePageBox();Gi(f,g),_A(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Uc(this.latestValues)&&_A(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=xr.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Ip(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tn(),this.targetWithTransforms=Tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gi(this.target,this.layout.layoutBox),zE(this.target,this.targetDelta)):Gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tn(),this.relativeTargetOrigin=Tn(),Ip(this.relativeTargetOrigin,this.target,b.target),Gi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||t_(this.parent.latestValues)||VE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===xr.timestamp&&(h=!1),h)return;const{layout:f,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||g))return;Gi(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;f3(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:S}=l;if(!S){this.projectionTransform&&(this.projectionDelta=uh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=uh(),this.projectionDeltaWithTransform=uh());const x=this.projectionTransform;Mp(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.projectionTransform=SA(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==v||this.treeScale.y!==b)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),Vc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},g=uh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Tn(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,x=b!==S,E=this.getStack(),P=!E||E.members.length<=1,M=!!(x&&!P&&this.options.crossfade===!0&&!this.path.some(tU));this.animationProgress=0;let R;this.mixTargetDelta=O=>{const L=O/1e3;TA(g.x,a.x,L),TA(g.y,a.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ip(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eU(this.relativeTarget,this.relativeTargetOrigin,v,L),R&&D3(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Tn()),Gi(R,this.relativeTarget)),x&&(this.animationValues=f,k3(f,h,this.latestValues,L,M,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Kt.update(()=>{yv.hasAnimatedSinceResize=!0,this.currentAnimation=$3(0,CA,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=a;if(!(!l||!d||!h)){if(this!==a&&this.layout&&h&&JE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Tn();const g=Ei(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=Ei(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}Gi(l,d),dh(l,f),Mp(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new O3),this.sharedNodes.get(a).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const h={};for(let f=0;f<AA.length;f++){const g="rotate"+AA[f];d[g]&&(h[g]=d[g],a.setStaticValue(g,0))}a.render();for(const f in h)a.setStaticValue(f,h[f]);a.scheduleRender()}getProjectionStyles(a){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return U3;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=vv(a?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=vv(a?.pointerEvents)||""),this.hasProjected&&!Uc(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),h.transform=SA(this.projectionDeltaWithTransform,this.treeScale,v),f&&(h.transform=f(v,h.transform));const{x:b,y:S}=this.projectionDelta;h.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,g.animationValues?h.opacity=g===this?(d=(l=v.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:h.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const x in Pv){if(v[x]===void 0)continue;const{correct:E,applyTo:P}=Pv[x],M=h.transform==="none"?v[x]:E(v[x],g);if(P){const R=P.length;for(let O=0;O<R;O++)h[P[O]]=M}else h[x]=M}return this.options.layoutId&&(h.pointerEvents=g===this?vv(a?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(EA),this.root.sharedNodes.clear()}}}function z3(n){n.updateLayout()}function H3(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?Yi(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],b=Ei(v);v.min=r[g].min,v.max=v.min+b}):JE(s,t.layoutBox,r)&&Yi(g=>{const v=a?t.measuredBox[g]:t.layoutBox[g],b=Ei(r[g]);v.max=v.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+b)});const l=uh();Mp(l,r,t.layoutBox);const d=uh();a?Mp(d,n.applyTransform(i,!0),t.measuredBox):Mp(d,r,t.layoutBox);const h=!YE(l);let f=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:b}=g;if(v&&b){const S=Tn();Ip(S,t.layoutBox,v.layoutBox);const x=Tn();Ip(x,r,b.layoutBox),XE(S,x)||(f=!0),g.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=S,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function W3(n){Vc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function q3(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function G3(n){n.clearSnapshot()}function EA(n){n.clearMeasurements()}function K3(n){n.isLayoutDirty=!1}function Y3(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function kA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function X3(n){n.resolveTargetDelta()}function Q3(n){n.calcProjection()}function J3(n){n.resetRotation()}function Z3(n){n.removeLeadSnapshot()}function TA(n,e,t){n.translate=ln(e.translate,0,t),n.scale=ln(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function PA(n,e,t,r){n.min=ln(e.min,t.min,r),n.max=ln(e.max,t.max,r)}function eU(n,e,t,r){PA(n.x,e.x,t.x,r),PA(n.y,e.y,t.y,r)}function tU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const nU={duration:.45,ease:[.4,0,.1,1]},RA=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),MA=RA("applewebkit/")&&!RA("chrome/")?Math.round:_n;function IA(n){n.min=MA(n.min),n.max=MA(n.max)}function rU(n){IA(n.x),IA(n.y)}function JE(n,e,t){return n==="position"||n==="preserve-aspect"&&!Zw(xA(e),xA(t),.2)}const iU=QE({attachResizeListener:(n,e)=>ga(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),uw={current:void 0},ZE=QE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!uw.current){const n=new iU({});n.mount(window),n.setOptions({layoutScroll:!0}),uw.current=n}return uw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),sU={pan:{Feature:b3},drag:{Feature:_3,ProjectionNode:ZE,MeasureLayout:qE}},oU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aU(n){const e=oU.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function r_(n,e,t=1){const[r,i]=aU(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return NE(a)?parseFloat(a):a}else return qw(i)?r_(i,e,t+1):i}function lU(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!qw(s))return;const a=r_(s,r);a&&i.set(a)});for(const i in e){const s=e[i];if(!qw(s))continue;const a=r_(s,r);a&&(e[i]=a,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const cU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ek=n=>cU.has(n),uU=n=>Object.keys(n).some(ek),DA=n=>n===lu||n===Ze,OA=(n,e)=>parseFloat(n.split(", ")[e]),NA=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return OA(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?OA(s[1],n):0}},dU=new Set(["x","y","z"]),hU=sm.filter(n=>!dU.has(n));function fU(n){const e=[];return hU.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const xh={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:NA(4,13),y:NA(5,14)};xh.translateX=xh.x;xh.translateY=xh.y;const pU=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:a}=s,l={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(h=>{l[h]=xh[h](r,s)}),e.render();const d=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(l[h]),n[h]=xh[h](d,s)}),n},mU=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(ek);let s=[],a=!1;const l=[];if(i.forEach(d=>{const h=n.getValue(d);if(!n.hasValue(d))return;let f=t[d],g=dp(f);const v=e[d];let b;if(Mv(v)){const S=v.length,x=v[0]===null?1:0;f=v[x],g=dp(f);for(let E=x;E<S&&v[E]!==null;E++)b?ib(dp(v[E])===b):b=dp(v[E])}else b=dp(v);if(g!==b)if(DA(g)&&DA(b)){const S=h.get();typeof S=="string"&&h.set(parseFloat(S)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&b===Ze&&(e[d]=v.map(parseFloat))}else g?.transform&&b?.transform&&(f===0||v===0)?f===0?h.set(b.transform(f)):e[d]=g.transform(v):(a||(s=fU(n),a=!0),l.push(d),r[d]=r[d]!==void 0?r[d]:e[d],h.jump(v))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,h=pU(e,n,l);return s.length&&s.forEach(([f,g])=>{n.getValue(f).set(g)}),n.render(),ny&&d!==null&&window.scrollTo({top:d}),{target:h,transitionEnd:r}}else return{target:e,transitionEnd:r}};function gU(n,e,t,r){return uU(e)?mU(n,e,t,r):{target:e,transitionEnd:r}}const vU=(n,e,t,r)=>{const i=lU(n,e,r);return e=i.target,r=i.transitionEnd,gU(n,e,t,r)},i_={current:null},tk={current:!1};function yU(){if(tk.current=!0,!!ny)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>i_.current=n.matches;n.addListener(e),e()}else i_.current=!1}function wU(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],a=t[i];if(ai(s))n.addValue(i,s),Nv(r)&&r.add(i);else if(ai(a))n.addValue(i,bh(s,{owner:n})),Nv(r)&&r.remove(i);else if(a!==s)if(n.hasValue(i)){const l=n.getValue(i);!l.hasAnimated&&l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,bh(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const LA=new WeakMap,nk=Object.keys(Vp),_U=nk.length,jA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],bU=Y_.length;class xU{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Kt.render(this.render,!1,!0);const{latestValues:l,renderState:d}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=iy(t),this.isVariantNode=$C(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const g in f){const v=f[g];l[g]!==void 0&&ai(v)&&(v.set(l[g],!1),Nv(h)&&h.add(g))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,LA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),tk.current||yU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:i_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){LA.delete(this.current),this.projection&&this.projection.unmount(),ba(this.notifyUpdate),ba(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=au.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Kt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let a,l;for(let d=0;d<_U;d++){const h=nk[d],{isEnabled:f,Feature:g,ProjectionNode:v,MeasureLayout:b}=Vp[h];v&&(a=v),f(t)&&(!this.features[h]&&g&&(this.features[h]=new g(this)),b&&(l=b))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:h,drag:f,dragConstraints:g,layoutScroll:v,layoutRoot:b}=t;this.projection.setOptions({layoutId:d,layout:h,alwaysMeasureLayout:!!f||g&&lh(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:v,layoutRoot:b})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<jA.length;r++){const i=jA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=wU(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<bU;r++){const i=Y_[r],s=this.props[i];(Up(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=bh(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=rb(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ai(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new fb),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class rk extends xU{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let a=B$(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),a&&(a=i(a))),s){j$(this,r,a);const l=vU(this,r,a,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function SU(n){return window.getComputedStyle(n)}class AU extends rk{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(au.has(t)){const r=lb(t);return r&&r.default||0}else{const r=SU(e),i=(HC(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return HE(e,t)}build(e,t,r,i){J_(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return nb(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ai(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){XC(e,t,r,i)}}class CU extends rk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(au.has(t)){const r=lb(t);return r&&r.default||0}return t=QC.has(t)?t:G_(t),e.getAttribute(t)}measureInstanceViewportBox(){return Tn()}scrapeMotionValuesFromProps(e,t){return ZC(e,t)}build(e,t,r,i){eb(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){JC(e,t,r,i)}mount(e){this.isSVGTag=tb(e.tagName),super.mount(e)}}const EU=(n,e)=>Q_(n)?new CU(e,{enableHardwareAcceleration:!1}):new AU(e,{enableHardwareAcceleration:!0}),kU={layout:{ProjectionNode:ZE,MeasureLayout:qE}},TU={...e3,..._B,...sU,...kU},ur=PF((n,e)=>aB(n,e,TU,EU));function ik(){const n=C.useRef(!1);return q_(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function PU(){const n=ik(),[e,t]=C.useState(0),r=C.useCallback(()=>{n.current&&t(e+1)},[e]);return[C.useCallback(()=>Kt.postRender(r),[r]),e]}class RU extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function MU({children:n,isPresent:e}){const t=C.useId(),r=C.useRef(null),i=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:s,height:a,top:l,left:d}=i.current;if(e||!r.current||!s||!a)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),C.createElement(RU,{isPresent:e,childRef:r,sizeRef:i},C.cloneElement(n,{ref:r}))}const dw=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const l=eE(IU),d=C.useId(),h=C.useMemo(()=>({id:d,initial:e,isPresent:t,custom:i,onExitComplete:f=>{l.set(f,!0);for(const g of l.values())if(!g)return;r&&r()},register:f=>(l.set(f,!1),()=>l.delete(f))}),s?void 0:[t]);return C.useMemo(()=>{l.forEach((f,g)=>l.set(g,!1))},[t]),C.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),a==="popLayout"&&(n=C.createElement(MU,{isPresent:t},n)),C.createElement(ty.Provider,{value:h},n)};function IU(){return new Map}function DU(n){return C.useEffect(()=>()=>n(),[])}const zc=n=>n.key||"";function OU(n,e){n.forEach(t=>{const r=zc(t);e.set(r,t)})}function NU(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const go=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const l=C.useContext(X_).forceRender||PU()[0],d=ik(),h=NU(n);let f=h;const g=C.useRef(new Map).current,v=C.useRef(f),b=C.useRef(new Map).current,S=C.useRef(!0);if(q_(()=>{S.current=!1,OU(h,b),v.current=f}),DU(()=>{S.current=!0,b.clear(),g.clear()}),S.current)return C.createElement(C.Fragment,null,f.map(M=>C.createElement(dw,{key:zc(M),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:a},M)));f=[...f];const x=v.current.map(zc),E=h.map(zc),P=x.length;for(let M=0;M<P;M++){const R=x[M];E.indexOf(R)===-1&&!g.has(R)&&g.set(R,void 0)}return a==="wait"&&g.size&&(f=[]),g.forEach((M,R)=>{if(E.indexOf(R)!==-1)return;const O=b.get(R);if(!O)return;const L=x.indexOf(R);let B=M;if(!B){const $=()=>{g.delete(R);const W=Array.from(b.keys()).filter(Y=>!E.includes(Y));if(W.forEach(Y=>b.delete(Y)),v.current=h.filter(Y=>{const ae=zc(Y);return ae===R||W.includes(ae)}),!g.size){if(d.current===!1)return;l(),r&&r()}};B=C.createElement(dw,{key:zc(O),isPresent:!1,onExitComplete:$,custom:e,presenceAffectsLayout:s,mode:a},O),g.set(R,B)}f.splice(L,0,B)}),f=f.map(M=>{const R=M.key;return g.has(R)?M:C.createElement(dw,{key:zc(M),isPresent:!0,presenceAffectsLayout:s,mode:a},M)}),C.createElement(C.Fragment,null,g.size?f:f.map(M=>C.cloneElement(M)))},LU=({children:n})=>{const{user:e,loadingAuth:t,settings:r}=ki(),i=Ls(),[s,a]=C.useState({loading:!0,enabled:!1,message:""});if(C.useEffect(()=>{t||(async()=>{if(!e){a({loading:!1,enabled:!1,message:""});return}try{const{data:h,error:f}=await Se.from("system_status").select("maintenance_mode_enabled, maintenance_message").eq("id",1).single();if(f){console.error("Erro ao verificar modo de manutenção:",f),a({loading:!1,enabled:!1,message:""});return}a({loading:!1,enabled:h.maintenance_mode_enabled,message:h.maintenance_message})}catch{a({loading:!1,enabled:!1,message:""})}})()},[t,e]),t||s.loading)return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background dark:bg-background",children:y.jsx(ur.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-customPurple dark:border-customGreen border-t-transparent rounded-full"})});const l=r?.role==="ADMIN";return s.enabled&&!l?y.jsx(Fp,{to:"/manutencao",state:{message:s.message},replace:!0}):e?n:y.jsx(Fp,{to:"/login",state:{from:i},replace:!0})};var jU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const FU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tt=(n,e)=>{const t=C.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:l,...d},h)=>C.createElement("svg",{ref:h,...jU,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:`lucide lucide-${FU(n)}`,...d},[...e.map(([f,g])=>C.createElement(f,g)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t},BU=tt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$U=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),sk=tt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),ok=tt("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]),s_=tt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),FA=tt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),ak=tt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),UU=tt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),VU=tt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),pb=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),zU=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),HU=tt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),lk=tt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),WU=tt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ck=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Hp=tt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),qU=tt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),GU=tt("DraftingCompass",[["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19 12c-3.87 4-10.13 4-14 0",key:"1tsu18"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}]]),KU=tt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),mb=tt("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),uk=tt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),YU=tt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),gb=tt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),XU=tt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Wp=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),QU=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),dk=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),JU=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ZU=tt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),eV=tt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),tV=tt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),vb=tt("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]),yb=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),BA=tt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),nV=tt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),hk=tt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),rV=tt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),iV=tt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),wb=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),fk=tt("Trello",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["rect",{width:"3",height:"9",x:"7",y:"7",key:"14n3xi"}],["rect",{width:"3",height:"5",x:"14",y:"7",key:"s4azjd"}]]),sV=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),pk=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),oV=tt("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]),qp=tt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),aV=tt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Mh=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function mk(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=mk(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function gk(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=mk(n))&&(r&&(r+=" "),r+=e);return r}function lV(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=vk(e))&&(r&&(r+=" "),r+=t);return r}function vk(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=vk(n[r]))&&(t&&(t+=" "),t+=e);return t}var _b="-";function cV(n){var e=dV(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(l){var d=l.split(_b);return d[0]===""&&d.length!==1&&d.shift(),yk(d,e)||uV(l)}function a(l,d){var h=t[l]||[];return d&&i[l]?[].concat(h,i[l]):h}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function yk(n,e){if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?yk(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(_b);return e.validators.find(function(a){var l=a.validator;return l(s)})?.classGroupId}}var $A=/^\[(.+)\]$/;function uV(n){if($A.test(n)){var e=$A.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function dV(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=fV(Object.entries(n.classGroups),t);return i.forEach(function(s){var a=s[0],l=s[1];o_(l,r,a,e)}),r}function o_(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:UA(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(hV(i)){o_(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(a){var l=a[0],d=a[1];o_(d,UA(e,l),t,r)})})}function UA(n,e){var t=n;return e.split(_b).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function hV(n){return n.isThemeGetter}function fV(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var d=l[0],h=l[1];return[e+d,h]})):a});return[r,s]}):n}function pV(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,a){t.set(s,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var l=t.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return i(a,l),l},set:function(a,l){t.has(a)?t.set(a,l):i(a,l)}}}var wk="!";function mV(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(a){for(var l=[],d=0,h=0,f,g=0;g<a.length;g++){var v=a[g];if(d===0){if(v===r&&(t||a.slice(g,g+i)===e)){l.push(a.slice(h,g)),h=g+i;continue}if(v==="/"){f=g;continue}}v==="["?d++:v==="]"&&d--}var b=l.length===0?a:a.substring(h),S=b.startsWith(wk),x=S?b.substring(1):b,E=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:E}}}function gV(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function vV(n){return{cache:pV(n.cacheSize),splitModifiers:mV(n),...cV(n)}}var yV=/\s+/;function wV(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(yV).map(function(a){var l=t(a),d=l.modifiers,h=l.hasImportantModifier,f=l.baseClassName,g=l.maybePostfixModifierPosition,v=r(g?f.substring(0,g):f),b=!!g;if(!v){if(!g)return{isTailwindClass:!1,originalClassName:a};if(v=r(f),!v)return{isTailwindClass:!1,originalClassName:a};b=!1}var S=gV(d).join(":"),x=h?S+wk:S;return{isTailwindClass:!0,modifierId:x,classGroupId:v,originalClassName:a,hasPostfixModifier:b}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,d=a.classGroupId,h=a.hasPostfixModifier,f=l+d;return s.has(f)?!1:(s.add(f),i(d,h).forEach(function(g){return s.add(l+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function _V(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,a=l;function l(h){var f=e[0],g=e.slice(1),v=g.reduce(function(b,S){return S(b)},f());return r=vV(v),i=r.cache.get,s=r.cache.set,a=d,d(h)}function d(h){var f=i(h);if(f)return f;var g=wV(h,r);return s(h,g),g}return function(){return a(lV.apply(null,arguments))}}function Jt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var _k=/^\[(?:([a-z-]+):)?(.+)\]$/i,bV=/^\d+\/\d+$/,xV=new Set(["px","full","screen"]),SV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CV=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ks(n){return Kc(n)||xV.has(n)||bV.test(n)||a_(n)}function a_(n){return cu(n,"length",MV)}function EV(n){return cu(n,"size",bk)}function kV(n){return cu(n,"position",bk)}function TV(n){return cu(n,"url",IV)}function ev(n){return cu(n,"number",Kc)}function Kc(n){return!Number.isNaN(Number(n))}function PV(n){return n.endsWith("%")&&Kc(n.slice(0,-1))}function fp(n){return VA(n)||cu(n,"number",VA)}function yt(n){return _k.test(n)}function pp(){return!0}function pl(n){return SV.test(n)}function RV(n){return cu(n,"",DV)}function cu(n,e,t){var r=_k.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function MV(n){return AV.test(n)}function bk(){return!1}function IV(n){return n.startsWith("url(")}function VA(n){return Number.isInteger(Number(n))}function DV(n){return CV.test(n)}function OV(){var n=Jt("colors"),e=Jt("spacing"),t=Jt("blur"),r=Jt("brightness"),i=Jt("borderColor"),s=Jt("borderRadius"),a=Jt("borderSpacing"),l=Jt("borderWidth"),d=Jt("contrast"),h=Jt("grayscale"),f=Jt("hueRotate"),g=Jt("invert"),v=Jt("gap"),b=Jt("gradientColorStops"),S=Jt("gradientColorStopPositions"),x=Jt("inset"),E=Jt("margin"),P=Jt("opacity"),M=Jt("padding"),R=Jt("saturate"),O=Jt("scale"),L=Jt("sepia"),B=Jt("skew"),$=Jt("space"),W=Jt("translate"),Y=function(){return["auto","contain","none"]},ae=function(){return["auto","hidden","clip","visible","scroll"]},se=function(){return["auto",yt,e]},le=function(){return[yt,e]},ce=function(){return["",ks]},me=function(){return["auto",Kc,yt]},q=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},z=function(){return["solid","dashed","dotted","double","none"]},te=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},ne=function(){return["","0",yt]},J=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},F=function(){return[Kc,ev]},ie=function(){return[Kc,yt]};return{cacheSize:500,theme:{colors:[pp],spacing:[ks],blur:["none","",pl,yt],brightness:F(),borderColor:[n],borderRadius:["none","","full",pl,yt],borderSpacing:le(),borderWidth:ce(),contrast:F(),grayscale:ne(),hueRotate:ie(),invert:ne(),gap:le(),gradientColorStops:[n],gradientColorStopPositions:[PV,a_],inset:se(),margin:se(),opacity:F(),padding:le(),saturate:F(),scale:F(),sepia:ne(),skew:ie(),space:le(),translate:le()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[pl]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(q(),[yt])}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:Y()}],"overscroll-x":[{"overscroll-x":Y()}],"overscroll-y":[{"overscroll-y":Y()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",fp]}],basis:[{basis:se()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",fp]}],"grid-cols":[{"grid-cols":[pp]}],"col-start-end":[{col:["auto",{span:["full",fp]},yt]}],"col-start":[{"col-start":me()}],"col-end":[{"col-end":me()}],"grid-rows":[{"grid-rows":[pp]}],"row-start-end":[{row:["auto",{span:[fp]},yt]}],"row-start":[{"row-start":me()}],"row-end":[{"row-end":me()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[M]}],px:[{px:[M]}],py:[{py:[M]}],ps:[{ps:[M]}],pe:[{pe:[M]}],pt:[{pt:[M]}],pr:[{pr:[M]}],pb:[{pb:[M]}],pl:[{pl:[M]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",yt,e]}],"min-w":[{"min-w":["min","max","fit",yt,ks]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[pl]},pl,yt]}],h:[{h:[yt,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",yt,ks]}],"max-h":[{"max-h":[yt,e,"min","max","fit"]}],"font-size":[{text:["base",pl,a_]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ev]}],"font-family":[{font:[pp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",Kc,ev]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yt,ks]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[P]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[P]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(z(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ks]}],"underline-offset":[{"underline-offset":["auto",yt,ks]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:le()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[P]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(q(),[kV])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},TV]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[P]}],"border-style":[{border:[].concat(z(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[P]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(z())}],"outline-offset":[{"outline-offset":[yt,ks]}],"outline-w":[{outline:[ks]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[P]}],"ring-offset-w":[{"ring-offset":[ks]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",pl,RV]}],"shadow-color":[{shadow:[pp]}],opacity:[{opacity:[P]}],"mix-blend":[{"mix-blend":te()}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",pl,yt]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[g]}],saturate:[{saturate:[R]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[P]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[O]}],"scale-x":[{"scale-x":[O]}],"scale-y":[{"scale-y":[O]}],rotate:[{rotate:[fp,yt]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":le()}],"scroll-mx":[{"scroll-mx":le()}],"scroll-my":[{"scroll-my":le()}],"scroll-ms":[{"scroll-ms":le()}],"scroll-me":[{"scroll-me":le()}],"scroll-mt":[{"scroll-mt":le()}],"scroll-mr":[{"scroll-mr":le()}],"scroll-mb":[{"scroll-mb":le()}],"scroll-ml":[{"scroll-ml":le()}],"scroll-p":[{"scroll-p":le()}],"scroll-px":[{"scroll-px":le()}],"scroll-py":[{"scroll-py":le()}],"scroll-ps":[{"scroll-ps":le()}],"scroll-pe":[{"scroll-pe":le()}],"scroll-pt":[{"scroll-pt":le()}],"scroll-pr":[{"scroll-pr":le()}],"scroll-pb":[{"scroll-pb":le()}],"scroll-pl":[{"scroll-pl":le()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ks,ev]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var NV=_V(OV),xp={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var LV=xp.exports,zA;function jV(){return zA||(zA=1,function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",g=1,v=2,b=4,S=1,x=2,E=1,P=2,M=4,R=8,O=16,L=32,B=64,$=128,W=256,Y=512,ae=30,se="...",le=800,ce=16,me=1,q=2,z=3,te=1/0,V=9007199254740991,ne=17976931348623157e292,J=NaN,F=4294967295,ie=F-1,pe=F>>>1,Te=[["ary",$],["bind",E],["bindKey",P],["curry",R],["curryRight",O],["flip",Y],["partial",L],["partialRight",B],["rearg",W]],De="[object Arguments]",Pe="[object Array]",ve="[object AsyncFunction]",Oe="[object Boolean]",He="[object Date]",Ye="[object DOMException]",st="[object Error]",Rt="[object Function]",cn="[object GeneratorFunction]",Yt="[object Map]",Fr="[object Number]",Bs="[object Null]",Mn="[object Object]",Ll="[object Promise]",Co="[object Proxy]",Br="[object RegExp]",Sn="[object Set]",rs="[object String]",Eo="[object Symbol]",mu="[object Undefined]",$s="[object WeakMap]",gu="[object WeakSet]",is="[object ArrayBuffer]",li="[object DataView]",Aa="[object Float32Array]",ss="[object Float64Array]",os="[object Int8Array]",jl="[object Int16Array]",Ca="[object Int32Array]",Ea="[object Uint8Array]",Fl="[object Uint8ClampedArray]",ko="[object Uint16Array]",To="[object Uint32Array]",Bl=/\b__p \+= '';/g,$l=/\b(__p \+=) '' \+/g,Ul=/(__e\(.*?\)|\b__t\)) \+\n'';/g,as=/&(?:amp|lt|gt|quot|#39);/g,ls=/[&<>"']/g,vu=RegExp(as.source),yu=RegExp(ls.source),wu=/<%-([\s\S]+?)%>/g,_u=/<%([\s\S]+?)%>/g,Vl=/<%=([\s\S]+?)%>/g,zl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bu=/^\w*$/,Po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ro=/[\\^$.*+?()[\]{}|]/g,Mo=RegExp(Ro.source),xu=/^\s+/,ka=/\s/,Hl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ta=/\{\n\/\* \[wrapped with (.+)\] \*/,he=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,be=/\\(\\)?/g,ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Be=/\w*$/,Et=/^[-+]0x[0-9a-f]+$/i,In=/^0b[01]+$/i,Pi=/^\[object .+?Constructor\]$/,Io=/^0o[0-7]+$/i,Su=/^(?:0|[1-9]\d*)$/,gm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Au=/($^)/,jy=/['\n\r\u2028\u2029\\]/g,zt="\\ud800-\\udfff",Fy="\\u0300-\\u036f",Nh="\\ufe20-\\ufe2f",vm="\\u20d0-\\u20ff",Wl=Fy+Nh+vm,ym="\\u2700-\\u27bf",Lh="a-z\\xdf-\\xf6\\xf8-\\xff",Cu="\\xac\\xb1\\xd7\\xf7",Ri="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",By="\\u2000-\\u206f",ci=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wm="A-Z\\xc0-\\xd6\\xd8-\\xde",_m="\\ufe0e\\ufe0f",bm=Cu+Ri+By+ci,Pa="['’]",Eu="["+zt+"]",Ra="["+bm+"]",Do="["+Wl+"]",xm="\\d+",$y="["+ym+"]",ku="["+Lh+"]",jh="[^"+zt+bm+xm+ym+Lh+wm+"]",ql="\\ud83c[\\udffb-\\udfff]",Gl="(?:"+Do+"|"+ql+")",Sm="[^"+zt+"]",Kl="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Oo="["+wm+"]",Fh="\\u200d",Tu="(?:"+ku+"|"+jh+")",Am="(?:"+Oo+"|"+jh+")",Bh="(?:"+Pa+"(?:d|ll|m|re|s|t|ve))?",$h="(?:"+Pa+"(?:D|LL|M|RE|S|T|VE))?",Pu=Gl+"?",Yl="["+_m+"]?",Us="(?:"+Fh+"(?:"+[Sm,Kl,kt].join("|")+")"+Yl+Pu+")*",Vs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ma=Yl+Pu+Us,Xl="(?:"+[$y,Kl,kt].join("|")+")"+Ma,Hs="(?:"+[Sm+Do+"?",Do,Kl,kt,Eu].join("|")+")",Uy=RegExp(Pa,"g"),Cm=RegExp(Do,"g"),No=RegExp(ql+"(?="+ql+")|"+Hs+Ma,"g"),Vy=RegExp([Oo+"?"+ku+"+"+Bh+"(?="+[Ra,Oo,"$"].join("|")+")",Am+"+"+$h+"(?="+[Ra,Oo+Tu,"$"].join("|")+")",Oo+"?"+Tu+"+"+Bh,Oo+"+"+$h,zs,Vs,xm,Xl].join("|"),"g"),Em=RegExp("["+Fh+zt+Wl+_m+"]"),Ru=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,km=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zy=-1,Mt={};Mt[Aa]=Mt[ss]=Mt[os]=Mt[jl]=Mt[Ca]=Mt[Ea]=Mt[Fl]=Mt[ko]=Mt[To]=!0,Mt[De]=Mt[Pe]=Mt[is]=Mt[Oe]=Mt[li]=Mt[He]=Mt[st]=Mt[Rt]=Mt[Yt]=Mt[Fr]=Mt[Mn]=Mt[Br]=Mt[Sn]=Mt[rs]=Mt[$s]=!1;var Pt={};Pt[De]=Pt[Pe]=Pt[is]=Pt[li]=Pt[Oe]=Pt[He]=Pt[Aa]=Pt[ss]=Pt[os]=Pt[jl]=Pt[Ca]=Pt[Yt]=Pt[Fr]=Pt[Mn]=Pt[Br]=Pt[Sn]=Pt[rs]=Pt[Eo]=Pt[Ea]=Pt[Fl]=Pt[ko]=Pt[To]=!0,Pt[st]=Pt[Rt]=Pt[$s]=!1;var Ia={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Mu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hy={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Uh=parseFloat,Iu=parseInt,Du=typeof wl=="object"&&wl&&wl.Object===Object&&wl,Tm=typeof self=="object"&&self&&self.Object===Object&&self,Ht=Du||Tm||Function("return this")(),Ql=e&&!e.nodeType&&e,Mi=Ql&&!0&&n&&!n.nodeType&&n,Vh=Mi&&Mi.exports===Ql,Da=Vh&&Du.process,Zn=function(){try{var Z=Mi&&Mi.require&&Mi.require("util").types;return Z||Da&&Da.binding&&Da.binding("util")}catch{}}(),zh=Zn&&Zn.isArrayBuffer,dr=Zn&&Zn.isDate,Lo=Zn&&Zn.isMap,Ou=Zn&&Zn.isRegExp,Oa=Zn&&Zn.isSet,Pm=Zn&&Zn.isTypedArray;function er(Z,ge,ue){switch(ue.length){case 0:return Z.call(ge);case 1:return Z.call(ge,ue[0]);case 2:return Z.call(ge,ue[0],ue[1]);case 3:return Z.call(ge,ue[0],ue[1],ue[2])}return Z.apply(ge,ue)}function Hh(Z,ge,ue,Me){for(var et=-1,St=Z==null?0:Z.length;++et<St;){var un=Z[et];ge(Me,un,ue(un),Z)}return Me}function Un(Z,ge){for(var ue=-1,Me=Z==null?0:Z.length;++ue<Me&&ge(Z[ue],ue,Z)!==!1;);return Z}function Nu(Z,ge){for(var ue=Z==null?0:Z.length;ue--&&ge(Z[ue],ue,Z)!==!1;);return Z}function Wh(Z,ge){for(var ue=-1,Me=Z==null?0:Z.length;++ue<Me;)if(!ge(Z[ue],ue,Z))return!1;return!0}function Ws(Z,ge){for(var ue=-1,Me=Z==null?0:Z.length,et=0,St=[];++ue<Me;){var un=Z[ue];ge(un,ue,Z)&&(St[et++]=un)}return St}function Lu(Z,ge){var ue=Z==null?0:Z.length;return!!ue&&Na(Z,ge,0)>-1}function qh(Z,ge,ue){for(var Me=-1,et=Z==null?0:Z.length;++Me<et;)if(ue(ge,Z[Me]))return!0;return!1}function Lt(Z,ge){for(var ue=-1,Me=Z==null?0:Z.length,et=Array(Me);++ue<Me;)et[ue]=ge(Z[ue],ue,Z);return et}function qs(Z,ge){for(var ue=-1,Me=ge.length,et=Z.length;++ue<Me;)Z[et+ue]=ge[ue];return Z}function Gh(Z,ge,ue,Me){var et=-1,St=Z==null?0:Z.length;for(Me&&St&&(ue=Z[++et]);++et<St;)ue=ge(ue,Z[et],et,Z);return ue}function qy(Z,ge,ue,Me){var et=Z==null?0:Z.length;for(Me&&et&&(ue=Z[--et]);et--;)ue=ge(ue,Z[et],et,Z);return ue}function Kh(Z,ge){for(var ue=-1,Me=Z==null?0:Z.length;++ue<Me;)if(ge(Z[ue],ue,Z))return!0;return!1}var Gy=Xh("length");function Rm(Z){return Z.split("")}function Ky(Z){return Z.match(Q)||[]}function Mm(Z,ge,ue){var Me;return ue(Z,function(et,St,un){if(ge(et,St,un))return Me=St,!1}),Me}function ju(Z,ge,ue,Me){for(var et=Z.length,St=ue+(Me?1:-1);Me?St--:++St<et;)if(ge(Z[St],St,Z))return St;return-1}function Na(Z,ge,ue){return ge===ge?$u(Z,ge,ue):ju(Z,Im,ue)}function Yh(Z,ge,ue,Me){for(var et=ue-1,St=Z.length;++et<St;)if(Me(Z[et],ge))return et;return-1}function Im(Z){return Z!==Z}function Dm(Z,ge){var ue=Z==null?0:Z.length;return ue?Qh(Z,ge)/ue:J}function Xh(Z){return function(ge){return ge==null?t:ge[Z]}}function Fu(Z){return function(ge){return Z==null?t:Z[ge]}}function Om(Z,ge,ue,Me,et){return et(Z,function(St,un,Dt){ue=Me?(Me=!1,St):ge(ue,St,un,Dt)}),ue}function Yy(Z,ge){var ue=Z.length;for(Z.sort(ge);ue--;)Z[ue]=Z[ue].value;return Z}function Qh(Z,ge){for(var ue,Me=-1,et=Z.length;++Me<et;){var St=ge(Z[Me]);St!==t&&(ue=ue===t?St:ue+St)}return ue}function Jh(Z,ge){for(var ue=-1,Me=Array(Z);++ue<Z;)Me[ue]=ge(ue);return Me}function Xy(Z,ge){return Lt(ge,function(ue){return[ue,Z[ue]]})}function Nm(Z){return Z&&Z.slice(0,Uu(Z)+1).replace(xu,"")}function Ar(Z){return function(ge){return Z(ge)}}function Jl(Z,ge){return Lt(ge,function(ue){return Z[ue]})}function cs(Z,ge){return Z.has(ge)}function Lm(Z,ge){for(var ue=-1,Me=Z.length;++ue<Me&&Na(ge,Z[ue],0)>-1;);return ue}function Zh(Z,ge){for(var ue=Z.length;ue--&&Na(ge,Z[ue],0)>-1;);return ue}function jm(Z,ge){for(var ue=Z.length,Me=0;ue--;)Z[ue]===ge&&++Me;return Me}var Fm=Fu(Ia),Bm=Fu(Mu);function $m(Z){return"\\"+Wy[Z]}function La(Z,ge){return Z==null?t:Z[ge]}function ja(Z){return Em.test(Z)}function Qy(Z){return Ru.test(Z)}function Jy(Z){for(var ge,ue=[];!(ge=Z.next()).done;)ue.push(ge.value);return ue}function Bu(Z){var ge=-1,ue=Array(Z.size);return Z.forEach(function(Me,et){ue[++ge]=[et,Me]}),ue}function ef(Z,ge){return function(ue){return Z(ge(ue))}}function $r(Z,ge){for(var ue=-1,Me=Z.length,et=0,St=[];++ue<Me;){var un=Z[ue];(un===ge||un===f)&&(Z[ue]=f,St[et++]=ue)}return St}function Gs(Z){var ge=-1,ue=Array(Z.size);return Z.forEach(function(Me){ue[++ge]=Me}),ue}function Zy(Z){var ge=-1,ue=Array(Z.size);return Z.forEach(function(Me){ue[++ge]=[Me,Me]}),ue}function $u(Z,ge,ue){for(var Me=ue-1,et=Z.length;++Me<et;)if(Z[Me]===ge)return Me;return-1}function e0(Z,ge,ue){for(var Me=ue+1;Me--;)if(Z[Me]===ge)return Me;return Me}function jo(Z){return ja(Z)?Vm(Z):Gy(Z)}function Cr(Z){return ja(Z)?zm(Z):Rm(Z)}function Uu(Z){for(var ge=Z.length;ge--&&ka.test(Z.charAt(ge)););return ge}var Um=Fu(Hy);function Vm(Z){for(var ge=No.lastIndex=0;No.test(Z);)++ge;return ge}function zm(Z){return Z.match(No)||[]}function t0(Z){return Z.match(Vy)||[]}var n0=function Z(ge){ge=ge==null?Ht:Fa.defaults(Ht.Object(),ge,Fa.pick(Ht,km));var ue=ge.Array,Me=ge.Date,et=ge.Error,St=ge.Function,un=ge.Math,Dt=ge.Object,Zl=ge.RegExp,r0=ge.String,Ur=ge.TypeError,us=ue.prototype,tf=St.prototype,Ii=Dt.prototype,Ba=ge["__core-js_shared__"],ec=tf.toString,At=Ii.hasOwnProperty,$a=0,Vu=function(){var u=/[^.]+$/.exec(Ba&&Ba.keys&&Ba.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),tc=Ii.toString,zu=ec.call(Dt),Hm=Ht._,Wm=Zl("^"+ec.call(At).replace(Ro,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nc=Vh?ge.Buffer:t,ds=ge.Symbol,rc=ge.Uint8Array,nf=nc?nc.allocUnsafe:t,ui=ef(Dt.getPrototypeOf,Dt),Hu=Dt.create,Wu=Ii.propertyIsEnumerable,qu=us.splice,qm=ds?ds.isConcatSpreadable:t,hs=ds?ds.iterator:t,Fo=ds?ds.toStringTag:t,ic=function(){try{var u=io(Dt,"defineProperty");return u({},"",{}),u}catch{}}(),Gm=ge.clearTimeout!==Ht.clearTimeout&&ge.clearTimeout,Ft=Me&&Me.now!==Ht.Date.now&&Me.now,rf=ge.setTimeout!==Ht.setTimeout&&ge.setTimeout,Bo=un.ceil,Ks=un.floor,Gu=Dt.getOwnPropertySymbols,sf=nc?nc.isBuffer:t,Ua=ge.isFinite,Ku=us.join,Va=ef(Dt.keys,Dt),dn=un.max,Vn=un.min,i0=Me.now,Km=ge.parseInt,sc=un.random,Yu=us.reverse,oc=io(ge,"DataView"),$o=io(ge,"Map"),ac=io(ge,"Promise"),Ys=io(ge,"Set"),lc=io(ge,"WeakMap"),za=io(Dt,"create"),Xu=lc&&new lc,Ha={},of=so(oc),Xs=so($o),Ym=so(ac),Wa=so(Ys),Di=so(lc),Qs=ds?ds.prototype:t,Er=Qs?Qs.valueOf:t,Qu=Qs?Qs.toString:t;function N(u){if(fn(u)&&!ct(u)&&!(u instanceof lt)){if(u instanceof zn)return u;if(At.call(u,"__wrapped__"))return Sg(u)}return new zn(u)}var qa=function(){function u(){}return function(p){if(!on(p))return{};if(Hu)return Hu(p);u.prototype=p;var _=new u;return u.prototype=t,_}}();function Oi(){}function zn(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=t}N.templateSettings={escape:wu,evaluate:_u,interpolate:Vl,variable:"",imports:{_:N}},N.prototype=Oi.prototype,N.prototype.constructor=N,zn.prototype=qa(Oi.prototype),zn.prototype.constructor=zn;function lt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function Ju(){var u=new lt(this.__wrapped__);return u.__actions__=nr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=nr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=nr(this.__views__),u}function af(){if(this.__filtered__){var u=new lt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ga(){var u=this.__wrapped__.value(),p=this.__dir__,_=ct(u),T=p<0,I=_?u.length:0,j=Nf(0,I,this.__views__),H=j.start,K=j.end,ee=K-H,we=T?K:H-1,_e=this.__iteratees__,Ce=_e.length,Re=0,Ue=Vn(ee,this.__takeCount__);if(!_||!T&&I==ee&&Ue==ee)return tl(u,this.__actions__);var Qe=[];e:for(;ee--&&Re<Ue;){we+=p;for(var pt=-1,Je=u[we];++pt<Ce;){var vt=_e[pt],_t=vt.iteratee,_i=vt.type,Mr=_t(Je);if(_i==q)Je=Mr;else if(!Mr){if(_i==me)continue e;break e}}Qe[Re++]=Je}return Qe}lt.prototype=qa(Oi.prototype),lt.prototype.constructor=lt;function hr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function Bt(){this.__data__=za?za(null):{},this.size=0}function jt(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function Js(u){var p=this.__data__;if(za){var _=p[u];return _===d?t:_}return At.call(p,u)?p[u]:t}function Hn(u){var p=this.__data__;return za?p[u]!==t:At.call(p,u)}function fr(u,p){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=za&&p===t?d:p,this}hr.prototype.clear=Bt,hr.prototype.delete=jt,hr.prototype.get=Js,hr.prototype.has=Hn,hr.prototype.set=fr;function tr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function Ka(){this.__data__=[],this.size=0}function pr(u){var p=this.__data__,_=qn(p,u);if(_<0)return!1;var T=p.length-1;return _==T?p.pop():qu.call(p,_,1),--this.size,!0}function Zu(u){var p=this.__data__,_=qn(p,u);return _<0?t:p[_][1]}function Xm(u){return qn(this.__data__,u)>-1}function Qm(u,p){var _=this.__data__,T=qn(_,u);return T<0?(++this.size,_.push([u,p])):_[T][1]=p,this}tr.prototype.clear=Ka,tr.prototype.delete=pr,tr.prototype.get=Zu,tr.prototype.has=Xm,tr.prototype.set=Qm;function Vr(u){var p=-1,_=u==null?0:u.length;for(this.clear();++p<_;){var T=u[p];this.set(T[0],T[1])}}function Jm(){this.size=0,this.__data__={hash:new hr,map:new($o||tr),string:new hr}}function fs(u){var p=Ac(this,u).delete(u);return this.size-=p?1:0,p}function ed(u){return Ac(this,u).get(u)}function lf(u){return Ac(this,u).has(u)}function Zm(u,p){var _=Ac(this,u),T=_.size;return _.set(u,p),this.size+=_.size==T?0:1,this}Vr.prototype.clear=Jm,Vr.prototype.delete=fs,Vr.prototype.get=ed,Vr.prototype.has=lf,Vr.prototype.set=Zm;function Uo(u){var p=-1,_=u==null?0:u.length;for(this.__data__=new Vr;++p<_;)this.add(u[p])}function Zs(u){return this.__data__.set(u,d),this}function Ya(u){return this.__data__.has(u)}Uo.prototype.add=Uo.prototype.push=Zs,Uo.prototype.has=Ya;function Wn(u){var p=this.__data__=new tr(u);this.size=p.size}function td(){this.__data__=new tr,this.size=0}function nd(u){var p=this.__data__,_=p.delete(u);return this.size=p.size,_}function zr(u){return this.__data__.get(u)}function Hr(u){return this.__data__.has(u)}function Vo(u,p){var _=this.__data__;if(_ instanceof tr){var T=_.__data__;if(!$o||T.length<i-1)return T.push([u,p]),this.size=++_.size,this;_=this.__data__=new Vr(T)}return _.set(u,p),this.size=_.size,this}Wn.prototype.clear=td,Wn.prototype.delete=nd,Wn.prototype.get=zr,Wn.prototype.has=Hr,Wn.prototype.set=Vo;function Ni(u,p){var _=ct(u),T=!_&&Lc(u),I=!_&&!T&&dl(u),j=!_&&!T&&!I&&Wd(u),H=_||T||I||j,K=H?Jh(u.length,r0):[],ee=K.length;for(var we in u)(p||At.call(u,we))&&!(H&&(we=="length"||I&&(we=="offset"||we=="parent")||j&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||qt(we,ee)))&&K.push(we);return K}function Li(u){var p=u.length;return p?u[Za(0,p-1)]:t}function zo(u,p){return Td(nr(u),ps(p,0,u.length))}function eg(u){return Td(nr(u))}function cc(u,p,_){(_!==t&&!As(u[p],_)||_===t&&!(p in u))&&ji(u,p,_)}function Ho(u,p,_){var T=u[p];(!(At.call(u,p)&&As(T,_))||_===t&&!(p in u))&&ji(u,p,_)}function qn(u,p){for(var _=u.length;_--;)if(As(u[_][0],p))return _;return-1}function kr(u,p,_,T){return Bi(u,function(I,j,H){p(T,I,_(I),H)}),T}function $t(u,p){return u&&hi(p,Yn(p),u)}function di(u,p){return u&&hi(p,Zr(p),u)}function ji(u,p,_){p=="__proto__"&&ic?ic(u,p,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[p]=_}function rd(u,p){for(var _=-1,T=p.length,I=ue(T),j=u==null;++_<T;)I[_]=j?t:T0(u,p[_]);return I}function ps(u,p,_){return u===u&&(_!==t&&(u=u<=_?u:_),p!==t&&(u=u>=p?u:p)),u}function mr(u,p,_,T,I,j){var H,K=p&g,ee=p&v,we=p&b;if(_&&(H=I?_(u,T,I,j):_(u)),H!==t)return H;if(!on(u))return u;var _e=ct(u);if(_e){if(H=Ec(u),!K)return nr(u,H)}else{var Ce=Nn(u),Re=Ce==Rt||Ce==cn;if(dl(u))return Sf(u,K);if(Ce==Mn||Ce==De||Re&&!I){if(H=ee||Re?{}:Ln(u),!K)return ee?o0(u,di(H,u)):gd(u,$t(H,u))}else{if(!Pt[Ce])return I?u:{};H=a0(u,Ce,K)}}j||(j=new Wn);var Ue=j.get(u);if(Ue)return Ue;j.set(u,H),xx(u)?u.forEach(function(Je){H.add(mr(Je,p,_,Je,u,j))}):_x(u)&&u.forEach(function(Je,vt){H.set(vt,mr(Je,p,_,vt,u,j))});var Qe=we?ee?Sc:xc:ee?Zr:Yn,pt=_e?t:Qe(u);return Un(pt||u,function(Je,vt){pt&&(vt=Je,Je=u[vt]),Ho(H,vt,mr(Je,p,_,vt,u,j))}),H}function tg(u){var p=Yn(u);return function(_){return uc(_,u,p)}}function uc(u,p,_){var T=_.length;if(u==null)return!T;for(u=Dt(u);T--;){var I=_[T],j=p[I],H=u[I];if(H===t&&!(I in u)||!j(H))return!1}return!0}function cf(u,p,_){if(typeof u!="function")throw new Ur(a);return ll(function(){u.apply(t,_)},p)}function Fi(u,p,_,T){var I=-1,j=Lu,H=!0,K=u.length,ee=[],we=p.length;if(!K)return ee;_&&(p=Lt(p,Ar(_))),T?(j=qh,H=!1):p.length>=i&&(j=cs,H=!1,p=new Uo(p));e:for(;++I<K;){var _e=u[I],Ce=_==null?_e:_(_e);if(_e=T||_e!==0?_e:0,H&&Ce===Ce){for(var Re=we;Re--;)if(p[Re]===Ce)continue e;ee.push(_e)}else j(p,Ce,T)||ee.push(_e)}return ee}var Bi=Yr(Tr),ng=Yr(eo,!0);function dc(u,p){var _=!0;return Bi(u,function(T,I,j){return _=!!p(T,I,j),_}),_}function Wo(u,p,_){for(var T=-1,I=u.length;++T<I;){var j=u[T],H=p(j);if(H!=null&&(K===t?H===H&&!wi(H):_(H,K)))var K=H,ee=j}return ee}function rg(u,p,_,T){var I=u.length;for(_=ht(_),_<0&&(_=-_>I?0:I+_),T=T===t||T>I?I:ht(T),T<0&&(T+=I),T=_>T?0:Ax(T);_<T;)u[_++]=p;return u}function uf(u,p){var _=[];return Bi(u,function(T,I,j){p(T,I,j)&&_.push(T)}),_}function en(u,p,_,T,I){var j=-1,H=u.length;for(_||(_=Cd),I||(I=[]);++j<H;){var K=u[j];p>0&&_(K)?p>1?en(K,p-1,_,T,I):qs(I,K):T||(I[I.length]=K)}return I}var id=yd(),hc=yd(!0);function Tr(u,p){return u&&id(u,p,Yn)}function eo(u,p){return u&&hc(u,p,Yn)}function Xa(u,p){return Ws(p,function(_){return ia(u[_])})}function ms(u,p){p=Vi(p,u);for(var _=0,T=p.length;u!=null&&_<T;)u=u[gi(p[_++])];return _&&_==T?u:t}function sd(u,p,_){var T=p(u);return ct(u)?T:qs(T,_(u))}function Dn(u){return u==null?u===t?mu:Bs:Fo&&Fo in Dt(u)?Ad(u):jf(u)}function to(u,p){return u>p}function Wr(u,p){return u!=null&&At.call(u,p)}function qo(u,p){return u!=null&&p in Dt(u)}function df(u,p,_){return u>=Vn(p,_)&&u<dn(p,_)}function od(u,p,_){for(var T=_?qh:Lu,I=u[0].length,j=u.length,H=j,K=ue(j),ee=1/0,we=[];H--;){var _e=u[H];H&&p&&(_e=Lt(_e,Ar(p))),ee=Vn(_e.length,ee),K[H]=!_&&(p||I>=120&&_e.length>=120)?new Uo(H&&_e):t}_e=u[0];var Ce=-1,Re=K[0];e:for(;++Ce<I&&we.length<ee;){var Ue=_e[Ce],Qe=p?p(Ue):Ue;if(Ue=_||Ue!==0?Ue:0,!(Re?cs(Re,Qe):T(we,Qe,_))){for(H=j;--H;){var pt=K[H];if(!(pt?cs(pt,Qe):T(u[H],Qe,_)))continue e}Re&&Re.push(Qe),we.push(Ue)}}return we}function gs(u,p,_,T){return Tr(u,function(I,j,H){p(T,_(I),j,H)}),T}function qr(u,p,_){p=Vi(p,u),u=An(u,p);var T=u==null?u:u[gi(sr(p))];return T==null?t:er(T,u,_)}function ad(u){return fn(u)&&Dn(u)==De}function ig(u){return fn(u)&&Dn(u)==is}function vs(u){return fn(u)&&Dn(u)==He}function Gr(u,p,_,T,I){return u===p?!0:u==null||p==null||!fn(u)&&!fn(p)?u!==u&&p!==p:ld(u,p,_,T,Gr,I)}function ld(u,p,_,T,I,j){var H=ct(u),K=ct(p),ee=H?Pe:Nn(u),we=K?Pe:Nn(p);ee=ee==De?Mn:ee,we=we==De?Mn:we;var _e=ee==Mn,Ce=we==Mn,Re=ee==we;if(Re&&dl(u)){if(!dl(p))return!1;H=!0,_e=!1}if(Re&&!_e)return j||(j=new Wn),H||Wd(u)?Df(u,p,_,T,I,j):Of(u,p,ee,_,T,I,j);if(!(_&S)){var Ue=_e&&At.call(u,"__wrapped__"),Qe=Ce&&At.call(p,"__wrapped__");if(Ue||Qe){var pt=Ue?u.value():u,Je=Qe?p.value():p;return j||(j=new Wn),I(pt,Je,_,T,j)}}return Re?(j||(j=new Wn),mg(u,p,_,T,I,j)):!1}function sg(u){return fn(u)&&Nn(u)==Yt}function Qa(u,p,_,T){var I=_.length,j=I,H=!T;if(u==null)return!j;for(u=Dt(u);I--;){var K=_[I];if(H&&K[2]?K[1]!==u[K[0]]:!(K[0]in u))return!1}for(;++I<j;){K=_[I];var ee=K[0],we=u[ee],_e=K[1];if(H&&K[2]){if(we===t&&!(ee in u))return!1}else{var Ce=new Wn;if(T)var Re=T(we,_e,ee,u,p,Ce);if(!(Re===t?Gr(_e,we,S|x,T,Ce):Re))return!1}}return!0}function hf(u){if(!on(u)||yg(u))return!1;var p=ia(u)?Wm:Pi;return p.test(so(u))}function fc(u){return fn(u)&&Dn(u)==Br}function $i(u){return fn(u)&&Nn(u)==Sn}function pc(u){return fn(u)&&jg(u.length)&&!!Mt[Dn(u)]}function Ja(u){return typeof u=="function"?u:u==null?ei:typeof u=="object"?ct(u)?Wt(u[0],u[1]):cd(u):Nx(u)}function ys(u){if(!xs(u))return Va(u);var p=[];for(var _ in Dt(u))At.call(u,_)&&_!="constructor"&&p.push(_);return p}function ff(u){if(!on(u))return bg(u);var p=xs(u),_=[];for(var T in u)T=="constructor"&&(p||!At.call(u,T))||_.push(T);return _}function no(u,p){return u<p}function pf(u,p){var _=-1,T=Jr(u)?ue(u.length):[];return Bi(u,function(I,j,H){T[++_]=p(I,j,H)}),T}function cd(u){var p=Cc(u);return p.length==1&&p[0][2]?Ed(p[0][0],p[0][1]):function(_){return _===u||Qa(_,u,p)}}function Wt(u,p){return Ne(u)&&Tc(p)?Ed(gi(u),p):function(_){var T=T0(_,u);return T===t&&T===p?P0(_,u):Gr(p,T,S|x)}}function Go(u,p,_,T,I){u!==p&&id(p,function(j,H){if(I||(I=new Wn),on(j))mf(u,p,H,_,Go,T,I);else{var K=T?T(Wi(u,H),j,H+"",u,p,I):t;K===t&&(K=j),cc(u,H,K)}},Zr)}function mf(u,p,_,T,I,j,H){var K=Wi(u,_),ee=Wi(p,_),we=H.get(ee);if(we){cc(u,_,we);return}var _e=j?j(K,ee,_+"",u,p,H):t,Ce=_e===t;if(Ce){var Re=ct(ee),Ue=!Re&&dl(ee),Qe=!Re&&!Ue&&Wd(ee);_e=ee,Re||Ue||Qe?ct(K)?_e=K:vn(K)?_e=nr(K):Ue?(Ce=!1,_e=Sf(ee,!0)):Qe?(Ce=!1,_e=ug(ee,!0)):_e=[]:tp(ee)||Lc(ee)?(_e=K,Lc(K)?_e=Cx(K):(!on(K)||ia(K))&&(_e=Ln(ee))):Ce=!1}Ce&&(H.set(ee,_e),I(_e,ee,T,j,H),H.delete(ee)),cc(u,_,_e)}function ud(u,p){var _=u.length;if(_)return p+=p<0?_:0,qt(p,_)?u[p]:t}function mc(u,p,_){p.length?p=Lt(p,function(j){return ct(j)?function(H){return ms(H,j.length===1?j[0]:j)}:j}):p=[ei];var T=-1;p=Lt(p,Ar(Ke()));var I=pf(u,function(j,H,K){var ee=Lt(p,function(we){return we(j)});return{criteria:ee,index:++T,value:j}});return Yy(I,function(j,H){return s0(j,H,_)})}function gf(u,p){return ro(u,p,function(_,T){return P0(u,T)})}function ro(u,p,_){for(var T=-1,I=p.length,j={};++T<I;){var H=p[T],K=ms(u,H);_(K,H)&&Yo(j,Vi(H,u),K)}return j}function Xt(u){return function(p){return ms(p,u)}}function rn(u,p,_,T){var I=T?Yh:Na,j=-1,H=p.length,K=u;for(u===p&&(p=nr(p)),_&&(K=Lt(u,Ar(_)));++j<H;)for(var ee=0,we=p[j],_e=_?_(we):we;(ee=I(K,_e,ee,T))>-1;)K!==u&&qu.call(K,ee,1),qu.call(u,ee,1);return u}function mn(u,p){for(var _=u?p.length:0,T=_-1;_--;){var I=p[_];if(_==T||I!==j){var j=I;qt(I)?qu.call(u,I,1):fd(u,I)}}return u}function Za(u,p){return u+Ks(sc()*(p-u+1))}function gc(u,p,_,T){for(var I=-1,j=dn(Bo((p-u)/(_||1)),0),H=ue(j);j--;)H[T?j:++I]=u,u+=_;return H}function Ko(u,p){var _="";if(!u||p<1||p>V)return _;do p%2&&(_+=u),p=Ks(p/2),p&&(u+=u);while(p);return _}function dt(u,p){return Pr(kd(u,p,ei),u+"")}function Gn(u){return Li(qd(u))}function vf(u,p){var _=qd(u);return Td(_,ps(p,0,_.length))}function Yo(u,p,_,T){if(!on(u))return u;p=Vi(p,u);for(var I=-1,j=p.length,H=j-1,K=u;K!=null&&++I<j;){var ee=gi(p[I]),we=_;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return u;if(I!=H){var _e=K[ee];we=T?T(_e,ee,K):t,we===t&&(we=on(_e)?_e:qt(p[I+1])?[]:{})}Ho(K,ee,we),K=K[ee]}return u}var dd=Xu?function(u,p){return Xu.set(u,p),u}:ei,Ui=ic?function(u,p){return ic(u,"toString",{configurable:!0,enumerable:!1,value:M0(p),writable:!0})}:ei;function Kr(u){return Td(qd(u))}function Kn(u,p,_){var T=-1,I=u.length;p<0&&(p=-p>I?0:I+p),_=_>I?I:_,_<0&&(_+=I),I=p>_?0:_-p>>>0,p>>>=0;for(var j=ue(I);++T<I;)j[T]=u[T+p];return j}function yf(u,p){var _;return Bi(u,function(T,I,j){return _=p(T,I,j),!_}),!!_}function el(u,p,_){var T=0,I=u==null?T:u.length;if(typeof p=="number"&&p===p&&I<=pe){for(;T<I;){var j=T+I>>>1,H=u[j];H!==null&&!wi(H)&&(_?H<=p:H<p)?T=j+1:I=j}return I}return hd(u,p,ei,_)}function hd(u,p,_,T){var I=0,j=u==null?0:u.length;if(j===0)return 0;p=_(p);for(var H=p!==p,K=p===null,ee=wi(p),we=p===t;I<j;){var _e=Ks((I+j)/2),Ce=_(u[_e]),Re=Ce!==t,Ue=Ce===null,Qe=Ce===Ce,pt=wi(Ce);if(H)var Je=T||Qe;else we?Je=Qe&&(T||Re):K?Je=Qe&&Re&&(T||!Ue):ee?Je=Qe&&Re&&!Ue&&(T||!pt):Ue||pt?Je=!1:Je=T?Ce<=p:Ce<p;Je?I=_e+1:j=_e}return Vn(j,ie)}function wf(u,p){for(var _=-1,T=u.length,I=0,j=[];++_<T;){var H=u[_],K=p?p(H):H;if(!_||!As(K,ee)){var ee=K;j[I++]=H===0?0:H}}return j}function _f(u){return typeof u=="number"?u:wi(u)?J:+u}function gr(u){if(typeof u=="string")return u;if(ct(u))return Lt(u,gr)+"";if(wi(u))return Qu?Qu.call(u):"";var p=u+"";return p=="0"&&1/u==-te?"-0":p}function ws(u,p,_){var T=-1,I=Lu,j=u.length,H=!0,K=[],ee=K;if(_)H=!1,I=qh;else if(j>=i){var we=p?null:pg(u);if(we)return Gs(we);H=!1,I=cs,ee=new Uo}else ee=p?[]:K;e:for(;++T<j;){var _e=u[T],Ce=p?p(_e):_e;if(_e=_||_e!==0?_e:0,H&&Ce===Ce){for(var Re=ee.length;Re--;)if(ee[Re]===Ce)continue e;p&&ee.push(Ce),K.push(_e)}else I(ee,Ce,_)||(ee!==K&&ee.push(Ce),K.push(_e))}return K}function fd(u,p){return p=Vi(p,u),u=An(u,p),u==null||delete u[gi(sr(p))]}function bf(u,p,_,T){return Yo(u,p,_(ms(u,p)),T)}function vc(u,p,_,T){for(var I=u.length,j=T?I:-1;(T?j--:++j<I)&&p(u[j],j,u););return _?Kn(u,T?0:j,T?j+1:I):Kn(u,T?j+1:0,T?I:j)}function tl(u,p){var _=u;return _ instanceof lt&&(_=_.value()),Gh(p,function(T,I){return I.func.apply(I.thisArg,qs([T],I.args))},_)}function pd(u,p,_){var T=u.length;if(T<2)return T?ws(u[0]):[];for(var I=-1,j=ue(T);++I<T;)for(var H=u[I],K=-1;++K<T;)K!=I&&(j[I]=Fi(j[I]||H,u[K],p,_));return ws(en(j,1),p,_)}function yc(u,p,_){for(var T=-1,I=u.length,j=p.length,H={};++T<I;){var K=T<j?p[T]:t;_(H,u[T],K)}return H}function nl(u){return vn(u)?u:[]}function md(u){return typeof u=="function"?u:ei}function Vi(u,p){return ct(u)?u:Ne(u,p)?[u]:$f(Ot(u))}var og=dt;function _s(u,p,_){var T=u.length;return _=_===t?T:_,!p&&_>=T?u:Kn(u,p,_)}var xf=Gm||function(u){return Ht.clearTimeout(u)};function Sf(u,p){if(p)return u.slice();var _=u.length,T=nf?nf(_):new u.constructor(_);return u.copy(T),T}function wc(u){var p=new u.constructor(u.byteLength);return new rc(p).set(new rc(u)),p}function ag(u,p){var _=p?wc(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function lg(u){var p=new u.constructor(u.source,Be.exec(u));return p.lastIndex=u.lastIndex,p}function cg(u){return Er?Dt(Er.call(u)):{}}function ug(u,p){var _=p?wc(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function Af(u,p){if(u!==p){var _=u!==t,T=u===null,I=u===u,j=wi(u),H=p!==t,K=p===null,ee=p===p,we=wi(p);if(!K&&!we&&!j&&u>p||j&&H&&ee&&!K&&!we||T&&H&&ee||!_&&ee||!I)return 1;if(!T&&!j&&!we&&u<p||we&&_&&I&&!T&&!j||K&&_&&I||!H&&I||!ee)return-1}return 0}function s0(u,p,_){for(var T=-1,I=u.criteria,j=p.criteria,H=I.length,K=_.length;++T<H;){var ee=Af(I[T],j[T]);if(ee){if(T>=K)return ee;var we=_[T];return ee*(we=="desc"?-1:1)}}return u.index-p.index}function dg(u,p,_,T){for(var I=-1,j=u.length,H=_.length,K=-1,ee=p.length,we=dn(j-H,0),_e=ue(ee+we),Ce=!T;++K<ee;)_e[K]=p[K];for(;++I<H;)(Ce||I<j)&&(_e[_[I]]=u[I]);for(;we--;)_e[K++]=u[I++];return _e}function Cf(u,p,_,T){for(var I=-1,j=u.length,H=-1,K=_.length,ee=-1,we=p.length,_e=dn(j-K,0),Ce=ue(_e+we),Re=!T;++I<_e;)Ce[I]=u[I];for(var Ue=I;++ee<we;)Ce[Ue+ee]=p[ee];for(;++H<K;)(Re||I<j)&&(Ce[Ue+_[H]]=u[I++]);return Ce}function nr(u,p){var _=-1,T=u.length;for(p||(p=ue(T));++_<T;)p[_]=u[_];return p}function hi(u,p,_,T){var I=!_;_||(_={});for(var j=-1,H=p.length;++j<H;){var K=p[j],ee=T?T(_[K],u[K],K,_,u):t;ee===t&&(ee=u[K]),I?ji(_,K,ee):Ho(_,K,ee)}return _}function gd(u,p){return hi(u,fi(u),p)}function o0(u,p){return hi(u,gg(u),p)}function vd(u,p){return function(_,T){var I=ct(_)?Hh:kr,j=p?p():{};return I(_,u,Ke(T,2),j)}}function rl(u){return dt(function(p,_){var T=-1,I=_.length,j=I>1?_[I-1]:t,H=I>2?_[2]:t;for(j=u.length>3&&typeof j=="function"?(I--,j):t,H&&ir(_[0],_[1],H)&&(j=I<3?t:j,I=1),p=Dt(p);++T<I;){var K=_[T];K&&u(p,K,T,j)}return p})}function Yr(u,p){return function(_,T){if(_==null)return _;if(!Jr(_))return u(_,T);for(var I=_.length,j=p?I:-1,H=Dt(_);(p?j--:++j<I)&&T(H[j],j,H)!==!1;);return _}}function yd(u){return function(p,_,T){for(var I=-1,j=Dt(p),H=T(p),K=H.length;K--;){var ee=H[u?K:++I];if(_(j[ee],ee,j)===!1)break}return p}}function wd(u,p,_){var T=p&E,I=il(u);function j(){var H=this&&this!==Ht&&this instanceof j?I:u;return H.apply(T?_:this,arguments)}return j}function Ef(u){return function(p){p=Ot(p);var _=ja(p)?Cr(p):t,T=_?_[0]:p.charAt(0),I=_?_s(_,1).join(""):p.slice(1);return T[u]()+I}}function Xo(u){return function(p){return Gh(Dx(Ix(p).replace(Uy,"")),u,"")}}function il(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var _=qa(u.prototype),T=u.apply(_,p);return on(T)?T:_}}function kf(u,p,_){var T=il(u);function I(){for(var j=arguments.length,H=ue(j),K=j,ee=bs(I);K--;)H[K]=arguments[K];var we=j<3&&H[0]!==ee&&H[j-1]!==ee?[]:$r(H,ee);if(j-=we.length,j<_)return rr(u,p,sl,I.placeholder,t,H,we,t,t,_-j);var _e=this&&this!==Ht&&this instanceof I?T:u;return er(_e,this,H)}return I}function Qo(u){return function(p,_,T){var I=Dt(p);if(!Jr(p)){var j=Ke(_,3);p=Yn(p),_=function(K){return j(I[K],K,I)}}var H=u(p,_,T);return H>-1?I[j?p[H]:H]:t}}function _d(u){return Hi(function(p){var _=p.length,T=_,I=zn.prototype.thru;for(u&&p.reverse();T--;){var j=p[T];if(typeof j!="function")throw new Ur(a);if(I&&!H&&ol(j)=="wrapper")var H=new zn([],!0)}for(T=H?T:_;++T<_;){j=p[T];var K=ol(j),ee=K=="wrapper"?Sd(j):t;ee&&kc(ee[0])&&ee[1]==($|R|L|W)&&!ee[4].length&&ee[9]==1?H=H[ol(ee[0])].apply(H,ee[3]):H=j.length==1&&kc(j)?H[K]():H.thru(j)}return function(){var we=arguments,_e=we[0];if(H&&we.length==1&&ct(_e))return H.plant(_e).value();for(var Ce=0,Re=_?p[Ce].apply(this,we):_e;++Ce<_;)Re=p[Ce].call(this,Re);return Re}})}function sl(u,p,_,T,I,j,H,K,ee,we){var _e=p&$,Ce=p&E,Re=p&P,Ue=p&(R|O),Qe=p&Y,pt=Re?t:il(u);function Je(){for(var vt=arguments.length,_t=ue(vt),_i=vt;_i--;)_t[_i]=arguments[_i];if(Ue)var Mr=bs(Je),bi=jm(_t,Mr);if(T&&(_t=dg(_t,T,I,Ue)),j&&(_t=Cf(_t,j,H,Ue)),vt-=bi,Ue&&vt<we){var yn=$r(_t,Mr);return rr(u,p,sl,Je.placeholder,_,_t,yn,K,ee,we-vt)}var Cs=Ce?_:this,oa=Re?Cs[u]:u;return vt=_t.length,K?_t=pi(_t,K):Qe&&vt>1&&_t.reverse(),_e&&ee<vt&&(_t.length=ee),this&&this!==Ht&&this instanceof Je&&(oa=pt||il(oa)),oa.apply(Cs,_t)}return Je}function hg(u,p){return function(_,T){return gs(_,u,p(T),{})}}function _c(u,p){return function(_,T){var I;if(_===t&&T===t)return p;if(_!==t&&(I=_),T!==t){if(I===t)return T;typeof _=="string"||typeof T=="string"?(_=gr(_),T=gr(T)):(_=_f(_),T=_f(T)),I=u(_,T)}return I}}function bd(u){return Hi(function(p){return p=Lt(p,Ar(Ke())),dt(function(_){var T=this;return u(p,function(I){return er(I,T,_)})})})}function bc(u,p){p=p===t?" ":gr(p);var _=p.length;if(_<2)return _?Ko(p,u):p;var T=Ko(p,Bo(u/jo(p)));return ja(p)?_s(Cr(T),0,u).join(""):T.slice(0,u)}function fg(u,p,_,T){var I=p&E,j=il(u);function H(){for(var K=-1,ee=arguments.length,we=-1,_e=T.length,Ce=ue(_e+ee),Re=this&&this!==Ht&&this instanceof H?j:u;++we<_e;)Ce[we]=T[we];for(;ee--;)Ce[we++]=arguments[++K];return er(Re,I?_:this,Ce)}return H}function Tf(u){return function(p,_,T){return T&&typeof T!="number"&&ir(p,_,T)&&(_=T=t),p=sa(p),_===t?(_=p,p=0):_=sa(_),T=T===t?p<_?1:-1:sa(T),gc(p,_,T,u)}}function xd(u){return function(p,_){return typeof p=="string"&&typeof _=="string"||(p=qi(p),_=qi(_)),u(p,_)}}function rr(u,p,_,T,I,j,H,K,ee,we){var _e=p&R,Ce=_e?H:t,Re=_e?t:H,Ue=_e?j:t,Qe=_e?t:j;p|=_e?L:B,p&=~(_e?B:L),p&M||(p&=-4);var pt=[u,p,I,Ue,Ce,Qe,Re,K,ee,we],Je=_.apply(t,pt);return kc(u)&&Ff(Je,pt),Je.placeholder=T,Bf(Je,u,p)}function On(u){var p=un[u];return function(_,T){if(_=qi(_),T=T==null?0:Vn(ht(T),292),T&&Ua(_)){var I=(Ot(_)+"e").split("e"),j=p(I[0]+"e"+(+I[1]+T));return I=(Ot(j)+"e").split("e"),+(I[0]+"e"+(+I[1]-T))}return p(_)}}var pg=Ys&&1/Gs(new Ys([,-0]))[1]==te?function(u){return new Ys(u)}:O0;function Pf(u){return function(p){var _=Nn(p);return _==Yt?Bu(p):_==Sn?Zy(p):Xy(p,u(p))}}function zi(u,p,_,T,I,j,H,K){var ee=p&P;if(!ee&&typeof u!="function")throw new Ur(a);var we=T?T.length:0;if(we||(p&=-97,T=I=t),H=H===t?H:dn(ht(H),0),K=K===t?K:ht(K),we-=I?I.length:0,p&B){var _e=T,Ce=I;T=I=t}var Re=ee?t:Sd(u),Ue=[u,p,_,T,I,_e,Ce,j,H,K];if(Re&&_g(Ue,Re),u=Ue[0],p=Ue[1],_=Ue[2],T=Ue[3],I=Ue[4],K=Ue[9]=Ue[9]===t?ee?0:u.length:dn(Ue[9]-we,0),!K&&p&(R|O)&&(p&=-25),!p||p==E)var Qe=wd(u,p,_);else p==R||p==O?Qe=kf(u,p,K):(p==L||p==(E|L))&&!I.length?Qe=fg(u,p,_,T):Qe=sl.apply(t,Ue);var pt=Re?dd:Ff;return Bf(pt(Qe,Ue),u,p)}function Rf(u,p,_,T){return u===t||As(u,Ii[_])&&!At.call(T,_)?p:u}function Mf(u,p,_,T,I,j){return on(u)&&on(p)&&(j.set(p,u),Go(u,p,t,Mf,j),j.delete(p)),u}function If(u){return tp(u)?t:u}function Df(u,p,_,T,I,j){var H=_&S,K=u.length,ee=p.length;if(K!=ee&&!(H&&ee>K))return!1;var we=j.get(u),_e=j.get(p);if(we&&_e)return we==p&&_e==u;var Ce=-1,Re=!0,Ue=_&x?new Uo:t;for(j.set(u,p),j.set(p,u);++Ce<K;){var Qe=u[Ce],pt=p[Ce];if(T)var Je=H?T(pt,Qe,Ce,p,u,j):T(Qe,pt,Ce,u,p,j);if(Je!==t){if(Je)continue;Re=!1;break}if(Ue){if(!Kh(p,function(vt,_t){if(!cs(Ue,_t)&&(Qe===vt||I(Qe,vt,_,T,j)))return Ue.push(_t)})){Re=!1;break}}else if(!(Qe===pt||I(Qe,pt,_,T,j))){Re=!1;break}}return j.delete(u),j.delete(p),Re}function Of(u,p,_,T,I,j,H){switch(_){case li:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case is:return!(u.byteLength!=p.byteLength||!j(new rc(u),new rc(p)));case Oe:case He:case Fr:return As(+u,+p);case st:return u.name==p.name&&u.message==p.message;case Br:case rs:return u==p+"";case Yt:var K=Bu;case Sn:var ee=T&S;if(K||(K=Gs),u.size!=p.size&&!ee)return!1;var we=H.get(u);if(we)return we==p;T|=x,H.set(u,p);var _e=Df(K(u),K(p),T,I,j,H);return H.delete(u),_e;case Eo:if(Er)return Er.call(u)==Er.call(p)}return!1}function mg(u,p,_,T,I,j){var H=_&S,K=xc(u),ee=K.length,we=xc(p),_e=we.length;if(ee!=_e&&!H)return!1;for(var Ce=ee;Ce--;){var Re=K[Ce];if(!(H?Re in p:At.call(p,Re)))return!1}var Ue=j.get(u),Qe=j.get(p);if(Ue&&Qe)return Ue==p&&Qe==u;var pt=!0;j.set(u,p),j.set(p,u);for(var Je=H;++Ce<ee;){Re=K[Ce];var vt=u[Re],_t=p[Re];if(T)var _i=H?T(_t,vt,Re,p,u,j):T(vt,_t,Re,u,p,j);if(!(_i===t?vt===_t||I(vt,_t,_,T,j):_i)){pt=!1;break}Je||(Je=Re=="constructor")}if(pt&&!Je){var Mr=u.constructor,bi=p.constructor;Mr!=bi&&"constructor"in u&&"constructor"in p&&!(typeof Mr=="function"&&Mr instanceof Mr&&typeof bi=="function"&&bi instanceof bi)&&(pt=!1)}return j.delete(u),j.delete(p),pt}function Hi(u){return Pr(kd(u,t,Rd),u+"")}function xc(u){return sd(u,Yn,fi)}function Sc(u){return sd(u,Zr,gg)}var Sd=Xu?function(u){return Xu.get(u)}:O0;function ol(u){for(var p=u.name+"",_=Ha[p],T=At.call(Ha,p)?_.length:0;T--;){var I=_[T],j=I.func;if(j==null||j==u)return I.name}return p}function bs(u){var p=At.call(N,"placeholder")?N:u;return p.placeholder}function Ke(){var u=N.iteratee||I0;return u=u===I0?Ja:u,arguments.length?u(arguments[0],arguments[1]):u}function Ac(u,p){var _=u.__data__;return al(p)?_[typeof p=="string"?"string":"hash"]:_.map}function Cc(u){for(var p=Yn(u),_=p.length;_--;){var T=p[_],I=u[T];p[_]=[T,I,Tc(I)]}return p}function io(u,p){var _=La(u,p);return hf(_)?_:t}function Ad(u){var p=At.call(u,Fo),_=u[Fo];try{u[Fo]=t;var T=!0}catch{}var I=tc.call(u);return T&&(p?u[Fo]=_:delete u[Fo]),I}var fi=Gu?function(u){return u==null?[]:(u=Dt(u),Ws(Gu(u),function(p){return Wu.call(u,p)}))}:N0,gg=Gu?function(u){for(var p=[];u;)qs(p,fi(u)),u=ui(u);return p}:N0,Nn=Dn;(oc&&Nn(new oc(new ArrayBuffer(1)))!=li||$o&&Nn(new $o)!=Yt||ac&&Nn(ac.resolve())!=Ll||Ys&&Nn(new Ys)!=Sn||lc&&Nn(new lc)!=$s)&&(Nn=function(u){var p=Dn(u),_=p==Mn?u.constructor:t,T=_?so(_):"";if(T)switch(T){case of:return li;case Xs:return Yt;case Ym:return Ll;case Wa:return Sn;case Di:return $s}return p});function Nf(u,p,_){for(var T=-1,I=_.length;++T<I;){var j=_[T],H=j.size;switch(j.type){case"drop":u+=H;break;case"dropRight":p-=H;break;case"take":p=Vn(p,u+H);break;case"takeRight":u=dn(u,p-H);break}}return{start:u,end:p}}function vg(u){var p=u.match(Ta);return p?p[1].split(he):[]}function Lf(u,p,_){p=Vi(p,u);for(var T=-1,I=p.length,j=!1;++T<I;){var H=gi(p[T]);if(!(j=u!=null&&_(u,H)))break;u=u[H]}return j||++T!=I?j:(I=u==null?0:u.length,!!I&&jg(I)&&qt(H,I)&&(ct(u)||Lc(u)))}function Ec(u){var p=u.length,_=new u.constructor(p);return p&&typeof u[0]=="string"&&At.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function Ln(u){return typeof u.constructor=="function"&&!xs(u)?qa(ui(u)):{}}function a0(u,p,_){var T=u.constructor;switch(p){case is:return wc(u);case Oe:case He:return new T(+u);case li:return ag(u,_);case Aa:case ss:case os:case jl:case Ca:case Ea:case Fl:case ko:case To:return ug(u,_);case Yt:return new T;case Fr:case rs:return new T(u);case Br:return lg(u);case Sn:return new T;case Eo:return cg(u)}}function l0(u,p){var _=p.length;if(!_)return u;var T=_-1;return p[T]=(_>1?"& ":"")+p[T],p=p.join(_>2?", ":" "),u.replace(Hl,`{
/* [wrapped with `+p+`] */
`)}function Cd(u){return ct(u)||Lc(u)||!!(qm&&u&&u[qm])}function qt(u,p){var _=typeof u;return p=p??V,!!p&&(_=="number"||_!="symbol"&&Su.test(u))&&u>-1&&u%1==0&&u<p}function ir(u,p,_){if(!on(_))return!1;var T=typeof p;return(T=="number"?Jr(_)&&qt(p,_.length):T=="string"&&p in _)?As(_[p],u):!1}function Ne(u,p){if(ct(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||wi(u)?!0:bu.test(u)||!zl.test(u)||p!=null&&u in Dt(p)}function al(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function kc(u){var p=ol(u),_=N[p];if(typeof _!="function"||!(p in lt.prototype))return!1;if(u===_)return!0;var T=Sd(_);return!!T&&u===T[0]}function yg(u){return!!Vu&&Vu in u}var c0=Ba?ia:L0;function xs(u){var p=u&&u.constructor,_=typeof p=="function"&&p.prototype||Ii;return u===_}function Tc(u){return u===u&&!on(u)}function Ed(u,p){return function(_){return _==null?!1:_[u]===p&&(p!==t||u in Dt(_))}}function wg(u){var p=oe(u,function(T){return _.size===h&&_.clear(),T}),_=p.cache;return p}function _g(u,p){var _=u[1],T=p[1],I=_|T,j=I<(E|P|$),H=T==$&&_==R||T==$&&_==W&&u[7].length<=p[8]||T==($|W)&&p[7].length<=p[8]&&_==R;if(!(j||H))return u;T&E&&(u[2]=p[2],I|=_&E?0:M);var K=p[3];if(K){var ee=u[3];u[3]=ee?dg(ee,K,p[4]):K,u[4]=ee?$r(u[3],f):p[4]}return K=p[5],K&&(ee=u[5],u[5]=ee?Cf(ee,K,p[6]):K,u[6]=ee?$r(u[5],f):p[6]),K=p[7],K&&(u[7]=K),T&$&&(u[8]=u[8]==null?p[8]:Vn(u[8],p[8])),u[9]==null&&(u[9]=p[9]),u[0]=p[0],u[1]=I,u}function bg(u){var p=[];if(u!=null)for(var _ in Dt(u))p.push(_);return p}function jf(u){return tc.call(u)}function kd(u,p,_){return p=dn(p===t?u.length-1:p,0),function(){for(var T=arguments,I=-1,j=dn(T.length-p,0),H=ue(j);++I<j;)H[I]=T[p+I];I=-1;for(var K=ue(p+1);++I<p;)K[I]=T[I];return K[p]=_(H),er(u,this,K)}}function An(u,p){return p.length<2?u:ms(u,Kn(p,0,-1))}function pi(u,p){for(var _=u.length,T=Vn(p.length,_),I=nr(u);T--;){var j=p[T];u[T]=qt(j,_)?I[j]:t}return u}function Wi(u,p){if(!(p==="constructor"&&typeof u[p]=="function")&&p!="__proto__")return u[p]}var Ff=mi(dd),ll=rf||function(u,p){return Ht.setTimeout(u,p)},Pr=mi(Ui);function Bf(u,p,_){var T=p+"";return Pr(u,l0(T,xg(vg(T),_)))}function mi(u){var p=0,_=0;return function(){var T=i0(),I=ce-(T-_);if(_=T,I>0){if(++p>=le)return arguments[0]}else p=0;return u.apply(t,arguments)}}function Td(u,p){var _=-1,T=u.length,I=T-1;for(p=p===t?T:p;++_<p;){var j=Za(_,I),H=u[j];u[j]=u[_],u[_]=H}return u.length=p,u}var $f=wg(function(u){var p=[];return u.charCodeAt(0)===46&&p.push(""),u.replace(Po,function(_,T,I,j){p.push(I?j.replace(be,"$1"):T||_)}),p});function gi(u){if(typeof u=="string"||wi(u))return u;var p=u+"";return p=="0"&&1/u==-te?"-0":p}function so(u){if(u!=null){try{return ec.call(u)}catch{}try{return u+""}catch{}}return""}function xg(u,p){return Un(Te,function(_){var T="_."+_[0];p&_[1]&&!Lu(u,T)&&u.push(T)}),u.sort()}function Sg(u){if(u instanceof lt)return u.clone();var p=new zn(u.__wrapped__,u.__chain__);return p.__actions__=nr(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}function Pd(u,p,_){(_?ir(u,p,_):p===t)?p=1:p=dn(ht(p),0);var T=u==null?0:u.length;if(!T||p<1)return[];for(var I=0,j=0,H=ue(Bo(T/p));I<T;)H[j++]=Kn(u,I,I+=p);return H}function Uf(u){for(var p=-1,_=u==null?0:u.length,T=0,I=[];++p<_;){var j=u[p];j&&(I[T++]=j)}return I}function Xr(){var u=arguments.length;if(!u)return[];for(var p=ue(u-1),_=arguments[0],T=u;T--;)p[T-1]=arguments[T];return qs(ct(_)?nr(_):[_],en(p,1))}var wt=dt(function(u,p){return vn(u)?Fi(u,en(p,1,vn,!0)):[]}),Cn=dt(function(u,p){var _=sr(p);return vn(_)&&(_=t),vn(u)?Fi(u,en(p,1,vn,!0),Ke(_,2)):[]}),hn=dt(function(u,p){var _=sr(p);return vn(_)&&(_=t),vn(u)?Fi(u,en(p,1,vn,!0),t,_):[]});function jn(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:ht(p),Kn(u,p<0?0:p,T)):[]}function Rr(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:ht(p),p=T-p,Kn(u,0,p<0?0:p)):[]}function cl(u,p){return u&&u.length?vc(u,Ke(p,3),!0,!0):[]}function gn(u,p){return u&&u.length?vc(u,Ke(p,3),!0):[]}function Pc(u,p,_,T){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&ir(u,p,_)&&(_=0,T=I),rg(u,p,_,T)):[]}function oo(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var I=_==null?0:ht(_);return I<0&&(I=dn(T+I,0)),ju(u,Ke(p,3),I)}function Rc(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var I=T-1;return _!==t&&(I=ht(_),I=_<0?dn(T+I,0):Vn(I,T-1)),ju(u,Ke(p,3),I,!0)}function Rd(u){var p=u==null?0:u.length;return p?en(u,1):[]}function Mc(u){var p=u==null?0:u.length;return p?en(u,te):[]}function vr(u,p){var _=u==null?0:u.length;return _?(p=p===t?1:ht(p),en(u,p)):[]}function Vf(u){for(var p=-1,_=u==null?0:u.length,T={};++p<_;){var I=u[p];T[I[0]]=I[1]}return T}function Jo(u){return u&&u.length?u[0]:t}function Ss(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var I=_==null?0:ht(_);return I<0&&(I=dn(T+I,0)),Na(u,p,I)}function Md(u){var p=u==null?0:u.length;return p?Kn(u,0,-1):[]}var zf=dt(function(u){var p=Lt(u,nl);return p.length&&p[0]===u[0]?od(p):[]}),ao=dt(function(u){var p=sr(u),_=Lt(u,nl);return p===sr(_)?p=t:_.pop(),_.length&&_[0]===u[0]?od(_,Ke(p,2)):[]}),Id=dt(function(u){var p=sr(u),_=Lt(u,nl);return p=typeof p=="function"?p:t,p&&_.pop(),_.length&&_[0]===u[0]?od(_,t,p):[]});function lo(u,p){return u==null?"":Ku.call(u,p)}function sr(u){var p=u==null?0:u.length;return p?u[p-1]:t}function Ic(u,p,_){var T=u==null?0:u.length;if(!T)return-1;var I=T;return _!==t&&(I=ht(_),I=I<0?dn(T+I,0):Vn(I,T-1)),p===p?e0(u,p,I):ju(u,Im,I,!0)}function Hf(u,p){return u&&u.length?ud(u,ht(p)):t}var Dd=dt(Dc);function Dc(u,p){return u&&u.length&&p&&p.length?rn(u,p):u}function or(u,p,_){return u&&u.length&&p&&p.length?rn(u,p,Ke(_,2)):u}function co(u,p,_){return u&&u.length&&p&&p.length?rn(u,p,t,_):u}var vi=Hi(function(u,p){var _=u==null?0:u.length,T=rd(u,p);return mn(u,Lt(p,function(I){return qt(I,_)?+I:I}).sort(Af)),T});function yr(u,p){var _=[];if(!(u&&u.length))return _;var T=-1,I=[],j=u.length;for(p=Ke(p,3);++T<j;){var H=u[T];p(H,T,u)&&(_.push(H),I.push(T))}return mn(u,I),_}function Od(u){return u==null?u:Yu.call(u)}function Wf(u,p,_){var T=u==null?0:u.length;return T?(_&&typeof _!="number"&&ir(u,p,_)?(p=0,_=T):(p=p==null?0:ht(p),_=_===t?T:ht(_)),Kn(u,p,_)):[]}function qf(u,p){return el(u,p)}function u0(u,p,_){return hd(u,p,Ke(_,2))}function uo(u,p){var _=u==null?0:u.length;if(_){var T=el(u,p);if(T<_&&As(u[T],p))return T}return-1}function Ag(u,p){return el(u,p,!0)}function Gf(u,p,_){return hd(u,p,Ke(_,2),!0)}function Zo(u,p){var _=u==null?0:u.length;if(_){var T=el(u,p,!0)-1;if(As(u[T],p))return T}return-1}function Kf(u){return u&&u.length?wf(u):[]}function ea(u,p){return u&&u.length?wf(u,Ke(p,2)):[]}function Cg(u){var p=u==null?0:u.length;return p?Kn(u,1,p):[]}function Eg(u,p,_){return u&&u.length?(p=_||p===t?1:ht(p),Kn(u,0,p<0?0:p)):[]}function Yf(u,p,_){var T=u==null?0:u.length;return T?(p=_||p===t?1:ht(p),p=T-p,Kn(u,p<0?0:p,T)):[]}function Nd(u,p){return u&&u.length?vc(u,Ke(p,3),!1,!0):[]}function d0(u,p){return u&&u.length?vc(u,Ke(p,3)):[]}var h0=dt(function(u){return ws(en(u,1,vn,!0))}),kg=dt(function(u){var p=sr(u);return vn(p)&&(p=t),ws(en(u,1,vn,!0),Ke(p,2))}),Tg=dt(function(u){var p=sr(u);return p=typeof p=="function"?p:t,ws(en(u,1,vn,!0),t,p)});function ta(u){return u&&u.length?ws(u):[]}function f0(u,p){return u&&u.length?ws(u,Ke(p,2)):[]}function ul(u,p){return p=typeof p=="function"?p:t,u&&u.length?ws(u,t,p):[]}function Ld(u){if(!(u&&u.length))return[];var p=0;return u=Ws(u,function(_){if(vn(_))return p=dn(_.length,p),!0}),Jh(p,function(_){return Lt(u,Xh(_))})}function Qt(u,p){if(!(u&&u.length))return[];var _=Ld(u);return p==null?_:Lt(_,function(T){return er(p,t,T)})}var p0=dt(function(u,p){return vn(u)?Fi(u,p):[]}),Pg=dt(function(u){return pd(Ws(u,vn))}),m0=dt(function(u){var p=sr(u);return vn(p)&&(p=t),pd(Ws(u,vn),Ke(p,2))}),g0=dt(function(u){var p=sr(u);return p=typeof p=="function"?p:t,pd(Ws(u,vn),t,p)}),Rg=dt(Ld);function Mg(u,p){return yc(u||[],p||[],Ho)}function v0(u,p){return yc(u||[],p||[],Yo)}var Qr=dt(function(u){var p=u.length,_=p>1?u[p-1]:t;return _=typeof _=="function"?(u.pop(),_):t,Qt(u,_)});function jd(u){var p=N(u);return p.__chain__=!0,p}function y0(u,p){return p(u),u}function yi(u,p){return p(u)}var Fd=Hi(function(u){var p=u.length,_=p?u[0]:0,T=this.__wrapped__,I=function(j){return rd(j,u)};return p>1||this.__actions__.length||!(T instanceof lt)||!qt(_)?this.thru(I):(T=T.slice(_,+_+(p?1:0)),T.__actions__.push({func:yi,args:[I],thisArg:t}),new zn(T,this.__chain__).thru(function(j){return p&&!j.length&&j.push(t),j}))});function na(){return jd(this)}function Bd(){return new zn(this.value(),this.__chain__)}function Xf(){this.__values__===t&&(this.__values__=Sx(this.value()));var u=this.__index__>=this.__values__.length,p=u?t:this.__values__[this.__index__++];return{done:u,value:p}}function Qf(){return this}function w0(u){for(var p,_=this;_ instanceof Oi;){var T=Sg(_);T.__index__=0,T.__values__=t,p?I.__wrapped__=T:p=T;var I=T;_=_.__wrapped__}return I.__wrapped__=u,p}function Jf(){var u=this.__wrapped__;if(u instanceof lt){var p=u;return this.__actions__.length&&(p=new lt(this)),p=p.reverse(),p.__actions__.push({func:yi,args:[Od],thisArg:t}),new zn(p,this.__chain__)}return this.thru(Od)}function _0(){return tl(this.__wrapped__,this.__actions__)}var Ig=vd(function(u,p,_){At.call(u,_)?++u[_]:ji(u,_,1)});function Dg(u,p,_){var T=ct(u)?Wh:dc;return _&&ir(u,p,_)&&(p=t),T(u,Ke(p,3))}function $d(u,p){var _=ct(u)?Ws:uf;return _(u,Ke(p,3))}var Ud=Qo(oo),Og=Qo(Rc);function Zf(u,p){return en(ra(u,p),1)}function b0(u,p){return en(ra(u,p),te)}function Ng(u,p,_){return _=_===t?1:ht(_),en(ra(u,p),_)}function Vd(u,p){var _=ct(u)?Un:Bi;return _(u,Ke(p,3))}function Oc(u,p){var _=ct(u)?Nu:ng;return _(u,Ke(p,3))}var ep=vd(function(u,p,_){At.call(u,_)?u[_].push(p):ji(u,_,[p])});function zd(u,p,_,T){u=Jr(u)?u:qd(u),_=_&&!T?ht(_):0;var I=u.length;return _<0&&(_=dn(I+_,0)),Fg(u)?_<=I&&u.indexOf(p,_)>-1:!!I&&Na(u,p,_)>-1}var Lg=dt(function(u,p,_){var T=-1,I=typeof p=="function",j=Jr(u)?ue(u.length):[];return Bi(u,function(H){j[++T]=I?er(p,H,_):qr(H,p,_)}),j}),x0=vd(function(u,p,_){ji(u,_,p)});function ra(u,p){var _=ct(u)?Lt:pf;return _(u,Ke(p,3))}function S0(u,p,_,T){return u==null?[]:(ct(p)||(p=p==null?[]:[p]),_=T?t:_,ct(_)||(_=_==null?[]:[_]),mc(u,p,_))}var Nc=vd(function(u,p,_){u[_?0:1].push(p)},function(){return[[],[]]});function A0(u,p,_){var T=ct(u)?Gh:Om,I=arguments.length<3;return T(u,Ke(p,4),_,I,Bi)}function Hd(u,p,_){var T=ct(u)?qy:Om,I=arguments.length<3;return T(u,Ke(p,4),_,I,ng)}function o(u,p){var _=ct(u)?Ws:uf;return _(u,ke(Ke(p,3)))}function c(u){var p=ct(u)?Li:Gn;return p(u)}function m(u,p,_){(_?ir(u,p,_):p===t)?p=1:p=ht(p);var T=ct(u)?zo:vf;return T(u,p)}function w(u){var p=ct(u)?eg:Kr;return p(u)}function A(u){if(u==null)return 0;if(Jr(u))return Fg(u)?jo(u):u.length;var p=Nn(u);return p==Yt||p==Sn?u.size:ys(u).length}function k(u,p,_){var T=ct(u)?Kh:yf;return _&&ir(u,p,_)&&(p=t),T(u,Ke(p,3))}var D=dt(function(u,p){if(u==null)return[];var _=p.length;return _>1&&ir(u,p[0],p[1])?p=[]:_>2&&ir(p[0],p[1],p[2])&&(p=[p[0]]),mc(u,en(p,1),[])}),U=Ft||function(){return Ht.Date.now()};function G(u,p){if(typeof p!="function")throw new Ur(a);return u=ht(u),function(){if(--u<1)return p.apply(this,arguments)}}function de(u,p,_){return p=_?t:p,p=u&&p==null?u.length:p,zi(u,$,t,t,t,t,p)}function Ae(u,p){var _;if(typeof p!="function")throw new Ur(a);return u=ht(u),function(){return--u>0&&(_=p.apply(this,arguments)),u<=1&&(p=t),_}}var Ee=dt(function(u,p,_){var T=E;if(_.length){var I=$r(_,bs(Ee));T|=L}return zi(u,T,p,_,I)}),xe=dt(function(u,p,_){var T=E|P;if(_.length){var I=$r(_,bs(xe));T|=L}return zi(p,T,u,_,I)});function Ie(u,p,_){p=_?t:p;var T=zi(u,R,t,t,t,t,t,p);return T.placeholder=Ie.placeholder,T}function Le(u,p,_){p=_?t:p;var T=zi(u,O,t,t,t,t,t,p);return T.placeholder=Le.placeholder,T}function je(u,p,_){var T,I,j,H,K,ee,we=0,_e=!1,Ce=!1,Re=!0;if(typeof u!="function")throw new Ur(a);p=qi(p)||0,on(_)&&(_e=!!_.leading,Ce="maxWait"in _,j=Ce?dn(qi(_.maxWait)||0,p):j,Re="trailing"in _?!!_.trailing:Re);function Ue(yn){var Cs=T,oa=I;return T=I=t,we=yn,H=u.apply(oa,Cs),H}function Qe(yn){return we=yn,K=ll(vt,p),_e?Ue(yn):H}function pt(yn){var Cs=yn-ee,oa=yn-we,Lx=p-Cs;return Ce?Vn(Lx,j-oa):Lx}function Je(yn){var Cs=yn-ee,oa=yn-we;return ee===t||Cs>=p||Cs<0||Ce&&oa>=j}function vt(){var yn=U();if(Je(yn))return _t(yn);K=ll(vt,pt(yn))}function _t(yn){return K=t,Re&&T?Ue(yn):(T=I=t,H)}function _i(){K!==t&&xf(K),we=0,T=ee=I=K=t}function Mr(){return K===t?H:_t(U())}function bi(){var yn=U(),Cs=Je(yn);if(T=arguments,I=this,ee=yn,Cs){if(K===t)return Qe(ee);if(Ce)return xf(K),K=ll(vt,p),Ue(ee)}return K===t&&(K=ll(vt,p)),H}return bi.cancel=_i,bi.flush=Mr,bi}var sn=dt(function(u,p){return cf(u,1,p)}),re=dt(function(u,p,_){return cf(u,qi(p)||0,_)});function X(u){return zi(u,Y)}function oe(u,p){if(typeof u!="function"||p!=null&&typeof p!="function")throw new Ur(a);var _=function(){var T=arguments,I=p?p.apply(this,T):T[0],j=_.cache;if(j.has(I))return j.get(I);var H=u.apply(this,T);return _.cache=j.set(I,H)||j,H};return _.cache=new(oe.Cache||Vr),_}oe.Cache=Vr;function ke(u){if(typeof u!="function")throw new Ur(a);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}function $e(u){return Ae(2,u)}var Ge=og(function(u,p){p=p.length==1&&ct(p[0])?Lt(p[0],Ar(Ke())):Lt(en(p,1),Ar(Ke()));var _=p.length;return dt(function(T){for(var I=-1,j=Vn(T.length,_);++I<j;)T[I]=p[I].call(this,T[I]);return er(u,this,T)})}),We=dt(function(u,p){var _=$r(p,bs(We));return zi(u,L,t,p,_)}),Xe=dt(function(u,p){var _=$r(p,bs(Xe));return zi(u,B,t,p,_)}),En=Hi(function(u,p){return zi(u,W,t,t,t,p)});function Ct(u,p){if(typeof u!="function")throw new Ur(a);return p=p===t?p:ht(p),dt(u,p)}function ho(u,p){if(typeof u!="function")throw new Ur(a);return p=p==null?0:dn(ht(p),0),dt(function(_){var T=_[p],I=_s(_,0,p);return T&&qs(I,T),er(u,this,I)})}function C0(u,p,_){var T=!0,I=!0;if(typeof u!="function")throw new Ur(a);return on(_)&&(T="leading"in _?!!_.leading:T,I="trailing"in _?!!_.trailing:I),je(u,p,{leading:T,maxWait:p,trailing:I})}function MM(u){return de(u,1)}function IM(u,p){return We(md(p),u)}function DM(){if(!arguments.length)return[];var u=arguments[0];return ct(u)?u:[u]}function OM(u){return mr(u,b)}function NM(u,p){return p=typeof p=="function"?p:t,mr(u,b,p)}function LM(u){return mr(u,g|b)}function jM(u,p){return p=typeof p=="function"?p:t,mr(u,g|b,p)}function FM(u,p){return p==null||uc(u,p,Yn(p))}function As(u,p){return u===p||u!==u&&p!==p}var BM=xd(to),$M=xd(function(u,p){return u>=p}),Lc=ad(function(){return arguments}())?ad:function(u){return fn(u)&&At.call(u,"callee")&&!Wu.call(u,"callee")},ct=ue.isArray,UM=zh?Ar(zh):ig;function Jr(u){return u!=null&&jg(u.length)&&!ia(u)}function vn(u){return fn(u)&&Jr(u)}function VM(u){return u===!0||u===!1||fn(u)&&Dn(u)==Oe}var dl=sf||L0,zM=dr?Ar(dr):vs;function HM(u){return fn(u)&&u.nodeType===1&&!tp(u)}function WM(u){if(u==null)return!0;if(Jr(u)&&(ct(u)||typeof u=="string"||typeof u.splice=="function"||dl(u)||Wd(u)||Lc(u)))return!u.length;var p=Nn(u);if(p==Yt||p==Sn)return!u.size;if(xs(u))return!ys(u).length;for(var _ in u)if(At.call(u,_))return!1;return!0}function qM(u,p){return Gr(u,p)}function GM(u,p,_){_=typeof _=="function"?_:t;var T=_?_(u,p):t;return T===t?Gr(u,p,t,_):!!T}function E0(u){if(!fn(u))return!1;var p=Dn(u);return p==st||p==Ye||typeof u.message=="string"&&typeof u.name=="string"&&!tp(u)}function KM(u){return typeof u=="number"&&Ua(u)}function ia(u){if(!on(u))return!1;var p=Dn(u);return p==Rt||p==cn||p==ve||p==Co}function wx(u){return typeof u=="number"&&u==ht(u)}function jg(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=V}function on(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function fn(u){return u!=null&&typeof u=="object"}var _x=Lo?Ar(Lo):sg;function YM(u,p){return u===p||Qa(u,p,Cc(p))}function XM(u,p,_){return _=typeof _=="function"?_:t,Qa(u,p,Cc(p),_)}function QM(u){return bx(u)&&u!=+u}function JM(u){if(c0(u))throw new et(s);return hf(u)}function ZM(u){return u===null}function eI(u){return u==null}function bx(u){return typeof u=="number"||fn(u)&&Dn(u)==Fr}function tp(u){if(!fn(u)||Dn(u)!=Mn)return!1;var p=ui(u);if(p===null)return!0;var _=At.call(p,"constructor")&&p.constructor;return typeof _=="function"&&_ instanceof _&&ec.call(_)==zu}var k0=Ou?Ar(Ou):fc;function tI(u){return wx(u)&&u>=-V&&u<=V}var xx=Oa?Ar(Oa):$i;function Fg(u){return typeof u=="string"||!ct(u)&&fn(u)&&Dn(u)==rs}function wi(u){return typeof u=="symbol"||fn(u)&&Dn(u)==Eo}var Wd=Pm?Ar(Pm):pc;function nI(u){return u===t}function rI(u){return fn(u)&&Nn(u)==$s}function iI(u){return fn(u)&&Dn(u)==gu}var sI=xd(no),oI=xd(function(u,p){return u<=p});function Sx(u){if(!u)return[];if(Jr(u))return Fg(u)?Cr(u):nr(u);if(hs&&u[hs])return Jy(u[hs]());var p=Nn(u),_=p==Yt?Bu:p==Sn?Gs:qd;return _(u)}function sa(u){if(!u)return u===0?u:0;if(u=qi(u),u===te||u===-te){var p=u<0?-1:1;return p*ne}return u===u?u:0}function ht(u){var p=sa(u),_=p%1;return p===p?_?p-_:p:0}function Ax(u){return u?ps(ht(u),0,F):0}function qi(u){if(typeof u=="number")return u;if(wi(u))return J;if(on(u)){var p=typeof u.valueOf=="function"?u.valueOf():u;u=on(p)?p+"":p}if(typeof u!="string")return u===0?u:+u;u=Nm(u);var _=In.test(u);return _||Io.test(u)?Iu(u.slice(2),_?2:8):Et.test(u)?J:+u}function Cx(u){return hi(u,Zr(u))}function aI(u){return u?ps(ht(u),-V,V):u===0?u:0}function Ot(u){return u==null?"":gr(u)}var lI=rl(function(u,p){if(xs(p)||Jr(p)){hi(p,Yn(p),u);return}for(var _ in p)At.call(p,_)&&Ho(u,_,p[_])}),Ex=rl(function(u,p){hi(p,Zr(p),u)}),Bg=rl(function(u,p,_,T){hi(p,Zr(p),u,T)}),cI=rl(function(u,p,_,T){hi(p,Yn(p),u,T)}),uI=Hi(rd);function dI(u,p){var _=qa(u);return p==null?_:$t(_,p)}var hI=dt(function(u,p){u=Dt(u);var _=-1,T=p.length,I=T>2?p[2]:t;for(I&&ir(p[0],p[1],I)&&(T=1);++_<T;)for(var j=p[_],H=Zr(j),K=-1,ee=H.length;++K<ee;){var we=H[K],_e=u[we];(_e===t||As(_e,Ii[we])&&!At.call(u,we))&&(u[we]=j[we])}return u}),fI=dt(function(u){return u.push(t,Mf),er(kx,t,u)});function pI(u,p){return Mm(u,Ke(p,3),Tr)}function mI(u,p){return Mm(u,Ke(p,3),eo)}function gI(u,p){return u==null?u:id(u,Ke(p,3),Zr)}function vI(u,p){return u==null?u:hc(u,Ke(p,3),Zr)}function yI(u,p){return u&&Tr(u,Ke(p,3))}function wI(u,p){return u&&eo(u,Ke(p,3))}function _I(u){return u==null?[]:Xa(u,Yn(u))}function bI(u){return u==null?[]:Xa(u,Zr(u))}function T0(u,p,_){var T=u==null?t:ms(u,p);return T===t?_:T}function xI(u,p){return u!=null&&Lf(u,p,Wr)}function P0(u,p){return u!=null&&Lf(u,p,qo)}var SI=hg(function(u,p,_){p!=null&&typeof p.toString!="function"&&(p=tc.call(p)),u[p]=_},M0(ei)),AI=hg(function(u,p,_){p!=null&&typeof p.toString!="function"&&(p=tc.call(p)),At.call(u,p)?u[p].push(_):u[p]=[_]},Ke),CI=dt(qr);function Yn(u){return Jr(u)?Ni(u):ys(u)}function Zr(u){return Jr(u)?Ni(u,!0):ff(u)}function EI(u,p){var _={};return p=Ke(p,3),Tr(u,function(T,I,j){ji(_,p(T,I,j),T)}),_}function kI(u,p){var _={};return p=Ke(p,3),Tr(u,function(T,I,j){ji(_,I,p(T,I,j))}),_}var TI=rl(function(u,p,_){Go(u,p,_)}),kx=rl(function(u,p,_,T){Go(u,p,_,T)}),PI=Hi(function(u,p){var _={};if(u==null)return _;var T=!1;p=Lt(p,function(j){return j=Vi(j,u),T||(T=j.length>1),j}),hi(u,Sc(u),_),T&&(_=mr(_,g|v|b,If));for(var I=p.length;I--;)fd(_,p[I]);return _});function RI(u,p){return Tx(u,ke(Ke(p)))}var MI=Hi(function(u,p){return u==null?{}:gf(u,p)});function Tx(u,p){if(u==null)return{};var _=Lt(Sc(u),function(T){return[T]});return p=Ke(p),ro(u,_,function(T,I){return p(T,I[0])})}function II(u,p,_){p=Vi(p,u);var T=-1,I=p.length;for(I||(I=1,u=t);++T<I;){var j=u==null?t:u[gi(p[T])];j===t&&(T=I,j=_),u=ia(j)?j.call(u):j}return u}function DI(u,p,_){return u==null?u:Yo(u,p,_)}function OI(u,p,_,T){return T=typeof T=="function"?T:t,u==null?u:Yo(u,p,_,T)}var Px=Pf(Yn),Rx=Pf(Zr);function NI(u,p,_){var T=ct(u),I=T||dl(u)||Wd(u);if(p=Ke(p,4),_==null){var j=u&&u.constructor;I?_=T?new j:[]:on(u)?_=ia(j)?qa(ui(u)):{}:_={}}return(I?Un:Tr)(u,function(H,K,ee){return p(_,H,K,ee)}),_}function LI(u,p){return u==null?!0:fd(u,p)}function jI(u,p,_){return u==null?u:bf(u,p,md(_))}function FI(u,p,_,T){return T=typeof T=="function"?T:t,u==null?u:bf(u,p,md(_),T)}function qd(u){return u==null?[]:Jl(u,Yn(u))}function BI(u){return u==null?[]:Jl(u,Zr(u))}function $I(u,p,_){return _===t&&(_=p,p=t),_!==t&&(_=qi(_),_=_===_?_:0),p!==t&&(p=qi(p),p=p===p?p:0),ps(qi(u),p,_)}function UI(u,p,_){return p=sa(p),_===t?(_=p,p=0):_=sa(_),u=qi(u),df(u,p,_)}function VI(u,p,_){if(_&&typeof _!="boolean"&&ir(u,p,_)&&(p=_=t),_===t&&(typeof p=="boolean"?(_=p,p=t):typeof u=="boolean"&&(_=u,u=t)),u===t&&p===t?(u=0,p=1):(u=sa(u),p===t?(p=u,u=0):p=sa(p)),u>p){var T=u;u=p,p=T}if(_||u%1||p%1){var I=sc();return Vn(u+I*(p-u+Uh("1e-"+((I+"").length-1))),p)}return Za(u,p)}var zI=Xo(function(u,p,_){return p=p.toLowerCase(),u+(_?Mx(p):p)});function Mx(u){return R0(Ot(u).toLowerCase())}function Ix(u){return u=Ot(u),u&&u.replace(gm,Fm).replace(Cm,"")}function HI(u,p,_){u=Ot(u),p=gr(p);var T=u.length;_=_===t?T:ps(ht(_),0,T);var I=_;return _-=p.length,_>=0&&u.slice(_,I)==p}function WI(u){return u=Ot(u),u&&yu.test(u)?u.replace(ls,Bm):u}function qI(u){return u=Ot(u),u&&Mo.test(u)?u.replace(Ro,"\\$&"):u}var GI=Xo(function(u,p,_){return u+(_?"-":"")+p.toLowerCase()}),KI=Xo(function(u,p,_){return u+(_?" ":"")+p.toLowerCase()}),YI=Ef("toLowerCase");function XI(u,p,_){u=Ot(u),p=ht(p);var T=p?jo(u):0;if(!p||T>=p)return u;var I=(p-T)/2;return bc(Ks(I),_)+u+bc(Bo(I),_)}function QI(u,p,_){u=Ot(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?u+bc(p-T,_):u}function JI(u,p,_){u=Ot(u),p=ht(p);var T=p?jo(u):0;return p&&T<p?bc(p-T,_)+u:u}function ZI(u,p,_){return _||p==null?p=0:p&&(p=+p),Km(Ot(u).replace(xu,""),p||0)}function eD(u,p,_){return(_?ir(u,p,_):p===t)?p=1:p=ht(p),Ko(Ot(u),p)}function tD(){var u=arguments,p=Ot(u[0]);return u.length<3?p:p.replace(u[1],u[2])}var nD=Xo(function(u,p,_){return u+(_?"_":"")+p.toLowerCase()});function rD(u,p,_){return _&&typeof _!="number"&&ir(u,p,_)&&(p=_=t),_=_===t?F:_>>>0,_?(u=Ot(u),u&&(typeof p=="string"||p!=null&&!k0(p))&&(p=gr(p),!p&&ja(u))?_s(Cr(u),0,_):u.split(p,_)):[]}var iD=Xo(function(u,p,_){return u+(_?" ":"")+R0(p)});function sD(u,p,_){return u=Ot(u),_=_==null?0:ps(ht(_),0,u.length),p=gr(p),u.slice(_,_+p.length)==p}function oD(u,p,_){var T=N.templateSettings;_&&ir(u,p,_)&&(p=t),u=Ot(u),p=Bg({},p,T,Rf);var I=Bg({},p.imports,T.imports,Rf),j=Yn(I),H=Jl(I,j),K,ee,we=0,_e=p.interpolate||Au,Ce="__p += '",Re=Zl((p.escape||Au).source+"|"+_e.source+"|"+(_e===Vl?ye:Au).source+"|"+(p.evaluate||Au).source+"|$","g"),Ue="//# sourceURL="+(At.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zy+"]")+`
`;u.replace(Re,function(Je,vt,_t,_i,Mr,bi){return _t||(_t=_i),Ce+=u.slice(we,bi).replace(jy,$m),vt&&(K=!0,Ce+=`' +
__e(`+vt+`) +
'`),Mr&&(ee=!0,Ce+=`';
`+Mr+`;
__p += '`),_t&&(Ce+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),we=bi+Je.length,Je}),Ce+=`';
`;var Qe=At.call(p,"variable")&&p.variable;if(!Qe)Ce=`with (obj) {
`+Ce+`
}
`;else if(fe.test(Qe))throw new et(l);Ce=(ee?Ce.replace(Bl,""):Ce).replace($l,"$1").replace(Ul,"$1;"),Ce="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ce+`return __p
}`;var pt=Ox(function(){return St(j,Ue+"return "+Ce).apply(t,H)});if(pt.source=Ce,E0(pt))throw pt;return pt}function aD(u){return Ot(u).toLowerCase()}function lD(u){return Ot(u).toUpperCase()}function cD(u,p,_){if(u=Ot(u),u&&(_||p===t))return Nm(u);if(!u||!(p=gr(p)))return u;var T=Cr(u),I=Cr(p),j=Lm(T,I),H=Zh(T,I)+1;return _s(T,j,H).join("")}function uD(u,p,_){if(u=Ot(u),u&&(_||p===t))return u.slice(0,Uu(u)+1);if(!u||!(p=gr(p)))return u;var T=Cr(u),I=Zh(T,Cr(p))+1;return _s(T,0,I).join("")}function dD(u,p,_){if(u=Ot(u),u&&(_||p===t))return u.replace(xu,"");if(!u||!(p=gr(p)))return u;var T=Cr(u),I=Lm(T,Cr(p));return _s(T,I).join("")}function hD(u,p){var _=ae,T=se;if(on(p)){var I="separator"in p?p.separator:I;_="length"in p?ht(p.length):_,T="omission"in p?gr(p.omission):T}u=Ot(u);var j=u.length;if(ja(u)){var H=Cr(u);j=H.length}if(_>=j)return u;var K=_-jo(T);if(K<1)return T;var ee=H?_s(H,0,K).join(""):u.slice(0,K);if(I===t)return ee+T;if(H&&(K+=ee.length-K),k0(I)){if(u.slice(K).search(I)){var we,_e=ee;for(I.global||(I=Zl(I.source,Ot(Be.exec(I))+"g")),I.lastIndex=0;we=I.exec(_e);)var Ce=we.index;ee=ee.slice(0,Ce===t?K:Ce)}}else if(u.indexOf(gr(I),K)!=K){var Re=ee.lastIndexOf(I);Re>-1&&(ee=ee.slice(0,Re))}return ee+T}function fD(u){return u=Ot(u),u&&vu.test(u)?u.replace(as,Um):u}var pD=Xo(function(u,p,_){return u+(_?" ":"")+p.toUpperCase()}),R0=Ef("toUpperCase");function Dx(u,p,_){return u=Ot(u),p=_?t:p,p===t?Qy(u)?t0(u):Ky(u):u.match(p)||[]}var Ox=dt(function(u,p){try{return er(u,t,p)}catch(_){return E0(_)?_:new et(_)}}),mD=Hi(function(u,p){return Un(p,function(_){_=gi(_),ji(u,_,Ee(u[_],u))}),u});function gD(u){var p=u==null?0:u.length,_=Ke();return u=p?Lt(u,function(T){if(typeof T[1]!="function")throw new Ur(a);return[_(T[0]),T[1]]}):[],dt(function(T){for(var I=-1;++I<p;){var j=u[I];if(er(j[0],this,T))return er(j[1],this,T)}})}function vD(u){return tg(mr(u,g))}function M0(u){return function(){return u}}function yD(u,p){return u==null||u!==u?p:u}var wD=_d(),_D=_d(!0);function ei(u){return u}function I0(u){return Ja(typeof u=="function"?u:mr(u,g))}function bD(u){return cd(mr(u,g))}function xD(u,p){return Wt(u,mr(p,g))}var SD=dt(function(u,p){return function(_){return qr(_,u,p)}}),AD=dt(function(u,p){return function(_){return qr(u,_,p)}});function D0(u,p,_){var T=Yn(p),I=Xa(p,T);_==null&&!(on(p)&&(I.length||!T.length))&&(_=p,p=u,u=this,I=Xa(p,Yn(p)));var j=!(on(_)&&"chain"in _)||!!_.chain,H=ia(u);return Un(I,function(K){var ee=p[K];u[K]=ee,H&&(u.prototype[K]=function(){var we=this.__chain__;if(j||we){var _e=u(this.__wrapped__),Ce=_e.__actions__=nr(this.__actions__);return Ce.push({func:ee,args:arguments,thisArg:u}),_e.__chain__=we,_e}return ee.apply(u,qs([this.value()],arguments))})}),u}function CD(){return Ht._===this&&(Ht._=Hm),this}function O0(){}function ED(u){return u=ht(u),dt(function(p){return ud(p,u)})}var kD=bd(Lt),TD=bd(Wh),PD=bd(Kh);function Nx(u){return Ne(u)?Xh(gi(u)):Xt(u)}function RD(u){return function(p){return u==null?t:ms(u,p)}}var MD=Tf(),ID=Tf(!0);function N0(){return[]}function L0(){return!1}function DD(){return{}}function OD(){return""}function ND(){return!0}function LD(u,p){if(u=ht(u),u<1||u>V)return[];var _=F,T=Vn(u,F);p=Ke(p),u-=F;for(var I=Jh(T,p);++_<u;)p(_);return I}function jD(u){return ct(u)?Lt(u,gi):wi(u)?[u]:nr($f(Ot(u)))}function FD(u){var p=++$a;return Ot(u)+p}var BD=_c(function(u,p){return u+p},0),$D=On("ceil"),UD=_c(function(u,p){return u/p},1),VD=On("floor");function zD(u){return u&&u.length?Wo(u,ei,to):t}function HD(u,p){return u&&u.length?Wo(u,Ke(p,2),to):t}function WD(u){return Dm(u,ei)}function qD(u,p){return Dm(u,Ke(p,2))}function GD(u){return u&&u.length?Wo(u,ei,no):t}function KD(u,p){return u&&u.length?Wo(u,Ke(p,2),no):t}var YD=_c(function(u,p){return u*p},1),XD=On("round"),QD=_c(function(u,p){return u-p},0);function JD(u){return u&&u.length?Qh(u,ei):0}function ZD(u,p){return u&&u.length?Qh(u,Ke(p,2)):0}return N.after=G,N.ary=de,N.assign=lI,N.assignIn=Ex,N.assignInWith=Bg,N.assignWith=cI,N.at=uI,N.before=Ae,N.bind=Ee,N.bindAll=mD,N.bindKey=xe,N.castArray=DM,N.chain=jd,N.chunk=Pd,N.compact=Uf,N.concat=Xr,N.cond=gD,N.conforms=vD,N.constant=M0,N.countBy=Ig,N.create=dI,N.curry=Ie,N.curryRight=Le,N.debounce=je,N.defaults=hI,N.defaultsDeep=fI,N.defer=sn,N.delay=re,N.difference=wt,N.differenceBy=Cn,N.differenceWith=hn,N.drop=jn,N.dropRight=Rr,N.dropRightWhile=cl,N.dropWhile=gn,N.fill=Pc,N.filter=$d,N.flatMap=Zf,N.flatMapDeep=b0,N.flatMapDepth=Ng,N.flatten=Rd,N.flattenDeep=Mc,N.flattenDepth=vr,N.flip=X,N.flow=wD,N.flowRight=_D,N.fromPairs=Vf,N.functions=_I,N.functionsIn=bI,N.groupBy=ep,N.initial=Md,N.intersection=zf,N.intersectionBy=ao,N.intersectionWith=Id,N.invert=SI,N.invertBy=AI,N.invokeMap=Lg,N.iteratee=I0,N.keyBy=x0,N.keys=Yn,N.keysIn=Zr,N.map=ra,N.mapKeys=EI,N.mapValues=kI,N.matches=bD,N.matchesProperty=xD,N.memoize=oe,N.merge=TI,N.mergeWith=kx,N.method=SD,N.methodOf=AD,N.mixin=D0,N.negate=ke,N.nthArg=ED,N.omit=PI,N.omitBy=RI,N.once=$e,N.orderBy=S0,N.over=kD,N.overArgs=Ge,N.overEvery=TD,N.overSome=PD,N.partial=We,N.partialRight=Xe,N.partition=Nc,N.pick=MI,N.pickBy=Tx,N.property=Nx,N.propertyOf=RD,N.pull=Dd,N.pullAll=Dc,N.pullAllBy=or,N.pullAllWith=co,N.pullAt=vi,N.range=MD,N.rangeRight=ID,N.rearg=En,N.reject=o,N.remove=yr,N.rest=Ct,N.reverse=Od,N.sampleSize=m,N.set=DI,N.setWith=OI,N.shuffle=w,N.slice=Wf,N.sortBy=D,N.sortedUniq=Kf,N.sortedUniqBy=ea,N.split=rD,N.spread=ho,N.tail=Cg,N.take=Eg,N.takeRight=Yf,N.takeRightWhile=Nd,N.takeWhile=d0,N.tap=y0,N.throttle=C0,N.thru=yi,N.toArray=Sx,N.toPairs=Px,N.toPairsIn=Rx,N.toPath=jD,N.toPlainObject=Cx,N.transform=NI,N.unary=MM,N.union=h0,N.unionBy=kg,N.unionWith=Tg,N.uniq=ta,N.uniqBy=f0,N.uniqWith=ul,N.unset=LI,N.unzip=Ld,N.unzipWith=Qt,N.update=jI,N.updateWith=FI,N.values=qd,N.valuesIn=BI,N.without=p0,N.words=Dx,N.wrap=IM,N.xor=Pg,N.xorBy=m0,N.xorWith=g0,N.zip=Rg,N.zipObject=Mg,N.zipObjectDeep=v0,N.zipWith=Qr,N.entries=Px,N.entriesIn=Rx,N.extend=Ex,N.extendWith=Bg,D0(N,N),N.add=BD,N.attempt=Ox,N.camelCase=zI,N.capitalize=Mx,N.ceil=$D,N.clamp=$I,N.clone=OM,N.cloneDeep=LM,N.cloneDeepWith=jM,N.cloneWith=NM,N.conformsTo=FM,N.deburr=Ix,N.defaultTo=yD,N.divide=UD,N.endsWith=HI,N.eq=As,N.escape=WI,N.escapeRegExp=qI,N.every=Dg,N.find=Ud,N.findIndex=oo,N.findKey=pI,N.findLast=Og,N.findLastIndex=Rc,N.findLastKey=mI,N.floor=VD,N.forEach=Vd,N.forEachRight=Oc,N.forIn=gI,N.forInRight=vI,N.forOwn=yI,N.forOwnRight=wI,N.get=T0,N.gt=BM,N.gte=$M,N.has=xI,N.hasIn=P0,N.head=Jo,N.identity=ei,N.includes=zd,N.indexOf=Ss,N.inRange=UI,N.invoke=CI,N.isArguments=Lc,N.isArray=ct,N.isArrayBuffer=UM,N.isArrayLike=Jr,N.isArrayLikeObject=vn,N.isBoolean=VM,N.isBuffer=dl,N.isDate=zM,N.isElement=HM,N.isEmpty=WM,N.isEqual=qM,N.isEqualWith=GM,N.isError=E0,N.isFinite=KM,N.isFunction=ia,N.isInteger=wx,N.isLength=jg,N.isMap=_x,N.isMatch=YM,N.isMatchWith=XM,N.isNaN=QM,N.isNative=JM,N.isNil=eI,N.isNull=ZM,N.isNumber=bx,N.isObject=on,N.isObjectLike=fn,N.isPlainObject=tp,N.isRegExp=k0,N.isSafeInteger=tI,N.isSet=xx,N.isString=Fg,N.isSymbol=wi,N.isTypedArray=Wd,N.isUndefined=nI,N.isWeakMap=rI,N.isWeakSet=iI,N.join=lo,N.kebabCase=GI,N.last=sr,N.lastIndexOf=Ic,N.lowerCase=KI,N.lowerFirst=YI,N.lt=sI,N.lte=oI,N.max=zD,N.maxBy=HD,N.mean=WD,N.meanBy=qD,N.min=GD,N.minBy=KD,N.stubArray=N0,N.stubFalse=L0,N.stubObject=DD,N.stubString=OD,N.stubTrue=ND,N.multiply=YD,N.nth=Hf,N.noConflict=CD,N.noop=O0,N.now=U,N.pad=XI,N.padEnd=QI,N.padStart=JI,N.parseInt=ZI,N.random=VI,N.reduce=A0,N.reduceRight=Hd,N.repeat=eD,N.replace=tD,N.result=II,N.round=XD,N.runInContext=Z,N.sample=c,N.size=A,N.snakeCase=nD,N.some=k,N.sortedIndex=qf,N.sortedIndexBy=u0,N.sortedIndexOf=uo,N.sortedLastIndex=Ag,N.sortedLastIndexBy=Gf,N.sortedLastIndexOf=Zo,N.startCase=iD,N.startsWith=sD,N.subtract=QD,N.sum=JD,N.sumBy=ZD,N.template=oD,N.times=LD,N.toFinite=sa,N.toInteger=ht,N.toLength=Ax,N.toLower=aD,N.toNumber=qi,N.toSafeInteger=aI,N.toString=Ot,N.toUpper=lD,N.trim=cD,N.trimEnd=uD,N.trimStart=dD,N.truncate=hD,N.unescape=fD,N.uniqueId=FD,N.upperCase=pD,N.upperFirst=R0,N.each=Vd,N.eachRight=Oc,N.first=Jo,D0(N,function(){var u={};return Tr(N,function(p,_){At.call(N.prototype,_)||(u[_]=p)}),u}(),{chain:!1}),N.VERSION=r,Un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){N[u].placeholder=N}),Un(["drop","take"],function(u,p){lt.prototype[u]=function(_){_=_===t?1:dn(ht(_),0);var T=this.__filtered__&&!p?new lt(this):this.clone();return T.__filtered__?T.__takeCount__=Vn(_,T.__takeCount__):T.__views__.push({size:Vn(_,F),type:u+(T.__dir__<0?"Right":"")}),T},lt.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Un(["filter","map","takeWhile"],function(u,p){var _=p+1,T=_==me||_==z;lt.prototype[u]=function(I){var j=this.clone();return j.__iteratees__.push({iteratee:Ke(I,3),type:_}),j.__filtered__=j.__filtered__||T,j}}),Un(["head","last"],function(u,p){var _="take"+(p?"Right":"");lt.prototype[u]=function(){return this[_](1).value()[0]}}),Un(["initial","tail"],function(u,p){var _="drop"+(p?"":"Right");lt.prototype[u]=function(){return this.__filtered__?new lt(this):this[_](1)}}),lt.prototype.compact=function(){return this.filter(ei)},lt.prototype.find=function(u){return this.filter(u).head()},lt.prototype.findLast=function(u){return this.reverse().find(u)},lt.prototype.invokeMap=dt(function(u,p){return typeof u=="function"?new lt(this):this.map(function(_){return qr(_,u,p)})}),lt.prototype.reject=function(u){return this.filter(ke(Ke(u)))},lt.prototype.slice=function(u,p){u=ht(u);var _=this;return _.__filtered__&&(u>0||p<0)?new lt(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),p!==t&&(p=ht(p),_=p<0?_.dropRight(-p):_.take(p-u)),_)},lt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},lt.prototype.toArray=function(){return this.take(F)},Tr(lt.prototype,function(u,p){var _=/^(?:filter|find|map|reject)|While$/.test(p),T=/^(?:head|last)$/.test(p),I=N[T?"take"+(p=="last"?"Right":""):p],j=T||/^find/.test(p);I&&(N.prototype[p]=function(){var H=this.__wrapped__,K=T?[1]:arguments,ee=H instanceof lt,we=K[0],_e=ee||ct(H),Ce=function(vt){var _t=I.apply(N,qs([vt],K));return T&&Re?_t[0]:_t};_e&&_&&typeof we=="function"&&we.length!=1&&(ee=_e=!1);var Re=this.__chain__,Ue=!!this.__actions__.length,Qe=j&&!Re,pt=ee&&!Ue;if(!j&&_e){H=pt?H:new lt(this);var Je=u.apply(H,K);return Je.__actions__.push({func:yi,args:[Ce],thisArg:t}),new zn(Je,Re)}return Qe&&pt?u.apply(this,K):(Je=this.thru(Ce),Qe?T?Je.value()[0]:Je.value():Je)})}),Un(["pop","push","shift","sort","splice","unshift"],function(u){var p=us[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",T=/^(?:pop|shift)$/.test(u);N.prototype[u]=function(){var I=arguments;if(T&&!this.__chain__){var j=this.value();return p.apply(ct(j)?j:[],I)}return this[_](function(H){return p.apply(ct(H)?H:[],I)})}}),Tr(lt.prototype,function(u,p){var _=N[p];if(_){var T=_.name+"";At.call(Ha,T)||(Ha[T]=[]),Ha[T].push({name:p,func:_})}}),Ha[sl(t,P).name]=[{name:"wrapper",func:t}],lt.prototype.clone=Ju,lt.prototype.reverse=af,lt.prototype.value=Ga,N.prototype.at=Fd,N.prototype.chain=na,N.prototype.commit=Bd,N.prototype.next=Xf,N.prototype.plant=w0,N.prototype.reverse=Jf,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=_0,N.prototype.first=N.prototype.head,hs&&(N.prototype[hs]=Qf),N},Fa=n0();Mi?((Mi.exports=Fa)._=Fa,Ql._=Fa):Ht._=Fa}).call(LV)}(xp,xp.exports)),xp.exports}var b9=jV();function ut(...n){return NV(gk(n))}function x9(n,e){const t={position:n.position,size:n.size,styles:n.styles,visible:n.visible!==!1};if(e==="desktop")return t;const r=n.layouts?.[e]||{};return{position:r.position||t.position,size:r.size||t.size,styles:{...t.styles,...r.styles||{}},visible:r.visible!==void 0?r.visible:t.visible}}function S9(n){return typeof n!="string"?(console.warn("sanitizeFilename expects a string argument"),`invalid_filename_${Date.now()}`):n.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9.-]/g,"")}function A9(n,e=!0){const t=Number(n);if(isNaN(t))return e?"R$ 0,00":"0,00";const r={style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2};return e?t.toLocaleString("pt-BR",r):t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}function HA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ly(...n){return e=>{let t=!1;const r=n.map(i=>{const s=HA(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HA(n[i],null)}}}}function xt(...n){return C.useCallback(ly(...n),n)}function Zc(n){const e=BV(n),t=C.forwardRef((r,i)=>{const{children:s,...a}=r,l=C.Children.toArray(s),d=l.find($V);if(d){const h=d.props.children,f=l.map(g=>g===d?C.Children.count(h)>1?C.Children.only(null):C.isValidElement(h)?h.props.children:null:g);return y.jsx(e,{...a,ref:i,children:C.isValidElement(h)?C.cloneElement(h,void 0,f):null})}return y.jsx(e,{...a,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var FV=Zc("Slot");function BV(n){const e=C.forwardRef((t,r)=>{const{children:i,...s}=t;if(C.isValidElement(i)){const a=VV(i),l=UV(s,i.props);return i.type!==C.Fragment&&(l.ref=r?ly(r,a):a),C.cloneElement(i,l)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var xk=Symbol("radix.slottable");function C9(n){const e=({children:t})=>y.jsx(y.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=xk,e}function $V(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===xk}function UV(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...l)=>{const d=s(...l);return i(...l),d}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function VV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const WA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,qA=gk,Sk=(n,e)=>t=>{var r;if(e?.variants==null)return qA(n,t?.class,t?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(h=>{const f=t?.[h],g=s?.[h];if(f===null)return null;const v=WA(f)||WA(g);return i[h][v]}),l=t&&Object.entries(t).reduce((h,f)=>{let[g,v]=f;return v===void 0||(h[g]=v),h},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:g,className:v,...b}=f;return Object.entries(b).every(S=>{let[x,E]=S;return Array.isArray(E)?E.includes({...s,...l}[x]):{...s,...l}[x]===E})?[...h,g,v]:h},[]);return qA(n,a,d,t?.class,t?.className)},zV=Sk("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-button-primary text-button-primary-foreground hover:bg-button-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-green-500 text-white hover:bg-green-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Vt=ot.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const a=r?FV:"button";return y.jsx(a,{className:ut(zV({variant:e,size:t,className:n})),ref:s,...i})});Vt.displayName="Button";const nh=({icon:n,text:e,active:t,onClick:r,collapsed:i,isBottomIcon:s=!1,hideActiveIndicator:a=!1,customStyle:l="",activeStyle:d=""})=>y.jsxs("li",{className:ut(`
      relative flex items-center py-2 px-3 font-medium rounded-md cursor-pointer
      transition-colors group text-sm`,t?d||"bg-primary text-primary-foreground":`text-muted-foreground/80 dark:text-foreground/80 hover:bg-accent hover:text-accent-foreground ${s&&i?"py-2 justify-center":""}`,l),onClick:r,children:[y.jsx(n,{className:`w-4 h-4 ${i?"mx-auto":"mr-3"}`}),!i&&y.jsx("span",{className:"transition-opacity duration-300",children:e}),!i&&t&&!a&&y.jsx(ur.div,{layoutId:"activeIndicator",className:"absolute -left-1 w-1 h-5 bg-button-primary-foreground rounded-r-md",initial:!1,animate:{opacity:1},transition:{type:"spring",stiffness:300,damping:30}}),i&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
        invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:e})]}),HV=({activeTab:n,setActiveTab:e,collapsed:t,setCollapsed:r})=>{const{user:i,logout:s,settings:a,isFeatureEnabled:l}=ki(),{theme:d}=aC(),h=Ph(),f=async()=>{try{await s(),h("/login")}catch(W){console.error("Erro no Logout:",W.message)}},g=[{id:"dashboard",text:"Dashboard",icon:XU,path:"/dashboard",feature:null},{id:"workflow",text:"Trabalhos",icon:s_,path:"/workflow",feature:null},{id:"clients",text:"Clientes",icon:pk,path:"/clients",feature:null},{id:"financial",text:"Financeiro",icon:qp,path:"/financial",feature:null},{id:"calendar",text:"Agenda",icon:ak,path:"/calendar",feature:"agenda_pro"},{id:"reports",text:"Relatórios",icon:sk,path:"/reports",feature:"relatorios"},{id:"service-packages",text:"Pacotes",icon:s_,path:"/service-packages",feature:"pacotes_servico"},{id:"my-setup",text:"Meu Setup",icon:uk,path:"/my-setup",feature:"meu_setup"},{id:"precifique",text:"Precifique",icon:Hp,path:"/precifique",feature:"precifique"},{id:"reserva-inteligente",text:"Reserva",icon:vb,path:"/reserva-inteligente",feature:"reserva_inteligente"}].filter(W=>!W.feature||l(W.feature)),v=a?.user_name||i?.user_metadata?.full_name||i?.email||"Usuário",b=a?.contact_email||i?.email||"Não informado",S=a?.profile_photo||i?.user_metadata?.avatar_url,x="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20escuro%20gofotografo.png",E="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png",P="https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//favicon%20gofotografo.png",M=a?.logo,R=M||(d==="dark"?x:E),O=M||P,L=()=>{e("account-settings"),h("/account-settings")},B=(W,Y)=>{e(W),h(Y),W==="quadros"&&!t?r(!0):W!=="quadros"&&t&&Y.startsWith("/quadros")};return y.jsxs(ur.nav,{initial:!1,animate:{width:t?"4rem":"16rem"},className:`
        h-screen bg-card border-r border-border 
        flex flex-col p-2 transition-width duration-300 ease-in-out fixed left-0 top-0 z-30 hidden md:flex
      `,children:[y.jsx("div",{className:"flex items-center justify-center h-16 pt-4 mb-4",children:y.jsx(pN,{to:"/dashboard",onClick:()=>B("dashboard","/dashboard"),children:y.jsx(go,{mode:"wait",initial:!1,children:y.jsx(ur.img,{src:t?O:R,alt:"Logotipo",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeInOut"},className:`transition-all duration-300 ${t?"h-8 w-auto":"h-9 w-auto"}`},t?"collapsed":"full")})})}),y.jsx("ul",{className:"flex-grow space-y-3 overflow-y-auto overflow-x-hidden scrollbar-thin",children:g.map(W=>y.jsx(nh,{icon:W.icon,text:W.text,active:n===W.id,onClick:()=>B(W.id,W.path),collapsed:t,customStyle:W.customStyle},W.id))}),!1,y.jsx("div",{className:"border-t border-border/50 my-2"}),l("propostas_avancadas")&&y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:GU,text:"GO.STUDIO",active:n==="studio",onClick:()=>B("studio","/studio"),collapsed:t})}),l("quadros")&&y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:fk,text:"Quadros",active:n==="quadros",onClick:()=>B("quadros","/quadros"),collapsed:t,hideActiveIndicator:!1})}),y.jsx("div",{className:"mb-2",children:y.jsx(nh,{icon:mb,text:"Indique e Ganhe",active:n==="referrals",onClick:()=>B("referrals","/referrals"),collapsed:t,customStyle:"border border-green-500/50 text-green-400 hover:bg-green-500/10 rounded-md",activeStyle:"bg-green-500/10 text-green-400",hideActiveIndicator:!0})}),y.jsxs("div",{className:"mt-auto border-t border-border pt-2",children:[y.jsxs("div",{className:`
            flex items-center p-2 rounded-lg cursor-pointer
            ${t?"justify-center":"justify-start"}
            hover:bg-accent transition-colors group
          `,onClick:L,title:"Minha Conta",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-foreground border-2 border-button-primary-foreground overflow-hidden flex-shrink-0",children:S?y.jsx("img",{src:S,alt:v,className:"w-full h-full object-cover"}):v?.charAt(0).toUpperCase()}),!t&&y.jsxs("div",{className:"ml-2 overflow-hidden",children:[y.jsx("p",{className:"text-xs font-semibold text-foreground truncate",children:v}),y.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:b})]}),t&&y.jsx("span",{className:`absolute left-full rounded-md px-2 py-1 ml-4 bg-gray-900 text-white text-sm
              invisible opacity-20 -translate-x-3 transition-all group-hover:visible group-hover:opacity-100 group-hover:translate-x-0 z-50 whitespace-nowrap`,children:v})]}),y.jsxs("div",{className:`flex ${t?"flex-col items-center space-y-1":"items-center justify-around"} mt-1`,children:[y.jsx(nh,{icon:hk,text:"Configurações",active:n==="settings",onClick:()=>B("settings","/settings"),collapsed:t,isBottomIcon:!0}),y.jsx(nh,{icon:dk,text:"Sair",active:!1,onClick:f,collapsed:t,isBottomIcon:!0})]})]})]})};function Fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function WV(n,e){const t=C.createContext(e),r=s=>{const{children:a,...l}=s,d=C.useMemo(()=>l,Object.values(l));return y.jsx(t.Provider,{value:d,children:a})};r.displayName=n+"Provider";function i(s){const a=C.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${n}\``)}return[r,i]}function xo(n,e=[]){let t=[];function r(s,a){const l=C.createContext(a),d=t.length;t=[...t,a];const h=g=>{const{scope:v,children:b,...S}=g,x=v?.[n]?.[d]||l,E=C.useMemo(()=>S,Object.values(S));return y.jsx(x.Provider,{value:E,children:b})};h.displayName=s+"Provider";function f(g,v){const b=v?.[n]?.[d]||l,S=C.useContext(b);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${g}\` must be used within \`${s}\``)}return[h,f]}const i=()=>{const s=t.map(a=>C.createContext(a));return function(l){const d=l?.[n]||s;return C.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return i.scopeName=n,[r,qV(i,...e)]}function qV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((l,{useScope:d,scopeName:h})=>{const g=d(s)[`__scope${h}`];return{...l,...g}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}var Rn=globalThis?.document?C.useLayoutEffect:()=>{},GV=I_[" useInsertionEffect ".trim().toString()]||Rn;function Sh({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,a]=KV({defaultProp:e,onChange:t}),l=n!==void 0,d=l?n:i;{const f=C.useRef(n!==void 0);C.useEffect(()=>{const g=f.current;g!==l&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=C.useCallback(f=>{if(l){const g=YV(f)?f(n):f;g!==n&&a.current?.(g)}else s(f)},[l,n,s,a]);return[d,h]}function KV({defaultProp:n,onChange:e}){const[t,r]=C.useState(n),i=C.useRef(t),s=C.useRef(e);return GV(()=>{s.current=e},[e]),C.useEffect(()=>{i.current!==t&&(s.current?.(t),i.current=t)},[t,i]),[t,r,s]}function YV(n){return typeof n=="function"}var XV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nt=XV.reduce((n,e)=>{const t=Zc(`Primitive.${e}`),r=C.forwardRef((i,s)=>{const{asChild:a,...l}=i,d=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(d,{...l,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function Ak(n,e){n&&nm.flushSync(()=>n.dispatchEvent(e))}function bb(n){const e=n+"CollectionProvider",[t,r]=xo(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:E,children:P}=x,M=ot.useRef(null),R=ot.useRef(new Map).current;return y.jsx(i,{scope:E,itemMap:R,collectionRef:M,children:P})};a.displayName=e;const l=n+"CollectionSlot",d=Zc(l),h=ot.forwardRef((x,E)=>{const{scope:P,children:M}=x,R=s(l,P),O=xt(E,R.collectionRef);return y.jsx(d,{ref:O,children:M})});h.displayName=l;const f=n+"CollectionItemSlot",g="data-radix-collection-item",v=Zc(f),b=ot.forwardRef((x,E)=>{const{scope:P,children:M,...R}=x,O=ot.useRef(null),L=xt(E,O),B=s(f,P);return ot.useEffect(()=>(B.itemMap.set(O,{ref:O,...R}),()=>void B.itemMap.delete(O))),y.jsx(v,{[g]:"",ref:L,children:M})});b.displayName=f;function S(x){const E=s(n+"CollectionConsumer",x);return ot.useCallback(()=>{const M=E.collectionRef.current;if(!M)return[];const R=Array.from(M.querySelectorAll(`[${g}]`));return Array.from(E.itemMap.values()).sort((B,$)=>R.indexOf(B.ref.current)-R.indexOf($.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:a,Slot:h,ItemSlot:b},S,r]}var QV=C.createContext(void 0);function cy(n){const e=C.useContext(QV);return n||e||"ltr"}function Jn(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>e.current?.(...t),[])}function JV(n,e=globalThis?.document){const t=Jn(n);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var ZV="DismissableLayer",l_="dismissableLayer.update",ez="dismissableLayer.pointerDownOutside",tz="dismissableLayer.focusOutside",GA,Ck=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uy=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...d}=n,h=C.useContext(Ck),[f,g]=C.useState(null),v=f?.ownerDocument??globalThis?.document,[,b]=C.useState({}),S=xt(e,$=>g($)),x=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),P=x.indexOf(E),M=f?x.indexOf(f):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,O=M>=P,L=iz($=>{const W=$.target,Y=[...h.branches].some(ae=>ae.contains(W));!O||Y||(i?.($),a?.($),$.defaultPrevented||l?.())},v),B=sz($=>{const W=$.target;[...h.branches].some(ae=>ae.contains(W))||(s?.($),a?.($),$.defaultPrevented||l?.())},v);return JV($=>{M===h.layers.size-1&&(r?.($),!$.defaultPrevented&&l&&($.preventDefault(),l()))},v),C.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(GA=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),KA(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=GA)}},[f,v,t,h]),C.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),KA())},[f,h]),C.useEffect(()=>{const $=()=>b({});return document.addEventListener(l_,$),()=>document.removeEventListener(l_,$)},[]),y.jsx(nt.div,{...d,ref:S,style:{pointerEvents:R?O?"auto":"none":void 0,...n.style},onFocusCapture:Fe(n.onFocusCapture,B.onFocusCapture),onBlurCapture:Fe(n.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Fe(n.onPointerDownCapture,L.onPointerDownCapture)})});uy.displayName=ZV;var nz="DismissableLayerBranch",rz=C.forwardRef((n,e)=>{const t=C.useContext(Ck),r=C.useRef(null),i=xt(e,r);return C.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),y.jsx(nt.div,{...n,ref:i})});rz.displayName=nz;function iz(n,e=globalThis?.document){const t=Jn(n),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let d=function(){Ek(ez,t,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function sz(n,e=globalThis?.document){const t=Jn(n),r=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!r.current&&Ek(tz,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KA(){const n=new CustomEvent(l_);document.dispatchEvent(n)}function Ek(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?Ak(i,s):i.dispatchEvent(s)}var hw=0;function xb(){C.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??YA()),document.body.insertAdjacentElement("beforeend",n[1]??YA()),hw++,()=>{hw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hw--}},[])}function YA(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var fw="focusScope.autoFocusOnMount",pw="focusScope.autoFocusOnUnmount",XA={bubbles:!1,cancelable:!0},oz="FocusScope",dy=C.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=n,[l,d]=C.useState(null),h=Jn(i),f=Jn(s),g=C.useRef(null),v=xt(e,x=>d(x)),b=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let x=function(R){if(b.paused||!l)return;const O=R.target;l.contains(O)?g.current=O:gl(g.current,{select:!0})},E=function(R){if(b.paused||!l)return;const O=R.relatedTarget;O!==null&&(l.contains(O)||gl(g.current,{select:!0}))},P=function(R){if(document.activeElement===document.body)for(const L of R)L.removedNodes.length>0&&gl(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const M=new MutationObserver(P);return l&&M.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),M.disconnect()}}},[r,l,b.paused]),C.useEffect(()=>{if(l){JA.add(b);const x=document.activeElement;if(!l.contains(x)){const P=new CustomEvent(fw,XA);l.addEventListener(fw,h),l.dispatchEvent(P),P.defaultPrevented||(az(hz(kk(l)),{select:!0}),document.activeElement===x&&gl(l))}return()=>{l.removeEventListener(fw,h),setTimeout(()=>{const P=new CustomEvent(pw,XA);l.addEventListener(pw,f),l.dispatchEvent(P),P.defaultPrevented||gl(x??document.body,{select:!0}),l.removeEventListener(pw,f),JA.remove(b)},0)}}},[l,h,f,b]);const S=C.useCallback(x=>{if(!t&&!r||b.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,P=document.activeElement;if(E&&P){const M=x.currentTarget,[R,O]=lz(M);R&&O?!x.shiftKey&&P===O?(x.preventDefault(),t&&gl(R,{select:!0})):x.shiftKey&&P===R&&(x.preventDefault(),t&&gl(O,{select:!0})):P===M&&x.preventDefault()}},[t,r,b.paused]);return y.jsx(nt.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});dy.displayName=oz;function az(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(gl(r,{select:e}),document.activeElement!==t)return}function lz(n){const e=kk(n),t=QA(e,n),r=QA(e.reverse(),n);return[t,r]}function kk(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function QA(n,e){for(const t of n)if(!cz(t,{upTo:e}))return t}function cz(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function uz(n){return n instanceof HTMLInputElement&&"select"in n}function gl(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&uz(n)&&e&&n.select()}}var JA=dz();function dz(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=ZA(n,e),n.unshift(e)},remove(e){n=ZA(n,e),n[0]?.resume()}}}function ZA(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function hz(n){return n.filter(e=>e.tagName!=="A")}var fz=I_[" useId ".trim().toString()]||(()=>{}),pz=0;function wa(n){const[e,t]=C.useState(fz());return Rn(()=>{t(r=>r??String(pz++))},[n]),e?`radix-${e}`:""}const mz=["top","right","bottom","left"],kl=Math.min,Ai=Math.max,jv=Math.round,tv=Math.floor,wo=n=>({x:n,y:n}),gz={left:"right",right:"left",bottom:"top",top:"bottom"},vz={start:"end",end:"start"};function c_(n,e,t){return Ai(n,kl(e,t))}function xa(n,e){return typeof n=="function"?n(e):n}function Sa(n){return n.split("-")[0]}function Ih(n){return n.split("-")[1]}function Sb(n){return n==="x"?"y":"x"}function Ab(n){return n==="y"?"height":"width"}function vo(n){return["top","bottom"].includes(Sa(n))?"y":"x"}function Cb(n){return Sb(vo(n))}function yz(n,e,t){t===void 0&&(t=!1);const r=Ih(n),i=Cb(n),s=Ab(i);let a=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Fv(a)),[a,Fv(a)]}function wz(n){const e=Fv(n);return[u_(n),e,u_(e)]}function u_(n){return n.replace(/start|end/g,e=>vz[e])}function _z(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:a;default:return[]}}function bz(n,e,t,r){const i=Ih(n);let s=_z(Sa(n),t==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(u_)))),s}function Fv(n){return n.replace(/left|right|bottom|top/g,e=>gz[e])}function xz(n){return{top:0,right:0,bottom:0,left:0,...n}}function Tk(n){return typeof n!="number"?xz(n):{top:n,right:n,bottom:n,left:n}}function Bv(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function e1(n,e,t){let{reference:r,floating:i}=n;const s=vo(e),a=Cb(e),l=Ab(a),d=Sa(e),h=s==="y",f=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,v=r[l]/2-i[l]/2;let b;switch(d){case"top":b={x:f,y:r.y-i.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:g};break;case"left":b={x:r.x-i.width,y:g};break;default:b={x:r.x,y:r.y}}switch(Ih(e)){case"start":b[a]-=v*(t&&h?-1:1);break;case"end":b[a]+=v*(t&&h?-1:1);break}return b}const Sz=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,l=s.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:g}=e1(h,r,d),v=r,b={},S=0;for(let x=0;x<l.length;x++){const{name:E,fn:P}=l[x],{x:M,y:R,data:O,reset:L}=await P({x:f,y:g,initialPlacement:r,placement:v,strategy:i,middlewareData:b,rects:h,platform:a,elements:{reference:n,floating:e}});f=M??f,g=R??g,b={...b,[E]:{...b[E],...O}},L&&S<=50&&(S++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(h=L.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:i}):L.rects),{x:f,y:g}=e1(h,v,d)),x=-1)}return{x:f,y:g,placement:v,strategy:i,middlewareData:b}};async function Gp(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:l,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:v=!1,padding:b=0}=xa(e,n),S=Tk(b),E=l[v?g==="floating"?"reference":"floating":g],P=Bv(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(E)))==null||t?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),M=g==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),O=await(s.isElement==null?void 0:s.isElement(R))?await(s.getScale==null?void 0:s.getScale(R))||{x:1,y:1}:{x:1,y:1},L=Bv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:M,offsetParent:R,strategy:d}):M);return{top:(P.top-L.top+S.top)/O.y,bottom:(L.bottom-P.bottom+S.bottom)/O.y,left:(P.left-L.left+S.left)/O.x,right:(L.right-P.right+S.right)/O.x}}const Az=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:a,elements:l,middlewareData:d}=e,{element:h,padding:f=0}=xa(n,e)||{};if(h==null)return{};const g=Tk(f),v={x:t,y:r},b=Cb(i),S=Ab(b),x=await a.getDimensions(h),E=b==="y",P=E?"top":"left",M=E?"bottom":"right",R=E?"clientHeight":"clientWidth",O=s.reference[S]+s.reference[b]-v[b]-s.floating[S],L=v[b]-s.reference[b],B=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let $=B?B[R]:0;(!$||!await(a.isElement==null?void 0:a.isElement(B)))&&($=l.floating[R]||s.floating[S]);const W=O/2-L/2,Y=$/2-x[S]/2-1,ae=kl(g[P],Y),se=kl(g[M],Y),le=ae,ce=$-x[S]-se,me=$/2-x[S]/2+W,q=c_(le,me,ce),z=!d.arrow&&Ih(i)!=null&&me!==q&&s.reference[S]/2-(me<le?ae:se)-x[S]/2<0,te=z?me<le?me-le:me-ce:0;return{[b]:v[b]+te,data:{[b]:q,centerOffset:me-q-te,...z&&{alignmentOffset:te}},reset:z}}}),Cz=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:l,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:x=!0,...E}=xa(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const P=Sa(i),M=vo(l),R=Sa(l)===l,O=await(d.isRTL==null?void 0:d.isRTL(h.floating)),L=v||(R||!x?[Fv(l)]:wz(l)),B=S!=="none";!v&&B&&L.push(...bz(l,x,S,O));const $=[l,...L],W=await Gp(e,E),Y=[];let ae=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&Y.push(W[P]),g){const me=yz(i,a,O);Y.push(W[me[0]],W[me[1]])}if(ae=[...ae,{placement:i,overflows:Y}],!Y.every(me=>me<=0)){var se,le;const me=(((se=s.flip)==null?void 0:se.index)||0)+1,q=$[me];if(q&&(!(g==="alignment"?M!==vo(q):!1)||ae.every(V=>V.overflows[0]>0&&vo(V.placement)===M)))return{data:{index:me,overflows:ae},reset:{placement:q}};let z=(le=ae.filter(te=>te.overflows[0]<=0).sort((te,V)=>te.overflows[1]-V.overflows[1])[0])==null?void 0:le.placement;if(!z)switch(b){case"bestFit":{var ce;const te=(ce=ae.filter(V=>{if(B){const ne=vo(V.placement);return ne===M||ne==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(ne=>ne>0).reduce((ne,J)=>ne+J,0)]).sort((V,ne)=>V[1]-ne[1])[0])==null?void 0:ce[0];te&&(z=te);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function t1(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function n1(n){return mz.some(e=>n[e]>=0)}const Ez=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=xa(n,e);switch(r){case"referenceHidden":{const s=await Gp(e,{...i,elementContext:"reference"}),a=t1(s,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:n1(a)}}}case"escaped":{const s=await Gp(e,{...i,altBoundary:!0}),a=t1(s,t.floating);return{data:{escapedOffsets:a,escaped:n1(a)}}}default:return{}}}}};async function kz(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Sa(t),l=Ih(t),d=vo(t)==="y",h=["left","top"].includes(a)?-1:1,f=s&&d?-1:1,g=xa(e,n);let{mainAxis:v,crossAxis:b,alignmentAxis:S}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof S=="number"&&(b=l==="end"?S*-1:S),d?{x:b*f,y:v*h}:{x:v*h,y:b*f}}const Tz=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:a,middlewareData:l}=e,d=await kz(e,n);return a===((t=l.offset)==null?void 0:t.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:s+d.y,data:{...d,placement:a}}}}},Pz=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:E=>{let{x:P,y:M}=E;return{x:P,y:M}}},...d}=xa(n,e),h={x:t,y:r},f=await Gp(e,d),g=vo(Sa(i)),v=Sb(g);let b=h[v],S=h[g];if(s){const E=v==="y"?"top":"left",P=v==="y"?"bottom":"right",M=b+f[E],R=b-f[P];b=c_(M,b,R)}if(a){const E=g==="y"?"top":"left",P=g==="y"?"bottom":"right",M=S+f[E],R=S-f[P];S=c_(M,S,R)}const x=l.fn({...e,[v]:b,[g]:S});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[v]:s,[g]:a}}}}}},Rz=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=xa(n,e),f={x:t,y:r},g=vo(i),v=Sb(g);let b=f[v],S=f[g];const x=xa(l,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(d){const R=v==="y"?"height":"width",O=s.reference[v]-s.floating[R]+E.mainAxis,L=s.reference[v]+s.reference[R]-E.mainAxis;b<O?b=O:b>L&&(b=L)}if(h){var P,M;const R=v==="y"?"width":"height",O=["top","left"].includes(Sa(i)),L=s.reference[g]-s.floating[R]+(O&&((P=a.offset)==null?void 0:P[g])||0)+(O?0:E.crossAxis),B=s.reference[g]+s.reference[R]+(O?0:((M=a.offset)==null?void 0:M[g])||0)-(O?E.crossAxis:0);S<L?S=L:S>B&&(S=B)}return{[v]:b,[g]:S}}}},Mz=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:s,platform:a,elements:l}=e,{apply:d=()=>{},...h}=xa(n,e),f=await Gp(e,h),g=Sa(i),v=Ih(i),b=vo(i)==="y",{width:S,height:x}=s.floating;let E,P;g==="top"||g==="bottom"?(E=g,P=v===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(P=g,E=v==="end"?"top":"bottom");const M=x-f.top-f.bottom,R=S-f.left-f.right,O=kl(x-f[E],M),L=kl(S-f[P],R),B=!e.middlewareData.shift;let $=O,W=L;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(W=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=M),B&&!v){const ae=Ai(f.left,0),se=Ai(f.right,0),le=Ai(f.top,0),ce=Ai(f.bottom,0);b?W=S-2*(ae!==0||se!==0?ae+se:Ai(f.left,f.right)):$=x-2*(le!==0||ce!==0?le+ce:Ai(f.top,f.bottom))}await d({...e,availableWidth:W,availableHeight:$});const Y=await a.getDimensions(l.floating);return S!==Y.width||x!==Y.height?{reset:{rects:!0}}:{}}}};function hy(){return typeof window<"u"}function Dh(n){return Pk(n)?(n.nodeName||"").toLowerCase():"#document"}function Ci(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function So(n){var e;return(e=(Pk(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Pk(n){return hy()?n instanceof Node||n instanceof Ci(n).Node:!1}function Os(n){return hy()?n instanceof Element||n instanceof Ci(n).Element:!1}function _o(n){return hy()?n instanceof HTMLElement||n instanceof Ci(n).HTMLElement:!1}function r1(n){return!hy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ci(n).ShadowRoot}function cm(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Ns(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function Iz(n){return["table","td","th"].includes(Dh(n))}function fy(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function Eb(n){const e=kb(),t=Os(n)?Ns(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Dz(n){let e=Tl(n);for(;_o(e)&&!Ah(e);){if(Eb(e))return e;if(fy(e))return null;e=Tl(e)}return null}function kb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ah(n){return["html","body","#document"].includes(Dh(n))}function Ns(n){return Ci(n).getComputedStyle(n)}function py(n){return Os(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tl(n){if(Dh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||r1(n)&&n.host||So(n);return r1(e)?e.host:e}function Rk(n){const e=Tl(n);return Ah(e)?n.ownerDocument?n.ownerDocument.body:n.body:_o(e)&&cm(e)?e:Rk(e)}function Kp(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Rk(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),a=Ci(i);if(s){const l=d_(a);return e.concat(a,a.visualViewport||[],cm(i)?i:[],l&&t?Kp(l):[])}return e.concat(i,Kp(i,[],t))}function d_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Mk(n){const e=Ns(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=_o(n),s=i?n.offsetWidth:t,a=i?n.offsetHeight:r,l=jv(t)!==s||jv(r)!==a;return l&&(t=s,r=a),{width:t,height:r,$:l}}function Tb(n){return Os(n)?n:n.contextElement}function ph(n){const e=Tb(n);if(!_o(e))return wo(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Mk(e);let a=(s?jv(t.width):t.width)/r,l=(s?jv(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Oz=wo(0);function Ik(n){const e=Ci(n);return!kb()||!e.visualViewport?Oz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Nz(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ci(n)?!1:e}function eu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Tb(n);let a=wo(1);e&&(r?Os(r)&&(a=ph(r)):a=ph(n));const l=Nz(s,t,r)?Ik(s):wo(0);let d=(i.left+l.x)/a.x,h=(i.top+l.y)/a.y,f=i.width/a.x,g=i.height/a.y;if(s){const v=Ci(s),b=r&&Os(r)?Ci(r):r;let S=v,x=d_(S);for(;x&&r&&b!==S;){const E=ph(x),P=x.getBoundingClientRect(),M=Ns(x),R=P.left+(x.clientLeft+parseFloat(M.paddingLeft))*E.x,O=P.top+(x.clientTop+parseFloat(M.paddingTop))*E.y;d*=E.x,h*=E.y,f*=E.x,g*=E.y,d+=R,h+=O,S=Ci(x),x=d_(S)}}return Bv({width:f,height:g,x:d,y:h})}function Pb(n,e){const t=py(n).scrollLeft;return e?e.left+t:eu(So(n)).left+t}function Dk(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:Pb(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Lz(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",a=So(r),l=e?fy(e.floating):!1;if(r===a||l&&s)return t;let d={scrollLeft:0,scrollTop:0},h=wo(1);const f=wo(0),g=_o(r);if((g||!g&&!s)&&((Dh(r)!=="body"||cm(a))&&(d=py(r)),_o(r))){const b=eu(r);h=ph(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const v=a&&!g&&!s?Dk(a,d,!0):wo(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+v.x,y:t.y*h.y-d.scrollTop*h.y+f.y+v.y}}function jz(n){return Array.from(n.getClientRects())}function Fz(n){const e=So(n),t=py(n),r=n.ownerDocument.body,i=Ai(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ai(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+Pb(n);const l=-t.scrollTop;return Ns(r).direction==="rtl"&&(a+=Ai(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:l}}function Bz(n,e){const t=Ci(n),r=So(n),i=t.visualViewport;let s=r.clientWidth,a=r.clientHeight,l=0,d=0;if(i){s=i.width,a=i.height;const h=kb();(!h||h&&e==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}return{width:s,height:a,x:l,y:d}}function $z(n,e){const t=eu(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=_o(n)?ph(n):wo(1),a=n.clientWidth*s.x,l=n.clientHeight*s.y,d=i*s.x,h=r*s.y;return{width:a,height:l,x:d,y:h}}function i1(n,e,t){let r;if(e==="viewport")r=Bz(n,t);else if(e==="document")r=Fz(So(n));else if(Os(e))r=$z(e,t);else{const i=Ik(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Bv(r)}function Ok(n,e){const t=Tl(n);return t===e||!Os(t)||Ah(t)?!1:Ns(t).position==="fixed"||Ok(t,e)}function Uz(n,e){const t=e.get(n);if(t)return t;let r=Kp(n,[],!1).filter(l=>Os(l)&&Dh(l)!=="body"),i=null;const s=Ns(n).position==="fixed";let a=s?Tl(n):n;for(;Os(a)&&!Ah(a);){const l=Ns(a),d=Eb(a);!d&&l.position==="fixed"&&(i=null),(s?!d&&!i:!d&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||cm(a)&&!d&&Ok(n,a))?r=r.filter(f=>f!==a):i=l,a=Tl(a)}return e.set(n,r),r}function Vz(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const a=[...t==="clippingAncestors"?fy(e)?[]:Uz(e,this._c):[].concat(t),r],l=a[0],d=a.reduce((h,f)=>{const g=i1(e,f,i);return h.top=Ai(g.top,h.top),h.right=kl(g.right,h.right),h.bottom=kl(g.bottom,h.bottom),h.left=Ai(g.left,h.left),h},i1(e,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function zz(n){const{width:e,height:t}=Mk(n);return{width:e,height:t}}function Hz(n,e,t){const r=_o(e),i=So(e),s=t==="fixed",a=eu(n,!0,s,e);let l={scrollLeft:0,scrollTop:0};const d=wo(0);function h(){d.x=Pb(i)}if(r||!r&&!s)if((Dh(e)!=="body"||cm(i))&&(l=py(e)),r){const b=eu(e,!0,s,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?Dk(i,l):wo(0),g=a.left+l.scrollLeft-d.x-f.x,v=a.top+l.scrollTop-d.y-f.y;return{x:g,y:v,width:a.width,height:a.height}}function mw(n){return Ns(n).position==="static"}function s1(n,e){if(!_o(n)||Ns(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return So(n)===t&&(t=t.ownerDocument.body),t}function Nk(n,e){const t=Ci(n);if(fy(n))return t;if(!_o(n)){let i=Tl(n);for(;i&&!Ah(i);){if(Os(i)&&!mw(i))return i;i=Tl(i)}return t}let r=s1(n,e);for(;r&&Iz(r)&&mw(r);)r=s1(r,e);return r&&Ah(r)&&mw(r)&&!Eb(r)?t:r||Dz(n)||t}const Wz=async function(n){const e=this.getOffsetParent||Nk,t=this.getDimensions,r=await t(n.floating);return{reference:Hz(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qz(n){return Ns(n).direction==="rtl"}const Gz={convertOffsetParentRelativeRectToViewportRelativeRect:Lz,getDocumentElement:So,getClippingRect:Vz,getOffsetParent:Nk,getElementRects:Wz,getClientRects:jz,getDimensions:zz,getScale:ph,isElement:Os,isRTL:qz};function Lk(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Kz(n,e){let t=null,r;const i=So(n);function s(){var l;clearTimeout(r),(l=t)==null||l.disconnect(),t=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const h=n.getBoundingClientRect(),{left:f,top:g,width:v,height:b}=h;if(l||e(),!v||!b)return;const S=tv(g),x=tv(i.clientWidth-(f+v)),E=tv(i.clientHeight-(g+b)),P=tv(f),R={rootMargin:-S+"px "+-x+"px "+-E+"px "+-P+"px",threshold:Ai(0,kl(1,d))||1};let O=!0;function L(B){const $=B[0].intersectionRatio;if($!==d){if(!O)return a();$?a(!1,$):r=setTimeout(()=>{a(!1,1e-7)},1e3)}$===1&&!Lk(h,n.getBoundingClientRect())&&a(),O=!1}try{t=new IntersectionObserver(L,{...R,root:i.ownerDocument})}catch{t=new IntersectionObserver(L,R)}t.observe(n)}return a(!0),s}function Yz(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=Tb(n),f=i||s?[...h?Kp(h):[],...Kp(e)]:[];f.forEach(P=>{i&&P.addEventListener("scroll",t,{passive:!0}),s&&P.addEventListener("resize",t)});const g=h&&l?Kz(h,t):null;let v=-1,b=null;a&&(b=new ResizeObserver(P=>{let[M]=P;M&&M.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=b)==null||R.observe(e)})),t()}),h&&!d&&b.observe(h),b.observe(e));let S,x=d?eu(n):null;d&&E();function E(){const P=eu(n);x&&!Lk(x,P)&&t(),x=P,S=requestAnimationFrame(E)}return t(),()=>{var P;f.forEach(M=>{i&&M.removeEventListener("scroll",t),s&&M.removeEventListener("resize",t)}),g?.(),(P=b)==null||P.disconnect(),b=null,d&&cancelAnimationFrame(S)}}const Xz=Tz,Qz=Pz,Jz=Cz,Zz=Mz,e4=Ez,o1=Az,t4=Rz,n4=(n,e,t)=>{const r=new Map,i={platform:Gz,...t},s={...i.platform,_c:r};return Sz(n,e,{...i,platform:s})};var r4=typeof document<"u",i4=function(){},wv=r4?C.useLayoutEffect:i4;function $v(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!$v(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!$v(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function jk(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function a1(n,e){const t=jk(n);return Math.round(e*t)/t}function gw(n){const e=C.useRef(n);return wv(()=>{e.current=n}),e}function s4(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:d,open:h}=n,[f,g]=C.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=C.useState(r);$v(v,r)||b(r);const[S,x]=C.useState(null),[E,P]=C.useState(null),M=C.useCallback(V=>{V!==B.current&&(B.current=V,x(V))},[]),R=C.useCallback(V=>{V!==$.current&&($.current=V,P(V))},[]),O=s||S,L=a||E,B=C.useRef(null),$=C.useRef(null),W=C.useRef(f),Y=d!=null,ae=gw(d),se=gw(i),le=gw(h),ce=C.useCallback(()=>{if(!B.current||!$.current)return;const V={placement:e,strategy:t,middleware:v};se.current&&(V.platform=se.current),n4(B.current,$.current,V).then(ne=>{const J={...ne,isPositioned:le.current!==!1};me.current&&!$v(W.current,J)&&(W.current=J,nm.flushSync(()=>{g(J)}))})},[v,e,t,se,le]);wv(()=>{h===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,g(V=>({...V,isPositioned:!1})))},[h]);const me=C.useRef(!1);wv(()=>(me.current=!0,()=>{me.current=!1}),[]),wv(()=>{if(O&&(B.current=O),L&&($.current=L),O&&L){if(ae.current)return ae.current(O,L,ce);ce()}},[O,L,ce,ae,Y]);const q=C.useMemo(()=>({reference:B,floating:$,setReference:M,setFloating:R}),[M,R]),z=C.useMemo(()=>({reference:O,floating:L}),[O,L]),te=C.useMemo(()=>{const V={position:t,left:0,top:0};if(!z.floating)return V;const ne=a1(z.floating,f.x),J=a1(z.floating,f.y);return l?{...V,transform:"translate("+ne+"px, "+J+"px)",...jk(z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ne,top:J}},[t,l,z.floating,f.x,f.y]);return C.useMemo(()=>({...f,update:ce,refs:q,elements:z,floatingStyles:te}),[f,ce,q,z,te])}const o4=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?o1({element:r.current,padding:i}).fn(t):{}:r?o1({element:r,padding:i}).fn(t):{}}}},a4=(n,e)=>({...Xz(n),options:[n,e]}),l4=(n,e)=>({...Qz(n),options:[n,e]}),c4=(n,e)=>({...t4(n),options:[n,e]}),u4=(n,e)=>({...Jz(n),options:[n,e]}),d4=(n,e)=>({...Zz(n),options:[n,e]}),h4=(n,e)=>({...e4(n),options:[n,e]}),f4=(n,e)=>({...o4(n),options:[n,e]});var p4="Arrow",Fk=C.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return y.jsx(nt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fk.displayName=p4;var m4=Fk;function Bk(n){const[e,t]=C.useState(void 0);return Rn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,l;if("borderBoxSize"in s){const d=s.borderBoxSize,h=Array.isArray(d)?d[0]:d;a=h.inlineSize,l=h.blockSize}else a=n.offsetWidth,l=n.offsetHeight;t({width:a,height:l})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var Rb="Popper",[$k,my]=xo(Rb),[g4,Uk]=$k(Rb),Vk=n=>{const{__scopePopper:e,children:t}=n,[r,i]=C.useState(null);return y.jsx(g4,{scope:e,anchor:r,onAnchorChange:i,children:t})};Vk.displayName=Rb;var zk="PopperAnchor",Hk=C.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=Uk(zk,t),a=C.useRef(null),l=xt(e,a);return C.useEffect(()=>{s.onAnchorChange(r?.current||a.current)}),r?null:y.jsx(nt.div,{...i,ref:l})});Hk.displayName=zk;var Mb="PopperContent",[v4,y4]=$k(Mb),Wk=C.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:g="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:S,...x}=n,E=Uk(Mb,t),[P,M]=C.useState(null),R=xt(e,ve=>M(ve)),[O,L]=C.useState(null),B=Bk(O),$=B?.width??0,W=B?.height??0,Y=r+(s!=="center"?"-"+s:""),ae=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},se=Array.isArray(h)?h:[h],le=se.length>0,ce={padding:ae,boundary:se.filter(_4),altBoundary:le},{refs:me,floatingStyles:q,placement:z,isPositioned:te,middlewareData:V}=s4({strategy:"fixed",placement:Y,whileElementsMounted:(...ve)=>Yz(...ve,{animationFrame:b==="always"}),elements:{reference:E.anchor},middleware:[a4({mainAxis:i+W,alignmentAxis:a}),d&&l4({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?c4():void 0,...ce}),d&&u4({...ce}),d4({...ce,apply:({elements:ve,rects:Oe,availableWidth:He,availableHeight:Ye})=>{const{width:st,height:Rt}=Oe.reference,cn=ve.floating.style;cn.setProperty("--radix-popper-available-width",`${He}px`),cn.setProperty("--radix-popper-available-height",`${Ye}px`),cn.setProperty("--radix-popper-anchor-width",`${st}px`),cn.setProperty("--radix-popper-anchor-height",`${Rt}px`)}}),O&&f4({element:O,padding:l}),b4({arrowWidth:$,arrowHeight:W}),v&&h4({strategy:"referenceHidden",...ce})]}),[ne,J]=Kk(z),F=Jn(S);Rn(()=>{te&&F?.()},[te,F]);const ie=V.arrow?.x,pe=V.arrow?.y,Te=V.arrow?.centerOffset!==0,[De,Pe]=C.useState();return Rn(()=>{P&&Pe(window.getComputedStyle(P).zIndex)},[P]),y.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:te?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:De,"--radix-popper-transform-origin":[V.transformOrigin?.x,V.transformOrigin?.y].join(" "),...V.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:y.jsx(v4,{scope:t,placedSide:ne,onArrowChange:L,arrowX:ie,arrowY:pe,shouldHideArrow:Te,children:y.jsx(nt.div,{"data-side":ne,"data-align":J,...x,ref:R,style:{...x.style,animation:te?void 0:"none"}})})})});Wk.displayName=Mb;var qk="PopperArrow",w4={top:"bottom",right:"left",bottom:"top",left:"right"},Gk=C.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=y4(qk,r),a=w4[s.placedSide];return y.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:y.jsx(m4,{...i,ref:t,style:{...i.style,display:"block"}})})});Gk.displayName=qk;function _4(n){return n!==null}var b4=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:i}=e,a=i.arrow?.centerOffset!==0,l=a?0:n.arrowWidth,d=a?0:n.arrowHeight,[h,f]=Kk(t),g={start:"0%",center:"50%",end:"100%"}[f],v=(i.arrow?.x??0)+l/2,b=(i.arrow?.y??0)+d/2;let S="",x="";return h==="bottom"?(S=a?g:`${v}px`,x=`${-d}px`):h==="top"?(S=a?g:`${v}px`,x=`${r.floating.height+d}px`):h==="right"?(S=`${-d}px`,x=a?g:`${b}px`):h==="left"&&(S=`${r.floating.width+d}px`,x=a?g:`${b}px`),{data:{x:S,y:x}}}});function Kk(n){const[e,t="center"]=n.split("-");return[e,t]}var Yk=Vk,Xk=Hk,Qk=Wk,Jk=Gk,x4="Portal",gy=C.forwardRef((n,e)=>{const{container:t,...r}=n,[i,s]=C.useState(!1);Rn(()=>s(!0),[]);const a=t||i&&globalThis?.document?.body;return a?hO.createPortal(y.jsx(nt.div,{...r,ref:e}),a):null});gy.displayName=x4;function S4(n,e){return C.useReducer((t,r)=>e[t][r]??t,n)}var Ti=n=>{const{present:e,children:t}=n,r=A4(e),i=typeof t=="function"?t({present:r.isPresent}):C.Children.only(t),s=xt(r.ref,C4(i));return typeof t=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};Ti.displayName="Presence";function A4(n){const[e,t]=C.useState(),r=C.useRef(null),i=C.useRef(n),s=C.useRef("none"),a=n?"mounted":"unmounted",[l,d]=S4(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const h=nv(r.current);s.current=l==="mounted"?h:"none"},[l]),Rn(()=>{const h=r.current,f=i.current;if(f!==n){const v=s.current,b=nv(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&v!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),Rn(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,g=b=>{const x=nv(r.current).includes(b.animationName);if(b.target===e&&x&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},v=b=>{b.target===e&&(s.current=nv(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:C.useCallback(h=>{r.current=h?getComputedStyle(h):null,t(h)},[])}}function nv(n){return n?.animationName||"none"}function C4(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var vw="rovingFocusGroup.onEntryFocus",E4={bubbles:!1,cancelable:!0},um="RovingFocusGroup",[h_,Zk,k4]=bb(um),[T4,eT]=xo(um,[k4]),[P4,R4]=T4(um),tT=C.forwardRef((n,e)=>y.jsx(h_.Provider,{scope:n.__scopeRovingFocusGroup,children:y.jsx(h_.Slot,{scope:n.__scopeRovingFocusGroup,children:y.jsx(M4,{...n,ref:e})})}));tT.displayName=um;var M4=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...g}=n,v=C.useRef(null),b=xt(e,v),S=cy(s),[x,E]=Sh({prop:a,defaultProp:l??null,onChange:d,caller:um}),[P,M]=C.useState(!1),R=Jn(h),O=Zk(t),L=C.useRef(!1),[B,$]=C.useState(0);return C.useEffect(()=>{const W=v.current;if(W)return W.addEventListener(vw,R),()=>W.removeEventListener(vw,R)},[R]),y.jsx(P4,{scope:t,orientation:r,dir:S,loop:i,currentTabStopId:x,onItemFocus:C.useCallback(W=>E(W),[E]),onItemShiftTab:C.useCallback(()=>M(!0),[]),onFocusableItemAdd:C.useCallback(()=>$(W=>W+1),[]),onFocusableItemRemove:C.useCallback(()=>$(W=>W-1),[]),children:y.jsx(nt.div,{tabIndex:P||B===0?-1:0,"data-orientation":r,...g,ref:b,style:{outline:"none",...n.style},onMouseDown:Fe(n.onMouseDown,()=>{L.current=!0}),onFocus:Fe(n.onFocus,W=>{const Y=!L.current;if(W.target===W.currentTarget&&Y&&!P){const ae=new CustomEvent(vw,E4);if(W.currentTarget.dispatchEvent(ae),!ae.defaultPrevented){const se=O().filter(z=>z.focusable),le=se.find(z=>z.active),ce=se.find(z=>z.id===x),q=[le,ce,...se].filter(Boolean).map(z=>z.ref.current);iT(q,f)}}L.current=!1}),onBlur:Fe(n.onBlur,()=>M(!1))})})}),nT="RovingFocusGroupItem",rT=C.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...l}=n,d=wa(),h=s||d,f=R4(nT,t),g=f.currentTabStopId===h,v=Zk(t),{onFocusableItemAdd:b,onFocusableItemRemove:S,currentTabStopId:x}=f;return C.useEffect(()=>{if(r)return b(),()=>S()},[r,b,S]),y.jsx(h_.ItemSlot,{scope:t,id:h,focusable:r,active:i,children:y.jsx(nt.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...l,ref:e,onMouseDown:Fe(n.onMouseDown,E=>{r?f.onItemFocus(h):E.preventDefault()}),onFocus:Fe(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:Fe(n.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const P=O4(E,f.orientation,f.dir);if(P!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let R=v().filter(O=>O.focusable).map(O=>O.ref.current);if(P==="last")R.reverse();else if(P==="prev"||P==="next"){P==="prev"&&R.reverse();const O=R.indexOf(E.currentTarget);R=f.loop?N4(R,O+1):R.slice(O+1)}setTimeout(()=>iT(R))}}),children:typeof a=="function"?a({isCurrentTabStop:g,hasTabStop:x!=null}):a})})});rT.displayName=nT;var I4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function D4(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function O4(n,e,t){const r=D4(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return I4[r]}function iT(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function N4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var L4=tT,j4=rT,F4=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},rh=new WeakMap,rv=new WeakMap,iv={},yw=0,sT=function(n){return n&&(n.host||sT(n.parentNode))},B4=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=sT(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},$4=function(n,e,t,r){var i=B4(e,Array.isArray(n)?n:[n]);iv[t]||(iv[t]=new WeakMap);var s=iv[t],a=[],l=new Set,d=new Set(i),h=function(g){!g||l.has(g)||(l.add(g),h(g.parentNode))};i.forEach(h);var f=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(l.has(v))f(v);else try{var b=v.getAttribute(r),S=b!==null&&b!=="false",x=(rh.get(v)||0)+1,E=(s.get(v)||0)+1;rh.set(v,x),s.set(v,E),a.push(v),x===1&&S&&rv.set(v,!0),E===1&&v.setAttribute(t,"true"),S||v.setAttribute(r,"true")}catch(P){console.error("aria-hidden: cannot operate on ",v,P)}})};return f(e),l.clear(),yw++,function(){a.forEach(function(g){var v=rh.get(g)-1,b=s.get(g)-1;rh.set(g,v),s.set(g,b),v||(rv.has(g)||g.removeAttribute(r),rv.delete(g)),b||g.removeAttribute(t)}),yw--,yw||(rh=new WeakMap,rh=new WeakMap,rv=new WeakMap,iv={})}},Ib=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=F4(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),$4(r,i,t,"aria-hidden")):function(){return null}},mo=function(){return mo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},mo.apply(this,arguments)};function oT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function U4(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var _v="right-scroll-bar-position",bv="width-before-scroll-bar",V4="with-scroll-bars-hidden",z4="--removed-body-scroll-bar-size";function ww(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function H4(n,e){var t=C.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var W4=typeof window<"u"?C.useLayoutEffect:C.useEffect,l1=new WeakMap;function q4(n,e){var t=H4(null,function(r){return n.forEach(function(i){return ww(i,r)})});return W4(function(){var r=l1.get(t);if(r){var i=new Set(r),s=new Set(n),a=t.current;i.forEach(function(l){s.has(l)||ww(l,null)}),s.forEach(function(l){i.has(l)||ww(l,a)})}l1.set(t,n)},[n]),t}function G4(n){return n}function K4(n,e){e===void 0&&(e=G4);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(s){var a=e(s,r);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(s){for(r=!0;t.length;){var a=t;t=[],a.forEach(s)}t={push:function(l){return s(l)},filter:function(){return t}}},assignMedium:function(s){r=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(s),a=t}var d=function(){var f=a;a=[],f.forEach(s)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){a.push(f),h()},filter:function(f){return a=a.filter(f),t}}}};return i}function Y4(n){n===void 0&&(n={});var e=K4(null);return e.options=mo({async:!0,ssr:!1},n),e}var aT=function(n){var e=n.sideCar,t=oT(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,mo({},t))};aT.isSideCarExport=!0;function X4(n,e){return n.useMedium(e),aT}var lT=Y4(),_w=function(){},vy=C.forwardRef(function(n,e){var t=C.useRef(null),r=C.useState({onScrollCapture:_w,onWheelCapture:_w,onTouchMoveCapture:_w}),i=r[0],s=r[1],a=n.forwardProps,l=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,g=n.shards,v=n.sideCar,b=n.noRelative,S=n.noIsolation,x=n.inert,E=n.allowPinchZoom,P=n.as,M=P===void 0?"div":P,R=n.gapMode,O=oT(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=v,B=q4([t,e]),$=mo(mo({},O),i);return C.createElement(C.Fragment,null,f&&C.createElement(L,{sideCar:lT,removeScrollBar:h,shards:g,noRelative:b,noIsolation:S,inert:x,setCallbacks:s,allowPinchZoom:!!E,lockRef:t,gapMode:R}),a?C.cloneElement(C.Children.only(l),mo(mo({},$),{ref:B})):C.createElement(M,mo({},$,{className:d,ref:B}),l))});vy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vy.classNames={fullWidth:bv,zeroRight:_v};var Q4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function J4(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=Q4();return e&&n.setAttribute("nonce",e),n}function Z4(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function eH(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var tH=function(){var n=0,e=null;return{add:function(t){n==0&&(e=J4())&&(Z4(e,t),eH(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},nH=function(){var n=tH();return function(e,t){C.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},cT=function(){var n=nH(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},rH={left:0,top:0,right:0,gap:0},bw=function(n){return parseInt(n||"",10)||0},iH=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[bw(t),bw(r),bw(i)]},sH=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return rH;var e=iH(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},oH=cT(),mh="data-scroll-locked",aH=function(n,e,t,r){var i=n.left,s=n.top,a=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(V4,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(mh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_v,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(bv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(_v," .").concat(_v,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(bv," .").concat(bv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mh,`] {
    `).concat(z4,": ").concat(l,`px;
  }
`)},c1=function(){var n=parseInt(document.body.getAttribute(mh)||"0",10);return isFinite(n)?n:0},lH=function(){C.useEffect(function(){return document.body.setAttribute(mh,(c1()+1).toString()),function(){var n=c1()-1;n<=0?document.body.removeAttribute(mh):document.body.setAttribute(mh,n.toString())}},[])},cH=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;lH();var s=C.useMemo(function(){return sH(i)},[i]);return C.createElement(oH,{styles:aH(s,!e,i,t?"":"!important")})},f_=!1;if(typeof window<"u")try{var sv=Object.defineProperty({},"passive",{get:function(){return f_=!0,!0}});window.addEventListener("test",sv,sv),window.removeEventListener("test",sv,sv)}catch{f_=!1}var ih=f_?{passive:!1}:!1,uH=function(n){return n.tagName==="TEXTAREA"},uT=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!uH(n)&&t[e]==="visible")},dH=function(n){return uT(n,"overflowY")},hH=function(n){return uT(n,"overflowX")},u1=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=dT(n,r);if(i){var s=hT(n,r),a=s[1],l=s[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},fH=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},pH=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},dT=function(n,e){return n==="v"?dH(e):hH(e)},hT=function(n,e){return n==="v"?fH(e):pH(e)},mH=function(n,e){return n==="h"&&e==="rtl"?-1:1},gH=function(n,e,t,r,i){var s=mH(n,window.getComputedStyle(e).direction),a=s*r,l=t.target,d=e.contains(l),h=!1,f=a>0,g=0,v=0;do{if(!l)break;var b=hT(n,l),S=b[0],x=b[1],E=b[2],P=x-E-s*S;(S||P)&&dT(n,l)&&(g+=P,v+=S);var M=l.parentNode;l=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(f&&Math.abs(g)<1||!f&&Math.abs(v)<1)&&(h=!0),h},ov=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},d1=function(n){return[n.deltaX,n.deltaY]},h1=function(n){return n&&"current"in n?n.current:n},vH=function(n,e){return n[0]===e[0]&&n[1]===e[1]},yH=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},wH=0,sh=[];function _H(n){var e=C.useRef([]),t=C.useRef([0,0]),r=C.useRef(),i=C.useState(wH++)[0],s=C.useState(cT)[0],a=C.useRef(n);C.useEffect(function(){a.current=n},[n]),C.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var x=U4([n.lockRef.current],(n.shards||[]).map(h1),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var l=C.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var P=ov(x),M=t.current,R="deltaX"in x?x.deltaX:M[0]-P[0],O="deltaY"in x?x.deltaY:M[1]-P[1],L,B=x.target,$=Math.abs(R)>Math.abs(O)?"h":"v";if("touches"in x&&$==="h"&&B.type==="range")return!1;var W=u1($,B);if(!W)return!0;if(W?L=$:(L=$==="v"?"h":"v",W=u1($,B)),!W)return!1;if(!r.current&&"changedTouches"in x&&(R||O)&&(r.current=L),!L)return!0;var Y=r.current||L;return gH(Y,E,x,Y==="h"?R:O)},[]),d=C.useCallback(function(x){var E=x;if(!(!sh.length||sh[sh.length-1]!==s)){var P="deltaY"in E?d1(E):ov(E),M=e.current.filter(function(L){return L.name===E.type&&(L.target===E.target||E.target===L.shadowParent)&&vH(L.delta,P)})[0];if(M&&M.should){E.cancelable&&E.preventDefault();return}if(!M){var R=(a.current.shards||[]).map(h1).filter(Boolean).filter(function(L){return L.contains(E.target)}),O=R.length>0?l(E,R[0]):!a.current.noIsolation;O&&E.cancelable&&E.preventDefault()}}},[]),h=C.useCallback(function(x,E,P,M){var R={name:x,delta:E,target:P,should:M,shadowParent:bH(P)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(O){return O!==R})},1)},[]),f=C.useCallback(function(x){t.current=ov(x),r.current=void 0},[]),g=C.useCallback(function(x){h(x.type,d1(x),x.target,l(x,n.lockRef.current))},[]),v=C.useCallback(function(x){h(x.type,ov(x),x.target,l(x,n.lockRef.current))},[]);C.useEffect(function(){return sh.push(s),n.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:v}),document.addEventListener("wheel",d,ih),document.addEventListener("touchmove",d,ih),document.addEventListener("touchstart",f,ih),function(){sh=sh.filter(function(x){return x!==s}),document.removeEventListener("wheel",d,ih),document.removeEventListener("touchmove",d,ih),document.removeEventListener("touchstart",f,ih)}},[]);var b=n.removeScrollBar,S=n.inert;return C.createElement(C.Fragment,null,S?C.createElement(s,{styles:yH(i)}):null,b?C.createElement(cH,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function bH(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const xH=X4(lT,_H);var yy=C.forwardRef(function(n,e){return C.createElement(vy,mo({},n,{ref:e,sideCar:xH}))});yy.classNames=vy.classNames;var p_=["Enter"," "],SH=["ArrowDown","PageUp","Home"],fT=["ArrowUp","PageDown","End"],AH=[...SH,...fT],CH={ltr:[...p_,"ArrowRight"],rtl:[...p_,"ArrowLeft"]},EH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},dm="Menu",[Yp,kH,TH]=bb(dm),[uu,pT]=xo(dm,[TH,my,eT]),wy=my(),mT=eT(),[PH,du]=uu(dm),[RH,hm]=uu(dm),gT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=n,l=wy(e),[d,h]=C.useState(null),f=C.useRef(!1),g=Jn(s),v=cy(i);return C.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),y.jsx(Yk,{...l,children:y.jsx(PH,{scope:e,open:t,onOpenChange:g,content:d,onContentChange:h,children:y.jsx(RH,{scope:e,onClose:C.useCallback(()=>g(!1),[g]),isUsingKeyboardRef:f,dir:v,modal:a,children:r})})})};gT.displayName=dm;var MH="MenuAnchor",Db=C.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=wy(t);return y.jsx(Xk,{...i,...r,ref:e})});Db.displayName=MH;var Ob="MenuPortal",[IH,vT]=uu(Ob,{forceMount:void 0}),yT=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:i}=n,s=du(Ob,e);return y.jsx(IH,{scope:e,forceMount:t,children:y.jsx(Ti,{present:t||s.open,children:y.jsx(gy,{asChild:!0,container:i,children:r})})})};yT.displayName=Ob;var Zi="MenuContent",[DH,Nb]=uu(Zi),wT=C.forwardRef((n,e)=>{const t=vT(Zi,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=du(Zi,n.__scopeMenu),a=hm(Zi,n.__scopeMenu);return y.jsx(Yp.Provider,{scope:n.__scopeMenu,children:y.jsx(Ti,{present:r||s.open,children:y.jsx(Yp.Slot,{scope:n.__scopeMenu,children:a.modal?y.jsx(OH,{...i,ref:e}):y.jsx(NH,{...i,ref:e})})})})}),OH=C.forwardRef((n,e)=>{const t=du(Zi,n.__scopeMenu),r=C.useRef(null),i=xt(e,r);return C.useEffect(()=>{const s=r.current;if(s)return Ib(s)},[]),y.jsx(Lb,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Fe(n.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),NH=C.forwardRef((n,e)=>{const t=du(Zi,n.__scopeMenu);return y.jsx(Lb,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),LH=Zc("MenuContent.ScrollLock"),Lb=C.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:b,disableOutsideScroll:S,...x}=n,E=du(Zi,t),P=hm(Zi,t),M=wy(t),R=mT(t),O=kH(t),[L,B]=C.useState(null),$=C.useRef(null),W=xt(e,$,E.onContentChange),Y=C.useRef(0),ae=C.useRef(""),se=C.useRef(0),le=C.useRef(null),ce=C.useRef("right"),me=C.useRef(0),q=S?yy:C.Fragment,z=S?{as:LH,allowPinchZoom:!0}:void 0,te=ne=>{const J=ae.current+ne,F=O().filter(ve=>!ve.disabled),ie=document.activeElement,pe=F.find(ve=>ve.ref.current===ie)?.textValue,Te=F.map(ve=>ve.textValue),De=KH(Te,J,pe),Pe=F.find(ve=>ve.textValue===De)?.ref.current;(function ve(Oe){ae.current=Oe,window.clearTimeout(Y.current),Oe!==""&&(Y.current=window.setTimeout(()=>ve(""),1e3))})(J),Pe&&setTimeout(()=>Pe.focus())};C.useEffect(()=>()=>window.clearTimeout(Y.current),[]),xb();const V=C.useCallback(ne=>ce.current===le.current?.side&&XH(ne,le.current?.area),[]);return y.jsx(DH,{scope:t,searchRef:ae,onItemEnter:C.useCallback(ne=>{V(ne)&&ne.preventDefault()},[V]),onItemLeave:C.useCallback(ne=>{V(ne)||($.current?.focus(),B(null))},[V]),onTriggerLeave:C.useCallback(ne=>{V(ne)&&ne.preventDefault()},[V]),pointerGraceTimerRef:se,onPointerGraceIntentChange:C.useCallback(ne=>{le.current=ne},[]),children:y.jsx(q,{...z,children:y.jsx(dy,{asChild:!0,trapped:i,onMountAutoFocus:Fe(s,ne=>{ne.preventDefault(),$.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:y.jsx(uy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:v,onDismiss:b,children:y.jsx(L4,{asChild:!0,...R,dir:P.dir,orientation:"vertical",loop:r,currentTabStopId:L,onCurrentTabStopIdChange:B,onEntryFocus:Fe(d,ne=>{P.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Qk,{role:"menu","aria-orientation":"vertical","data-state":NT(E.open),"data-radix-menu-content":"",dir:P.dir,...M,...x,ref:W,style:{outline:"none",...x.style},onKeyDown:Fe(x.onKeyDown,ne=>{const F=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,ie=ne.ctrlKey||ne.altKey||ne.metaKey,pe=ne.key.length===1;F&&(ne.key==="Tab"&&ne.preventDefault(),!ie&&pe&&te(ne.key));const Te=$.current;if(ne.target!==Te||!AH.includes(ne.key))return;ne.preventDefault();const Pe=O().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);fT.includes(ne.key)&&Pe.reverse(),qH(Pe)}),onBlur:Fe(n.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(Y.current),ae.current="")}),onPointerMove:Fe(n.onPointerMove,Xp(ne=>{const J=ne.target,F=me.current!==ne.clientX;if(ne.currentTarget.contains(J)&&F){const ie=ne.clientX>me.current?"right":"left";ce.current=ie,me.current=ne.clientX}}))})})})})})})});wT.displayName=Zi;var jH="MenuGroup",jb=C.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"group",...r,ref:e})});jb.displayName=jH;var FH="MenuLabel",_T=C.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{...r,ref:e})});_T.displayName=FH;var Uv="MenuItem",f1="menu.itemSelect",_y=C.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...i}=n,s=C.useRef(null),a=hm(Uv,n.__scopeMenu),l=Nb(Uv,n.__scopeMenu),d=xt(e,s),h=C.useRef(!1),f=()=>{const g=s.current;if(!t&&g){const v=new CustomEvent(f1,{bubbles:!0,cancelable:!0});g.addEventListener(f1,b=>r?.(b),{once:!0}),Ak(g,v),v.defaultPrevented?h.current=!1:a.onClose()}};return y.jsx(bT,{...i,ref:d,disabled:t,onClick:Fe(n.onClick,f),onPointerDown:g=>{n.onPointerDown?.(g),h.current=!0},onPointerUp:Fe(n.onPointerUp,g=>{h.current||g.currentTarget?.click()}),onKeyDown:Fe(n.onKeyDown,g=>{const v=l.searchRef.current!=="";t||v&&g.key===" "||p_.includes(g.key)&&(g.currentTarget.click(),g.preventDefault())})})});_y.displayName=Uv;var bT=C.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:i,...s}=n,a=Nb(Uv,t),l=mT(t),d=C.useRef(null),h=xt(e,d),[f,g]=C.useState(!1),[v,b]=C.useState("");return C.useEffect(()=>{const S=d.current;S&&b((S.textContent??"").trim())},[s.children]),y.jsx(Yp.ItemSlot,{scope:t,disabled:r,textValue:i??v,children:y.jsx(j4,{asChild:!0,...l,focusable:!r,children:y.jsx(nt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:h,onPointerMove:Fe(n.onPointerMove,Xp(S=>{r?a.onItemLeave(S):(a.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(n.onPointerLeave,Xp(S=>a.onItemLeave(S))),onFocus:Fe(n.onFocus,()=>g(!0)),onBlur:Fe(n.onBlur,()=>g(!1))})})})}),BH="MenuCheckboxItem",xT=C.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...i}=n;return y.jsx(kT,{scope:n.__scopeMenu,checked:t,children:y.jsx(_y,{role:"menuitemcheckbox","aria-checked":Vv(t)?"mixed":t,...i,ref:e,"data-state":Bb(t),onSelect:Fe(i.onSelect,()=>r?.(Vv(t)?!0:!t),{checkForDefaultPrevented:!1})})})});xT.displayName=BH;var ST="MenuRadioGroup",[$H,UH]=uu(ST,{value:void 0,onValueChange:()=>{}}),AT=C.forwardRef((n,e)=>{const{value:t,onValueChange:r,...i}=n,s=Jn(r);return y.jsx($H,{scope:n.__scopeMenu,value:t,onValueChange:s,children:y.jsx(jb,{...i,ref:e})})});AT.displayName=ST;var CT="MenuRadioItem",ET=C.forwardRef((n,e)=>{const{value:t,...r}=n,i=UH(CT,n.__scopeMenu),s=t===i.value;return y.jsx(kT,{scope:n.__scopeMenu,checked:s,children:y.jsx(_y,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Bb(s),onSelect:Fe(r.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});ET.displayName=CT;var Fb="MenuItemIndicator",[kT,VH]=uu(Fb,{checked:!1}),TT=C.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...i}=n,s=VH(Fb,t);return y.jsx(Ti,{present:r||Vv(s.checked)||s.checked===!0,children:y.jsx(nt.span,{...i,ref:e,"data-state":Bb(s.checked)})})});TT.displayName=Fb;var zH="MenuSeparator",PT=C.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return y.jsx(nt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});PT.displayName=zH;var HH="MenuArrow",RT=C.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,i=wy(t);return y.jsx(Jk,{...i,...r,ref:e})});RT.displayName=HH;var WH="MenuSub",[E9,MT]=uu(WH),Sp="MenuSubTrigger",IT=C.forwardRef((n,e)=>{const t=du(Sp,n.__scopeMenu),r=hm(Sp,n.__scopeMenu),i=MT(Sp,n.__scopeMenu),s=Nb(Sp,n.__scopeMenu),a=C.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=s,h={__scopeMenu:n.__scopeMenu},f=C.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return C.useEffect(()=>f,[f]),C.useEffect(()=>{const g=l.current;return()=>{window.clearTimeout(g),d(null)}},[l,d]),y.jsx(Db,{asChild:!0,...h,children:y.jsx(bT,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":NT(t.open),...n,ref:ly(e,i.onTriggerChange),onClick:g=>{n.onClick?.(g),!(n.disabled||g.defaultPrevented)&&(g.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Fe(n.onPointerMove,Xp(g=>{s.onItemEnter(g),!g.defaultPrevented&&!n.disabled&&!t.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Fe(n.onPointerLeave,Xp(g=>{f();const v=t.content?.getBoundingClientRect();if(v){const b=t.content?.dataset.side,S=b==="right",x=S?-5:5,E=v[S?"left":"right"],P=v[S?"right":"left"];s.onPointerGraceIntentChange({area:[{x:g.clientX+x,y:g.clientY},{x:E,y:v.top},{x:P,y:v.top},{x:P,y:v.bottom},{x:E,y:v.bottom}],side:b}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(g),g.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(n.onKeyDown,g=>{const v=s.searchRef.current!=="";n.disabled||v&&g.key===" "||CH[r.dir].includes(g.key)&&(t.onOpenChange(!0),t.content?.focus(),g.preventDefault())})})})});IT.displayName=Sp;var DT="MenuSubContent",OT=C.forwardRef((n,e)=>{const t=vT(Zi,n.__scopeMenu),{forceMount:r=t.forceMount,...i}=n,s=du(Zi,n.__scopeMenu),a=hm(Zi,n.__scopeMenu),l=MT(DT,n.__scopeMenu),d=C.useRef(null),h=xt(e,d);return y.jsx(Yp.Provider,{scope:n.__scopeMenu,children:y.jsx(Ti,{present:r||s.open,children:y.jsx(Yp.Slot,{scope:n.__scopeMenu,children:y.jsx(Lb,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:h,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{a.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Fe(n.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Fe(n.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:Fe(n.onKeyDown,f=>{const g=f.currentTarget.contains(f.target),v=EH[a.dir].includes(f.key);g&&v&&(s.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});OT.displayName=DT;function NT(n){return n?"open":"closed"}function Vv(n){return n==="indeterminate"}function Bb(n){return Vv(n)?"indeterminate":n?"checked":"unchecked"}function qH(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function GH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function KH(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let a=GH(n,Math.max(s,0));i.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function YH(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const l=e[s],d=e[a],h=l.x,f=l.y,g=d.x,v=d.y;f>r!=v>r&&t<(g-h)*(r-f)/(v-f)+h&&(i=!i)}return i}function XH(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return YH(t,e)}function Xp(n){return e=>e.pointerType==="mouse"?n(e):void 0}var QH=gT,JH=Db,ZH=yT,eW=wT,tW=jb,nW=_T,rW=_y,iW=xT,sW=AT,oW=ET,aW=TT,lW=PT,cW=RT,uW=IT,dW=OT,by="DropdownMenu",[hW,k9]=xo(by,[pT]),jr=pT(),[fW,LT]=hW(by),jT=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:l=!0}=n,d=jr(e),h=C.useRef(null),[f,g]=Sh({prop:i,defaultProp:s??!1,onChange:a,caller:by});return y.jsx(fW,{scope:e,triggerId:wa(),triggerRef:h,contentId:wa(),open:f,onOpenChange:g,onOpenToggle:C.useCallback(()=>g(v=>!v),[g]),modal:l,children:y.jsx(QH,{...d,open:f,onOpenChange:g,dir:r,modal:l,children:t})})};jT.displayName=by;var FT="DropdownMenuTrigger",BT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...i}=n,s=LT(FT,t),a=jr(t);return y.jsx(JH,{asChild:!0,...a,children:y.jsx(nt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:ly(e,s.triggerRef),onPointerDown:Fe(n.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Fe(n.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});BT.displayName=FT;var pW="DropdownMenuPortal",$T=n=>{const{__scopeDropdownMenu:e,...t}=n,r=jr(e);return y.jsx(ZH,{...r,...t})};$T.displayName=pW;var UT="DropdownMenuContent",VT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=LT(UT,t),s=jr(t),a=C.useRef(!1);return y.jsx(eW,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Fe(n.onCloseAutoFocus,l=>{a.current||i.triggerRef.current?.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:Fe(n.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VT.displayName=UT;var mW="DropdownMenuGroup",zT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(tW,{...i,...r,ref:e})});zT.displayName=mW;var gW="DropdownMenuLabel",HT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(nW,{...i,...r,ref:e})});HT.displayName=gW;var vW="DropdownMenuItem",WT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(rW,{...i,...r,ref:e})});WT.displayName=vW;var yW="DropdownMenuCheckboxItem",qT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(iW,{...i,...r,ref:e})});qT.displayName=yW;var wW="DropdownMenuRadioGroup",_W=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(sW,{...i,...r,ref:e})});_W.displayName=wW;var bW="DropdownMenuRadioItem",GT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(oW,{...i,...r,ref:e})});GT.displayName=bW;var xW="DropdownMenuItemIndicator",KT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(aW,{...i,...r,ref:e})});KT.displayName=xW;var SW="DropdownMenuSeparator",YT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(lW,{...i,...r,ref:e})});YT.displayName=SW;var AW="DropdownMenuArrow",CW=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(cW,{...i,...r,ref:e})});CW.displayName=AW;var EW="DropdownMenuSubTrigger",XT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(uW,{...i,...r,ref:e})});XT.displayName=EW;var kW="DropdownMenuSubContent",QT=C.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,i=jr(t);return y.jsx(dW,{...i,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});QT.displayName=kW;var TW=jT,PW=BT,RW=$T,JT=VT,MW=zT,ZT=HT,eP=WT,tP=qT,nP=GT,rP=KT,iP=YT,sP=XT,oP=QT;const IW=TW,DW=PW,p1=MW,OW=ot.forwardRef(({className:n,inset:e,children:t,...r},i)=>y.jsxs(sP,{ref:i,className:ut("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,y.jsx(lk,{className:"ml-auto h-4 w-4"})]}));OW.displayName=sP.displayName;const NW=ot.forwardRef(({className:n,...e},t)=>y.jsx(oP,{ref:t,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));NW.displayName=oP.displayName;const aP=ot.forwardRef(({className:n,sideOffset:e=4,...t},r)=>y.jsx(RW,{children:y.jsx(JT,{ref:r,sideOffset:e,className:ut("z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));aP.displayName=JT.displayName;const Ts=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(eP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));Ts.displayName=eP.displayName;const LW=ot.forwardRef(({className:n,children:e,checked:t,...r},i)=>y.jsxs(tP,{ref:i,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(rP,{children:y.jsx(pb,{className:"h-4 w-4"})})}),e]}));LW.displayName=tP.displayName;const jW=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(nP,{ref:r,className:ut("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(rP,{children:y.jsx(WU,{className:"h-2 w-2 fill-current"})})}),e]}));jW.displayName=nP.displayName;const m_=ot.forwardRef(({className:n,inset:e,...t},r)=>y.jsx(ZT,{ref:r,className:ut("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));m_.displayName=ZT.displayName;const xv=ot.forwardRef(({className:n,...e},t)=>y.jsx(iP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));xv.displayName=iP.displayName;var xw={exports:{}},Sw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function FW(){if(m1)return Sw;m1=1;var n=Yv();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(g,v){var b=v(),S=r({inst:{value:b,getSnapshot:v}}),x=S[0].inst,E=S[1];return s(function(){x.value=b,x.getSnapshot=v,d(x)&&E({inst:x})},[g,b,v]),i(function(){return d(x)&&E({inst:x}),g(function(){d(x)&&E({inst:x})})},[g]),a(b),b}function d(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!t(g,b)}catch{return!0}}function h(g,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return Sw.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Sw}var g1;function BW(){return g1||(g1=1,xw.exports=FW()),xw.exports}var $W=BW();function UW(){return $W.useSyncExternalStore(VW,()=>!0,()=>!1)}function VW(){return()=>{}}var $b="Avatar",[zW,T9]=xo($b),[HW,lP]=zW($b),cP=C.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[i,s]=C.useState("idle");return y.jsx(HW,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:y.jsx(nt.span,{...r,ref:e})})});cP.displayName=$b;var uP="AvatarImage",dP=C.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:i=()=>{},...s}=n,a=lP(uP,t),l=WW(r,s),d=Jn(h=>{i(h),a.onImageLoadingStatusChange(h)});return Rn(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?y.jsx(nt.img,{...s,ref:e,src:r}):null});dP.displayName=uP;var hP="AvatarFallback",fP=C.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...i}=n,s=lP(hP,t),[a,l]=C.useState(r===void 0);return C.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),a&&s.imageLoadingStatus!=="loaded"?y.jsx(nt.span,{...i,ref:e}):null});fP.displayName=hP;function v1(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function WW(n,{referrerPolicy:e,crossOrigin:t}){const r=UW(),i=C.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[a,l]=C.useState(()=>v1(s,n));return Rn(()=>{l(v1(s,n))},[s,n]),Rn(()=>{const d=g=>()=>{l(g)};if(!s)return;const h=d("loaded"),f=d("error");return s.addEventListener("load",h),s.addEventListener("error",f),e&&(s.referrerPolicy=e),typeof t=="string"&&(s.crossOrigin=t),()=>{s.removeEventListener("load",h),s.removeEventListener("error",f)}},[s,t,e]),a}var pP=cP,mP=dP,gP=fP;const Qp=ot.forwardRef(({className:n,...e},t)=>y.jsx(pP,{ref:t,className:ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));Qp.displayName=pP.displayName;const Jp=ot.forwardRef(({className:n,...e},t)=>y.jsx(mP,{ref:t,className:ut("aspect-square h-full w-full object-cover",n),...e}));Jp.displayName=mP.displayName;const Zp=ot.forwardRef(({className:n,...e},t)=>y.jsx(gP,{ref:t,className:ut("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));Zp.displayName=gP.displayName;const qW=({icon:n,active:e,onClick:t,label:r})=>y.jsxs("button",{onClick:t,className:`flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16
      ${e?"text-primary-foreground scale-110":"text-muted-foreground hover:text-foreground hover:scale-105"}`,style:e?{color:"hsl(var(--primary-foreground))"}:{},"aria-label":r,children:[y.jsx("div",{className:"relative w-6 h-6 mb-0.5 flex items-center justify-center",children:y.jsx(n,{className:`w-6 h-6 transition-all duration-200 ${e?"drop-shadow-md":""}`})}),y.jsx("span",{className:"text-[10px] font-medium transition-opacity duration-200 opacity-100",children:r})]}),vP=C.forwardRef(({activeTab:n,setActiveTab:e},t)=>{const{user:r,logout:i,settings:s,isFeatureEnabled:a}=ki(),l=Ph(),{toast:d}=js(),h=E=>{e(E),l(`/${E}`)},f=async()=>{try{await i(),l("/login")}catch(E){console.error("Erro no Logout:",E.message)}},g=()=>{window.handlePWAInstall?window.handlePWAInstall():d({title:"Instalação não disponível",description:"A funcionalidade de instalação não está pronta. Tente mais tarde.",variant:"destructive"})},v=s?.profile_photo||r?.user_metadata?.avatar_url,b=s?.user_name||r?.user_metadata?.full_name||"Usuário",S=E=>{const P=E.split(" ");return P.length===1?P[0].charAt(0).toUpperCase():`${P[0].charAt(0)}${P[P.length-1].charAt(0)}`.toUpperCase()},x=[{id:"dashboard",icon:YU,label:"Início"},{id:"workflow",icon:s_,label:"Trabalhos"},{id:"clients",icon:pk,label:"Clientes"},{id:"financial",icon:qp,label:"Caixa"}];return y.jsxs(ur.nav,{ref:t,initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:200,damping:30},className:"fixed bottom-0 left-0 right-0 bg-card/80 dark:bg-card/70 backdrop-blur-xl border-t border-border/70 shadow-top-lg z-[450] flex items-center justify-around px-1",style:{paddingTop:"0.5rem",paddingBottom:"calc(0.5rem + env(safe-area-inset-bottom))",height:"auto"},children:[x.map(E=>y.jsx(qW,{icon:E.icon,active:n===E.id,onClick:()=>h(E.id),label:E.label},E.id)),y.jsxs(IW,{children:[y.jsx(DW,{asChild:!0,children:y.jsxs("button",{className:"flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ease-in-out w-16 h-16 text-muted-foreground hover:text-foreground hover:scale-105","aria-label":"Mais opções",children:[y.jsxs(Qp,{className:"w-6 h-6 border-2 border-primary/70",children:[y.jsx(Jp,{src:v,alt:b}),y.jsx(Zp,{className:"bg-muted text-sm font-bold",children:S(b)})]}),y.jsx("span",{className:"text-[10px] font-medium opacity-100",children:"Menu"})]})}),y.jsxs(aP,{side:"top",align:"end",className:"mb-2 w-64 bg-popover/80 dark:bg-popover/70 backdrop-blur-md shadow-lg",style:{marginBottom:"calc(0.5rem + env(safe-area-inset-bottom))"},children:[y.jsx(m_,{className:"font-normal",children:y.jsxs("div",{className:"flex flex-col space-y-1",children:[y.jsx("p",{className:"text-sm font-medium leading-none",children:b}),y.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),y.jsx(xv,{}),y.jsxs(p1,{children:[y.jsxs(Ts,{onClick:()=>h("referrals"),className:"text-green-500 focus:bg-green-500/10 focus:text-green-500",children:[y.jsx(mb,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Indique e Ganhe"})]}),a("agenda_pro")&&y.jsxs(Ts,{onClick:()=>h("calendar"),children:[y.jsx(ak,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Agenda"})]}),a("quadros")&&y.jsxs(Ts,{onClick:()=>h("quadros"),children:[y.jsx(fk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Quadros"})]}),a("relatorios")&&y.jsxs(Ts,{onClick:()=>h("reports"),children:[y.jsx(sk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Relatórios"})]})]}),y.jsx(xv,{}),y.jsxs(p1,{children:[y.jsx(m_,{children:"Ferramentas"}),a("precifique")&&y.jsxs(Ts,{onClick:()=>h("precifique"),children:[y.jsx(Hp,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Precificar"})]}),a("reserva_inteligente")&&y.jsxs(Ts,{onClick:()=>h("reserva-inteligente"),children:[y.jsx(vb,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Reserva Inteligente"})]}),a("meu_setup")&&y.jsxs(Ts,{onClick:()=>h("my-setup"),children:[y.jsx(uk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Meu Setup"})]})]}),y.jsx(xv,{}),y.jsxs(Ts,{onClick:g,children:[y.jsx(qU,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Baixar aplicativo"})]}),y.jsxs(Ts,{onClick:()=>h("settings"),children:[y.jsx(hk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Configurações"})]}),y.jsxs(Ts,{onClick:f,className:"text-destructive focus:bg-destructive/10 focus:text-destructive",children:[y.jsx(dk,{className:"mr-2 h-4 w-4"}),y.jsx("span",{children:"Sair"})]})]})]})]})});vP.displayName="BottomNavBar";const Ut=()=>y.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-background/80 backdrop-blur-sm",children:[y.jsx(ur.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:y.jsx(Wp,{className:"h-12 w-12 text-primary animate-spin"})}),y.jsx("p",{className:"mt-4 text-lg font-semibold text-foreground",children:"Carregando..."})]});function g_(n,[e,t]){return Math.min(t,Math.max(e,n))}function yP(n){const e=C.useRef({value:n,previous:n});return C.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var wP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GW="VisuallyHidden",KW=C.forwardRef((n,e)=>y.jsx(nt.span,{...n,ref:e,style:{...wP,...n.style}}));KW.displayName=GW;var YW=[" ","Enter","ArrowUp","ArrowDown"],XW=[" ","Enter"],tu="Select",[xy,Sy,QW]=bb(tu),[Oh,P9]=xo(tu,[QW,my]),Ay=my(),[JW,Dl]=Oh(tu),[ZW,e5]=Oh(tu),_P=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:g,disabled:v,required:b,form:S}=n,x=Ay(e),[E,P]=C.useState(null),[M,R]=C.useState(null),[O,L]=C.useState(!1),B=cy(h),[$,W]=Sh({prop:r,defaultProp:i??!1,onChange:s,caller:tu}),[Y,ae]=Sh({prop:a,defaultProp:l,onChange:d,caller:tu}),se=C.useRef(null),le=E?S||!!E.closest("form"):!0,[ce,me]=C.useState(new Set),q=Array.from(ce).map(z=>z.props.value).join(";");return y.jsx(Yk,{...x,children:y.jsxs(JW,{required:b,scope:e,trigger:E,onTriggerChange:P,valueNode:M,onValueNodeChange:R,valueNodeHasChildren:O,onValueNodeHasChildrenChange:L,contentId:wa(),value:Y,onValueChange:ae,open:$,onOpenChange:W,dir:B,triggerPointerDownPosRef:se,disabled:v,children:[y.jsx(xy.Provider,{scope:e,children:y.jsx(ZW,{scope:n.__scopeSelect,onNativeOptionAdd:C.useCallback(z=>{me(te=>new Set(te).add(z))},[]),onNativeOptionRemove:C.useCallback(z=>{me(te=>{const V=new Set(te);return V.delete(z),V})},[]),children:t})}),le?y.jsxs(VP,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:g,value:Y,onChange:z=>ae(z.target.value),disabled:v,form:S,children:[Y===void 0?y.jsx("option",{value:""}):null,Array.from(ce)]},q):null]})})};_P.displayName=tu;var bP="SelectTrigger",xP=C.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,s=Ay(t),a=Dl(bP,t),l=a.disabled||r,d=xt(e,a.onTriggerChange),h=Sy(t),f=C.useRef("touch"),[g,v,b]=HP(x=>{const E=h().filter(R=>!R.disabled),P=E.find(R=>R.value===a.value),M=WP(E,x,P);M!==void 0&&a.onValueChange(M.value)}),S=x=>{l||(a.onOpenChange(!0),b()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return y.jsx(Xk,{asChild:!0,...s,children:y.jsx(nt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":zP(a.value)?"":void 0,...i,ref:d,onClick:Fe(i.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&S(x)}),onPointerDown:Fe(i.onPointerDown,x=>{f.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(S(x),x.preventDefault())}),onKeyDown:Fe(i.onKeyDown,x=>{const E=g.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&v(x.key),!(E&&x.key===" ")&&YW.includes(x.key)&&(S(),x.preventDefault())})})})});xP.displayName=bP;var SP="SelectValue",AP=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:s,placeholder:a="",...l}=n,d=Dl(SP,t),{onValueNodeHasChildrenChange:h}=d,f=s!==void 0,g=xt(e,d.onValueNodeChange);return Rn(()=>{h(f)},[h,f]),y.jsx(nt.span,{...l,ref:g,style:{pointerEvents:"none"},children:zP(d.value)?y.jsx(y.Fragment,{children:a}):s})});AP.displayName=SP;var t5="SelectIcon",CP=C.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return y.jsx(nt.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});CP.displayName=t5;var n5="SelectPortal",EP=n=>y.jsx(gy,{asChild:!0,...n});EP.displayName=n5;var nu="SelectContent",kP=C.forwardRef((n,e)=>{const t=Dl(nu,n.__scopeSelect),[r,i]=C.useState();if(Rn(()=>{i(new DocumentFragment)},[]),!t.open){const s=r;return s?nm.createPortal(y.jsx(TP,{scope:n.__scopeSelect,children:y.jsx(xy.Slot,{scope:n.__scopeSelect,children:y.jsx("div",{children:n.children})})}),s):null}return y.jsx(PP,{...n,ref:e})});kP.displayName=nu;var Ps=10,[TP,Ol]=Oh(nu),r5="SelectContentImpl",i5=Zc("SelectContent.RemoveScroll"),PP=C.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:E,...P}=n,M=Dl(nu,t),[R,O]=C.useState(null),[L,B]=C.useState(null),$=xt(e,ve=>O(ve)),[W,Y]=C.useState(null),[ae,se]=C.useState(null),le=Sy(t),[ce,me]=C.useState(!1),q=C.useRef(!1);C.useEffect(()=>{if(R)return Ib(R)},[R]),xb();const z=C.useCallback(ve=>{const[Oe,...He]=le().map(Rt=>Rt.ref.current),[Ye]=He.slice(-1),st=document.activeElement;for(const Rt of ve)if(Rt===st||(Rt?.scrollIntoView({block:"nearest"}),Rt===Oe&&L&&(L.scrollTop=0),Rt===Ye&&L&&(L.scrollTop=L.scrollHeight),Rt?.focus(),document.activeElement!==st))return},[le,L]),te=C.useCallback(()=>z([W,R]),[z,W,R]);C.useEffect(()=>{ce&&te()},[ce,te]);const{onOpenChange:V,triggerPointerDownPosRef:ne}=M;C.useEffect(()=>{if(R){let ve={x:0,y:0};const Oe=Ye=>{ve={x:Math.abs(Math.round(Ye.pageX)-(ne.current?.x??0)),y:Math.abs(Math.round(Ye.pageY)-(ne.current?.y??0))}},He=Ye=>{ve.x<=10&&ve.y<=10?Ye.preventDefault():R.contains(Ye.target)||V(!1),document.removeEventListener("pointermove",Oe),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",Oe),document.addEventListener("pointerup",He,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Oe),document.removeEventListener("pointerup",He,{capture:!0})}}},[R,V,ne]),C.useEffect(()=>{const ve=()=>V(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[V]);const[J,F]=HP(ve=>{const Oe=le().filter(st=>!st.disabled),He=Oe.find(st=>st.ref.current===document.activeElement),Ye=WP(Oe,ve,He);Ye&&setTimeout(()=>Ye.ref.current.focus())}),ie=C.useCallback((ve,Oe,He)=>{const Ye=!q.current&&!He;(M.value!==void 0&&M.value===Oe||Ye)&&(Y(ve),Ye&&(q.current=!0))},[M.value]),pe=C.useCallback(()=>R?.focus(),[R]),Te=C.useCallback((ve,Oe,He)=>{const Ye=!q.current&&!He;(M.value!==void 0&&M.value===Oe||Ye)&&se(ve)},[M.value]),De=r==="popper"?v_:RP,Pe=De===v_?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:g,collisionBoundary:v,collisionPadding:b,sticky:S,hideWhenDetached:x,avoidCollisions:E}:{};return y.jsx(TP,{scope:t,content:R,viewport:L,onViewportChange:B,itemRefCallback:ie,selectedItem:W,onItemLeave:pe,itemTextRefCallback:Te,focusSelectedItem:te,selectedItemText:ae,position:r,isPositioned:ce,searchRef:J,children:y.jsx(yy,{as:i5,allowPinchZoom:!0,children:y.jsx(dy,{asChild:!0,trapped:M.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:Fe(i,ve=>{M.trigger?.focus({preventScroll:!0}),ve.preventDefault()}),children:y.jsx(uy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:y.jsx(De,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:ve=>ve.preventDefault(),...P,...Pe,onPlaced:()=>me(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:Fe(P.onKeyDown,ve=>{const Oe=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Oe&&ve.key.length===1&&F(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let Ye=le().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(Ye=Ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const st=ve.target,Rt=Ye.indexOf(st);Ye=Ye.slice(Rt+1)}setTimeout(()=>z(Ye)),ve.preventDefault()}})})})})})})});PP.displayName=r5;var s5="SelectItemAlignedPosition",RP=C.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,s=Dl(nu,t),a=Ol(nu,t),[l,d]=C.useState(null),[h,f]=C.useState(null),g=xt(e,$=>f($)),v=Sy(t),b=C.useRef(!1),S=C.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:P,focusSelectedItem:M}=a,R=C.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&h&&x&&E&&P){const $=s.trigger.getBoundingClientRect(),W=h.getBoundingClientRect(),Y=s.valueNode.getBoundingClientRect(),ae=P.getBoundingClientRect();if(s.dir!=="rtl"){const st=ae.left-W.left,Rt=Y.left-st,cn=$.left-Rt,Yt=$.width+cn,Fr=Math.max(Yt,W.width),Bs=window.innerWidth-Ps,Mn=g_(Rt,[Ps,Math.max(Ps,Bs-Fr)]);l.style.minWidth=Yt+"px",l.style.left=Mn+"px"}else{const st=W.right-ae.right,Rt=window.innerWidth-Y.right-st,cn=window.innerWidth-$.right-Rt,Yt=$.width+cn,Fr=Math.max(Yt,W.width),Bs=window.innerWidth-Ps,Mn=g_(Rt,[Ps,Math.max(Ps,Bs-Fr)]);l.style.minWidth=Yt+"px",l.style.right=Mn+"px"}const se=v(),le=window.innerHeight-Ps*2,ce=x.scrollHeight,me=window.getComputedStyle(h),q=parseInt(me.borderTopWidth,10),z=parseInt(me.paddingTop,10),te=parseInt(me.borderBottomWidth,10),V=parseInt(me.paddingBottom,10),ne=q+z+ce+V+te,J=Math.min(E.offsetHeight*5,ne),F=window.getComputedStyle(x),ie=parseInt(F.paddingTop,10),pe=parseInt(F.paddingBottom,10),Te=$.top+$.height/2-Ps,De=le-Te,Pe=E.offsetHeight/2,ve=E.offsetTop+Pe,Oe=q+z+ve,He=ne-Oe;if(Oe<=Te){const st=se.length>0&&E===se[se.length-1].ref.current;l.style.bottom="0px";const Rt=h.clientHeight-x.offsetTop-x.offsetHeight,cn=Math.max(De,Pe+(st?pe:0)+Rt+te),Yt=Oe+cn;l.style.height=Yt+"px"}else{const st=se.length>0&&E===se[0].ref.current;l.style.top="0px";const cn=Math.max(Te,q+x.offsetTop+(st?ie:0)+Pe)+He;l.style.height=cn+"px",x.scrollTop=Oe-Te+x.offsetTop}l.style.margin=`${Ps}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=le+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[v,s.trigger,s.valueNode,l,h,x,E,P,s.dir,r]);Rn(()=>R(),[R]);const[O,L]=C.useState();Rn(()=>{h&&L(window.getComputedStyle(h).zIndex)},[h]);const B=C.useCallback($=>{$&&S.current===!0&&(R(),M?.(),S.current=!1)},[R,M]);return y.jsx(a5,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:B,children:y.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:y.jsx(nt.div,{...i,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});RP.displayName=s5;var o5="SelectPopperPosition",v_=C.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=Ps,...s}=n,a=Ay(t);return y.jsx(Qk,{...a,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});v_.displayName=o5;var[a5,Ub]=Oh(nu,{}),y_="SelectViewport",MP=C.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,s=Ol(y_,t),a=Ub(y_,t),l=xt(e,s.onViewportChange),d=C.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(xy.Slot,{scope:t,children:y.jsx(nt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Fe(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:v}=a;if(v?.current&&g){const b=Math.abs(d.current-f.scrollTop);if(b>0){const S=window.innerHeight-Ps*2,x=parseFloat(g.style.minHeight),E=parseFloat(g.style.height),P=Math.max(x,E);if(P<S){const M=P+b,R=Math.min(S,M),O=M-R;g.style.height=R+"px",g.style.bottom==="0px"&&(f.scrollTop=O>0?O:0,g.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});MP.displayName=y_;var IP="SelectGroup",[l5,c5]=Oh(IP),u5=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=wa();return y.jsx(l5,{scope:t,id:i,children:y.jsx(nt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});u5.displayName=IP;var DP="SelectLabel",OP=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=c5(DP,t);return y.jsx(nt.div,{id:i.id,...r,ref:e})});OP.displayName=DP;var zv="SelectItem",[d5,NP]=Oh(zv),LP=C.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:s,...a}=n,l=Dl(zv,t),d=Ol(zv,t),h=l.value===r,[f,g]=C.useState(s??""),[v,b]=C.useState(!1),S=xt(e,M=>d.itemRefCallback?.(M,r,i)),x=wa(),E=C.useRef("touch"),P=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(d5,{scope:t,value:r,disabled:i,textId:x,isSelected:h,onItemTextChange:C.useCallback(M=>{g(R=>R||(M?.textContent??"").trim())},[]),children:y.jsx(xy.ItemSlot,{scope:t,value:r,disabled:i,textValue:f,children:y.jsx(nt.div,{role:"option","aria-labelledby":x,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:S,onFocus:Fe(a.onFocus,()=>b(!0)),onBlur:Fe(a.onBlur,()=>b(!1)),onClick:Fe(a.onClick,()=>{E.current!=="mouse"&&P()}),onPointerUp:Fe(a.onPointerUp,()=>{E.current==="mouse"&&P()}),onPointerDown:Fe(a.onPointerDown,M=>{E.current=M.pointerType}),onPointerMove:Fe(a.onPointerMove,M=>{E.current=M.pointerType,i?d.onItemLeave?.():E.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(a.onPointerLeave,M=>{M.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Fe(a.onKeyDown,M=>{d.searchRef?.current!==""&&M.key===" "||(XW.includes(M.key)&&P(),M.key===" "&&M.preventDefault())})})})})});LP.displayName=zv;var Ap="SelectItemText",jP=C.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...s}=n,a=Dl(Ap,t),l=Ol(Ap,t),d=NP(Ap,t),h=e5(Ap,t),[f,g]=C.useState(null),v=xt(e,P=>g(P),d.onItemTextChange,P=>l.itemTextRefCallback?.(P,d.value,d.disabled)),b=f?.textContent,S=C.useMemo(()=>y.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=h;return Rn(()=>(x(S),()=>E(S)),[x,E,S]),y.jsxs(y.Fragment,{children:[y.jsx(nt.span,{id:d.textId,...s,ref:v}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?nm.createPortal(s.children,a.valueNode):null]})});jP.displayName=Ap;var FP="SelectItemIndicator",BP=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return NP(FP,t).isSelected?y.jsx(nt.span,{"aria-hidden":!0,...r,ref:e}):null});BP.displayName=FP;var w_="SelectScrollUpButton",h5=C.forwardRef((n,e)=>{const t=Ol(w_,n.__scopeSelect),r=Ub(w_,n.__scopeSelect),[i,s]=C.useState(!1),a=xt(e,r.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollTop>0;s(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?y.jsx($P,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});h5.displayName=w_;var __="SelectScrollDownButton",f5=C.forwardRef((n,e)=>{const t=Ol(__,n.__scopeSelect),r=Ub(__,n.__scopeSelect),[i,s]=C.useState(!1),a=xt(e,r.onScrollButtonChange);return Rn(()=>{if(t.viewport&&t.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;s(f)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?y.jsx($P,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});f5.displayName=__;var $P=C.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,s=Ol("SelectScrollButton",t),a=C.useRef(null),l=Sy(t),d=C.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return C.useEffect(()=>()=>d(),[d]),Rn(()=>{l().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),y.jsx(nt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Fe(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Fe(i.onPointerMove,()=>{s.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Fe(i.onPointerLeave,()=>{d()})})}),p5="SelectSeparator",UP=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return y.jsx(nt.div,{"aria-hidden":!0,...r,ref:e})});UP.displayName=p5;var b_="SelectArrow",m5=C.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Ay(t),s=Dl(b_,t),a=Ol(b_,t);return s.open&&a.position==="popper"?y.jsx(Jk,{...i,...r,ref:e}):null});m5.displayName=b_;var g5="SelectBubbleInput",VP=C.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=C.useRef(null),s=xt(r,i),a=yP(e);return C.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&f){const g=new Event("change",{bubbles:!0});f.call(l,e),l.dispatchEvent(g)}},[a,e]),y.jsx(nt.select,{...t,style:{...wP,...t.style},ref:s,defaultValue:e})});VP.displayName=g5;function zP(n){return n===""||n===void 0}function HP(n){const e=Jn(n),t=C.useRef(""),r=C.useRef(0),i=C.useCallback(a=>{const l=t.current+a;e(l),function d(h){t.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),s=C.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,s]}function WP(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,s=t?n.indexOf(t):-1;let a=v5(n,Math.max(s,0));i.length===1&&(a=a.filter(h=>h!==t));const d=a.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function v5(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var y5=_P,qP=xP,w5=AP,_5=CP,b5=EP,GP=kP,x5=MP,KP=OP,YP=LP,S5=jP,A5=BP,XP=UP;const Is=y5,Ds=w5,Qi=C.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(qP,{ref:r,className:ut("flex h-10 w-full items-center justify-between rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),...t,children:[e,y.jsx(_5,{asChild:!0,children:y.jsx(zU,{className:"h-4 w-4 opacity-50"})})]}));Qi.displayName=qP.displayName;const Ji=C.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>y.jsx(b5,{children:y.jsx(GP,{ref:i,className:ut("relative z-[99999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-background dark:border-border",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:y.jsx(x5,{className:ut("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e})})}));Ji.displayName=GP.displayName;const C5=C.forwardRef(({className:n,...e},t)=>y.jsx(KP,{ref:t,className:ut("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));C5.displayName=KP.displayName;const nn=C.forwardRef(({className:n,children:e,...t},r)=>t.value===null||t.value===void 0||t.value===""?null:y.jsxs(YP,{ref:r,className:ut("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50","dark:focus:bg-accent",n),...t,children:[y.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(A5,{children:y.jsx(pb,{className:"h-4 w-4"})})}),y.jsx(S5,{children:e})]}));nn.displayName=YP.displayName;const E5=C.forwardRef(({className:n,...e},t)=>y.jsx(XP,{ref:t,className:ut("-mx-1 my-1 h-px bg-muted",n),...e}));E5.displayName=XP.displayName;const Vb=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Vb.displayName="Card";const zb=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex flex-col space-y-1.5 p-6",n),...e}));zb.displayName="CardHeader";const Hb=ot.forwardRef(({className:n,...e},t)=>y.jsx("h3",{ref:t,className:ut("text-2xl font-semibold leading-none tracking-tight",n),...e}));Hb.displayName="CardTitle";const Wb=ot.forwardRef(({className:n,...e},t)=>y.jsx("p",{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));Wb.displayName="CardDescription";const QP=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("p-6 pt-0",n),...e}));QP.displayName="CardContent";const qb=ot.forwardRef(({className:n,...e},t)=>y.jsx("div",{ref:t,className:ut("flex items-center p-6 pt-0",n),...e}));qb.displayName="CardFooter";const k5=({allocation:n,savingGoals:e,onConfirm:t,onDismiss:r})=>{const[i,s]=C.useState(""),[a,l]=C.useState(!0);C.useEffect(()=>{if(e&&e.length>0){const v=e.find(b=>b.nome_meta.toLowerCase().includes("emergência")||b.nome_meta.toLowerCase().includes("reserva"));v?s(v.id):e[0]?.id?s(e[0].id):s("")}else s("")},[e]);const d=()=>{i&&(t(i),l(!1))},h=()=>{r(),l(!1)};if(!a||!n)return null;const f=v=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v),g=e&&e.length>0;return y.jsx(ur.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50,transition:{duration:.2}},className:"fixed bottom-4 right-4 z-[101] w-full max-w-md",children:y.jsxs(Vb,{className:"shadow-2xl border-l-4 border-customPurple bg-card",children:[y.jsx(zb,{children:y.jsxs("div",{className:"flex items-center",children:[y.jsx(vb,{className:"w-8 h-8 mr-3 text-customPurple"}),y.jsxs("div",{children:[y.jsx(Hb,{className:"text-lg font-semibold text-foreground",children:"Alocar Reserva Financeira?"}),y.jsxs(Wb,{className:"text-sm text-muted-foreground",children:["Pagamento de ",f(n.transactionValue),' recebido para "',n.serviceName,'".']})]})]})}),y.jsxs(QP,{className:"space-y-3",children:[y.jsxs("p",{className:"text-base text-foreground",children:["Sugerimos guardar ",y.jsx("strong",{className:"text-customGreen",children:f(n.reserveAmount)}),"."]}),g?y.jsxs("div",{children:[y.jsx("label",{htmlFor:"goalSelect",className:"text-sm font-medium text-muted-foreground mb-1 block",children:"Escolha a meta de destino:"}),y.jsxs(Is,{value:i,onValueChange:s,disabled:!i,children:[y.jsx(Qi,{id:"goalSelect",className:"w-full bg-input border-border focus:border-customPurple",children:y.jsx(Ds,{placeholder:"Selecione uma meta..."})}),y.jsx(Ji,{children:e.filter(v=>v.id).map(v=>y.jsxs(nn,{value:v.id,children:[v.icone&&y.jsx("span",{className:"mr-2",children:v.icone}),v.nome_meta," (",f(v.saldo_atual),")"]},v.id))})]})]}):y.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:'Nenhuma meta de reserva encontrada. Crie uma em "Reserva Inteligente" para alocar.'})]}),y.jsxs(qb,{className:"flex justify-end space-x-3 pt-4",children:[y.jsxs(Vt,{variant:"outline",onClick:h,className:"text-muted-foreground hover:bg-accent",children:[y.jsx(aV,{className:"mr-2 h-4 w-4"})," Agora não"]}),y.jsxs(Vt,{onClick:d,disabled:!i||!g,className:"bg-customGreen hover:bg-customGreen/90 text-white",children:[y.jsx(VU,{className:"mr-2 h-4 w-4"})," Confirmar"]})]})]})})},T5=n=>{const e=Ph(),[t,r]=C.useState(n),[i,s]=C.useState({type:"all",period:"all"}),a=C.useCallback((l,d={type:"all",period:"all"})=>{s(d),r(l),e(`/${l}`,{replace:!0}),window.scrollTo(0,0)},[e]);return{activeTab:t,setActiveTab:a,initialFinancialFilter:i}},P5=()=>{const[n,e]=C.useState(window.innerWidth<768);return C.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),{isMobile:n}},Aw="gofotografo_trial_modal_shown_session",y1=[{element:"#dashboard-stat-card-netBalance",popover:{title:"Seu Saldo Geral",description:"Aqui você acompanha o valor total de todos os pagamentos que já recebeu de seus clientes.",side:"bottom",align:"start"}},{element:"#dashboard-stat-card-pendingToReceive",popover:{title:"Pagamentos a Receber",description:"Fique de olho nos valores que ainda entrarão no seu caixa. Essencial para seu planejamento!",side:"bottom",align:"start"}},{element:"#dashboard-chart-card-revenueExpensesChart",popover:{title:"Gráfico de Faturamento",description:"Acompanhe visualmente a performance do seu negócio com o gráfico de entradas e saídas.",side:"top",align:"start"}},{element:"#floating-action-button",popover:{title:"Menu de Navegação Rápida",description:"Clique aqui a qualquer momento para acessar as outras seções importantes, como Clientes, Trabalhos e Caixa.",side:"left",align:"start"}}],R5=n=>{const{user:e,settings:t,setSettings:r,trialDaysRemaining:i,planStatus:s,loadingAuth:a,loading:l}=ki(),{openModal:d,closeModal:h,openModals:f}=Zv(),g=Ls(),v=Ph(),{toast:b}=js(),[S,x]=C.useState(!1),[E,P]=C.useState(!1),M=C.useCallback((W=[],Y={})=>{const ae=new URLSearchParams(g.search);W.forEach(le=>ae.delete(le)),Object.entries(Y).forEach(([le,ce])=>{ce!=null?ae.set(le,String(ce)):ae.delete(le)});const se=ae.toString();v(`${g.pathname}${se?`?${se}`:""}`,{replace:!0})},[g.search,g.pathname,v]),R=C.useCallback(async()=>{if(e&&t&&t.has_completed_tour===!1)try{await r({...t,has_completed_tour:!0})}catch{b({title:"Erro",description:"Não foi possível salvar o status do tour.",variant:"destructive"})}},[e,t,r,b]),O=C.useCallback(()=>{if(typeof window.driver>"u"){b({title:"Erro no Tour",description:"Não foi possível iniciar o tour guiado.",variant:"destructive"}),R();return}const W=window.driver.js.driver,Y=W({showProgress:!0,nextBtnText:"Próximo →",prevBtnText:"← Anterior",doneBtnText:"Finalizar",steps:y1.map(ae=>({...ae,popover:{...ae.popover,onNextClick:()=>Y.moveNext(),onPrevClick:()=>Y.movePrevious(),onCloseClick:()=>{Y.destroy(),R()}}})),onDestroyStarted:()=>{const ae=Y.getActiveIndex?Y.getActiveIndex():-1,se=y1.length;(ae===-1||ae<se-1)&&R(),Y.destroy()},onHighlighted:ae=>{ae&&ae.node&&ae.node.scrollIntoView?ae.node.scrollIntoView({behavior:"smooth",block:"center"}):ae&&ae.target&&ae.target.scrollIntoView&&ae.target.scrollIntoView({behavior:"smooth",block:"center"})}});Y.drive()},[b,R]);return C.useEffect(()=>{new URLSearchParams(g.search).get("payment_status")==="success"&&(M(["payment_status","session_id"]),sessionStorage.removeItem(Aw))},[g,M]),C.useEffect(()=>{!a&&e&&s==="TRIAL"&&i>=0&&!sessionStorage.getItem(Aw)&&!f.trialInfoModal&&!n&&(x(!0),d("trialInfoModal"),sessionStorage.setItem(Aw,"true"))},[a,e,s,i,d,f,n]),C.useEffect(()=>{!a&&!l&&e&&t&&t.has_completed_tour===!1&&!f.trialInfoModal&&!f.welcomeTourModal&&!n&&(P(!0),d("welcomeTourModal"))},[a,l,e,t,d,f,n]),{showTrialInfoModal:S,handleCloseTrialInfoModal:()=>{x(!1),h("trialInfoModal")},showWelcomeTourModal:E,handleStartWelcomeTour:()=>{P(!1),h("welcomeTourModal"),O()},handleDeclineWelcomeTour:()=>{P(!1),h("welcomeTourModal"),R()},trialDaysRemainingFromHook:i}};let av;const M5=new Uint8Array(16);function I5(){if(!av&&(av=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!av))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return av(M5)}const ar=[];for(let n=0;n<256;++n)ar.push((n+256).toString(16).slice(1));function D5(n,e=0){return ar[n[e+0]]+ar[n[e+1]]+ar[n[e+2]]+ar[n[e+3]]+"-"+ar[n[e+4]]+ar[n[e+5]]+"-"+ar[n[e+6]]+ar[n[e+7]]+"-"+ar[n[e+8]]+ar[n[e+9]]+"-"+ar[n[e+10]]+ar[n[e+11]]+ar[n[e+12]]+ar[n[e+13]]+ar[n[e+14]]+ar[n[e+15]]}const O5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),w1={randomUUID:O5};function N5(n,e,t){if(w1.randomUUID&&!n)return w1.randomUUID();n=n||{};const r=n.random||(n.rng||I5)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,D5(r)}const JP=()=>{const{user:n,addClient:e,updateClient:t,getClientById:r}=ki(),{toast:i}=js(),{openModals:s,closeModal:a}=Zv(),{isOpen:l,clientId:d}=s.client||{},h=d?r(d):null,[f,g]=C.useState(!1),[v,b]=C.useState(null),[S,x]=C.useState(null),E=C.useRef(null),P=C.useCallback(()=>({name:"",email:"",phone:"",client_type:"Pessoa Física",status:"Ativo",cpf:"",cnpj:"",profile_photo_url:null}),[]),[M,R]=C.useState(P()),O=h?`client_form_draft_${h.id}`:"client_form_draft_new";C.useEffect(()=>{if(l){const se=localStorage.getItem(O);if(se)R(JSON.parse(se)),x(JSON.parse(se).profile_photo_url);else if(h){const le={name:h.name||"",email:h.email||"",phone:h.phone||"",client_type:h.client_type||"Pessoa Física",status:h.status||"Ativo",cpf:h.cpf||"",cnpj:h.cnpj||"",profile_photo_url:h.profile_photo_url||null};R(le),x(le.profile_photo_url)}else R(P()),x(null)}else b(null),x(null)},[h,l,O,P]),C.useEffect(()=>{l&&localStorage.setItem(O,JSON.stringify(M))},[M,l,O]);const L=se=>{const le=se.target.files[0];le&&(b(le),x(URL.createObjectURL(le)))},B=()=>{b(null),x(null),R(se=>({...se,profile_photo_url:null})),E.current&&(E.current.value="")},$=()=>{localStorage.removeItem(O),a("client")},W=se=>{if(!se)return"?";const le=se.split(" ");return le.length===1?le[0].charAt(0).toUpperCase():`${le[0].charAt(0)}${le[le.length-1].charAt(0)}`.toUpperCase()},Y=async se=>{if(se.preventDefault(),!M.name.trim()){i({title:"Erro de Validação",description:"O nome do cliente é obrigatório.",variant:"destructive"});return}g(!0);const le={...M};le.client_type==="Pessoa Física"?le.cnpj="":le.cpf="";try{let ce=M.profile_photo_url;if(v){const me=v.name.split(".").pop(),q=`${M.name.replace(/\s+/g,"_")}-${N5()}.${me}`,z=`public/${n.id}/client_photos/${q}`,{error:te}=await Se.storage.from("user_assets").upload(z,v,{cacheControl:"3600",upsert:!0});if(te)throw te;const{data:V}=Se.storage.from("user_assets").getPublicUrl(z);ce=V.publicUrl}else M.profile_photo_url===null&&(ce=null);le.profile_photo_url=ce,h?(await t(h.id,le),i({title:"Cliente atualizado",description:"Cliente foi atualizado com sucesso!"})):(await e(le),i({title:"Cliente adicionado",description:"Novo cliente foi adicionado com sucesso!"})),localStorage.removeItem(O),$()}catch(ce){i({title:"Erro ao salvar",description:`Falha ao salvar cliente: ${ce.message}`,variant:"destructive"})}finally{g(!1)}},ae=(se,le)=>{R(ce=>{const me={...ce,[se]:le};return se==="client_type"&&(me.cpf="",me.cnpj=""),me})};return l?y.jsx(go,{children:l&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(ur.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.25,ease:"easeOut"},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-xl p-0 w-full max-w-md shadow-2xl max-h-[90vh] flex flex-col z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:h?"Editar Cliente":"Novo Cliente"}),y.jsx(Vt,{variant:"ghost",size:"icon",onClick:$,className:"w-8 h-8 text-muted-foreground hover:bg-accent",disabled:f,children:y.jsx(Mh,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:Y,className:"space-y-4 p-6 overflow-y-auto scrollbar-thin",children:[y.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[y.jsxs(Qp,{className:"w-24 h-24 text-3xl border-4 border-primary/20",children:[y.jsx(Jp,{src:S,alt:M.name}),y.jsx(Zp,{className:"bg-muted-foreground/20 text-foreground font-semibold",children:W(M.name)})]}),y.jsx("input",{type:"file",ref:E,onChange:L,accept:"image/png, image/jpeg",className:"hidden",disabled:f}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs(Vt,{type:"button",variant:"outline",size:"sm",onClick:()=>E.current?.click(),disabled:f,children:[y.jsx(UU,{className:"w-4 h-4 mr-2"}),S?"Alterar Foto":"Adicionar Foto"]}),S&&y.jsxs(Vt,{type:"button",variant:"destructive",size:"sm",onClick:B,disabled:f,children:[y.jsx(wb,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(sV,{className:"w-4 h-4 inline mr-2"}),"Nome *"]}),y.jsx("input",{type:"text",value:M.name,onChange:se=>ae("name",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Nome do cliente",required:!0,disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(FA,{className:"w-4 h-4 inline mr-2"}),"Tipo de Cliente"]}),y.jsxs("select",{value:M.client_type,onChange:se=>ae("client_type",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:f,children:[y.jsx("option",{value:"Pessoa Física",children:"Pessoa Física"}),y.jsx("option",{value:"Pessoa Jurídica",children:"Pessoa Jurídica"})]})]}),M.client_type==="Pessoa Física"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(oV,{className:"w-4 h-4 inline mr-2"}),"CPF (Opcional)"]}),y.jsx("input",{type:"text",value:M.cpf,onChange:se=>ae("cpf",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"000.000.000-00",disabled:f})]}),M.client_type==="Pessoa Jurídica"&&y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(FA,{className:"w-4 h-4 inline mr-2"}),"CNPJ (Opcional)"]}),y.jsx("input",{type:"text",value:M.cnpj,onChange:se=>ae("cnpj",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"00.000.000/0000-00",disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(JU,{className:"w-4 h-4 inline mr-2"}),"Email (Opcional)"]}),y.jsx("input",{type:"email",value:M.email,onChange:se=>ae("email",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"email@exemplo.com",disabled:f})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:[y.jsx(tV,{className:"w-4 h-4 inline mr-2"}),"Telefone (Opcional)"]}),y.jsx("input",{type:"tel",value:M.phone,onChange:se=>ae("phone",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"+55 11 99999-9999",disabled:f})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1",children:"Status"}),y.jsxs("select",{value:M.status,onChange:se=>ae("status",se.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",disabled:f,children:[y.jsx("option",{value:"Ativo",children:"Ativo"}),y.jsx("option",{value:"Inativo",children:"Inativo"})]})]}),y.jsxs("div",{className:"flex space-x-3 pt-4",children:[y.jsx(Vt,{type:"button",variant:"outline",onClick:$,className:"flex-1",disabled:f,children:"Cancelar"}),y.jsx(Vt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:f,children:f?y.jsx(Wp,{className:"w-4 h-4 animate-spin"}):h?"Atualizar":"Adicionar"})]})]})]})})}):null},cr=C.forwardRef(({className:n,type:e,...t},r)=>y.jsx("input",{type:e,className:ut("flex h-10 w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:r,...t}));cr.displayName="Input";var L5="Label",ZP=C.forwardRef((n,e)=>y.jsx(nt.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));ZP.displayName=L5;var eR=ZP;const j5=Sk("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pn=ot.forwardRef(({className:n,...e},t)=>y.jsx(eR,{ref:t,className:ut(j5(),n),...e}));pn.displayName=eR.displayName;var Cy="Dialog",[tR,R9]=xo(Cy),[F5,Fs]=tR(Cy),nR=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=n,l=C.useRef(null),d=C.useRef(null),[h,f]=Sh({prop:r,defaultProp:i??!1,onChange:s,caller:Cy});return y.jsx(F5,{scope:e,triggerRef:l,contentRef:d,contentId:wa(),titleId:wa(),descriptionId:wa(),open:h,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(g=>!g),[f]),modal:a,children:t})};nR.displayName=Cy;var rR="DialogTrigger",iR=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Fs(rR,t),s=xt(e,i.triggerRef);return y.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Yb(i.open),...r,ref:s,onClick:Fe(n.onClick,i.onOpenToggle)})});iR.displayName=rR;var Gb="DialogPortal",[B5,sR]=tR(Gb,{forceMount:void 0}),oR=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,s=Fs(Gb,e);return y.jsx(B5,{scope:e,forceMount:t,children:C.Children.map(r,a=>y.jsx(Ti,{present:t||s.open,children:y.jsx(gy,{asChild:!0,container:i,children:a})}))})};oR.displayName=Gb;var Hv="DialogOverlay",aR=C.forwardRef((n,e)=>{const t=sR(Hv,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Fs(Hv,n.__scopeDialog);return s.modal?y.jsx(Ti,{present:r||s.open,children:y.jsx(U5,{...i,ref:e})}):null});aR.displayName=Hv;var $5=Zc("DialogOverlay.RemoveScroll"),U5=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Fs(Hv,t);return y.jsx(yy,{as:$5,allowPinchZoom:!0,shards:[i.contentRef],children:y.jsx(nt.div,{"data-state":Yb(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ru="DialogContent",lR=C.forwardRef((n,e)=>{const t=sR(ru,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,s=Fs(ru,n.__scopeDialog);return y.jsx(Ti,{present:r||s.open,children:s.modal?y.jsx(V5,{...i,ref:e}):y.jsx(z5,{...i,ref:e})})});lR.displayName=ru;var V5=C.forwardRef((n,e)=>{const t=Fs(ru,n.__scopeDialog),r=C.useRef(null),i=xt(e,t.contentRef,r);return C.useEffect(()=>{const s=r.current;if(s)return Ib(s)},[]),y.jsx(cR,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(n.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Fe(n.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&s.preventDefault()}),onFocusOutside:Fe(n.onFocusOutside,s=>s.preventDefault())})}),z5=C.forwardRef((n,e)=>{const t=Fs(ru,n.__scopeDialog),r=C.useRef(!1),i=C.useRef(!1);return y.jsx(cR,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{n.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||t.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{n.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;t.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),cR=C.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=n,l=Fs(ru,t),d=C.useRef(null),h=xt(e,d);return xb(),y.jsxs(y.Fragment,{children:[y.jsx(dy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:y.jsx(uy,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Yb(l.open),...a,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(H5,{titleId:l.titleId}),y.jsx(q5,{contentRef:d,descriptionId:l.descriptionId})]})]})}),Kb="DialogTitle",uR=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Fs(Kb,t);return y.jsx(nt.h2,{id:i.titleId,...r,ref:e})});uR.displayName=Kb;var dR="DialogDescription",hR=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Fs(dR,t);return y.jsx(nt.p,{id:i.descriptionId,...r,ref:e})});hR.displayName=dR;var fR="DialogClose",pR=C.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=Fs(fR,t);return y.jsx(nt.button,{type:"button",...r,ref:e,onClick:Fe(n.onClick,()=>i.onOpenChange(!1))})});pR.displayName=fR;function Yb(n){return n?"open":"closed"}var mR="DialogTitleWarning",[M9,gR]=WV(mR,{contentName:ru,titleName:Kb,docsSlug:"dialog"}),H5=({titleId:n})=>{const e=gR(mR),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},W5="DialogDescriptionWarning",q5=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${gR(W5).contentName}}.`;return C.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},G5=nR,I9=iR,K5=oR,vR=aR,yR=lR,wR=uR,_R=hR,bR=pR;const Y5=G5,X5=K5,D9=bR,xR=ot.forwardRef(({className:n,...e},t)=>y.jsx(vR,{ref:t,className:ut("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));xR.displayName=vR.displayName;const SR=ot.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(X5,{children:[y.jsx(xR,{}),y.jsxs(yR,{ref:r,className:ut("fixed left-[50%] top-[50%] z-[51] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/50 bg-background/70 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-xl",n),...t,children:[e,y.jsxs(bR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(Mh,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));SR.displayName=yR.displayName;const AR=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});AR.displayName="DialogHeader";const Q5=({className:n,...e})=>y.jsx("div",{className:ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Q5.displayName="DialogFooter";const CR=ot.forwardRef(({className:n,...e},t)=>y.jsx(wR,{ref:t,className:ut("text-lg font-semibold leading-none tracking-tight",n),...e}));CR.displayName=wR.displayName;const ER=ot.forwardRef(({className:n,...e},t)=>y.jsx(_R,{ref:t,className:ut("text-sm text-muted-foreground",n),...e}));ER.displayName=_R.displayName;const J5=({isOpen:n,onClose:e,type:t,transactionData:r,onSaveSuccess:i})=>{const{clients:s,addTransaction:a,updateTransaction:l,wallets:d}=ki(),{toast:h}=js(),[f,g]=C.useState(""),[v,b]=C.useState(""),[S,x]=C.useState(qc(new Date,"yyyy-MM-dd")),[E,P]=C.useState("PENDENTE"),[M,R]=C.useState(""),[O,L]=C.useState(""),[B,$]=C.useState(""),[W,Y]=C.useState(""),[ae,se]=C.useState(!1),le=C.useCallback(()=>{g(""),b(""),x(qc(new Date,"yyyy-MM-dd")),P("PENDENTE"),R(""),L(""),$(""),Y("")},[]);C.useEffect(()=>{n&&(r?(g(r.descricao||""),b(r.valor||""),x(r.data?qc(new Date(r.data),"yyyy-MM-dd"):qc(new Date,"yyyy-MM-dd")),P(r.status||"PENDENTE"),R(r.cliente_id||""),L(r.category||""),$(r.metodo_pagamento||""),Y(r.wallet_id||"")):le())},[r,n,le]);const ce=async z=>{if(z.preventDefault(),t==="ENTRADA"&&E==="PAGO"&&!W){h({title:"Erro de Validação",description:"Por favor, selecione a carteira que recebeu o pagamento.",variant:"destructive"});return}se(!0);const te={descricao:f,valor:parseFloat(v),data:S,tipo:t.toUpperCase(),status:E,cliente_id:M||null,category:O,metodo_pagamento:B,wallet_id:W||null};try{r?.id?(await l(r.id,te),h({title:"Sucesso!",description:"Lançamento atualizado."})):(await a(te),h({title:"Sucesso!",description:`Nova ${t.toLowerCase()} adicionada.`})),i&&i(),e()}catch(V){h({title:"Erro",description:`Não foi possível salvar: ${V.message}`,variant:"destructive"})}finally{se(!1)}},me=d?.filter(z=>z&&z.id&&z.name)||[],q=s?.filter(z=>z&&z.id&&z.name)||[];return y.jsx(go,{children:n&&y.jsx(Y5,{open:n,onOpenChange:e,children:y.jsx(SR,{children:y.jsxs(ur.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[y.jsxs(AR,{children:[y.jsxs(CR,{children:[r?.id?"Editar":"Novo"," Lançamento: ",t==="entrada"?"Entrada":"Saída"]}),y.jsx(ER,{children:"Preencha os detalhes abaixo."})]}),y.jsxs("form",{onSubmit:ce,className:"space-y-4 py-4",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"descricao",children:"Descrição"}),y.jsx(cr,{id:"descricao",value:f,onChange:z=>g(z.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"valor",children:"Valor (R$)"}),y.jsx(cr,{id:"valor",type:"number",value:v,onChange:z=>b(z.target.value),required:!0,step:"0.01"})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"data",children:"Data"}),y.jsx(cr,{id:"data",type:"date",value:S,onChange:z=>x(z.target.value),required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"status",children:"Status"}),y.jsxs(Is,{value:E,onValueChange:P,children:[y.jsx(Qi,{children:y.jsx(Ds,{})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"PENDENTE",children:"Pendente"}),y.jsx(nn,{value:"PAGO",children:"Pago"}),y.jsx(nn,{value:"ATRASADO",children:"Atrasado"}),y.jsx(nn,{value:"CANCELADO",children:"Cancelado"})]})]})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"cliente",children:"Cliente (Opcional)"}),y.jsxs(Is,{value:M||"",onValueChange:R,children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um cliente"})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"",children:"Nenhum"}),q.map(z=>y.jsx(nn,{value:z.id,children:z.name},z.id))]})]})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"categoria",children:"Categoria (Opcional)"}),y.jsx(cr,{id:"categoria",value:O,onChange:z=>L(z.target.value)})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"metodoPagamento",children:"Método de Pagamento (Opcional)"}),y.jsx(cr,{id:"metodoPagamento",value:B,onChange:z=>$(z.target.value)})]}),y.jsxs("div",{children:[y.jsxs(pn,{htmlFor:"wallet",className:"flex items-center",children:[y.jsx(qp,{className:"w-4 h-4 mr-2"}),"Carteira ",t==="ENTRADA"&&E==="PAGO"?"*":"(Opcional)"]}),me.length>0?y.jsxs(Is,{value:W||"",onValueChange:Y,required:t==="ENTRADA"&&E==="PAGO",children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione uma carteira"})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"",children:"Nenhuma"}),me.map(z=>y.jsx(nn,{value:z.id,children:y.jsxs("div",{className:"flex items-center",children:[z.icon_url&&y.jsx("img",{src:z.icon_url,alt:z.name,className:"w-4 h-4 mr-2 object-contain"}),z.name]})},z.id))]})]}):y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[y.jsx(Vt,{type:"button",variant:"ghost",onClick:e,disabled:ae,children:"Cancelar"}),y.jsx(Vt,{type:"submit",disabled:ae,children:ae?"Salvando...":"Salvar"})]})]})]})})})})},kR=ot.forwardRef(({className:n,...e},t)=>y.jsx("textarea",{className:ut("flex min-h-[80px] w-full rounded-lg border border-border bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:bg-background dark:border-border","focus:border-primary focus:ring-primary/50",n),ref:t,...e}));kR.displayName="Textarea";const lv=({label:n,selectedWallet:e,onWalletChange:t,wallets:r,required:i=!1})=>{const s=r?.filter(a=>a&&a.id&&a.name)||[];return s.length===0?y.jsxs("div",{className:"space-y-1",children:[y.jsxs(pn,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(qp,{className:"w-4 h-4 mr-2"}),n]}),y.jsxs("div",{className:"space-y-1 p-2 rounded-md border border-dashed bg-slate-50 dark:bg-slate-800/50",children:[y.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Nenhuma carteira cadastrada."}),y.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Crie uma em: Financeiro > Minhas Carteiras."})]})]}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs(pn,{htmlFor:`wallet-selector-${n.replace(/\s+/g,"-")}`,className:"flex items-center text-sm font-medium text-muted-foreground",children:[y.jsx(qp,{className:"w-4 h-4 mr-2"}),n," ",i&&"*"]}),y.jsxs(Is,{value:e||"",onValueChange:t,required:i,children:[y.jsx(Qi,{id:`wallet-selector-${n.replace(/\s+/g,"-")}`,children:y.jsx(Ds,{placeholder:"Selecione uma carteira"})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"",children:"Nenhuma"}),s.map(a=>y.jsx(nn,{value:a.id,children:y.jsxs("div",{className:"flex items-center",children:[a.icon_url&&y.jsx("img",{src:a.icon_url,alt:a.name,className:"w-4 h-4 mr-2 object-contain"}),a.name]})},a.id))]})]})]})},Z5=({card:n,onSave:e,onCancel:t,isSaving:r})=>{const{clients:i,servicePackages:s,settings:a,wallets:l}=ki(),{toast:d}=js(),[h,f]=C.useState({title:"",client_id:"",status:"agendado",value:"",description:"",date:"",time:"",service_package_id:"",payment_type:"SOMENTE_AGENDADO",entry_value:"",installments:"",payment_method:"",main_wallet_id:"",entry_wallet_id:""});C.useEffect(()=>{f(n?{title:n.title||"",client_id:n.client_id||"",status:n.status||"agendado",value:n.value||"",description:n.description||"",date:n.date?qc(PC(n.date),"yyyy-MM-dd"):"",time:n.time||"",service_package_id:n.service_package_id||"",payment_type:n.payment_type||"SOMENTE_AGENDADO",entry_value:n.entry_value||"",installments:n.installments||"",payment_method:n.payment_method||"",main_wallet_id:n.main_wallet_id||"",entry_wallet_id:n.entry_wallet_id||""}:P=>({...P,status:a?.workflow_columns?.[0]?.id||"agendado"}))},[n,a]);const g=P=>{const{name:M,value:R}=P.target;f(O=>({...O,[M]:R}))},v=(P,M)=>{f(R=>({...R,[P]:M}))},b=P=>{if(P.preventDefault(),h.payment_type!=="SOMENTE_AGENDADO"){if(h.payment_type==="integral"&&!h.main_wallet_id){d({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o pagamento integral.",variant:"destructive"});return}if(h.payment_type==="parcial"&&(!h.entry_wallet_id||!h.main_wallet_id)){d({title:"Campos obrigatórios",description:"Por favor, selecione as carteiras para a entrada e para o restante.",variant:"destructive"});return}if((h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&!h.main_wallet_id){d({title:"Campo obrigatório",description:"Por favor, selecione a carteira para o parcelamento.",variant:"destructive"});return}}e(h)},S=a?.workflow_columns?.filter(P=>P&&P.id&&P.title)||[],x=i?.filter(P=>P&&P.id&&P.name)||[],E=s?.filter(P=>P&&P.id&&P.name)||[];return y.jsxs("form",{onSubmit:b,id:"workflow-form",className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"title",children:"Título do Trabalho"}),y.jsx(cr,{id:"title",name:"title",value:h.title,onChange:g,required:!0})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"client_id",children:"Cliente"}),y.jsxs(Is,{name:"client_id",value:h.client_id||"",onValueChange:P=>v("client_id",P),children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um cliente"})}),y.jsx(Ji,{children:x.map(P=>y.jsx(nn,{value:P.id,children:P.name},P.id))})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"date",children:"Data"}),y.jsx(cr,{id:"date",name:"date",type:"date",value:h.date,onChange:g})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"time",children:"Hora"}),y.jsx(cr,{id:"time",name:"time",type:"time",value:h.time,onChange:g})]})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"status",children:"Status"}),y.jsxs(Is,{name:"status",value:h.status,onValueChange:P=>v("status",P),children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um status"})}),y.jsx(Ji,{children:S.map(P=>y.jsx(nn,{value:P.id,children:P.title},P.id))})]})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"service_package_id",children:"Pacote de Serviço (Opcional)"}),y.jsxs(Is,{name:"service_package_id",value:h.service_package_id||"",onValueChange:P=>v("service_package_id",P),children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um pacote"})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"",children:"Nenhum"}),E.map(P=>y.jsx(nn,{value:P.id,children:P.name},P.id))]})]})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"description",children:"Descrição"}),y.jsx(kR,{id:"description",name:"description",value:h.description,onChange:g})]}),y.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[y.jsxs("h3",{className:"font-semibold text-lg flex items-center",children:[y.jsx(Hp,{className:"w-5 h-5 mr-2"})," Detalhes Financeiros"]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"value",children:"Valor Total do Trabalho"}),y.jsx(cr,{id:"value",name:"value",type:"number",step:"0.01",value:h.value,onChange:g,placeholder:"Ex: 1500.00"})]}),y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"payment_type",children:"Forma de Pagamento"}),y.jsxs(Is,{name:"payment_type",value:h.payment_type,onValueChange:P=>v("payment_type",P),children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione a forma de pagamento"})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"SOMENTE_AGENDADO",children:"Apenas Agendamento"}),y.jsx(nn,{value:"integral",children:"Pagamento Integral"}),y.jsx(nn,{value:"parcial",children:"Pagamento Parcial (Entrada + Restante)"}),y.jsx(nn,{value:"parcelado_pix",children:"Parcelado no PIX"}),y.jsx(nn,{value:"parcelado_cartao",children:"Parcelado no Cartão"})]})]})]}),h.payment_type==="integral"&&y.jsx(lv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0}),h.payment_type==="parcial"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"entry_value",children:"Valor da Entrada"}),y.jsx(cr,{id:"entry_value",name:"entry_value",type:"number",step:"0.01",value:h.entry_value,onChange:g,placeholder:"Ex: 500.00"})]}),y.jsx(lv,{label:"Carteira da Entrada",selectedWallet:h.entry_wallet_id,onWalletChange:P=>v("entry_wallet_id",P),wallets:l,required:!0}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(lv,{label:"Carteira do Restante",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]}),(h.payment_type==="parcelado_pix"||h.payment_type==="parcelado_cartao")&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2",children:[y.jsxs("div",{children:[y.jsx(pn,{htmlFor:"installments",children:"Número de Parcelas"}),y.jsx(cr,{id:"installments",name:"installments",type:"number",step:"1",value:h.installments,onChange:g,placeholder:"Ex: 6"})]}),y.jsx("div",{className:"md:col-span-2",children:y.jsx(lv,{label:"Carteira para Recebimento",selectedWallet:h.main_wallet_id,onWalletChange:P=>v("main_wallet_id",P),wallets:l,required:!0})})]})]})]})};var Ey="Checkbox",[e6,O9]=xo(Ey),[t6,Xb]=e6(Ey);function n6(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:i,disabled:s,form:a,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:g}=n,[v,b]=Sh({prop:t,defaultProp:i??!1,onChange:d,caller:Ey}),[S,x]=C.useState(null),[E,P]=C.useState(null),M=C.useRef(!1),R=S?!!a||!!S.closest("form"):!0,O={checked:v,disabled:s,setChecked:b,control:S,setControl:x,name:l,form:a,value:f,hasConsumerStoppedPropagationRef:M,required:h,defaultChecked:Sl(i)?!1:i,isFormControl:R,bubbleInput:E,setBubbleInput:P};return y.jsx(t6,{scope:e,...O,children:r6(g)?g(O):r})}var TR="CheckboxTrigger",PR=C.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},i)=>{const{control:s,value:a,disabled:l,checked:d,required:h,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:b,bubbleInput:S}=Xb(TR,n),x=xt(i,f),E=C.useRef(d);return C.useEffect(()=>{const P=s?.form;if(P){const M=()=>g(E.current);return P.addEventListener("reset",M),()=>P.removeEventListener("reset",M)}},[s,g]),y.jsx(nt.button,{type:"button",role:"checkbox","aria-checked":Sl(d)?"mixed":d,"aria-required":h,"data-state":OR(d),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:x,onKeyDown:Fe(e,P=>{P.key==="Enter"&&P.preventDefault()}),onClick:Fe(t,P=>{g(M=>Sl(M)?!0:!M),S&&b&&(v.current=P.isPropagationStopped(),v.current||P.stopPropagation())})})});PR.displayName=TR;var Qb=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:i,defaultChecked:s,required:a,disabled:l,value:d,onCheckedChange:h,form:f,...g}=n;return y.jsx(n6,{__scopeCheckbox:t,checked:i,defaultChecked:s,disabled:l,required:a,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:v})=>y.jsxs(y.Fragment,{children:[y.jsx(PR,{...g,ref:e,__scopeCheckbox:t}),v&&y.jsx(DR,{__scopeCheckbox:t})]})})});Qb.displayName=Ey;var RR="CheckboxIndicator",MR=C.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...i}=n,s=Xb(RR,t);return y.jsx(Ti,{present:r||Sl(s.checked)||s.checked===!0,children:y.jsx(nt.span,{"data-state":OR(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...n.style}})})});MR.displayName=RR;var IR="CheckboxBubbleInput",DR=C.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:a,required:l,disabled:d,name:h,value:f,form:g,bubbleInput:v,setBubbleInput:b}=Xb(IR,n),S=xt(t,b),x=yP(s),E=Bk(r);C.useEffect(()=>{const M=v;if(!M)return;const R=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(R,"checked").set,B=!i.current;if(x!==s&&L){const $=new Event("click",{bubbles:B});M.indeterminate=Sl(s),L.call(M,Sl(s)?!1:s),M.dispatchEvent($)}},[v,x,s,i]);const P=C.useRef(Sl(s)?!1:s);return y.jsx(nt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??P.current,required:l,disabled:d,name:h,value:f,form:g,...e,tabIndex:-1,ref:S,style:{...e.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});DR.displayName=IR;function r6(n){return typeof n=="function"}function Sl(n){return n==="indeterminate"}function OR(n){return Sl(n)?"indeterminate":n?"checked":"unchecked"}const NR=C.forwardRef(({className:n,...e},t)=>y.jsx(Qb,{ref:t,className:ut("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...e,children:y.jsx(MR,{className:ut("flex items-center justify-center text-current"),children:y.jsx(pb,{className:"h-4 w-4"})})}));NR.displayName=Qb.displayName;const i6=({subtasks:n,onAddSubtask:e,onToggleSubtask:t,onDeleteSubtask:r,cardExists:i})=>{const[s,a]=C.useState(""),l=()=>{s.trim()&&(e(s),a(""))};return i?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(cr,{type:"text",placeholder:"Nova subtarefa...",value:s,onChange:d=>a(d.target.value),onKeyPress:d=>{d.key==="Enter"&&l()},className:"flex-grow"}),y.jsxs(Vt,{onClick:l,children:[y.jsx(yb,{className:"w-4 h-4 mr-2"}),"Adicionar"]})]}),y.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[(n||[]).map(d=>y.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-700 rounded-md group",children:[y.jsxs("label",{className:"flex items-center space-x-2 text-sm text-slate-700 dark:text-slate-300 cursor-pointer",children:[y.jsx(NR,{checked:d.completed,onCheckedChange:()=>t(d.id)}),y.jsx("span",{className:d.completed?"line-through text-slate-500 dark:text-slate-400":"",children:d.text})]}),y.jsx(Vt,{variant:"ghost",size:"icon",className:"w-6 h-6 opacity-0 group-hover:opacity-100",onClick:()=>r(d.id),children:y.jsx(wb,{size:14,className:"text-red-500"})})]},d.id||d.text)),(n||[]).length===0&&y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhuma subtarefa adicionada."})]})]}):y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(gb,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou gerenciar subtarefas."]})},s6=({comments:n,onAddComment:e,cardExists:t,onAfterComment:r})=>{const[i,s]=C.useState(""),{settings:a}=ki(),l=async()=>{i.trim()&&(await e(i),s(""),r&&r())};if(!t)return y.jsxs("div",{className:"text-center p-4 text-slate-500 dark:text-slate-400",children:[y.jsx(gb,{size:24,className:"mx-auto mb-2"}),"Salve o card primeiro para adicionar ou ver comentários."]});const d=h=>{if(!h)return"?";const f=h.split(" ");return f.length>1?`${f[0][0]}${f[f.length-1][0]}`.toUpperCase():h.substring(0,2).toUpperCase()};return y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto scrollbar-thin p-1",children:n&&n.length>0?n.slice().sort((h,f)=>new Date(h.date)-new Date(f.date)).map(h=>y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs(Qp,{className:"h-8 w-8",children:[y.jsx(Jp,{src:h.user_photo_url,alt:h.user}),y.jsx(Zp,{children:d(h.user)})]}),y.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 flex-1",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:h.user}),y.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(h.date).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),y.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:h.text})]})]},h.id||h.date)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum comentário ainda."})}),y.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 flex items-start space-x-3",children:[y.jsxs(Qp,{className:"h-8 w-8 mt-1",children:[y.jsx(Jp,{src:a?.profile_photo,alt:a?.user_name}),y.jsx(Zp,{children:d(a?.user_name)})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx(cr,{type:"text",value:i,onChange:h=>s(h.target.value),className:"flex-1",placeholder:"Adicionar comentário...",onKeyPress:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l())}}),y.jsxs(Vt,{onClick:l,size:"sm",className:"mt-2",children:[y.jsx(nV,{className:"w-4 h-4 mr-2"}),"Enviar"]})]})]})]})},o6=({history:n})=>y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700 scrollbar-track-transparent",children:n&&n.length>0?n.slice().reverse().map((e,t)=>y.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg shadow-sm",children:[y.jsx("div",{className:"mt-1 w-2.5 h-2.5 bg-orange-300 rounded-full flex-shrink-0"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:e.action}),y.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(e.date).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),e.user&&` • ${e.user}`]})]}),y.jsx(ck,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mt-1"})]},t)):y.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"Nenhum histórico disponível."})}),a6=({activeTab:n,setActiveTab:e,cardId:t,subtasksCount:r,commentsCount:i})=>{const s=[{id:"details",label:"Detalhes"},{id:"subtasks",label:`Subtarefas (${r||0})`}];return t&&(s.push({id:"comments",label:`Comentários (${i||0})`}),s.push({id:"history",label:"Histórico"})),y.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-700",children:s.map(a=>y.jsx("button",{onClick:()=>e(a.id),className:`px-4 sm:px-6 py-3 text-sm font-medium whitespace-nowrap ${n===a.id?"text-neutral-600 border-b-2 border-neutral-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"}`,children:a.label},a.id))})},mp=({label:n,children:e,className:t})=>y.jsxs("div",{className:t,children:[y.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:n}),e]}),l6=({initialData:n,onSave:e,onCancel:t,onOpenClientModal:r,isSaving:i})=>{const{clients:s,servicePackages:a}=ki(),[l,d]=C.useState(n||{}),h=v=>{const{name:b,value:S}=v.target;d(x=>({...x,[b]:S}))},f=(v,b)=>{let S={...l,[v]:b};if(v==="client_id"||v==="service_package_id"){const x=v==="client_id"?s.find(M=>M.id===b):s.find(M=>M.id===S.client_id),E=v==="service_package_id"?a.find(M=>M.id===b):a.find(M=>M.id===S.service_package_id);let P="";x&&E?P=`${x.name} - ${E.name}`:x?P=x.name:E&&(P=E.name),S.title||(S.title=P),v==="service_package_id"&&E&&(S.value=E.price_cash_pix||E.price_card||"")}d(S)},g=v=>{v.preventDefault(),e(l)};return y.jsxs("form",{id:"quick-create-form",onSubmit:g,className:"space-y-4",children:[y.jsx(mp,{label:"Título do Trabalho*",children:y.jsx(cr,{name:"title",value:l.title||"",onChange:h,placeholder:"Ex: Ensaio de Casamento de [Cliente]",required:!0,disabled:i})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(mp,{label:"Data",children:y.jsx(cr,{name:"date",type:"date",value:l.date||"",onChange:h,disabled:i})}),y.jsx(mp,{label:"Valor Total (R$)",children:y.jsx(cr,{name:"value",type:"number",value:l.value||"",onChange:h,placeholder:"0,00",step:"0.01",min:"0",disabled:i})})]}),y.jsx(mp,{label:"Cliente Vinculado",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs(Is,{name:"client_id",value:l.client_id||"",onValueChange:v=>f("client_id",v),disabled:i,children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um cliente..."})}),y.jsx(Ji,{children:(s||[]).map(v=>y.jsx(nn,{value:v.id,children:v.name},v.id))})]}),y.jsx(Vt,{type:"button",variant:"outline",onClick:r,disabled:i,children:y.jsx(yb,{className:"w-4 h-4"})})]})}),y.jsx(mp,{label:"Pacote de Serviços",children:y.jsxs(Is,{name:"service_package_id",value:l.service_package_id||"",onValueChange:v=>f("service_package_id",v),disabled:i,children:[y.jsx(Qi,{children:y.jsx(Ds,{placeholder:"Selecione um pacote..."})}),y.jsxs(Ji,{children:[y.jsx(nn,{value:"",children:"Nenhum"}),(a||[]).map(v=>y.jsxs(nn,{value:v.id,children:[v.name," - R$ ",Number(v.price_cash_pix||v.price_card||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]},v.id))]})]})})]})},_1=[{text:"Confirmar detalhes do evento com o cliente",completed:!1},{text:"Verificar e preparar equipamento fotográfico",completed:!1},{text:"Scout do local (se aplicável)",completed:!1},{text:"Definir cronograma do dia do evento/ensaio",completed:!1},{text:"Realizar o evento/ensaio fotográfico",completed:!1},{text:"Fazer backup de todas as fotos e vídeos",completed:!1},{text:"Selecionar as melhores fotos (curadoria)",completed:!1},{text:"Edição e tratamento das imagens selecionadas",completed:!1},{text:"Preparar galeria online ou prévia para o cliente",completed:!1},{text:"Enviar prévia para aprovação do cliente",completed:!1},{text:"Realizar ajustes finais (se necessário)",completed:!1},{text:"Preparar e exportar arquivos finais em alta resolução",completed:!1},{text:"Entregar o material final ao cliente",completed:!1},{text:"Enviar nota fiscal (se aplicável)",completed:!1},{text:"Solicitar feedback/depoimento do cliente",completed:!1},{text:"Arquivar projeto e materiais",completed:!1}],c6=()=>{const{clients:n,servicePackages:e,addWorkflowCard:t,updateWorkflowCard:r,getClientById:i,getServicePackageById:s,addComment:a,refreshData:l,user:d,settings:h,getWorkflowCardById:f}=ki(),{toast:g}=js(),{openModals:v,closeModal:b,openModal:S}=Zv(),{isOpen:x,cardId:E,initialStatus:P,initialData:M}=v.workflow||{},R=E?f(E):null,O=C.useCallback(()=>{const J=h?.workflow_columns?.[0]?.id||"novo-lead";return{title:"",client_id:"",service_package_id:"",description:"",date:"",time:"",value:"",tags:[],status:P||J,contract_url:"",contract_name:"",contract_status:"pending",comments:[],history:[],subtasks:_1.map(ie=>({...ie,id:Math.random().toString(36).substr(2,9)})),order:0,archived:!1,sync_google_calendar:!1,payment_type:"SOMENTE_AGENDADO",payment_method:"",entry_value:"",installments:"",num_installments:"",card_processing_days:"",entry_paid:!1,first_installment_date:"",createFinancialTransaction:!0,main_wallet_id:"",entry_wallet_id:"",...M}},[h,P,M]),[L,B]=C.useState(O()),[$,W]=C.useState("details"),[Y,ae]=C.useState(!1),[se,le]=C.useState("quick"),ce=R?`workflow_form_draft_${R.id}`:`workflow_form_draft_new_${P||"default"}`;C.useEffect(()=>{if(x){le(R?"full":"quick");const J=localStorage.getItem(ce);let F=O();R&&(F={...O(),...R,client_id:R.client_id||"",service_package_id:R.service_package_id||"",value:R.value!==void 0&&R.value!==null?String(R.value):"",entry_value:R.entry_value!==void 0&&R.entry_value!==null?String(R.entry_value):"",installments:R.installments!==void 0&&R.installments!==null?String(R.installments):"",num_installments:R.num_installments!==void 0&&R.num_installments!==null?String(R.num_installments):"",card_processing_days:R.card_processing_days!==void 0&&R.card_processing_days!==null?String(R.card_processing_days):"",subtasks:R.subtasks&&R.subtasks.length>0?R.subtasks.map(pe=>({...pe,id:pe.id||Math.random().toString(36).substr(2,9)})):_1.map(pe=>({...pe,id:Math.random().toString(36).substr(2,9)}))});const ie=J?{...F,...JSON.parse(J)}:F;B(ie),W("details")}},[R,x,O,ce]),C.useEffect(()=>{x&&localStorage.setItem(ce,JSON.stringify(L))},[L,x,ce]);const me=()=>{localStorage.removeItem(ce),b("workflow")},q=async J=>{ae(!0);const F=J.title.trim()||"Novo Trabalho",ie=J.date||null,pe=(J.payment_type==="ENTRADA_PARCELAS"||J.payment_type==="PIX_PARCELADO"||J.payment_type==="CARTAO_PARCELADO")&&parseInt(J.installments||J.num_installments,10)||null;let Te=J.status;R||(Te=P||(J.date?"agendado":h?.workflow_columns?.[0]?.id||"novo-lead"));const De={...L,...J,user_id:d.id,title:F,date:ie,client_id:J.client_id||null,service_package_id:J.service_package_id||null,first_installment_date:J.first_installment_date||null,value:parseFloat(J.value)||null,entry_value:parseFloat(J.entry_value)||null,history:[{action:"Criado",date:new Date().toISOString(),user:h.user_name||d.email}],status:Te,installments:pe,num_installments:pe,card_processing_days:(J.payment_type==="CARTAO_CREDITO"||J.payment_type==="CARTAO_PARCELADO")&&parseInt(J.card_processing_days,10)||null,entry_paid:J.payment_type==="ENTRADA_PARCELAS"||J.payment_type==="INTEGRAL"?J.entry_paid:!1,subtasks:L.subtasks.map(Pe=>({text:Pe.text,completed:Pe.completed,id:Pe.id||Math.random().toString(36).substr(2,9)})),main_wallet_id:J.main_wallet_id||null,entry_wallet_id:J.entry_wallet_id||null};try{R&&R.id?(await r(R.id,De),g({title:"Sucesso!",description:`Card "${F}" atualizado.`})):(await t(De),g({title:"Sucesso!",description:`Agendamento "${F}" criado.`})),localStorage.removeItem(ce),await l(),me()}catch(Pe){g({title:"Erro ao Salvar",description:Pe.message||"Não foi possível salvar.",variant:"destructive",duration:7e3,action:Pe.message.includes("required fields")||Pe.message.includes("obrigatórios")?y.jsx(Vt,{variant:"outline",size:"sm",onClick:()=>{le("full"),W("details")},children:"Verificar Campos"}):void 0})}finally{ae(!1)}},z=async J=>{if(!(!R||!R.id))try{const F=await a(R.id,J);B(ie=>({...ie,comments:F.comments,history:F.history})),g({title:"Comentário Adicionado"})}catch(F){g({title:"Erro",description:F.message,variant:"destructive"})}},te=J=>B(F=>({...F,subtasks:[...F.subtasks||[],{id:Math.random().toString(36).substr(2,9),text:J,completed:!1}]})),V=J=>B(F=>({...F,subtasks:(F.subtasks||[]).map(ie=>ie.id===J?{...ie,completed:!ie.completed}:ie)})),ne=J=>B(F=>({...F,subtasks:(F.subtasks||[]).filter(ie=>ie.id!==J)}));return x?y.jsxs(go,{children:[x&&y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[5000]",children:y.jsxs(ur.div,{initial:{opacity:0,y:50,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.98},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card/80 backdrop-blur-lg border border-border/50 rounded-2xl w-full max-w-3xl shadow-2xl flex flex-col max-h-[95vh] z-[5001]",children:[y.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-border/50",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:R?"Editar Agendamento":"Novo Agendamento"}),y.jsx(Vt,{variant:"ghost",size:"icon",onClick:me,className:"w-9 h-9 rounded-full",disabled:Y,children:y.jsx(Mh,{className:"w-5 h-5"})})]}),se==="full"&&y.jsx(a6,{activeTab:$,setActiveTab:W,cardId:R?.id,subtasksCount:L.subtasks?.length,commentsCount:L.comments?.length}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 scrollbar-thin",children:[se==="quick"&&y.jsx(l6,{initialData:L,onSave:q,onCancel:me,onOpenClientModal:()=>S("client",{}),isSaving:Y}),se==="full"&&$==="details"&&y.jsx(Z5,{card:L,onSave:q,onCancel:me,isSaving:Y}),se==="full"&&$==="subtasks"&&y.jsx(i6,{subtasks:L.subtasks,onAddSubtask:te,onToggleSubtask:V,onDeleteSubtask:ne,cardExists:!!R?.id}),se==="full"&&$==="comments"&&y.jsx(s6,{comments:L.comments,onAddComment:z,cardExists:!!R?.id,onAfterComment:()=>W("comments")}),se==="full"&&$==="history"&&R?.id&&y.jsx(o6,{history:L.history})]}),se==="quick"?y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsxs(Vt,{type:"button",variant:"ghost",onClick:()=>le("full"),disabled:Y,children:["Mais Opções ",y.jsx($U,{className:"w-4 h-4 ml-2"})]}),y.jsxs("div",{children:[y.jsx(Vt,{type:"button",variant:"outline",onClick:me,disabled:Y,className:"mr-2",children:"Cancelar"}),y.jsxs(Vt,{type:"submit",form:"quick-create-form",className:"btn-custom-gradient text-white",disabled:Y,children:[Y?y.jsx(Wp,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(BA,{className:"w-4 h-4 mr-2"}),Y?"Salvando...":R?"Salvar":"Criar"]})]})]}):y.jsxs("div",{className:"p-4 sm:p-5 border-t border-border/50 flex items-center justify-end space-x-3 bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[y.jsx(Vt,{type:"button",variant:"outline",onClick:me,disabled:Y,className:"mr-auto",children:"Cancelar"}),y.jsxs(Vt,{type:"submit",form:"workflow-form",className:"btn-custom-gradient text-white",disabled:Y,children:[Y?y.jsx(Wp,{className:"w-4 h-4 mr-2 animate-spin"}):y.jsx(BA,{className:"w-4 h-4 mr-2"}),Y?"Salvando...":R?"Salvar Alterações":"Salvar Agendamento"]})]})]},"workflow-modal-content")},"workflow-modal-backdrop"),y.jsx(JP,{})]}):null},u6=["Casamento","Gestante","Newborn","Família","Infantil","Debutante (15 anos)","Formatura","Empresarial/Corporativo","Produtos","Gastronomia","Moda","Esportivo","Eventos Sociais","Imobiliário","Pets","Sensual/Boudoir","Outro"],LR="w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent",d6=({isOpen:n,onClose:e,servicePackage:t,onSaveSuccess:r})=>{const{toast:i}=js(),{addServicePackage:s,updateServicePackage:a,user:l}=ki(),[d,h]=C.useState(!1),f=C.useCallback(()=>({name:"",description:"",niche:"",price_cash_pix:"",price_card:"",cost:"",items_included:[{name:"",quantity:1}],payment_options:[],details:"",user_id:l?.id||null}),[l]),[g,v]=C.useState(f()),b=t?`service_package_form_draft_${t.id}`:"service_package_form_draft_new";C.useEffect(()=>{if(n){const B=localStorage.getItem(b);if(B){const $=JSON.parse(B);v({...$,user_id:$.user_id||l?.id})}else v(t?{name:t.name||"",description:t.description||"",niche:t.niche||"",price_cash_pix:t.price_cash_pix!==void 0?String(t.price_cash_pix):"",price_card:t.price_card!==void 0?String(t.price_card):"",cost:t.cost!==void 0?String(t.cost):"",items_included:t.items_included&&t.items_included.length>0?t.items_included:[{name:"",quantity:1}],payment_options:t.payment_options||[],details:t.details||"",user_id:t.user_id||l?.id}:f())}},[t,n,b,f,l]),C.useEffect(()=>{n&&localStorage.setItem(b,JSON.stringify(g))},[g,n,b]);const S=()=>{localStorage.removeItem(b),e()},x=(B,$)=>{v(W=>({...W,[B]:$}))},E=(B,$,W)=>{const Y=[...g.items_included];Y[B][$]=$==="quantity"?parseInt(W,10)||1:W,v(ae=>({...ae,items_included:Y}))},P=()=>{v(B=>({...B,items_included:[...B.items_included,{name:"",quantity:1}]}))},M=B=>{const $=g.items_included.filter((W,Y)=>Y!==B);$.length===0?v(W=>({...W,items_included:[{name:"",quantity:1}]})):v(W=>({...W,items_included:$}))},R=B=>{v($=>{const W=$.payment_options||[];return W.includes(B)?{...$,payment_options:W.filter(Y=>Y!==B)}:{...$,payment_options:[...W,B]}})},O=async B=>{if(B.preventDefault(),!l){i({title:"Erro de Autenticação",description:"Usuário não está autenticado.",variant:"destructive"});return}if(!g.name||!g.price_cash_pix||!g.niche){i({title:"Erro de Validação",description:"Nome do pacote, Nicho e Preço (à vista/Pix) são obrigatórios.",variant:"destructive"});return}h(!0);const $={...g,price_cash_pix:parseFloat(g.price_cash_pix)||0,price_card:g.price_card?parseFloat(g.price_card):null,cost:g.cost?parseFloat(g.cost):null,items_included:g.items_included.filter(W=>W.name.trim()!==""),user_id:l.id};try{t&&t.id?await a(t.id,$):await s($),i({title:"Pacote Salvo",description:`O pacote "${g.name}" foi salvo com sucesso!`}),localStorage.removeItem(b),r&&r(),e()}catch(W){i({title:"Erro ao Salvar Pacote",description:W.message,variant:"destructive"})}finally{h(!1)}},L=["Entrada + Parcelamento","Parcelamento Integral Cartão","À vista com Desconto"];return y.jsx(go,{children:n&&y.jsx(ur.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",id:"novo-pacote-backdrop-id",onClick:S,children:y.jsxs(ur.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},className:"bg-card/70 backdrop-blur-xl border border-border/50 rounded-xl p-6 w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-y-auto scrollbar-thin relative",id:"novo-pacote-modal-id",onClick:B=>B.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t?"Editar Pacote de Serviço":"Novo Pacote de Serviço"}),y.jsx(Vt,{variant:"ghost",size:"icon",onClick:S,className:"w-8 h-8",disabled:d,children:y.jsx(Mh,{className:"w-4 h-4"})})]}),y.jsxs("form",{onSubmit:O,className:"space-y-4",children:[y.jsxs(gp,{title:"Informações Básicas",children:[y.jsx(Bc,{icon:ZU,label:"Nome do Pacote *",htmlFor:"pkg-name",children:y.jsx("input",{id:"pkg-name",type:"text",value:g.name,onChange:B=>x("name",B.target.value),placeholder:"Ex: Ensaio Casal Completo",required:!0,disabled:d})}),y.jsx(Bc,{icon:iV,label:"Nicho do Serviço *",htmlFor:"pkg-niche",children:y.jsxs("select",{id:"pkg-niche",value:g.niche,onChange:B=>x("niche",B.target.value),required:!0,className:LR,disabled:d,children:[y.jsx("option",{value:"",children:"Selecione um nicho"}),u6.map(B=>y.jsx("option",{value:B,children:B},B))]})}),y.jsx(Bc,{icon:KU,label:"Descrição",htmlFor:"pkg-desc",children:y.jsx("textarea",{id:"pkg-desc",value:g.description,onChange:B=>x("description",B.target.value),placeholder:"Detalhes sobre o pacote...",rows:"3",disabled:d})})]}),y.jsxs(gp,{title:"Precificação",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsx(Bc,{icon:Hp,label:"Preço (À vista/Pix) *",htmlFor:"pkg-price-cash",children:y.jsx("input",{id:"pkg-price-cash",type:"number",value:g.price_cash_pix,onChange:B=>x("price_cash_pix",B.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,disabled:d})}),y.jsx(Bc,{icon:Hp,label:"Preço (Cartão)",htmlFor:"pkg-price-card",children:y.jsx("input",{id:"pkg-price-card",type:"number",value:g.price_card,onChange:B=>x("price_card",B.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsx(Bc,{icon:gb,label:"Custo Estimado do Pacote",htmlFor:"pkg-cost",children:y.jsx("input",{id:"pkg-cost",type:"number",value:g.cost,onChange:B=>x("cost",B.target.value),placeholder:"0.00",step:"0.01",min:"0",disabled:d})})]}),y.jsxs(gp,{title:"Itens Inclusos",children:[g.items_included.map((B,$)=>y.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[y.jsx("input",{type:"text",value:B.name,onChange:W=>E($,"name",W.target.value),placeholder:"Nome do item",className:"flex-grow px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx("input",{type:"number",value:B.quantity,onChange:W=>E($,"quantity",W.target.value),placeholder:"Qtd",min:"1",className:"w-20 px-3 py-2 border border-border rounded-lg bg-background/70",disabled:d}),y.jsx(Vt,{type:"button",variant:"ghost",size:"icon",onClick:()=>M($),className:"text-red-500",disabled:d,children:y.jsx(wb,{className:"w-4 h-4"})})]},$)),y.jsxs(Vt,{type:"button",variant:"outline",onClick:P,className:"mt-2",disabled:d,children:[y.jsx(yb,{className:"w-4 h-4 mr-2"}),"Adicionar Item"]})]}),y.jsx(gp,{title:"Opções de Pagamento",children:y.jsx("div",{className:"space-y-2",children:L.map(B=>y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:(g.payment_options||[]).includes(B),onChange:()=>R(B),className:"form-checkbox h-4 w-4 text-customPurple border-border rounded focus:ring-customPurple",disabled:d}),y.jsx("span",{className:"text-muted-foreground",children:B})]},B))})}),y.jsx(gp,{title:"Detalhes Adicionais",children:y.jsx(Bc,{icon:eV,label:"Observações/Termos",htmlFor:"pkg-details",children:y.jsx("textarea",{id:"pkg-details",value:g.details,onChange:B=>x("details",B.target.value),placeholder:"Informações extras, termos e condições...",rows:"4",disabled:d})})}),y.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-border mt-6",children:[y.jsx(Vt,{type:"button",variant:"outline",onClick:S,className:"flex-1",disabled:d,children:"Cancelar"}),y.jsx(Vt,{type:"submit",className:"flex-1 btn-custom-gradient text-white",disabled:d,children:d?y.jsx(Wp,{className:"w-4 h-4 animate-spin"}):t?"Salvar Alterações":"Criar Pacote"})]})]})]})})})},gp=({title:n,children:e})=>y.jsxs("div",{className:"py-3",children:[y.jsx("h3",{className:"text-md font-semibold text-foreground mb-3 border-b border-border pb-2",children:n}),y.jsx("div",{className:"space-y-3",children:e})]}),Bc=({icon:n,label:e,htmlFor:t,children:r})=>y.jsxs("div",{children:[y.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-muted-foreground mb-1",children:[n&&y.jsx(n,{className:"w-4 h-4 inline mr-2"}),e]}),ot.Children.map(r,i=>i.type==="select"?ot.cloneElement(i,{className:`${i.props.className||""} ${LR}`}):ot.cloneElement(i,{className:`${i.props.className||""} w-full px-3 py-2 border border-border rounded-lg bg-background/70 text-foreground focus:ring-2 focus:ring-primary focus:border-transparent`}))]}),h6=()=>{const[n,e]=C.useState(null),[t,r]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const{data:h,error:f}=await Se.from("anuncios").select("*").eq("esta_ativo",!0).order("created_at",{ascending:!1}).limit(1);if(f)throw f;if(h&&h.length>0){const g=h[0],v=localStorage.getItem(`anuncio_closed_${g.id}`),b=g.cooldown_reaparicao_minutos||60;if(v){const S=b*60*1e3;if(Date.now()-parseInt(v,10)<S)return}e(g),r(!0)}}catch(h){console.error("Erro ao buscar anúncio:",h)}})()},[]),C.useEffect(()=>{if(t&&n&&n.duracao_exibicao_segundos>0){const d=setTimeout(()=>{i()},n.duracao_exibicao_segundos*1e3);return()=>clearTimeout(d)}},[t,n]);const i=()=>{r(!1),n&&localStorage.setItem(`anuncio_closed_${n.id}`,Date.now().toString())},s=d=>{d&&(window.open(d,"_blank","noopener,noreferrer"),i())};if(!n)return null;const a={"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end",center:"items-center justify-center","bottom-left":"items-end justify-start","bottom-center":"items-end justify-center","bottom-right":"items-end justify-end"},l={small:"max-w-sm",medium:"max-w-md",large:"max-w-lg"};return y.jsx(go,{children:t&&y.jsx(ur.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:ut("fixed inset-0 z-[9999] flex p-4 bg-black/30 backdrop-blur-sm",a[n.posicao_anuncio]||a.center),onClick:i,children:y.jsx(ur.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},onClick:d=>d.stopPropagation(),children:y.jsxs(Vb,{className:ut("shadow-2xl w-full",l[n.tamanho_anuncio]||l.medium),children:[y.jsxs("button",{onClick:i,className:"absolute top-2 right-2 p-1 rounded-full bg-background/50 hover:bg-background/80 transition-colors z-10",children:[y.jsx(Mh,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Fechar"})]}),n.imagem_url&&y.jsx("div",{className:"cursor-pointer",onClick:()=>s(n.link_imagem),children:y.jsx("img",{src:n.imagem_url,alt:n.titulo_anuncio,className:"w-full h-auto object-cover rounded-t-lg"})}),y.jsxs(zb,{children:[y.jsx(Hb,{children:n.titulo_anuncio}),n.conteudo_anuncio&&y.jsx(Wb,{children:n.conteudo_anuncio})]}),n.link_botao&&y.jsx(qb,{children:y.jsx(Vt,{className:"w-full",onClick:()=>s(n.link_botao),children:"Saiba Mais"})})]})})})})},ii=({featureName:n,children:e})=>{const{isFeatureEnabled:t}=ki();return t(n)?e:y.jsxs(ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center h-full text-center p-8 bg-card rounded-xl",children:[y.jsx(QU,{className:"w-16 h-16 text-destructive mb-4"}),y.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Acesso Restrito"}),y.jsx("p",{className:"text-muted-foreground",children:"Esta funcionalidade não está habilitada para sua conta no momento."}),y.jsx("p",{className:"text-muted-foreground mt-1",children:"Por favor, contate o administrador do sistema para mais informações."})]})},f6=C.lazy(()=>qe(()=>import("./Dashboard-CZu8vtmH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),p6=C.lazy(()=>qe(()=>import("./Clients-C4sPZ27Q.js"),__vite__mapDeps([29,9,25,30,31,32,7,21,33]))),m6=C.lazy(()=>qe(()=>import("./ClientDetail-ZyCJmxA9.js"),__vite__mapDeps([34,35,36,37,38,39,30,40,18,41,20,25,42,22,43]))),g6=C.lazy(()=>qe(()=>import("./Workflow-DfW4GVxQ.js"),__vite__mapDeps([44,45,46,47,5,48,19,49,50,15,51,31,18,9,4,20,21,30,52,6,42,53]))),v6=C.lazy(()=>qe(()=>import("./Financial-Biro83yb.js"),__vite__mapDeps([54,15,14,32,18,4,5,55,20,21,22,56,57,58,59,36,12,31]))),y6=C.lazy(()=>qe(()=>import("./Calendar-J7Rv1kWl.js"),__vite__mapDeps([60,61,62,18,31,53,8,27,22,63,64,65,56,57,26,37,66,58,67,5,68,69]))),w6=C.lazy(()=>qe(()=>import("./Reports-C5dV6v4J.js"),__vite__mapDeps([70,17,71,47,72,22,62,18,4,5,56,27,57,32,15,73,74]))),_6=C.lazy(()=>qe(()=>import("./Settings-t_-7WTEq.js"),__vite__mapDeps([75,61,67,5,76,33,18,4,62,77,52,36,78,25,79,65,59,57,50,22,80,8]))),b6=C.lazy(()=>qe(()=>import("./AccountSettings-CAaR26zO.js"),__vite__mapDeps([81,37,18,52,82]))),x6=C.lazy(()=>qe(()=>import("./ServicePackages-DLGRSUIs.js"),__vite__mapDeps([83,18,9,51,20,21]))),S6=C.lazy(()=>qe(()=>import("./MySetup-CrxtTfBK.js"),__vite__mapDeps([84,35,85,42,77,15,18,36,14,21,13]))),A6=C.lazy(()=>qe(()=>import("./Precifique-zC27CIbU.js"),__vite__mapDeps([86,18,11,36,55,21,74,15,16,87,40]))),C6=C.lazy(()=>qe(()=>import("./ReservaInteligente-DRiFzRtw.js"),__vite__mapDeps([88,24,18,40,36,16,74,89]))),E6=C.lazy(()=>qe(()=>import("./Boards-VhYYsBmv.js"),__vite__mapDeps([90,1,2,3,21,91,18,92,28]))),k6=C.lazy(()=>qe(()=>import("./BoardDetail-C5Cxshe8.js"),__vite__mapDeps([93,45,46,47,5,48,92,94,89,18,4,52,82]))),T6=C.lazy(()=>qe(()=>import("./PlansPage-CCRsMruD.js"),__vite__mapDeps([95,25,96,13,87]))),P6=C.lazy(()=>qe(()=>import("./FormsPage-CiazOaU2.js"),__vite__mapDeps([97,18,9,98,99,33,91,100,101,68,21]))),R6=C.lazy(()=>qe(()=>import("./FormEditorPage-CKI2qD6o.js"),__vite__mapDeps([102,45,46,47,5,48,100,101,68,43,41,28]))),M6=C.lazy(()=>qe(()=>import("./CampaignSubmissionsPage-B4IjTdY_.js"),__vite__mapDeps([103,71,47,72,43,98]))),I6=C.lazy(()=>qe(()=>import("./StudioPage-BwZa69Tm.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,59,57,22,91,31,105,23]))),D6=C.lazy(()=>qe(()=>import("./ContractListPage-69wNlyTT.js"),__vite__mapDeps([106,107,25,36,89,21,78,91,31,105,23,22]))),b1=C.lazy(()=>qe(()=>import("./ContractEditorPage-CZTQewI3.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),x1=C.lazy(()=>qe(()=>import("./ProposalEditorPage-Bw1TwC7i.js"),__vite__mapDeps([110,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19]))),O6=C.lazy(()=>qe(()=>import("./BlogPage-CfUQQCu8.js"),__vite__mapDeps([117,22]))),N6=C.lazy(()=>qe(()=>import("./AvailabilityManagerPage-DgCa4k62.js"),__vite__mapDeps([118,107,25,69,18,22,64,43,21,56,57]))),L6=C.lazy(()=>qe(()=>import("./ReferralsPage-BAAyqBC_.js"),__vite__mapDeps([119,35,107,30,68,73,22]))),S1="gofotografo_last_active_tab",A1="gofotografo_sidebar_collapsed",j6=({children:n})=>{const e=Ls(),{toast:t}=js(),{settings:r,loadingAuth:i,setSettings:s,pendingReserveAllocations:a,allocateToSavingGoal:l,dismissPendingAllocation:d,savingGoals:h,refreshData:f,isFeatureEnabled:g}=ki(),{theme:v}=aC(),{isAnyModalOpen:b,openModals:S,closeModal:x}=Zv(),[E,P]=C.useState({}),M=()=>{const V=e.pathname;return V.startsWith("/clients/")?"clients":V.startsWith("/quadros")?"quadros":V.startsWith("/forms")||V.startsWith("/campaigns")?"clients":V.startsWith("/studio")||V.startsWith("/contracts")?"studio":V.startsWith("/blog")?"blog":V.startsWith("/availability-manager")?"calendar":V.startsWith("/referrals")?"referrals":V.substring(1)||"dashboard"},{activeTab:R,setActiveTab:O,initialFinancialFilter:L}=T5(localStorage.getItem(S1)||M()),{isMobile:B}=P5();R5(b);const[$,W]=C.useState(()=>{const V=localStorage.getItem(A1);return V!==null?JSON.parse(V):!0}),[Y,ae]=C.useState(!0);if(C.useEffect(()=>{localStorage.setItem(A1,JSON.stringify($)),window.dispatchEvent(new Event("resize"))},[$]),C.useEffect(()=>{const V=M();V!==R&&O(V),e.pathname.startsWith("/quadros/")||P({})},[e.pathname]),C.useEffect(()=>{localStorage.setItem(S1,R)},[R]),i)return y.jsx(Ut,{});const se=e.pathname.startsWith("/quadros/"),le=e.pathname==="/quadros",ce=S.financial,me=S.servicePackage,te=v==="dark"?"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20gofotografo%20claro.png":"https://rouvkvcngmsquebokdyg.supabase.co/storage/v1/object/public/gofiles//logotipo%20fundo%20claro%20go.fotografo%20cor%20.png";return y.jsxs("div",{className:`flex flex-col bg-background text-foreground ${B?"":"min-h-screen"}`,children:[y.jsx(h6,{}),a.map((V,ne)=>y.jsx(k5,{allocation:V,savingGoals:h,onConfirm:async J=>{try{await l(J,V.reserveAmount),t({title:"Sucesso!",description:`R$ ${V.reserveAmount.toFixed(2)} alocados para a meta.`}),d(V.transactionId)}catch(F){t({title:"Erro ao alocar",description:F.message,variant:"destructive"})}},onDismiss:()=>d(V.transactionId)},V.transactionId+ne)),y.jsxs("div",{className:`flex ${B?"flex-col":"h-screen"}`,children:[!B&&y.jsxs("div",{className:"relative",children:[y.jsx(HV,{activeTab:R,setActiveTab:O,collapsed:$,setCollapsed:W}),y.jsx("button",{onClick:()=>W(!$),className:`
                absolute top-1/2 -translate-y-1/2 
                h-12 w-6 bg-card border border-border rounded-r-lg 
                flex items-center justify-center text-muted-foreground hover:bg-accent 
                transition-all duration-300 ease-in-out z-40
                ${$?"left-16":"left-64"}
              `,title:$?"Expandir menu":"Recolher menu",children:$?y.jsx(lk,{className:"w-4 h-4"}):y.jsx(HU,{className:"w-4 h-4"})})]}),B&&y.jsx(go,{children:Y&&y.jsx(ur.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:150,damping:25},className:"mobile-header fixed top-0 left-0 right-0 bg-card/60 dark:bg-card/50 backdrop-blur-xl border-b border-border z-[450] flex items-center justify-center px-4 shadow-sm",children:y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("img",{alt:"Logo GO.FOTÓGRAFO",className:"h-10 w-auto object-contain",src:te})})})}),y.jsx("main",{id:"main-app-container",className:ut("main-content-container flex-1 transition-all duration-300 ease-in-out",B?`p-4 pb-24 ${Y?"pt-20":"pt-4"}`:`p-6 sm:p-8 ${$?"ml-16":"ml-64"}`,"overflow-y-auto",se&&"fundo-quadro-ativo p-0 sm:p-0",le&&"pagina-quadros"),style:E,children:y.jsx("div",{className:ut("h-auto min-h-full",!se&&"dashboard-page-container"),children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(go,{mode:"wait",children:y.jsx(ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full",children:y.jsxs(sC,{children:[y.jsx(Ve,{path:"/dashboard",element:y.jsx(f6,{setActiveTab:O,isMobile:B})}),y.jsx(Ve,{path:"/clients",element:y.jsx(p6,{isMobile:B})}),y.jsx(Ve,{path:"/clients/:clientId",element:y.jsx(m6,{isMobile:B})}),y.jsx(Ve,{path:"/workflow",element:y.jsx(g6,{isMobile:B})}),y.jsx(Ve,{path:"/financial",element:y.jsx(v6,{isMobile:B,initialFilter:L})}),y.jsx(Ve,{path:"/calendar",element:y.jsx(ii,{featureName:"agenda_pro",children:y.jsx(y6,{isMobile:B,setActiveTab:O})})}),y.jsx(Ve,{path:"/reports",element:y.jsx(ii,{featureName:"relatorios",children:y.jsx(w6,{})})}),y.jsx(Ve,{path:"/service-packages",element:y.jsx(ii,{featureName:"pacotes_servico",children:y.jsx(x6,{isMobile:B})})}),y.jsx(Ve,{path:"/my-setup",element:y.jsx(ii,{featureName:"meu_setup",children:y.jsx(S6,{isMobile:B})})}),y.jsx(Ve,{path:"/precifique",element:y.jsx(ii,{featureName:"precifique",children:y.jsx(A6,{isMobile:B})})}),y.jsx(Ve,{path:"/reserva-inteligente",element:y.jsx(ii,{featureName:"reserva_inteligente",children:y.jsx(C6,{isMobile:B})})}),y.jsx(Ve,{path:"/quadros",element:y.jsx(ii,{featureName:"quadros",children:y.jsx(E6,{setSidebarCollapsed:W})})}),y.jsx(Ve,{path:"/quadros/:boardId",element:y.jsx(ii,{featureName:"quadros",children:y.jsx(k6,{setPageStyle:P})})}),y.jsx(Ve,{path:"/forms",element:y.jsx(ii,{featureName:"formularios_captacao",children:y.jsx(P6,{})})}),y.jsx(Ve,{path:"/forms/edit/:formId",element:y.jsx(ii,{featureName:"formularios_captacao",children:y.jsx(R6,{})})}),y.jsx(Ve,{path:"/campaigns/:formId",element:y.jsx(ii,{featureName:"formularios_captacao",children:y.jsx(M6,{})})}),y.jsxs(Ve,{path:"/studio/*",element:y.jsx(ii,{featureName:"propostas_avancadas",children:y.jsx(j_,{})}),children:[y.jsx(Ve,{index:!0,element:y.jsx(I6,{})}),y.jsx(Ve,{path:"proposals/new",element:y.jsx(x1,{})}),y.jsx(Ve,{path:"proposals/edit/:proposalId",element:y.jsx(x1,{})}),y.jsx(Ve,{path:"contracts/new",element:y.jsx(b1,{mode:"new"})}),y.jsx(Ve,{path:"contracts/edit/:contractId",element:y.jsx(b1,{mode:"edit"})})]}),y.jsx(Ve,{path:"/contracts",element:y.jsx(ii,{featureName:"contratos",children:y.jsx(D6,{})})}),y.jsx(Ve,{path:"/availability-manager",element:y.jsx(ii,{featureName:"agenda_pro",children:y.jsx(N6,{isMobile:B})})}),y.jsx(Ve,{path:"/referrals",element:y.jsx(L6,{})}),y.jsx(Ve,{path:"/settings",element:y.jsx(_6,{isMobile:B})}),y.jsx(Ve,{path:"/account-settings",element:y.jsx(b6,{isMobile:B})}),y.jsx(Ve,{path:"/plans",element:y.jsx(T6,{setActiveTab:O})}),y.jsx(Ve,{path:"/blog",element:y.jsx(O6,{})}),y.jsx(Ve,{path:"/",element:y.jsx(Fp,{to:"/dashboard",replace:!0})}),y.jsx(Ve,{path:"*",element:y.jsx(Fp,{to:"/dashboard",replace:!0})})]})},e.pathname+"-inner")})})})},e.pathname),B&&y.jsx(vP,{activeTab:R,setActiveTab:O})]}),y.jsx(JP,{}),y.jsx(c6,{}),y.jsx(go,{children:ce?.isOpen&&y.jsx(J5,{isOpen:ce.isOpen,onClose:()=>x("financial"),type:ce.type,transactionData:ce.transaction,onSaveSuccess:async()=>await f()})}),y.jsx(go,{children:me?.isOpen&&y.jsx(d6,{isOpen:me.isOpen,onClose:()=>x("servicePackage"),servicePackage:me.servicePackage,onSaveSuccess:async()=>await f()})})]})};function F6({children:n}){const[e,t]=C.useState(null),r=Ls();return C.useEffect(()=>{let i=!0;return(async()=>{try{const{data:s,error:a}=await Se.auth.getUser();if(!i)return;if(a||!s?.user){t(!1);return}const l=!!s.user.app_metadata?.is_admin;t(l)}catch{t(!1)}})(),()=>{i=!1}},[]),e===null?y.jsx(Ut,{}):e?y.jsx(y.Fragment,{children:n}):y.jsx(Fp,{to:"/login",replace:!0,state:{from:r}})}const B6=()=>{const{toast:n}=js(),e=()=>{let t;const r=s=>{s.preventDefault(),t=s,i()},i=()=>{t?(t.prompt(),t.userChoice.then(s=>{s.outcome==="accepted"?(console.log("User accepted the install prompt"),n({title:"Aplicativo Instalado!",description:"O GO.FOTÓGRAFO foi adicionado à sua tela inicial."})):console.log("User dismissed the install prompt"),t=null})):n({title:"Já é um App ou não suportado",description:"O aplicativo já pode estar instalado ou seu navegador não suporta esta ação. Tente 'Adicionar à Tela de Início' no menu do seu navegador.",variant:"default",duration:7e3})};return window.addEventListener("beforeinstallprompt",r),window.deferredPrompt?(t=window.deferredPrompt,i()):n({title:"Instalação",description:"Para instalar, use a opção 'Adicionar à Tela de Início' do seu navegador.",variant:"default",duration:7e3}),()=>{window.removeEventListener("beforeinstallprompt",r)}};return ot.useEffect(()=>{window.handlePWAInstall=e;const t=r=>{r.preventDefault(),window.deferredPrompt=r};return window.addEventListener("beforeinstallprompt",t),()=>{delete window.handlePWAInstall,window.removeEventListener("beforeinstallprompt",t)}},[]),null};function $6(){const{user:n}=W_(),e=C.useRef(null);return C.useEffect(()=>{if(e.current&&(clearInterval(e.current),e.current=null),!n)return;const t=24e4,r=async()=>{try{const{error:i}=await Se.from("settings").select("user_id",{count:"exact",head:!0}).eq("user_id",n.id).limit(1);i&&console.warn("KeepAlive: ping falhou:",i.message)}catch(i){console.warn("KeepAlive: erro no ping:",i)}};return r(),e.current=setInterval(r,t),()=>{e.current&&(clearInterval(e.current),e.current=null)}},[n?.id]),null}class jR extends ot.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI crash capturado:",e,t)}render(){return this.state.hasError?y.jsx("div",{className:"p-6 text-sm",children:"Algo deu errado ao renderizar este conteúdo."}):this.props.children}}function U6(n,e){return C.useReducer((t,r)=>e[t][r]??t,n)}var Jb="ScrollArea",[FR,N9]=xo(Jb),[V6,ns]=FR(Jb),BR=C.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:i,scrollHideDelay:s=600,...a}=n,[l,d]=C.useState(null),[h,f]=C.useState(null),[g,v]=C.useState(null),[b,S]=C.useState(null),[x,E]=C.useState(null),[P,M]=C.useState(0),[R,O]=C.useState(0),[L,B]=C.useState(!1),[$,W]=C.useState(!1),Y=xt(e,se=>d(se)),ae=cy(i);return y.jsx(V6,{scope:t,type:r,dir:ae,scrollHideDelay:s,scrollArea:l,viewport:h,onViewportChange:f,content:g,onContentChange:v,scrollbarX:b,onScrollbarXChange:S,scrollbarXEnabled:L,onScrollbarXEnabledChange:B,scrollbarY:x,onScrollbarYChange:E,scrollbarYEnabled:$,onScrollbarYEnabledChange:W,onCornerWidthChange:M,onCornerHeightChange:O,children:y.jsx(nt.div,{dir:ae,...a,ref:Y,style:{position:"relative","--radix-scroll-area-corner-width":P+"px","--radix-scroll-area-corner-height":R+"px",...n.style}})})});BR.displayName=Jb;var $R="ScrollAreaViewport",UR=C.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:i,...s}=n,a=ns($R,t),l=C.useRef(null),d=xt(e,l,a.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),y.jsx(nt.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:y.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});UR.displayName=$R;var Ao="ScrollAreaScrollbar",Zb=C.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=ns(Ao,n.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,l=n.orientation==="horizontal";return C.useEffect(()=>(l?s(!0):a(!0),()=>{l?s(!1):a(!1)}),[l,s,a]),i.type==="hover"?y.jsx(z6,{...r,ref:e,forceMount:t}):i.type==="scroll"?y.jsx(H6,{...r,ref:e,forceMount:t}):i.type==="auto"?y.jsx(VR,{...r,ref:e,forceMount:t}):i.type==="always"?y.jsx(ex,{...r,ref:e}):null});Zb.displayName=Ao;var z6=C.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=ns(Ao,n.__scopeScrollArea),[s,a]=C.useState(!1);return C.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),a(!0)},f=()=>{d=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),y.jsx(Ti,{present:t||s,children:y.jsx(VR,{"data-state":s?"visible":"hidden",...r,ref:e})})}),H6=C.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=ns(Ao,n.__scopeScrollArea),s=n.orientation==="horizontal",a=Ty(()=>d("SCROLL_END"),100),[l,d]=U6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,i.scrollHideDelay,d]),C.useEffect(()=>{const h=i.viewport,f=s?"scrollLeft":"scrollTop";if(h){let g=h[f];const v=()=>{const b=h[f];g!==b&&(d("SCROLL"),a()),g=b};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[i.viewport,s,d,a]),y.jsx(Ti,{present:t||l!=="hidden",children:y.jsx(ex,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Fe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),VR=C.forwardRef((n,e)=>{const t=ns(Ao,n.__scopeScrollArea),{forceMount:r,...i}=n,[s,a]=C.useState(!1),l=n.orientation==="horizontal",d=Ty(()=>{if(t.viewport){const h=t.viewport.offsetWidth<t.viewport.scrollWidth,f=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?h:f)}},10);return Ch(t.viewport,d),Ch(t.content,d),y.jsx(Ti,{present:r||s,children:y.jsx(ex,{"data-state":s?"visible":"hidden",...i,ref:e})})}),ex=C.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,i=ns(Ao,n.__scopeScrollArea),s=C.useRef(null),a=C.useRef(0),[l,d]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=GR(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>s.current=v,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:v=>a.current=v};function g(v,b){return X6(v,a.current,l,b)}return t==="horizontal"?y.jsx(W6,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollLeft,b=C1(v,l,i.dir);s.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=g(v,i.dir))}}):t==="vertical"?y.jsx(q6,{...f,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const v=i.viewport.scrollTop,b=C1(v,l);s.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=g(v))}}):null}),W6=C.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=ns(Ao,n.__scopeScrollArea),[a,l]=C.useState(),d=C.useRef(null),h=xt(e,d,s.onScrollbarXChange);return C.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(HR,{"data-orientation":"horizontal",...i,ref:h,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ky(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.x),onDragScroll:f=>n.onDragScroll(f.x),onWheelScroll:(f,g)=>{if(s.viewport){const v=s.viewport.scrollLeft+f.deltaX;n.onWheelScroll(v),YR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:qv(a.paddingLeft),paddingEnd:qv(a.paddingRight)}})}})}),q6=C.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...i}=n,s=ns(Ao,n.__scopeScrollArea),[a,l]=C.useState(),d=C.useRef(null),h=xt(e,d,s.onScrollbarYChange);return C.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),y.jsx(HR,{"data-orientation":"vertical",...i,ref:h,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ky(t)+"px",...n.style},onThumbPointerDown:f=>n.onThumbPointerDown(f.y),onDragScroll:f=>n.onDragScroll(f.y),onWheelScroll:(f,g)=>{if(s.viewport){const v=s.viewport.scrollTop+f.deltaY;n.onWheelScroll(v),YR(v,g)&&f.preventDefault()}},onResize:()=>{d.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:qv(a.paddingTop),paddingEnd:qv(a.paddingBottom)}})}})}),[G6,zR]=FR(Ao),HR=C.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:g,...v}=n,b=ns(Ao,t),[S,x]=C.useState(null),E=xt(e,Y=>x(Y)),P=C.useRef(null),M=C.useRef(""),R=b.viewport,O=r.content-r.viewport,L=Jn(f),B=Jn(d),$=Ty(g,10);function W(Y){if(P.current){const ae=Y.clientX-P.current.left,se=Y.clientY-P.current.top;h({x:ae,y:se})}}return C.useEffect(()=>{const Y=ae=>{const se=ae.target;S?.contains(se)&&L(ae,O)};return document.addEventListener("wheel",Y,{passive:!1}),()=>document.removeEventListener("wheel",Y,{passive:!1})},[R,S,O,L]),C.useEffect(B,[r,B]),Ch(S,$),Ch(b.content,$),y.jsx(G6,{scope:t,scrollbar:S,hasThumb:i,onThumbChange:Jn(s),onThumbPointerUp:Jn(a),onThumbPositionChange:B,onThumbPointerDown:Jn(l),children:y.jsx(nt.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:Fe(n.onPointerDown,Y=>{Y.button===0&&(Y.target.setPointerCapture(Y.pointerId),P.current=S.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),W(Y))}),onPointerMove:Fe(n.onPointerMove,W),onPointerUp:Fe(n.onPointerUp,Y=>{const ae=Y.target;ae.hasPointerCapture(Y.pointerId)&&ae.releasePointerCapture(Y.pointerId),document.body.style.webkitUserSelect=M.current,b.viewport&&(b.viewport.style.scrollBehavior=""),P.current=null})})})}),Wv="ScrollAreaThumb",WR=C.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=zR(Wv,n.__scopeScrollArea);return y.jsx(Ti,{present:t||i.hasThumb,children:y.jsx(K6,{ref:e,...r})})}),K6=C.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...i}=n,s=ns(Wv,t),a=zR(Wv,t),{onThumbPositionChange:l}=a,d=xt(e,g=>a.onThumbChange(g)),h=C.useRef(void 0),f=Ty(()=>{h.current&&(h.current(),h.current=void 0)},100);return C.useEffect(()=>{const g=s.viewport;if(g){const v=()=>{if(f(),!h.current){const b=Q6(g,l);h.current=b,l()}};return l(),g.addEventListener("scroll",v),()=>g.removeEventListener("scroll",v)}},[s.viewport,f,l]),y.jsx(nt.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(n.onPointerDownCapture,g=>{const b=g.target.getBoundingClientRect(),S=g.clientX-b.left,x=g.clientY-b.top;a.onThumbPointerDown({x:S,y:x})}),onPointerUp:Fe(n.onPointerUp,a.onThumbPointerUp)})});WR.displayName=Wv;var tx="ScrollAreaCorner",qR=C.forwardRef((n,e)=>{const t=ns(tx,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?y.jsx(Y6,{...n,ref:e}):null});qR.displayName=tx;var Y6=C.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,i=ns(tx,t),[s,a]=C.useState(0),[l,d]=C.useState(0),h=!!(s&&l);return Ch(i.scrollbarX,()=>{const f=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(f),d(f)}),Ch(i.scrollbarY,()=>{const f=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(f),a(f)}),h?y.jsx(nt.div,{...r,ref:e,style:{width:s,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function qv(n){return n?parseInt(n,10):0}function GR(n,e){const t=n/e;return isNaN(t)?0:t}function ky(n){const e=GR(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function X6(n,e,t,r="ltr"){const i=ky(t),s=i/2,a=e||s,l=i-a,d=t.scrollbar.paddingStart+a,h=t.scrollbar.size-t.scrollbar.paddingEnd-l,f=t.content-t.viewport,g=r==="ltr"?[0,f]:[f*-1,0];return KR([d,h],g)(n)}function C1(n,e,t="ltr"){const r=ky(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,l=s-r,d=t==="ltr"?[0,a]:[a*-1,0],h=g_(n,d);return KR([0,a],[0,l])(h)}function KR(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function YR(n,e){return n>0&&n<e}var Q6=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function i(){const s={left:n.scrollLeft,top:n.scrollTop},a=t.left!==s.left,l=t.top!==s.top;(a||l)&&e(),t=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Ty(n,e){const t=Jn(n),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Ch(n,e){const t=Jn(e);Rn(()=>{let r=0;if(n){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return i.observe(n),()=>{window.cancelAnimationFrame(r),i.unobserve(n)}}},[n,t])}var XR=BR,J6=UR,Z6=WR,eq=qR;const QR=C.forwardRef(({className:n,children:e,...t},r)=>y.jsxs(XR,{ref:r,className:ut("relative overflow-hidden",n),...t,children:[y.jsx(J6,{className:"h-full w-full rounded-[inherit]",children:e}),y.jsx(JR,{}),y.jsx(eq,{})]}));QR.displayName=XR.displayName;const JR=C.forwardRef(({className:n,orientation:e="vertical",...t},r)=>y.jsx(Zb,{ref:r,orientation:e,className:ut("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:y.jsx(Z6,{className:"relative flex-1 rounded-full bg-border"})}));JR.displayName=Zb.displayName;const tq=({reminder:n,onDismiss:e,onFollowUp:t})=>{const r=()=>{if(n.icon)return n.icon;switch(n.reminderType||n.type){case"payment_overdue":case"expense_overdue":return BU;case"payment_due":case"expense_due":return ck;case"birthday":return mb;case"task_due":return rV;default:return ok}},i=()=>{const l=n.reminderType||n.type;return l?.includes("overdue")?"bg-red-500":l?.includes("due")?"bg-yellow-500":l==="birthday"?"bg-pink-500":"bg-primary"},s=r(),a=i();return y.jsxs("div",{className:"flex items-start space-x-3 p-4 border-b border-border/20 last:border-0 hover:bg-muted/30 transition-all duration-200",children:[y.jsx("div",{className:`p-2.5 rounded-full text-white shadow-md ${a}`,children:y.jsx(s,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-sm font-semibold mb-1 text-foreground leading-tight",children:n.title}),y.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:n.description}),n.date&&y.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),y.jsxs("div",{className:"flex items-center space-x-1",children:[n.clientPhone&&y.jsx("button",{onClick:()=>t(n),className:"p-2 hover:bg-green-50 hover:text-green-600 rounded-full transition-all duration-200",title:"Entrar em contato via WhatsApp",children:y.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/16566/16566143.png",alt:"WhatsApp",className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>e(n.id),className:"p-2 hover:bg-red-50 hover:text-red-500 rounded-full transition-all duration-200",title:"Dispensar notificação",children:y.jsx(Mh,{className:"w-3 h-3"})})]})]})},nq=({reminders:n,onDismiss:e,onDismissAll:t,onFollowUp:r})=>{if(!n||n.length===0)return null;const i=n.length>=3,s=i?"fixed inset-0 z-50 flex items-center justify-center":"fixed bottom-6 right-6 z-50";return y.jsxs("div",{className:s,children:[i&&y.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),y.jsxs("div",{className:`relative bg-card/95 backdrop-blur-xl border border-border/50 rounded-2xl shadow-2xl ${i?"w-full max-w-md m-6 max-h-[70vh]":"w-96 max-h-[80vh] shadow-[0_20px_25px_-5px_rgba(0,0,0,0.3),_0_10px_10px_-5px_rgba(0,0,0,0.2)]"}`,style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"},children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-border/30",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ok,{className:"w-5 h-5 text-primary"}),y.jsx("h2",{className:"font-semibold text-lg",children:n.length===1?"Notificação":`${n.length} Notificações`})]}),y.jsx("button",{onClick:t,className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded hover:bg-muted",children:"Limpar todas"})]}),y.jsx(QR,{className:i?"max-h-[55vh]":"max-h-80",children:n.map(a=>y.jsx(tq,{reminder:a,onDismiss:e,onFollowUp:r},a.id))})]})]})},rq=()=>{const[n,e]=ot.useState([]),t=ot.useRef({}),r=ot.useCallback(a=>{const l=Date.now(),d=t.current[a.id]||0;l-d>300*1e3&&(e(h=>[...h,a]),t.current[a.id]=l)},[]),i=a=>{e(l=>l.filter(d=>d.id!==a))},s=()=>{e([])};return ot.useEffect(()=>{const a=l=>{l.detail&&r(l.detail)};return window.addEventListener("addNotification",a),()=>{window.removeEventListener("addNotification",a)}},[r]),n.length===0?null:y.jsx(nq,{reminders:n,onDismiss:i,onDismissAll:s,onFollowUp:a=>window.dispatchEvent(new CustomEvent("openFollowUp",{detail:a}))})},iq=C.lazy(()=>qe(()=>import("./LandingPage-Dh-msZTO.js"),__vite__mapDeps([120,16,13,38]))),sq=C.lazy(()=>qe(()=>import("./PrivacyPolicyPage-IsNZWy-h.js"),__vite__mapDeps([121,13,43]))),oq=C.lazy(()=>qe(()=>import("./LoginPage-BhrHNd5S.js"),__vite__mapDeps([122,123,74,124]))),aq=C.lazy(()=>qe(()=>import("./SignupPage-DJoxEG-h.js"),__vite__mapDeps([125,123,6,7]))),lq=C.lazy(()=>qe(()=>import("./ForgotPasswordPage-BBKqQRWX.js"),__vite__mapDeps([126,123,43]))),cq=C.lazy(()=>qe(()=>import("./UpdatePasswordPage-BtJy02LO.js"),__vite__mapDeps([127,123]))),uq=C.lazy(()=>qe(()=>import("./AdminLoginPage-Dh04nsGS.js"),__vite__mapDeps([128,74,124]))),dq=C.lazy(()=>qe(()=>import("./AdminLayout-BLY_RYnw.js"),__vite__mapDeps([129,10,79,65,59,57,22,45,46,47,5,48,2,98,107,25,89,21,116,67,35,80,18,36,68,76,6,7,32,50,33,28,99,52,8]))),hq=C.lazy(()=>qe(()=>import("./PublicFormPage-C80cjb_D.js"),[])),fq=C.lazy(()=>qe(()=>import("./PublicBookingPage-78jGupIW.js"),__vite__mapDeps([130,68,113,76,27,22,56,57,64]))),pq=C.lazy(()=>qe(()=>import("./AssinafyWebhookPage-v__crRDY.js"),[])),mq=C.lazy(()=>qe(()=>import("./MaintenancePage-Cj7SAXcJ.js"),[])),gq=C.lazy(()=>qe(()=>import("./BlogPage-CfUQQCu8.js"),__vite__mapDeps([117,22]))),vq=C.lazy(()=>qe(()=>import("./BlogPostPage-gXMgKBlj.js"),__vite__mapDeps([131,43,101,22]))),E1=C.lazy(()=>qe(()=>import("./ProposalEditorPage-4usAH0He.js"),__vite__mapDeps([132,111,112,3,2,33,30,39,113,5,48,92,94,114,45,46,47,71,115,35,18,36,82,67,63,116,4,50,28,7,6,85,8,68,43,109,96,101,52,49,19,66]))),Cw=C.lazy(()=>qe(()=>import("./CustomPageViewer-2Zr3xwsz.js"),__vite__mapDeps([133,22,37,43]))),yq=C.lazy(()=>qe(()=>import("./TutorialsPage-Cw1XBKHR.js"),__vite__mapDeps([134,31]))),wq=C.lazy(()=>qe(()=>import("./ProposalPublicView-DWIZrZWP.js"),__vite__mapDeps([135,112,3,2,33,30,39,113,5,48,92,94,114])));C.lazy(()=>qe(()=>import("./StudioPage-BwZa69Tm.js"),__vite__mapDeps([104,18,101,7,21,25,79,65,59,57,22,91,31,105,23])));const k1=C.lazy(()=>qe(()=>import("./ContractEditorPage-CZTQewI3.js"),__vite__mapDeps([108,92,63,109,19,30,52,43,7,76]))),cv=({children:n})=>y.jsx(y.Fragment,{children:n}),_q=()=>{const n=Ls(),e=n.pathname.startsWith("/studio/proposals/edit/")||n.pathname==="/studio/proposals/new";return y.jsx(LU,{children:y.jsx(j6,{hideSidebar:e,children:y.jsx(j_,{})})})},bq=()=>y.jsxs(sC,{children:[y.jsx(Ve,{path:"/lp",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(iq,{})})}),y.jsx(Ve,{path:"/politica-de-privacidade-e-dados",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(sq,{})})}),y.jsx(Ve,{path:"/login",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(oq,{})})}),y.jsx(Ve,{path:"/signup",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(aq,{})})}),y.jsx(Ve,{path:"/forgot-password",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(lq,{})})}),y.jsx(Ve,{path:"/update-password",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(cq,{})})}),y.jsx(Ve,{path:"/f/:formId",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(hq,{})})}),y.jsx(Ve,{path:"/agendar/:bookingLinkId",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(fq,{})})}),y.jsx(Ve,{path:"/p/:slug",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(wq,{})})}),y.jsx(Ve,{path:"/webhooks/assinafy",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(pq,{})})}),y.jsx(Ve,{path:"/manutencao",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(mq,{})})}),y.jsx(Ve,{path:"/blog",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(gq,{})})}),y.jsx(Ve,{path:"/blog/:slug",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(vq,{})})}),y.jsx(Ve,{path:"/control-acess/login",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(uq,{})})}),y.jsx(Ve,{path:"/control-acess/*",element:y.jsx(F6,{children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(dq,{})})})}),y.jsx(Ve,{path:"/sobre",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(Cw,{slug:"sobre"})})}),y.jsx(Ve,{path:"/fale-conosco",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(Cw,{slug:"fale-conosco"})})}),y.jsx(Ve,{path:"/tutoriais",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(yq,{})})}),y.jsx(Ve,{path:"/tutoriais/:slug",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(Cw,{isTutorial:!0})})}),y.jsx(Ve,{path:"/studio/proposals/new",element:y.jsx(cv,{children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(E1,{})})})}),y.jsx(Ve,{path:"/studio/proposals/edit/:proposalId",element:y.jsx(cv,{children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(E1,{})})})}),y.jsx(Ve,{path:"/studio/contracts/new",element:y.jsx(cv,{children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(k1,{mode:"new"})})})}),y.jsx(Ve,{path:"/studio/contracts/edit/:contractId",element:y.jsx(cv,{children:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(k1,{mode:"edit"})})})}),y.jsx(Ve,{path:"/*",element:y.jsx(_q,{}),children:y.jsx(Ve,{path:"*",element:y.jsx(C.Suspense,{fallback:y.jsx(Ut,{}),children:y.jsx(j_,{})})})})]});function xq(){return y.jsxs(dN,{children:[y.jsx(gN,{children:y.jsx(xC,{children:y.jsx(pF,{children:y.jsx(mF,{children:y.jsx(wF,{children:y.jsxs(jR,{children:[y.jsx($6,{}),y.jsx(B6,{}),y.jsx(bq,{})]})})})})})}),y.jsx(rq,{})]})}var Dp={};Dp.d=(n,e)=>{for(var t in e)Dp.o(e,t)&&!Dp.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Dp.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var at=globalThis.pdfjsLib={};Dp.d(at,{AbortException:()=>fu,AnnotationEditorLayer:()=>ma,AnnotationEditorParamsType:()=>it,AnnotationEditorType:()=>ft,AnnotationEditorUIManager:()=>Pl,AnnotationLayer:()=>_8,AnnotationMode:()=>yl,ColorPicker:()=>Xi,DOMSVGFactory:()=>gx,DrawLayer:()=>_r,FeatureTest:()=>Lr,GlobalWorkerOptions:()=>Np,ImageKind:()=>Sv,InvalidPDFException:()=>eM,MissingPDFException:()=>hu,OPS:()=>Rs,OutputScale:()=>C_,PDFDataRangeTransport:()=>yM,PDFDateString:()=>nM,PDFWorker:()=>vh,PasswordResponses:()=>Eq,PermissionFlag:()=>Cq,PixelsPerInch:()=>Eh,RenderingCancelledException:()=>ix,TextLayer:()=>Dr,UnexpectedResponseException:()=>Iy,Util:()=>ze,VerbosityLevel:()=>Py,XfaLayer:()=>_M,build:()=>e8,createValidAbsoluteUrl:()=>Rq,fetchData:()=>Oy,getDocument:()=>WG,getFilenameFromUrl:()=>Bq,getPdfFilenameFromUrl:()=>$q,getXfaPageViewport:()=>Uq,isDataScheme:()=>Ny,isPdfFile:()=>sx,noContextMenu:()=>es,normalizeUnicode:()=>Lq,setLayerDimensions:()=>iu,shadow:()=>bt,version:()=>ZG});const Sr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ZR=[1,0,0,1,0,0],x_=[.001,0,0,.001,0,0],Sq=1e7,Ew=1.35,Si={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},yl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Aq="pdfjs_internal_editor_",ft={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},it={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Cq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Sv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},vp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Py={ERRORS:0,WARNINGS:1,INFOS:5},Rs={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Eq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ry=Py.WARNINGS;function kq(n){Number.isInteger(n)&&(Ry=n)}function Tq(){return Ry}function My(n){Ry>=Py.INFOS&&console.log(`Info: ${n}`)}function mt(n){Ry>=Py.WARNINGS&&console.log(`Warning: ${n}`)}function Zt(n){throw new Error(n)}function $n(n,e){n||Zt(e)}function Pq(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rq(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=Nq(n)}catch{}const r=e?new URL(n,e):new URL(n);if(Pq(r))return r}catch{}return null}function bt(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Nl=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class S_ extends Nl{constructor(e,t){super(e,"PasswordException"),this.code=t}}class A_ extends Nl{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class eM extends Nl{constructor(e){super(e,"InvalidPDFException")}}class hu extends Nl{constructor(e){super(e,"MissingPDFException")}}class Iy extends Nl{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Mq extends Nl{constructor(e){super(e,"FormatError")}}class fu extends Nl{constructor(e){super(e,"AbortException")}}function tM(n){(typeof n!="object"||n?.length===void 0)&&Zt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=n.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Dy(n){typeof n!="string"&&Zt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Iq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function nx(n){const e=Object.create(null);for(const[t,r]of n)e[t]=r;return e}function Dq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Oq(){try{return new Function(""),!0}catch{return!1}}class Lr{static get isLittleEndian(){return bt(this,"isLittleEndian",Dq())}static get isEvalSupported(){return bt(this,"isEvalSupported",Oq())}static get isOffscreenCanvasSupported(){return bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?bt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):bt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return bt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const kw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class ze{static makeHexColor(e,t,r){return`#${kw[e]}${kw[t]}${kw[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[r,i]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[i,s]}static getAxialAlignedBoundingBox(e,t){const r=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],s[0],a[0]),Math.min(r[1],i[1],s[1],a[1]),Math.max(r[0],i[0],s[0],a[0]),Math.max(r[1],i[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(r+a)/2,d=Math.sqrt((r+a)**2-4*(r*a-s*i))/2,h=l+d||1,f=l-d||1;return[Math.sqrt(h),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[r,s,i,a]}static#e(e,t,r,i,s,a,l,d,h,f){if(h<=0||h>=1)return;const g=1-h,v=h*h,b=v*h,S=g*(g*(g*e+3*h*t)+3*v*r)+b*i,x=g*(g*(g*s+3*h*a)+3*v*l)+b*d;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],x),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],x)}static#t(e,t,r,i,s,a,l,d,h,f,g,v){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,r,i,s,a,l,d,-g/f,v);return}const b=f**2-4*g*h;if(b<0)return;const S=Math.sqrt(b),x=2*h;this.#e(e,t,r,i,s,a,l,d,(-f+S)/x,v),this.#e(e,t,r,i,s,a,l,d,(-f-S)/x,v)}static bezierBoundingBox(e,t,r,i,s,a,l,d,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,d)):h=[Math.min(e,l),Math.min(t,d),Math.max(e,l),Math.max(t,d)],this.#t(e,r,s,l,t,i,a,d,3*(-e+3*(r-s)+l),6*(e-2*r+s),3*(r-e),h),this.#t(e,r,s,l,t,i,a,d,3*(-t+3*(i-a)+d),6*(t-2*i+a),3*(i-t),h),h}}function Nq(n){return decodeURIComponent(escape(n))}let Tw=null,T1=null;function Lq(n){return Tw||(Tw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,T1=new Map([["ﬅ","ſt"]])),n.replaceAll(Tw,(e,t,r)=>t?t.normalize("NFKC"):T1.get(r))}function jq(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return tM(n)}const rx="pdfjs_internal_id_",ca={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Fq(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(tM(n))}const ha="http://www.w3.org/2000/svg";class Eh{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Oy(n,e="text"){if(Cp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class fm{constructor({viewBox:e,scale:t,rotation:r,offsetX:i=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=i,this.offsetY=s;const l=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,g,v;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,g=0,v=1;break;case 90:h=0,f=1,g=1,v=0;break;case 270:h=0,f=-1,g=-1,v=0;break;case 0:h=1,f=0,g=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,v=-v);let b,S,x,E;h===0?(b=Math.abs(d-e[1])*t+i,S=Math.abs(l-e[0])*t+s,x=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(b=Math.abs(l-e[0])*t+i,S=Math.abs(d-e[1])*t+s,x=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[h*t,f*t,g*t,v*t,b-h*t*l-g*t*d,S-f*t*l-v*t*d],this.width=x,this.height=E}get rawDims(){const{viewBox:e}=this;return bt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new fm({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){return ze.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ze.applyTransform([e[0],e[1]],this.transform),r=ze.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return ze.applyInverseTransform([e,t],this.transform)}}class ix extends Nl{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ny(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function sx(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Bq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function $q(n,e="document.pdf"){if(typeof n!="string")return e;if(Ny(n))return mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let s=r.exec(i[1])||r.exec(i[2])||r.exec(i[3]);if(s&&(s=s[0],s.includes("%")))try{s=r.exec(decodeURIComponent(s))[0]}catch{}return s||e}class P1{started=Object.create(null);times=[];time(e){e in this.started&&mt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||mt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Cp(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function es(n){n.preventDefault()}function R1(n){console.log("Deprecated API usage: "+n)}class nM{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(a+=f,l+=g):h==="+"&&(a-=f,l-=g),new Date(Date.UTC(r,i,s,a,l,d))}}function Uq(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new fm({viewBox:s,scale:e,rotation:t})}function ox(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(mt(`Not a valid color format: "${n}"`),[0,0,0])}function Vq(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,ox(r))}e.remove()}function an(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform();return[e,t,r,i,s,a]}function ua(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform().invertSelf();return[e,t,r,i,s,a]}function iu(n,e,t=!1,r=!0){if(e instanceof fm){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=n,l=Lr.isCSSRoundSupported,d=`var(--scale-factor) * ${i}px`,h=`var(--scale-factor) * ${s}px`,f=l?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,g=l?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!t||e.rotation%180===0?(a.width=f,a.height=g):(a.width=g,a.height=f)}r&&n.setAttribute("data-main-rotation",e.rotation)}class C_{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class Op{#e=null;#t=null;#n;#i=null;#s=null;static#r=null;constructor(e){this.#n=e,Op.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",es,{signal:t}),e.addEventListener("pointerdown",Op.#l,{signal:t});const r=this.#i=document.createElement("div");r.className="buttons",e.append(r);const i=this.#n.toolbarPosition;if(i){const{style:s}=e,a=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",es,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",Op.#r[e]),this.#a(r),r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#i.append(r)}get#o(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#a(t),this.#i.prepend(t,this.#o),this.#s=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class zq{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",es,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#r(),e}#s(e,t){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const l=s.x+(t?s.width:0);if(a>r){i=l,r=a;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,r]}show(e,t,r){const[i,s]=this.#s(t,r),{style:a}=this.#t||=this.#i();e.append(this.#t),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=this.#n._signal;e.addEventListener("contextmenu",es,{signal:r}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:r}),this.#e.append(e)}}function Gv(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}function Hq(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}class Wq{#e=0;get id(){return`${Aq}${this.#e++}`}}class ax{#e=jq();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return bt(this,"_isSVGFittingCanvas",s)}async#i(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(r.url=t,i=await Oy(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=ax._isSVGFittingCanvas,a=new FileReader,l=new Image,d=new Promise((h,f)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,h()},a.onload=async()=>{const g=r.svgUrl=a.result;l.src=await s?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=a.onerror=f});a.readAsDataURL(i),await d}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){console.error(i),r=null}return this.#n.set(e,r),r&&this.#n.set(r.id,r),r}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return this.#i(`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,t){const r=await t;return this.#i(e,r)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let r=this.#n.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,r),this.#n.set(r.id,r),r}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}r.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class qq{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const d={cmd:e,undo:t,post:r,type:s};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(d);return}if(a&&this.#e[this.#i].type===s){l&&(d.undo=this.#e[this.#i].undo),this.#e[this.#i]=d;return}const h=this.#i+1;h===this.#n?this.#e.splice(0,1):(this.#i=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class pm{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Lr.platform;for(const[r,i,s={}]of e)for(const a of r){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(this.#e(t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:l=null}}=r;l&&!l(e,t)||(i.bind(e,...a,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class lx{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Vq(e),bt(this,"_colors",e)}convert(e){const t=ox(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,a)=>s===t[a]))return lx._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ze.makeHexColor(...t):e}}class Pl{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#s=null;#r=null;#l=null;#c=new qq;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#v=!1;#g=!1;#m=null;#y=null;#_=null;#E=null;#S=!1;#A=null;#N=new Wq;#k=!1;#b=!1;#C=null;#T=null;#P=null;#I=null;#x=ft.NONE;#w=new Set;#D=null;#O=null;#L=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#B=[0,0];#j=null;#F=null;#U=null;#R=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Pl.prototype,t=a=>a.#F.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return bt(this,"_keyboardManager",new pm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#F.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}constructor(e,t,r,i,s,a,l,d,h,f,g){const v=this._signal=this.#e.signal;this.#F=e,this.#U=t,this.#s=r,this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:v}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),i._on("setpreference",this.onSetPreference.bind(this),{signal:v}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),this.#ee(),this.#ie(),this.#G(),this.#r=s.annotationStorage,this.#m=s.filterFactory,this.#O=a,this.#E=l||null,this.#f=d,this.#v=h,this.#g=f,this.#I=g||null,this.viewParameters={realScale:Eh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#R?.resolve(),this.#R=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#s?.destroy(),this.#A?.hide(),this.#A=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#j&&(clearTimeout(this.#j),this.#j=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#I}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#g}get hcmFilter(){return bt(this,"hcmFilter",this.#O?this.#m.addHCMFilter(this.#O.foreground,this.#O.background):"none")}get direction(){return bt(this,"direction",getComputedStyle(this.#F).direction)}get highlightColors(){return bt(this,"highlightColors",this.#E?new Map(this.#E.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#P=e}editAltText(e,t=!1){this.#s?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#g=t;break}}onPageChanging({pageNumber:e}){this.#a=e-1}focusMainContainer(){this.#F.focus()}findParent(e,t){for(const r of this.#i.values()){const{x:i,y:s,width:a,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+l)return r}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Eh.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#H({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of this.#i.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}=t,l=t.toString(),h=this.#H(t).closest(".textLayer"),f=this.getSelectionBoxes(h);if(!f)return;t.empty();const g=this.#q(h),v=this.#x===ft.NONE,b=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a,text:l}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(ft.HIGHLIGHT,b);return}b()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#H(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#A||=new zq(this),this.#A.show(r,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Z(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#D)return;const i=this.#H(e).closest(".textLayer");if(!i){this.#D&&(this.#A?.hide(),this.#D=null,this.#M({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#D=t,this.#M({hasSelectedText:!0}),!(this.#x!==ft.HIGHLIGHT&&this.#x!==ft.NONE)&&(this.#x===ft.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#x===ft.HIGHLIGHT?this.#q(i):null;s?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),d=h=>{h.type==="pointerup"&&h.button!==0||(a.abort(),s?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}}#W(e=""){this.#x===ft.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#J()}#ee(){document.addEventListener("selectionchange",this.#Z.bind(this),{signal:this._signal})}#te(){if(this.#_)return;this.#_=new AbortController;const e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ne(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#T=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#T)return;const[e,t]=this.#T;this.#T=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#G(){if(this.#C)return;this.#C=new AbortController;const e=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#re(){this.#C?.abort(),this.#C=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#ie(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#G(),this.#K()}removeEditListeners(){this.#re(),this.#Y()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of this.#w){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of this.#h)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){mt(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const d of r){const h=await i.deserialize(d);if(!h)return;s.push(h)}const a=()=>{for(const d of s)this.#X(d);this.#Q(s)},l=()=>{for(const d of s)d.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){mt(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==ft.NONE&&!this.isEditorHandlingKeyboard&&Pl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#M(e){Object.entries(e).some(([r,i])=>this.#V[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,e)}),this.#x===ft.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[it.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#te(),this.#K(),this.#M({isEditing:this.#x!==ft.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#Y(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#h){this.#h=e;for(const t of this.#h)this.#$(t.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#a}addLayer(e){this.#i.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,r=!1){if(this.#x!==e&&!(this.#R&&(await this.#R.promise,!this.#R))){if(this.#R=Promise.withResolvers(),this.#x=e,e===ft.NONE){this.setEditingState(!1),this.#oe(),this.#R.resolve();return}this.setEditingState(!0),await this.#se(),this.unselectAll();for(const i of this.#i.values())i.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),this.#R.resolve();return}for(const i of this.#n.values())i.annotationElementId===t?(this.setSelected(i),i.enterInEditMode()):i.unselect();this.#R.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#h){switch(e){case it.CREATE:this.currentLayer.addNewEditor();return;case it.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(t);break;case it.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const r of this.#w)r.updateParams(e,t);for(const r of this.#h)r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){for(const s of this.#n.values())s.editorType===e&&s.show(t);(this.#L?.get(it.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#$([[it.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#b!==e){this.#b=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#se(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#oe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#i.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const r of this.#n.values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#ae(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ae===e&&this.#$(e.propertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(e){this.#c.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#w],t=()=>{for(const i of e)i.remove()},r=()=>{for(const i of e)this.#X(i)};this.addCommands({cmd:t,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#x!==ft.NONE))&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#B[0]+=e,this.#B[1]+=t;const[i,s]=this.#B,a=[...this.#w],l=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#B[0]=this.#B[1]=0,this.addCommands({cmd:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(i,s)},undo:()=>{for(const d of a)this.#n.has(d.id)&&d.translateInPage(-i,-s)},mustExec:!1})},l);for(const d of a)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const e of this.#w)this.#o.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const e=this.#o;this.#o=null;let t=!1;for(const[{x:i,y:s,pageIndex:a},l]of e)l.newX=i,l.newY=s,l.newPageIndex=a,t||=i!==l.savedX||s!==l.savedY||a!==l.savedPageIndex;if(!t)return!1;const r=(i,s,a,l)=>{if(this.#n.has(i.id)){const d=this.#i.get(l);d?i._setParentAndPosition(d,s,a):(i.pageIndex=l,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:l}]of e)r(i,s,a,l)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:l}]of e)r(i,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#o)for(const r of this.#o.keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#x}get imageManager(){return bt(this,"imageManager",new ax)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,f,g,v)=>({x:(f-i)/a,y:1-(h+g-r)/s,width:v/a,height:g/s});break;case"180":l=(h,f,g,v)=>({x:1-(h+g-r)/s,y:1-(f+v-i)/a,width:g/s,height:v/a});break;case"270":l=(h,f,g,v)=>({x:1-(f+v-i)/a,y:(h-r)/s,width:v/a,height:g/s});break;default:l=(h,f,g,v)=>({x:(h-r)/s,y:(f-i)/a,width:g/s,height:v/a});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x:v,y:b,width:S,height:x}of g.getClientRects())S===0||x===0||d.push(l(v,b,S,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const r=this.#r.getRawValue(t);r&&(this.#x===ft.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}}class po{#e=null;#t=!1;#n=null;#i=null;#s=null;#r=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,po.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){po._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#i=document.createElement("span");e.append(t),this.#o?(e.classList.add("new"),e.setAttribute("data-l10n-id",po.#h.missing),t.setAttribute("data-l10n-id",po.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",es,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#l=!0,i(s))},{signal:r}),await this.#f(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#o?this.#e!==null||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}async setGuessedText(e){this.#e===null&&(this.#a=e,this.#d=await po._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())}toggleAltTextBadge(e=!1){if(!this.#o||this.#e){this.#c?.remove(),this.#c=null;return}if(!this.#c){const t=this.#c=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#c.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#a===t&&(t=this.#d),{altText:t,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(this.#a=r,this.#d=i),!(this.#e===e&&this.#t===t)&&(s||(this.#e=e,this.#t=t),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#c?.remove(),this.#c=null}async#f(){const e=this.#n;if(!e)return;if(this.#o){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",po.#h[this.#p]),this.#i?.setAttribute("data-l10n-id",po.#h[`${this.#p}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#s;if(!t){this.#s=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const i=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:s})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class rt{#e=null;#t=null;#n=null;#i=!1;#s=!1;#r=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#v=0;#g=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#_=rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new lx;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=Pl.TRANSLATE_SMALL,r=Pl.TRANSLATE_BIG;return bt(this,"_resizerKeyboardManager",new pm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Gq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(rt._l10n??=e,rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),rt._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/a,this.fixAndSetPosition()}#E([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this.fixAndSetPosition()}translate(e,t){this.#E(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#E(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[r,i]=this.parentDimensions;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[l,d]=this.getBaseTranslation();s+=l,a+=d,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=rt,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,r]=this.pageDimensions;let{x:i,y:s,width:a,height:l}=this;if(a*=t,l*=r,i*=t,s*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-a,i)),s=Math.max(0,Math.min(r-l,s));break;case 90:i=Math.max(0,Math.min(t-l,i)),s=Math.min(r,Math.max(a,s));break;case 180:i=Math.min(t,Math.max(a,i)),s=Math.min(r,Math.max(l,s));break;case 270:i=Math.min(t,Math.max(l,i)),s=Math.max(0,Math.min(r-a,s));break}this.x=i/=t,this.y=s/=r;const[d,h]=this.getBaseTranslation();i+=d,s+=h;const{style:f}=this.div;f.left=`${(100*i).toFixed(2)}%`,f.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return rt.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return rt.#S(e,t,360-this.parentRotation)}#A(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions;this.div.style.width=`${(100*e/r).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!this.#s&&t.endsWith("%");if(i&&s)return;const[a,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!this.#s&&!s&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#N(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#r.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#k.bind(this,r),{signal:t}),i.addEventListener("contextmenu",es,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#r)}#k(e,t){t.preventDefault();const{isMac:r}=Lr.platform;if(t.button!==0||t.ctrlKey&&r)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#C.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",es,{signal:a});const l=this.x,d=this.y,h=this.width,f=this.height,g=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const b=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=g,this.div.style.cursor=v,this.#b(l,d,h,f)};window.addEventListener("pointerup",b,{signal:a}),window.addEventListener("blur",b,{signal:a})}#b(e,t,r,i){const s=this.x,a=this.y,l=this.width,d=this.height;s===e&&a===t&&l===r&&d===i||this.addCommands({cmd:()=>{this.width=l,this.height=d,this.x=s,this.y=a;const[h,f]=this.parentDimensions;this.setDims(h*l,f*d),this.fixAndSetPosition()},undo:()=>{this.width=r,this.height=i,this.x=e,this.y=t;const[h,f]=this.parentDimensions;this.setDims(h*r,f*i),this.fixAndSetPosition()},mustExec:!0})}#C(e,t){const[r,i]=this.parentDimensions,s=this.x,a=this.y,l=this.width,d=this.height,h=rt.MIN_SIZE/r,f=rt.MIN_SIZE/i,g=te=>Math.round(te*1e4)/1e4,v=this.#A(this.rotation),b=(te,V)=>[v[0]*te+v[2]*V,v[1]*te+v[3]*V],S=this.#A(360-this.rotation),x=(te,V)=>[S[0]*te+S[2]*V,S[1]*te+S[3]*V];let E,P,M=!1,R=!1;switch(e){case"topLeft":M=!0,E=(te,V)=>[0,0],P=(te,V)=>[te,V];break;case"topMiddle":E=(te,V)=>[te/2,0],P=(te,V)=>[te/2,V];break;case"topRight":M=!0,E=(te,V)=>[te,0],P=(te,V)=>[0,V];break;case"middleRight":R=!0,E=(te,V)=>[te,V/2],P=(te,V)=>[0,V/2];break;case"bottomRight":M=!0,E=(te,V)=>[te,V],P=(te,V)=>[0,0];break;case"bottomMiddle":E=(te,V)=>[te/2,V],P=(te,V)=>[te/2,0];break;case"bottomLeft":M=!0,E=(te,V)=>[0,V],P=(te,V)=>[te,0];break;case"middleLeft":R=!0,E=(te,V)=>[0,V/2],P=(te,V)=>[te,V/2];break}const O=E(l,d),L=P(l,d);let B=b(...L);const $=g(s+B[0]),W=g(a+B[1]);let Y=1,ae=1,[se,le]=this.screenToPageTranslation(t.movementX,t.movementY);if([se,le]=x(se/r,le/i),M){const te=Math.hypot(l,d);Y=ae=Math.max(Math.min(Math.hypot(L[0]-O[0]-se,L[1]-O[1]-le)/te,1/l,1/d),h/l,f/d)}else R?Y=Math.max(h,Math.min(1,Math.abs(L[0]-O[0]-se)))/l:ae=Math.max(f,Math.min(1,Math.abs(L[1]-O[1]-le)))/d;const ce=g(l*Y),me=g(d*ae);B=b(...P(ce,me));const q=$-B[0],z=W-B[1];this.width=ce,this.height=me,this.x=q,this.y=z,this.setDims(r*ce,i*me),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#h?this._editToolbar:(this._editToolbar=new Op(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(po.initialize(rt._l10n),this.#n=new po(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#I();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),Gv(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Lr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#a=!0,this._isDraggable){this.#P(e);return}this.#T(e)}get isSelected(){return this._uiManager.isSelected(this)}#T(e){const{isMac:t}=Lr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const r=new AbortController,i=this._uiManager.combinedSignal(r);if(t){this.div.classList.add("moving"),this.#v=e.clientX,this.#g=e.clientY;const a=l=>{const{clientX:d,clientY:h}=l,[f,g]=this.screenToPageTranslation(d-this.#v,h-this.#g);this.#v=d,this.#g=h,this._uiManager.dragSelectedEditors(f,g)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:i})}const s=()=>{r.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#T(e)};window.addEventListener("pointerup",s,{signal:i}),window.addEventListener("blur",s,{signal:i})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[l,d]=this.pageTranslation,h=e/i,f=t/i,g=this.x*s,v=this.y*a,b=this.width*s,S=this.height*a;switch(r){case 0:return[g+h+l,a-v-f-S+d,g+h+b+l,a-v-f+d];case 90:return[g+f+l,a-v+h+d,g+f+S+l,a-v+h+b+d];case 180:return[g-h-b+l,a-v+f+d,g-h+l,a-v+f+S+d];case 270:return[g-f-S+l,a-v-h-b+d,g-f+l,a-v-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,a]=e,l=s-r,d=a-i;switch(this.rotation){case 0:return[r,t-a,l,d];case 90:return[r,t-i,d,l];case 180:return[s,t-i,l,d];case 270:return[s,t-a,d,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#I(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#I()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Zt("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r});i.rotation=e.rotation,i.#e=e.accessibilityData;const[s,a]=i.pageDimensions,[l,d,h,f]=i.getRectInCurrentCoords(e.rect,a);return i.x=l/s,i.y=d/a,i.width=h/s,i.height=f/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#r.classList.remove("hidden"),Gv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const a=this.#x.bind(this),l=this.#w.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",this.#D.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",rt._l10nResizer[f])}}const r=this.#t[0];let i=0;for(const a of t){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let l=0;l<i-s;l++)this.#r.append(this.#r.firstChild);else if(s>i)for(let l=0;l<s-i;l++)this.#r.firstChild.before(this.#r.lastChild);let a=0;for(const l of t){const h=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",rt._l10nResizer[h])}}this.#O(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#x(e){rt._resizerKeyboardManager.exec(this,e)}#w(e){this.#p&&e.relatedTarget?.parentNode!==this.#r&&this.#L()}#D(e){this.#u=this.#p?e:""}#O(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#C(this.#u,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#O(-1),this.#l){const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=this.#l;this.#b(e,t,r,i),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#s=!0;const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:r}=e;let i=this.#m.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(r),this.#m.size===0&&(this.#m=null)},rt._telemetryTimeout),this.#m.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Gq extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const M1=3285377520,Ki=4294901760,fo=65535;class rM{constructor(e){this.h1=e?e&4294967295:M1,this.h2=e?e&4294967295:M1}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let x=0,E=e.length;x<E;x++){const P=e.charCodeAt(x);P<=255?t[r++]=P:(t[r++]=P>>>8,t[r++]=P&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(t.buffer,0,i);let l=0,d=0,h=this.h1,f=this.h2;const g=3432918353,v=461845907,b=g&fo,S=v&fo;for(let x=0;x<i;x++)x&1?(l=a[x],l=l*g&Ki|l*b&fo,l=l<<15|l>>>17,l=l*v&Ki|l*S&fo,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=a[x],d=d*g&Ki|d*b&fo,d=d<<15|d>>>17,d=d*v&Ki|d*S&fo,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,s){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*g&Ki|l*b&fo,l=l<<15|l>>>17,l=l*v&Ki|l*S&fo,i&1?h^=l:f^=l}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ki|e*36045&fo,t=t*4283543511&Ki|((t<<16|e>>>16)*2950163797&Ki)>>>16,e^=t>>>1,e=e*444984403&Ki|e*60499&fo,t=t*3301882366&Ki|((t<<16|e>>>16)*3120437893&Ki)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const E_=Object.freeze({map:null,hash:"",transfer:void 0});class cx{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=this.#n.get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(t))r[s]!==a&&(i=!0,r[s]=a);else i=!0,this.#n.set(e,t);i&&this.#i(),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?nx(this.#n):null}setAll(e){for(const[t,r]of Object.entries(e))this.setValue(t,r)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iM(this)}get serializable(){if(this.#n.size===0)return E_;const e=new Map,t=new rM,r=[],i=Object.create(null);let s=!1;for(const[a,l]of this.#n){const d=l instanceof rt?l.serialize(!1,i):l;d&&(e.set(a,d),t.update(`${a}:${JSON.stringify(d)}`),s||=!!d.bitmap)}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:E_}get editorStats(){let e=null;const t=new Map;for(const r of this.#n.values()){if(!(r instanceof rt))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const a=e[s]||=new Map;for(const[l,d]of Object.entries(i)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const f=h.get(d)??0;h.set(d,f+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class iM extends cx{#e;constructor(e){super();const{map:t,hash:r,transfer:i}=e.serializable,s=structuredClone(t,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){Zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return bt(this,"modifiedIds",{ids:new Set,hash:""})}}class Kq{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if($n(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:s}=e,a=new FontFace(r,i,s);this.addNativeFontFace(a);try{await a.load(),this.#e.add(r),t?.(e)}catch{mt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw mt(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return bt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Sr||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),bt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for($n(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return bt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(O,L){return O.charCodeAt(L)<<24|O.charCodeAt(L+1)<<16|O.charCodeAt(L+2)<<8|O.charCodeAt(L+3)&255}function i(O,L,B,$){const W=O.substring(0,L),Y=O.substring(L+B);return W+$+Y}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let h=0;function f(O,L){if(++h>30){mt("Load test font never loaded."),L();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(f.bind(null,O,L))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,g.length,g);const S=16,x=1482184792;let E=r(v,S);for(s=0,a=g.length-3;s<a;s+=4)E=E-x+r(g,s)|0;s<g.length&&(E=E-x+r(g+"XXX",s)|0),v=i(v,S,4,Iq(E));const P=`url(data:font/opentype;base64,${btoa(v)});`,M=`@font-face {font-family:"${g}";src:${P}}`;this.insertRule(M);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const O of[e.loadedName,g]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=O,R.append(L)}this._document.body.append(R),f(g,()=>{R.remove(),t.complete()})}}class Yq{constructor(e,{disableFontFace:t=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const i in e)this[i]=e[i];this.disableFontFace=t===!0,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Fq(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(s){mt(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(r)||r.length===0)return this.compiledGlyphs[t]=function(s,a){};const i=[];for(let s=0,a=r.length;s<a;)switch(r[s++]){case ca.BEZIER_CURVE_TO:{const[l,d,h,f,g,v]=r.slice(s,s+6);i.push(b=>b.bezierCurveTo(l,d,h,f,g,v)),s+=6}break;case ca.MOVE_TO:{const[l,d]=r.slice(s,s+2);i.push(h=>h.moveTo(l,d)),s+=2}break;case ca.LINE_TO:{const[l,d]=r.slice(s,s+2);i.push(h=>h.lineTo(l,d)),s+=2}break;case ca.QUADRATIC_CURVE_TO:{const[l,d,h,f]=r.slice(s,s+4);i.push(g=>g.quadraticCurveTo(l,d,h,f)),s+=4}break;case ca.RESTORE:i.push(l=>l.restore());break;case ca.SAVE:i.push(l=>l.save());break;case ca.SCALE:$n(i.length===2,"Scale command is only valid at the third position.");break;case ca.TRANSFORM:{const[l,d,h,f,g,v]=r.slice(s,s+6);i.push(b=>b.transform(l,d,h,f,g,v)),s+=6}break;case ca.TRANSLATE:{const[l,d]=r.slice(s,s+2);i.push(h=>h.translate(l,d)),s+=2}break}return this.compiledGlyphs[t]=function(a,l){i[0](a),i[1](a),a.scale(l,-l);for(let d=2,h=i.length;d<h;d++)i[d](a)}}}class sM{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Zt("Abstract method `_createCanvas` called.")}}class Xq extends sM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class oM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Zt("Abstract method `_fetch` called.")}}class aM extends oM{async _fetch(e){const t=await Oy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Dy(t)}}class lM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}class Qq extends lM{#e;#t;#n;#i;#s;#r;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#s=t}get#c(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#a(){if(!this.#n){const e=this.#s.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const r=this.#s.createElementNS(ha,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#s.createElementNS(ha,"defs"),e.append(r),r.append(this.#n),this.#s.body.append(e)}return this.#n}#d(e){if(e.length===1){const d=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=d[g]/255;const f=h.join(",");return[f,f,f]}const[t,r,i]=e,s=new Array(256),a=new Array(256),l=new Array(256);for(let d=0;d<256;d++)s[d]=t[d]/255,a[d]=r[d]/255,l[d]=i[d]/255;return[s.join(","),a.join(","),l.join(",")]}#o(e){if(this.#e===void 0){this.#e="";const t=this.#s.URL;t!==this.#s.baseURI&&(Ny(t)?mt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[r,i,s]=this.#d(e),a=e.length===1?r:`${r}${i}${s}`;if(t=this.#c.get(a),t)return this.#c.set(e,t),t;const l=`g_${this.#i}_transfer_map_${this.#l++}`,d=this.#o(l);this.#c.set(e,d),this.#c.set(a,d);const h=this.#f(l);return this.#g(r,i,s,h),d}addHCMFilter(e,t){const r=`${e}-${t}`,i="base";let s=this.#u.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#u.set(i,s)),!e||!t))return s.url;const a=this.#y(e);e=ze.makeHexColor(...a);const l=this.#y(t);if(t=ze.makeHexColor(...l),this.#a.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return s.url;const d=new Array(256);for(let b=0;b<=255;b++){const S=b/255;d[b]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#i}_hcm_filter`,g=s.filter=this.#f(f);this.#g(h,h,h,g),this.#p(g);const v=(b,S)=>{const x=a[b]/255,E=l[b]/255,P=new Array(S+1);for(let M=0;M<=S;M++)P[M]=x+M/S*(E-x);return P.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),g),s.url=this.#o(f),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[r]=this.#d([e]),i=`alpha_${r}`;if(t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#l++}`,a=this.#o(s);this.#c.set(e,a),this.#c.set(i,a);const l=this.#f(s);return this.#m(r,l),a}addLuminosityFilter(e){let t=this.#c.get(e||"luminosity");if(t)return t;let r,i;if(e?([r]=this.#d([e]),i=`luminosity_${r}`):i="luminosity",t=this.#c.get(i),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#l++}`,a=this.#o(s);this.#c.set(e,a),this.#c.set(i,a);const l=this.#f(s);return this.#h(l),e&&this.#m(r,l),a}addHighlightHCMFilter(e,t,r,i,s){const a=`${t}-${r}-${i}-${s}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!t||!r))return l.url;const[d,h]=[t,r].map(this.#y.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,b]=[i,s].map(this.#y.bind(this));g<f&&([f,g,v,b]=[g,f,b,v]),this.#a.style.color="";const S=(P,M,R)=>{const O=new Array(256),L=(g-f)/R,B=P/255,$=(M-P)/(255*R);let W=0;for(let Y=0;Y<=R;Y++){const ae=Math.round(f+Y*L),se=B+Y*$;for(let le=W;le<=ae;le++)O[le]=se;W=ae+1}for(let Y=W;Y<256;Y++)O[Y]=O[W-1];return O.join(",")},x=`g_${this.#i}_hcm_${e}_filter`,E=l.filter=this.#f(x);return this.#p(E),this.#g(S(v[0],b[0],5),S(v[1],b[1],5),S(v[2],b[2],5),E),l.url=this.#o(x),l.url}destroy(e=!1){e&&this.#u.size!==0||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#s.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#s.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#s.createElementNS(ha,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#v(e,t,r){const i=this.#s.createElementNS(ha,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#g(e,t,r,i){const s=this.#s.createElementNS(ha,"feComponentTransfer");i.append(s),this.#v(s,"feFuncR",e),this.#v(s,"feFuncG",t),this.#v(s,"feFuncB",r)}#m(e,t){const r=this.#s.createElementNS(ha,"feComponentTransfer");t.append(r),this.#v(r,"feFuncA",e)}#y(e){return this.#a.style.color=e,ox(getComputedStyle(this.#a).getPropertyValue("color"))}}class cM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Zt("Abstract method `_fetch` called.")}}class uM extends cM{async _fetch(e){const t=await Oy(e,"arraybuffer");return new Uint8Array(t)}}if(Sr){var k_=Promise.withResolvers(),T_=null;(async()=>{const e=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await qe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,a;return new Map(Object.entries({fs:e,http:t,https:r,url:i,canvas:s,path2d:a}))})().then(e=>{T_=e,k_.resolve()},e=>{mt(`loadPackages: ${e}`),T_=new Map,k_.resolve()})}class Rl{static get promise(){return k_.promise}static get(e){return T_?.get(e)}}async function dM(n){const t=await Rl.get("fs").promises.readFile(n);return new Uint8Array(t)}class Jq extends lM{}class Zq extends sM{_createCanvas(e,t){return Rl.get("canvas").createCanvas(e,t)}}class eG extends oM{async _fetch(e){return dM(e)}}class tG extends cM{async _fetch(e){return dM(e)}}const Nr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function P_(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class ux{getPattern(){Zt("Abstract method `getPattern` called.")}}class nG extends ux{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Nr.STROKE||i===Nr.FILL){const a=t.current.getClippedPathBoundingBox(i,an(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,d=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),r=ze.transform(r,[1,0,0,1,a[0],a[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),P_(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(r);s.setTransform(g)}else P_(e,this._bbox),s=this._createGradient(e);return s}}function Pw(n,e,t,r,i,s,a,l){const d=e.coords,h=e.colors,f=n.data,g=n.width*4;let v;d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=s,s=a,a=v),d[r+1]>d[i+1]&&(v=r,r=i,i=v,v=a,a=l,l=v),d[t+1]>d[r+1]&&(v=t,t=r,r=v,v=s,s=a,a=v);const b=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,x=(d[r]+e.offsetX)*e.scaleX,E=(d[r+1]+e.offsetY)*e.scaleY,P=(d[i]+e.offsetX)*e.scaleX,M=(d[i+1]+e.offsetY)*e.scaleY;if(S>=M)return;const R=h[s],O=h[s+1],L=h[s+2],B=h[a],$=h[a+1],W=h[a+2],Y=h[l],ae=h[l+1],se=h[l+2],le=Math.round(S),ce=Math.round(M);let me,q,z,te,V,ne,J,F;for(let ie=le;ie<=ce;ie++){if(ie<E){const ve=ie<S?0:(S-ie)/(S-E);me=b-(b-x)*ve,q=R-(R-B)*ve,z=O-(O-$)*ve,te=L-(L-W)*ve}else{let ve;ie>M?ve=1:E===M?ve=0:ve=(E-ie)/(E-M),me=x-(x-P)*ve,q=B-(B-Y)*ve,z=$-($-ae)*ve,te=W-(W-se)*ve}let pe;ie<S?pe=0:ie>M?pe=1:pe=(S-ie)/(S-M),V=b-(b-P)*pe,ne=R-(R-Y)*pe,J=O-(O-ae)*pe,F=L-(L-se)*pe;const Te=Math.round(Math.min(me,V)),De=Math.round(Math.max(me,V));let Pe=g*ie+Te*4;for(let ve=Te;ve<=De;ve++)pe=(me-ve)/(me-V),pe<0?pe=0:pe>1&&(pe=1),f[Pe++]=q-(q-ne)*pe|0,f[Pe++]=z-(z-J)*pe|0,f[Pe++]=te-(te-F)*pe|0,f[Pe++]=255}}function rG(n,e,t){const r=e.coords,i=e.colors;let s,a;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(r.length/l)-1,h=l-1;for(s=0;s<d;s++){let f=s*l;for(let g=0;g<h;g++,f++)Pw(n,t,r[f],r[f+1],r[f+l],i[f],i[f+1],i[f+l]),Pw(n,t,r[f+l+1],r[f+1],r[f+l],i[f+l+1],i[f+1],i[f+l])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)Pw(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class iG extends ux{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-d,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),b=h/g,S=f/v,x={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/b,scaleY:1/S},E=g+4,P=v+4,M=r.getCanvas("mesh",E,P),R=M.context,O=R.createImageData(g,v);if(t){const B=O.data;for(let $=0,W=B.length;$<W;$+=4)B[$]=t[0],B[$+1]=t[1],B[$+2]=t[2],B[$+3]=255}for(const B of this._figures)rG(O,B,x);return R.putImageData(O,2,2),{canvas:M.canvas,offsetX:l-2*b,offsetY:d-2*S,scaleX:b,scaleY:S}}getPattern(e,t,r,i){P_(e,this._bbox);let s;if(i===Nr.SHADING)s=ze.singularValueDecompose2dScale(an(e));else if(s=ze.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=ze.singularValueDecompose2dScale(this.matrix);s=[s[0]*l[0],s[1]*l[1]]}const a=this._createMeshCanvas(s,i===Nr.SHADING?null:this._background,t.cachedCanvases);return i!==Nr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class sG extends ux{getPattern(){return"hotpink"}}function oG(n){switch(n[0]){case"RadialAxial":return new nG(n);case"Mesh":return new iG(n);case"Dummy":return new sG}throw new Error(`Unknown IR type: ${n[0]}`)}const I1={COLORED:1,UNCOLORED:2};class dx{static MAX_PATTERN_SIZE=3e3;constructor(e,t,r,i,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:l}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),My("TilingType: "+s);const f=t[0],g=t[1],v=t[2],b=t[3],S=v-f,x=b-g,E=ze.singularValueDecompose2dScale(this.matrix),P=ze.singularValueDecompose2dScale(this.baseTransform),M=E[0]*P[0],R=E[1]*P[1];let O=S,L=x,B=!1,$=!1;const W=Math.ceil(d*M),Y=Math.ceil(h*R),ae=Math.ceil(S*M),se=Math.ceil(x*R);W>=ae?O=d:B=!0,Y>=se?L=h:$=!0;const le=this.getSizeAndScale(O,this.ctx.canvas.width,M),ce=this.getSizeAndScale(L,this.ctx.canvas.height,R),me=e.cachedCanvases.getCanvas("pattern",le.size,ce.size),q=me.context,z=l.createCanvasGraphics(q);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,i,a),q.translate(-le.scale*f,-ce.scale*g),z.transform(le.scale,0,0,ce.scale,0,0),q.save(),this.clipBbox(z,f,g,v,b),z.baseTransform=an(z.ctx),z.executeOperatorList(r),z.endDrawing(),q.restore(),B||$){const te=me.canvas;B&&(O=d),$&&(L=h);const V=this.getSizeAndScale(O,this.ctx.canvas.width,M),ne=this.getSizeAndScale(L,this.ctx.canvas.height,R),J=V.size,F=ne.size,ie=e.cachedCanvases.getCanvas("pattern-workaround",J,F),pe=ie.context,Te=B?Math.floor(S/d):0,De=$?Math.floor(x/h):0;for(let Pe=0;Pe<=Te;Pe++)for(let ve=0;ve<=De;ve++)pe.drawImage(te,J*Pe,F*ve,J,F,0,0,J,F);return{canvas:ie.canvas,scaleX:V.scale,scaleY:ne.scale,offsetX:f,offsetY:g}}return{canvas:me.canvas,scaleX:le.scale,scaleY:ce.scale,offsetX:f,offsetY:g}}getSizeAndScale(e,t,r){const i=Math.max(dx.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const a=i-t,l=s-r;e.ctx.rect(t,r,a,l),e.current.updateRectMinMax(an(e.ctx),[t,r,i,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case I1.COLORED:const a=this.ctx;i.fillStyle=a.fillStyle,i.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case I1.UNCOLORED:const l=ze.makeHexColor(r[0],r[1],r[2]);i.fillStyle=l,i.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new Mq(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==Nr.SHADING&&(s=ze.transform(s,t.baseTransform),this.matrix&&(s=ze.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const d=e.createPattern(a.canvas,"repeat");return d.setTransform(l),d}}function aG({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=Lr.isLittleEndian?4278190080:255,[d,h]=a?[s,l]:[l,s],f=r>>3,g=r&7,v=n.length;t=new Uint32Array(t.buffer);let b=0;for(let S=0;S<i;S++){for(const E=e+f;e<E;e++){const P=e<v?n[e]:255;t[b++]=P&128?h:d,t[b++]=P&64?h:d,t[b++]=P&32?h:d,t[b++]=P&16?h:d,t[b++]=P&8?h:d,t[b++]=P&4?h:d,t[b++]=P&2?h:d,t[b++]=P&1?h:d}if(g===0)continue;const x=e<v?n[e++]:255;for(let E=0;E<g;E++)t[b++]=x&1<<7-E?h:d}return{srcPos:e,destPos:b}}const D1=16,O1=100,lG=15,N1=10,L1=1e3,oi=16;function cG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(r,i){e.translate(r,i),this.__originalTranslate(r,i)},n.scale=function(r,i){e.scale(r,i),this.__originalScale(r,i)},n.transform=function(r,i,s,a,l,d){e.transform(r,i,s,a,l,d),this.__originalTransform(r,i,s,a,l,d)},n.setTransform=function(r,i,s,a,l,d){e.setTransform(r,i,s,a,l,d),this.__originalSetTransform(r,i,s,a,l,d)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(r){e.rotate(r),this.__originalRotate(r)},n.clip=function(r){e.clip(r),this.__originalClip(r)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,a,l){e.bezierCurveTo(t,r,i,s,a,l),this.__originalBezierCurveTo(t,r,i,s,a,l)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class uG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function uv(n,e,t,r,i,s,a,l,d,h){const[f,g,v,b,S,x]=an(n);if(g===0&&v===0){const M=a*f+S,R=Math.round(M),O=l*b+x,L=Math.round(O),B=(a+d)*f+S,$=Math.abs(Math.round(B)-R)||1,W=(l+h)*b+x,Y=Math.abs(Math.round(W)-L)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(b),R,L),n.drawImage(e,t,r,i,s,0,0,$,Y),n.setTransform(f,g,v,b,S,x),[$,Y]}if(f===0&&b===0){const M=l*v+S,R=Math.round(M),O=a*g+x,L=Math.round(O),B=(l+h)*v+S,$=Math.abs(Math.round(B)-R)||1,W=(a+d)*g+x,Y=Math.abs(Math.round(W)-L)||1;return n.setTransform(0,Math.sign(g),Math.sign(v),0,R,L),n.drawImage(e,t,r,i,s,0,0,Y,$),n.setTransform(f,g,v,b,S,x),[Y,$]}n.drawImage(e,t,r,i,s,a,l,d,h);const E=Math.hypot(f,g),P=Math.hypot(v,b);return[E*d,P*h]}function dG(n){const{width:e,height:t}=n;if(e>L1||t>L1)return null;const r=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(t+1)),l,d,h;const f=e+7&-8;let g=new Uint8Array(f*t),v=0;for(const P of n.data){let M=128;for(;M>0;)g[v++]=P&M?0:255,M>>=1}let b=0;for(v=0,g[v]!==0&&(a[0]=1,++b),d=1;d<e;d++)g[v]!==g[v+1]&&(a[d]=g[v]?2:1,++b),v++;for(g[v]!==0&&(a[d]=2,++b),l=1;l<t;l++){v=l*f,h=l*s,g[v-f]!==g[v]&&(a[h]=g[v]?1:8,++b);let P=(g[v]?4:0)+(g[v-f]?8:0);for(d=1;d<e;d++)P=(P>>2)+(g[v+1]?4:0)+(g[v-f+1]?8:0),i[P]&&(a[h+d]=i[P],++b),v++;if(g[v-f]!==g[v]&&(a[h+d]=g[v]?2:4,++b),b>r)return null}for(v=f*(t-1),h=l*s,g[v]!==0&&(a[h]=8,++b),d=1;d<e;d++)g[v]!==g[v+1]&&(a[h+d]=g[v]?4:8,++b),v++;if(g[v]!==0&&(a[h+d]=4,++b),b>r)return null;const S=new Int32Array([0,s,-1,0,-s,0,0,0,1]),x=new Path2D;for(l=0;b&&l<=t;l++){let P=l*s;const M=P+e;for(;P<M&&!a[P];)P++;if(P===M)continue;x.moveTo(P%s,l);const R=P;let O=a[P];do{const L=S[O];do P+=L;while(!a[P]);const B=a[P];B!==5&&B!==10?(O=B,a[P]=0):(O=B&51*O>>4,a[P]&=O>>2|O<<2),x.lineTo(P%s,P/s|0),a[P]||--b}while(R!==P);--l}return g=null,a=null,function(P){P.save(),P.scale(1/e,-1/t),P.translate(0,-t),P.fill(x),P.beginPath(),P.restore()}}class j1{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ZR,this.textMatrixScale=1,this.fontMatrix=x_,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=wr.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=ze.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=ze.applyTransform(t,e),i=ze.applyTransform(t.slice(2),e),s=ze.applyTransform([t[0],t[3]],e),a=ze.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,r[0],i[0],s[0],a[0]),this.minY=Math.min(this.minY,r[1],i[1],s[1],a[1]),this.maxX=Math.max(this.maxX,r[0],i[0],s[0],a[0]),this.maxY=Math.max(this.maxY,r[1],i[1],s[1],a[1])}updateScalingPathMinMax(e,t){ze.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,s,a,l,d,h,f){const g=ze.bezierBoundingBox(t,r,i,s,a,l,d,h,f);f||this.updateRectMinMax(e,g)}getPathBoundingBox(e=Nr.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===Nr.STROKE){t||Zt("Stroke bounding box must include transform.");const i=ze.singularValueDecompose2dScale(t),s=i[0]*this.lineWidth/2,a=i[1]*this.lineWidth/2;r[0]-=s,r[1]-=a,r[2]+=s,r[3]+=a}return r}updateClipFromPath(){const e=ze.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Nr.FILL,t=null){return ze.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function F1(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%oi,s=(t-i)/oi,a=i===0?s:s+1,l=n.createImageData(r,oi);let d=0,h;const f=e.data,g=l.data;let v,b,S,x;if(e.kind===Sv.GRAYSCALE_1BPP){const E=f.byteLength,P=new Uint32Array(g.buffer,0,g.byteLength>>2),M=P.length,R=r+7>>3,O=4294967295,L=Lr.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(S=v<s?oi:i,h=0,b=0;b<S;b++){const B=E-d;let $=0;const W=B>R?r:B*8-7,Y=W&-8;let ae=0,se=0;for(;$<Y;$+=8)se=f[d++],P[h++]=se&128?O:L,P[h++]=se&64?O:L,P[h++]=se&32?O:L,P[h++]=se&16?O:L,P[h++]=se&8?O:L,P[h++]=se&4?O:L,P[h++]=se&2?O:L,P[h++]=se&1?O:L;for(;$<W;$++)ae===0&&(se=f[d++],ae=128),P[h++]=se&ae?O:L,ae>>=1}for(;h<M;)P[h++]=0;n.putImageData(l,0,v*oi)}}else if(e.kind===Sv.RGBA_32BPP){for(b=0,x=r*oi*4,v=0;v<s;v++)g.set(f.subarray(d,d+x)),d+=x,n.putImageData(l,0,b),b+=oi;v<a&&(x=r*i*4,g.set(f.subarray(d,d+x)),n.putImageData(l,0,b))}else if(e.kind===Sv.RGB_24BPP)for(S=oi,x=r*S,v=0;v<a;v++){for(v>=s&&(S=i,x=r*S),h=0,b=x;b--;)g[h++]=f[d++],g[h++]=f[d++],g[h++]=f[d++],g[h++]=255;n.putImageData(l,0,v*oi)}else throw new Error(`bad image kind: ${e.kind}`)}function B1(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%oi,s=(t-i)/oi,a=i===0?s:s+1,l=n.createImageData(r,oi);let d=0;const h=e.data,f=l.data;for(let g=0;g<a;g++){const v=g<s?oi:i;({srcPos:d}=aG({src:h,srcPos:d,dest:f,width:r,height:v,nonBlackColor:0})),n.putImageData(l,0,g*oi)}}function yp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function dv(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Sr){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function $1(n,e){if(e)return!0;const t=ze.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*Eh.PDF_TO_CSS_UNITS);return t[0]<=r&&t[1]<=r}const hG=["butt","round","square"],fG=["miter","round","bevel"],pG={},U1={};class gh{constructor(e,t,r,i,s,{optionalContentConfig:a,markedContentStack:l=null},d,h){this.ctx=e,this.current=new j1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new uG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=l,r){const d=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...an(this.compositeCtx))}this.ctx.save(),dv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=an(this.ctx)}executeOperatorList(e,t,r,i){const s=e.argsArray,a=e.fnArray;let l=t||0;const d=s.length;if(d===l)return l;const h=d-l>N1&&typeof r=="function",f=h?Date.now()+lG:0;let g=0;const v=this.commonObjs,b=this.objs;let S;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(S=a[l],S!==Rs.dependency)this[S].apply(this,s[l]);else for(const x of s[l]){const E=x.startsWith("g_")?v:b;if(!E.has(x))return E.get(x,r),l}if(l++,l===d)return l;if(h&&++g>N1){if(Date.now()>f)return r(),l;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=r,d=i,h="prescale1",f,g;for(;s>2&&l>1||a>2&&d>1;){let v=l,b=d;s>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/v),a>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,a/=d/b),f=this.cachedCanvases.getCanvas(h,v,b),g=f.context,g.clearRect(0,0,v,b),g.drawImage(e,0,0,l,d,0,0,v,b),e=f.canvas,l=v,d=b,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:i}=e,s=this.current.fillColor,a=this.current.patternFill,l=an(t);let d,h,f,g;if((e.bitmap||e.data)&&e.count>1){const W=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),s]),d=this._cachedBitmapsMap.get(W),d||(d=new Map,this._cachedBitmapsMap.set(W,d));const Y=d.get(h);if(Y&&!a){const ae=Math.round(Math.min(l[0],l[2])+l[4]),se=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:Y,offsetX:ae,offsetY:se}}f=Y}f||(g=this.cachedCanvases.getCanvas("maskCanvas",r,i),B1(g.context,e));let v=ze.transform(l,[1/r,0,0,-1/i,0,0]);v=ze.transform(v,[1,0,0,1,0,-i]);const[b,S,x,E]=ze.getAxialAlignedBoundingBox([0,0,r,i],v),P=Math.round(x-b)||1,M=Math.round(E-S)||1,R=this.cachedCanvases.getCanvas("fillCanvas",P,M),O=R.context,L=b,B=S;O.translate(-L,-B),O.transform(...v),f||(f=this._scaleImage(g.canvas,ua(O)),f=f.img,d&&a&&d.set(h,f)),O.imageSmoothingEnabled=$1(an(O),e.interpolate),uv(O,f,0,0,f.width,f.height,0,0,r,i),O.globalCompositeOperation="source-in";const $=ze.transform(ua(O),[1,0,0,1,-L,-B]);return O.fillStyle=a?s.getPattern(t,this,$,Nr.FILL):s,O.fillRect(0,0,r,i),d&&!a&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=hG[e]}setLineJoin(e){this.ctx.lineJoin=fG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.current.fillAlpha=r,this.ctx.globalAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const s=this.ctx;s.setTransform(...an(this.suspendedCtx)),yp(this.suspendedCtx,s),cG(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),yp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],a=i[1],l=i[2]-s,d=i[3]-a;l===0||d===0||(this.genericComposeSMask(t.context,r,l,d,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,a,l,d,h,f,g){let v=e.canvas,b=d-f,S=h-g;if(a){const E=ze.makeHexColor(...a);if(b<0||S<0||b+r>v.width||S+i>v.height){const P=this.cachedCanvases.getCanvas("maskExtension",r,i),M=P.context;M.drawImage(v,-b,-S),M.globalCompositeOperation="destination-atop",M.fillStyle=E,M.fillRect(0,0,r,i),M.globalCompositeOperation="source-over",v=P.canvas,b=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const P=new Path2D;P.rect(b,S,r,i),e.clip(P),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(b,S,r,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const x=new Path2D;x.rect(d,h,r,i),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(v,b,S,r,i,d,h,r,i),t.restore()}save(){this.inSMaskMode?(yp(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),yp(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,i,s,a){this.ctx.transform(e,t,r,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,s=this.current;let a=s.x,l=s.y,d,h;const f=an(i),g=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,v=g?r.slice(0):null;for(let b=0,S=0,x=e.length;b<x;b++)switch(e[b]|0){case Rs.rectangle:a=t[S++],l=t[S++];const E=t[S++],P=t[S++],M=a+E,R=l+P;i.moveTo(a,l),E===0||P===0?i.lineTo(M,R):(i.lineTo(M,l),i.lineTo(M,R),i.lineTo(a,R)),g||s.updateRectMinMax(f,[a,l,M,R]),i.closePath();break;case Rs.moveTo:a=t[S++],l=t[S++],i.moveTo(a,l),g||s.updatePathMinMax(f,a,l);break;case Rs.lineTo:a=t[S++],l=t[S++],i.lineTo(a,l),g||s.updatePathMinMax(f,a,l);break;case Rs.curveTo:d=a,h=l,a=t[S+4],l=t[S+5],i.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],a,l),s.updateCurvePathMinMax(f,d,h,t[S],t[S+1],t[S+2],t[S+3],a,l,v),S+=6;break;case Rs.curveTo2:d=a,h=l,i.bezierCurveTo(a,l,t[S],t[S+1],t[S+2],t[S+3]),s.updateCurvePathMinMax(f,d,h,a,l,t[S],t[S+1],t[S+2],t[S+3],v),a=t[S+2],l=t[S+3],S+=4;break;case Rs.curveTo3:d=a,h=l,a=t[S+2],l=t[S+3],i.bezierCurveTo(t[S],t[S+1],a,l,a,l),s.updateCurvePathMinMax(f,d,h,t[S],t[S+1],a,l,a,l,v),S+=4;break;case Rs.closePath:i.closePath();break}g&&s.updateScalingPathMinMax(f,v),s.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof r=="object"&&r?.getPattern?(t.save(),t.strokeStyle=r.getPattern(t,this,ua(t),Nr.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let s=!1;i&&(t.save(),t.fillStyle=r.getPattern(t,this,ua(t),Nr.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=pG}eoClip(){this.pendingClip=U1}beginText(){this.current.textMatrix=ZR,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const r of e)t.setTransform(...r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||x_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&mt("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const s=r.loadedName||"sans-serif",a=r.systemFontInfo?.css||`"${s}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const d=r.italic?"italic":"normal";let h=t;t<D1?h=D1:t>O1&&(h=O1),this.current.fontSizeScale=t/h,this.ctx.font=`${d} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,i,s,a){this.current.textMatrix=[e,t,r,i,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){const s=this.ctx,a=this.current,l=a.font,d=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,f=d&wr.FILL_STROKE_MASK,g=!!(d&wr.ADD_TO_PATH_FLAG),v=a.patternFill&&!l.missingFile;let b;(l.disableFontFace||g||v)&&(b=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||v?(s.save(),s.translate(t,r),s.beginPath(),b(s,h),i&&s.setTransform(...i),(f===wr.FILL||f===wr.FILL_STROKE)&&s.fill(),(f===wr.STROKE||f===wr.FILL_STROKE)&&s.stroke(),s.restore()):((f===wr.FILL||f===wr.FILL_STROKE)&&s.fillText(e,t,r),(f===wr.STROKE||f===wr.FILL_STROKE)&&s.strokeText(e,t,r)),g&&(this.pendingTextPaths||=[]).push({transform:an(s),x:t,y:r,fontSize:h,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return bt(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const s=this.ctx,a=t.fontSizeScale,l=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,f=t.textHScale*h,g=e.length,v=r.vertical,b=v?1:-1,S=r.defaultVMetrics,x=i*t.fontMatrix[0],E=t.textRenderingMode===wr.FILL&&!r.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),h>0?s.scale(f,-1):s.scale(f,1);let P;if(t.patternFill){s.save();const B=t.fillColor.getPattern(s,this,ua(s),Nr.FILL);P=an(s),s.restore(),s.fillStyle=B}let M=t.lineWidth;const R=t.textMatrixScale;if(R===0||M===0){const B=t.textRenderingMode&wr.FILL_STROKE_MASK;(B===wr.STROKE||B===wr.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=R;if(a!==1&&(s.scale(a,a),M/=a),s.lineWidth=M,r.isInvalidPDFjsFont){const B=[];let $=0;for(const W of e)B.push(W.unicode),$+=W.width;s.fillText(B.join(""),0,0),t.x+=$*x*f,s.restore(),this.compose();return}let O=0,L;for(L=0;L<g;++L){const B=e[L];if(typeof B=="number"){O+=b*B*i/1e3;continue}let $=!1;const W=(B.isSpace?d:0)+l,Y=B.fontChar,ae=B.accent;let se,le,ce=B.width;if(v){const q=B.vmetric||S,z=-(B.vmetric?q[1]:ce*.5)*x,te=q[2]*x;ce=q?-q[0]:ce,se=z/a,le=(O+te)/a}else se=O/a,le=0;if(r.remeasure&&ce>0){const q=s.measureText(Y).width*1e3/i*a;if(ce<q&&this.isFontSubpixelAAEnabled){const z=ce/q;$=!0,s.save(),s.scale(z,1),se/=z}else ce!==q&&(se+=(ce-q)/2e3*i/a)}if(this.contentVisible&&(B.isInFont||r.missingFile)){if(E&&!ae)s.fillText(Y,se,le);else if(this.paintChar(Y,se,le,P),ae){const q=se+i*ae.offset.x/a,z=le-i*ae.offset.y/a;this.paintChar(ae.fontChar,q,z,P)}}const me=v?ce*x-W*h:ce*x+W*h;O+=me,$&&s.restore()}v?t.y-=O:t.x+=O*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,s=r.fontSize,a=r.fontDirection,l=i.vertical?1:-1,d=r.charSpacing,h=r.wordSpacing,f=r.textHScale*a,g=r.fontMatrix||x_,v=e.length,b=r.textRenderingMode===wr.INVISIBLE;let S,x,E,P;if(!(b||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...r.textMatrix),t.translate(r.x,r.y),t.scale(f,a),S=0;S<v;++S){if(x=e[S],typeof x=="number"){P=l*x*s/1e3,this.ctx.translate(P,0),r.x+=P*f;continue}const M=(x.isSpace?h:0)+d,R=i.charProcOperatorList[x.operatorListId];if(!R){mt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),t.scale(s,s),t.transform(...g),this.executeOperatorList(R),this.restore()),E=ze.applyTransform([x.width,0],g)[0]*s+M,t.translate(E,0),r.x+=E*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,i,s,a){this.ctx.rect(r,i,s-r,a-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=e[1],i=this.baseTransform||an(this.ctx),s={createCanvasGraphics:a=>new gh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new dx(e,r,this.ctx,s,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){this.ctx.strokeStyle=this.current.strokeColor=ze.makeHexColor(e,t,r)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,r){this.ctx.fillStyle=this.current.fillColor=ze.makeHexColor(e,t,r),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=oG(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ua(t),Nr.SHADING);const i=ua(t);if(i){const{width:s,height:a}=t.canvas,[l,d,h,f]=ze.getAxialAlignedBoundingBox([0,0,s,a],i);this.ctx.fillRect(l,d,h-l,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Zt("Should not call beginInlineImage")}beginImageData(){Zt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=an(this.ctx),t)){const r=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],r,i),this.current.updateRectMinMax(an(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||My("TODO: Support non-isolated groups."),e.knockout&&mt("Knockout groups not supported.");const r=an(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=ze.getAxialAlignedBoundingBox(e.bbox,an(t));const s=[0,0,t.canvas.width,t.canvas.height];i=ze.intersect(i,s)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),d=Math.max(Math.ceil(i[2])-a,1),h=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,d,h]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(f,d,h),v=g.context;v.translate(-a,-l),v.transform(...r),e.smask?this.smaskStack.push({canvas:g.canvas,context:v,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),yp(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=an(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const s=ze.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,r,i,s){if(this.#e(),dv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(s&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[d,h]=ze.singularValueDecompose2dScale(an(this.ctx)),{viewportScale:f}=this,g=Math.ceil(a*this.outputScaleX*f),v=Math.ceil(l*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,v);const{canvas:b,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-h,0,l*h),dv(this.ctx)}else dv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new j1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=dG(e)),i.compiled)){i.compiled(r);return}const s=this._createMaskCanvas(e),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const d=an(l);l.transform(t,r,i,s,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]);for(let f=0,g=a.length;f<g;f+=2){const v=ze.transform(d,[t,r,i,s,a[f],a[f+1]]),[b,S]=ze.applyTransform([0,0],v);l.drawImage(h.canvas,b,S)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,i=this.current.patternFill;for(const s of e){const{data:a,width:l,height:d,transform:h}=s,f=this.cachedCanvases.getCanvas("maskCanvas",l,d),g=f.context;g.save();const v=this.getObject(a,s);B1(g,v),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,ua(t),Nr.FILL):r,g.fillRect(0,0,l,d),g.restore(),t.save(),t.transform(...h),t.scale(1,-1),uv(t,f.canvas,0,0,l,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){mt("Dependent image isn't ready yet");return}const a=s.width,l=s.height,d=[];for(let h=0,f=i.length;h<f;h+=2)d.push({transform:[t,0,0,r,i[h],i[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,i=this.ctx;if(this.save(),!Sr){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/t,-1/r);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,r).context;F1(d,e),s=this.applyTransferMapsToCanvas(d)}const a=this._scaleImage(s,ua(i));i.imageSmoothingEnabled=$1(an(i),e.interpolate),uv(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const s=e.width,a=e.height,d=this.cachedCanvases.getCanvas("inlineImage",s,a).context;F1(d,e),i=this.applyTransferMapsToCanvas(d)}for(const s of t)r.save(),r.transform(...s.transform),r.scale(1,-1),uv(r,i,s.x,s.y,s.w,s.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===U1?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=an(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let a,l;if(r===0&&i===0){const d=Math.abs(t),h=Math.abs(s);if(d===h)if(e===0)a=l=1/d;else{const f=d*e;a=l=f<1?1/f:1}else if(e===0)a=1/d,l=1/h;else{const f=d*e,g=h*e;a=f<1?1/f:1,l=g<1?1/g:1}}else{const d=Math.abs(t*s-r*i),h=Math.hypot(t,r),f=Math.hypot(i,s);if(e===0)a=f/d,l=h/d;else{const g=e*d;a=f>g?f/g:1,l=h>g?h/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[i,s]=this.getScaleForStroking();if(t.lineWidth=r||1,i===1&&s===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(i,s),a.length>0){const l=Math.max(i,s);t.setLineDash(a.map(d=>d/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Rs)gh.prototype[n]!==void 0&&(gh.prototype[Rs[n]]=gh.prototype[n]);class Np{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}const hv={DATA:1,ERROR:2},kn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xi(n){switch(n instanceof Error||typeof n=="object"&&n!==null||Zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new fu(n.message);case"MissingPDFException":return new hu(n.message);case"PasswordException":return new S_(n.message,n.code);case"UnexpectedResponseException":return new Iy(n.message,n.status);case"UnknownErrorException":return new A_(n.message,n.details);default:return new A_(n.message,n.toString())}}class Ep{#e=new AbortController;constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===hv.DATA)i.resolve(e.data);else if(e.callback===hv.ERROR)i.reject(xi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:hv.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:hv.ERROR,callbackId:e.callbackId,reason:xi(a)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,a=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:a,targetName:l,action:e,streamId:s,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,d.postMessage({sourceName:a,targetName:l,stream:kn.PULL,streamId:s,desiredSize:h.desiredSize}),f.promise},cancel:h=>{$n(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,d.postMessage({sourceName:a,targetName:l,stream:kn.CANCEL,streamId:s,reason:xi(h)}),f.promise}},r)}#n(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,l=this.actionHandler[e.action],d={enqueue(h,f=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=f,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:kn.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:kn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){$n(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:kn.ERROR,streamId:t,reason:xi(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(h){h(l(e.data,d))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:kn.START_COMPLETE,streamId:t,success:!0})},function(h){s.postMessage({sourceName:r,targetName:i,stream:kn.START_COMPLETE,streamId:t,reason:xi(h)})})}#i(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case kn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(xi(e.reason));break;case kn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(xi(e.reason));break;case kn.PULL:if(!l){s.postMessage({sourceName:r,targetName:i,stream:kn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(d){d(l.onPull?.())}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:kn.PULL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:kn.PULL_COMPLETE,streamId:t,reason:xi(d)})});break;case kn.ENQUEUE:if($n(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case kn.CLOSE:if($n(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,t);break;case kn.ERROR:$n(a,"error should have stream controller"),a.controller.error(xi(e.reason)),this.#s(a,t);break;case kn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(xi(e.reason)),this.#s(a,t);break;case kn.CANCEL:if(!l)break;new Promise(function(d){d(l.onCancel?.(xi(e.reason)))}).then(function(){s.postMessage({sourceName:r,targetName:i,stream:kn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){s.postMessage({sourceName:r,targetName:i,stream:kn.CANCEL_COMPLETE,streamId:t,reason:xi(d)})}),l.sinkCapability.reject(xi(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#s(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class mG{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return nx(this.#e)}has(e){return this.#e.has(e)}}const oh=Symbol("INTERNAL");class gG{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){this.#e=!!(e&Si.DISPLAY),this.#t=!!(e&Si.PRINT),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,r=!1){e!==oh&&Zt("Internal method `_setVisible` called."),this.#n=r,this.#i=t}}class vG{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=Si.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const r of e.groups)this.#t.set(r.id,new gG(t,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(oh,!1);for(const r of e.on)this.#t.get(r)._setVisible(oh,!0);for(const r of e.off)this.#t.get(r)._setVisible(oh,!1);this.#n=this.getHash()}}#s(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=this.#s(s);else if(this.#t.has(s))a=this.#t.get(s).visible;else return mt(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return My("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(mt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return mt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return mt(`Unknown optional content policy ${e.policy}.`),!0}return mt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){const i=this.#t.get(e);if(!i){mt(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(oh,!1,!0);i._setVisible(oh,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?nx(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new rM;for(const[t,r]of this.#t)e.update(`${t}:${r.visible}`);return this.#e=e.hexdigest()}}class yG{constructor(e,{disableRange:t=!1,disableStream:r=!1}){$n(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,s?.length>0){const d=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});$n(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$n(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new wG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new _G(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class wG{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=sx(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _G{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bG(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let f=l(t);return f=unescape(f),f=d(f),f=h(f),s(f)}if(t=a(n),t){const f=h(t);return s(f)}if(t=r("filename","i").exec(n),t){t=t[1];let f=l(t);return f=h(f),s(f)}function r(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(f,{fatal:!0}),b=Dy(g);g=v.decode(b),e=!1}catch{}}return g}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function a(f){const g=[];let v;const b=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(f))!==null;){let[,x,E,P]=v;if(x=parseInt(x,10),x in g){if(x===0)break;continue}g[x]=[E,P]}const S=[];for(let x=0;x<g.length&&x in g;++x){let[E,P]=g[x];P=l(P),E&&(P=unescape(P),x===0&&(P=d(P))),S.push(P)}return S.join("")}function l(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let v=0;v<g.length;++v){const b=g[v].indexOf('"');b!==-1&&(g[v]=g[v].slice(0,b),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function d(f){const g=f.indexOf("'");if(g===-1)return f;const v=f.slice(0,g),S=f.slice(g+1).replace(/^[^']*'/,"");return i(v,S)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,b,S){if(b==="q"||b==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,E){return String.fromCharCode(parseInt(E,16))}),i(v,S);try{S=atob(S)}catch{}return i(v,S)})}return""}function hx(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function fx({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function px(n){const e=n.get("Content-Disposition");if(e){let t=bG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(sx(t))return t}return null}function Ly(n,e){return n===404||n===0&&e.startsWith("file:")?new hu('Missing PDF "'+e+'".'):new Iy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function hM(n){return n===200||n===206}function fM(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function pM(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(mt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class V1{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=hx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new SG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class xG{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,fM(r,this._withCredentials,this._abortController)).then(s=>{if(!hM(s.status))throw Ly(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:l,suggestedLength:d}=fx({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=px(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fu("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:pM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class SG{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const a=i.url;fetch(a,fM(s,this._withCredentials,this._abortController)).then(l=>{if(!hM(l.status))throw Ly(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:pM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Rw=200,Mw=206;function AG(n){const e=n.response;return typeof e!="string"?e:Dy(e).buffer}class CG{constructor({url:e,httpHeaders:t,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=hx(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const i={begin:e,end:t};for(const s in r)i[s]=r[s];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Mw):i.expectedStatus=Rw,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){const r=this.pendingRequests[e];r&&r.onProgress?.(t)}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError?.(i.status);return}const s=i.status||Rw;if(!(s===Rw&&r.expectedStatus===Mw)&&s!==r.expectedStatus){r.onError?.(i.status);return}const l=AG(i);if(s===Mw){const d=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);r.onDone({begin:parseInt(h[1],10),chunk:l})}else l?r.onDone({begin:0,chunk:l}):r.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class EG{constructor(e){this._source=e,this._manager=new CG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $n(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new kG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new TG(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class kG{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[l,...d]=a.split(": ");return[l,d.join(": ")]})),{allowRangeRequests:i,suggestedLength:s}=fx({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=px(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ly(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class TG{constructor(e,t,r){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Ly(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const PG=/^[a-z][a-z0-9\-+.]+:/i;function RG(n){if(PG.test(n))return new URL(n);const e=Rl.get("url");return new URL(e.pathToFileURL(n))}function mM(n,e,t){return n.protocol==="http:"?Rl.get("http").request(n,{headers:e},t):Rl.get("https").request(n,{headers:e},t)}class MG{constructor(e){this.source=e,this.url=RG(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=hx(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $n(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new OG(this):new IG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new NG(this,e,t):new DG(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class gM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fu("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vM{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class IG extends gM{constructor(e){super(e);const t=Object.fromEntries(e.headers),r=i=>{if(i.statusCode===404){const d=new hu(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(i);const s=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:l}=fx({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=px(s)};this._request=mM(this._url,t,r),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class DG extends vM{constructor(e,t,r){super(e);const i=Object.fromEntries(e.headers);i.Range=`bytes=${t}-${r-1}`;const s=a=>{if(a.statusCode===404){const l=new hu(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(a)};this._request=mM(this._url,i,s),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class OG extends gM{constructor(e){super(e);const t=Rl.get("fs");t.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new hu(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}}class NG extends vM{constructor(e,t,r){super(e);const i=Rl.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}}const LG=1e5,si=30,jG=.8;class Dr{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#v=[];#g=new WeakMap;#m=null;static#y=new Map;static#_=new Map;static#E=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:r}){if(e instanceof ReadableStream)this.#f=e;else if(typeof e=="object")this.#f=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#a=t,this.#o=r.scale*(globalThis.devicePixelRatio||1),this.#d=r.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:s,pageX:a,pageY:l}=r.rawDims;this.#m=[1,0,0,-1,-a,l+s],this.#c=i,this.#l=s,Dr.#P(),iu(t,r),this.#e.promise.finally(()=>{Dr.#A.delete(this),this.#r=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Lr.platform;return bt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:r})=>{if(r){this.#e.resolve();return}this.#s??=t.lang,Object.assign(this.#h,t.styles),this.#N(t.items),e()},this.#e.reject)};return this.#u=this.#f.getReader(),Dr.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const r=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==this.#d&&(t?.(),this.#d=i,iu(this.#a,{rotation:i})),r!==this.#o){t?.(),this.#o=r;const s={div:null,properties:null,ctx:Dr.#C(this.#s)};for(const a of this.#v)s.properties=this.#g.get(a),s.div=a,this.#b(s)}}cancel(){const e=new fu("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#v}get textContentItemsStr(){return this.#p}#N(e){if(this.#n)return;this.#r.ctx??=Dr.#C(this.#s);const t=this.#v,r=this.#p;for(const i of e){if(t.length>LG){mt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#k(i)}}#k(e){const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#v.push(t);const i=ze.transform(this.#m,e.transform);let s=Math.atan2(i[1],i[0]);const a=this.#h[e.fontName];a.vertical&&(s+=Math.PI/2);let l=this.#i&&a.fontSubstitution||a.fontFamily;l=Dr.fontFamilyMap.get(l)||l;const d=Math.hypot(i[2],i[3]),h=d*Dr.#I(l,this.#s);let f,g;s===0?(f=i[4],g=i[5]-h):(f=i[4]+h*Math.sin(s),g=i[5]-h*Math.cos(s));const v="calc(var(--scale-factor)*",b=t.style;this.#t===this.#a?(b.left=`${(100*f/this.#c).toFixed(2)}%`,b.top=`${(100*g/this.#l).toFixed(2)}%`):(b.left=`${v}${f.toFixed(2)}px)`,b.top=`${v}${g.toFixed(2)}px)`),b.fontSize=`${v}${(Dr.#S*d).toFixed(2)}px)`,b.fontFamily=l,r.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);x!==E&&Math.max(x,E)/Math.min(x,E)>1.5&&(S=!0)}if(S&&(r.canvasWidth=a.vertical?e.height:e.width),this.#g.set(t,r),this.#r.div=t,this.#r.properties=r,this.#b(this.#r),r.hasText&&this.#t.append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#t.append(x)}}#b(e){const{div:t,properties:r,ctx:i}=e,{style:s}=t;let a="";if(Dr.#S>1&&(a=`scale(${1/Dr.#S})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:d,fontSize:h}=r;Dr.#T(i,h*this.#o,l);const{width:f}=i.measureText(t.textContent);f>0&&(a=`scaleX(${d*this.#o/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:e}of this.#_.values())e.remove();this.#_.clear()}}static#C(e=null){let t=this.#_.get(e||="");if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#_.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#T(e,t,r){const i=this.#E.get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)}static#P(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#I(e,t){const r=this.#y.get(e);if(r)return r;const i=this.#C(t);i.canvas.width=i.canvas.height=si,this.#T(i,si,e);const s=i.measureText("");let a=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);if(a){const f=a/(a+l);return this.#y.set(e,f),i.canvas.width=i.canvas.height=0,f}i.strokeStyle="red",i.clearRect(0,0,si,si),i.strokeText("g",0,0);let d=i.getImageData(0,0,si,si).data;l=0;for(let f=d.length-1-3;f>=0;f-=4)if(d[f]>0){l=Math.ceil(f/4/si);break}i.clearRect(0,0,si,si),i.strokeText("A",0,si),d=i.getImageData(0,0,si,si).data,a=0;for(let f=0,g=d.length;f<g;f+=4)if(d[f]>0){a=si-Math.floor(f/4/si);break}i.canvas.width=i.canvas.height=0;const h=a?a/(a+l):jG;return this.#y.set(e,h),h}}class em{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){if(!s)return;let a=null;const l=s.name;if(l==="#text")a=s.value;else if(em.shouldBuildText(l))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const d of s.children)i(d)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const FG=65536,BG=100,$G=5e3,UG=Sr?Zq:Xq,VG=Sr?eG:aM,zG=Sr?Jq:Qq,HG=Sr?tG:uM;function WG(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new mx,{docId:t}=e,r=n.url?qG(n.url):null,i=n.data?GG(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,d=n.range instanceof yM?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:FG;let f=n.worker instanceof vh?n.worker:null;const g=n.verbosity,v=typeof n.docBaseUrl=="string"&&!Ny(n.docBaseUrl)?n.docBaseUrl:null,b=typeof n.cMapUrl=="string"?n.cMapUrl:null,S=n.cMapPacked!==!1,x=n.CMapReaderFactory||VG,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,P=n.StandardFontDataFactory||HG,M=n.stopAtErrors!==!0,R=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,O=n.isEvalSupported!==!1,L=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Sr,B=typeof n.isChrome=="boolean"?n.isChrome:!Lr.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,$=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,W=typeof n.disableFontFace=="boolean"?n.disableFontFace:Sr,Y=n.fontExtraProperties===!0,ae=n.enableXfa===!0,se=n.ownerDocument||globalThis.document,le=n.disableRange===!0,ce=n.disableStream===!0,me=n.disableAutoFetch===!0,q=n.pdfBug===!0,z=n.CanvasFactory||UG,te=n.FilterFactory||zG,V=n.enableHWA===!0,ne=d?d.length:n.length??NaN,J=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Sr&&!W,F=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:x===aM&&P===uM&&b&&E&&Cp(b,document.baseURI)&&Cp(E,document.baseURI);n.canvasFactory&&R1("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&R1("`filterFactory`-instance option, please use `FilterFactory` instead.");const ie=null;kq(g);const pe={canvasFactory:new z({ownerDocument:se,enableHWA:V}),filterFactory:new te({docId:t,ownerDocument:se}),cMapReaderFactory:F?null:new x({baseUrl:b,isCompressed:S}),standardFontDataFactory:F?null:new P({baseUrl:E})};if(!f){const Pe={verbosity:g,port:Np.workerPort};f=Pe.port?vh.fromPort(Pe):new vh(Pe),e._worker=f}const Te={docId:t,apiVersion:"4.8.69",data:i,password:l,disableAutoFetch:me,rangeChunkSize:h,length:ne,docBaseUrl:v,enableXfa:ae,evaluatorOptions:{maxImageSize:R,disableFontFace:W,ignoreErrors:M,isEvalSupported:O,isOffscreenCanvasSupported:L,isChrome:B,canvasMaxAreaInBytes:$,fontExtraProperties:Y,useSystemFonts:J,cMapUrl:F?b:null,standardFontDataUrl:F?E:null}},De={disableFontFace:W,fontExtraProperties:Y,ownerDocument:se,pdfBug:q,styleElement:ie,loadingParams:{disableAutoFetch:me,enableXfa:ae}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Pe=f.messageHandler.sendWithPromise("GetDocRequest",Te,i?[i.buffer]:null);let ve;if(d)ve=new yG(d,{disableRange:le,disableStream:ce});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let Oe;Sr?Oe=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Cp(r)?V1:MG:Oe=Cp(r)?V1:EG,ve=new Oe({url:r,length:ne,httpHeaders:s,withCredentials:a,rangeChunkSize:h,disableRange:le,disableStream:ce})}return Pe.then(Oe=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const He=new Ep(t,Oe,f.port),Ye=new QG(He,e,ve,De,pe);e._transport=Ye,He.send("Ready",null)})}).catch(e._capability.reject),e}function qG(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Sr&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function GG(n){if(Sr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Dy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function z1(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class mx{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${mx.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class yM{constructor(e,t,r=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class KG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class YG{#e=null;#t=!1;constructor(e,t,r,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new P1:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new wM,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new fm({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:i=yl.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:g=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(r,i,f,g),{renderingIntent:b,cacheKey:S}=v;this.#t=!1,this.#i(),l||=this._transport.getOptionalContentConfig(b);let x=this._intentStates.get(S);x||(x=Object.create(null),this._intentStates.set(S,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(b&Si.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const P=O=>{x.renderTasks.delete(M),(this._maybeCleanupAfterRender||E)&&(this.#t=!0),this.#n(!E),O?(M.capability.reject(O),this._abortOperatorList({intentState:x,reason:O instanceof Error?O:new Error(O)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new hh({callback:P,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(x.renderTasks||=new Set).add(M);const R=M.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([O,L])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(L.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:O,optionalContentConfig:L}),M.operatorListChanged()}).catch(P),R}getOperatorList({intent:e="display",annotationMode:t=yl.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const a=this._transport.getRenderingIntent(e,t,r,i,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>em.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:d,done:h}){if(h){r(l);return}l.lang??=d.lang,Object.assign(l.styles,d.styles),l.items.push(...d.items),s()},i)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new P1),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},$G),!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:g,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#n(!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ix){let i=BG;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new fu(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class XG{#e=new Map;#t=Promise.resolve();postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:s}=r;if(s.aborted){mt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}var Kv,Xc,Qc,yh,Av,wh,Cv;const tn=class tn{constructor({name:e=null,port:t=null,verbosity:r=Tq()}={}){Gd(this,yh);if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Es(tn,Qc)?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Es(tn,Qc)||np(tn,Qc,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Sr?Promise.all([Rl.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ep("main","worker",e),this._messageHandler.on("ready",function(){}),$g(this,yh,Av).call(this)}_initialize(){if(Es(tn,Xc)||Es(tn,wh,Cv)){this._setupFakeWorker();return}let{workerSrc:e}=tn;try{tn._isSameOrigin(window.location.href,e)||(e=tn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Ep("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:s.signal}),r.on("test",l=>{if(s.abort(),this.destroyed||!l){i();return}this._messageHandler=r,this._port=t,this._webWorker=t,$g(this,yh,Av).call(this)}),r.on("ready",l=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};a();return}catch{My("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Es(tn,Xc)||(mt("Setting up fake worker."),np(tn,Xc,!0)),tn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new XG;this._port=t;const r=`fake${Fx(tn,Kv)._++}`,i=new Ep(r+"_worker",r,t);e.setup(i,t),this._messageHandler=new Ep(r,r+"_worker",t),$g(this,yh,Av).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Es(tn,Qc)?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=Es(this,Qc)?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tn(e)}static get workerSrc(){if(Np.workerSrc)return Np.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return bt(this,"_setupFakeWorkerGlobal",(async()=>Es(this,wh,Cv)?Es(this,wh,Cv):(await import(this.workerSrc)).WorkerMessageHandler)())}};Kv=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,yh=new WeakSet,Av=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},wh=new WeakSet,Cv=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Gd(tn,wh),Gd(tn,Kv,0),Gd(tn,Xc,!1),Gd(tn,Qc),Sr&&(np(tn,Xc,!0),Np.workerSrc||="./pdf.worker.mjs"),tn._isSameOrigin=(e,t)=>{let r;try{if(r=new URL(e),!r.origin||r.origin==="null")return!1}catch{return!1}const i=new URL(t,r);return r.origin===i.origin},tn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let vh=tn;class QG{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#s=null;constructor(e,t,r,i,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new wM,this.fontLoader=new Kq({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(e,t=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return bt(this,"annotationStorage",new cx)}getRenderingIntent(e,t=yl.ENABLE,r=null,i=!1,s=!1){let a=Si.DISPLAY,l=E_;switch(e){case"any":a=Si.ANY;break;case"display":break;case"print":a=Si.PRINT;break;default:mt(`getRenderingIntent - invalid intent: ${e}`)}const d=a&Si.PRINT&&r instanceof iM?r:this.annotationStorage;switch(t){case yl.DISABLE:a+=Si.ANNOTATIONS_DISABLE;break;case yl.ENABLE:break;case yl.ENABLE_FORMS:a+=Si.ANNOTATIONS_FORMS;break;case yl.ENABLE_STORAGE:a+=Si.ANNOTATIONS_STORAGE,l=d.serializable;break;default:mt(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=Si.IS_EDITING),s&&(a+=Si.OPLIST);const{ids:h,hash:f}=d.modifiedIds,g=[a,l.hash,f];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Dr.cleanup(),this._networkStream?.cancelAllRequests(new fu("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{$n(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}$n(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{$n(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:l}){if(l){i.close();return}$n(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new KG(r,this))}),e.on("DocException",function(r){let i;switch(r.name){case"PasswordException":i=new S_(r.message,r.code);break;case"InvalidPDFException":i=new eM(r.message);break;case"MissingPDFException":i=new hu(r.message);break;case"UnexpectedResponseException":i=new Iy(r.message,r.status);break;case"UnknownErrorException":i=new A_(r.message,r.details);break;default:Zt("DocException - expected a valid Error.")}t._capability.reject(i)}),e.on("PasswordRequest",r=>{if(this.#s=Promise.withResolvers(),t.onPassword){const i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{t.onPassword(i,r.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new S_(r.message,r.code));return this.#s.promise}),e.on("DataLoaded",r=>{t.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:d}=this._params;if("error"in s){const v=s.error;mt(`Error during font loading: ${v}`),this.commonObjs.resolve(r,v);break}const h=d&&globalThis.FontInspector?.enabled?(v,b)=>globalThis.FontInspector.fontAdded(v,b):null,f=new Yq(s,{disableFontFace:a,inspectFont:h});this.fontLoader.bind(f).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&f.data&&(f.data=null),this.commonObjs.resolve(r,f)});break;case"CopyLocalImage":const{imageRef:g}=s;$n(g,"The imageRef must be defined.");for(const v of this.#t.values())for(const[,b]of v.objs)if(b?.ref===g)return b.dataLen?(this.commonObjs.resolve(r,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":l.objs.resolve(r,a),a?.dataLen>Sq&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{this.destroyed||t.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(r)}),e.on("FetchStandardFontData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=this.#n.get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const a=new YG(t,s,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#n.set(t,i),i}getPageIndex(e){return z1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new vG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new mG(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Dr.cleanup()}}cachedPageNumber(e){if(!z1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}}const fv=Symbol("INITIAL_DATA");class wM{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:fv}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const r=this.#e[e];if(!r||r.data===fv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=this.#e[e];return!!t&&t.data!==fv}resolve(e,t=null){const r=this.#t(e);r.data=t,r.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==fv&&(yield[e,t])}}}class JG{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class hh{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:v=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new JG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(hh.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");hh.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:i,transform:s,background:a}=this.params;this.gfx=new gh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),hh.#t.delete(this._canvas),this.callback(e||new ix(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),hh.#t.delete(this._canvas),this.callback())))}}const ZG="4.8.69",e8="3634dab10";function H1(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function wp(n){return Math.max(0,Math.min(255,255*n))}class W1{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=wp(e),[e,e,e]}static G_HTML([e]){const t=H1(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(wp)}static RGB_HTML(e){return`#${e.map(H1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[wp(1-Math.min(1,e+i)),wp(1-Math.min(1,r+i)),wp(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,a=1-r,l=Math.min(i,s,a);return["CMYK",i,s,a,l]}}class t8{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Zt("Abstract method `_createSVG` called.")}}class gx extends t8{_createSVG(e){return document.createElementNS(ha,e)}}class _M{static setupStorage(e,t,r,i,s){const a=i.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of r.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[d,h]of Object.entries(a))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}l&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const l=s!=="richText",d=e.div;if(d.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=g}l&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);a.append(g),l&&em.shouldBuildText(i.name)&&h.push(g)}return{textDivs:h}}const f=[[i,-1,a]];for(;f.length>0;){const[g,v,b]=f.at(-1);if(v+1===g.children.length){f.pop();continue}const S=g.children[++f.at(-1)[1]];if(S===null)continue;const{name:x}=S;if(x==="#text"){const P=document.createTextNode(S.value);h.push(P),b.append(P);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,x):document.createElement(x);if(b.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:t,intent:s,linkService:r}),S.children?.length>0)f.push([S,-1,E]);else if(S.value){const P=document.createTextNode(S.value);l&&em.shouldBuildText(x)&&h.push(P),E.append(P)}}for(const g of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const mm=1e3,n8=9,su=new WeakSet;function _a(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class r8{static create(e){switch(e.data.annotationType){case Fn.LINK:return new bM(e);case Fn.TEXT:return new i8(e);case Fn.WIDGET:switch(e.data.fieldType){case"Tx":return new s8(e);case"Btn":return e.data.radioButton?new xM(e):e.data.checkBox?new a8(e):new l8(e);case"Ch":return new c8(e);case"Sig":return new o8(e)}return new pu(e);case Fn.POPUP:return new R_(e);case Fn.FREETEXT:return new SM(e);case Fn.LINE:return new d8(e);case Fn.SQUARE:return new h8(e);case Fn.CIRCLE:return new f8(e);case Fn.POLYLINE:return new AM(e);case Fn.CARET:return new m8(e);case Fn.INK:return new vx(e);case Fn.POLYGON:return new p8(e);case Fn.HIGHLIGHT:return new CM(e);case Fn.UNDERLINE:return new g8(e);case Fn.SQUIGGLY:return new v8(e);case Fn.STRIKEOUT:return new y8(e);case Fn.STAMP:return new EM(e);case Fn.FILEATTACHMENT:return new w8(e);default:return new xn(e)}}}class xn{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:r}){return!!(e?.str||t?.str||r?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xn._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:d}}}}=this;r?.splice(0,4,...e);const{width:h,height:f}=_a(e);t.left=`${100*(e[0]-l)/s}%`,t.top=`${100*(a-e[3]+d)/a}%`,i===0?(t.width=`${100*h/s}%`,t.height=`${100*f/a}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof pu||(s.tabIndex=mm);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof R_){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,s),s}const{width:l,height:d}=_a(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(x>0||E>0){const M=`calc(${x}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=M}else if(this instanceof xM){const M=`calc(${l}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;a.borderRadius=M}switch(t.borderStyle.style){case vp.SOLID:a.borderStyle="solid";break;case vp.DASHED:a.borderStyle="dashed";break;case vp.BEVELED:mt("Unimplemented border style: beveled");break;case vp.INSET:mt("Unimplemented border style: inset");break;case vp.UNDERLINE:a.borderBottomStyle="solid";break}const P=t.borderColor||null;P?(this.#t=!0,a.borderColor=ze.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):a.borderWidth=0}const h=ze.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:g,pageX:v,pageY:b}=i.rawDims;a.left=`${100*(h[0]-v)/f}%`,a.top=`${100*(h[1]-b)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(a.width=`${100*l/f}%`,a.height=`${100*d/g}%`):this.setRotation(S,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:a}=_a(this.data.rect);let l,d;e%180===0?(l=100*s/r,d=100*a/i):(l=100*a/r,d=100*s/i),t.style.width=`${l}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],a=s[0],l=s.slice(1);i.target.style[r]=W1[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:W1[`${a}_rgb`](l)})};return bt(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||r[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const a=r[i];if(a){const l={detail:{[i]:s},target:e};a(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,E,P,M]=e.subarray(2,6);if(i===x&&s===E&&t===P&&r===M)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:x,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=i-t,h=s-r,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0);const v=f.createElement("defs");g.append(v);const b=f.createElement("clipPath"),S=`clippath_${this.data.id}`;b.setAttribute("id",S),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let x=2,E=e.length;x<E;x+=8){const P=e[x],M=e[x+1],R=e[x+2],O=e[x+3],L=f.createElement("rect"),B=(R-t)/d,$=(s-M)/h,W=(P-R)/d,Y=(M-O)/h;L.setAttribute("x",B),L.setAttribute("y",$),L.setAttribute("width",W),L.setAttribute("height",Y),b.append(L),l?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${$}" width="${W}" height="${Y}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=this.#n=new R_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:l}of i){if(s===-1||a===t)continue;const d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!su.has(h)){mt(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:d,domElement:h})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&su.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class bM extends xn{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action),i=!0):e.attachment?(this.#t(r,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#n(r,e.setOCGState),i=!0):e.dest?(this._bindLink(r,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,r=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,r),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const s=r.get(i);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:s,include:a}=t,l=[];if(i.length!==0||s.length!==0){const f=new Set(s);for(const g of i){const v=this._fieldObjects[g]||[];for(const{id:b}of v)f.add(b)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===a&&l.push(v)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const d=this.annotationStorage,h=[];for(const f of l){const{id:g}=f;switch(h.push(g),f.type){case"text":{const b=f.defaultValue||"";d.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;d.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";d.setValue(g,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!su.has(v)){mt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class i8 extends xn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class pu extends xn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Lr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}})})}_setEventListeners(e,t,r,i){for(const[s,a]of r)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,s,a,i),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ze.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||n8,s=e.style;let a;const l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(h/(Ew*i))||1,g=h/f;a=Math.min(i,d(g/Ew))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(i,d(h/Ew))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=ze.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class s8 extends pu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),s.setValue(a.id,{[i]:r})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let s=i.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const d={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type="text",r.setAttribute("value",l??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),su.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=mm,this._setRequired(r,this.data.required),a&&(r.maxLength=a),r.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(r,"value",f.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";r.value=d.userValue=g,d.formattedValue=null});let h=f=>{const{formattedValue:g}=d;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{if(d.focused)return;const{target:v}=g;d.userValue&&(v.value=d.userValue),d.lastCommittedValue=v.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(b){d.userValue=b.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:S}=b.detail;d.formattedValue=S,S!=null&&b.target!==document.activeElement&&(b.target.value=S),e.setValue(t,{formattedValue:S})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{const{charLimit:S}=b.detail,{target:x}=b;if(S===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",S);let E=d.userValue;!E||E.length<=S||(E=E.slice(0,S),x.value=d.userValue=E,e.setValue(t,{value:E}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),r.addEventListener("keydown",g=>{d.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(d.commitKey=3),v===-1)return;const{value:b}=g.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=h;h=null,r.addEventListener("blur",g=>{if(!d.focused||!g.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:v}=g.target;d.userValue=v,d.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),f(g)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",g=>{d.lastCommittedValue=null;const{data:v,target:b}=g,{value:S,selectionStart:x,selectionEnd:E}=b;let P=x,M=E;switch(g.inputType){case"deleteWordBackward":{const R=S.substring(0,x).match(/\w*[^\w]*$/);R&&(P-=R[0].length);break}case"deleteWordForward":{const R=S.substring(x).match(/^[^\w]*\w*/);R&&(M+=R[0].length);break}case"deleteContentBackward":x===E&&(P-=1);break;case"deleteContentForward":x===E&&(M+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:P,selEnd:M}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(h&&r.addEventListener("blur",h),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/a;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class o8 extends pu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class a8 extends pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return su.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=mm,s.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(r,{value:d})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(r,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class xM extends pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(su.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=mm,s.addEventListener("change",a=>{const{name:l,checked:d}=a.target;for(const h of this._getElementsByName(l,r))e.setValue(h.id,{value:!1});e.setValue(r,{value:d})}),s.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",l=>{const d={value:h=>{const f=a===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const v=f&&g.id===r;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class l8 extends bM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class c8 extends pu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");su.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=mm;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,r.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),s=!1),i.append(g)}let a=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),a=()=>{f.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const l=f=>{const g=f?"value":"textContent",{options:v,multiple:b}=i;return b?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let d=l(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const g={value(v){a?.();const b=v.detail.value,S=new Set(Array.isArray(b)?b:[b]);for(const x of i.options)x.selected=S.has(x.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(v){i.multiple=!0},remove(v){const b=i.options,S=v.detail.remove;b[S].selected=!1,i.remove(S),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},clear(v){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(v){const{index:b,displayValue:S,exportValue:x}=v.detail.insert,E=i.children[b],P=document.createElement("option");P.textContent=S,P.value=x,E?E.before(P):i.append(P),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},items(v){const{items:b}=v.detail;for(;i.length!==0;)i.remove(0);for(const S of b){const{displayValue:x,exportValue:E}=S,P=document.createElement("option");P.textContent=x,P.value=E,i.append(P)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(v)}),d=l(!1)},indices(v){const b=new Set(v.detail.indices);for(const S of v.target.options)S.selected=b.has(S.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("input",f=>{const g=l(!0),v=l(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class R_ extends xn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:xn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new u8({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",t.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(r=>`${rx}${r}`).join(",")),this.container}}class u8{#e=this.#N.bind(this);#t=this.#T.bind(this);#n=this.#C.bind(this);#i=this.#b.bind(this);#s=null;#r=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#v=null;#g=null;#m=null;#y=!1;constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:l,parent:d,rect:h,parentRect:f,open:g}){this.#r=e,this.#g=i,this.#l=a,this.#v=l,this.#a=d,this.#s=t,this.#f=h,this.#d=f,this.#u=r,this.#c=nM.toDateObject(s),this.trigger=r.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#i),v.addEventListener("mouseenter",this.#n),v.addEventListener("mouseleave",this.#t),v.classList.add("popupTriggerArea");for(const v of r)v.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,g&&this.#b()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#s){const s=e.style.outlineColor=ze.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ze.makeHexColor(...this.#s.map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=this.#g,e.append(t),this.#c){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}const i=this.#_;if(i)_M.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#r.append(e)}get#_(){const e=this.#v,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#v.html||null}get#E(){return this.#_?.attributes?.style?.fontSize||0}get#S(){return this.#_?.attributes?.style?.color||null}#A(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#S,fontSize:this.#E?`calc(${this.#E}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const l=i[s];r.append(document.createTextNode(l)),s<a-1&&r.append(document.createElement("br"))}return r}#N(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#o)&&this.#b()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#v},e&&(this.#p=null),t&&(this.#v=this.#A(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#v}=this.#m,this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#k(){if(this.#p!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=this.#a;let a=!!this.#d,l=a?this.#d:this.#f;for(const S of this.#u)if(!l||ze.intersect(S.data.rect,l)!==null){l=S.data.rect,a=!0;break}const d=ze.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,g=d[0]+f,v=d[1];this.#p=[100*(g-i)/t,100*(v-s)/r];const{style:b}=this.#r;b.left=`${this.#p[0]}%`,b.top=`${this.#p[1]}%`}#b(){this.#o=!this.#o,this.#o?(this.#C(),this.#r.addEventListener("click",this.#i),this.#r.addEventListener("keydown",this.#e)):(this.#T(),this.#r.removeEventListener("click",this.#i),this.#r.removeEventListener("keydown",this.#e))}#C(){this.#h||this.render(),this.isVisible?this.#o&&this.#r.classList.add("focused"):(this.#k(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#T(){this.#r.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#r.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#C(),this.#y=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class SM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ft.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class d8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:r}=_a(e.rect),i=this.svgFactory.create(t,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class h8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:r}=_a(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",t-s),a.setAttribute("height",r-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class f8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:r}=_a(e.rect),i=this.svgFactory.create(t,r,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",r/2),a.setAttribute("rx",t/2-s/2),a.setAttribute("ry",r/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class AM extends xn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:r,popupRef:i}}=this;if(!t)return this.container;const{width:s,height:a}=_a(e),l=this.svgFactory.create(s,a,!0);let d=[];for(let f=0,g=t.length;f<g;f+=2){const v=t[f]-e[0],b=e[3]-t[f+1];d.push(`${v},${b}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class p8 extends AM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class m8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class vx extends xn{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ft.HIGHLIGHT:ft.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:r,popupRef:i}}=this,{width:s,height:a}=_a(e),l=this.svgFactory.create(s,a,!0);for(const d of t){let h=[];for(let g=0,v=d.length;g<v;g+=2){const b=d[g]-e[0],S=e[3]-d[g+1];h.push(`${b},${S}`)}h=h.join(" ");const f=this.svgFactory.createElement(this.svgElementName);this.#e.push(f),f.setAttribute("points",h),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),l.append(f)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class CM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ft.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class g8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class v8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class y8 extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class EM extends xn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ft.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class w8 extends xn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let r;t.hasAppearance||t.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=Lr.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class _8{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:l}){this.div=e,this.#e=t,this.#t=r,this.#i=l||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}async#s(e,t){const r=e.firstChild||e,i=r.id=`${rx}${t}`,s=await this.#i?.getAriaAttributes(i);if(s)for(const[a,l]of s)r.setAttribute(a,l);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1)}async render(e){const{annotations:t}=e,r=this.div;iu(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new gx,annotationStorage:e.annotationStorage||new cx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const l=a.annotationType===Fn.POPUP;if(l){const f=i.get(a.id);if(!f)continue;s.elements=f}else{const{width:f,height:g}=_a(a.rect);if(f<=0||g<=0)continue}s.data=a;const d=r8.create(s);if(!d.isRenderable)continue;if(!l&&a.popupRef){const f=i.get(a.popupRef);f?f.push(d):i.set(a.popupRef,[d])}const h=d.render();a.hidden&&(h.style.visibility="hidden"),await this.#s(h,a.id),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#r()}update({viewport:e}){const t=this.div;this.viewport=e,iu(t,{rotation:e.rotation}),this.#r(),t.hidden=!1}#r(){if(!this.#t)return;const e=this.div;for(const[t,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const pv=/\r\n?|\n/g;class Bn extends rt{#e;#t="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Bn.prototype,t=s=>s.isEmpty(),r=Pl.TRANSLATE_SMALL,i=Pl.TRANSLATE_BIG;return bt(this,"_keyboardManager",new pm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=ft.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Bn._defaultColor||rt._defaultLineColor,this.#s=e.fontSize||Bn._defaultFontSize}static initialize(e,t){rt.initialize(e,t);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case it.FREETEXT_SIZE:Bn._defaultFontSize=t;break;case it.FREETEXT_COLOR:Bn._defaultColor=t;break}}updateParams(e,t){switch(e){case it.FREETEXT_SIZE:this.#r(t);break;case it.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[it.FREETEXT_SIZE,Bn._defaultFontSize],[it.FREETEXT_COLOR,Bn._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[it.FREETEXT_SIZE,this.#s],[it.FREETEXT_COLOR,this.#e]]}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#u()},r=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},r=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Bn._internalPadding*e,-(Bn._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ft.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Bn.#a(r)),t=r);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:s}=this,a=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/t):(this.width=r.height/e,this.height=r.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const r=i=>{if(this.#t=i,!i){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{r(t)},undo:()=>{r(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Bn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Gv(this,this.div,["dblclick","keydown"]),this.width){const[i,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,d]=this.getInitialTranslation();[l,d]=this.pageTranslationToScreen(l,d);const[h,f]=this.pageDimensions,[g,v]=this.pageTranslation;let b,S;switch(this.rotation){case 0:b=e+(a[0]-g)/h,S=t+this.height-(a[1]-v)/f;break;case 90:b=e+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[d,-l];break;case 180:b=e-this.width+(a[0]-g)/h,S=t-(a[1]-v)/f,[l,d]=[-l,-d];break;case 270:b=e+(a[0]-g-this.height*f)/h,S=t+(a[1]-v-this.width*h)/f,[l,d]=[-d,l];break}this.setAt(b*i,S*s,l,d)}else this.setAt(e*i,t*s,this.width*i,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(pv,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:r}=t;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=Bn.#h(t.getData("text")||"").replaceAll(pv,`
`);if(!i)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:d}=a,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const b=l.parentElement;if(f.push(l.nodeValue.slice(d).replaceAll(pv,"")),b!==this.editorDiv){let S=h;for(const x of this.editorDiv.childNodes){if(x===b){S=f;continue}S.push(Bn.#a(x))}}h.push(l.nodeValue.slice(0,d).replaceAll(pv,""))}else if(l===this.editorDiv){let b=h,S=0;for(const x of this.editorDiv.childNodes)S++===d&&(b=f),b.push(Bn.#a(x))}this.#t=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#d();const g=new Range;let v=h.reduce((b,S)=>b+S.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const S=b.nodeValue.length;if(v<=S){g.setStart(b,v),g.setEnd(b,v);break}v-=S}s.removeAllRanges(),s.addRange(g)}#d(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll(" "," ")}static#h(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,r){let i=null;if(e instanceof SM){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:d,rotation:h,id:f,popupRef:g},textContent:v,textPosition:b,parent:{page:{pageNumber:S}}}=e;if(!v||v.length===0)return null;i=e={annotationType:ft.FREETEXT,color:Array.from(l),fontSize:a,value:v.join(`
`),position:b,pageIndex:S-1,rect:d.slice(0),rotation:h,id:f,deleted:!1,popupRef:g}}const s=await super.deserialize(e,t,r);return s.#s=e.fontSize,s.#e=ze.makeHexColor(...e.color),s.#t=Bn.#h(e.value),s.annotationElementId=e.id||null,s._initialData=i,s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Bn._internalPadding*this.parentScale,r=this.getRect(t,t),i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:ft.FREETEXT,color:i,fontSize:this.#s,value:this.#o(),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){const{value:t,fontSize:r,color:i,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==r||e.color.some((a,l)=>a!==i[l])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:r}=t;r.fontSize=`calc(${this.#s}px * var(--scale-factor))`,r.color=this.#e,t.replaceChildren();for(const s of this.#t.split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),t.append(a)}const i=Bn._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class kM{toSVGPath(){Zt("Abstract method `toSVGPath` must be implemented.")}get box(){Zt("Abstract getter `box` must be implemented.")}serialize(e,t){Zt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Zt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Zt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Yc{#e;#t=[];#n;#i;#s=[];#r=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#v=Yc.#p+Yc.#f;constructor({x:e,y:t},r,i,s,a,l=0){this.#e=r,this.#o=s*i,this.#i=a,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=l,this.#a=Yc.#p*i,this.#u=Yc.#v*i,this.#d=i,this.#h.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#g(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[r,i,s,a]=this.#e;return[(this.#l+(e[0]-t[0])/2-r)/s,(this.#c+(e[1]-t[1])/2-i)/a,(this.#l+(t[0]-e[0])/2-r)/s,(this.#c+(t[1]-e[1])/2-i)/a]}add({x:e,y:t}){this.#l=e,this.#c=t;const[r,i,s,a]=this.#e;let[l,d,h,f]=this.#r.subarray(8,12);const g=e-h,v=t-f,b=Math.hypot(g,v);if(b<this.#u)return!1;const S=b-this.#a,x=S/b,E=x*g,P=x*v;let M=l,R=d;l=h,d=f,h+=E,f+=P,this.#h?.push(e,t);const O=-P/S,L=E/S,B=O*this.#o,$=L*this.#o;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+B,f+$],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-B,f-$],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([l+B,d+$],2),this.#s.push(NaN,NaN,NaN,NaN,(l+B-r)/s,(d+$-i)/a),this.#r.set([l-B,d-$],14),this.#t.push(NaN,NaN,NaN,NaN,(l-B-r)/s,(d-$-i)/a)),this.#r.set([M,R,l,d,h,f],6),!this.isEmpty()):(this.#r.set([M,R,l,d,h,f],6),Math.abs(Math.atan2(R-d,M-l)-Math.atan2(P,E))<Math.PI/2?([l,d,h,f]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((l+h)/2-r)/s,((d+f)/2-i)/a),[l,d,M,R]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((M+l)/2-r)/s,((R+d)/2-i)/a),!0):([M,R,l,d,h,f]=this.#r.subarray(0,6),this.#s.push(((M+5*l)/6-r)/s,((R+5*d)/6-i)/a,((5*l+h)/6-r)/s,((5*d+f)/6-i)/a,((l+h)/2-r)/s,((d+f)/2-i)/a),[h,f,l,d,M,R]=this.#r.subarray(12,18),this.#t.push(((M+5*l)/6-r)/s,((R+5*d)/6-i)/a,((5*l+h)/6-r)/s,((5*d+f)/6-i)/a,((l+h)/2-r)/s,((d+f)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#_(r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(r),r.join(" ")}#m(){const[e,t,r,i]=this.#e,[s,a,l,d]=this.#g();return`M${(this.#r[2]-e)/r} ${(this.#r[3]-t)/i} L${(this.#r[4]-e)/r} ${(this.#r[5]-t)/i} L${s} ${a} L${l} ${d} L${(this.#r[16]-e)/r} ${(this.#r[17]-t)/i} L${(this.#r[14]-e)/r} ${(this.#r[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#_(e){const[t,r,i,s]=this.#e,a=this.#r.subarray(4,6),l=this.#r.subarray(16,18),[d,h,f,g]=this.#g();e.push(`L${(a[0]-t)/i} ${(a[1]-r)/s} L${d} ${h} L${f} ${g} L${(l[0]-t)/i} ${(l[1]-r)/s}`)}newFreeDrawOutline(e,t,r,i,s,a){return new TM(e,t,r,i,s,a)}getOutlines(){const e=this.#s,t=this.#t,r=this.#r,[i,s,a,l]=this.#e,d=new Float64Array((this.#h?.length??0)+2);for(let g=0,v=d.length-2;g<v;g+=2)d[g]=(this.#h[g]-i)/a,d[g+1]=(this.#h[g+1]-s)/l;if(d[d.length-2]=(this.#l-i)/a,d[d.length-1]=(this.#c-s)/l,isNaN(r[6])&&!this.isEmpty())return this.#E(d);const h=new Float64Array(this.#s.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#A(h,f);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+v],h[f+1]=t[g+v+1],f+=2}return this.#S(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#d,this.#n,this.#i)}#E(e){const t=this.#r,[r,i,s,a]=this.#e,[l,d,h,f]=this.#g(),g=new Float64Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(g,e,this.#e,this.#d,this.#n,this.#i)}#S(e,t){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6}#A(e,t){const r=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,a,l,d]=this.#e,[h,f,g,v]=this.#g();return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-a)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-a)/d],t),t+=24}}class TM extends kM{#e;#t=null;#n;#i;#s;#r;#l;constructor(e,t,r,i,s,a){super(),this.#l=e,this.#s=t,this.#e=r,this.#r=i,this.#n=s,this.#i=a,this.#a(a);const{x:l,y:d,width:h,height:f}=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-l)/h,e[g+1]=(e[g+1]-d)/f;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-l)/h,t[g+1]=(t[g+1]-d)/f}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,r=this.#l.length;t<r;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,r,i],s){const a=r-e,l=i-t;let d,h;switch(s){case 0:d=this.#c(this.#l,e,i,a,-l),h=this.#c(this.#s,e,i,a,-l);break;case 90:d=this.#u(this.#l,e,t,a,l),h=this.#u(this.#s,e,t,a,l);break;case 180:d=this.#c(this.#l,r,t,-a,l),h=this.#c(this.#s,r,t,-a,l);break;case 270:d=this.#u(this.#l,r,i,-a,-l),h=this.#u(this.#s,r,i,-a,-l);break}return{outline:Array.from(d),points:[Array.from(h)]}}#c(e,t,r,i,s){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l]*i,a[l+1]=r+e[l+1]*s;return a}#u(e,t,r,i,s){const a=new Float64Array(e.length);for(let l=0,d=e.length;l<d;l+=2)a[l]=t+e[l+1]*i,a[l+1]=r+e[l]*s;return a}#a(e){const t=this.#l;let r=t[4],i=t[5],s=r,a=i,l=r,d=i,h=r,f=i;const g=e?Math.max:Math.min;for(let E=6,P=t.length;E<P;E+=6){if(isNaN(t[E]))s=Math.min(s,t[E+4]),a=Math.min(a,t[E+5]),l=Math.max(l,t[E+4]),d=Math.max(d,t[E+5]),f<t[E+5]?(h=t[E+4],f=t[E+5]):f===t[E+5]&&(h=g(h,t[E+4]));else{const M=ze.bezierBoundingBox(r,i,...t.slice(E,E+6));s=Math.min(s,M[0]),a=Math.min(a,M[1]),l=Math.max(l,M[2]),d=Math.max(d,M[3]),f<M[3]?(h=M[2],f=M[3]):f===M[3]&&(h=g(h,M[2]))}r=t[E+4],i=t[E+5]}const v=s-this.#n,b=a-this.#n,S=l-s+2*this.#n,x=d-a+2*this.#n;this.#t={x:v,y:b,width:S,height:x,lastPoint:[h,f]}}get box(){return this.#t}newOutliner(e,t,r,i,s,a=0){return new Yc(e,t,r,i,s,a)}getNewOutline(e,t){const{x:r,y:i,width:s,height:a}=this.#t,[l,d,h,f]=this.#e,g=s*h,v=a*f,b=r*h+l,S=i*f+d,x=this.newOutliner({x:this.#s[0]*g+b,y:this.#s[1]*v+S},this.#e,this.#r,e,this.#i,t??this.#n);for(let E=2;E<this.#s.length;E+=2)x.add({x:this.#s[E]*g+b,y:this.#s[E+1]*v+S});return x.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class q1{#e;#t=[];#n=[];constructor(e,t=0,r=0,i=!0){let s=1/0,a=-1/0,l=1/0,d=-1/0;const h=10**-4;for(const{x:E,y:P,width:M,height:R}of e){const O=Math.floor((E-t)/h)*h,L=Math.ceil((E+M+t)/h)*h,B=Math.floor((P-t)/h)*h,$=Math.ceil((P+R+t)/h)*h,W=[O,B,$,!0],Y=[L,B,$,!1];this.#t.push(W,Y),s=Math.min(s,O),a=Math.max(a,L),l=Math.min(l,B),d=Math.max(d,$)}const f=a-s+2*r,g=d-l+2*r,v=s-r,b=l-r,S=this.#t.at(i?-1:-2),x=[S[0],S[2]];for(const E of this.#t){const[P,M,R]=E;E[0]=(P-v)/f,E[1]=(M-b)/g,E[2]=(R-b)/g}this.#e={x:v,y:b,width:f,height:g,lastPoint:x}}getOutlines(){this.#t.sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#r(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],r=new Set;for(const a of e){const[l,d,h]=a;t.push([l,d,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const d=t[a][2],h=t[a+1][2];d.push(h),h.push(d),r.add(d),r.add(h)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[l,d,h,f,g]=a;r.delete(a);let v=l,b=d;for(s=[l,h],i.push(s);;){let S;if(r.has(f))S=f;else if(r.has(g))S=g;else break;r.delete(S),[l,d,h,f,g]=S,v!==l&&(s.push(v,b,l,b===d?d:h),v=l),b=b===d?h:d}s.push(v,b)}return new b8(i,this.#e)}#s(e){const t=this.#n;let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,a=t[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1}#r([,e,t]){const r=this.#s(e);this.#n.splice(r,0,[e,t])}#l([,e,t]){const r=this.#s(e);for(let i=r;i<this.#n.length;i++){const[s,a]=this.#n[i];if(s!==e)break;if(s===e&&a===t){this.#n.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=this.#n[i];if(s!==e)break;if(s===e&&a===t){this.#n.splice(i,1);return}}}#c(e){const[t,r,i]=e,s=[[t,r,i]],a=this.#s(i);for(let l=0;l<a;l++){const[d,h]=this.#n[l];for(let f=0,g=s.length;f<g;f++){const[,v,b]=s[f];if(!(h<=v||b<=d)){if(v>=d){if(b>h)s[f][1]=h;else{if(g===1)return[];s.splice(f,1),f--,g--}continue}s[f][2]=d,b>h&&s.push([t,h,b])}}}return s}}class b8 extends kM{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[r,i]=t;e.push(`M${r} ${i}`);for(let s=2;s<t.length;s+=2){const a=t[s],l=t[s+1];a===r?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${a}`),r=a)}e.push("Z")}return e.join(" ")}serialize([e,t,r,i],s){const a=[],l=r-e,d=i-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*l,f[g+1]=i-h[g+1]*d;a.push(f)}return a}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class M_ extends Yc{newFreeDrawOutline(e,t,r,i,s,a){return new x8(e,t,r,i,s,a)}get classNamesForDrawing(){return["highlight","free"]}}class x8 extends TM{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,r,i,s,a=0){return new M_(e,t,r,i,s,a)}}class Xi{#e=null;#t=null;#n;#i=null;#s=!1;#r=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return bt(this,"_keyboardManager",new pm([[["Escape","mac+Escape"],Xi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Xi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Xi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Xi.prototype._moveToPrevious],[["Home","mac+Home"],Xi.prototype._moveToBeginning],[["End","mac+End"],Xi.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#d=it.HIGHLIGHT_COLOR,this.#l=e):(this.#r=!0,this.#d=it.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",Xi.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#v.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const r=this.#t=document.createElement("span");return r.className="swatch",r.setAttribute("aria-hidden",!0),r.style.backgroundColor=this.#n,e.append(r),e}renderMainDropdown(){const e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",es,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[r,i]of this.#a.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",Xi.#o[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.setAttribute("aria-selected",i===this.#n),s.addEventListener("click",this.#p.bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#v(e);return}const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){if(!this.#m){this.#v(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#v(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#v(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#v(e);return}this.#i.lastChild?.focus()}#f(e){Xi._keyboardManager.exec(this,e)}#v(e){if(this.#m){this.hideDropdown();return}if(this.#s=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const t=this.#i=this.#h();this.#e.append(t)}#g(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#a.highlightColors.values();for(const r of this.#i.children)r.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class wn extends rt{#e=null;#t=0;#n;#i=null;#s=null;#r=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#v="";#g;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ft.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=wn.prototype;return bt(this,"_keyboardManager",new pm([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||wn._defaultColor,this.#g=e.thickness||wn._defaultThickness,this.#p=e.opacity||wn._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#v=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#_(e),this.#k()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#k(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new q1(this.#n,.001);this.#a=e.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box;const t=new q1(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{lastPoint:r}=this.#r.box;this.#h=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#_({highlightOutlines:e,highlightId:t,clipPathId:r}){this.#a=e;const i=1.5;if(this.#r=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#d=t,this.#i=r,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,wn.#b(this.#a.box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,wn.#b(this.#r.box,f))}const{x:s,y:a,width:l,height:d}=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=l,this.height=d;break;case 90:{const[f,g]=this.parentDimensions;this.x=a,this.y=1-s,this.width=l*g/f,this.height=d*f/g;break}case 180:this.x=1-s,this.y=1-a,this.width=l,this.height=d;break;case 270:{const[f,g]=this.parentDimensions;this.x=1-a,this.y=s,this.width=l*g/f,this.height=d*f/g;break}}const{lastPoint:h}=this.#r.box;this.#h=[(h[0]-s)/l,(h[1]-a)/d]}static initialize(e,t){rt.initialize(e,t),wn._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case it.HIGHLIGHT_DEFAULT_COLOR:wn._defaultColor=t;break;case it.HIGHLIGHT_THICKNESS:wn._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case it.HIGHLIGHT_COLOR:this.#E(t);break;case it.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[it.HIGHLIGHT_DEFAULT_COLOR,wn._defaultColor],[it.HIGHLIGHT_THICKNESS,wn._defaultThickness]]}get propertiesToUpdate(){return[[it.HIGHLIGHT_COLOR,this.color||wn._defaultColor],[it.HIGHLIGHT_THICKNESS,this.#g||wn._defaultThickness],[it.HIGHLIGHT_FREE,this.#o]]}#E(e){const t=(s,a)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#s?.updateColor(s),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#d,a)},r=this.color,i=this.#p;this.addCommands({cmd:t.bind(this,e,wn._defaultOpacity),undo:t.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#S(e){const t=this.#g,r=i=>{this.#g=i,this.#A(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#s=new Xi({editor:this}),e.addColorPicker(this.#s)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#N(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#k(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#N():e&&(this.#k(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#o)return;this.#_({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,r]=this.parentDimensions;this.setDims(this.width*t,this.height*r)}#N(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#k(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#a,this.color,this.#p),this.#f=e.drawLayer.drawOutline(this.#r),this.#u&&(this.#u.style.clipPath=this.#i))}static#b({x:e,y:t,width:r,height:i},s){switch(s){case 90:return{x:1-t-i,y:e,width:i,height:r};case 180:return{x:1-e-r,y:1-t-i,width:r,height:i};case 270:return{x:t,y:1-e-r,width:i,height:r}}return{x:e,y:t,width:r,height:i}}rotate(e){const{drawLayer:t}=this.parent;let r;this.#o?(e=(e-this.rotation+360)%360,r=wn.#b(this.#a.box,e)):r=wn.#b(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,r),t.updateBox(this.#f,wn.#b(this.#r.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#v&&(e.setAttribute("aria-label",this.#v),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),Gv(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#C(e){wn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#T(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#I(){if(this.#o)return null;const[e,t]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,a=new Float32Array(s.length*8);let l=0;for(const{x:d,y:h,width:f,height:g}of s){const v=d*e+r,b=(1-h-g)*t+i;a[l]=a[l+4]=v,a[l+1]=a[l+3]=b,a[l+2]=a[l+6]=v+f*e,a[l+5]=a[l+7]=b+g*t,l+=8}return a}#x(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:r,x:i,y:s}){const{x:a,y:l,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),v=S=>{S.preventDefault(),S.stopPropagation()},b=S=>{f.abort(),this.#D(e,S)};window.addEventListener("blur",b,{signal:g}),window.addEventListener("pointerup",b,{signal:g}),window.addEventListener("pointerdown",v,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",es,{signal:g}),r.addEventListener("pointermove",this.#w.bind(this,e),{signal:g}),this._freeHighlight=new M_({x:i,y:s},[a,l,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#w(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#D(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,r){let i=null;if(e instanceof CM){const{data:{quadPoints:S,rect:x,rotation:E,id:P,color:M,opacity:R,popupRef:O},parent:{page:{pageNumber:L}}}=e;i=e={annotationType:ft.HIGHLIGHT,color:Array.from(M),opacity:R,quadPoints:S,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:O}}else if(e instanceof vx){const{data:{inkLists:S,rect:x,rotation:E,id:P,color:M,borderStyle:{rawWidth:R},popupRef:O},parent:{page:{pageNumber:L}}}=e;i=e={annotationType:ft.HIGHLIGHT,color:Array.from(M),thickness:R,inkLists:S,boxes:null,pageIndex:L-1,rect:x.slice(0),rotation:E,id:P,deleted:!1,popupRef:O}}const{color:s,quadPoints:a,inkLists:l,opacity:d}=e,h=await super.deserialize(e,t,r);h.color=ze.makeHexColor(...s),h.#p=d||1,l&&(h.#g=e.thickness),h.annotationElementId=e.id||null,h._initialData=i;const[f,g]=h.pageDimensions,[v,b]=h.pageTranslation;if(a){const S=h.#n=[];for(let x=0;x<a.length;x+=8)S.push({x:(a[x]-v)/f,y:1-(a[x+1]-b)/g,width:(a[x+2]-a[x])/f,height:(a[x+1]-a[x+5])/g});h.#y(),h.#k(),h.rotate(h.rotation)}else if(l){h.#o=!0;const S=l[0],x={x:S[0]-v,y:g-(S[1]-b)},E=new M_(x,[0,0,f,g],1,h.#g/2,!0,.001);for(let R=0,O=S.length;R<O;R+=2)x.x=S[R]-v,x.y=g-(S[R+1]-b),E.add(x);const{id:P,clipPathId:M}=t.drawLayer.draw(E,h.color,h._defaultOpacity,!0);h.#_({highlightOutlines:E.getOutlines(),highlightId:P,clipPathId:M}),h.#k()}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),r=rt._colorManager.convert(this.color),i={annotationType:ft.HIGHLIGHT,color:r,opacity:this.#p,thickness:this.#g,quadPoints:this.#I(),outlines:this.#x(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(i)?null:(i.id=this.annotationElementId,i)}#O(e){const{color:t}=this._initialData;return e.color.some((r,i)=>r!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class lr extends rt{#e=0;#t=0;#n=null;#i=new Path2D;#s=!1;#r=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ft.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){rt.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case it.INK_THICKNESS:lr._defaultThickness=t;break;case it.INK_COLOR:lr._defaultColor=t;break;case it.INK_OPACITY:lr._defaultOpacity=t/100;break}}updateParams(e,t){switch(e){case it.INK_THICKNESS:this.#p(t);break;case it.INK_COLOR:this.#f(t);break;case it.INK_OPACITY:this.#v(t);break}}static get defaultPropertiesToUpdate(){return[[it.INK_THICKNESS,lr._defaultThickness],[it.INK_COLOR,lr._defaultColor||rt._defaultLineColor],[it.INK_OPACITY,Math.round(lr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[it.INK_THICKNESS,this.thickness||lr._defaultThickness],[it.INK_COLOR,this.color||lr._defaultColor||rt._defaultLineColor],[it.INK_OPACITY,Math.round(100*(this.opacity??lr._defaultOpacity))]]}#p(e){const t=i=>{this.thickness=i,this.#R()},r=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=i=>{this.color=i,this.#b()},r=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(e){const t=i=>{this.opacity=i,this.#b()};e/=100;const r=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:it.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#I(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#w()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,r=this.width*e,i=this.height*t;this.setDimensions(r,i)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#C())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#T())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#g(){const{parentRotation:e,parentDimensions:[t,r]}=this;switch(e){case 90:return[0,r,r,t];case 180:return[t,r,t,r];case 270:return[t,0,r,t];default:return[0,0,t,r]}}#m(){const{ctx:e,color:t,opacity:r,thickness:i,parentScale:s,scaleFactor:a}=this;e.lineWidth=i*s/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${Hq(r)}`}#y(e,t){this.canvas.addEventListener("contextmenu",es,{signal:this._uiManager._signal}),this.#T(),this.#r=new AbortController;const r=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,this.#c||(this.#c=!0,this.#w(),this.thickness||=lr._defaultThickness,this.color||=lr._defaultColor||rt._defaultLineColor,this.opacity??=lr._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#A(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#_(e,t){const[r,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===r&&t===i)return;const s=this.currentPath;let a=this.#i;if(s.push([e,t]),this.#l=!0,s.length<=2){a.moveTo(...s[0]),a.lineTo(e,t);return}s.length===3&&(this.#i=a=new Path2D,a.moveTo(...s[0])),this.#N(a,...s.at(-3),...s.at(-2),e,t)}#E(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#S(e,t){this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#_(e,t),this.#E();let r;if(this.currentPath.length!==1)r=this.#k();else{const d=[e,t];r=[[d,d.slice(),d.slice(),d]]}const i=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D;const a=()=>{this.allRawPaths.push(s),this.paths.push(r),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#I(),this.#x()),this.#R())};this.addCommands({cmd:a,undo:l,mustExec:!0})}#A(){if(!this.#l)return;this.#l=!1;const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),r=t.map(a=>a[0]),i=t.map(a=>a[1]);Math.min(...r)-e,Math.max(...r)+e,Math.min(...i)-e,Math.max(...i)+e;const{ctx:s}=this;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)s.stroke(a);s.stroke(this.#i),s.restore()}#N(e,t,r,i,s,a,l){const d=(t+i)/2,h=(r+s)/2,f=(i+a)/2,g=(s+l)/2;e.bezierCurveTo(d+2*(i-d)/3,h+2*(s-h)/3,f+2*(i-f)/3,g+2*(s-g)/3,f,g)}#k(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let r,[i,s]=e[0];for(r=1;r<e.length-2;r++){const[v,b]=e[r],[S,x]=e[r+1],E=(v+S)/2,P=(b+x)/2,M=[i+2*(v-i)/3,s+2*(b-s)/3],R=[E+2*(v-E)/3,P+2*(b-P)/3];t.push([[i,s],M,R,[E,P]]),[i,s]=[E,P]}const[a,l]=e[r],[d,h]=e[r+1],f=[i+2*(a-i)/3,s+2*(l-s)/3],g=[d+2*(a-d)/3,h+2*(l-h)/3];return t.push([[i,s],f,g,[d,h]]),t}#b(){if(this.isEmpty()){this.#O();return}this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#O();for(const r of this.bezierPath2D)t.stroke(r)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#R(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#C(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#T(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#_(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#r?.abort(),this.#r=null,this.#C(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",es)},10),this.#S(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#I(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,i,s,a]=this.#g();if(this.setAt(r,i,0,0),this.setDims(s,a),this.#I(),this.width){const[l,d]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*d),this.setAt(e*l,t*d,this.width*l,this.height*d),this.#c=!0,this.#w(),this.setDims(this.width*l,this.height*d),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#w(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#O()}setDimensions(e,t){const r=Math.round(e),i=Math.round(t);if(this.#d===r&&this.#o===i)return;this.#d=r,this.#o=i,this.canvas.style.visibility="hidden";const[s,a]=this.parentDimensions;this.width=e/s,this.height=t/a,this.fixAndSetPosition(),this.#s&&this.#D(e,t),this.#w(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#D(e,t){const r=this.#U(),i=(e-r)/this.#t,s=(t-r)/this.#e;this.scaleFactor=Math.min(i,s)}#O(){const e=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let r=0,i=e.length;r<i;r++){const[s,a,l,d]=e[r];r===0&&t.moveTo(...s),t.bezierCurveTo(a[0],a[1],l[0],l[1],d[0],d[1])}return t}static#V(e,t,r){const[i,s,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]+=i,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]+i,e[d+1]=f+s}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]+=s;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=a-e[d+1],e[d+1]=l-f}break;default:throw new Error("Invalid rotation")}return e}static#B(e,t,r){const[i,s,a,l]=t;switch(r){case 0:for(let d=0,h=e.length;d<h;d+=2)e[d]-=i,e[d+1]=l-e[d+1];break;case 90:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=e[d+1]-s,e[d+1]=f-i}break;case 180:for(let d=0,h=e.length;d<h;d+=2)e[d]=a-e[d],e[d+1]-=s;break;case 270:for(let d=0,h=e.length;d<h;d+=2){const f=e[d];e[d]=l-e[d+1],e[d+1]=a-f}break;default:throw new Error("Invalid rotation")}return e}#j(e,t,r,i){const s=[],a=this.thickness/2,l=e*t+a,d=e*r+a;for(const h of this.paths){const f=[],g=[];for(let v=0,b=h.length;v<b;v++){const[S,x,E,P]=h[v];if(S[0]===P[0]&&S[1]===P[1]&&b===1){const ae=e*S[0]+l,se=e*S[1]+d;f.push(ae,se),g.push(ae,se);break}const M=e*S[0]+l,R=e*S[1]+d,O=e*x[0]+l,L=e*x[1]+d,B=e*E[0]+l,$=e*E[1]+d,W=e*P[0]+l,Y=e*P[1]+d;v===0&&(f.push(M,R),g.push(M,R)),f.push(O,L,B,$,W,Y),g.push(O,L),v===b-1&&g.push(W,Y)}s.push({bezier:lr.#V(f,i,this.rotation),points:lr.#V(g,i,this.rotation)})}return s}#F(){let e=1/0,t=-1/0,r=1/0,i=-1/0;for(const s of this.paths)for(const[a,l,d,h]of s){const f=ze.bezierBoundingBox(...a,...l,...d,...h);e=Math.min(e,f[0]),r=Math.min(r,f[1]),t=Math.max(t,f[2]),i=Math.max(i,f[3])}return[e,r,t,i]}#U(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#R(e=!1){if(this.isEmpty())return;if(!this.#s){this.#b();return}const t=this.#F(),r=this.#U();this.#t=Math.max(rt.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(rt.MIN_SIZE,t[3]-t[1]);const i=Math.ceil(r+this.#t*this.scaleFactor),s=Math.ceil(r+this.#e*this.scaleFactor),[a,l]=this.parentDimensions;this.width=i/a,this.height=s/l,this.setAspectRatio(i,s);const d=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#w(),this.#b(),this.#d=i,this.#o=s,this.setDims(i,s);const f=e?r/this.scaleFactor/2:0;this.translate(d-this.translationX-f,h-this.translationY-f)}static async deserialize(e,t,r){if(e instanceof vx)return null;const i=await super.deserialize(e,t,r);i.thickness=e.thickness,i.color=ze.makeHexColor(...e.color),i.opacity=e.opacity;const[s,a]=i.pageDimensions,l=i.width*s,d=i.height*a,h=i.parentScale,f=e.thickness/2;i.#s=!0,i.#d=Math.round(l),i.#o=Math.round(d);const{paths:g,rect:v,rotation:b}=e;for(let{bezier:x}of g){x=lr.#B(x,v,b);const E=[];i.paths.push(E);let P=h*(x[0]-f),M=h*(x[1]-f);for(let O=2,L=x.length;O<L;O+=6){const B=h*(x[O]-f),$=h*(x[O+1]-f),W=h*(x[O+2]-f),Y=h*(x[O+3]-f),ae=h*(x[O+4]-f),se=h*(x[O+5]-f);E.push([[P,M],[B,$],[W,Y],[ae,se]]),P=ae,M=se}const R=this.#L(E);i.bezierPath2D.push(R)}const S=i.#F();return i.#t=Math.max(rt.MIN_SIZE,S[2]-S[0]),i.#e=Math.max(rt.MIN_SIZE,S[3]-S[1]),i.#D(l,d),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=rt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ft.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class yx extends rt{#e=null;#t=null;#n=null;#i=null;#s=null;#r="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ft.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#s=e.bitmapFile}static initialize(e,t){rt.initialize(e,t)}static get supportedTypes(){return bt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return bt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ft.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#r=e.file.name),this.#f()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:s,height:a,channels:i.length/(s*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const d=l.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());return}if(this.#i){const r=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#o(i)).finally(()=>this.#h());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#o(i)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=yx.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(i)}r()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:t})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i)}return this.div}#f(){const{div:e}=this;let{width:t,height:r}=this.#e;const[i,s]=this.pageDimensions,a=.75;if(this.width)t=this.width*i,r=this.height*s;else if(t>a*i||r>a*s){const f=Math.min(a*i/t,a*s/r);t*=f,r*=f}const[l,d]=this.parentDimensions;this.setDims(t*l/i,r*d/s),this._uiManager.enableWaiting(!1);const h=this.#l=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,r),this.#_(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&h.setAttribute("aria-label",this.#r)}copyCanvas(e,t,r=!1){e||(e=224);const{width:i,height:s}=this.#e,a=new C_;let l=this.#e,d=i,h=s,f=null;if(t){if(i>t||s>t){const B=Math.min(t/i,t/s);d=Math.floor(i*B),h=Math.floor(s*B)}f=document.createElement("canvas");const v=f.width=Math.ceil(d*a.sx),b=f.height=Math.ceil(h*a.sy);this.#a||(l=this.#g(v,b));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let x="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(x="#8f8f9d",E="#42414d");const P=15,M=P*a.sx,R=P*a.sy,O=new OffscreenCanvas(M*2,R*2),L=O.getContext("2d");L.fillStyle=x,L.fillRect(0,0,M*2,R*2),L.fillStyle=E,L.fillRect(0,0,M,R),L.fillRect(M,R,M,R),S.fillStyle=S.createPattern(O,"repeat"),S.fillRect(0,0,v,b),S.drawImage(l,0,0,l.width,l.height,0,0,v,b)}let g=null;if(r){let v,b;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,b=l.height;else if(l=this.#e,i>e||s>e){const E=Math.min(e/i,e/s);v=Math.floor(i*E),b=Math.floor(s*E),this.#a||(l=this.#g(v,b))}const x=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});x.drawImage(l,0,0,l.width,l.height,0,0,v,b),g={width:v,height:b,data:x.getImageData(0,0,v,b).data}}return{canvas:f,width:d,height:h,imageData:g}}#v(e,t){const[r,i]=this.parentDimensions;this.width=e/r,this.height=t/i,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const s=200;this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},s)}#g(e,t){const{width:r,height:i}=this.#e;let s=r,a=i,l=this.#e;for(;s>2*e||a>2*t;){const d=s,h=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(s,a);f.getContext("2d").drawImage(l,0,0,d,h,0,0,s,a),l=f.transferToImageBitmap()}return l}#m(e,t){const r=new C_,i=Math.ceil(e*r.sx),s=Math.ceil(t*r.sy),a=this.#l;if(!a||a.width===i&&a.height===s)return;a.width=i,a.height=s;const l=this.#a?this.#e:this.#g(i,s),d=a.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(l,0,0,l.width,l.height,0,0,i,s)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,r]=this.pageDimensions,i=Math.round(this.width*t*Eh.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*Eh.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),a.transferToImageBitmap()}return structuredClone(this.#e)}#_(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#v(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static async deserialize(e,t,r){let i=null;if(e instanceof EM){const{data:{rect:S,rotation:x,id:E,structParent:P,popupRef:M},container:R,parent:{page:{pageNumber:O}}}=e,L=R.querySelector("canvas"),B=r.imageManager.getFromCanvas(R.id,L);L.remove();const $=(await t._structTree.getAriaAttributes(`${rx}${E}`))?.get("aria-label")||"";i=e={annotationType:ft.STAMP,bitmapId:B.id,bitmap:B.bitmap,pageIndex:O-1,rect:S.slice(0),rotation:x,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:P,popupRef:M}}const s=await super.deserialize(e,t,r),{rect:a,bitmap:l,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:g}=e;h&&r.imageManager.isValidId(h)?(s.#t=h,l&&(s.#e=l)):s.#i=d,s.#a=f;const[v,b]=s.pageDimensions;return s.width=(a[2]-a[0])/v,s.height=(a[3]-a[1])/b,s.annotationElementId=e.id||null,g&&(s.altTextData=g),s._initialData=i,s.#d=!!i,s}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ft.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=this.#y(!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=this.#E(r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,t===null)return r;t.stamps||=new Map;const a=this.#a?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:r}),r.bitmap=this.#y(!1);else if(this.#a){const l=t.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#y(!1))}return r}#E(e){const{rect:t,pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=e.rect.every((d,h)=>Math.abs(d-t[h])<1),a=e.pageIndex===r,l=(e.accessibilityData?.alt||"")===i;return{isSame:s&&a&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ma{#e;#t=!1;#n=null;#i=null;#s=null;#r=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([Bn,lr,yx,wn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:d,viewport:h,l10n:f}){const g=[...ma.#h.values()];if(!ma._initialized){ma._initialized=!0;for(const v of g)v.initialize(f,e)}e.registerEditorTypes(g),this.#o=e,this.pageIndex=t,this.div=r,this.#e=s,this.#n=a,this.viewport=h,this.#a=d,this.drawLayer=l,this._structTree=i,this.#o.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ft.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#m(),e){case ft.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ft.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ft.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of ma.#h.values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#a?.div}addInkEditorIfNeeded(e){if(this.#o.getMode()!==ft.INK)return;if(!e){for(const r of this.#r.values())if(r.isEmpty()){r.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const r of this.#r.values())r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#o.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!this.#n)return;const t=this.#n.getEditableAnnotations();for(const r of t){if(r.hide(),this.#o.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of this.#r.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#n){const i=this.#n.getEditableAnnotations();for(const s of i){const{id:a}=s.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=t.get(a);if(l){l.resetAnnotationElement(s),l.show(!1),s.show();continue}l=e.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(s)&&l.show(!1)),s.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of ma.#h.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#a.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#a.div.contains(t)){const{isMac:r}=Lr.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),wn.startHighlighting(this,this.#o.direction==="ltr",{target:this.#a.div,x:e.x,y:e.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#u&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return ma.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#v(e){const t=this.#f;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:r,offsetY:i}=this.#g(),s=this.getNextId(),a=this.#v({parent:this,id:s,x:r,y:i,uiManager:this.#o,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await ma.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...r});return s&&this.add(s),s}#g(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+r),d=Math.min(window.innerHeight,t+i),h=(s+l)/2-e,f=(a+d)/2-t,[g,v]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:v}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=Lr.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#t){this.#t=!0;return}if(this.#o.getMode()===ft.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===ft.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=Lr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(e,t,r){const i=this.#o.findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,iu(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#m();const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,iu(this.div,{rotation:r}),t!==r)for(const i of this.#r.values())i.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class _r{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return bt(this,"_svgFactory",new gx)}static#s(e,{x:t=0,y:r=0,width:i=1,height:s=1}={}){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`}#r(e){const t=_r._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),_r.#s(t,e),t}#l(e,t){const r=_r._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=_r._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i}draw(e,t,r,i=!1){const s=this.#t++,a=this.#r(e.box);a.classList.add(...e.classNamesForDrawing);const l=_r._svgFactory.createElement("defs");a.append(l);const d=_r._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${s}`;d.setAttribute("id",h),d.setAttribute("d",e.toSVGPath()),i&&this.#i.set(s,d);const f=this.#l(l,h),g=_r._svgFactory.createElement("use");return a.append(g),a.setAttribute("fill",t),a.setAttribute("fill-opacity",r),g.setAttribute("href",`#${h}`),this.#n.set(s,a),{id:s,clipPathId:`url(#${f})`}}drawOutline(e){const t=this.#t++,r=this.#r(e.box);r.classList.add(...e.classNamesForOutlining);const i=_r._svgFactory.createElement("defs");r.append(i);const s=_r._svgFactory.createElement("path");i.append(s);const a=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",a),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.mustRemoveSelfIntersections){const f=_r._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const g=_r._svgFactory.createElement("rect");f.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const v=_r._svgFactory.createElement("use");f.append(v),v.setAttribute("href",`#${a}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=_r._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${a}`),l&&d.setAttribute("mask",`url(#${l})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.#n.set(t,r),t}finalizeLine(e,t){const r=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),r.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){_r.#s(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var S8=at.AbortException,A8=at.AnnotationEditorLayer,C8=at.AnnotationEditorParamsType,E8=at.AnnotationEditorType,k8=at.AnnotationEditorUIManager,T8=at.AnnotationLayer,P8=at.AnnotationMode,R8=at.ColorPicker,M8=at.DOMSVGFactory,I8=at.DrawLayer,D8=at.FeatureTest,PM=at.GlobalWorkerOptions,O8=at.ImageKind,N8=at.InvalidPDFException,L8=at.MissingPDFException,j8=at.OPS,F8=at.OutputScale,B8=at.PDFDataRangeTransport,$8=at.PDFDateString,U8=at.PDFWorker,V8=at.PasswordResponses,z8=at.PermissionFlag,H8=at.PixelsPerInch,W8=at.RenderingCancelledException,q8=at.TextLayer,G8=at.UnexpectedResponseException,K8=at.Util,Y8=at.VerbosityLevel,X8=at.XfaLayer,Q8=at.build,J8=at.createValidAbsoluteUrl,Z8=at.fetchData,e9=at.getDocument,t9=at.getFilenameFromUrl,n9=at.getPdfFilenameFromUrl,r9=at.getXfaPageViewport,i9=at.isDataScheme,s9=at.isPdfFile,o9=at.noContextMenu,a9=at.normalizeUnicode,l9=at.setLayerDimensions,c9=at.shadow,RM=at.version;const L9=Object.freeze(Object.defineProperty({__proto__:null,AbortException:S8,AnnotationEditorLayer:A8,AnnotationEditorParamsType:C8,AnnotationEditorType:E8,AnnotationEditorUIManager:k8,AnnotationLayer:T8,AnnotationMode:P8,ColorPicker:R8,DOMSVGFactory:M8,DrawLayer:I8,FeatureTest:D8,GlobalWorkerOptions:PM,ImageKind:O8,InvalidPDFException:N8,MissingPDFException:L8,OPS:j8,OutputScale:F8,PDFDataRangeTransport:B8,PDFDateString:$8,PDFWorker:U8,PasswordResponses:V8,PermissionFlag:z8,PixelsPerInch:H8,RenderingCancelledException:W8,TextLayer:q8,UnexpectedResponseException:G8,Util:K8,VerbosityLevel:Y8,XfaLayer:X8,build:Q8,createValidAbsoluteUrl:J8,fetchData:Z8,getDocument:e9,getFilenameFromUrl:t9,getPdfFilenameFromUrl:n9,getXfaPageViewport:r9,isDataScheme:i9,isPdfFile:s9,noContextMenu:o9,normalizeUnicode:a9,setLayerDimensions:l9,shadow:c9,version:RM},Symbol.toStringTag,{value:"Module"}));PM.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${RM}/pdf.worker.min.mjs`;cO.createRoot(document.getElementById("root")).render(y.jsx(ot.StrictMode,{children:y.jsx(jR,{children:y.jsx(xC,{children:y.jsx(xq,{})})})}));export{Ds as $,$U as A,Vt as B,ak as C,Hp as D,Zp as E,wl as F,tm as G,gk as H,cr as I,qc as J,IW as K,QU as L,JU as M,DW as N,aP as O,Ts as P,Y5 as Q,ot as R,rV as S,wb as T,pk as U,SR as V,AR as W,CR as X,ER as Y,Is as Z,Qi as _,VU as a,Jv as a$,Ji as a0,nn as a1,Q5 as a2,ki as a3,kR as a4,QR as a5,ut as a6,sV as a7,aV as a8,D9 as a9,s_ as aA,sk as aB,ok as aC,mb as aD,A9 as aE,ck as aF,OC as aG,b9 as aH,up as aI,hF as aJ,dF as aK,uF as aL,cF as aM,Zv as aN,eV as aO,BA as aP,iV as aQ,D2 as aR,NV as aS,xv as aT,gv as aU,$p as aV,gb as aW,R2 as aX,HU as aY,lk as aZ,L2 as a_,N5 as aa,PC as ab,zU as ac,pb as ad,KU as ae,d9 as af,Ut as ag,XU as ah,sC as ai,Ve as aj,ts as ak,PS as al,tV as am,FA as an,RM as ao,PM as ap,cO as aq,xq as ar,qb as as,S9 as at,GU as au,UU as av,hO as aw,yb as ax,Mh as ay,qp as az,P5 as b,Jk as b$,qU as b0,Al as b1,gj as b2,RS as b3,w9 as b4,y9 as b5,Sk as b6,Q0 as b7,ap as b8,lp as b9,nm as bA,$W as bB,e9 as bC,ZU as bD,WU as bE,bb as bF,g_ as bG,Bk as bH,yP as bI,L9 as bJ,P8 as bK,q8 as bL,T8 as bM,I_ as bN,x9 as bO,qe as bP,my as bQ,Yk as bR,Xk as bS,gy as bT,Ib as bU,yy as bV,Zc as bW,xb as bX,dy as bY,uy as bZ,Qk as b_,nj as ba,cy as bb,Sh as bc,xo as bd,wa as be,nt as bf,eT as bg,L4 as bh,j4 as bi,Fe as bj,Ti as bk,R9 as bl,G5 as bm,I9 as bn,K5 as bo,xt as bp,M9 as bq,yR as br,C9 as bs,wR as bt,_R as bu,bR as bv,vR as bw,zV as bx,Yv as by,BW as bz,tt as c,s4 as c0,a4 as c1,l4 as c2,u4 as c3,d4 as c4,f4 as c5,h4 as c6,c4 as c7,Yz as c8,eO as c9,K1 as ca,CC as cb,AC as cc,v9 as cd,kC as ce,Tv as cf,_j as cg,yj as ch,xj as ci,kj as cj,Tj as ck,Ej as cl,uk as cm,vb as cn,fk as co,m_ as cp,aC as d,js as e,Ls as f,W_ as g,pn as h,NR as i,y as j,pN as k,Wp as l,ur as m,nV as n,go as o,BU as p,Vb as q,C as r,Se as s,zb as t,Ph as u,Hb as v,Wb as w,QP as x,Qp as y,Jp as z};
